[{"id":117519010,"iid":5021,"project_id":2670515,"title":"FF use of Orders API for subscription update","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nNow that [preview amendment using orders API](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4694) is merged, we can update the workflows to preview using the orders API using a feature flag to control its rollout.\n\nThis issue integrates the use of Orders API in subscription update workflow.\n\nThe following business scenarios need to be implemented:\n\n- Add CI minutes\n- Add seats\n- Add storage\n- Renew subscription\n- Renew subscription with true up\n- Renew subscription with upgrade\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nIn `SelfService::Subscriptions::UpdateService`, invoke `Zuora::Orders::AmendmentManagerService` if the request is to preview and FF `use_orders_api_to_preview_amendment` is enabled.\n\n### Result\n\nOrders API is used to preview subscription update.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-25T08:41:47.990Z","updated_at":"2022-10-25T13:12:24.249Z","closed_at":"2022-10-25T13:12:24.217Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5021","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5021","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5021/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5021/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5021","relative":"#5021","full":"gitlab-org/customers-gitlab-com#5021"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117517212,"iid":5020,"project_id":2670515,"title":"FF use of Orders API for subscription upgrade","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nNow that [preview amendment using orders API](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4694) is merged, we can update the workflows to preview using the orders API using a feature flag to control its rollout.\n\nThis issue integrates the use of Orders API in upgrade workflow.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nIn `Gitlab::UpgradeSubscriptionPlanService`, invoke `Zuora::Orders::AmendmentManagerService` if the request is to preview and FF `use_orders_api_to_preview_amendment` is enabled.\n\n### Result\n\nOrders API is used to preview subscription upgrade.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-25T08:34:05.451Z","updated_at":"2022-10-25T13:09:45.037Z","closed_at":"2022-10-25T13:09:45.004Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5020","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5020","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5020/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5020/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5020","relative":"#5020","full":"gitlab-org/customers-gitlab-com#5020"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9045,"epic":{"id":629636,"iid":9045,"title":"Transition Subscription Upgrade workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9045","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117516175,"iid":5019,"project_id":2670515,"title":"[Feature flag] Remove ignore_billable_field flag","description":"Remove `ignore_billable_field` flag after successful [rollout](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4960)","state":"closed","created_at":"2022-10-25T08:23:01.382Z","updated_at":"2022-12-16T13:38:14.810Z","closed_at":"2022-12-16T13:36:53.548Z","closed_by":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"labels":["backend","devops::fulfillment","feature flag","frontend","group::billing and subscription management","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"}],"author":{"id":11649502,"username":"aluthra2","name":"Aman Luthra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11649502/avatar.png","web_url":"https://gitlab.com/aluthra2"},"type":"ISSUE","assignee":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5019","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5019","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5019/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5019/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5019","relative":"#5019","full":"gitlab-org/customers-gitlab-com#5019"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":96282,"iid":173,"sequence":4,"group_id":9970,"title":"15.7 Iteration 2","description":"","state":3,"created_at":"2022-11-14T20:25:41.592Z","updated_at":"2022-12-18T00:05:02.411Z","start_date":"2022-12-04","due_date":"2022-12-17","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/96282"},"health_status":"on_track"},{"id":117507893,"iid":5017,"project_id":2670515,"title":"Transitioning from Amendment.Name in Auto renewal","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nThis issue pertains to setting `order.description` to `AutoRenew by CustomersDot` during Auto renewal when using Orders API (instead of `name`). This is required as we transition from Amend to Orders API.\n\nSee more details on the motivation behind this change in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/3784.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nParams for auto renewal is generated by `AutoRenew::AmendmentParamsGenerator` service. Update `#run` method to set `order_description` when the FF `use_orders_api_auto_renew_workflow` is enabled. Default to `name` when FF is disabled.\n\n### Result\n\nWith the implementation in this issue, the description will be set when Orders API is used for auto renewal.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-25T06:02:18.735Z","updated_at":"2023-01-13T22:34:46.381Z","closed_at":"2022-10-27T12:22:48.564Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5017","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5017","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5017/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5017/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5017","relative":"#5017","full":"gitlab-org/customers-gitlab-com#5017"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9047,"epic":{"id":629649,"iid":9047,"title":"Transition Auto renewal workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9047","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117482757,"iid":5015,"project_id":2670515,"title":"[Reseller] Update \"change linked namespace\" flow","description":"## Problem\n\nCurrently, it's possible that if the customer tries to change the linked namespace to a namespace with more seats in use than seats in the subscription, they will be asked to pay for the additional seats.  \n\nWe cannot allow this transaction in Customers Portal, since customer should be transacting through a Reseller.\n\n### How Support handles this today\n\nWhen support encounters this situation, they:\n\n1. Inform the customer that they have more users than purchased seats.\n2. Propose the following options:\n   1. Contact their purchase partner to purchase more seats.\n   2. Deal with overages at the end of the subscription term (via True-Ups).\n   3. Remove excess users.\n3. Depending on what option was selected, wait for the daily sync job to run and re-calculate the Billable users count.\n4. Link the subscription and confirm there are no overages recorded.\n\n## Proposal\n\nUpdate the `Change Linked Namespace` flow for a subscription that is purchased via a reseller.\n\n- **If they have more users in their group than purchased seats**, display a message about the overage and let the user know that they will be charged for the overage at the end of their subscription term. Allow them to associate the subscription to the namespace regardless of overages.\n- **If there is no overage** for a reseller customer, we will use the current flow (no changes needed).\n\n| Current \"Change linked namespace\" flow (No overage) | Current \"Change linked namespace\" flow (With overage)  | Proposed reseller customer \"Change linked namespace\" flow (With overage) |\n| ------ | ------ |  ------ |\n| ![image](/uploads/2366421c283f5af7917a5db837077481/image.png) | ![image](/uploads/d8331298970fe91669fc7ec270981c80/image.png) | ![image](/uploads/16db327e08bafbfb05510c490bcff64b/image.png) |\n\n### Design\n\n- Mockup in design section https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5015/designs/Change_linked_namespace_for_reseller_customers.png\n- [Figma file](https://www.figma.com/file/8qPxWBgTmLdOqSu9S1UbUx/Allow-customers-that-purchased-via-Reseller-to-access-Customers-Portal?node-id=2%3A29\u0026t=ssRQtSMzrW04gs3t-1)\n\n#### Implementation plan\n\n| Step | Issue | MR/state |\n|------|-------|-----------------------------|\n| Create a `updated_namespace_change_flow` feature flag | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5015 | ~\"workflow::complete\"  |\n| Add a new component under the FF | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5015 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/6894 ~\"workflow::complete\"  |\n| Adjust the flow to work only for reseller customers | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5015 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/6980 https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/7181 ~\"workflow::complete\" |\n| Rollout FF (staging) | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/6052 | TBD |\n| Make sure the related docs are updated | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5006 | :construction:  |\n| Rollout FF (production) | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/6052 | TBD |\n| Clean up FF | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/6052 | :one: |\n\n## Result\n\nCustomer knows how to proceed should they run into issues associating purchased subscription to a namespace.\n\n## Next steps (if any)\n\n## How will we measure success?","state":"closed","created_at":"2022-10-24T19:06:37.952Z","updated_at":"2023-04-28T21:57:11.989Z","closed_at":"2023-04-27T12:44:46.677Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["BSM::Associate Subscription to Namespace","Category:Subscription Management","SUS::Non-impacting","Technical Writing","UI text","UX","devops::fulfillment","feature::addition","frontend","group::billing and subscription management","missed:15.11","section::fulfillment","severity::4","type::feature","workflow::complete"],"milestone":{"id":2633524,"iid":80,"group_id":9970,"title":"16.0","description":"","state":"active","created_at":"2022-05-30T16:25:25.778Z","updated_at":"2022-05-30T16:25:25.778Z","due_date":"2023-05-17","start_date":"2023-04-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/80"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":8110789,"username":"tgolubeva","name":"Tatyana Golubeva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110789/avatar.png","web_url":"https://gitlab.com/tgolubeva"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":40,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5015","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":2,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5015","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5015/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5015/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5015","relative":"#5015","full":"gitlab-org/customers-gitlab-com#5015"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8941,"epic":{"id":618512,"iid":8941,"title":"Allow customers that purchased via Reseller to access Customers Portal","url":"/groups/gitlab-org/-/epics/8941","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e days remaining"},"iteration":null,"health_status":"on_track"},{"id":117471019,"iid":5013,"project_id":2670515,"title":"Update CDot's BaseTrialService to route trials to Workato","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nWe're removing Platypus from the Trial Lead workflow so that work will need to be done via other methods. Currently Customers Dot's `BaseTrialService` [posts the lead to Platypus after the lead is created](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/ceda41a8af626cecb659b2230b9e445646bb78ae/app/services/gitlab/base_trial_service.rb#L20).\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nThere are two places to change:\n - In place of the `BaseTrialService`'s existing `create_platypus_lead` create a new `create_workato_lead` method utilizing the Sidekiq worker from gitlab-org/customers-gitlab-com#5012. This new method will want to take the same information as the existing method but hand it off to a local Sidekiq queue instead of Platypus.\n - In `TrialsController`, create a new method `create_hand_raise_workato_lead` to replace existing `create_hand_raise_platypus_lead`.\n - Introduce a new feature flag `switch_lead_creation_from_platypus_to_workato`\n\n### Result\n\nWe're able to complete the full trial lead process without involving Platypus in the process.\n\n### Next steps (if any)\n\nRoll out the new method of posting Leads via a feature flag.\n\n### How will we measure success?\n\nWe will consult with the Marketing Operations team to ensure that the newly posted data in Workato conforms to expectations and will work as expected for them in downstream processes.","state":"closed","created_at":"2022-10-24T15:52:42.646Z","updated_at":"2023-02-24T16:01:47.412Z","closed_at":"2022-12-23T07:59:12.243Z","closed_by":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"labels":["Category:Fulfillment Integrations \u0026 Visibility","devops::fulfillment","group::provision","missed:15.7","section::fulfillment","type::feature","workflow::in dev"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"}],"author":{"id":12410405,"username":"isandin","name":"Isabel Sandin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12410405/avatar.png","web_url":"https://gitlab.com/isandin"},"type":"ISSUE","assignee":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5013","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5013/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5013/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5013","relative":"#5013","full":"gitlab-org/customers-gitlab-com#5013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9084,"epic":{"id":632560,"iid":9084,"title":"Remove Platypus dependency for Trials into Workato","url":"/groups/gitlab-org/-/epics/9084","group_id":9970,"human_readable_end_date":"Dec 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117470939,"iid":5012,"project_id":2670515,"title":"Create a sidekiq worker to send trials to Workato","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nWe're working to remove Platypus from the trial creation pipeline, but want to retain Workato as part of the process. Currently Platypus handles trial lead storage via an [asynchronous Bull worker](https://gitlab.com/gitlab-com/business-technology/enterprise-apps/integrations/platypus/-/blob/master/apps/server/src/marketing/commands/new-lead.command.ts#L42) that disconnects the time needed to service the request from the customer facing HTTP flow, the worker also handles posting failures to slack and email as needed.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nCreate a Sidekiq worker to do the same tasks currently being done by the Bull worker within Playtups.\n\n### Result\n\nCustomers Dot can now post new leads to Workato with the same level of error reporting currently available in Platypus.\n\n### How will we measure success?\n\nLeads can be successfully posted from Customers Dot.","state":"closed","created_at":"2022-10-24T15:51:09.627Z","updated_at":"2023-02-24T16:01:47.208Z","closed_at":"2022-12-15T04:51:18.021Z","closed_by":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"labels":["Category:Fulfillment Integrations \u0026 Visibility","devops::fulfillment","feature::addition","group::provision","section::fulfillment","type::feature","workflow::in dev"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"}],"author":{"id":12410405,"username":"isandin","name":"Isabel Sandin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12410405/avatar.png","web_url":"https://gitlab.com/isandin"},"type":"ISSUE","assignee":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5012","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5012","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5012/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5012/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5012","relative":"#5012","full":"gitlab-org/customers-gitlab-com#5012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9084,"epic":{"id":632560,"iid":9084,"title":"Remove Platypus dependency for Trials into Workato","url":"/groups/gitlab-org/-/epics/9084","group_id":9970,"human_readable_end_date":"Dec 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117470866,"iid":5011,"project_id":2670515,"title":"Create Workato service within CDot","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nCustomers Dot is not currently able to communicate with Workato to post leads from trials.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nWorkato uses OAuth and a REST api, customers dot already includes gems for handling both of those methods of communication. We just need to take the pieces and assemble them into a service that will allow us to post leads to Workato in a practical convenient way. To do this we will create a service that will abstract secret handling and routing requests to the correct end point on Workato.\n\nThe only method that we need to implement at present is POSTing to `https://apim.workato.com/marketo/lead`. There isn't solid documentation on fields available with that end point, however the [existing Platypus Service](https://gitlab.com/gitlab-com/business-technology/enterprise-apps/integrations/platypus/-/blob/master/apps/server/src/marketing/commands/new-lead.command.ts#L12) includes the names and types of all of the elements that we would want to include in our request.\n\nWe also need to create a new `Workato::LogLeadService` to replace existing `Platypus::LogLeadService`\n\n### Result\n\nThere is a convenient service available to help facilitate the implementation of other tickets under this epic.\n\n### How will we measure success?\n\nWork on gitlab-org/customers-gitlab-com#5013 is able to proceed.","state":"closed","created_at":"2022-10-24T15:49:57.213Z","updated_at":"2023-04-28T19:44:49.703Z","closed_at":"2022-12-15T04:04:27.194Z","closed_by":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"labels":["Category:Fulfillment Integrations \u0026 Visibility","devops::fulfillment","group::provision","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"}],"author":{"id":12410405,"username":"isandin","name":"Isabel Sandin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12410405/avatar.png","web_url":"https://gitlab.com/isandin"},"type":"ISSUE","assignee":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5011","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5011","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5011/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5011/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5011","relative":"#5011","full":"gitlab-org/customers-gitlab-com#5011"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9084,"epic":{"id":632560,"iid":9084,"title":"Remove Platypus dependency for Trials into Workato","url":"/groups/gitlab-org/-/epics/9084","group_id":9970,"human_readable_end_date":"Dec 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117294238,"iid":5007,"project_id":2670515,"title":"[Reseller] Create feature flag to allow customers to login","description":"### Proposal\nCreate a new feature flag to allow customers created via reseller flow to login.\n\n\n### Result\nFeature flag [created](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/175/edit) as `reseller_access`.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-21T07:44:46.911Z","updated_at":"2022-12-08T11:03:47.427Z","closed_at":"2022-11-03T21:31:58.726Z","closed_by":{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"},"labels":["Category:Subscription Management","Unplanned","devops::fulfillment","feature flag","feature::addition","frontend","group::billing and subscription management","section::fulfillment","type::feature","workflow::feature-flagged"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"}],"author":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"type":"ISSUE","assignee":{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5007","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":2,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5007","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5007/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5007/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5007","relative":"#5007","full":"gitlab-org/customers-gitlab-com#5007"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8941,"epic":{"id":618512,"iid":8941,"title":"Allow customers that purchased via Reseller to access Customers Portal","url":"/groups/gitlab-org/-/epics/8941","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e days remaining"},"iteration":{"id":86630,"iid":151,"sequence":2,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-10-04T21:31:23.242Z","updated_at":"2022-11-18T00:05:02.385Z","start_date":"2022-11-03","due_date":"2022-11-17","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/86630"},"health_status":null},{"id":117290828,"iid":5003,"project_id":2670515,"title":"[Reseller] Update details in email sent out on purchasing/renewing SaaS subscription","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\nCurrently the email which is sent out to customers on purchasing subscriptions via reseller flow mentions that they would not have access to the CustomersDot account. With https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5002, we would be allowing such customers to login to CustomersDot account.\nWe should update the email body to change this communication. \n\nCurrent email sent - \n![image](/uploads/168258b33f10ee08fbd1baa92627a1e2/image.png)\n\n### Proposal\n\nUpdate email body to remove the part which mentions that customer will not have access to the CustomersDot portal.  This should be behind the feature flag created in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5007.\n\n### Proposed email text\n\n_Anchor links remain the same as current implementation._\n\n---\n\n**Subject: [GitLab Transactions] Set up your new subscription to get started**\n\n---\n\nHi Sharmad :wave: \n\nThanks for purchasing a GitLab.com subscription. To set up your new subscription, you must link it to a group. Complete the following steps:\n\n1. Create your GitLab account.\n   - If you're already registered, [sign in](link).\n1. Select the group for your subscription.\n   - Create a new group or for an existing group, make sure you have the [Owner](link) role.\n1. Sign in to your Customers Portal account. \n   - If this is your first purchase, we've sent you an email with instructions to set your password and access your account.\n1. Link your GitLab account and subscription.\n   - [Link your GitLab user account to your Customers Portal account](link).\n   - [Link the subscription to your namespace](link).\n1. [View your GitLab SaaS subscription](link) to confirm it's linked to a group.\n\nIf you require assistance, contact GitLab support.\n\nThanks,\n\nThe GitLab Team\n\n---\n\n### Result\n\nReseller customer receives correct information about getting access to Customers Portal and provisioning their SaaS subscription.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-21T06:47:37.753Z","updated_at":"2023-05-05T21:49:42.138Z","closed_at":"2023-05-05T11:13:40.451Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["Category:Subscription Management","SUS::Non-impacting","Technical Writing","UI text","devops::fulfillment","feature::enhancement","frontend","group::billing and subscription management","section::fulfillment","type::feature","workflow::complete"],"milestone":{"id":2633524,"iid":80,"group_id":9970,"title":"16.0","description":"","state":"active","created_at":"2022-05-30T16:25:25.778Z","updated_at":"2022-05-30T16:25:25.778Z","due_date":"2023-05-17","start_date":"2023-04-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/80"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":42,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5003","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5003","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5003/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5003/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5003","relative":"#5003","full":"gitlab-org/customers-gitlab-com#5003"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8941,"epic":{"id":618512,"iid":8941,"title":"Allow customers that purchased via Reseller to access Customers Portal","url":"/groups/gitlab-org/-/epics/8941","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":117267921,"iid":4998,"project_id":2670515,"title":"[SPIKE]: Investigate \"PaymentFormsController#show\" speed","description":"From: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4918#note_1142253500\n\n### Problem\n`PaymentFormsController#show` fails to meet it's apdex requirements 70% of the time.\n\n### Context\n`PaymentFormsController#show` is currently set at `:default` urgency. This means it will fail apdex if requests take longer than 1 second. [Reference](https://docs.gitlab.com/ee/development/application_slis/rails_request_apdex.html#how-to-adjust-the-urgency)\n\nOn average, these requests are taking longer than 1 second 70% of the time:\n![Screen_Shot_2022-10-19_at_3.13.25_PM](/uploads/2d8e92b5853f55d15de641c8fbf4d5d0/Screen_Shot_2022-10-19_at_3.13.25_PM.png)\n\n### Results\n1. Find way to optimize endpoint so requests take less than 1 second.\n2. If not possible, decrease the urgency so we allow up to 5s.","state":"closed","created_at":"2022-10-20T18:11:34.357Z","updated_at":"2023-01-17T14:44:39.501Z","closed_at":"2023-01-17T13:40:04.723Z","closed_by":{"id":11257463,"username":"bhrai","name":"Bishwa Hang Rai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11257463/avatar.png","web_url":"https://gitlab.com/bhrai"},"labels":["ARM::Consider for 15.8","Category:Purchase","backend","devops::fulfillment","group::purchase","purchase direction::admin","section::fulfillment","type::maintenance","workflow::in dev"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":11257463,"username":"bhrai","name":"Bishwa Hang Rai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11257463/avatar.png","web_url":"https://gitlab.com/bhrai"}],"author":{"id":3614911,"username":"rcobb","name":"Ryan Cobb","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7047b7014264f07daf9836e55fc5ef4c?s=80\u0026d=identicon","web_url":"https://gitlab.com/rcobb"},"type":"ISSUE","assignee":{"id":11257463,"username":"bhrai","name":"Bishwa Hang Rai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11257463/avatar.png","web_url":"https://gitlab.com/bhrai"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4998","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4998","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4998/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4998/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4998","relative":"#4998","full":"gitlab-org/customers-gitlab-com#4998"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117227617,"iid":4997,"project_id":2670515,"title":"Enable use of Orders API in Reconciliation workflow","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\n`ReconciliationService` currently uses [Amend API](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/1c7002a2ef484ff3db77db80be29a08785e1b339/app/services/reconciliation_service.rb#L101) to perform reconciliation. Update it to use Orders API instead.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nUpdate `ReconciliationService#amend_subscription` to invoke `Zuora::Orders::AmendmentManagerService` with appropriate params when the FF `use_orders_api_reconciliation_workflow` is enabled.\n\n### Result\n\nReconciliation is performed appropriately when Orders API is used.\n\nVerify: `contract_effective_date`, updated `quantity`.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-20T09:51:05.588Z","updated_at":"2022-10-20T09:52:03.514Z","closed_at":"2022-10-20T09:52:03.486Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4997","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4997","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4997/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4997/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4997","relative":"#4997","full":"gitlab-org/customers-gitlab-com#4997"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9048,"epic":{"id":629651,"iid":9048,"title":"Transition Reconciliation (QSR) workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9048","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":117146932,"iid":4996,"project_id":2670515,"title":"New CustomersDot feature categorization","description":"## Proposal\n\nAs part of [this MR](https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/112379), new feature categories have been added for the Fulfillment team. \n\nWe then need to update the CustomersDot app accordingly so that it uses the new feature categories.\n\n## New categories\n\nDescriptions about these 12 categories can be found in [the `data/categories.yml` file](https://gitlab.com/gitlab-com/www-gitlab-com/blob/b7c70a880e1677eaf1526a69e5729b55a3cbfef7/data/categories.yml#L2516).\n\nFor ~\"group::purchase\":\n  - `purchase`\n\nFor ~\"group::provision\":\n  - `sm_provisioning`\n  - `saas_provisioning`\n\nFor ~\"group::utilization\":\n  - `subscription_usage_reports`\n  - `subscription_cost_management`\n\nFor ~\"group::fulfillment platform\":\n  - `fulfillment_infrastructure`\n  - `fulfillment_developer_productivity`\n  - `customersdot_application`\n\nFor ~\"group::billing and subscription management\":\n  - `billing_and_payments`\n  - `subscription_management`\n\nFor ~\"group::commerce integrations\":\n  - `commerce_integrations`\n\nFor ~\"group::fulfillment admin tooling\": \n  - `fulfillment_admin_tooling`\n\n\n## Feature Category tables\n\nThe tables below have been copy-pasted from [this issue](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4859). \n\n## Controllers\n\n| Name | Current group / feature category | New feature category |\n| ------ | ------ | ------ |\n| `Admins::OmniauthCallbacksController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `Customers::OmniauthCallbacksController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `DeviseController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `EmailConfirmationsController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `Gitlab::NamespacesController` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `GraphqlController` | ~\"group::not_owned\" |  |\n| `InstanceReviewController` | ~\"group::utilization\"  | `subscription_usage_reports` |\n| `InstanceReviewSettingsController` | ~\"group::utilization\"  | `subscription_usage_reports` |\n| `InvoicesController` | ~\"group::billing and subscription management\" | `billing_and_payments` |\n| `LicensesController` | ~\"group::provision\" | `sm_provisioning` |\n| `MarketoController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `OrdersController` | ~\"group::purchase\" | `purchase` |\n| `PaymentFormsController` | ~\"group::purchase\" | `purchase` |\n| `PaymentMethodsController` |  ~\"group::billing and subscription management\" | `billing_and_payments`  |\n| `PlansController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `CouponsController` | ~\"group::purchase\" | `purchase` |\n| `RailsAdmin::ApplicationController` | ~\"group::fulfillment platform\" | `fulfillment_admin_tooling` |\n| `RegistrationsController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `SessionsController` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `SubscriptionUpgradesController` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `Subscriptions::CommunityProgramController` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `SubscriptionsController` | ~\"group::not_owned\" |  |\n| `TrialsController` | ~\"group::not_owned\" | `saas_provisioning`  |\n| `ZuoraCallbacksController` | ~\"group::provision\" | `customersdot_application` |\n\n## Workers\n\n| Name | Current group / feature category | New feature category |\n| ------ | ------ | ------ |\n| `Platypus::CreateLeadWorker` | ~\"group::commerce integrations\"  | `commerce_integrations`  |\n| `Platypus::MarkSubscriptionProvisionedWorker` | ~\"group::commerce integrations\"  | `commerce_integrations` |\n| `Salesforce::CreateAccountWorker` | ~\"group::commerce integrations\" | `commerce_integrations` |\n| `Salesforce::CreateLeadWorker` | ~\"group::commerce integrations\" | `commerce_integrations` |\n| `Salesforce::CreateOpportunityForUpcomingReconciliationWorker` | ~\"group::commerce integrations\" | `commerce_integrations` |\n| `Salesforce::CreateOpportunityWorker` | ~\"group::commerce integrations\" | `commerce_integrations` |\n| `Salesforce::CreateQuoteForReconciliationWorker` | ~\"group::commerce integrations\" | `commerce_integrations` |\n| `Salesforce::FindOrCreateLeadWorker` | ~\"group::commerce integrations\" | `commerce_integrations` |\n| `ZuoraCallout::BaseWorker` | ~\"group::provision\" | `customersdot_application` |\n| `ZuoraCallout::OrderProcessedWorker` | ~\"group::provision\" | `customersdot_application` |\n| `ZuoraCallout::SubscriptionTermStartWorker` | ~\"group::provision\" | `customersdot_application` |\n| `CreateAmendmentWorker` | ~\"group::billing and subscription management\"  | `subscription_management`  |\n| `SelfHostedUsageNotifier` | ~\"group::utilization\"  | `subscription_usage_reports` |\n| `SkipReconciliationWorker` | ~\"group::billing and subscription management\" | `subscription_management`  |\n| `UpdateGitlabPlanInfoWorker` | ~\"group::provision\" | `saas_provisioning` |\n| `UpdateGitlabUpcomingReconciliationsWorker` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `UpdateSubscriptionEoaStarterBronzeOfferWorker` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `UpdateZuoraSubscriptionNamespaceDataWorker` | ~\"group::provision\" | `saas_provisioning` |\n| `ZuoraCallbackWorker` | ~\"group::provision\" | `customersdot_application` |\n\n## Jobs\n\n| Name | Current group / feature category | New feature category |\n| ------ | ------ | ------ |\n| `AutoRenew::UpcomingNotificationCronJob` | ~\"group::billing and subscription management\"| `subscription_management`  |\n| `AutoRenew::UpcomingNotificationJob` | ~\"group::billing and subscription management\"| `subscription_management` |\n| `Gitlab::SyncMinutesJob` | ~\"group::utilization\" | `subscription_usage_reports` |\n| `Gitlab::SyncOrderJob` | ~\"group::provision\" | `saas_provisioning`  |\n| `HealthCheckCron::CheckGitlabJob` | ~\"group::fulfillment platform\" | `fulfillment_infrastructure` |\n| `HealthCheckCron::CheckZuoraJob` | ~\"group::fulfillment platform\" | `fulfillment_infrastructure` |\n| `Quality::TestAccountCleanupCronJob` | ~\"group::not_owned\" | `fulfillment_developer_productivity` |\n| `Reconciliations::SendSeatOverageNotificationJob` | ~\"group::billing and subscription management\"| `subscription_management` |\n| `AutoRenewCronJob` | ~\"group::billing and subscription management\"| `subscription_management` |\n| `AutoRenewJob` | ~\"group::billing and subscription management\"| `subscription_management` |\n| `BulkDownloadInvoiceJob` | ~\"group::billing and subscription management\" | `billing_and_payments` |\n| `DownloadMonthlyInvoiceCronJob` | ~\"group::billing and subscription management\" | `billing_and_payments` |\n| `ExpireOrderCronJob` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `ExpireOrderJob` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `OrphanedComSubscriptionEmailCronJob` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `QueueReconciliationIntroEmailJob` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `ReconciliationCronJob` | ~\"group::billing and subscription management\"  | `subscription_management` |\n| `ReconciliationJob` | ~\"group::billing and subscription management\"  | `subscription_management` |\n| `RetryDeclinedReconciliationJob` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `SaasUpcomingReconciliationAlertJob` | ~\"group::billing and subscription management\"| `subscription_management` |\n| `SendUpcomingReconciliationEmailJob` | ~\"group::billing and subscription management\"| `subscription_management` |\n| `SubmitSeatUtilizationDataReminderCronJob` | ~\"group::provision\" | `sm_provisioning` |\n| `SubmitSeatUtilizationDataReminderJob` | ~\"group::provision\" | `sm_provisioning` |\n| `UnlinkedComSubscriptionNotificationJob` | ~\"group::fulfillment platform\" | `customersdot_application` |\n| `UpcomingReconciliationNotificationCronJob` | ~\"group::billing and subscription management\" | `subscription_management` |\n| `Zuora::*` | ~\"group::not_owned\" | `customersdot_application` |","state":"closed","created_at":"2022-10-19T06:27:05.585Z","updated_at":"2022-12-21T12:07:22.977Z","closed_at":"2022-12-20T13:36:04.984Z","closed_by":{"id":273486,"username":"jameslopez","name":"James Lopez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/273486/avatar.png","web_url":"https://gitlab.com/jameslopez"},"labels":["devops::fulfillment","group::fulfillment platform","maintenance::workflow","missed:15.6","missed:15.7","section::fulfillment","type::maintenance"],"milestone":{"id":2745650,"iid":84,"group_id":9970,"title":"15.9","description":"","state":"active","created_at":"2022-08-22T16:58:02.303Z","updated_at":"2022-08-22T16:58:02.303Z","due_date":"2023-02-17","start_date":"2023-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/84"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4996","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4996","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4996/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4996/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4996","relative":"#4996","full":"gitlab-org/customers-gitlab-com#4996"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116913715,"iid":4985,"project_id":2670515,"title":"Rename Account model to BillingAccount","description":"### Background\n\nIn today's [sync meeting](https://docs.google.com/document/d/1_YbxNCo3KXK1-KdIZTgSvmU9kIslYjQnFZAmmu1DSqQ/edit#heading=h.lif00r71v2kb), it was suggested that the `Account` model name could be improved by renaming to `BillingAccount`.  This should avoid confusion in thinking an `Account` in CustomersDot is the same as a GitLab `Organization`.\n\nWe also want to standardize naming across our Order to Cash systems in https://gitlab.com/groups/gitlab-org/-/epics/9018.  Given this, we've identified the column name `BillingAccount.name` should be `BillingAccount.zuora_account_name` to avoid confusion.\n\n### Proposal\n\nRename the `Account` model to `BillingAccount` avoid confusion.  Given we are renaming `Account`, let's also rename `AccountMembership` as well.\n\n- Rename model `Account` to `BillingAccount`\n   - Rename DB table `accounts` to `billing_accounts`\n- Rename model `AccountMembership` to `BillingAccountMembership`\n   - Rename DB table `account_memberships` to `billing_account_memberships`\n\nAlso rename the column `BillingAccount.name` to `BillingAccount.zuora_account_name`.","state":"closed","created_at":"2022-10-14T18:15:25.767Z","updated_at":"2022-11-02T21:16:54.576Z","closed_at":"2022-10-28T15:13:47.884Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","section::fulfillment","workflow::in review"],"milestone":null,"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":11,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4985","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4985","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4985/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4985/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4985","relative":"#4985","full":"gitlab-org/customers-gitlab-com#4985"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116852923,"iid":4980,"project_id":2670515,"title":"Investigate: `invoice.DMRC` mismatch during Renewal+Upgrade","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nDuring Renewal + Upgrade, `DMRC` for the invoice's rate plan charge when triggered by Amendment vs Orders API is different.\n\n|  | Amendment API | Orders API |\n|--|---------------|------------|\n| Subscription link | [Link](https://apisandbox.zuora.com/platform/subscriptions/8ad0877b83babdd00183ce8be0050f0d) | [Link](https://apisandbox.zuora.com/platform/subscriptions/8ad09c4b83bacd5d0183ce8563260443) |\n| Invoice Item ID | `8ad0877b83babdd00183ce8be0f40f29` | `8ad09c4b83bacd5d0183ce8565010532` |\n| Rate Plan Charge ID | `8ad0877b83babdd00183ce8be0440f1d` | `8ad09c4b83bacd5d0183ce8563af046f` |\n| DMRC | **0** | **1188** |\n\n**Steps to reproduce**:\n\n* Purchase a Premium Subscription\n* Login to CDot\n* In the subscription card, select 'Renew'\n* Select Ultimate plan, enter quantity and submit\n\n**Additional references**:\n\n* See tab two (`Renewal + Upgrade`) in [spreadsheet](https://docs.google.com/spreadsheets/d/1mydR5iZd4709tLkKRal30vE3Xad1dsxGOzCwhiwB7HQ/edit#gid=179256484) for full comparison\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-13T19:12:42.771Z","updated_at":"2023-04-13T22:14:53.663Z","closed_at":"2023-04-13T22:14:53.635Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","missed:15.10","missed:15.6","missed:15.7","missed:15.8","missed:15.9","section::fulfillment","type::feature","workflow::problem validation"],"milestone":{"id":2910456,"iid":86,"group_id":9970,"title":"15.11","description":"","state":"active","created_at":"2022-12-13T20:08:46.985Z","updated_at":"2022-12-13T20:08:46.985Z","due_date":"2023-04-17","start_date":"2023-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/86"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4980","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4980","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4980/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4980/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4980","relative":"#4980","full":"gitlab-org/customers-gitlab-com#4980"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116844100,"iid":4973,"project_id":2670515,"title":"[UX] Navigation for CDot to represent new User/BillingAccount data structure","description":"## Problem\n\nRight now a Customer record in CustomersDot represents a mixture of a physical user (Zuora Contact) and an Account (Zuora Customer Account). As discussed in https://gitlab.com/groups/gitlab-org/-/epics/8331+, this is a problem for a few reasons, leading to a variety of bugs. The ~\"group::fulfillment platform\" team is working to correct this by introducing new data models to allow for Accounts and Account Memberships (and renaming Customers to Users to reduce confusion). Multiple Users in CDot should be able to be associated with a BillingAccount. On the flip side, one User record should be able to be associated with multiple BillingAccount (through BillingAccountMemberships).\n\nThe UI for CustomersDot currently only supports one User per BillingAccount and one BillingAccount per User. As we work on updating the data structure, we need to think about IA and navigational changes to allow an Account to have multiple billing managers and a User to have multiple BillingAccountMemberships.\n\n## Proposal\n\nExplore how the new data structure will impact the IA and navigation of CDot.\n\n- How/where do Users manage their personal user data vs data associated with an BillingAccount(s)?\n- How/where do Users associate additional Customers with an BillingAccount?\n- If a User has multiple BillingAccount memberships, how does the choose which BillingAccount they are managing before the normal operations and features are shown, like Managing Purchases or Editing Account information?\n\nWhile the output of this issue will be the final design/specs of the navigation for a customer with a single BillingAccount only, this issue will also explore, design, and validate navigation for customers with _multiple_ BillingAccounts (because we want to make sure that the navigation will scale to that use case).\n\n### Information architecture\n\n\u003cdetails\u003e\u003csummary\u003eClick to expand\u003c/summary\u003e\n\nI wanted to understand how the new User/BillingAccount data architecture and IA will impact CDot navigation. \n\n:art: [Figma file](https://www.figma.com/file/6eubaRn3G9YP5PmVsHijlr/Navigation-for-CDot-to-represent-new-Customer%2FAccount-data-structure?node-id=0%3A1) for the explorations\n\n#### Process\n\nTo start, I did a site map of the current state of CDot. I wanted to understand which information that currently lives under the User model will be moving to the BillingAccount model. Based on information in this [thread](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4799#note_1100958075) and https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4799 and https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4793, I highlighted all affected information/pages in blue. \n\n![image](/uploads/bf7ceeed3af0db542495d2969e15821c/image.png)\n\nFrom there, I started reorganizing and grouping the information, making a clearer distinction between what information lives on the User model and what information lives on the BillingAccount model. The team has already ironed out these details as part of spike/exploration work in https://gitlab.com/groups/gitlab-org/-/epics/8331, so this is really just a visualization of that work and thinking through how a user might access it and interact with it.\n\n![image](/uploads/061023388554b5acf03dd127f70ce8da/image.png)\n\nBecause it's important to think about the navigation and IA holistically, the site map is based on the end state of https://gitlab.com/groups/gitlab-org/-/epics/8331+. However, I also wanted to think about how this work breaks down and how it fits into the iterations that we've outlined in that Epic. \n\nI mapped out which parts of the experience would be tackled as part of each iteration (and other key Fulfillment projects like https://gitlab.com/groups/gitlab-org/-/epics/8905+).\n\n![image](/uploads/ea4cd5f8b93442fa5ee5c5ed3d824d8a/image.png)\n\n\u003c/details\u003e\n\n### Wireframes\n\n**:clapper: Check out the [video walkthrough](https://youtu.be/pbT0Wn4kWJQ)! (5 1/2 minutes)**\n\nTopics addressed in the video:\n\n* How does the introduction of the BillingAccount impact the *current* information architecture of CDot?\n* How will the information architecture change to support the BillingAccount structure?\n* What navigation options have been explored to represent that BillingAccount relationship to the user?\n* What are the next steps and how can I give feedback?\n\nSee [this comment](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4973#note_1285983310) for more details about the wireframes and how to give feedback.\n\n### Visual designs\n\nBased on the feedback on the wireframes, I explored a variety of different visual designs for the navigation. There were two different designs that moved forward into solution validation.\n\n| Option 1: Dropdown switcher in the left sidebar | Option 2: Account info page header with button to switch Accounts  |\n| ------ | ------ |\n| ![image](/uploads/58178fbb675257b75fd0542ad5378707/image.png)  | ![image](/uploads/db830f150dd55f4350d26b7e9e0bf12a/image.png) |\n\n### Prototypes\n\nEach of the two visual design options were built out into full prototypes for user testing.\n\n**Important note:** The content and design of many of the pages (such as the My accounts page, the Account details page, and the Billing managers page) is **not final or finished**. There are separate UX issues open to fully design and test these pages. But in order to test the navigation, there needed to be _something_ on those pages, so I threw together quick mockups for the purposes of the user test. \n\n**Prototype links**\n  * [Navigation Option 1](https://www.figma.com/proto/iCqd9J7DOCTS7Q3CDcKdPX/Subscription-management?page-id=33%3A17506\u0026node-id=87%3A27374\u0026viewport=-22%2C1031%2C0.13\u0026scaling=scale-down\u0026starting-point-node-id=87%3A27374\u0026disable-default-keyboard-nav=1\u0026hotspot-hints=0\u0026hide-ui=1)\n  * [Navigation Option 2](https://www.figma.com/proto/iCqd9J7DOCTS7Q3CDcKdPX/Subscription-management?page-id=33%3A17506\u0026node-id=125%3A36077\u0026viewport=-20%2C2321%2C0.13\u0026scaling=scale-down\u0026starting-point-node-id=125%3A36077\u0026disable-default-keyboard-nav=1\u0026hotspot-hints=0\u0026hide-ui=1)\n\n### Solution validation \n\n**:clapper: Want a quick(ish) overview?** I put together an [overview video](https://www.youtube.com/watch?v=Bq4Ywc58ISk) (7 mins) walking through the goals of the research, the prototypes we tested, and the results.\n\n**:book: Want to dig into the findings?** If you're interested in the more detailed insights, check out the solution validation [issue description](https://gitlab.com/gitlab-org/ux-research/-/issues/2149#what-did-we-learn). (You can also find the full research plan and links to the prototypes that we tested in that issue.)\n\n## Final design and specs\n\n#### :arrow_right: :art: [Figma link for final designs and specs](https://www.figma.com/file/iCqd9J7DOCTS7Q3CDcKdPX/Navigation-for-CDot-to-represent-User%2FBillingAccount-data-structure?node-id=265%3A29947\u0026t=pjeyODWa9X6SfD3J-1)\n\n**Important note:** The output of this issue is the final designs/specs for navigation for users with **only a single BillingAccount** (because in https://gitlab.com/groups/gitlab-org/-/epics/8951+, a user will only be able to have a single BillingAccount association).\n\n![image](/uploads/4fb9fbc95c2e54c766b307c964b1a2bd/image.png)\n\n## Follow-ups and next steps\n\n- The design for the navigation for mobile/small screens will be handled in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/6051+\n- While the navigation for users with multiple BillingAccounts has already been largely designed and validated in this issue, the final designs and specs will be handled in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4791+","state":"closed","created_at":"2022-10-13T15:48:56.857Z","updated_at":"2023-04-26T08:49:41.744Z","closed_at":"2023-03-17T21:39:26.440Z","closed_by":{"id":4377833,"username":"esybrant","name":"Emily Sybrant","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4377833/avatar.png","web_url":"https://gitlab.com/esybrant"},"labels":["Category:Billing \u0026 Payments","UX","[deprecated] Category:Billing and Subscription Management","[deprecated] Category:Fulfillment Platform","customer","devops::fulfillment","feature::addition","group::billing and subscription management","missed:15.5","section::fulfillment","type::feature","workflow::planning breakdown"],"milestone":{"id":2745651,"iid":85,"group_id":9970,"title":"15.10","description":"","state":"active","created_at":"2022-08-22T16:58:22.132Z","updated_at":"2022-08-22T16:58:22.132Z","due_date":"2023-03-17","start_date":"2023-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/85"},"assignees":[{"id":4377833,"username":"esybrant","name":"Emily Sybrant","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4377833/avatar.png","web_url":"https://gitlab.com/esybrant"}],"author":{"id":4377833,"username":"esybrant","name":"Emily Sybrant","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4377833/avatar.png","web_url":"https://gitlab.com/esybrant"},"type":"ISSUE","assignee":{"id":4377833,"username":"esybrant","name":"Emily Sybrant","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4377833/avatar.png","web_url":"https://gitlab.com/esybrant"},"user_notes_count":53,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4973","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":3,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4973","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4973/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4973/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4973","relative":"#4973","full":"gitlab-org/customers-gitlab-com#4973"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9838,"epic":{"id":739950,"iid":9838,"title":"UX and Solution Validation for Iteration 1B","url":"/groups/gitlab-org/-/epics/9838","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":116841687,"iid":4971,"project_id":2670515,"title":"[Rollout plan] Orders API for subscription amendments","description":"The aim of this issue is to track the rollout of Orders API when updating (amending) a Zuora subscription.\n\n#### Non-preview mode:\n\n|Scenario|FF name|Testing issue| FF rollout issue | Status |\n|--------|-------------|-------|------------------|--------|\n|Upgrade Subscription| `use_orders_api_upgrade_workflow` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5052  | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5050 | :white_check_mark: Enabled on production |\n|Update Subscription \u003cbr/\u003e \u003cbr/\u003e Includes the following scenarios: \u003cbr/\u003e - `Purchase additional seats` \u003cbr/\u003e - `CI minutes purchase` \u003cbr/\u003e - `Storage purchase` \u003cbr/\u003e - `Renew without upgrade` \u003cbr/\u003e - `Renew with upgrade` \u003cbr/\u003e - `Renew with purchase of true ups` | `use_orders_api_subscription_update_workflow` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5062 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4775 | :white_check_mark: Enabled on production |\n|Auto renewal| `use_orders_api_auto_renew_workflow` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5065 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5064 | :white_check_mark: Enabled on production |\n|Reconciliation| `use_orders_api_reconciliation_workflow` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5067 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5066 | :white_check_mark: Enabled on production |\n|Custom auto renew rake task| -NA- | -NA- | -NA- | It is a [one time rake task](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/2285) that was completed a year ago. \u003cbr/\u003e \u003cbr/\u003e Confirmed the rake task is not required: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4784#note_1152442502. |\n\n#### Preview mode:\n\n|Scenario|FF name|Testing issue| FF rollout issue | Status |\n|--------|-------------|-------------|------------| -------|\n|Upgrade Subscription| `use_orders_api_to_preview_upgrade` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5053 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5051 | :white_check_mark: Enabled on production |\n|Update Subscription \u003cbr/\u003e \u003cbr/\u003e Includes the following scenarios: \u003cbr/\u003e - `Purchase additional seats` \u003cbr/\u003e - `CI minutes purchase` \u003cbr/\u003e - `Storage purchase` \u003cbr/\u003e - `Renew without upgrade` \u003cbr/\u003e - `Renew with upgrade` \u003cbr/\u003e - `Renew with purchase of true ups` | `use_orders_api_to_preview_amendment` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5063 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4774 | :white_check_mark: Enabled on production |\n|Upcoming reconciliation email job| `use_orders_api_to_preview_quoted_invoice_amount` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5069 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5068 | :white_check_mark: Enabled on production |\n|Validating quoted invoice during reconciliation| `use_orders_api_to_preview_quoted_invoice_amount` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5069 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5068 | :white_check_mark: Enabled on production |\n|Ineligibility for auto renewal notification job| `use_orders_api_preview_in_upcoming_saas_mailer` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5071 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5070 | :white_check_mark: Enabled on production |\n|Upcoming auto renewal notification job| `use_orders_api_preview_in_upcoming_saas_mailer` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5071 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5070 | :white_check_mark: Enabled on production |\n|Order Preview GraphQL endpoint| `use_orders_api_in_preview_graphql_resolver` | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5073 | https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5072 | :white_check_mark: Enabled on production |","state":"closed","created_at":"2022-10-13T15:10:48.854Z","updated_at":"2022-12-19T21:30:53.158Z","closed_at":"2022-12-16T23:17:11.111Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["devops::fulfillment","feature flag","feature::consolidation","group::fulfillment platform","section::fulfillment","type::feature"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4971","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4971","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4971/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4971/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4971","relative":"#4971","full":"gitlab-org/customers-gitlab-com#4971"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116836724,"iid":4970,"project_id":2670515,"title":"Account details form updates BillingAccount model","description":"### Problem\n\nThe current Account details form in CustomersDot updates the `Customer` (to be renamed `User`) record which has ActiveRecord callbacks to update the Zuora Account and Zuora Contact.  The Zuora Contact updated by this callback is [simply the first Zuora Contact associated to the Zuora Account](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/58c2d92e7fb4892f2326423300e6b9f6267a9632/app/services/update_contact_service.rb#L26).  It is a known bug that if the Zuora Account has more than one Zuora Contact, there is no guarantee this logic updates the correct Zuora Contact.\n\nFor reference, here's what the page looks like currently:\n![Screen_Shot_2022-09-12_at_6.02.09_PM](/uploads/34922ad336fcff352258ac3c31cda96c/Screen_Shot_2022-09-12_at_6.02.09_PM.png)\n\nNow that `BillingAccount` information is being stored locally, this form should also update `BillingAccount` locally as well as in Zuora.\n\n### Proposal\n\nThe Account details form should allow the following:\n- Show and update (local) `BillingAccount` record\n- Show and update (remote) Zuora Account\n- Show and update (remote) Zuora Contact (the correct one)\n\nThe look of the form should not need to change in this iteration as the app still only allows one `BillingAccount` per `Customer` (to be renamed `User`).  This form will be updated in later iterations as well, both in https://gitlab.com/groups/gitlab-org/-/epics/8951+ and https://gitlab.com/groups/gitlab-org/-/epics/8986+.","state":"closed","created_at":"2022-10-13T14:25:56.614Z","updated_at":"2023-01-18T04:58:45.112Z","closed_at":"2022-12-07T04:38:05.866Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4970","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4970","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4970/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4970/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4970","relative":"#4970","full":"gitlab-org/customers-gitlab-com#4970"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116774753,"iid":4957,"project_id":2670515,"title":"Customers with different BillTo/SoldTo contacts on the Zuora account are not receiving a Welcome email","description":"### Problem\n\nAs identified in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4924+, customers that are purchasing directly from GitLab via a Sales Rep are not receiving the Customers Portal [welcome email](https://gitlab.com/gitlab-org/customers-gitlab-com/uploads/92e7ac101afa342c73a8896285e83ef6/welcome-to-portal-email.png). This only happens if the Sales Order (and Zuora account) has different contacts for BillTo and SoldTo.\n\n### Proposal\n\nPer [suggestion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4924#note_1126792349) from `@tyleramos`:\n\n\u003e\u003e\u003e\nI think if we agree that this logic is flawed, and the purpose of billable was to determine reseller subscriptions, we should probably just remove the `billable` column altogether. We already have an accurate way of calculating [subscriptions managed by resellers](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/01600a67144b2b47ba1857794f02ebb897a2e27b/lib/zuora/subscription.rb#L74) which is [used to determine the ](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/6d78d7ab5044fdb102e85f4f4709251f7384d99f/app/workers/zuora_callout/base_worker.rb#L25)`login_activated` boolean column when processing callouts.\n\nWe should be able to simply remove the logic and column for `billable` and the welcome email would be sent to new customers that have zuora accounts and their subscription wasn't managed by a reseller. That seems like the desired behavior. We would have no need to send the `bill_to_id` at that point too, so it would be some simplification of the code and the params in the configured callouts.\n\u003e\u003e\u003e\n\n* Reference to code that triggers the welcome email: https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a370c2b4b1a4fec50a6be2291c7b0ec7c73e0cd7/app/services/find_or_create_customer_service.rb#L79\n* Reference to code where `billable` is set: https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a370c2b4b1a4fec50a6be2291c7b0ec7c73e0cd7/app/services/find_or_create_customer_service.rb#L62\n\n### Result\n\nAll customers that purchase directly from GitLab (not Reseller) will receive a [Welcome email](https://gitlab.com/gitlab-org/customers-gitlab-com/uploads/92e7ac101afa342c73a8896285e83ef6/welcome-to-portal-email.png).\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-12T18:41:58.156Z","updated_at":"2022-11-22T19:52:33.189Z","closed_at":"2022-11-14T18:18:54.174Z","closed_by":{"id":8110789,"username":"tgolubeva","name":"Tatyana Golubeva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110789/avatar.png","web_url":"https://gitlab.com/tgolubeva"},"labels":["Category:Billing \u0026 Payments","Deliverable","Track Health Status [DEPRECATED]","backend","bug::functional","customer","devops::fulfillment","group::billing and subscription management","priority::1","section::fulfillment","severity::1","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11649502,"username":"aluthra2","name":"Aman Luthra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11649502/avatar.png","web_url":"https://gitlab.com/aluthra2"}],"author":{"id":8110789,"username":"tgolubeva","name":"Tatyana Golubeva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110789/avatar.png","web_url":"https://gitlab.com/tgolubeva"},"type":"ISSUE","assignee":{"id":11649502,"username":"aluthra2","name":"Aman Luthra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11649502/avatar.png","web_url":"https://gitlab.com/aluthra2"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4957","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4957","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4957/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4957/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4957","relative":"#4957","full":"gitlab-org/customers-gitlab-com#4957"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":86630,"iid":151,"sequence":2,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-10-04T21:31:23.242Z","updated_at":"2022-11-18T00:05:02.385Z","start_date":"2022-11-03","due_date":"2022-11-17","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/86630"},"health_status":"on_track"},{"id":116773583,"iid":4956,"project_id":2670515,"title":"Create proposal doc with ERD","description":"### Background\n\nWe would like to create a proposal document that lives in the customers-gitlab-com project.  This is a great way to spread awareness and create an SSoT for the overall scope of work involved in the epic.  This was identified as a goal in our weekly sync meeting agenda [here](https://docs.google.com/document/d/1_YbxNCo3KXK1-KdIZTgSvmU9kIslYjQnFZAmmu1DSqQ/edit?disco=AAAAhbdDiNI).","state":"closed","created_at":"2022-10-12T18:12:19.591Z","updated_at":"2022-10-26T19:37:56.129Z","closed_at":"2022-10-13T20:01:48.608Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","devops::fulfillment","documentation","group::fulfillment platform","section::fulfillment","type::ignore","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4956","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4956","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4956/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4956/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4956","relative":"#4956","full":"gitlab-org/customers-gitlab-com#4956"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116759522,"iid":4955,"project_id":2670515,"title":"Add proration custom attributes in subscription update response","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nSimilar to the addition in Order preview, the [proration custom attributes](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/ac19a2843ad59a38351558c4e77b2e4b90fd7ee7/app/services/amendment_base_service.rb#L82) needs to be included in the Order response when updating subscription.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nInclude proration custom attributes in [`Zuora::Orders::AmendmentManagerService#success`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/f38128d5dd47c74f02635ea12b823bb27799c3d8/app/services/zuora/orders/amendment_manager_service.rb#L71).\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-12T14:26:57.597Z","updated_at":"2022-10-21T12:04:37.576Z","closed_at":"2022-10-19T10:53:58.615Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","missed:15.5","section::fulfillment","type::feature"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4955","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4955","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4955/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4955/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4955","relative":"#4955","full":"gitlab-org/customers-gitlab-com#4955"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116715263,"iid":4952,"project_id":2670515,"title":"Enable use of Orders API in Auto renewal workflow","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nWhen auto renewing subscription in ReconciliationService and in Reconciliation workflow, FF use of Orders API.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-12T00:23:58.113Z","updated_at":"2022-10-21T12:04:37.861Z","closed_at":"2022-10-19T03:30:06.000Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","missed:15.5","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4952","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4952","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4952/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4952/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4952","relative":"#4952","full":"gitlab-org/customers-gitlab-com#4952"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9047,"epic":{"id":629649,"iid":9047,"title":"Transition Auto renewal workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9047","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116711094,"iid":4950,"project_id":2670515,"title":"[Reseller] Display a banner with info on how to modify a reseller-purchased subscription","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n## Problem\n\nCustomers that purchased their subscription through a reseller will be able to see but not modify that subscription (issue: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4946+)\n\nIt would be confusing to them why they aren't able to do anything to the subscription.\n\n## Proposal\n\nDisplay an alert at the top of the manage purchases page with a message to contact their reseller.\n\n### Alert copy\n\n\u003e\u003e\u003e\n**Some or all of your subscriptions are in read-only mode**\n\nTo make changes to a read-only subscription or purchase additional products, contact your GitLab Partner.\n\u003e\u003e\u003e\n\n- [x] `@cfarris` reviewed and approved\n- [x] `@esybrant` reviewed and approved  \n- [x] `@fneill` reviewed and approved  \n\n## Result\n\n## Next steps (if any)\n\n## How will we measure success?","state":"closed","created_at":"2022-10-11T22:08:49.082Z","updated_at":"2022-12-12T20:36:30.977Z","closed_at":"2022-12-01T09:34:10.647Z","closed_by":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"labels":["Category:Subscription Management","Technical Writing","UX","devops::fulfillment","documentation","frontend","group::billing and subscription management","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"}],"author":{"id":8110789,"username":"tgolubeva","name":"Tatyana Golubeva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110789/avatar.png","web_url":"https://gitlab.com/tgolubeva"},"type":"ISSUE","assignee":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4950","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":3,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4950","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4950/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4950/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4950","relative":"#4950","full":"gitlab-org/customers-gitlab-com#4950"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8941,"epic":{"id":618512,"iid":8941,"title":"Allow customers that purchased via Reseller to access Customers Portal","url":"/groups/gitlab-org/-/epics/8941","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e days remaining"},"iteration":{"id":96281,"iid":172,"sequence":3,"group_id":9970,"title":"15.7 Iteration 1","description":"","state":3,"created_at":"2022-11-14T20:24:48.891Z","updated_at":"2022-12-04T00:05:09.115Z","start_date":"2022-11-18","due_date":"2022-12-03","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/96281"},"health_status":"on_track"},{"id":116691310,"iid":4949,"project_id":2670515,"title":"Do not set Service Activation Date in Orders API","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nService Activation date should not be explicitly set, but should inherit the value of Contract Effective Date. Also, we do not require Service Activation of Orders. (see related [conversation](https://gitlab.slack.com/archives/C037WQ2BUGK/p1665417907870689?thread_ts=1665414245.001139\u0026cid=C037WQ2BUGK).\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n- In [`Zuora::Orders::Actions::BaseService`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/ac19a2843ad59a38351558c4e77b2e4b90fd7ee7/app/services/zuora/orders/actions/base_service.rb#L34), remove attribute `service_activation`\n- In [TriggerDate](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/ac19a2843ad59a38351558c4e77b2e4b90fd7ee7/app/services/zuora/orders/entities/trigger_dates.rb#L20) entity, remove support for `service_activation`\n- Update specs\n\n### Result\n\nService Activation date is not set during Order creation in Zuora.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-11T16:56:36.027Z","updated_at":"2022-10-28T10:52:56.301Z","closed_at":"2022-10-28T06:05:10.290Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["backend","devops::fulfillment","group::fulfillment platform","maintenance::removal","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4949","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4949","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4949/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4949/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4949","relative":"#4949","full":"gitlab-org/customers-gitlab-com#4949"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116671308,"iid":4948,"project_id":2670515,"title":"[Feature flag] Enable block_seat_overage_notification","description":"# Summary\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\nThis issue is to rollout and cleanup [a feature to prevent enqueuing `SendSeatOverageNotificationJob` for certain namespaces](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4934) in CustomersDot production, that is currently behind the [`block_seat_overage_notification`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/165/edit) feature flag.\n\n## Owners\n\n- Team: ~\"group::billing and subscription management\" \n- Most appropriate Slack channel to reach out to: `#g_billing_and_subscription_management`\n- Best individual to reach out to: @jhyson @tyleramos\n- PM: @tgolubeva \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- GITLAB_HANDLE of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- This feature was rolled out immediately in production to mitigate the issue that was bloating [our Sidekiq queues](https://customers.gitlab.com/sidekiq/).\n\n## Expectations\n\n### What are we expecting to happen?\n\nWhen enabled, this feature will prevent the `SendSeatOverageNotificationJob` from being enqueued for specific GitLab namespace ids (currently just `10782951`).  See https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5582 for more info.\n\n### What might happen if this goes wrong?\n\nThe feature flag should make it easier to toggle this blocking logic.  If it doesn't work, it's possible that the `SendSeatOverageNotificationJob` doesn't get blocked properly for the specified namespace.\n\n### What can we monitor to detect problems with this?\n\nWe can monitor problems [in Sentry](https://sentry.gitlab.net/gitlab/customersgitlabcom/) or [in Sidekiq](https://customers.gitlab.com/sidekiq/).\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments, i.e. `customers-staging`.\n- [x] Consider announcing that the flag will be enabled to potentially impacted groups, e.g. `#s_fulfillment_engineering`\n- [x] Enable the feature globally on non-production environments by applying the appropriate environment, e.g. `customers-staging` and `customers-development`.\n- [x] Notify the Software Engineers in Test (SETs) for Fulfillment via Slack and in a comment in this issue when enabling a feature flag in `customers-staging` as it can impact the QA pipeline.\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to production\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure any documentation has been updated\n- [x] Announce on [the feature issue](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4934) an estimated time this will be enabled on production if applicable\n\n### Global rollout on CustomersDot production\n\n- [x] Confirm the feature flag is enabled on `staging` without incident\n- [x] Roll out the feature to targeted testing users first (if applicable)\n- [x] If applicable, [incrementally roll out](https://docs.gitlab.com/ee/operations/feature_flags.html#percent-rollout) the feature.\n- [x] Verify the change has the desired outcome with the limited rollout before enabling the feature globally on production.\n- [x] Enable the feature globally on production environment\n- [~] Announce on [the feature issue](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4934) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe clean up should be done as soon as possible to permanently enable the feature and reduce complexity in the codebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Ensure https://gitlab.com/gitlab-org/gitlab/-/issues/358080 has been resolved before removing the feature flagged code.\n- [x] Create a merge request to remove `block_seat_overage_notification` feature flag\n  - [x] Remove all references to the feature flag from the codebase\n- [x] Ensure that the cleanup MR has been deployed to both staging and production\n- [x] Disable the feature flag via the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [x] Ensure production environment is still working as expected\n- [x] Remove the Unleash feature flag from the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by performing the following actions:\n  - [ ] Disable the Unleash flag on the [feature flag page](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/165/edit)","state":"closed","created_at":"2022-10-11T13:08:07.848Z","updated_at":"2023-02-03T12:34:09.730Z","closed_at":"2023-02-03T12:34:09.691Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["[deprecated] Category:Billing and Subscription Management","devops::fulfillment","feature flag","frontend","group::billing and subscription management","maintenance::removal","section::fulfillment","type::maintenance","workflow::complete"],"milestone":{"id":2745650,"iid":84,"group_id":9970,"title":"15.9","description":"","state":"active","created_at":"2022-08-22T16:58:02.303Z","updated_at":"2022-08-22T16:58:02.303Z","due_date":"2023-02-17","start_date":"2023-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/84"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4948","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":25,"completed_count":23},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4948","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4948/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4948/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4948","relative":"#4948","full":"gitlab-org/customers-gitlab-com#4948"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116614517,"iid":4946,"project_id":2670515,"title":"[Reseller] Hide subscription management buttons for a subscription purchased via a reseller","description":"## Problem\n\nSubscriptions purchased via a Reseller should not be amended via the Customers Portal. \n\nAny subscription changes should be done via the Reseller (and not the customer), since Resellers are responsible for paying the related invoices.\n\nFor screenshots of the current experience for Reseller customer (if they were able to login) see https://gitlab.com/gitlab-org/fulfillment-meta/-/issues/809+.\n\n\n## Proposal\n\nHide the following buttons on the subscription card if the subscription is managed by a reseller:\n\n- Add Seats\n- Upgrade\n- Resume\n- Cancel\n- Renew\n- Buy additional CI Minutes\n- Buy additional Storage\n\nLooks like we have a `subscription.managed_by_reseller?` method in the code.\n\n### SM Subscription card\n\nAll buttons should be removed. \n\n![cdot-sm-subscription-card-crossed](/uploads/268a4f53a15dd0972e6512e9a0559ac0/cdot-sm-subscription-card-crossed.png)\n\n### SaaS Subscription card\n\nThe only button we need to keep is `Change linked namespace`\n\n![cdot-saas-subscription-card-crossed](/uploads/0eba0eec5a61f0a15a8f87d25d623860/cdot-saas-subscription-card-crossed.png)\n\n**Note:** Hiding the `Buy new subscription` button will be tackled in this issue - https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5074\n\n## Implementation breakdown\n| Description | MR |\n| ------ | ------ |\n| :one: Hide CI minutes button | https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5695|\n| :two: Hide buy storage button| https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5719/ |\n| :three: Hide upgrade plan button | https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5728 |\n| :four: Hide add seats button | https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5729/ |\n| :five: Hide renew button | https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5730  |\n| :six: Hide cancel and resume button | https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5731 |\n\n\n## Result\n\nReseller customer will not be able to amend their subscription.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-10T21:36:23.684Z","updated_at":"2023-05-04T21:21:37.271Z","closed_at":"2022-11-07T11:48:23.370Z","closed_by":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"labels":["Category:Subscription Management","Track Health Status [DEPRECATED]","UX","customer","devops::fulfillment","frontend","group::billing and subscription management","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"}],"author":{"id":8110789,"username":"tgolubeva","name":"Tatyana Golubeva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110789/avatar.png","web_url":"https://gitlab.com/tgolubeva"},"type":"ISSUE","assignee":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4946","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":3,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4946","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4946/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4946/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4946","relative":"#4946","full":"gitlab-org/customers-gitlab-com#4946"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8941,"epic":{"id":618512,"iid":8941,"title":"Allow customers that purchased via Reseller to access Customers Portal","url":"/groups/gitlab-org/-/epics/8941","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e days remaining"},"iteration":{"id":86630,"iid":151,"sequence":2,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-10-04T21:31:23.242Z","updated_at":"2022-11-18T00:05:02.385Z","start_date":"2022-11-03","due_date":"2022-11-17","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/86630"},"health_status":"on_track"},{"id":116596617,"iid":4945,"project_id":2670515,"title":"Set appropriate billing options when updating a subscription","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nWhen updating a subscription using Orders API, set billing options as described below:\n\n| Attribute | Value |\n| ------ | ------ |\n| `target_date` | If subscription has expired, set to current date. \u003cbr/\u003e Default to Subscription term end date |\n| `document_date` | Current date |\n| `document_date` | Current date |\n| `process_payments` | Based on `params[:process_payments]` |\n| `payment_method_id` | Based on whether `params[:payment_method_id]` is present |\n\nThese attributes are inline with the existing [Amend API](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/60e7bfca2087f17bc06104474ca1b0a3f5b9bb9c/app/services/amendment_base_service.rb#L192).\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nUpdate billing params and remove setting of service activation date as described in the Problem statement.\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-10T16:07:01.324Z","updated_at":"2022-10-20T09:57:15.423Z","closed_at":"2022-10-13T16:50:05.960Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4945","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4945","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4945/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4945/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4945","relative":"#4945","full":"gitlab-org/customers-gitlab-com#4945"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116421407,"iid":4934,"project_id":2670515,"title":"SendSeatOverageNotificationJob continually enqueued for the same namespace","description":"### Problem\n\nWe noticed the sidekiq queue in CDot growing endless and it seems the same job, `Reconciliations::SendSeatOverageNotificationJob`, is being enqueued over-and-over with the same params.  More info in [this Slack thread](https://gitlab.slack.com/archives/CL7SX4N86/p1665070227457529).\n\nOur current pending Sidekiq queue count is 23,646 and growing.  You can see the reconciliations queue at https://customers.gitlab.com/sidekiq/queues/reconciliations\n\n### Proposal\n\nWe can work on a short-term fix to block the particular namespace id, `10782951`, for the numerous jobs, until we determine a better long-term solution.","state":"closed","created_at":"2022-10-06T17:37:12.457Z","updated_at":"2022-10-13T12:56:33.470Z","closed_at":"2022-10-13T12:56:33.450Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Billing and Subscription Management","backend","bug::performance","devops::fulfillment","group::billing and subscription management","section::fulfillment","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4934","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4934","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4934/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4934/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4934","relative":"#4934","full":"gitlab-org/customers-gitlab-com#4934"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116378634,"iid":4929,"project_id":2670515,"title":"Follow-up from \"Set default payment before an upgrade\"","description":"The following discussion from !5518 should be addressed:\n\n- [ ] @tyleramos started a [discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5518#note_1122714925): \n\n    \u003e **Thought (no change necessary):** I was noticing some similarities (you may have as well) between this method and the `set_default_payment_method` [in `::Zuora::Helpers::PaymentMethod`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/42542df5fa778f782ae3ccefc21f04711eb0a1f3/app/services/zuora/helpers/payment_method.rb#L21).  There is even a `payment_method_id` method defined there.  \n    \u003e \n    \u003e I wonder if there is room for refactoring to combine these in the future? There is a difference in setting `auto_pay` but we may be able to define that in a flexible way.  Anyway, just a thought for the future perhaps.","state":"closed","created_at":"2022-10-06T06:28:28.136Z","updated_at":"2023-03-17T14:00:54.855Z","closed_at":"2023-03-17T14:00:54.829Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","devops::fulfillment","group::fulfillment platform","maintenance::refactor","section::fulfillment","type::maintenance"],"milestone":{"id":2745651,"iid":85,"group_id":9970,"title":"15.10","description":"","state":"active","created_at":"2022-08-22T16:58:22.132Z","updated_at":"2022-08-22T16:58:22.132Z","due_date":"2023-03-17","start_date":"2023-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/85"},"assignees":[],"author":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4929","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4929","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4929/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4929/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4929","relative":"#4929","full":"gitlab-org/customers-gitlab-com#4929"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9502,"epic":{"id":682911,"iid":9502,"title":"Cleanup Subscribe and Amend API workflows","url":"/groups/gitlab-org/-/epics/9502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116359301,"iid":4928,"project_id":2670515,"title":"Update setup instructions to include setting salesforce secrets","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nWith unset salesforce values in `secrets.yml`, mailer preview will no longer generate.\n\n### Proposal\n\nUpdate the readme to list instructions for setting the salesforce secrets","state":"closed","created_at":"2022-10-05T20:10:17.122Z","updated_at":"2022-10-24T07:33:07.865Z","closed_at":"2022-10-17T15:20:00.445Z","closed_by":{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"},"labels":["devops::fulfillment","documentation","group::billing and subscription management","maintenance::refactor","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"}],"author":{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"},"type":"ISSUE","assignee":{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4928","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4928","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4928/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4928/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4928","relative":"#4928","full":"gitlab-org/customers-gitlab-com#4928"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116353393,"iid":4926,"project_id":2670515,"title":"[Error Budget] Investigate `MaxAdditionalSeatsExceededError`","description":"From: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4918#note_1124235188  \nSentry: https://sentry.gitlab.net/gitlab/customersgitlabcom/?query=is%3Aunresolved+lastSeen%3A%2B1d+maxadditional\n\nThis error seems like valid business logic and not an application exception. We should stop raising an error where appropriate so we're not reporting these as errors.","state":"closed","created_at":"2022-10-05T19:06:20.403Z","updated_at":"2022-11-10T14:54:23.982Z","closed_at":"2022-11-10T14:54:23.961Z","closed_by":{"id":8110789,"username":"tgolubeva","name":"Tatyana Golubeva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110789/avatar.png","web_url":"https://gitlab.com/tgolubeva"},"labels":["[deprecated] Category:Billing and Subscription Management","backend","devops::fulfillment","group::billing and subscription management","maintenance::performance","priority::2","section::fulfillment","severity::2","spike","type::maintenance","wontfix","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":3614911,"username":"rcobb","name":"Ryan Cobb","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7047b7014264f07daf9836e55fc5ef4c?s=80\u0026d=identicon","web_url":"https://gitlab.com/rcobb"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4926","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4926","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4926/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4926/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4926","relative":"#4926","full":"gitlab-org/customers-gitlab-com#4926"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":117773634,"iid":5080,"project_id":2670515,"title":"[SPIKE] Investigate on improving SubscriptionController#create response time","description":"According to the kibana query below, we see that the endpoint: `SubscriptionsController#create` has the worst Appdex, with `515` operations over the threshold out of `674`.\n\nThis issue is a placeholder to dig deeper into the request and try to find a way to improve the response time.\n\n1. **Rails Requests Apdex**: slow requests exceeding the threshold along with total number of request\n\n![Screenshot_2022-10-05_at_17.57.45](/uploads/98ae6e9ec9d4f4fbfbbcae0eef4fe86a/Screenshot_2022-10-05_at_17.57.45.png)\n\n[Kibana log](https://log.gprd.gitlab.net/app/kibana#/visualize/create?type=table\u0026indexPattern=7092c4e2-4eb5-46f2-8305-a7da2edad090\u0026_a=(filters:!((meta:(key:json.subcomponent,negate:!t,params:graphql_json,type:phrase),query:(match:(json.subcomponent:(query:graphql_json,type:phrase)))),(meta:(key:json.meta.feature_category,params:!(purchase),type:phrases),query:(bool:(minimum_should_match:1,should:!((match_phrase:(json.meta.feature_category:purchase)))))),(meta:(key:exists,type:json.duration_s,value:exists),query:(exists:(field:json.duration_s))),(meta:(key:exists,type:json.target_duration_s,value:exists),query:(exists:(field:json.target_duration_s)))),query:(language:kuery,query:''),vis:(aggs:!((enabled:!t,id:'1',params:(),schema:metric,type:count),(enabled:!t,params:(field:json.meta.caller_id.keyword,missingBucket:!f,missingBucketLabel:Missing,order:desc,orderBy:'3',otherBucket:!t,otherBucketLabel:Other,size:5),schema:bucket,type:terms),(enabled:!t,params:(field:json.request_urgency.keyword,missingBucket:!f,missingBucketLabel:Missing,order:desc,orderBy:'3',otherBucket:!t,otherBucketLabel:Other,size:5),schema:bucket,type:terms),(enabled:!t,params:(field:json.target_duration_s,missingBucket:!f,missingBucketLabel:Missing,order:desc,orderBy:'3',otherBucket:!t,otherBucketLabel:Other,size:5),schema:bucket,type:terms),(enabled:!t,id:'3',params:(customLabel:'Operations+over+specified+threshold+(apdex)',field:json.duration_s,json:'%7B%22script%22:+%22doc%5B!'json.duration_s!'%5D.value+%3E+doc%5B!'json.target_duration_s!'%5D.value+?+1+:+0%22%7D'),schema:metric,type:sum))))\u0026_g=(time:(from:'now-3d',to:'now')))\n\n\n2. **Rails slow requests**: Top slow requests\n\n![Screenshot_2022-10-05_at_18.09.53](/uploads/43fad2671ebd5fe5717b14d97e10bcab/Screenshot_2022-10-05_at_18.09.53.png)\n\n[Kibana log](https://log.gprd.gitlab.net/app/discover#/?_a=h@7842932\u0026_g=(time:(from:'2022-10-05T09:37:00.000Z',to:'2022-10-05T15:37:59.999Z')))","state":"closed","created_at":"2022-10-05T16:13:35.939Z","updated_at":"2023-03-27T15:09:25.811Z","closed_at":"2023-03-22T10:51:46.526Z","closed_by":{"id":11257463,"username":"bhrai","name":"Bishwa Hang Rai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11257463/avatar.png","web_url":"https://gitlab.com/bhrai"},"labels":["ARM::Consider for 15.10","Category:Purchase","backend","devops::fulfillment","group::purchase","priority::4","purchase direction::admin","quad-planning::complete-no-action","section::fulfillment","severity::4","spike","type::maintenance","workflow::complete"],"milestone":{"id":2910456,"iid":86,"group_id":9970,"title":"15.11","description":"","state":"active","created_at":"2022-12-13T20:08:46.985Z","updated_at":"2022-12-13T20:08:46.985Z","due_date":"2023-04-17","start_date":"2023-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/86"},"assignees":[{"id":11257463,"username":"bhrai","name":"Bishwa Hang Rai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11257463/avatar.png","web_url":"https://gitlab.com/bhrai"}],"author":{"id":11257463,"username":"bhrai","name":"Bishwa Hang Rai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11257463/avatar.png","web_url":"https://gitlab.com/bhrai"},"type":"ISSUE","assignee":{"id":11257463,"username":"bhrai","name":"Bishwa Hang Rai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11257463/avatar.png","web_url":"https://gitlab.com/bhrai"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5080","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5080","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5080/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5080/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5080","relative":"#5080","full":"gitlab-org/customers-gitlab-com#5080"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116309745,"iid":4922,"project_id":2670515,"title":"'License seat links' - customer field has incorrect URL","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nThe customer field in the 'License seat links' view links to the customer information in the `Customer` view. \\\nThe URL is incorrect though.\n\nCurrently: https://customers.gitlab.com/admin/RailsAdmin::Customer/6057 \\\nShould be: https://customers.gitlab.com/admin/Customer/6057\n\n### Proposal\n\nFix URL\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\nClicking on a customer name in the 'License seat links' view will open the customer information in the `Customer` view.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-10-05T09:40:27.771Z","updated_at":"2023-02-16T16:00:49.718Z","closed_at":"2023-02-16T16:00:49.649Z","closed_by":{"id":272636,"username":"ddavison","name":"Dan Davison","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6e56557ffa1baafe3e73e45bd2dc9524?s=80\u0026d=identicon","web_url":"https://gitlab.com/ddavison"},"labels":["devops::fulfillment","group::provision","quick win","section::fulfillment","severity::4","type::bug"],"milestone":null,"assignees":[],"author":{"id":4015010,"username":"rverschoor","name":"Rene Verschoor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/34ff23f73913372d0b5c5e5ff4e92819?s=80\u0026d=identicon","web_url":"https://gitlab.com/rverschoor"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4922","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4922","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4922/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4922/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4922","relative":"#4922","full":"gitlab-org/customers-gitlab-com#4922"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":116275359,"iid":4919,"project_id":2670515,"title":"Follow-up from \"FF use of Orders API in Upgrade workflow\"","description":"The following discussion from !5539 should be addressed:\n\n- [ ] @aish.sub started a [discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5539#note_1122624105):  (+2 comments)\n\n    \u003e **note**: I wonder if it will be better (helpful?) to update this custom action to `add_main_product_during_renewal` in order to make it explicit (similar to `add_main_product_during_upgrade`) :thinking:","state":"closed","created_at":"2022-10-04T18:06:21.025Z","updated_at":"2023-01-06T08:33:54.604Z","closed_at":"2023-01-06T08:33:54.565Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","maintenance::refactor","missed:15.5","missed:15.6","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4919","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4919","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4919/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4919/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4919","relative":"#4919","full":"gitlab-org/customers-gitlab-com#4919"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9045,"epic":{"id":629636,"iid":9045,"title":"Transition Subscription Upgrade workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9045","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116033419,"iid":4898,"project_id":2670515,"title":"[Documentation \u0026 Learning] Cloud License Activation","description":"","state":"closed","created_at":"2022-09-29T19:22:28.938Z","updated_at":"2022-12-05T11:38:21.872Z","closed_at":"2022-12-05T11:38:21.851Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Category:SM Provisioning","[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","knowledge-sharing","priority::4","section::fulfillment","type::maintenance"],"milestone":null,"assignees":[],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4898","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4898","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4898/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4898/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4898","relative":"#4898","full":"gitlab-org/customers-gitlab-com#4898"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8876,"epic":{"id":613069,"iid":8876,"title":"Process Evaluation: Cloud License Activation","url":"/groups/gitlab-org/-/epics/8876","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116033367,"iid":4897,"project_id":2670515,"title":"[Documentation \u0026 Learning] True-Up Logic","description":"## Documentation\n\n* https://gitlab.com/gitlab-org/gitlab/-/blob/aaa552b248b3af6dd2a4de88173fff7bfe85f4e1/doc/subscriptions/self_managed/index.md#users-over-license\n* https://gitlab.com/gitlab-org/gitlab/-/blob/30adf0ce90db1326e9e53388aae26b3266651033/doc/subscriptions/quarterly_reconciliation.md#quarterly-reconciliation-and-annual-true-ups\n* https://gitlab.com/gitlab-org/fulfillment-meta/-/issues/510+\n* https://about.gitlab.com/handbook/business-technology/enterprise-applications/quote-to-cash/troubleshooting/#true-ups-adding-seats-users\n\n\n## Learning\n\n* The true-up logic can be simplified by skipping it for Cloud Licenses (https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5483).\n* Introduce the ability to revoke cloud licenses (activation codes, https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5486).\n* Define a process to recognize and require payment for overages (separate from removing true-ups) https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5299","state":"closed","created_at":"2022-09-29T19:21:45.287Z","updated_at":"2023-01-16T12:18:44.123Z","closed_at":"2023-01-16T12:18:44.095Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","knowledge-sharing","maintenance::workflow","priority::4","section::fulfillment","type::maintenance"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4897","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4897","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4897/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4897/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4897","relative":"#4897","full":"gitlab-org/customers-gitlab-com#4897"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8877,"epic":{"id":613071,"iid":8877,"title":"[Knowledge Sharing] True-Up Logic","url":"/groups/gitlab-org/-/epics/8877","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":116033322,"iid":4896,"project_id":2670515,"title":"[Documentation \u0026 Learning] Legacy License Provisioning","description":"## Step 1: Documentation \u0026 Learning\n\n* [x] You feel the existing document is accurate, current, and thorough.\n* [-] You have engaged `@courtmeddaugh` / `@fneill` as needed for assistance if you feel business or customer-facing documentation should be updated.\n* [x] You have a strong enough understanding of the process to be able to host a knowledge share session.","state":"closed","created_at":"2022-09-29T19:20:30.359Z","updated_at":"2022-12-01T15:15:50.544Z","closed_at":"2022-10-24T09:32:07.060Z","closed_by":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"labels":["[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","knowledge-sharing","priority::4","section::fulfillment","type::maintenance"],"milestone":null,"assignees":[{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"}],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4896","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4896","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4896/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4896/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4896","relative":"#4896","full":"gitlab-org/customers-gitlab-com#4896"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8878,"epic":{"id":613074,"iid":8878,"title":"Process Evaluation: Legacy License Provisioning","url":"/groups/gitlab-org/-/epics/8878","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":122493434,"iid":5602,"project_id":2670515,"title":"Create activation code for all SM subscriptions (even when TurnOnCloudLicensing = No)","description":"## Background\nThere is one remaining bucket of customers for whom no cloud activation is created, meaning there no way for them to access an activation code other than requesting one be created by the support team:\n* Customers with `TurnOnCloudLicensing` = `No` - we do not generate a cloud activation for explicitly opted out customers\n\n## Proposal\nUpdate the activation code logic to create an activation code for all Self-Managed subscriptions, so that even opted out customers have the option of activating with cloud licensing.\n\n## Experience\nWhen a customer has `TurnOnCloudLicensing` = `No` (opted for a legacy license), but an activation code exists, we show an expandable banner with both the legacy license available for download and the activation code:\n\n\n![image](/uploads/3b360a2fbacae9aed15e0a97cf492293/image.png)\n\n## Next Steps\nOnce this is closed, we should backfill any active Self-Managed subscriptions that do not have an activation code available (https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5604).","state":"closed","created_at":"2022-09-29T16:59:52.699Z","updated_at":"2023-03-21T14:50:38.601Z","closed_at":"2023-02-20T09:44:27.828Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Category:SM Provisioning","backend","devops::fulfillment","feature::enhancement","group::provision","priority::3","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::complete"],"milestone":{"id":2745651,"iid":85,"group_id":9970,"title":"15.10","description":"","state":"active","created_at":"2022-08-22T16:58:22.132Z","updated_at":"2022-08-22T16:58:22.132Z","due_date":"2023-03-17","start_date":"2023-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/85"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5602","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":3,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/5602","notes":"https://gitlab.com/api/v4/projects/2670515/issues/5602/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/5602/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#5602","relative":"#5602","full":"gitlab-org/customers-gitlab-com#5602"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9590,"epic":{"id":696658,"iid":9590,"title":"Provide opportunity for opted out customers to activate Cloud Licensing","url":"/groups/gitlab-org/-/epics/9590","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":116027508,"iid":4892,"project_id":2670515,"title":"[Backfill] Create activation codes for subscriptions on legacy licenses pre-SCL","description":"## Background\nhttps://gitlab.com/gitlab-org/fulfillment-meta/-/issues/589+ defines the process for customers to activate with Cloud Licensing mid-term if they already have an active legacy license subscription. For most customers, a Support ticket is required to move to Cloud Licensing.\n\nTo make it easier for these customers to self-activate with Cloud Licensing, this issue will evaluate the possibility of mass-generating activation codes for customers that do not have one.\n\n## Details\nToday, the Customer Portal subscription activation display banner for `TurnOnCloudLicensing` = `null` has a dependency on if an activation code exists.\n* If activation code exists: display legacy download option only\n* If activation code does not exist: display activation code only\n\nAs of September 2022, we are creating activation codes for all subscriptions where `TurnOnCloudLicensing` is not = `No`. However, prior to SCL launch (July 2022), we did not create activation codes for these subscriptions.\n\n## Proposal\n1. Query the subscription names with `TurnOnCloudLicensing` set to `null` and `Status = \"Active\"` in Zuora (with a Data Query, [example](https://apisandbox.zuora.com/platform/data-query/queries/20e2a75f-8e30-4ea6-b922-a0a73c80efde)) and then cross check those with existing cloud activations. \n2. If no cloud activation exists for the subscription name, create one.\n3. In doing so, ensure we do NOT send customers emails with the activation code (to avoid confusion).\n\n## Result\nAll customers (who did not explicitly opt out of Cloud Licensing, `TurnOnCloudLicensing` = `No`) will have a cloud license activation code available for download visible in the Customer Portal, allowing for mid-term activations of cloud licensing without the need for a support ticket.","state":"closed","created_at":"2022-09-29T16:29:57.567Z","updated_at":"2023-01-26T17:03:19.757Z","closed_at":"2022-12-08T14:56:21.030Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Category:SM Provisioning","backend","devops::fulfillment","group::provision","maintenance::refactor","missed:15.5","missed:15.6","priority::4","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4892","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4892","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4892/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4892/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4892","relative":"#4892","full":"gitlab-org/customers-gitlab-com#4892"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8864,"epic":{"id":612983,"iid":8864,"title":"[Iteration 2] Increase Opportunities for Mid-term Activation of Cloud Licensing for Pre-SCL Customers","url":"/groups/gitlab-org/-/epics/8864","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":115954457,"iid":4887,"project_id":2670515,"title":"Perform Post Order creation steps for amendment","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nOnce a subscription is amended, there are a few post order creation steps that is performed:\n\n- Update EoA starter/bronze offer\n- mark coupon as redeemed\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nPerform the above listed steps when applicable in `Zuora::Orders::PostCreationService`\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-28T18:57:41.145Z","updated_at":"2022-10-03T17:41:56.119Z","closed_at":"2022-10-03T17:34:35.502Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4887","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4887/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4887/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4887","relative":"#4887","full":"gitlab-org/customers-gitlab-com#4887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115897852,"iid":4884,"project_id":2670515,"title":"Improve SeatLink Apdex score","description":"### Problem\n\n~\"group::provision\" [apdex customersdot rails_requests failure is high](https://dashboards.gitlab.net/d/stage-groups-detail-provision/stage-groups-provision-group-error-budget-detail?orgId=1\u0026from=now-24h\u0026to=now\u0026viewPanel=14). For the past 7 days the [apdex failure ratio is 47255/93360](https://dashboards.gitlab.net/d/stage-groups-detail-provision/stage-groups-provision-group-error-budget-detail?orgId=1\u0026from=now-7d\u0026to=now\u0026viewPanel=14). It is holding back our overall error budget.\n\nBy sorting the averge on [Grafana ranking](https://dashboards.gitlab.net/d/stage-groups-detail-provision/stage-groups-provision-group-error-budget-detail?orgId=1\u0026from=now-24h\u0026to=now\u0026viewPanel=44), `Api::V1::SeatLinksController#create` seems to be the largest contributing factor. It usually peaks around 4 AM UTC each day at -50% mark. E.g. in CDot production log, I found one request taking 7s.\n\n### Proposal\n\nWe should first gather stats on request time in order to see how the distribution and average looks like. Since we don't have log.gitlab.net for CDot this will take some manual effort.\n\nEngineering-wise, we can look into reducing seat link time. \n\nThe peak probably means a large number of self-managed instances are concentrated in the same timezone. We may also look into spreading the sync time further apart. \n\nProduct management-wise: we may have to consider increase the request threshold (urgency). According to [Rails request Apdex SLI doc](https://docs.gitlab.com/ee/development/application_slis/rails_request_apdex.html#decreasing-the-urgency-setting-a-higher-target-duration), automated process is not user face therefore it makes sense to have a lower urgency.\n\n### Result\n\nReduce the number of apdex errors.\n\n### Next steps (if any)\n\n### How will we measure success?\n\nA healthier [apdex percentage](https://dashboards.gitlab.net/d/customersdot-main/customersdot-overview?orgId=1\u0026viewPanel=23\u0026from=now-7d\u0026to=now) of less than -5%.","state":"closed","created_at":"2022-09-28T04:27:03.423Z","updated_at":"2023-02-17T20:38:34.930Z","closed_at":"2023-01-18T07:58:33.644Z","closed_by":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"labels":["Error Budget Improvement","[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","maintenance::workflow","missed:15.6","missed:15.7","priority::2","section::fulfillment","type::maintenance","workflow::in dev"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"}],"author":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"type":"ISSUE","assignee":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"user_notes_count":37,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4884","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4884","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4884/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4884/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4884","relative":"#4884","full":"gitlab-org/customers-gitlab-com#4884"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9397,"epic":{"id":671622,"iid":9397,"title":"Provision Error Budget Improvements","url":"/groups/gitlab-org/-/epics/9397","group_id":9970,"human_readable_end_date":"Jun 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":"at_risk"},{"id":115885543,"iid":4881,"project_id":2670515,"title":"Update the admin_access feature spec","description":"### Summary\n\n`spec/features/rails_admin/admin_access_spec.rb` Covers the actions an Admin has access to per model via the Admin app.\n\nThis test is out of date. It needs to be updated to account for the addition of:\n- Cloud Activations\n- Trading Partners\n- Provisions","state":"closed","created_at":"2022-09-27T21:01:27.458Z","updated_at":"2023-01-24T22:28:25.283Z","closed_at":"2022-10-11T03:00:40.630Z","closed_by":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"labels":["[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","section::fulfillment","type::maintenance","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"}],"author":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"type":"ISSUE","assignee":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4881","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4881","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4881/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4881/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4881","relative":"#4881","full":"gitlab-org/customers-gitlab-com#4881"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115802819,"iid":4874,"project_id":2670515,"title":"Cloud License activation failure when future dated renewal and past subscription trueups","description":"# Bug\n\n## Summary\n\nWhen activating a cloud license for the first time (especially when coming from legacy), the cloud license is generated using the subscription version that better \"fits\" the activation moment / date.\n\nPer @vshumilo:\n\n\u003e The subscription version is resolved [here](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/df807833e9e1b346bde9a0c0d2adf37a6ab89209/app/models/cloud_activation.rb#L23) using [this logic](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/df807833e9e1b346bde9a0c0d2adf37a6ab89209/lib/zuora/subscription.rb#L70-L72)\n\u003e \n\u003e Additional context\n\u003e - This decision was per-design to allow a customer that is in the middle of a subscription term to upgrade to cloud license we decided to use the current subscription version (applicable at the moment of the activation)\n\u003e - The specific logic on how this current subscription is resolved changed ~1 month ago, current one should be more accurate. Is this something you have seen reported in the last month or since the release of cloud activation?\n\nHowever, in some cases when the following conditions are also true:\n\n1. A future-dated renewal amendment exists\n2. The current, pre-renewal version of the subscription has true-ups\n\nThe cloud license being generated is failing to activate until at least the start date of the renewal term when the license gets generated with the most recent version of the subscription.\n\nIt seems to be related to true-up checking (documented in at least 2 of the reported examples), and possibly current billable users since the trueup logic includes a [fallback check on current users](https://gitlab.com/gitlab-org/gitlab/-/blob/066245b248aa8df95958302656b252705d0f74fc/ee/app/models/license.rb#L507-508) that would normally be skipped in cloud licenses.\n\nCurrently unknown why the true-up logic would be failing, even for the current (non-renewal) term; in theory it should be generating a license that works the same as it did at the start of the current term.  It's using `trueup_from` and `trueup_to` of the current period, in other words, `trueup_from == current_starts_at - 1 year` and `trueup_to == current_starts_at`\n\n[example ticket](https://gitlab.zendesk.com/agent/tickets/329201)  \n[example customer](https://customers.gitlab.com/admin/customer/205112/edit)  \n[example cloud license](https://customers.gitlab.com/admin/license/1043282)\n\n## Steps to reproduce\n\n1. Be on legacy license\n2. Have your current term subscription include true-ups\n3. Adjust user counts in a way that prevents your current license from being reactivated\n   - Either increase your billable users count, or your max historical (for current term)\n4. Try to convert to cloud license prior to renewal\n\n## Proposed fix\n\nIt's really the trueup logic at fault here, since that both re-validates current term trueups and also contains a current users check (which would be skipped without `License#check_trueup` being called).  Because these numbers can change over the course of a year, re-activating the current term license may be impossible.\n\nSidenote: Perhaps this highlights the [discussions in this issue](https://gitlab.com/gitlab-org/fulfillment-meta/-/issues/511).\n\n1. Skip all of `License#check_users_limit`, `License#check_trueup`, and `License#check_restricted_user_count` when renewing or prior to renewing from legacy to cloud license the first time.\n \n## Workarounds\n\n1. Wait until start date of the renewal period\n\n## Reported examples\n\n1. https://gitlab.zendesk.com/agent/tickets/329201\n1. https://gitlab.zendesk.com/agent/tickets/325200\n1. https://gitlab.zendesk.com/agent/tickets/322732\n1. https://gitlab.zendesk.com/agent/tickets/324490\n2. https://gitlab.zendesk.com/agent/tickets/328920\n3. https://gitlab.zendesk.com/agent/tickets/340797\n4. https://gitlab.zendesk.com/agent/tickets/342180\n5. https://gitlab.zendesk.com/agent/tickets/342994 (result of manual legacy)\n6. https://gitlab.zendesk.com/agent/tickets/344686 (result of manual legacy)\n7. https://gitlab.zendesk.com/agent/tickets/360298 (result of manual legacy)\n8. https://gitlab.zendesk.com/agent/tickets/375405 (current billable, `check_restricted_user_count`)\n\n\u003c!---\nPlease add both severity and priority level according to: https://docs.gitlab.com/ee/development/contributing/issue_workflow.html#severity-labels\n---\u003e","state":"closed","created_at":"2022-09-26T18:51:05.619Z","updated_at":"2023-05-03T15:58:58.373Z","closed_at":"2023-02-22T14:07:19.027Z","closed_by":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"labels":["Category:SM Provisioning","Common Provisioning Bugs","License Activation","ML::Done","backend","bug::functional","customer","devops::fulfillment","group::provision","missed:15.8","missed:15.9","needs weight","priority::2","section::fulfillment","severity::2","type::bug","workflow::verification"],"milestone":{"id":2745651,"iid":85,"group_id":9970,"title":"15.10","description":"","state":"active","created_at":"2022-08-22T16:58:22.132Z","updated_at":"2022-08-22T16:58:22.132Z","due_date":"2023-03-17","start_date":"2023-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/85"},"assignees":[{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"}],"author":{"id":4447183,"username":"kevenhughes","name":"Keven Hughes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4447183/avatar.png","web_url":"https://gitlab.com/kevenhughes"},"type":"ISSUE","assignee":{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4874","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4874","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4874/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4874/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4874","relative":"#4874","full":"gitlab-org/customers-gitlab-com#4874"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9851,"epic":{"id":741349,"iid":9851,"title":"Resolve common errors by removing license validations","url":"/groups/gitlab-org/-/epics/9851","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115662608,"iid":4870,"project_id":2670515,"title":"[Spike] Backporting Cloud License fixes to 14.1","description":"With the efforts for [Strict Cloud License](https://gitlab.com/groups/gitlab-org/-/epics/7088) and [Cloud License Follow-Ups](https://gitlab.com/groups/gitlab-org/-/epics/8187) we should look at which Cloud License ~\"type::bug\"  fixes we should backport to [Cloud License V1](https://gitlab.com/groups/gitlab-org/-/epics/1878), so customers upgrading to this version don't experience issues fixed down the road.\n\nAn example of this could be this issue: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4688.","state":"closed","created_at":"2022-09-23T11:51:39.923Z","updated_at":"2023-01-17T22:40:23.863Z","closed_at":"2023-01-11T22:30:09.764Z","closed_by":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"labels":["Category:SM Provisioning","[deprecated] Category:Provision","backend","devops::fulfillment","estimation::completed","frontend","group::provision","maintenance::refactor","section::fulfillment","type::maintenance","workflow::planning breakdown"],"milestone":null,"assignees":[],"author":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4870","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4870","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4870/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4870/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4870","relative":"#4870","full":"gitlab-org/customers-gitlab-com#4870"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115645252,"iid":4869,"project_id":2670515,"title":"Migrate CustomersDot Ansible to gitlab-org","description":"This issue provides a checklist that will support the migration of [the CustomersDot Ansible project](https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible) to the `gitlab-org` group.\n\n## Main information\n\n- Date and time of migration: November 3rd 2022, 10am UTC (duration: 1 hour)\n\n- Former project URL: https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible\n- (Proposed) New project URL: https://gitlab.com/gitlab-org/customers-ansible\n\n- CustomersDot Documentation MR: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5520\n- CustomersDot Ansible Documentation MR: https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible/-/merge_requests/316\n- Runbooks MR: https://gitlab.com/gitlab-com/runbooks/-/merge_requests/5019\n- CustomersDot `.gitlab-ci.yml` MR: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5522\n\n## Checklist\n\n### Preparation\n\n1. [x] Make sure that someone in the Fulfillment team can proceed to do [the project transfer](https://docs.gitlab.com/ee/user/project/settings/index.html#transfer-a-project-to-another-namespace). We need someone who's both the Owner of `customersdot-ansible` and has the `Maintainer` role for the `gitlab-org` group.\n    - Access request issue: https://gitlab.com/gitlab-com/team-member-epics/access-requests/-/issues/18088\n\n1. [x] Prepare the following MRs. Get them approved and ready to be merged, but **do not** merge them.\n    1. [x] Prepare an MR to update all CustomersDot Ansible references in the documentation (ie. `README.md`, `doc/` folder, comments) for both the CustomersDot and the Ansible projects.\n    1. [x] Prepare an MR that updates all CustomersDot Ansible references in the Runbooks project.\n    1. [x] Prepare an MR that updates CustomersDot Ansible references in CustomersDot's `.gitlab-ci.yml`\n\n1. [x] When items above are completed, choose a date and time to do the transfer and announce it in the `#s_fulfillment` Slack channel.\n\n### Project transfer!\n\n1. [x] Create a [new CustomersDot issue](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/new) with a ~\"production::blocker\" label.\n    - Use this issue: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5092\n\n1. [x] Create a [new CustomersDot Ansible issue](https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible/-/issues/new) with a ~\"provisioning blocker\" label.\n    - Use this issue: https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible/-/issues/162\n\n1. [x] Delete all existing images: https://docs.gitlab.com/ee/user/packages/container_registry/index.html#limitations\n   1. [x] Double-check the current version of [Docker images in the former project](https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible/container_registry) and take note of them:\n      - customersdot-ansible: `v0.0.1`\n      - molecule-environment: `v0.0.1`\n\n1. [x] Proceed to [transfer the project to `gitlab-org`](https://docs.gitlab.com/ee/user/project/settings/index.html#transfer-a-project-to-another-namespace).\n\n1. [x] Rebuild the Docker images and push them\n   1. [x] Make sure you're logged in to the new (migrated) project's registry.\n   1. [x] Rebuild Docker images locally (verify version numbers) and push them to the new project's registry:\n       ```bash\n       # customers-ansible image\n       docker build --no-cache -f Dockerfile -t registry.gitlab.com/gitlab-org/customers-ansible:v0.0.1 .\n       docker push registry.gitlab.com/gitlab-org/customers-ansible:v0.0.1\n\n       docker build --no-cache -f Dockerfile -t registry.gitlab.com/gitlab-org/customers-ansible:stable .\n       docker push registry.gitlab.com/gitlab-org/customers-ansible:stable\n\n       # molecule-environment image\n       docker build --no-cache -f test/docker/molecule-environment/Dockerfile -t registry.gitlab.com/gitlab-org/customers-ansible/molecule-environment:v0.0.1 .\n       docker push registry.gitlab.com/gitlab-org/customers-ansible/molecule-environment:v0.0.1\n\n       docker build --no-cache -f test/docker/molecule-environment/Dockerfile -t registry.gitlab.com/gitlab-org/customers-ansible/molecule-environment:latest .\n       docker push registry.gitlab.com/gitlab-org/customers-ansible/molecule-environment:latest\n       ```\n\n### Post-transfer tasks and tests\n\n1. [x] Merge the CustomersDot `.gitlab-ci.yml` MR.\n\n1. [x] Test new configuration:\n    - [x] [Provision manually](https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible/blob/8873ad26f8c025db03d86a5fd527dc58d7c64fa0/doc/readme.md?plain=0#manual-provisioning).\n    - [x] [Deploy manually](https://gitlab.com/gitlab-com/gl-infra/customersdot-ansible/blob/8873ad26f8c025db03d86a5fd527dc58d7c64fa0/doc/readme.md?plain=0#manual-deployment-to-production).\n\n1. [x] Review that existing CustomersDot Ansible issues, epics, etc, can be found.\n\n1. [x] Close the ~\"production::blocker\" CustomersDot issue.\n\n1. [x] Close the ~\"provisioning blocker\" CustomersDot Ansible issue.\n\n1. [x] Ask everyone in `#s_fulfillment` to update their project remote:\n    ```bash\n    # cd into local customersdot-ansible project\n    git remote remove origin\n    git remote add origin git@gitlab.com:gitlab-org/customersdot-ansible.git\n    ```\n    Let them know that deployments have resumed as well.\n\n1. [x] Merge the two Documentation MRs.\n\n1. [x] Merge the Runbooks MR.\n\n1. [x] Apply ~\"group::fulfillment platform\" to all issues that are already tagged with the ~\"Fulfillment::InfraDev\" label.","state":"closed","created_at":"2022-09-23T08:05:49.046Z","updated_at":"2022-11-23T15:14:58.302Z","closed_at":"2022-11-17T13:11:09.604Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["Fulfillment::InfraDev","devops::fulfillment","group::fulfillment platform","maintenance::workflow","section::fulfillment","type::maintenance"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4869","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":25,"completed_count":25},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4869","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4869/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4869/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4869","relative":"#4869","full":"gitlab-org/customers-gitlab-com#4869"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115616749,"iid":4867,"project_id":2670515,"title":"[Feature flag] Enables Zuora Billing Account based architecture","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n# Summary\n\nThis issue is to rollout [Zuora Billing Account as a Customer Account](https://gitlab.com/groups/gitlab-org/-/epics/8331) on CustomersDot production,\nthat is currently behind the [`account_data_structure`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/160/edit) feature flag.\n\n## Owners\n\n- Team: ~\"group::fulfillment platform\" \n- Most appropriate Slack channel to reach out to: `#g_fulfillment_platform`\n- Best individual to reach out to: @tyleramos or @vshumilo \n- PM: @mgass1  \n\n## Stakeholders\n\n- Support (@mdunninger @ffarukh)\n- Finance (@s_mccauley @annapiaseczna)\n\n## The Rollout Plan\n\nPercentage Rollout on CustomersDot\n\n## Expectations\n\n### What are we expecting to happen?\n\n##### For all self served orders \n\n**First purchase**\n\n- The creation of an `Account` object in CustomersDot as a counterpart to the Zuora Billing Account that will be created in Zuora. \n- The creation of an `AccountMembership` record in CustomersDot that will associate the Customer that made the purchase to the created `Account`.\n- The SFDC associated account id information will be stored at the created `Account` level.\n\n**Subsequent orders for the same Account**\n\nWill reuse the Account created in the first step. Future orders might be initiated by the same or another Customer. A Customer initiating an order will be already associated to the account via an AccountMembership record to be able to place the order so the creation of this membership is not mentioned here.\n\n##### For sales assisted orders will result in: \n- The creation of a `Customer` based on the provided information that will be reused as the Bill To / Sold To contact at the Zuora Account Level.\n- The creation of an `Account` object in CustomersDot as a counterpart to the Zuora Billing Account.\n- The creation of an `AccountMembership` based on the before mentioned Account and Customer.\n\n**Subsequent orders for the same Account**\n\nWill reuse the Account created in the first step. _To be reviewed: If the new order is associated to a different contact (different email) then we might create a new Customer + Account Membership in CustomersDot._\n\n### What might happen if this goes wrong?\n\n- Purchase flow will not work within CustomersDot.\n- Provision for sales assisted orders will not work.\n\n### What can we monitor to detect problems with this?\n\n- Keep an eye on [Sentry](https://sentry.gitlab.net/gitlab/customersgitlabcom/#).\n- Check `#s_fulfillment_daily` for errors.\n- Verify provisions are being fulfilled within the Provision Tracking System (Admin \u003e Provisions)\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments, i.e. `customers-staging`.\n- [x] Ensure that the rake task to backfill Account and AccountMembership (introduced in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4798) has been run and verified.  This data must be populated before we enable the feature flag in the environment.\n    - [x] `RAILS_ENV=stg ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_with_customers[false]`\n    - [x] `RAILS_ENV=stg ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_cloud_activations[false]`\n    - [x] `RAILS_ENV=stg ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_licenses[false]`\n    - [x] `RAILS_ENV=stg ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_orders[false]`\n- [x] Consider announcing that the flag will be enabled to potentially impacted groups, e.g. `#s_fulfillment_engineering`\n   - https://gitlab.slack.com/archives/C029YFPUA6M/p1674229395068479\n- [x] Enable the feature globally on non-production environments by applying the appropriate environment, e.g. `customers-staging` and `customers-development`.\n- [x] Notify the Software Engineers in Test (SETs) for Fulfillment via Slack and in a comment in this issue when enabling a feature flag in `customers-staging` as it can impact the QA pipeline.\n   - https://gitlab.slack.com/archives/C029YFPUA6M/p1674229669719009?thread_ts=1674229395.068479\u0026cid=C029YFPUA6M\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to production\n- [x] Ensure [test plan](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5555) had been executed successfully\n- [x] Ensure that the rake task to backfill Account and AccountMembership (introduced in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4798) has been run and verified.  This data must be populated before we enable the feature flag in the production environment.\n    - [x] `RAILS_ENV=production ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_with_customers[false]`\n    - [x] `RAILS_ENV=production ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_cloud_activations[false]`\n    - [x] `RAILS_ENV=production ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_licenses[false]`\n    - [x] `RAILS_ENV=production ~/.rbenv/shims/bundle exec rake data_maintenance:billing_accounts:backfill_orders[false]`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in Fulfillment can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the Fulfillment team in #s_fulfillment_engineering\n- [x] Ensure any documentation has been updated\n- [x] Announce on [the feature epic](https://gitlab.com/groups/gitlab-org/-/epics/8950) an estimated time this will be enabled on production if applicable\n- [x] If the feature might impact the user experience, notify `#s_fulfillment` and potentially `#support_gitlab-com`, as well as your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on CustomersDot production\n\n- [x] Confirm the feature flag is enabled on `staging` without incident\n- [x] Roll out the feature to targeted testing users first (if applicable)\n- [x] If applicable, [incrementally roll out](https://docs.gitlab.com/ee/operations/feature_flags.html#percent-rollout) the feature.\n- [x] Verify the change has the desired outcome with the limited rollout before enabling the feature globally on production.\n- [x] Enable the feature globally on production environment\n- [x] Announce on [the feature epic](https://gitlab.com/groups/gitlab-org/-/epics/8950) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe clean up should be done as soon as possible to permanently enable the feature and reduce complexity in the codebase.\n\n- [x] https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5710+\n  - [x] Remove all references to the feature flag from the codebase\n  - [x] Ensure the cleanup issue is closed and all MRs have been deployed to both staging and production\n- [x] Disable the feature flag via the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [x] Ensure production environment is still working as expected\n- [x] Remove the Unleash feature flag from the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by performing the following actions:\n  - [ ] Disable the Unleash flag on the [feature flag page](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/160/edit)","state":"closed","created_at":"2022-09-22T17:44:03.388Z","updated_at":"2023-05-03T18:18:10.495Z","closed_at":"2023-03-15T21:24:27.463Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","customer","devops::fulfillment","feature flag","feature::addition","group::fulfillment platform","missed:15.9","section::fulfillment","type::feature","workflow::complete"],"milestone":{"id":2745651,"iid":85,"group_id":9970,"title":"15.10","description":"","state":"active","created_at":"2022-08-22T16:58:22.132Z","updated_at":"2022-08-22T16:58:22.132Z","due_date":"2023-03-17","start_date":"2023-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/85"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":71,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4867","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":38,"completed_count":36},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4867","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4867/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4867/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4867","relative":"#4867","full":"gitlab-org/customers-gitlab-com#4867"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":115509266,"iid":4861,"project_id":2670515,"title":"Do not show subscription management buttons on CI mins subscriptions without attached namespace","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\nAs mentioned in this [comment](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4428#note_1108064352), we should not be showing subscription management buttons on CI minutes subscriptions without namespace attached.\n\n### Proposal\nAs mentioned in point 3 of this [refinement](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4428#note_1092677679), update the logic to hide subscription management buttons.\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\nSubscription management buttons should not be visible on CI minutes (and other free plans) with no linked namespace.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-21T13:55:53.697Z","updated_at":"2022-09-29T06:32:32.899Z","closed_at":"2022-09-29T06:32:19.091Z","closed_by":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"labels":["SUS::Impacting","UX","[deprecated] Category:Billing and Subscription Management","bug::ux","devops::fulfillment","frontend","group::billing and subscription management","section::fulfillment","severity::4","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"}],"author":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"type":"ISSUE","assignee":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4861","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4861","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4861/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4861/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4861","relative":"#4861","full":"gitlab-org/customers-gitlab-com#4861"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115447179,"iid":4857,"project_id":2670515,"title":"Remove Visual Compliance except for eDisty Marketplace use","description":"### Problem\n\nAs described in [this thread](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/3393#note_1106637176), Visual Compliance code is enabled for eDisty Marketplace Orders, but disabled for all other use in CustomersDot.  This is because Visual Compliance proved to not be as effective in screening, particularly outside of the US.  Given eDisty Marketplace Orders are starting out as US-only, we've enabled VC just for this workflow for now.  The intention eventually is for VC to be replaced with Risk Rate as described [here](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/3393#note_1107774308).\n\n### Proposal\n\nGiven we do not want to enable VC for code paths other than eDisty Marketplace, let's remove this code to avoid confusion and potentially enabling this path by accident.\n\nNote there are 2 distinct feature flags related to visual compliance: `compliance_check_marketplace` and `compliance_check`.  We want to keep the flag `compliance_check_marketplace`, but drop the flag for `compliance_check` and any related code.  \n\n- `perform_compliance_check` [in application_controller.rb](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/e3d1c1a06c37668851bf96058ad78699288fa7e7/app/controllers/application_controller.rb#L92)","state":"closed","created_at":"2022-09-20T18:28:25.941Z","updated_at":"2023-03-31T16:30:02.951Z","closed_at":"2023-03-31T16:30:02.923Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["backend","devops::fulfillment","group::fulfillment platform","maintenance::refactor","section::fulfillment","type::maintenance","workflow::in review"],"milestone":{"id":2910456,"iid":86,"group_id":9970,"title":"15.11","description":"","state":"active","created_at":"2022-12-13T20:08:46.985Z","updated_at":"2022-12-13T20:08:46.985Z","due_date":"2023-04-17","start_date":"2023-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/86"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4857","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4857","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4857/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4857/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4857","relative":"#4857","full":"gitlab-org/customers-gitlab-com#4857"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9831,"epic":{"id":738847,"iid":9831,"title":"Improve Bill To / Sold To Contact Management in CustomersDot","url":"/groups/gitlab-org/-/epics/9831","group_id":9970,"human_readable_end_date":"Jul 31, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":115435033,"iid":4853,"project_id":2670515,"title":"[Knowledge-sharing] Storage provisioning","description":null,"state":"closed","created_at":"2022-09-20T15:03:36.188Z","updated_at":"2022-12-01T15:16:15.467Z","closed_at":"2022-11-17T17:11:55.610Z","closed_by":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"labels":["Enterprise Edition","[deprecated] Category:Provision","backend","customer","devops::fulfillment","frontend","group::provision","knowledge-sharing","missed:15.5","section::fulfillment","type::maintenance","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"}],"author":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"type":"ISSUE","assignee":{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4853","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4853","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4853/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4853/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4853","relative":"#4853","full":"gitlab-org/customers-gitlab-com#4853"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8788,"epic":{"id":604776,"iid":8788,"title":"[Knowledge Sharing]  Add-On Provisoning","url":"/groups/gitlab-org/-/epics/8788","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115435024,"iid":4852,"project_id":2670515,"title":"[Knowledge-sharing] True-ups","description":"# True-ups\n\n## What are True-ups?\n\nTrue-ups are the outstanding overage of maximum users exceeding the users/seats in a license of a self-managed subscription. Any overages during the subscription term need to be resolved by purchasing additional seats for the subscription. True-ups are handled as an add-on product to the subscription during renewal. They are validated when the new license is applied to a self-managed instance.\n\n### How to find the overage\n\nThere are two places within a self-managed instance where the overage is displayed:\n1. Visit the admin dashboard (`/admin`) and look for the `License overview` section. A box displays the overage number as `USERS OVER LICENSE`.\n   \u003cdetails\u003e\n   ![admin_dashboard](/uploads/2a4e2bffda091bdafcff3611f1423935/admin_dashboard.png)\n   \u003c/details\u003e\n2. Visit the subscription page (`/admin/subscription`) to find a similar box as on the admin dashboard that displays the overage number as `USERS OVER SUBSCRIPTION`.\n   \u003cdetails\u003e\n   ![subscription](/uploads/e5f7c8f6201814dd0112d90a6ef6f34d/subscription.png)\n   \u003c/details\u003e\n\n\n## Quarterly reconciliations\n\nQuarterly reconciliations is a feature that is offered within Cloud Licenses. If enabled, a self-managed instance will send seat link information to CustomersDot on a daily basis. This information includes a count of active users and a historical maximum user count.\n\nThe manual true-up process is replaced by an automated quarterly reconciliation process which uses the information from the daily seat link sync to amend subscriptions with any additional users added within the past quarter.\n\n### Difference to quarterly reconciliations (QSR)\n\nTrue-ups are an annual process which means that users over the license needs to be paid for the whole subscription term. When the users were added is not important for this.\n\nQuarterly reconciliations are performed quarterly. Any users over the license needs to be paid for for the remaining subscription term only. This process can result in substantial savings.\n\nSee [this documentation](https://docs.gitlab.com/ee/subscriptions/quarterly_reconciliation.html) for an example on the difference in costs.\n\n## CustomersDot\n\n### Subscription renewal\n\nWhen renewing a self-managed subscription, a section for true-ups will be displayed. The customer is required to enter their current users over the license. Otherwise the license created for the renewal might not work on their instance (might will be explained in the GitLab section).\n\n\u003cdetails\u003e\n![renewal](/uploads/966d6de03d0ed59abbf4b6a3a2663599/renewal.png)\n\u003c/details\u003e\n\nTrue-ups are handled as an add-on product to the subscription. [This code](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a0bd9c8aa410b0e3c924d17a9240db2644ff2e1b/app/services/amend_subscription_service.rb#L162-186) applies the true-up product if required.\n\nWhen the license is created for the renewal, [the code](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a0bd9c8aa410b0e3c924d17a9240db2644ff2e1b/app/models/license.rb#L82) checks if true-up info needs to be set. This is only the case if the true-up quantity is greater than 0 and the license has a term end date. If it is the case, the true-up date range [is automatically set](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a0bd9c8aa410b0e3c924d17a9240db2644ff2e1b/app/models/license.rb#L160-165) to the year prior to the current subscription term.\n\n### Manual license creation\n\nWhen creating a license manually in the Admin, the true-up count can be filled in during the creation as an optional field. Similar to the renewal process, the overage number has to be sufficient to cover the current overage of an instance.\n\n\u003cdetails\u003e\n![license_creation](/uploads/811e3e93dc56cb71dcb2769c9290ae3f/license_creation.png)\n\u003c/details\u003e\n\n## GitLab\n\nWhen applying a license to a self-managed instance, [a validation](https://gitlab.com/gitlab-org/gitlab/-/blob/ba33e30e7295c3528e0eda559dc6768c3c90a257/ee/app/models/license.rb#L36) checks for a sufficient true-up count. This check is only executed if the true-up info is set and the flag `reconciliation_completed` (license restriction attribute) is not set to `true` in the license. If the latter is set to `true`, true-ups will be skipped due to a successful Q3 quarterly reconciliation.\n\nThe historical max during the given true-up date range is used for this validation ([code](https://gitlab.com/gitlab-org/gitlab/blob/ba33e30e7295c3528e0eda559dc6768c3c90a257/ee/app/models/license.rb#L502)). If a previous user count (license restriction attribute `previous_user_count`) is present in the license, the historical max subtracted by the previous user count equals the expected true-up count. If the previous user count is missing, the daily billable users count is used instead (there's a reported bug for this fallback in https://gitlab.com/gitlab-org/gitlab/-/issues/361345).\n\nThe expected true-up count is then compared to the true-up count set in the license plus an additional 10% overage threshold (hence the \"might not work\" phrasing in the CustomersDot section). The threshold part is only available in versions \"%14.2\"+. If it's greater or equal the restricted user count (license restriction attribute `active_user_count`) is validated. This validation adds an error to the user count if the restricted user count plus a 10% overage threshold is less than the restricted user count in the license. If the expected true-up count is less than the true-up count set in the license plus an additional 10% overage threshold, the true-up validation results in an error that is added to the base errors (errors that are not associated to a specific attribute).\n\n## Documentation\n\n- https://gitlab.com/gitlab-org/gitlab/-/blob/aaa552b248b3af6dd2a4de88173fff7bfe85f4e1/doc/subscriptions/self_managed/index.md#users-over-license\n- https://gitlab.com/gitlab-org/gitlab/-/blob/30adf0ce90db1326e9e53388aae26b3266651033/doc/subscriptions/quarterly_reconciliation.md#quarterly-reconciliation-and-annual-true-ups\n- https://gitlab.com/gitlab-org/fulfillment-meta/-/issues/510+\n- https://about.gitlab.com/handbook/business-technology/enterprise-applications/quote-to-cash/troubleshooting/#true-ups-adding-seats-users\n\n## Possible improvements\n\n1. No documentation about true-ups in CustomersDot. Is documentation in GitLab already sufficient?\n1. Consolidate different spellings of true-up. GitLab, CustomersDot and the handbook use a mix of `true-up`, `trueup` and `true up`. It looks like `true-up` is the spelling that is used for customer-facing content.\n   * **Here's one merge request that refactors the spelling in CustomersDot docs: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/6225+**\n1. A previous investigation suggested to loosen the true-up validation for Cloud Licenses or even skip it entirely. This is still under discussion though, see https://gitlab.com/gitlab-org/gitlab/-/issues/362076+.\n\n\n## Knowledge sharing video\n\nhttps://youtu.be/jfwOlYFRTy4","state":"closed","created_at":"2022-09-20T15:03:23.841Z","updated_at":"2023-01-26T22:42:33.899Z","closed_at":"2023-01-12T16:49:08.353Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Enterprise Edition","[deprecated] Category:Provision","backend","customer","devops::fulfillment","group::provision","knowledge-sharing","maintenance::workflow","missed:15.5","missed:15.6","needs weight","section::fulfillment","type::maintenance","workflow::problem validation"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2023-01-10","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4852","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4852","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4852/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4852/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4852","relative":"#4852","full":"gitlab-org/customers-gitlab-com#4852"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8877,"epic":{"id":613071,"iid":8877,"title":"[Knowledge Sharing] True-Up Logic","url":"/groups/gitlab-org/-/epics/8877","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115435011,"iid":4851,"project_id":2670515,"title":"[Knowledge-sharing] Cloud License Activation","description":"Notes: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4851#note_1190996681\n\nVideo: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4851#note_1191293557","state":"closed","created_at":"2022-09-20T15:03:12.055Z","updated_at":"2023-01-03T16:24:27.616Z","closed_at":"2022-12-05T11:39:37.680Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Category:SM Provisioning","Enterprise Edition","[deprecated] Category:Provision","backend","customer","devops::fulfillment","frontend","group::provision","knowledge-sharing","maintenance::workflow","missed:15.5","missed:15.6","needs weight","priority::4","section::fulfillment","type::maintenance","workflow::in dev"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"type":"ISSUE","assignee":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4851","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4851","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4851/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4851/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4851","relative":"#4851","full":"gitlab-org/customers-gitlab-com#4851"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8876,"epic":{"id":613069,"iid":8876,"title":"Process Evaluation: Cloud License Activation","url":"/groups/gitlab-org/-/epics/8876","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115435007,"iid":4850,"project_id":2670515,"title":"[Knowledge-sharing] Legacy License Provisioning","description":"Step 2: Knowledge Sharing\n\n* [x] You've hosted a live knowledge share session for the team or sent out a pre-recorded one that provides an overview of your process.\n\nVideo: https://youtu.be/S6PkHHXjF3c","state":"closed","created_at":"2022-09-20T15:02:50.869Z","updated_at":"2023-01-03T16:24:27.507Z","closed_at":"2022-12-05T02:14:54.689Z","closed_by":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"labels":["Enterprise Edition","[deprecated] Category:Provision","backend","customer","devops::fulfillment","frontend","group::provision","knowledge-sharing","maintenance::workflow","missed:15.5","missed:15.6","needs weight","priority::4","section::fulfillment","type::maintenance","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"}],"author":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"type":"ISSUE","assignee":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4850","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4850","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4850/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4850/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4850","relative":"#4850","full":"gitlab-org/customers-gitlab-com#4850"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8878,"epic":{"id":613074,"iid":8878,"title":"Process Evaluation: Legacy License Provisioning","url":"/groups/gitlab-org/-/epics/8878","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115434998,"iid":4849,"project_id":2670515,"title":"[Knowledge-sharing] Provisioning-related Notifications","description":"Please check the video [here](https://www.youtube.com/watch?v=T_UM41tO10U).\n\n[Notes](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4849#note_1222246231) and [recommendations](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4849#note_1260130350) are below :point_down_tone2:","state":"closed","created_at":"2022-09-20T15:02:37.772Z","updated_at":"2023-02-24T22:05:57.374Z","closed_at":"2023-02-01T18:28:25.532Z","closed_by":{"id":4717243,"username":"a_luna","name":"Amparo Luna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4717243/avatar.png","web_url":"https://gitlab.com/a_luna"},"labels":["Enterprise Edition","[deprecated] Category:Provision","backend","customer","devops::fulfillment","group::provision","knowledge-sharing","maintenance::workflow","missed:15.5","missed:15.6","missed:15.8","priority::4","section::fulfillment","type::maintenance","workflow::in dev"],"milestone":{"id":2745650,"iid":84,"group_id":9970,"title":"15.9","description":"","state":"active","created_at":"2022-08-22T16:58:02.303Z","updated_at":"2022-08-22T16:58:02.303Z","due_date":"2023-02-17","start_date":"2023-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/84"},"assignees":[{"id":4717243,"username":"a_luna","name":"Amparo Luna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4717243/avatar.png","web_url":"https://gitlab.com/a_luna"}],"author":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"type":"ISSUE","assignee":{"id":4717243,"username":"a_luna","name":"Amparo Luna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4717243/avatar.png","web_url":"https://gitlab.com/a_luna"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2023-02-01","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4849","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4849","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4849/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4849/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4849","relative":"#4849","full":"gitlab-org/customers-gitlab-com#4849"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8787,"epic":{"id":604770,"iid":8787,"title":"[Knowledge Sharing]  Provisioning Notifications","url":"/groups/gitlab-org/-/epics/8787","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115434943,"iid":4848,"project_id":2670515,"title":"[Knowledge-sharing] Minutes provisioning","description":null,"state":"closed","created_at":"2022-09-20T15:02:25.977Z","updated_at":"2023-01-10T14:49:25.871Z","closed_at":"2022-11-17T17:12:02.855Z","closed_by":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"labels":["Enterprise Edition","[deprecated] Category:Provision","backend","customer","devops::fulfillment","frontend","group::provision","knowledge-sharing","missed:15.5","priority::4","section::fulfillment","type::maintenance","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"}],"author":{"id":4961018,"username":"mlunoe","name":"Michael Lune","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"type":"ISSUE","assignee":{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4848","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4848","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4848/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4848/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4848","relative":"#4848","full":"gitlab-org/customers-gitlab-com#4848"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8788,"epic":{"id":604776,"iid":8788,"title":"[Knowledge Sharing]  Add-On Provisoning","url":"/groups/gitlab-org/-/epics/8788","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115433442,"iid":4846,"project_id":2670515,"title":"Keeping amendment logic in sync for Orders API","description":"The following discussion from !5458 should be addressed:\n\n- [ ] @tvellishetty started a [discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5458#note_1107066330):  (+1 comment)\n\n    \u003e thought (non-blocking): As we're duplicating the existing logic, it could happen that the logic in `AmendSubscriptionService` is updated and we miss out on updating the logic here. What do you think about moving these to a helper class and use them both here and in existing services? If the chances of this happening is low then it might not be required.","state":"closed","created_at":"2022-09-20T14:58:12.487Z","updated_at":"2022-11-21T06:02:08.669Z","closed_at":"2022-11-21T06:01:52.743Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","maintenance::workflow","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4846","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4846","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4846/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4846/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4846","relative":"#4846","full":"gitlab-org/customers-gitlab-com#4846"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115376867,"iid":4844,"project_id":2670515,"title":"Cancel subscription button should not be shown for expired subscriptions","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\nAs raised in this [comment](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5390#note_1105664081), `Cancel subscription` button is shown on expired subscriptions.\n\n### Proposal\nAdd a condition to hide `Cancel subscription` button on expired subscriptions. We could add a similar condition like the one for `Resume subscription` in `eligible_for_resumption?` in `subscription.rb`. Since the condition is common for `Cancel` and `Resume` logic, we could move it to the `recurrent_subscription?` method in `subscription.rb`.\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n`Cancel subscription` button will not be shown on expired subscriptions.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-20T06:28:02.177Z","updated_at":"2022-10-19T12:25:45.815Z","closed_at":"2022-10-17T19:13:45.037Z","closed_by":{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"},"labels":["SUS::Impacting","UX","[deprecated] Category:Billing and Subscription Management","bug::ux","devops::fulfillment","frontend","group::billing and subscription management","section::fulfillment","severity::4","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"}],"author":{"id":10590518,"username":"snachnolkar","name":"Sharmad Nachnolkar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10590518/avatar.png","web_url":"https://gitlab.com/snachnolkar"},"type":"ISSUE","assignee":{"id":10770603,"username":"lmeckley","name":"Laura Meckley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10770603/avatar.png","web_url":"https://gitlab.com/lmeckley"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4844","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4844","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4844/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4844/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4844","relative":"#4844","full":"gitlab-org/customers-gitlab-com#4844"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115315416,"iid":4838,"project_id":2670515,"title":"Update general emails layout","description":"We are moving from old purple header/footer layout to the black one. This issue is to update the general template, check all the emails affected and change it for all of them at the same time.\n\n### Design draft:\n\n| Old layout | New layout |\n| ------ | ------ |\n| ![layout_old](/uploads/0e726b07802d75e0ce82d468cdee8e10/layout_old.png) | \u003cimg src=\"/uploads/4df1a8413ad827aed8057539b42ba2b9/layout_new.png\" width=\"450px\"/\u003e |\n\nFigma: https://www.figma.com/file/RwDEORCySqiDhagP7OJSde/Clean-up-SaaS-Privisioning-Email?node-id=1%3A60\n\n\n### Links that we use:\n\n| Linked Email Text | URL |\n| ------ | ------ |\n| header: logo | https://about.gitlab.com/ |\n| footer: logo | https://about.gitlab.com/ |\n| footer: Support | https://about.gitlab.com/support/ |\n| footer: Customers Portal | https://customers.gitlab.com/customers/sign_in |\n| footer: Blog | https://about.gitlab.com/blog/ |\n| footer: Contact Sales | https://about.gitlab.com/sales/ |\n\n### Technical considerations:\n\nWe should make sure that email is responsive on smaller screens\n\n### Test plan\n\nhttps://gitlab.com/gitlab-org/fulfillment-meta/-/issues/786+","state":"closed","created_at":"2022-09-19T09:48:51.693Z","updated_at":"2023-01-23T09:24:25.130Z","closed_at":"2022-12-12T09:32:35.134Z","closed_by":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"labels":["UX","[deprecated] Category:Fulfillment Platform","devops::fulfillment","feature::enhancement","frontend","group::fulfillment platform","missed:15.5","missed:15.6","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"}],"author":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"type":"ISSUE","assignee":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4838","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4838","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4838/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4838/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4838","relative":"#4838","full":"gitlab-org/customers-gitlab-com#4838"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7762,"epic":{"id":476191,"iid":7762,"title":"Create a new email template and styles for CustomersDot","url":"/groups/gitlab-org/-/epics/7762","group_id":9970,"human_readable_end_date":"Mar 31, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115242136,"iid":4831,"project_id":2670515,"title":"Testing New Zuora reCAPTCHA Configuration","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\n[Zuora has verified](https://community.zuora.com/communities/community-home/digestviewer/viewthread?MessageKey=ed58fe64-3842-4ea4-9e44-3c093081f1d1\u0026CommunityKey=5aff528c-0e69-4a3d-a756-fe240ad97b02\u0026_ga=2.76996181.1990020224.1663002836-1655512474.1656430981\u0026_gl=1*18qjf3b*_ga*MTY1NTUxMjQ3NC4xNjU2NDMwOTgx*_ga_MY8CQ650DH*MTY2MzM2MTEzOC4yMTYuMS4xNjYzMzYxMTQ3LjAuMC4w) that the Google reCAPTCHA version that we are using in Zuora Production (reCAPTCHA V2) will be deprecated on 2022.11.08. As a result, we will need to implement Google reCAPTCHA Enterprise Interactive, which allows for user input within the CAPTCHA interface, allowing us to abide by GDPR requirements.\n\n### Proposal\n\nIn alignment with the [Proposed Implementation Plan](https://gitlab.com/gitlab-com/business-technology/enterprise-apps/financeops/finance-systems/-/issues/812#update-20220916-captcha-v2-will-be-deprecated-20221108):\n\n1. Assist Finance Systems in testing Hosted Payment Pages in local environments in API Sandbox 1\n2. In coordination with Finance Systems, testing the new reCAPTCHA functionality within all [Hosted Payment pages](https://gitlab.com/groups/gitlab-com/business-technology/enterprise-apps/financeops/-/wikis/Zuora-Hosted-Payment-Pages#hosted-payment-page-gateway-assignments-config-overview). Verify functionality on mobile devices if possible. \n   * Once Finance Systems performs configuration changes in Zuora Central (staging), disable automated end to end testing.  \n   * Once testing is complete, Finance Systems to modify setting to allow for automated end to end testing. Re-enable automated end to end testing.\n3. Production changes made by Finance Systems.\n\n\n### Action plan\n\n#### Dev\n\nEntApps  `2022.09.27 End of Day Pacific Time`:\n\n- [x] update reCAPTCHA settings for `GL.com self-serve Flow`\n- [x] update reCAPTCHA settings for `GL.com CC Validation_2022.04`\n- [x] update reCAPTCHA settings for `GL.com CC Validation_registration`\n- [x] update reCAPTCHA settings for `CustomersDot self-serve Flow`\n- [~] update reCAPTCHA settings for `GL.com CC Validation`\n\n\nEng  `2022.09.28`:\n\n- [x] verify purchase scenario in GitLab.com (**GL.com self-serve Flow**)\n- [x] verify purchase scenario in CustomersDot (**CustomersDot self-serve Flow**)\n- [x] verify CC validation scenario in GitLab.com (**GL.com CC Validation_2022.04**)\n- [ ] verify [CC validation scenario](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/99202#how-to-set-up-and-validate-locally) during registration (**GL.com CC Validation_registration**)\n\n\n#### Staging\n\nPre-requisite  `2022.10.04`:\n\n- [x] SET: disable end-to-end tests [running on staging](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/main/.gitlab/ci/e2e.gitlab-ci.yml#L132)\n\nEntApps  `2022.10.04 End of Day Pacific Time`:\n\n- [x] update reCAPTCHA settings for `GL.com self-serve Flow`\n- [x] update reCAPTCHA settings for `GL.com CC Validation_2022.04`\n- [x] update reCAPTCHA settings for `GL.com CC Validation_registration`\n- [x] update reCAPTCHA settings for `CustomersDot self-serve Flow`\n- [~] update reCAPTCHA settings for `GL.com CC Validation`\n\nEng  `2022.10.05`:\n\n- [x] verify purchase scenario in GitLab.com (**GL.com self-serve Flow**)\n- [x] verify purchase scenario in CustomersDot (**CustomersDot self-serve Flow**)\n- [x] verify CC validation scenario in GitLab.com (**GL.com CC Validation_2022.04**)\n- [ ] verify [CC validation scenario](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/99202#how-to-set-up-and-validate-locally) during registration (**GL.com CC Validation_registration**)\n\nPost actions:\n\n- [x] EntApps: modify reCAPTCHA threshold to allow for E2E tests\n- [x] SET: reenable end-to-end tests\n\n#### Production\n\nEntApps  `2022.10.11 Afternoon Pacific Time`:\n\n- [x] update reCAPTCHA settings for `GL.com CC Validation_2022.04`\n- [x] Announce update in [#s_fullfilment](https://gitlab.slack.com/archives/CMJ8JR0RH) (internal channel), `#business-fulfillment-sync` and `s_fulfillment_fyi`. Tag Omar in one of the posts to re-post in `s_fulfillment_fyi`.\n\n\nEng  `2022.10.11`:\n\n- [x] verify CC validation scenario in GitLab.com (**GL.com CC Validation_2022.04**)\n\nEntApps  `2022.10.11 After Successful Testing for GL.com CC Validation_2022.04`:\n\n- [x] update reCAPTCHA settings for `GL.com self-serve Flow`\n- [x] update reCAPTCHA settings for `CustomersDot self-serve Flow`\n- [x] update reCAPTCHA settings for `GL.com CC Validation_registration`\n- [x] Announce updates in [#s_fullfilment](https://gitlab.slack.com/archives/CMJ8JR0RH) (internal channel), `#business-fulfillment-sync` and `s_fulfillment_fyi`. Tag Omar in one of the posts to re-post in `s_fulfillment_fyi`.\n\n**Escalation Path**\n`#financesystems_help` Slack channel.","state":"closed","created_at":"2022-09-16T20:46:28.075Z","updated_at":"2022-10-25T12:46:43.781Z","closed_at":"2022-10-17T12:30:13.892Z","closed_by":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"labels":["Category:Purchase","devops::fulfillment","frontend","group::purchase","section::fulfillment","type::maintenance","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[],"author":{"id":8864576,"username":"jesssalcido","name":"Jessica Salcido","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81ad1945ef65f18ac03916e4124b37ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/jesssalcido"},"type":"ISSUE","assignee":null,"user_notes_count":45,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-10-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4831","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":26,"completed_count":24},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4831","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4831/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4831/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4831","relative":"#4831","full":"gitlab-org/customers-gitlab-com#4831"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115226057,"iid":4827,"project_id":2670515,"title":"Improvements to custom action mapping","description":"The following discussion from !5439 should be addressed:\n\n- [ ] @vshumilo started a [discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5439#note_1102613144):  (+5 comments)\n\n    \u003e What do you think about mapping to the actual class?\n    \u003e \n    \u003e That way if the class name changes or is removed we will immediately get an error here?\n\n- [ ] @tvellishetty started a [discussion]https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5439#note_1103708391)\n\n    \u003e thought (non-blocking): similar to [using constants for amendment types](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/3778), we could also use constants order action types","state":"closed","created_at":"2022-09-16T15:17:40.927Z","updated_at":"2022-11-23T07:54:56.594Z","closed_at":"2022-11-23T07:54:56.563Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","maintenance::refactor","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4827","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4827","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4827/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4827/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4827","relative":"#4827","full":"gitlab-org/customers-gitlab-com#4827"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115171593,"iid":4823,"project_id":2670515,"title":"Update ActionTypeGenerator to determine actions based on business logic","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\n[`ActionTypesGenerator`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d482c68e02279a049e34766362baa76efd869d95/app/services/zuora/orders/amendment/action_types_generator.rb) currently determines applicable actions types for a request on an individual basis.\n\nThis approach was found to have the following two shortcoming:\n\n1. The order (or priority) in which the order actions were sent to Zuora may not be appropriate\n   For e.g. when upgrading a self-managed subscription plan during renewal and true-ups are added, `AmendmentSubscriptionService` currently generates amendment in the following order:\n\n   - Remove main product\n   - Add main product\n   - Renew subscription\n   - Add true-ups\n\n  In the current implementation of `ActionTypesGenerator`, it will generate these order actions in the following order:\n\n   - [Remove main product](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d482c68e02279a049e34766362baa76efd869d95/app/services/zuora/orders/amendment/action_types_generator.rb#L39)\n   - [Add main product](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d482c68e02279a049e34766362baa76efd869d95/app/services/zuora/orders/amendment/action_types_generator.rb#L43)\n   - [Add true-ups](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d482c68e02279a049e34766362baa76efd869d95/app/services/zuora/orders/amendment/action_types_generator.rb#L65)\n   - [Renew subscription](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d482c68e02279a049e34766362baa76efd869d95/app/services/zuora/orders/amendment/action_types_generator.rb#L49)\n\n   Given Zuora processes Order actions in the order in which it is sent, it is critical to maintain the priority of the action types:\n\n   ![Screen_Shot_2022-09-15_at_5.37.46_PM](/uploads/27c5cbdbb32ec750f4870b120b24fbf1/Screen_Shot_2022-09-15_at_5.37.46_PM.png)\n\n2. In the event when an order action type is twice: e.g when updating main product, and when updating options product OR when upgrading to a new product and adding true-ups. The determination logic is replicated in both `ActionTypeGenerator` and in `ParamConstructor`.\n\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nIn order to resolve these two issues, action type in `ActionTypesGenerator` can be determined using business logic. `ActionTypesGenerator` returns a list of action types that are specific to CDot, such as `add_main_product`, `add_true_ups`, `remove_main_product`, `update_support_options` and so on.\n\nCrete a mapping of these business driven action types with that of Zuora before invoking Orders API.\n\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-15T22:44:45.233Z","updated_at":"2022-10-20T09:54:48.306Z","closed_at":"2022-09-20T04:25:52.261Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::enhancement","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4823","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4823","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4823/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4823/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4823","relative":"#4823","full":"gitlab-org/customers-gitlab-com#4823"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115166607,"iid":4822,"project_id":2670515,"title":"Salesforce object creation behavior in CustomersDot","description":"### Background\n\nVia the integration with SFDC, Salesforce objects are created in CustomersDot following any self service purchases.  These CDot services that integrate with Salesforce use `Customer` (later to be renamed `User`) information stored in the CDot database like company name, first and last name, email, country, state, zip to create the Salesforce objects.\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/8331, Fulfillment is looking at improving the data architecture of CDot, in particular the `Customer`/`BillingAccount` alignment.  We are focusing on simplifying the `Customer` model, and treating this more like a \"User of the Customer Portal\" (later to be renamed `User`), persisting mainly email address, first name and last name.  These `Customer`s (later renamed `User`s) would have memberships to `BillingAccount`s, which represent Zuora Accounts.  Much of the data that is pulled from `Customer` currently, could be pulled directly from Zuora (and potentially cached in CDot in later iterations) via the Zuora Account and the Sold To Contact for the `BillingAccount`.\n\n### Proposal\n\nInvestigate whether CustomersDot can use the Sold To Contact from the Subscription's Zuora Account, instead of `Customer` (to be renamed `User`) data stored in the CDot DB, to create the appropriate SFDC objects (Account, Contact, Opportunity, etc).\n\nServices in question:\n- All services in https://gitlab.com/gitlab-org/customers-gitlab-com/-/tree/main/app/services/salesforce\n- [`CreateSalesforceContactService`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/edf972ee51f37d98f23a0e38828e5c01d0f5ed3a/app/services/create_salesforce_contact_service.rb)\n- [`CreateSalesforceAccountService`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/99ecaa74572bcf1542b5ab9fadba3f410b402b18/app/services/create_salesforce_account_service.rb#L3)\n\n### Delivery strategy\n\n- [x] :one: Update the CustomersDot matching strategy to find an account within SFDC (https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5970):\n\nFrom:\n- Find SFDC Account by CusomersDot user `salesforce_account_id`\n- Find SFDC Account by CustomersDot user's Zuora Account `crm_id`\n- Find SFDC Contact by exact match to the CustomersDot user's email -\u003e then find the Account for the Contact\n\nTo:\n- Find SFDC Account by CustomersDot user's Zuora Account `crm_id`\n- Exact match with the Zuora Sold To contact email\n- Find SFDC Contact by exact match to the CustomersDot user's email -\u003e then find the Account for the Contact\n\nDiff:\n- **Remove:** ~~Find SFDC Account by CusomersDot user `salesforce_account_id`~~\n- Find SFDC Account by CustomersDot user's Zuora Account `crm_id`\n- **New:** Exact match with the Zuora Sold To contact email\n- Find SFDC Contact by exact match to the CustomersDot user's email -\u003e then find the Account for the Contact\n\n---\n\n- [x] :two: Update the SFDC Account / Contact creation logic: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/6151\n\nFrom: Be based on the CustomersDot user's data.\n\nTo: Be based on the CustomersDot user's Zuora Account Sold To Contact data.\n\nThis change is added behind the `:create_sf_contact_from_zuora_contact` feature flag given:\n- We might have to hand out validation for the changes working properly in staging to another team, possibly not related to engineering.\n- Failures in the SFDC Contact and Account creation will impact revenue metrics.\n\nFeature Flag rollout issue: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5409\n\n:exclamation: :checkered_flag: The flag is currently disabled for staging and production\n\n----\n\n:eye: Extra context: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4822#note_1166606063","state":"closed","created_at":"2022-09-15T20:30:06.020Z","updated_at":"2023-01-19T20:08:14.872Z","closed_at":"2023-01-17T22:29:14.036Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["Affects Salesforce","[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::enhancement","group::fulfillment platform","missed:15.5","missed:15.6","missed:15.7","section::fulfillment","type::feature","workflow::complete"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":40,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4822","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4822","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4822/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4822/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4822","relative":"#4822","full":"gitlab-org/customers-gitlab-com#4822"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115070479,"iid":4816,"project_id":2670515,"title":"Generate all cloud licenses for the entire subscription term","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n## Background\nToday, not all cloud licensing subscriptions are generated for the full subscription term.\n\nThe logic defined [here](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/b555261242ad22c16a988161f2615b8aa07cb78f/app/models/concerns/license_creation.rb#L7-20) defines license end date upon creation of a license. The way this logic is written, if a customer purchases a multi-year subscription and is:\n\n1. On Cloud Licensing AND (QSR OR Ramp): license is issued for the full term purchased for :white_check_mark:\n1. On Cloud Licensing AND **(NOT on QSR and Not on Ramp)**: license is issued for one year only :exclamation:\n\n\nThe thinking for this was that it provides sales with the opportunity for checking for true-ups prior to the start of a new year.\n\n## Problem\nWith this logic, all Cloud Licensing Multi-Year Subscriptions where the customer is not on QSR will expire after 1 year. This will result in the customer losing access entirely at the start of the second year, unless: \n* Sales creates a new $0 quote for the second year, it is synced to Zuora/CDot, and then the customer receives a new activation code? :thinking: this is the only way to avoid this I can think of.\n* This is definitely not a process sales is familiar with.\n\nRelated to this, because of the logic of `term start date` + `1 year`, we are actually creating expired activation codes on year 2. Separate issue for this specifically created here: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4815\n\n### What is the Impact?\nWe expect the majority of customers who are on Cloud Licensing to also have QSR enabled, however, the following categories of customers are currently opted out of QSR by default, but not out of Cloud Licensing:\n1. Channel customers\n2. PubSec customers\n3. PO Required customers\n4. MSA customers\n5. Legacy Ramp customers\n6. Customers on non-standard terms\n\n\nA quick report of new/renewal quotes sent to Zuora with a `Close Date` in 2022, `Initial Term` \u003e `12`, `TurnOnCloudLicensing__c` = `Yes` and `TurnOnSeatReconciliation__c` = `No`:\n* 40 quotes\n\nLooking at this same criteria but New quotes (not yet sent to Zuora), we see:\n* 92 quotes\n\nHowever, with SCL launch having only happened 2 months ago, we can expect this number to continue to increase at a higher rate as all customers are set to `TurnOnCloudLicensing__c` = `Yes` by default.\n\n### Reported Examples\n1. https://gitlab.zendesk.com/agent/tickets/331005\n2. https://gitlab.zendesk.com/agent/tickets/336134\n3. https://gitlab.zendesk.com/agent/tickets/340677\n4. https://gitlab.zendesk.com/agent/tickets/343223\n5. A [Mid-Market Customer](https://gitlab.my.salesforce.com/0014M00001kHwnHQAS) has encountered this after the first year of their 3-Year contract resulted in an \"expired\" cloud activation. [Ticket for reference](https://gitlab.zendesk.com/agent/tickets/351591).\n\n## Proposal\n\n**Summary:** Update license creation logic to generate all cloud licenses for the full term\n\nWe can remove the dependency on QSR for generating a full term license. Instead, all cloud licenses could be generated for the full, Multi-Year term.\n\n**Pros:**\n* Eliminates risk of customer losing instance access/downgrading to free\n* Smoother customer experience, no need to enter a new activation code each year\n* Aligned to communications put out about cloud licensing, that there is no need for additional engagement each year as there is with legacy licenses\n\n**Cons:**\n* Potential loss of revenue as customer would not have an obligation to pay for true-ups prior to beginning the second/third year of their subscription term\n\n\n_NOTE: given the current process for creating ramp deals as 3 unique subscriptions, we should not remove the dependency here for creating 1-year subscriptions for a ramp deal._\n\n\n\u003cdetails\u003e\u003csummary\u003eAlternative option, ruled out\u003c/summary\u003e\n\n#### Maintain current logic but define sales process for non-QSR customers\n\nPotentially, this is by design and sales leadership would prefer to keep this logic in place. If so, we need to make sure that the process is clearly understood by the sales team if their customer is on CL and not QSR. To be considered: additional enablement, sales alerts for upcoming license expiration.\n\n**Pros:**\n* Allows for the possibility of reconciling true-ups, increase in revenue\n\n**Cons:**\n* If sales is not proactive, can result in customer loss of access/downgrade to free\n\n\u003c/details\u003e\n\n### Result\nAll cloud licenses are to be generated for the full subscription term. Customers will no longer lose access after 1 year on a MY subscription.","state":"closed","created_at":"2022-09-14T18:36:44.160Z","updated_at":"2023-05-03T15:58:58.216Z","closed_at":"2022-12-14T15:17:41.530Z","closed_by":{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"},"labels":["Category:SM Provisioning","Common Provisioning Bugs","License Activation","SUS::Impacting","Support Priority","UX","backend","bug::ux","customer","devops::fulfillment","group::provision","missed:15.6","needs weight","priority::2","quad-planning::complete-no-action","section::fulfillment","severity::2","type::bug","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"}],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"},"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4816","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4816","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4816/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4816/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4816","relative":"#4816","full":"gitlab-org/customers-gitlab-com#4816"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8888,"epic":{"id":613155,"iid":8888,"title":"Cloud Licensing Support for Multi-Year, Multi-Subscription Deals","url":"/groups/gitlab-org/-/epics/8888","group_id":9970,"human_readable_end_date":"Jan 31, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114993136,"iid":4812,"project_id":2670515,"title":"Offline Usage File: Support additional mime-types","description":"\n## Summary\n\nCustomer emailed their offline license usage CSV file to us, and received an automated message back that it could not be processed. \n\n- [Customer ticket](https://gitlab.zendesk.com/agent/tickets/325524) (internal)  \n- [subscription](https://www.zuora.com/apps/Subscription.do?method=view\u0026id=8a12892d8234963001823e7435a3621b)  \n- [customer account](https://customers.gitlab.com/admin/customer/437768/edit)\n\n\n\u003cdetails\u003e\u003csummary\u003eFull details of reported bug\u003c/summary\u003e\n\nI see that a [cloud activation](https://customers.gitlab.com/admin/cloud_activation/11787) exists for the subscription, and the [offline license is here](https://customers.gitlab.com/admin/license/1034640).\n\n\n### Relevant logs and/or screenshots\n\n![screenshot-2022-09-13-15_51](/uploads/7fc191c16e1654c86b9906551ea20caf/screenshot-2022-09-13-15_51.png)\n\nThe csv file itself is recorded in the logs here:\n\nhttps://console.cloud.google.com/logs/query;cursorTimestamp=2022-09-13T09:46:10.532Z;query=resource.type%3D%22gce_instance%22%0A%22enrico.prevosti@2bits.it%22%0Atimestamp%3D%222022-09-13T09:46:10.532Z%22%0AinsertId%3D%221ohz9dwf6pj2i3%22;timeRange=PT8H?project=gitlab-subscriptions-prod\n\n`param[33]` specifically.\n\nI also noticed these log entries from `production.log`\n\n\u003cdetails\u003e\n\n```\nI, [2022-09-13T09:46:10.086326 #969237]  INFO -- : [d94d5079-51c0-4d87-b445-4bb7ddc1f37f] Started POST \"/rails/action_mailbox/mailgun/inbound_emails/mime\" for 172.70.135.221 at 2022-09-13 09:46:10 +0000\nI, [2022-09-13T09:46:10.088610 #969237]  INFO -- : [d94d5079-51c0-4d87-b445-4bb7ddc1f37f] Processing by ActionMailbox::Ingresses::Mailgun::InboundEmailsController#create as */*\nI, [2022-09-13T09:46:10.089279 #969237]  INFO -- : [d94d5079-51c0-4d87-b445-4bb7ddc1f37f]   Parameters: {\"Accept-Language\"=\u003e\"it-IT, en-US\", ....... [snipped out]\n\nI, [2022-09-13T09:46:10.520825 #969237]  INFO -- : [d94d5079-51c0-4d87-b445-4bb7ddc1f37f]   GCS Storage (385.1ms) Uploaded file to key: [snipped] (checksum: eOh6+mF+m4cU4kqmXYFa1g==)\nI, [2022-09-13T09:46:10.522318 #969237]  INFO -- : [d94d5079-51c0-4d87-b445-4bb7ddc1f37f] [ActiveJob] Enqueued ActionMailbox::RoutingJob (Job ID: f2d3a2bb-3291-4802-a2e7-b3321dd92c9b) to Sidekiq(default) with arguments: #\u003cGlobalID:0x00007f8c54b5e798 @uri=#\u003cURI::GID gid://payment-app/ActionMailbox::InboundEmail/30\u003e\u003e\nI, [2022-09-13T09:46:10.532055 #969237]  INFO -- : [d94d5079-51c0-4d87-b445-4bb7ddc1f37f] No template found for ActionMailbox::Ingresses::Mailgun::InboundEmailsController#create, rendering head :no_content\nI, [2022-09-13T09:46:10.532353 #969237]  INFO -- : [d94d5079-51c0-4d87-b445-4bb7ddc1f37f] Completed 204 No Content in 443ms (ActiveRecord: 19.1ms | Allocations: 25146)\n\nI, [2022-09-13T09:46:10.537933 #969416]  INFO -- : [ActiveJob] [ActionMailbox::RoutingJob] [f2d3a2bb-3291-4802-a2e7-b3321dd92c9b] Performing ActionMailbox::RoutingJob (Job ID: f2d3a2bb-3291-4802-a2e7-b3321dd92c9b) from Sidekiq(default) enqueued at 2022-09-13T09:46:10Z with arguments: #\u003cGlobalID:0x000055749db261c0 @uri=#\u003cURI::GID gid://payment-app/ActionMailbox::InboundEmail/30\u003e\u003e\nI, [2022-09-13T09:46:10.630964 #969416]  INFO -- : [ActiveJob] [ActionMailbox::RoutingJob] [f2d3a2bb-3291-4802-a2e7-b3321dd92c9b] ESC[36m  GCS Storage (69.6ms) ESC[0mESC[34mDownloaded file from key: [snipped]ESC[0m\nI, [2022-09-13T09:46:10.647535 #969416]  INFO -- : [ActiveJob] [ActionMailbox::RoutingJob] [f2d3a2bb-3291-4802-a2e7-b3321dd92c9b]   Rendered customer_mailer/provisioning_error_notification.html.haml within layouts/mailer (Duration: 4.6ms | Allocations: 3430)\n```\n\n\u003c/details\u003e\n\nNot sure how relevant it is, but this kinda stands out\n\n\u003e  No template found for ActionMailbox::Ingresses::Mailgun::InboundEmailsController#create, rendering head :no_content\n\nProduction's console output:\n\n```\nI, [2022-09-13T09:46:10.537933 #969416]  INFO -- : [ActiveJob] [ActionMailbox::RoutingJob] [f2d3a2bb-3291-4802-a2e7-b3321dd92c9b] Performing ActionMailbox::RoutingJob (Job ID: f2d3a2bb-3291-4802-a2e7-b3321dd92c9b) from Sidekiq(default) enqueued at 2022-09-13T09:46:10Z with arguments: #\u003cGlobalID:0x000055749db261c0 @uri=#\u003cURI::GID gid://payment-app/ActionMailbox::InboundEmail/30\u003e\u003e\n```\n\nThis log line indicates the `ActionMailbox::InboundEmail` object saved from this email has `id = 30`.\n\nUsing the steps from [our troubleshooting docs](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/main/doc/license/cloud_license.md#troubleshooting), we can see the attached file has `mime-type: 'application/octet-stream'` instead of the [expected](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d2ccaa0f4eab6ff879d4b00a8e5a9ac77db9a9f3/app/mailboxes/offline_provisioning_mailbox.rb#L25) `'text/csv'` so we end up with an *empty* attachment which triggers a [provisioning_error_notification](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/main/app/mailboxes/offline_provisioning_mailbox.rb#L14).\n\n\u003cdetails\u003e\n\u003csummary\u003eOutput from production\u003c/summary\u003e\n\n```ruby\ninbound_email = ActionMailbox::InboundEmail.find(30)\n=\u003e #\u003cActionMailbox::InboundEmail id: 30, status: \"delivered\", message_id: \"VI1PR0701MB23836406448561E20F5820D2D5479@VI1PR0701...\", ...\u003e\n\nmail = inbound_email.mail\n=\u003e #\u003cMail::Message:91420, Multipart: true, Headers: \u003cReceived: from ...\u003e...\u003e\n\nlicense_usage_file = Array(mail.attachments).find do |attachment|\n  attachment.filename == 'license_usage.csv' \u0026\u0026 attachment.mime_type == 'text/csv'\nend\n=\u003e nil\n\n# Load all the attachments\nattachments = Array(mail.attachments)\nattachments.size\n=\u003e 2\n\nattachment = attachments.last\n=\u003e #\u003cMail::Part:91460, Multipart: false, Headers: \u003cContent-Type: application/octet-stream; name=\"license_usage.csv\", ...\u003e,\n\n# the csv file is there and contains the usage data but the check for the mime_type doesn't succeed\n```\n\u003c/details\u003e\n\n\u003c/details\u003e\n\n## Cause of Bug\nIn investigating this bug, it was determined that the mime-type `mime-type: 'application/octet-stream'` used by the customer here is not currently supported by our code. This mime-type is somewhat common in email clients.\n\n## Proposal for Resolution\nConsider the mime-type `mime-type: 'application/octet-stream'` as part of the [finding condition](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d2ccaa0f4eab6ff879d4b00a8e5a9ac77db9a9f3/app/mailboxes/offline_provisioning_mailbox.rb#L25) for offline usage data reporting.\n\n## Reported examples\n\n1. https://gitlab.zendesk.com/agent/tickets/325524\n1. https://gitlab.zendesk.com/agent/tickets/333322\n1. https://gitlab.zendesk.com/agent/tickets/335931\n1. https://gitlab.zendesk.com/agent/tickets/334735\n1. https://gitlab.zendesk.com/agent/tickets/339231\n1. https://gitlab.zendesk.com/agent/tickets/340432\n1. https://gitlab.zendesk.com/agent/tickets/348986 (mime was `application/vnd.ms-excel`)\n\n\u003c!---\nPlease add both severity and priority level according to: https://docs.gitlab.com/ee/development/contributing/issue_workflow.html#severity-labels\n---\u003e","state":"closed","created_at":"2022-09-13T19:57:31.301Z","updated_at":"2023-03-13T17:35:41.873Z","closed_at":"2022-11-07T11:13:43.342Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Category:SM Provisioning","Common Provisioning Bugs","Offline Provisioning","backend","customer","devops::fulfillment","group::provision","section::fulfillment","severity::3","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":4447183,"username":"kevenhughes","name":"Keven Hughes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4447183/avatar.png","web_url":"https://gitlab.com/kevenhughes"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4812","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4812","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4812/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4812/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4812","relative":"#4812","full":"gitlab-org/customers-gitlab-com#4812"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114984766,"iid":4810,"project_id":2670515,"title":"[Spike] Replace Customer references to salesforce_account_id","description":"### Problem\n\nThere are places in the application where `salesforce_account_id` is referenced from `Customer` (to be renamed `User`).  Here are a few examples:\n\n- [Salesforce::CreateAccountWorker](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a9a5f019735cfacfca05992367c369f1bc95ef27/app/workers/salesforce/create_account_worker.rb#L42)\n- [Salesforce::FindAccountService](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/43b599e2dc1d52d074d97da549167c2b44a8bf69/app/services/salesforce/find_account_service.rb#L16)\n- [Api::CustomersController](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/5c81f897836d36021d982a6c4f5b2645e946f5a6/app/controllers/api/customers_controller.rb#L35)\n\nNote: This is not an exhaustive list.  As we start working on this issue, we could promote this to a sub-epic and create issues for smaller pieces.\n\n### Proposal\n\nLet's review the application code to find all the places where `salesforce_account_id` is referenced from a `Customer`.  When the feature flag (introduced in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4794) is enabled, the `Customer`'s `BillingAccountMembership` should be used instead.  In many instances, the logged in Customer would have selected the `BillingAccount` they wish to administer, so this scope should be set and used to fetch `salesforce_account_id` instead of using the `salesforce_account_id` directly on `Customer`.\n\nThe legacy code will be removed in a later issue once the feature flag has been vetted and promoted in production.","state":"closed","created_at":"2022-09-13T17:30:31.291Z","updated_at":"2022-12-16T18:22:13.433Z","closed_at":"2022-12-16T18:22:13.402Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::verification"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4810","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4810","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4810/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4810/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4810","relative":"#4810","full":"gitlab-org/customers-gitlab-com#4810"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114980769,"iid":4809,"project_id":2670515,"title":"Ability to add an Order Action type more than once in a transaction","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\n[`ParamConstructor`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/tree/main/app/services/zuora/orders/actions/param_constructor/) (`Zuora::Orders::Actions::ParamConstructor`) is a set of middleware services that sanitizes and formulates params required by an order action service (`Zuora::Orders::Actions`).\n\nCurrently, `ParamConstructor` returns a single object, assuming that a transaction can contain an Order action type only once. While this is true for most order actions in the existing business driven actions, there are a few exceptions such as:\n\n  - `UpdateProduct`: a single transaction can update [main product](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d2ccaa0f4eab6ff879d4b00a8e5a9ac77db9a9f3/app/services/amend_subscription_service.rb#L83) as well as [options product](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d2ccaa0f4eab6ff879d4b00a8e5a9ac77db9a9f3/app/services/amend_subscription_service.rb#L94)\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n- Update `params` in `Zuora::Orders::Actions::BaseService` to be an Array of Objects instead of a single Object\n- Update `.execute` in `Zuora::Orders::Actions::BaseService` to loop through `params` \n- Individual `Zuora::Orders::Actions::ParamConstructor` returns an array instead of an object\n\n### Result\n\n- Ability to add more than one instance of an OrderAction type in a transaction \n- Signature of `ParamConstructor` is consistent for all order actions\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-13T16:53:43.326Z","updated_at":"2022-09-16T15:22:16.713Z","closed_at":"2022-09-16T15:22:16.684Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","maintenance::workflow","section::fulfillment","type::maintenance","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4809","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4809","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4809/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4809/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4809","relative":"#4809","full":"gitlab-org/customers-gitlab-com#4809"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114974741,"iid":4807,"project_id":2670515,"title":"Replace Customer references to zuora_account_id in Rails Admin and Reconciliation services","description":"### Problem\n\nThere are many places in the application where `zuora_account_id` is referenced from `Customer` (to be renamed `User`).  Here are a few examples:\n\n- [Setting zuora_account_id on an Order](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/65d6481e7edac53a5839973c5f7aa6d916a10c75/app/models/order.rb#L308)\n- [FindOrCreateCustomerService](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a370c2b4b1a4fec50a6be2291c7b0ec7c73e0cd7/app/services/find_or_create_customer_service.rb#L23)\n- [InvoicesFinder](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/ccc5b4d03aaa3929ab72b3a36fdc7b6eb14d672c/app/finders/invoices_finder.rb#L19)\n\nNote: This is not an exhaustive list.  As we start working on this issue, we could promote this to a sub-epic and create issues for smaller pieces.\n\n### Proposal\n\nLet's review the application code to find all the places where `zuora_account_id` is referenced from a Customer.  When the feature flag (introduced in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4794) is enabled, the `Customer`'s `BillingAccountMembership` should be used instead.  In many instances, the logged in `Customer` would have selected the `BillingAccount` they wish to administer, so this scope should be set and used instead of using the `zuora_account_id` directly on `Customer`.\n\nThe legacy code will be removed in a later issue once the feature flag has been vetted and promoted in production.\n\n**2022-12-16 UPDATE:** [We've broken this issue](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4807#note_1211450977) into an epic with many issues.  I moved this issue into the [newly created epic](https://gitlab.com/groups/gitlab-org/-/epics/9515) and I've narrowed the focus of this issue to just those items that have been delivered to this point (admin changes and updates to the reconciliation services).","state":"closed","created_at":"2022-09-13T15:48:57.209Z","updated_at":"2022-12-16T22:28:52.832Z","closed_at":"2022-12-16T22:28:52.812Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","maintenance::refactor","quad-planning::complete-no-action","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4807","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4807","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4807/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4807/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4807","relative":"#4807","full":"gitlab-org/customers-gitlab-com#4807"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9515,"epic":{"id":683654,"iid":9515,"title":"Update customer references to zuora_account_id","url":"/groups/gitlab-org/-/epics/9515","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":114972511,"iid":4806,"project_id":2670515,"title":"Create Admin tools for Account and AccountMembership","description":"### Problem\n\nOnce Account and AccountMembership models are added, Support and other GitLab members will need a way to manage these records via the CustomersDot Admin interface.\n\n### Proposal\n\nLet's sections to the Admin interface (http://customers.gitlab.com/admin) for the new models `Account` and `AccountMembership`.  This should allow admins to:\n\n- View all Accounts\n- View AccountMemberships for an Account\n- View AccountMemberships for a Customer\n- Create an AccountMembership\n- Delete an AccountMembership\n\nOther functionality like creating or editing an Account, might be useful, but let's check with the team on this before adding, or it could always be added later.","state":"closed","created_at":"2022-09-13T15:30:47.866Z","updated_at":"2022-10-12T08:28:34.126Z","closed_at":"2022-09-28T21:31:41.444Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4806","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4806","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4806/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4806/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4806","relative":"#4806","full":"gitlab-org/customers-gitlab-com#4806"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114969953,"iid":4804,"project_id":2670515,"title":"Add billing_account_id to Order","description":"### Problem\n\nThe `Order` model currently has an association with an individual `Customer` (to be renamed `User`) via foreign key `customer_id`.  This relationship is problematic for many reasons and should be associated with a `BillingAccount` instead.\n\n### Proposal\n\nWith the new data structure for `BillingAccount` and `BillingAccountMembership`, the `Order` model should be updated to be associated with a `BillingAccount` instead of a `Customer`.  The full migration will need to be done in steps, spread across multiple issues and MRs.  \n\nFor this issue, we will focus on getting to compatibility mode where `customer_id` continues to be set, but the `billing_account_id` will also be set.  In this issue, the following should be covered:\n\n- [x] Add `billing_account_id` column - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5750\n- [x] Start setting `billing_account_id` in application logic (e.g. when creating/updating a `Order`) - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5770\n- [x] Use new `billing_account` relationship instead of `customer` when `account_data_structure` [feature flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4867) is enabled - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5874\n- [x] Introduce rake task to backfill `billing_account_id` for existing `Order` records - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5967\n   - ~~If it's easier, this could be added to the rake task from https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4798.  Or it could be a standalone task.~~\n\n### Result\n\n`billing_account_id` will be populated similar to how `customer_id` is set currently.  `customer_id` will continue to be populated to ensure compatibility and allow us to revert if needed.  When the feature flag is enabled, the new `billing_account_id` will be used instead of `customer_id`.","state":"closed","created_at":"2022-09-13T15:13:54.902Z","updated_at":"2023-02-06T10:34:03.351Z","closed_at":"2022-12-01T13:42:08.315Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","missed:15.6","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4804","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4804","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4804/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4804/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4804","relative":"#4804","full":"gitlab-org/customers-gitlab-com#4804"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":114968429,"iid":4802,"project_id":2670515,"title":"Add billing_account_id to License","description":"### Problem\n\nThe `License` model currently has an association with an individual `Customer` (to be renamed `User`) via foreign key `customer_id`.  This model really should be associated with a `BillingAccount` instead of an individual `Customer`.  Most data that references `Customer` should be pulled directly from the `BillingAccount`, or from the Sold To Contact associated with the `BillingAccount`.\n\n### Proposal\n\nWith the new data structure for `BillingAccount` and `BillingAccountMembership`, the `License` model should be updated to be associated with an `BillingAccount` instead of a `Customer`.  The full migration will need to be done in steps, spread across multiple issues and MRs.  \n\nFor this issue, we will focus on getting to compatibility mode where `customer_id` continues to be set, but the `billing_account_id` will also be set.  In this issue, the following should be covered:\n\n- [x] Add `billing_account_id` column: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5732\n- [x] Start setting `billing_account_id` in application logic (e.g. when creating a `License`) https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5747\n- [x] Use new `billing_account` relationship instead of `customer` when `account_data_structure` [feature flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4867) is enabled https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5798\n- [x] Introduce rake task to backfill `billing_account_id` for existing `License` records https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5967\n   - ~~If it's easier, this could be added to the rake task from https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4798.  Or it could be a standalone task.~~\n\n### Result\n\n`billing_account_id` will be populated similar to how `customer_id` is set currently.  `customer_id` will continue to be populated to ensure compatibility and allow us to revert if needed.  When the feature flag is enabled, the new `billing_account_id` will be used instead of `customer_id`.","state":"closed","created_at":"2022-09-13T15:03:37.936Z","updated_at":"2023-02-06T10:34:03.295Z","closed_at":"2022-12-01T13:40:56.882Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","missed:15.6","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4802","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4802","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4802/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4802/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4802","relative":"#4802","full":"gitlab-org/customers-gitlab-com#4802"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":114965413,"iid":4800,"project_id":2670515,"title":"Add billing_account_id to CloudActivation","description":"### Problem\n\nThe `CloudActivation` model currently has an association with an individual `Customer` (to be renamed `User`) via foreign key `customer_id`.  This relationship is problematic for many reasons and should be associated with a `BillingAccount` instead.\n\n### Proposal\n\nWith the new data structure for `BillingAccount` and `BillingAccountMembership`, the `CloudActivation` model should be updated to be associated with an `BillingAccount` instead of a `Customer`.  The full migration will need to be done in steps, spread across multiple issues and MRs.  \n\nFor this issue, we will focus on getting to a compatibility mode where `customer_id` continues to be set, but the `billing_account_id` should also be set.  In this issue, the following should be covered:\n\n- [x] Add `billing_account_id` column\n   - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5717\n- [x] Start setting `billing_account_id` in application logic (e.g. when creating a `CloudActivation`)\n   - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5738\n- [x] Use new `billing_account` relationship instead of `customer` when `account_data_structure` [feature flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4867) is enabled\n   - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5754\n   - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5809\n   - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5836\n   - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5858\n- [x] Introduce rake task to backfill `billing_account_id` for existing `CloudActivation` records\n   - If it's easier, this could be added to the rake task from https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4798.  Or it could be a standalone task.\n   - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5890\n\n### Result\n\n`billing_account_id` will be populated similar to how `customer_id` is set currently.  `customer_id` will continue to be populated to ensure compatibility and allow us to revert if needed.  When the feature flag is enabled, the new `billing_account_id` will be used instead of `customer_id`.","state":"closed","created_at":"2022-09-13T14:46:32.664Z","updated_at":"2023-02-06T10:34:03.213Z","closed_at":"2022-11-17T15:50:19.409Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4800","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4800","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4800/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4800/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4800","relative":"#4800","full":"gitlab-org/customers-gitlab-com#4800"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":114901357,"iid":4798,"project_id":2670515,"title":"Backfill BillingAccounts and BillingAccountMemberships for existing Customers","description":"### Problem\n\nOnce `BillingAccount` and `BillingAccountMembership` records are being created (introduced in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4795 and https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4796) and kept in sync (introduced in https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4797), we should be in a position to confidently backfill this data for existing `Customer` (to be renamed `User`) records.\n\n### Proposal\n\nCreate a rake task to backfill `BillingAccount` and `BillingAccountMembership` records for existing `Customer` (to be renamed `User`) records.  We should consider an idempotent rake task that can be run multiple times.  We may need to run this several times as we test out the issues for creating `BillingAccount`s and keeping the information in sync.  \n\nThis task will need to be run at least once before [the feature flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/160/edit), `account_data_structure`, is enabled to ensure we can confidently start using the new data architecture in production.  Steps have been added to the feature flag rollout issue, https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4867+, to run the rake task introduced in this issue in non-production, then production environments.  As part of this issue, we should verify the rake task works by running it in staging and production to test, but we will run it again as part of the feature flag rollout.  Please update [the rollout issue](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4867) with the exact rake task command to run in staging and production.\n\nQuestion to consider:\n- What happens when the `zuora_account_id` and `salesforce_account_id` aren't consistent between `Customer` (to be renamed `User`) records associated to the same `BillingAccount`?  We should probably run a query to see how prevalent this is.  If this does happen, how prevalent is it and can we account for these discrepancies programmatically?","state":"closed","created_at":"2022-09-12T21:45:12.448Z","updated_at":"2022-12-28T13:54:36.502Z","closed_at":"2022-12-16T19:41:13.739Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::consolidation","group::fulfillment platform","missed:15.6","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4798","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4798","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4798/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4798/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4798","relative":"#4798","full":"gitlab-org/customers-gitlab-com#4798"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114901124,"iid":4797,"project_id":2670515,"title":"Mechanism to keep BillingAccount data in sync with Zuora","description":"### Problem\n\nWith `BillingAccount` records being created and stored locally in CustomersDot, it will be important to make sure the data stored locally is kept in sync with the Single Source of Truth, Zuora.  The main concern at this point might be the `BillingAccount` `name` as we may not be caching much else locally.  We can reference the issue where the `BillingAccount` model was introduced for more information, https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4792.\n\n### Proposal\n\nIn this issue, we need to work with @gitlab-com/business-technology/enterprise-apps/zuora-architects to build the mechanism for ensuring changes to Zuora Account (mainly `name` and `salesforce_account_id`) are synced to CustomersDot.  \n\nWe've engaged the Finsys team via https://gitlab.com/gitlab-com/business-technology/enterprise-apps/financeops/finance-systems/-/issues/886.  In that issue, the Finsys team will create a Custom Event for Zuora Account which will send a callout notification to CustomersDot.\n\nIn this issue, we will be responsible for creating the API endpoint for updating the `BillingAccount` record based on this callout notification.\n\n##### Checklist\n\n- [x] Add new API endpoint to enqueue sync account background job\n  - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5995\n- [x] Add sync account worker to update BillingAccount with Zuora Account data\n  - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5995\n- [x] Update documentation in [doc/zuora/zuora_callouts.md](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/1c704fd9e437fd519a4b989884192eece9d080eb/doc/zuora/zuora_callouts.md)\n  - https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/6031\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\nWhen we arrive at a solution, we should add tests to ensure that this _mechanism_ indeed passes and receives correct data with Zuora.  This will likely take the form of integration tests, but contract tests would also work.","state":"closed","created_at":"2022-09-12T21:38:50.695Z","updated_at":"2022-12-10T23:40:32.448Z","closed_at":"2022-12-10T23:40:32.425Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","quad-planning::complete-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4797","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4797","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4797/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4797/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4797","relative":"#4797","full":"gitlab-org/customers-gitlab-com#4797"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":114900593,"iid":4796,"project_id":2670515,"title":"Create BillingAccountMembership when processing Zuora Callouts","description":"### Problem\n\nIn https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4795, the `BillingAccount` and `BillingAccountMembership` should be created when a purchase originates from CustomersDot (ie. self service purchase).  However, there are still places where the `BillingAccount` and/or `BillingAccountMembership` should be created outside of this workflow.\n\n- Sales-assisted purchases\n- Renewals\n\nIn these cases, CustomersDot processes the callout from Zuora in order to update the `Customer` (to be renamed `User`) and provision the subscription.  The Zuora callout code in CustomersDot needs to be updated to handle `BillingAccount` and `BillingAccountMembership` creation.\n\n### Proposal\n\nIn this issue, the `FindOrCreateCustomerService` should be updated to create an `BillingAccountMembership` for a `Customer` (to be renamed `User`) when the `zuora_account_id` attribute is present.  It should also consider creating the `BillingAccount` if it doesn't already exist.\n\nIf an existing `Customer` is found, but the `Customer` is not associated with the `BillingAccount` matching `zuora_account_id`, a new `BillingAccountMembership` (and potentially new `BillingAccount`) could be created.  \n\nWe've decided for this first iteration (https://gitlab.com/groups/gitlab-org/-/epics/8950), that we want to ensure only one `BillingAccountMembership` for a Customer.  This is to keep the same behavior as before, allowing us to step into the new data architecture and roll out the changes more effectively.  See the description in https://gitlab.com/groups/gitlab-org/-/epics/8950#purpose for more info.\n\n#### Feature flag\n\nThis logic will be feature flagged in the short term using [the `:account_data_persistence` flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/171/edit). Here is the rollout issue for it: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5060+. Once we confirm the data is being created as expected and doesn't have any negative effects with the existing creation behavior, we will remove this feature flag.\n\nAs this is just creating data in the new models but not using it yet, we shouldn't need to use the `:account_data_structure` [feature flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/160/edit) for this logic. Eventually, the code setting `customer.zuora_account_id` will be removed but for now both will be set. This will allow us to roll out changes more efficiently without worry of breaking existing functionality.\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\nTests should be created/updated to account for this change.  Test to ensure that:\n\n- Likely Model and Controller specs (to ensure proper validation and relation)\n- UI specs","state":"closed","created_at":"2022-09-12T21:26:59.551Z","updated_at":"2022-11-17T22:09:02.788Z","closed_at":"2022-11-17T22:09:02.758Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","quad-planning::complete-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4796","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4796","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4796/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4796/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4796","relative":"#4796","full":"gitlab-org/customers-gitlab-com#4796"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114895317,"iid":4795,"project_id":2670515,"title":"Create BillingAccount and BillingAccountMembership after purchase","description":"### Proposal\n\nThe `SubscribeService` and `Zuora::Orders::PostCreationService` should be updated to create a `BillingAccount` and `BillingAccountMembership` at the same time `zuora_account_id` is set on the `Customer` (to be renamed `User`).\n\n#### Feature flag\n\nThis logic will be feature flagged in the short term using [the `:account_data_persistence` flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/171/edit).  Here is the rollout issue for it: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5060+.   Once we confirm the data is being created as expected and doesn't have any negative effects with the existing creation behavior, we will remove this feature flag.\n\nAs this is just creating data in the new models but not using it yet, we shouldn't need to use the `:account_data_structure` [feature flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/160/edit) for this logic.  Eventually, the code setting `customer.zuora_account_id` will be removed but for now both will be set.  This will allow us to roll out changes more efficiently without worry of breaking existing functionality.\n\n### Delivery plan\n- [X] Restrict the validations in `BillingAccountMembership` to allow a single account per `Customer`: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5622\n- [x] Create a service that given a customer will update (if necessary) the `BillingAccount` and `BillingAccountMembership` records to reflect the same association the customer is holding: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5660\n\nPlug in the service in the places the customer's `zuora_account_id` set / updated?\n- [x] FindOrCreateCustomerService: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5807\n- [x] SubscribeService: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5807\n- [x] Zuora::Orders::PostSubscriptionCreationService: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5810\n- [x] `clear_missing_zuora_account_ids` task: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5811\n- [x] :exclamation: Rails Admin allows the update to the customer `zuora_account_id`, there is no code in CDot for this as this update uses the RailsAdmin default logic. Make sure the BillingAccount and BillingAccountMemberships are properly updated base on that: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5832\n- [x] Create an issue for ~QA pointing to the service so the associated objects are created in the QA context as well: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5128\n  - PostZuoraRefreshTask\n  - OrderApiClient\n  - QA::Resource::Subscription","state":"closed","created_at":"2022-09-12T19:43:32.680Z","updated_at":"2023-01-20T16:44:46.713Z","closed_at":"2022-11-16T21:35:47.975Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","missed:15.5","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4795","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4795","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4795/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4795/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4795","relative":"#4795","full":"gitlab-org/customers-gitlab-com#4795"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114895045,"iid":4794,"project_id":2670515,"title":"Introduce a feature flag for using new Account structure","description":"### Proposal\n\nTo deliver features more efficiently and safely, let's introduce a feature flag that can be used to gate the new logic for using Accounts and AccountMemberships.  The feature flag could be named something like `account_data_structure` but open to other suggestions.  When the flag is enabled, the new data structure would be used, otherwise continue to use the old relationships.  Even when the flag is disabled though, we could start populating Accounts and Account Memberships to get into a \"compatibility mode\" where we could easily switch the flag on and off as needed.\n\nTODOs:\n\n- [x] Create the [feature flag in CustomersDot project](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags): [account_data_structure](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/160/edit) created.\n- [x] Create an issue to rollout this feature flag and add it to [the epic](https://gitlab.com/groups/gitlab-org/-/epics/8331): https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4867+","state":"closed","created_at":"2022-09-12T19:37:07.677Z","updated_at":"2022-12-16T21:35:19.551Z","closed_at":"2022-09-22T18:16:36.061Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::consolidation","group::fulfillment platform","section::fulfillment","type::feature","workflow::ready for development"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4794","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4794","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4794/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4794/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4794","relative":"#4794","full":"gitlab-org/customers-gitlab-com#4794"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114890486,"iid":4793,"project_id":2670515,"title":"Create AccountMembership model","description":"### Problem\n\nCustomersDot needs a model that represents a `Customer`'s membership to an `Account`.  This would be similar, but not a 1:1 mapping to a Zuora Contact.\n\n### Proposal\n\nCreate migration and model for `AccountMembership` which represents a `Customer` ability to manage an `Account` (Zuora Billing Account).\n\nAttributes to consider for model:\n\n* id\n* customer_id\n* account_id\n\nThe relationships created in this join table will be informed by Zuora Contact data, typically received via Zuora Callouts.  When processing callouts or after a purchase is made in CustomersDot, the `AccountMembership` may be created as a result.  This will be implemented in later issues.","state":"closed","created_at":"2022-09-12T18:20:49.046Z","updated_at":"2022-12-14T23:39:05.520Z","closed_at":"2022-09-23T21:22:49.954Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4793","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4793","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4793/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4793/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4793","relative":"#4793","full":"gitlab-org/customers-gitlab-com#4793"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114890145,"iid":4792,"project_id":2670515,"title":"Create Account model","description":"### Problem\n\nCustomersDot needs a model that represents a Zuora Customer Account.\n\n### Proposal\n\nCreate migration and model for `Account` that maps 1:1 with a Zuora Customer Account.\n\nAttributes to consider for model:\n- `id`\n- `name` (e.g. Customer.company_name)\n- `zuora_account_id`\n- `salesforce_account_id`\n\nOther attributes to consider:\n- `company_size`\n   - This may not need to be persisted on Account as it is currently only used when creating the Salesforce Account when creating a subscription via `SubscriptionManagerService`.  I don't think it is needed for future purchases and therefore probably does not need to be synced.\n- `vat_code`\n   - This may not need to be persisted on Account as it is currently only used in `SubscribeService` or `Zuora::Orders::Entities::NewAccount` before a new account is created.  I don't think it is needed for future purchases and therefore probably does not need to be synced.\n- `billable`\n   - This attribute probably makes more sense at the `Customer` or `AccountMembership` level, but may not make sense as currently implemented.  It's used only to determine which customers should receive a welcome email.  This may require a follow-up issue, perhaps not part of this epic.\n- `login_activated`\n   - This attribute probably makes more sense at the `Customer` or `AccountMembership` level, but may not make sense as currently implemented.  When enabled, this attribute prevents access to CustomersDot.  It is set when a Zuora Callout is processed and a subscription is determined to be managed by a reseller.  This may require a follow-up issue, perhaps not part of this epic.\n\nIt might be a good idea to review [the latest `schema.rb`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/main/db/schema.rb#L112) to make sure all appropriate Customer attributes have been considered for the Account model.\n\nWe are leaning towards very light duplication of data that exists in Zuora, and rely on fetching from Zuora when needed.  We will revisit caching in later iterations, but it probably makes sense to store Account `name` and `salesforce_account_id` locally on this table given they will be used frequently.  This means we will need to keep this model in sync with Zuora, which will be implemented in a later issue.","state":"closed","created_at":"2022-09-12T18:12:14.419Z","updated_at":"2022-12-02T17:02:49.171Z","closed_at":"2022-09-22T17:18:37.643Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4792","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4792","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4792/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4792/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4792","relative":"#4792","full":"gitlab-org/customers-gitlab-com#4792"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8950,"epic":{"id":621714,"iid":8950,"title":"Iteration 1A: Align CustomersDot BillingAccounts and Users to Zuora objects","url":"/groups/gitlab-org/-/epics/8950","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114866402,"iid":4790,"project_id":2670515,"title":"Consolidate subscription state finding logic","description":"### Problem\n\nFor a few of the issues in https://gitlab.com/groups/gitlab-org/-/epics/8402, new logic was introduced in CustomersDot to find subscription state.  This new logic was introduced in [the `Subscriptions::VersionManager` class](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/647dcf59d97e50410274960ab0c847e24b7097ab/app/services/subscriptions/version_manager.rb), used in [the `Subscription#previous_subscription` method](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/bf2057bd9b9e6dcadbcdff3e0ad43fb4b9d65d43/app/models/subscription.rb#L214) as well as a handful of other places.\n\nThere are a few other places, such as the ones below, where subscription state is determined for fetching the current subscription or future versions.\n\n- [`Subscription#current_subscription`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/bf2057bd9b9e6dcadbcdff3e0ad43fb4b9d65d43/app/models/subscription.rb#L48)\n- [`Subscription#subscription_on`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/bf2057bd9b9e6dcadbcdff3e0ad43fb4b9d65d43/app/models/subscription.rb#L52)\n- [`SubscriptionFutureVersionFinder`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/4e6b41d7a311ca7ed54f6a9174cec0cb88ceec64/lib/subscription_future_version_finder.rb#L3) (this is used in for the cloud licensing and seat link)\n\n### Proposal\n\nLet's investigate whether the new class `Subscriptions::VersionManger` can be used for the cases above, and consolidate our subscription state logic.","state":"closed","created_at":"2022-09-12T13:50:09.007Z","updated_at":"2023-03-20T15:00:19.437Z","closed_at":"2023-03-20T14:47:20.376Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","maintenance::refactor","missed:15.9","quad-planning::complete-no-action","section::fulfillment","type::maintenance","workflow::in review"],"milestone":{"id":2745651,"iid":85,"group_id":9970,"title":"15.10","description":"","state":"active","created_at":"2022-08-22T16:58:22.132Z","updated_at":"2022-08-22T16:58:22.132Z","due_date":"2023-03-17","start_date":"2023-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/85"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4790","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4790","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4790/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4790/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4790","relative":"#4790","full":"gitlab-org/customers-gitlab-com#4790"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114785328,"iid":4785,"project_id":2670515,"title":"Upgrade Rails to 7","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\n[In the light of freezing Rails bug fixes for 6.1 releases](https://rubyonrails.org/2022/9/9/Rails-7-0-4-6-1-7-6-0-6-have-been-released), only security fixes will be landed, we should migrate to Rails 7 to keep our version up to date.\n\n\nBTW: Rails 7 has more support, for example: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5678#note_1146728976\n```\n        # Rails 6 `upsert` does not support `:update_only` keyword argument. Rails 7 support `:update_only`.\n        # After upgrade to Rails 7, there is no need to query `existing record's created_at`. It could simplify to:\n        # LocalRecord.upsert({ name: resource, csv: csv, created_at: current_time, updated_at: current_time },\n        #                      unique_by: :name, update_only: [:csv, :updated_at])\n\n```\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-10T18:18:26.974Z","updated_at":"2022-11-14T12:16:54.506Z","closed_at":"2022-11-14T12:16:54.208Z","closed_by":{"id":12801023,"username":"mgass1","name":"Manuel Gass","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12801023/avatar.png","web_url":"https://gitlab.com/mgass1"},"labels":["[deprecated] Category:Fulfillment Platform","devops::fulfillment","group::fulfillment platform","maintenance::dependency","missed:15.5","quad-planning::complete-no-action","section::fulfillment","type::maintenance","workflow::ready for development"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[],"author":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4785","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4785","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4785/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4785/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4785","relative":"#4785","full":"gitlab-org/customers-gitlab-com#4785"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114759324,"iid":4783,"project_id":2670515,"title":"Add additional checks in RenewSubscription order action","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nAs observed in this [comment](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5397#note_1094164054), if `params = { auto_renew: false, renew: true }`, AmendSubscriptionService code will only generate `::Amendment::Types::TERMS_AND_CONDITIONS`.\n\nHowever, `ActionTypesGenerator` will generate both actions: `:renew_subscription` and `:terms_and_conditions`.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nUpdate `check_renewal` in `ActionTypesGenerator` to check for auto renewal and adding new product:\n\n```ruby\ndef check_renewal\n  return unless renewing?\n  return if auto_renew_amendment?\n  return if adding_new_product?\n\n  actions \u003c\u003c :renew_subscription\n  actions \u003c\u003c :update_product if eoa_starter_bronze_uplift_qualified?\nend\n```\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-09T19:27:54.952Z","updated_at":"2022-10-20T09:55:02.565Z","closed_at":"2022-09-14T05:09:31.687Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["[deprecated] Category:Fulfillment Platform","devops::fulfillment","group::fulfillment platform","maintenance::refactor","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4783","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4783","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4783/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4783/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4783","relative":"#4783","full":"gitlab-org/customers-gitlab-com#4783"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114691429,"iid":4778,"project_id":2670515,"title":"Add application instrumentation category","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\n'Application instrumentation' category was [recently added](https://gitlab.com/gitlab-com/www-gitlab-com/raw/master/data/stages.yml), it needs to be added to feature category config.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-08T20:01:54.722Z","updated_at":"2022-10-12T00:21:14.420Z","closed_at":"2022-10-12T00:21:14.401Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","group::fulfillment platform","maintenance::refactor","section::fulfillment","type::maintenance","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4778","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4778","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4778/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4778/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4778","relative":"#4778","full":"gitlab-org/customers-gitlab-com#4778"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114676684,"iid":4775,"project_id":2670515,"title":"[Feature flag] Enable use_orders_api_subscription_update_workflow - Subscription Update","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n# Summary\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\nThis issue is to rollout [Transition Subscription Update workflow to use Orders API](https://gitlab.com/groups/gitlab-org/-/epics/9046) on CustomersDot production,\nthat is currently behind the [`use_orders_api_subscription_update_workflow`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/167/edit) feature flag.\n\n## Owners\n\n- Team: Fulfillment Platform\n- Most appropriate Slack channel to reach out to: `#g_fulfillment_platform`\n- Best individual to reach out to: @aish.sub \n- PM: @tgolubeva @mgass1 \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- GITLAB_HANDLE of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout with specific Customers on CustomersDot, [via Unleash](https://docs.gitlab.com/ee/operations/feature_flags.html#user-ids)\n- Rollout on CustomersDot for a certain period (How long)\n- Percentage Rollout on CustomersDot\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing User/Customer IDs\n\n\u003c!--\nList any Customer IDs for Customers that are happy to have this feature turned on early.\n\nRemove if not applicable\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments, i.e. `customers-staging`.\n- [x] Consider announcing that the flag will be enabled to potentially impacted groups, e.g. `#s_fulfillment_engineering`\n- [x] Enable the feature globally on non-production environments by applying the appropriate environment, e.g. `customers-staging` and `customers-development`.\n- [x] Notify the Software Engineers in Test (SETs) for Fulfillment via Slack and in a comment in this issue when enabling a feature flag in `customers-staging` as it can impact the QA pipeline.\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable. https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5062\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to production\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in Fulfillment can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the Fulfillment team in #s_fulfillment_engineering\n- [ ] Ensure any documentation has been updated\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on production if applicable\n- [x] If the feature might impact the user experience, notify `#s_fulfillment` and potentially `#support_gitlab-com`, as well as your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on CustomersDot production\n\n- [x] Confirm the feature flag is enabled on `staging` without incident\n- [ ] Roll out the feature to targeted testing users first (if applicable)\n- [x] If applicable, [incrementally roll out](https://docs.gitlab.com/ee/operations/feature_flags.html#percent-rollout) the feature.\n- [x] Verify the change has the desired outcome with the limited rollout before enabling the feature globally on production.\n- [x] Enable the feature globally on production environment\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe clean up should be done as soon as possible to permanently enable the feature and reduce complexity in the codebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag\n  - [ ] Remove all references to the feature flag from the codebase\n- [ ] Ensure that the cleanup MR has been deployed to both staging and production\n- [ ] Disable the feature flag via the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [ ] Ensure production environment is still working as expected\n- [ ] Remove the Unleash feature flag from the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by performing the following actions:\n  - [ ] Disable the Unleash flag on the [feature flag page](LINK TO THE FEATURE FLAG EDIT PAGE)","state":"closed","created_at":"2022-09-08T15:58:20.429Z","updated_at":"2023-01-27T20:38:00.282Z","closed_at":"2022-12-16T23:15:47.142Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["Fulfillment Roadmap","[deprecated] Category:Fulfillment Platform","devops::fulfillment","feature flag","feature::consolidation","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4775","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":27,"completed_count":13},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4775","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4775/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4775/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4775","relative":"#4775","full":"gitlab-org/customers-gitlab-com#4775"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114676562,"iid":4774,"project_id":2670515,"title":"[Feature flag] Enable use_orders_api_to_preview_amendment - Preview Subscription Update","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n# Summary\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\nThis issue is to rollout [Use of Orders API when previewing Subscription Update](https://gitlab.com/groups/gitlab-org/-/epics/9046) on CustomersDot production,\nthat is currently behind the [`use_orders_api_to_preview_amendment`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/157/edit) feature flag.\n\nTesting issue: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/5063\n\n## Owners\n\n- Team: Fulfillment platform\n- Most appropriate Slack channel to reach out to: `#g_fulfillment_platform`\n- Best individual to reach out to: @tvellishetty \n- PM: @tgolubeva \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- GITLAB_HANDLE of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout with specific Customers on CustomersDot, [via Unleash](https://docs.gitlab.com/ee/operations/feature_flags.html#user-ids)\n- Rollout on CustomersDot for a certain period (How long)\n- Percentage Rollout on CustomersDot\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing User/Customer IDs\n\n\u003c!--\nList any Customer IDs for Customers that are happy to have this feature turned on early.\n\nRemove if not applicable\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments, i.e. `customers-staging`.\n- [ ] Consider announcing that the flag will be enabled to potentially impacted groups, e.g. `#s_fulfillment_engineering`\n- [x] Enable the feature globally on non-production environments by applying the appropriate environment, e.g. `customers-staging` and `customers-development`.\n- [x] Notify the Software Engineers in Test (SETs) for Fulfillment via Slack and in a comment in this issue when enabling a feature flag in `customers-staging` as it can impact the QA pipeline.\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to production\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in Fulfillment can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the Fulfillment team in #s_fulfillment_engineering\n- [ ] Ensure any documentation has been updated\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on production if applicable\n- [x] If the feature might impact the user experience, notify `#s_fulfillment` and potentially `#support_gitlab-com`, as well as your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on CustomersDot production\n\n- [x] Confirm the feature flag is enabled on `staging` without incident\n- [ ] Roll out the feature to targeted testing users first (if applicable)\n- [ ] If applicable, [incrementally roll out](https://docs.gitlab.com/ee/operations/feature_flags.html#percent-rollout) the feature.\n- [x] Verify the change has the desired outcome with the limited rollout before enabling the feature globally on production.\n- [x] Enable the feature globally on production environment\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe clean up should be done as soon as possible to permanently enable the feature and reduce complexity in the codebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag\n  - [ ] Remove all references to the feature flag from the codebase\n- [ ] Ensure that the cleanup MR has been deployed to both staging and production\n- [ ] Disable the feature flag via the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [ ] Ensure production environment is still working as expected\n- [ ] Remove the Unleash feature flag from the [CustomersDot dashboard](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags)\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by performing the following actions:\n  - [ ] Disable the Unleash flag on the [feature flag page](LINK TO THE FEATURE FLAG EDIT PAGE)","state":"closed","created_at":"2022-09-08T15:55:48.864Z","updated_at":"2022-12-15T23:32:31.900Z","closed_at":"2022-12-15T23:32:31.805Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","devops::fulfillment","feature flag","feature::consolidation","group::fulfillment platform","section::fulfillment","type::feature","workflow::blocked"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4774","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":27,"completed_count":11},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4774","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4774/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4774/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4774","relative":"#4774","full":"gitlab-org/customers-gitlab-com#4774"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114675808,"iid":4773,"project_id":2670515,"title":"Add warning in Danger if a mailer preview is skipped","description":"## Proposal\n\n- [x] Add previews for any mailers that don't already have one\n- [x] Add a warning to [the mailers Dangerfile](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/f8315c9636beef4f2c9baf0a6537f2db91fd325a/danger/mailers/Dangerfile), `mailers/Dangerfile`, to remind people to add a mailer preview if it's not in the MR.\n\n## Follow-up\n\nThe following discussion from !5396 should be addressed:\n\n- [ ] @cwiesner started a [discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5396#note_1093158284):  (+1 comment)\n\n    \u003e **question (non-blocking):** I wonder if it makes sense to add some checks to ensure we have a preview available for every mail :thinking:","state":"closed","created_at":"2022-09-08T15:44:26.912Z","updated_at":"2022-09-15T13:25:47.129Z","closed_at":"2022-09-15T13:25:47.108Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","[deprecated] ","backend","devops::fulfillment","group::fulfillment platform","maintenance::workflow","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4773","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4773","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4773/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4773/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4773","relative":"#4773","full":"gitlab-org/customers-gitlab-com#4773"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114609928,"iid":4770,"project_id":2670515,"title":"Determine TERMS_AND_CONDITIONS order action using Orders API","description":"### Problem\n\nUse `ActionTypeGenerator` to determine when a request pertains to updating `TERMS_AND_CONDITIONS` of a subscription.\n\n### Proposal\n\n![Amendment_Manager_Service](/uploads/0d268933ceafe24643b111892095c38d/Amendment_Manager_Service.png)\n\nIn this issue, we address (1), (2) and (3) for 'TERMS_AND_CONDITIONS' functionality in the following ways:\n\n(1) Add method `#check_terms_and_conditions` to `Orders::Amendment::ActionTypesGenerator` (see `#check_renewal` for implementation structure). The method returns based on the `params` whether a product is being added to subscription. Use existing logic from `AmendSubscriptionService`.\n\n(2) Add method `#terms_and_conditions` to `Zuora::Orders::FeatureAvailability`. This checks if `Unleash.enabled?(:use_orders_api_terms_and_conditions_workflow)` is enabled. Add `terms_and_conditions` to `SUPPORTED_TYPES` constant\n\n(3) Create validator `Zuora::Orders::Amendment::Validators::TermsAndConditions`. Implement `#validate` method that validates if the request for updating terms and conditions is valid. (see `Renewal validator` for implementation structure). Use existing validation logic from `AmendSubscriptionService`. If no validation is present, the validator can return an empty array.\n\nCreate FF `use_orders_api_terms_and_conditions_workflow`.\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-07T20:10:21.104Z","updated_at":"2022-10-20T09:55:31.265Z","closed_at":"2022-09-09T20:54:57.201Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4770","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4770","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4770/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4770/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4770","relative":"#4770","full":"gitlab-org/customers-gitlab-com#4770"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9046,"epic":{"id":629648,"iid":9046,"title":"Transition Subscription Update workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9046","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114472408,"iid":4764,"project_id":2670515,"title":"Set default payment before an upgrade","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nBefore an upgrade (adding new and removing existing main product), the [default payment method is updated](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/34a6597b6ae6e3b9bd304a7e83db7847c28f0939/app/services/amendment_base_service.rb#L217).\n\nWe need a way to incorporate this change when upgrading using Orders API.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nOne option is to set the default payment in the [`PreCreationService`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/34a6597b6ae6e3b9bd304a7e83db7847c28f0939/app/services/zuora/orders/pre_creation_service.rb).\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-06T01:13:05.448Z","updated_at":"2022-10-20T09:58:38.982Z","closed_at":"2022-10-10T05:36:49.380Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4764","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4764","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4764/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4764/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4764","relative":"#4764","full":"gitlab-org/customers-gitlab-com#4764"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9045,"epic":{"id":629636,"iid":9045,"title":"Transition Subscription Upgrade workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9045","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114364728,"iid":4762,"project_id":2670515,"title":"Remove obsolete worker CreateAmendmentWorker","description":"### Problem\n\nIt appears that as of https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5064, the `CreateAmendmentWorker` is no longer used within CustomersDot.  It was previously used in the `billingRateUpdateJob` but this was removed in favor of the renewal capabilities of the `AutoRenewJob`.\n\n### Proposal\n\nLet's remove the obsolete worker, `CreateAmendmentWorker`, and its related code.","state":"closed","created_at":"2022-09-02T18:11:26.677Z","updated_at":"2022-09-16T09:45:22.428Z","closed_at":"2022-09-06T15:57:16.492Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Fulfillment Platform","devops::fulfillment","group::fulfillment platform","maintenance::refactor","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4762","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4762","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4762/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4762/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4762","relative":"#4762","full":"gitlab-org/customers-gitlab-com#4762"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114362745,"iid":4761,"project_id":2670515,"title":"Change type of `actions` from Array to Set","description":"The following discussion from !5354 should be addressed:\n\n- [ ] @tyleramos started a [discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5354#note_1086797196):  (+1 comment)\n\n    \u003e **Suggestion (non-blocking):** I wonder if we made `actions` a [Set](https://ruby-doc.org/stdlib-2.7.6/libdoc/set/rdoc/Set.html) instead of an Array, if that would be slightly more efficient.  It would eliminate duplicates so we wouldn't need to call `.uniq` here.  WDYT?\n    \u003e \n    \u003e This could be in a different MR if you like the suggestion.","state":"closed","created_at":"2022-09-02T16:58:41.228Z","updated_at":"2022-09-15T04:10:31.961Z","closed_at":"2022-09-15T04:10:31.937Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["[deprecated] Category:Fulfillment Platform","[deprecated] ","backend","devops::fulfillment","group::fulfillment platform","maintenance::refactor","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":0,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4761","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4761","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4761/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4761/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4761","relative":"#4761","full":"gitlab-org/customers-gitlab-com#4761"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114349235,"iid":4759,"project_id":2670515,"title":"Exclude unsactioned region on GitLab.com purchase page","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\nBackground: https://gitlab.com/gitlab-com/legal-and-compliance/-/issues/1024\n\n### Problem\n\n\nOn the country pick list, \"Ukraine\" specifically excludes \"the Crimea Region\" but should be updated to exclude \"the Crimea, Donetsk, and Luhansk regions\"\n\n![image](/uploads/2167f351b27ad5d728e89f92572fa575/image.png)\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nExclude \"the Crimea, Donetsk, and Luhansk regions\"\n\n### Result\n\nCountry list is compliant\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-02T12:50:13.558Z","updated_at":"2022-10-11T17:34:43.603Z","closed_at":"2022-09-21T18:13:17.417Z","closed_by":{"id":4903695,"username":"shreyasagarwal","name":"Shreyas Agarwal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d5b09dfe06a10d119c1b2043c43de680?s=80\u0026d=identicon","web_url":"https://gitlab.com/shreyasagarwal"},"labels":["Category:Purchase","backend","devops::fulfillment","group::purchase","section::fulfillment","type::maintenance","workflow::ready for development"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[],"author":{"id":4430316,"username":"rhardarson","name":"Ragnar Hardarson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4430316/avatar.png","web_url":"https://gitlab.com/rhardarson"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4759","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4759","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4759/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4759/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4759","relative":"#4759","full":"gitlab-org/customers-gitlab-com#4759"},"severity":"UNKNOWN","moved_to_id":115527053,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114321038,"iid":4753,"project_id":2670515,"title":"Business driven validation for order actions","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nIn addition to validating individual order action types, there are other complex, business driven validations such as [validating an upgrade](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/d2d6b0627183cb23baa6b296d76c3718ae7b56b5/app/services/amendment_base_service.rb#L215) and so on.\n\nThis kind of validation most often involves more than one order action type.\n\n![CamScanner_09-01-2022_16.19_1](/uploads/2ae42e10e6fae86e5e0307d768b8ef53/CamScanner_09-01-2022_16.19_1.jpg)\n\nThe purpose of this issue is to add ability to validate the business driven validations.\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nThere are at least two ways we can approach it:\n\n- have all the complex use cases in a single file with separate methods OR,\n- have a separate class for each of them\n\nTBD.\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-01T22:37:00.232Z","updated_at":"2022-09-21T21:14:44.220Z","closed_at":"2022-09-21T21:14:44.205Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::in dev"],"milestone":null,"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4753","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4753","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4753/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4753/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4753","relative":"#4753","full":"gitlab-org/customers-gitlab-com#4753"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114311181,"iid":4750,"project_id":2670515,"title":"Use Orders API for Plan upgrade workflow","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\n\nWhen upgrading a plan (for e.g. from `Premium` to `Ultimate`), [`subscription_upgrades`](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/58b903bd713166e58c21b469779859320e2fc10b/config/routes.rb#L102) endpoint is used to preview and perform the upgrade.\n\nThere are specifically two Order action types involved: Add a product and Remove a product.\n\nThis issue pertains with using Orders API to perform the upgrade.\n\nRelated to https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5335#note_1085605708\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-09-01T18:45:35.537Z","updated_at":"2022-10-20T09:58:16.440Z","closed_at":"2022-10-10T03:31:44.434Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","devops::fulfillment","feature::addition","group::fulfillment platform","section::fulfillment","type::feature","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4750","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4750","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4750/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4750/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4750","relative":"#4750","full":"gitlab-org/customers-gitlab-com#4750"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9045,"epic":{"id":629636,"iid":9045,"title":"Transition Subscription Upgrade workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9045","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114296571,"iid":4747,"project_id":2670515,"title":"Investigate: activation code error received for unknown reason","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\nCustomer received a generic error while trying to apply a cloud license activation code. Details:\n* Customer had seat overages, but paid for them as true-ups. However they were applied as two different line items. Was the system maybe not recognizing that all true-ups were paid for?\n* They first tried to apply the activation code prior to the subscription start date of the renewal; this is when the error occurred. Once they tried on the first day, they were successful in activating. Could the date be a factor?\n\nSupporting material:\n* Full context in Slack thread: https://gitlab.slack.com/archives/CMJ8JR0RH/p1661547828336769\n* Zendesk Ticket link (includes screenshot of customer admin view): https://gitlab.zendesk.com/agent/tickets/318851\n\n### Ask\n* Investigate what caused this error to occur.\n* Determine how this can be prevented in the future - do we need any changes, or was this a one-off situation?\n\n### Resolution\n![image](/uploads/4927d71ef63cd2929be891a581037175/image.png)","state":"closed","created_at":"2022-09-01T14:12:52.322Z","updated_at":"2022-09-22T07:40:21.194Z","closed_at":"2022-09-21T19:57:55.004Z","closed_by":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"labels":["[deprecated] Category:Provision","backend","customer","devops::fulfillment","group::provision","missed:15.4","priority::4","section::fulfillment","severity::4","type::bug","workflow::blocked"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"}],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4747","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4747","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4747/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4747/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4747","relative":"#4747","full":"gitlab-org/customers-gitlab-com#4747"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114296114,"iid":4746,"project_id":2670515,"title":"Take care of `app/jobs/zuora` classes (Follow-up from \"Add feature categories to job classes\")","description":"The following discussion from !5333 should be addressed:\n\n- [ ] @paulobarros started a [discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5333#note_1084189875):  (+2 comments)\n\n    \u003e @ebaque Hi Etienne, this looks good to me but I see that some jobs were not included in this categorization (e.g. the ones under the `zuora` folder and a couple more audit-related). Sorry for my lack of context but just for my understanding, could you elaborate a bit on that? I wonder why can't we apply the `:not_owned` category to those. Thanks!","state":"closed","created_at":"2022-09-01T14:05:14.734Z","updated_at":"2022-09-07T14:44:48.806Z","closed_at":"2022-09-07T14:44:48.787Z","closed_by":{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"},"labels":["[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","section::fulfillment","type::maintenance"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},{"id":12246302,"username":"paulobarros","name":"Paulo Barros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12246302/avatar.png","web_url":"https://gitlab.com/paulobarros"}],"author":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4746","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4746","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4746/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4746/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4746","relative":"#4746","full":"gitlab-org/customers-gitlab-com#4746"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114276693,"iid":4745,"project_id":2670515,"title":"Update Subscription Stories in Storybook","description":"The [subscription.stories.js](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/dcbaa3cf09dc0acfe3f32b73720077bebee98a02/stories/subscription.stories.js) is out of sync with the `subscription.vue` component.\n\nFor example the story of [Subscription - one product](http://localhost:6006/?path=/story/subscription--no-products) is displaying a renew button where there's no product available.\n\nWe should update the story accordingly and also update its format to use [controls](https://storybook.js.org/docs/react/essentials/controls).","state":"closed","created_at":"2022-09-01T08:54:39.471Z","updated_at":"2022-12-05T09:37:50.267Z","closed_at":"2022-12-05T09:37:50.241Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["Unplanned","[deprecated] Category:Billing and Subscription Management","devops::fulfillment","frontend","group::billing and subscription management","maintenance::refactor","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4745","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4745","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4745/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4745/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4745","relative":"#4745","full":"gitlab-org/customers-gitlab-com#4745"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114239899,"iid":4742,"project_id":2670515,"title":"Impact to SalesForce amendment opportunity creation with migration to Zuora's Orders API","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Background\n\nWith https://gitlab.com/groups/gitlab-org/-/epics/6438, new subscription creation and amendment to existing subscriptions will be executed using Zuora's Orders API instead of Subscribe and Amend API.\n\nAfter a subscription is created, an account in SalesForce is [created](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a0563d4d477684f0a49b56e57fff2eeb8ba8f469/app/services/subscription_manager_service.rb#L77).\nAfter a subscription is amended, an opportunity is created in SalesForce ([source](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a0563d4d477684f0a49b56e57fff2eeb8ba8f469/app/services/self_service/subscriptions/update_service.rb#L57)).\n\nWhen a subscription is amended, the [list of amendments](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a0563d4d477684f0a49b56e57fff2eeb8ba8f469/app/services/self_service/subscriptions/update_service.rb#L97) are sent to the opportunity creation service and the opportunity creation payload includes attributes that are [retrieved from the amendments](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/a0563d4d477684f0a49b56e57fff2eeb8ba8f469/app/services/salesforce/create_quote_objects_service.rb#L104).\n\n### Problem\n\nZuora's Orders API creates composite amendments, however they will [no longer be available once Orders harmonization is turned off](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4643#note_1079761771). (Orders harmonization lets the use of both Orders and Subscribe \u0026 Amend apis in parallel).\n\nThus, before rolling out the use of Orders API for amendment related actions, we need a way to determine:\n\n  - [ ] does this change require updates to Amendment Quote (currently `sObject` is set to `zqu__QuoteAmendment__c` and result key to `quote_amendment_id`)? This requires input from `Sales Systems` team. \n        Please note this will also require a plan to support both types during the transition period from Amendment API to Orders API.\n\n  - [ ] will this change involve updates to existing attributes or inclusion of any new attributes? This requires input from `Sales Systems` team. \n\n  - [x] determining the amendment related attributes that corresponds with Orders. Possible leads include using invoice line items / abstracting information from order actions. This requires input from `Fulfillment engineering` team. \n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\nTBD\n\n### Result\n\nOpportunity creation in SalesForce works seamlessly with the migration to Orders API.\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-08-31T16:01:18.416Z","updated_at":"2022-11-07T11:15:26.637Z","closed_at":"2022-11-07T11:15:26.613Z","closed_by":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::addition","group::fulfillment platform","missed:15.5","section::fulfillment","type::feature","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"}],"author":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"type":"ISSUE","assignee":{"id":11167007,"username":"aish.sub","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11167007/avatar.png","web_url":"https://gitlab.com/aish.sub"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4742","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4742","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4742/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4742/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4742","relative":"#4742","full":"gitlab-org/customers-gitlab-com#4742"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8665,"epic":{"id":594036,"iid":8665,"title":"Transition Amend() to the Zuora Orders API for subscription amendments","url":"/groups/gitlab-org/-/epics/8665","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114239795,"iid":4741,"project_id":2670515,"title":"Remove self service condition from activation code logic","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n## Background\n\nThe original activation code logic had a couple of checks in place in order for a code to be generated:\n1. Validate the Super Sonics fields (i.e. auto-renewal, operational metrics) were populated OR\n2. Validate the purchase was made through self service \n\nIn reviewing this logic, it was determined that there was no need for the SS field dependency (detailed reasoning outlined [here](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4688#note_1070731626)). As a result, this was removed as part of this issue: https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4688\n\n## Problem\nSince this update, we have identified that the activation code logic still includes the check that a purchase was completed through a self-service path. With the SS logic removed, this is now preventing activation code creation for _all_ sales assisted Self-Managed purchases.\n\n_Note: self-service purchases are still working as expected_\n\n#### Reported Examples\n1. https://gitlab.zendesk.com/agent/tickets/321798 \n2. https://gitlab.slack.com/archives/C018C623KBJ/p1661947151593559?thread_ts=1661268847.706399\u0026cid=C018C623KBJ\n\n### Proposal\n\nRemove the `self_service?` check altogether from the activation code logic.\n\n\n### Result\nCloud activation codes will be created for all Self-Managed subscriptions who do not have `TurnOnCloudLicensing` = `No`, regardless of purchase method.","state":"closed","created_at":"2022-08-31T15:58:17.172Z","updated_at":"2022-11-11T09:27:48.965Z","closed_at":"2022-09-01T07:01:52.299Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Common Provisioning Bugs","[deprecated] Category:Provision","backend","corrective action","devops::fulfillment","group::provision","priority::1","section::fulfillment","severity::1","type::bug","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":7964536,"username":"courtmeddaugh","name":"Courtney Meddaugh","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7964536/avatar.png","web_url":"https://gitlab.com/courtmeddaugh"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4741","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4741","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4741/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4741/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4741","relative":"#4741","full":"gitlab-org/customers-gitlab-com#4741"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8612,"epic":{"id":586296,"iid":8612,"title":"Refactor activation code logic","url":"/groups/gitlab-org/-/epics/8612","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114236503,"iid":4740,"project_id":2670515,"title":"Follow up: Add Product Order Action","description":"### Summary\n\nThe following feedback is addressed: https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5320#note_1083185137\n\nFor the checks in this form:\n\n```ruby\nraise SomeError, 'Error message' unless value\n```\n\nWithin the `orders/actions` we want to update to\n\n```ruby\nraise SomeError, 'Error message' if value.blank?\n```\n\nTo account for empty strings and other possible empty states.","state":"closed","created_at":"2022-08-31T15:00:01.931Z","updated_at":"2022-10-20T10:00:25.954Z","closed_at":"2022-09-07T04:30:47.993Z","closed_by":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"labels":["[deprecated] Category:Fulfillment Platform","backend","devops::fulfillment","feature::consolidation","group::fulfillment platform","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"}],"author":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"type":"ISSUE","assignee":{"id":5667561,"username":"vshumilo","name":"Vladlena Shumilo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/08dfa82785d130c151ab9e21caeab4e3?s=80\u0026d=identicon","web_url":"https://gitlab.com/vshumilo"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4740","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4740","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4740/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4740/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4740","relative":"#4740","full":"gitlab-org/customers-gitlab-com#4740"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9045,"epic":{"id":629636,"iid":9045,"title":"Transition Subscription Upgrade workflow to use Orders API","url":"/groups/gitlab-org/-/epics/9045","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114129936,"iid":4735,"project_id":2670515,"title":"Marketplace subscription ZuoraCallbackWorker wait for the right order status","description":"After marketplace subscription is created, when Zuoracallback starts, in theory, there is a chance:\n- the new customer record is not committed (because we are using [DB transaction](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/fc0f52c30c4420b8f79d8b3a2ba2c4da04236ece/app/services/marketplace/create_subscription_service.rb#L21-26))\n- the [new order creation](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/fc0f52c30c4420b8f79d8b3a2ba2c4da04236ece/app/services/marketplace/create_subscription_service.rb#L28) has not finished yet\n\nIn reality, these are less likely(we assume the Postgres DB transaction and Rails code runs fast enough). But we should ensure to handle this safely.\n\nDepends on https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4732+\n\n### Proposal\n\nIn the Zuora callback worker, add a validation as the first thing:\n 1. check whether this is a marketplace subscription. If it is NOT a marketplace subscription, return.\n     - A marketplace subscription is a subscription with: `Marketplace::CHANNELS.include?(external_subscription_source)`\n 2. query the MarketplaceOrder table, check the order status. raise exception if the `status != :created`.\n     - The Zuoracallback worker will retry, per the Sidekiq worker retry settings.\n     - If it does not succeed after all retries, this requires a manual check. This is unexpected. Actually, most likely we will perform more frequently(probably daily) check the failed Marketplace order.\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\nAvoid unexpected errors from duplicated Customer record and Order record creation competition. -- as the same customer/order creation will be initiated from both Rails(Marketplace::CreateSubcriptionService) and Sidekiq(ZuoracallbackWorker).\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-08-30T07:35:58.093Z","updated_at":"2023-03-20T21:50:58.153Z","closed_at":"2023-03-03T08:56:15.906Z","closed_by":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"labels":["Category:Fulfillment Integrations \u0026 Visibility","Channel Marketplace","devops::fulfillment","eDisty","feature::enhancement","group::provision","priority::4","section::fulfillment","type::feature"],"milestone":{"id":2745651,"iid":85,"group_id":9970,"title":"15.10","description":"","state":"active","created_at":"2022-08-22T16:58:22.132Z","updated_at":"2022-08-22T16:58:22.132Z","due_date":"2023-03-17","start_date":"2023-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/85"},"assignees":[{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"}],"author":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"type":"ISSUE","assignee":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4735","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4735","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4735/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4735/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4735","relative":"#4735","full":"gitlab-org/customers-gitlab-com#4735"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8666,"epic":{"id":594198,"iid":8666,"title":"Remove Platypus from the E-Disty marketplace architecture","url":"/groups/gitlab-org/-/epics/8666","group_id":9970,"human_readable_end_date":"Dec 18, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114126201,"iid":4734,"project_id":2670515,"title":"Validate duplicate Marketplace order request","description":"We want to validate a marketplace request duplication. For duplicated requests, we will return error message.\n\nThe proposal is [option 2 in the comment](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4637#note_1066891473).\n\nWe allow the same `external_subscription_source`/`external_subscritpion_id` to retry when the request processing failed. For other status, we reject the request with an error message.\n* When a Marketplace request comes, we search saved `external_subscription_source`/`external_subscritpion_id` with `status != 'failed'`. If found, reject the request. Otherwise, continue.\n* We **upsert** `external_subscription_source`/`external_subscritpion_id`, update the status as `in_progress`.\n* When the CDot failed to create the subscription, we mark the status as `failed`(This includes other validation failures)\n* When the CDot succeeds to create the subscription, we mark the status as `created`\n* When the CDot succeeds to notify the customer(and reseller?), we mark the status as `provisioned`\n\nThis issue depends on issue https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4732+\n\n### Problem\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-08-30T06:34:19.854Z","updated_at":"2023-02-24T16:02:19.483Z","closed_at":"2022-10-07T12:17:38.765Z","closed_by":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"labels":["Category:Fulfillment Integrations \u0026 Visibility","[deprecated] Category:Fulfillment Platform","devops::fulfillment","eDisty","feature::enhancement","group::provision","section::fulfillment","type::feature","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"}],"author":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"type":"ISSUE","assignee":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4734","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4734","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4734/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4734/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4734","relative":"#4734","full":"gitlab-org/customers-gitlab-com#4734"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8666,"epic":{"id":594198,"iid":8666,"title":"Remove Platypus from the E-Disty marketplace architecture","url":"/groups/gitlab-org/-/epics/8666","group_id":9970,"human_readable_end_date":"Dec 18, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114125828,"iid":4732,"project_id":2670515,"title":"Track the Marketplace order status","description":"### Background:\n\n**NOTE**: ATM we only have one Marketplace partner, which is `Arrowsphere`. So the below description uses `Arrow` to describe the scenario. However, this scenario applies to all Marketplace orders. It does not limit to Arrow.\n\nPreviously Arrow system talks to Gitlab Platypus API endpoint(and then Platypus talks to CustomersDot). We will remove Platypus in this communication chain.\n\n* previously(as of today): `Arrow -\u003e Platypus -\u003e CustomersDot`\n* after removing Platypus, Arrow will directly talk to CustomersDot: `Arrow -\u003e CustomersDot`\n\nIn order to achieve this, there are several changes required on CustomersDot side.\n\n1. implement OAuth provider in CustomersDot. This allows secure API access control. We propose to use `doorkeeper` gem.\n1. add required data mapping in CustomersDot. This maps some Arrow payload data to the CustomersDot/Zuora/SFDC required values.\n1. track the Arrow order status. The status is used to:  allow Arrow to poll the order status; validate duplicate requests; ensure to take action safely only on the right order status.\n1. provide API endpoint for Arrow to poll the order status.\n\nFor more information, refer to the task breakdown at https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4637#note_1062429151.\n\n### This issue's scope\n\nThis issue covers the thrid task `track the Arrow order status`\n\n#### Proposal\n\nCreate a table `MarketplaceOrders`(columns: `external_subscription_source, external_subscription_id, payload, status(:creating, :failed, :created, :provisioned)`. This has the benefit to prevent duplicated API requests from Arrow.\n\n* An Arrow create order request comes\n* If there is a validation error, return failure without tracking this order.\n* Check the existence of `external_subscription_id`/`external_subscription_source`. \n   * If does not exists, create new `marketplace_orders` record for this `external_subscription_id`/`external_subscription_source`, and mark the status as `:creating`. Continue\n   * If exists and the status is `:failed`, reset the order(status to `:creating`, payload to new payload). Continue.\n   * If exists and the status is not `:failed`, return duplicated order error.\n* Start to create the customer/subscription/order/sfdc..\n* If the CDot failed to create the subscription, mark the status as `failed`\n* When customer/subscription/order are created, mark status as `:created`\n* After notify_customer(this is currently in ZuoracallbackWorker), mark the status as `:provisioned`.\n\n#### Where does the `check duplicate marketplace order` sit in the process flow.\n**NOTE**: this is a simplified flowchart. It does not contain some steps like `map payload`, `check Visual compliance`, `check customer existance`. We could also consider all of these as part of the general `create subscription` node.\n\n```mermaid\ngraph TD\n    A(Start) --\u003e|POST order request received| B[Authentication]\n    B --\u003e C{Authenticated?}\n    C --\u003e|No| D(Reject request)\n    C --\u003e|Yes| E[Validate payload]\n    E --\u003e F{valid payload?}\n    F --\u003e|No| D\n    F --\u003e|Yes| G[check existing order record]\n    G --\u003e H{order exists?}\n    H --\u003e|No| L[Create order record]\n    L --\u003e I[Create subscription]\n    H --\u003e|Yes|J{existing order failed?}\n    J --\u003e|No| D\n    J --\u003e|Yes| K[Reset order status]\n    K --\u003e I\n    \n```\n\n#### State transition diagram\n```mermaid\nstateDiagram-v2\n    [*] --\u003e creating\n    creating --\u003e created: Customer/Order/ZuoraSubscription created\n    creating --\u003e failed: Encounter error\n    failed --\u003e creating: Receive the order request again\n    created --\u003e provisioned: Customer notification sent\n    provisioned --\u003e [*]\n            \n```\n### Problem\n\n### Proposal\n\n\u003c!-- Consult with `@gitlab-com/business-technology/enterprise-apps/zuora-architects` on the ~\"Enterprise Applications\" team if Zuora business logic is involved. --\u003e\n\n### Result\n\n### Next steps (if any)\n\n### How will we measure success?","state":"closed","created_at":"2022-08-30T06:25:46.935Z","updated_at":"2023-02-24T16:02:19.010Z","closed_at":"2022-10-07T12:15:15.827Z","closed_by":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"labels":["Category:Fulfillment Integrations \u0026 Visibility","devops::fulfillment","feature::addition","group::provision","section::fulfillment","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"}],"author":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"type":"ISSUE","assignee":{"id":4098809,"username":"qzhaogitlab","name":"Qingyu Zhao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4098809/avatar.png","web_url":"https://gitlab.com/qzhaogitlab"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4732","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/2670515/issues/4732","notes":"https://gitlab.com/api/v4/projects/2670515/issues/4732/notes","award_emoji":"https://gitlab.com/api/v4/projects/2670515/issues/4732/award_emoji","project":"https://gitlab.com/api/v4/projects/2670515","closed_as_duplicate_of":null},"references":{"short":"#4732","relative":"#4732","full":"gitlab-org/customers-gitlab-com#4732"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8666,"epic":{"id":594198,"iid":8666,"title":"Remove Platypus from the E-Disty marketplace architecture","url":"/groups/gitlab-org/-/epics/8666","group_id":9970,"human_readable_end_date":"Dec 18, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]