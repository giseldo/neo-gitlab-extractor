[{"id":22135693,"iid":7071,"project_id":1304532,"title":"Create similar alertmanager configurations across all instances of running alertmanagers","description":"Today the alertmanager consists of three files:\n* https://gitlab.com/gitlab-cookbooks/gitlab-alertmanager/blob/master/templates/default/alertmanager.yml.erb\n* https://gitlab.com/gitlab-cookbooks/gitlab-alertmanager/tree/master/files/default/alertmanager/templates\n\nThe `alertmanager.yml.erb` is put together by chef and contains secret data that we store inside of GKMS.  We need to determine a way to recreate this workflow such that we can make the same modification to one set of files and these are then pulled in by both chef, and our desired mechanism for deploying the alertmanagers inside of Kubernetes.\n\nReference Doc: https://docs.google.com/document/d/1oJcWY4U2lmPwBvY8qQPlP7msPc7ioVUlo3ZKkCp-i1g/edit\n\nRelated Issue: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6927\n\n/cc @gitlab-com/gl-infra","state":"closed","created_at":"2019-06-21T15:01:48.780Z","updated_at":"2022-08-10T00:03:16.359Z","closed_at":"2020-06-24T20:09:13.474Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Alerting","Kubernetes::Unplanned","Observability","Service::Monitoring-Other","TechnicalDebt","ToBacklog","auto updated","blocker","chef","kubernetes","priority::2","priority::3","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":null,"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7071","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7071","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7071/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7071/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/1304532/issues/10054"},"references":{"short":"#7071","relative":"#7071","full":"gitlab-com/gl-infra/reliability#7071"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":234,"epic":{"id":50155,"iid":234,"title":"Migrate alertmanager to kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/234","group_id":1112072,"human_readable_end_date":"Aug 5, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22135116,"iid":7068,"project_id":1304532,"title":"Thanos reconfiguration","description":"At the time of writing up this issue, the stable/prometheus-operator helm chart does not support the same version of thanos that we are running throughout the rest of our infrastructure.  The use of thanos is preferred to ensure the longevity of data beyond the time for which prometheus is able to store data in our GKE clusters.  Utilize this issue to discuss/investigate/create actionable issues to ensure that we get thanos enabled with the desired configuration in GKE, and that prometheus is configured in a preferred manner.\n\n* [x] Check-up on which version the latest version of the stable/promethues-operator chart supports such that we can hopefully get the same version of thanos deployed across both our VM and Kubernetes infrastructure\n* [x] Create a separate service account for this\n  * Currently the same service account used to mangle user data is storing metric data, this is not best security practice.\n* [x] Configure thanos to store metrics in the cloud\n* [x] Turn down the data retention of prometheus from 8 weeks to a single day\n\nReference doc: https://docs.google.com/document/d/1oJcWY4U2lmPwBvY8qQPlP7msPc7ioVUlo3ZKkCp-i1g/edit\n\n\n/cc @gitlab-com/gl-infra","state":"closed","created_at":"2019-06-21T14:42:45.864Z","updated_at":"2022-08-10T00:03:17.011Z","closed_at":"2019-07-16T20:13:31.284Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["TechnicalDebt","kubernetes","priority::1","team::Delivery","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7068","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7068","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7068/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7068/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7068","relative":"#7068","full":"gitlab-com/gl-infra/reliability#7068"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":79,"epic":{"id":8808,"iid":79,"title":"Kubernetes Pre Migration Technical Debt","url":"/groups/gitlab-com/gl-infra/-/epics/79","group_id":1112072},"iteration":null,"health_status":null},{"id":22133544,"iid":7067,"project_id":1304532,"title":"Fix syntax that will break in terraform 0.12","description":"I tried planning with 0.12.2 on gstg, and got a bunch of errors. Luckily they are all of the form:\n\n```\nError: Invalid attribute name\n\n  on .terraform/modules/alerts/instance.tf line 176, in resource \"google_compute_instance\" \"default\":\n 176:     \"CHEF_URL\"                = \"${var.chef_provision.[\"server_url\"]}\"\n\nAn attribute name is required after a dot.\n```\n\nthis should be easy to fix and will hopefully smooth our path to terraform 0.12.\n\nRelated to https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6760","state":"closed","created_at":"2019-06-21T13:54:40.325Z","updated_at":"2022-08-10T00:03:17.767Z","closed_at":"2019-07-08T08:45:26.899Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["auto updated","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7067","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7067","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7067/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7067/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7067","relative":"#7067","full":"gitlab-com/gl-infra/reliability#7067"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22126041,"iid":7066,"project_id":1304532,"title":"PoC: Database backups based on snapshots","description":"Postgres basebackups are currently being taken by wal-e every 24 hours. This process takes up to 16 hours and consumes a lot of IO on the primary. We cannot have wal-e take this basebackup from a replica because wal-e doesn't support that. \n\nDuring weekdays, the daily backup takes up to 16 hours to complete. It increases the load and IO wait on the primary extraordinarily when it runs during higher traffic times:\n\n![Screenshot_from_2019-08-08_15-01-25](/uploads/a0a99dfae791cbb9e7b958ee33ebc03f/Screenshot_from_2019-08-08_15-01-25.png)\n\nAdditionally, from time to time, we run into issues with wal-e uploading to GCS. See for example https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7049.\n\nThere was an effort to use wal-g over wal-e, which would support taking basebackups from replicas. However, currently we're still waiting on a wal-g release to properly support GCS.\n\nEven with wal-g in place, we would still have a high MTTR for restoring a full backup:\n* A 3TB backup has to be fetched from GCS and extracted on the database host\n* Worst case, we'd replay 24 hours worth of WAL on top of that basebackup to catch up with changes made after the basebackup started.\n\nMTTR is likely at \u003e= 8 hours, if not worse (it depends on how much WAL needs to be applied).\n\n### Proposal\n\nIn order to reduce the MTTR to below 1 hour, we want to use GCE disk snapshots to take basebackups.\n\nIn more detail, we would\n* Provision a dedicated replica which would consume WAL from archive and - when running - generally stay up to date with the production cluster. The replica does not participate in the HA cluster.\n\nAt regular intervals (let's say every 2 hours, but this can be tuned) we would\n* Stop postgres on the replica and flush disks to ensure snapshot consistency\n* Coordinate with the GCE API to grab a snapshot of the data disk\n* Start postgres again to let it catch up with the upstream cluster\n\nIn order to restore a backup, we would create a new disk from the latest snapshot and instantiate a database instance from it. It would be configured as an archive replica and consume WAL from archive until the recovery point. Then, it's promoted to primary and can start serving connections.\n\n### Benefits\n\n* Greatly reduced MTTR: Disks can be created from snapshots in a few minutes max - no need to ship 3TB across the network\n* Disk snapshots are incremental, hence cost is not a huge concern with high frequent backups\n* New database instances can be created easily from the snapshots. This is also helpful if we had to recover the full cluster: We'd create all 6 instances from the same snapshot, let them catch up and then direct the replicas to talk to the chosen primary.\n* Removed the nightly IO bottleneck by not taking backups from the primary any more\n\n### Proof of concept implementation\n\n(tbd)\n\n### Notes\n\n* It may be helpful if the data directory would live on its own disk and we would just snapshot that. With that, the data directory becomes a drop in we could easily mount at any database instance.","state":"closed","created_at":"2019-06-21T09:58:21.309Z","updated_at":"2022-08-10T00:03:19.207Z","closed_at":"2021-08-16T09:06:10.289Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","Database","OnGres::Support","auto updated","backup","priority::3","workflow-infra::Done"],"milestone":{"id":989400,"iid":38,"group_id":1112072,"title":"Database September part 1","description":"","state":"closed","created_at":"2019-09-03T10:14:40.685Z","updated_at":"2019-10-09T16:21:15.363Z","due_date":"2019-09-13","start_date":"2019-09-02","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/38"},"assignees":[{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"user_notes_count":35,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7066","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7066","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7066/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7066/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7066","relative":"#7066","full":"gitlab-com/gl-infra/reliability#7066"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22098581,"iid":7056,"project_id":1304532,"title":"use pushgateway to indicate pg backup start and finish","description":"currently we capture wal-e basebackup message `Upload`  https://gitlab.com/gitlab-cookbooks/gitlab-mtail/blob/master/files/default/mtail/wale.mtail#L23 and use it in pgbasebackup alert to indicate if a base backup happened. However, this alert would never notify us if the backup failed during the process. Because of it, we missed 6 base backups in the last 14 days but never get any alert https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7049.\n\n\nWe should use pushgateway before and after the backup to indicate the backup start and completion instead.","state":"closed","created_at":"2019-06-20T15:28:39.392Z","updated_at":"2019-11-18T00:54:49.605Z","closed_at":"2019-07-25T13:01:55.495Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","auto updated","backup","workflow-infra::Done"],"milestone":null,"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7056","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7056","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7056/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7056/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7056","relative":"#7056","full":"gitlab-com/gl-infra/reliability#7056"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22095890,"iid":7054,"project_id":1304532,"title":"Convert the gitlab-com repo from helm template to helm local tiller","description":"As discussed in a recent meeting, notes captured here: https://docs.google.com/document/d/1jnh5Sf9wXmok0W5iyQJS0CDItDIl5E1hQKOBwIb4w2E/edit#heading=h.ooga5woic4af\n\n\u003e Helm/Tiller - skarbek\n\u003e * Let’s utilize local tiller\n\u003e * Let’s convert the gitlab-com project over to utilizing local tiller\n\u003e * Create an issue\n\nWe've decided it's safer to utilize the hooks provided by helm.  To avoid the security implications by using tiller, we'll utilize a plugin that provides a local tiller.  We are currently testing successfully this method with our [monitoring repo](https://gitlab.com/gitlab-com/gl-infra/k8s-workloads/monitoring), we need to convert our [gitlab-com repo](https://gitlab.com/gitlab-com/gl-infra/k8s-workloads/gitlab-com) to using the same system.\n\n/cc @jarv","state":"closed","created_at":"2019-06-20T14:15:38.280Z","updated_at":"2022-08-10T00:03:29.088Z","closed_at":"2019-06-26T14:16:13.480Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["auto updated","kubernetes","team::Delivery","workflow-infra::Done"],"milestone":null,"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7054","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7054","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7054/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7054/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7054","relative":"#7054","full":"gitlab-com/gl-infra/reliability#7054"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":22094961,"iid":7053,"project_id":1304532,"title":"Revoke Vendor Access to s3 Snowplow legacy bucket","description":"FishTown has been writing data into our gitlab-com-snowplow-data s3 bucket. Remove that access.","state":"closed","created_at":"2019-06-20T13:41:59.397Z","updated_at":"2022-08-10T00:03:29.661Z","closed_at":"2019-06-20T15:15:33.449Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["priority::1","team::Reliability","workflow-infra::Done"],"milestone":{"id":878548,"iid":24,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Snowplow tracker","description":"","state":"closed","created_at":"2019-05-17T22:41:21.444Z","updated_at":"2019-08-06T13:06:41.890Z","due_date":"2019-06-21","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/24"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7053","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7053","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7053/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7053/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7053","relative":"#7053","full":"gitlab-com/gl-infra/reliability#7053"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":74,"epic":{"id":8230,"iid":74,"title":"Deploy Snowplow Tracker","url":"/groups/gitlab-com/gl-infra/-/epics/74","group_id":1112072,"human_readable_end_date":"Jun 21, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22075037,"iid":7048,"project_id":1304532,"title":"Detecting5xxForRegistry is flappy","description":"`sum(backend_code:haproxy_server_http_responses_total:irate1m{backend=\"registry\",code=\"5xx\",tier=\"lb\"}) \u003e0`\n\nis really flappy in the presence of sporadic errors, I believe mainly because of irate1m, irate being 'the last two samples', and over only 1m.  I think we need to re-evaluate what this is doing; I'm thinking a new synthetic 'rate5m' might be more useful to smooth it out, so we get better stronger more consistent signal when things are going wrong.  It probably needs a small number other than 0, but that's TBD; with a smoother signal, \u003e0 may be sufficient.\n\n/cc @cmcfarland","state":"closed","created_at":"2019-06-19T20:38:52.630Z","updated_at":"2022-08-10T00:03:34.068Z","closed_at":"2019-06-19T22:35:44.867Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":3,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7048","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7048","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7048/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7048/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7048","relative":"#7048","full":"gitlab-com/gl-infra/reliability#7048"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22072839,"iid":7047,"project_id":1304532,"title":"deploy updated uptycs(osquery) to prod canary hosts","description":"The SecOps team would like to proceed with rolling out an updated version of uptycs (osquery) to the production canary hosts. \n\nThis new version has some significant performance improvements around the embedded rocksdb. So far in staging, we haven't seen any significant performance impact like we did with the previous version. \n\nFor more info/context - see [#199](https://gitlab.com/gitlab-com/gl-security/operations/issues/199)","state":"closed","created_at":"2019-06-19T18:42:05.072Z","updated_at":"2019-12-03T22:28:34.234Z","closed_at":"2019-06-26T15:00:15.300Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3600995,"username":"shanep","name":"Shane Peters","state":"active","avatar_url":"https://secure.gravatar.com/avatar/25255319e2b80717a8b66e37d942aa5f?s=80\u0026d=identicon","web_url":"https://gitlab.com/shanep"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7047","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7047","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7047/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7047/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7047","relative":"#7047","full":"gitlab-com/gl-infra/reliability#7047"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22071747,"iid":7043,"project_id":1304532,"title":"Test restore of PackageCloud backups with new procedure","description":"PackageCloud is backing up its database via xbstream. It should be almost the same to restore a backup using these new backups, but it should be tested and the documentation should be updated.","state":"closed","created_at":"2019-06-19T17:36:23.170Z","updated_at":"2022-08-10T00:03:40.073Z","closed_at":"2019-09-10T22:50:30.132Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::PackageCloud","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7043","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7043","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7043/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7043/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7043","relative":"#7043","full":"gitlab-com/gl-infra/reliability#7043"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22071538,"iid":7042,"project_id":1304532,"title":"Increase Retention Period on PackageCloud backups","description":"We currently keep PackageCloud backups for 5 days. This was decided upon when we had very limited disk space due to the giant database. We should increase the retention period for backups up to 14 days.","state":"closed","created_at":"2019-06-19T17:25:23.446Z","updated_at":"2022-08-10T00:03:40.854Z","closed_at":"2019-06-19T17:48:11.143Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::PackageCloud","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7042","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7042","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7042/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7042/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7042","relative":"#7042","full":"gitlab-com/gl-infra/reliability#7042"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22071485,"iid":7041,"project_id":1304532,"title":"Remove cron task to backup PackageCloud to S3","description":"PackageCloud used to not be able to upload its backups to S3 successfully due to the very large database. It is now able to successfully upload the backups to S3 so we should remove the cron job that did that for us.","state":"closed","created_at":"2019-06-19T17:23:33.979Z","updated_at":"2022-08-10T00:03:41.479Z","closed_at":"2019-06-19T17:48:11.329Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::PackageCloud","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":0,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7041","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7041","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7041/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7041/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7041","relative":"#7041","full":"gitlab-com/gl-infra/reliability#7041"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22046171,"iid":7036,"project_id":1304532,"title":"Register mailroom service on consul","description":"Necessary for us to be able to do dynamic inventory for consul (e.g. for gitlab-org/release/framework#354).","state":"closed","created_at":"2019-06-19T05:28:19.333Z","updated_at":"2022-08-10T00:03:44.018Z","closed_at":"2019-07-03T18:33:31.130Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878550,"iid":26,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Chef 15 and Consul for service registration","description":"We are currently running most chef clients on Chef 12 and the current version is Chef 15.  This KR will scope the size of the effort to upgrade nodes in production to chef 15 and pick a reasonable effort to do in Q2.\r\n\r\nWe also had carry over for finishing Consul service registration work from 2019FYQ1.\r\n\r\nEpics:\r\n1. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/69\r\n2. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/57","state":"closed","created_at":"2019-05-17T22:46:07.911Z","updated_at":"2019-12-04T21:44:14.005Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/26"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7036","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7036","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7036/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7036/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7036","relative":"#7036","full":"gitlab-com/gl-infra/reliability#7036"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":69,"epic":{"id":7633,"iid":69,"title":"Wrap up of Consul Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/69","group_id":1112072},"iteration":null,"health_status":null},{"id":22042303,"iid":7035,"project_id":1304532,"title":"Document in`runbooks` how to debug/maintain Geo DB replication","description":"","state":"closed","created_at":"2019-06-19T01:11:52.749Z","updated_at":"2022-08-10T00:03:44.602Z","closed_at":"2019-06-27T13:59:11.600Z","closed_by":{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7035","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7035","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7035/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7035/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7035","relative":"#7035","full":"gitlab-com/gl-infra/reliability#7035"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22040745,"iid":7034,"project_id":1304532,"title":"Discuss/formalise recommendation for managing GKE (Google Kubernetes Engine) patching/upgrades","description":"Following on from #6448 and the some of the implications of #6880 , we should discuss, then write down (and link from relevant places) what gl-infra expects from people spinning up GKE clusters in GCP projects.\n\nStarting position for discussion:\n1. If you're spinning up GKE clusters yourself in GCP projects (i.e. gl-infra are not directly involved beyond provisioning a project for you), then you are responsible for the maintenance of same.  gl-infra can advise/assist when explicitly requested, but will not be pro-actively looking out for things.\n2. The simplest way to avoid issues with this is to turn on automatic upgrades of the GKE cluster (master + nodes).  https://cloud.google.com/kubernetes-engine/docs/how-to/node-auto-upgrades details how to do that.  This also requires that you consider uptime requirements for the thing you're running on GKE, but if it's critical to the business, perhaps gl-infra should be looking after it anyway which requires explicit discussion + handover.","state":"closed","created_at":"2019-06-18T22:43:02.107Z","updated_at":"2022-08-10T00:03:45.307Z","closed_at":"2019-10-17T16:21:55.705Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Discussion","auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":1020810,"iid":49,"group_id":1112072,"title":"W43 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 21 Oct \t| T 22 Oct \t| W 23 Oct \t| Th 24 Oct  | F 25 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -       \t| -          | -\r\n| @cmiskell   \t| -        \t| -         | -       \t| -          | - \r\n| @hphilipps  \t| -      \t| -      \t| 📟  \t| 📟    | 📟\r\n| @msmiley    \t| 📟  \t| /      \t| /      \t| /          | /\r\n\r\nW43 working days: 22\r\n\r\n|             \t| M 28 Oct \t| T 29 Oct \t| W 30 Oct \t| Th 31 Oct  | F 01 Nov \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| -      \t| -      \t| -      \t| -          | 🌴\r\n| @cmiskell   \t| 🌴| -      \t| -      \t| -          | -\r\n| @hphilipps  \t| 📟  \t| 📟  \t| /        \t| 🌴          | 🌴 \r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW44 working days: 23\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 45**","state":"closed","created_at":"2019-10-02T14:57:08.851Z","updated_at":"2019-11-05T02:17:05.981Z","due_date":"2019-11-03","start_date":"2019-10-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/49"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7034","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7034","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7034/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7034/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7034","relative":"#7034","full":"gitlab-com/gl-infra/reliability#7034"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22033597,"iid":7017,"project_id":1304532,"title":"Update credentials for Salesforce used in customers.gitlab.com","description":"Hi team, the creds for Salesforce has been recently changed and out integration is broken.\n\nCan you please update the chef vault with the new credentials? Specifically we need to update just [two attributes](https://gitlab.com/gitlab-cookbooks/cookbook-customers-gitlab-com/blob/ca4bc07310aaf78629260425edb6d391580942ea/attributes/default.rb#L37-38). The values are stored on the `Subscription portal` shared vault from 1password, please let me know if you need access to it.\n\nThanks!\n\nCloses gitlab-org/customers-gitlab-com#546","state":"closed","created_at":"2019-06-18T16:22:18.557Z","updated_at":"2022-08-10T00:03:48.367Z","closed_at":"2019-06-19T13:58:07.928Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["chef","oncall","workflow-infra::Done"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":280339,"username":"rdavila","name":"Rubén Dávila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7017","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7017","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7017/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7017/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7017","relative":"#7017","full":"gitlab-com/gl-infra/reliability#7017"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22020540,"iid":7013,"project_id":1304532,"title":"Automate Vault Restoration Testing via CI/CD","description":"Implement regular backup and service restoration tests for Vault.","state":"closed","created_at":"2019-06-18T11:48:27.832Z","updated_at":"2022-08-10T00:03:51.294Z","closed_at":"2021-01-11T20:13:41.184Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7013","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7013/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7013/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7013","relative":"#7013","full":"gitlab-com/gl-infra/reliability#7013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":22020396,"iid":7012,"project_id":1304532,"title":"Rollout infrastructure secrets via vault","description":"* [ ] define a strategy for migrating secrets from GKMS / Chef vault to Hashicorp Vault\n  * moving secrets over piece by piece or maybe just adapting the shim layer for secrets-management in Chef?\n  * try to prevent having to live in both worlds for an extended time period\n* [ ] test on one service\n* [ ] rollout service group by service group\n\nWe eventually should split this up into multiple issues when we clarified the migration strategy.","state":"closed","created_at":"2019-06-18T11:46:00.453Z","updated_at":"2022-08-10T00:03:51.879Z","closed_at":"2021-01-11T20:13:44.957Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7012","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7012","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7012/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7012/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7012","relative":"#7012","full":"gitlab-com/gl-infra/reliability#7012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":22019719,"iid":7010,"project_id":1304532,"title":"Create Runbook for Vault","description":"* [ ] Create runbook for Vault\n* [ ] add Vault to service catalog","state":"closed","created_at":"2019-06-18T11:24:14.153Z","updated_at":"2022-08-10T00:03:53.103Z","closed_at":"2021-01-11T20:13:04.694Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["auto updated","vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7010","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7010/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7010/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7010","relative":"#7010","full":"gitlab-com/gl-infra/reliability#7010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":"at_risk"},{"id":22019610,"iid":7009,"project_id":1304532,"title":"Configure Alerting for Vault","description":"Configure thresholds and alerting for Vault via alertmanager.","state":"closed","created_at":"2019-06-18T11:20:09.393Z","updated_at":"2022-08-10T00:03:54.972Z","closed_at":"2021-01-11T20:13:14.031Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7009","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7009","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7009/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7009/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7009","relative":"#7009","full":"gitlab-com/gl-infra/reliability#7009"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":22018400,"iid":7008,"project_id":1304532,"title":"Be confident in our metrics, dashboards, and alerting related to ZFS git storage nodes","description":"We want sufficient metrics to be able to diagnose and debug issues related to filesystems and storage on ZFS-backed git storage nodes, and our alert conditions to be satisfactory.\n\nThere are 2 sides to this:\n\n1. ZFS-specific metrics. Check out https://github.com/ncabatoff/zfs-exporter\n1. Existing metrics related to persistent disk I/O are up to scratch. Is there anything to alert on here?\n\nFrom a suggestion by @andrewn.","state":"closed","created_at":"2019-06-18T10:35:46.577Z","updated_at":"2022-08-10T00:03:56.138Z","closed_at":"2019-08-13T09:46:34.146Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Global:In Progress","auto updated","workflow-infra::Done"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7008","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7008","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7008/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7008/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7008","relative":"#7008","full":"gitlab-com/gl-infra/reliability#7008"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22005564,"iid":7004,"project_id":1304532,"title":"add forum.gitlab.com to service catalog","description":"We should add forum.gitlab.com to the service catalog to be reminded that there is something we need to take care for (updates for example).","state":"closed","created_at":"2019-06-17T21:56:26.049Z","updated_at":"2020-11-17T19:05:03.161Z","closed_at":"2020-03-13T22:08:04.828Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["forum.gitlab.com","team::Reliability","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7004","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7004","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7004/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7004/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7004","relative":"#7004","full":"gitlab-com/gl-infra/reliability#7004"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22005472,"iid":7003,"project_id":1304532,"title":"Register deploy service on consul","description":"In order for us to be able to do dynamic inventory for consul (e.g. for gitlab-org/release/framework#354) we need to register a service in the deploy nodes to be able to differentiate them\n\n/cc @dawsmith","state":"closed","created_at":"2019-06-17T21:46:20.317Z","updated_at":"2022-08-10T00:04:00.148Z","closed_at":"2019-06-18T03:29:32.748Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878550,"iid":26,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Chef 15 and Consul for service registration","description":"We are currently running most chef clients on Chef 12 and the current version is Chef 15.  This KR will scope the size of the effort to upgrade nodes in production to chef 15 and pick a reasonable effort to do in Q2.\r\n\r\nWe also had carry over for finishing Consul service registration work from 2019FYQ1.\r\n\r\nEpics:\r\n1. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/69\r\n2. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/57","state":"closed","created_at":"2019-05-17T22:46:07.911Z","updated_at":"2019-12-04T21:44:14.005Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/26"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7003","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7003","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7003/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7003/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7003","relative":"#7003","full":"gitlab-com/gl-infra/reliability#7003"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":69,"epic":{"id":7633,"iid":69,"title":"Wrap up of Consul Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/69","group_id":1112072},"iteration":null,"health_status":null},{"id":22002625,"iid":7001,"project_id":1304532,"title":"Investigate automating issue creation for Discourse upgrade notifications","description":"We receive email notifications to the `ops-contact` account when a new version of Discourse is available for `forum.gitlab.com`, which are easy to ignore, lose track of, or fall victim to the [bystander effect](https://en.wikipedia.org/wiki/Bystander_effect). If possible, we should look into automating the creation of upgrade issues from these emails to more easily/consistently ensure that the notifications are received through our primary workflow (gitlab todos).\n\n/cc @ansdval @hphilipps @cmiskell @msmiley","state":"closed","created_at":"2019-06-17T21:24:30.237Z","updated_at":"2022-08-10T00:04:01.208Z","closed_at":"2020-11-21T22:48:21.486Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Research","automation","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7001","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7001","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7001/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7001/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7001","relative":"#7001","full":"gitlab-com/gl-infra/reliability#7001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21980690,"iid":6997,"project_id":1304532,"title":"Failure to access anything requiring the lb-bastion.dr.gitlab.com bastion","description":"# Bastion dr environment failures\n\nExamples of successful bastion access to a production redis host, and a failed bastion access to whatever environment `dr` refers to.\n\n## Success connecting to production bastion (lb-bastion.gprd.gitlab.com):\n\n```{sh}\n$ ssh -v lb-bastion.gprd.gitlab.com\nOpenSSH_7.9p1, LibreSSL 2.7.3\ndebug1: Reading configuration data /Users/nelsnelson/.ssh/config\ndebug1: /Users/nelsnelson/.ssh/config line 2: Applying options for lb-bastion.gprd.gitlab.com\ndebug1: /Users/nelsnelson/.ssh/config line 71: Applying options for *\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 48: Applying options for *\ndebug1: Connecting to lb-bastion.gprd.gitlab.com port 22.\ndebug1: Connection established.\ndebug1: identity file /Users/nelsnelson/.ssh/id_rsa type 0\ndebug1: identity file /Users/nelsnelson/.ssh/id_rsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_dsa type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_dsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ecdsa type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ecdsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ed25519 type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ed25519-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_xmss type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_xmss-cert type -1\ndebug1: Local version string SSH-2.0-OpenSSH_7.9\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.2p2 Ubuntu-4ubuntu2.8\ndebug1: match: OpenSSH_7.2p2 Ubuntu-4ubuntu2.8 pat OpenSSH_7.0*,OpenSSH_7.1*,OpenSSH_7.2*,OpenSSH_7.3*,OpenSSH_7.4*,OpenSSH_7.5*,OpenSSH_7.6*,OpenSSH_7.7* compat 0x04000002\ndebug1: Authenticating to lb-bastion.gprd.gitlab.com:22 as 'nelsnelson'\ndebug1: SSH2_MSG_KEXINIT sent\ndebug1: SSH2_MSG_KEXINIT received\ndebug1: kex: algorithm: curve25519-sha256@libssh.org\ndebug1: kex: host key algorithm: ecdsa-sha2-nistp256\ndebug1: kex: server-\u003eclient cipher: chacha20-poly1305@openssh.com MAC: \u003cimplicit\u003e compression: none\ndebug1: kex: client-\u003eserver cipher: chacha20-poly1305@openssh.com MAC: \u003cimplicit\u003e compression: none\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\ndebug1: Server host key: ecdsa-sha2-nistp256 SHA256:YjrYlnAlbKv23MI+h4UJGaGU32SWHngXti2ahIEEVz0\ndebug1: Host 'lb-bastion.gprd.gitlab.com' is known and matches the ECDSA host key.\ndebug1: Found key in /Users/nelsnelson/.ssh/known_hosts:435\ndebug1: rekey after 134217728 blocks\ndebug1: SSH2_MSG_NEWKEYS sent\ndebug1: expecting SSH2_MSG_NEWKEYS\ndebug1: SSH2_MSG_NEWKEYS received\ndebug1: rekey after 134217728 blocks\ndebug1: Will attempt key: cardno:000610165365 RSA SHA256:1Nj+VCcO72FXfEeTmrzP+jVE2lS1sT2A3sOx5mwUhCU agent\ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_rsa RSA SHA256:9Ev94jGJTsaPi/hiU57atmgVm8AB6PS/akZlxbYVqRw\ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_dsa \ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_ecdsa \ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_ed25519 \ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_xmss \ndebug1: SSH2_MSG_EXT_INFO received\ndebug1: kex_input_ext_info: server-sig-algs=\u003crsa-sha2-256,rsa-sha2-512\u003e\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug1: Authentications that can continue: publickey\ndebug1: Next authentication method: publickey\ndebug1: Offering public key: cardno:000610165365 RSA SHA256:1Nj+VCcO72FXfEeTmrzP+jVE2lS1sT2A3sOx5mwUhCU agent\ndebug1: Server accepts key: cardno:000610165365 RSA SHA256:1Nj+VCcO72FXfEeTmrzP+jVE2lS1sT2A3sOx5mwUhCU agent\ndebug1: Authentication succeeded (publickey).\nAuthenticated to lb-bastion.gprd.gitlab.com ([35.196.168.43]:22).\ndebug1: channel 0: new [client-session]\ndebug1: Requesting no-more-sessions@openssh.com\ndebug1: Entering interactive session.\ndebug1: pledge: network\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\ndebug1: Sending environment.\ndebug1: Sending env LANG = en_US.UTF-8\nWelcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.10.0-1009-gcp x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  Get cloud support with Ubuntu Advantage Cloud Guest:\n    http://www.ubuntu.com/business/services/cloud\n\n128 packages can be updated.\n0 updates are security updates.\n\nNew release '18.04.2 LTS' available.\nRun 'do-release-upgrade' to upgrade to it.\n\n\n*** System restart required ***\nnelsnelson@bastion-02-inf-gprd.c.gitlab-production.internal:~$ exitdebug1: client_input_channel_req: channel 0 rtype exit-status reply 0\ndebug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0\n\nlogout\ndebug1: channel 0: free: client-session, nchannels 1\nConnection to lb-bastion.gprd.gitlab.com closed.\nTransferred: sent 3176, received 4152 bytes, in 3.6 seconds\nBytes per second: sent 876.0, received 1145.2\ndebug1: Exit status 0\n\n$ ssh -vvv redis-01-db-gprd.c.gitlab-production.internal\nOpenSSH_7.9p1, LibreSSL 2.7.3\ndebug1: Reading configuration data /Users/nelsnelson/.ssh/config\ndebug1: /Users/nelsnelson/.ssh/config line 7: Applying options for *.gitlab-production.internal\ndebug1: /Users/nelsnelson/.ssh/config line 71: Applying options for *\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 48: Applying options for *\ndebug1: Executing proxy command: exec ssh lb-bastion.gprd.gitlab.com -W redis-01-db-gprd.c.gitlab-production.internal:22\ndebug1: identity file /Users/nelsnelson/.ssh/id_rsa type 0\ndebug1: identity file /Users/nelsnelson/.ssh/id_rsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_dsa type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_dsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ecdsa type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ecdsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ed25519 type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ed25519-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_xmss type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_xmss-cert type -1\ndebug1: Local version string SSH-2.0-OpenSSH_7.9\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.2p2 Ubuntu-4ubuntu2.8\ndebug1: match: OpenSSH_7.2p2 Ubuntu-4ubuntu2.8 pat OpenSSH_7.0*,OpenSSH_7.1*,OpenSSH_7.2*,OpenSSH_7.3*,OpenSSH_7.4*,OpenSSH_7.5*,OpenSSH_7.6*,OpenSSH_7.7* compat 0x04000002\ndebug2: fd 5 setting O_NONBLOCK\ndebug2: fd 4 setting O_NONBLOCK\ndebug1: Authenticating to redis-01-db-gprd.c.gitlab-production.internal:22 as 'nelsnelson'\ndebug3: hostkeys_foreach: reading file \"/Users/nelsnelson/.ssh/known_hosts\"\ndebug3: record_hostkey: found key type ECDSA in file /Users/nelsnelson/.ssh/known_hosts:442\ndebug3: load_hostkeys: loaded 1 keys from redis-01-db-gprd.c.gitlab-production.internal\ndebug3: order_hostkeyalgs: prefer hostkeyalgs: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521\ndebug3: send packet: type 20\ndebug1: SSH2_MSG_KEXINIT sent\ndebug3: receive packet: type 20\ndebug1: SSH2_MSG_KEXINIT received\ndebug2: local client KEXINIT proposal\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,ext-info-c\ndebug2: host key algorithms: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-ed25519,rsa-sha2-512,rsa-sha2-256,ssh-rsa\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: compression ctos: none,zlib@openssh.com,zlib\ndebug2: compression stoc: none,zlib@openssh.com,zlib\ndebug2: languages ctos: \ndebug2: languages stoc: \ndebug2: first_kex_follows 0 \ndebug2: reserved 0 \ndebug2: peer server KEXINIT proposal\ndebug2: KEX algorithms: curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha1\ndebug2: host key algorithms: ssh-rsa,rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: compression ctos: none,zlib@openssh.com\ndebug2: compression stoc: none,zlib@openssh.com\ndebug2: languages ctos: \ndebug2: languages stoc: \ndebug2: first_kex_follows 0 \ndebug2: reserved 0 \ndebug1: kex: algorithm: curve25519-sha256@libssh.org\ndebug1: kex: host key algorithm: ecdsa-sha2-nistp256\ndebug1: kex: server-\u003eclient cipher: chacha20-poly1305@openssh.com MAC: \u003cimplicit\u003e compression: none\ndebug1: kex: client-\u003eserver cipher: chacha20-poly1305@openssh.com MAC: \u003cimplicit\u003e compression: none\ndebug3: send packet: type 30\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\ndebug3: receive packet: type 31\ndebug1: Server host key: ecdsa-sha2-nistp256 SHA256:pbwMgpPOhyNzX9LCfxM8d6D2vOV9zBdQOxtBoBIm240\ndebug3: hostkeys_foreach: reading file \"/Users/nelsnelson/.ssh/known_hosts\"\ndebug3: record_hostkey: found key type ECDSA in file /Users/nelsnelson/.ssh/known_hosts:442\ndebug3: load_hostkeys: loaded 1 keys from redis-01-db-gprd.c.gitlab-production.internal\ndebug1: Host 'redis-01-db-gprd.c.gitlab-production.internal' is known and matches the ECDSA host key.\ndebug1: Found key in /Users/nelsnelson/.ssh/known_hosts:442\ndebug3: send packet: type 21\ndebug2: set_newkeys: mode 1\ndebug1: rekey after 134217728 blocks\ndebug1: SSH2_MSG_NEWKEYS sent\ndebug1: expecting SSH2_MSG_NEWKEYS\ndebug3: receive packet: type 21\ndebug1: SSH2_MSG_NEWKEYS received\ndebug2: set_newkeys: mode 0\ndebug1: rekey after 134217728 blocks\ndebug1: Will attempt key: cardno:000610165365 RSA SHA256:1Nj+VCcO72FXfEeTmrzP+jVE2lS1sT2A3sOx5mwUhCU agent\ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_rsa RSA SHA256:9Ev94jGJTsaPi/hiU57atmgVm8AB6PS/akZlxbYVqRw\ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_dsa \ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_ecdsa \ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_ed25519 \ndebug1: Will attempt key: /Users/nelsnelson/.ssh/id_xmss \ndebug2: pubkey_prepare: done\ndebug3: send packet: type 5\ndebug3: receive packet: type 7\ndebug1: SSH2_MSG_EXT_INFO received\ndebug1: kex_input_ext_info: server-sig-algs=\u003crsa-sha2-256,rsa-sha2-512\u003e\ndebug3: receive packet: type 6\ndebug2: service_accept: ssh-userauth\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug3: send packet: type 50\ndebug3: receive packet: type 51\ndebug1: Authentications that can continue: publickey\ndebug3: start over, passed a different list publickey\ndebug3: preferred publickey\ndebug3: authmethod_lookup publickey\ndebug3: remaining preferred: \ndebug3: authmethod_is_enabled publickey\ndebug1: Next authentication method: publickey\ndebug1: Offering public key: cardno:000610165365 RSA SHA256:1Nj+VCcO72FXfEeTmrzP+jVE2lS1sT2A3sOx5mwUhCU agent\ndebug3: send packet: type 50\ndebug2: we sent a publickey packet, wait for reply\ndebug3: receive packet: type 60\ndebug1: Server accepts key: cardno:000610165365 RSA SHA256:1Nj+VCcO72FXfEeTmrzP+jVE2lS1sT2A3sOx5mwUhCU agent\ndebug3: sign_and_send_pubkey: RSA SHA256:1Nj+VCcO72FXfEeTmrzP+jVE2lS1sT2A3sOx5mwUhCU\ndebug3: sign_and_send_pubkey: signing using rsa-sha2-512\ndebug3: send packet: type 50\ndebug3: receive packet: type 52\ndebug1: Authentication succeeded (publickey).\nAuthenticated to redis-01-db-gprd.c.gitlab-production.internal (via proxy).\ndebug1: channel 0: new [client-session]\ndebug3: ssh_session2_open: channel_new: 0\ndebug2: channel 0: send open\ndebug3: send packet: type 90\ndebug1: Requesting no-more-sessions@openssh.com\ndebug3: send packet: type 80\ndebug1: Entering interactive session.\ndebug1: pledge: proc\ndebug3: receive packet: type 80\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\ndebug3: receive packet: type 91\ndebug2: channel_input_open_confirmation: channel 0: callback start\ndebug2: client_session2_setup: id 0\ndebug2: channel 0: request pty-req confirm 1\ndebug3: send packet: type 98\ndebug1: Sending environment.\ndebug3: Ignored env SHELL\ndebug3: Ignored env LSCOLORS\ndebug3: Ignored env LESS\ndebug3: Ignored env XPC_FLAGS\ndebug3: Ignored env TERM_PROGRAM_VERSION\ndebug3: Ignored env JAVA_HOME\ndebug3: Ignored env SSH_AUTH_SOCK\ndebug3: Ignored env SVN_EDITOR\ndebug3: Ignored env TERM_SESSION_ID\ndebug3: Ignored env RBENV_SHELL\ndebug3: Ignored env GPG_TTY\ndebug3: Ignored env JENV_SHELL\ndebug3: Ignored env PWD\ndebug3: Ignored env LOGNAME\ndebug3: Ignored env MANPATH\ndebug3: Ignored env VIRTUALENVWRAPPER_VIRTUALENV\ndebug3: Ignored env HOME\ndebug1: Sending env LANG = en_US.UTF-8\ndebug2: channel 0: request env confirm 0\ndebug3: send packet: type 98\ndebug3: Ignored env SECURITYSESSIONID\ndebug3: Ignored env PYTHONSTARTUP\ndebug3: Ignored env TMPDIR\ndebug3: Ignored env CLICOLOR\ndebug3: Ignored env VIRTUALENVWRAPPER_VIRTUALENV_ARGS\ndebug3: Ignored env FIGNORE\ndebug3: Ignored env TERM\ndebug3: Ignored env USER\ndebug3: Ignored env SHLVL\ndebug3: Ignored env XPC_SERVICE_NAME\ndebug3: Ignored env Apple_PubSub_Socket_Render\ndebug3: Ignored env PATH\ndebug3: Ignored env JENV_LOADED\ndebug3: Ignored env GOPATH\ndebug3: Ignored env TERM_PROGRAM\ndebug3: Ignored env _\ndebug3: Ignored env __CF_USER_TEXT_ENCODING\ndebug2: channel 0: request shell confirm 1\ndebug3: send packet: type 98\ndebug2: channel_input_open_confirmation: channel 0: callback done\ndebug2: channel 0: open confirm rwindow 0 rmax 32768\ndebug3: receive packet: type 99\ndebug2: channel_input_status_confirm: type 99 id 0\ndebug2: PTY allocation request accepted on channel 0\ndebug2: channel 0: rcvd adjust 2097152\ndebug3: receive packet: type 99\ndebug2: channel_input_status_confirm: type 99 id 0\ndebug2: shell request accepted on channel 0\nWelcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.10.0-1009-gcp x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  Get cloud support with Ubuntu Advantage Cloud Guest:\n    http://www.ubuntu.com/business/services/cloud\n\n126 packages can be updated.\n0 updates are security updates.\n\n\n*** System restart required ***\n PRODUCTION REDIS_CHECKCMD_ERROR nelsnelson@redis-01-db-gprd.c.gitlab-production.internal:~$ exit\ndebug3: receive packet: type 98\ndebug1: client_input_channel_req: channel 0 rtype exit-status reply 0\ndebug3: receive packet: type 98\ndebug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0\ndebug2: channel 0: rcvd eow\ndebug2: channel 0: chan_shutdown_read (i0 o0 sock -1 wfd 6 efd 8 [write])\ndebug2: channel 0: input open -\u003e closed\ndebug3: receive packet: type 96\ndebug2: channel 0: rcvd eof\ndebug2: channel 0: output open -\u003e drain\ndebug3: receive packet: type 97\ndebug2: channel 0: rcvd close\ndebug3: channel 0: will not send data after close\nlogout\ndebug3: channel 0: will not send data after close\ndebug2: channel 0: obuf empty\ndebug2: channel 0: chan_shutdown_write (i3 o1 sock -1 wfd 7 efd 8 [write])\ndebug2: channel 0: output drain -\u003e closed\ndebug2: channel 0: almost dead\ndebug2: channel 0: gc: notify user\ndebug2: channel 0: gc: user detached\ndebug2: channel 0: send close\ndebug3: send packet: type 97\ndebug2: channel 0: is dead\ndebug2: channel 0: garbage collecting\ndebug1: channel 0: free: client-session, nchannels 1\ndebug3: channel 0: status: The following connections are open:\n  #0 client-session (t4 r0 i3/0 o3/0 e[write]/0 fd -1/-1/8 sock -1 cc -1)\n\ndebug3: send packet: type 1\ndebug3: fd 1 is not O_NONBLOCK\nConnection to redis-01-db-gprd.c.gitlab-production.internal closed.\nTransferred: sent 3176, received 3608 bytes, in 2.9 seconds\nBytes per second: sent 1112.9, received 1264.3\ndebug1: Exit status 0\n```\n\n## Failure connecting to dr bastion (lb-bastion.dr.gitlab.com):\n\n```{sh}\n$ ssh -vvv lb-bastion.dr.gitlab.com\nOpenSSH_7.9p1, LibreSSL 2.7.3\ndebug1: Reading configuration data /Users/nelsnelson/.ssh/config\ndebug1: /Users/nelsnelson/.ssh/config line 21: Applying options for lb-bastion.dr.gitlab.com\ndebug1: /Users/nelsnelson/.ssh/config line 72: Applying options for *\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 48: Applying options for *\ndebug1: Connecting to lb-bastion.dr.gitlab.com port 22.\n^C\n\n$ ssh -vvv console-01-sv-dr.c.gitlab-dr.internal\nOpenSSH_7.9p1, LibreSSL 2.7.3\ndebug1: Reading configuration data /Users/nelsnelson/.ssh/config\ndebug1: /Users/nelsnelson/.ssh/config line 26: Applying options for *.gitlab-dr.internal\ndebug1: /Users/nelsnelson/.ssh/config line 72: Applying options for *\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 48: Applying options for *\ndebug1: Executing proxy command: exec ssh lb-bastion.dr.gitlab.com -W console-01-sv-dr.c.gitlab-dr.internal:22\ndebug1: identity file /Users/nelsnelson/.ssh/id_rsa type 0\ndebug1: identity file /Users/nelsnelson/.ssh/id_rsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_dsa type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_dsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ecdsa type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ecdsa-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ed25519 type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_ed25519-cert type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_xmss type -1\ndebug1: identity file /Users/nelsnelson/.ssh/id_xmss-cert type -1\ndebug1: Local version string SSH-2.0-OpenSSH_7.9\n^C\n```\n\n## Relevent ~/.ssh/config sections:\n\n```{sh}\n# GCP production bastion host\nHost lb-bastion.gprd.gitlab.com\n        PreferredAuthentications        publickey\n        User                            nelsnelson\n\n# gprd boxes\nHost *.gitlab-production.internal\n        PreferredAuthentications        publickey\n        ProxyCommand                    ssh lb-bastion.gprd.gitlab.com -W %h:%p\n\n# GCP staging bastion host\nHost lb-bastion.dr.gitlab.com\n        PreferredAuthentications        publickey\n        User                            nelsnelson\n\n# dr boxes\nHost *.gitlab-dr.internal\n        PreferredAuthentications        publickey\n        ProxyCommand                    ssh lb-bastion.dr.gitlab.com -W %h:%p\n```\n\nAll of the examples have been attempted with solely the four stanzas found in the above `~/.ssh/config` snippet.","state":"closed","created_at":"2019-06-17T15:00:28.242Z","updated_at":"2022-08-10T00:04:04.589Z","closed_at":"2019-07-03T22:24:43.769Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6997","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6997","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6997/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6997/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6997","relative":"#6997","full":"gitlab-com/gl-infra/reliability#6997"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21934822,"iid":6991,"project_id":1304532,"title":"Health checks failing on inactive web nodes","description":"Reported by @andrewn via Slack: https://log.gitlab.net/goto/b6cba9be8f89b80456fd17b614f363e9. \n\nWe put the 8 new nodes in MAINT status yesterday so that HAProxy wouldn't do health checks. But it looks like we didn't consider the fact that GLB also has health checks and reports metrics. \n\nWent ahead and stopped the nodes (web-29 through web-36). Next week (Week of June 17th), we will be driving a couple of different efforts around separating API traffic and also scaling pgbouncer. Depending on the outcome, if we decide to scale up web fleet again I'd like to use these 8 nodes right away. If not, we can do proper terraform MR and remove these nodes from GCP.","state":"closed","created_at":"2019-06-15T08:31:57.440Z","updated_at":"2022-08-10T00:04:07.965Z","closed_at":"2019-06-15T08:32:06.952Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["SRE:On-call","workflow-infra::Done"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6991","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6991","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6991/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6991/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6991","relative":"#6991","full":"gitlab-com/gl-infra/reliability#6991"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21934056,"iid":6990,"project_id":1304532,"title":"Discussion: Notifications of Terraform module version bumps","description":"When someone makes a change to a terraform module, it is no longer just `gitlab-com-infrastructure/environments/*` that needs to be updated.  We need a way to reliably notify all primary users of the module that it has been updated.\n\nSome initial ideas are:\n\n1. An MR template.\n   - Anyone with an interest can add their name to the /cc line\n2. The CODEOWNERS file\n   - I'm not sure this will work in all cases\n3. Update the readme with links to the places that need to be changed\n   - Who is responsible for changing it? The merger? Do they just open an issue? Or submit MR's everywhere?\n4. Someone's better idea\n\nThis probably effects myself, @skarbek and @Craig at first, but will eventually touch everyone in @gitlab-com/gl-infra, so the more input we can get the better. We may also want to think about doing something similar with chef.","state":"closed","created_at":"2019-06-15T06:21:37.734Z","updated_at":"2022-08-10T00:04:09.046Z","closed_at":"2022-08-02T06:05:20.127Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Discussion","Infrastructure","chef","terraform","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":null,"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6990","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6990","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6990/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6990/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6990","relative":"#6990","full":"gitlab-com/gl-infra/reliability#6990"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21927335,"iid":6987,"project_id":1304532,"title":"Increase TTL on packages CloudFront","description":"Currently the default TTL for our PackageCloud CloudFront distribution is set to 86400. Since packages have unique names, we should increase this to days in order to get better cache performance.","state":"closed","created_at":"2019-06-14T19:13:00.937Z","updated_at":"2019-12-06T21:46:49.021Z","closed_at":"2019-06-24T21:37:10.803Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::PackageCloud","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6987","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6987","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6987/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6987/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6987","relative":"#6987","full":"gitlab-com/gl-infra/reliability#6987"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21926649,"iid":6986,"project_id":1304532,"title":"Document CloudFront and PackageCloud","description":"We need to document what packagecloud and cloudfront look like.","state":"closed","created_at":"2019-06-14T18:28:46.689Z","updated_at":"2022-08-10T00:04:12.335Z","closed_at":"2019-06-19T20:09:14.081Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::PackageCloud","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6986","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6986","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6986/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6986/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6986","relative":"#6986","full":"gitlab-com/gl-infra/reliability#6986"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21917102,"iid":6979,"project_id":1304532,"title":"Configure Monitoring for Vault","description":"Configure Vault monitoring via Prometheus.","state":"closed","created_at":"2019-06-14T13:12:31.602Z","updated_at":"2022-08-10T00:04:17.508Z","closed_at":"2021-01-11T20:13:34.388Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6979","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6979","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6979/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6979/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6979","relative":"#6979","full":"gitlab-com/gl-infra/reliability#6979"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21916659,"iid":6978,"project_id":1304532,"title":"Configure Vault Service","description":"Configure Vault Service.\n\n* unsealing keys\n* backends\n* roles\n* ACLs\n* ...","state":"closed","created_at":"2019-06-14T12:56:56.517Z","updated_at":"2022-08-10T00:04:18.087Z","closed_at":"2019-09-25T18:57:59.796Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6978","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6978","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6978/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6978/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6978","relative":"#6978","full":"gitlab-com/gl-infra/reliability#6978"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21916317,"iid":6977,"project_id":1304532,"title":"Setup automated Vault storage bucket backups","description":"Develop automated script / plan for backing up (bucket versioning?)","state":"closed","created_at":"2019-06-14T12:48:41.181Z","updated_at":"2020-03-14T01:08:24.634Z","closed_at":"2020-03-13T22:07:53.622Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":1087796,"iid":59,"group_id":1112072,"title":"Reliability December 2019","description":"","state":"closed","created_at":"2019-12-03T16:20:55.704Z","updated_at":"2020-01-16T17:21:46.339Z","due_date":"2019-12-31","start_date":"2019-12-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/59"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6977","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6977","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6977/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6977/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6977","relative":"#6977","full":"gitlab-com/gl-infra/reliability#6977"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21916186,"iid":6976,"project_id":1304532,"title":"Deploy GCS Bucket for Vault Storage","description":"Deploy the GCS Bucket for Vault Storage.","state":"closed","created_at":"2019-06-14T12:43:48.346Z","updated_at":"2019-12-03T22:28:33.527Z","closed_at":"2019-06-28T18:38:52.208Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878522,"iid":21,"group_id":1112072,"title":"Secure and Defend - Deploy Vault to provide a solution for secrets management and use","description":"","state":"closed","created_at":"2019-05-17T21:56:44.114Z","updated_at":"2019-09-09T20:43:58.114Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/21"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6976","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6976","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6976/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6976/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6976","relative":"#6976","full":"gitlab-com/gl-infra/reliability#6976"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21915928,"iid":6975,"project_id":1304532,"title":"Create the K8s cluster for vault with terraform","description":"Create the K8s cluster for vault using terraform and deploy the K8s nodes.\n\nWe probably can make use of https://github.com/sethvargo/vault-on-gke for that.","state":"closed","created_at":"2019-06-14T12:32:56.629Z","updated_at":"2019-12-03T22:28:33.394Z","closed_at":"2019-07-14T14:25:54.155Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878522,"iid":21,"group_id":1112072,"title":"Secure and Defend - Deploy Vault to provide a solution for secrets management and use","description":"","state":"closed","created_at":"2019-05-17T21:56:44.114Z","updated_at":"2019-09-09T20:43:58.114Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/21"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6975","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6975","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6975/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6975/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6975","relative":"#6975","full":"gitlab-com/gl-infra/reliability#6975"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21915790,"iid":6974,"project_id":1304532,"title":"document vault gcp project service accounts","description":"Document the service accounts of the vault gcp project created in #6973. Make sure the IAM permissions are scoped right and restricted to a minimum.","state":"closed","created_at":"2019-06-14T12:27:24.164Z","updated_at":"2019-12-06T21:42:04.348Z","closed_at":"2019-07-14T14:23:32.729Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878522,"iid":21,"group_id":1112072,"title":"Secure and Defend - Deploy Vault to provide a solution for secrets management and use","description":"","state":"closed","created_at":"2019-05-17T21:56:44.114Z","updated_at":"2019-09-09T20:43:58.114Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/21"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6974","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6974","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6974/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6974/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6974","relative":"#6974","full":"gitlab-com/gl-infra/reliability#6974"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21915593,"iid":6973,"project_id":1304532,"title":"Create GCP project for Vault","description":"Create a new GCP project for vault.\n\n* Resolve IP Addressing and Routing via projects\n* Look into cross-project DNS topology (beta GCP/GKE)\n\nMaybe we can use https://github.com/sethvargo/vault-on-gke to get the project setup with the right permissions etc.","state":"closed","created_at":"2019-06-14T12:20:42.889Z","updated_at":"2019-12-06T21:42:04.134Z","closed_at":"2019-07-14T14:13:25.267Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878522,"iid":21,"group_id":1112072,"title":"Secure and Defend - Deploy Vault to provide a solution for secrets management and use","description":"","state":"closed","created_at":"2019-05-17T21:56:44.114Z","updated_at":"2019-09-09T20:43:58.114Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/21"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6973","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6973","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6973/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6973/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6973","relative":"#6973","full":"gitlab-com/gl-infra/reliability#6973"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21894026,"iid":6970,"project_id":1304532,"title":"Update Grafana sync key","description":"Per https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6952#note_180920686, we need to update the key used [by chef](https://gitlab.com/gitlab-cookbooks/gitlab-grafana/blob/master/recipes/export_dashboards.rb#L41) to use the updated key from 1Password in the `dashboards-sync Grafana API key` item within the `Team` vault.","state":"closed","created_at":"2019-06-13T22:05:06.893Z","updated_at":"2022-08-10T00:04:22.853Z","closed_at":"2022-08-02T06:05:24.780Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6970","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6970","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6970/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6970/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6970","relative":"#6970","full":"gitlab-com/gl-infra/reliability#6970"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21889446,"iid":6969,"project_id":1304532,"title":"List known potential gotchas with Elasticsearch indexing of GitLab Projects","description":"As an SRE, I want to understand the known or anticipated types of operational issue that may come with the upcoming addition of Elasticsearch indexing as a GitLab 12.1 feature, so that we can better interpret new observed behaviors or changes in workload for related subsystems.\n\n*Background:*\n\nWhile listening to today's *excellent* \"Elasticsearch Deep Dive\" presentation by @mdelaossa (see [video](https://drive.google.com/open?id=13wXpOL9GbZFUCw4DaRxoE_GmNjf1jDT5) and [slides](https://docs.google.com/presentation/d/1H-pCzI_LNrgrL5pJAIQgvLX8Ji0-jIKOg1QeJQzChug/edit?usp=sharing) and [notes and questions](https://docs.google.com/document/d/1cwo5n3XYaTDAJ48sMZJ8bHQVJ0RD5dlsdf28L96OZQw/edit#)), I realized a few areas where the introduction of ES indexing may significantly change the workload or scaling requirements of related subsystems (ES nodes themselves, Gitaly storage nodes, Sidekiq pools, Postgres, etc.).  And of course as will any new technology adoption, there are new failure modes to be aware of (e.g. ES node down/dead, shard redundancy, ES quorum policy for writes/reads, impact of ES availability on upstream clients, etc.).\n\nThis issue aims to collect a list of know topics for @gitlab-com/gl-infra to be aware of.  It's just for discussion and brainstorming, not for resolving any of the topics raised.\n\nThese topics may eventually be added to a runbook once they are actionable.","state":"closed","created_at":"2019-06-13T19:02:07.673Z","updated_at":"2022-08-10T00:04:23.401Z","closed_at":"2019-12-08T20:36:33.676Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Discussion","auto updated","documentation","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6969","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6969","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6969/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6969/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6969","relative":"#6969","full":"gitlab-com/gl-infra/reliability#6969"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21889206,"iid":6968,"project_id":1304532,"title":"Need to update pg_hba.conf for version/license/customers restored backups","description":"Currently the data team is pulling data from restored backups of the version/license/customers DBs. We are going to start pulling from a different kube cluster and are getting an error around the pg_hba.conf. We need this to be updated so that we can start pulling from the new cluster. Just let us know what you need to know from us and we'll provide/help with whatever we can\n\ncc @tayloramurphy","state":"closed","created_at":"2019-06-13T18:52:15.741Z","updated_at":"2022-08-10T00:04:24.045Z","closed_at":"2019-06-26T22:45:40.915Z","closed_by":{"id":2289710,"username":"tlapiana","name":"Thomas La Piana","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2e58cec0335469b42a2bf54daea26a06?s=80\u0026d=identicon","web_url":"https://gitlab.com/tlapiana"},"labels":["auto updated","priority::1","team::Reliability","unblocks others","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},{"id":2289710,"username":"tlapiana","name":"Thomas La Piana","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2e58cec0335469b42a2bf54daea26a06?s=80\u0026d=identicon","web_url":"https://gitlab.com/tlapiana"}],"author":{"id":2289710,"username":"tlapiana","name":"Thomas La Piana","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2e58cec0335469b42a2bf54daea26a06?s=80\u0026d=identicon","web_url":"https://gitlab.com/tlapiana"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":51,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6968","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6968","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6968/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6968/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6968","relative":"#6968","full":"gitlab-com/gl-infra/reliability#6968"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21883491,"iid":6962,"project_id":1304532,"title":"Support different versions of terraform in our terraform CI/CD tests","description":"Currently, our tf_format test uses a global terraform version specified at the root of the repository for it's lint tests. For some earlier versions of ```terraform fmt```, this is ok. But the newest versions of terraform format in such a way that those files fail using the specified older global version.\n\nSince each environment can have it's own version of terraform specified, we should update our tests to use that specific version. This will allow us to use newer versions without having to drag the entire repo up into new versions of terraform.","state":"closed","created_at":"2019-06-13T15:11:56.661Z","updated_at":"2022-08-16T16:58:22.733Z","closed_at":"2022-08-16T16:58:16.650Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6962","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6962","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6962/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6962/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6962","relative":"#6962","full":"gitlab-com/gl-infra/reliability#6962"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21863206,"iid":6955,"project_id":1304532,"title":"Automate Grafana datasource provisioning for public dashboards","description":"Since Grafana 5.x, it supports provisioning via yaml files on disk. We should add support to auto-provision the correct datasources for the public dashboard server.\n\nSee the upstream docs: https://grafana.com/docs/administration/provisioning/#datasources","state":"closed","created_at":"2019-06-13T08:07:04.084Z","updated_at":"2022-08-10T23:03:42.664Z","closed_at":"2020-08-05T16:39:03.907Z","closed_by":{"id":136229,"username":"cindy","name":"Cindy Pallares 🦉","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"labels":["Observability-reliability","Service::PublicGrafana","priority::4","workflow-infra::Done"],"milestone":{"id":1380223,"iid":92,"group_id":1112072,"title":"Observability Team - FY21-Q3","description":"","state":"closed","created_at":"2020-07-24T19:07:22.800Z","updated_at":"2020-11-02T23:56:39.868Z","due_date":"2020-10-30","start_date":"2020-08-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/92"},"assignees":[],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6955","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6955","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6955/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6955/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6955","relative":"#6955","full":"gitlab-com/gl-infra/reliability#6955"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":146,"epic":{"id":16537,"iid":146,"title":"Move Grafana Dashboard service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/146","group_id":1112072,"human_readable_end_date":"Jan 29, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":128,"iid":1,"sequence":1,"group_id":1112072,"title":"2020 W31 - Observability Team","description":"# Nothing to present. \n\n## Markdown rendering is currently broken. Please click through to \nhttps://gitlab.com/-/snippets/1998684.\n","state":3,"created_at":"2020-07-21T16:41:19.392Z","updated_at":"2020-07-27T15:05:58.211Z","start_date":"2020-07-27","due_date":"2020-08-07","web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/iterations/128"},"health_status":null},{"id":21857648,"iid":6954,"project_id":1304532,"title":"Update `Query source` to `Global` in Grafana dashboards that are not pulling any metrics","description":"We have dashboards like this: https://dashboards.gitlab.net/d/_MKRXrSmk/pull-mirrors?orgId=1\u0026refresh=30s\u0026from=now-7d\u0026to=now\u0026fullscreen\u0026edit\u0026panelId=13 where the data source isn't populating anything. \n\nPer Slack discussion: https://gitlab.slack.com/archives/CB3LSMEJV/p1560355187114000, if we change the `Query` source to `Global` it works. \n\nSee below Before \u0026 After comparison. \n\nBEFORE\n![grafana_dashboard](/uploads/b819524fa0977840bd4fa42c4789695f/grafana_dashboard.png)\n\nAFTER\n![grafana_dashboard_after](/uploads/4cc9fd7c03ec289ec7a1236a754af209/grafana_dashboard_after.png)","state":"closed","created_at":"2019-06-13T03:47:53.339Z","updated_at":"2022-08-10T23:03:43.352Z","closed_at":"2019-12-06T06:54:11.653Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["SRE:On-call","auto updated","workflow-infra::Done"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6954","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":7,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6954","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6954/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6954/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6954","relative":"#6954","full":"gitlab-com/gl-infra/reliability#6954"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21855579,"iid":6953,"project_id":1304532,"title":"Register gitaly service on consul","description":"In order for us to be able to do dynamic inventory for consul (e.g. for https://gitlab.com/gitlab-org/release/framework/issues/354) we need to register the Gitaly service with a gRPC health check.\n\n/cc @dawsmith","state":"closed","created_at":"2019-06-13T01:36:49.638Z","updated_at":"2022-08-10T23:03:44.085Z","closed_at":"2019-06-17T21:44:58.495Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":878550,"iid":26,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Chef 15 and Consul for service registration","description":"We are currently running most chef clients on Chef 12 and the current version is Chef 15.  This KR will scope the size of the effort to upgrade nodes in production to chef 15 and pick a reasonable effort to do in Q2.\r\n\r\nWe also had carry over for finishing Consul service registration work from 2019FYQ1.\r\n\r\nEpics:\r\n1. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/69\r\n2. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/57","state":"closed","created_at":"2019-05-17T22:46:07.911Z","updated_at":"2019-12-04T21:44:14.005Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/26"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6953","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6953","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6953/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6953/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6953","relative":"#6953","full":"gitlab-com/gl-infra/reliability#6953"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":69,"epic":{"id":7633,"iid":69,"title":"Wrap up of Consul Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/69","group_id":1112072},"iteration":null,"health_status":null},{"id":21851219,"iid":6952,"project_id":1304532,"title":"Re-create public dashboards node","description":"While applying terraform changes the node `dashboards-com-01-inf-ops.c.GitLab-ops.internal` was left in an inconsistent state, and now console logs show filesystem errors related to the data \u0026 log volumes. For simplicity, the node should be removed/recreated, and a chef converge run to finish configuring all filesystems / application settings.","state":"closed","created_at":"2019-06-12T19:05:17.710Z","updated_at":"2019-06-14T20:09:32.970Z","closed_at":"2019-06-13T22:06:38.312Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6952","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6952","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6952/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6952/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6952","relative":"#6952","full":"gitlab-com/gl-infra/reliability#6952"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21827850,"iid":6945,"project_id":1304532,"title":"Postgres restore instances: OS login authentication broken","description":"The GCE instances created by https://ops.gitlab.net/gitlab-com/gl-infra/gitlab-restore/postgres-gprd use OS Login to authenticate users via SSH. This is currently broken for @NikolayS and maybe others, though it works for @abrandl. We should fix that.","state":"closed","created_at":"2019-06-12T08:10:57.830Z","updated_at":"2022-08-10T23:03:50.222Z","closed_at":"2022-08-02T06:05:28.780Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":989400,"iid":38,"group_id":1112072,"title":"Database September part 1","description":"","state":"closed","created_at":"2019-09-03T10:14:40.685Z","updated_at":"2019-10-09T16:21:15.363Z","due_date":"2019-09-13","start_date":"2019-09-02","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/38"},"assignees":[],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6945","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6945","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6945/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6945/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6945","relative":"#6945","full":"gitlab-com/gl-infra/reliability#6945"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21821667,"iid":6944,"project_id":1304532,"title":"RCA: High Rails Error Rate on Front End","description":"Received alerts for elevated error rates: `Rails is returning 5xx errors at a high rate for git . Traffic is impacted and users are likely seeing 500 errors.`\n\nService(s) affected : ~\"Service:GitLab Rails\" ~\"Service:Git\" ~\"Service:API\" ~\"Service:Web\"  \nTeam attribution : @gitlab-com/gl-infra  \nMinutes downtime or degradation : 178 minutes\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident? portions of the api, web, and git fleet were not registered with the load-balancers, resulting in increased 5xx error rates for those services\n- Who was impacted by this incident? GitLab.com users / external customers\n- How did the incident impact customers? 5xx errors attempting to make API calls, or perform git operations via HTTPS\n- How many attempts were made to access the impacted service/feature?\n- How many customers were affected?\n- How many customers tried to access the impacted service/feature?\n\nInclude any additional metrics that are of relevance.\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected? on-call engineer received pagerduty alert(s)  \n- Did alarming work as expected? yes, though some alerts were ignored initially due to concurrence with ongoing deployment\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n## Timeline\n\n2019-06-11\n\n* 22:55 UTC - deployment started for hotpatch https://ops.gitlab.net/gitlab-com/gl-infra/patcher/merge_requests/100\n* 23:03 UTC - deployment fails, engineer experiences issues adding/removing backend servers from haproxy\n* 23:40 UTC - deployment restarted\n* 23:44 UTC - first evidence in grafana of imbalanced distribution for connections to https_git servers\n\n2019-06-12\n\n* 00:16 UTC - first instance of alert fires for increased error rate\n* 01:06 UTC - on-call engineer alerted of increased error rates\n* 01:09 UTC - alert acknowledged by on-call engineer\n* 01:11 UTC - alert auto-resolves\n* 01:19 UTC - alert recurs\n* 01:24 UTC - alert auto-resolves\n* 01:28 UTC - alert recurs\n* 01:28 UTC - alert acknowledged by on-call engineer\n* 01:31 UTC - investigation started\n* 01:32 UTC - inconsistent load distribution identified as probable cause\n* 01:35 UTC - IMOC notified via slack\n* 01:45 UTC - IMOC paged via slack\n* 01:57 UTC - impact to other backends identified\n* 01:59 UTC - team begins working to register all affected backend servers with haproxy load-balancers\n* 02:35 UTC - git service fully restored\n* 02:42 UTC - api and web services restored\n\n## Root Cause Analysis\n\n### 5-whys\nThe front-end fleet experienced elevated error rates and disruption of service.  \n\n1. Why? - portions of the api, web, and git fleet were not registered with the load-balancers\n2. Why? - they were not re-registered properly during/after a deployment\n3. Why? - the first hot-patch deployment pipeline was canceled\n4. Why? - the pipeline appeared hung\n5. Why? - the script incorrectly detected nodes' status\n\n## What went well\n\nStart with the following:\n\n- Identify the things that worked well or as expected.\n- Any additional call-outs for what went particularly well.\n\n## What can be improved\n\nStart with the following:\n\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\n- Is there anything that could have been done to improve the detection or time to detection?\n- Is there anything that could have been done to improve the response or time to response?\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\n- Did we have any indication or beforehand knowledge that this incident might take place?\n\n\n## Corrective actions\n\n- List issues that have been created as corrective actions from this incident.\n- For each issue, include the following:\n    - \u003cBare Issue link\u003e - Issue labeled as ~\"corrective action\".\n    - Include an estimated date of completion of the corrective action.\n    - Incldue the named individual who owns the delivery of the corrective action.\n\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-06-12T03:36:37.495Z","updated_at":"2022-08-10T23:03:50.892Z","closed_at":"2019-07-12T16:27:17.538Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["IncidentReview","auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6944","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6944","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6944/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6944/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6944","relative":"#6944","full":"gitlab-com/gl-infra/reliability#6944"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21813808,"iid":6940,"project_id":1304532,"title":"Add generic Linux observability tools to our hosts","description":"As an SRE or DBRE, I want our Linux hosts to include tools for ad hoc observation, so that I can collect short-term metrics and investigate behaviors that are impractical or out of scope for our general purpose monitoring.\n\nBackground:\nPrometheus provides a variety of metrics collected periodically.  This serves us well for most purposes.  However, sometimes we need more granular or narrowly scoped instrumentation for ad hoc investigations.\n\nExamples:\n* Polling disk I/O statistics at 1-second intervals is helpful when analyzing suspected bursts of I/O contention that get smoothed over at less frequent polling intervals.\n* Measuring variation in memory access latency on a VM that runs an in-memory data store (e.g. Redis) can reveal an otherwise opaque root cause to transient query response time spikes.\n* Measuring trends in TCP connection open/close events can help inform tuning the kernel's TCP stack to more gracefully handle traffic spikes.  It can also lead to improving our general purpose diagnostic monitoring, to alert us when approaching saturation of certain finite resources (e.g. TCP connection table, pool of available client ports, etc.).\n\nIn this Issue, let's build a wish list of tools we'd like to have available on our Linux hosts.  To start us off, we have this list from the Slack discussion:\n* iostat: Per block device I/O statistics, including queue depth, %busy, mean read/write latency, etc.\n* sysstat: Provides \"sar\" utility, which gives wide variety of usage statistics, system-wide or for specific PIDs.\n* [linux-tools](http://www.brendangregg.com/perf.html): Lightweight tracing facility, used via the perf-suite tools (perf, perf-top, perf-mem, perf-trace, perf-ftrace, etc.), with eBPF support for recent kernels.\n* iftop: \"top\" for network flows, showing which remote IPs are currently using the most network throughput.\n* ifstat: \"vmstat\" for network interfaces, polling network throughput on each interface.","state":"closed","created_at":"2019-06-11T20:16:19.291Z","updated_at":"2020-07-02T01:01:32.713Z","closed_at":"2020-06-01T00:04:42.132Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Observability-reliability","auto updated","priority::2","workflow-infra::Done"],"milestone":{"id":1249005,"iid":80,"group_id":1112072,"title":"Observability Team - W23 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/1bab352839c4f6af55ab757f09188ecd/Team_Focus_-_W23.jpeg\" width=\"850\"/\u003e\r\n\r\nWe have limited capacity this week, with only 11 working days due to time-off, holidays, and on-call shifts. Additionally, this is the final week for 360° feedback in Culture Amp. So, it's exceedingly important this sprint to work from the board! A few issues are carryovers from the May milestone–and you've already made significant progress on them–that should close quickly. There are also some related, blocking issues that will cascade to closed. I'm confident we'll hit over 90% this sprint.\r\n\r\nAs seen above, we have a need to dedicate the majority of our focus to alerting and monitoring fixes and tunings. Columns on the board continue issues labeled ~P1 ~P2 and ~P3, and whenever possible should be worked on in order of priority.\r\n\r\nThe o11y weekly meeting is on Tuesday, 02 Jun. We'll cover this then. See you all there.\r\n\r\n---\r\n\r\n## Calendar\r\n\r\n|             | M 01 Jun | T 02 Jun | W 03 Jun | Th 04 Jun  | F 05 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :ferris_wheel: | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @igorwwwwwwwwwwwwwwwwwwww | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @msmiley | - | :pager: | :pager: | :pager: | :pager:\r\n| @mwasilewski-gitlab | - | :pager: | :pager: | :pager: | :pager:\r\n\r\nW23 working days: 11\r\n\r\n|             | M 08 Jun | T 09 Jun | W 10 Jun | Th 11 Jun  | F 12 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | :sun_with_face: \r\n| @cindy | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :sun_with_face:\r\n| @craigf | :x: | :pager: | :pager: | :pager: | :pager:\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | :sun_with_face: \r\n| @msmiley | :pager: | :wrench: | :wrench: | :wrench: | :sun_with_face:\r\n| @mwasilewski-gitlab | :pager: | :wrench: | :wrench: | :ferris_wheel: | :sun_with_face: \r\n\r\nW24 working days: 8\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 19**","state":"closed","created_at":"2020-04-20T20:17:57.535Z","updated_at":"2020-06-17T16:19:26.003Z","due_date":"2020-06-12","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/80"},"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":45,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6940","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6940","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6940/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6940/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6940","relative":"#6940","full":"gitlab-com/gl-infra/reliability#6940"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21809882,"iid":6936,"project_id":1304532,"title":"Investigate git storage nodes using more disk space than expected","description":"Some of our Gitaly storage nodes have a significant gap between actual disk space used versus what our \"project_statistics\" table reports.\n\nTry to find what dominates this discrepancy.  Time-box the discovery effort, as we are soon planning to significantly change our git storage architecture.  This investigation aims to understand the nature and magnitude of the measurement error, but it mostly matters if it's caused by a systematic accounting error that can be improved upon.\n\nExample:\nHost: file-25-stor-gprd (a.k.a. \"nfs-file25\")\nActual disk space used: 14 TB\nReported disk space used: 12 TB\n\nFor more background on (re)discovering this discrepancy, see:\nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6796#note_179818651","state":"closed","created_at":"2019-06-11T18:30:36.667Z","updated_at":"2022-08-10T23:03:54.091Z","closed_at":"2022-08-02T06:05:29.803Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Service::Git","auto updated","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6936","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6936","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6936/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6936/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6936","relative":"#6936","full":"gitlab-com/gl-infra/reliability#6936"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21803369,"iid":6931,"project_id":1304532,"title":"Timing for offline upgrade","description":"We can do an offline upgrade using `pg_upgrade`. We should know how long this is going to take to figure out if the downtime would be acceptable or not.","state":"closed","created_at":"2019-06-11T16:05:05.869Z","updated_at":"2022-08-10T23:03:57.716Z","closed_at":"2020-07-09T12:14:18.749Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Global:In Progress","auto updated","workflow-infra::Done"],"milestone":{"id":878523,"iid":22,"group_id":1112072,"title":"Secure and Defend - Upgrade Postgres to version 11 with log centralization and reporting","description":"","state":"closed","created_at":"2019-05-17T21:56:51.299Z","updated_at":"2019-09-09T20:44:30.253Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/22"},"assignees":[],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6931","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6931","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6931/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6931/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6931","relative":"#6931","full":"gitlab-com/gl-infra/reliability#6931"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":71,"epic":{"id":7786,"iid":71,"title":"Upgrade PostgreSQL to major version 11","url":"/groups/gitlab-com/gl-infra/-/epics/71","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21801140,"iid":6930,"project_id":1304532,"title":"Update build-runner s3 settings before they lose support in version 12.0 of GitLab runner.","description":"We need to updated the build runner cache settings to the new format before 12.0 is rolled out to the runners. Specifically someone needs to go in and change the vault secrets.\n\nThe build runners for the omnibus packages are throwing deprecation warnings on startup about their use of the runner cache s3 parameters. The configuration they are using is deprecated and being removed in 12.0\n\nAn MR for updating the visible settings is here: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/1208\n\nBut the access secrets are stored in vault and also need to be updated.\n\nThey need to be moved from where they are to be nested one level further down under the `s3` key.","state":"closed","created_at":"2019-06-11T15:01:42.277Z","updated_at":"2022-08-10T23:03:58.367Z","closed_at":"2019-07-26T19:15:26.864Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["oncall","priority::1","team::Reliability","workflow-infra::Done"],"milestone":{"id":918500,"iid":31,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team July 2019","description":"","state":"closed","created_at":"2019-06-28T23:28:40.137Z","updated_at":"2019-08-06T13:08:46.604Z","due_date":"2019-07-31","start_date":"2019-07-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/31"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":42196,"username":"twk3","name":"DJ Mountney","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0585c59e37fc2dbc124fc4c9f575234d?s=80\u0026d=identicon","web_url":"https://gitlab.com/twk3"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6930","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6930","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6930/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6930/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6930","relative":"#6930","full":"gitlab-com/gl-infra/reliability#6930"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21768290,"iid":6927,"project_id":1304532,"title":"Connect monitoring from Kubernetes to our existing Infrastructure","description":"Determine how to connect our existing monitoring infrastructure to the new kubernetes clusters monitoring solution.\n\nPick up where the conversation left off of here: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6660#note_179679854","state":"closed","created_at":"2019-06-10T19:04:30.344Z","updated_at":"2022-08-10T23:04:02.037Z","closed_at":"2019-06-27T12:46:16.985Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["kubernetes","team::Delivery","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6927","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6927/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6927/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6927","relative":"#6927","full":"gitlab-com/gl-infra/reliability#6927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21768260,"iid":6926,"project_id":1304532,"title":"Deploy monitoring infrastructure inside of Kubernetes","description":"Without kubernetes clusters, we'll need a way to monitor them.  Utilize this issue to perform the deploy of the necessary services/applications to monitor our clusters and the services that run on them.\n\nPick up the conversation of this from the following location: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6660#note_177820136","state":"closed","created_at":"2019-06-10T19:03:18.221Z","updated_at":"2022-08-10T23:04:02.674Z","closed_at":"2019-06-24T14:58:01.801Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["kubernetes","team::Delivery","workflow-infra::Done"],"milestone":null,"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6926","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6926","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6926/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6926/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6926","relative":"#6926","full":"gitlab-com/gl-infra/reliability#6926"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21768064,"iid":6925,"project_id":1304532,"title":"Update consul to v1.5.1","description":"Our current version ([1.0.3](https://gitlab.com/gitlab-cookbooks/gitlab_consul/blob/d94d678ab95f41d2528f1a032e430410e43bd854/attributes/default.rb#L1)) doesn't allow for multi-tag querying, which we'll need for example to select a canary api node (which has tags `\"cny\"`, and `\"api\"`). That feature was introduced on v1.3.0, but there's no impediment for getting on the latest version (some breaking changes, but none that affect us. See https://github.com/hashicorp/consul/blob/master/CHANGELOG.md).\n\n/cc @dawsmith","state":"closed","created_at":"2019-06-10T18:55:30.657Z","updated_at":"2022-08-10T23:04:03.283Z","closed_at":"2019-06-11T16:11:16.541Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":878550,"iid":26,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Chef 15 and Consul for service registration","description":"We are currently running most chef clients on Chef 12 and the current version is Chef 15.  This KR will scope the size of the effort to upgrade nodes in production to chef 15 and pick a reasonable effort to do in Q2.\r\n\r\nWe also had carry over for finishing Consul service registration work from 2019FYQ1.\r\n\r\nEpics:\r\n1. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/69\r\n2. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/57","state":"closed","created_at":"2019-05-17T22:46:07.911Z","updated_at":"2019-12-04T21:44:14.005Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/26"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6925","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6925","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6925/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6925/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6925","relative":"#6925","full":"gitlab-com/gl-infra/reliability#6925"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":69,"epic":{"id":7633,"iid":69,"title":"Wrap up of Consul Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/69","group_id":1112072},"iteration":null,"health_status":null},{"id":21658381,"iid":6908,"project_id":1304532,"title":"Cleanup Chef ACL Permissions","description":"In working to grant `read only` access to Chef resources it was discovered that our default permission model was incredibly wide, such that anyone who was a 'user' in the Chef server could do anything except add another user (delete nodes, update roles, update environments, etc).\n\nThis needs to be cleaned up and locked down so that by default users have no access in the `gitlab` chef organization unless granted it.","state":"closed","created_at":"2019-06-07T04:25:51.825Z","updated_at":"2022-08-12T02:04:02.300Z","closed_at":"2019-06-07T08:43:49.243Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["cleanup","corrective action","security","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6908","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":6,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6908","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6908/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6908/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6908","relative":"#6908","full":"gitlab-com/gl-infra/reliability#6908"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21653164,"iid":6907,"project_id":1304532,"title":"Camo proxy: secure configuration","description":"From @msmiley on https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6836#note_178684472:\nWe should discuss rate limiting, concurrency, and request timeouts for Camo's proxied requests. And we should decide whether to apply those limits at Camo's ingress load balancer or at each Camo instance's egress. I don't yet have a well-formed threat model, but off the cuff, we want to avoid making Camo attractive as an anonymizing proxy for attackers (abuse via us against a victim's domain) while also preventing attackers from too easily saturating our pool of Camo instances (DoS against us).","state":"closed","created_at":"2019-06-06T20:39:48.568Z","updated_at":"2021-06-24T08:10:11.425Z","closed_at":"2019-06-17T22:20:42.557Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6907","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6907","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6907/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6907/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6907","relative":"#6907","full":"gitlab-com/gl-infra/reliability#6907"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21652190,"iid":6906,"project_id":1304532,"title":"Packagecloud Upgrade REQUIRED","description":"**Our version of packagecloud, 2.6.0, will stop working on the 24th of June.**\n\nThis is due to AWS deprecating support for the API in which packagecloud is utilizing.  An upgrade is available.  We should upgrade before this due date.\n\nThe email I received:\n\n\u003e\u003e\u003e\nAWS S3 is deprecating the AWS S3 SigV2 API on June 24, 2019 [1], which packagecloud:enterprise 2.0.6 and earlier currently use. New versions of packagecloud:enterprise (versions 2.0.7 and higher) use AWS CloudFront for serving package objects, instead of using AWS S3 directly. This upgrade significantly improves package download speeds and avoids the S3 API deprecation.\n\nTo continue using packagecloud:enterprise after June 24th, 2019, you will need to upgrade to version 2.0.8, which includes support for CloudFront. On packagecloud:enterprise version 2.0.8, you can optionally enable or disable CloudFront.\n\nUpgrading to packagecloud:enterprise 2.0.8 will allow you to create a CloudFront distribution and test it before AWS deprecates the S3 API in a few weeks.\n\nNote that our next release of packagecloud:enterprise, version 3.0.0, will require CloudFront. \n\nCreating a new CloudFront distribution can take 30 minutes or longer. We strongly urge all customers to upgrade to 2.0.8 now so that they can create their CloudFront distributions while still serving packages from AWS S3 before the deprecation takes place. This upgrade will allow for a seamless switch-over with no downtime.\n\nWaiting to upgrade to packagecloud:enterprise until June 24, 2019, will almost certainly result in downtime as you will need to wait for the creation of the CloudFront distribution to enable downloading of package objects.\n\nUsers should follow the upgrade instructions: https://packagecloud.atlassian.net/wiki/spaces/ENTERPRISE/pages/15269926/Upgrading\n\nOnce the 2.0.8 upgrade is complete, users should follow the CloudFront setup instructions:\nhttps://packagecloud.atlassian.net/wiki/spaces/ENTERPRISE/pages/501972993/AWS+CloudFront+Setup\n\nContact support@packagecloud.io if you have any questions or problems.\n\nHappy packaging!\n\n[1]: https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingAWSSDK.html#UsingAWSSDK-sig2-deprecation\n\u003e\u003e\u003e\n\n/cc @gitlab-com/gl-infra \n/cc @gitlab-org/distribution","state":"closed","created_at":"2019-06-06T19:39:50.043Z","updated_at":"2022-08-12T02:04:03.708Z","closed_at":"2019-06-10T22:15:32.263Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::PackageCloud","priority::2","severity::2","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6906","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6906","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6906/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6906/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6906","relative":"#6906","full":"gitlab-com/gl-infra/reliability#6906"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21647603,"iid":6905,"project_id":1304532,"title":"Evaluate viability of using magnetic HDDs instead of SSDs","description":"On Slack, @glopezfernandez mentioned the possibility of saving money by using cheaper, slower traditional HDDs. We should evaluate whether or not this is possible with production load, relying on ARC (RAM and L2 on NVMe local SSDs).","state":"closed","created_at":"2019-06-06T16:14:28.537Z","updated_at":"2022-08-12T02:04:05.054Z","closed_at":"2019-06-25T13:54:04.123Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["Global:In Progress","auto updated","workflow-infra::Done"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6905","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6905","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6905/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6905/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6905","relative":"#6905","full":"gitlab-com/gl-infra/reliability#6905"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21647032,"iid":6904,"project_id":1304532,"title":"Upgrade Ruby on license.gitlab.com","description":"https://gitlab.com/gitlab-cookbooks/cookbook-license-gitlab-com/merge_requests/11#note_178580713","state":"closed","created_at":"2019-06-06T15:51:53.309Z","updated_at":"2020-03-13T23:09:25.908Z","closed_at":"2020-03-13T22:04:51.090Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":918500,"iid":31,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team July 2019","description":"","state":"closed","created_at":"2019-06-28T23:28:40.137Z","updated_at":"2019-08-06T13:08:46.604Z","due_date":"2019-07-31","start_date":"2019-07-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/31"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-20","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6904","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6904","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6904/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6904/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6904","relative":"#6904","full":"gitlab-com/gl-infra/reliability#6904"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21639495,"iid":6901,"project_id":1304532,"title":"Remove CI infrastructure from DigitalOcean","description":"DO has served us well for first years of having autoscaled Shared Runners on GitLab.com. But with our transition to GCP, connected with transition of CI infrastructure also there, it became a backup environment.\n\nAfter migrating the CI infrastructure to GCP we've added several updates to increase the efficiency of that environment and to make the configuration simpler. So at this moment configuration of the CI infrastructure in DO is not the same as in GCP.\n\nDuring last year since the transition, DO environment was used twice - both times during some problems with GCP environment. And both times unsuccessful. The bigger load that we've got since migrating to GCP and the different configuration of the infrastructure made DO environment in current shape to be no more usable for GitLab.com CI infrastructure. At this moment we get a lot of alerting noise (e.g. related to cache server) from an infrastructure part that is totally not used.\n\nWe still should have some backup strategy. But we should rather think about how we can quickly (re)create the CI infrastructure in another region in GCP (e.g. with the idea like #4813).\n\nWith all of this said, I think it's time to send our CI infrastructure in DO for a well-deserved retirement.\n\n---\n\nWhat should be done for DigitalOcean CI infrastructure termination:\n\n- [x] Cleanup Prometheus configuration:\n    - [x] `prometheus-server` role, `node` job, `public_hosts` list:\n        - [x] remove `runners-cache-5.gitlab.com` \n    - [x] `prometheus-server` role, `prometheus` job, `public_hosts` list:\n        - [x] remove `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n\n    - [x] `gprd-infra-prometheus-server.json` role, `ci-node` job, `role_name` list:\n        - [x] remove `gitlab-runners-consul`\n        - [x] remove `runners-cache-server`\n    - [x] `gprd-infra-prometheus-server.json` role, `ci-node` job, `public_hosts` list:\n        - [x] remove `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] `gprd-infra-prometheus-server.json` role, `blackbox` job, `static_configs-\u003etargets` list:\n        - [x] remove `http://runners-cache-5.gitlab.com/minio/login`\n        - [x] remove `http://runners-cache-5.gitlab.com:1443/v2`\n        - [x] remove `http://runners-cache-5.gitlab.com:5000/v2`\n        - [x] remove `http://runners-cache-5.gitlab.com:9000/minio/login`\n        - [x] remote `https://prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] `gprd-infra-prometheus-server.json` role, `shared-runners` job, `static_configs-\u003etargets` list:\n        - [x] remove `shared-runners-manager-1.gitlab.com:9402`\n        - [x] remove `shared-runners-manager-2.gitlab.com:9402`\n    - [x] `gprd-infra-prometheus-server.json` role, `shared-runners-gitlab-org` job, `static_configs-\u003etargets` list:\n        - [x] remove `gitlab-shared-runners-manager-1.gitlab.com:9402`\n        - [x] remove `gitlab-shared-runners-manager-2.gitlab.com:9402`\n    - [x] `gprd-infra-prometheus-server.json` role, `private-runners` job, `static_configs-\u003etargets` list:\n        - [x] remove `private-runners-manager-1.gitlab.com:9402`\n        - [x] remove `private-runners-manager-2.gitlab.com:9402`\n    - [x] `gprd-infra-prometheus-server.json` role, `prometheus` job, `public_hosts` list:\n        - [x] remove `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] `gprd-infra-prometheus-server.json` role, `ci-prometheus-fleet` job, `static_configs-\u003etargets` list:\n        - [x] remove `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] `gprd-infra-prometheus-server.json` role\n        - [x] remove `digitalocean_gitlab_bv` job\n        - [x] remove `digitalocean_gitlab_ci` job\n        - [x] remove `digitalocean_hanging_droplets_cleaner` job\n        - [x] remove `digitalocean_droplet_zero_machines_cleaner` job\n        - [x] remove `runners-cache-registry` job\n        - [x] remove `runners-cache-server` job\n        - [x] remove `runners-cache-minio` job\n\n    - [x] `ops-infra-prometheus-server` role, `node` job, `public_hosts` list:\n        - [x] remove `shared-runners-manager-1.gitlab.com`\n        - [x] remove `shared-runners-manager-2.gitlab.com`\n        - [x] remove `gitlab-shared-runners-manager-1.gitlab.com`\n        - [x] remove `gitlab-shared-runners-manager-2.gitlab.com`\n        - [x] remove `private-runners-manager-1.gitlab.com`\n        - [x] remove `private-runners-manager-2.gitlab.com`\n        - [x] remove `runners-cache-5.gitlab.com`\n        - [x] remove `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n        - [x] remove `consul-01.nyc1.do.gitlab-runners.gitlab.net`\n        - [x] remove `consul-02.nyc1.do.gitlab-runners.gitlab.net`\n        - [x] remove `consul-03.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] `ops-infra-prometheus-server` role, `prometheus` job, `public_hosts` list:\n        - [x] remove `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] `ops-infra-prometheus-server` role, `thanos` job, `public_hosts` list:\n        - [x] remove `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n- [x] Chef cleanup:\n    - [x] remove nodes:\n        - [x] `shared-runners-manager-1.gitlab.com`\n        - [x] `shared-runners-manager-2.gitlab.com`\n        - [x] `gitlab-shared-runners-manager-1.gitlab.com`\n        - [x] `gitlab-shared-runners-manager-2.gitlab.com`\n        - [x] `private-runners-manager-1.gitlab.com`\n        - [x] `private-runners-manager-2.gitlab.com`\n        - [x] `runners-cache-5.gitlab.com`\n        - [x] `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n        - [x] `consul-01.nyc1.do.gitlab-runners.gitlab.net`\n        - [x] `consul-02.nyc1.do.gitlab-runners.gitlab.net`\n        - [x] `consul-03.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] remove roles:\n        - [x] `gitlab-runner-srm-do`\n        - [x] `gitlab-runner-gsrm-do`\n        - [x] `gitlab-runner-prm-do`\n        - [x] `runners-cache-5-gitlab-com`\n        - [x] `runners-cache-server`\n        - [x] `prometheus-blackbox-runners-cache`\n        - [x] `gitlab-runners-prometheus-do-nyc1`\n        - [x] `gitlab-runners-consul`\n        - [x] `gitlab-runners-consul-firewall`\n        - [x] `gitlab-runners-consul-do-nyc1`\n    - [x] remove chef vaults:\n        - [x] `gitlab-runner-srm-do ci-prd`\n        - [x] `gitlab-runner-gsrm-do ci-prd`\n        - [x] `gitlab-runner-prm-do ci-prd`\n        - [x] `runners-cache-5-gitlab-com ci-prd`\n        - [x] `gitlab-runners-prometheus-do-nyc1 ci-prd`\n        - [x] `gitlab-runners-consul client`\n        - [x] `gitlab-runners-consul cluster`\n- [x] unregister Runners:\n    - [x] dev.gitlab.org:\n        - [x] Shared Runners:\n            - [x] `private-runners-manager-1.gitlab.com` (ID: 75)\n            - [x] `private-runners-manager-2.gitlab.com` (ID: 96)\n            - [x] `gitlab-shared-runners-manager-1.gitlab.com` (ID: 110)\n            - [x] `gitlab-shared-runners-manager-2.gitlab.com` (ID: 111)\n    - [x] GitLab.com:\n        - [x] Shared Runners:\n            - [x] `shared-runners-manager-1.gitlab.com` (ID: 40786)\n            - [x] `shared-runners-manager-2.gitlab.com` (ID: 40788)\n            - [x] `gitlab-shared-runners-manager-1.gitlab.com` (ID: 37398)\n            - [x] `gitlab-shared-runners-manager-2.gitlab.com` (ID: 37397)\n        - [x] `gitlab-org` Group Runners:\n            - [x] `private-runners-manager-1.gitlab.com` (ID: 395501)\n            - [x] `private-runners-manager-2.gitlab.com` (ID: 395502)\n        - [x] `gitlab-com` Group Runners:\n            - [x] `private-runners-manager-1.gitlab.com` (ID: 395497)\n            - [x] `private-runners-manager-2.gitlab.com` (ID: 395498)\n        - [x] `charts` Group Runners:\n            - [x] `private-runners-manager-1.gitlab.com` (ID: 396095)\n            - [x] `private-runners-manager-2.gitlab.com` (ID: 396096)\n- [x] DigitalOcean resources cleanup:\n    - [x] remove nodes:\n        - [x] from `GitLab Prod` team:\n            - [x] `shared-runners-manager-1.gitlab.com`\n            - [x] `shared-runners-manager-2.gitlab.com`\n            - [x] `gitlab-shared-runners-manager-1.gitlab.com`\n            - [x] `gitlab-shared-runners-manager-2.gitlab.com`\n            - [x] `private-runners-manager-1.gitlab.com`\n            - [x] `private-runners-manager-2.gitlab.com`\n            - [x] `runners-cache-5.gitlab.net` + volumes\n            - [x] `prometheus-01.nyc1.do.gitlab-runners.gitlab.net` + volumes\n            - [x] `consul-01.nyc1.do.gitlab-runners.gitlab.net`\n            - [x] `consul-02.nyc1.do.gitlab-runners.gitlab.net`\n            - [x] `consul-03.nyc1.do.gitlab-runners.gitlab.net`\n    - [x] cleanup runner base images:\n        - [x] in `GitLab B.V.` team\n        - [x] in `GitLab CI` team\n- [x] update our [base image building configuration](https://dev.gitlab.org/cookbooks/packer-runner-machines/) to stop using DO\n- [x] other:\n    - [x] Grafana cleanup:\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m\u0026fullscreen\u0026panelId=62 - remove panel\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m\u0026fullscreen\u0026panelId=65 - remove panel\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m\u0026fullscreen\u0026panelId=68 - remove panel\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m\u0026fullscreen\u0026panelId=61 - remove panel\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m - remove whole `Cache servers` row\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m - remove whole `Hanging droplets cleaner` row\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m - remove whole `Droplet zero machines cleaner` row\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m - remove `Cache Server` variable\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m - remove `Hanging doplets cleaner` variable\n        - [x] https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m - remove `Droplet zero machines cleaner` variable\n        - [x] https://dashboards.gitlab.net/d/sXVh89Imk/ci-autoscaling-providers?orgId=1\u0026refresh=5m - remove whole `DigitalOcean` row","state":"closed","created_at":"2019-06-06T12:30:32.409Z","updated_at":"2020-09-28T18:53:01.863Z","closed_at":"2019-06-24T19:01:30.696Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["auto updated","ci","cleanup","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":215818,"username":"tmaczukin","name":"Tomasz Maczukin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a9a99b9665ab7eda2cd7bffd54b1836?s=80\u0026d=identicon","web_url":"https://gitlab.com/tmaczukin"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":12,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6901","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":138,"completed_count":138},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6901","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6901/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6901/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6901","relative":"#6901","full":"gitlab-com/gl-infra/reliability#6901"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21614481,"iid":6897,"project_id":1304532,"title":"Giving read-only access to chef","description":"We have ~~2~~ 3 access-requests open for read-only access to chef.\n\n1. https://gitlab.com/gitlab-com/access-requests/issues/958\n1. https://gitlab.com/gitlab-com/access-requests/issues/286\n1. gitlab-com/access-requests#1110\n\nGathering this into an issue.\nLooks like we could do:\nhttps://github.com/chef/knife-acl#create-read-only-group-with-read-only-access\n\n@northrup appears to have made a read-only group, but we need to do the other knife-acl commands to finish making up the group and test with @pharrison and @asaba","state":"closed","created_at":"2019-06-05T22:32:59.839Z","updated_at":"2022-08-12T02:04:09.729Z","closed_at":"2019-06-07T00:45:40.339Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["access request","security","team::Reliability","unblocks others","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6897","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6897","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6897/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6897/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6897","relative":"#6897","full":"gitlab-com/gl-infra/reliability#6897"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21613757,"iid":6896,"project_id":1304532,"title":"Allow users in staging group to ssh into staging nodes","description":"`openssh.allow_groups` in some `gstg-*` roles is not including 'staging' to allow ssh access for users in the staging group (e.g. the `nessus-staging` user to allow authenticated scans).","state":"closed","created_at":"2019-06-05T21:35:59.849Z","updated_at":"2019-12-06T21:43:46.124Z","closed_at":"2019-06-05T22:29:48.352Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","toil","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6896","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6896","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6896/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6896/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6896","relative":"#6896","full":"gitlab-com/gl-infra/reliability#6896"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21610917,"iid":6895,"project_id":1304532,"title":"Centralize/include terraform module pipeline configs","description":"I've created a new project https://ops.gitlab.net/gitlab-com/gl-infra/pipeline-templates with the initial intent to centralize common elements for pipelines/jobs running under https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules, though the same principle could easily be extended to other aspects of the code/infrastructure we manage.\n\n1. [x] Create base `.gitlab-ci.yml` template for terraform module pipelines\n1. [x] Validate template CI configuration in a terraform module pipeline\n1. [x] Document pattern in `https://ops.gitlab.net/gitlab-com/gl-infra/pipeline-templates/blob/master/README.md`\n1. [x] Propagate changes to remaining modules\n\n## Ops MRs\n\n### Getting the pipeline template working\n\n- [pipeline-templatesdone!2](https://ops.gitlab.net/gitlab-com/gl-infra/pipeline-templates/merge_requests/2)\n- [pipeline-templatesdone!3](https://ops.gitlab.net/gitlab-com/gl-infra/pipeline-templates/merge_requests/3)\n- [pipeline-templatesdone!4](https://ops.gitlab.net/gitlab-com/gl-infra/pipeline-templates/merge_requests/4)\n- [pipeline-templatesdone!5](https://ops.gitlab.net/gitlab-com/gl-infra/pipeline-templates/merge_requests/5)\n- [pipeline-templatesdone!6](https://ops.gitlab.net/gitlab-com/gl-infra/pipeline-templates/merge_requests/6)\n\n### Rolling template usage out to terraform-modules projects\n\n- [x] [bootstrap!7]\n- [x] [cloud-nat!8]\n- [x] [cloud-sql!10]\n- [x] [database-backup-bucket!8]\n- [x] [generic-stor!15]\n- [x] [generic-stor-redis!15]\n- [x] [generic-stor-with-group!12]\n- [x] [generic-sv-sidekiq!15]\n- [x] [generic-sv-with-group!10]\n- [x] [gke!23]\n- [x] [https-lb!4]\n- [x] [monitoring-lb!3]\n- [x] [monitoring-with-count!12]\n- [x] [project!20]\n- [x] [pubsubbeat!11]\n- [x] [stackdriver!3]\n- [x] [static-objects-cache!2]\n- [x] [storage-buckets!15]\n- [x] [tcp-lb!3]\n- [x] [vpc!8]\n- [x] [web-iap!4]\n\n[bootstrap!7]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/bootstrap/merge_requests/7\n[cloud-nat!8]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/cloud-nat/merge_requests/8\n[cloud-sql]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/cloud-sql/merge_requests/10\n[cloud-sql!10]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/cloud-sql/merge_requests/10\n[database-backup-bucket!8]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/database-backup-bucket/merge_requests/8\n[generic-stor!15]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/generic-stor/merge_requests/15\n[generic-stor-redis!15]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/generic-stor-redis/merge_requests/15\n[generic-stor-with-group!12]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/generic-stor-with-group/merge_requests/12\n[generic-sv-sidekiq!15]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/generic-sv-sidekiq/merge_requests/15\n[generic-sv-with-group!10]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/generic-sv-with-group/merge_requests/10\n[gke!23]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/gke/merge_requests/23\n[https-lb!4]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/https-lb/merge_requests/4\n[monitoring-lb!3]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/monitoring-lb/merge_requests/3\n[monitoring-with-count!12]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/monitoring-with-count/merge_requests/12\n[project!20]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/project/merge_requests/20\n[pubsubbeat!11]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/pubsubbeat/merge_requests/11\n[stackdriver!3]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/stackdriver/merge_requests/3\n[static-objects-cache!2]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/static-objects-cache/merge_requests/2\n[storage-buckets!15]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/storage-buckets/merge_requests/15\n[tcp-lb!3]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/tcp-lb/merge_requests/3\n[vpc!8]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/vpc/merge_requests/8\n[web-iap!4]: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/web-iap/merge_requests/4","state":"closed","created_at":"2019-06-05T19:09:36.409Z","updated_at":"2021-05-19T17:00:04.693Z","closed_at":"2019-10-03T22:29:01.521Z","closed_by":{"id":2623969,"username":"cody","name":"Cody West","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ae09c0cf2f3c328cfb96554a2fedd2ea?s=80\u0026d=identicon","web_url":"https://gitlab.com/cody"},"labels":["team::Reliability","terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":2623969,"username":"cody","name":"Cody West","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ae09c0cf2f3c328cfb96554a2fedd2ea?s=80\u0026d=identicon","web_url":"https://gitlab.com/cody"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6895","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":25,"completed_count":25},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6895","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6895/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6895/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6895","relative":"#6895","full":"gitlab-com/gl-infra/reliability#6895"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21609028,"iid":6894,"project_id":1304532,"title":"New S3 bucket for Greenhouse data extract","description":"We're going to be using the BI connector for Greenhouse to get data from them. They do nightly CSV dumps to S3.\n\nI need a bucket with read/write access. `datateam-greenhouse-extract` as a name would be :thumbsup: \n\nI'll just need the Access Key and Secret Key\n\n@ahanselka could you help with this?","state":"closed","created_at":"2019-06-05T18:04:35.503Z","updated_at":"2020-03-13T23:09:24.636Z","closed_at":"2020-03-13T22:05:07.447Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":1942272,"username":"tayloramurphy","name":"Taylor A Murphy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1942272/avatar.png","web_url":"https://gitlab.com/tayloramurphy"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6894","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6894","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6894/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6894/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6894","relative":"#6894","full":"gitlab-com/gl-infra/reliability#6894"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21603010,"iid":6892,"project_id":1304532,"title":"Update Secrets Management section of Production Architecture in the handbook","description":"As a result of standing up Vault, our production architecture will have changed. Please update all the relevant documentation and diagrams, including https://about.gitlab.com/handbook/engineering/infrastructure/production-architecture/#secrets-management","state":"closed","created_at":"2019-06-05T14:50:20.116Z","updated_at":"2022-08-12T02:04:15.343Z","closed_at":"2021-01-11T20:12:54.321Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-07-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6892","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6892","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6892/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6892/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6892","relative":"#6892","full":"gitlab-com/gl-infra/reliability#6892"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21602748,"iid":6890,"project_id":1304532,"title":"Secrets Management - Vault Design Document","description":"Review and make any required changes to the design document on [Vault](https://about.gitlab.com/handbook/engineering/infrastructure/library/vault/) and add it to the [engineering/infrastructure/design/](https://about.gitlab.com/handbook/engineering/infrastructure/design/) section of the handbook. \n\nYou may be required to ask questions about the document. That exploration and research should be considered part of this issue. Please close this task only once the design is agreed upon, the link is public, and work is ready to begin.","state":"closed","created_at":"2019-06-05T14:45:00.795Z","updated_at":"2021-06-24T08:10:12.049Z","closed_at":"2019-06-17T13:40:42.601Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878522,"iid":21,"group_id":1112072,"title":"Secure and Defend - Deploy Vault to provide a solution for secrets management and use","description":"","state":"closed","created_at":"2019-05-17T21:56:44.114Z","updated_at":"2019-09-09T20:43:58.114Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/21"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-13","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6890","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6890","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6890/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6890/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6890","relative":"#6890","full":"gitlab-com/gl-infra/reliability#6890"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":21602281,"iid":6889,"project_id":1304532,"title":"Benchmark syslog vs logging_collector","description":"Configs:\n\n```\necho \"\nlog_destination = syslog\nlogging_collector = off\nlog_statement = none\nlog_min_duration_statement = 0\n\" \u003e pg.syslog.conf\n\necho \"\nlog_destination = stderr\nlogging_collector = off\nlog_statement = none\nlog_min_duration_statement = 0\n\" \u003e pg.stderr.collector_off.conf\n\necho \"\nlog_destination = stderr\nlogging_collector = on\nlog_statement = none\nlog_min_duration_statement = 0\n\" \u003e pg.stderr.collector_on.conf\n\necho \"\nlog_destination = csvlog\nlogging_collector = off\nlog_statement = none\nlog_min_duration_statement = 0\n\" \u003e pg.csvlog.collector_off.conf\n\necho \"\nlog_destination = csvlog\nlogging_collector = on\nlog_statement = none\nlog_min_duration_statement = 0\n\" \u003e pg.csvlog.collector_on.conf\n\necho \"\nlog_destination = stderr\nlog_statement = none\nlog_min_duration_statement = -1\n\" \u003e pg.no_logs.conf\n```","state":"closed","created_at":"2019-06-05T14:31:33.200Z","updated_at":"2019-06-12T14:38:53.553Z","closed_at":"2019-06-12T13:52:54.417Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":878523,"iid":22,"group_id":1112072,"title":"Secure and Defend - Upgrade Postgres to version 11 with log centralization and reporting","description":"","state":"closed","created_at":"2019-05-17T21:56:51.299Z","updated_at":"2019-09-09T20:44:30.253Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/22"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6889","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6889","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6889/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6889/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6889","relative":"#6889","full":"gitlab-com/gl-infra/reliability#6889"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":72,"epic":{"id":7787,"iid":72,"title":"PostgreSQL Logging Improvements [80%]","url":"/groups/gitlab-com/gl-infra/-/epics/72","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21600891,"iid":6888,"project_id":1304532,"title":"Allow users in ops group to ssh into ops-base-runner hosts","description":"`openssh.allow_groups` in the `ops-base-runner` role is set to `[ci production]` but should be `ci ops production` to allow ssh access for users in the ops group (e.g. the `nessus-ops` user to allow authenticated scans).","state":"closed","created_at":"2019-06-05T13:50:42.852Z","updated_at":"2019-12-06T21:43:45.853Z","closed_at":"2019-06-05T21:37:32.866Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6888","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6888","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6888/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6888/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6888","relative":"#6888","full":"gitlab-com/gl-infra/reliability#6888"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21592521,"iid":6884,"project_id":1304532,"title":"DBRE sync meeting scheduling","description":"The DBRE sync was scheduled for Tuesdays, 2.30pm-3pm UTC. We have a conflict with the Secure\u0026Defend team meeting which starts at 2.45pmUTC and should re-schedule the DBRE sync call.\n\nAs pointed out, a later time would suit US timezones better. Let's see what time/day would work best.\n\ncc @gl-database @dawsmith @ansdval","state":"closed","created_at":"2019-06-05T09:34:24.925Z","updated_at":"2022-08-12T02:04:23.717Z","closed_at":"2019-06-11T14:35:35.716Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","auto updated","meta","workflow-infra::Done"],"milestone":null,"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6884","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6884","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6884/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6884/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6884","relative":"#6884","full":"gitlab-com/gl-infra/reliability#6884"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21590640,"iid":6883,"project_id":1304532,"title":"Benchmarks for relevant candidate configs","description":"Benchmark the following configurations:\n\nAll:\n  - n1-standard-32\n  - ubuntu xenial\n  - `4.15.0-1033-gcp` kernel\n  - ZoL 0.7.5\n\nraidz1:\n  - 9 SSD zpool\n  - 2 local SSD L2ARC\n\nraidz1 HDD:\n  - 9 HDD zpool\n  - 2 local SSD L2ARC\n\nsingle:\n  - 1 SSD\n  - 2 local SSD L2ARC\n\next4:\n  - 1 SSD ext4","state":"closed","created_at":"2019-06-05T08:23:22.536Z","updated_at":"2022-08-12T02:04:24.548Z","closed_at":"2019-06-25T13:51:25.907Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["Global:In Progress","auto updated","workflow-infra::Done"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6883","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6883","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6883/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6883/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6883","relative":"#6883","full":"gitlab-com/gl-infra/reliability#6883"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21582719,"iid":6881,"project_id":1304532,"title":"Camo proxy monitoring, alerting, and runbooks","description":"Camo proxy will need some basic monitoring beyond VM health.  Starting points requiring further thought/expansion\n1. Service responsive via load-balancer - pageable\n1. Service responsive on each node - alert, but don't page\n\nMay require a pre-prepared encoded URL that is requested to ensure end-to-end functionality; would suggest something static on gitlab.com itself like a logo/image that won't change URL ever, and that we can expect to be up in the cases that we need camo proxy to be working (i.e. we won't be alerting because 'The Internet' is down, and if gitlab.com is completely down, we won't notice this alert specifically in the storm of alerts)\n\nIdeally we need some sort of graphing of the throughput/usage, although it's unclear at this stage how this will be implemented (mtail? custom exporter?)\n\nIn addition to alert response runbooks, we'll need to include debugging steps for verifying correctness and determining where a request is failing; it seems likely that we'll end up responding to requests asking why a URL isn't responding.","state":"closed","created_at":"2019-06-04T22:31:54.099Z","updated_at":"2020-08-31T20:47:10.185Z","closed_at":"2019-07-09T00:02:01.798Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6881","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6881","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6881/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6881/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6881","relative":"#6881","full":"gitlab-com/gl-infra/reliability#6881"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21578062,"iid":6880,"project_id":1304532,"title":"Create GCP Projects for Groups","description":"There have been several requests recently to create GCP projects for various groups to do work in.  Currently, these projects are being created ad-hoc with no standardization in how they are set up.\n\nThe https://ops.gitlab.net/gitlab-com/group-projects project has been created to standardize this process and give each group an isolated place to work without having to go through the infra team for each request.\n\nAdvantages of this include cost tracking, and greater accountability on each team.  It also reduces the workload on the infrastructure team for non-production work.  By empowering teams to manage their own isolated sandboxes in a safe way, everyone benefits.\n\nThe following list will be updated as this issue evolves to include the projects which will be created initially.\n\n| Project  |  Admin |\n|---|---|\n| geo  | Rachel Nienaber - rnienaber@gitlab.com  |\n| release  | Darby Frey - dfrey@gitlab.com |\n| verify  | Elliot Ruston - erushton@gitlab.com |\n| customer-success  | Joel Krooswyk - jkrooswyk@gitlab.com |\n| professional-services| Daniel Peric - dperic@gitlab.com |","state":"closed","created_at":"2019-06-04T18:57:58.360Z","updated_at":"2022-08-12T02:04:26.816Z","closed_at":"2020-03-13T22:07:17.534Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":13,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6880","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6880","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6880/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6880/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6880","relative":"#6880","full":"gitlab-com/gl-infra/reliability#6880"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21576304,"iid":6879,"project_id":1304532,"title":"Whitelist Atlasssian IP address Space for API Calls","description":"Atlasssian is getting `429` rate limiting from the front-end HA Proxy nodes for API access.\n\nThis is to whitelist their requested infrastructure so that they can have an integration with `gitlab.com`\n\nAtlassian provides a link for IP Addresses for Atlassian Cloud (https://ip-ranges.atlassian.com/?_ga=2.49521830.1829182039.1559668865-157908062.1559668865) we will use this to derive the content for our whitelist:\n\n```\nhttp https://ip-ranges.atlassian.com/?_ga=2.49521830.1829182039.1559668865-157908062.1559668865 | jq '.items[].cidr'\n```","state":"closed","created_at":"2019-06-04T17:29:12.837Z","updated_at":"2020-05-27T08:57:47.417Z","closed_at":"2019-09-05T20:36:26.869Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::HAProxy","auto updated","network","priority::2","team::Reliability","unscheduled","workflow-infra::Done"],"milestone":{"id":989649,"iid":40,"group_id":1112072,"title":"CI/CD \u0026 Enablement September 2019","description":"","state":"closed","created_at":"2019-09-03T14:00:40.199Z","updated_at":"2019-10-07T17:05:43.892Z","due_date":"2019-09-30","start_date":"2019-09-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/40"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6879","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6879","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6879/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6879/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6879","relative":"#6879","full":"gitlab-com/gl-infra/reliability#6879"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21572815,"iid":6875,"project_id":1304532,"title":"Alert when zpool is running low on disk space","description":"This issue is a placeholder and needs work.\n\nSREs should receive a non-paging alert when some threshold (to be determined) of zpool space is reached. Be mindful about how the reservation filesystem interacts with this. The threshold chosen should be low enough that we are unlikely to run out of disk space before the awake on-call picks up the non-paging alert.\n\nConsider adding a predictive alert (i.e. using prometheus' `predict_linear`) to send an alert when we are predicted to run out of zpool space in a week.\n\nConsider adding a paging alert at a higher, emergency threshold. Discuss this with the team.\n\nMake sure grafana dashboards are in-place and working to inspect zpool utilization.","state":"closed","created_at":"2019-06-04T15:27:27.235Z","updated_at":"2022-08-12T02:04:30.068Z","closed_at":"2019-07-15T10:29:45.245Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Global:In Progress","auto updated","workflow-infra::Done"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6875","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6875","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6875/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6875/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6875","relative":"#6875","full":"gitlab-com/gl-infra/reliability#6875"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21568319,"iid":6869,"project_id":1304532,"title":"Figure out how to deal with registry service memory issues on kubernetes","description":"Currently we have a job named registry-restarter that runs once a day on the VM fleet.\n\nI'm wondering how this will work exactly in kubernetes, I assume the service will crash and restart but the reason why we have this restarter job is to prevent errors. It does this by carefully draining each node from haproxy and restarting the service.\n\n* daily restart job https://ops.gitlab.net/gitlab-com/gl-infra/registry-restarter/pipelines\n* registry memory https://dashboards.gitlab.net/d/bd2Kl8Imk/registry-host-stats?orgId=1\u0026refresh=1m\u0026fullscreen\u0026panelId=7\u0026from=now-7d\u0026to=now\n\n![Screen_Shot_2019-06-04_at_3.04.29_PM](/uploads/76065557671869c1f56be91cce87873c/Screen_Shot_2019-06-04_at_3.04.29_PM.png)","state":"closed","created_at":"2019-06-04T13:05:10.174Z","updated_at":"2019-09-26T15:50:24.621Z","closed_at":"2019-07-26T14:47:55.413Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Service::Container Registry","auto updated","kubernetes","team::Delivery"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6869","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6869","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6869/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6869/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6869","relative":"#6869","full":"gitlab-com/gl-infra/reliability#6869"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":77,"epic":{"id":8806,"iid":77,"title":"Sort out monitoring and alerting for Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/77","group_id":1112072},"iteration":null,"health_status":null},{"id":21565835,"iid":6862,"project_id":1304532,"title":"Document the steps from going from 0 cluster to traffic being directed to the Container Registry","description":"Utilize this issue to track the work necessary for implementing a cluster, the application configurations, and moving traffic over to that cluster.  This is necessary for future documentation, and meant for a place to consolidate all notes that drove how the infrastructure components mesh together.","state":"closed","created_at":"2019-06-04T11:52:16.523Z","updated_at":"2019-09-25T14:38:12.375Z","closed_at":"2019-06-28T07:42:25.552Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["kubernetes","team::Delivery"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6862","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6862","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6862/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6862/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6862","relative":"#6862","full":"gitlab-com/gl-infra/reliability#6862"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21565766,"iid":6859,"project_id":1304532,"title":"Modify pre registry LB's to point to the new GKE registry","description":"Now that our new cluster is stood up and the container registry is running inside of it, let's point the LB nodes to the registry.\n\n## Steps\n1. Configure haproxy\n1. Enable it","state":"closed","created_at":"2019-06-04T11:48:54.423Z","updated_at":"2019-09-26T15:50:24.470Z","closed_at":"2019-06-04T18:40:29.697Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Service::Container Registry","kubernetes","team::Delivery"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6859","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6859","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6859/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6859/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6859","relative":"#6859","full":"gitlab-com/gl-infra/reliability#6859"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21565111,"iid":6857,"project_id":1304532,"title":"k8s-workloads uses a direct download from a third party, this should be built into an image","description":"If the third party site is down for any reason, we may have a failed job unrelated to changes being tested in the pipeline.  We should instead mirror/fork the project and create an image for us to utilize to prevent ourselves from being susecptable to such a failure.\n\nReference conversation: https://ops.gitlab.net/gitlab-com/gl-infra/k8s-workloads/gitlab-com/merge_requests/1#note_26510","state":"closed","created_at":"2019-06-04T11:20:34.607Z","updated_at":"2019-09-25T14:38:10.786Z","closed_at":"2019-08-02T12:27:17.743Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["TechnicalDebt","kubernetes","priority::4","team::Delivery"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6857","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6857","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6857/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6857/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6857","relative":"#6857","full":"gitlab-com/gl-infra/reliability#6857"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":79,"epic":{"id":8808,"iid":79,"title":"Kubernetes Pre Migration Technical Debt","url":"/groups/gitlab-com/gl-infra/-/epics/79","group_id":1112072},"iteration":null,"health_status":null},{"id":21565004,"iid":6854,"project_id":1304532,"title":"Replicas missing in staging patroni cluster","description":"Currently, there's only two instances in the patroni cluster in gstg:\n\n```\nroot@patroni-02-db-gstg.c.gitlab-staging-1.internal:/var/log/gitlab/postgresql# gitlab-patronictl list\n+---------------+------------------------------------------------+---------------+--------+---------+-----------+\n|    Cluster    |                     Member                     |      Host     |  Role  |  State  | Lag in MB |\n+---------------+------------------------------------------------+---------------+--------+---------+-----------+\n| pg-ha-cluster | patroni-02-db-gstg.c.gitlab-staging-1.internal | 10.224.29.102 | Leader | running |         0 |\n| pg-ha-cluster | patroni-04-db-gstg.c.gitlab-staging-1.internal | 10.224.29.104 |        | running |           |\n+---------------+------------------------------------------------+---------------+--------+---------+-----------+\n```\n\nOn other nodes, postgres is not running currently. This may be related to the network issue https://gitlab.com/gitlab-com/gl-infra/production/issues/862.","state":"closed","created_at":"2019-06-04T11:15:42.567Z","updated_at":"2019-12-06T21:44:00.130Z","closed_at":"2019-06-04T15:36:13.579Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6854","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6854","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6854/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6854/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6854","relative":"#6854","full":"gitlab-com/gl-infra/reliability#6854"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21564842,"iid":6850,"project_id":1304532,"title":"Decide on initial ZFS configuration","description":"After https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6726 is complete, we need to propose an initial set of config options for ZFS on git storage nodes.\n\nCurrent questions we need to answer (please add to this list, it's by no means complete):\n\n1. Amount of memory to dedicate to ARC (we have 120GB total)\n1. Size of reservation filesystem in the zpool\n1. zfs recordsize\n1. Use native compression? If so, what algorithm? Investigate the disk space savings using real git repositories.\n1. Use native encryption? (requires the new ZoL 0.8.0, see https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6777)\n1. Should we use quotas for the repository filesystem, e.g. 16TB? This might help us get a sense of when a node is getting full, exclusive of snapshot bulk.\n\nPlease use the discussion threads below to keep comments digestable.\n\n~~The output of this issue doesn't need to be code, but instead can be a comment that we reference when it comes to writing infra code.~~ Since gitlab_disks already exists, let's send MRs to that as part of this issue. This configuration is what we intend to use on a single canary in production, and refine from there.\n\nSee also https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6306","state":"closed","created_at":"2019-06-04T11:07:52.645Z","updated_at":"2019-07-24T16:25:28.963Z","closed_at":"2019-07-24T16:14:51.046Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Global:In Progress","auto updated"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":37,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6850","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6850","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6850/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6850/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6850","relative":"#6850","full":"gitlab-com/gl-infra/reliability#6850"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21564603,"iid":6849,"project_id":1304532,"title":"New machines can be bootstrapped with either ZFS or ext4 mounted filesystems","description":"Git storage nodes are just one of many stateful node classes that are instantiated using the terraform generic-stor module: https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/generic-stor.\n\nAll of our machines, stateful or not, run a version of the bootstrap script found in https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/bootstrap. Among other things, this script detects GCP PDs, formats them with ext4, and mounts them at a configurable location.\n\nOur new git storage nodes will use ZFS instead of ext4, and will possibly have many PDs in a raidz configuration depending on the output of https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6726.\n\nWrite a chef cookbook containing a recipe that idempotently formats and mounts PDs in a configurable way: variables passed in by the terraform module should instruct the recipe as to which filesystem / disk config to use. A ZFS config and ext4 should be supported initially. With regards to ZFS, it's fine if we only support the vdev config we have already agreed on: i.e. only raidz1 or only single disk.\n\nWrite a new iteration of the bootstrap script that does not format and mount persistent disks.\n\nAdd this recipe to the beginning of each stateful node's chef run list. It must not interact pathologically with existing bootstrap scripts that **do** format and mount disks.\n\nAfter this issue is closed I should be able to dial up the count of the new storage nodes declared in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6727, and see a usable ZFS filesystem mounted at /var/opt/gitlab.\n\nThe recipe, if no config is injected, should behave as it does today: format a single PD at /dev/disk/by-id/google-persistent-disk-1 with ext4 and mount it up.\n\nFor an existing non-git stateful role, i.e. redis, I should be able to do each of the following steps sequentially without causing data loss or downtime:\n\n1. Add the new recipe to the role's runlist.\n1. Bump the bootstrap script version to the new one that mounts nothing.\n1. Roll out new nodes.\n\nTry these things in staging before production.\n\nThe main benefits of moving this functionality to chef are improved testability and speed of iteration. The former is particularly important as we would roll this change out to all stateful nodes.\n\nNote that the bootstrap script also detects, formats, and mounts log disks. Moving this functionality to chef is not essential, but it may be worth moving it if everything mounting-and-formatting-related appears simpler in one place.","state":"closed","created_at":"2019-06-04T10:57:34.336Z","updated_at":"2019-06-17T13:16:24.475Z","closed_at":"2019-06-17T13:16:24.320Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Global:In Progress","auto updated"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6849","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6849","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6849/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6849/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6849","relative":"#6849","full":"gitlab-com/gl-infra/reliability#6849"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21558990,"iid":6845,"project_id":1304532,"title":"forum does not have a functioning healthcheck endpoint","description":"Despite forum being down today our blackbox scraper thought it was alive, this is because requests were returning `200` status codes.\n\n```\n$ curl -I https://forum.gitlab.com\nHTTP/2 200\nserver: nginx\n```\n\nWe need a better healthcheck so we can detect problems sooner.\n\ncc @axil","state":"closed","created_at":"2019-06-04T08:34:01.118Z","updated_at":"2019-06-04T12:36:54.528Z","closed_at":"2019-06-04T12:32:50.520Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["auto updated","corrective action","forum.gitlab.com"],"milestone":null,"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6845","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6845","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6845/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6845/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6845","relative":"#6845","full":"gitlab-com/gl-infra/reliability#6845"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21542819,"iid":6843,"project_id":1304532,"title":"Camo proxy gprd deploy","description":"Build nodes, enable in production, and (optional?) security test","state":"closed","created_at":"2019-06-03T23:48:59.221Z","updated_at":"2019-12-06T21:43:59.789Z","closed_at":"2019-09-05T02:34:09.296Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6843","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6843","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6843/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6843/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6843","relative":"#6843","full":"gitlab-com/gl-infra/reliability#6843"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542800,"iid":6842,"project_id":1304532,"title":"Camo proxy gstg deploy","description":"Build nodes, enable in staging, and security test","state":"closed","created_at":"2019-06-03T23:47:13.443Z","updated_at":"2021-06-24T08:10:12.678Z","closed_at":"2019-09-03T03:36:17.549Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6842","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6842","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6842/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6842/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6842","relative":"#6842","full":"gitlab-com/gl-infra/reliability#6842"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542750,"iid":6841,"project_id":1304532,"title":"Camo proxy chef implementation","description":"Assuming VM, implement chef recipes for deploying it.\n\nIf k8s is ready and we go that way instead, disregard.","state":"closed","created_at":"2019-06-03T23:40:16.797Z","updated_at":"2019-12-06T21:43:59.495Z","closed_at":"2019-06-28T01:15:38.751Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6841","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6841","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6841/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6841/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6841","relative":"#6841","full":"gitlab-com/gl-infra/reliability#6841"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542693,"iid":6840,"project_id":1304532,"title":"Camo proxy deployment - terraform","description":"Implement terraform for the VM nodes, with external load balancer","state":"closed","created_at":"2019-06-03T23:28:36.098Z","updated_at":"2019-12-06T21:43:59.211Z","closed_at":"2019-06-28T01:15:36.009Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6840","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6840","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6840/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6840/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6840","relative":"#6840","full":"gitlab-com/gl-infra/reliability#6840"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542678,"iid":6839,"project_id":1304532,"title":"Camo proxy performance testing","description":"*  Estimate expected throughput (req/s peak) from existing logs and data, if available\n*  Do some ad-hoc performance testing to find the limits of the chosen camo proxy implementation; looking at CPU + RAM mainly\n*  Determine production node scale requirements.","state":"closed","created_at":"2019-06-03T23:25:47.831Z","updated_at":"2019-12-06T21:43:59.062Z","closed_at":"2019-06-10T01:48:43.084Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6839","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6839","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6839/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6839/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6839","relative":"#6839","full":"gitlab-com/gl-infra/reliability#6839"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542664,"iid":6838,"project_id":1304532,"title":"Camo proxy security review of design","description":"Hello @gitlab-com/gl-security/appsec \n\nCould you please review the design work on this epic, particularly:\n#6834, #6836, #6907 \n\n#6839 might also be interesting background info.\n\nI *think* we've covered off all the big concerns with security, but would appreciate any input you might have.  If it all looks ok, let us know so we can proceed with implementation.","state":"closed","created_at":"2019-06-03T23:22:16.395Z","updated_at":"2019-12-06T21:43:58.916Z","closed_at":"2019-07-22T09:43:16.614Z","closed_by":{"id":2761888,"username":"dappelt","name":"Dennis Appelt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2761888/avatar.png","web_url":"https://gitlab.com/dappelt"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6838","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6838","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6838/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6838/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6838","relative":"#6838","full":"gitlab-com/gl-infra/reliability#6838"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542624,"iid":6837,"project_id":1304532,"title":"Camo proxy whitelist configuration and control","description":"On the implementation issue, there is discussion about whitelisting object storage.\n\nDetermine:\n* What this exactly means and what values it might need\n* If there's anything else that might need whitelisting\n* How we should manage these values\n\nNB: this is not strictly camo proxy config; it's a GitLab application setting which whitelists domains from being passed through camo proxy","state":"closed","created_at":"2019-06-03T23:13:24.302Z","updated_at":"2020-03-14T01:08:24.575Z","closed_at":"2020-03-13T22:07:10.065Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6837","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6837","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6837/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6837/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6837","relative":"#6837","full":"gitlab-com/gl-infra/reliability#6837"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542595,"iid":6836,"project_id":1304532,"title":"Camo proxy network design","description":"Decide where to deploy it precisely within GCP (assuming VMs), and any detail any network design implications.\n\nImportant considerations include \n* public IP presence (consider NAT gateway vs per-node public IPs) \n* network controls (firewalls et al) to prevent proxying back into internal networks.\n* how internal systems get to camo - ILB?  Something else?","state":"closed","created_at":"2019-06-03T23:08:08.375Z","updated_at":"2022-09-13T03:46:26.083Z","closed_at":"2019-07-23T00:16:18.524Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":33,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6836","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6836","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6836/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6836/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6836","relative":"#6836","full":"gitlab-com/gl-infra/reliability#6836"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542558,"iid":6835,"project_id":1304532,"title":"Camo proxy deployment platform","description":"VM or K8S\n\nDocument choice and reasons.","state":"closed","created_at":"2019-06-03T23:00:38.348Z","updated_at":"2021-10-20T14:08:51.104Z","closed_at":"2019-06-04T20:47:18.419Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6835","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6835","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6835/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6835/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6835","relative":"#6835","full":"gitlab-com/gl-infra/reliability#6835"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542492,"iid":6834,"project_id":1304532,"title":"Choose camo implementation","description":"There are three options (at least):\n\n1. Original (https://github.com/atmos/camo)\n1. cactus/go-camo (https://github.com/cactus/go-camo)\n1. arachnys/go-camo (https://github.com/arachnys/go-camo - fork of cactus with more features)\n\nEnsure there aren't any others that need to be on the list, then do a quick evaluation of each for such criteria as features, deployability, maintenance, etc.  Does not require running or active testing; this can be considered a paper-based exercise.","state":"closed","created_at":"2019-06-03T22:51:56.641Z","updated_at":"2019-12-06T21:43:58.238Z","closed_at":"2019-06-05T21:15:17.284Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":878524,"iid":23,"group_id":1112072,"title":"Secure and Defend - Deploy Camo proxy server","description":"","state":"closed","created_at":"2019-05-17T21:56:58.364Z","updated_at":"2019-09-09T15:37:26.714Z","due_date":"2019-07-18","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/23"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6834","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6834","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6834/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6834/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6834","relative":"#6834","full":"gitlab-com/gl-infra/reliability#6834"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":66,"epic":{"id":7491,"iid":66,"title":"Deploy Camo proxy server [100%]","url":"/groups/gitlab-com/gl-infra/-/epics/66","group_id":1112072,"human_readable_end_date":"Jul 18, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21542221,"iid":6833,"project_id":1304532,"title":"Organize Project Folders in GCP","description":"Currently, there doesn't appear to be any obvious organization scheme behind the project folders in GCP.  Some top level folders contain only one project, and some nested folders have a lot in them.  There is no obvious schema for why things are where they are. I'll update this diagram as things become more clear.\r\n\r\nI'm especially interesting in any history behind any of these locations.\r\n\r\n\r\n```\r\ngitlab.com\r\n├── Analytics \r\n│   ├── gitlab-analysis\r\n│   └── karu-gitlab-analytics\r\n├── Customer Success \r\n│   └── (Empty)\r\n├── Development \r\n│   └── Frontend\r\n│       └── (1 project)\r\n├── Distribution \r\n│   └── (4 projects)\r\n├── Infrastructure\r\n│   ├── Environments\r\n│   │   └── (Primary Environments, prod, staging, pre, DR)\r\n│   ├── Ephemeral\r\n│   │   └── (Review apps for environments, temporary projects)\r\n│   ├── Security Products\r\n│   │   └── (2 Gemnasium Projects)\r\n│   └── (10 projects, ops, POC's, tools, review apps)\r\n├── IT Operations \r\n│   └── (Empty)\r\n├── Marketing\r\n│   └── GitLab-public\r\n├── Migration Testing\r\n│   └── (2 Projects - obsolete?)\r\n├── Monitoring\r\n│   └── monitoring-development\r\n├── Sandbox\r\n│   └── (User sandboxes, demo's, labs)\r\n├── Security\r\n│   └── (2 projects)\r\n├── system-gsuite\r\n│   └── apps-script\r\n│       └── (2 projects)\r\n└── (5 projects with no location)\r\n```\r\n\r\n![Screen_Shot_2019-06-03_at_3.01.02_PM](/uploads/49e49f9cad555f08b1813d07d75f6975/Screen_Shot_2019-06-03_at_3.01.02_PM.png)\r\n\r\ncc/ @gitlab-com/gl-infra ","state":"closed","created_at":"2019-06-03T22:32:07.538Z","updated_at":"2020-04-07T00:59:15.643Z","closed_at":"2020-04-06T23:36:17.940Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Discussion","Infrastructure","team::Reliability"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6833","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6833","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6833/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6833/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6833","relative":"#6833","full":"gitlab-com/gl-infra/reliability#6833"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21540178,"iid":6830,"project_id":1304532,"title":"RCA for June 2nd GCP related GitLab.com incident","description":"@ahanselka and @ahmadsherif - would you be okay owning this RCA?  I'll add questions on my side too.\ncc @andrewn \n\n## Summary\n\nGoogle had a major networking outage in their US East regions that affected their entire infrastructure, including GitLab.com\n\n- Service(s) affected : All services for GitLab.com\n- Team attribution : External\n- Minutes downtime or degradation : 20 minutes of downtime, 190 total of degradation\n\nhttps://dashboards.gitlab.net/d/ZUei7TkWz/platform-metrics?orgId=1\u0026fullscreen\u0026panelId=3\u0026from=1559498453907\u0026to=1559516462767\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- All GitLab.com services were completely down for about 30 minutes as Postgres failed over and services had to be restarted/HUPed. The application had degradation for about 3.5 hours after that.\n- All users of GitLab.com were affected by this incident.\n- During the first 30 minutes, GitLab.com was entirely inaccessible to users. For the remainder of the incident there was an elevated rate of 5xx errors.\n  - The main reason GitLab.com went completely down is due to Patroni cluster instability with failovers and the application being unable to follow the new primary.\n  - The longer period of elevated rate of 5xx errors was related to the network instability.\n- Many of our alerts were flapping because the monitoring server was unable to reach the servers in question.\n- There was a lot of flapping between redis-cache primary and secondaries. This did not seem to have an affect on the availability of the application.\n\n![patroni-network-drops](/uploads/623daf2bd0b5dd18bafed0a0c811855b/patroni-network-drops.png)\n\n![error-rates-and-resolution](/uploads/4a69fb6adf9c14137b0d0e0500d22e76/error-rates-and-resolution.png)\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- The incident was detected via PagerDuty alerts for GitLab.com being down.\n- Alarming worked as expected, however there were so many alerts it was overwhelming and made it hard to quickly determine anything.\n- Because of the deluge of alerts, some important relevant alerts such as the alert indicating Postgres failed over were lost in the noise.\n- It took about 2-3 minutes after the beginning of the downtime to get alerted and begin response.\n- It took about 30 minutes for us to recover GitLab.com from the Postgres failover, however the site remained unstable due to the provider outage.\n- Our dashboards were partially broken, which was a known issue earlier in the week (https://gitlab.com/gitlab-com/gl-infra/production/issues/849), making it much more difficult to get started with the response.\n\n## Timeline\n\n2019-06-02\n\n* 18:50 UTC - Patroni failed over from -04 to -06\n* 19:05 UTC - Most of our Grafana dashboards are inconsistently working because of thanos issues: https://gitlab.com/gitlab-com/gl-infra/production/issues/849\n* 19:07 UTC - Pingdom returning errors\n* 19:12 UTC - Diagnosis of Postgres failover\n* 19:21 UTC - Services hup'd\n* 19:26 UTC - GitLab.com operational. Pingdom reporting services as up.\n* 19:41 UTC - Watching https://status.cloud.google.com/incident/compute/19003\n* 19:59 UTC - also watching https://status.cloud.google.com/incident/cloud-networking/19009\n* 20:39 UTC - Continuing to monitor google incidents\n* 21:22 UTC - another failover from patroni-04 to -01\n* 21:54 UTC - postgres failed back over to -04\n* 22:00 UTC - Error rates returned to normal (that is, there were none)\n\n2019-06-03\n\n* 09:40 UTC - Restoring tuple statistics by running cluster-wide `ANALYZE`, see https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5841#note_128321668 (done 10:10 UTC)\n\n2019-06-06\n\n* Google posted [their RCA](https://status.cloud.google.com/incident/cloud-networking/19009)\n\n\n## Root Cause Analysis\n\nGitLab.com went down for 30 minutes with instability over the course of 4 total hours.\n\n1. Why? - The application could no longer reach the database.\n2. Why? - Postgres failed over unexpectedly.\n3. Why? - There was networking instability which caused the cluster to try to fail over multiple times.\n4. Why? - GCP had a major networking outage in the east region where we are located.\n\n## What went well\n\nStart with the following:\n\n- We found out very quickly that there was a problem\n- Multiple people jumped in to help diagnose and repair the issue\n- Delegation of duties and expectations was clear and effective\n  - i.e. \"You go update the status page\", \"I will go restart sidekiq\", etc.\n- Patroni failover was successful. If we had still been on Repmgr it would have been true disaster.\n\n## What can be improved\n\nStart with the following:\n\n- We should better automate and tune our database failover process so that the application can gracefully handle failovers.\n  - We could try to execute more failovers in staging and eventually production to be more confident that a similar incident in the future would not cause a complete outage as it did in this case.\n- We should also automate such that we don't have to re-run `ANALYZE` on the tables to re-populate statistics. \n- We can try to prune and curate our alerts such that there isn't a massive deluge of alerts that obscure the problem and make it hard to see other relevant alerts.\n- While this did not directly affect production, we didn't notice that staging had fallen apart also as a result of this. https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6854. It wasn't important to fix ASAP on a Sunday evening, but we should create a follow-up issue immediately when there is an issue like this so someone can follow up on Monday.\n\n\n## Corrective actions\n\nSome of these issues are not created as a reaction specifically to this incident but are the correct actions.\n\n- Automated failover testing (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5890)\n- Clients still connect to old primary after failover (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5675)\n- Graceful Patroni failovers (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5833)\n- Production incident relating to Thanos problems (https://gitlab.com/gitlab-com/gl-infra/production/issues/849)\n- Use a virtual IP for failovers (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7059)\n\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-06-03T20:14:39.064Z","updated_at":"2020-03-13T23:09:24.685Z","closed_at":"2020-03-13T22:07:04.030Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["IncidentReview","auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6830","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6830/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6830/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6830","relative":"#6830","full":"gitlab-com/gl-infra/reliability#6830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21535659,"iid":6829,"project_id":1304532,"title":"Find another place to cache repository archives","description":"Andrew suggested this looking into https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4454, other option would be caching in an object storage.","state":"closed","created_at":"2019-06-03T17:32:01.742Z","updated_at":"2020-06-08T05:49:33.781Z","closed_at":"2020-04-29T15:25:29.695Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":[],"milestone":{"id":881177,"iid":27,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Move writes from NFS (shared01) to object storage","description":"","state":"closed","created_at":"2019-05-21T07:00:19.518Z","updated_at":"2019-10-09T16:21:46.872Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/27"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":46,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6829","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6829","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6829/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6829/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6829","relative":"#6829","full":"gitlab-com/gl-infra/reliability#6829"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":63,"epic":{"id":7472,"iid":63,"title":"Move writes from NFS (shared01) to object storage - 85%","url":"/groups/gitlab-com/gl-infra/-/epics/63","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21535555,"iid":6828,"project_id":1304532,"title":"Ensure live traces is working properly on production","description":"Related to https://gitlab.com/gitlab-org/gitlab-ce/issues/51496","state":"closed","created_at":"2019-06-03T17:26:41.961Z","updated_at":"2020-03-16T13:10:58.066Z","closed_at":"2020-03-16T09:25:54.548Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["auto updated"],"milestone":{"id":881177,"iid":27,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Move writes from NFS (shared01) to object storage","description":"","state":"closed","created_at":"2019-05-21T07:00:19.518Z","updated_at":"2019-10-09T16:21:46.872Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/27"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6828","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6828","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6828/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6828/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6828","relative":"#6828","full":"gitlab-com/gl-infra/reliability#6828"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":63,"epic":{"id":7472,"iid":63,"title":"Move writes from NFS (shared01) to object storage - 85%","url":"/groups/gitlab-com/gl-infra/-/epics/63","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21535292,"iid":6827,"project_id":1304532,"title":"Allow temporary personal snippet uploads to be uploaded to object storage","description":"This is a sort-of meta issue as the main work will be done in gitlab-ce. I'll keep this issue updated with the progress.","state":"closed","created_at":"2019-06-03T17:12:42.954Z","updated_at":"2019-07-03T11:29:44.063Z","closed_at":"2019-07-03T10:57:12.034Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["auto updated"],"milestone":{"id":881177,"iid":27,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Move writes from NFS (shared01) to object storage","description":"","state":"closed","created_at":"2019-05-21T07:00:19.518Z","updated_at":"2019-10-09T16:21:46.872Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/27"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6827","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6827","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6827/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6827/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6827","relative":"#6827","full":"gitlab-com/gl-infra/reliability#6827"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":63,"epic":{"id":7472,"iid":63,"title":"Move writes from NFS (shared01) to object storage - 85%","url":"/groups/gitlab-com/gl-infra/-/epics/63","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21531642,"iid":6822,"project_id":1304532,"title":"k8s-workloads IAM service account needs higher level permissions on clusters","description":"As noted in this job, https://ops.gitlab.net/gitlab-com/gl-infra/k8s-workloads/gitlab-com/-/jobs/517681 the IAM service account k8s-workloads needs the ability to create Cluster Role bindings.  We should create the necessary role/role binding for this user and restrict it to the namespace he'll operate on.  Currently that is ONLY the `gitlab` namespace.\n\n/cc @gitlab-org/delivery \n/cc @gitlab-com/gl-infra","state":"closed","created_at":"2019-06-03T14:50:30.559Z","updated_at":"2019-09-25T14:38:09.718Z","closed_at":"2019-06-04T12:25:53.492Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["kubernetes","team::Delivery"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6822","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6822","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6822/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6822/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6822","relative":"#6822","full":"gitlab-com/gl-infra/reliability#6822"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21489189,"iid":6811,"project_id":1304532,"title":"Split terraform environments","description":"Our current repository structure for terraform leverages symlinks to reference shared code from multiple environments. This is great for keeping our code DRY, but there are frequently occasions when we need to deploy code to individual environments with follow-on deployments to other environments at some point in the future (testing new changes in staging, for example). With all environments referencing the same files, there is no way to make those changes in a single environment without requiring the same changes be applied to all other environments, holding up deployments to all other environments, requiring only targeted applies (which brings a host of other issues), or allowing configurations to drift over time.\n\nAs an initial step towards resolving this and enabling further work toward automated deployments, we will duplicate the current `main.tf` file in each environment referencing the shared assets via symlink, then remove the symlinks. Likewise, any shared `variables.tf` content will be copied/merged into each environment's `variables.tf` file, and the symlinks removed/cleaned up.","state":"closed","created_at":"2019-05-31T22:56:10.546Z","updated_at":"2019-12-06T21:43:57.939Z","closed_at":"2019-06-25T22:17:28.636Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["team::Reliability","terraform"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6811","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6811","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6811/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6811/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6811","relative":"#6811","full":"gitlab-com/gl-infra/reliability#6811"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":68,"epic":{"id":7622,"iid":68,"title":"Terraform Runs are not clean in any environment","url":"/groups/gitlab-com/gl-infra/-/epics/68","group_id":1112072,"human_readable_end_date":"Sep 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21489151,"iid":6810,"project_id":1304532,"title":"Automate `tf plan` for all environments","description":"As a next step toward automated Terraform deployments, we need to update the `.gitlab-ci.yml` to automatically run `tf plan` for all environments. The jobs should be conditional based on changes to the relevant portions of the repository for that job's respective environment.","state":"closed","created_at":"2019-05-31T22:50:31.327Z","updated_at":"2019-12-06T21:43:57.710Z","closed_at":"2019-08-23T02:38:47.515Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["team::Reliability","terraform"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6810","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6810","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6810/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6810/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6810","relative":"#6810","full":"gitlab-com/gl-infra/reliability#6810"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":68,"epic":{"id":7622,"iid":68,"title":"Terraform Runs are not clean in any environment","url":"/groups/gitlab-com/gl-infra/-/epics/68","group_id":1112072,"human_readable_end_date":"Sep 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21482307,"iid":6807,"project_id":1304532,"title":"Own GCP Project for Geo Team","description":"The Geo Team would like to have their own GCP project to use instead of gitlab-internal. This will help us manage members and permissions and help us keep track of the resources that we are using. \n\nWould the Infrastructure team be able to create this for us?","state":"closed","created_at":"2019-05-31T15:57:23.360Z","updated_at":"2021-06-24T08:10:13.393Z","closed_at":"2019-06-18T23:16:04.789Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Geo","auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":7,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6807","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6807","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6807/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6807/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6807","relative":"#6807","full":"gitlab-com/gl-infra/reliability#6807"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]