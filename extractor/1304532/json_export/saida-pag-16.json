[{"id":14963419,"iid":5295,"project_id":1304532,"title":"Move Alliances project from GitLab.org to GitLab.com group","description":"","state":"closed","created_at":"2018-10-15T16:04:17.252Z","updated_at":"2018-10-19T22:33:00.865Z","closed_at":"2018-10-16T14:15:35.564Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["oncall","toil","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":527558,"username":"eliran.mesika","name":"Eliran Mesika","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/527558/avatar.png","web_url":"https://gitlab.com/eliran.mesika"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5295","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5295","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5295/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5295/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5295","relative":"#5295","full":"gitlab-com/gl-infra/reliability#5295"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14961158,"iid":5293,"project_id":1304532,"title":"Upgrade to haproxy v1.8.x","description":"We are running haproxy 1.6.3 which is goes allll the way back to 2015.\nIn order to support TLS1.3 and probably some other things we should consider upgrading.\nSuggest we role this out on staging and then canary first. I don't believe there will be any problems but @northrup may know better.\n\nPutting in the next next milestone for scheduling consideration.","state":"closed","created_at":"2018-10-15T14:49:16.464Z","updated_at":"2019-12-06T21:46:57.775Z","closed_at":"2019-05-21T18:23:12.217Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Service::HAProxy","TechnicalDebt","corrective action","priority::1","team::Reliability"],"milestone":{"id":868016,"iid":20,"group_id":1112072,"title":"CI/CD \u0026 Enablement Reliability Engineering May 2019","description":"Tracking asks for CI/CD and Enablement of Reliability teams in May","state":"closed","created_at":"2019-05-07T16:51:19.186Z","updated_at":"2019-06-11T13:53:04.137Z","due_date":"2019-05-31","start_date":"2019-05-05","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/20"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":17,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5293","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5293","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5293/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5293/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5293","relative":"#5293","full":"gitlab-com/gl-infra/reliability#5293"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14960184,"iid":5292,"project_id":1304532,"title":"AWS, DO access for @ssichak, @acarella and @estrike","description":"Our two new Security Operations engineers need read-only access to the AWS and DO production accounts. The engineers' handles are:\n* @ssichak \n* @acarella\n* @estrike ","state":"closed","created_at":"2018-10-15T14:12:24.933Z","updated_at":"2018-10-22T18:52:27.511Z","closed_at":"2018-10-22T18:52:27.493Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["oncall","requires production access","toil","unblocks others","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":2541946,"username":"jurbanc","name":"Jan Urbanc","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2541946/avatar.png","web_url":"https://gitlab.com/jurbanc"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5292","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5292","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5292/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5292/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5292","relative":"#5292","full":"gitlab-com/gl-infra/reliability#5292"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14959799,"iid":5291,"project_id":1304532,"title":"Access to create a project on our Google API","description":"I'm currently working to deploy a tool that would link our SFDC instance with Google Sheets. This would make it much easier for our reps to mass update their opportunities. \n\nOne of the steps of the installation/setup is to create a custom [Google API Project](https://appexchange.salesforce.com/servlet/servlet.FileDownload?file=00P3A00000XbZCaUAN) - Page 12 of the install instructions. \n\nI would need access to create a project and edit that project within our instance. I also may have to do this twice (once for an installation and once for a production installation) so I'm not sure if that affects the permission set I would need. I could always update the project once it's created though","state":"closed","created_at":"2018-10-15T13:57:04.183Z","updated_at":"2020-03-17T17:49:45.747Z","closed_at":"2018-10-16T14:53:00.358Z","closed_by":{"id":2155453,"username":"msnow1","name":"Michael Snow","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2155453/avatar.png","web_url":"https://gitlab.com/msnow1"},"labels":["SalesSystems","access request","oncall","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[],"author":{"id":2155453,"username":"msnow1","name":"Michael Snow","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2155453/avatar.png","web_url":"https://gitlab.com/msnow1"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5291","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5291","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5291/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5291/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5291","relative":"#5291","full":"gitlab-com/gl-infra/reliability#5291"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14957229,"iid":5289,"project_id":1304532,"title":"reboot api, git, sidekiq and web fleet","description":"In order to pick up the latest kernel we should do a coordinated reboot of the fleet. This can be done in a rolling fashion, one or two nodes at a time making sure we drain from the lb first.\n\nThis is a followup to https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4668","state":"closed","created_at":"2018-10-15T12:41:34.748Z","updated_at":"2019-07-08T20:01:54.252Z","closed_at":"2018-12-14T16:33:26.081Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["auto updated","moved 1","newhire","priority::2","toil"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5289","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5289","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5289/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5289/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5289","relative":"#5289","full":"gitlab-com/gl-infra/reliability#5289"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14947093,"iid":5287,"project_id":1304532,"title":"Upgrade to Grafana v5.3","description":"There are some nice features, most interestingly built-in support for stackdriver.\nhttp://docs.grafana.org/guides/whats-new-in-v5-3/\n\nPutting in the next milestone for scheduling consideration.\ncc @dawsmith","state":"closed","created_at":"2018-10-15T07:29:14.488Z","updated_at":"2019-01-10T14:52:16.316Z","closed_at":"2019-01-10T14:52:16.296Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability-reliability","TechnicalDebt"],"milestone":{"id":653500,"iid":50,"project_id":1304532,"title":"Backlog 1","description":"Placeholder milestone to serve as a backlog for upcoming milestones","state":"closed","created_at":"2018-09-20T14:18:27.841Z","updated_at":"2019-02-11T19:25:00.446Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/50"},"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5287","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5287","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5287/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5287/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5287","relative":"#5287","full":"gitlab-com/gl-infra/reliability#5287"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14936975,"iid":5286,"project_id":1304532,"title":"301 Redirects for Comparison Pages","description":"We'd like to move `/comparison` to `/devops-tools` \n\nThis will require 217+ redirects in order to route existing pages to new urls. \n\nHere is a [spreadsheet of the required redirects with the source URL and the desired: https://docs.google.com/spreadsheets/d/17cU2VUlIIaw9LEU1VnPuNrA2uBos3UAD8CItZP9ESzo/edit#gid=0\n\n### Blocking work \n\nBefore we put redirects in place: \n\nhttps://gitlab.com/gitlab-com/www-gitlab-com/issues/3093 and https://gitlab.com/gitlab-com/www-gitlab-com/issues/3094 should be done first\n\n### WARNINGS\n\nNOTE: Not all URLs are a 1:1 swap of s/comparison/devops-tools. See the [redirect spreadsheet](https://docs.google.com/spreadsheets/d/17cU2VUlIIaw9LEU1VnPuNrA2uBos3UAD8CItZP9ESzo/edit#gid=0) for the correct urls.\n\nNOTE: Any additional comparison pages that are created between now and the 301s going live will be need to added to the 301 redirect spreadsheet.  \n\nNOTE: This the timing of this merge will need to be coordinated with the corresponding www-gitlab-com merge https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/15469. \n\n- If 301 redirects merge too early, then web visitors will be sent to 404 pages that don't exist yet \n- If 301 redirects merge too late, then any existing links and google juice will go to 404 pages\n\ncc @sytses @kuthiala @dangordon ","state":"closed","created_at":"2018-10-15T05:11:40.250Z","updated_at":"2018-10-25T15:12:16.242Z","closed_at":"2018-10-17T16:35:24.056Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["oncall","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":1512223,"username":"williamchia","name":"William Chia","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1512223/avatar.png","web_url":"https://gitlab.com/williamchia"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5286","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5286","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5286/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5286/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5286","relative":"#5286","full":"gitlab-com/gl-infra/reliability#5286"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14907075,"iid":5285,"project_id":1304532,"title":"[Design Document] Ephemeral Environments","description":"This document describes using Ephemeral Environments to provide a location to test infrastructure and application components, and make it easier to manage GitLab.com\n\nThe document can be reviewed at: https://add-ephemeral-environments-design.about.gitlab.com/handbook/engineering/infrastructure/design/201810_environments.html\n\nThe merge request is at https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/15450","state":"closed","created_at":"2018-10-13T00:03:05.748Z","updated_at":"2021-06-24T08:09:27.566Z","closed_at":"2020-04-01T21:21:00.602Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Design Document","auto updated","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5285","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":15,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5285","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5285/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5285/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5285","relative":"#5285","full":"gitlab-com/gl-infra/reliability#5285"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":26,"epic":{"id":2761,"iid":26,"title":"Grouping: Ephemeral Environments","url":"/groups/gitlab-com/gl-infra/-/epics/26","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14904892,"iid":5282,"project_id":1304532,"title":"Enable CloudTrail for AWS","description":"We should ensure that we have global trails enabled within CloudTrail for AWS API audit logging\n\nThis may require creating/configuring a new S3 bucket for the CloudTrail logs (if an appropriate bucket doesn't already exist), and [creating a default trail](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-create-a-trail-using-the-console-first-time.html#creating-a-trail-in-the-console); for this default trail, we want to ensure that it is applied to all regions (step 5).","state":"closed","created_at":"2018-10-12T20:20:58.475Z","updated_at":"2019-08-15T21:24:50.184Z","closed_at":"2018-11-06T23:56:39.649Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Observability-reliability","logging","priority::1","security","severity::2"],"milestone":{"id":668260,"iid":54,"project_id":1304532,"title":"2018-11-17 Completed","description":"","state":"closed","created_at":"2018-10-06T19:10:46.236Z","updated_at":"2018-11-17T17:49:37.353Z","due_date":"2018-11-17","start_date":"2018-11-04","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/54"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5282","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5282","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5282/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5282/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5282","relative":"#5282","full":"gitlab-com/gl-infra/reliability#5282"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14893756,"iid":5278,"project_id":1304532,"title":"HTTP targets missing TLS upgrade","description":"There are a few instances of HTTP endpoints not doing a redirect to https:\n\n* [x] `http://contributors.gitlab.com`\n* [x] `http://dashboards.gitlab.com`\n* [x] `http://dashboards.gitlab.net`\n* [x] `http://gitlab-examples.gitlab.io`\n* [x] `http://gitlabhosted.com`\n* [x] `http://gitlabhq.com`\n* [x] `http://log.gitlap.com`\n* [x] `http://pages.gitlab.io`\n* [x] `http://performance.gitlab.net`","state":"closed","created_at":"2018-10-12T12:16:15.232Z","updated_at":"2019-07-08T20:01:54.029Z","closed_at":"2018-10-22T15:49:55.798Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["moved 1","priority::2","security","unscheduled"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5278","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":9},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5278","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5278/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5278/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5278","relative":"#5278","full":"gitlab-com/gl-infra/reliability#5278"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14884201,"iid":5276,"project_id":1304532,"title":"[Design Document] Git Workflow for CI/CD","description":"This document describes a Git Workflow to facilitate using CI/CD to deploy infrastructure and application components, and make it easier to manage GitLab.com\r\n\r\nTo summarize, the standard [GitLab flow](https://docs.gitlab.com/ee/workflow/gitlab_flow.html) workflow is not the desired model for managing GitLab.com and related resources. This document discusses how we can use a common git workflow with GitLab's CI/CD tool set to manage all GitLab.com resources (Terraform, chef, Kubernetes, Monitoring, Deployments, etc). \r\n\r\nThe document can be reviewed at https://add-infra-git-workflow-design.about.gitlab.com/handbook/engineering/infrastructure/design/201810_git_workflow.html\r\n\r\nThe initial merge request is here: https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/15393/diffs\r\n\r\nIt should should be considered in parallel with [Dogfooding CI/CD](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5231) #5231","state":"closed","created_at":"2018-10-12T01:28:25.220Z","updated_at":"2019-02-05T20:25:12.177Z","closed_at":"2019-02-05T19:43:06.995Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Design Document"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5276","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5276","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5276/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5276/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5276","relative":"#5276","full":"gitlab-com/gl-infra/reliability#5276"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14865964,"iid":5273,"project_id":1304532,"title":"Renewal of 4 TLS certificates","description":"On November 7th, 2018 we have 4 TLS certificates expiring:\n\n* `*.helm-charts.win`\n* `*.k8s-ft.win`\n* `*.cloud-native.win`\n* `*.separate-containers.party`\n\nThese certificates are used for GitLab Charts Review Apps as well as part of development envs for Distribution team. The current certificates are stored in the `Cloud Native` vault, would be great to replace them there.\n\nAC - see if we can get these managed by sslmate too for automating renewals\n","state":"closed","created_at":"2018-10-11T16:05:42.647Z","updated_at":"2018-11-01T15:25:35.003Z","closed_at":"2018-10-25T14:50:34.719Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["priority::1","priority::2","toil"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":116,"username":"marin","name":"Marin Jankovski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5154f0b0eda3f798c8a254962d57192f?s=80\u0026d=identicon","web_url":"https://gitlab.com/marin"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-11-06","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5273","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5273","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5273/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5273/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5273","relative":"#5273","full":"gitlab-com/gl-infra/reliability#5273"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14860691,"iid":5271,"project_id":1304532,"title":"TLS: certificate for h1.sec.gitlab.net","description":"Please register a TLS certificate for `h1.sec.gitlab.net`. We're going to run a web application on that host we would like to secure.","state":"closed","created_at":"2018-10-11T14:52:31.093Z","updated_at":"2018-11-01T15:29:13.370Z","closed_at":"2018-10-25T17:20:56.079Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["security","toil"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":2712651,"username":"adietrich","name":"Alexander Dietrich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2712651/avatar.png","web_url":"https://gitlab.com/adietrich"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5271","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5271","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5271/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5271/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5271","relative":"#5271","full":"gitlab-com/gl-infra/reliability#5271"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14857043,"iid":5267,"project_id":1304532,"title":"forum.gitlab.com - Transition Backups to Cloud Storage","description":"### Plan of Action\nThe Discourse forum engine has the ability to use AWS S3 as a backup target instead of local disk for it's nightly backups.  We should:\n\n- [x] Create an AWS S3 bucket for forum.gitlab.com backups\n- [x] Configure forum.gitlab.com in the admin interface to use the S3 bucket\n- [x] Verify that backups are being written to the bucket\n\n---\n### Original Issue Description\nThe forum service has it's own backup process, ownership of this service is lacking and the ability to restore at any given point is not documented.  Backups are stored on the disk of the host itself.  We'll want to probably ship those offsite for cold storage in the case of disaster recovery.","state":"closed","created_at":"2018-10-11T13:35:19.546Z","updated_at":"2020-03-13T23:09:26.226Z","closed_at":"2020-03-13T22:05:48.615Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","backup","corrective action","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5267","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5267","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5267/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5267/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5267","relative":"#5267","full":"gitlab-com/gl-infra/reliability#5267"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14856898,"iid":5266,"project_id":1304532,"title":"Runbooks and monitoring for forum.gitlab.com","description":"With #8202 underway, this issue gains specificity as an ultimate input to a corresponding production readiness review under gitlab-com/gl-infra/readiness\u003e for migrating/launching the service in k8s on GKE; that work will incur corresponding changes and requirements to the specifics of how we monitor services in k8s, metrics available, norms established for managing logs, etc.\n\nThis issue now becomes focused on authoring the initial set of runbooks and updating relevant architecture pages in the handbook to properly and comprehensively document the infrastructure for the forum service.\n\nOriginal description\n```\nWe do not have appropriate monitoring of the forum service.\n\nThe only alerts we get are when someone notifies us about backups failing: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5214\n\nOr when pingdom tells us it's down: https://gitlab.slack.com/archives/C101F3796/p1539262868000100\n\nWe don't have our standard set of prometheus metrics being collected on this box.  We are unable to proactively handle potential situations that arise.\n\nUse this issue to discuss how we can better manage this box.\n```","state":"closed","created_at":"2018-10-11T13:32:30.120Z","updated_at":"2019-12-09T21:00:13.673Z","closed_at":"2019-12-05T17:48:21.073Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Observability","auto updated","corrective action","newhire","priority::3","team::Reliability","workflow-infra::Ready"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":2623969,"username":"cody","name":"Cody West","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ae09c0cf2f3c328cfb96554a2fedd2ea?s=80\u0026d=identicon","web_url":"https://gitlab.com/cody"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5266","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5266","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5266/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5266/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5266","relative":"#5266","full":"gitlab-com/gl-infra/reliability#5266"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":101,"epic":{"id":13702,"iid":101,"title":"forum.gitlab.com GKE migration","url":"/groups/gitlab-com/gl-infra/-/epics/101","group_id":1112072},"iteration":null,"health_status":null},{"id":14841496,"iid":5262,"project_id":1304532,"title":"Review and setup first iteration of Firewall changes with Security team in Staging","description":"This comment has a proposed set of rules for review https://gitlab.com/gitlab-com/security-accountability/issues/11#note_107604322\n\nAfter review, create a production issue with the rules to be changed and make the changes in staging.","state":"closed","created_at":"2018-10-10T23:08:51.154Z","updated_at":"2019-07-08T20:03:36.893Z","closed_at":"2018-11-07T14:38:36.146Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["auto updated","moved 2","priority::2","priority::3","security"],"milestone":{"id":668260,"iid":54,"project_id":1304532,"title":"2018-11-17 Completed","description":"","state":"closed","created_at":"2018-10-06T19:10:46.236Z","updated_at":"2018-11-17T17:49:37.353Z","due_date":"2018-11-17","start_date":"2018-11-04","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/54"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5262","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5262","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5262/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5262/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5262","relative":"#5262","full":"gitlab-com/gl-infra/reliability#5262"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14834812,"iid":5258,"project_id":1304532,"title":"Fastly potentially serving incorrect content to some users","description":"## Discovery\n\nAn example URL provided to me for testing this:\nhttps://about.gitlab.com/direction/secure/\n\nA few slack conversations:\n* https://gitlab.slack.com/archives/C101F3796/p1539191863000100 (unthreaded)\n* https://gitlab.slack.com/conversation/C9WFMSDFF/p1539167836000100 (thread)\n\nSome team members are reporting different versions of the site multiple hours after a successful deploy.  One user is reporting that he see's what's been deployed on their mobile, while an old version is still showing on their workstation :unamused: \n\nUsing Fastly's Check Cache feature, I've discovered 2 endpoints that have differing versions of the same page using the example above.  Those in question are:\n* `cache-tyo19931`\n* `cache-nrt6138`\n\nI've opened a support ticket with Fastly about this.  I hesitate to purge cache in case they are able to perform some troubleshooting.\n\nAs an FYI the backup time of the cache is configured to 1 hour.  Being that our deploy completed over 3 hours prior, Fastly really ought to have the latest version of our site.\n\n## Support\nFastly Support ticket: http://fastly.zendesk.com/hc/requests/98067","state":"closed","created_at":"2018-10-10T18:00:09.979Z","updated_at":"2018-10-22T11:47:14.671Z","closed_at":"2018-10-10T22:55:29.342Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5258","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5258","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5258/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5258/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5258","relative":"#5258","full":"gitlab-com/gl-infra/reliability#5258"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14828768,"iid":5255,"project_id":1304532,"title":"Blog post about DR replicas","description":"See https://gitlab.com/gitlab-com/www-gitlab-com/issues/3222. This issue only tracks work for the milestone.","state":"closed","created_at":"2018-10-10T15:49:46.173Z","updated_at":"2020-07-14T23:06:52.388Z","closed_at":"2018-11-29T15:00:58.925Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","Infra-Sharing","ToBacklog","auto updated"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":8,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5255","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5255","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5255/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5255/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5255","relative":"#5255","full":"gitlab-com/gl-infra/reliability#5255"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14816677,"iid":5254,"project_id":1304532,"title":"Onboarding architectural program","description":"To improve onboarding for new SREs we should give https://about.gitlab.com/handbook/engineering/infrastructure/production-onboarding/ a facelift. There are some good pointers there already but there is a lot of detail lacking.\r\n\r\nThis issue will be used to collect some thoughts, before a handbook MR.\r\n\r\nI would also like to expand onboarding to include some more general architecture overviews. This would include tracing different types of requests through the gitlab.com architecture.\r\n\r\nSince this page serves as a documentation index that is geared towards new-hires the sections could be fleshed out a bit. I don't see this as a replacement for the onboarding template, but a way to augment it with more information that can also be useful to non SREs so they can see what the typical day-to-day is for the team.\r\n\r\n\r\n## oncall overview\r\n\r\n## Where to find things\r\n\r\n* fleet information\r\n* logs, what are we storing and where to find them\r\n* monitoring and alert rules\r\n* dashboards\r\n* rails and database access\r\n\r\n## terraform\r\n\r\n* environments and state files\r\n* shared configuration overview, variables, etc.\r\n\r\n## chef\r\n\r\n* updating a cookbook, how much is automated, cookbook versions\r\n* updating a node attribute\r\n* updating a secret\r\n\r\n## Architecture overview of different types of requests\r\n\r\n* https get request to gitlab.com\r\n* public api\r\n* https git\r\n* ssh git\r\n* repository overview\r\n* pages request\r\n* registry\r\n* download project zip file\r\n* download project archive\r\n* request raw file\r\n* cicd job\r\n\r\n## releases\r\n\r\nDistilled version of how releases work and how deployments work with chatops?","state":"closed","created_at":"2018-10-10T09:04:29.463Z","updated_at":"2019-07-08T20:01:53.535Z","closed_at":"2018-11-30T14:41:35.684Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["auto updated","priority::2"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5254","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5254","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5254/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5254/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5254","relative":"#5254","full":"gitlab-com/gl-infra/reliability#5254"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14816145,"iid":5253,"project_id":1304532,"title":"evaluate stickiness settings on haproxy backends","description":"Currently the haproxy backend configuration is such that every pool of servers is round-robin with the exception of websockets, ssh and pages.\n\n\n* `websockets`\n```\n    balance roundrobin\n    cookie _gitlab_session prefix nocache\n```\n* `ssh`\n```\n    balance source\n    hash-type consistent\n```\n* `pages_http` and `pages_https`\n```\n    balance source\n    hash-type consistent\n```\nThe other backends:\n\n* `api`: all of the `api-xx` nodes\n* `https_git`: all of the `git-xx` nodes\n* `web`: all of the `web-xx` nodes\n* `canary_web`: all of the `web-cny-xx` nodes\n* `registry`: all of the `registry-xx` nodes\n\nUse roundrobin load balancing. As now we are starting to put some production traffic on canary we should probably consider making requests sticky so that clients do not potentially see multiple versions of the applications on a single page load.\n\nFor `web` and `canary_web` this would mean modifying our load balancing algorithm to use the session cookie:\n\n```\n    balance roundrobin\n    cookie _gitlab_session prefix nocache\n```\n\nFor the `api` this would mean modifying our load balancing algorithm to use the source ip:\n```\n    balance source\n    hash-type consistent\n```\n\nbut I wonder how smart this will be since most of our traffic is coming from the CICD. Until we are able to separate that traffic we should probably leave it roundrobin.\n\nFor the `registry` I'm not sure whether it matters much but we could also use source ip here as well:\n\n```\n    balance source\n    hash-type consistent\n```","state":"closed","created_at":"2018-10-10T08:42:44.122Z","updated_at":"2022-08-02T06:07:11.298Z","closed_at":"2022-08-02T06:07:11.284Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Service::API","ToBacklog","priority::3"],"milestone":{"id":653500,"iid":50,"project_id":1304532,"title":"Backlog 1","description":"Placeholder milestone to serve as a backlog for upcoming milestones","state":"closed","created_at":"2018-09-20T14:18:27.841Z","updated_at":"2019-02-11T19:25:00.446Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/50"},"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5253","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5253","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5253/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5253/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5253","relative":"#5253","full":"gitlab-com/gl-infra/reliability#5253"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14792324,"iid":5248,"project_id":1304532,"title":"Users not receiving emails","description":"We have received a couple of requests related to service desk not sending emails or users are not receiving emails.\n\nTicket: https://gitlab.zendesk.com/agent/tickets/105220\n\nhttps://gitlab.com/gitlab-com/support-forum/issues/3984\n\nFew of the discussion: https://gitlab.slack.com/archives/C4XFU81LG/p1539078943000100 (internal)\n\nCan we please check and investigate this.\n\ncc// @ahmadsherif","state":"closed","created_at":"2018-10-09T10:57:24.581Z","updated_at":"2020-05-18T17:26:20.878Z","closed_at":"2018-10-10T17:18:55.269Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["oncall","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":581582,"username":"arihantar","name":"Arihant","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=80\u0026d=identicon","web_url":"https://gitlab.com/arihantar"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5248","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5248","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5248/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5248/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5248","relative":"#5248","full":"gitlab-com/gl-infra/reliability#5248"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14788640,"iid":5246,"project_id":1304532,"title":"Request to update forum.gitlab.com","description":"The forum needs manual update. SSH into the node and:\n\n```sh\ncd /var/discourse\ngit pull origin master\n./launcher rebuild app\n```\n\nI created a runbook at https://gitlab.com/gitlab-com/runbooks/merge_requests/776/diffs.","state":"closed","created_at":"2018-10-09T08:29:41.399Z","updated_at":"2018-10-22T11:48:42.497Z","closed_at":"2018-10-11T13:25:54.898Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall","requires production access","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5246","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5246","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5246/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5246/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5246","relative":"#5246","full":"gitlab-com/gl-infra/reliability#5246"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14786753,"iid":5244,"project_id":1304532,"title":"Enable Git v2 over SSH on GitLab.com","description":"Now that https://gitlab.com/gitlab-org/gitlab-ce/issues/46555 will land in production soon (in the next RC) it will work for Git HTTP clients that request v2, but not for Git over SSH.\n\nIn order to enable v2 in production, we'll need to set the following in `sshd_config`:\n\n```\nAcceptEnv GIT_PROTOCOL\n```\n\nNow, this could have security considerations, such as https://serverfault.com/questions/427522/why-is-acceptenv-considered-insecure\n\nAnd from the man page of SSHD:\n\n```\nBe warned that some environment variables could be used to bypass restricted user environments. For this reason, care should be taken in the use of this directive. The default is not to accept any environment variables.\n```\n\nSo I think we need a security evaluation before enabling this, although given that it's restricted to `GIT_PROTOCOL` I didn't see a big concern in this particular situation (pinging @kathyw so this can be evaluated by Security)\n\nAlso, it could be that we could enable this directly in Omnibus (or a setting to be made) - @marin would this be possible? I've only found https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/docker/assets/sshd_config which is Docker related.\n\nA few facts about the Git protocol v2:\n\n- It's opt-in only, so clients (GitLab users) that support it (using Git `v2.18.0` onwards) need to explicitily pass a configuration to enable it.\n- Not all Git commands are on v2, some will still execute v1\n- `GIT_PROTOCOL` is only evaluated for us if the string contains `version=2`, everything else is ignored and won't be passed to `git`, defaulting to `v1`. \n\n@jramsay this means that without us enabling this SSH config, people using `Git v2` wouldn't be able to use v2 over SSH (will use v1 instead), but could use v2 over HTTP on GitLab.com. In the docs we could point users on how to enable it for on-premises, unless we decide to configure this in Omnibus directly.\n\nGit Protocol v2: https://github.com/git/git/blob/master/Documentation/technical/protocol-v2.txt\n\nMan page for SSHD: https://linux.die.net/man/5/sshd_config\n\ncc @jacobvosmaer\\-gitlab @DouweM","state":"closed","created_at":"2018-10-09T07:05:30.670Z","updated_at":"2019-12-26T16:22:18.414Z","closed_at":"2018-11-22T22:12:25.433Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Service::Git","auto updated","priority::2"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":273486,"username":"jameslopez","name":"James Lopez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/273486/avatar.png","web_url":"https://gitlab.com/jameslopez"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":16,"merge_requests_count":0,"upvotes":6,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5244","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5244","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5244/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5244/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5244","relative":"#5244","full":"gitlab-com/gl-infra/reliability#5244"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14786669,"iid":5243,"project_id":1304532,"title":"Setup Geo with ops.gitlab.net instance","description":"Right now we don't have a regular deployment of Geo until https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4741. Could we do something simpler and just set up a single Geo instance for the ops instance and deploy regularly to it?\n\nThat way we can:\n\n1. Ensure database migrations work\n2. Ensure existing functionality still works\n3. Test new functionality","state":"closed","created_at":"2018-10-09T06:59:33.873Z","updated_at":"2020-01-31T00:11:21.727Z","closed_at":"2018-10-25T14:34:46.364Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Geo","unscheduled"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":26,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5243","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5243","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5243/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5243/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5243","relative":"#5243","full":"gitlab-com/gl-infra/reliability#5243"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14780650,"iid":5241,"project_id":1304532,"title":"Rails Console Access for wvandenberg","description":"Hello Team, \n\nI need Rails console access to allow me to very ownership of gitlab pages and alike.  Can anyone assist in granting me access?\n\nThanks! \n\n~oncall ~\"access request\"","state":"closed","created_at":"2018-10-08T20:36:01.904Z","updated_at":"2018-10-15T14:08:29.237Z","closed_at":"2018-10-15T14:08:25.442Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["access request","oncall","toil","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2294209,"username":"wvandenberg","name":"Westley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2294209/avatar.png","web_url":"https://gitlab.com/wvandenberg"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5241","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5241","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5241/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5241/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5241","relative":"#5241","full":"gitlab-com/gl-infra/reliability#5241"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14768974,"iid":5240,"project_id":1304532,"title":"Unable to unarchive projects","description":"A user is unable to unarchive these projects\n\n```\nhttps://gitlab.com/blade-group/dev/clients/boxes/audio-switcher \nhttps://gitlab.com/blade-group/dev/clients/boxes/electron\n```\n\nI believe this has something to do with our GCP migration. I was unable to reproduce this on my projects.\n\nhttps://gitlab.zendesk.com/agent/tickets/105222\n\ncc// @jarv","state":"closed","created_at":"2018-10-08T13:20:04.756Z","updated_at":"2018-10-19T22:36:14.160Z","closed_at":"2018-10-08T13:26:33.651Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["oncall","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":581582,"username":"arihantar","name":"Arihant","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=80\u0026d=identicon","web_url":"https://gitlab.com/arihantar"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5240","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5240","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5240/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5240/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5240","relative":"#5240","full":"gitlab-com/gl-infra/reliability#5240"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14760740,"iid":5238,"project_id":1304532,"title":"Database Reviews","description":"New issue for the current milestone that contains pending reviews from the last.\n\n* [x] https://dev.gitlab.org/gitlab/gitlabhq/merge_requests/2498/diffs\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7341#note_106524072\n* [x] https://dev.gitlab.org/gitlab/gitlabhq/merge_requests/2528#note_136727\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21719#note_104392420\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22014\n* [x] Thursday https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7578#note_106070226\n* [x] Thursday https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7806?commit_id=5d6177e91a8159dded6c5f62b5bd40a4165fe687#note_108912846\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/issues/6070#note_106815144\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22143#note_106796618\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/6947\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22013#note_106869076\n* [x] https://dev.gitlab.org/gitlab/gitlab-ee/merge_requests/678\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22226\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21021\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/issues/7955#note_109956059 together with https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7990#deca3eb05754841e761d010d8941933fd19f2aef_0_26\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22430","state":"closed","created_at":"2018-10-08T08:00:08.905Z","updated_at":"2018-10-19T22:33:53.944Z","closed_at":"2018-10-19T10:29:07.261Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","toil","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5238","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":16,"completed_count":16},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5238","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5238/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5238/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5238","relative":"#5238","full":"gitlab-com/gl-infra/reliability#5238"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14746994,"iid":5236,"project_id":1304532,"title":"Create a critical PD alert for HAProxy connection errors","description":"corrective action for https://gitlab.com/gitlab-com/gl-infra/production/issues/496\nAlert on https://dashboards.gitlab.com/d/ZOOh_aNik/haproxy?panelId=57\u0026fullscreen\u0026orgId=1\u0026from=now-7d\u0026to=now\u0026refresh=5m\u0026var-host=fe-07-lb-gprd.c.gitlab-production.internal\u0026var-port=9101\u0026var-backend=All\u0026var-frontend=All\u0026var-server=All\u0026var-code=All\u0026var-interval=30s as it is currently our best way to determine a malfunctioning backend server that is not accepting ssh but is passing the rails healthcheck.\n\nDiscussion about how to improve the healthcheck more generally in https://gitlab.com/gitlab-org/gitlab-shell/issues/166","state":"closed","created_at":"2018-10-07T09:26:00.103Z","updated_at":"2018-10-22T08:06:17.060Z","closed_at":"2018-10-08T11:42:18.779Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["corrective action","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5236","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5236","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5236/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5236/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5236","relative":"#5236","full":"gitlab-com/gl-infra/reliability#5236"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14715420,"iid":5234,"project_id":1304532,"title":"IAM policy gitlab-internal: For Configure team","description":"Similar to https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5233 I would like to request the same permissions for the following people:\n\n- [ ] mcabrera@gitlab.com\n- [ ] tkuah@gitlab.com\n- [ ] taurie@gitlab.com\n- [ ] mgreiling@gitlab.com\n- [ ] dgruesso@gitlab.com\n- [ ] jerasmus@gitlab.com\n\nThey require IAM permissions for `gitlab-internal-153318` project with role `roles/container.admin`.","state":"closed","created_at":"2018-10-05T11:54:22.838Z","updated_at":"2019-01-28T13:54:51.498Z","closed_at":"2018-10-08T14:59:34.257Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["access request","oncall","toil","unblocks others","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5234","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5234","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5234/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5234/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5234","relative":"#5234","full":"gitlab-com/gl-infra/reliability#5234"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14710648,"iid":5232,"project_id":1304532,"title":"canary.gitlab.com should use the corresponding backends for api/git traffic","description":"Our routing logic for canary is currently:\n\n```\nuse_backend canary_web if is_canary or is_canary_host\n```\n\nWhich means all requests to canary.gitlab.com or web requests that have the cookie set will go to the web fleet.\nIdeally public api and git-ssh/git-https should use the new canary git and api servers.","state":"closed","created_at":"2018-10-05T08:11:24.433Z","updated_at":"2018-10-15T10:45:22.248Z","closed_at":"2018-10-15T10:45:22.229Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":[],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5232","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5232","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5232/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5232/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5232","relative":"#5232","full":"gitlab-com/gl-infra/reliability#5232"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7,"epic":{"id":1056,"iid":7,"title":"Canary Deployment Testing","url":"/groups/gitlab-com/gl-infra/-/epics/7","group_id":1112072,"human_readable_end_date":"Oct 20, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14688316,"iid":5224,"project_id":1304532,"title":"Convert environment labels to server-side","description":"In order to improve metrics and alert routing and maintenance we should use Prometheus \"external labels\".\n\nExternal labels allow Prometheus to assign labels based on its view of the system.\n\nWe're currently [populating several labels](https://ops.gitlab.net/gitlab-cookbooks/chef-repo/blob/master/roles/gprd-infra-prometheus-server.json#L6-9).\n* `provider` (gcp/azure/etc)\n* `region` (us-east, etc)\n* `monitor` (default, app, etc)\n\nWe're currently overloading `monitor` with things like `gprd-default`.\n\nI propose we change this to add a new `env` label that contains the environment for the Prometheus server.\n\nThis will allow us to transition alert routing to the new labels.","state":"closed","created_at":"2018-10-04T11:46:31.950Z","updated_at":"2020-11-13T15:26:22.811Z","closed_at":"2020-05-14T06:38:14.381Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability","Service::Monitoring-Other","auto updated","workflow-infra::Triage"],"milestone":null,"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5224","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5224","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5224/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5224/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5224","relative":"#5224","full":"gitlab-com/gl-infra/reliability#5224"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14668026,"iid":5223,"project_id":1304532,"title":"Evaluate timed incremental rollout on hosting servers","description":"We're going to ship the delayed job feature https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21767 for AutoDevOps timed incremental rollout https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22023.\n\nWe're going to evaluate it works on our hosting servers with AutoDevOps timed incremental rollout mode.\n\n### Evaluation plan\n\n**dev.gitlab.org**\n\n- Enabled term: 8th, Oct. ~\n- Evaluation date: 8th, Oct.\n- [x] Wait for dev.gitlab.org daily sync\n- [x] Create a sample project with new AutoDevOps deployment strategy to make sure it's fully functional.\n- [x] Check health (metrics, logs and crash reports)\n\n**staging.gitlab.com**\n\n- Enabled term: 10th?, Oct. ~ (It depends on RM's plan)\n- Evaluation date: 10th, Oct.\n- [x] RC with the new code has been deployed\n- [x] Create a sample project with new AutoDevOps deployment strategy to make sure it's fully functional.\n- [x] Check health (metrics, logs and crash reports)\n\n**gitlab.com**\n\n- Enabled term: 10th?, Oct. ~ (It depends on RM's plan)\n- Evaluation date: 10th, Oct. ~ 10th, Nov.\n- [x] RC with the new code has been deployed\n- [x] Create a sample project with new AutoDevOps deployment strategy to make sure it's fully functional.\n- [x] Check health (metrics, logs and crash reports)\n\nNOTE: \n- This feature is behind the feature flag `ci_enable_scheduled_build`, but it's enabled **by default** (See https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21767#note_106332776)\n- This feature doesn't run unless users manually changed their deployment strategy in AutoDevOps. Presumably, after we published a release post of 11.4 at 22nd, Oct., users would try to use it, and the usage of the new sidekiq-workers will gradually increase so that the time we should keep eyes on server's health.\n\n### Check health (metrics, logs and crash reports)\n\n- Does the new worker `Ci::BuildScheduleWorker` run properly? This uses `pipeline_processing` namespace (priority: 5 (highest)).\n- Does not the new worker `Ci::BuildScheduleWorker` pressurize other workers in the same namespace?\n- Are there any stale delayed jobs? `Ci::Build.stale_schedule.count` should be zero.\n- Are there any crash reports related to this feature on Sentry?\n- StuckCIJobWorker should use Index Scan properly? (Ref: https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21767#note_106811708) (cc @abrandl)\n\n### Feature flag\n\nThe feature flag's name is `ci_enable_scheduled_build`. The new AutoDevOps deployment strategy - Timed incremental rollout is based on the [delayed job](https://gitlab.com/gitlab-org/gitlab-ce/issues/51352) feature. By disabling `ci_enable_scheduled_build`, we can effectively revert the timed incremental rollout to manual incremental rollout (Also, stops new creation for delayed jobs)\n\n```\nFeature.enabled?('ci_enable_scheduled_build') # Check if it's enabled\nFeature.enable('ci_enable_scheduled_build') # Enable the feature\nFeature.disable('ci_enable_scheduled_build') # Disable the feature\n```\n\n/cc @nolith @winh @jlenny @erushton","state":"closed","created_at":"2018-10-04T01:44:44.578Z","updated_at":"2018-11-02T09:13:53.354Z","closed_at":"2018-11-01T08:34:09.888Z","closed_by":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"labels":["moved 1"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5223","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":9},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5223","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5223/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5223/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5223","relative":"#5223","full":"gitlab-com/gl-infra/reliability#5223"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14663527,"iid":5217,"project_id":1304532,"title":"Out of disk space errors (inodes?) in artifacts tmp directory","description":"Sentry error: https://sentry.gitlab.net/gitlab/gitlabcom/issues/530892\n\nAll the API servers are complaining about similar errors:\n\n```\nErrno::ENOSPC: No space left on device @ dir_s_mkdir - /var/opt/gitlab/gitlab-rails/shared/artifacts/tmp/cache/1538592524-29247-0008-8556\n```\n\nThe disk is only 23% full. I suspect we are out of inodes in that parent directory.","state":"closed","created_at":"2018-10-03T18:53:35.235Z","updated_at":"2021-01-11T15:20:20.767Z","closed_at":"2018-10-30T09:00:51.279Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["ci","moved 2","oncall","priority::1"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":39,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5217","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5217","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5217/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5217/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5217","relative":"#5217","full":"gitlab-com/gl-infra/reliability#5217"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14655002,"iid":5216,"project_id":1304532,"title":"Move two projects from /jamedjo to /gitlab-com group","description":"## What\n\nMove https://gitlab.com/jamedjo/team-quiz and https://gitlab.com/jamedjo/icebreakers to the `gitlab-com` group\n\n## Why\n\nThe [handbook says](https://about.gitlab.com/handbook/contracts/#approval-for-outside-projects) projects \"completed as part of the GitLab employment\" should be in a GitLab namespace, and I'd like to have the projects moved before announcing the gitlab-pages URLs\n\n## Why in infrastructure\n\nChanging group needs the Owner (project creator) to be a Maintainer in the target group. I thought I'd be able to get a maintainer to move it, but they wouldn't be the owner of the project. See https://gitlab.com/gitlab-org/gitlab-ce/issues/18423","state":"closed","created_at":"2018-10-03T12:32:42.886Z","updated_at":"2018-10-06T19:26:21.761Z","closed_at":"2018-10-03T23:03:31.826Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["oncall","toil","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5216","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5216","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5216/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5216/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5216","relative":"#5216","full":"gitlab-com/gl-infra/reliability#5216"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14653331,"iid":5215,"project_id":1304532,"title":"Rollout the Sidekiq Reliable fetcher","description":"We have an issue for 11.4 https://gitlab.com/gitlab-org/gitlab-ee/issues/7279. It's already implemented and is expected to be reviewed and merged for 11.4.\n\nBy default, it's disabled and we can enable it with a feature flag `gitlab_sidekiq_reliable_fetcher`. The state of this flag is only considered when we run the Sidekiq process. So we need to restart the Sidekiq process on some node to enable it gradually and to see how it goes.\n\nTo monitor the state of the Sidekiq we should check the Grafana dashboards in https://dashboards.gitlab.net\nand we can also see to the new \"Working\" tab in the admin area (Monitoring \u003e Background jobs).\n\nIf something goes wrong we have to disable the feature flag and restart the Sidekiq process.\n\nI'll also need some assistance from someone from the Production team","state":"closed","created_at":"2018-10-03T11:00:20.862Z","updated_at":"2019-09-11T12:13:46.740Z","closed_at":"2018-10-24T16:03:11.000Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["Geo","In dev","change","corrective action"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":59,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5215","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5215","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5215/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5215/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5215","relative":"#5215","full":"gitlab-com/gl-infra/reliability#5215"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14638385,"iid":5211,"project_id":1304532,"title":"Request: staging.gitlab.com access for aciciu","description":"Hi guys,\n\nI've tried using my gitlab.com account but it's not working. Do you mind creating an account for me in the staging environment, please?","state":"closed","created_at":"2018-10-02T18:02:03.375Z","updated_at":"2018-10-06T19:20:27.158Z","closed_at":"2018-10-04T04:47:21.225Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["access request","oncall","toil","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2328161,"username":"aciciu","name":"Alin Ciciu","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2328161/avatar.png","web_url":"https://gitlab.com/aciciu"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5211","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5211","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5211/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5211/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5211","relative":"#5211","full":"gitlab-com/gl-infra/reliability#5211"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14638204,"iid":5210,"project_id":1304532,"title":"Request: staging.gitlab.com access for tpresa","description":"My GitLab.com account does not work to log into staging.gitlab.com, so I'd like to request access to it.","state":"closed","created_at":"2018-10-02T17:49:16.945Z","updated_at":"2018-10-06T19:20:33.533Z","closed_at":"2018-10-04T04:43:22.510Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["access request","oncall","toil","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":1817621,"username":"tpresa","name":"Thiago Presa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1817621/avatar.png","web_url":"https://gitlab.com/tpresa"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5210","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5210","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5210/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5210/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5210","relative":"#5210","full":"gitlab-com/gl-infra/reliability#5210"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14632494,"iid":5209,"project_id":1304532,"title":"Database Reviews","description":"I keep track of pending database reviews as a list of MRs and check them off as I go. As discussed with @Finotto today, the idea is to create one issue \"Database Reviews\" per milestone and maintain a list of pending database reviews there. /cc @dawsmith \n\nThe issue will be assigned to @NikolayS and @abrandl . The idea is to react to pings on MRs and link the MR in this list. The goal is to distribute review work between the two of us and also communicate the amount of reviews we're doing.\n\nI tend to put duplicates on the list if I'm getting pinged repeatedly. Every ping-cycle means a distraction and for me it was worth tracking this.\n\nThis is my current list - let's use this issue to extend the list for this milestone and create a new issue next milestone:\n\n* [ ] ~Community https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21719#note_104392420\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21521#note_104568347\n* [x] ~\"Unblocking others\" Kamil https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7582\n* [x] ~\"Unblocking others\" https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21893#note_105140458\n* [x] ~\"Unblocking others\" https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21767#note_105406114\n* [x] ~Urgent ~\"Unblocking others\" https://dev.gitlab.org/gitlab/gitlabhq/merge_requests/2528#note_135915\n https://dev.gitlab.org/gitlab/gitlabhq/merge_requests/2528#note_136247 https://dev.gitlab.org/gitlab/gitlabhq/merge_requests/2528#note_136251\n* [x] gitlab-restore https://gitlab.com/gitlab-restore/postgres-gprd/merge_requests/19#note_105154860\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21893#note_105824379\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22055#note_105882003\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7738\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7386#note_105203938\n* [ ] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22014\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7433/diffs\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7493\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7779\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21893\n* [ ] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7578#note_106070226\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7757#note_106315671\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22080#note_106119664\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21767#note_106084358\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22041#note_106203774\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22008#note_106238381\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22013#note_106303012\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7341#note_106332416\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/4213#note_106489662\n* [ ] https://dev.gitlab.org/gitlab/gitlabhq/merge_requests/2528#note_136247\n* [ ] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22143#note_106796618\n* [ ] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/6947","state":"closed","created_at":"2018-10-02T15:21:50.992Z","updated_at":"2019-09-11T11:47:36.115Z","closed_at":"2018-10-08T07:59:11.269Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","toil"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5209","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":28,"completed_count":22},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5209","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5209/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5209/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5209","relative":"#5209","full":"gitlab-com/gl-infra/reliability#5209"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14630448,"iid":5207,"project_id":1304532,"title":"Create a new wildcard certificate and domain for `*.gitlab-ce-review.app`","description":"From the meeting we had today on addressing cleanup and scalability, the team would like to create a new cluster for CE in the review apps project.\n* Meeting notes: https://docs.google.com/document/d/1oLc4s02U_bNxx2UCO-dHw5C3swhNI8QCYpX6taNnSi8/edit#heading=h.nzenrwnechk2\n\nCurrently, we are using the one created in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4735 for both CE and EE.\n\nThis has proven to be a challenge with debugging and implementing cleanup/scale. \n\nWe would like to use 2 clusters so we have some degree of separation. The load from CE is a lot more than EE. The benefit of having 2 clusters:\n* Separation of stability, if the clean up of CE is unstable EE is not affected\n* Ease of debugging during our first phases of implementation.\n* Possibility of having a more aggressive clean up for CE (at least in the short term)\n\n/cc @marin @ibaum @rymai @ddavison \n\n@dawsmith if you can help us assign this to someone that would be much appreciated :pray: I set the weight to 2 similar to the request we had before (linked above)","state":"closed","created_at":"2018-10-02T14:19:45.343Z","updated_at":"2020-07-29T18:10:53.383Z","closed_at":"2018-10-03T11:23:47.443Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["unblocks others","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2097582,"username":"meks","name":"Mek Stittri","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2097582/avatar.png","web_url":"https://gitlab.com/meks"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5207","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5207","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5207/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5207/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5207","relative":"#5207","full":"gitlab-com/gl-infra/reliability#5207"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14621925,"iid":5204,"project_id":1304532,"title":"Redis cache failover can lead to data corruption","description":"Currently `SAVE` is disabled on the Redis cache instance. \n\nThis change has been in place since January 3rd 2018: https://dev.gitlab.org/cookbooks/chef-repo/commit/a60bdeded9fbd1cb295db501b4f4f18e27dabb54\n\nWhen sentinel detects a reboot, it may decide to wait for the original master to come back online rather than failing over to a secondary. We experienced this during \n Saturday's planned failover. It's mentioned in several Redis issues (see below) but the reasoning for this behaviour is not yet clear to me.\n\nWhen coupling this with our current setup, the following scenario may occur:\n\n1. Redis has a snapshot file in `dir` with an unspecified date.\n1. We reboot a Redis master\n1. Since we have `save \"\"`, Redis will shutdown without saving the snapshot (by design)\n1. Redis will restart. On start it will begin loading the RDB snapshot file. This file might be weeks old.\n1. Load complete, the slaves resync off the master, overwriting their \"current\" cache with an old, invalidated cache\n1. The application requests a cache item and is returned previously invalidated data. This data is then written to a persistent store (eg postgres) leading to further corruption.\n\nSee\n* https://github.com/antirez/redis/issues/1297\n* https://github.com/antirez/redis/issues/1281\n\ncc @jarv @dawsmith @Finotto","state":"closed","created_at":"2018-10-02T08:17:22.354Z","updated_at":"2021-11-03T14:08:52.732Z","closed_at":"2021-11-03T12:47:23.223Z","closed_by":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"labels":["Service::Redis","corrective action","moved 1","severity::3","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5204","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5204","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5204/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5204/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5204","relative":"#5204","full":"gitlab-com/gl-infra/reliability#5204"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"at_risk"},{"id":14615910,"iid":5201,"project_id":1304532,"title":"Tune threshold for sidekiq exception alerts","description":"We recently created a new alert for sidekiq exception count in #4651, but quickly noticed that we were seeing radically different volumes (~5x to ~15x higher) from one controller in particular, `RepositoryUpdateMirrorWorker`. After looking at https://sentry.gitlab.net/gitlab/gitlabcom/issues/217714/, it looks like the majority are for legitimate, albeit misconfigured jobs.\n\nFor an easy fix to make this alert more useful and cut down on the noise, we should implement a separate threshold for the `RepositoryUpdateMirrorWorker`. Based on https://dashboards.gitlab.net/d/9GOIu9Siz/sidekiq-stats?panelId=66\u0026fullscreen\u0026orgId=1\u0026from=now-30d\u0026to=now, setting it to `10000` for `RepositoryUpdateMirrorWorker` and `2000` for the others should be more appropriate","state":"closed","created_at":"2018-10-01T23:26:18.670Z","updated_at":"2018-10-06T19:28:37.396Z","closed_at":"2018-10-02T19:05:34.801Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["alert","noise","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5201","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5201","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5201/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5201/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5201","relative":"#5201","full":"gitlab-com/gl-infra/reliability#5201"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14610224,"iid":5200,"project_id":1304532,"title":"Access to ops.gitlab.net","description":"I don't seem to have permissions over in https://ops.gitlab.net/ (I don't see any projects/activity). Assuming I should see something - can I get those permissions please?","state":"closed","created_at":"2018-10-01T18:26:12.250Z","updated_at":"2018-10-09T19:46:19.940Z","closed_at":"2018-10-09T19:46:19.905Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["access request","oncall","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5200","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5200","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5200/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5200/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5200","relative":"#5200","full":"gitlab-com/gl-infra/reliability#5200"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14604190,"iid":5198,"project_id":1304532,"title":"Ship new .log files to Elasticsearch","description":"In 11.3, we added new JSON files:\n\n* `/var/log/gitlab/gitlab-rails/integrations_json.log` (https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/21316)\n* `/var/log/gitlab/gitlab-rails/importer.log`\n\nWe should ship these to Elasticsearch/Stackdriver etc.","state":"closed","created_at":"2018-10-01T14:56:38.157Z","updated_at":"2018-10-21T13:31:19.094Z","closed_at":"2018-10-10T13:03:24.712Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":[],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5198","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5198","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5198/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5198/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5198","relative":"#5198","full":"gitlab-com/gl-infra/reliability#5198"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14599350,"iid":5193,"project_id":1304532,"title":"Chef Server certificate expiring soon","description":"SSLabs provided certificate is ready to go.  Current certificate will expire in 5 days. Replace it on the server.","state":"closed","created_at":"2018-10-01T12:14:24.470Z","updated_at":"2018-10-01T12:14:52.690Z","closed_at":"2018-10-01T12:14:52.659Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["unscheduled"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-10-05","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5193","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5193","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5193/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5193/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5193","relative":"#5193","full":"gitlab-com/gl-infra/reliability#5193"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14564889,"iid":5187,"project_id":1304532,"title":"When canary is enabled some customers are reporting broken assets.","description":"From this thread:  https://gitlab.slack.com/archives/C101F3796/p1538155584000100\n\nSplitting a small percentage of production traffic to canary appeared to be at the root of some pages not loading css correctly.","state":"closed","created_at":"2018-09-28T22:13:05.100Z","updated_at":"2018-10-06T19:29:29.647Z","closed_at":"2018-10-01T16:17:51.378Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5187","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5187","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5187/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5187/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5187","relative":"#5187","full":"gitlab-com/gl-infra/reliability#5187"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14530179,"iid":5181,"project_id":1304532,"title":"Network issues caused connectivity problems for about 2 minutes","description":"# Summary\n\nWe had a network blip today that caused some issues connecting to various services.\n\n\n# Timeline of events\n\nPagerduty alerts\n* 7:17am gitlab.com issue is down\n* 7:18am gitlab.com issue alert cleared\n* 7:18am gitlab.com pages is down\n* 7:18am gitlab.com new repo is down\n* 7:19am gitlab.com new repo alert cleared\n* 7:19am gitlab.com pages alert cleared\n\nDuring this time, we also had trouble logging in to servers.  It cleared up on its own.\n\n\n## Monitoring\n\n\nThis appears to be due to a network glitch\n\n![image](/uploads/d819a4ac6c716832086acf7297b2edce/image.png)","state":"closed","created_at":"2018-09-27T17:54:57.178Z","updated_at":"2018-10-12T15:28:03.092Z","closed_at":"2018-10-12T15:28:03.070Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["incident","oncall","outage","severity::3","unscheduled"],"milestone":null,"assignees":[],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"INCIDENT","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"incident","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5181","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5181","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5181/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5181/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5181","relative":"#5181","full":"gitlab-com/gl-infra/reliability#5181"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14529363,"iid":5180,"project_id":1304532,"title":"Redirect for app sec page","description":"Please redirect from https://about.gitlab.com/product/application-security to https://about.gitlab.com/solutions/dev-sec-ops.\n\nThank you.","state":"closed","created_at":"2018-09-27T17:33:38.369Z","updated_at":"2018-10-19T22:39:58.012Z","closed_at":"2018-10-10T16:14:43.075Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":[],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2336482,"username":"cblake","name":"Cindy Blake","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2336482/avatar.png","web_url":"https://gitlab.com/cblake"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5180","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5180","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5180/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5180/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5180","relative":"#5180","full":"gitlab-com/gl-infra/reliability#5180"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14513053,"iid":5178,"project_id":1304532,"title":"GitLab.com 5XX error pages should include a link to status.gitlab.com","description":"When a user is presented with a 5XX error page on GitLab.com, we should link to https://status.gitlab.com","state":"closed","created_at":"2018-09-27T09:58:09.996Z","updated_at":"2018-10-06T19:30:37.920Z","closed_at":"2018-09-27T16:27:10.001Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":0,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5178","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5178","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5178/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5178/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5178","relative":"#5178","full":"gitlab-com/gl-infra/reliability#5178"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14511922,"iid":5176,"project_id":1304532,"title":"Separate gitlab-pages from the rest of the web worker fleet","description":"Currently GitLab pages runs alongside unicorn on all web-workers on `web-*` nodes.\n\nThe traffic profile for GitLab Pages, and it's growth, is not related to the profile of the rest of the application, but by having this service running alongside the web, we have coupled the scaling of the Rails web service to the Pages service.\n\nThis has many disadvantages:\n\n* We have 14 instances of the pages service running alongside 14 web workers. This is vastly more than we need. \n* Each pages daemon loads the index into memory and is competing with the unicorn fleet on memory consumption, even when traffic volumes (per instance) are low.\n* Pages deployment and restart is notoriously slow. Having unnecessary additional workers exasperates this problem.\n* Pages requires additional NFS mounts that the web workers would otherwise not require, so splitting this would allow us to drop those NFS mounts.\n\n\ncc @glopezfernandez @dawsmith @Finotto @jarv","state":"closed","created_at":"2018-09-27T09:09:48.870Z","updated_at":"2019-12-06T13:58:07.632Z","closed_at":"2018-10-15T16:30:25.392Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::Pages"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":13,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5176","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5176","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5176/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5176/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5176","relative":"#5176","full":"gitlab-com/gl-infra/reliability#5176"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14502779,"iid":5172,"project_id":1304532,"title":"PullMirrorsOverdueQueueTooLarge from staging triggering pager duty","description":"The PullMirrorsOverdueQueueTooLarge from gstg was triggering pagerduty. \n\nThis MR removed the filtering so that alert manager could decide whether to page.  \nhttps://gitlab.com/gitlab-com/runbooks/merge_requests/733\n\nSince alert manager is making the wrong decision, I've added this MR to remediate the immediate problem, but we'll need a better solution.  https://gitlab.com/gitlab-com/runbooks/merge_requests/759\n\nThe pagerduty alert looked like:\n```\nLabels:\n - alertname = PullMirrorsOverdueQueueTooLarge\n - channel = backend\n - monitor = gstg-app\n - pager = pagerduty\n - provider = gcp\n - region = us-east\n - replica = 01\n - severity = critical\nAnnotations:\n - description = On average, there have been over 5000 overdue pull mirror jobs for the last 10 minutes. Check https://dashboards.gitlab.net/d/_MKRXrSmk/pull-mirrors.\n - runbook = troubleshooting/large-pull-mirror-queue.md\n - title = Large number of overdue pull mirror jobs: 13343\nSource: https://prometheus-app.gstg.gitlab.net/graph?g0.expr=quantile%280.5%2C+gitlab_database_rows%7Bquery_name%3D%22mirrors_ready_to_sync%22%7D%29+%3E+5000\u0026g0.tab=1\nLabels:\n - alertname = PullMirrorsOverdueQueueTooLarge\n - channel = backend\n - monitor = gstg-app\n - pager = pagerduty\n - provider = gcp\n - region = us-east\n - replica = 02\n - severity = critical\nAnnotations:\n - description = On average, there have been over 5000 overdue pull mirror jobs for the last 10 minutes. Check https://dashboards.gitlab.net/d/_MKRXrSmk/pull-mirrors.\n - runbook = troubleshooting/large-pull-mirror-queue.md\n - title = Large number of overdue pull mirror jobs: 13342\nSource: https://prometheus-app.gstg.gitlab.net/graph?g0.expr=quantile%280.5%2C+gitlab_database_rows%7Bquery_name%3D%22mirrors_ready_to_sync%22%7D%29+%3E+5000\u0026g0.tab=1\n```","state":"closed","created_at":"2018-09-27T02:17:31.138Z","updated_at":"2019-03-20T18:39:32.756Z","closed_at":"2018-10-01T14:39:04.838Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["alert","oncall","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5172","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5172","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5172/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5172/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5172","relative":"#5172","full":"gitlab-com/gl-infra/reliability#5172"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14502182,"iid":5171,"project_id":1304532,"title":"DashboardsGitlabComDown Alert","description":"dashboards-com-01-inf-ops.c.gitlab-ops.internal had the grafana-server process crash.  Running chef manually did not bring it back up.  Rebooted the server.  The process came back up with the server.  The alert cleared a few minutes later.\n\nI wasn't sure how to determine why the process crashed. @jarv, can you help figure out why this happened?","state":"closed","created_at":"2018-09-27T01:22:27.040Z","updated_at":"2018-10-06T19:47:35.776Z","closed_at":"2018-10-01T10:22:52.632Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["oncall","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5171","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5171","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5171/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5171/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5171","relative":"#5171","full":"gitlab-com/gl-infra/reliability#5171"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14500572,"iid":5170,"project_id":1304532,"title":"Add SSL Version to HA Proxy Logging","description":"The SSL Version of the handshake is good information to track, especially as we look to continue to make improvements to our SSL handshake by removing weak and deprecated methods.\n\n### Things to Do\n- [x] Add `%sslv` in https://gitlab.com/gitlab-cookbooks/gitlab-haproxy templates after `%ft`\n- [x] Update FluentD config for added field in HA Proxy Logs\n- [x] Ensure Stack Driver ingestion without issue.","state":"closed","created_at":"2018-09-26T23:58:51.538Z","updated_at":"2018-10-15T21:07:47.546Z","closed_at":"2018-10-15T18:17:27.446Z","closed_by":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"labels":["logging","moved 1","priority::1","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5170","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5170","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5170/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5170/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5170","relative":"#5170","full":"gitlab-com/gl-infra/reliability#5170"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14498208,"iid":5168,"project_id":1304532,"title":"Requesting specific permissions on GCP gitlab-demos project","description":"For my partner demonstration work I need to be able to test install GitLab from the Google MarketPlace on GCP. I'm requesting that my account (dgordon@gitlab.com) be given proper privileges so that I can do this.\n\nI'm doing this to a cluster I have created in the gitlab-demos project. When I try to install from MarketPlace it gives me the error that I need \"Kubernetes Engine Admin\" permissions.\n\n![image](/uploads/101584b0c38a8aafb06041490e2e6713/image.png)\n\n  Thanks","state":"closed","created_at":"2018-09-26T20:24:23.918Z","updated_at":"2018-10-06T19:22:17.542Z","closed_at":"2018-10-01T18:42:52.443Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["access request","oncall","toil","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2142885,"username":"dangordon","name":"Dan Gordon","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2142885/avatar.png","web_url":"https://gitlab.com/dangordon"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5168","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5168","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5168/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5168/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5168","relative":"#5168","full":"gitlab-com/gl-infra/reliability#5168"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14491301,"iid":5165,"project_id":1304532,"title":"Redirect a couple of whitepapers","description":"We're in the midst of moving some content behind email gates and I'd like to redirect the old URLs to the new landing pages. Here are the details:\n\n| old URL | redirect to URL |\n| -------- | -------- |\n| /pdfs/resources/gitlab-moving-to-git-whitepaper.pdf  |  /resources/whitepaper-moving-to-git/  |\n| /pdfs/resources/gitlab-scaled-ci-cd-whitepaper.pdf   | /resources/whitepaper-scaled-ci-cd/   |\n\nThanks!","state":"closed","created_at":"2018-09-26T14:52:22.654Z","updated_at":"2018-10-06T19:47:35.310Z","closed_at":"2018-10-01T11:03:59.796Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["toil","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2453970,"username":"shanerice","name":"Shane Rice","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2453970/avatar.png","web_url":"https://gitlab.com/shanerice"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5165","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5165","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5165/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5165/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5165","relative":"#5165","full":"gitlab-com/gl-infra/reliability#5165"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14483845,"iid":5159,"project_id":1304532,"title":"Plan for making ops.gitlab.net the source of truth for operations repos for chef and terraform automation","description":"Given that we are automating many of our infrastructure repos with CICD on the ops.gitlab.net instance I think it is probably time to consider switching to ops.gitlab.net as the source of truth for:\n\n* `https://gitlab.com/groups/gitlab-cookbooks/*`\n* https://dev.gitlab.org/cookbooks/chef-repo\n* https://gitlab.com/gitlab-com/gitlab-com-infrastructure\n\n### Reasoning\n\n* The deployment that we submit MRs to should be the same deployment that runs the CICD jobs, this is important for approving and reviewing.\n* We want to encourage contributions to these repositories and ensure that there is very little friction for gitlab.com team members to contribute. \n* We currently have https://ops.gitlab.net setup so that anyone with a gitlab.com email address can login and view protected repositories.  \n* All repositories that were on gitlab.com will be mirrored on gitlab.com\n* The downside of this is that this plan does not have a way for the wider community to contribute, there won't be an easy way to enable this without enabling the wider community to create accounts on ops.gitlab.net which may be an option we later consider.\n\nThis is a proposed high level plan on how to do this in a sane way:\n\n# Plan\n## chef-repo\n- [x] Prevent pushes to all branches in settings\n- [x] Export / Import the project into ops.gitlab.net\n- [x] Notify members to update their remotes\n- [x] Setup the repository to push to gitlab.com/gitlab-cookbooks/chef-repo (private project)\n- [x] Update description so that it is clear where the source is\n\n## gitlab-com-infrastructure\n- [x] Prevent pushes to all branches in settings\n- [x] Export / Import the project into ops.gitlab.net\n- [x] Notify members to updates their remotes\n- [x] Setup the repository to push to gitlab.com/gitlab-com/gitlab-com-infrastructure (public project)\n- [x] Update description so that it is clear where the source is\n\n## gitlab-cookbooks/*\n- [ ] Change group membership for gitlab-cookbooks so only ops-gitlab-net can push\n- [ ] Update the repository settings on ops.gitlab.net for all gitlab-cookbooks repositories so that they are configured to push to gitlab.com using the ops-gitlab-net user\n- [ ] Notify members to updates their remotes\\\n- [ ] Update description so that it is clear where the source is\n\ncc @gitlab\\-com/gl\\-infra @andrewn @dawsmith @gerir @marin","state":"closed","created_at":"2018-09-26T11:46:39.801Z","updated_at":"2019-01-22T22:58:38.623Z","closed_at":"2018-10-03T17:06:30.663Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Discussion","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5159","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":14,"completed_count":10},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5159","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5159/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5159/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5159","relative":"#5159","full":"gitlab-com/gl-infra/reliability#5159"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14483319,"iid":5158,"project_id":1304532,"title":"[Design Document] First iteration of kubernetes migration","description":"It was brought up during our last on-call handover that we should be careful about the opportunity cost of spending time on efforts (such as internal network hardening) that may not be relevant as we start migrating services to kubernetes.\n\nPersonally, I find this cost difficult to reason about given we do not have yet a roadmap or plan for a first iteration of kubernetes service migration for gitlab.com. This issue is to track just that, a design document for what we can accomplish as a first iterations for kubernetes and a horizon for completing the work against other priorities.\n\nCurrently I believe the first likely candidate for k8 will be the registry service given that we have already set it up once and that it is a standalone service. The next service might be sidekiq. I propose we document a transition plan for registry and sidekiq unless there are other services that are a better fit.\n\nI will put this into the next milestone for consideration, unless we decide it is not something we want to start thinking about.\n\ncc @andrewn @dawsmith @gerir @Finotto @bjk\\-gitlab @jurbanc","state":"closed","created_at":"2018-09-26T11:24:17.583Z","updated_at":"2019-05-01T21:26:22.937Z","closed_at":"2019-05-01T21:20:51.785Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Design Document","Discussion","InfraArch"],"milestone":{"id":816499,"iid":9,"group_id":1112072,"title":"CI/CD \u0026 Enablement Reliability Team Backlog","description":"","state":"closed","created_at":"2019-03-12T14:14:39.135Z","updated_at":"2019-12-04T21:45:38.189Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/9"},"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5158","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5158","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5158/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5158/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5158","relative":"#5158","full":"gitlab-com/gl-infra/reliability#5158"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":64,"epic":{"id":6658,"iid":64,"title":"Define Strategy for Kubernetes Deployment","url":"/groups/gitlab-com/-/epics/64","group_id":6543},"iteration":null,"health_status":null},{"id":14479585,"iid":5156,"project_id":1304532,"title":"give Jose access to the gcp console","description":"@Finotto should have access to the gcp console","state":"closed","created_at":"2018-09-26T08:59:31.087Z","updated_at":"2018-10-06T19:31:19.271Z","closed_at":"2018-09-26T16:12:21.012Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["access request","oncall","toil","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5156","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5156","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5156/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5156/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5156","relative":"#5156","full":"gitlab-com/gl-infra/reliability#5156"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14479549,"iid":5155,"project_id":1304532,"title":"the restore pipeline for disk snapshots is broken","description":"Taking snapshots is working but the restore pipeline is broken:\n\nhttps://gitlab.com/gitlab-restore/gitlab-production-snapshots/-/jobs/101608916\n\n- [x] Fix the pipeline stage so that if it fails it fails the pipeline step\n- [x] Use deadman snitch so that this pipeline is better monitored\n- [x] Fix the restore pipeline\n\n\nI don't think this is extremely urgent as the snapshot pipeline is working, just the restore test is broken. I will put it in the next milestone since this one is already at capacity.\n\ncc @Finotto @dawsmith","state":"closed","created_at":"2018-09-26T08:58:41.703Z","updated_at":"2018-10-21T13:30:10.908Z","closed_at":"2018-10-12T10:25:12.196Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["priority::2"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5155","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5155","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5155/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5155/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5155","relative":"#5155","full":"gitlab-com/gl-infra/reliability#5155"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14468768,"iid":5152,"project_id":1304532,"title":"Investigate way to make tls 1.2 only endpoint for tls 1.0 deprecation","description":"We may want to come up with a way to give customers a tls 1.2+ only endpoint to test api calls.  \n\n\nAC for issue- come up with proposal and estimate here - share back with Dave, Gerir, Jose and we'll schedule based on how much work.","state":"closed","created_at":"2018-09-25T23:12:06.962Z","updated_at":"2019-07-08T20:01:51.879Z","closed_at":"2018-10-15T14:34:21.027Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["moved 1","priority::2","security"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5152","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5152","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5152/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5152/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5152","relative":"#5152","full":"gitlab-com/gl-infra/reliability#5152"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14463636,"iid":5149,"project_id":1304532,"title":"New bastion host in AWS for Registry analysis","description":"Spun out of https://gitlab.com/gitlab-org/gitlab-ce/issues/51702#note_104213310\n\n\u003e @andrewn Can you spin-up the bastion host (likely best on AWS) with 64GB of RAM and S3 read-only credentials that give GET and LIST permission?\n\u003e Once I start doing this \"manual scan\" I will start writing steps needed to do that.\n\ncc @ayufan \n\ncc @dawsmith @Finotto for scheduling","state":"closed","created_at":"2018-09-25T17:30:43.270Z","updated_at":"2020-04-02T22:31:17.191Z","closed_at":"2018-11-02T15:04:48.449Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Cloud Spend","moved 2","priority::2","priority::3","toil"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5149","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5149","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5149/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5149/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5149","relative":"#5149","full":"gitlab-com/gl-infra/reliability#5149"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14430468,"iid":5141,"project_id":1304532,"title":"Sidekiq is not being restarted after chef deploy for customers.gitlab.com","description":"REF: https://gitlab.com/gitlab-org/gitlab-ee/issues/7518\n\nI was trying to fix a bug related to one of our background jobs but realized that after running `sudo chef-deploy` the workers were still using an old version of the app, so I was required to do a manual restart in order to see the fix working.\n\nCan we fix it through the [cookbook](https://gitlab.com/gitlab-cookbooks/cookbook-customers-gitlab-com)?\n\n/cc @jarv @northrup","state":"closed","created_at":"2018-09-24T16:25:45.980Z","updated_at":"2021-01-26T01:43:34.460Z","closed_at":"2021-01-26T01:43:34.321Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["auto updated","chef","deploy"],"milestone":null,"assignees":[],"author":{"id":280339,"username":"rdavila","name":"Rubén Dávila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"},"type":"ISSUE","assignee":null,"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5141","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5141","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5141/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5141/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5141","relative":"#5141","full":"gitlab-com/gl-infra/reliability#5141"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14424092,"iid":5136,"project_id":1304532,"title":"Create an internal api endpoint for canary","description":"In order for the canary deployment to use the api internally we will need an api internal load balancer with the canary api nodes.\n\n- [ ] Create the canary haproxy vm and attach it to an internal loadbalancer for canary\n- [ ] Configure the canary hosts to use the internal api endpoint.","state":"closed","created_at":"2018-09-24T11:40:15.835Z","updated_at":"2022-08-02T06:07:19.020Z","closed_at":"2022-08-02T06:07:19.008Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Service::API"],"milestone":null,"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5136","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5136","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5136/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5136/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5136","relative":"#5136","full":"gitlab-com/gl-infra/reliability#5136"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7,"epic":{"id":1056,"iid":7,"title":"Canary Deployment Testing","url":"/groups/gitlab-com/gl-infra/-/epics/7","group_id":1112072,"human_readable_end_date":"Oct 20, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14424067,"iid":5135,"project_id":1304532,"title":"Setup web, api and git canary to receive a small percentage of web traffic","description":"This task is part of the canary project, outlined in the design doc https://docs.google.com/document/d/15jzLb5O4ASPYInxw1CFI-ngLHv2K8w01AuFOkejfcrk/edit#\n\n\n- [x] Create the infrastructure for web/api/git\n- [x] Create utilitiesthat will adjust the weight of these servers so they can receive a small portion of gitlab traffic","state":"closed","created_at":"2018-09-24T11:38:12.344Z","updated_at":"2018-10-08T22:35:47.084Z","closed_at":"2018-09-28T16:16:35.445Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5135","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5135","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5135/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5135/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5135","relative":"#5135","full":"gitlab-com/gl-infra/reliability#5135"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7,"epic":{"id":1056,"iid":7,"title":"Canary Deployment Testing","url":"/groups/gitlab-com/gl-infra/-/epics/7","group_id":1112072,"human_readable_end_date":"Oct 20, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14423994,"iid":5134,"project_id":1304532,"title":"Configuration updates to introduce optional backend weights to the haproxy configuration","description":"Described in the design doc - https://docs.google.com/document/d/15jzLb5O4ASPYInxw1CFI-ngLHv2K8w01AuFOkejfcrk/edit#\n\nWe will want to have an option for all backends to introduce weights and also optionally include the canary hosts with a backend weight of zero.","state":"closed","created_at":"2018-09-24T11:34:39.101Z","updated_at":"2018-10-08T22:35:56.956Z","closed_at":"2018-09-24T21:47:48.833Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5134","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5134","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5134/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5134/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5134","relative":"#5134","full":"gitlab-com/gl-infra/reliability#5134"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7,"epic":{"id":1056,"iid":7,"title":"Canary Deployment Testing","url":"/groups/gitlab-com/gl-infra/-/epics/7","group_id":1112072,"human_readable_end_date":"Oct 20, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14423882,"iid":5133,"project_id":1304532,"title":"Update elastic credentials pipeline","description":"The credentials for https://gitlab.com/gitlab-restore/esc-tools are out of date.\n\nBefore we lose logging visibility we need to get updated credentials into the pipeline.","state":"closed","created_at":"2018-09-24T11:28:00.061Z","updated_at":"2018-10-06T19:48:34.360Z","closed_at":"2018-09-24T12:45:43.615Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["logging","priority::4","severity::4","unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5133","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5133","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5133/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5133/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5133","relative":"#5133","full":"gitlab-com/gl-infra/reliability#5133"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14385584,"iid":5129,"project_id":1304532,"title":"Add Redis alert when secondaries are connected but not sync","description":"Utilize the metric `master_link_up` to alert us when secondaries of redis fail to keep up their sync with the primary node\n\n* [x] If possible create a graph of this data\n* [x] Ensure this is a high priority alert, this is PagerDuty worthy","state":"closed","created_at":"2018-09-21T21:16:37.469Z","updated_at":"2019-11-29T12:32:31.360Z","closed_at":"2018-09-25T08:47:50.107Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Service::Redis","alert","corrective action","oncall"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5129","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5129","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5129/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5129/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5129","relative":"#5129","full":"gitlab-com/gl-infra/reliability#5129"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14385552,"iid":5128,"project_id":1304532,"title":"redis binary on cache had been upgraded - needs restart to be running against correct binary","description":"It was discovered on Sept 21, the redis application on the cache servers was running against a deleted binary.\nThis issue is put in place to restart redis gracefully on the cache servers to resolve this concern.","state":"closed","created_at":"2018-09-21T21:13:19.478Z","updated_at":"2019-11-29T12:32:30.834Z","closed_at":"2018-10-01T10:25:31.234Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Service::Redis","priority::2"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5128","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5128","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5128/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5128/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5128","relative":"#5128","full":"gitlab-com/gl-infra/reliability#5128"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14373223,"iid":5123,"project_id":1304532,"title":"[Design Document] GEO for DR","description":"Please fill with your ideas the following design doc: https://docs.google.com/document/d/1_fuskON5fbZgxoBktSp-vFvHUU8IauX-q_YWhnT4J5k/edit?usp=sharing\n\nAC - switch to doing an MR in the handbook rather than the google doc.","state":"closed","created_at":"2018-09-21T15:12:26.366Z","updated_at":"2018-10-06T19:34:24.669Z","closed_at":"2018-10-02T12:47:53.228Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["priority::2"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5123","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5123","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5123/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5123/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5123","relative":"#5123","full":"gitlab-com/gl-infra/reliability#5123"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":12,"epic":{"id":1144,"iid":12,"title":"GEO for DR for GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/12","group_id":1112072,"human_readable_end_date":"May 8, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14367226,"iid":5121,"project_id":1304532,"title":"Add PagerDuty webhook to open a GitLab incident issue for all PagerDuty incidents","description":"Currently we have a fairly clumsy process where we get a page and either open an incident manually in the production tracker or in the case where GitLab is down we use the slack bot to initiate it.\n\nI don't think we need to change the latter but for the former I think we can automate this in a way that we don't have to open up issues manually. \n\nI think the best option for us is to probably use a google cloud function webhook to handle the api request to open an issue on an incident. What we should include is a way to avoid spamming the infrastructure tracker when incidents fire again for the same event. For this we can probably add an api query to see if an issue is already open before opening a new one.\n\ncc @andrewn @jurbanc \n\nTasks (updated by @peterdam)\n* [x] Understand what information GitLab production issues contain\n* [X] Review recent PagerDuty incidents to understand what information is captured [Notes](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5121#note_119676468)\n* [x] Understand the conditions for which a GitLab production issue must be created i.e. requirements. [Notes](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5121#note_119591691)\n* [X] Figure out which GCP Project to use - **Preference is gitlab-ops** [Notes](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5121#note_120432576)\n* [x] Figure out what is the team's preferred FaaS provider (GCP or AWS) - **Preference is GCF** [Notes](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5121#note_119628319)\n* [x] Understand [alertmanager-slack-bridge](https://gitlab.com/gitlab-com/gl-infra/slackline)\n* [x] Understand [security pager](https://gitlab.com/gitlab-com/security-tools/security-pager) - **Not relevant for this issue** [Notes](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5121#note_120454499)\n* [ ] Determine service accounts to be used when connecting to GitLab, maybe we have a generic service account\n* [x] Read up on GitLab REST API\n* [X] Create flow diagram as proposal [Notes](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5121#note_120636590)\n* [x] Enable GCF API for `gitlab-ops` Google Project\n* [ ] Write function/code in Python3.7\n* [ ] Create PagerDuty Webhook which will connect to `https://us-east1-gitlab-ops.cloudfunctions.net/\u003cfunction_name\u003e`\n* [ ] Deploy\n* [ ] Look into Zapier - PagerDuty/GitLab integration - Seems like the easy option\n* [ ] ... more to come ...\n\n","state":"closed","created_at":"2018-09-21T11:28:05.732Z","updated_at":"2020-01-20T11:38:05.670Z","closed_at":"2019-07-26T15:13:21.991Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","moved 1","newhire","team::Reliability"],"milestone":null,"assignees":[{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"user_notes_count":41,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5121","time_stats":{"time_estimate":0,"total_time_spent":57600,"human_time_estimate":null,"human_total_time_spent":"16h"},"task_completion_status":{"count":16,"completed_count":10},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5121","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5121/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5121/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5121","relative":"#5121","full":"gitlab-com/gl-infra/reliability#5121"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14363523,"iid":5116,"project_id":1304532,"title":"Introduce suspension of changes and releases during important events","description":"During the livestream on 2018-09-20 we decided to suspend a [network configuration change](https://gitlab.com/gitlab-com/gl-infra/production/issues/478) and I think it might be worth discussing a way to formalize this process.\n\nWhat we need:\n\n1. something to call it\n2. something that is accessible for the team and company to view\n3. something we can query from CICD to stop our automated changes from rolling out\n\n\nFor (1) we could call it Production SOC (suspension of changes) though it is not a standard term. We should avoid other popular terms like \"blackout windows\" or \"blackdays\". I did some googling around and couldn't find anything that is standard and would love to hear suggestions.\n\nFor (2) I would like to signal boost this but putting it on the shared meeting calendar, if that is a bit too much we could create a new calendar for it. \n\nFor (3) would a google calendar work or should we consider other options?\nthe last internal company pipeline tool I used had a feature where you could force pipelines to pause during the certain time intervals, @ayufan is there anything like this on the roadmap for cicd?\n\n## Name suggestions (feel free to vote or add more if you have them)\n\n* SOC (suspension of changes) :ghost: \n* Change suspension :palm\\_tree: \n* office hours :roller\\_coaster: \n* ICL (Infrastructure Change Lock) :8ball: \n* Change freeze :snowman:\n\ncc @gitlab\\-com/gl\\-infra @glopezfernandez @andrewn","state":"closed","created_at":"2018-09-21T08:45:55.928Z","updated_at":"2020-07-14T23:21:45.005Z","closed_at":"2018-11-30T14:14:13.511Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Design Document","auto updated","moved 1","priority::2"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":29,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5116","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5116","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5116/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5116/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5116","relative":"#5116","full":"gitlab-com/gl-infra/reliability#5116"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14349534,"iid":5115,"project_id":1304532,"title":"CI/CD for terraform (require apply stages)","description":"To close out the final two implementation points in #4872: after #5114 has been successfully implemented and validated, we need to update the pipeline in gitlab-com/gitlab-com-infrastructure\u003e so that the apply stages have the setting `allow_failure: false` to ensure that they are [blocking manual actions](https://docs.gitlab.com/ee/ci/yaml/#when-manual), and are required before merging to master.","state":"closed","created_at":"2018-09-20T23:04:37.139Z","updated_at":"2018-10-06T19:23:44.880Z","closed_at":"2018-10-03T18:50:14.557Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["automation"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5115","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5115","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5115/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5115/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5115","relative":"#5115","full":"gitlab-com/gl-infra/reliability#5115"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14349499,"iid":5114,"project_id":1304532,"title":"CI/CD for terraform (tf apply)","description":"Per the high-level plan in #4872, we need to update the CI/CD pipeline for gitlab-com/gitlab-com-infrastructure\u003e to [manually run](https://docs.gitlab.com/ee/ci/yaml/#when-manual) `tf apply` for each environment, starting with `gstg`\n\nAlso see [this section](https://www.terraform.io/guides/running-terraform-in-automation.html#multi-environment-deployment) of the terraform documentation for more details about automating deployment to multiple environments. Since we are not (currently) using terraform workspaces, the MVC first pass should probably just have optional manual steps for each production environment after `gstg` (i.e. `ops` and `gprd`) using the build artifacts from #5113. Eventually we may need to consider re-organizing repositories along the lines of [this comment](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4872#note_100185346).","state":"closed","created_at":"2018-09-20T22:59:09.856Z","updated_at":"2018-10-06T19:23:44.688Z","closed_at":"2018-10-03T18:50:23.335Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["automation"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5114","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5114","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5114/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5114/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5114","relative":"#5114","full":"gitlab-com/gl-infra/reliability#5114"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14349436,"iid":5113,"project_id":1304532,"title":"CI/CD for terraform (tf plan)","description":"Per the high-level plan in #4872, we need to update the CI/CD pipeline for gitlab-com/gitlab-com-infrastructure\u003e to run `tf plan` for each environment during a \"build\" stage, with a build artifact of the plan file and `.terraform` directory for each environment that can be re-used for automated `tf apply` stages later.\n\nSee [this section](https://www.terraform.io/guides/running-terraform-in-automation.html#plan-and-apply-on-different-machines) of the terraform documentation for more details.","state":"closed","created_at":"2018-09-20T22:50:44.492Z","updated_at":"2018-10-03T18:57:25.579Z","closed_at":"2018-10-03T18:47:50.969Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["automation"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5113","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5113","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5113/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5113/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5113","relative":"#5113","full":"gitlab-com/gl-infra/reliability#5113"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14333375,"iid":5105,"project_id":1304532,"title":"301 redirect for a page on the about website","description":"Please infra team, can you set up a 301 from https://about.gitlab.com/blog/categories/release/ to https://about.gitlab.com/blog/categories/releases/?\n\nThe former is a 404 due to renaming a blog category from `release` to `releases`. cc/ @rebecca FYI for future changes and so that you can check if we need more redirects from old categories.\n\nIt caused some backslash on HN as we linked that page from the docs. See https://gitlab.slack.com/archives/C16HYA2P5/p1537391564000100 for reference.","state":"closed","created_at":"2018-09-20T10:38:35.407Z","updated_at":"2018-09-21T22:26:13.589Z","closed_at":"2018-09-21T09:18:23.548Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["oncall","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":236961,"username":"marcia","name":"Marcia Ramos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/236961/avatar.png","web_url":"https://gitlab.com/marcia"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5105","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5105","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5105/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5105/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5105","relative":"#5105","full":"gitlab-com/gl-infra/reliability#5105"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14309457,"iid":5101,"project_id":1304532,"title":"Apply receive_max_input_size setting on GitLab.com","description":"@rdavila's change to limit the max push size has been merged: https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/20758 (thanks @rdavila :+1:!)\n\nSee https://gitlab.com/gitlab-org/gitlab-ce/issues/26044 for further details.\n\nThis was a production request, and an important control for improving the stability of GitLab.com.\n\nSee should apply this control to GitLab.com. What is a reasonable maximum size?\n\ncc @jarv @dawsmith @Finotto","state":"closed","created_at":"2018-09-19T19:00:47.589Z","updated_at":"2019-07-08T20:03:35.336Z","closed_at":"2018-10-02T04:45:12.588Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["priority::3"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5101","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5101","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5101/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5101/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5101","relative":"#5101","full":"gitlab-com/gl-infra/reliability#5101"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14271485,"iid":5087,"project_id":1304532,"title":"Chef Failing on Prometheus Alert Managers","description":"Chef is failing to run on `alerts-01-inf-gprd.c.gitlab-production.internal` and `alerts-02-inf-gprd.c.gitlab-production.internal` with the following error:\n\n```ruby\n  * template[/opt/prometheus/alertmanager/alertmanager.yml] action create[2018-09-18T23:32:58+00:00] INFO: Processing template[/opt/prometheus/alertmanager/alertmanager.yml] action create (gitlab-alertmanager::default line 70)\n\n\n    ================================================================================\n    Error executing action `create` on resource 'template[/opt/prometheus/alertmanager/alertmanager.yml]'\n    ================================================================================\n\n    Chef::Mixin::Template::TemplateError\n    ------------------------------------\n    undefined method `[]' for nil:NilClass\n\n    Resource Declaration:\n    ---------------------\n    # In /var/chef/cache/cookbooks/gitlab-alertmanager/recipes/default.rb\n\n     70: template node[\"alertmanager\"][\"flags\"][\"config.file\"] do\n     71:   source \"alertmanager.yml.erb\"\n     72:   owner node[\"prometheus\"][\"user\"]\n     73:   group node[\"prometheus\"][\"group\"]\n     74:   mode \"0644\"\n     75:   variables(conf: alertmanager_conf)\n     76:   notifies :hup, \"runit_service[alertmanager]\"\n     77: end\n     78:\n\n    Compiled Resource:\n    ------------------\n    # Declared in /var/chef/cache/cookbooks/gitlab-alertmanager/recipes/default.rb:70:in `from_file'\n\n    template(\"/opt/prometheus/alertmanager/alertmanager.yml\") do\n      action [:create]\n      retries 0\n      retry_delay 2\n      default_guard_interpreter :default\n      source \"alertmanager.yml.erb\"\n      variables {:conf=\u003e{\"slack\"=\u003e{\"channel\"=\u003e\"#alerts\", \"api_url\"=\u003e\"https://hooks.slack.com/services/XXXXX/XXXXX/XXXXX\"}, \"pagerduty\"=\u003e{\"service_key\"=\u003e\"XXXXX\", \"low_prio_service_key\"=\u003e\"XXXXX\"}}}\n      declared_type :template\n      cookbook_name \"gitlab-alertmanager\"\n      recipe_name \"default\"\n      owner \"prometheus\"\n      group \"prometheus\"\n      mode \"0644\"\n      path \"/opt/prometheus/alertmanager/alertmanager.yml\"\n      verifications []\n    end\n\n    Template Context:\n    -----------------\n    on line #225\n    223: - name: dead_mans_snitch\n    224:   webhook_configs:\n    225:   - url: \"https://nosnch.in/\u003c%= @conf['snitch']['api_key'] %\u003e\"\n    226:     send_resolved: false\n\n    Platform:\n    ---------\n    x86_64-linux\n\n[2018-09-18T23:32:58+00:00] INFO: Running queued delayed notifications before re-raising exception\n\nRunning handlers:\n[2018-09-18T23:32:58+00:00] ERROR: Running exception handlers\n  - PrometheusHandler\nRunning handlers complete\n[2018-09-18T23:32:58+00:00] ERROR: Exception handlers complete\nChef Client failed. 14 resources updated in 31 seconds\n[2018-09-18T23:32:58+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\n[2018-09-18T23:32:58+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n[2018-09-18T23:32:58+00:00] ERROR:\n\nChef::Mixin::Template::TemplateError (undefined method `[]' for nil:NilClass) on line #225:\n\n223: - name: dead_mans_snitch\n224:   webhook_configs:\n225:   - url: \"https://nosnch.in/\u003c%= @conf['snitch']['api_key'] %\u003e\"\n226:     send_resolved: false\n```","state":"closed","created_at":"2018-09-18T23:36:07.516Z","updated_at":"2018-09-26T15:05:10.766Z","closed_at":"2018-09-20T00:55:16.977Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["chef","oncall","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5087","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5087","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5087/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5087/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5087","relative":"#5087","full":"gitlab-com/gl-infra/reliability#5087"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14268826,"iid":5084,"project_id":1304532,"title":"Redirect /partners to /applications on about.gitlab.com","description":"Old URL: `https://about.gitlab.com/partners`\r\nNew URL: `https://about.gitlab.com/applications`","state":"closed","created_at":"2018-09-18T19:41:52.427Z","updated_at":"2018-10-06T19:36:38.146Z","closed_at":"2018-10-03T10:39:01.188Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":2222493,"username":"jareko","name":"Jarek Ostrowski","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2222493/avatar.png","web_url":"https://gitlab.com/jareko"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5084","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5084","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5084/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5084/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5084","relative":"#5084","full":"gitlab-com/gl-infra/reliability#5084"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14254636,"iid":5082,"project_id":1304532,"title":"Switch GitLab.com Early Adopters to Free on October 1st, 2018","description":"We extended the Early Adopter program to Oct 1st (see https://gitlab.com/gitlab-com/marketing/general/issues/3050) and emailed impacted users around Sept 19th.\n\nOn October 1st, we should switch all Early Adopter plans to Free plans on GitLab.com.","state":"closed","created_at":"2018-09-18T15:35:18.768Z","updated_at":"2018-10-16T15:38:43.160Z","closed_at":"2018-10-05T23:38:49.260Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":[],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-10-01","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5082","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5082","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5082/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5082/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5082","relative":"#5082","full":"gitlab-com/gl-infra/reliability#5082"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14242970,"iid":5081,"project_id":1304532,"title":"Collect Postgres logs with log_min_duration_statement = 0 for analysis and DB experiments","description":"These actions are part of issue #4921 \n\nAs discussed with @abrandl and @dawsmith, I'm going to collect a sample (30-60 minutes) of all-queries log on Wednesday, Sep 19, starting at 12:00 UTC (the busiest time is ~13:00 UTC).\n\nThe brief description of actions\n---\nTo do that, I'll setup `log_min_duration_statement` with manual `alter system set ..` command on the master, followed by `select pg_reload_conf();`. The plan (see details below) is to reach 0 iteratively, descending from the current value of 1 second to 0 by steps, with ~15 minutes apart, controlling IO and the log size.\n\nProjected IO impact\n---\nThe projected IO impact, based on `pg_stat_statements` view (it lacks query parameters, but this just adds some small error to the forecast – there are no huge Geo queries on the master node), based on last 10 hours of observation:\n\n```sql\ngitlabhq_production=# select                                                                                                                                                                            now(),                                                                                                                                                                                                :'TS_PGSS_RESET' as pg_stat_statements_last_reset,                                                                                                                                                    now() - :'TS_PGSS_RESET' since_reset,                                                                                                                                                                 sum(calls * length(query)) as total_bytes,                                                                                                                                                            sum(calls * length(query)) / extract(epoch from now() - :'TS_PGSS_RESET') as bytes_per_sec                                                                                                          from pg_stat_statements;\n-[ RECORD 1 ]-----------------+------------------------------\nnow                           | 2018-09-18 07:51:16.052095+00\npg_stat_statements_last_reset | 2018-09-17 21:19:59.557029+00\nsince_reset                   | 10:31:16.495066\ntotal_bytes                   | 37407827046\nbytes_per_sec                 | 987626.41529573\n```\n\n– this gives an estimate of ~1MB/s for writing Postgres log. This is based on not the busiest hours though, so it's subject to checking during Tuesday mid-day. This is an estimate for `log_min_duration_statement = 0`. For higher values, including the possible lowest positive `1ms`, the excepted IO will be much lower.\n\nAdditional observation: a lot of queries under 1ms\n---\nIf we take Top-15 (by `total_time`) queries among those which `max_time` is \u003c 1mas, we'll see that those take \u003e50% of time:\n```sql\nselect\n  total_time,\n  sum(total_time) over () as total_time_registered_in_pss,\n  round(100::real * (sum(total_time) over (order by total_time desc)) / sum(total_time) over ())::text\n    || '%' as accum_percentage,\n  min_time,\n  round(mean_time::numeric, 2) as mean_time,\n  max_time,\n  query\nfrom pg_stat_statements\nwhere max_time \u003c 1\norder by total_time desc\nlimit 15;\n```\n\nThe detailed plan of actions\n---\n\n0) Tuesday, 2018-09-18 12:00 UTC: reset pg_stat_statements and double check the write IO estimate.\nIn psql on Postgres master:\n```sql\nselect now() as \"TS_PGSS_RESET\" from pg_stat_statements_reset() \\gset\n\nselect\n  now(),\n  :'TS_PGSS_RESET' as pg_stat_statements_last_reset,\n  now() - :'TS_PGSS_RESET' since_reset,\n  sum(calls * length(query)) as total_bytes,\n  sum(calls * length(query)) / extract(epoch from now() - :'TS_PGSS_RESET') as bytes_per_sec\nfrom pg_stat_statements;\n\n\\watch 300\n```\n\n1) Wednesday, 2018-09-19 11:xx Preparations.\n\nSet millisecond precision in log timestamps – use `%m` instead of `%t` (currently we have second-level precision, `%t`):\n```\nalter system set log_line_prefix = '%m [%p]: [%l-1] db=%d,user=%u ';\nselect pg_reload_conf();\n```\n\n2) Wednesday, 2018-09-19 12:00 UTC: start descending.\n\nIn psql on Postgres master:\n```sql\nalter system set log_min_duration_statement = '100ms';\nselect pg_reload_conf();\n```\n\n3) Observe the current size of the log and avg speed of its growth:\n```shell\nls -lah /var/log/gitlab/postgresql/current\n\n# this will print avg bytes/sec based on the full \"current\" log file\nsudo head -n1 /var/log/gitlab/postgresql/current | head -c 22 | sed 's/_/T/g' |  xargs date +\"%s\" --date \\\n  | awk \\\n    -v date=\"$(date +\"%s\")\" \\\n    '{print (date - $1)}' \\\n  | awk \\\n    -v bytes=\"$(sudo wc -c /var/log/gitlab/postgresql/current | awk '{print $1}')\" \\\n    '{print (bytes / $1)}'\n```\n\nAnd check IO with:\n  -  `sudo iotop -o`\n  - monitoring\n\n4) Wednesday, 2018-09-19 12:15 UTC: continue descending, set to '10ms'\n\nIn psql on Postgres master:\n```sql\nalter system set log_min_duration_statement = '10ms';\nselect pg_reload_conf();\n```\n\n+ continue observing as described in step 3\n\n5) Wednesday, 2018-09-19 12:30 UTC: continue descending, set to '5ms'\n\nIn psql on Postgres master:\n```sql\nalter system set log_min_duration_statement = '5ms';\nselect pg_reload_conf();\n```\n\n+ continue observing as described in step 3\n\n+ check IO with `sudo iotop -o` and monitoring (https://dashboards.gitlab.net/d/pEfSMUhmz/postgresql-disk-io?orgId=1 + GCP graphs)\n\n5) Wednesday, 2018-09-19 12:45 UTC: continue descending, set to '1ms'\n\nIn psql on Postgres master:\n```sql\nalter system set log_min_duration_statement = '1ms';\nselect pg_reload_conf();\n```\n\n+ continue observing as described in step 3\n\n+ check IO with `sudo iotop -o` and monitoring (https://dashboards.gitlab.net/d/pEfSMUhmz/postgresql-disk-io?orgId=1 + GCP graphs)\n\n6) DECISION TO BE MADE BASED ON OBSERVED NUMBERS: If the current IO caused by logging is \u003e 1MB/s, stop with `1ms`, and collect only partial logs, with this threshold.\nIf it's below, continue with last step of descending to collect all-queries log:\n\n```sql\nalter system set log_min_duration_statement = 0;\nselect pg_reload_conf();\n```\n\n7) Collect logs (minimum 15 minutes, max 30 minutes):\n\n```shell\nsudo cp /var/log/gitlab/postgresql/current ~nikolays/postgres_0_20180919.log\n```\n\n8) Return to the initial state - in psql on the master node:\n\n```sql\nalter system reset log_min_duration_statement;\nalter system reset log_line_prefix;\nselect pg_reload_conf();\n\\c\nshow log_min_duration_statement;\nshow log_line_prefix;\n```\n\nNotes on possible risks\n---\nNo risks to have any performance degradation are expected. In case of any unpredictable IO, the step 8 will be immediately applied.\nIt expected, that ~2-4GB of logs will be generated during collection phase (with projected generation speed ~1-2MB/s), which is an equivalent to ~10 days of logging with current `log_min_duration_statement` threshold (1s)\nThis might cause some delays in Kibana processing.\n\nTODO after these works are done\n---\n\nAfter this is complete, TODO (separate issues):\n\n- process, analyze logs with pgBadger\n- PoC usage of logs with pgreplay on experimental DB nodes\n- `set log_min_duration_statement to 100ms;` permanently\n- set better `log_line_prefix`\n- stop using \"one for all\" DB roles, use separate ones for different apps and for administration.\n\n\n\n/cc @gitlab\\-com/gl\\-infra","state":"closed","created_at":"2018-09-18T12:20:00.727Z","updated_at":"2018-10-04T22:49:30.486Z","closed_at":"2018-09-18T12:36:35.086Z","closed_by":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"labels":["Database","change","database-abuse"],"milestone":null,"assignees":[{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"}],"author":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"type":"ISSUE","assignee":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5081","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5081","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5081/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5081/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5081","relative":"#5081","full":"gitlab-com/gl-infra/reliability#5081"},"severity":"UNKNOWN","moved_to_id":14243390,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14239602,"iid":5079,"project_id":1304532,"title":"[Design Document] Terraform Automation","description":"Design doc MR: https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/15647","state":"closed","created_at":"2018-09-18T09:48:55.566Z","updated_at":"2020-07-14T22:50:17.754Z","closed_at":"2018-11-27T22:37:06.210Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["Design Document","auto updated","moved 2"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":11,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5079","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5079","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5079/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5079/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5079","relative":"#5079","full":"gitlab-com/gl-infra/reliability#5079"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9,"epic":{"id":1111,"iid":9,"title":"Improving Automation","url":"/groups/gitlab-com/gl-infra/-/epics/9","group_id":1112072,"human_readable_end_date":"Feb 23, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14239562,"iid":5078,"project_id":1304532,"title":"[Design Document] Chef Automation","description":"Please fill with your ideas the following design doc: https://docs.google.com/document/d/17DhmLAUkMP6lusX7OWcPXoQeER2u7OuhJLWzOSriG64/edit?usp=sharing","state":"closed","created_at":"2018-09-18T09:47:38.778Z","updated_at":"2018-10-21T13:33:18.820Z","closed_at":"2018-10-15T14:56:29.673Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Design Document","moved 1"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5078","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5078","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5078/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5078/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5078","relative":"#5078","full":"gitlab-com/gl-infra/reliability#5078"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9,"epic":{"id":1111,"iid":9,"title":"Improving Automation","url":"/groups/gitlab-com/gl-infra/-/epics/9","group_id":1112072,"human_readable_end_date":"Feb 23, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14239539,"iid":5077,"project_id":1304532,"title":"[Design Document] Monitoring Review Storages","description":"Please fill with your ideas the following design doc: https://docs.google.com/document/d/1fYkjKLPlpABxTfrF8KRK3KF66JtSfml1BiF7lpzLCMo/edit?usp=sharing","state":"closed","created_at":"2018-09-18T09:46:53.231Z","updated_at":"2018-12-17T15:24:19.168Z","closed_at":"2018-12-17T14:56:50.811Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["Design Document","Observability","ToBacklog","auto updated","moved 3"],"milestone":{"id":713047,"iid":57,"project_id":1304532,"title":"2018-12-30 Completed","description":"","state":"closed","created_at":"2018-11-17T17:50:24.811Z","updated_at":"2019-01-02T14:36:41.786Z","due_date":"2018-12-29","start_date":"2018-12-16","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/57"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5077","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5077","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5077/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5077/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5077","relative":"#5077","full":"gitlab-com/gl-infra/reliability#5077"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":11,"epic":{"id":1113,"iid":11,"title":"Datastores Monitoring Review","url":"/groups/gitlab-com/gl-infra/-/epics/11","group_id":1112072,"human_readable_end_date":"Apr 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14230666,"iid":5075,"project_id":1304532,"title":"Chef not running on some clients","description":"An inadvertent action deleted the clients from the `syslog_client / _default` vault which has stopped Chef processing on several nodes still in Azure.","state":"closed","created_at":"2018-09-18T05:14:53.481Z","updated_at":"2018-09-21T22:30:13.801Z","closed_at":"2018-09-18T05:19:54.103Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["chef","oncall","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5075","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5075","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5075/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5075/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5075","relative":"#5075","full":"gitlab-com/gl-infra/reliability#5075"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14219800,"iid":5069,"project_id":1304532,"title":"design.gitlab.com is offline","description":"threads in # production - https://gitlab.slack.com/archives/C101F3796/p1537187945000100","state":"closed","created_at":"2018-09-17T17:30:13.768Z","updated_at":"2018-09-21T22:31:30.451Z","closed_at":"2018-09-18T11:29:13.537Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Global:Ready","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5069","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5069","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5069/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5069/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5069","relative":"#5069","full":"gitlab-com/gl-infra/reliability#5069"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14219511,"iid":5068,"project_id":1304532,"title":"Error when deploying customers.gitlab.com","description":"I'm getting this error when trying to deploy the customers app through `sudo chef-client`:\n\n```\n================================================================================                                                                 \nRecipe Compile Error in /var/chef/cache/cookbooks/gitlab-server/recipes/rsyslog_client.rb                                                        \n================================================================================                                                                 \n                                                                                                                                                 \nChefVault::Exceptions::SecretDecryption                                                                                                          \n---------------------------------------                                                                                                          \nsyslog_client/_default is not encrypted with your public key.  Contact an administrator of the vault item to encrypt for you!                    \n                                                                                                                                                 \nCookbook Trace:                                                                                                                                  \n---------------                                                                                                                                  \n  /var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:17:in `get'                                                                      \n  /var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:87:in `get_secrets'                                                              \n  /var/chef/cache/cookbooks/gitlab-server/recipes/rsyslog_client.rb:2:in `from_file'                                                             \n                                                                                                                                                 \nRelevant File Content:                                                                                                                           \n----------------------                                                                                                                           \n/var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:                                                                                   \n                                                                                                                                                 \n 10:        @node = node                                                                                                                         \n 11:        Chef::Log.info(\"gitlab_secrets: BE: 'chef_vault', path: '#{@path}', key:'#{@key}'\")                                                  \n 12:      end\n 13:\n 14:      def get\n 15:        require 'chef-vault'\n 16:        if ChefVault::Item.vault?(@path, @key)\n 17\u003e\u003e         Hash(ChefVault::Item.load(@path, @key))\n 18:        else\n 19:          Chef::Log.warn(\"This is not a vault, will try to load the #{@key} in the #{@path} databag.\")                                      \n 20:          Hash(Chef::DataBagItem.load(@path, @key))\n 21:        end\n 22:      end\n 23:    end\n```\n\n@skarbek maybe it's related to some recent changes in the vault?","state":"closed","created_at":"2018-09-17T17:10:57.194Z","updated_at":"2018-09-21T22:12:56.028Z","closed_at":"2018-09-17T18:13:37.389Z","closed_by":{"id":280339,"username":"rdavila","name":"Rubén Dávila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"},"labels":["unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":280339,"username":"rdavila","name":"Rubén Dávila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5068","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5068","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5068/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5068/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5068","relative":"#5068","full":"gitlab-com/gl-infra/reliability#5068"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14213721,"iid":5065,"project_id":1304532,"title":"2018 - standups and planning updates","description":"Proposing making a slack channel for standups and planning to have a record / place for team communication on these topics.\n\n~~Channel name:  infra-standup~~\n\nBased on comments- hold off on making the channel and just use # sre-lounge\n\n### Standups: \n\n* [x] todo: setup the bot to remind \n\nthey should cover: \nWhat are you working on?\nWhat are you blocked on?\nOpportunities to pair up?\nThings I worked on that can be handed off?\n\n### Milestone Planning:\nThinking about how best to make milestone and issue level planning async.\nThe current thought is to use the standup channel for posts to request feedback on issues that need to be planned in the current and next milestones.\n\nSince we are async, we should not have to depend on a 'planning meeting' and instead, work on planning/reviewing issues and designs as they occur.  The managers of the team can serve as POs to make sure and remind the team we should be getting items planned early.  Ideally, we are planning/reviewing items for the next milestone, though as we start, there may be some items in the current milestones needing review.\n\ncc @gitlab\\-com/gl\\-infra","state":"closed","created_at":"2018-09-17T14:13:39.430Z","updated_at":"2018-09-21T21:39:18.726Z","closed_at":"2018-09-21T21:39:18.709Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5065","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5065","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5065/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5065/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5065","relative":"#5065","full":"gitlab-com/gl-infra/reliability#5065"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14163089,"iid":5059,"project_id":1304532,"title":"Remove DNS record for `log.gitlap.com`","description":"This ELK cluster has been destroyed but the DNS record for it is still live.\n\n\n/cc @dawsmith","state":"closed","created_at":"2018-09-14T17:16:22.741Z","updated_at":"2018-09-17T22:46:56.904Z","closed_at":"2018-09-14T20:03:49.807Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Global:Ready","oncall","priority::2","security","severity::2","toil","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5059","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5059","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5059/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5059/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5059","relative":"#5059","full":"gitlab-com/gl-infra/reliability#5059"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14162646,"iid":5058,"project_id":1304532,"title":"Setup alerts for both custom and non-custom ssl endpoints for pages","description":"This comes out of the pages postmortem. The front-end for pages ip should never be released. We should have critical (pagerduty) alerts for both staging and production so we are notified immediately if there is an issue. By the time we are paged in production it will be too late so we need to do this for staging as well.\n\nFor the alert I think the best thing to do is scrape an ssl custom domain, that is configured to use an A record.\n","state":"closed","created_at":"2018-09-14T16:39:33.266Z","updated_at":"2018-09-21T22:42:54.710Z","closed_at":"2018-09-20T14:37:40.025Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["corrective action","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5058","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5058","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5058/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5058/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5058","relative":"#5058","full":"gitlab-com/gl-infra/reliability#5058"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14155269,"iid":5057,"project_id":1304532,"title":"network peer the monitoring subnets in gprd/gstg/ops","description":"For alertmanager clustering it is desired that we network peer the monitoring subnets. This will cover both prometheus and alertmanager.\n\nNote that internal dns resolution will not work across projects so if we do configure cross project connections it will need to be by the private ip address.\n\nFor more context see https://dev.gitlab.org/cookbooks/chef-repo/merge_requests/2531#note_134273\n\n- [x] Peer gstg and gprd (see how this was done for the ops network)\n- [x] Create firewall rules that allow alertmanagers to communicate with each other","state":"closed","created_at":"2018-09-14T12:17:38.746Z","updated_at":"2022-08-10T14:26:33.021Z","closed_at":"2018-10-03T14:29:15.299Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["unscheduled"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5057","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5057","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5057/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5057/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5057","relative":"#5057","full":"gitlab-com/gl-infra/reliability#5057"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14151997,"iid":5053,"project_id":1304532,"title":"Enable object storage for maven packages on GitLab.com","description":"In 11.3 we released maven packages support https://gitlab.com/gitlab-org/omnibus-gitlab/merge_requests/2697/diffs. @ayufan suggested we enable object storage support for it as soon as possible to avoid migration in future","state":"closed","created_at":"2018-09-14T09:56:18.938Z","updated_at":"2018-10-19T22:43:37.463Z","closed_at":"2018-10-08T08:45:42.086Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["moved 1"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":444,"username":"dzaporozhets","name":"Dmytro Zaporozhets (DZ)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/444/avatar.png","web_url":"https://gitlab.com/dzaporozhets"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5053","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5053","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5053/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5053/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5053","relative":"#5053","full":"gitlab-com/gl-infra/reliability#5053"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14150172,"iid":5052,"project_id":1304532,"title":"Whitelist metrics for public hosts","description":"The ops Prometheus instance needs to access metrics ports (9100-9300) on several public hosts.\n\nThese hosts are on ec2:\n\n* license.gitlab.com\n* packages.gitlab.com\n* version.gitlab.com\n\nWe can either tunnel this traffic to ec2 from the ops zone, or we can use the public IPs.","state":"closed","created_at":"2018-09-14T08:59:31.251Z","updated_at":"2018-09-17T22:47:28.421Z","closed_at":"2018-09-17T12:53:48.881Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5052","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5052","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5052/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5052/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5052","relative":"#5052","full":"gitlab-com/gl-infra/reliability#5052"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14149366,"iid":5051,"project_id":1304532,"title":"onboarding jfinotto ssh access to the environment","description":"Hello here my .pub \nUsername jfinotto\n\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDNidMhz6K0KoKcnM7l08YWTp1T84bjP5tF0u6utfTlpjjqrIFI2mhYicga2nRxypb6xriaiOtR+w9uzVIWdJbePG3mu82vdIRUrk9C/tEQsMy8Y51jUJF/i0JsKMKfTQnrC9cfe0L4zOP/NcQwL0GUtIhc8Nw8T1B/2i7Djz39RYWDEqNlwYMl9NPtjW1067ns+YZw68bKbB5e+ndaheE1BtcmmdU9n9Cx4QB9366GO7UWwx7f9o3Ifd8/NwDsz81rx8ie2rwL4hpbUsDkxwY2DPaZ68MnTScLIdrnekxs/OGmoTBwLf/VZiQ7m3z9tDbQTZMUqBReXVD+354krPD7 jfinotto@Joses-MBP.fritz.box","state":"closed","created_at":"2018-09-14T08:24:08.183Z","updated_at":"2018-09-26T15:05:55.805Z","closed_at":"2018-09-14T08:32:16.543Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["access request","toil","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5051","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5051","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5051/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5051/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5051","relative":"#5051","full":"gitlab-com/gl-infra/reliability#5051"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14149086,"iid":5050,"project_id":1304532,"title":"Check for internal ip addresses when updating our restriction lists","description":"We recently had an incident where the blackbox ip address was flagged and put into a restricted list.\n\nThe following two repos:\n* https://ops.gitlab.net/gitlab-com/security-tools/front-end-security.git\n* https://ops.gitlab.net/gitlab-com/security-tools/recaptcha.git\n\nWould benefit from a pipeline check to ensure that none of the IPs are internally reserved.","state":"closed","created_at":"2018-09-14T08:11:47.612Z","updated_at":"2019-07-08T20:01:50.577Z","closed_at":"2018-10-15T14:23:46.416Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["corrective action","moved 1","priority::2"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5050","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5050","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5050/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5050/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5050","relative":"#5050","full":"gitlab-com/gl-infra/reliability#5050"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14140069,"iid":5044,"project_id":1304532,"title":"Empty Home Dashboard on the public metrics server `dashboards.gitlab.net`","description":"Navigating to `https://dashboards.gitlab.com` for the first time in a fresh browser shows an empty \"Home Dashboard\".\n\nIt used to redirect to GitLab triage.","state":"closed","created_at":"2018-09-13T21:14:30.115Z","updated_at":"2018-09-25T07:05:30.925Z","closed_at":"2018-09-25T07:05:30.852Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["oncall","toil"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5044","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5044","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5044/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5044/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5044","relative":"#5044","full":"gitlab-com/gl-infra/reliability#5044"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14133730,"iid":5043,"project_id":1304532,"title":"remove bootstrap=false from the base roles","description":"This is necessary because it forces a reconfigure after package install. The right way is for the deployment orchestrator (takeoff) to do this. This issue is to track reverting https://dev.gitlab.org/cookbooks/chef-repo/merge_requests/2525 after takeoff changes are made.","state":"closed","created_at":"2018-09-13T15:17:46.906Z","updated_at":"2018-09-26T15:06:14.684Z","closed_at":"2018-09-17T08:41:31.087Z","closed_by":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"labels":["unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5043","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5043","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5043/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5043/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5043","relative":"#5043","full":"gitlab-com/gl-infra/reliability#5043"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14118575,"iid":5034,"project_id":1304532,"title":"Backup restore hangs/failed","description":"On 2018-09-12, a pipeline run for https://gitlab.com/gitlab-restore/postgres-01.db.prd.gitlab.com was triggered. This spins up a new GCE database instance and pulls the latest backup using `wal-e backup-fetch`.\n\nTimeline:\n\n* Sep 12 15:28 - Instance boot\n* Sep 12 15:33 - wal-e starts `backup-fetch`\n* Sep 12 15:33 - Encryption errors the may be caused by a permission error for `/var/opt/gitlab/postgresql/data/server.crt` (see log below) - may be harmless\n* Sep 13 2:11 - wal-e downloads `part_00001959.tar.lzo` (this is the last partition - so may even have completed restoring the backup) - no more log messages after this.\n* Sep 13 8:58 - the `backup-fetch` process still hangs (strace see below)\n\nThe backup we were fetching was: `base_00000006000084260000008D_03825496`. \n\nstrace of the stalled backup-fetch process:\n\n```\ngitlab-+ 21309 27.1  0.8 363136 65124 ?        Sl   Sep12 283:07 /opt/wal-e/bin/python3 /opt/wal-e/bin/wal-e backup-fetch /var/opt/gitlab/postgresql/data/ base_00000006000084260000008D_03825496\nroot@restore-postgres-01-prd:/var/opt/gitlab/postgresql# strace -c -p 21309\nstrace: Process 21309 attached\n^Cstrace: Process 21309 detached\n% time     seconds  usecs/call     calls    errors syscall\n------ ----------- ----------- --------- --------- ----------------\n 60.60    0.063848          12      5504           clock_gettime\n 29.87    0.031475          20      1570           epoll_wait\n  9.52    0.010033          13       791           wait4\n------ ----------- ----------- --------- --------- ----------------\n100.00    0.105356                  7865           total\n```\n\nIn the beginning, we were seeing these errors (which may be harmless and caused by permission errors for the certificate):\n```\nSep 12 15:37:35 restore-postgres-01-prd startup-script: INFO startup-script: wal_e.worker.s3.s3_worker INFO     MSG: beginning partition download\nSep 12 15:37:35 restore-postgres-01-prd startup-script: INFO startup-script:         DETAIL: The partition being downloaded is part_00000000.tar.lzo.\nSep 12 15:37:35 restore-postgres-01-prd startup-script: INFO startup-script:         HINT: The absolute S3 key is postgres-02/basebackups_005/base_00000006000084260000008D_03825496/tar_partitions/part_00000000.tar.lzo.\nSep 12 15:37:35 restore-postgres-01-prd startup-script: INFO startup-script:         STRUCTURED: time=2018-09-12T15:37:35.702363-00 pid=21309\nSep 12 15:37:35 restore-postgres-01-prd wal_e.worker.s3.s3_worker INFO     MSG: beginning partition download#012        DETAIL: The partition being downloaded is part_00000000.tar.lzo.#012        HINT: The absolute S3 key is postgres-02/basebackups_005/base_00000006000084260000008D_03825496/tar_partitions/part_00000000.tar.lzo.#012        STRUCTURED: time=2018-09-12T15:37:35.702363-00 pid=21309\nSep 12 15:37:38 restore-postgres-01-prd startup-script: INFO startup-script: gpg: block_filter 0x24e83c0: read error (size=15934,a-\u003esize=15934)\nSep 12 15:37:38 restore-postgres-01-prd startup-script: INFO startup-script: gpg: block_filter 0x24e8ea0: read error (size=16165,a-\u003esize=16165)\nSep 12 15:37:38 restore-postgres-01-prd startup-script: INFO startup-script: gpg: WARNING: encrypted message has been manipulated!\nSep 12 15:37:38 restore-postgres-01-prd startup-script: INFO startup-script: gpg: block_filter: pending bytes!\nSep 12 15:37:38 restore-postgres-01-prd startup-script: INFO startup-script: gpg: block_filter: pending bytes!\nSep 12 15:37:38 restore-postgres-01-prd startup-script: INFO startup-script: lzop: Inappropriate ioctl for device: \u003cstdin\u003e\nSep 12 15:37:41 restore-postgres-01-prd wal_e.retries WARNING  MSG: retrying after encountering exception#012        DETAIL: Exception information dump: #012        Traceback (most recent call last):#012          File \"/opt/wal-e/lib/python3.5/site-packages/wal_e/retries.py\", line 87, in shim#012            return f(*args, **kwargs)#012          File \"/opt/wal-e/lib/python3.5/site-packages/wal_e/worker/s3/s3_worker.py\", line 78, in fetch_partition#012            TarPartition.tarfile_extract(pl.stdout, self.local_root)#012          File \"/opt/wal-e/lib/python3.5/site-packages/wal_e/tar_partition.py\", line 301, in tarfile_extract#012            tar.extract(member, path=dest_path)#012          File \"/opt/wal-e/lib/python3.5/tarfile.py\", line 2038, in extract#012            numeric_owner=numeric_owner)#012          File \"/opt/wal-e/lib/python3.5/tarfile.py\", line 2108, in _extract_member#012            self.makefile(tarinfo, targetpath)#012          File \"/opt/wal-e/lib/python3.5/tarfile.py\", line 2148, in makefile#012            with bltn_open(targetpath, \"wb\") as target:#012        PermissionError: [Errno 13] Permission denied: '/var/opt/gitlab/postgresql/data/server.crt'#012        #012        HINT: A better error message should be written to handle this exception.  Please report this output and, if possible, the situation under which it arises.#012        STRUCTURED: time=2018-09-12T15:37:41.346707-00 pid=21309\n```","state":"closed","created_at":"2018-09-13T08:59:29.970Z","updated_at":"2018-12-19T11:11:25.886Z","closed_at":"2018-09-26T11:29:45.371Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","backup","moved 1","priority::1"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5034","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5034","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5034/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5034/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5034","relative":"#5034","full":"gitlab-com/gl-infra/reliability#5034"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4,"epic":{"id":1053,"iid":4,"title":"Postgresql Backup \u0026 Recovery","url":"/groups/gitlab-com/gl-infra/-/epics/4","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14087853,"iid":5025,"project_id":1304532,"title":"[Design Document] Canary Deployment Testing","description":"Please fill with your ideas the following design doc : https://docs.google.com/document/d/15jzLb5O4ASPYInxw1CFI-ngLHv2K8w01AuFOkejfcrk/edit?usp=sharing","state":"closed","created_at":"2018-09-12T10:00:20.853Z","updated_at":"2018-10-22T08:05:50.310Z","closed_at":"2018-10-10T12:54:07.995Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Database","Design Document","blocked","moved 1","priority::2"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5025","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5025","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5025/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5025/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5025","relative":"#5025","full":"gitlab-com/gl-infra/reliability#5025"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1,"epic":{"id":1038,"iid":1,"title":"Improvements to GitLab.com Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/1","group_id":1112072,"human_readable_end_date":"Oct 20, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14087686,"iid":5024,"project_id":1304532,"title":"[Design Document] Configure properly Autovacuum for postgresql","description":"Please fill with your ideas the following design doc :\nhttps://docs.google.com/document/d/1rQxVHrVb_LGGsG69G7r7-8vTVkN5Slr7eMWw9uxMTFA/edit?usp=sharing\n\nDeliverables:\n\n- [x] [New Document Version](https://docs.google.com/document/d/16uj2mK4k93xumNdU4qWVNmh8EI-yC4e8fw248S5LB-0/edit)\n- [x] Change Request. cc/ @gerardo.herzig ","state":"closed","created_at":"2018-09-12T09:57:34.420Z","updated_at":"2021-03-09T19:30:46.263Z","closed_at":"2019-12-03T10:57:28.826Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Design Document","Global:In Progress","OnGres::Support","auto updated","priority::3","team::Reliability","workflow-infra::Verify"],"milestone":{"id":1087796,"iid":59,"group_id":1112072,"title":"Reliability December 2019","description":"","state":"closed","created_at":"2019-12-03T16:20:55.704Z","updated_at":"2020-01-16T17:21:46.339Z","due_date":"2019-12-31","start_date":"2019-12-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/59"},"assignees":[{"id":2589296,"username":"emanuel_ongres","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2589296/avatar.png","web_url":"https://gitlab.com/emanuel_ongres"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":2589296,"username":"emanuel_ongres","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2589296/avatar.png","web_url":"https://gitlab.com/emanuel_ongres"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-11-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5024","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":12,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5024","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5024/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5024/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5024","relative":"#5024","full":"gitlab-com/gl-infra/reliability#5024"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6,"epic":{"id":1055,"iid":6,"title":"Configure properly Postgresql Autovacuum","url":"/groups/gitlab-com/gl-infra/-/epics/6","group_id":1112072,"human_readable_end_date":"Feb 14, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14087353,"iid":5022,"project_id":1304532,"title":"[Design Document] Postgresql Backup \u0026 Recovery","description":"Please fill with your ideas the following design doc : \nhttps://docs.google.com/document/d/1X51du8kpxX4GAmipC2DeT61JDNqTz78sHPgTBkSxa5U/edit?usp=sharing\n\nOnce ready, move the design to the Handbook and ping the team to review the MR before this is being merged. Once the MR is merged, the design is considered final.\n\nHandbook for designs: https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/source/handbook/engineering/infrastructure/design/index.html.md","state":"closed","created_at":"2018-09-12T09:42:46.070Z","updated_at":"2020-04-23T12:40:13.194Z","closed_at":"2020-04-23T09:10:01.886Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Design Document","auto updated","moved 1"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5022","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5022","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5022/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5022/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5022","relative":"#5022","full":"gitlab-com/gl-infra/reliability#5022"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":27,"epic":{"id":3033,"iid":27,"title":"Backup Masterless","url":"/groups/gitlab-com/gl-infra/-/epics/27","group_id":1112072,"human_readable_end_date":"Dec 14, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":14078014,"iid":5020,"project_id":1304532,"title":"Hurricane Florence Readiness","description":"Our region is us-east1 in Moncks Corner, SC - hurricane path is going to be near there based on NHC maps.\n\nThis is a general issue to group together actions we will take to be ready should we see disruptions of service in our regions.\n\nInitial actions:\n\n* [  ] Look into options for alternate region backup of git / nfs data\n* [x] Cloud storage is already multiregional - anything else to do?\n* [x] Make sure about.gitlab.com and any other important assets are in an alternate region\n* [ n/a too big ] Start work in Terraform to build out stack for Geo in us-west1\n\n","state":"closed","created_at":"2018-09-11T23:40:56.708Z","updated_at":"2019-05-03T18:53:55.093Z","closed_at":"2019-05-03T18:53:55.075Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":[],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5020","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5020","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5020/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5020/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5020","relative":"#5020","full":"gitlab-com/gl-infra/reliability#5020"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]