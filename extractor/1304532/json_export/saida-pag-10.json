[{"id":21464080,"iid":6801,"project_id":1304532,"title":"Mailroom locking/arbitration problem","description":"Just raised https://github.com/tpitale/mail_room/issues/84 and noting it here for any local discussion we might like to have.\n\nNoticed because we've currently got \u003e30 messages in this state (of various ages up to 4-5 months).\n\nI wonder if https://gitlab.com/gitlab-org/gitlab-ce/issues/2870#note_4184125 might be a way forward, but I'm not yet competent enough in Redis client use to comment well.\n\n/cc @DouweM - you might be interested as the author of the original patch for mail_room.","state":"closed","created_at":"2019-05-31T04:30:19.835Z","updated_at":"2019-10-01T06:21:11.322Z","closed_at":"2019-10-01T02:22:01.301Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6801","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6801","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6801/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6801/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6801","relative":"#6801","full":"gitlab-com/gl-infra/reliability#6801"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21458137,"iid":6800,"project_id":1304532,"title":"S3 credentials for new Snowplow bucket for Data Team","description":"As part of https://gitlab.com/groups/gitlab-com/-/epics/41 the data team will need read only credentials to be able to pull events in the data warehouse. \n\nAll we need is the bucket name, access key id, and the secret access key.","state":"closed","created_at":"2019-05-30T20:29:28.426Z","updated_at":"2019-12-06T21:47:00.198Z","closed_at":"2019-06-10T16:14:55.055Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["auto updated","team::Reliability"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":1942272,"username":"tayloramurphy","name":"Taylor A Murphy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1942272/avatar.png","web_url":"https://gitlab.com/tayloramurphy"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6800","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6800","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6800/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6800/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6800","relative":"#6800","full":"gitlab-com/gl-infra/reliability#6800"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":41,"epic":{"id":3755,"iid":41,"title":"Snowplow Infrastructure","url":"/groups/gitlab-com/-/epics/41","group_id":6543,"human_readable_end_date":"May 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21457788,"iid":6799,"project_id":1304532,"title":"Windows machines for GitLab Runner CI tests","description":"For GitLab Runner CI we need two more Windows machines:\n\n- one with Windows 1803\n- one with Windows 1809\n\nOn existing ones we're executing basic tests, building images for Windows Docker Containers and we will in near future start using `docker-windows` for running tests there.\n\nThe two new will be used to test support Docker for Windows with Linux containers. For this we need to ensure that HyperV is installed on the machines.\n\nIt will be enough if we will get the machines with proper Windows installed on them and with HyperV for Docker (some guidance can be found at https://blogs.msdn.microsoft.com/azuredev/2018/09/09/docker-in-azure-vm/). ~Verify can next handle installation and registration of Runner, installation of Docker and coupling it all together.","state":"closed","created_at":"2019-05-30T20:08:55.967Z","updated_at":"2019-12-06T21:47:00.054Z","closed_at":"2019-09-24T16:58:59.174Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["team::Reliability","workflow-infra::Cancelled"],"milestone":{"id":989649,"iid":40,"group_id":1112072,"title":"CI/CD \u0026 Enablement September 2019","description":"","state":"closed","created_at":"2019-09-03T14:00:40.199Z","updated_at":"2019-10-07T17:05:43.892Z","due_date":"2019-09-30","start_date":"2019-09-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/40"},"assignees":[],"author":{"id":215818,"username":"tmaczukin","name":"Tomasz Maczukin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a9a99b9665ab7eda2cd7bffd54b1836?s=80\u0026d=identicon","web_url":"https://gitlab.com/tmaczukin"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6799","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6799","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6799/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6799/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6799","relative":"#6799","full":"gitlab-com/gl-infra/reliability#6799"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21457021,"iid":6798,"project_id":1304532,"title":"RCA: Pages service interruptions","description":"## Summary\n\nAt approximately 1552UTC on May 29th and again around 1845UTC on May 30th, multiple alerts were received for backend connection errors related to the Pages service\n\nService(s) affected : ~\"Service:Pages\" \nTeam attribution : \nMinutes downtime or degradation : TBD\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident? Pages service was down\n- Who was impacted by this incident? (i.e. external customers, internal customers, specific teams, ...)\n- How did the incident impact customers? (i.e. preventing them from doing X, incorrect display of Y, ...)\n- How many attempts were made to access the impacted service/feature?\n- How many customers were affected?\n- How many customers tried to access the impacted service/feature?\n\nInclude any additional metrics that are of relevance.\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n- Did alarming work as expected?\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n## Timeline\n\nYYYY-MM-DD\n\n- 00:00 UTC - something happened\n- 00:01 UTC - something else happened\n- ...\n\nYYYY-MM-DD+1\n\n- 00:00 UTC - and then this happened\n- 00:01 UTC - and more happened\n- ...\n\n\n## Root Cause Analysis\n\nThe purpose of this document is to understand the reasons that caused an incident, and to create mechanisms to prevent it from recurring in the future. A root cause can **never be a person**, the way of writing has to refer to the system and the context rather than the specific actors.\n\nFollow the \"**5 whys**\" in a **blameless** manner as the core of the root-cause analysis.\n\nFor this it is necessary to start with the incident, and question why it happened. Keep iterating asking \"why?\" 5 times. While it's not a hard rule that it has to be 5 times, it helps to keep questions get deeper in finding the actual root cause. \n\nKeep in min that from one \"why?\" there may come more than one answer, consider following the different branches.\n\n###Example of the usage of \"5 whys\"\nThe vehicle will not start. (the problem)\n\n1. Why? - The battery is dead. \n2. Why? - The alternator is not functioning.\n3. Why? - The alternator belt has broken.\n4. Why? - The alternator belt was well beyond its useful service life and not replaced. \n5. Why? - The vehicle was not maintained according to the recommended service schedule. (Fifth why, a root cause)\n\n## What went well\n\nStart with the following:\n\n- Identify the things that worked well or as expected.\n- Any additional call-outs for what went particularly well.\n\n## What can be improved\n\nStart with the following:\n\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\n- Is there anything that could have been done to improve the detection or time to detection?\n- Is there anything that could have been done to improve the response or time to response?\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\n- Did we have any indication or beforehand knowledge that this incident might take place?\n\n\n## Corrective actions\n\n- List issues that have been created as corrective actions from this incident.\n- For each issue, include the following:\n    - \u003cBare Issue link\u003e - Issue labeled as ~\"corrective action\".\n    - Include an estimated date of completion of the corrective action.\n    - Incldue the named individual who owns the delivery of the corrective action.\n\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-05-30T19:16:39.402Z","updated_at":"2019-12-06T21:43:31.539Z","closed_at":"2019-06-26T22:41:37.986Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["IncidentReview","Service::Pages","auto updated","severity::3","team::Reliability"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6798","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6798","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6798/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6798/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6798","relative":"#6798","full":"gitlab-com/gl-infra/reliability#6798"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21455616,"iid":6796,"project_id":1304532,"title":"Git Storage Node Repository metrics","description":"I'd be interested in knowing the following about our Git storage nodes:\n\n* number of repositories per node (absolute value)\n* number of repositories per user (min, max, average, distribution) -- per node and across the fleet\n* size of repositories (min, max, average, distribution) -- per node and across the fleet\n* number of repositories based on activity (distribution: last hour, last 6 hours, last 12 hours, last 24 hours, last 3 days, last 7 days, last 2 weeks, last month, last 3 months, last 6 months, last 9 months, last 12 months, and everything else)\n\nWe should keep track of these metrics on an ongoing basis.\n\nThis request is intended to be able to help us guide decisions relevant to storage architecture.","state":"closed","created_at":"2019-05-30T17:58:05.375Z","updated_at":"2021-06-24T08:10:14.009Z","closed_at":"2019-10-02T19:04:37.489Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-06-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6796","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6796","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6796/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6796/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6796","relative":"#6796","full":"gitlab-com/gl-infra/reliability#6796"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21454594,"iid":6794,"project_id":1304532,"title":"Add PathFactory to the CNAME for branded URL","description":"We (Mktg) are bringing on a new tool that will handled content distribution and syndication. \nCan we please get a branded URL set up for this tool. \n\n[PathFactory Instructions](https://lookbookhq.force.com/nook/s/article/how-to-set-up-custom-subdomain)  \n\n### Desired CNAME: learn.gitlab.com \n\nMktgOps main point of contact: @nlarue \n\nPlease let me know if there are questions. \n\n/cc @nlarue @northrup","state":"closed","created_at":"2019-05-30T17:13:16.108Z","updated_at":"2020-12-09T15:11:18.955Z","closed_at":"2020-03-13T22:06:55.188Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","unscheduled","workflow-infra::Done"],"milestone":{"id":918500,"iid":31,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team July 2019","description":"","state":"closed","created_at":"2019-06-28T23:28:40.137Z","updated_at":"2019-08-06T13:08:46.604Z","due_date":"2019-07-31","start_date":"2019-07-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/31"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":640570,"username":"jjcordz","name":"Jennifer \"JJ\" Cordz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/640570/avatar.png","web_url":"https://gitlab.com/jjcordz"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":55,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6794","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6794","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6794/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6794/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6794","relative":"#6794","full":"gitlab-com/gl-infra/reliability#6794"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21422105,"iid":6791,"project_id":1304532,"title":"Bump bootstrap script to version 8","description":"The latest version of the bootstrap script (v8) includes a check to ensure that the requested kernel version is available before removing the current running kernel and attempting the upgrade (since it will naturally fail). However, we are not (yet) using that bootstrap script as the default everywhere, yet.\n\nThis issue will track the effort to update all version references for module source lines to ensure that version [v1.0.2](https://gitlab.com/gitlab-com/gl-infra/terraform-modules/google/bootstrap/tree/v1.0.2) of the module is loaded and all environments are referencing `v8` as the default version of the script.\n\nIn order to prevent terraform from unnecessarily rebooting running instances, we will also have to use the `gcloud` CLI to update the `startup_script` metadata key on running instances.","state":"closed","created_at":"2019-05-29T21:44:12.393Z","updated_at":"2019-12-06T21:43:56.497Z","closed_at":"2019-05-31T01:28:03.331Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["team::Reliability","terraform"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6791","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6791","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6791/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6791/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6791","relative":"#6791","full":"gitlab-com/gl-infra/reliability#6791"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":68,"epic":{"id":7622,"iid":68,"title":"Terraform Runs are not clean in any environment","url":"/groups/gitlab-com/gl-infra/-/epics/68","group_id":1112072,"human_readable_end_date":"Sep 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21366725,"iid":6784,"project_id":1304532,"title":"Personal staging credential gone - Access request","description":"My login for `staging.gitlab.com` is no longer present in the DB and hence cannot access staging anymore. This issue is to keep track of the request to get access again. \n\nNot sure how my account got wiped from DB, yet.","state":"closed","created_at":"2019-05-28T11:59:36.054Z","updated_at":"2019-05-28T13:34:12.667Z","closed_at":"2019-05-28T12:49:54.381Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["access request","toil"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6784","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6784","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6784/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6784/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6784","relative":"#6784","full":"gitlab-com/gl-infra/reliability#6784"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21357863,"iid":6781,"project_id":1304532,"title":"Send a slack notification to the production channel and infra lounge when the oncall report is generated","description":"This would be a nice addition to the oncall report","state":"closed","created_at":"2019-05-28T08:27:26.287Z","updated_at":"2022-08-02T06:05:50.033Z","closed_at":"2022-08-02T06:05:50.020Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["newhire"],"milestone":null,"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6781","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6781","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6781/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6781/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6781","relative":"#6781","full":"gitlab-com/gl-infra/reliability#6781"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21350342,"iid":6780,"project_id":1304532,"title":"PackageCloud backups 'failing' according to DMS","description":"Worked on May 4 and 13th, but haven't completed with exit code 0 since.\n\nThe error from the logs is\n```ERROR: Upload of '/var/opt/packagecloud/backups/packagecloud-streamed-database-backup.1551991511.xbstream' part 11 failed. Aborting multipart upload.``` \nbut the s3 bucket looks like it is correct, at least in list of files and byte sizes. \n\nSomething weird is going on","state":"closed","created_at":"2019-05-28T03:07:23.507Z","updated_at":"2019-05-28T04:20:16.941Z","closed_at":"2019-05-28T04:20:16.925Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":[],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6780","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6780","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6780/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6780/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6780","relative":"#6780","full":"gitlab-com/gl-infra/reliability#6780"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21335800,"iid":6779,"project_id":1304532,"title":"Break down postgres upgrade OKR","description":"We have this OKR: `Upgrade Postgres to version 11 with log centralization and reporting.` captured in\n* milestone: https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/22.\n* epic: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/67\n\nI propose to split this apart into multiple epics:\n\n1. Postgres major upgrade\n1. Log centralization\n1. Reporting\n\nThose are largely independent chunks of work we can parallelize or address independently across teams.\n\ncc @ansdval","state":"closed","created_at":"2019-05-27T14:28:34.161Z","updated_at":"2019-12-06T21:43:45.092Z","closed_at":"2019-05-31T14:45:41.090Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":878523,"iid":22,"group_id":1112072,"title":"Secure and Defend - Upgrade Postgres to version 11 with log centralization and reporting","description":"","state":"closed","created_at":"2019-05-17T21:56:51.299Z","updated_at":"2019-09-09T20:44:30.253Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/22"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6779","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6779","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6779/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6779/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6779","relative":"#6779","full":"gitlab-com/gl-infra/reliability#6779"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":67,"epic":{"id":7520,"iid":67,"title":"Upgrade Postgres to version 11 with logging improvements and workload analysis [35%]","url":"/groups/gitlab-com/gl-infra/-/epics/67","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21331275,"iid":6777,"project_id":1304532,"title":"Evaluate usage of more recent ZoL versions on -gcp kernels","description":"ZoL 0.8.0 has been released, where as Ubuntu Bionic ships with 0.7.x.\n\n[ZoL 0.8.0 has lots of improvements, that we want to use if possible.](https://github.com/zfsonlinux/zfs/releases/tag/zfs-0.8.0)\n\nWe will have to compile and package it our-own. This also gives us the ability to apply patches as needed. (Including patches that violate the GPL, as long as we do not redistribute those and the binaries, see https://www.gnu.org/licenses/old-licenses/gpl-2.0-faq.html#GPLRequireSourcePostedPublic)\n\nI have developed a prototype CI pipeline to compile the kernel modules here: https://gitlab.com/gitlab-com/gl-infra/gitlab-zfs/\n\nTl;Dr; of the comments: It works. Bionic \u0026 xenial. But we'll not be running it in prod (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6883#note_180038845)","state":"closed","created_at":"2019-05-27T12:24:57.302Z","updated_at":"2019-06-12T08:27:19.206Z","closed_at":"2019-06-05T11:15:16.822Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["Global:In Progress","auto updated"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6777","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6777","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6777/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6777/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6777","relative":"#6777","full":"gitlab-com/gl-infra/reliability#6777"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21330923,"iid":6776,"project_id":1304532,"title":"Increase thanos compact disk size","description":"The thanos-compact component needs a bit more disk space for performing compactions. Currently it's 100GB, we should increase this to 200GB.","state":"closed","created_at":"2019-05-27T12:12:08.347Z","updated_at":"2019-10-31T22:25:12.459Z","closed_at":"2019-05-28T13:49:20.549Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6776","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6776","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6776/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6776/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6776","relative":"#6776","full":"gitlab-com/gl-infra/reliability#6776"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21328399,"iid":6774,"project_id":1304532,"title":"Upgrade to PgBouncer 1.12.0","description":"Pgbouncer 1.12.0 has been released.\n\n\nWe should look into upgrading PgBouncer accordingly.\n\nDescription of the change : https://gitlab.com/gitlab-com/gl-infra/production/issues/1325\n\nThis maintenance would be done to a critical component from the platform so we should schedule to a low peak time as a c1.\n\nFor the read only nodes:\n\n* Stop the traffic for the node, and remove the node that could become a primary database.\n* execute a chef cookbook to uninstall and install the newer version of pgbouncer (or upgrade), keep the same configurations. -Restore the traffic and make the node again available to become a primary database.\n\nFor the pgbouncer nodes ( that we will have 2 fleets with 3 nodes), execute in all the nodes :\n\n* take a node out from the rotation on the ILB.\n* Update the config from the other 2 nodes from pgbouncer to add temporarily the traffic from the node that is out.\n* execute a chef cookbook to uninstall and install the newer version of pgbouncer (or upgrade), keep the same configurations.\n* restore the config from the 2 nodes from pgbouncer.\n* Add the node back to the rotation on the ILB.","state":"closed","created_at":"2019-05-27T11:09:32.173Z","updated_at":"2021-06-24T08:09:24.920Z","closed_at":"2020-01-15T13:10:59.709Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["C2","Database","blocker","corrective action","priority::1","workflow-infra::Done"],"milestone":{"id":1114392,"iid":63,"group_id":1112072,"title":"W2 DBRE","description":"","state":"closed","created_at":"2020-01-06T15:51:46.677Z","updated_at":"2020-01-23T15:42:54.113Z","due_date":"2020-01-17","start_date":"2020-01-06","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/63"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":25,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2020-01-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6774","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":20,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6774","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6774/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6774/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6774","relative":"#6774","full":"gitlab-com/gl-infra/reliability#6774"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":108,"epic":{"id":14194,"iid":108,"title":"Review database pool connection solution","url":"/groups/gitlab-com/gl-infra/-/epics/108","group_id":1112072,"human_readable_end_date":"Jan 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21278361,"iid":6772,"project_id":1304532,"title":"Codify update rules for GitLab Status page","description":"Our customers\u0026mdash;internal and external\u0026mdash;rely on status.gitlab.com to determine whether an issue they're experiencing is known by our support and reliability teams. The status page is also the primary means for broadcasting public information about incidents. To ensure this is always the case, we will produce a set of rules in the on-call checklist. We should update our tools to communicate around the status updates, thus ensuring the status page is not a secondary medium for communication.","state":"closed","created_at":"2019-05-24T19:49:23.722Z","updated_at":"2019-10-08T06:22:34.525Z","closed_at":"2019-10-08T02:20:59.037Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6772","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6772","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6772/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6772/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6772","relative":"#6772","full":"gitlab-com/gl-infra/reliability#6772"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21276815,"iid":6770,"project_id":1304532,"title":"SREs should all have Zendesk \"Light Agent\" access","description":"As outlined in https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/23124, all SREs when they're onboarded should setup Zendesk \"Light Agent\" account access. Because this addition to the list was added after everyone's start date, please follow the instructions provided by [internal-support](https://about.gitlab.com/handbook/support/internal-support/#light-agent-zendesk-accounts-available-for-all-gitlab-staff) to setup your access.\n\nPlease confirm:\n\n- [x] @abrandl \n- [x] @ahanselka \n- [x] @ahmadsherif \n- [x] @alejandro \n- [x] @cmcfarland \n- [x] @craig \n- [x] @craigf \n- [x] @cmiskell \n- [x] @cshobe \n- [x] @dawsmith \n- [x] @devin \n- [x] @Finotto \n- [ ] @glopezfernandez \n- [x] @hphilipps \n- [x] @mwasilewski-gitlab \n- [x] @msmiley \n- [x] @nnelson \n- [x] @yguo \n\nOptional:\n\n- [ ] @andrewn \n- [ ] @jarv \n- [ ] @marin \n- [x] @skarbek","state":"closed","created_at":"2019-05-24T18:26:24.958Z","updated_at":"2020-08-25T18:52:35.328Z","closed_at":"2019-06-11T13:21:27.777Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["corrective action"],"milestone":null,"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-05-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6770","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":22,"completed_count":18},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6770","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6770/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6770/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6770","relative":"#6770","full":"gitlab-com/gl-infra/reliability#6770"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21257979,"iid":6766,"project_id":1304532,"title":"improve incident management tooling","description":"There are several open issues to improve incident management which need to get finished:\n\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5543\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6424\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5359\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5508 (was this ever used?)\n- https://gitlab.com/gitlab-com/runbooks/issues/19\n\nWe also should try to reduce the number of bots that need to be used and make them easy and consistent to use and test.\n\nDuring last incident the `/start-incident` slack command failed to create an incident issue. We should regularly test our tooling and think about regular incident trainings.","state":"closed","created_at":"2019-05-24T09:15:43.501Z","updated_at":"2019-12-06T21:47:47.737Z","closed_at":"2019-09-25T09:46:32.110Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["corrective action","meta","team::Reliability"],"milestone":{"id":1010428,"iid":46,"group_id":1112072,"title":"Dev \u0026 Ops: 2019-09-23 - 2019-10-06","description":"","state":"closed","created_at":"2019-09-23T09:44:24.361Z","updated_at":"2019-10-08T10:08:00.814Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/46"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6766","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6766","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6766/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6766/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6766","relative":"#6766","full":"gitlab-com/gl-infra/reliability#6766"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21257530,"iid":6765,"project_id":1304532,"title":"consolidate incident management documentation","description":"We have several issues with our incident management documentation:\n\n- we have documentation in several places with different/outdated content:\n  - https://about.gitlab.com/handbook/engineering/infrastructure/incident-management/\n  - https://gitlab.com/gitlab-com/runbooks/blob/master/howto/manage-production-incidents.md\n  - https://gitlab.com/gitlab-com/runbooks/blob/master/incidents/general_incidents.md\n  - https://gitlab.com/gitlab-com/runbooks/blob/master/incidents/database.md\n- The handbook page is a very long read which is fine to learn all about the processes if you have time but does not work if you have an incident and need to figure what to do ASAP.\n- We have no documentation on\n  - how to find the EOC/IMOC/CMOC\n  - how to page the EOC/IMOC/CMOC\n  - chatbots and their usage\n\nWe need to consolidate this documentation and make it easy to find and useful for everybody during an incident.","state":"closed","created_at":"2019-05-24T08:59:25.243Z","updated_at":"2021-06-09T03:02:56.857Z","closed_at":"2019-06-12T22:14:01.048Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["SRE:On-call","corrective action"],"milestone":null,"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":0,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6765","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6765","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6765/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6765/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6765","relative":"#6765","full":"gitlab-com/gl-infra/reliability#6765"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21239178,"iid":6764,"project_id":1304532,"title":"Write runbook on CodeSandbox bucket","description":"In https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6709 we set up a custom bucket so we could host codesandbox ourselves. We should write a runbook on how it was set up and is deployed to.","state":"closed","created_at":"2019-05-23T21:44:52.627Z","updated_at":"2019-12-06T21:46:59.525Z","closed_at":"2019-05-31T17:33:30.169Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["auto updated","team::Reliability"],"milestone":{"id":868016,"iid":20,"group_id":1112072,"title":"CI/CD \u0026 Enablement Reliability Engineering May 2019","description":"Tracking asks for CI/CD and Enablement of Reliability teams in May","state":"closed","created_at":"2019-05-07T16:51:19.186Z","updated_at":"2019-06-11T13:53:04.137Z","due_date":"2019-05-31","start_date":"2019-05-05","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/20"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6764","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6764","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6764/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6764/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6764","relative":"#6764","full":"gitlab-com/gl-infra/reliability#6764"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21230737,"iid":6760,"project_id":1304532,"title":"Upgrade to terraform 0.12","description":"Terraform 0.12 [has been officially released](https://www.hashicorp.com/blog/announcing-terraform-0-12), and contains many improvements based on the corresponding updates to HCL that we can leverage in our infrastructure code. This issue is to track efforts for working through the [upgrade guide](https://www.terraform.io/upgrade-guides/0-12.html) on all of our environments in gitlab-com/gitlab-com-infrastructure\u003e\n\n* [x] update all envs in gitlab-com-infrastructure to 0.11.14\n* [x] update terraform modules to 0.11.14\n* [x] update all environments to use new versions of modules\n* [x] update terraform modules to 0.12\n* [x] update all environments to 0.12, I tested it on gstg and it was clean, @craigf already did some work here: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7067\n\n/cc @ansdval @dawsmith @Finotto FYI for prioritization","state":"closed","created_at":"2019-05-23T17:31:45.760Z","updated_at":"2019-12-06T21:42:42.194Z","closed_at":"2019-09-16T11:56:31.833Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["team::Reliability","terraform","workflow-infra::Done"],"milestone":{"id":995879,"iid":43,"group_id":1112072,"title":"W37 Secure \u0026 Defend","description":"We'll be keeping the same Kanban board for team work and filtering on a new milestone every odd numbered week. This \"sprint\" construct is going to be used to facilitate backlog grooming and planning.","state":"closed","created_at":"2019-09-09T19:23:14.535Z","updated_at":"2019-09-23T21:27:53.972Z","due_date":"2019-09-22","start_date":"2019-09-09","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/43"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":45,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6760","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":13,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6760","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6760/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6760/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6760","relative":"#6760","full":"gitlab-com/gl-infra/reliability#6760"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":68,"epic":{"id":7622,"iid":68,"title":"Terraform Runs are not clean in any environment","url":"/groups/gitlab-com/gl-infra/-/epics/68","group_id":1112072,"human_readable_end_date":"Sep 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21226494,"iid":6758,"project_id":1304532,"title":"Complete the container registry deployment for a kubernetes cluster in pre","description":"We've built a [PoC] in the past, let's move from PoC to a [real environment].\n\nThis is the realization of decisions made in this issue: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5337\n\n[PoC]: https://gitlab.com/gitlab-com/gl-infra/kubernetes-poc\n[real environment]: https://ops.gitlab.net/gitlab-com/gl-infra/k8s-workloads/gitlab-com","state":"closed","created_at":"2019-05-23T15:15:10.001Z","updated_at":"2019-09-26T15:50:24.290Z","closed_at":"2019-06-03T18:57:41.014Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Service::Container Registry","kubernetes","team::Delivery"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6758","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6758","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6758/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6758/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6758","relative":"#6758","full":"gitlab-com/gl-infra/reliability#6758"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21193998,"iid":6750,"project_id":1304532,"title":"RCA: SSO enforcement feature breaking pipelines","description":"## Summary\n\nEnabling the feature `enforced_sso_requires_session` was making groups inaccessible for members and ci pipelines fail for customers using SAML: https://gitlab.com/gitlab-org/gitlab-ee/issues/11704\n\nService(s) affected : ~\"Service:CI Runners\" \nTeam attribution : Backend Manage\nMinutes downtime or degradation : 266\n\n## Impact \u0026 Metrics\n\n### What was the impact of the incident?\nCustomers using SAML/SSO for authentication could not access groups, even though they had proper permissions. Both the users attempting to authorize views in the UI and the ci-runners owned by those encountered failures.\n\n### Who was impacted by this incident?\n\nAny customer using SAML/SSO authentication.\n\n### How did the incident impact customers?\n\nCustomers browsing the UI received 404s to obfuscate the existence of group paths. And customers' ci-runners failed with 403 errors. While the feature flag was set, it was only after customers re-authenticated with their SSO provider did their projects become visible again.\n\n### How many attempts were made to access the impacted service/feature?\n\nThere was only a moderate raise of 404 errors on the `GroupsController` between 9 and 15. Compared to the total amount of 404s that's indicating that not many users have been affected.\n\n![image](/uploads/1597048cd1296ae69416d37566eb392d/image.png)\n\n### How many customers were affected?\n\n4 customers reported the issue\u0026mdash;one of them had 90 users affected. At the peak of the issue we encountered nearly 400 errors during a 30 minute period. Given our natural error rate, we estimate that \u003c 10% of these were legitimate errors.\n\n![image](/uploads/e3f66f99e0c67472bfdb8cf7f52c4714/image.png)\n\n## Detection \u0026 Response\n\n### How was the incident detected?\n\nCustomers began reporting issues to support via Zendesk.\n- https://gitlab.zendesk.com/agent/tickets/122122\n- https://gitlab.zendesk.com/agent/tickets/122134\n- https://gitlab.zendesk.com/agent/tickets/122145\n\n### Did alarming work as expected?\n\nWe received no alerts for this issue, and the error rate (404s, 403s) was too low to be visible on any dashboards or sentry.\n\n### How long did it take from the start of the incident to its detection?\n\nAfter 23m the first customer reported via Zendesk.\n\n### How long did it take from detection to remediation?\n\n243 minutes.\n\n### Were there any issues with the response to the incident?\n\nYes. It took 2h33m from first customer report to response, which resulted in gitlab-org/gitlab-ee/issues/11704. Dialogue in that issue did not include much feedback from customers, because the initial conversations took place in Zendesk.\n\nAdditionally, it proved difficult for @markpundsack to open an incident in the Infrastructure departments production tracker. Which unnecessarily delayed the page to the Reliability Engineer on call. Mark cited confusion in the handbook's language for [Incident Management](https://about.gitlab.com/handbook/engineering/infrastructure/incident-management/) as the source of his confusion. Finally, once he did find instructions to use the `/start-incident` command in the `#incident-management` Slack channel, the `imoc-bot` received a 404 error and failed to create an incident issue (https://gitlab.slack.com/archives/CB7P5CJS1/p1558534349190400) in the production tracker for the SRE on call.\n\n## Timeline\n\nSee incident ticket: https://gitlab.com/gitlab-com/gl-infra/production/issues/840#timeline.\n\n## Root Cause Analysis\n\n1. Chatbot permitted a feature flag to flip during an ongoing production deployment.\n1. The line of communication for escalation from support did not include Reliability Engineering.\n1. Documentation for engaging Reliability Engineering was difficult to interpret and follow.\n1. Metrics and monitoring did detect the issue\u0026mdash;it was an incredibly low number relative to all 40X errors\u0026mdash;though it was anomalous.\n\n## What went well\n\n- Support did a great job at creating the gitlab-ee issue and pointing all reporting customers to it so information could be centralized.\n- After escalating the issue to an incident the cause was found within 1 minute by @stanhu and mitigated by @ahanselka within 5 minutes.\n\n## What can be improved\n\n- We will improve the the feature flag change process for better observability and awareness.\n- We will be more responsive in the the gitlab-ee issue so customers know we are working on it\u0026mdash;before an incident issue has been created.\n- Creating and escalating incidents should be as easy as possible for everybody and well documented.\n  - We should broaden incident management training outside of Reliability Engineering for exposure to other organizations at GitLab.\n\n## Corrective actions\n\n- https://gitlab.com/gitlab-org/release/framework/issues/335\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6765\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6766\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6770\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6773\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6772\n- https://gitlab.com/gitlab-org/gitlab-ee/issues/11757\n\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-05-22T16:27:44.139Z","updated_at":"2019-10-04T09:08:12.087Z","closed_at":"2019-07-11T18:47:27.412Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["IncidentReview","outage","unscheduled"],"milestone":null,"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6750","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6750","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6750/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6750/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6750","relative":"#6750","full":"gitlab-com/gl-infra/reliability#6750"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21192445,"iid":6749,"project_id":1304532,"title":"Broken mirroring for terraform modules (ops -\u003e .com)","description":"It appears that the credentials changed or were not validated when we relocated the terraform modules to ops, and as such mirroring from ops-\u003e.com is currently broken for most/all module repositories. We need to update the mirroring configurations to use the updated/correct credentials for `ops-gitlab-net`","state":"closed","created_at":"2019-05-22T15:49:37.879Z","updated_at":"2019-06-14T15:47:27.403Z","closed_at":"2019-06-14T15:47:27.381Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["SRE:On-call","terraform"],"milestone":null,"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6749","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6749","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6749/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6749/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6749","relative":"#6749","full":"gitlab-com/gl-infra/reliability#6749"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":68,"epic":{"id":7622,"iid":68,"title":"Terraform Runs are not clean in any environment","url":"/groups/gitlab-com/gl-infra/-/epics/68","group_id":1112072,"human_readable_end_date":"Sep 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21165208,"iid":6745,"project_id":1304532,"title":"Update the terraform gke module to provide the ability to separate how node pools are created","description":"Our current GKE module relies on the use of the default node pool.  This is a great default, but limits our ability to customize a cluster in the future in the cases where we need beefier nodes for X reason, or if we need to enable or disable preemptible instances for some other reason.\n\nDisable the default node pool and provides the ability to configure many node pools.","state":"closed","created_at":"2019-05-21T21:01:58.622Z","updated_at":"2019-09-25T14:38:08.694Z","closed_at":"2019-05-28T14:26:11.890Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["kubernetes","team::Delivery","terraform"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6745","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6745","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6745/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6745/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6745","relative":"#6745","full":"gitlab-com/gl-infra/reliability#6745"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21165169,"iid":6744,"project_id":1304532,"title":"Update the terraform gke module to provide the ability to create regional clusters","description":"Currently GKE clusters default to creating a single master node in the default region of choice.  What if that region goes down for X reason?  Let's enhance our gke module to include the ability to enable regional clusters optionally.  This will provide us with redundant kube api servers.","state":"closed","created_at":"2019-05-21T20:59:45.400Z","updated_at":"2019-09-25T14:38:08.340Z","closed_at":"2019-05-30T11:10:00.867Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["kubernetes","team::Delivery","terraform"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6744","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6744","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6744/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6744/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6744","relative":"#6744","full":"gitlab-com/gl-infra/reliability#6744"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21164859,"iid":6743,"project_id":1304532,"title":"Update the terraform gke module with the ability to lock down what networks have access to the kube api server","description":"By default GKE clusters have open access from all of the Internet to access the API server.  We should limit this, or at LEAST provide a mechanism to update this list in the future.\n\nhttps://cloud.google.com/kubernetes-engine/docs/how-to/authorized-networks\n\nhttps://www.terraform.io/docs/providers/google/r/container_cluster.html#master_authorized_networks_config","state":"closed","created_at":"2019-05-21T20:44:33.878Z","updated_at":"2019-09-25T16:01:31.133Z","closed_at":"2019-05-29T14:04:38.885Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Kubernetes::Prep","auto updated","team::Delivery","terraform"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6743","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6743","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6743/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6743/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6743","relative":"#6743","full":"gitlab-com/gl-infra/reliability#6743"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21164819,"iid":6742,"project_id":1304532,"title":"Update the terraform gke module to provide the option to enable network policies feature of GKE","description":"[GKE Network Policy](https://cloud.google.com/kubernetes-engine/docs/how-to/hardening-your-cluster#restrict_with_network_policy) provides a method of locking down traffic inside of the Kubernetes cluster.  Update our module to provide a method of enabling this optionally with some form of configuration.\n\nhttps://www.terraform.io/docs/providers/google/r/container_cluster.html#network_policy","state":"closed","created_at":"2019-05-21T20:42:50.944Z","updated_at":"2019-09-25T16:01:30.835Z","closed_at":"2019-05-29T15:43:40.303Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Kubernetes::Prep","team::Delivery","terraform"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6742","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6742","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6742/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6742/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6742","relative":"#6742","full":"gitlab-com/gl-infra/reliability#6742"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21164731,"iid":6741,"project_id":1304532,"title":"Update the terraform gke module with the ability to create private clusters","description":"In general, there really isn't a reason why our clusters are public.  These nodes all have public ip addresses and all egress traffic comes from whatever that nodes IP address is.  Let's fix this.  This will improve our security stature by limiting what IP addresses we expose to the outside world, this will make it easier for the community as we'll have a set IP address where our traffic comes from, and it just feels like a cleaner more sane configuration.\n\nThis will require the use of a NAT of some sort, otherwise egress traffic won't know how to reach the Internet.","state":"closed","created_at":"2019-05-21T20:39:03.330Z","updated_at":"2019-09-25T16:01:30.406Z","closed_at":"2019-05-29T14:05:28.719Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Kubernetes::Prep","auto updated","team::Delivery","terraform"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6741","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6741","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6741/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6741/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6741","relative":"#6741","full":"gitlab-com/gl-infra/reliability#6741"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21164677,"iid":6740,"project_id":1304532,"title":"Update the terraform gke module to allow oauth scopes to be configurable","description":"Right now our gke module doesn't allow this to be customized.  This will be important if we choose to utilize specific google services.  We can also limit what we currently deploy to our clusters as it is quite generous.","state":"closed","created_at":"2019-05-21T20:36:22.887Z","updated_at":"2019-09-25T16:01:30.107Z","closed_at":"2019-05-22T17:55:47.962Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Kubernetes::Prep","auto updated","team::Delivery","terraform"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6740","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6740","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6740/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6740/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6740","relative":"#6740","full":"gitlab-com/gl-infra/reliability#6740"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21164661,"iid":6739,"project_id":1304532,"title":"Update the gke terraform module configuration for disable-legacy-endpoint","description":"The terraform module currently allows this to be configured.  This is bad practice and regardless, future clusters after 1.12 will forcibly disable this option.  Let's proceed to either remove or set a default to ensure this is disabled by default on all k8s clusters we create.","state":"closed","created_at":"2019-05-21T20:35:23.929Z","updated_at":"2019-09-25T16:01:29.679Z","closed_at":"2019-05-22T17:55:34.063Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Kubernetes::Prep","auto updated","team::Delivery","terraform"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6739","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6739","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6739/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6739/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6739","relative":"#6739","full":"gitlab-com/gl-infra/reliability#6739"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":70,"epic":{"id":7650,"iid":70,"title":"Migrate the GitLab Registry Service to Kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/70","group_id":1112072},"iteration":null,"health_status":null},{"id":21163552,"iid":6738,"project_id":1304532,"title":"Create a consul server fleet for pre","description":"For the purpose of implementing https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6132 a consul server cluster (probably just 2 to start) on the `pre` environment would be useful to have a low-impact place to test the necessary changes\n\n/cc @jarv @skarbek","state":"closed","created_at":"2019-05-21T19:57:11.230Z","updated_at":"2019-12-06T21:46:46.671Z","closed_at":"2019-05-22T19:15:50.447Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["auto updated","team::Reliability"],"milestone":{"id":878550,"iid":26,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Chef 15 and Consul for service registration","description":"We are currently running most chef clients on Chef 12 and the current version is Chef 15.  This KR will scope the size of the effort to upgrade nodes in production to chef 15 and pick a reasonable effort to do in Q2.\r\n\r\nWe also had carry over for finishing Consul service registration work from 2019FYQ1.\r\n\r\nEpics:\r\n1. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/69\r\n2. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/57","state":"closed","created_at":"2019-05-17T22:46:07.911Z","updated_at":"2019-12-04T21:44:14.005Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/26"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6738","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6738","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6738/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6738/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6738","relative":"#6738","full":"gitlab-com/gl-infra/reliability#6738"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":69,"epic":{"id":7633,"iid":69,"title":"Wrap up of Consul Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/69","group_id":1112072},"iteration":null,"health_status":null},{"id":21162278,"iid":6737,"project_id":1304532,"title":"Register services necessary for using consul for host inventory","description":"As part of https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6153 and based on the notes of https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/20889, have each node register its services with consul for the purpose of node inventory.\n\n- chef-repo MR: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/1199\n\n/cc @dawsmith @devin @jarv","state":"closed","created_at":"2019-05-21T18:59:45.144Z","updated_at":"2019-12-06T21:46:46.485Z","closed_at":"2019-06-07T02:42:58.566Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["team::Reliability"],"milestone":{"id":878550,"iid":26,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Chef 15 and Consul for service registration","description":"We are currently running most chef clients on Chef 12 and the current version is Chef 15.  This KR will scope the size of the effort to upgrade nodes in production to chef 15 and pick a reasonable effort to do in Q2.\r\n\r\nWe also had carry over for finishing Consul service registration work from 2019FYQ1.\r\n\r\nEpics:\r\n1. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/69\r\n2. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/57","state":"closed","created_at":"2019-05-17T22:46:07.911Z","updated_at":"2019-12-04T21:44:14.005Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/26"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6737","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6737","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6737/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6737/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6737","relative":"#6737","full":"gitlab-com/gl-infra/reliability#6737"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":69,"epic":{"id":7633,"iid":69,"title":"Wrap up of Consul Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/69","group_id":1112072},"iteration":null,"health_status":null},{"id":21152880,"iid":6734,"project_id":1304532,"title":"Help debug SSO Enforcement by running a few lines in rails console in staging","description":"## Why\n\nI'm testing SSO Enforcement on staging and it is working for groups but not a particular project. \n\n## What\n\nOn staging, run the following from a rails console:\n\n```ruby\nGitlab::Auth::GroupSaml::SsoEnforcer.define_method(:active_session?){ false }\npolicy = ProjectPolicy.new(User.find_by(username: 'jamedjo'), Project.find_by_full_path('jej-group-saml-test/test-subproject-within-enforced-ssso'))\npolicy.debug(:read_project)\npolicy.debug(:guest_access)\npolicy.lookup_access_level!\npolicy.needs_new_sso_session?\n```","state":"closed","created_at":"2019-05-21T15:12:31.685Z","updated_at":"2019-06-05T21:31:23.074Z","closed_at":"2019-06-05T20:54:55.018Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["SRE:On-call","requires production access","toil","unblocks others","unscheduled"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":654619,"username":"jamedjo","name":"James Edwards-Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/654619/avatar.png","web_url":"https://gitlab.com/jamedjo"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6734","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6734","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6734/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6734/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6734","relative":"#6734","full":"gitlab-com/gl-infra/reliability#6734"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21151972,"iid":6733,"project_id":1304532,"title":"[Design Doc] Drop share-01 in favor of cloud storage","description":"","state":"closed","created_at":"2019-05-21T14:46:30.261Z","updated_at":"2019-06-11T13:43:04.217Z","closed_at":"2019-06-11T12:46:48.785Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Design Document"],"milestone":{"id":881177,"iid":27,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Move writes from NFS (shared01) to object storage","description":"","state":"closed","created_at":"2019-05-21T07:00:19.518Z","updated_at":"2019-10-09T16:21:46.872Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/27"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6733","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6733","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6733/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6733/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6733","relative":"#6733","full":"gitlab-com/gl-infra/reliability#6733"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":63,"epic":{"id":7472,"iid":63,"title":"Move writes from NFS (shared01) to object storage - 85%","url":"/groups/gitlab-com/gl-infra/-/epics/63","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21103659,"iid":6727,"project_id":1304532,"title":"Can terraform git storage nodes that use ZFS","description":"After https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6726 is complete, implement terraform code that will allow us to provision \"new\" file servers with the decided hardware configuration. These new file servers should be a separate TF resource declaration with their own `count`.\n\nThe MR should not actually cause any new nodes to be provisioned (i.e. set count on the new resource declaration to 0). Old storage nodes should not be deleted(!).","state":"closed","created_at":"2019-05-20T18:13:51.671Z","updated_at":"2019-07-18T16:30:25.732Z","closed_at":"2019-07-18T16:04:42.979Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Global:In Progress","auto updated"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6727","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6727","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6727/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6727/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6727","relative":"#6727","full":"gitlab-com/gl-infra/reliability#6727"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21103616,"iid":6726,"project_id":1304532,"title":"Decide on disk layout for storage nodes","description":"Following the results from https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6306, decide on a storage layout for vdevs. The 2 main contenders at the moment are:\n\n* RAIDZ1 with 9 disks (8 usable, 1 parity)\n* Single disk\n\nSingle disk is often called out as bad practice for ZFS, but [GCP PDs](https://cloud.google.com/persistent-disk/) are advertised as having high availability, data redundancy, and error correction. We need to evaluate this and weigh up whether it's worth adding redundancy at the ZFS level.\n\nThe throughput of the configurations must also be a factor. We don't want reduced throughput compared to today.\n\nThe total usable filesystem space per node must be at least 16TB (overlaps with discussion with quotas in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6850), the same as we have today. Note that this will be less than the zpool space due to a reservation filesystem (see https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6850), and this zpool space may be less than the total PD disk space provisioned due to RAIDZ redundancy (if we choose raidz).\n\nWe intend to keep the same shard size as today. At the time of writing this is 32 x 16TB in prod. Changing this would involve changing too many things at once.\n\nAnother thing to take into consideration is that the zpool space may need to be substantially larger than what we expect due to snapshot [bloat after a git repack operation](https://christian.amsuess.com/idea-incubator/space-efficient-git). A ZFS snapshot taken before the repack will reference disjoint blocks to one taken after. Therefore the zpool disk usage for the repo will be doubled until the old snapshot passes out of the retention window. If repacking occurred simultaneously for every repo on a GitLab installation (which is unlikely), our filesystem usage would spike to double. Therefore in the worst case we would need at least twice the usable filesystem space as the data we intend to store on the node. However, since repacking of different repos should be spread out in time in realistic scenarios, we could use a lower multiple.\n\nAlso, decide on a storage layout for L2ARC. There is not much debate about this at the time of writing. The initially proposed configuration is 2 x 375GB ephemeral [local SSDs](https://cloud.google.com/compute/docs/disks/local-ssd) (they are fixed size) connected via NVMe.\n\nWe have already decided to keep using n1-standard-32 VMs for the storage nodes, so memory and CPU will not change.\n\nThe deliverable of this issue is not necessarily code, as we will need to tackle this very early in the project, but  a comment that we can use for reference when we come to write some terraform.\n\nPerformance characteristics of the candidate configurations are here: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6883\n\nFinally, satisfy yourself that we don't make life too hard for ourselves when it comes to restoring an old backup from GCE snapshots if we choose raidz.","state":"closed","created_at":"2019-05-20T18:10:34.541Z","updated_at":"2019-10-02T23:50:58.646Z","closed_at":"2019-06-25T14:02:27.945Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["Global:In Progress"],"milestone":{"id":881181,"iid":29,"group_id":1112072,"title":"Dev \u0026 Ops - FY20Q2::KR::Migrate repos to ZFS storage","description":"","state":"closed","created_at":"2019-05-21T07:03:02.439Z","updated_at":"2019-10-09T16:21:23.068Z","due_date":"2019-07-31","start_date":null,"expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/29"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6726","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6726","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6726/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6726/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6726","relative":"#6726","full":"gitlab-com/gl-infra/reliability#6726"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":65,"epic":{"id":7474,"iid":65,"title":"migrate repos to ZFS storage - 60%","url":"/groups/gitlab-com/gl-infra/-/epics/65","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":21079679,"iid":6722,"project_id":1304532,"title":"Grant db-geo access also to Toon, Douglas \u0026 Ash","description":"My apologies, according to the [process](https://gitlab.com/gitlab-com/runbooks/blob/master/howto/granting-rails-or-db-access.md#process) the requests at https://gitlab.com/gitlab-com/access-requests/issues/804 and https://gitlab.com/gitlab-com/access-requests/issues/803 should have made here, but thanks for granting the access anyway!\n\nBut additionally, I'd also like to request access to the Geo tracking database on DR. I tried to connect, but failed.\n\n```\n❯ ssh to1ne-db-geo@dr-console\nto1ne-db-geo@console-01-sv-dr.c.gitlab-dr.internal: Permission denied (publickey).\n```\n\nUnix usernames: `to1ne` and `dbalexandre`","state":"closed","created_at":"2019-05-20T09:09:34.719Z","updated_at":"2020-03-13T23:09:28.190Z","closed_at":"2020-03-13T22:06:17.598Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Geo","SRE:On-call","requires production access","team::Reliability","toil","unblocks others","unscheduled","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":18,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6722","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6722","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6722/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6722/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6722","relative":"#6722","full":"gitlab-com/gl-infra/reliability#6722"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":21070907,"iid":6720,"project_id":1304532,"title":"Extend source port range of network ACL to fix #6656","description":"## What are we going to do?\nChange the port range in Inbound ACL rule 700 of production-external-network-acl Network ACL to \"1024-65535\"\n\n## Why are we doing it?\nRight now, roughly 10% of outbound TCP connections fail, when the randomly chosen source port is between 1024 and 6665 (the current lower limit of the port range); the reply (e.g. SYN-ACK) packets are dropped by the Network ACL we want to change.  See #6656 for the report + diagnosis of the issue.\n\n## When are we going to do it?\n\n* Start time: 2019-05-21 08:00 UTC\n* Duration: 1 minute\n* Estimated end time: 2019-05-21 08:01 UTC\n\n## How are we going to do it?\nManual edit of the ACL rules using the AWS Web Console\n\n## How are we preparing for it?\nCo-ordinating with Gitter engineers and GitLab SRE's\n\n## What can we check before starting?\nNothing\n\n## What can we check afterwards to ensure that it's working?\nUse the debug one-liner from #6656 (`for i in $(seq 1 20); do curl -vi api.ipify.org; done`).  We're expecting that all these calls succeed, quickly.  Any failures indicate the fix has not had the desired effect; more than 10% failures indicate we've inexplicably made the situation worse.\n\n## Impact\n\n* Type of impact: none expected\n* What will happen: Nothing negative\n* Do we expect downtime? (set the override in pagerduty): None\n\n## How are we communicating this to our customers?\n* Nothing required\n\n## What is the rollback plan?\nChange the lower bound of the source port back to 6665","state":"closed","created_at":"2019-05-19T22:53:33.561Z","updated_at":"2020-11-18T19:27:08.050Z","closed_at":"2019-05-21T08:03:28.289Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["C3","Gitter","change","group::gitter"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-05-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6720","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6720","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6720/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6720/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6720","relative":"#6720","full":"gitlab-com/gl-infra/reliability#6720"},"severity":"UNKNOWN","moved_to_id":74586092,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20971792,"iid":6710,"project_id":1304532,"title":"Update *.gstg.gitlab.net certificate","description":"We are seeing some odd issues with the internal load balancer and we noticed a failing certificate. We should update this.\n\n\n- pre-conditions for execution of the step\n1. The newly renewed certificate has been downloaded with sslmate. ```sslmate download *.gstg.gitlab.net```\n2. The proper fields to be updated in the gkms vaults are identified and the old cert is verified to match the new one. In the chef-repo, run these commands:\n* ```./bin/gkms-vault-show frontend-loadbalancer gstg```\n* ```./bin/gkms-vault-show gitlab-omnibus-secrets gstg```\n3. A backup copy of the old certificate field is stored locally.\n4. A properly formatted version of the new cert is already made and formatted for JSON.\n```awk 'NF {sub(/\\r/, \"\"); printf \"%s\\\\n\",$0;}' *.gstg.gitlab.net.chained.crt \u003e json.*.gstg.gitlab.net.cert```\n\n- execution commands for the step\n1. Stop chef on the service fleet that serves the cert in question. ```knife ssh \"role:gstg-base-lb-fe\" “sudo service chef-client stop“```\n2. Edit the vaults that contain the cert using a command like this: ```./bin/gkms-vault-edit frontend-loadbalancer gstg```\n3. Find and replace the cert field I identified earlier in the JSON and save the changes. The following fields will be updated: ```gitlab-haprox -\u003e ssl -\u003e internal_crt``` \n4. There is a load balancer certificate in GCP that needs to be updated also. This [certificate](https://console.cloud.google.com/net-services/loadbalancing/advanced/sslCertificates/list?project=gitlab-staging-1\u0026authuser=0\u0026organizationId=769164969568\u0026orgonly=true\u0026sslCertificateTablesize=50) will be deleted and replaced with the new certificate.\n5. Force a chef-run on a server like fe-01-lb-gstg.c.gitlab-staging-1.internal and verify it is using the new certificate.\n6. Cert verification ```echo | openssl s_client -connect 10.224.14.18:443 2\u003e/dev/null | openssl x509 -noout -dates```\n7. Restart chef on the nodes from the first step. ```knife ssh “role:gstg-base-lb-fe” “sudo service chef-client start”```\n\n- Rollback\n1. Edit the altered vault using the gkms-vault-edit command.\n2. Replace the changed cert with the old one that was copied into the .crt file.\n3. Delete and replace the GCP certificate with a backup of the old certificate recorded in the pre-steps.\n4. Save the changes and force a chef run on the test system and verify it is fixed (or back to normal).","state":"closed","created_at":"2019-05-16T17:36:19.844Z","updated_at":"2019-05-16T18:24:58.927Z","closed_at":"2019-05-16T18:24:58.903Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["change"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6710","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6710","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6710/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6710/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6710","relative":"#6710","full":"gitlab-com/gl-infra/reliability#6710"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20964347,"iid":6709,"project_id":1304532,"title":"GitLab Hosted version of Codesandbox Sandpack","description":"### Overview\n\nAs part of gitlab-org/gitlab-ce#58548 we need to setup a new S3 bucket to serve the static sandpack script required for a GitLab hosted Codesandbox.\n\n### Proposal\n\nServe the javascript from an S3 bucket on a custom domain with SSL enabled. Requirements:\n - Domain (needs to be purchased): gitlab-sandbox.com\n - S3 Bucket Configured\n - SSL Enabled\n\nThe entirety of the linked the feature is targeted for the 12.1 Release (2019-07-22) and this is a dependency to that.\n\n### Links / References\n\nhttps://docs.gitlab.com/ee/user/project/web_ide/index.html#enabling-client-side-evaluation\nhttps://gitlab.com/gitlab-org/gitlab-ce/issues/58548#note_170759249","state":"closed","created_at":"2019-05-16T13:30:32.768Z","updated_at":"2022-01-07T14:51:37.618Z","closed_at":"2020-03-03T15:09:26.085Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["devops::create","group::editor","team::Reliability","workflow-infra::Triage"],"milestone":null,"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":75,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6709","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6709/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6709/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6709","relative":"#6709","full":"gitlab-com/gl-infra/reliability#6709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20943994,"iid":6706,"project_id":1304532,"title":"Setup salesforce Omniauth with GitLab.com","description":"With https://gitlab.com/gitlab-org/gitlab-ce/issues/57077#note_169752576, we are being asked to setup Omniauth for GitLab.com with Salesforce.  There is a promotion where we are looking to go live by May 29 so we have a clear understanding of expected dates.  For infra, we should look to have an initial setup running next week (week of May 20).\n\nDocumentation:\nhttps://gitlab.com/gitlab-org/gitlab-ce/merge_requests/27834/diffs?commit_id=97fa2bf90da6489e84b143f4d7b00395b634ffc7\n\n### Todo\n\n - [ ] Disable Salesforce oauth sign-in source on staging, for consistency with other providers","state":"closed","created_at":"2019-05-15T21:08:17.997Z","updated_at":"2019-12-06T21:42:03.379Z","closed_at":"2019-05-29T00:57:11.567Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Alliance","Alliances - Salesforce","security","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3473352,"username":"mayanktahil","name":"Mayank Tahilramani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3473352/avatar.png","web_url":"https://gitlab.com/mayanktahil"},{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":3473352,"username":"mayanktahil","name":"Mayank Tahilramani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3473352/avatar.png","web_url":"https://gitlab.com/mayanktahil"},"user_notes_count":55,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-05-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6706","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6706","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6706/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6706/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6706","relative":"#6706","full":"gitlab-com/gl-infra/reliability#6706"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20786207,"iid":6698,"project_id":1304532,"title":"Clean up terraform runs on gstg/gprd","description":"Right now our `tf plan` runs from master return several changes to apply. This has caused some issues recently (e.g. https://gitlab.com/gitlab-com/gl-infra/production/issues/816) because it forces us to do only targeted runs. It will also be troublesome moving forward with our k8s plans and efforts.\n\nFollowing are the current changes in the output of `tf plan` that we need to address\n\n- [x] Update `metadata.GL_KERNEL_VERSION` on all `google_compute_instance`s. This was caused by the work to update to Bionic https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6539. It should be harmless to apply all these changes since the only place that metadata value is used is by the bootstrap script. Only new instances care about these value, existing ones will not attempt to update the kernel version.\n- [x] Non-changes like \n```\n  ~ module.postgres-zfs.google_compute_instance.instance_with_attached_disk\n      metadata.block-project-ssh-keys:                     \"true\" =\u003e \"TRUE\"\n```\n... which should be fine to apply as well\n- [ ] Shrink prometheus disks, which forces new resources. E.g.:\n```\n-/+ module.prometheus-app.google_compute_disk.default[0] (new resource required)\n      id:                                                  \"prometheus-app-01-inf-gprd-data\" =\u003e \u003ccomputed\u003e (forces new resource)\n      creation_timestamp:                                  \"2018-07-05T04:37:48.972-07:00\" =\u003e \u003ccomputed\u003e\n      disk_encryption_key_sha256:                          \"\" =\u003e \u003ccomputed\u003e\n      label_fingerprint:                                   \"LCTWFBEFgPA=\" =\u003e \u003ccomputed\u003e\n      labels.%:                                            \"3\" =\u003e \"3\"\n      labels.do_snapshots:                                 \"true\" =\u003e \"true\"\n      labels.environment:                                  \"gprd\" =\u003e \"gprd\"\n      labels.pet_name:                                     \"prometheus-app\" =\u003e \"prometheus-app\"\n      last_attach_timestamp:                               \"2018-07-05T04:38:02.436-07:00\" =\u003e \u003ccomputed\u003e\n      last_detach_timestamp:                               \"\" =\u003e \u003ccomputed\u003e\n      name:                                                \"prometheus-app-01-inf-gprd-data\" =\u003e \"prometheus-app-01-inf-gprd-data\"\n      project:                                             \"gitlab-production\" =\u003e \"gitlab-production\"\n      self_link:                                           \"https://www.googleapis.com/compute/v1/projects/gitlab-production/zones/us-east1-c/disks/prometheus-app-01-inf-gprd-data\" =\u003e \u003ccomputed\u003e\n      size:                                                \"4000\" =\u003e \"100\" (forces new resource)\n      source_image_id:                                     \"\" =\u003e \u003ccomputed\u003e\n      source_snapshot_id:                                  \"\" =\u003e \u003ccomputed\u003e\n      type:                                                \"pd-standard\" =\u003e \"pd-ssd\" (forces new resource)\n      users.#:                                             \"1\" =\u003e \u003ccomputed\u003e\n      zone:                                                \"us-east1-c\" =\u003e \"us-east1-c\n```\n- [x] There's a lot of shuffling around ports on prometheus instances for some reason. E.g.:\n```\n  ~ module.prometheus-app.google_compute_instance_group.default[0]\n      named_port.0.name:                                   \"http\" =\u003e \"prometheus-app\"\n      named_port.0.port:                                   \"80\" =\u003e \"9090\"\n      named_port.1.name:                                   \"https\" =\u003e \"http\"\n      named_port.1.port:                                   \"443\" =\u003e \"80\"\n      named_port.2.name:                                   \"prometheus-app\" =\u003e \"https\"\n      named_port.2.port:                                   \"9090\" =\u003e \"443\"\n```\nThese should be fine as well, since the behavior is the same\n- [ ] Another set of apparent non-changes for attached disks from prometheus instances, e.g.:\n```\n  ~ module.prometheus-db.google_compute_instance.default[1]\n      attached_disk.0.source:                              \"https://www.googleapis.com/compute/v1/projects/gitlab-production/zones/us-east1-d/disks/prometheus-db-02-inf-gprd-data\" =\u003e \"${google_compute_disk.default.*.self_link[count.index]}\"\n```\n- [x] Pubsubbeat instance and topic to be recreated:\n\n```\n-/+ module.pubsubbeat.google_pubsub_topic.mytopic[7] (new resource required)\n      id:                                                  \"projects/gitlab-production/topics/pubsub-geo-inf-gprd\" =\u003e \u003ccomputed\u003e (forces new resource)\n      name:                                                \"pubsub-geo-inf-gprd\" =\u003e \"pubsub-rspec-inf-gprd\" (forces new resource)\n      project:                                             \"gitlab-production\" =\u003e \u003ccomputed\u003e\n-/+ module.pubsubbeat.google_compute_instance.default[7] (new resource required)\n      id:                                                  \"pubsub-geo-inf-gprd\" =\u003e \u003ccomputed\u003e (forces new resource)\n```\n- [x] `metadata.CHEF_VERSION` on pubsubbeat instances (\"12.19.36\" =\u003e \"12.22.5\")\n- [x] `allow_stopping_for_update` \"false\" =\u003e \"true\", and `machine_type` changes on `module.sidekiq.google_compute_instance`s\n- [x] `module.postgres-zfs.google_compute_firewall.public` to be deleted\n\n/cc @gitlab-com/gl-infra for whoever has more specific info about each of those changes.","state":"closed","created_at":"2019-05-11T17:37:58.330Z","updated_at":"2019-12-06T21:44:11.810Z","closed_at":"2019-09-16T21:39:21.533Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","terraform"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":33,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6698","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":7},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6698","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6698/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6698/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6698","relative":"#6698","full":"gitlab-com/gl-infra/reliability#6698"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":68,"epic":{"id":7622,"iid":68,"title":"Terraform Runs are not clean in any environment","url":"/groups/gitlab-com/gl-infra/-/epics/68","group_id":1112072,"human_readable_end_date":"Sep 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20761748,"iid":6697,"project_id":1304532,"title":"Snowplow: Logging and log shipping","description":"Without any specific need, local logging or shipping to a local S3 bucket are probably the simplest way to keep logs from the system in AWS.\n\nAre there any requirements for logging and integrating logs into log.gitlab.com?","state":"closed","created_at":"2019-05-10T14:22:47.633Z","updated_at":"2019-12-06T21:46:59.066Z","closed_at":"2019-06-07T19:01:30.211Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["team::Reliability"],"milestone":{"id":878548,"iid":24,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Snowplow tracker","description":"","state":"closed","created_at":"2019-05-17T22:41:21.444Z","updated_at":"2019-08-06T13:06:41.890Z","due_date":"2019-06-21","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/24"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6697","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6697","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6697/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6697/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6697","relative":"#6697","full":"gitlab-com/gl-infra/reliability#6697"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":74,"epic":{"id":8230,"iid":74,"title":"Deploy Snowplow Tracker","url":"/groups/gitlab-com/gl-infra/-/epics/74","group_id":1112072,"human_readable_end_date":"Jun 21, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20709802,"iid":6692,"project_id":1304532,"title":"Update Salesforce's sandbox credentials  for customers.stg.gitlab.com","description":"We need to update the Sandbox [credentials](https://gitlab.com/gitlab-cookbooks/cookbook-customers-gitlab-com/blob/5c4ce40bdec1e9752be6650213471caca4647b3a/templates/default/secrets.yml.erb#L48-52) for Salesforce, new credentials ara available in the `Subscription Portal` shared vault from 1password.","state":"closed","created_at":"2019-05-09T02:42:21.992Z","updated_at":"2019-12-06T21:46:58.925Z","closed_at":"2019-06-05T13:31:45.760Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["chef","oncall","team::Reliability","unblocks others"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":280339,"username":"rdavila","name":"Rubén Dávila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6692","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6692","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6692/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6692/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6692","relative":"#6692","full":"gitlab-com/gl-infra/reliability#6692"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20703353,"iid":6690,"project_id":1304532,"title":"Snowplow: Docker vs VM","description":"In order to move quickly, we will be deploying the Snowplow collectors in AWS.\n\n**Outstanding question:**  \nShould we use EC2 or ECS, or something else in AWS to host the components of the Snowplow pipeline?\n","state":"closed","created_at":"2019-05-08T18:56:38.707Z","updated_at":"2019-12-06T21:46:58.622Z","closed_at":"2019-05-28T19:56:22.042Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["team::Reliability"],"milestone":{"id":878548,"iid":24,"group_id":1112072,"title":"CI/CD \u0026 Enablement - FY20Q2::KR::Snowplow tracker","description":"","state":"closed","created_at":"2019-05-17T22:41:21.444Z","updated_at":"2019-08-06T13:06:41.890Z","due_date":"2019-06-21","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/24"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6690","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6690","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6690/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6690/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6690","relative":"#6690","full":"gitlab-com/gl-infra/reliability#6690"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":74,"epic":{"id":8230,"iid":74,"title":"Deploy Snowplow Tracker","url":"/groups/gitlab-com/gl-infra/-/epics/74","group_id":1112072,"human_readable_end_date":"Jun 21, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20648598,"iid":6687,"project_id":1304532,"title":"Missing haproxy logs since the 1.8 upgrade","description":"We are currently not receiving or logging anything for haproxy to `/var/log/haproxy.log`, the last log message I see is on `May  2 21:29:07`\n\n\nThis roughly corresponds to the haproxy upgrade:\n\n```\nCommandline: apt-get -q -y install haproxy=1.8.8-1ubuntu0.4\nRequested-By: alejandro (1007)\nInstall: haproxy:amd64 (1.8.8-1ubuntu0.4)\nEnd-Date: 2019-05-02  21:43:12\n```\n\ncc @alejandro","state":"closed","created_at":"2019-05-07T11:41:20.529Z","updated_at":"2019-05-07T13:29:43.222Z","closed_at":"2019-05-07T13:13:17.252Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":[],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6687","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6687","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6687/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6687/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6687","relative":"#6687","full":"gitlab-com/gl-infra/reliability#6687"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20615587,"iid":6679,"project_id":1304532,"title":"ChatOps: Match statement timeout with production setting","description":"ChatOps can currently only get plan for queries that return within 5s. That is because we have a lower `statement_timeout` set than the default production setting (which is 15s).\n\nThis means that we cannot use ChatOps for rather expensive queries. Oftentimes, those are the queries we actually care about and want to improve and hence we need plans for them.\n\nCurrently, the procedure is to reach out to somebody with database access to get plans for those queries (example: https://gitlab.slack.com/archives/C3NBYFJ6N/p1557140206109800).\n\nThe proposal here is to match the production `statement_timeout` setting for ChatOps, such that we can get plans through chatops for queries up to 15s.","state":"closed","created_at":"2019-05-06T11:11:47.295Z","updated_at":"2019-05-16T13:27:31.056Z","closed_at":"2019-05-16T13:12:10.169Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","Global:In Progress","auto updated"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6679","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6679","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6679/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6679/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6679","relative":"#6679","full":"gitlab-com/gl-infra/reliability#6679"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20615133,"iid":6678,"project_id":1304532,"title":"Improve high-frequency database query","description":"This is to track the gitlab-ee code change to improve the high-frequency database query found in https://gitlab.com/gitlab-org/gitlab-ce/issues/60524.\n\nThe query takes more than 50% of total database time on the primary and is expected to generate significant load on the database.","state":"closed","created_at":"2019-05-06T10:49:57.860Z","updated_at":"2019-12-06T21:44:11.287Z","closed_at":"2019-05-28T13:14:35.065Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","team::Reliability"],"milestone":{"id":856485,"iid":18,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W19","description":"","state":"closed","created_at":"2019-04-24T14:42:07.720Z","updated_at":"2019-05-21T02:09:02.046Z","due_date":"2019-05-19","start_date":"2019-05-06","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/18"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6678","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6678","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6678/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6678/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6678","relative":"#6678","full":"gitlab-com/gl-infra/reliability#6678"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20575927,"iid":6676,"project_id":1304532,"title":"version.gitlab.com SSL certificate expires soon","description":"Expires: Friday, May 10, 2019 at 7:59:59 PM Eastern Daylight Time","state":"closed","created_at":"2019-05-04T00:36:22.062Z","updated_at":"2019-05-05T00:35:22.925Z","closed_at":"2019-05-05T00:35:22.903Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["SRE:On-call","alert","oncall"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-05-09","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6676","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6676","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6676/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6676/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6676","relative":"#6676","full":"gitlab-com/gl-infra/reliability#6676"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20535738,"iid":6667,"project_id":1304532,"title":"Make https://hub.gitlab.com redirect to lab.github.com","description":"https://gitlab.slack.com/archives/C101F3796/p1556815592121200\n\nhttps://news.ycombinator.com/item?id=19806284","state":"closed","created_at":"2019-05-02T16:50:19.715Z","updated_at":"2019-09-05T15:26:05.408Z","closed_at":"2019-05-02T17:54:48.220Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["auto updated","unscheduled"],"milestone":{"id":854152,"iid":16,"group_id":1112072,"title":"CI/CD \u0026 Enablement Reliability Engineering team - week 17","description":"","state":"closed","created_at":"2019-04-22T13:41:06.899Z","updated_at":"2019-05-07T16:56:28.720Z","due_date":"2019-05-04","start_date":"2019-04-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/16"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":9,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6667","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6667","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6667/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6667/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6667","relative":"#6667","full":"gitlab-com/gl-infra/reliability#6667"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20533888,"iid":6666,"project_id":1304532,"title":"Set lifecycle policy to change the storage class of some objects in the log-archive bucket","description":"The log archive bucket is 484TB and represents a significant cost when it comes to object storage.\nThis bucket alone is 10k/month, the same amount of data in coldline storage is about 10% of this cost. \nThis issue is to discuss a policy for changing the storage class of objects to coldline storage.\nBefore we can work on this issue we need to decide on the lifecycle policy. \n\nI suggest that we start with anything older than 90days.\n\n\n## References\n\n- https://cloud.google.com/storage/docs/lifecycle\n- https://cloud.google.com/storage/docs/storage-classes","state":"closed","created_at":"2019-05-02T15:29:28.607Z","updated_at":"2020-08-18T23:28:54.095Z","closed_at":"2019-09-18T07:37:43.678Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Cloud Spend","auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":72,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6666","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6666","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6666/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6666/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6666","relative":"#6666","full":"gitlab-com/gl-infra/reliability#6666"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20420544,"iid":6654,"project_id":1304532,"title":"githost.io - SSL certificate expiring soon","description":"Tracking the work for page:  githost.io - SSL certificate expiring soon","state":"closed","created_at":"2019-04-29T01:55:42.270Z","updated_at":"2019-05-06T17:51:08.754Z","closed_at":"2019-05-06T06:11:10.486Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["SRE:On-call","alert","oncall"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":26,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6654","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6654","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6654/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6654/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6654","relative":"#6654","full":"gitlab-com/gl-infra/reliability#6654"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20353680,"iid":6641,"project_id":1304532,"title":"Update cert for registry.gitlab.com","description":"# Production Change - Criticality 2 ~\"C2\"\n\n| Change Objective                                       | Prevent registry.gitlab.com certificates from expiring.|\n|:---|:---|\n| Change Type                                            | ~C2 |\n| Services Impacted                                      | GitLab.com |\n| Change Team Members                                    | @cmcfarland |\n| Change Severity                                        | ~S2 |\n| Buddy check or tested in staging                       | I don't think we can test this in staging. Will pair with a colleague for coverage. |\n| Schedule of the change                                 | **See Comments** |\n| Duration of the change                                 | **See Comments** |\n| Detailed steps for the change. Each step must include: | See below |\n\n* Verify certificate is valid locally.\n* Re-format the certificate for vault entry ( https://gitlab.com/gitlab-com/runbooks/blob/master/howto/ssl_cert.md )\n* Use gkms-vault-edit to replace the SSL certificate.\n* Find some way to verify the change is working in production.","state":"closed","created_at":"2019-04-25T20:38:50.486Z","updated_at":"2022-03-21T20:31:36.570Z","closed_at":"2019-04-29T16:02:01.906Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["change"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6641","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6641","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6641/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6641/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6641","relative":"#6641","full":"gitlab-com/gl-infra/reliability#6641"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20353636,"iid":6640,"project_id":1304532,"title":"Update cert for gitlab.com","description":"# Production Change - Criticality 2 ~\"C2\"\n\n| Change Objective                                       | Prevent gitlab.com certificates from expiring.|\n|:---|:---|\n| Change Type                                            | ~C2 |\n| Services Impacted                                      | GitLab.com |\n| Change Team Members                                    | @cmcfarland |\n| Change Severity                                        | ~S2 |\n| Buddy check or tested in staging                       | I don't think we can test this in staging. Will pair with a colleague for coverage. |\n| Schedule of the change                                 | **See Comments** |\n| Duration of the change                                 | **See Comments** |\n| Detailed steps for the change. Each step must include: | See below |\n\n* Verify certificate is valid locally.\n* Re-format the certificate for vault entry ( https://gitlab.com/gitlab-com/runbooks/blob/master/howto/ssl_cert.md )\n* Use gkms-vault-edit to replace the SSL certificate.\n* Find some way to verify the change is working in production.","state":"closed","created_at":"2019-04-25T20:37:51.612Z","updated_at":"2019-04-29T13:57:11.942Z","closed_at":"2019-04-29T13:57:11.903Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["change"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6640","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6640","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6640/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6640/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6640","relative":"#6640","full":"gitlab-com/gl-infra/reliability#6640"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20349077,"iid":6638,"project_id":1304532,"title":"Update cert for staging.gitlab.com","description":"# Production Change - Criticality 2 ~\"C2\"\n\n| Change Objective                                       | Prevent staging.gitlab.com certificates from expiring. |\n|:---|:---|\n| Change Type                                            | ~C3 |\n| Services Impacted                                      | Staging.GitLab.com |\n| Change Team Members                                    | @cmcfarland @devin |\n| Change Severity                                        | ~S2 |\n| Buddy check or tested in staging                       | I don't think we can test this in staging. Will pair with a colleague for coverage. |\n| Schedule of the change                                 | **See Comments** |\n| Duration of the change                                 | **See Comments** |\n| Detailed steps for the change. Each step must include: | See below |\n\n* Verify certificate is valid locally.\n* Re-format the certificate for vault entry ( https://gitlab.com/gitlab-com/runbooks/blob/master/howto/ssl_cert.md )\n* Use gkms-vault-edit to replace the SSL certificate.\n* Find some way to verify the change is working in production.","state":"closed","created_at":"2019-04-25T17:07:42.124Z","updated_at":"2019-04-29T21:03:00.348Z","closed_at":"2019-04-29T21:03:00.310Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["change"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6638","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6638","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6638/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6638/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6638","relative":"#6638","full":"gitlab-com/gl-infra/reliability#6638"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20347703,"iid":6637,"project_id":1304532,"title":"Standard database console access to archive replica for analytics","description":"Follow-up from https://gitlab.com/gitlab-com/access-requests/issues/835#note_164280462\n\nTo my knowledge, a standard (read-only) database console would give access to a production replica (ie one that participates in the Patroni HA cluster) only.\n\nI would suggest we implement access for the archive replica for cases like https://gitlab.com/gitlab-com/access-requests/issues/835. This would allow people to run adhoc queries with much more freedom (timeouts) and no concerns about affecting the production HA cluster for GitLab.com (but with the same data).","state":"closed","created_at":"2019-04-25T15:58:31.764Z","updated_at":"2019-08-05T20:16:51.749Z","closed_at":"2019-04-26T19:28:28.562Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Database","Global:In Progress"],"milestone":{"id":852069,"iid":15,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 17","description":"","state":"closed","created_at":"2019-04-18T15:22:12.924Z","updated_at":"2019-05-06T10:47:40.754Z","due_date":"2019-05-03","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/15"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6637","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6637","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6637/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6637/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6637","relative":"#6637","full":"gitlab-com/gl-infra/reliability#6637"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20326363,"iid":6636,"project_id":1304532,"title":"RCA For 2019-04-24 Google Load Balancer Anomalies","description":"## Summary\r\n\r\nThere was a problem with Google ILB health checks which was causing the database load balancer to send traffic to read-only secondary nodes instead of the primary.\r\n\r\nThe Incident Issue is: https://gitlab.com/gitlab-com/gl-infra/production/issues/802\r\n\r\nThe problem started out slowly in the afternoon, at first mostly manifesting in the Pull Mirrors failing, but over the course of several hours it started compounding as other sidekiq jobs started retrying and web nodes started being directed to the read only databases.\r\n\r\n\r\nService(s) affected : Database and therefore everything in the us-east1-d zone\r\n\r\nTeam attribution : \r\n\r\nMinutes downtime or degradation : \r\n\r\n## Impact \u0026 Metrics\r\n\r\n\r\n- What was the impact of the incident? \r\nIncreased errors, especially in sidekiq jobs. Pull mirrors didn't work\r\n\r\n- Who was impacted by this incident? \r\nAll gitlab.com users, especially those using pull mirrors\r\n\r\n- How did the incident impact customers? \r\nMirrors were unable to run and sidekiq jobs failed. Web hooks failed.\r\n\r\n- How many attempts were made to access the impacted service/feature?\r\n- How many customers were affected?\r\n- How many customers tried to access the impacted service/feature?\r\n\r\nInclude any additional metrics that are of relevance.\r\n\r\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\r\n\r\n\r\n## Detection \u0026 Response\r\n\r\n\r\n- How was the incident detected?  \r\nThe first alert was for pull mirrors overdue. There was very little actual evidence in the first hour or so, only seemingly unconnected suspicious behavior.  The incident issue was opened based on instinct and suspicion rather than data.\r\n\r\n- Did alarming work as expected?  \r\nThe existing alerts worked based on the number of errors observed, but could have been more helpful with identifying the source of the problem.\r\n\r\n- How long did it take from the start of the incident to its detection?  \r\n25 minutes\r\n\r\n- How long did it take from detection to remediation?  \r\n14 hours to full remediation\r\n\r\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\r\n\r\nThe Rackspace support layer adds a lot of overhead between us and google: https://gitlab.com/gitlab-com/gl-infra/production/issues/802#note_163652594\r\n\r\n\r\n\r\n## Timeline\r\n\r\n2019-04-24\r\n\r\n- 00:00 UTC - Pull Mirror Jobs stopped processing\r\n- 00:25 UTC - First alert to pager\r\n- 00:30 UTC - Troubleshooting....\r\n- 01:42 UTC - Ran last resort commands from runbook, changed, but not fixed\r\n- 03:00 UTC - [Incident created](https://gitlab.slack.com/archives/CB7P5CJS1/p1556074810015200)\u003cbr\u003e\u003cbr\u003e\r\ntroubleshooting continued...\u003cbr\u003e\r\n- 06:25 UTC - Incident call started\u003cbr\u003e\u003cbr\u003e\r\n- 06:40 UTC - Tweet sent out and updated status.io\r\n- 06:50 UTC - Rackspace ticket opened: https://portal.rackspace.com/1173105/tickets/details/190424-ord-0000235\r\n- 07:00 UTC - First attempt to call Rackspace\r\n- 07:01 UTC - Paged DBRE for assessment \r\n- 07:40 UTC - Got a hold off Rackspace team and hopped on a Zoom to troubleshoot the issue on our end\r\n- 07:52 UTC - GCP responded confirming small amount of traffic was sent to unintentional nodes\r\n- 08:46 UTC - Confirmed our theories that something was off with the LB\r\n- 08:51 UTC - GCP responded with some more updates about narrowing down the issue\r\n- 10:49 UTC - Removed all read-only patroni nodes from their respective instance groups except for the primary\r\n- 11:18 UTC - Reset redis key set and triggered the workers to pick up jobs\r\n- 11:36 UTC - Queued jobs to 0, alerts cleared up - tweeted and updated status.io\r\n- 11:52 UTC - GCP still investigating\r\n- 12:30 UTC - GCP resolved the inconsistency\r\n- 15:33 UTC - Started sidekiq-cluster on the few sidekiq-* nodes in 1-d zone \r\n\r\n## Root Cause Analysis\r\n\r\nAn update from Google:\r\n\r\n\u003e What exactly was happening is that health status of ILB backends was failing to propagate to instances in us-east1-d, and thus requests from them were forwarded to all backends configured, not just to the healthy one (That is the reason why you observed traffic going to -b as well). ILB and as well as this issue is not happening close to the server VM side, but close to the client VM.\r\n\r\nLast update from Google:\r\n\r\n\u003e After further investigation, we believe that the temporary inconsistency of ILB backend health observed by VM Instances in us-east1-d was caused by a rollout of one of our control plane components in that zone. This issue affected only small amount of Virtual Private Networks and is likely triggered only together with VPC Peering.\r\n\u003e\r\n\u003e The engineering team resolved the inconsistency and we believe there should be no further impact.\r\n\r\n\r\nFollow the \"**5 whys**\" in a **blameless** manner as the core of the root-cause analysis.\r\n\r\n1. Why? - Jobs are intermittently failing\r\n2. Why? - They can't write to the database sometimes\r\n3. Why? - The load balancer sends some traffic to the wrong databases\r\n4. Why? - The load balancer is not interpreting health checks correctly\r\n5. Why? - The rollout of a Google control plane component in us-east1-d caused health checks to be reported incorrectly to the load balancers\r\n\r\n## What went well\r\n\r\nStart with the following:\r\n\r\n- Identify the things that worked well or as expected.\r\n\r\nThe team piled on this very nicely. Everyone contributed what they could and spread the workload out.\r\n\r\nEven though we didn't have alerting that covered this case, the existing alerts let us know that something was 'just not right'\r\n\r\n- Any additional call-outs for what went particularly well.\r\n\r\nThe team did an AMAZING job with some very difficult troubleshooting to narrow down an issue that didn't have much conclusive evidence pointing to the cause.\u003cbr\u003e\u003cbr\u003e\r\n\r\nRackspace support was able to help us troubleshoot the issue to make sure we had all of our bases covered. Stackdriver - Monitoring Metrics was very helpful in checking the LB egress traffic and this was a good proof point that traffic was sent to unintended nodes/zones. The graphs exactly showed the impact and recovery very nice. \u003cbr\u003e\u003cbr\u003e\r\n\r\nEven in the midst of the chaotic incident, we took the time to create and execute peer-reviewed change request to remove instances from instance groups instead of taking actions on the fly. \r\n\r\n## What can be improved\r\n\r\n\r\n- Whether this happens again is up to Google. We can put pressure on them to be more careful, and we can build some more resilience into some of our jobs - especially sidekiq jobs which aren't idempotent. \r\n- The incident started in the late afternoon Hawaii time. The US had left for the day and the EU had not yet woken up, so there was not a lot of help available for a few hours.\r\n- The runbook for Pull Mirrors just says to post and ask for help in the `#backend` Slack channel. When this was posted, it was in the EU early morning hours, so it took a long time for anyone to see it.\r\n- Our database alerts and monitoring don't cover problems like this.\r\n- There was no indication beforehand that this might happen, no existing issue related to it, and no reason to think it was something we should plan for.\r\n- We should brainstorm, plan and test scenarios like this to see how our system reacts. \r\n- We should practice making changes in our production infrastructure more often and for more scenarios so that we always feel comfortable doing similar changes during incident. During this incident, removing instances from instance groups VS removing instance groups from LB took a little bit of time because of uncertainty around the setup and how the system would react. We were able to collectively talk through, wrote down steps and executed - but this is something we should be able to practice even during non-incident time. \r\n\r\n## Corrective actions\r\n\r\n- List issues that have been created as corrective actions from this incident.\r\n- For each issue, include the following:\r\n    - \u003cBare Issue link\u003e - Issue labeled as ~\"corrective action\".\r\n    - Include an estimated date of completion of the corrective action.\r\n    - Include the named individual who owns the delivery of the corrective action.\r\n\r\n\r\n## Guidelines\r\n\r\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\r\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-04-25T00:37:46.436Z","updated_at":"2019-05-03T18:54:50.169Z","closed_at":"2019-05-03T18:54:50.145Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["IncidentReview","auto updated"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6636","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6636","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6636/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6636/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6636","relative":"#6636","full":"gitlab-com/gl-infra/reliability#6636"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20325677,"iid":6634,"project_id":1304532,"title":"Update fe-lb hosts to Ubuntu Bionic","description":"Part of https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6539\n\nUnblocks https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5293\n\n### pre\n\n- chef-repo MR: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/1050\n- gitlab-com-infrastructure MR: https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/752\n\n### gstg\n\n- chef-repo MR: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/1062\n- gitlab-com-infrastructure MR: https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/753\n\n### gprd\n\n- chef-repo MR: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/1065\n- gitlab-com-infrastructure MR: https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/767\n- Production change issue: https://gitlab.com/gitlab-com/gl-infra/production/issues/815","state":"closed","created_at":"2019-04-24T23:30:35.907Z","updated_at":"2019-07-24T18:24:08.826Z","closed_at":"2019-05-17T17:26:19.940Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6634","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6634","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6634/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6634/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6634","relative":"#6634","full":"gitlab-com/gl-infra/reliability#6634"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20325450,"iid":6633,"project_id":1304532,"title":"work_mem should be reconsidered on all Postgres nodes","description":"# Current picture: amount of temporary files generated\r\n\r\nCurrently, `work_mem` is set to `'16MB'` on all Postgres GitLab.com nodes.\r\n\r\nIts is insufficient, as we can see from temporary files creation statistics (see [the full postgres-checkup data](https://gitlab.com/gitlab-com/gl-infra/production/snippets/1848486#postgres-checkup_A004)):\r\n\r\nmaster (`patroni-04`):\r\n\r\n Indicator | Value\r\n-----------|-------\r\nStats Since | 2019-02-13\u0026nbsp;21:05:54+00\r\nStats Age | 62\u0026nbsp;days\u0026nbsp;11:02:22\r\nTemp Files: total size | 5647\u0026nbsp;GB\r\nTemp Files: total number of files | 483381\r\nTemp Files: total number of files per day | 7796\r\nTemp Files: avg file size | 12\u0026nbsp;MB\r\n\r\n– 7482 * 12 MiB = ~87.7 GiB, this is how much temporary files is written every day in average, according last 64 days stats.\r\n\r\nA replica (`patroni-01`):\r\n\r\n Indicator | Value\r\n-----------|-------\r\nStats Since | 2019-03-21\u0026nbsp;01:44:39+00\r\nStats Age | 27\u0026nbsp;days\u0026nbsp;06:25:29\r\nTemp Files: total size | 11\u0026nbsp;TB\r\nTemp Files: total number of files | 225048\r\nTemp Files: total number of files per day | 8335\r\nTemp Files: avg file size | 52\u0026nbsp;MB\r\n\r\n– 7895 * 56 = ~431 GiB (!) of tmp files data daily.\r\n\r\nThis looks like huge inefficiency, which is relatively easy to fix. Here is how much memory we have and how it is used now:\r\n\r\n# Current picture: use of memory\r\n\r\nThe master (`patroni-04`):\r\n\r\n```\r\nMemTotal:       429299392 kB\r\nMemFree:        26501664 kB\r\nMemAvailable:   269576376 kB\r\nBuffers:          116700 kB\r\nCached:         357627264 kB\r\nSwapCached:            0 kB\r\nActive:         327929036 kB\r\nInactive:       36116408 kB\r\nActive(anon):   126797136 kB\r\nInactive(anon):  1784692 kB\r\nActive(file):   201131900 kB\r\nInactive(file): 34331716 kB\r\n```\r\n\r\nA replica (`patroni-01`):\r\n\r\n```\r\nMemTotal:       429299392 kB\r\nMemFree:        38309544 kB\r\nMemAvailable:   289822468 kB\r\nBuffers:          111740 kB\r\nCached:         366551768 kB\r\nSwapCached:            0 kB\r\nActive:         339501400 kB\r\nInactive:       29624252 kB\r\nActive(anon):   122687420 kB\r\nInactive(anon):  2000436 kB\r\nActive(file):   216813980 kB\r\n```\r\n\r\nAs we can see, from all ~400GiB of RAM available, right now ~250 GiB is used for OS file cache.\r\n\r\nOn the master, average tmp file size is just 12 MiB. On replicas, it's more, 52 MiB.\r\n\r\n# Considerations on work_mem increase\r\n\r\n`work_mem` is not allocated fully for every session – a session might use a fraction of it. On the other hand, a single session might use multiple `work_mem` portions, if the statement being executed has multiple operations that need memory. So rough calculations of worst case scenario, when all `max_connection` (which is 300 now) sessions are consuming `work_mem` fully two times, is 300 * 16 MiB * 2 = 9600 MiB.  This is a very small fraction of total RAM available.\r\n\r\nIf we raise `work_mem` to `'64MB'` – 4 times more than the current value – we'll have 300 * 64 MiB * 2 = 38400 MiB. It's still not a problem, we will just take ~38 GiB from those 250 GiB of OS file cache. And this is the *worst* case, which actually will not happen. But `work_mem = '64MB'` will allow us to get rid of most temporary files.\r\n\r\nAdditionally, we know from [postgres-checkup's K001 report](https://gitlab.com/postgres-ai-team/hc-results-tmp/blob/master/g/md_reports/20190419002_2019_04_19T07_13_42_-0700/0_Full_report.md#postgres-checkup_K001) that reading from OS file cache is very rare -- just hundreds blocks per second. This means, that the most of working data set is present in the buffer pool. This again tells us that we can easily increase `work_mem`, even to values like '100MB' and more.\r\n\r\n# Log analysis\r\n\r\nLet's see average and stddev for temporary file sizes for one given day (April 23):\r\n```bash\r\n$ sudo journalctl --since '2019-04-23' --until '2019-04-24' | grep \"temporary file\" | awk '{print $18}' | awk '{for(i=1;i\u003c=NF;i++) {sum[i] += $i; sumsq[i] += ($i)^2}}\r\n          END {for (i=1;i\u003c=NF;i++) {\r\n          printf \"%f %f \\n\", sum[i]/NR, sqrt((sumsq[i]-sum[i]^2/NR)/NR)}\r\n         }'\r\n46059369.520593 10821203.571495\r\n```\r\n-- average size was 46 MB, standard deviation ~11 MB.\r\n\r\nThis means, that raising to `'64MB'` might in insufficient if we want to decrease number of files generated per day to dozens – additional increase to values like 70-80, up to 100 MB might be needed.\r\n\r\n# Proposal\r\n\r\n1. Raise `work_mem` to `'100MB'` on all Postgres nodes. Restart is not required, only config reloading.\r\n1. After a few days, analyze tmp files generation and memory consumption again. If needed, reconsider `work_mem` again.","state":"closed","created_at":"2019-04-24T23:00:43.453Z","updated_at":"2019-05-29T14:39:12.812Z","closed_at":"2019-05-29T12:49:23.974Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","auto updated"],"milestone":null,"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6633","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6633","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6633/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6633/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6633","relative":"#6633","full":"gitlab-com/gl-infra/reliability#6633"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20320734,"iid":6632,"project_id":1304532,"title":"Chef failing in gprd across the board","description":"Chef runs are failing everywhere in gprd for the last 8 hours:\n\n```\n[2019-04-24T17:43:18+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\n[2019-04-24T17:43:18+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n[2019-04-24T17:43:18+00:00] ERROR: Cookbook 'seven_zip' version '3.1.0' depends on chef version [\"\u003e= 13.0\"], but the running chef version is 12.22.5\n[2019-04-24T17:43:18+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n```\n\nstacktrace.out looks like:\n\n```\nGenerated at 2019-04-24 17:43:18 +0000\nChef::Exceptions::CookbookChefVersionMismatch: Cookbook 'seven_zip' version '3.1.0' depends on chef version [\"\u003e= 13.0\"], but the running chef version is 12.22.5\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/cookbook/metadata.rb:721:in `validate_chef_version!'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/cookbook/cookbook_collection.rb:54:in `block in validate!'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/cookbook/cookbook_collection.rb:53:in `each'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/cookbook/cookbook_collection.rb:53:in `validate!'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/policy_builder/expand_node_object.rb:85:in `setup_run_context'\n/opt/chef/embedded/lib/ruby/2.3.0/forwardable.rb:204:in `setup_run_context'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/client.rb:513:in `setup_run_context'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/client.rb:281:in `run'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application.rb:295:in `block in fork_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application.rb:283:in `fork'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application.rb:283:in `fork_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application.rb:248:in `block in run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/local_mode.rb:44:in `with_server_connectivity'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application.rb:236:in `run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application/client.rb:464:in `sleep_then_run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application/client.rb:451:in `block in interval_run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application/client.rb:450:in `loop'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application/client.rb:450:in `interval_run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application/client.rb:434:in `run_application'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/lib/chef/application.rb:59:in `run'\n/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.22.5/bin/chef-client:26:in `\u003ctop (required)\u003e'\n/usr/bin/chef-client:57:in `load'\n/usr/bin/chef-client:57:in `\u003cmain\u003e'\n```\n\nWe have had similar problems with the seven_zip version before:  https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6216","state":"closed","created_at":"2019-04-24T17:48:59.427Z","updated_at":"2019-04-24T19:15:40.773Z","closed_at":"2019-04-24T19:15:40.745Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["chef"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6632","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6632","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6632/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6632/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6632","relative":"#6632","full":"gitlab-com/gl-infra/reliability#6632"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20305152,"iid":6629,"project_id":1304532,"title":"Update cert for *.gprd.gitlab.net in production","description":"# Production Change - Criticality 2 ~\"C2\"\n\n| Change Objective                                       | Prevent *.gprd.gitlab.net certificates from expiring.|\n|:---|:---|\n| Change Type                                            | ~C2 |\n| Services Impacted                                      | GitLab.com |\n| Change Team Members                                    | @cmcfarland |\n| Change Severity                                        | ~S2 |\n| Buddy check or tested in staging                       | I don't think we can test this in staging. Will pair with a colleague for coverage. |\n| Schedule of the change                                 | **See Comments** |\n| Duration of the change                                 | **See Comments** |\n| Detailed steps for the change. Each step must include: | See below |\n\n* Verify certificate is valid locally.\n* Re-format the certificate for vault entry ( https://gitlab.com/gitlab-com/runbooks/blob/master/howto/ssl_cert.md )\n* Use gkms-vault-edit to replace the SSL certificate.\n* Find some way to verify the change is working in production.","state":"closed","created_at":"2019-04-24T13:14:41.711Z","updated_at":"2019-04-29T13:34:06.021Z","closed_at":"2019-04-26T19:54:05.197Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["change"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-04-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6629","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6629","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6629/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6629/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6629","relative":"#6629","full":"gitlab-com/gl-infra/reliability#6629"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20287213,"iid":6625,"project_id":1304532,"title":"Pull Mirrors not running in production","description":"PullMirrorsOverdueQueueTooLarge Alert is Firing and Pull Mirror jobs aren't being processed.\n\n![Screen_Shot_2019-04-23_at_4.11.57_PM](/uploads/38c18ed9789e9b528e5f7afa4b2ca6fc/Screen_Shot_2019-04-23_at_4.11.57_PM.png)\n![Screen_Shot_2019-04-23_at_4.12.56_PM](/uploads/0624dc0892167f22b24d965bd127e635/Screen_Shot_2019-04-23_at_4.12.56_PM.png)\n\nFollowing the runbook caused mirror jobs to run again for a moment, but they stopped again soon afterward","state":"closed","created_at":"2019-04-24T02:16:39.607Z","updated_at":"2019-08-26T23:30:24.550Z","closed_at":"2019-08-26T22:38:38.573Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6625","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6625","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6625/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6625/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6625","relative":"#6625","full":"gitlab-com/gl-infra/reliability#6625"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20272407,"iid":6621,"project_id":1304532,"title":"Rebalance Git Nodes - File 26 and File 28 are above 80%","description":"We should look at File-26 and File-28 to rebalance and figure out growth on File-28.\nhttps://dashboards.gitlab.net/d/W_Pbu9Smk/storage-stats?refresh=30m\u0026orgId=1\n\nfile-28 is at 87% and had been steadily growing over the last month.","state":"closed","created_at":"2019-04-23T14:27:47.902Z","updated_at":"2019-12-26T16:22:14.705Z","closed_at":"2019-06-04T14:56:01.529Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["Service::Git","auto updated","moved 1","priority::2","storage","team::Reliability","unscheduled"],"milestone":{"id":868016,"iid":20,"group_id":1112072,"title":"CI/CD \u0026 Enablement Reliability Engineering May 2019","description":"Tracking asks for CI/CD and Enablement of Reliability teams in May","state":"closed","created_at":"2019-05-07T16:51:19.186Z","updated_at":"2019-06-11T13:53:04.137Z","due_date":"2019-05-31","start_date":"2019-05-05","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/20"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-04-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6621","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6621","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6621/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6621/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6621","relative":"#6621","full":"gitlab-com/gl-infra/reliability#6621"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20263041,"iid":6618,"project_id":1304532,"title":"ChatOps access request for @lmcandrew on ops.gitlab.net","description":"Similar request as https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6454\n\n## What\n\nI'd like to be given chatops access so I can enable feature flags. I think this entails being added to a group on ops.gitlab.net\n\n## Why\n\nIn the Manage team we are using per-group feature flags for the first time, and I'd like to test both the features themselves and the process of enabling feature flags.","state":"closed","created_at":"2019-04-23T09:28:27.892Z","updated_at":"2019-04-29T00:23:52.670Z","closed_at":"2019-04-26T22:22:36.231Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["unblocks others","unscheduled"],"milestone":{"id":854152,"iid":16,"group_id":1112072,"title":"CI/CD \u0026 Enablement Reliability Engineering team - week 17","description":"","state":"closed","created_at":"2019-04-22T13:41:06.899Z","updated_at":"2019-05-07T16:56:28.720Z","due_date":"2019-05-04","start_date":"2019-04-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/16"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2629166,"username":"lmcandrew","name":"Liam McAndrew","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5801f5e2fd21127836c0be61ec71f06b?s=80\u0026d=identicon","web_url":"https://gitlab.com/lmcandrew"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6618","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6618","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6618/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6618/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6618","relative":"#6618","full":"gitlab-com/gl-infra/reliability#6618"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20253280,"iid":6614,"project_id":1304532,"title":"DR gitaly jobs show as not up in prometheus","description":"Using this query `up{tier=\"stor\"}` on https://prometheus.dr.gitlab.net should show `1` on the lines for `job=\"gitaly\"`, just like it is with the others.\n\nThe services are running on the server:\n```\nfile-01-stor-dr.c.gitlab-dr.internal:~$ sudo gitlab-ctl status\nrun: gitaly: (pid 17958) 337468s; run: log: (pid 2383) 862976s\nrun: logrotate: (pid 19323) 2565s; run: log: (pid 2381) 862976s\n```","state":"closed","created_at":"2019-04-22T21:54:27.769Z","updated_at":"2021-02-17T21:48:49.968Z","closed_at":"2021-02-17T21:48:49.874Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":[],"milestone":null,"assignees":[],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6614","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6614","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6614/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6614/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6614","relative":"#6614","full":"gitlab-com/gl-infra/reliability#6614"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20247897,"iid":6611,"project_id":1304532,"title":"Important SSL certificates expiring in May, 2019","description":"Opening up this issue so we have extra attention on the ssl certificates that are expiring in may, some over contribute:\n\n* gitlab.com *May 11 23:59:59 2019 GMT*\n* int.gprd.gitlab.net *May 11 23:59:59 2019 GMT*\n* registry.gitlab.com *May 22 23:59:59 2019 GMT*","state":"closed","created_at":"2019-04-22T18:52:06.250Z","updated_at":"2019-05-01T16:05:44.227Z","closed_at":"2019-05-01T16:05:44.173Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["auto updated","priority::1"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-04-30","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6611","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6611","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6611/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6611/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6611","relative":"#6611","full":"gitlab-com/gl-infra/reliability#6611"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20243671,"iid":6610,"project_id":1304532,"title":"Add runner version var to about-gitlab-com cookbook","description":"In `cookbook-about-gitlab-com::runner` the gitlab-runner package version is locked to prevent unwanted upgrades. We should add a version role variable to make the intention clear and automate upgrading via chef instead of having to do it manually.","state":"closed","created_at":"2019-04-22T16:16:25.418Z","updated_at":"2019-12-09T22:16:25.057Z","closed_at":"2019-12-09T21:11:13.051Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","workflow-infra::Cancelled"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6610","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6610","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6610/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6610/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6610","relative":"#6610","full":"gitlab-com/gl-infra/reliability#6610"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20240684,"iid":6609,"project_id":1304532,"title":"Upgrade runner on about.gitlab.com","description":"gitlab-runner on about-src.gitlab.com is still on the very old version version 10.4 but with the recently introduced feature `ci_use_merge_request_ref` runners need to have version 11.9+. This is blocking review app deploys. We need to upgrade the runner.","state":"closed","created_at":"2019-04-22T14:02:16.865Z","updated_at":"2019-04-22T14:23:48.940Z","closed_at":"2019-04-22T14:07:36.873Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":[],"milestone":{"id":843609,"iid":14,"group_id":1112072,"title":"AS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-09T15:49:36.773Z","updated_at":"2019-04-24T14:40:36.912Z","due_date":"2019-04-21","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/14"},"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-04-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6609","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6609","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6609/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6609/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6609","relative":"#6609","full":"gitlab-com/gl-infra/reliability#6609"},"severity":"UNKNOWN","moved_to_id":20240774,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20235184,"iid":6607,"project_id":1304532,"title":"Clear out S3 artifacts bucket","description":"As of last week, we are officially moved to GCS for artifacts (https://gitlab.com/gitlab-com/gl-infra/production/issues/783). We should delete the artifacts from S3 and remove the bucket.","state":"closed","created_at":"2019-04-22T08:28:20.340Z","updated_at":"2019-12-06T21:45:41.053Z","closed_at":"2019-05-23T18:44:21.689Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Cloud Spend","Ready","Savings-Estimate::$25k - $50k / QTR","auto updated","moved 1","storage","team::Reliability"],"milestone":{"id":868016,"iid":20,"group_id":1112072,"title":"CI/CD \u0026 Enablement Reliability Engineering May 2019","description":"Tracking asks for CI/CD and Enablement of Reliability teams in May","state":"closed","created_at":"2019-05-07T16:51:19.186Z","updated_at":"2019-06-11T13:53:04.137Z","due_date":"2019-05-31","start_date":"2019-05-05","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/20"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-05-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6607","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6607","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6607/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6607/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6607","relative":"#6607","full":"gitlab-com/gl-infra/reliability#6607"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20183369,"iid":6604,"project_id":1304532,"title":"Omnibus version incorrect in chef","description":"The omnibus version value is not correct in some environments.  After deploying `11.10.0-rc8.ee.0`, the roles look like this:\n\nProduction:\n```\nchef_type:           role\ndefault_attributes:\n  omnibus-gitlab:\n    package:\n      key:     ccc8474ea719d51d16542f1a69117ec7d7465bd18b19a832\n      name:    gitlab-ee\n      repo:    gitlab/pre-release\n      use_key: true\n      version: 11.10.0-rc8.ee.0\ndescription:         THIS IS A PLACEHOLDER FOR TAKEOFF - VERSION IS NOT VALID, DO NOT UPLOAD TO CHEF\nenv_run_lists:\njson_class:          Chef::Role\nname:                gprd-omnibus-version\noverride_attributes:\nrun_list:\n```\n\nStaging also appears correct:\n```\nchef_type:           role\ndefault_attributes:\n  omnibus-gitlab:\n    package:\n      key:     ccc8474ea719d51d16542f1a69117ec7d7465bd18b19a832\n      name:    gitlab-ee\n      repo:    gitlab/pre-release\n      use_key: true\n      version: 11.10.0-rc6.ee.0\ndescription:         THIS IS A PLACEHOLDER FOR TAKEOFF - VERSION IS NOT VALID, DO NOT UPLOAD TO CHEF\nenv_run_lists:\njson_class:          Chef::Role\nname:                gstg-omnibus-version\noverride_attributes:\nrun_list:\n```\n\nDR (Note the lack of version):\n```\nchef_type:           role\ndefault_attributes:\n  omnibus-gitlab:\n    package:\n      key:     ccc8474ea719d51d16542f1a69117ec7d7465bd18b19a832\n      name:    gitlab-ee\n      repo:    gitlab/pre-release\n      use_key: true\ndescription:         THIS IS A PLACEHOLDER FOR TAKEOFF VERSION IS NOT VALID, DO NOT UPLOAD TO CHEF\nenv_run_lists:\njson_class:          Chef::Role\nname:                dr-omnibus-version\noverride_attributes:\nrun_list:\n```\n\nPre was updated before production:\n```\nchef_type:           role\ndefault_attributes:\n  omnibus-gitlab:\n    package:\n      key:     ccc8474ea719d51d16542f1a69117ec7d7465bd18b19a832\n      name:    gitlab-ee\n      repo:    gitlab/pre-release\n      use_key: true\n      version: 11.9.8-ee.0\ndescription:         THIS IS A PLACEHOLDER FOR TAKEOFF - VERSION IS NOT VALID, DO NOT UPLOAD TO CHEF\nenv_run_lists:\njson_class:          Chef::Role\nname:                pre-omnibus-version\noverride_attributes:\nrun_list:\n```","state":"closed","created_at":"2019-04-18T20:41:45.303Z","updated_at":"2019-04-19T00:06:12.630Z","closed_at":"2019-04-19T00:03:28.694Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["chef","deploy"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6604","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6604","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6604/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6604/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6604","relative":"#6604","full":"gitlab-com/gl-infra/reliability#6604"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20175680,"iid":6603,"project_id":1304532,"title":"ChatOps access request for @nfriend on ops.gitlab.com","description":"### What\nI'd like to be given ChatOps access in order to enable and disable feature flags on staging.gitlab.com.\n\n### Why\nBeing able to enable and disable feature flags on staging.gitlab.com will allow me to test features hidden behind feature flags as part of our QA process.\n\n### Background\n\nI'm following the example of this issue: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6454","state":"closed","created_at":"2019-04-18T16:54:26.390Z","updated_at":"2019-04-22T14:23:48.901Z","closed_at":"2019-04-22T13:42:41.573Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["auto updated","unscheduled"],"milestone":{"id":840628,"iid":13,"group_id":1112072,"title":"DS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-05T23:03:08.211Z","updated_at":"2019-04-22T22:57:03.216Z","due_date":"2019-04-20","start_date":"2019-04-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/13"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6603","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6603","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6603/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6603/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6603","relative":"#6603","full":"gitlab-com/gl-infra/reliability#6603"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20173929,"iid":6602,"project_id":1304532,"title":"Automate postgres checkup report","description":"Let's automate running https://gitlab.com/postgres-ai-team/postgres-checkup and produce a new checkup report every week (?). The result can be pasted into an issue in the infrastructure queue and reviewed from there.\n\n[An example report](https://gitlab.com/gitlab-com/gl-infra/production/snippets/1845548#postgres-checkup_K003) led to lots of great insights, e.g. in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6590 et al.","state":"closed","created_at":"2019-04-18T15:24:52.517Z","updated_at":"2019-12-06T21:44:21.971Z","closed_at":"2019-06-03T15:42:21.231Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":878523,"iid":22,"group_id":1112072,"title":"Secure and Defend - Upgrade Postgres to version 11 with log centralization and reporting","description":"","state":"closed","created_at":"2019-05-17T21:56:51.299Z","updated_at":"2019-09-09T20:44:30.253Z","due_date":"2019-07-31","start_date":"2019-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/22"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6602","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6602","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6602/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6602/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6602","relative":"#6602","full":"gitlab-com/gl-infra/reliability#6602"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":73,"epic":{"id":7788,"iid":73,"title":"PostgreSQL workload analysis and reporting [50%]","url":"/groups/gitlab-com/gl-infra/-/epics/73","group_id":1112072,"human_readable_end_date":"Jul 31, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":20150946,"iid":6597,"project_id":1304532,"title":"access to dr prometheus","description":"My account is not able to access https://prometheus.dr.gitlab.net/\n![Screen_Shot_2019-04-17_at_4.16.49_PM](/uploads/5d0c545175c8df282072a84758783afe/Screen_Shot_2019-04-17_at_4.16.49_PM.png)","state":"closed","created_at":"2019-04-17T20:41:04.330Z","updated_at":"2019-04-17T20:44:05.101Z","closed_at":"2019-04-17T20:44:05.075Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["automation"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6597","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6597","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6597/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6597/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6597","relative":"#6597","full":"gitlab-com/gl-infra/reliability#6597"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20141253,"iid":6595,"project_id":1304532,"title":"Update some credentials for https://customers.stg.gitlab.com","description":"We need to update the [following fields](https://gitlab.com/gitlab-cookbooks/cookbook-customers-gitlab-com/blob/master/attributes/default.rb#L18-19) on the Chef vault:\n\n`zuora_api_user` and `zuora_api_password`\n\nThe values are stored on the `Subscription Portal` vault that has been shared with the Infrastructure team.","state":"closed","created_at":"2019-04-17T13:44:47.044Z","updated_at":"2019-04-18T14:49:00.072Z","closed_at":"2019-04-17T22:18:56.522Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["chef","deploy","oncall"],"milestone":{"id":840628,"iid":13,"group_id":1112072,"title":"DS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-05T23:03:08.211Z","updated_at":"2019-04-22T22:57:03.216Z","due_date":"2019-04-20","start_date":"2019-04-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/13"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":280339,"username":"rdavila","name":"Rubén Dávila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/280339/avatar.png","web_url":"https://gitlab.com/rdavila"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6595","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6595","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6595/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6595/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6595","relative":"#6595","full":"gitlab-com/gl-infra/reliability#6595"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20137208,"iid":6592,"project_id":1304532,"title":"Switch to hourly rotation for some Elastic indices","description":"Some of our elastic indices are very big - up to a 1TB in size.\n\nThis may be causing some of the problems we're seeing with our Elastic cluster.\n\nIn order to fix the cluster, @ahmadsherif @jarv @mwasilewski\\-gitlab and I discussed solutions, and switching over to hourly logging seems to be fairly straight-forward approach which may help.\n\nWe aim to do this for the following logs:\n\n* `rails`\n* `gitaly`\n* `workhorse`\n\nThe `nginx` logs are also quite large, but we intend to stop sending these to ElasticSearch: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6542 (and only storing them in GCS)\n\n\n**Note** changes may need to be made to the retention tools in https://ops.gitlab.net/gitlab-com/gl-infra/gitlab-restore/esc-tools/","state":"closed","created_at":"2019-04-17T11:06:06.278Z","updated_at":"2019-10-02T16:31:13.135Z","closed_at":"2019-05-22T14:09:09.575Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Global:In Progress","Vendor::Elastic","auto updated","elasticsearch","logging"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6592","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6592","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6592/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6592/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6592","relative":"#6592","full":"gitlab-com/gl-infra/reliability#6592"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20131255,"iid":6589,"project_id":1304532,"title":"Rebuild invalid index: projects_mirror_user_id_idx","description":"Index `projects_mirror_user_id_idx` on the `projects` table is invalid:\n```\n    \"projects_mirror_user_id_idx\" btree (mirror_user_id) INVALID\n```\nas detected by recent checkup: \n\nIt was not so a week ago (the report made 6 days ago [shows only one invalid index](https://gitlab.com/gitlab-com/gl-infra/production/snippets/1845548#postgres-checkup_H001), another one, being expected since at that time pg_repack was operating -- it uses names `index_**` when rebuilding indexes).\n\nAn open question is what caused it.\n\nAction: rebuild it. Perhaps pg_repack is a good option for this.\n\n/cc @abrandl","state":"closed","created_at":"2019-04-17T08:05:36.206Z","updated_at":"2019-04-29T00:23:52.521Z","closed_at":"2019-04-26T11:45:55.833Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]"],"milestone":{"id":852069,"iid":15,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 17","description":"","state":"closed","created_at":"2019-04-18T15:22:12.924Z","updated_at":"2019-05-06T10:47:40.754Z","due_date":"2019-05-03","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/15"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6589","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6589","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6589/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6589/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6589","relative":"#6589","full":"gitlab-com/gl-infra/reliability#6589"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20081851,"iid":6576,"project_id":1304532,"title":"open port 9091 for ops prometheus server","description":"I was trying to setup pushgateway on chef.gitlab.com, license.gitlab.com, version.gitlab.com, and customers.gitlab.com  \nOps prometheus server (prometheus-01-inf-ops.c.gitlab-ops.internal) will be scraping them. Currently, ops prometheus server is not able to connect to the 9091 port of those servers. \n\nAnyone can help open up the port for ops Prometheus server?","state":"closed","created_at":"2019-04-15T19:14:20.376Z","updated_at":"2019-04-22T13:43:40.572Z","closed_at":"2019-04-16T05:07:03.725Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["SRE:On-call","unblocks others"],"milestone":{"id":840628,"iid":13,"group_id":1112072,"title":"DS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-05T23:03:08.211Z","updated_at":"2019-04-22T22:57:03.216Z","due_date":"2019-04-20","start_date":"2019-04-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/13"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6576","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6576","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6576/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6576/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6576","relative":"#6576","full":"gitlab-com/gl-infra/reliability#6576"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20075787,"iid":6574,"project_id":1304532,"title":"fix test kitchen for patroni clusters","description":"please create/fix the test kitchen for patroni clusters on chef","state":"closed","created_at":"2019-04-15T15:16:33.996Z","updated_at":"2019-04-15T21:23:05.055Z","closed_at":"2019-04-15T20:32:45.840Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Database [pl]","Global:In Progress","auto updated","priority::1"],"milestone":{"id":839985,"iid":12,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 15","description":"","state":"closed","created_at":"2019-04-05T09:27:08.641Z","updated_at":"2019-05-06T10:46:47.337Z","due_date":"2019-04-19","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/12"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6574","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6574","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6574/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6574/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6574","relative":"#6574","full":"gitlab-com/gl-infra/reliability#6574"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":20015768,"iid":6568,"project_id":1304532,"title":"Apply GCP sizing recommendations/downsize nodes in DR","description":"In looking at GCP sizing recommendations in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6239, it appears that prod may be difficult, but we do have a similar potential for savings in DR and in the case of the file-nn-stor nodes, we have already moved the persistent disks to standard so the cpus should be able to scale down.\n\nRecommendation is to scale down file-nn nodes to n1-standard-16 from 32 and see how things perform as we turn on Geo.  We may be able to downsize further after Geo has been running and we see more recommendations.  This will initially save us 32 * 32 = 1024 vcpu per month.\n\ncc @glopezfernandez @andrewn @devin.  Assigning devin given that he has been working DR and Geo items.","state":"closed","created_at":"2019-04-12T20:36:35.722Z","updated_at":"2019-04-26T05:42:21.907Z","closed_at":"2019-04-17T19:13:47.514Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Cloud Spend","Executing","Savings-Estimate::$25k - $50k / QTR","auto updated"],"milestone":{"id":840628,"iid":13,"group_id":1112072,"title":"DS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-05T23:03:08.211Z","updated_at":"2019-04-22T22:57:03.216Z","due_date":"2019-04-20","start_date":"2019-04-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/13"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6568","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6568","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6568/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6568/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6568","relative":"#6568","full":"gitlab-com/gl-infra/reliability#6568"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19972071,"iid":6561,"project_id":1304532,"title":"Turn of SSL compression on PostgreSQL ZFS replication slot","description":"The #database channel is getting alerted to a replication slot that is currently using SSL compression:\n\n```sql\ngitlabhq_production=# select * from pg_stat_ssl where compression = 't';\n-[ RECORD 1 ]----------------------------\npid         | 4391\nssl         | t\nversion     | TLSv1.2\ncipher      | ECDHE-RSA-AES256-GCM-SHA384\nbits        | 256\ncompression | t\nclientdn    |\n\ngitlabhq_production=# select * from pg_replication_slots;\n-[ RECORD 1 ]-------+----------------\nslot_name           | postgres_zfs_01\nplugin              |\nslot_type           | physical\ndatoid              |\ndatabase            |\nactive              | t\nactive_pid          | 4391\nxmin                | 3997015837\ncatalog_xmin        |\nrestart_lsn         | D869/D000000\nconfirmed_flush_lsn |\n```","state":"closed","created_at":"2019-04-11T15:52:56.551Z","updated_at":"2019-04-11T18:23:48.004Z","closed_at":"2019-04-11T18:12:12.491Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":[],"milestone":{"id":839985,"iid":12,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 15","description":"","state":"closed","created_at":"2019-04-05T09:27:08.641Z","updated_at":"2019-05-06T10:46:47.337Z","due_date":"2019-04-19","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/12"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6561","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6561","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6561/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6561/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6561","relative":"#6561","full":"gitlab-com/gl-infra/reliability#6561"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19972057,"iid":6560,"project_id":1304532,"title":"PoC: Create test environment with staging database data","description":"Context: https://gitlab.com/abrandl/poc-test-envs\n\nAny comments appreciated","state":"closed","created_at":"2019-04-11T15:52:15.947Z","updated_at":"2019-04-15T16:25:56.234Z","closed_at":"2019-04-15T15:51:44.192Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","Global:In Progress","auto updated"],"milestone":{"id":843609,"iid":14,"group_id":1112072,"title":"AS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-09T15:49:36.773Z","updated_at":"2019-04-24T14:40:36.912Z","due_date":"2019-04-21","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/14"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6560","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6560","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6560/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6560/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6560","relative":"#6560","full":"gitlab-com/gl-infra/reliability#6560"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19960991,"iid":6555,"project_id":1304532,"title":"osqueryd logrotation","description":"`/var/log/osqueryd/{watcher,worker}.log` are not rotated. Especially worker log can grow very fast.","state":"closed","created_at":"2019-04-11T11:07:01.254Z","updated_at":"2019-04-12T12:24:17.760Z","closed_at":"2019-04-12T11:40:04.121Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["logging","security","unscheduled"],"milestone":{"id":843609,"iid":14,"group_id":1112072,"title":"AS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-09T15:49:36.773Z","updated_at":"2019-04-24T14:40:36.912Z","due_date":"2019-04-21","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/14"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6555","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6555","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6555/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6555/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6555","relative":"#6555","full":"gitlab-com/gl-infra/reliability#6555"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19937588,"iid":6553,"project_id":1304532,"title":"Make cron to cleanup temp files on share after a certain age","description":"As part of researching https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6546 - we should go ahead an add a cron that cleans out share after a set time.\n\nThis will be a bandaid until https://gitlab.com/gitlab-org/gitlab-ce/issues/56712 is in place.","state":"closed","created_at":"2019-04-10T19:02:25.188Z","updated_at":"2021-06-24T08:10:17.336Z","closed_at":"2019-06-25T14:14:42.332Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["auto updated","corrective action","team::Reliability","workflow-infra::Done"],"milestone":{"id":883480,"iid":30,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team June 2019","description":"","state":"closed","created_at":"2019-05-22T22:09:36.213Z","updated_at":"2019-07-10T14:17:04.133Z","due_date":"2019-06-30","start_date":"2019-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/30"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6553","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6553","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6553/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6553/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6553","relative":"#6553","full":"gitlab-com/gl-infra/reliability#6553"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19923459,"iid":6549,"project_id":1304532,"title":"Daily runner usage","description":"Extracted from : https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6360#note_157441581\n\nif we could get another report into CI, which gives us daily runner usage (aggregated on total CI runner minutes per day) by the following categories?\n\n1. `gitlab`: GitLab and GitLab forks (this could be as simple as checking for \"gitlab-ce\"/\"gitlab-ee\" in the project path)\n1. `free-public`: shared runners for non-paid public projects\n1. `free-nonpublic`: shared runners for non-paid non-public projects\n1. `paid`: shared runners for non-free projects\n1. `private-runners`: non-shared runner projects","state":"closed","created_at":"2019-04-10T11:23:49.716Z","updated_at":"2020-01-15T15:11:59.084Z","closed_at":"2019-05-06T10:51:41.084Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","team::Reliability"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6549","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6549","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6549/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6549/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6549","relative":"#6549","full":"gitlab-com/gl-infra/reliability#6549"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19920571,"iid":6548,"project_id":1304532,"title":"Databases reviews","description":"* [x] @abrandl https://dev.gitlab.org/gitlab/gitlab-ee/merge_requests/866\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10676\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/26490\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/10756","state":"closed","created_at":"2019-04-10T10:10:34.595Z","updated_at":"2019-06-25T19:50:41.301Z","closed_at":"2019-04-23T11:55:14.274Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","Global:In Progress"],"milestone":{"id":839985,"iid":12,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 15","description":"","state":"closed","created_at":"2019-04-05T09:27:08.641Z","updated_at":"2019-05-06T10:46:47.337Z","due_date":"2019-04-19","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/12"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6548","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6548","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6548/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6548/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6548","relative":"#6548","full":"gitlab-com/gl-infra/reliability#6548"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19913546,"iid":6547,"project_id":1304532,"title":"Consider increasing Runner timeouts for gitlab-shared-runners-manager-X.gitlab.com runners to 90 minutes","description":"Currently it seems that the runners from `gitlab-shared-runners-manager-X.gitlab.com` are using a 60 minutes timeout which can lead to rspec jobs to timeout even if all the tests actually passed (e.g. https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/193827374, https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/193827346). We should consider increasing this timeout to something like 90 minutes.\n\n@tmaczukin What do you think?\n\n/cc @meks @godfat","state":"closed","created_at":"2019-04-10T07:29:55.566Z","updated_at":"2019-12-26T15:46:49.271Z","closed_at":"2019-04-16T14:09:14.773Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["auto updated","unscheduled"],"milestone":{"id":840628,"iid":13,"group_id":1112072,"title":"DS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-05T23:03:08.211Z","updated_at":"2019-04-22T22:57:03.216Z","due_date":"2019-04-20","start_date":"2019-04-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/13"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":12,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6547","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6547","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6547/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6547/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6547","relative":"#6547","full":"gitlab-com/gl-infra/reliability#6547"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19849793,"iid":6537,"project_id":1304532,"title":"setup an Elastic Cloud cluster for indexing in staging.gitlab.com","description":"as per: https://gitlab.com/groups/gitlab-org/-/epics/853 we need to set up an ELK cluster to enable Elasticsearch integration on `staging.gitlab.com` for `gitlab-org` group\n\n~~* [ ] extend our subscription in Elastic Cloud~~ turns out the subscription limit is per deployment so I could create the cluster\n* [x] create a cluster for staging\n* [x] connect it to `staging.gitlab.com` (limit to `gitlab-org`, do not enable searching for now, let indexing run first)\n  * [x] check indexing is done, after ~12h:\n```bash\n$ sudo gitlab-rake gitlab:elastic:index_repositories_status\nIndexing is 26.30% complete (811186/3084890 projects)\n```\n* [x] indexing is done\n* [x] if needed, manually trigger indexing: https://docs.gitlab.com/ee/integration/elasticsearch.html#indexing-large-instances\n* [x] enable searching with ELK on `staging.gitlab.com`\n* [x] test resizing of the cluster","state":"closed","created_at":"2019-04-08T16:18:58.866Z","updated_at":"2019-12-16T12:03:41.155Z","closed_at":"2019-04-11T09:13:13.369Z","closed_by":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"labels":["Global:In Progress"],"milestone":{"id":839985,"iid":12,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 15","description":"","state":"closed","created_at":"2019-04-05T09:27:08.641Z","updated_at":"2019-05-06T10:46:47.337Z","due_date":"2019-04-19","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/12"},"assignees":[{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6537","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":7},"weight":16,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6537","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6537/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6537/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6537","relative":"#6537","full":"gitlab-com/gl-infra/reliability#6537"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":64,"epic":{"id":7473,"iid":64,"title":"implement ElasticSearch on GitLab.com - 90%","url":"/groups/gitlab-com/gl-infra/-/epics/64","group_id":1112072,"human_readable_end_date":"Jun 28, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":19796443,"iid":6534,"project_id":1304532,"title":"Investigate 10TB Directory on share-01","description":"In https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6467 we began to investigate why the `share-01` server filled up so much and so quickly.\n\nIt was determined that the directory `/var/opt/gitlab/gitlab-rails/uploads/-/system/tmp` has 10.1TB of data in it and we need to figure out how it got there and decide if it can be deleted. Given that it is `tmp`, I would imagine we can just delete it, but we need to verify its purpose and why it got to this point before doing so.","state":"closed","created_at":"2019-04-06T01:16:09.828Z","updated_at":"2019-04-18T21:23:15.603Z","closed_at":"2019-04-18T21:03:39.502Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["auto updated","priority::2","storage"],"milestone":{"id":840628,"iid":13,"group_id":1112072,"title":"DS Team 2019 Week 15","description":"","state":"closed","created_at":"2019-04-05T23:03:08.211Z","updated_at":"2019-04-22T22:57:03.216Z","due_date":"2019-04-20","start_date":"2019-04-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/13"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":8,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6534","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6534","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6534/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6534/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6534","relative":"#6534","full":"gitlab-com/gl-infra/reliability#6534"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19752181,"iid":6525,"project_id":1304532,"title":"Jump Links in Slack lead to old archived channel","description":"When clicking `Jump` on an alert recovery, acknowledgement or un-acknowledgement in the production channel, it opens the archived `#infrastructure` channel.\n\nI would expect it to lead to the original alert message in the #production channel","state":"closed","created_at":"2019-04-04T20:49:06.635Z","updated_at":"2019-12-26T14:10:59.671Z","closed_at":"2019-04-08T19:25:06.723Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["PagerDuty","alert","auto updated"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6525","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6525","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6525/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6525/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6525","relative":"#6525","full":"gitlab-com/gl-infra/reliability#6525"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19751852,"iid":6524,"project_id":1304532,"title":"Add alerts for osqueryd metrics","description":"We should add alerts for process_exporter metrics for CPU and disk usage.","state":"closed","created_at":"2019-04-04T20:27:33.995Z","updated_at":"2019-12-06T21:42:53.926Z","closed_at":"2019-09-02T12:30:06.488Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["corrective action","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6524","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6524","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6524/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6524/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6524","relative":"#6524","full":"gitlab-com/gl-infra/reliability#6524"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19751762,"iid":6523,"project_id":1304532,"title":"Define a production-readiness process for services","description":"Define and document criteria for a service to be declared ready for production.\nThis should lead to a process ensuring production-readiness for new and existing services.","state":"closed","created_at":"2019-04-04T20:22:07.566Z","updated_at":"2020-10-02T08:30:02.436Z","closed_at":"2020-10-02T08:29:40.834Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["corrective action","meta","severity::3","workflow-infra::Done"],"milestone":{"id":1601701,"iid":95,"group_id":1112072,"title":"Datastores Team - From 21-Sept-2020","description":"","state":"closed","created_at":"2020-08-24T16:23:44.867Z","updated_at":"2021-06-27T15:49:40.503Z","due_date":"2020-10-18","start_date":"2020-09-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/95"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6523","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6523","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6523/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6523/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6523","relative":"#6523","full":"gitlab-com/gl-infra/reliability#6523"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19748639,"iid":6522,"project_id":1304532,"title":"[RCA] osqueryd consuming too many resources in production","description":"## Summary\n\nService(s) affected : N/A\nTeam attribution : infrastructure/security\nMinutes downtime or degradation : N/A\n\n## Impact \u0026 Metrics\n\n- What was the impact of the incident?\n  - CPU load and disk IO on most machines went up, consuming an equivalent of ca. 60 cores overall in the production fleet.\n- Who was impacted by this incident?\n  - mostly security and infrastructure teams having to spend time finding and fixing the root cause and preventing further impact\n- How did the incident impact customers? (i.e. preventing them from doing X, incorrect display of Y, ...)\n  - As the cpu usage of osqueryd was isolated to 1 core on each server there was no measurable slowdown of any service but it might be that it was contributing to slower response during times of higher load on the site.\n- How many attempts were made to access the impacted service/feature?\n  - N/A\n- How many customers were affected?\n  - N/A\n- How many customers tried to access the impacted service/feature?\n  - N/A\n\nOverall osqueryd CPU consumption by env (we are missing the week before as we switched to thanos longterm storage last week):\n![overall CPU consumption by env](/uploads/317c884da20af07381af518fae1db26e/image.png)\n\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n  - a few hours after prod deployment, SRE oncall was paged for root disk filling up on git-servers (because of growing osqueryd data dir). Investigation showed issues with the embedded rocksdb and [high CPU usage](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6434#note_152859032). \n- Did alarming work as expected?\n  - The existing alarming worked to notify us about systems coming into critical state, but we didn't have specific alerts or monitoring for osqueryd misbehaving. Also, FilesystemFullSoon alerts are not going to pagerduty, but disks filled so fast, that we were at risk to have them filled up before SRE oncall was taking notice.\n- How long did it take from the start of the incident to its detection?\n  - prod deployment started 1am UTC, filesystem-full alerts coming in 5:49am (in slack channel, not via pagerduty), SRE oncall starting to take action 12:15pm\n- How long did it take from detection to remediation?\n - immediate remediation for FileSystemFull alerts at 11:15am. Trimming down the osqueryd profile took place over several days with finally stopping it in production after 7 days because of rocketdb corruption issues not stopping.\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team member wasn't page-able, ...)\n  - security team having no insight to metrics or logs of osqueryd was slowing down the process of analysing and fixing the issue\n\n## Timeline\n\n2019-03-21\n* 01:00 UTC - starting to deploy osqueryd to production\n* 05:49 UTC - FilesystemFullSoon alerts starting for git-\\* nodes\n* 12:20 UTC - SRE On-call stopping osqueryd on git nodes and cleaning up data dirs\n* 15:00 UTC - SRE On-call noticing that uptycs cookbook is re-installing and restarting osqueryd on each chef-client run (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6440)\n* 17:30 UTC - Security moved git hosts into new profile, collecting less data\n* 18:34 UTC - SRE On-call deploying MR to fix uptycs cookbook reinstall issue (https://gitlab.com/gitlab-cookbooks/gitlab-uptycs/merge_requests/9)\n\n2019-02-22\n* 07:10 UTC - SRE On-call noticing that not all git nodes got a new profile (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6434#note_153156697)\n* 08:21 UTC - security applying the new profile to missing git nodes\n* 11:04 UTC - SRE On-call providing list with other hosts having osqueryd issues (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6434#note_153231389)\n* 21:01 UTC - new profile without local caching applied to all hosts\n\n2019-03-25\n\n* 11:22 UTC - SRE-oncall still seeing hosts with issues, pinging security through slack\n\n2019-03-28\n\n* 15:50 UTC - process monitoring for osquery deployed, showing a lot CPU usage over the whole fleet (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6434#note_155174540)\n\n2019-03-29\n\n* 13:15 UTC - osqueryd being stopped in production to stop waste of CPU resources until solution is found.\n\n2019-04-03\n\n* 02:15 UTC - deploying Uptycs 3.2.6.46 (wich contains a fix for rocksdb) in staging solves the CPU utilization issues (https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/945)\n\n\n\n\n## Root Cause Analysis\n\nosqueryd showed anomalous behavior in production. That was caused by a profile that was collecting too many data with too high frequency and a bug specific to RocksDB in Uptycs 3.2.6.40 that was leading to db corruption and spinning with 100% cpu usage on 1 core. We did collect too many different metrics because it was assumed that the default uptycs profile would have no negative impact on our hosts and would not do local caching. That assumption wasn't proofed wrong in tests beforehand - presumably, because we didn't test on hosts with the same workload like in production and because we didn't have enough visibility into the behavior of osqueryd. We missed visibility because we didn't implement monitoring for the behavior of the osqueryd process before going into production and maybe also because we didn't examine the osqueryd logs enough in tests to see what it is collecting. Solving the issue in production took a while because the security team didn't have direct access to the staging and production systems, so they couldn't observe logs or system resource usage while the infra team didn't have insight into the osqueryd configuration profile and also didn't have expertise with the product.\n\n## What went well\n\n- Our existing monitoring and alerts made as aware of the issues before they could cause issues in production. \n- First response of infra and security teams was fast and we worked closely together to find the root cause and fix it.\n- Osqueryd was configured with resource usage limits, so it never exhausted a whole node, but only 1 core per node at maximum\n\n## What can be improved\n\n- We should do proper testing before bringing a new service into production.\n- SRE and security to work closer together in planning and developing a new service.\n- SREs should take a stronger lead on ensuring production readiness for a new service before going live (monitoring, alerting, runbook, ...).\n- We should have solid cookbooks with proper tests and ways to enable or disable the service. Initially, the cookbook was always re-installing osqueryd on each chef-run and there was no way to control the service.\n- We should only collect the necessary metrics and avoid collecting metrics that are already available through our existing monitoring systems.\n- We could have stopped osqueryd in production earlier instead of trying to fix it there and discovering more and more issues in the process.\n\n## Corrective actions\n\n- formalize and document production readiness process: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6523\n- add alerts for osqueryd cpu and disk usage: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6524 \n- review the profile of osqueryd, what metrics it is collecting how often, and what we really need from it: https://gitlab.com/gitlab-com/gl-security/operations/issues/180\n- deploy fixed Uptycs version 3.2.6.46","state":"closed","created_at":"2019-04-04T18:41:03.897Z","updated_at":"2019-07-09T14:29:12.750Z","closed_at":"2019-07-09T13:35:26.703Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["IncidentReview","SRE:On-call","unscheduled"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6522","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6522","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6522/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6522/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6522","relative":"#6522","full":"gitlab-com/gl-infra/reliability#6522"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19745425,"iid":6520,"project_id":1304532,"title":"Change PatroniIsDown backing metrics","description":"Right now we use a metric that's exported by mtail to determine if Patroni is up, which has been proven to be unreliable  at times. Instead we should use process-exporter for this.","state":"closed","created_at":"2019-04-04T16:08:53.552Z","updated_at":"2019-04-25T05:47:09.098Z","closed_at":"2019-04-16T12:52:59.360Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Global:In Progress","alert"],"milestone":{"id":839985,"iid":12,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 15","description":"","state":"closed","created_at":"2019-04-05T09:27:08.641Z","updated_at":"2019-05-06T10:46:47.337Z","due_date":"2019-04-19","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/12"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6520","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6520","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6520/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6520/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6520","relative":"#6520","full":"gitlab-com/gl-infra/reliability#6520"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19717209,"iid":6519,"project_id":1304532,"title":"Blueprint for MachineResourceManager","description":"We want to be able to upgrade OS and/or Kernel on our compute machines whenever we want and downgrade if we find issues. The traditional way of doing `apt-get` directly on our hosts is succeeded with a process like `unattended-upgrades`. However, we are taking it to the next level and going with base image creation process. The idea is that we will have a fully automated process that can build a new image with newer OS/kernel and can test it to make sure basic functionalities work without any issues. There is already work being done for this. \n\nWhat is needed then? We still need to come up with a process that will take the base image, do all the orchestration work of configuring it the way we want for a given service and replace an existing node with the new one and it should be able to do it for all of our hosts. \n\nThis issue is to keep track of the blueprint for this initiative. It is called: \"MachineResourceManager\". In the work field, \"Human Resource\" is a function that deals with hiring, firing, providing career growth/development, promotion...etc for employees. When demand increases, HR hires more people temporarily. HR lets go off employees and onboards new employees. These are very similar to what we are trying to achieve with the work - the only difference is that it is for machines. We want to be able to replace machines, add some and remove some when needed.","state":"closed","created_at":"2019-04-04T10:05:38.810Z","updated_at":"2019-06-25T07:47:16.009Z","closed_at":"2019-06-25T06:48:16.260Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["blueprint"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6519","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6519","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6519/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6519/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6519","relative":"#6519","full":"gitlab-com/gl-infra/reliability#6519"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19702775,"iid":6518,"project_id":1304532,"title":"Access Request: MR Access to Ops gitlab-cookbooks","description":"Request for myself (@pharrison on ops.gitlab.net) to be given access to submit MR's to the gitlab-cookbooks project.  This will be used to simplify bumping version numbers and adding cookbooks to areas like the ops/gprd/gstg environments json.","state":"closed","created_at":"2019-04-03T20:32:00.035Z","updated_at":"2019-04-10T01:23:35.548Z","closed_at":"2019-04-03T21:21:01.527Z","closed_by":{"id":3331073,"username":"pharrison","name":"Paul Harrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3331073/avatar.png","web_url":"https://gitlab.com/pharrison"},"labels":["unscheduled"],"milestone":{"id":811968,"iid":7,"group_id":1112072,"title":"AS Team 2019 Week 13","description":"","state":"closed","created_at":"2019-03-07T16:20:33.216Z","updated_at":"2019-04-22T21:02:45.062Z","due_date":"2019-04-07","start_date":"2019-03-25","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/7"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3331073,"username":"pharrison","name":"Paul Harrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3331073/avatar.png","web_url":"https://gitlab.com/pharrison"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6518","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6518","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6518/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6518/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6518","relative":"#6518","full":"gitlab-com/gl-infra/reliability#6518"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":19683326,"iid":6515,"project_id":1304532,"title":"Setup omnibus in testbed env","description":"Setup omnibus in the testbed env.","state":"closed","created_at":"2019-04-03T10:29:08.470Z","updated_at":"2019-12-06T21:44:10.982Z","closed_at":"2019-05-21T22:33:36.372Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6515","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6515","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6515/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6515/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6515","relative":"#6515","full":"gitlab-com/gl-infra/reliability#6515"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":60,"epic":{"id":4887,"iid":60,"title":"Testbed for on-prem performance testing","url":"/groups/gitlab-com/gl-infra/-/epics/60","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":19683283,"iid":6514,"project_id":1304532,"title":"Setup monitoring for testbed env","description":"* [ ] Setup prometheus server in testbed env\n* [ ] Network peering with ops\n* [ ] Configure Prometheus, Alertmanager, ...","state":"closed","created_at":"2019-04-03T10:27:25.511Z","updated_at":"2019-12-06T21:44:10.879Z","closed_at":"2019-05-21T22:34:11.360Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6514","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6514","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6514/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6514/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6514","relative":"#6514","full":"gitlab-com/gl-infra/reliability#6514"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":60,"epic":{"id":4887,"iid":60,"title":"Testbed for on-prem performance testing","url":"/groups/gitlab-com/gl-infra/-/epics/60","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":19683151,"iid":6513,"project_id":1304532,"title":"create testbed bastion host","description":"Stand up bastion host for the testbed. Add ssh config.","state":"closed","created_at":"2019-04-03T10:22:45.702Z","updated_at":"2019-12-06T21:44:10.708Z","closed_at":"2019-04-30T03:52:19.161Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6513","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6513","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6513/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6513/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6513","relative":"#6513","full":"gitlab-com/gl-infra/reliability#6513"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":60,"epic":{"id":4887,"iid":60,"title":"Testbed for on-prem performance testing","url":"/groups/gitlab-com/gl-infra/-/epics/60","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":19682974,"iid":6512,"project_id":1304532,"title":"Create Chef env for testbed","description":"Create Chef environment for the testbed environment.","state":"closed","created_at":"2019-04-03T10:15:26.139Z","updated_at":"2019-12-06T21:44:10.533Z","closed_at":"2019-05-06T03:17:04.159Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6512","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6512","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6512/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6512/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6512","relative":"#6512","full":"gitlab-com/gl-infra/reliability#6512"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":60,"epic":{"id":4887,"iid":60,"title":"Testbed for on-prem performance testing","url":"/groups/gitlab-com/gl-infra/-/epics/60","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":19680849,"iid":6511,"project_id":1304532,"title":"Create terraform env for testbed","description":"Create a new terraform env for the testbed environment. Make it work with the gitlab-testbed GCP project (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6510). Store terraform env credentials in 1Password.","state":"closed","created_at":"2019-04-03T09:52:45.000Z","updated_at":"2019-12-06T21:44:10.319Z","closed_at":"2019-05-21T21:58:46.773Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Global:In Progress","team::Reliability"],"milestone":{"id":854743,"iid":17,"group_id":1112072,"title":"Secure \u0026 Defend, Reliability Engineering - 2019W17","description":"","state":"closed","created_at":"2019-04-22T21:05:26.696Z","updated_at":"2019-05-21T02:08:12.751Z","due_date":"2019-05-05","start_date":"2019-04-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/17"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/6511","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/6511","notes":"https://gitlab.com/api/v4/projects/1304532/issues/6511/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/6511/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#6511","relative":"#6511","full":"gitlab-com/gl-infra/reliability#6511"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":60,"epic":{"id":4887,"iid":60,"title":"Testbed for on-prem performance testing","url":"/groups/gitlab-com/gl-infra/-/epics/60","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]