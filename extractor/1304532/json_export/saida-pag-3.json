[{"id":43413000,"iid":10550,"project_id":1304532,"title":"Configure Flipper HTTP adapter on dev.gitlab.org","description":"# Details\n\nNow, we [can smoothly connect to GitLab Feature Flag from `Feature` class](https://gitlab.com/gitlab-org/gitlab/-/issues/222273). We should start dogfooding on a pre-production server dev.gitlab.org in order to evaluate the new architecture if it works properly\n\n## TODO\n\n- [ ] Announce when we reconfigure the instance. Engineers cannot update feature flags during the maintaince period.\n- [ ] [Reconfigure dev.gitlab.org to use HTTP adapter](https://gitlab.com/gitlab-org/gitlab/-/issues/222266). The URL points to a GitLab Feature Flag Server (Project) in ops.gitlab.net.\n- [ ] [Migrate existing flag data from local postgres to GitLab Feature Flag](https://gitlab.com/gitlab-org/gitlab/-/issues/222273).\n- [ ] Announce when the migration is done. Engineers can update feature flags via chatops again.\n\nProbably, it'd better we introduce a maintenance mode in chatops for feature flags that prevents anyone to update feature flags during the term. We're already doing the same during a production incident.\n\n## Feature Flag Servers\n\n- dev.gitlab.org ... https://ops.gitlab.net/gitlab-org/feature_flags/dev \n- staging.gitlab.com ... https://ops.gitlab.net/gitlab-org/feature_flags/staging\n- gitlab.com ... https://ops.gitlab.net/gitlab-org/feature_flags/production\n\n## NOTES\n\n- Developers can change flags via Chatops or rails console (i.e. Feature.enable). You can see the strategy vs gate mapping below.\n- Developers cannot change flags in GitLab's Feature Flag UI (i.e. readonly). This is because chatops has some extended features e.g. freeze all flags during a production incident. We'll likely follow this up.\n- This is [a part of ~Dogfooding issues](https://gitlab.com/groups/gitlab-org/-/epics/3367).","state":"closed","created_at":"2020-06-15T07:21:35.040Z","updated_at":"2022-08-04T12:52:00.888Z","closed_at":"2022-08-02T06:01:43.578Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ü§ñ GitLab Bot ü§ñ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["devops::release","dogfooding","group::progressive delivery","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10550","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10550","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10550/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10550/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10550","relative":"#10550","full":"gitlab-com/gl-infra/reliability#10550"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":38020114,"iid":10504,"project_id":1304532,"title":"Put osquery Grafana dashboard under version control","description":"We want to [cleanup manually managed Grafana dashboards](https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2345). As the [osquery dashboard](https://dashboards.gitlab.net/d/fjSLYzRWz/osquery) still is needed (for monitoring the uptycs deployment, which is about to be [rolled-out with a new version](https://gitlab.com/gitlab-com/gl-security/secops/detection/uptycs/-/issues/13) by security soon), we should add it to the runbooks/dashboards folder.","state":"closed","created_at":"2020-06-09T14:21:07.760Z","updated_at":"2022-09-01T00:55:12.110Z","closed_at":"2022-09-01T00:55:12.098Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Reliability::P4","Service::PublicGrafana","team::Reliability","workflow-infra::Triage"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10504","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10504","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10504/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10504/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10504","relative":"#10504","full":"gitlab-com/gl-infra/reliability#10504"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":36062339,"iid":10495,"project_id":1304532,"title":"Add CNAME to DNS - Sigstr","description":"## Goal\n\nWe are onboarding a new tool in marketing operations and require a new CNAME in our DNS.\n\nThe name of the record should be `signatures.gitlab.com` and the value should point it to `gitlab.sigstr.net`.","state":"closed","created_at":"2020-06-08T15:23:24.093Z","updated_at":"2020-08-24T21:00:07.248Z","closed_at":"2020-07-02T18:43:00.082Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["AssistType::Domain-DNS-SSL-Management","Unplanned","workflow-infra::Done"],"milestone":{"id":1326091,"iid":86,"group_id":1112072,"title":"Core Infra Team - July 2020","description":"Themes TBD","state":"closed","created_at":"2020-06-15T22:35:29.762Z","updated_at":"2020-08-03T21:17:36.419Z","due_date":"2020-07-31","start_date":"2020-06-26","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/86"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":1243277,"username":"ghost1","name":"Ghost User","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4249f4df72b475e7894fabed1c5888cf?s=80\u0026d=identicon","web_url":"https://gitlab.com/ghost1"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-07-02","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10495","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10495","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10495/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10495/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10495","relative":"#10495","full":"gitlab-com/gl-infra/reliability#10495"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35424143,"iid":10468,"project_id":1304532,"title":"Ignore min_cpu_platform in all instances and envs in terraform","description":"We sometimes get random changes of `min_cpu_platform` for instances in our plan. Presumably, when gcp internally decides to run a VM on a different CPU family (maybe triggered by a reboot) - that's at least my theory. This is unfortunate, because it causes an unclean plan and applying the plan needs a reboot of the instance.\n\n```\n- min_cpu_platform          = \"Intel Skylake\" -\u003e null\n```\n\nAs we are not interested in `min_cpu_platform` so far (we only select `machine_type`), we should make terraform ignore this attribute for all instances and envs instances.","state":"closed","created_at":"2020-06-04T10:14:32.733Z","updated_at":"2021-10-11T23:01:15.675Z","closed_at":"2021-10-08T15:07:16.950Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["auto updated","team::Reliability","terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10468","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10468","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10468/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10468/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10468","relative":"#10468","full":"gitlab-com/gl-infra/reliability#10468"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35386491,"iid":10455,"project_id":1304532,"title":"Planning for Observability Team W25 Milestone/Sprint","description":"[Milestone](https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/81)\n\n## Calendar\n\n|             | M 15 Jun | T 16 Jun | W 17 Jun | Th 18 Jun  | F 19 Jun\n|-------------|----------|----------|----------|----------- |----------\n| @bjk-gitlab | - | - | - | - | -\n| @cindy | - | - | - | - | -\n| @craigf | :pager: | :wrench: | :wrench: | :wrench: | :wrench: \n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\n| @msmiley | - | - | - | - | -\n| @mwasilewski-gitlab | - | - | - | - | üßòüèª‚Äç‚ôÇÔ∏è\n\nW25 working days: 24\n\n|             | M 22 Jun | T 23 Jun | W 24 Jun | Th 25 Jun  | F 26 Jun\n|-------------|----------|----------|----------|----------- |----------\n| @bjk-gitlab | - | - | - | - | -\n| @cindy | - | - | - | - | -\n| @craigf | :sun_with_face: | :palm_tree: | - | - | -\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\n| @msmiley | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: \n| @mwasilewski-gitlab | - | - | - | - | -\n\nW26 working days: 24\n\n\u003chr\u003e\n\n**Total working days: 48**","state":"closed","created_at":"2020-06-03T13:39:56.529Z","updated_at":"2022-08-04T12:52:57.325Z","closed_at":"2020-06-17T16:19:20.451Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["workflow-infra::Done"],"milestone":{"id":1249005,"iid":80,"group_id":1112072,"title":"Observability Team - W23 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/1bab352839c4f6af55ab757f09188ecd/Team_Focus_-_W23.jpeg\" width=\"850\"/\u003e\r\n\r\nWe have limited capacity this week, with only 11 working days due to time-off, holidays, and on-call shifts. Additionally, this is the final week for 360¬∞ feedback in Culture Amp. So, it's exceedingly important this sprint to work from the board! A few issues are carryovers from the May milestone‚Äìand you've already made significant progress on them‚Äìthat should close quickly. There are also some related, blocking issues that will cascade to closed. I'm confident we'll hit over 90% this sprint.\r\n\r\nAs seen above, we have a need to dedicate the majority of our focus to alerting and monitoring fixes and tunings. Columns on the board continue issues labeled ~P1 ~P2 and ~P3, and whenever possible should be worked on in order of priority.\r\n\r\nThe o11y weekly meeting is on Tuesday, 02 Jun. We'll cover this then. See you all there.\r\n\r\n---\r\n\r\n## Calendar\r\n\r\n|             | M 01 Jun | T 02 Jun | W 03 Jun | Th 04 Jun  | F 05 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :ferris_wheel: | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @igorwwwwwwwwwwwwwwwwwwww | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @msmiley | - | :pager: | :pager: | :pager: | :pager:\r\n| @mwasilewski-gitlab | - | :pager: | :pager: | :pager: | :pager:\r\n\r\nW23 working days: 11\r\n\r\n|             | M 08 Jun | T 09 Jun | W 10 Jun | Th 11 Jun  | F 12 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | :sun_with_face: \r\n| @cindy | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :sun_with_face:\r\n| @craigf | :x: | :pager: | :pager: | :pager: | :pager:\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | :sun_with_face: \r\n| @msmiley | :pager: | :wrench: | :wrench: | :wrench: | :sun_with_face:\r\n| @mwasilewski-gitlab | :pager: | :wrench: | :wrench: | :ferris_wheel: | :sun_with_face: \r\n\r\nW24 working days: 8\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 19**","state":"closed","created_at":"2020-04-20T20:17:57.535Z","updated_at":"2020-06-17T16:19:26.003Z","due_date":"2020-06-12","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/80"},"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-06-11","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10455","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10455","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10455/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10455/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10455","relative":"#10455","full":"gitlab-com/gl-infra/reliability#10455"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35206403,"iid":10404,"project_id":1304532,"title":"Update about.gitlab.com review apps prometheus probe","description":"We have [a probe configured](https://ops.gitlab.net/gitlab-cookbooks/chef-repo/blob/0ce027722dac3bd7c11b8de87b3a1e8dd1d0ca1c/roles/gprd-infra-prometheus-server.json#L215) for about-src.gitlab.com. We used to serve review apps for https://gitlab.com/gitlab-com/www-gitlab-com/ from that domain, but now we do it from about.gitlab-review.app. We should update that probe.","state":"closed","created_at":"2020-05-30T02:46:35.305Z","updated_at":"2022-08-04T12:53:36.635Z","closed_at":"2020-05-30T02:55:55.512Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["oncall","workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10404","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10404","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10404/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10404/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10404","relative":"#10404","full":"gitlab-com/gl-infra/reliability#10404"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35205922,"iid":10403,"project_id":1304532,"title":"Move legacy redirects out of about-src to fastly","description":"We got a [PagerDuty alert](https://gitlab.pagerduty.com/incidents/PRU4JCP) about a cert about to expire for about-src.gitlab.com. We first thought this was for about.gitlab.com but it seems it's actually for the legacy redirects we're still serving through that host (see https://ops.gitlab.net/gitlab-cookbooks/chef-repo/blob/81e814df0e352d43f3c6a6e8576f4a3625346d6d/roles/about-gitlab-com.json#L7-23). We should move those to our [terraform redirects environment](https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/-/tree/master/environments/redirects) which will put them on Fastly and manage SSL certificates through it.\n\n- [x] https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/-/merge_requests/1784\n- [x] https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/merge_requests/3606\n- [x] `knife vault edit about-gitlab-com _default` and remove the old SSL certs\n\n/cc @ahmadsherif @ggillies FYI in case you saw that alert.","state":"closed","created_at":"2020-05-30T01:40:52.677Z","updated_at":"2022-08-04T12:53:37.264Z","closed_at":"2020-05-30T02:44:17.831Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["oncall","workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10403","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10403","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10403/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10403/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10403","relative":"#10403","full":"gitlab-com/gl-infra/reliability#10403"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35178244,"iid":10385,"project_id":1304532,"title":"[Runbook] update the runbook to create or restore a delayed/archived replica","description":"Review the existent runbooks, and update the process on the PostgreSQL version 11.7. \n\nAlso update the reference and commands for the usage of wal-g to apply the wals.\n\nIn these environments, PostgreSQL is installed by omnibus.\n\nPlease consider the case when the replica is out of sync and how to troubleshoot and fix the instance.","state":"closed","created_at":"2020-05-29T14:24:54.871Z","updated_at":"2022-08-04T12:53:45.870Z","closed_at":"2020-06-26T10:51:21.282Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10385","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10385","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10385/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10385/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10385","relative":"#10385","full":"gitlab-com/gl-infra/reliability#10385"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":252,"epic":{"id":56403,"iid":252,"title":"Design/Identify Database related runbooks that we'll want to develop, for the infrastructure team","url":"/groups/gitlab-com/gl-infra/-/epics/252","group_id":1112072,"human_readable_end_date":"Mar 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":35086129,"iid":10363,"project_id":1304532,"title":"Completely decommission uptycs from our fleet","description":"Security wants to rollout a new version of uptycs. To prevent any glitches, uptycs is recommending to completely remove the previous version from the fleet first: https://gitlab.com/gitlab-com/gl-security/secops/detection/uptycs/-/issues/13#note_349679029\n\nWe need to update the `gitlab-uptycs` cookbook to support de-installing the package and deleting the data dir and then execute the decommissioning of the old uptycs version.","state":"closed","created_at":"2020-05-27T18:35:37.618Z","updated_at":"2020-06-05T16:47:59.622Z","closed_at":"2020-06-05T16:34:59.518Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["security","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2020-06-05","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10363","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10363","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10363/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10363/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10363","relative":"#10363","full":"gitlab-com/gl-infra/reliability#10363"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35055230,"iid":10351,"project_id":1304532,"title":"Sidekiq logs and metrics are missing for ops","description":"The sidekiq dashboards for ops don't show data (prometheus metrics missing) and the sidekiq logs in elastic seem to only show client logs but not server logs: https://nonprod-log.gitlab.net/goto/92baf0950243d109800bd67aacb427a3.","state":"closed","created_at":"2020-05-27T10:03:30.347Z","updated_at":"2022-09-01T00:52:15.517Z","closed_at":"2022-09-01T00:52:14.881Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Observability","Reliability::P4","Service::Sidekiq","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10351","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10351","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10351/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10351/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10351","relative":"#10351","full":"gitlab-com/gl-infra/reliability#10351"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35021099,"iid":10343,"project_id":1304532,"title":"postgres checkup does not include information from database primary","description":"The latest postgres-checkup report does not seem to include information about the primary database instance: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10326\n\nI suspect this is only a configuration issue with the pipeline (but don't have access). It would be helpful to have the primary included, particularly to understand the read/write workload better.\n\nThe project to look at is: https://ops.gitlab.net/gitlab-com/gl-infra/postgres-checkup I recall we've had a list of database instances to connect to in the CI config, but I'm not sure if that's still true.\n\ncc @albertoramos","state":"closed","created_at":"2020-05-26T14:38:52.367Z","updated_at":"2020-06-16T13:56:16.919Z","closed_at":"2020-06-16T13:23:04.982Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10343","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10343","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10343/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10343/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10343","relative":"#10343","full":"gitlab-com/gl-infra/reliability#10343"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35011535,"iid":10336,"project_id":1304532,"title":"Integrate db ops with chat-ops","description":"The db ops automation tooling in https://ops.gitlab.net/gitlab-com/gl-infra/db-ops should be integrated with chat-ops.","state":"closed","created_at":"2020-05-26T11:05:42.939Z","updated_at":"2020-07-30T21:59:28.572Z","closed_at":"2020-07-30T21:59:28.542Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":{"id":1344468,"iid":88,"group_id":1112072,"title":"Datastores Team - Aug 2020","description":"Not actually Aub, but sort of: It'll cover between 27th July till 23th August (Sunday), both inclusive.","state":"closed","created_at":"2020-06-29T08:42:44.192Z","updated_at":"2021-01-06T15:06:09.784Z","due_date":"2020-08-23","start_date":"2020-07-27","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/88"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":0,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10336","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10336","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10336/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10336/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10336","relative":"#10336","full":"gitlab-com/gl-infra/reliability#10336"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35011423,"iid":10335,"project_id":1304532,"title":"Setup CI pipelines for db ops automation","description":"With new database ops automation code living in https://ops.gitlab.net/gitlab-com/gl-infra/db-ops we want to have CI pipelines setup to run different database maintenance tasks automated via CI. This should also help us to integrate with chat-ops in the future.\n\nFirst iteration:\n* Run [rolling postgres restarts on replicas](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10333) via CI","state":"closed","created_at":"2020-05-26T11:02:03.148Z","updated_at":"2020-07-09T18:54:02.946Z","closed_at":"2020-07-09T18:53:25.849Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["blocked","workflow-infra::Done"],"milestone":{"id":1308306,"iid":84,"group_id":1112072,"title":"Datastores Team - July 2020","description":"July milestone for the Datastores team","state":"closed","created_at":"2020-06-02T09:52:39.656Z","updated_at":"2020-09-15T06:17:02.011Z","due_date":"2020-07-24","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/84"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10335","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10335","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10335/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10335/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10335","relative":"#10335","full":"gitlab-com/gl-infra/reliability#10335"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":35011090,"iid":10333,"project_id":1304532,"title":"Create Ansible playbooks for postgres restart and failover","description":"For the [planned DB failover](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10276) we want to have Ansible playbooks in order to make this task automated and repeatable.\n\nThe playbooks should live in the new db-ops repository: https://ops.gitlab.net/gitlab-com/gl-infra/db-ops\n\nFirst iteration:\n\n* automate rolling postgres restart on (selected) replicas\n* automate primary failover","state":"closed","created_at":"2020-05-26T10:51:46.364Z","updated_at":"2020-06-16T12:02:27.789Z","closed_at":"2020-06-16T12:02:27.700Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10333","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10333","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10333/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10333/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10333","relative":"#10333","full":"gitlab-com/gl-infra/reliability#10333"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34935310,"iid":10317,"project_id":1304532,"title":"SSL Certificate for dashboards.GitLab.net expiring","description":"The certificate for dashboards.GitLab.net expires today.\n\nhttps://gitlab.pagerduty.com/incidents/P7PS70T","state":"closed","created_at":"2020-05-24T00:34:51.125Z","updated_at":"2022-08-04T12:54:33.376Z","closed_at":"2020-05-24T16:20:10.863Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Service::PublicGrafana","oncall","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10317","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10317","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10317/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10317/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10317","relative":"#10317","full":"gitlab-com/gl-infra/reliability#10317"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34881743,"iid":10309,"project_id":1304532,"title":"Redis Cache Sentinel hosts should not be labelled as `type=redis` in Prometheus","description":"Currently, the Redis Cache Hosts are labelled in redis as part of the `redis` service. They should be part of the `redis-cache` service.\n\nhttps://thanos-query.ops.gitlab.net/graph?g0.range_input=1h\u0026g0.max_source_resolution=0s\u0026g0.expr=count(up%7Btype%3D%22redis%22%2C%20env%3D%22gprd%22%7D)%20by%20(fqdn)\u0026g0.tab=1","state":"closed","created_at":"2020-05-22T08:29:39.286Z","updated_at":"2020-06-03T18:14:11.338Z","closed_at":"2020-06-03T17:23:34.329Z","closed_by":{"id":136229,"username":"cindy","name":"Cindy Pallares ü¶â","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"labels":["Observability","Service::Monitoring-Other","priority::3","workflow-infra::Done"],"milestone":{"id":1249005,"iid":80,"group_id":1112072,"title":"Observability Team - W23 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/1bab352839c4f6af55ab757f09188ecd/Team_Focus_-_W23.jpeg\" width=\"850\"/\u003e\r\n\r\nWe have limited capacity this week, with only 11 working days due to time-off, holidays, and on-call shifts. Additionally, this is the final week for 360¬∞ feedback in Culture Amp. So, it's exceedingly important this sprint to work from the board! A few issues are carryovers from the May milestone‚Äìand you've already made significant progress on them‚Äìthat should close quickly. There are also some related, blocking issues that will cascade to closed. I'm confident we'll hit over 90% this sprint.\r\n\r\nAs seen above, we have a need to dedicate the majority of our focus to alerting and monitoring fixes and tunings. Columns on the board continue issues labeled ~P1 ~P2 and ~P3, and whenever possible should be worked on in order of priority.\r\n\r\nThe o11y weekly meeting is on Tuesday, 02 Jun. We'll cover this then. See you all there.\r\n\r\n---\r\n\r\n## Calendar\r\n\r\n|             | M 01 Jun | T 02 Jun | W 03 Jun | Th 04 Jun  | F 05 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :ferris_wheel: | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @igorwwwwwwwwwwwwwwwwwwww | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @msmiley | - | :pager: | :pager: | :pager: | :pager:\r\n| @mwasilewski-gitlab | - | :pager: | :pager: | :pager: | :pager:\r\n\r\nW23 working days: 11\r\n\r\n|             | M 08 Jun | T 09 Jun | W 10 Jun | Th 11 Jun  | F 12 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | :sun_with_face: \r\n| @cindy | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :sun_with_face:\r\n| @craigf | :x: | :pager: | :pager: | :pager: | :pager:\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | :sun_with_face: \r\n| @msmiley | :pager: | :wrench: | :wrench: | :wrench: | :sun_with_face:\r\n| @mwasilewski-gitlab | :pager: | :wrench: | :wrench: | :ferris_wheel: | :sun_with_face: \r\n\r\nW24 working days: 8\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 19**","state":"closed","created_at":"2020-04-20T20:17:57.535Z","updated_at":"2020-06-17T16:19:26.003Z","due_date":"2020-06-12","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/80"},"assignees":[],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10309","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10309","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10309/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10309/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10309","relative":"#10309","full":"gitlab-com/gl-infra/reliability#10309"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34815865,"iid":10285,"project_id":1304532,"title":"rebuild patroni-02","description":"Patroni-02 failed and was taken out of the cluster. In order to align the patroni cluster nodes properly by number again to be able to [decommission 4 other nodes](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1741), we need to re-build patroni-02 from scratch (forcing it to be instantiated on a different gcp hardware node hopefully).\n\nWe need to rebuild patroni-02 before we do the [planned primary switchover](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10276).","state":"closed","created_at":"2020-05-20T17:24:46.757Z","updated_at":"2020-05-28T19:11:45.200Z","closed_at":"2020-05-28T19:11:45.120Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":1242270,"iid":78,"group_id":1112072,"title":"Datastores Team - May 2020","description":"","state":"closed","created_at":"2020-04-15T21:27:12.490Z","updated_at":"2020-07-23T10:49:48.643Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/78"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10285","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10285","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10285/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10285/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10285","relative":"#10285","full":"gitlab-com/gl-infra/reliability#10285"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34812779,"iid":10281,"project_id":1304532,"title":"Remove overly broad page rule from Cloudflare configuration","description":"Incident: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2145\n\n[This page rule](https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/-/blob/master/environments/gprd/main.tf#L2463-2475) should be removed from our configuration.\n\nThe global security settings should be considered our final fall through page rule. Global security and caching settings should be made at the zone level and not with a page rule.","state":"closed","created_at":"2020-05-20T16:04:54.207Z","updated_at":"2020-10-15T19:37:26.455Z","closed_at":"2020-10-15T19:37:26.432Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["CDN","corrective action","severity::3","terraform","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10281","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10281","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10281/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10281/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10281","relative":"#10281","full":"gitlab-com/gl-infra/reliability#10281"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":288,"epic":{"id":88202,"iid":288,"title":"Cloudflare Rule Cleanup","url":"/groups/gitlab-com/gl-infra/-/epics/288","group_id":1112072,"human_readable_end_date":"Jan 23, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":34812470,"iid":10279,"project_id":1304532,"title":"Create (or modify) a runbook to describe how to identify authenticated vs unauthenticated API calls","description":"Incident: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2145\n\nAs an on-call SRE, I should be able to identify and characterize API traffic, including if that traffic is authenticated or unauthenticated. And, if possible, programmatically isolate this traffic to better craft page rules and defenses in Cloudflare (or Haproxy) to protect our site from abuse.","state":"closed","created_at":"2020-05-20T15:55:50.760Z","updated_at":"2022-08-04T12:54:52.543Z","closed_at":"2021-10-08T18:28:10.105Z","closed_by":{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"},"labels":["corrective action","runbook","severity::3","team::Reliability","workflow-infra::Done"],"milestone":{"id":2119954,"iid":144,"group_id":1112072,"title":"EOC Queue Q2 2021","description":"","state":"closed","created_at":"2021-06-27T15:50:33.795Z","updated_at":"2021-11-12T05:29:04.183Z","due_date":"2021-07-31","start_date":"2021-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/144"},"assignees":[],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10279","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10279","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10279/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10279/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10279","relative":"#10279","full":"gitlab-com/gl-infra/reliability#10279"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34812201,"iid":10277,"project_id":1304532,"title":"Create (or update) Cloudflare runbook to better address abuse and attack events","description":"Incident: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2145\n\nAs an on-call SRE, I should have a runbook that helps describe how to identify an abuse or attack in Cloudflare, and describe the tools we can use in Cloudflare to mitigate such an event.\n\nThis should probably include sections on:\n1. Creating specific page rules to over-ride our security level for a URI\n1. Adding IP addresses to a block list\n1. Changing the zone-wide security level\n1. Explain how the global `Im under attack` toggle will affect the site","state":"closed","created_at":"2020-05-20T15:47:22.145Z","updated_at":"2022-08-04T12:54:53.829Z","closed_at":"2020-10-15T19:35:49.044Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["corrective action","runbook","severity::3","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10277","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10277","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10277/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10277/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10277","relative":"#10277","full":"gitlab-com/gl-infra/reliability#10277"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":287,"epic":{"id":88192,"iid":287,"title":"Update Cloudflare Runbooks","url":"/groups/gitlab-com/gl-infra/-/epics/287","group_id":1112072,"human_readable_end_date":"Sep 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":34809692,"iid":10276,"project_id":1304532,"title":"Plan patroni failover to shrink the cluster (and more)","description":"We want to execute some changes to our production patroni cluster which require a short downtime for a failover:\n\n* shrink the cluster size: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1741\n* increase max_connections from 300 to 500\n* Reconfigure our Terraform template\n* Anything else?\n\nWe need to plan when and how to execute this change, evaluating the risk and impact of a failover and which actions are needed to cleanup after the failover.","state":"closed","created_at":"2020-05-20T14:52:11.290Z","updated_at":"2020-06-15T08:40:50.406Z","closed_at":"2020-06-15T08:40:50.324Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10276","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10276","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10276/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10276/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10276","relative":"#10276","full":"gitlab-com/gl-infra/reliability#10276"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":244,"epic":{"id":54036,"iid":244,"title":"Configuration Management  improvements for the Database ecosystem","url":"/groups/gitlab-com/gl-infra/-/epics/244","group_id":1112072,"human_readable_end_date":"Aug 23, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":34790558,"iid":10268,"project_id":1304532,"title":"Deploy Thanos 0.13.0","description":"Thanos 0.13.0 fixes https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9293","state":"closed","created_at":"2020-05-20T08:18:02.951Z","updated_at":"2020-06-22T15:28:04.122Z","closed_at":"2020-06-22T15:27:43.671Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["priority::2","workflow-infra::Done"],"milestone":{"id":1249008,"iid":81,"group_id":1112072,"title":"Observability Team - W25 2020","description":"## Calendar\r\n\r\n|             | M 15 Jun | T 16 Jun | W 17 Jun | Th 18 Jun  | F 19 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :pager: | :wrench: | :wrench: | :wrench: | :wrench: \r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | - | - | - | - | -\r\n| @mwasilewski-gitlab | - | - | - | - | üßòüèª‚Äç‚ôÇÔ∏è\r\n\r\nW25 working days: 24\r\n\r\n|             | M 22 Jun | T 23 Jun | W 24 Jun | Th 25 Jun  | F 26 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :sun_with_face: | :palm_tree: | - | - | -\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: \r\n| @mwasilewski-gitlab | - | - | - | - | -\r\n\r\nW26 working days: 24\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 48**","state":"closed","created_at":"2020-04-20T20:18:41.941Z","updated_at":"2020-06-30T19:07:01.642Z","due_date":"2020-06-26","start_date":"2020-06-15","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/81"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-06-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10268","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10268","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10268/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10268/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10268","relative":"#10268","full":"gitlab-com/gl-infra/reliability#10268"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34790154,"iid":10267,"project_id":1304532,"title":"Export version database for loading into warehouse","description":"Runbook https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/uncategorized/cloudsql-data-export.md","state":"closed","created_at":"2020-05-20T08:09:08.025Z","updated_at":"2020-12-02T19:47:28.115Z","closed_at":"2020-05-21T02:52:11.305Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Service::Version","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":5618371,"username":"paul_armstrong","name":"Paul Armstrong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5618371/avatar.png","web_url":"https://gitlab.com/paul_armstrong"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10267","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10267","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10267/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10267/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10267","relative":"#10267","full":"gitlab-com/gl-infra/reliability#10267"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34769941,"iid":10262,"project_id":1304532,"title":"Fix creation of wal-g gcs.json on grpd postgres replicas","description":"During execution of https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2161, chef created an empty `/etc/wal-g.d/gcs.json` file instead of filling it with data.\nI copied over the file from wal-e to fix this for now (and confirmed it is not overwritten by chef), but we need to get this fixed in chef.","state":"closed","created_at":"2020-05-19T18:16:57.351Z","updated_at":"2020-07-03T17:19:20.421Z","closed_at":"2020-07-03T17:19:20.380Z","closed_by":{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"},"labels":["Database","Service::Postgres","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10262","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10262","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10262/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10262/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10262","relative":"#10262","full":"gitlab-com/gl-infra/reliability#10262"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34768232,"iid":10259,"project_id":1304532,"title":"Geo.staging.gitlab.com server not found","description":"https://geo.staging.gitlab.com was accessible until recently (today or yesterday maybe?), even though DB replication is down.","state":"closed","created_at":"2020-05-19T17:29:42.871Z","updated_at":"2020-06-08T08:46:09.494Z","closed_at":"2020-06-03T22:34:32.445Z","closed_by":{"id":4554077,"username":"nhxnguyen","name":"Nick Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554077/avatar.png","web_url":"https://gitlab.com/nhxnguyen"},"labels":["workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10259","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10259","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10259/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10259/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10259","relative":"#10259","full":"gitlab-com/gl-infra/reliability#10259"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34730270,"iid":10248,"project_id":1304532,"title":"Adjust node disk IO quota metrics to be per node, not per device","description":"As mentioned in the observability meeting, it turns out that GCP disk IOP quota is per node, sum by the total HDD and SSD disk size per node. Not IOPs per disk per node.\n\nWe need to adjust the automatic calculations for these metrics to calculate per disk.\n\nWe also need to have info metrics to identify devices by HDD and SSD so that we can calculate per-node saturation.","state":"closed","created_at":"2020-05-19T10:53:17.780Z","updated_at":"2022-09-01T00:50:48.802Z","closed_at":"2022-09-01T00:50:47.138Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Reliability::P3","Service::Monitoring-Other","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10248","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10248","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10248/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10248/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10248","relative":"#10248","full":"gitlab-com/gl-infra/reliability#10248"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34726385,"iid":10242,"project_id":1304532,"title":"Alert when jobs are not being processed by sidekiq","description":"Corrective action for:\n* incident https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2154\n* RCA https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2158\n\n\n\nTo avoid the situation where we are unaware of sidekiq queues that are not being processed at all we should implement alerting on low RPS that will be useful so that we can page the oncall for similar problems as in the linked incident. As a first iteration it would be good to have a very generous low threshold.\n\n@andrewn suggested in slack:\n\n\u003e We alert on any job that maintains a minimum 0.1 rps over the course of the day. If we don‚Äôt see it for 6 hours, we alert.\n\u003e Obviously this will we a bit noisy when queues are decommissioned","state":"closed","created_at":"2020-05-19T09:08:14.933Z","updated_at":"2020-09-16T12:21:21.729Z","closed_at":"2020-09-16T12:21:21.669Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Service::Sidekiq","corrective action","priority::2","severity::2","workflow-infra::Done"],"milestone":{"id":1380223,"iid":92,"group_id":1112072,"title":"Observability Team - FY21-Q3","description":"","state":"closed","created_at":"2020-07-24T19:07:22.800Z","updated_at":"2020-11-02T23:56:39.868Z","due_date":"2020-10-30","start_date":"2020-08-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/92"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10242","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10242","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10242/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10242/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10242","relative":"#10242","full":"gitlab-com/gl-infra/reliability#10242"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":128,"iid":1,"sequence":1,"group_id":1112072,"title":"2020 W31 - Observability Team","description":"# Nothing to present. \n\n## Markdown rendering is currently broken. Please click through to \nhttps://gitlab.com/-/snippets/1998684.\n","state":3,"created_at":"2020-07-21T16:41:19.392Z","updated_at":"2020-07-27T15:05:58.211Z","start_date":"2020-07-27","due_date":"2020-08-07","web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/iterations/128"},"health_status":"needs_attention"},{"id":34712939,"iid":10239,"project_id":1304532,"title":"Clean up unused deployments in gs-staging cluster","description":"The `gs-staging` cluster has a bunch of failed deployments, and deployments related to projects that no longer exist.\n\n```\nversion-gitlab-com-6491770-dast-default\nversion-gitlab-com-fork-12446120-review-sync-upstr-vthqx5\nversion-gitlab-com-fork-12446120-staging\nlicense-gitlab-com-fork-12446131-review-enable-aut-a96d5t\nlicense-gitlab-com-fork-12446131-dast-default\nlicense-gitlab-com-fork-12446131-staging\n```","state":"closed","created_at":"2020-05-18T23:31:29.097Z","updated_at":"2022-08-04T12:55:18.479Z","closed_at":"2020-05-18T23:44:03.287Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10239","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10239","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10239/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10239/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10239","relative":"#10239","full":"gitlab-com/gl-infra/reliability#10239"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34684452,"iid":10225,"project_id":1304532,"title":"Node provisioning broken due to gcloud gem install failure","description":"The ruby version bundled with td-agent is 2.4, now when we install the `gcloud` gem it is complaining that that `google-protobuf` requires ruby 2.5.\n\n\n```\n* Mixlib::ShellOut::ShellCommandFailed occurred in chef run: execute[install gcloud gem] (gitlab_fluentd::default line 170) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'\n---- Begin output of /usr/sbin/td-agent-gem install gcloud --no-document -v 0.24.0 ----\nSTDOUT:\nSTDERR: ERROR:  Error installing gcloud:\n\tgoogle-protobuf requires Ruby version \u003c 2.8.dev, \u003e= 2.5.\n---- End output of /usr/sbin/td-agent-gem install gcloud --no-document -v 0.24.0 ----\nRan /usr/sbin/td-agent-gem install gcloud --no-document -v 0.24.0 returned 1\n\n```\n\n\nOne a working node:\n\n```\ngoogle-protobuf (3.11.3 x86_64-linux, 3.9.0 x86_64-linux, 3.6.1 x86_64-linux)\n```\n\nInstalling `google-protobuf` manually seems to work around this \n\n```\n/usr/sbin/td-agent-gem install google-protobuf --no-document -v 3.11.3\n\n```\n\n\n\n```\n# /usr/sbin/td-agent-gem install google-protobuf --no-document -v 3.11.3\nFetching: google-protobuf-3.11.3-x86_64-linux.gem (100%)\nSuccessfully installed google-protobuf-3.11.3-x86_64-linux\n1 gem installed\n\n```","state":"closed","created_at":"2020-05-18T12:10:27.498Z","updated_at":"2022-08-04T12:55:26.420Z","closed_at":"2021-02-22T16:51:00.400Z","closed_by":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"labels":["priority::2","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10225","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10225","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10225/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10225/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10225","relative":"#10225","full":"gitlab-com/gl-infra/reliability#10225"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34684174,"iid":10224,"project_id":1304532,"title":"gitlab-uptycs cookbook is not stopping osqueryd service","description":"When setting `\"enabled\": false` in the [chef role](https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/merge_requests/3454) for gitlab-uptycs, the osqueryd service on all affected nodes should be stopped and disabled, but that isn't working.\n\nThis MR also didn't fix it: https://gitlab.com/gitlab-cookbooks/gitlab-uptycs/-/merge_requests/22","state":"closed","created_at":"2020-05-18T12:03:47.526Z","updated_at":"2022-08-04T12:55:26.947Z","closed_at":"2021-08-24T03:59:42.113Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["security","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10224","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10224","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10224/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10224/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10224","relative":"#10224","full":"gitlab-com/gl-infra/reliability#10224"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34614717,"iid":10213,"project_id":1304532,"title":"Decomission vfiles module and revert any bootstrap migration changes","description":"This [EPIC](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/206) outlined a series of steps to alter how our bootstrap process worked for chef in GCP. That work is on hold due to another option being put in place and future terraform changes breaking this new approach.\n\nWe should remove the vfiles module from all environments except ci-org.","state":"closed","created_at":"2020-05-15T16:33:07.457Z","updated_at":"2021-06-24T08:07:45.407Z","closed_at":"2020-05-20T17:47:47.289Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["chef","terraform","workflow-infra::Done"],"milestone":{"id":1242241,"iid":77,"group_id":1112072,"title":"Core Infra Team - May 2020","description":"Core themes:\r\n1. [Cloudflare and GitLab.com improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/117)\r\n2. [Chef improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/138)\r\n3. [Get License and Customers - .gitlab.com to GKE/autodevops](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/233)\r\n4. [Increment on secrets management with Vault](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/62)\r\n\r\nRetro notes:\r\nhttps://docs.google.com/spreadsheets/d/1lhNZz4n7dDGkibQUF3Yvxme7XAzCjgMrZaqdEgbuyK8/edit#gid=0","state":"closed","created_at":"2020-04-15T21:26:59.909Z","updated_at":"2020-07-06T20:11:32.062Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/77"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10213","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10213","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10213/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10213/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10213","relative":"#10213","full":"gitlab-com/gl-infra/reliability#10213"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34592926,"iid":10203,"project_id":1304532,"title":"Warning Alert Hackathon - 2020-06-04","description":"*  Gather a list of warnings that have fired recently/frequently.\n*  Fix trivial issues.\n*  File issues for non-trivial issues.","state":"closed","created_at":"2020-05-15T08:07:54.982Z","updated_at":"2020-06-17T16:17:18.933Z","closed_at":"2020-06-17T16:17:18.892Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["TechnicalDebt","priority::3","workflow-infra::Done"],"milestone":{"id":1249005,"iid":80,"group_id":1112072,"title":"Observability Team - W23 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/1bab352839c4f6af55ab757f09188ecd/Team_Focus_-_W23.jpeg\" width=\"850\"/\u003e\r\n\r\nWe have limited capacity this week, with only 11 working days due to time-off, holidays, and on-call shifts. Additionally, this is the final week for 360¬∞ feedback in Culture Amp. So, it's exceedingly important this sprint to work from the board! A few issues are carryovers from the May milestone‚Äìand you've already made significant progress on them‚Äìthat should close quickly. There are also some related, blocking issues that will cascade to closed. I'm confident we'll hit over 90% this sprint.\r\n\r\nAs seen above, we have a need to dedicate the majority of our focus to alerting and monitoring fixes and tunings. Columns on the board continue issues labeled ~P1 ~P2 and ~P3, and whenever possible should be worked on in order of priority.\r\n\r\nThe o11y weekly meeting is on Tuesday, 02 Jun. We'll cover this then. See you all there.\r\n\r\n---\r\n\r\n## Calendar\r\n\r\n|             | M 01 Jun | T 02 Jun | W 03 Jun | Th 04 Jun  | F 05 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :ferris_wheel: | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @igorwwwwwwwwwwwwwwwwwwww | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @msmiley | - | :pager: | :pager: | :pager: | :pager:\r\n| @mwasilewski-gitlab | - | :pager: | :pager: | :pager: | :pager:\r\n\r\nW23 working days: 11\r\n\r\n|             | M 08 Jun | T 09 Jun | W 10 Jun | Th 11 Jun  | F 12 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | :sun_with_face: \r\n| @cindy | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :sun_with_face:\r\n| @craigf | :x: | :pager: | :pager: | :pager: | :pager:\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | :sun_with_face: \r\n| @msmiley | :pager: | :wrench: | :wrench: | :wrench: | :sun_with_face:\r\n| @mwasilewski-gitlab | :pager: | :wrench: | :wrench: | :ferris_wheel: | :sun_with_face: \r\n\r\nW24 working days: 8\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 19**","state":"closed","created_at":"2020-04-20T20:17:57.535Z","updated_at":"2020-06-17T16:19:26.003Z","due_date":"2020-06-12","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/80"},"assignees":[],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10203","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10203","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10203/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10203/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10203","relative":"#10203","full":"gitlab-com/gl-infra/reliability#10203"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34558537,"iid":10192,"project_id":1304532,"title":"Cleanup PrometheusRuleEvalFailures","description":"There are some persistent issues with Prometheus rule evaluations. We need to investigate and fix these.\n\nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10089","state":"closed","created_at":"2020-05-14T13:53:24.866Z","updated_at":"2020-08-18T19:38:39.494Z","closed_at":"2020-08-14T10:03:12.606Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["Service::Prometheus","priority::3","workflow-infra::Done"],"milestone":{"id":1380223,"iid":92,"group_id":1112072,"title":"Observability Team - FY21-Q3","description":"","state":"closed","created_at":"2020-07-24T19:07:22.800Z","updated_at":"2020-11-02T23:56:39.868Z","due_date":"2020-10-30","start_date":"2020-08-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/92"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10192","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10192","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10192/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10192/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10192","relative":"#10192","full":"gitlab-com/gl-infra/reliability#10192"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34519880,"iid":10172,"project_id":1304532,"title":"Fix patroni installation in Chef","description":"When building new patroni nodes, after Chef has run, `gitlab-patronictl` is missing dependencies:\n\n```\nroot@patroni-08-db-gprd.c.gitlab-production.internal:~# gitlab-patronictl list\nTraceback (most recent call last):\n  File \"/opt/patroni/bin/patronictl\", line 7, in \u003cmodule\u003e\n    from patroni.ctl import ctl\n  File \"/opt/patroni/lib/python3.5/site-packages/patroni/ctl.py\", line 29, in \u003cmodule\u003e\n    from patroni.config import Config\n  File \"/opt/patroni/lib/python3.5/site-packages/patroni/config.py\", line 12, in \u003cmodule\u003e\n    from patroni.postgresql.config import ConfigHandler\n  File \"/opt/patroni/lib/python3.5/site-packages/patroni/postgresql/__init__.py\", line 3, in \u003cmodule\u003e\n    import psycopg2\nImportError: No module named 'psycopg2'\n```\n\nWe need to fix that in Chef.","state":"closed","created_at":"2020-05-13T17:05:42.330Z","updated_at":"2020-07-08T10:57:25.707Z","closed_at":"2020-07-08T10:57:25.661Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":{"id":1308306,"iid":84,"group_id":1112072,"title":"Datastores Team - July 2020","description":"July milestone for the Datastores team","state":"closed","created_at":"2020-06-02T09:52:39.656Z","updated_at":"2020-09-15T06:17:02.011Z","due_date":"2020-07-24","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/84"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10172","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10172","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10172/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10172/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10172","relative":"#10172","full":"gitlab-com/gl-infra/reliability#10172"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34515750,"iid":10168,"project_id":1304532,"title":"Rebuild and add patroni-08 back to cluster","description":"As a replacement for the failing patroni-02 we need to rebuild and bring back in sync patroni-08.\n\nSee https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2101 and https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2119.","state":"closed","created_at":"2020-05-13T15:17:25.536Z","updated_at":"2020-05-27T07:39:03.632Z","closed_at":"2020-05-15T09:18:09.932Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10168","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10168","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10168/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10168/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10168","relative":"#10168","full":"gitlab-com/gl-infra/reliability#10168"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34503932,"iid":10163,"project_id":1304532,"title":"Decommission left-over patroni nodes","description":"During the postgres 11 upgrade we left patroni-{08,09,10,12} out of the cluster and on version 9.6 to be able to roll back.\nAs the cluster seems to be running fine without those nodes and we constantly need to silence alerts for those nodes and they also are quite expensive, we should commission them ASAP.\n\nThe current primary is patroni-11, which makes decommissioning more complicated, as we only can savely remove nodes in terraform starting with the highest number. This means, we probably need to rebuild and add patroni-08 to the cluster, failover to one of the lower-numbered nodes, remove patroni-11 from the cluster and then decommission patroni-[09-12].","state":"closed","created_at":"2020-05-13T11:22:37.135Z","updated_at":"2020-06-14T00:45:04.779Z","closed_at":"2020-06-14T00:45:04.705Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10163","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10163","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10163/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10163/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10163","relative":"#10163","full":"gitlab-com/gl-infra/reliability#10163"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":106,"epic":{"id":14061,"iid":106,"title":"Upgrade Postgresql to version 11.7 on GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/106","group_id":1112072,"human_readable_end_date":"Apr 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":34467351,"iid":10159,"project_id":1304532,"title":"Allow and set specific concurrency limits for the canary file node","description":"The current limit on concurrent PostUploadPack processes is '80'. We did not have that many during the canary slowdown event. Should we revise this number down just for the canary gitaly node to help promote a better experience when the node is under load? What should the concurrency be?","state":"closed","created_at":"2020-05-12T18:23:54.923Z","updated_at":"2020-05-19T05:57:49.113Z","closed_at":"2020-05-15T13:41:53.486Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Service::Gitaly","corrective action","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10159","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10159","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10159/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10159/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10159","relative":"#10159","full":"gitlab-com/gl-infra/reliability#10159"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34461510,"iid":10157,"project_id":1304532,"title":"Observability Team - W23 2020 | Sprint Planning Issues","description":"# Planning - W23 2020\n\nWe'll use this issue as a means of discussing the priorities for the [Observability Team - W23 2020](https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/80) milestone.\n\n![Team_Focus](/uploads/655795e3b83206641ca3a4b2f5e7b167/Team_Focus.jpeg)\n\n## References\n\n- [~\"team::Observability\" Epics Roadmap](https://gitlab.com/groups/gitlab-com/gl-infra/-/roadmap?label_name%5B%5D=team::Observability\u0026scope=all\u0026sort=end_date_asc\u0026state=opened\u0026utf8=%E2%9C%93\u0026layout=QUARTERS)","state":"closed","created_at":"2020-05-12T15:58:55.860Z","updated_at":"2020-05-31T19:18:29.635Z","closed_at":"2020-05-31T19:18:29.588Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Planning","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10157","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10157","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10157/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10157/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10157","relative":"#10157","full":"gitlab-com/gl-infra/reliability#10157"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34438422,"iid":10149,"project_id":1304532,"title":"The `testbed` environment appears to be routing alerts to production destinations","description":"Alerts in the `testbed` environment are being send to production slack channels, leading to false alerts. \n\nExample: https://gitlab.slack.com/archives/CD6HFD1L0/p1589276190114400\n\n\u003cimg src=\"/uploads/933b8888bc9e3be37a5c2ab068ffb40a/image.png\" width=\"500\"\u003e\n\ncc @T4cC0re oncall @AnthonySandoval","state":"closed","created_at":"2020-05-12T09:39:20.820Z","updated_at":"2020-09-29T16:21:58.129Z","closed_at":"2020-09-29T15:05:17.878Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["Alert Fatigue","Service::Monitoring-Other","priority::4","workflow-infra::Done"],"milestone":{"id":1380223,"iid":92,"group_id":1112072,"title":"Observability Team - FY21-Q3","description":"","state":"closed","created_at":"2020-07-24T19:07:22.800Z","updated_at":"2020-11-02T23:56:39.868Z","due_date":"2020-10-30","start_date":"2020-08-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/92"},"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10149","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10149","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10149/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10149/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10149","relative":"#10149","full":"gitlab-com/gl-infra/reliability#10149"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":163,"epic":{"id":18267,"iid":163,"title":"Alert Management","url":"/groups/gitlab-com/gl-infra/-/epics/163","group_id":1112072,"human_readable_end_date":"Mar 31, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":34398667,"iid":10135,"project_id":1304532,"title":"Make archive and delayed replica work after postgres 11 upgrade","description":"After upgrading the patroni cluster to postgres 11, we need to make the archive and delayed replicas work again.","state":"closed","created_at":"2020-05-11T12:24:26.429Z","updated_at":"2020-05-27T07:37:23.130Z","closed_at":"2020-05-18T11:01:53.255Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Database","backup","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10135","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10135","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10135/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10135/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10135","relative":"#10135","full":"gitlab-com/gl-infra/reliability#10135"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34367388,"iid":10124,"project_id":1304532,"title":"Update the deleted-project-restore runbook","description":"While doing a project restore for https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10092 I encountered many issues that need to be updated in the according runbook. Basically, in most cases project restores will not work anymore as described in the runbook for multiple reasons. Need to add my notes to the [runbook](https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/uncategorized/deleted-project-restore.md).","state":"closed","created_at":"2020-05-10T20:13:13.794Z","updated_at":"2022-08-04T12:56:37.273Z","closed_at":"2020-07-21T08:45:29.723Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","backup","documentation","runbook","workflow-infra::Done"],"milestone":{"id":1344468,"iid":88,"group_id":1112072,"title":"Datastores Team - Aug 2020","description":"Not actually Aub, but sort of: It'll cover between 27th July till 23th August (Sunday), both inclusive.","state":"closed","created_at":"2020-06-29T08:42:44.192Z","updated_at":"2021-01-06T15:06:09.784Z","due_date":"2020-08-23","start_date":"2020-07-27","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/88"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10124","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10124","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10124/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10124/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10124","relative":"#10124","full":"gitlab-com/gl-infra/reliability#10124"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34289578,"iid":10112,"project_id":1304532,"title":"Can't use a symbolic link to bin/tf","description":"Having establish a symbolic link to `bin/tf` from within a directory already in ones local env `PATH` in order to support easy inclusion of `bin/tf` in one's `PATH` without having to explicitly add this project's path to one's `PATH`, the `bin/tf` script fails, since its code references the actual directory of the link, not the link target, during execution.","state":"closed","created_at":"2020-05-08T03:44:33.672Z","updated_at":"2022-08-04T12:56:54.243Z","closed_at":"2020-05-26T16:58:44.228Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10112","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10112","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10112/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10112/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10112","relative":"#10112","full":"gitlab-com/gl-infra/reliability#10112"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34274020,"iid":10102,"project_id":1304532,"title":"Change low-urgency-cpu-bound machine type","description":"As the `low-urgency-cpu-bound` shard is receiving more traffic now, we should change the machine type from `n1-standard-2` to the standard `n1-standard-4`. (See https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10098#note_338354418).","state":"closed","created_at":"2020-05-07T16:52:01.986Z","updated_at":"2022-08-04T12:57:02.002Z","closed_at":"2021-03-12T03:51:39.808Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Service::Sidekiq","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10102","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10102","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10102/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10102/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10102","relative":"#10102","full":"gitlab-com/gl-infra/reliability#10102"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34268356,"iid":10098,"project_id":1304532,"title":"Add low-urgency-cpu-bound nodes to accommodate to CPU saturation","description":"We get `low-urgency-cpu-bound` CPU saturation alerts (probably related to spikes of `reactive_caching` jobs).\nWe should add more nodes to keep up with it.\n\n![image](/uploads/14396e4d41efeee6f74689c55112a905/image.png)","state":"closed","created_at":"2020-05-07T14:21:46.968Z","updated_at":"2022-08-04T12:57:05.085Z","closed_at":"2020-05-07T16:58:20.480Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["SRE:On-call","Service::Sidekiq","oncall","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10098","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10098","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10098/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10098/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10098","relative":"#10098","full":"gitlab-com/gl-infra/reliability#10098"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34234798,"iid":10088,"project_id":1304532,"title":"Add Zendesk as an external service to Status.io","description":"Our testing environment on Status.io currently has Zendesk set up as an [external service](https://kb.status.io/monitoring/external-service/). For the sake of parity, I think we should add this to the production status page as well in the event that there's a Zendesk (and therefore, support) outage we need to report on.\n\nLooks like admin privileges are required to add this so I'm unable to. Would you mind taking care of this, @dawsmith?","state":"closed","created_at":"2020-05-06T20:10:01.963Z","updated_at":"2022-08-04T12:57:14.715Z","closed_at":"2020-05-06T20:17:17.503Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["Unplanned","workflow-infra::Done"],"milestone":{"id":1242241,"iid":77,"group_id":1112072,"title":"Core Infra Team - May 2020","description":"Core themes:\r\n1. [Cloudflare and GitLab.com improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/117)\r\n2. [Chef improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/138)\r\n3. [Get License and Customers - .gitlab.com to GKE/autodevops](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/233)\r\n4. [Increment on secrets management with Vault](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/62)\r\n\r\nRetro notes:\r\nhttps://docs.google.com/spreadsheets/d/1lhNZz4n7dDGkibQUF3Yvxme7XAzCjgMrZaqdEgbuyK8/edit#gid=0","state":"closed","created_at":"2020-04-15T21:26:59.909Z","updated_at":"2020-07-06T20:11:32.062Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/77"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2390023,"username":"tristan","name":"Tristan Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2390023/avatar.png","web_url":"https://gitlab.com/tristan"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10088","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10088","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10088/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10088/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10088","relative":"#10088","full":"gitlab-com/gl-infra/reliability#10088"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34234548,"iid":10086,"project_id":1304532,"title":"Request for new subdomain - `advisories.gitlab.com`","description":"\u003c!--\nThis template is for GitLab Team Members seeking support of SRE where there isn't an existing `request-*` template available.\n\nPlease fill out the details below.\n--\u003e\n\nThis issue https://gitlab.com/gitlab-org/secure/vulnerability-research/advisories/landing-page/-/issues/1 requires a new subdomain, `advisories.gitlab.com`, to be created for the advisory landing pages. The project at `gitlab.com/advisories/advisories.gitlab.io` will then use the new subdomain as its custom domain for its pages.\n\n**Details** \n - Point of contact for this request: [+ @d0c-s4vage +]\n - If a call is needed, what is the proposed date and time of the call:  [+ Date and Time +]\n - Additional call details (format, type of call): [+ additional details +]\n\n**SRE Support Needed**\n\n[+ Support Request Details +]\n\n\n\n\n\n\u003c!--\nplease do not edit the below\n--\u003e","state":"closed","created_at":"2020-05-06T20:00:18.764Z","updated_at":"2022-08-04T12:57:15.938Z","closed_at":"2020-05-06T23:24:40.088Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["AssistType::Domain-DNS-SSL-Management","Unplanned","devops::secure","workflow-infra::Done"],"milestone":{"id":1242241,"iid":77,"group_id":1112072,"title":"Core Infra Team - May 2020","description":"Core themes:\r\n1. [Cloudflare and GitLab.com improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/117)\r\n2. [Chef improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/138)\r\n3. [Get License and Customers - .gitlab.com to GKE/autodevops](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/233)\r\n4. [Increment on secrets management with Vault](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/62)\r\n\r\nRetro notes:\r\nhttps://docs.google.com/spreadsheets/d/1lhNZz4n7dDGkibQUF3Yvxme7XAzCjgMrZaqdEgbuyK8/edit#gid=0","state":"closed","created_at":"2020-04-15T21:26:59.909Z","updated_at":"2020-07-06T20:11:32.062Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/77"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":1197909,"username":"d0c-s4vage","name":"James Johnson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74f4164c86c628a7ef3df7d56b4d2d6f?s=80\u0026d=identicon","web_url":"https://gitlab.com/d0c-s4vage"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10086","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10086","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10086/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10086/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10086","relative":"#10086","full":"gitlab-com/gl-infra/reliability#10086"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34163906,"iid":10054,"project_id":1304532,"title":"Generate alert manager config from runbook pipeline","description":"Currently, we have three different source of truth for our alert manager routing configuration.\n\nThese are:\n1. https://gitlab.com/gitlab-com/runbooks/-/blob/master/alertmanager/alertmanager.yml.erb \n1. https://gitlab.com/gitlab-cookbooks/gitlab-alertmanager/blob/master/templates/default/alertmanager.yml.erb \n1. An encrypted file, manually stored in GCS, and not regularly updated. See https://gitlab.com/gitlab-com/gl-infra/k8s-workloads/monitoring/-/blob/master/bin/k-ctl#L57 for details\n\nThe first two are now relatively in check with one another, but effort needs to be made to unify all three routing configs. \n\n## Proposal\n\nAdd a pipeline to the runbooks repo to generate the config and store it encrypted in GCS. \n\nThen adapt the chef repo to use this GCS file, rather than the ERB directly. \n\n(Placeholder, more to follow) \n\n------------------------------------------------------\n\nRelated:\n\n* https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/214\n* https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/7071\n* https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9572\n* https://gitlab.com/gitlab-com/gl-infra/k8s-workloads/gitlab-helmfiles/-/merge_requests/16\n* https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10045\n\ncc @ggillies @skarbek @jarv @marin @craigf","state":"closed","created_at":"2020-05-05T16:30:45.573Z","updated_at":"2021-06-24T08:07:49.787Z","closed_at":"2020-07-02T13:26:05.350Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Alerting","Observability","Service::Monitoring-Other","blocker","priority::2","workflow-infra::Done"],"milestone":{"id":1317213,"iid":85,"group_id":1112072,"title":"Observability Team - W27 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20W27%202020)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/ea397eda034197f661b59eee9502b8b9/Team_Focus_-_W27.jpeg\" width=\"700\"\u003e\r\n\r\nWe have 2 primary areas of focus this sprint:\r\n\r\n1. Formalize a [long term strategy for logging](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10095).\r\n2. Continue k8s migrations: [pubusbbeat](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8962), [Alertmanager](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/234), and [Grafana](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146).\r\n\r\nIf you haven't read the readiness design document, please see [Alertmanager Kubernetes migration](https://gitlab.com/gitlab-com/gl-infra/readiness/-/blob/d799d8ba51e0b3976a206037d1c10ee6bc9bd035/library/alertmanager-kubernetes-migration/index.md).\r\n\r\nAdditionally, we'll be looking to:\r\n\r\n1. Complete 2 of 3 tutorials: https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/53616 and https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/53617.\r\n\r\n\r\n### On-Call\r\n\r\nNo one is the primary on-call for database issues, yet. But, please find the recordings for the DB Runbooks and spend time familiarizing yourself with Postgres and our runbooks.\r\n\r\n## Issues\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand/collapse\u003c/summary\u003e\r\n\r\n| TITLE |   WORKFLOW LABEL    |\r\n|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|\r\n| [2020-06-30 Kibana upgrade from 7.5 to 7.8 failed and we lost the Kibana index (which contains index patterns, dashboards, saved searches, etc)](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2355) | workflow::? |\r\n| [Kibana upgrade from 7.5 to 7.8 failed and we lost the Kibana index (which contains index patterns, dashboards, saved searches, etc)](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10702)       | workflow::? |\r\n| [upgrade ops-gitlab-net ES cluster](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10679)                                                                                                         | workflow::? |\r\n| [Decide what to do about NAT in production](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10629)                                                                                                 | workflow::? |\r\n| [Investigate number of concurrent connections made by some of our services to the same external addresses](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10627)                                  | workflow::? |\r\n| [Igor Wiedler - On-call Onboarding](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10579)                                                                                                         | workflow::? |\r\n| [Install rbspy via chef](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10554)                                                                                                                    | workflow::? |\r\n| [Add Elasticsearch timing to \"Rails Controller\" dashboard](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10509)                                                                                  | workflow::? |\r\n| [Update SSL cert for user-content.gitlab-static.net](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2238)                                                                                             | workflow::? |\r\n| [Remove #alerts channel Alertmanager integrations](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10475)                                                                                          | workflow::? |\r\n| [Write tutorial -  Life of a git request](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10389)                                                                                                   | workflow::? |\r\n| [Write tutorial - Life of a web request](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10388)                                                                                                    | workflow::? |\r\n| [Prometheus in GKE does not discover any targets for calico or fluentd](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10334)                                                                     | workflow::? |\r\n| [Add Slack staging alert for customers.stg.gitlab.com](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10327)                                                                                      | workflow::? |\r\n| [Plan transition away from `fqdn` label](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10299)                                                                                                    | workflow::? |\r\n| [How to build and deploy Docker images?](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10295)                                                                                                    | workflow::? |\r\n| [Update Cloudflare alerts](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10294)                                                                                                                  | workflow::? |\r\n| [Adjust node disk IO quota metrics to be per node, not per device](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10248)                                                                          | workflow::? |\r\n| [Alert when jobs are not being processed by sidekiq](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10242)                                                                                        | workflow::? |\r\n| [upgrade production logging cluster to 7.8](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10227)                                                                                                 | workflow::? |\r\n| [Node provisioning broken due to gcloud gem install failure](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10225)                                                                                | workflow::? |\r\n| [Store string fields only as \"keyword\" type](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10150)                                                                                                | workflow::? |\r\n| [The `testbed` environment appears to be routing alerts to production destinations](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10149)                                                         | workflow::? |\r\n| [long-term plan for logging](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10095)                                                                                                                | workflow::? |\r\n| [Generate alert manager config from runbook pipeline](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10054)                                                                                       | workflow::? |\r\n| [`ElasticCloud Watcher: gitaly_abuse_1` triggered with empty project names](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10007)                                                                 | workflow::? |\r\n| [Re-enable indexing on GKE logs with reduced schema](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9876)                                                                                         | workflow::? |\r\n| [Rename the `alerts` Slack channel to `feed_alerts`](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9841)                                                                                         | workflow::? |\r\n| [Enable GitLab Runner Referees Suricata Feature](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9596)                                                                                             | workflow::? |\r\n| [move pubsubbeats to k8s](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8962)                                                                                                                    | workflow::? |\r\n| [The \"View in AlertManager\" link in a PagerDuty incident is not alerts.gprd.gitlab.net, but instead ops.gitlab.net/gitlab-com/runbooks](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8563)      | workflow::? |\r\n| [Create new Grafana dashboard git backup](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/7788)                                                                                                    | workflow::? |\r\n\r\n\u003c/details\u003e\r\n\r\n## Calendar\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003e\u003cb\u003eTotal working days: 49\u003c/b\u003e\u003c/summary\u003e\r\n\r\n| W27         | M 29 Jun | T 30 Jun | W 01 Jul | Th 02 Jul  | F 03 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :pager: | :wrench: | :wrench: | :wrench: | :wrench:\r\n| @cindy | - | - | - | - | :ferris_wheel:\r\n| @craigf | - | - | - | - | -\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | - | - | - | - | :ferris_wheel:\r\n| @mwasilewski-gitlab | - | - | - | - | -\r\n\r\n| W28         | M 06 Jul | T 07 Jul | W 08 Jul | Th 09 Jul  | F 10 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | -\r\n| @cindy | - | :pager: | :pager: | :pager: | :pager:\r\n| @craigf | - | - | - | - | -\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | - | - | - | - | -\r\n| @mwasilewski-gitlab | - | - | - | - | -\r\n\r\n\u003c/details\u003e\r\n","state":"closed","created_at":"2020-06-08T21:55:43.385Z","updated_at":"2020-07-13T19:21:52.699Z","due_date":"2020-07-10","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/85"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10054","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10054","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10054/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10054/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10054","relative":"#10054","full":"gitlab-com/gl-infra/reliability#10054"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":234,"epic":{"id":50155,"iid":234,"title":"Migrate alertmanager to kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/234","group_id":1112072,"human_readable_end_date":"Aug 5, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":34162364,"iid":10053,"project_id":1304532,"title":"Provision new HDD-based Gitaly node in production","description":"**Details** \n - Point of contact for this request: [+ @glopezfernandez +]\n - If a call is needed, what is the proposed date and time of the call: no call necessary\n - Additional call details (format, type of call): n/a\n\n**SRE Support Needed**\n\nAs part of migrating archived repositories to HDD-based storage, we need to provision a new node in production backed by HDDs. This is simiar to #9846, but in order to safeguard production, let's provision the same class of machine and adjust as we observe the behavior of the system.\n\n\u003c!--\nplease do not edit the below\n--\u003e","state":"closed","created_at":"2020-05-05T15:49:58.980Z","updated_at":"2021-06-24T08:07:50.451Z","closed_at":"2020-05-13T20:02:23.777Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["EFI","EFI :: Project :: CIrepoM","Service::Gitaly","workflow-infra::Done"],"milestone":{"id":1242270,"iid":78,"group_id":1112072,"title":"Datastores Team - May 2020","description":"","state":"closed","created_at":"2020-04-15T21:27:12.490Z","updated_at":"2020-07-23T10:49:48.643Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/78"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},{"id":4437855,"username":"brentnewton","name":"Brent Newton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4437855/avatar.png","web_url":"https://gitlab.com/brentnewton"},{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-13","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10053","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10053","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10053/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10053/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10053","relative":"#10053","full":"gitlab-com/gl-infra/reliability#10053"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34153471,"iid":10048,"project_id":1304532,"title":"Export version database for loading into warehouse","description":"Runbook https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/uncategorized/cloudsql-data-export.md","state":"closed","created_at":"2020-05-05T12:21:46.454Z","updated_at":"2020-12-02T19:47:21.853Z","closed_at":"2020-05-05T19:06:09.170Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Service::Version","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":5618371,"username":"paul_armstrong","name":"Paul Armstrong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5618371/avatar.png","web_url":"https://gitlab.com/paul_armstrong"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10048","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10048","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10048/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10048/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10048","relative":"#10048","full":"gitlab-com/gl-infra/reliability#10048"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34140342,"iid":10044,"project_id":1304532,"title":"staging console permissions broken","description":"People with `rails-console` access in their data bags are not able to login as `\u003cuser\u003e-rails@console-01-sv-gstg.c.gitlab-staging-1.internal` anymore since last week.\n\nIt seems a typo in the `gstg-base-console-node` chef role removed all ssh `AllowGroups` from that node.","state":"closed","created_at":"2020-05-05T07:30:19.373Z","updated_at":"2022-08-04T12:57:53.816Z","closed_at":"2020-05-05T08:39:46.723Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["SRE:On-call","oncall","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10044","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10044","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10044/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10044/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10044","relative":"#10044","full":"gitlab-com/gl-infra/reliability#10044"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34119354,"iid":10027,"project_id":1304532,"title":"investigate charts on the monitoring dashboard missing data","description":"follow up on: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9877#note_334672627\n\nsome charts on this dashboard: https://dashboards.gitlab.net/d/monitoring-main/monitoring-overview?orgId=1\u0026from=now-6h%2Fm\u0026to=now%2Fm\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-stage=main\u0026var-sigma=2  show no data errors","state":"closed","created_at":"2020-05-04T16:43:52.616Z","updated_at":"2022-08-04T12:58:03.518Z","closed_at":"2020-10-08T13:56:16.519Z","closed_by":{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"},"labels":["Service::Monitoring-Other","corrective action","priority::4","severity::4","workflow-infra::Done"],"milestone":null,"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10027","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10027","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10027/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10027/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10027","relative":"#10027","full":"gitlab-com/gl-infra/reliability#10027"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":34001861,"iid":10007,"project_id":1304532,"title":"`ElasticCloud Watcher: gitaly_abuse_1` triggered with empty project names","description":"The alert is triggered and posts to Slack, but is no longer including a project name:\n\n```\nProject:\nFile Server: file-13-stor-gprd.c.gitlab-production.internal\nAverage Gitaly Wall time: 2376ms/second\nAverage rate: invocations per second 170ops/sec\n```\n\nExample slack message (GitLab internal only): https://gitlab.slack.com/archives/CCR9GMMR7/p1588255198064400\n\n@craigf (currently the SRE on-call) for help directing this to right place.\n\ncc @gitlab-com/gl-security/abuse-team","state":"closed","created_at":"2020-04-30T14:08:10.469Z","updated_at":"2022-08-18T16:02:03.934Z","closed_at":"2022-08-18T16:02:00.861Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Reliability::P2","Service::Logging","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10007","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10007","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10007/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10007/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10007","relative":"#10007","full":"gitlab-com/gl-infra/reliability#10007"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33961346,"iid":9991,"project_id":1304532,"title":"Setup Grafana Image Renderer service in k8s","description":"Grafana recommends moving away from PhantomJS and adopting the [Grafana Image Renderer](https://grafana.com/docs/grafana/latest/administration/image_rendering/) plugin.\n\n## Definition of Done\n\n- [ ] The [image renderer](https://hub.docker.com/r/grafana/grafana-image-renderer) is deployed to our GKE instance.\n- [ ] Slackline is verified as working with the new image rendering.","state":"closed","created_at":"2020-04-29T16:22:57.866Z","updated_at":"2022-09-01T00:49:21.148Z","closed_at":"2022-09-01T00:49:12.330Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Reliability::P4","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9991","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9991","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9991/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9991/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9991","relative":"#9991","full":"gitlab-com/gl-infra/reliability#9991"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":33958578,"iid":9988,"project_id":1304532,"title":"document in runbooks in /docs/gitaly the use of housekeeping button for a lot of upload-packs processes","description":"related to: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9487#note_332230619","state":"closed","created_at":"2020-04-29T15:35:24.298Z","updated_at":"2020-08-09T19:55:31.089Z","closed_at":"2020-05-28T10:34:11.527Z","closed_by":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"labels":["Service::Gitaly","corrective action","oncall","priority::4","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9988","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9988","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9988/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9988/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9988","relative":"#9988","full":"gitlab-com/gl-infra/reliability#9988"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33955237,"iid":9985,"project_id":1304532,"title":"document process of import pgbouncer logs and analysis with counts","description":"@gerardo.herzig  I do like your approach on the incident yesterday and I would like to take notes on your steps how you proceed to :\n\n- collect the logs from pgbouncer.\n- what table structure you created \n- how did you import the data\n- and what queries we could execute for analysis.\n\nPlease let me know what else can we add to the process.\nPerhaps enable connection logging on Pgbouncer?\n\nI would like to implement this and in future automate to extract and support us on the analysis of metrics from pgbouncer.\n\nAlso, we could break down the like that summarize the number of connections and the status of the pools : \n\n```\n2020-04-29_14:03:05   2020-04-29 14:03:05.540 UTC [1136] LOG stats: 3229 xacts/s, 3879 queries/s, in 2071807 B/s, out 6585743 B/s, xact 7366 us, query 1867 us, wait 921749 us\n2020-04-29_14:04:05   2020-04-29 14:04:05.540 UTC [1136] LOG stats: 3321 xacts/s, 3961 queries/s, in 2122757 B/s, out 6471056 B/s, xact 8924 us, query 3311 us, wait 6245925 us\n2020-04-29_14:05:05   2020-04-29 14:05:05.541 UTC [1136] LOG stats: 3264 xacts/s, 3899 queries/s, in 2050998 B/s, out 7198025 B/s, xact 6805 us, query 2118 us, wait 2080644 us\n2020-04-29_14:06:05   2020-04-29 14:06:05.541 UTC [1136] LOG stats: 4712 xacts/s, 6235 queries/s, in 3057949 B/s, out 9155166 B/s, xact 14221 us, query 7623 us, wait 38534949 us\n2020-04-29_14:07:05   2020-04-29 14:07:05.541 UTC [1136] LOG stats: 4162 xacts/s, 4907 queries/s, in 2601754 B/s, out 7390354 B/s, xact 8209 us, query 3593 us, wait 9232004 us\n2020-04-29_14:08:05   2020-04-29 14:08:05.541 UTC [1136] LOG stats: 4016 xacts/s, 5537 queries/s, in 2496438 B/s, out 9656314 B/s, xact 14397 us, query 7119 us, wait 32114727 us\n2020-04-29_14:09:05   2020-04-29 14:09:05.541 UTC [1136] LOG stats: 3612 xacts/s, 4460 queries/s, in 2243004 B/s, out 7149377 B/s, xact 10388 us, query 4600 us, wait 12898834 us\n\n```\n\nAnd what retention time we could have in this \"database\"? \nWe should partition the tables.","state":"closed","created_at":"2020-04-29T14:19:29.880Z","updated_at":"2022-08-04T12:58:29.653Z","closed_at":"2020-05-08T09:25:04.145Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","priority::3","workflow-infra::Done"],"milestone":{"id":1239654,"iid":76,"group_id":1112072,"title":"W16 DBRE","description":"","state":"closed","created_at":"2020-04-14T09:14:09.392Z","updated_at":"2020-05-13T19:56:10.734Z","due_date":"2020-05-08","start_date":"2020-04-14","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/76"},"assignees":[{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},{"id":3007633,"username":"gerardo.herzig","name":"Gerardo Herzig","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3007633/avatar.png","web_url":"https://gitlab.com/gerardo.herzig"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9985","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9985","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9985/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9985/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9985","relative":"#9985","full":"gitlab-com/gl-infra/reliability#9985"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33945354,"iid":9979,"project_id":1304532,"title":"Use `shard` labels to distinguish `pgbouncer-sidekiq` from other `pgbouncer` nodes.","description":"Currently, it's not possible to distinguish `pgbouncer` main pool metrics from `pgbouncer` `sidekiq` pool nodes, without hardcoding database connection names or using regular expression matching on host names.\n\nWe should use the `shard` label to distinguish these metrics. Possibly `shard=\"sidekiq\"` for the `pgbouncer-sidekiq-*` nodes. \n\n![image](/uploads/130d2f6799f97453b23fe75b349d14bd/image.png)\n\nhttps://thanos-query.ops.gitlab.net/graph?g0.range_input=1h\u0026g0.max_source_resolution=0s\u0026g0.expr=count(up%7Bfqdn%3D~%22pgbouncer.*%22%2C%20env%3D%22gprd%22%7D)%20by%20(fqdn%2C%20shard%2C%20stage%2C%20environment%2C%20tier)\u0026g0.tab=1\n\nMinor corrective action for https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9966\n\ncc @ahmadsherif @bjk-gitlab @Finotto","state":"closed","created_at":"2020-04-29T10:51:51.721Z","updated_at":"2022-08-04T12:58:33.100Z","closed_at":"2020-07-01T14:14:35.980Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Observability","Service::Pgbouncer","workflow-infra::Done"],"milestone":{"id":1308306,"iid":84,"group_id":1112072,"title":"Datastores Team - July 2020","description":"July milestone for the Datastores team","state":"closed","created_at":"2020-06-02T09:52:39.656Z","updated_at":"2020-09-15T06:17:02.011Z","due_date":"2020-07-24","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/84"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9979","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9979","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9979/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9979/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9979","relative":"#9979","full":"gitlab-com/gl-infra/reliability#9979"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":33886329,"iid":9962,"project_id":1304532,"title":"Configure chef-client in gitlab-server cookbook by default","description":"We currently configure chef-client in our roles files. This leads to copy-n-paste errors[0].\n\n* [x]  Add a configuration recipe to gitlab-server.\n* [x]  Rollout new recipe to `gitlab-server::default`.\n\n[0]: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/merge_requests/3245","state":"closed","created_at":"2020-04-28T06:52:05.411Z","updated_at":"2020-05-15T19:49:27.799Z","closed_at":"2020-05-07T15:02:37.407Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["priority::4","technical debt","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9962","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9962","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9962/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9962/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9962","relative":"#9962","full":"gitlab-com/gl-infra/reliability#9962"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33871579,"iid":9959,"project_id":1304532,"title":"Geo replication is broken in staging after Postgres update attempt","description":"After our Postgres update attempt on 2020-04-24, [the geo team reported replication was broken](https://ops.gitlab.net/gitlab-com/gl-infra/db-migration/-/issues/12#note_53253) on staging. Although this doesn't affect the prospect of a production attempt (since geo isn't enabled in production) we should fix it to unblock the geo team.\n\n/cc @Finotto @dbalexandre","state":"closed","created_at":"2020-04-27T19:21:02.789Z","updated_at":"2021-06-24T08:07:54.962Z","closed_at":"2020-05-04T10:12:24.991Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["Database","priority::3","workflow-infra::Done"],"milestone":{"id":1239654,"iid":76,"group_id":1112072,"title":"W16 DBRE","description":"","state":"closed","created_at":"2020-04-14T09:14:09.392Z","updated_at":"2020-05-13T19:56:10.734Z","due_date":"2020-05-08","start_date":"2020-04-14","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/76"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9959","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9959","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9959/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9959/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9959","relative":"#9959","full":"gitlab-com/gl-infra/reliability#9959"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33871203,"iid":9958,"project_id":1304532,"title":"Delete stale branches on ops chef-repo","description":"There are thousands of stale branches. Should we clean these up?\n\n`https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/branches/stale`","state":"closed","created_at":"2020-04-27T19:11:18.684Z","updated_at":"2022-08-04T12:58:44.491Z","closed_at":"2021-04-02T16:47:05.539Z","closed_by":{"id":116,"username":"marin","name":"Marin Jankovski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5154f0b0eda3f798c8a254962d57192f?s=80\u0026d=identicon","web_url":"https://gitlab.com/marin"},"labels":["TechnicalDebt","chef","toil","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9958","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9958","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9958/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9958/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9958","relative":"#9958","full":"gitlab-com/gl-infra/reliability#9958"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33837283,"iid":9951,"project_id":1304532,"title":"Reenable the usage ping in gitlab admin interface","description":"## Overview\n\nReenable the usage ping in gitlab admin interface\n\n- We had disabled the usage ping as part of the greater fixing, https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/9385 .  We reenable it agains\n\n\n## Next Steps\n\n* [x] Go to GitLab.com **Admin area \u003e Settings \u003e Metrics and profiling \u003e Usage statistics** and Check usage ping. \n* [x] Please post a screenshot of the usage ping settings once this once this is done.","state":"closed","created_at":"2020-04-27T08:01:25.498Z","updated_at":"2020-05-29T22:23:03.401Z","closed_at":"2020-05-04T20:53:09.620Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["SRE:On-call","Unplanned","workflow-infra::Done"],"milestone":{"id":1242241,"iid":77,"group_id":1112072,"title":"Core Infra Team - May 2020","description":"Core themes:\r\n1. [Cloudflare and GitLab.com improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/117)\r\n2. [Chef improvements](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/138)\r\n3. [Get License and Customers - .gitlab.com to GKE/autodevops](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/233)\r\n4. [Increment on secrets management with Vault](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/62)\r\n\r\nRetro notes:\r\nhttps://docs.google.com/spreadsheets/d/1lhNZz4n7dDGkibQUF3Yvxme7XAzCjgMrZaqdEgbuyK8/edit#gid=0","state":"closed","created_at":"2020-04-15T21:26:59.909Z","updated_at":"2020-07-06T20:11:32.062Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/77"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-06","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9951","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9951","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9951/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9951/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9951","relative":"#9951","full":"gitlab-com/gl-infra/reliability#9951"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33763049,"iid":9929,"project_id":1304532,"title":"License Database Extract","description":"Hi @Finotto \u0026 @gerardo.herzig\n\nCreated this issue to request a license DB extract as from the [hand book](https://about.gitlab.com/handbook/business-ops/data-team/data-infrastructure/#license-db)\n\nCommand required below:\n\n`pg_dump -Fp --no-owner --no-acl license_gitlab_com_production | sed -E 's/(DROP|CREATE|COMMENT ON) EXTENSION/-- \\1 EXTENSION/g' \u003e S{DUMPFILE}`\n\nCan share the files with me on Slack this time\n\nThanks!","state":"closed","created_at":"2020-04-24T15:45:57.800Z","updated_at":"2020-04-27T16:38:08.611Z","closed_at":"2020-04-27T16:37:10.799Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":1239654,"iid":76,"group_id":1112072,"title":"W16 DBRE","description":"","state":"closed","created_at":"2020-04-14T09:14:09.392Z","updated_at":"2020-05-13T19:56:10.734Z","due_date":"2020-05-08","start_date":"2020-04-14","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/76"},"assignees":[{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},{"id":3007633,"username":"gerardo.herzig","name":"Gerardo Herzig","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3007633/avatar.png","web_url":"https://gitlab.com/gerardo.herzig"}],"author":{"id":5618371,"username":"paul_armstrong","name":"Paul Armstrong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5618371/avatar.png","web_url":"https://gitlab.com/paul_armstrong"},"type":"ISSUE","assignee":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9929","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9929","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9929/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9929/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9929","relative":"#9929","full":"gitlab-com/gl-infra/reliability#9929"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33762548,"iid":9927,"project_id":1304532,"title":"Export version database for loading into warehouse","description":"Runbook https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/uncategorized/cloudsql-data-export.md","state":"closed","created_at":"2020-04-24T15:42:18.531Z","updated_at":"2020-12-02T19:47:14.765Z","closed_at":"2020-04-24T21:56:08.504Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Service::Version","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":5618371,"username":"paul_armstrong","name":"Paul Armstrong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5618371/avatar.png","web_url":"https://gitlab.com/paul_armstrong"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9927","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9927/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9927/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9927","relative":"#9927","full":"gitlab-com/gl-infra/reliability#9927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33753070,"iid":9917,"project_id":1304532,"title":"add to runbooks a note about removing haproxy machines from GCP LB","description":"follow up on: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1999#note_330938313","state":"closed","created_at":"2020-04-24T13:01:23.021Z","updated_at":"2020-08-09T19:55:18.961Z","closed_at":"2020-05-29T13:12:29.669Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["corrective action","priority::4","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9917","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9917","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9917/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9917/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9917","relative":"#9917","full":"gitlab-com/gl-infra/reliability#9917"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33692496,"iid":9897,"project_id":1304532,"title":"Set GITLAB_QA_FORMLESS_LOGIN_TOKEN variable on /etc/gitlab/gitlab.rb on live environments","description":"We're getting close to having https://gitlab.com/gitlab-org/gitlab/-/merge_requests/27788 merged. With that, to allow for running tests using the formless login mechanism in live environments such as staging, pre-prod, canary, and production, we will need to set the `GITLAB_QA_FORMLESS_LOGIN_TOKEN` environment variable on `/etc/gitlab/gitlab.rb` on those environments.\n\nYou can find the variable's value at the Team 1Password under GitLab QA - Access tokens. \n\nCould someone help with this, please?\n\nCc @gitlab-com/gl-infra/managers.","state":"closed","created_at":"2020-04-23T12:53:53.483Z","updated_at":"2022-10-25T18:51:47.454Z","closed_at":"2020-05-12T17:02:24.917Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["security","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[],"author":{"id":178079,"username":"wlsf82","name":"Walmyr Lima e Silva Filho","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/178079/avatar.png","web_url":"https://gitlab.com/wlsf82"},"type":"ISSUE","assignee":null,"user_notes_count":27,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":"2020-05-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9897","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9897","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9897/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9897/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9897","relative":"#9897","full":"gitlab-com/gl-infra/reliability#9897"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"needs_attention"},{"id":33676220,"iid":9894,"project_id":1304532,"title":"Research and prototype logical replication in PostgreSQL on version 11.7","description":"This issue is to capture ideas and proposals for the initiative of implementing logical replication with logical decoding in PostgreSQL.\n\nWith logical replication we would be able of:\n\n-Improve our upgrade between main releases.\n\n-Enable checksums on the database.","state":"closed","created_at":"2020-04-23T09:58:13.080Z","updated_at":"2022-08-04T12:59:46.315Z","closed_at":"2020-06-25T11:50:05.993Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":2493611,"username":"adescoms","name":"Adri√°n Escoms","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6f86d318669a8b32174b7132607443d?s=80\u0026d=identicon","web_url":"https://gitlab.com/adescoms"},{"id":2589296,"username":"emanuel_ongres","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2589296/avatar.png","web_url":"https://gitlab.com/emanuel_ongres"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":2493611,"username":"adescoms","name":"Adri√°n Escoms","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6f86d318669a8b32174b7132607443d?s=80\u0026d=identicon","web_url":"https://gitlab.com/adescoms"},"user_notes_count":17,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2020-07-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9894","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":20,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9894","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9894/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9894/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9894","relative":"#9894","full":"gitlab-com/gl-infra/reliability#9894"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":255,"epic":{"id":61760,"iid":255,"title":"PostgreSql Logical Replication for GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/255","group_id":1112072,"human_readable_end_date":"Nov 1, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":33657695,"iid":9888,"project_id":1304532,"title":"Reduce disk space contention on CI runner VMs created by gsrm","description":"As a corrective action for https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1976, reduce the number of jobs serially handled by each runner VM from 30 to 10.\n\nEach time a runner VM runs a job, it accumulates residual disk space used by that docker container's volumes.  Sometimes an unlucky VM runs a combination of jobs that fills its disk.  This has started happening fairly often, and it is starting to affect the efficiency of development work.\n\nFor more background, see summary notes here: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1976#note_329467200\n\nThis is the cheapest of the easy options.  If it turns out to be insufficient, we can revisit the other options.","state":"closed","created_at":"2020-04-22T23:37:59.194Z","updated_at":"2021-06-24T08:07:57.008Z","closed_at":"2020-04-29T20:18:18.390Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["corrective action","priority::2","workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9888","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9888","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9888/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9888/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9888","relative":"#9888","full":"gitlab-com/gl-infra/reliability#9888"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":33650500,"iid":9885,"project_id":1304532,"title":"Upgrade Patroni in gitlab.com","description":"The goal is to upgrade Patroni to 2.0.2 without any downtime or failover.\n\nRelease notes: https://github.com/zalando/patroni/blob/master/docs/releases.rst#version-201\n\nThe initial steps that we are planning are : \n\n- ~~stop chef-client in all the database nodes - to do not execute any failover~~\n- ~~Pause the Patroni Cluster~~\n- ~~ensure that all nodes ack the pause~~\n- ~~install the new version ( chef MR I guess)~~\n- ~~Restart the Patroni processes~~\n- ~~check that the new process is launched and operative~~\n- ~~when the check is positive we resume the cluster~~\n- ~~verify logs and the database and patroni are running~~\n\nNew steps (from [this comment](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9885#note_480398240)) [as of `2020-01-11`]:\n\n* Disable chef in all the nodes.\n* Update the patroni python package ( `pip` )\n* Pause the patroni cluster in maintenance mode `gitlab-patronictl pause`\n* Restart the patroni cluster in maintenance mode `gitlab-patronictl restart`\n* Resume the maintenance mode Patroni cluster `gitlab-patronictl resume`\n* Merge in chef the new version of Patroni.\n* restore chef in each node.\n\n\n**Acceptance criteria:**\n\n- [x] Create a runbook to document all the processes executed.\n- [x] Rollout in staging the new Patroni version.\n- [ ] Execute several failovers and verify that all the integrations are working properly. E.g.: ( traffic routing).\n- [ ] Enable checksums in staging using the pause strategy.\n- [x] Rollout the new Patroni version in Production.","state":"closed","created_at":"2020-04-22T19:44:44.140Z","updated_at":"2021-06-24T08:07:57.551Z","closed_at":"2021-06-04T09:31:33.023Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["DStores-Backlog::DBOperations","Database","priority::1","workflow-infra::Done"],"milestone":{"id":1807446,"iid":123,"group_id":1112072,"title":"Datastores team - W08","description":"Milestone for the Datastores team, year 2021.","state":"closed","created_at":"2021-01-05T11:36:13.110Z","updated_at":"2021-11-12T05:28:36.233Z","due_date":"2021-03-07","start_date":"2021-02-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/123"},"assignees":[{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"user_notes_count":50,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9885","time_stats":{"time_estimate":144000,"total_time_spent":115200,"human_time_estimate":"40h","human_total_time_spent":"32h"},"task_completion_status":{"count":5,"completed_count":3},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9885","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9885/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9885/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9885","relative":"#9885","full":"gitlab-com/gl-infra/reliability#9885"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":171,"epic":{"id":19349,"iid":171,"title":"Enable checksums in the PostgreSQL database and integrity checks","url":"/groups/gitlab-com/gl-infra/-/epics/171","group_id":1112072,"human_readable_end_date":"Jan 29, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":33629473,"iid":9879,"project_id":1304532,"title":"Enable postgres_queue_enabled for Praefect in gstg/gprd","description":"This new setting allows replication jobs to be stored on Postgresql. It isn't expected to have any impact on the normal operation of Praefect outside of replication.\n\nSee https://gitlab.com/gitlab-org/gitaly/-/merge_requests/1989 and https://gitlab.com/gitlab-org/omnibus-gitlab/-/merge_requests/4096 for more details.","state":"closed","created_at":"2020-04-22T14:07:22.723Z","updated_at":"2022-08-04T12:59:53.542Z","closed_at":"2020-05-08T17:31:10.236Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Service::Praefect","workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9879","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9879","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9879/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9879/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9879","relative":"#9879","full":"gitlab-com/gl-infra/reliability#9879"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33616634,"iid":9877,"project_id":1304532,"title":"[Incident Review] 2020-04-22 Lack of Observability","description":"Incident: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1978\n\n\n## Summary\n\nPrometheus and alertmanager were still operational, Thanos was completely unavailable and because of that also Grafana\n\n- no alerts were triggered:\n  - we could use Elastic watcher [http input](https://www.elastic.co/guide/en/elasticsearch/reference/current/input-http.html) to perform a simple check if Prometheus, Alertmanager, Thanos, Grafana are operational. @bjk-gitlab do we already have any alerting for the \"monitoring stack\" external to it?\n- what steps were taken to troubleshoot it? (how can we improve time to detection)\n  - we have this dashboard for the monitoring components: https://dashboards.gitlab.net/d/monitoring-main/monitoring-overview?orgId=1\u0026from=now-6h%2Fm\u0026to=now%2Fm\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-stage=main\u0026var-sigma=2 . However, a lot of the charts are empty. Besides, these should be monitored by an external system\n  - We have Thanos sending tracing info to Elastic APM\n  - The only logs available in Kibana are from Prometheus: https://log.gprd.gitlab.net/goto/db7eca8ec4cbd80b2ae1187715e62984\n- what would have prevented it from happening?\n  - the change was reviewed, we simply missed the fact that it resulted in a circular dependency\n\n1. Service(s) affected : ~\"Service::Thanos\" \n1. Team attribution : ~\"team::Observability\" \n1. Minutes downtime or degradation : ~600\n\n## Customer Impact\n\n1. Who was impacted by this incident? **All employees attempting to use dashboards.gitlab.net and the infrastructure department's monitoring systems.**\n2. What was the customer experience during the incident? **None**\n3. How many customers were affected? **None**\n4. If a precise customer impact number is unknown, what is the estimated potential impact? **n/a**\n\n## Incident Response Analysis\n\n1. How was the event detected? **Grafana dashboards were timing out.**\n2. How could detection time be improved? **Monitoring of the Grafana system or latency for Thanos queriies could have alerted us.**\n3. How did we reach the point where we knew how to mitigate the impact?\n4. How could time to mitigation be improved?\n\n\n## Post Incident Analysis\n\n1. How was the root cause diagnosed?\n2. How could time to diagnosis be improved?\n3. Do we have an existing backlog item that would've prevented or greatly reduced the impact of this incident? **Yes, https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/159.**\n4. Was this incident triggered by a change (deployment of code or change to infrastructure. _if yes, have you linked the issue which represents the change?_)? **Yes, https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2135.** \n   \n\n\n## Timeline\n\nAll times UTC.\n\n2020-04-21\n- 19:00:00 https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2135 change is made to rules which results in a circular dependency in Thanos\n- 23:40:00 transaction durations start to go up\n\n2020-04-22\n\n- 02:15:00 request duration goes through the roof, we start to hit the 5min timeout\n- 08:59:00 https://gitlab.com/gitlab-cookbooks/gitlab-prometheus/-/merge_requests/521 adds a monitor label to the rule server\n- 09:02:00 https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2140/diffs  adds a filter to record rules to skip the rule server\n- 10:29:00 https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2142 improving routing\n\n\n## 5 Whys\n\u003c!--\n_This section is meant to dig into lessons learned and corrective actions, it is not limited to 5 and consider how you may dive deeper into each why_\n\n_example:_\n\n1. Customers experienced an inability to create new projects on GitLab.com, why?\n   - A code change was deployed which contained an escaped bug.\n1. Why did this bug not get noticed in staging?\n   - The integration test for this use case is missing.\n1. Why is an integration test for this use case missing?\n   - It was inadvertently removed during a refactoring of our test suite.\n1. Why was the test suite being refactored?\n   - As part of our efforts to decrease MTTP.\n1. Why did it take 2 hours to notice this issue in production?\n   - The initial alert was supressed as a false alarm.\n1. Why was this alert suppressed\n   - The system which dedupes alerts inadvertently suppressed this alarm as a duplicate. \n1. Why did it take 4 hours to resolve the issue in production?\n   - The change which carried this escaped bug also contained a database schema change which made rolling the change back impossible. Engineering was engaged immediately by the oncall SRE and conducted a forward fix. \n--\u003e\n\n## Lessons Learned\n\u003c!--\n_Be explicit about what lessons we learned and should carry forward. These usually inform what our corrective actions should be._\n\n_example:_\n1. The results of refactoring activites around our integration tests should be reviewed. (i.e we had 619 tests before refactor but 618 after.)\n2. Our tooling to dedupe alarms should have integration tests to ensure it works against existing and newly added alarms.  \n--\u003e\n\n## Corrective Actions\n\n- investigate and fix monitoring related metrics which are unavailable in Grafana\n  - issue: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10027\n- add an Alertmanager alert for Thanos latency (might be a matter of defining SLO threshold)\n  - there's already an epic: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/159\n- add Alertmnager alerts for other components of the monitoring stack\n  - same as above\n- add Elastic watches for alerting when the monitoring stack is down\n  - same as above\n- start using Jaeger/Elastic APM for tracing Prometheus/Alertmanager/Grafana\n  - support for Jaeger in Prometheus is coming in next release\n- send logs from Thanos, alertmanager, Grafana to Kibana\n  - they simply don't log a lot\n- set up a staging environment for our monitoring stack so that we can test changes before they go to production (I think that this would be an overkill, we should focus on better monitoring and alerting instead)\n  - we should do it as part of the migration to Kubernetes, creation of the staging env will be easier when not done with Chef and will help the migration itself as well\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/customer-success/professional-services-engineering/workflows/internal/root-cause-analysis.html#meeting-purpose)","state":"closed","created_at":"2020-04-22T09:30:29.886Z","updated_at":"2022-08-04T12:59:54.869Z","closed_at":"2020-05-30T19:24:50.970Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["IncidentReview","priority::3","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":4437855,"username":"brentnewton","name":"Brent Newton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4437855/avatar.png","web_url":"https://gitlab.com/brentnewton"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9877","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9877","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9877/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9877/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9877","relative":"#9877","full":"gitlab-com/gl-infra/reliability#9877"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":224,"epic":{"id":47960,"iid":224,"title":"Q2FY21 Observability Incidents","url":"/groups/gitlab-com/gl-infra/-/epics/224","group_id":1112072,"human_readable_end_date":"May 29, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":33612884,"iid":9876,"project_id":1304532,"title":"Re-enable indexing on GKE logs with reduced schema","description":"detailed error:\n```\n{\"type\":\"illegal_argument_exception\",\"reason\":\"field expansion matches too many fields, limit: 1024, got: 1629\"}}}]},\"status\":400}\n```\n\nsee: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-settings.html for more background\n\nthis config option cannot be adjusted through the API:\n```\n\"persistent setting [indices.query.bool.max_clause_count], not dynamically updateable\"\n```\n\nwe need to bring down the number of fields in the indices\n\n---\n\nHere is an example request/response:\n\n\u003cdetails\u003e\n\n```\n{\n  \"version\": true,\n  \"size\": 500,\n  \"sort\": [\n    {\n      \"json.time\": {\n        \"order\": \"desc\",\n        \"unmapped_type\": \"boolean\"\n      }\n    }\n  ],\n  \"_source\": {\n    \"excludes\": []\n  },\n  \"aggs\": {\n    \"2\": {\n      \"date_histogram\": {\n        \"field\": \"json.time\",\n        \"fixed_interval\": \"30s\",\n        \"time_zone\": \"UTC\",\n        \"min_doc_count\": 1\n      }\n    }\n  },\n  \"stored_fields\": [\n    \"*\"\n  ],\n  \"script_fields\": {\n    \"controller_and_action\": {\n      \"script\": {\n        \"source\": \"doc['json.controller.keyword'] + \\\"#\\\" + doc['json.action.keyword']\",\n        \"lang\": \"painless\"\n      }\n    }\n  },\n  \"docvalue_fields\": [\n    {\n      \"field\": \"@timestamp\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.expiry_from\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.expiry_to\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.bucket.start\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.bucket.stop\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.commits.timestamp\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.created_after\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.created_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.created_before\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.due_date\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.head_commit.timestamp\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.base.repo.created_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.base.repo.pushed_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.base.repo.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.closed_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.created_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.head.repo.created_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.head.repo.pushed_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.head.repo.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.merged_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.pull_request.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.raw_response.created_on\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.raw_response.updated_on\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.repository.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.bucket.start\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.bucket.stop\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.commits.timestamp\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.head_commit.timestamp\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.base.repo.created_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.base.repo.pushed_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.base.repo.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.closed_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.created_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.head.repo.created_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.head.repo.pushed_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.head.repo.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.merged_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.pull_request.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.extra.request_forgery_protection.repository.updated_at\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"json.time\",\n      \"format\": \"date_time\"\n    },\n    {\n      \"field\": \"publish_time\",\n      \"format\": \"date_time\"\n    }\n  ],\n  \"query\": {\n    \"bool\": {\n      \"must\": [],\n      \"filter\": [\n        {\n          \"multi_match\": {\n            \"type\": \"best_fields\",\n            \"query\": \"ExternalDiffUploader\",\n            \"lenient\": true\n          }\n        },\n        {\n          \"match_phrase\": {\n            \"json.controller\": {\n              \"query\": \"Projects::MergeRequests::DiffsController\"\n            }\n          }\n        },\n        {\n          \"range\": {\n            \"json.time\": {\n              \"format\": \"strict_date_optional_time\",\n              \"gte\": \"2020-03-27T12:00:00.000Z\",\n              \"lte\": \"2020-03-27T12:30:00.000Z\"\n            }\n          }\n        }\n      ],\n      \"should\": [],\n      \"must_not\": []\n    }\n  },\n  \"highlight\": {\n    \"pre_tags\": [\n      \"@kibana-highlighted-field@\"\n    ],\n    \"post_tags\": [\n      \"@/kibana-highlighted-field@\"\n    ],\n    \"fields\": {\n      \"*\": {}\n    },\n    \"fragment_size\": 2147483647\n  }\n}\n```\n\u003c/details\u003e\n\nResponse: \n\u003cdetails\u003e\n\n```\n{\n  \"took\": 5158,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 762,\n    \"successful\": 750,\n    \"skipped\": 750,\n    \"failed\": 12,\n    \"failures\": [\n      {\n        \"shard\": 0,\n        \"index\": \"pubsub-rails-inf-gprd-001925\",\n        \"node\": \"jmnNQegZRWOO0aJBFjnZew\",\n        \"reason\": {\n          \"type\": \"query_shard_exception\",\n          \"reason\": \"failed to create query: {\\n  \\\"bool\\\" : {\\n    \\\"filter\\\" : [\\n      {\\n        \\\"multi_match\\\" : {\\n          \\\"query\\\" : \\\"ExternalDiffUploader\\\",\\n          \\\"fields\\\" : [ ],\\n          \\\"type\\\" : \\\"best_fields\\\",\\n          \\\"operator\\\" : \\\"OR\\\",\\n          \\\"slop\\\" : 0,\\n          \\\"prefix_length\\\" : 0,\\n          \\\"max_expansions\\\" : 50,\\n          \\\"lenient\\\" : true,\\n          \\\"zero_terms_query\\\" : \\\"NONE\\\",\\n          \\\"auto_generate_synonyms_phrase_query\\\" : true,\\n          \\\"fuzzy_transpositions\\\" : true,\\n          \\\"boost\\\" : 1.0\\n        }\\n      },\\n      {\\n        \\\"match_phrase\\\" : {\\n          \\\"json.controller\\\" : {\\n            \\\"query\\\" : \\\"Projects::MergeRequests::DiffsController\\\",\\n            \\\"slop\\\" : 0,\\n            \\\"zero_terms_query\\\" : \\\"NONE\\\",\\n            \\\"boost\\\" : 1.0\\n          }\\n        }\\n      },\\n      {\\n        \\\"range\\\" : {\\n          \\\"json.time\\\" : {\\n            \\\"from\\\" : \\\"2020-03-27T12:00:00.000Z\\\",\\n            \\\"to\\\" : \\\"2020-03-27T12:30:00.000Z\\\",\\n            \\\"include_lower\\\" : true,\\n            \\\"include_upper\\\" : true,\\n            \\\"format\\\" : \\\"strict_date_optional_time\\\",\\n            \\\"boost\\\" : 1.0\\n          }\\n        }\\n      }\\n    ],\\n    \\\"adjust_pure_negative\\\" : true,\\n    \\\"boost\\\" : 1.0\\n  }\\n}\",\n          \"index_uuid\": \"HunDEJAFRKieC7kFcif7zw\",\n          \"index\": \"pubsub-rails-inf-gprd-001925\",\n          \"caused_by\": {\n            \"type\": \"illegal_argument_exception\",\n            \"reason\": \"field expansion matches too many fields, limit: 1024, got: 1470\"\n          }\n        }\n      },\n      {\n        \"shard\": 0,\n        \"index\": \"pubsub-rails-inf-gprd-001926\",\n        \"node\": \"Nce627z_R7aRVIjH1JkAog\",\n        \"reason\": {\n          \"type\": \"query_shard_exception\",\n          \"reason\": \"failed to create query: {\\n  \\\"bool\\\" : {\\n    \\\"filter\\\" : [\\n      {\\n        \\\"multi_match\\\" : {\\n          \\\"query\\\" : \\\"ExternalDiffUploader\\\",\\n          \\\"fields\\\" : [ ],\\n          \\\"type\\\" : \\\"best_fields\\\",\\n          \\\"operator\\\" : \\\"OR\\\",\\n          \\\"slop\\\" : 0,\\n          \\\"prefix_length\\\" : 0,\\n          \\\"max_expansions\\\" : 50,\\n          \\\"lenient\\\" : true,\\n          \\\"zero_terms_query\\\" : \\\"NONE\\\",\\n          \\\"auto_generate_synonyms_phrase_query\\\" : true,\\n          \\\"fuzzy_transpositions\\\" : true,\\n          \\\"boost\\\" : 1.0\\n        }\\n      },\\n      {\\n        \\\"match_phrase\\\" : {\\n          \\\"json.controller\\\" : {\\n            \\\"query\\\" : \\\"Projects::MergeRequests::DiffsController\\\",\\n            \\\"slop\\\" : 0,\\n            \\\"zero_terms_query\\\" : \\\"NONE\\\",\\n            \\\"boost\\\" : 1.0\\n          }\\n        }\\n      },\\n      {\\n        \\\"range\\\" : {\\n          \\\"json.time\\\" : {\\n            \\\"from\\\" : \\\"2020-03-27T12:00:00.000Z\\\",\\n            \\\"to\\\" : \\\"2020-03-27T12:30:00.000Z\\\",\\n            \\\"include_lower\\\" : true,\\n            \\\"include_upper\\\" : true,\\n            \\\"format\\\" : \\\"strict_date_optional_time\\\",\\n            \\\"boost\\\" : 1.0\\n          }\\n        }\\n      }\\n    ],\\n    \\\"adjust_pure_negative\\\" : true,\\n    \\\"boost\\\" : 1.0\\n  }\\n}\",\n          \"index_uuid\": \"URp08IJpRjKQ6kRnKFJQ8w\",\n          \"index\": \"pubsub-rails-inf-gprd-001926\",\n          \"caused_by\": {\n            \"type\": \"illegal_argument_exception\",\n            \"reason\": \"field expansion matches too many fields, limit: 1024, got: 1136\"\n          }\n        }\n      }\n    ]\n  },\n  \"hits\": {\n    \"total\": 0,\n    \"max_score\": 0,\n    \"hits\": []\n  }\n}\n```\n\n\u003c/details\u003e","state":"closed","created_at":"2020-04-22T08:37:32.692Z","updated_at":"2022-08-04T12:59:55.421Z","closed_at":"2020-07-01T10:22:15.496Z","closed_by":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"labels":["Observability","Service::Logging","priority::2","workflow-infra::Done"],"milestone":{"id":1317213,"iid":85,"group_id":1112072,"title":"Observability Team - W27 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20W27%202020)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/ea397eda034197f661b59eee9502b8b9/Team_Focus_-_W27.jpeg\" width=\"700\"\u003e\r\n\r\nWe have 2 primary areas of focus this sprint:\r\n\r\n1. Formalize a [long term strategy for logging](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10095).\r\n2. Continue k8s migrations: [pubusbbeat](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8962), [Alertmanager](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/234), and [Grafana](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146).\r\n\r\nIf you haven't read the readiness design document, please see [Alertmanager Kubernetes migration](https://gitlab.com/gitlab-com/gl-infra/readiness/-/blob/d799d8ba51e0b3976a206037d1c10ee6bc9bd035/library/alertmanager-kubernetes-migration/index.md).\r\n\r\nAdditionally, we'll be looking to:\r\n\r\n1. Complete 2 of 3 tutorials: https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/53616 and https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/53617.\r\n\r\n\r\n### On-Call\r\n\r\nNo one is the primary on-call for database issues, yet. But, please find the recordings for the DB Runbooks and spend time familiarizing yourself with Postgres and our runbooks.\r\n\r\n## Issues\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand/collapse\u003c/summary\u003e\r\n\r\n| TITLE |   WORKFLOW LABEL    |\r\n|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|\r\n| [2020-06-30 Kibana upgrade from 7.5 to 7.8 failed and we lost the Kibana index (which contains index patterns, dashboards, saved searches, etc)](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2355) | workflow::? |\r\n| [Kibana upgrade from 7.5 to 7.8 failed and we lost the Kibana index (which contains index patterns, dashboards, saved searches, etc)](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10702)       | workflow::? |\r\n| [upgrade ops-gitlab-net ES cluster](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10679)                                                                                                         | workflow::? |\r\n| [Decide what to do about NAT in production](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10629)                                                                                                 | workflow::? |\r\n| [Investigate number of concurrent connections made by some of our services to the same external addresses](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10627)                                  | workflow::? |\r\n| [Igor Wiedler - On-call Onboarding](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10579)                                                                                                         | workflow::? |\r\n| [Install rbspy via chef](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10554)                                                                                                                    | workflow::? |\r\n| [Add Elasticsearch timing to \"Rails Controller\" dashboard](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10509)                                                                                  | workflow::? |\r\n| [Update SSL cert for user-content.gitlab-static.net](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2238)                                                                                             | workflow::? |\r\n| [Remove #alerts channel Alertmanager integrations](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10475)                                                                                          | workflow::? |\r\n| [Write tutorial -  Life of a git request](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10389)                                                                                                   | workflow::? |\r\n| [Write tutorial - Life of a web request](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10388)                                                                                                    | workflow::? |\r\n| [Prometheus in GKE does not discover any targets for calico or fluentd](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10334)                                                                     | workflow::? |\r\n| [Add Slack staging alert for customers.stg.gitlab.com](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10327)                                                                                      | workflow::? |\r\n| [Plan transition away from `fqdn` label](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10299)                                                                                                    | workflow::? |\r\n| [How to build and deploy Docker images?](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10295)                                                                                                    | workflow::? |\r\n| [Update Cloudflare alerts](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10294)                                                                                                                  | workflow::? |\r\n| [Adjust node disk IO quota metrics to be per node, not per device](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10248)                                                                          | workflow::? |\r\n| [Alert when jobs are not being processed by sidekiq](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10242)                                                                                        | workflow::? |\r\n| [upgrade production logging cluster to 7.8](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10227)                                                                                                 | workflow::? |\r\n| [Node provisioning broken due to gcloud gem install failure](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10225)                                                                                | workflow::? |\r\n| [Store string fields only as \"keyword\" type](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10150)                                                                                                | workflow::? |\r\n| [The `testbed` environment appears to be routing alerts to production destinations](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10149)                                                         | workflow::? |\r\n| [long-term plan for logging](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10095)                                                                                                                | workflow::? |\r\n| [Generate alert manager config from runbook pipeline](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10054)                                                                                       | workflow::? |\r\n| [`ElasticCloud Watcher: gitaly_abuse_1` triggered with empty project names](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10007)                                                                 | workflow::? |\r\n| [Re-enable indexing on GKE logs with reduced schema](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9876)                                                                                         | workflow::? |\r\n| [Rename the `alerts` Slack channel to `feed_alerts`](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9841)                                                                                         | workflow::? |\r\n| [Enable GitLab Runner Referees Suricata Feature](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9596)                                                                                             | workflow::? |\r\n| [move pubsubbeats to k8s](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8962)                                                                                                                    | workflow::? |\r\n| [The \"View in AlertManager\" link in a PagerDuty incident is not alerts.gprd.gitlab.net, but instead ops.gitlab.net/gitlab-com/runbooks](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8563)      | workflow::? |\r\n| [Create new Grafana dashboard git backup](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/7788)                                                                                                    | workflow::? |\r\n\r\n\u003c/details\u003e\r\n\r\n## Calendar\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003e\u003cb\u003eTotal working days: 49\u003c/b\u003e\u003c/summary\u003e\r\n\r\n| W27         | M 29 Jun | T 30 Jun | W 01 Jul | Th 02 Jul  | F 03 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :pager: | :wrench: | :wrench: | :wrench: | :wrench:\r\n| @cindy | - | - | - | - | :ferris_wheel:\r\n| @craigf | - | - | - | - | -\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | - | - | - | - | :ferris_wheel:\r\n| @mwasilewski-gitlab | - | - | - | - | -\r\n\r\n| W28         | M 06 Jul | T 07 Jul | W 08 Jul | Th 09 Jul  | F 10 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | -\r\n| @cindy | - | :pager: | :pager: | :pager: | :pager:\r\n| @craigf | - | - | - | - | -\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | - | - | - | - | -\r\n| @mwasilewski-gitlab | - | - | - | - | -\r\n\r\n\u003c/details\u003e\r\n","state":"closed","created_at":"2020-06-08T21:55:43.385Z","updated_at":"2020-07-13T19:21:52.699Z","due_date":"2020-07-10","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/85"},"assignees":[{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9876","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9876","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9876/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9876/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9876","relative":"#9876","full":"gitlab-com/gl-infra/reliability#9876"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":134,"epic":{"id":16079,"iid":134,"title":"clean up after migration to 7.X","url":"/groups/gitlab-com/gl-infra/-/epics/134","group_id":1112072,"human_readable_timestamp":"\u003cstrong\u003e1174\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":33565099,"iid":9861,"project_id":1304532,"title":"Thanos storage is enabled in Testbed","description":"The `testbed` environment has thanos storage enabled in the sidecars, but it's not setup for other thanos components. This is cusing Prometheus to send data to GCS that isn't useful.","state":"closed","created_at":"2020-04-21T09:57:43.421Z","updated_at":"2021-05-18T10:25:47.086Z","closed_at":"2020-04-22T19:01:03.194Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability","priority::3","workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9861","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9861","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9861/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9861/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9861","relative":"#9861","full":"gitlab-com/gl-infra/reliability#9861"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33654844,"iid":9887,"project_id":1304532,"title":"a small number of rails logs is being rejected by the ES logging cluster","description":"## Summary\na small number of rails logs is being rejected by the ES logging cluster\n\n## Timeline\n\nAll times UTC.\n\n2020-04-22\n\n- 09:17 - Incident declared from Slack\n\n## Details\nThis is a continuation of https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8931\n\nTwo alerts are firing for this:\n- number of pubsubbeat warnings\n- ES write rejections\n\nThese alerts have been firing for a few weeks now. We either need to fix the underlying problem or adjust the thresholds\n\n## Source \nIncident declared by mwasilewski in Slack via `/incident declare` command.\n\n## Resources\n1. If the **Situation Zoom room** was utilised, recording will be automatically uploaded to [Incident room Google Drive folder](https://drive.google.com/drive/folders/1wtGTU10-sybbCv1LiHIj2AFEbxizlcks) (private)","state":"closed","created_at":"2020-04-21T09:17:24.241Z","updated_at":"2022-08-04T13:00:18.145Z","closed_at":"2020-06-25T20:46:15.686Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Service::Logging","auto updated","incident","severity::4","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":2620738,"username":"ops-gitlab-net","name":"ops-gitlab-net","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2620738/avatar.png","web_url":"https://gitlab.com/ops-gitlab-net"},"type":"INCIDENT","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"incident","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9887","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9887/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9887/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9887","relative":"#9887","full":"gitlab-com/gl-infra/reliability#9887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":134,"epic":{"id":16079,"iid":134,"title":"clean up after migration to 7.X","url":"/groups/gitlab-com/gl-infra/-/epics/134","group_id":1112072,"human_readable_timestamp":"\u003cstrong\u003e1174\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":33532275,"iid":9853,"project_id":1304532,"title":"Thanos has few alerting rules configured","description":"https://github.com/thanos-io/thanos/blob/master/examples/alerts/alerts.md#Ruler has 43 suggested alerts for monitoring a Thanos setup.\n\nAt present, we have 4 alerts configured for our cluster.\n\nWe should consider adding the others.\n\nFor example, [one of the suggested alerts](https://thanos-query.ops.gitlab.net/graph?g0.range_input=1d\u0026g0.max_source_resolution=0s\u0026g0.expr=clamp_max(%0A%20%20%20%20time()%20-%20%20max%20by%20(job%2C%20rule_group)%20(prometheus_rule_group_last_evaluation_timestamp_seconds%7Bjob%3D~%22thanos.*%22%7D)%0A%20%20%20%20%3E%0A%20%20%20%2010%20*%20max%20by%20(job%2C%20rule_group)%20(prometheus_rule_group_interval_seconds%7Bjob%3D~%22thanos.*%22%7D)%2C%201)\u0026g0.tab=0\u0026g1.range_input=1h\u0026g1.max_source_resolution=0s\u0026g1.expr=topk(5%2C%20prometheus_rule_group_last_evaluation_timestamp_seconds%7Bjob%3D~%22thanos.*%22%7D)\u0026g1.tab=1) would point to frequent rule group failures on Thanos Ruler nodes. \n\ncc @bjk-gitlab @AnthonySandoval","state":"closed","created_at":"2020-04-20T20:00:08.815Z","updated_at":"2021-06-24T08:07:58.888Z","closed_at":"2020-05-20T08:38:09.226Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability","Service::Monitoring-Other","blocker","priority::1","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9853","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9853","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9853/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9853/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9853","relative":"#9853","full":"gitlab-com/gl-infra/reliability#9853"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":159,"epic":{"id":18246,"iid":159,"title":"Monitor our Monitoring: Observability SLOs and KPI (MTTD)","url":"/groups/gitlab-com/gl-infra/-/epics/159","group_id":1112072,"human_readable_end_date":"Sep 25, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":33529835,"iid":9852,"project_id":1304532,"title":"Investigate dips in redis-cache latency apdex, part 2","description":"We previously investigated apdex spikiness as part of https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9420.\n\nDuring that investigation we found apdex dips to correlate with CPU saturation. The CPU saturation has been addressed in two ways:\n\n* Upgraded to C2 instance type https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1871\n* Applied rate-limit for user producing traffic bursts https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1906\n\nThis dropped the baseline CPU utilization from 80% to 35% and it is now much smoother. That class of apdex dips no longer occurs.\n\nHowever, it appears that we have a new class of latency apdex dips that does not correlate with any CPU saturation.\n\nFrom the [redis-cache overview dashboard](https://dashboards.gitlab.net/d/redis-cache-main/redis-cache-overview):\n\n![Screenshot_2020-04-20_at_20.06.21](/uploads/e55b9c4fb1dedd80dc5c19fd5c777ab2/Screenshot_2020-04-20_at_20.06.21.png)\n\nThese events are less frequent than they were previously, but the dips have a higher amplitude, which gets amplified when looking at apdex over a longer period of time.\n\nHere is 30 days:\n\n![Screenshot_2020-04-20_at_20.07.19](/uploads/778fb99e275a67b82f9dbfcf70222092/Screenshot_2020-04-20_at_20.07.19.png)\n\n![Screenshot_2020-04-20_at_20.07.30](/uploads/d49af10a1432d8546ae78696c3736c8e/Screenshot_2020-04-20_at_20.07.30.png)\n\nPlease note that this dashboard uses a `min_over_time` aggregation that amplifies lower dips -- it makes things look worse than they actually are when looking at a longer time frame.\n\nThe change in behaviour appears to correlate with the exact date that we upgraded to C2 instances, March 31 (2020-03-31).\n\nThis change included:\n\n* Change in underlying instance type from `n1-highmem-16` to `c2-standard-30`\n* Change in number of CPUs from `16` to `30`\n* Change in kernel version from `4.15.0-1036-gcp` to `4.15.0-1058-gcp`\n\nIt is not yet proven that this is a server-side issue. Since apdex is measured on the client-side (`gitlab_cache_operation_duration_seconds_bucket`), it is also possible that something is happening on the client.\n\nSome possible next steps:\n\n* Gather a CPU profile of the redis process with perf to validate the claim that there is no CPU burst during the event.\n* Gather data on other processes running on the redis host during the time of the event, to validate that no other process is contributing.\n* Undo some of the variables that changed, starting with the instance type: change one of the redis hosts back to a `c2-standard-30`.","state":"closed","created_at":"2020-04-20T18:22:46.417Z","updated_at":"2020-05-13T06:46:36.125Z","closed_at":"2020-04-23T17:44:15.580Z","closed_by":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"labels":["Service::Redis","workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"type":"ISSUE","assignee":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9852","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9852","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9852/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9852/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9852","relative":"#9852","full":"gitlab-com/gl-infra/reliability#9852"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33518307,"iid":9846,"project_id":1304532,"title":"Provision new HDD-based Gitaly node in staging","description":"As part of migrating archived repositories to HDD-based storage, we need to test this process in staging and need to have a HDD-based Gitaly node provisioned.","state":"closed","created_at":"2020-04-20T14:03:20.149Z","updated_at":"2021-06-24T08:09:49.914Z","closed_at":"2020-04-29T15:58:08.769Z","closed_by":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"labels":["EFI","EFI :: Project :: CIrepoM","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9846","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9846","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9846/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9846/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9846","relative":"#9846","full":"gitlab-com/gl-infra/reliability#9846"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":208,"epic":{"id":38937,"iid":208,"title":"RepoStor :: Migrations :: Foundations","url":"/groups/gitlab-com/gl-infra/-/epics/208","group_id":1112072},"iteration":null,"health_status":null},{"id":33517848,"iid":9841,"project_id":1304532,"title":"Rename the `alerts` Slack channel to `feed_alerts`","description":"as per: https://gitlab.com/gitlab-com/support/support-team-meta/-/issues/2244 , the alerts channel needs to be renamed\n\nthis can be done by adjusting the alertmanager config, the actual names are configured in the default attributes for the alertmanager cookbook: https://gitlab.com/gitlab-cookbooks/gitlab-alertmanager/-/blob/master/attributes/default.rb#L26-33 and are partially overwritten in the chef role: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/blob/master/roles/gprd-alertmanager.json#L22-28\n\n- [ ] try using channel IDs instead of names in AM config","state":"closed","created_at":"2020-04-20T13:52:00.603Z","updated_at":"2022-08-04T13:00:35.903Z","closed_at":"2020-07-13T19:06:56.057Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["priority::4","workflow-infra::Done"],"milestone":{"id":1317213,"iid":85,"group_id":1112072,"title":"Observability Team - W27 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20W27%202020)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/ea397eda034197f661b59eee9502b8b9/Team_Focus_-_W27.jpeg\" width=\"700\"\u003e\r\n\r\nWe have 2 primary areas of focus this sprint:\r\n\r\n1. Formalize a [long term strategy for logging](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10095).\r\n2. Continue k8s migrations: [pubusbbeat](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8962), [Alertmanager](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/234), and [Grafana](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146).\r\n\r\nIf you haven't read the readiness design document, please see [Alertmanager Kubernetes migration](https://gitlab.com/gitlab-com/gl-infra/readiness/-/blob/d799d8ba51e0b3976a206037d1c10ee6bc9bd035/library/alertmanager-kubernetes-migration/index.md).\r\n\r\nAdditionally, we'll be looking to:\r\n\r\n1. Complete 2 of 3 tutorials: https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/53616 and https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/53617.\r\n\r\n\r\n### On-Call\r\n\r\nNo one is the primary on-call for database issues, yet. But, please find the recordings for the DB Runbooks and spend time familiarizing yourself with Postgres and our runbooks.\r\n\r\n## Issues\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand/collapse\u003c/summary\u003e\r\n\r\n| TITLE |   WORKFLOW LABEL    |\r\n|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|\r\n| [2020-06-30 Kibana upgrade from 7.5 to 7.8 failed and we lost the Kibana index (which contains index patterns, dashboards, saved searches, etc)](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2355) | workflow::? |\r\n| [Kibana upgrade from 7.5 to 7.8 failed and we lost the Kibana index (which contains index patterns, dashboards, saved searches, etc)](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10702)       | workflow::? |\r\n| [upgrade ops-gitlab-net ES cluster](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10679)                                                                                                         | workflow::? |\r\n| [Decide what to do about NAT in production](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10629)                                                                                                 | workflow::? |\r\n| [Investigate number of concurrent connections made by some of our services to the same external addresses](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10627)                                  | workflow::? |\r\n| [Igor Wiedler - On-call Onboarding](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10579)                                                                                                         | workflow::? |\r\n| [Install rbspy via chef](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10554)                                                                                                                    | workflow::? |\r\n| [Add Elasticsearch timing to \"Rails Controller\" dashboard](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10509)                                                                                  | workflow::? |\r\n| [Update SSL cert for user-content.gitlab-static.net](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2238)                                                                                             | workflow::? |\r\n| [Remove #alerts channel Alertmanager integrations](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10475)                                                                                          | workflow::? |\r\n| [Write tutorial -  Life of a git request](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10389)                                                                                                   | workflow::? |\r\n| [Write tutorial - Life of a web request](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10388)                                                                                                    | workflow::? |\r\n| [Prometheus in GKE does not discover any targets for calico or fluentd](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10334)                                                                     | workflow::? |\r\n| [Add Slack staging alert for customers.stg.gitlab.com](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10327)                                                                                      | workflow::? |\r\n| [Plan transition away from `fqdn` label](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10299)                                                                                                    | workflow::? |\r\n| [How to build and deploy Docker images?](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10295)                                                                                                    | workflow::? |\r\n| [Update Cloudflare alerts](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10294)                                                                                                                  | workflow::? |\r\n| [Adjust node disk IO quota metrics to be per node, not per device](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10248)                                                                          | workflow::? |\r\n| [Alert when jobs are not being processed by sidekiq](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10242)                                                                                        | workflow::? |\r\n| [upgrade production logging cluster to 7.8](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10227)                                                                                                 | workflow::? |\r\n| [Node provisioning broken due to gcloud gem install failure](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10225)                                                                                | workflow::? |\r\n| [Store string fields only as \"keyword\" type](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10150)                                                                                                | workflow::? |\r\n| [The `testbed` environment appears to be routing alerts to production destinations](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10149)                                                         | workflow::? |\r\n| [long-term plan for logging](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10095)                                                                                                                | workflow::? |\r\n| [Generate alert manager config from runbook pipeline](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10054)                                                                                       | workflow::? |\r\n| [`ElasticCloud Watcher: gitaly_abuse_1` triggered with empty project names](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10007)                                                                 | workflow::? |\r\n| [Re-enable indexing on GKE logs with reduced schema](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9876)                                                                                         | workflow::? |\r\n| [Rename the `alerts` Slack channel to `feed_alerts`](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9841)                                                                                         | workflow::? |\r\n| [Enable GitLab Runner Referees Suricata Feature](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9596)                                                                                             | workflow::? |\r\n| [move pubsubbeats to k8s](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8962)                                                                                                                    | workflow::? |\r\n| [The \"View in AlertManager\" link in a PagerDuty incident is not alerts.gprd.gitlab.net, but instead ops.gitlab.net/gitlab-com/runbooks](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8563)      | workflow::? |\r\n| [Create new Grafana dashboard git backup](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/7788)                                                                                                    | workflow::? |\r\n\r\n\u003c/details\u003e\r\n\r\n## Calendar\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003e\u003cb\u003eTotal working days: 49\u003c/b\u003e\u003c/summary\u003e\r\n\r\n| W27         | M 29 Jun | T 30 Jun | W 01 Jul | Th 02 Jul  | F 03 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :pager: | :wrench: | :wrench: | :wrench: | :wrench:\r\n| @cindy | - | - | - | - | :ferris_wheel:\r\n| @craigf | - | - | - | - | -\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | - | - | - | - | :ferris_wheel:\r\n| @mwasilewski-gitlab | - | - | - | - | -\r\n\r\n| W28         | M 06 Jul | T 07 Jul | W 08 Jul | Th 09 Jul  | F 10 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | -\r\n| @cindy | - | :pager: | :pager: | :pager: | :pager:\r\n| @craigf | - | - | - | - | -\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | -\r\n| @msmiley | - | - | - | - | -\r\n| @mwasilewski-gitlab | - | - | - | - | -\r\n\r\n\u003c/details\u003e\r\n","state":"closed","created_at":"2020-06-08T21:55:43.385Z","updated_at":"2020-07-13T19:21:52.699Z","due_date":"2020-07-10","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/85"},"assignees":[{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-06-24","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9841","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9841","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9841/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9841/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9841","relative":"#9841","full":"gitlab-com/gl-infra/reliability#9841"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33514849,"iid":9839,"project_id":1304532,"title":"certificate for log.gitlab.net expires on 11.05.2020","description":"SSLMate Certificate for log.gitlab.net Expiring in 27 Days\n\n(see related email for more details)\n\nRecently expired:\n\n* [x] `next.staging.gitlab.com` (2020-02-22)\n* [x] `monkey.gitlab.net` (2020-02-27)\n* [x] `*.pre.gitlab.net` (2020-03-05)\n\nUpcoming expiries:\n\n* [x] `staging.gitlab.com` (2020-05-01)\n* [x] ~~`*.githost.io` (2020-05-03)~~ \u003c- set not to auto-renew\n* [x] `*.testbed.gitlab.net` (2020-05-03)\n* [x] `log.gitlab.net` (2020-05-11)\n* [x] `*.gprd.gitlab.net` (2020-05-14)\n* [x] `*.gstg.gitlab.net` (2020-05-14)\n* [x] `performance-lb.gitlab.net` (2020-05-17)\n* [x] `dashboards.gitlab.net` (2020-05-24)\n\ncc @AnthonySandoval @igorwwwwwwwwwwwwwwwwwwww","state":"closed","created_at":"2020-04-20T12:46:58.296Z","updated_at":"2022-08-04T13:00:42.307Z","closed_at":"2020-04-29T13:34:40.248Z","closed_by":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"labels":["Service::Logging","priority::1","workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-30","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9839","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":11},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9839","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9839/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9839/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9839","relative":"#9839","full":"gitlab-com/gl-infra/reliability#9839"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33509653,"iid":9836,"project_id":1304532,"title":"Rollout Thanos 0.12","description":"Thanos 0.12 has been released with a number of memory and other performance improvements.\n\nhttps://github.com/thanos-io/thanos/releases/tag/v0.12.0","state":"closed","created_at":"2020-04-20T10:39:30.693Z","updated_at":"2020-05-27T02:47:02.064Z","closed_at":"2020-04-27T17:35:50.466Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9836","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9836","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9836/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9836/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9836","relative":"#9836","full":"gitlab-com/gl-infra/reliability#9836"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":33509628,"iid":9835,"project_id":1304532,"title":"Points to implement on the postgresql upgrade ansible playbook","description":"We need support from SRE to implement in the ansible-playbook from the upgrade:\n\n- Execution of the MRs to apply the changes in chef.\n- Make a snapshot from the database that could be used in a rollback scenario.","state":"closed","created_at":"2020-04-20T10:38:47.339Z","updated_at":"2021-06-24T08:08:00.897Z","closed_at":"2020-04-30T16:00:00.146Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","priority::2","workflow-infra::Done"],"milestone":{"id":1239654,"iid":76,"group_id":1112072,"title":"W16 DBRE","description":"","state":"closed","created_at":"2020-04-14T09:14:09.392Z","updated_at":"2020-05-13T19:56:10.734Z","due_date":"2020-05-08","start_date":"2020-04-14","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/76"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9835","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9835","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9835/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9835/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9835","relative":"#9835","full":"gitlab-com/gl-infra/reliability#9835"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":106,"epic":{"id":14061,"iid":106,"title":"Upgrade Postgresql to version 11.7 on GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/106","group_id":1112072,"human_readable_end_date":"Apr 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":33498871,"iid":9833,"project_id":1304532,"title":"Install postgres debug symbols on hosts running postgres","description":"To aid in profiling postgres stacks, add the debug symbol package along with the main postgres package.  This should apply to our patroni-managed hosts as well as other hosts running the `postgresql-\u003cversion\u003e` package from the postgres apt repo.  The postgres binary is stripped of most symbols; adding the `postgresql-\u003cversion\u003e-dbg` package will make profilers like `perf` more useful.\n\n```shell\n$ apt-cache search 'postgresql-9.6.*dbg'\npostgresql-9.6-dbg - debug symbols for postgresql-9.6\n...\n```","state":"closed","created_at":"2020-04-20T06:14:41.119Z","updated_at":"2022-08-04T13:00:51.522Z","closed_at":"2021-08-19T07:18:33.380Z","closed_by":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"labels":["DStores-Backlog::DBNTHave/Cleanup","priority::4","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9833","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9833","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9833/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9833/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9833","relative":"#9833","full":"gitlab-com/gl-infra/reliability#9833"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33430869,"iid":9826,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file45`","description":"Gitaly storage shard `nfs-file45` (`file-45-stor-gprd.c.gitlab-production.internal`) is at `66.42%` usage as of `2020-04-17`.\n\nAt `78.22%` as of `2020-05-07`.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file45`.\n\nThere are currently 7 gitaly shard nodes configured to accept new projects.  Maintaining at least this level of availability is important to avoid any shards filling up too quickly.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent usage acceleration, a new gitaly node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-04-17T14:52:03.097Z","updated_at":"2020-08-03T15:38:23.607Z","closed_at":"2020-08-03T15:38:23.564Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-20","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9826","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9826","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9826/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9826/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9826","relative":"#9826","full":"gitlab-com/gl-infra/reliability#9826"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33430844,"iid":9825,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file42`","description":"Gitaly storage shard `nfs-file42` (`file-42-stor-gprd.c.gitlab-production.internal`) is at `65.16%` usage as of `2020-04-17`.\n\nAt `77.22%` as of `2020-05-07`.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file42`.\n\nThere are currently 7 gitaly shard nodes configured to accept new projects.  Maintaining at least this level of availability is important to avoid any shards filling up too quickly.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent usage acceleration, a new gitaly node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-04-17T14:51:26.935Z","updated_at":"2020-08-27T16:25:15.783Z","closed_at":"2020-08-27T16:25:15.738Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodr√≠guez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9825","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9825","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9825/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9825/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9825","relative":"#9825","full":"gitlab-com/gl-infra/reliability#9825"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33430820,"iid":9824,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file41`","description":"Gitaly storage shard `nfs-file41` (`file-41-stor-gprd.c.gitlab-production.internal`) is at `67.30%` usage as of 2020-04-17 and `73.51%` as of 2020-04-28.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file41`.\n\nThere are currently 7 gitaly shard nodes configured to accept new projects.  Maintaining at least this level of availability is important to avoid any shards filling up too quickly.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent usage acceleration, a new gitaly node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-04-17T14:50:42.426Z","updated_at":"2022-08-04T13:00:58.071Z","closed_at":"2020-05-06T21:44:35.745Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9824","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9824","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9824/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9824/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9824","relative":"#9824","full":"gitlab-com/gl-infra/reliability#9824"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33420813,"iid":9821,"project_id":1304532,"title":"Increase login session duration for Sentry","description":"Sentry seems to be logging out after around 15 minutes, which feels a bit excessive. \n\nCan we get this increased to something more acceptable?","state":"closed","created_at":"2020-04-17T09:55:57.784Z","updated_at":"2022-01-06T01:50:23.504Z","closed_at":"2020-04-29T03:31:32.711Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Service::Sentry","workflow-infra::Done"],"milestone":null,"assignees":[{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"}],"author":{"id":116,"username":"marin","name":"Marin Jankovski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5154f0b0eda3f798c8a254962d57192f?s=80\u0026d=identicon","web_url":"https://gitlab.com/marin"},"type":"ISSUE","assignee":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"user_notes_count":15,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":"2020-05-08","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9821","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9821","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9821/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9821/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9821","relative":"#9821","full":"gitlab-com/gl-infra/reliability#9821"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33419602,"iid":9820,"project_id":1304532,"title":"Review of deadmans snitch infrastructure","description":"Looking at our deadmans snitch infrastructure, as part of https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9694#note_326029699, and wondering whether it‚Äôs working as expected?\n\n* The dashboard referenced from the runbook seems pretty vacant: https://dashboards.gitlab.com/d/_FOpntlmz/deadman-switches?orgId=1\u0026var-interval=15m\u0026var-interval=30m\u0026var-interval=6h\u0026var-interval=1d\u0026var-interval=1d6h\u0026var-environment=gprd\n\n* Deadmans snitch only seems to be integrated with Slack, not Pagerduty (this differs from the runbook)\n\n* Most of the alerts configured in Alertmanager do not receive any data: https://gitlab.com/gitlab-com/runbooks/blob/master/rules/deadman-switch-alerts.yml#L149, although the [`SnitchHeartBeat`](https://thanos-query.ops.gitlab.net/graph?g0.range_input=12h\u0026g0.max_source_resolution=0s\u0026g0.expr=ALERTS%7Balertname%3D%22SnitchHeartBeat%22%7D\u0026g0.tab=0) does appear to be firing. \n    * Should we have one snitch per alertmanager, rather than one per environment?\n\n* `gprd alertmanager` has not been pinged in 9 months (`ops alertmanager` is active however)\n\nMy biggest concern is that, if alertmanager stops sending alerts, at present it seems we will get a slack message to #alerts and not much else - certainly no pagerduty alerts afaics. Am I missing something here?\n\n![image](/uploads/2d425e236ebe21d3bb51214260113caa/image.png)\n\n\n## Expectations\n\n* [x] If snitches are not getting pinged, we should be alerted through pagerduty, within a few minutes.\n* [x] Are the alerts in `deadman-switch-alerts.yml` redundant or actually useful?\n* [x] Is https://gitlab.com/gitlab-com/runbooks/blob/master/docs/uncategorized/deadman-switches.md up to date.\n\ncc @AnthonySandoval","state":"closed","created_at":"2020-04-17T09:21:15.200Z","updated_at":"2020-07-23T15:59:24.534Z","closed_at":"2020-06-05T16:24:26.465Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability","Service::Monitoring-Other","blocker","priority::1","workflow-infra::Done","workflow-infrafin::Implementation In Progress"],"milestone":{"id":1249005,"iid":80,"group_id":1112072,"title":"Observability Team - W23 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/1bab352839c4f6af55ab757f09188ecd/Team_Focus_-_W23.jpeg\" width=\"850\"/\u003e\r\n\r\nWe have limited capacity this week, with only 11 working days due to time-off, holidays, and on-call shifts. Additionally, this is the final week for 360¬∞ feedback in Culture Amp. So, it's exceedingly important this sprint to work from the board! A few issues are carryovers from the May milestone‚Äìand you've already made significant progress on them‚Äìthat should close quickly. There are also some related, blocking issues that will cascade to closed. I'm confident we'll hit over 90% this sprint.\r\n\r\nAs seen above, we have a need to dedicate the majority of our focus to alerting and monitoring fixes and tunings. Columns on the board continue issues labeled ~P1 ~P2 and ~P3, and whenever possible should be worked on in order of priority.\r\n\r\nThe o11y weekly meeting is on Tuesday, 02 Jun. We'll cover this then. See you all there.\r\n\r\n---\r\n\r\n## Calendar\r\n\r\n|             | M 01 Jun | T 02 Jun | W 03 Jun | Th 04 Jun  | F 05 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :ferris_wheel: | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @igorwwwwwwwwwwwwwwwwwwww | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @msmiley | - | :pager: | :pager: | :pager: | :pager:\r\n| @mwasilewski-gitlab | - | :pager: | :pager: | :pager: | :pager:\r\n\r\nW23 working days: 11\r\n\r\n|             | M 08 Jun | T 09 Jun | W 10 Jun | Th 11 Jun  | F 12 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | :sun_with_face: \r\n| @cindy | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :sun_with_face:\r\n| @craigf | :x: | :pager: | :pager: | :pager: | :pager:\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | :sun_with_face: \r\n| @msmiley | :pager: | :wrench: | :wrench: | :wrench: | :sun_with_face:\r\n| @mwasilewski-gitlab | :pager: | :wrench: | :wrench: | :ferris_wheel: | :sun_with_face: \r\n\r\nW24 working days: 8\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 19**","state":"closed","created_at":"2020-04-20T20:17:57.535Z","updated_at":"2020-06-17T16:19:26.003Z","due_date":"2020-06-12","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/80"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-06-04","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9820","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9820","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9820/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9820/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9820","relative":"#9820","full":"gitlab-com/gl-infra/reliability#9820"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"needs_attention"},{"id":33401295,"iid":9818,"project_id":1304532,"title":"[logging] Shard failures trying to search `json.tag: rails.application` in `pubsub-rails-inf-gprd`","description":"The content of that tag is not structured, so a text search is necessary.\n\nThere are currently a lot of failures on queries like https://log.gprd.gitlab.net/goto/df7102d612189db2fb95d894becdcdd4.\n\n```\nType\n    query_shard_exception\nReason\n    failed to create query: { \"bool\" : { \"filter\" : [ { \"multi_match\" : { \"query\" : \"Successful Login\", \"fields\" : [ ], \"type\" : \"phrase\", \"operator\" : \"OR\", \"slop\" : 0, \"prefix_length\" : 0, \"max_expansions\" : 50, \"lenient\" : true, \"zero_terms_query\" : \"NONE\", \"auto_generate_synonyms_phrase_query\" : true, \"fuzzy_transpositions\" : true, \"boost\" : 1.0 } }, { \"match_phrase\" : { \"json.tag.keyword\" : { \"query\" : \"rails.application\", \"slop\" : 0, \"zero_terms_query\" : \"NONE\", \"boost\" : 1.0 } } }, { \"range\" : { \"json.time\" : { \"from\" : null, \"to\" : null, \"include_lower\" : true, \"include_upper\" : true, \"boost\" : 1.0 } } } ], \"adjust_pure_negative\" : true, \"boost\" : 1.0 } }\nIndex uuid\n    kiWqJuLQRG-a6Rn9iBQMpQ\nIndex\n    pubsub-rails-inf-gprd-002303\nCaused by type\n    illegal_argument_exception\nCaused by reason\n    field expansion matches too many fields, limit: 1024, got: 1579\n```\n\nThis is for a full 24 hours, but it seems reasonable to be able search in more than a few hours worth of data at a time.\n\nCan the limit be raised or some other adjustment made to improve this?","state":"closed","created_at":"2020-04-16T21:07:44.375Z","updated_at":"2021-06-24T08:08:01.557Z","closed_at":"2020-05-26T15:23:51.703Z","closed_by":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"labels":["Service::Logging","priority::1","team::Reliability","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9818","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9818","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9818/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9818/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9818","relative":"#9818","full":"gitlab-com/gl-infra/reliability#9818"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":134,"epic":{"id":16079,"iid":134,"title":"clean up after migration to 7.X","url":"/groups/gitlab-com/gl-infra/-/epics/134","group_id":1112072,"human_readable_timestamp":"\u003cstrong\u003e1174\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":33308198,"iid":9794,"project_id":1304532,"title":"Execute testing of PostgreSQL upgrade using a data volume similar to production","description":"We are executing tests of the PostgreSQL upgrade with the dataset from the staging database.\n\nIt is required to execute the test with the data set from production, to evaluate the time consumed for the process.\n\nPlease consider the following steps  to execute a consistent GCP snapshot in a read-only replica :\n\n - connect to PostgreSQL and execute the command `select pg_start_backup();`\n\n - Execute the GCP snapshot.\n\n - In PostgreSQL execute the `select pg_stop_backup();`\n\nWe need to attach the snapshot in the following hosts : \n\n * patroni-migrate-01-db-gstg.c.gitlab-staging-1.internal\n\n * patroni-migrate-02-db-gstg.c.gitlab-staging-1.internal\n\nAfter Ongres checks and executes the setup of the environment, we should test the playbook to execute the PostgreSQL upgrade.","state":"closed","created_at":"2020-04-15T08:28:57.162Z","updated_at":"2021-06-24T08:08:02.327Z","closed_at":"2020-04-21T15:11:10.572Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","priority::2","workflow-infra::Done"],"milestone":{"id":1239654,"iid":76,"group_id":1112072,"title":"W16 DBRE","description":"","state":"closed","created_at":"2020-04-14T09:14:09.392Z","updated_at":"2020-05-13T19:56:10.734Z","due_date":"2020-05-08","start_date":"2020-04-14","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/76"},"assignees":[{"id":2493611,"username":"adescoms","name":"Adri√°n Escoms","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6f86d318669a8b32174b7132607443d?s=80\u0026d=identicon","web_url":"https://gitlab.com/adescoms"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":2493611,"username":"adescoms","name":"Adri√°n Escoms","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6f86d318669a8b32174b7132607443d?s=80\u0026d=identicon","web_url":"https://gitlab.com/adescoms"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-24","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9794","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9794","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9794/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9794/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9794","relative":"#9794","full":"gitlab-com/gl-infra/reliability#9794"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":106,"epic":{"id":14061,"iid":106,"title":"Upgrade Postgresql to version 11.7 on GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/106","group_id":1112072,"human_readable_end_date":"Apr 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":33287406,"iid":9792,"project_id":1304532,"title":"Incident Practice for Support CMOC - EMEA","description":"Basic summary\n\nThis is meant to be a simple problem to solve and a table top scenario.\nFirst, we are testing incident response and basic group of host interactions.\n\nPractice environment location:  Staging?\n\nPractice - [test env for status.io](https://app.status.io/statuspage/5bedc0c2a394fc04c9ccc974)\n\nScenario:\nservice stop haproxy on all LB - current status no haproxy running (front door is closed)\n\nIncident Start:\nEOC - execute command(s) to stop LB in gstg\n\nStart of incident handling\n1. EOC use `/incident declare` in `#incident management`\n2. Skipping checking pages - we'll verify those through other tests when CMOC rotation is set.\n\nValidate:\n1. [ ] ~~EOC page~~\n2. [ ] ~~IMOC page~~\n3. [ ] ~~CMOC page~~\n4. [x] Creation of incident gdoc\n5. [x] Creation of incident issue\n6. [x] CMOC / IMOC can find incident issue\n\nOnce manager and cmoc join\n1. IMOC/CMOC - talk through any comments to understand the issue\n1. cmoc log into status.io and talk through what they would do to create incident [Link to tests status page](https://app.status.io/statuspage/5bedc0c2a394fc04c9ccc974)\n1. cmoc - talk through your update to status.io\n\nResolution actions\n1. EOC - talk through actions you would do to get load balancers restarted\n1. EOC/ Manager - talk about how to escalate to engineer on call\n1. Verify incident is resolved\n1. cmoc - confirm resolution and talk through status.io update\n1. Follow up with action items\n1. Create Incident Review issue\n1. How to escalate action items to infradev.","state":"closed","created_at":"2020-04-14T20:49:43.098Z","updated_at":"2020-05-01T23:40:55.827Z","closed_at":"2020-04-27T20:26:21.965Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["workflow-infra::Done"],"milestone":{"id":1191536,"iid":71,"group_id":1112072,"title":"Reliability - April 2020","description":"","state":"closed","created_at":"2020-03-12T16:27:31.364Z","updated_at":"2020-05-08T14:25:17.816Z","due_date":"2020-04-30","start_date":"2020-04-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/71"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9792","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9792","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9792/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9792/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9792","relative":"#9792","full":"gitlab-com/gl-infra/reliability#9792"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":220,"epic":{"id":46477,"iid":220,"title":"Incident Management Process Improvements","url":"/groups/gitlab-com/gl-infra/-/epics/220","group_id":1112072,"human_readable_end_date":"Apr 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":33261764,"iid":9789,"project_id":1304532,"title":"Increase prometheus query.max-samples","description":"Owing to https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1780, may queries need to be run directly against Prometheus. Running against Thanos will result in counter reset bugs, leading to incorrect results.\n\nHowever, when querying Prometheus directly, we will frequently hit the `query.max-samples` limit, which is set at 10m samples.\n\nThis means we can neither run these queries in Prometheus or Thanos. \n\n![image](/uploads/2bc931db288a4da8febcfd72f136248d/image.png)\n\n\n## Proposal: Increase `query.max-samples` back to the default value of 50m\n\nCurrently we limit queries to roughly 150MB of sample data (assuming 16 bytes per sample). \n\nThe Prometheus default is 50m items or 760MB per query. \n\nOur prometheus fleet uses about 50% of the available memory, so this seems like a reasonable change to make, at least until the Thanos reset bug is addressed\n\n![image](/uploads/a8e0284bc3a367147250c6b594781a94/image.png)\n\nhttps://dashboards.gitlab.net/d/monitoring-main/monitoring-overview?orgId=1\u0026from=now-12h\u0026to=now\u0026fullscreen\u0026panelId=53\n\ncc @bjk-gitlab @AnthonySandoval","state":"closed","created_at":"2020-04-14T11:28:14.780Z","updated_at":"2022-09-08T16:18:52.102Z","closed_at":"2020-04-22T07:24:16.193Z","closed_by":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"labels":["Observability","Observability-reliability","Service::Monitoring-Other","workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9789","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9789","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9789/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9789/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9789","relative":"#9789","full":"gitlab-com/gl-infra/reliability#9789"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":33260605,"iid":9788,"project_id":1304532,"title":"PoC Redis Cluster as a potential infra side improvement of scalability of Redis","description":"part of: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/80\n\nGDK connected to redis-cluster running in minikube: https://gitlab.com/gitlab-com/gl-infra/k8s-workloads/redis-cluster-poc","state":"closed","created_at":"2020-04-14T10:52:36.410Z","updated_at":"2020-04-27T17:15:58.845Z","closed_at":"2020-04-22T07:29:31.990Z","closed_by":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"labels":["workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9788","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9788","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9788/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9788/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9788","relative":"#9788","full":"gitlab-com/gl-infra/reliability#9788"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":80,"epic":{"id":9012,"iid":80,"title":"Improve Redis cache scalability","url":"/groups/gitlab-com/gl-infra/-/epics/80","group_id":1112072},"iteration":null,"health_status":null},{"id":33138978,"iid":9764,"project_id":1304532,"title":"Improve stackdriver exporter metrics","description":"We currently collect a lot of stackdriver metrics.\n\n| header | header |\n| ------ | ------ |\n| ci-prd | 19959 |\n| gprd | 97653 |\n| gstg | 28759 |\n| ops | 10732 |\n| pre | 6274 |\n| testbed | 92 |\n\nThis leads to a number of problems\n* Large storage needs on the metrics systems.\n* Slow scrape times, timeouts.\n* Lost scrapes.\n* Lots of stackdriver API traffic.\n* Duplication of metric data between stackdriver and other monitoring components.\n\nFor example, we pull the entire `compute.googleapis.com` metrics subsystem. This is 40% of the metrics and has a lot of overlap with `the node_exporter` data.\n\nProposed todo:\n* [x]  Filter out metrics we're not using by using more specific metric filters. (ie `compute.googleapis.com/nat`)\n* [ ]  Split scrape job into more granular instances.","state":"closed","created_at":"2020-04-10T12:06:19.974Z","updated_at":"2022-08-04T13:02:15.129Z","closed_at":"2020-06-11T16:42:55.957Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability","priority::3","workflow-infra::Done"],"milestone":{"id":1249005,"iid":80,"group_id":1112072,"title":"Observability Team - W23 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278)\r\n\r\n## Focus Diagram\r\n\r\n\u003cimg src=\"/uploads/1bab352839c4f6af55ab757f09188ecd/Team_Focus_-_W23.jpeg\" width=\"850\"/\u003e\r\n\r\nWe have limited capacity this week, with only 11 working days due to time-off, holidays, and on-call shifts. Additionally, this is the final week for 360¬∞ feedback in Culture Amp. So, it's exceedingly important this sprint to work from the board! A few issues are carryovers from the May milestone‚Äìand you've already made significant progress on them‚Äìthat should close quickly. There are also some related, blocking issues that will cascade to closed. I'm confident we'll hit over 90% this sprint.\r\n\r\nAs seen above, we have a need to dedicate the majority of our focus to alerting and monitoring fixes and tunings. Columns on the board continue issues labeled ~P1 ~P2 and ~P3, and whenever possible should be worked on in order of priority.\r\n\r\nThe o11y weekly meeting is on Tuesday, 02 Jun. We'll cover this then. See you all there.\r\n\r\n---\r\n\r\n## Calendar\r\n\r\n|             | M 01 Jun | T 02 Jun | W 03 Jun | Th 04 Jun  | F 05 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :ferris_wheel: | - | - | - | -\r\n| @cindy | - | - | - | - | -\r\n| @craigf | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @igorwwwwwwwwwwwwwwwwwwww | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @msmiley | - | :pager: | :pager: | :pager: | :pager:\r\n| @mwasilewski-gitlab | - | :pager: | :pager: | :pager: | :pager:\r\n\r\nW23 working days: 11\r\n\r\n|             | M 08 Jun | T 09 Jun | W 10 Jun | Th 11 Jun  | F 12 Jun\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | :sun_with_face: \r\n| @cindy | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :sun_with_face:\r\n| @craigf | :x: | :pager: | :pager: | :pager: | :pager:\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | - | - | - | :sun_with_face: \r\n| @msmiley | :pager: | :wrench: | :wrench: | :wrench: | :sun_with_face:\r\n| @mwasilewski-gitlab | :pager: | :wrench: | :wrench: | :ferris_wheel: | :sun_with_face: \r\n\r\nW24 working days: 8\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 19**","state":"closed","created_at":"2020-04-20T20:17:57.535Z","updated_at":"2020-06-17T16:19:26.003Z","due_date":"2020-06-12","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/80"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9764","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9764","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9764/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9764/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9764","relative":"#9764","full":"gitlab-com/gl-infra/reliability#9764"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33106785,"iid":9755,"project_id":1304532,"title":"Export version database for loading into warehouse","description":"Runbook https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/uncategorized/cloudsql-data-export.md","state":"closed","created_at":"2020-04-09T15:32:18.578Z","updated_at":"2020-12-02T19:46:59.449Z","closed_at":"2020-04-09T21:26:45.343Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Service::Version","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":5618371,"username":"paul_armstrong","name":"Paul Armstrong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5618371/avatar.png","web_url":"https://gitlab.com/paul_armstrong"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9755","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9755","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9755/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9755/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9755","relative":"#9755","full":"gitlab-com/gl-infra/reliability#9755"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33100615,"iid":9751,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file44`","description":"Gitaly storage shard `nfs-file44` (`file-44-stor-gprd.c.gitlab-production.internal`) is currently at `66.06%` usage (`68.26%` as of 2020-04-14).\n\nA new gitaly node should be created, and added to the list of shards configured to be included in consideration for storing new project repositories.\n\nThat way, `nfs-file44` can be removed from rotation without any concern that the node's removal from the configuration will put any additional burden on the remaining nodes.\n\nIt is important to avoid acceleration of usage growth on the remaining nodes accepting new repositories.","state":"closed","created_at":"2020-04-09T13:43:29.865Z","updated_at":"2022-08-04T13:02:26.045Z","closed_at":"2020-04-16T17:05:19.607Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["C4","Infrastructure","Service::Gitaly","change","requires production access","storage","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-04-10","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9751","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9751","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9751/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9751/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9751","relative":"#9751","full":"gitlab-com/gl-infra/reliability#9751"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33098053,"iid":9750,"project_id":1304532,"title":"chef broken on postgres-dr-delayed-01-db-gprd","description":"```\n#\u003cErrno::ENOENT: No such file or directory @ rb_sysopen - /etc/chef/validation.pem\u003e\n```","state":"closed","created_at":"2020-04-09T12:51:52.811Z","updated_at":"2020-04-29T09:52:56.060Z","closed_at":"2020-04-09T16:38:26.172Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","chef","team::Reliability","toil","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9750","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9750","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9750/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9750/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9750","relative":"#9750","full":"gitlab-com/gl-infra/reliability#9750"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":33088089,"iid":9747,"project_id":1304532,"title":"Enable JavaScript source fetching for Sentry projects customersgitlabcom and customersstggitlabcom","description":"This issue is to re-enable that setting, as we can't see the source for how the errors are being triggered.\n\nWe need this setting to be enabled in both projects:\n\n* https://sentry.gitlab.net/settings/gitlab/projects/customersstggitlabcom/\n* https://sentry.gitlab.net/settings/gitlab/projects/customersgitlabcom/","state":"closed","created_at":"2020-04-09T08:44:13.902Z","updated_at":"2020-04-27T17:16:46.104Z","closed_at":"2020-04-21T15:53:24.030Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["workflow-infra::Done"],"milestone":{"id":1237326,"iid":74,"group_id":1112072,"title":"Observability Team - April 2020","description":"This is a first attempt at planning with the new team structure. Without a planning process, I'm targeting the end of the month. Our best mechanism for organizing a single pane of glass using GitLab boards is using two boards: one for in the active milestone and another for everything without a milestone.","state":"closed","created_at":"2020-04-13T02:47:34.907Z","updated_at":"2020-05-13T19:49:03.277Z","due_date":"2020-04-30","start_date":"2020-04-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/74"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9747","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9747","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9747/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9747/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9747","relative":"#9747","full":"gitlab-com/gl-infra/reliability#9747"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":32963394,"iid":9718,"project_id":1304532,"title":"Add chef-client-is-enabled script to the chef-client-disabler","description":"Per [discussion here](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/1898#note_318576770), in addition to intercepting calls to chef-client when it's disabled, we would also like to be able to easily check whether or not it is disabled.\n\nAdd a `chef-client-is-enabled` script to the `gitlab-server::chef-client-disabler` recipe.  Expected behavior:\n* If chef-client is enabled, this script will say so and exit 0.\n* If chef-client is disabled, this script will exit non-zero and show when, by whom, and for what reason (i.e. same output as though chef-client had been run and intercepted).","state":"closed","created_at":"2020-04-06T22:53:23.646Z","updated_at":"2022-08-04T13:03:05.360Z","closed_at":"2020-04-07T23:49:34.100Z","closed_by":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9718","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9718","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9718/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9718/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9718","relative":"#9718","full":"gitlab-com/gl-infra/reliability#9718"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":32693292,"iid":9665,"project_id":1304532,"title":"Fix permissions on patroni.yml since it contains credentials","description":"The patroni.yml file is world-readable, but it contains postgres superuser credentials.\n\n```shell\nmsmiley@patroni-01-db-gprd.c.gitlab-production.internal:~$ ls -l /var/opt/gitlab/patroni/patroni.yml\n-rw-r--r-- 1 gitlab-psql gitlab-psql 3752 Mar 30 06:48 /var/opt/gitlab/patroni/patroni.yml\n```\n\nPresumably only the patroni daemon needs to read this file, and the file owner is the same Unix account who runs the patroni daemon:\n\n```shell\nmsmiley@patroni-01-db-gprd.c.gitlab-production.internal:~$ pgrep 'patroni' | xargs -r ps -o uid,user,args\n  UID USER     COMMAND\n 1071 gitlab-+ /opt/patroni/bin/python /opt/patroni/bin/patroni /var/opt/gitlab/patroni/patroni.yml\n\nmsmiley@patroni-01-db-gprd.c.gitlab-production.internal:~$ id 1071\nuid=1071(gitlab-psql) gid=1071(gitlab-psql) groups=1071(gitlab-psql)\n```\n\nTherefore, it should be safe to change this file to be read/write only for its owner (i.e. chmod from `0644` to `0600`).","state":"closed","created_at":"2020-03-31T17:36:30.969Z","updated_at":"2022-08-04T13:03:52.992Z","closed_at":"2020-04-17T17:21:42.763Z","closed_by":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9665","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9665","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9665/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9665/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9665","relative":"#9665","full":"gitlab-com/gl-infra/reliability#9665"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":32637793,"iid":9662,"project_id":1304532,"title":"Chef broken because download of origin-pull-ca.pem from cloudflare is broken","description":"Chef-client is broken on 46 gprd nodes because https://support.cloudflare.com/hc/en_us/article_attachments/360044928032/origin-pull-ca.pem can't be downloaded by chef anymore - it seems to be captcha protected, which must be new.\n\nhttps://thanos-query.ops.gitlab.net/graph?g0.range_input=2h\u0026g0.max_source_resolution=0s\u0026g0.expr=sum(round(avg_over_time(chef_client_error%7Benv%3D%22gprd%22%7D%5B5m%5D)))\u0026g0.tab=0","state":"closed","created_at":"2020-03-30T15:20:30.916Z","updated_at":"2022-08-04T13:03:55.832Z","closed_at":"2020-03-30T17:53:49.677Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["SRE:On-call","Service::HAProxy","chef","oncall","toil","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9662","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9662","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9662/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9662/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9662","relative":"#9662","full":"gitlab-com/gl-infra/reliability#9662"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":32632884,"iid":9660,"project_id":1304532,"title":"jobs.gitlab.com cert expired unnoticed on 2020-03-28","description":"The jobs.gitlab.com cert expired on 2020-03-28 without us noticing.\n\nWe got informed by @joernchen at 2020-03-30 11:42 UTC. (https://gitlab.slack.com/archives/CB3LSMEJV/p1585568555313400)\n\nWe replaced the cert with a new one at 12:45 UTC by updating the chef vault.\n\nWe got an expiry warning email from SSLMate on 2020-01-28.\n\nQuestions:\n- Why didn't we notice? What's the process?","state":"closed","created_at":"2020-03-30T13:38:11.645Z","updated_at":"2023-02-08T10:46:34.592Z","closed_at":"2022-05-30T12:21:44.420Z","closed_by":{"id":210928,"username":"steveazz","name":"Steve Azzopardi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a5eeed7ec5c80642df9ee708bb496d7?s=80\u0026d=identicon","web_url":"https://gitlab.com/steveazz"},"labels":["Reliability::P4","SRE:On-call","oncall","team::Reliability","toil","work::general","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9660","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9660","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9660/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9660/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9660","relative":"#9660","full":"gitlab-com/gl-infra/reliability#9660"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":32579198,"iid":9652,"project_id":1304532,"title":"Mark all certificate resources as `sensitive: true`","description":"Mark all certificate resources as `sensitive: true`.\n\n- https://docs.chef.io/resources/#common-functionality-properties\n- https://docs.chef.io/custom_resources/#sensitive","state":"closed","created_at":"2020-03-28T21:00:08.450Z","updated_at":"2022-08-04T13:04:03.477Z","closed_at":"2022-08-02T06:02:35.643Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ü§ñ GitLab Bot ü§ñ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["chef","security","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/9652","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/9652","notes":"https://gitlab.com/api/v4/projects/1304532/issues/9652/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/9652/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#9652","relative":"#9652","full":"gitlab-com/gl-infra/reliability#9652"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]