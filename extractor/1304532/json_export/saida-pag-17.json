[{"id":14073141,"iid":5016,"project_id":1304532,"title":"\"Number of PostgreSQL Databases in gprd has changed in the past minute\" alerts","description":"The name of this alert: \"Number of PostgreSQL Databases in gprd has changed in the past minute\"\n\n\n\"Number of PostgreSQL Databases in gprd has changed in the past minute\" alert was received twice during Sep 10-11.\n\n  - The first alert (sep 10): https://gitlab.slack.com/archives/C3NBYFJ6N/p1536587684000100\n  - The second one (sep 11): https://gitlab.slack.com/archives/C3NBYFJ6N/p1536678976000100\n\n@skarbek noticed, that nothing appeared to change in the database configuration, so something might be wrong with the way the alerts are working.\n\nTodo: check the code for this alert and how reliable it is.\n\n/cc @gitlab\\-com/gl\\-infra","state":"closed","created_at":"2018-09-11T17:16:48.981Z","updated_at":"2018-09-26T15:10:07.710Z","closed_at":"2018-09-12T18:10:48.718Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Database","alert","database-abuse","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5016","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5016","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5016/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5016/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5016","relative":"#5016","full":"gitlab-com/gl-infra/reliability#5016"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14072755,"iid":5014,"project_id":1304532,"title":"Add integrations(project services) log to Kibana","description":"We moved project services related logs to a different file `logs/integrations_json.log`  \n\nIt would be nice to add these logs to Kibana like described here: https://gitlab.com/gitlab-com/runbooks/blob/master/howto/logging.md#adding-a-new-logfile","state":"closed","created_at":"2018-09-11T16:52:41.682Z","updated_at":"2018-11-02T14:55:09.216Z","closed_at":"2018-11-02T07:26:44.717Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["logging","moved 1"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5014","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5014","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5014/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5014/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5014","relative":"#5014","full":"gitlab-com/gl-infra/reliability#5014"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14060305,"iid":5010,"project_id":1304532,"title":"Add GCS storage to Thanos service","description":"In order to reduce / offload local storage requirements for Prometheus, Thanos can upload TSDB data to GCS (Also S3, or similar).\n\nTODO:\n\n* [x] Add a GCS bucket to the \"ops\" project for Thanos to read/write.\n* [x] Configure the sidecars to upload data.\n* [x] Add a [Store Gateway](https://github.com/improbable-eng/thanos/blob/master/docs/getting_started.md#store-gateway) to provide read access.\n* [x] Reduce Prometheus local retention to 7 days.\n* [x] Add a [Compactor](https://github.com/improbable-eng/thanos/blob/master/docs/getting_started.md#compactor) to add downsample data.","state":"closed","created_at":"2018-09-11T14:00:26.165Z","updated_at":"2019-11-12T08:31:00.816Z","closed_at":"2019-04-10T15:03:14.109Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Global:In Progress","Observability","moved 1"],"milestone":{"id":839985,"iid":12,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 week 15","description":"","state":"closed","created_at":"2019-04-05T09:27:08.641Z","updated_at":"2019-05-06T10:46:47.337Z","due_date":"2019-04-19","start_date":"2019-04-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/12"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5010","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5010/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5010/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5010","relative":"#5010","full":"gitlab-com/gl-infra/reliability#5010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14029269,"iid":4997,"project_id":1304532,"title":"Setup no-data alerts","description":"We need to come up with a strategy for creating no-data alerts, this was recently seen in https://gitlab.com/gitlab-com/production/issues/459 where an alert was defined but due to a name refactoring the alert was no longer valid.\n\nThis is problematic in the current configuration because we have the same alerting rules for all environments, should we? this will cause problems when we hardcode environment specific labels.","state":"closed","created_at":"2018-09-10T11:38:43.944Z","updated_at":"2020-08-19T10:58:17.962Z","closed_at":"2019-04-01T19:03:59.946Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Global:In Progress","Observability","TechnicalDebt","ToBacklog","auto updated","corrective action","moved 2"],"milestone":{"id":829037,"iid":11,"group_id":1112072,"title":"JF Team 2019 week 13","description":"","state":"closed","created_at":"2019-03-25T04:41:35.747Z","updated_at":"2019-04-07T20:44:41.908Z","due_date":"2019-04-05","start_date":"2019-03-25","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/11"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4997","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4997","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4997/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4997/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4997","relative":"#4997","full":"gitlab-com/gl-infra/reliability#4997"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14011795,"iid":4991,"project_id":1304532,"title":"postmortem for pages incident","description":"This issue is not the postmortem but the issue to track that it gets done in this milestone.\n\n/cc @dawsmith","state":"closed","created_at":"2018-09-09T13:47:28.440Z","updated_at":"2018-09-21T22:35:43.803Z","closed_at":"2018-09-17T11:50:52.987Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":[],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4991","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4991","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4991/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4991/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4991","relative":"#4991","full":"gitlab-com/gl-infra/reliability#4991"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13996456,"iid":4915,"project_id":1304532,"title":"Marvin access for Tristan and Jerome","description":"Could we please get Marvin access for @tristan and @jeromeuy - permissions should be the same as myself.\n\nThanks!","state":"closed","created_at":"2018-09-07T21:59:35.584Z","updated_at":"2018-11-15T18:03:30.500Z","closed_at":"2018-09-13T11:02:50.597Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["access request","oncall","requires production access","toil","unblocks others","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":786106,"username":"lyle","name":"Lyle Kozloff","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f94534d0df4ebb24d5634eb42548d8b4?s=80\u0026d=identicon","web_url":"https://gitlab.com/lyle"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4915","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4915","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4915/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4915/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4915","relative":"#4915","full":"gitlab-com/gl-infra/reliability#4915"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13995832,"iid":4914,"project_id":1304532,"title":"BigQuery sink for `logName=\"projects/gitlab-production/logs/haproxy\"","description":"`haproxy` logs are no longer being forwarded to ElasticCloud due to size, but we continue to run into cases where basic queries would be helpful to investigating traffic.  I'd to explore using a log sink directly to BigQuery to support these queries.\n\nIn particular, bulk queries for patterns of paths and user-agents have come up a few times in the last few months.  While we now have user agent in more logs in ELK, we're still not sure of the storage and stability impact.\n\nMy primary concern looking at the `haproxy` tagged logs in stackdriver is that there are appear to be 3 different formats for `jsonPayload`, so I think just trying it and seeing results in BigQuery is the fastest way to iterate and determine feasability.\n\n * [x] Infra team: Set up a sink in staging for `haproxy` logs in staging and collect 2 days worth of logs\n   * [x] Security: examine result, determine if changes need to be made to filter or request other changes\n   * [x] Iterate\n * [x] Infra: create filter and sink in production and collect for a few hours\n * [x] Both teams: Evaluate efficacy and size\n\n\n/cc @jurbanc @jarv @andrewn","state":"closed","created_at":"2018-09-07T20:47:31.201Z","updated_at":"2018-12-02T12:51:20.638Z","closed_at":"2018-11-26T19:12:32.639Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["MoveNext","logging","moved 2","toil"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4914","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4914","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4914/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4914/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4914","relative":"#4914","full":"gitlab-com/gl-infra/reliability#4914"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13994382,"iid":4913,"project_id":1304532,"title":"Update Pagerduty api key to use v2 for cog","description":"Got an email from PagerDuty that the v1 api is being deprecated:\n\nIn Pagerduty, there are 2 keys still using v1:\n\n|Key Name|Created|Last Used|\n|--------|-------|---------|\n|ZenDesk Integration|Jan 25, 2016 at 7:04 PM  by Patricio Cano|Sep 5, 2016|\n|GitLab Cog|Sep 13, 2016 at 7:59 AM by GitLab Admin|Sep 7, 2018 at 3:05 PM|\n\nWe can probably check with support and remove the zendesk, but likely need to update the GitLab Cog key whereever it is used\n\n----------- email: ----------\n\nPagerDuty’s v1 REST API will be decommissioned and no longer operational starting on October 19, 2018, at 22:00 PDT (UTC+7).\n\nYour PagerDuty account has had at least one v1 REST API key in use over the last 90 days. This message has only been sent to the administrators of your PagerDuty account. Please forward this message to your team and ask them to migrate to our v2 REST API.\n\nClick here to learn more about our v1 REST API decommissioning on this FAQ page. Please note that the PagerDuty v1 Events API is not being deprecated. Read the FAQ for steps to identify your active v2 REST API keys.\n\nFeel free to contact support@pagerduty.com if you have unanswered questions or need assistance migrating.","state":"closed","created_at":"2018-09-07T19:12:04.574Z","updated_at":"2018-11-01T15:28:03.872Z","closed_at":"2018-10-23T04:26:20.041Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["Observability-reliability","moved 1","priority::1"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2018-10-19","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4913","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4913","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4913/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4913/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4913","relative":"#4913","full":"gitlab-com/gl-infra/reliability#4913"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13964150,"iid":4903,"project_id":1304532,"title":"Destroy ldap{01,02,03}.ath.gitlab.com","description":"Reported via ~HackerOne.  No impact, but per @northrup unused so machines should be deprovisioned.","state":"closed","created_at":"2018-09-06T17:32:30.515Z","updated_at":"2019-07-08T20:04:42.314Z","closed_at":"2018-09-06T18:24:34.736Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["HackerOne","priority::4","security","severity::4","toil","unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4903","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4903","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4903/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4903/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4903","relative":"#4903","full":"gitlab-com/gl-infra/reliability#4903"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13953961,"iid":4897,"project_id":1304532,"title":"Email user list for ending GitLab.com Early Adopter program","description":"We're ending the Early Adopter program for GitLab.com and are discussing in https://gitlab.com/gitlab-com/marketing/general/issues/3050.\n\n### Problem to solve\n\nWe'd like to email all users/groups who will be impacted before making the switchover on October 1st, 2018.\n\n### What's needed\n\nCSV of all GitLab.com users and groups on the Early Adopter plan. Columns should be `name`, `email`, `state`, `username`, `created_at`.","state":"closed","created_at":"2018-09-06T10:58:58.754Z","updated_at":"2018-09-21T22:42:54.392Z","closed_at":"2018-09-13T10:56:44.102Z","closed_by":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"labels":["documentation","oncall","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4897","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4897","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4897/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4897/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4897","relative":"#4897","full":"gitlab-com/gl-infra/reliability#4897"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13949790,"iid":4896,"project_id":1304532,"title":"Setup delayed postgres replica + archive replica","description":"For DR purposes, let's setup a postgres replica with a configurable replication lag and one that feeds from the WAL archive.","state":"closed","created_at":"2018-09-06T09:08:52.522Z","updated_at":"2018-10-19T22:45:18.029Z","closed_at":"2018-10-08T08:51:00.727Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","moved 1","priority::1"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4896","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4896","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4896/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4896/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4896","relative":"#4896","full":"gitlab-com/gl-infra/reliability#4896"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13939955,"iid":4893,"project_id":1304532,"title":"Rename postgres-01 to postgres-archive-replica-01 (Was: postgresql-01 production replica differs from other replicas)","description":"The replication lag postgres-01 (replica) started to grow significantly today: https://prometheus.gprd.gitlab.net/graph?g0.range_input=1h\u0026g0.expr=(pg_replication_lag%20%3E%2043200)%20and%20on(instance)%20(pg_replication_is_replica%7Bfqdn%3D%22postgres-01-db-gprd.c.gitlab-production.internal%22%7D%20%3D%3D%201)\u0026g0.tab=0\n\n@skarbek also pointed that repmgr isn't running on it.\n\n`recovery.conf` differs from the other replicas, streaming replication is not enabled, it uses WAL shipping from S3 (perhaps it was left as is since the times of the Azure-\u003eGCP migration, when postgres-01 node intentionally didn't use SR): \n\n```\n$ sudo cat /var/opt/gitlab/postgresql/data/recovery.conf\n# recovery file for creating the standby server\n# uses both restore_command to fetch wal chunks\n# and pimary_conninfo to transition to secondary\n# when possible\n\n# Specifies whether to start the PostgreSQL server as a standby.\n# If this parameter is on, the server will not stop recovery when the end of archived WAL is reached,\n# but will keep trying to continue recovery by fetching new WAL segments using restore_command and/or\n# by connecting to the primary server as specified by the primary_conninfo setting.\nstandby_mode = 'on'\n\n# By default, recovery will recover to the end of the WAL log.\n# So we don't need any recovery_* options\n\n# If any option is unspecified in this string, then the corresponding environment variable (see Section 32.14) is checked.\n# https://www.postgresql.org/docs/9.6/static/libpq-envars.html\n# TL;DR: export PGPASSWORD=XXX\n#primary_conninfo = 'user=gitlab_repmgr host=''postgres-01.db.prd.gitlab.com'' password=XXX port=5432 fallback_application_name=repmgr sslmode=prefer sslcompression=1 application_name=''postgres-01.db.gprd.gitlab.com'''\n#primary_slot_name = secondary_gprd\n\n# lastly, the restore command that will be run until we can switch\nrestore_command = '/usr/bin/envdir /etc/wal-e.d/env /opt/wal-e/bin/wal-e wal-fetch -p 32 \"%f\" \"%p\"'\nrecovery_target_timeline='latest'\n```\n\nQuestions:\n\n1) why it is still using WAL shipping instead of streaming replication, why do we have not symmetric setup?\n2) why is it lagging (higher lags are possible because WAL shipping from AWS is way longer and less reliable way than SR, but this time the lag is too high)\n3) do we really need 5 replicas? if yes, what are reasons for that?\n\n/cc @abrandl @Finotto","state":"closed","created_at":"2018-09-05T23:17:57.830Z","updated_at":"2019-07-08T20:01:31.866Z","closed_at":"2018-10-18T18:11:14.916Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Database","moved 3","priority::2"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4893","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4893","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4893/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4893/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4893","relative":"#4893","full":"gitlab-com/gl-infra/reliability#4893"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13937039,"iid":4890,"project_id":1304532,"title":"Product link is resolving to pricing page","description":"about.gitlab.com/products is resolving to about.gitlab.com/pricing.","state":"closed","created_at":"2018-09-05T19:32:56.879Z","updated_at":"2019-01-28T22:28:06.742Z","closed_at":"2019-01-17T19:50:50.966Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["oncall"],"milestone":{"id":753074,"iid":61,"project_id":1304532,"title":"Completed 2019-01-26","description":"On call work milestone - tracking issues worked by oncall.\r\n","state":"closed","created_at":"2019-01-07T21:41:02.373Z","updated_at":"2019-02-03T16:29:51.114Z","due_date":"2019-01-26","start_date":"2019-01-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/61"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336482,"username":"cblake","name":"Cindy Blake","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2336482/avatar.png","web_url":"https://gitlab.com/cblake"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4890","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4890","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4890/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4890/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4890","relative":"#4890","full":"gitlab-com/gl-infra/reliability#4890"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13935219,"iid":4886,"project_id":1304532,"title":"Create IO dashboard for Postgres disks","description":"We'd like to gain more insight into IO behavior for postgres disks.\n\nLet's add a dashboard to monitor this in one place:\n\n* IO wait\n* IOPS\n* throughput read\n* throughput write\n\nAs @skarbek pointed out, those metrics are in `node_disk_*`.\n\nSome of these exist already, see https://dashboards.gitlab.net/d/bd2Kl9Imk/host-stats?refresh=1m\u0026orgId=1\u0026var-node=postgres-01-db-gprd.c.gitlab-production.internal and https://gitlab.slack.com/archives/C101F3796/p1536167065000100.\n","state":"closed","created_at":"2018-09-05T17:11:45.516Z","updated_at":"2018-09-10T20:47:41.709Z","closed_at":"2018-09-05T18:09:02.538Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","Observability-reliability","unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4886","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4886","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4886/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4886/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4886","relative":"#4886","full":"gitlab-com/gl-infra/reliability#4886"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13913576,"iid":4879,"project_id":1304532,"title":"Assets in canary don't work any more","description":"When using [canary](https://about.gitlab.com/handbook/engineering/#canary-testing), no assets work any more.\n\nThis appears to be because we're using the production CDN, but if canary has assets that production doesn't.\n\nFrom staging, I guessed that the CDN host was supposed to be gl-canary.global.ssl.fastly.net. However, https://gl-canary.global.ssl.fastly.net/assets/application-367ee28873f9e3f90b56617182f9eded9ad2dbd834f7279d5771980e1858b411.css doesn't work either.\n\n@andrewn checked, and this is using canary.gitlab.com as a backend, which no longer exists. Should we bring it back and fix the canary config? cc @toon as you wanted this back for other reasons :slight\\_smile: \n\n(Posted without using canary.)","state":"closed","created_at":"2018-09-05T08:25:24.013Z","updated_at":"2018-09-09T12:47:22.002Z","closed_at":"2018-09-07T08:54:47.410Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["oncall","unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":18,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4879","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4879","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4879/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4879/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4879","relative":"#4879","full":"gitlab-com/gl-infra/reliability#4879"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13908410,"iid":4875,"project_id":1304532,"title":"Create a better howto for how to troubleshoot rails alerts","description":"more context in https://gitlab.slack.com/archives/CB3LSMEJV/p1536125598000100","state":"closed","created_at":"2018-09-05T06:28:06.128Z","updated_at":"2019-07-08T20:03:34.476Z","closed_at":"2018-09-26T23:01:50.705Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["documentation","moved 2","priority::3"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4875","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4875","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4875/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4875/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4875","relative":"#4875","full":"gitlab-com/gl-infra/reliability#4875"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13907887,"iid":4874,"project_id":1304532,"title":"Set ENV['CANARY'] again for the canary environment","description":"this was dropped when we recreated the canary and needs to be added again.\n\nhttps://gitlab.com/gitlab-org/gitlab-ce/blob/ba99dfcde262c91e33b5bf7f86ba7c0e3b6f7e52/lib/gitlab/favicon.rb#L6-14","state":"closed","created_at":"2018-09-05T05:52:33.393Z","updated_at":"2018-09-09T12:47:35.006Z","closed_at":"2018-09-05T12:30:29.767Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4874","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4874","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4874/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4874/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4874","relative":"#4874","full":"gitlab-com/gl-infra/reliability#4874"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13903751,"iid":4872,"project_id":1304532,"title":"Automation for infrastructure deployments","description":"In a bid to increase reliability, consistency, transparency, and asynchronous workflows, we should begin automating our current infrastructure deployment processes. We will start with simple scripted automation in our CI pipeline to start, and consider whether other changes and/or more advanced tools are necessary based on the results of that work. Since the [Atlantis project](https://www.runatlantis.io/) does not have sufficient security controls to be used on a public repository, we are unable to use it at this time. Terraform Enterprise also provides similar advanced features, though we will need to evaluate the cost after we have a better understanding of where the pain points are using GitLab CI, first.\n\n## Objectives\n\n- Master branch + current state are always consistent with live environment\n    - `terraform plan` on master should show zero changes, except while `terraform apply` is running during merge\n- All changes to environment are made via code and automation\n\n- All changes in `gprd` have been applied/validated in `gstg`\n\n_**We will obviously need to define how we will monitor and report on these_\n\n## Next steps\n\n1. Update CI pipeline to run `terraform plan` for each environment - #5113 \n\n1. Add automatic apply stage for `gstg` - #5114\n\n1. Add optional manual apply stages for `ops` and `gprd` - #5114\n\n1. Setup required/blocking manual apply stage for `ops` and `gprd` - #5115","state":"closed","created_at":"2018-09-04T23:18:59.019Z","updated_at":"2018-10-06T19:41:28.091Z","closed_at":"2018-09-24T19:16:14.566Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Planning","moved 1"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4872","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4872","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4872/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4872/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4872","relative":"#4872","full":"gitlab-com/gl-infra/reliability#4872"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13902622,"iid":4871,"project_id":1304532,"title":"New users, new projects, and MAU for GitLab.com for August 2018","description":"We track users and projects for GitLab.com for internal use and for reports to other interested parties. I'd like to obtain counts for August.\n\nFor GitLab.com, may I have the output for:\n\n```\nuser_count = User.where(created_at: Date.new(2018,8,1).beginning_of_day..Date.new(2018,9,1).beginning_of_day).count\nproject_count = Project.where(created_at: Date.new(2018,8,1).beginning_of_day..Date.new(2018,9,1).beginning_of_day).count\n```\nand\n\n```\nSELECT COUNT(DISTINCT \"audit_events\".author_id)\nFROM \"audit_events\"\nWHERE (\"audit_events\".\"created_at\" BETWEEN '2018-08-01 00:00:00.000000' AND '2018-08-31')\n```\n\nThanks a lot. :smile:","state":"closed","created_at":"2018-09-04T22:09:06.280Z","updated_at":"2018-09-10T20:48:07.268Z","closed_at":"2018-09-05T13:22:04.972Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall","unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4871","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4871","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4871/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4871/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4871","relative":"#4871","full":"gitlab-com/gl-infra/reliability#4871"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13901770,"iid":4870,"project_id":1304532,"title":"Enable support to be able to see stackdriver logs","description":"From Namho and Andrew working together - came up that it might be useful to have support have access to stackdriver to research logs that may have fallen out of elastic cloud. \n\nNeeds review by security to decide if this is okay.\nDetermine what group to create and get list of users from Lyle.","state":"closed","created_at":"2018-09-04T20:43:24.574Z","updated_at":"2018-10-06T19:21:04.901Z","closed_at":"2018-10-01T19:12:14.601Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["access request","moved 1","toil","unblocks others"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4870","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4870","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4870/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4870/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4870","relative":"#4870","full":"gitlab-com/gl-infra/reliability#4870"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13900795,"iid":4869,"project_id":1304532,"title":"Week 5+ - begin migration of all projects on gitlab.com to hashed storage","description":"Related: https://gitlab.com/gitlab-com/infrastructure/issues/4772\n\nMigrate all projects to hashed storage.","state":"closed","created_at":"2018-09-04T19:40:59.230Z","updated_at":"2019-12-26T16:22:20.841Z","closed_at":"2019-01-21T13:28:50.232Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Service::Git","unblocks others"],"milestone":{"id":753072,"iid":59,"project_id":1304532,"title":"DS Team 2019 Week 3","description":"Finish DR, Spike consul, kick of CI/CD, Spike and scope K8s in Q1 OKR","state":"closed","created_at":"2019-01-07T21:39:28.108Z","updated_at":"2019-01-26T19:47:59.561Z","due_date":"2019-01-25","start_date":"2019-01-14","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/59"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":33,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":"2018-10-05","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4869","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4869","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4869/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4869/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4869","relative":"#4869","full":"gitlab-com/gl-infra/reliability#4869"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13900771,"iid":4868,"project_id":1304532,"title":"Week 4 hashed storage - begin migration of gitlab-com \u0026 gitlab-org projects on gitlab.com","description":"Related: https://gitlab.com/gitlab-com/infrastructure/issues/4772\nCloses: https://gitlab.com/gitlab-com/infrastructure/issues/3955\n\nBegin the migration process for `gitlab-com` and `gitlab-org` projects on gitlab.com\n\nThis is going to be better off scripted\n* [x] Gather list of project ID's to be migrated\n* [x] Perform the migration\n* [x] Validate all projects have completed their migration","state":"closed","created_at":"2018-09-04T19:39:02.856Z","updated_at":"2019-12-26T16:22:21.742Z","closed_at":"2018-12-17T13:07:38.448Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Service::Git","ToBacklog","blocked"],"milestone":{"id":713047,"iid":57,"project_id":1304532,"title":"2018-12-30 Completed","description":"","state":"closed","created_at":"2018-11-17T17:50:24.811Z","updated_at":"2019-01-02T14:36:41.786Z","due_date":"2018-12-29","start_date":"2018-12-16","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/57"},"assignees":[{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-09-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4868","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4868","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4868/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4868/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4868","relative":"#4868","full":"gitlab-com/gl-infra/reliability#4868"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13900748,"iid":4867,"project_id":1304532,"title":"Week 3 - enable hashed storage permanently for new projects on gitlab.com","description":"Related: https://gitlab.com/gitlab-com/infrastructure/issues/4772\n\nIn Week 2, we temporarily enabled hashed storage for new projects. No issues were found. In this issue we will be re-enabling hashed storage for new projects and leaving the feature as enabled. We will continue to monitor for any problems. \n\n* [x] Enable hashed storage for new projects (with automatic migration when renaming/moving)\n  - this is one of our easier stories to be completed :joy:\n* [x] Monitor for any issues with the renaming/moving\n* [x] If anything pops up with the renaming/moving migration, Flip the feature toggle back, but keep the \"Hashed Storage for new projects enabled\"","state":"closed","created_at":"2018-09-04T19:36:59.712Z","updated_at":"2018-11-15T16:57:14.517Z","closed_at":"2018-10-25T11:32:27.971Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Geo","blocked"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-09-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4867","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4867","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4867/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4867/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4867","relative":"#4867","full":"gitlab-com/gl-infra/reliability#4867"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13900730,"iid":4866,"project_id":1304532,"title":"Week 2 - temporarily enable hashed storage for new projects on GitLab.com","description":"Related: https://gitlab.com/gitlab-com/infrastructure/issues/4772\n\n* [x] Flip the feature toggle to disable the migration when renaming/moving a project (this step listed is on the parent ticket)\n* [x] Enable the Hashed Storage option for 2 hours and monitor.\n* [x] After 2 hours disable the Hashed Storage option for new projects.\n* [x] Flip the feature toggle back to the initial state (this step listed is on the parent ticket)","state":"closed","created_at":"2018-09-04T19:35:40.093Z","updated_at":"2019-07-08T20:02:46.070Z","closed_at":"2018-10-18T15:36:09.342Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Geo","moved 1","priority::3"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-09-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4866","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4866","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4866/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4866/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4866","relative":"#4866","full":"gitlab-com/gl-infra/reliability#4866"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13890067,"iid":4862,"project_id":1304532,"title":"Sometimes GCS returns 5XX (Server error) status code","description":"GitLab-rails have the object storage integration feature. It's used by various kind of areas, such as LFS, Avatar, Job artifacts, etc.\n\nIt seems sometimes GCS returns 5XX status code (Server error) when GitLab-rails tried to access to it. You can see a bunch of errors happen on our servers.\n\n- Production: https://sentry.gitlap.com/gitlab/gitlabcom/?query=Google%3A%3AApis%3A%3AServerError\n- Staging: https://sentry.gitlap.com/gitlab/staginggitlabcom/?query=Google%3A%3AApis%3A%3AServerError\n- dev.gitab.org: https://sentry.gitlap.com/gitlab/devgitlaborg/?query=Google%3A%3AApis%3A%3AServerError\n\nFrom what I saw, this happens transiently. At the moment, we don't have any clues of the cause.\n\nWe don't know which this issue falls into Infrastructure or GitLab-CE. For now, we create this on infrastrcture project.","state":"closed","created_at":"2018-09-04T12:24:44.292Z","updated_at":"2018-09-10T20:49:18.939Z","closed_at":"2018-09-04T14:11:31.309Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4862","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4862","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4862/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4862/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4862","relative":"#4862","full":"gitlab-com/gl-infra/reliability#4862"},"severity":"UNKNOWN","moved_to_id":13894084,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13868516,"iid":4858,"project_id":1304532,"title":"Setup a Prometheus Pushgateway","description":"Having a Prometheus Pushgateway would help us solve many observability issues:\n\n1. **Allow `ops.gitlab.net` CI jobs to post information related to CI runs**\n   - As an example: if we setup a CI job which routinely performs a restore of our postgres backup, at the end of the job we can post the time it takes to the push gatewat\n   - We can then decide (or better yet, let exec/business decide) on an acceptable restore time for our Postgres backup\n   - This time limit can then be codified as a alert in AlertManager. If the CI job takes longer than X hours, we raise an alert\n   - Additionally, we have trend data to predict and plan ahead\n   - (cc @abrandl as this scenario came from discussions between us)\n\n1. **Configure takeoff to send metrics related to**:\n   1. Deployment time (per host) as a latency histogram\n   1. Deployment in progress (as a gauge): `gitlab_takeoff_deployment_in_progress{fqdn=\"...\", gitlab-version=\"...\"} --\u003e 1` \n   1. Given these metrics, we would be able to annotate our grafana dashboards with details of deploys. \n   1. We would also be able to compare error rates during and after deployments with much greater ease than we can at present.\n\n1. **Allow for easier integration with non-prometheus components**:\n   1. For example, Redis Sentinel allows CLI commands to run when a failover occurs. We could use this to increment a counter on each failover via the push gateway and then setup more robust alerting than we have at present.\n\n\nBefore starting to build - estimate out how much effort is it to do this with Chef vs K8s and update the team with the estimate.\n\n\ncc @bjk\\-gitlab @jarv","state":"closed","created_at":"2018-09-03T15:04:57.442Z","updated_at":"2021-04-02T18:23:47.865Z","closed_at":"2018-10-09T11:42:10.610Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Observability-reliability","moved 1","priority::2"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":34,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4858","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4858","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4858/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4858/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4858","relative":"#4858","full":"gitlab-com/gl-infra/reliability#4858"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":18,"epic":{"id":970,"iid":18,"title":"GitLab.com Observability Improvements","url":"/groups/gitlab-com/-/epics/18","group_id":6543,"human_readable_end_date":"Sep 30, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":13868201,"iid":4857,"project_id":1304532,"title":"Use CICD for environment and role updates in chef-repo","description":"We should start using the ops instance for role and environment updates. At this point all role updates for gprd/gstg should be made on merge, automatically. We may want a pipeline for this, apply the changes for gstg first, check for alerts and then apply to gprd, or a manual step for the gprd apply would work as well.","state":"closed","created_at":"2018-09-03T14:54:32.495Z","updated_at":"2018-10-07T13:17:23.010Z","closed_at":"2018-09-24T20:30:00.887Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["moved 1"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4857","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4857","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4857/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4857/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4857","relative":"#4857","full":"gitlab-com/gl-infra/reliability#4857"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13867132,"iid":4856,"project_id":1304532,"title":"Use CICD for uploading cookbooks to chef","description":"Individual cookbooks should upload to chef when they are merged to master. For this to work we probably should add a pipeline check to ensure that there is a version bump.","state":"closed","created_at":"2018-09-03T14:03:32.105Z","updated_at":"2018-10-07T13:17:45.824Z","closed_at":"2018-09-24T18:12:13.915Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["automation","moved 1"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":12,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4856","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4856","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4856/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4856/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4856","relative":"#4856","full":"gitlab-com/gl-infra/reliability#4856"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13865657,"iid":4855,"project_id":1304532,"title":"Design document for the canary environment","description":"Using backend server weights, we should start sending a very small percentage of production traffic to the canary web node.","state":"closed","created_at":"2018-09-03T12:57:42.089Z","updated_at":"2018-09-26T23:54:17.838Z","closed_at":"2018-09-24T11:44:25.914Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["deploy","moved 1"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4855","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4855","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4855/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4855/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4855","relative":"#4855","full":"gitlab-com/gl-infra/reliability#4855"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1,"epic":{"id":1038,"iid":1,"title":"Improvements to GitLab.com Deployment","url":"/groups/gitlab-com/gl-infra/-/epics/1","group_id":1112072,"human_readable_end_date":"Oct 20, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":13749361,"iid":4839,"project_id":1304532,"title":"Disable Transparent Huge Pages (THP) on Redis machines","description":"I don't think we've had to do this before, and I don't see warnings in the Redis logs but Redis strongly recommends disabling THP to avoid latency:\n\n* https://redis.io/topics/latency \n* https://github.com/antirez/redis/issues/3176 \n* http://antirez.com/news/84\n\nIt can be disabled simply by:\n\n```sh\necho never \u003e /sys/kernel/mm/transparent_hugepage/enabled\n```\n\nRight now it's set as the following:\n\n```sh\n# cat /sys/kernel/mm/transparent_hugepage/enabled \nalways madvise [never]\n```\n\n/cc: @jarv, @andrewn","state":"closed","created_at":"2018-08-27T19:09:38.878Z","updated_at":"2018-09-10T20:51:46.368Z","closed_at":"2018-08-29T19:19:41.326Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4839","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4839","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4839/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4839/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4839","relative":"#4839","full":"gitlab-com/gl-infra/reliability#4839"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13718658,"iid":4832,"project_id":1304532,"title":"Arihant: Production access","description":"As we have moved to GCP as stated [here](https://gitlab.com/gitlab-com/runbooks/blob/master/howto/access-gstg-gprd-hosts.md) creating this issue to get production access for .com.","state":"closed","created_at":"2018-08-27T09:48:36.990Z","updated_at":"2018-09-10T20:52:14.528Z","closed_at":"2018-08-31T12:21:31.489Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall","requires production access","toil","unblocks others","unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":581582,"username":"arihantar","name":"Arihant","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=80\u0026d=identicon","web_url":"https://gitlab.com/arihantar"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4832","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4832","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4832/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4832/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4832","relative":"#4832","full":"gitlab-com/gl-infra/reliability#4832"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13701151,"iid":4830,"project_id":1304532,"title":"Unmount NFS for Gitaly","description":"The tripswitch for for path access from Rails/Sidekiq has been enabled for a while now[1], so the next steps could be taken to remove NFS from our architecture.\n\nNow, dev.gitlab.org doesn't use NFS to the best of my knowledge, so we can do testing there, but I think we should move forward by unmounting the NFS drive for staging and do manual testing there. And afterwards move on to production.\n\n/cc @jramsay @jacobvosmaer\\-gitlab \n\n[1]: https://gitlab.com/gitlab-org/gitaly/issues/1261","state":"closed","created_at":"2018-08-26T09:20:40.158Z","updated_at":"2018-09-04T16:47:48.833Z","closed_at":"2018-09-04T16:47:48.798Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":101578,"username":"zj-gitlab","name":"Zeger-Jan van de Weg","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/101578/avatar.png","web_url":"https://gitlab.com/zj-gitlab"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4830","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4830/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4830/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4830","relative":"#4830","full":"gitlab-com/gl-infra/reliability#4830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13696150,"iid":4826,"project_id":1304532,"title":"Configure Snowplow integration on production for GitLab.com","description":"We added our Snowplow configuration to staging in https://gitlab.com/gitlab-com/infrastructure/issues/4731, and nothing exploded. We also see events successfully populating in our Snowflake dw, so we should configure and turn on the integration in production as well.\n\nIn admin settings, we need to enable Snowplow and set the following values:\n* Collector URI: `snowplow.trx.gitlab.net`\n* Site ID: `gitlab`\n* Cookie domain: `.gitlab.com` \n\n![snowplow](https://gitlab.com/gitlab-org/gitlab-ee/uploads/2b0bd6866097a38f7f985500578c00fe/snowplow.png)","state":"closed","created_at":"2018-08-25T16:00:28.243Z","updated_at":"2019-10-25T09:14:15.701Z","closed_at":"2018-08-27T15:11:20.565Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["unblocks others","unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4826","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4826","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4826/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4826/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4826","relative":"#4826","full":"gitlab-com/gl-infra/reliability#4826"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13728932,"iid":4833,"project_id":1304532,"title":"Environment running EE master refreshed nightly","description":"### Problem\n- We currently have `dev.gitab.org` running CE master which is refreshed nightly. In addition to serving as a production environment for GitLab security-related merge requests, it's a great place to test features that are already in master in a live environment with real data.\n- `staging.gitlab.com` has early RCs of EE with GitLab.com production data, but it is never running master. So if you wanted to test out features already on master, you cannot do so if those features are not yet in an RC, which oftentimes, means several weeks later.\n- Testing out features already on master is super helpful for pretty much everyone at GitLab. For PMs, we can review features, help out on QA, and do FA. This is especially helpful to see a new feature integrated with the latest and greatest code, and not on a branch that might not have the newest functionality. \n- Currently, the alternative is setting up GDK locally, which is not super easy to do for many GitLabbers.\n\n### Proposal\n- Have an environment running EE master.\n- Having it refreshed nightly would be great, or at least weekly.\n- Having some type of real data would be great, and having that data refreshed would be awesome as well. But that is less crucial, and should be a second iteration. Just having the environment with master running means users can create their own test data manually.","state":"closed","created_at":"2018-08-24T14:49:13.857Z","updated_at":"2018-09-10T20:57:14.663Z","closed_at":"2018-09-07T13:56:39.176Z","closed_by":{"id":711023,"username":"victorwu","name":"Victor Wu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/711023/avatar.png","web_url":"https://gitlab.com/victorwu"},"labels":["unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[],"author":{"id":711023,"username":"victorwu","name":"Victor Wu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/711023/avatar.png","web_url":"https://gitlab.com/victorwu"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4833","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4833","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4833/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4833/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4833","relative":"#4833","full":"gitlab-com/gl-infra/reliability#4833"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13653802,"iid":4821,"project_id":1304532,"title":"Some users are having trouble performing a deploy","description":"```\n✖ Stopping chef-client on nfs, sidekiq, mailroom, web, api, git, registry, deploy-node (26s)\nssh_exchange_identification: Connection closed by remote host\nssh_exchange_identification: Connection closed by remote host\nssh_exchange_identification: Connection closed by remote host\nssh_exchange_identification: Connection closed by remote host\nssh_exchange_identification: Connection closed by remote host\nERROR: Errno::EPIPE: Broken pipe\n/Users/jivanvl/gitlab/takeoff/lib/steps/base.rb:69:in `abort': Failed to execute command: bundle exec knife ssh -e -a fqdn 'roles:gprd-base-stor-nfs OR roles:gprd-base-be-sidekiq OR roles:gprd-base-be-mailroom OR roles:gprd-base-fe-web OR roles:gprd-base-fe-api OR roles:gprd-base-fe-git OR roles:gprd-base-fe-registry OR roles:gprd-base-deploy-node' 'sudo service chef-client stop' (ScriptError)\n    from /Users/jivanvl/gitlab/takeoff/lib/steps/base.rb:60:in `post_checks'\n    from /Users/jivanvl/gitlab/takeoff/lib/steps/base.rb:34:in `run!'\n    from /Users/jivanvl/gitlab/takeoff/lib/step_runner.rb:44:in `block in run'\n    from /Users/jivanvl/gitlab/takeoff/lib/step_runner.rb:42:in `each'\n    from /Users/jivanvl/gitlab/takeoff/lib/step_runner.rb:42:in `run'\n    from bin/takeoff-deploy:130:in `block in \u003cmain\u003e'\n    from /Users/jivanvl/.rbenv/versions/2.4.4/lib/ruby/gems/2.4.0/gems/semantic_logger-4.3.0/lib/semantic_logger/base.rb:355:in `measure_internal'\n    from /Users/jivanvl/.rbenv/versions/2.4.4/lib/ruby/gems/2.4.0/gems/semantic_logger-4.3.0/lib/semantic_logger/base.rb:97:in `measure_info'\n    from bin/takeoff-deploy:128:in `\u003cmain\u003e'\n```\n\nAt least two members have reported nearly the same error message.","state":"closed","created_at":"2018-08-23T17:03:58.410Z","updated_at":"2019-07-08T20:04:41.836Z","closed_at":"2018-09-11T20:12:01.002Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["deploy","priority::4"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4821","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4821","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4821/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4821/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4821","relative":"#4821","full":"gitlab-com/gl-infra/reliability#4821"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13631669,"iid":4817,"project_id":1304532,"title":"pgbouncer authentication is incorrectly configured in vault","description":"pgbouncer has the incorrect credentials stored in our vault.  The next time a `gitlab-ctl reconfigure` is run on the db servers, is the next time we'll cause an outage as pgbouncer will not be able to properly authenticate with the master postgres node.\n\nIn order to close this issue:\n1. Correct the password in our vault\n1. Ensure chef has placed the proper credentials on it's next run\n1. Ensure a `gitlab-ctl reconfigure` has completed on all database/pgbouncer servers\n1. Validate pgbouncer is still successful at connecting to the master node\n1. The above is done in both staging and production","state":"closed","created_at":"2018-08-22T19:26:03.442Z","updated_at":"2019-07-08T19:57:33.266Z","closed_at":"2018-10-31T17:00:01.625Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Waiting","blocked","moved 4","priority::1","severity::1","unblocks others"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":47,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4817","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4817","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4817/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4817/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4817","relative":"#4817","full":"gitlab-com/gl-infra/reliability#4817"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13631324,"iid":4816,"project_id":1304532,"title":"forum.gitlab.com running low on disk space","description":"Disk space on this node is mostly taken up by the docker container running discourse.  Soon, it won't have any available space.\n\nReference: https://gitlab.com/gitlab-com/infrastructure/issues/3946\n\nThis node is a one-off.  This node ought to be rebuilt.","state":"closed","created_at":"2018-08-22T18:53:46.501Z","updated_at":"2018-10-21T13:27:52.443Z","closed_at":"2018-10-11T13:21:32.497Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["forum.gitlab.com","unscheduled"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4816","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4816","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4816/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4816/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4816","relative":"#4816","full":"gitlab-com/gl-infra/reliability#4816"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":15,"epic":{"id":1328,"iid":15,"title":"GitLab Forum improvements","url":"/groups/gitlab-com/gl-infra/-/epics/15","group_id":1112072,"human_readable_end_date":"Oct 20, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":13613595,"iid":4815,"project_id":1304532,"title":"Update the infrastructure section of the handbook - first iteration","description":"https://about.gitlab.com/handbook/engineering/infrastructure/production-architecture/ needs a refresh.\n@andrewn has done a bit of work in https://gitlab.com/gitlab-com/infrastructure/issues/4675 which would serve as a great starting point to update the diagrams.  I think we should probably keep the scaffolding and just do a big update to make it relevant for GCP.\n\ncc @gl\\-infra @andrewn \n\n\n* `## On this page`\n* `## Other Related Pages`\n* `## Current Architecture` - needs an update\n* `## Proposed Cloud Native Architecture` - needs an update\n* `### GitLab.com Production Environment` - consolidate with current architecture\n* `### High Level Components View` - Borrow diagrams from the readiness review?\n* `### Pods Definition` - This can probably stay as-is but maybe could use an update?\n* `### Database Architecture` - Needs an update\n* `### Monitoring Architecture` - Needs an update\n* `### Logging Architecture` - Either reference or put link to the logging page\n* `## Infrastructure \"Services\" and Their SLx's` - I think we should remove this until we have a solid plan, cc @andrew\n* `## Host Naming Standards` - Update for gcp\n* `### Hostnames` - Update for gcp\n* `### Service Tiers` - This is pretty much the same\n* `### Environments` - Needs update\n* `### Locations` - update for GCP\n* `### TLD Zones` needs update for internal and .gitlab.net addresses\n* `### Examples`- needs update\n* `## Internal Networking Scheme` - replace with pointer to terraform\n* `### Production` - remove\n* `### Canary` - remove\n* `### Staging` - remove\n* `### GitLabGeoPrd` - remove\n* `### GitLabGeoStg` - remove\n* `### GitLabOps` - remove\n* `### Remote Access` - Replace with pointer to howtos for bastion access\n* `## Azure` - remove\n* `### Load Balancers` - Remove, covered in high level diagrams\n* `### Service Nodes` - remove\n* `## Digital Ocean` - needs update\n* `## AWS` - needs update\n* `## Google Cloud` - remove as we are on gcp now\n* `## Monitoring` - keep, reference to monitoring section\n* `## Technology at GitLab` - more or less the same.","state":"closed","created_at":"2018-08-22T09:02:54.322Z","updated_at":"2018-09-10T21:01:02.145Z","closed_at":"2018-09-05T19:53:19.821Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["Discussion","documentation","unscheduled"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":7,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4815","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4815","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4815/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4815/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4815","relative":"#4815","full":"gitlab-com/gl-infra/reliability#4815"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13575681,"iid":4807,"project_id":1304532,"title":"Create blackbox scraper alert for https://dashboards.gitlab.com","description":"This is the public dashboard service. We may want to just hit the api health endpoint on port 3000 from the blackbox scraper on the internal ip, or we can hit the https endpoint since it is public.","state":"closed","created_at":"2018-08-21T08:56:54.911Z","updated_at":"2018-08-28T08:49:41.843Z","closed_at":"2018-08-21T12:00:13.256Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4807","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4807","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4807/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4807/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4807","relative":"#4807","full":"gitlab-com/gl-infra/reliability#4807"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13502571,"iid":4793,"project_id":1304532,"title":"Fix mailgun 2FA to not email everyone on login","description":"https://gitlab.slack.com/archives/C0SNC8F2N/p1534522465000100\n\nApparently logging into mailgun with 2FA enabled is emailing a mailing list with the 2FA code.","state":"closed","created_at":"2018-08-17T16:28:44.429Z","updated_at":"2018-09-21T22:42:54.056Z","closed_at":"2018-09-13T12:56:31.167Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["moved 1"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4793","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4793","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4793/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4793/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4793","relative":"#4793","full":"gitlab-com/gl-infra/reliability#4793"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13487380,"iid":4788,"project_id":1304532,"title":"GCP permission cleanup - add users to groups and remove specific permissions","description":"See issue https://gitlab.com/gitlab-com/security-accountability/issues/3","state":"closed","created_at":"2018-08-16T21:41:25.369Z","updated_at":"2019-07-08T20:01:12.695Z","closed_at":"2018-10-01T19:14:22.251Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["moved 2","priority::2","security","severity::2"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4788","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4788","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4788/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4788/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4788","relative":"#4788","full":"gitlab-com/gl-infra/reliability#4788"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13483938,"iid":4785,"project_id":1304532,"title":"Week 1 - test limited repos on GitLab.com with hashed storage","description":"Week 1 issue for #4772 - \n\nFollowing: https://gitlab.com/gitlab-com/infrastructure/issues/4174 and as a step to https://gitlab.com/groups/gitlab-org/-/epics/75 I discussed some additional steps with @stanhu to have an initial rollout in gitlab dot com:\n\n- First week: Let's enable it for new projects for a short period of time (~2 hours) and monitor\n\nCoordinate with @stanhu and geo team for which repos and time window","state":"closed","created_at":"2018-08-16T17:25:52.103Z","updated_at":"2018-10-25T08:44:53.078Z","closed_at":"2018-09-05T11:40:32.148Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Geo","Waiting"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4785","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4785","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4785/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4785/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4785","relative":"#4785","full":"gitlab-com/gl-infra/reliability#4785"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13483439,"iid":4783,"project_id":1304532,"title":"Change GITLAB_CDN_HOST to the IPv6-enabled endpoint on staging","description":"**Reason:**  \n[IPv6 support on GitLab.com](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/645) is being prioritized. Static resources ought to also be reachable over IPv6.\n\n**Problem:**  \nStaging uses `gl-staging.global.ssl.fastly.net`/`gl-staging-canary.global.ssl.fastly.net` as the CDN endpoint, but that doesn't support IPv6.\n\n**Fix:**  \nChange the [`GITLAB_CDN_HOST`](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/administration/environment_variables.md#supported-environment-variables) environment variable to `gl-staging.freetls.fastly.net`/`gl-staging-canary.freetls.fastly.net`. As an added benefit this will enable HTTP/2. See [Fastly's Free TLS IPv6 documentation](https://docs.fastly.com/guides/securing-communications/setting-up-free-tls#support-for-http2-ipv6-and-tls-12).","state":"closed","created_at":"2018-08-16T16:03:22.609Z","updated_at":"2019-03-12T14:10:43.662Z","closed_at":"2019-03-08T09:06:16.014Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["SRE:On-call","corrective action","unscheduled"],"milestone":{"id":786140,"iid":73,"project_id":1304532,"title":"DS Team 2019 Week 9","description":"","state":"closed","created_at":"2019-02-10T00:08:27.050Z","updated_at":"2019-03-12T14:11:00.944Z","due_date":"2019-03-09","start_date":"2019-02-25","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/73"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":211002,"username":"tambre","name":"Raul Tambre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/211002/avatar.png","web_url":"https://gitlab.com/tambre"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4783","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4783","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4783/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4783/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4783","relative":"#4783","full":"gitlab-com/gl-infra/reliability#4783"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13480437,"iid":4777,"project_id":1304532,"title":"remoteonly.org ssl expiration","description":"The certificate expired for this pages served application.","state":"closed","created_at":"2018-08-16T14:02:03.813Z","updated_at":"2018-08-28T08:47:23.194Z","closed_at":"2018-08-16T14:08:02.494Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["security","toil"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4777","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4777","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4777/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4777/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4777","relative":"#4777","full":"gitlab-com/gl-infra/reliability#4777"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14000505,"iid":4923,"project_id":1304532,"title":"Define Database Reliability Engineer role","description":"This is to track work on defining the DBRE role we currently discuss.","state":"closed","created_at":"2018-08-16T12:12:27.246Z","updated_at":"2019-03-01T12:27:53.226Z","closed_at":"2019-03-01T11:42:57.849Z","closed_by":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"labels":["Database [pl]","auto updated"],"milestone":null,"assignees":[{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4923","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4923","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4923/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4923/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4923","relative":"#4923","full":"gitlab-com/gl-infra/reliability#4923"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13460797,"iid":4773,"project_id":1304532,"title":"Investigate / Deploy eBPF metrics exporter","description":"The [ebpf_exporter](https://github.com/cloudflare/ebpf_exporter) can give us latency histograms for disk IO. This would be useful for debugging and viewing the impact of slow / throttled storage.","state":"closed","created_at":"2018-08-15T16:39:56.551Z","updated_at":"2021-06-24T08:09:29.397Z","closed_at":"2020-05-28T16:45:31.280Z","closed_by":{"id":136229,"username":"cindy","name":"Cindy Pallares 🦉","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"labels":["Observability","Service::Monitoring-Other","auto updated","priority::3","workflow-infra::Done"],"milestone":{"id":1242271,"iid":79,"group_id":1112072,"title":"Observability Team - May 2020","description":"Here are the things we'd like to accomplish this sprint!\r\n\r\n[Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20May%202020\u0026)\r\n\r\n### Kubernetes Deployments\r\n\r\n- Sentry: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9118\r\n- Grafana: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/146\r\n- Grafana Image Renderer: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9991","state":"closed","created_at":"2020-04-15T21:27:15.933Z","updated_at":"2020-05-31T19:18:46.407Z","due_date":"2020-05-29","start_date":"2020-05-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/79"},"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4773","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4773","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4773/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4773/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4773","relative":"#4773","full":"gitlab-com/gl-infra/reliability#4773"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13460848,"iid":4774,"project_id":1304532,"title":"Database Access For Dylan Griffith","description":"The configure team regularly finds ourselves needing to query the database for certain things like:\n\n- debug production incidents\n- understanding how many rows we have in certain tables (how this might affect migrations)\n- analytics on usage of our product\n- query the DB to understand the impact of introducing new constraints in the DB\n\nWe don't have anybody in our team that can execute these queries so we usually rely on others to do this for us but sometimes like in the case of analytics on product usage we need to do slightly exploratory querying to know what we're looking for. It's hard to do this without prod DB access since we do one `COUNT` query and this tells us what kinds of other queries we might want to do to understand the data better.\n\nCould you please provide access to @DylanGriffith so that the Configure team is better setup to manage these kinds of problems in future without external support.\n","state":"closed","created_at":"2018-08-15T16:34:02.240Z","updated_at":"2018-09-17T23:19:06.290Z","closed_at":"2018-09-17T11:08:24.800Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Database [pl]","access request"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4774","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4774","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4774/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4774/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4774","relative":"#4774","full":"gitlab-com/gl-infra/reliability#4774"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13460332,"iid":4772,"project_id":1304532,"title":"Hashed Storage rollout in GitLab dot Com","description":"Following: https://gitlab.com/gitlab-com/infrastructure/issues/4174 and as a step to https://gitlab.com/groups/gitlab-org/-/epics/75 I discussed some additional steps with @stanhu to have an initial rollout in gitlab dot com:\n\n* [x] First week: Start migrating some of our own projects (`gitlab-com` and/or `gitlab-org`) #4785\n* [x] Second week #4866: \n  - Flip the feature toggle to disable the migration when renaming/moving a project\n  - Enable Hashed Storage for new projects only, for a short period of time (~2 hours)\n  - Disable Hashed Storage for new projects\n  - Flip the feature toggle back to the initial state\n* [x] Third week #4867:\n  - Enable Hashed Storage for new projects and the automatic migration when renaming/moving a project\n  - Monitor for any issues with the renaming/moving \n  - If anything pops up with the renaming/moving migration, Flip the feature toggle back, but keep the Hashed Storage for new projects enabled\n* [x] Fourth week #4868: Migrate all our `gitlab-com` and `gitlab-org` projects \n* [x] Fifth week and beyond #4869: Start migrating user's repository (batches of 1K? per day/or all repositories from the same storage, etc)\n* [x] Resolve any failures #6001\n* [x] Resolve any failures from [#935](https://gitlab.com/gitlab-com/gl-infra/production/issues/935)\n\nBecause we've introduced a feature to also migrate hashed storage when renaming/moving projects in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/19747 we may want to reduce the risk and introduce a feature toggle to disable the behavior first (this will be done in a separate issue, I will discuss this with @vsizov - https://gitlab.com/gitlab-org/gitlab-ce/issues/50345).\n\n\n----\n\nAfter finalizing all the migration in GitLab-dot-com, this is a list of what we learned and the corner cases we found:\n\n* When a precondition fail, we had no visibility of what failed nor why\n  - That required extra debugging and allowed us to improve the code. \n  - The failures were either due to corner cases or bugs in other parts of the codebase we were relying on.\n* The rake task did not include all pagination params SRE wanted in order to throttle the execution\n  - Initially SRE did some custom scripts to trigger a throttled amount of projects to comply with GitLab-dot-com load\n  - We improve a few things on our rake task adding extra params it was lacking, but still most of the initial batch was triggered via some custom bash scripts calling our rake tasks and paginating\n* Files in object storage are already hashed, but we were still listing them as candidates\n  - The code did not corrupt or messed up with anything on object storage, so we got only some noise as side-effect\n  - The queries were fixed and we removed them from the list and from the candidates that were being triggered\n  - We also added an extra bit that just ignored any attempt to schedule a migration as a precondition\n* Initial goal was to build it to be fast (that means, be over optimistic of how the environment is, but stop to prevent data-loss whenever we have 100% confidence)\n  - This was necessary for the scale of GitLab dot com. The conservative approach helped us achieve no data-loss\n  - Because of the conservative approach, it required multiple iterations to find and fix corner cases\n* We found out that due to some previous attempts we left an empty folder (with CarrierWave folder structure, but no files inside)\n  - We now consider that OK and we still try to migrate over\n  - For GitLab dot com, we found a few cases were, due to an early attempt, the tmp folder were not empty, so a few cases required a manually intervention to allow that to be retried\n* We lacked instrumentation, logging was not good from the beginning\n  - We've improved the amount of information we log\n  - That allowed us to follow up the migration by watching the specific worker class in our logstash instance\n* Because of the speed concerns, migration happened in sidekiq, and scheduling them was also triggered by sidekiq. This is hard to debug. Ideally we should have a background/foreground mode\n  - I've created a proposal to build some internal framework with the lessons we learned here that could help us with future data migrations https://gitlab.com/gitlab-org/gitlab/issues/34427\n* Permission problems (incorrect permissions on disk, in a few of the last remaining projects)\n  - This was due to previous SRE support work, which had nothing to do with the hashed storage, but impacted the script\n  - Permissions had to be fixed manually\n* SQL timeouts (during first attempts we had enough database performance, that degraded as dot com grew and we reduced timeout limit...)\n  - We had to add partial indexes to help get back the speed\n  - The indexes were only tracking remaining legacy storage projects, so after migrating them all the index will have zero cost\n* Repository reference counters were inconsistent in some repositories (probably due to earlier bug)\n  - We had to manually reset the counter for a few projects\n  - There was no code available to do that, so that was added in another MR\n* We found projects in legacy storage that are `pending delete` but never was removed (created: https://gitlab.com/gitlab-org/gitlab/-/issues/210031)\n  - The solution until we found a more permanent fix is to re-schedule removal of them manually\n  - There is documentation on how to do it here: https://gitlab.com/gitlab-org/gitlab/blob/a67ad6249dc784f328ce23d77bd7ae1e8ebe57b5/doc/administration/troubleshooting/gitlab_rails_cheat_sheet.md#L193-232","state":"closed","created_at":"2018-08-15T16:07:27.750Z","updated_at":"2020-03-26T16:04:44.854Z","closed_at":"2020-03-24T15:20:35.660Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Geo","Planning","auto updated"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":2293,"username":"brodock","name":"Gabriel Mazetto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2293/avatar.png","web_url":"https://gitlab.com/brodock"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4772","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":7},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4772","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4772/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4772/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4772","relative":"#4772","full":"gitlab-com/gl-infra/reliability#4772"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13452769,"iid":4767,"project_id":1304532,"title":"Alert for failing basebackup","description":"We have discussed a couple ways to go about this:\n- \u003cs\u003eAlert on a failing restore pipeline\u003c/s\u003e EDIT: I would prefer to hold off until we have this running in the ops instance.\n- Alert on the cronjob failing","state":"closed","created_at":"2018-08-15T09:19:41.680Z","updated_at":"2019-07-08T19:57:33.025Z","closed_at":"2018-09-03T12:23:21.030Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["priority::1"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4767","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4767","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4767/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4767/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4767","relative":"#4767","full":"gitlab-com/gl-infra/reliability#4767"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13435488,"iid":4759,"project_id":1304532,"title":"Documentation for GKMS Secret Storage for GitLab Servers","description":"Document on our architecture page our usage of GKMS and the methodology behind how we use GKMS in automated Chef runs for secrets management.","state":"closed","created_at":"2018-08-14T17:15:25.641Z","updated_at":"2020-07-14T23:07:50.394Z","closed_at":"2018-09-21T07:12:05.296Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["documentation","unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":"2018-08-20","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4759","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4759","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4759/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4759/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4759","relative":"#4759","full":"gitlab-com/gl-infra/reliability#4759"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13432006,"iid":4758,"project_id":1304532,"title":"adrielsantiago needs an account on staging.gitlab.com","description":"@adrielsantiago joined recently and needs a staging account to help test changes made into RCs.\n\nThanks!\n\nCreated this issue as recommended in https://gitlab.slack.com/archives/C3JJET4Q6/p1534255102000100 ","state":"closed","created_at":"2018-08-14T14:34:41.808Z","updated_at":"2018-08-28T08:46:56.459Z","closed_at":"2018-08-14T14:43:57.783Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["access request","oncall"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4758","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4758","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4758/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4758/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4758","relative":"#4758","full":"gitlab-com/gl-infra/reliability#4758"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13429069,"iid":4755,"project_id":1304532,"title":"page the oncall when redis fails over","description":"There should be a specific alert for every type of failover, redis, redis-cache, postgres.\nAlthough failovers can happen without service interruption they usually can indicate other problems and and it will help to shorten the troubleshooting time if we are alerted to them immediately.","state":"closed","created_at":"2018-08-14T12:20:08.060Z","updated_at":"2018-09-21T22:39:23.619Z","closed_at":"2018-09-14T09:16:21.418Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["corrective action","moved 1","oncall"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4755","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4755","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4755/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4755/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4755","relative":"#4755","full":"gitlab-com/gl-infra/reliability#4755"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13410376,"iid":4743,"project_id":1304532,"title":"Reconfigure the Gitaly cgroup cookbook to match new file server nodes","description":"Gitaly currently uses the default cgroup settings (32GB of memory, 1024 CPU shares, etc) from the Gitaly cgroup cookbook.\n\nHowever, the machines Gitaly is now running on on GitLab.com are much bigger, with much more memory and we should ensure that we're using the optimal settings.\n\n```\nroot@file-01-stor-gprd.c.gitlab-production.internal:/home/andrewn# free -g\n              total        used        free      shared  buff/cache   available\nMem:            118           2          83           0          31         113\nSwap:             0           0           0\n```\n\n113GB of unused memory on file-01 :disappointed: \n\n```\nroot@file-01-stor-gprd.c.gitlab-production.internal:/home/andrewn# cat /sys/fs/cgroup/memory/system.slice/gitlab-runsvdir.service/memory.max_usage_in_bytes\n34359738368\n```\n\nGitaly cgroup constrained to 32GB of memory, using a maximum of ~20% of available RAM on dedicated Gitaly machines:\n\n![image](/uploads/2026203e3d7668e210688d6511d540c3/image.png)\n\n\u003csup\u003ehttps://dashboards.gitlab.net/d/Zy6xM95mk/incident-405-failing-api-health-checks?panelId=12\u0026fullscreen\u0026orgId=1\u0026from=now-24h\u0026to=now\u003c/sup\u003e\n\ncc @tommy.morgan @jacobvosmaer\\-gitlab","state":"closed","created_at":"2018-08-13T17:30:35.817Z","updated_at":"2019-11-29T13:18:07.753Z","closed_at":"2018-12-11T07:27:54.473Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["Service::Gitaly"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4743","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4743","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4743/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4743/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4743","relative":"#4743","full":"gitlab-com/gl-infra/reliability#4743"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13382075,"iid":4740,"project_id":1304532,"title":"fewer requests are going to web-01 than other VMs in the load balancing pool","description":"It appears web-01 in gprd is responding much faster than the other instances as you can see in this graph:\nhttps://dashboards.gitlab.net/d/HyOiXrSmz/rails?refresh=5m\u0026panelId=2\u0026fullscreen\u0026orgId=1\n\nThe reason, however, is that fewer requests are being routed to web-01 resulting in the liveness check skewing the latency results. From this there are a couple open questions:\n\n- Should we be excluding liveness from our latency measurements?\n- Why is web-01 receiving fewer requests relative to liveness?\n\nOut of the last 1000 requests on web-01 524 were liveness, on web-02 354 were liveness.","state":"closed","created_at":"2018-08-12T13:41:52.188Z","updated_at":"2018-09-09T12:48:35.922Z","closed_at":"2018-08-30T18:45:46.229Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4740","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4740","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4740/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4740/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4740","relative":"#4740","full":"gitlab-com/gl-infra/reliability#4740"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13380775,"iid":4739,"project_id":1304532,"title":"Move chatops runner to gitlab-ops","description":"In order for chatops to have network access to both gstg and gprd we should move it to the gitlab-ops gcp project and also register it with the ops.gitlab.net instance.,","state":"closed","created_at":"2018-08-12T09:29:23.970Z","updated_at":"2021-03-05T00:16:17.476Z","closed_at":"2021-03-05T00:16:17.400Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Postmigration"],"milestone":null,"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4739","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4739","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4739/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4739/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4739","relative":"#4739","full":"gitlab-com/gl-infra/reliability#4739"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13363801,"iid":4735,"project_id":1304532,"title":"Create a wildcard certificate for `*.gitlab-review.app`","description":"We currently use a self-signed certificate for `*.gitlab-review.app` (for EE review apps) but it seems to not work at all.\n\nI get the following when visiting https://gitlab-review-improve-re-ffvbep.gitlab-review.app/ in Firefox:\n\n\u003e\u003e\u003e\nThe owner of gitlab-review-improve-re-ffvbep.gitlab-review.app has configured their website improperly. To protect your information from being stolen, Firefox has not connected to this website.\n\nThis site uses HTTP Strict Transport Security (HSTS) to specify that Firefox may only connect to it securely. As a result, it is not possible to add an exception for this certificate.\n\ngitlab-review-improve-re-ffvbep.gitlab-review.app uses an invalid security certificate.\n\nThe certificate is not trusted because it is self-signed.\n\nThe certificate is only valid for ingress.local.\n\nError code: MOZILLA_PKIX_ERROR_SELF_SIGNED_CERT\n\u003e\u003e\u003e\n\nWe should have a proper wildcard certificate for `*.gitlab-review.app`.\n\n/cc @marin","state":"closed","created_at":"2018-08-10T14:13:57.651Z","updated_at":"2018-10-02T14:19:46.454Z","closed_at":"2018-09-10T20:44:56.573Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":[],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4735","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4735","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4735/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4735/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4735","relative":"#4735","full":"gitlab-com/gl-infra/reliability#4735"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13359158,"iid":4732,"project_id":1304532,"title":"infrastructure in the ops environment needs monitoring","description":"We currently do not have an alert manager in the ops environment which means we have very poor optics for some of our important operational infrastructure. This includes:\n* dashboards.gitlab.net\n* nginx proxy\n* public grafana\n\nWe should deploy a dedicated prometheus and alertmanager there.","state":"closed","created_at":"2018-08-10T10:04:04.002Z","updated_at":"2018-10-15T20:08:37.622Z","closed_at":"2018-10-15T16:41:32.753Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Postmigration","corrective action","moved 3"],"milestone":{"id":655347,"iid":52,"project_id":1304532,"title":"2018-10-20 Completed Milestone","description":"","state":"closed","created_at":"2018-09-21T22:04:47.446Z","updated_at":"2018-10-22T08:50:32.614Z","due_date":"2018-10-20","start_date":"2018-10-07","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/52"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":32,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4732","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4732","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4732/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4732/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4732","relative":"#4732","full":"gitlab-com/gl-infra/reliability#4732"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13347037,"iid":4727,"project_id":1304532,"title":"Create VM/Cloud inventory first iteration","description":"https://gitlab.slack.com/archives/CB3LSMEJV/p1533834709000494\n\nAfter getting some quetions - we should have a tool that produces some kind of inventory of hosts and IPs to help us track down things among our cloud providers.  This will also help new people find things.\n\nBefore doing - come up with a plan - is there an existing tool we can use?\nDo we just want output to go to a spreadsheet?\nGet a 2nd set of eyes to review the plan and then go.","state":"closed","created_at":"2018-08-09T17:18:05.349Z","updated_at":"2018-10-16T22:51:23.243Z","closed_at":"2018-09-21T16:30:00.642Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["moved 1"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4727","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4727","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4727/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4727/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4727","relative":"#4727","full":"gitlab-com/gl-infra/reliability#4727"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13324527,"iid":4720,"project_id":1304532,"title":"Decommission sidekiq-traces servers","description":"With the object storage migration complete, we can now decommission the `sidekiq-traces` servers and reintegrate their queues back into `besteffort`.","state":"closed","created_at":"2018-08-08T16:54:01.579Z","updated_at":"2019-05-24T13:39:47.129Z","closed_at":"2019-05-20T15:10:08.361Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Global:In Progress","cleanup"],"milestone":{"id":859879,"iid":19,"group_id":1112072,"title":"Dev \u0026 Ops Team 2019 June","description":"","state":"closed","created_at":"2019-04-29T02:51:21.585Z","updated_at":"2019-10-07T19:07:42.692Z","due_date":"2019-06-28","start_date":"2019-06-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/19"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4720","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4720","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4720/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4720/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4720","relative":"#4720","full":"gitlab-com/gl-infra/reliability#4720"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13297246,"iid":4671,"project_id":1304532,"title":"New Storage Servers","description":"We will need to create new storage servers soon. We are approaching the 60% mark on 17, 18, 19, and 20. This should perhaps obviously be done post migration.\n\n- [X] Build new storage servers (https://gitlab.com/gitlab-com/gitlab-com-infrastructure/merge_requests/497)\n- [x] Add storage servers to chef-repo so that they are mounted by NFS\n- [x] Ensure the servers are set up in `gitlab.rb` to be storage options\n- [x] Attempt to migrate a test project to the new servers\n- [x] Update the default repository locations in the GitLab admin interface.","state":"closed","created_at":"2018-08-07T16:35:14.325Z","updated_at":"2018-09-09T12:49:03.259Z","closed_at":"2018-09-05T18:45:15.913Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["storage"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4671","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4671","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4671/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4671/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4671","relative":"#4671","full":"gitlab-com/gl-infra/reliability#4671"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13226598,"iid":4657,"project_id":1304532,"title":"Fix chef-client issues for 08-02 RC incident","description":"We have a lot of chef-clients stopped/stale or erroring from 8/2.  This issue is the tracking point to make sure they get back to a good state before aug 11.","state":"closed","created_at":"2018-08-04T14:13:27.235Z","updated_at":"2018-08-07T14:31:28.933Z","closed_at":"2018-08-07T14:31:28.898Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["oncall"],"milestone":null,"assignees":[],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-08-08","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4657","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4657","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4657/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4657/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4657","relative":"#4657","full":"gitlab-com/gl-infra/reliability#4657"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13217341,"iid":4651,"project_id":1304532,"title":"create alert and dashboard for sidekiq exceptions","description":"We currently have very little visibility into this and it would be nice to add this to our sidekiq stats dashboard.\n\n* azure - https://performance.gitlab.net/d/000000154/sidekiq-stats?refresh=5m\u0026orgId=1\n* gcp  - https://dashboards.gitlab.net/d/000000154/sidekiq-stats?refresh=5m\u0026orgId=1\n\nDuring the last failover rehearsal we saw a large number of exceptions we should alert on. https://dashboards.gitlab.net/d/l8ifheiik/geo-status?panelId=33\u0026fullscreen\u0026orgId=1\u0026from=1533223456362\u0026to=1533250079043","state":"closed","created_at":"2018-08-03T16:44:51.457Z","updated_at":"2018-10-06T19:43:58.511Z","closed_at":"2018-09-26T18:15:29.592Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["corrective action","moved 1","oncall"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4651","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4651","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4651/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4651/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4651","relative":"#4651","full":"gitlab-com/gl-infra/reliability#4651"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14000516,"iid":4933,"project_id":1304532,"title":"WAL-e wal-push should not overwrite existing data in S3","description":"I'm wondering if the wal-e `archive_command` overwrites existing WAL segments in S3 - we should make sure this doesn't happen (as per [docs](https://www.postgresql.org/docs/9.6/static/continuous-archiving.html), `archive_command` should fail in this situation):\n\n\u003e The archive command should generally be designed to refuse to overwrite any pre-existing archive file. This is an important safety \u003e feature to preserve the integrity of your archive in case of administrator error (such as sending the output of two different servers to the same archive directory).\n\n/cc @NikolayS","state":"closed","created_at":"2018-07-30T09:47:06.529Z","updated_at":"2018-12-19T11:11:25.930Z","closed_at":"2018-11-01T16:23:47.025Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4933","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4933","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4933/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4933/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4933","relative":"#4933","full":"gitlab-com/gl-infra/reliability#4933"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4,"epic":{"id":1053,"iid":4,"title":"Postgresql Backup \u0026 Recovery","url":"/groups/gitlab-com/gl-infra/-/epics/4","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":13305504,"iid":4715,"project_id":1304532,"title":"if any of the registry/api/web backends go unhealthy, the entire site goes down","description":"We have three load balancers that serve gitlab.com in GCP, https, git and http.\nThese three load balancers are serving traffic to haproxy VMs that have the following health checks that validate the health of their corresponding backends:\n\n```\nfrontend check_ssh\n    bind 0.0.0.0:8003\n    mode http\n    option splice-auto\n    acl no_be_srvs_ssh nbsrv(ssh) lt 1\n    monitor-uri /-/available-ssh\n    monitor fail if no_be_srvs_ssh\n\nfrontend check_http\n    bind 0.0.0.0:8001\n    mode http\n    option splice-auto\n    acl no_be_srvs_web nbsrv(web) lt 1\n    monitor-uri /-/available-http\n    monitor fail if no_be_srvs_web\n\nfrontend check_https\n    bind 0.0.0.0:8002\n    mode http\n    option splice-auto\n    acl no_be_srvs_web nbsrv(web) lt 1\n    acl no_be_srvs_api nbsrv(api) lt 1\n    acl no_be_srvs_reg nbsrv(registry) lt 1\n    monitor-uri /-/available-https\n    monitor fail if no_be_srvs_web || no_be_srvs_api || no_be_srvs_reg\n```\n\nthe last check means that if either web, api, or registry has zero healthy backend hosts we will cease to serve https traffic. \n\n\n* This configuration puts an unnecessary coupling between the registry and the rest of the site as since the registry is served from registry.gitlab.com we could have a dedicated load balancer for it.\n* git https traffic is routed to the git vms, we should probably move git https traffic to a different fleet or use the web fleet.","state":"closed","created_at":"2018-07-30T09:34:07.926Z","updated_at":"2019-07-08T20:01:30.938Z","closed_at":"2018-09-06T13:50:57.685Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Planning","Postmigration","Service::HAProxy","priority::2"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4715","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4715","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4715/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4715/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4715","relative":"#4715","full":"gitlab-com/gl-infra/reliability#4715"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":12876064,"iid":4603,"project_id":1304532,"title":"(canary) Creating Kubernetes Cluster - cannot fetch Google project billing status","description":"### Summary\n\nWhen creating a new Kubernetes Cluster, and I select a project from the \"Google Cloud Platform project\" field, the request to Google is blocked by CSP.\n\n### Steps to reproduce\n\n* Turn on canary with by setting the `gitlab_canary` cookie\n* Go to Operations, Kubernetes\n* Select \"Create new Cluster on GKE\"\n* select any project from the \"Google Cloud Platform project\" field\n\n### Example Project\n\nhttps://gitlab.com/tkuah/test_rails/clusters/new\n\n### What is the current *bug* behavior?\n\nThe \"Google Cloud Platform project\" field is stuck on \"Validating project billing status\" and cannot be selected anymore.\n\n### What is the expected *correct* behavior?\n\nWe successfully validate the project billing status, and the field shows the GCP project that was selected by the user.\n\n### Relevant logs and/or screenshots\n\nConsole shows the following error :\n\n```\nRefused to frame 'https://content-cloudbilling.googleapis.com/' because it violates the following Content Security Policy directive: \"frame-src 'self' https://www.google.com/recaptcha/ https://content.googleapis.com https://content-cloudresourcemanager.googleapis.com\".\n```\n\n![Screen_Shot_2018-07-17_at_11.11.39_AM](/uploads/b9221ae2e5369f906115d9701d7c0188/Screen_Shot_2018-07-17_at_11.11.39_AM.png)\n\nWith `gitlab_canary`, I receive the following header for https://gitlab.com/tkuah/test_rails/clusters/new :\n\n```\nContent-Security-Policy: object-src 'none'; worker-src https://assets.gitlab-static.net https://gl-canary.global.ssl.fastly.net https://gitlab.com blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://assets.gitlab-static.net https://gl-canary.global.ssl.fastly.net https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/ https://apis.google.com; style-src 'self' 'unsafe-inline' https://assets.gitlab-static.net https://gl-canary.global.ssl.fastly.net; img-src * data: blob:; frame-src 'self' https://www.google.com/recaptcha/ https://content.googleapis.com https://content-cloudresourcemanager.googleapis.com; frame-ancestors 'self'; connect-src 'self' https://assets.gitlab-static.net https://gl-canary.global.ssl.fastly.net wss://gitlab.com https://sentry.gitlap.com https://customers.gitlab.com; report-uri https://sentry-infra.gitlap.com/api/3/csp-report/?sentry_key=a664fdde83424b43a991f25fa7c78987\n\n```\n\nWithout `gitlab_canary` :\n\n```\nContent-Security-Policy: object-src 'none'; worker-src https://assets.gitlab-static.net https://gitlab.com blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://assets.gitlab-static.net https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/ https://apis.google.com; style-src 'self' 'unsafe-inline' https://assets.gitlab-static.net; img-src * data: blob:; frame-src 'self' https://www.google.com/recaptcha/ https://content.googleapis.com https://content-compute.googleapis.com https://content-cloudbilling.googleapis.com https://content-cloudresourcemanager.googleapis.com; frame-ancestors 'self'; connect-src 'self' https://assets.gitlab-static.net wss://gitlab.com https://sentry.gitlap.com https://customers.gitlab.com; report-uri https://sentry-infra.gitlap.com/api/3/csp-report/?sentry_key=a664fdde83424b43a991f25fa7c78987\n\n```\n\nSo somehow, the canary servers are missing `https://content-cloudbilling.googleapis.com` from the CSP header\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Possible fixes\n\nAdd the above src to the `frame-src` CSP directive.","state":"closed","created_at":"2018-07-16T23:26:31.396Z","updated_at":"2018-09-10T22:11:58.212Z","closed_at":"2018-09-10T21:46:30.810Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":[],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4603","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4603","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4603/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4603/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4603","relative":"#4603","full":"gitlab-com/gl-infra/reliability#4603"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305476,"iid":4710,"project_id":1304532,"title":"Migrate registry S3 bucket to GCS","description":"As part of https://gitlab.com/gitlab-com/migration/issues/635, we should also standardize the registry bucket name. This is likely more work than https://gitlab.com/gitlab-com/migration/issues/635 and thus should be done migration~4038690 . However, the bucket itself will be added in https://gitlab.com/gitlab-com/gitlab-com-infrastructure/merge_requests/440.","state":"closed","created_at":"2018-07-08T17:05:05.148Z","updated_at":"2020-07-14T22:59:01.632Z","closed_at":"2018-10-27T19:59:35.642Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Cloud Spend","Object Storage","Postmigration","moved 1","priority::3"],"milestone":{"id":664723,"iid":53,"project_id":1304532,"title":"2018-11-03 Completed","description":"","state":"closed","created_at":"2018-10-02T20:04:40.623Z","updated_at":"2018-11-07T14:51:06.818Z","due_date":"2018-11-03","start_date":"2018-10-21","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/53"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4710","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4710","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4710/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4710/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4710","relative":"#4710","full":"gitlab-com/gl-infra/reliability#4710"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":12598698,"iid":4542,"project_id":1304532,"title":"Access request - AWS keys for billing info for Meltano","description":"In order to help Meltano with billing analysis we're looking to set up a billing AWS IAM profile:\n\nSee:  https://gitlab.com/meltano/meltano/issues/225 which in turn helps:  https://gitlab.com/meltano/looker/issues/53\n\ncc @jschatz1","state":"closed","created_at":"2018-07-06T15:11:29.331Z","updated_at":"2018-07-10T23:45:43.875Z","closed_at":"2018-07-10T23:45:43.826Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["access request","toil"],"milestone":null,"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-07-09","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4542","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4542","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4542/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4542/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4542","relative":"#4542","full":"gitlab-com/gl-infra/reliability#4542"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13304968,"iid":4675,"project_id":1304532,"title":"Architecture diagrams to aid in systematic debugging","description":"Per 2018-07-05 failover\n\nThe debugging of https://gitlab.com/gitlab-com/migration/issues/642 was made unnecessarily difficult due to us having to puzzle out the exact CDN setup. We should ensure up-to-date architecture diagrams exist for at least gprd, documenting the full route taken for all variations of all presented TCP services, so we can debug these things systematically when they come up.\n\n/cc @dawsmith @jarv","state":"closed","created_at":"2018-07-06T11:14:16.916Z","updated_at":"2018-08-28T08:46:55.608Z","closed_at":"2018-08-22T09:03:16.669Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Postmigration","documentation"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4675","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4675","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4675/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4675/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4675","relative":"#4675","full":"gitlab-com/gl-infra/reliability#4675"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":12530971,"iid":4519,"project_id":1304532,"title":"Chef access for andrewn","description":"Related to https://gitlab.com/gitlab-com/infrastructure/issues/4502\n\nWhile I now have production access, I would ideally like chef access too. While I don't plan to make changes, having access allows me to run commands like \n\n```\nknife node show \u003chost\u003e\n```","state":"closed","created_at":"2018-07-03T15:40:13.825Z","updated_at":"2018-07-09T19:01:20.017Z","closed_at":"2018-07-09T19:01:19.950Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["access request"],"milestone":null,"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4519","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4519","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4519/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4519/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4519","relative":"#4519","full":"gitlab-com/gl-infra/reliability#4519"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":12511484,"iid":4510,"project_id":1304532,"title":"Set up meltano domains for GitLab Pages","description":"We'd like to make use of the meltano domains list via GitLab Pages. The project and linked issue where we would set up pages in is: https://gitlab.com/meltano/meltano.com/issues/1\n\nTo set this up, we would need to set up DNS records and then SSL certificates.","state":"closed","created_at":"2018-07-02T21:06:22.369Z","updated_at":"2018-09-09T12:51:25.058Z","closed_at":"2018-09-07T17:27:32.338Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["unscheduled"],"milestone":{"id":637228,"iid":48,"project_id":1304532,"title":"2018-09-22 Completed Milestone","description":"","state":"closed","created_at":"2018-09-04T16:15:06.230Z","updated_at":"2018-10-01T19:15:08.297Z","due_date":"2018-09-22","start_date":"2018-09-09","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/48"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":926632,"username":"joshlambert","name":"Joshua Lambert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a0bdc5209b11e9c0953f80234dcb4ffb?s=80\u0026d=identicon","web_url":"https://gitlab.com/joshlambert"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4510","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4510","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4510/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4510/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4510","relative":"#4510","full":"gitlab-com/gl-infra/reliability#4510"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13304976,"iid":4676,"project_id":1304532,"title":"Decide on what endpoint to use for the HAProxy health check","description":"* In azure we use `/` which goes all the way to rails and serves a 302.\n* In GCP we use `/-/liveness` which also hits the database.\n\nThere was some discussion in https://gitlab.com/gitlab-com/infrastructure/issues/4481 on whether this is a good idea and that maybe we should use a health check that does not depend on the database.","state":"closed","created_at":"2018-06-29T08:55:21.311Z","updated_at":"2018-08-30T18:59:01.721Z","closed_at":"2018-08-29T20:07:26.265Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Postmigration","Service::HAProxy","blocked","blocked"],"milestone":null,"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4676","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4676","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4676/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4676/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4676","relative":"#4676","full":"gitlab-com/gl-infra/reliability#4676"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13304997,"iid":4678,"project_id":1304532,"title":"Re-enable archiving mode on postgres nodes in GCP","description":"They are being disabled in https://dev.gitlab.org/cookbooks/chef-repo/merge_requests/2207.\n\nWhy? Quoting [Slack](https://gitlab.slack.com/archives/C9W4C89LY/p1530204627000477):\n\n\u003e My concern is, if we used a single bucket for Azure and GCP, failover demos would push WAL segments with different timeline, and I think that would confuse WAL-E when we failback because it constantly looks for newer timelines to fetch segments for\n\nAfter we failover permanently, we should re-enable them.","state":"closed","created_at":"2018-06-28T18:48:41.549Z","updated_at":"2018-08-28T08:46:55.870Z","closed_at":"2018-08-14T17:34:50.824Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Database [pl]","Postmigration"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4678","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4678","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4678/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4678/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4678","relative":"#4678","full":"gitlab-com/gl-infra/reliability#4678"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305245,"iid":4686,"project_id":1304532,"title":"Fix reverse DNS for GCP IPs","description":"Noted in the 2018-06-21 failover\n\nVarious IPs on the GCP side are missing appropriate reverse DNS.\n\nFor instance, `gprd.gitlab.com` resolves to `35.231.145.151`, which has reverse DNS of `151.145.231.35.bc.googleusercontent.com`\n\nSince post-failover, we want `gitlab.com` to point to this IP, we should ensure the reverse DNS is set to `gitlab.com`\n\nWe don't send email via these IPs, so it's not super-important, but I do think it's desirable.\n\nOther IPs that matter will include the ones that `registry.gprd.gitlab.com`, `gprd.gitlab.io` and `altssh.gprd.gitlab.com` (doesn't exist yet) will resolve to. Perhaps I'm missing others as well.\n\nWe should consider setting appropriate rDNS for IPs in gstg as well","state":"closed","created_at":"2018-06-25T15:17:58.234Z","updated_at":"2021-08-18T06:04:07.832Z","closed_at":"2021-08-18T04:15:01.107Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Postmigration","network","priority::2"],"milestone":null,"assignees":[],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4686","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4686","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4686/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4686/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4686","relative":"#4686","full":"gitlab-com/gl-infra/reliability#4686"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":12301013,"iid":4452,"project_id":1304532,"title":"Improve the download speed from packages.gitlab.com globally","description":"Currently it takes 2 hours in the morning or 5 hours in the afternoon to install GitLab CE/EE from Shanghai, China using the official instructions by connecting to packages.gitlab.com. Would need to get this improved significantly for better experiences for users and customers in China.\n\n/cc @malessio @jimt2061 @northrup","state":"closed","created_at":"2018-06-25T00:47:52.776Z","updated_at":"2019-12-06T21:46:45.885Z","closed_at":"2019-07-08T18:57:55.030Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Service::PackageCloud","team::Reliability","workflow-infra::Done"],"milestone":{"id":918500,"iid":31,"group_id":1112072,"title":"CI/CD \u0026 Enablement Team July 2019","description":"","state":"closed","created_at":"2019-06-28T23:28:40.137Z","updated_at":"2019-08-06T13:08:46.604Z","due_date":"2019-07-31","start_date":"2019-07-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/31"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":915692,"username":"xiaogang_gitlab","name":"Xiaogang Wen","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/915692/avatar.png","web_url":"https://gitlab.com/xiaogang_gitlab"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":37,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4452","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4452","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4452/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4452/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4452","relative":"#4452","full":"gitlab-com/gl-infra/reliability#4452"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":14000523,"iid":4940,"project_id":1304532,"title":"Alert if database backup cannot be restored","description":"We have full database backup restore automation. Let's add an alert to the process that lets us know if the restore failed for some reason.\n\nhttps://gitlab.com/gitlab-restore/postgres-01.db.prd.gitlab.com\n\n/cc @ahanselka","state":"closed","created_at":"2018-06-21T15:31:06.971Z","updated_at":"2018-10-06T19:45:25.015Z","closed_at":"2018-09-26T11:30:08.104Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","OKR-DB","backup"],"milestone":{"id":641036,"iid":49,"project_id":1304532,"title":"2018-10-06 Completed Milestone","description":"","state":"closed","created_at":"2018-09-09T12:50:36.119Z","updated_at":"2018-10-15T19:37:35.915Z","due_date":"2018-10-06","start_date":"2018-09-23","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/49"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4940","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4940","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4940/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4940/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4940","relative":"#4940","full":"gitlab-com/gl-infra/reliability#4940"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":17,"epic":{"id":743,"iid":17,"title":"Database Reliability: Survival \u0026 Safety","url":"/groups/gitlab-com/-/epics/17","group_id":6543,"human_readable_end_date":"Oct 6, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":13305493,"iid":4713,"project_id":1304532,"title":"repmgr should be added to centralized logging","description":"We currently do not have these included and they probably should be. \n\nExample:\n```\n2018-04-26_02:31:41.69640 [2018-04-26 02:31:41] [INFO] connecting to database 'host=postgres-01.db.prd.gitlab.com port=5432 user=gitlab_repmgr dbname=gitlab_repmgr'\n2018-04-26_02:31:41.69733 [2018-04-26 02:31:41] [ERROR] connection to database failed: could not connect to server: Connection refused\n2018-04-26_02:31:41.69749 \tIs the server running on host \"postgres-01.db.prd.gitlab.com\" (127.0.0.2) and accepting\n2018-04-26_02:31:41.69756 \tTCP/IP connections on port 5432?\n2018-04-26_02:31:41.69764\n2018-04-26_02:31:42.70236 [2018-04-26 02:31:42] [INFO] connecting to database 'host=postgres-01.db.prd.gitlab.com port=5432 user=gitlab_repmgr dbname=gitlab_repmgr'\n2018-04-26_02:31:42.70289 [2018-04-26 02:31:42] [ERROR] connection to database failed: could not connect to server: Connection refused\n2018-04-26_02:31:42.70303 \tIs the server running on host \"postgres-01.db.prd.gitlab.com\" (127.0.0.2) and accepting\n2018-04-26_02:31:42.70310 \tTCP/IP connections on port 5432?\n2018-04-26_02:31:42.70316\n```","state":"closed","created_at":"2018-06-20T10:34:18.476Z","updated_at":"2019-07-08T20:01:09.971Z","closed_at":"2018-08-16T15:32:12.747Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Database [pl]","Postmigration","logging","priority::2"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4713","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4713","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4713/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4713/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4713","relative":"#4713","full":"gitlab-com/gl-infra/reliability#4713"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305489,"iid":4712,"project_id":1304532,"title":"consul client and consul cluster should be added to centralized logging","description":"We currently do not have these included and they probably should be. I think we can simply add these to the existing postgres index.\n\n## Consul client\n\nUnfortunately these logs are unstructured:\n\n```\n/var/log/gitlab/consul/current\n\nexample:\n2018-06-20_00:07:26.61126     2018/06/20 00:07:26 [INFO] serf: EventMemberFailed: postgres-02.db.prd.gitlab.com 10.66.1.102\n2018-06-20_00:07:27.59971     2018/06/20 00:07:27 [ERR] agent: Failed to invoke watch handler '/var/opt/gitlab/consul/scripts/failover_pgbouncer': exit status 4\n2018-06-20_00:07:32.90036     2018/06/20 00:07:32 [INFO] serf: EventMemberJoin: postgres-02.db.prd.gitlab.com 10.66.1.102\n2018-06-20_00:09:22.54212     2018/06/20 00:09:22 [ERR] agent: Failed to invoke watch handler '/var/opt/gitlab/consul/scripts/failover_\n\n```\n\n## Consul server\n\nLogged using the systemd journal, we don't currently have a fluentd plugin for this so it would need to be added.\nhttps://github.com/reevoo/fluent-plugin-systemd","state":"closed","created_at":"2018-06-20T10:09:11.358Z","updated_at":"2019-07-08T20:01:30.748Z","closed_at":"2018-08-16T15:30:12.077Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Postmigration","logging","priority::2"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4712","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4712","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4712/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4712/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4712","relative":"#4712","full":"gitlab-com/gl-infra/reliability#4712"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":12112496,"iid":4416,"project_id":1304532,"title":"Monitor consul members","description":"We've had instances of postgres secondaries missing from consul in https://gitlab.com/gitlab-com/infrastructure/issues/4415 and https://gitlab.com/gitlab-com/infrastructure/issues/4330.\n\nIt would be useful to have prometheus check and alert on e.g. the member count for \"postgres\", so we can detect that situation automatically.\n\nThere is a consul exporter available: https://github.com/prometheus/consul_exporter","state":"closed","created_at":"2018-06-18T09:46:40.473Z","updated_at":"2018-08-28T08:50:04.062Z","closed_at":"2018-08-20T10:34:02.093Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["unscheduled"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4416","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4416","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4416/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4416/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4416","relative":"#4416","full":"gitlab-com/gl-infra/reliability#4416"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":12069327,"iid":4411,"project_id":1304532,"title":"Add centralized logging to prometheus and grafana hosts","description":"When troubleshooting https://gitlab.com/gitlab-com/infrastructure/issues/4410 it was difficult to determine what was going on because of the amount of logging which was rotated off the host quickly.\n\nWe should add all of the Prometheus/Thanos, and Grafana hosts to centralized logging. We should also add some troubleshooting steps into the `runbooks` project repository. See https://gitlab.com/gitlab-com/runbooks/blob/master/howto/monitoring-overview.md.\n\n* [x]  Prometheus\n* [x]  Thanos components (compact, store, query)\n* [x]  Grafana\n* [x]  Alertmanager\n* [x]  Pushgateway","state":"closed","created_at":"2018-06-16T06:42:39.960Z","updated_at":"2021-06-24T08:09:30.063Z","closed_at":"2019-10-17T13:03:32.607Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability-reliability","auto updated","corrective action","gitlab.com","logging","workflow-infra::Done"],"milestone":{"id":1006849,"iid":45,"group_id":1112072,"title":"W41 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 07 Oct \t| T 08 Oct \t| W 09 Oct \t| Th 10 Oct  | F 11 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| On-call     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -   \t| On-call    | On-call\r\n| @cmiskell   \t| Moving   \t| Moving    | Moving  \t| Moving     | Moving  \t\r\n| @hphilipps  \t| Vacation \t| Vacation  | Vacation  | Vacation   | Vacation         \t\r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW41 working days: 16\r\n\r\n|             \t| M 14 Oct \t| T 15 Oct \t| W 16 Oct \t| Th 17 Oct  | F 18 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| On-call  \t| On-call  \t| -      \t| -          | -   \r\n| @cmiskell   \t| -      \t| -        \t| -        \t| -          | Moving\r\n| @hphilipps  \t| Ill        \t| Ill        \t| Ill        \t| -          | - \r\n| @msmiley    \t| -        \t| On-call   | On-call  \t| On-call    | On-call\r\n\r\nW42 working days: 21\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-18T18:11:09.033Z","updated_at":"2019-11-12T23:45:39.396Z","due_date":"2019-10-20","start_date":"2019-10-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/45"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4411","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4411","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4411/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4411/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4411","relative":"#4411","full":"gitlab-com/gl-infra/reliability#4411"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13498116,"iid":4790,"project_id":1304532,"title":"Create public dashboard service","description":"To replace the old `monitor.gitlab.net`, we need a new `monitor.gprd.gitlab.net` that syncs dashboards from `dashboards.gitlab.net`.","state":"closed","created_at":"2018-06-14T16:47:08.679Z","updated_at":"2018-08-21T08:57:19.089Z","closed_at":"2018-08-21T08:57:19.072Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":[],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":30,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4790","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4790","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4790/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4790/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4790","relative":"#4790","full":"gitlab-com/gl-infra/reliability#4790"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305512,"iid":4716,"project_id":1304532,"title":"Migrate the sidekiq-workers dashboard to Prometheus","description":"Currently the sidekiq-workers dashboard relies on InfluxDB. Since we are strategically moving from Influxdb to Prometheus, and our current plans are to leave Influxdb behind in Azure, we need to rebuild this dashboard using metrics from Prometheus.\n\n@smcgivern has pointed out that this is an important dashboard which is frequently used, so it's migration should be done migration~4038689 \n\n**References**\n\n* https://performance.gitlab.net/dashboard/db/sidekiq-workers \n* [issues](https://gitlab.com/groups/gitlab-org/-/issues?search=https://performance.gitlab.net/dashboard/db/sidekiq-workers)\n* https://gitlab.com/gitlab-com/migration/issues/291\n* https://gitlab.com/gitlab-com/infrastructure/issues/1962","state":"closed","created_at":"2018-06-13T09:11:46.882Z","updated_at":"2021-01-27T22:29:17.103Z","closed_at":"2021-01-27T22:29:17.023Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Postmigration","priority::2"],"milestone":null,"assignees":[],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4716","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4716","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4716/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4716/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4716","relative":"#4716","full":"gitlab-com/gl-infra/reliability#4716"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305231,"iid":4683,"project_id":1304532,"title":"Migrate the rails-controllers dashboard to Prometheus","description":"Currently the rails-controllers dashboard relies on InfluxDB. Since we are strategically moving from Influxdb to Prometheus, and our current plans are to leave Influxdb behind in Azure, we need to rebuild this dashboard using metrics from Prometheus.\n\n@smcgivern has pointed out that this is an important dashboard which is frequently used, so it's migration should be done migration~4038689 \n\n**References**\n\n* https://performance.gitlab.net/dashboard/db/rails-controllers \n* [issues](https://gitlab.com/groups/gitlab-org/-/issues?search=https://performance.gitlab.net/dashboard/db/rails-controllers)\n* https://gitlab.com/gitlab-com/migration/issues/291\n* https://gitlab.com/gitlab-com/infrastructure/issues/1962","state":"closed","created_at":"2018-06-13T09:10:08.280Z","updated_at":"2021-03-05T00:26:07.266Z","closed_at":"2021-03-05T00:26:07.192Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Postmigration"],"milestone":null,"assignees":[],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4683","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4683","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4683/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4683/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4683","relative":"#4683","full":"gitlab-com/gl-infra/reliability#4683"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305468,"iid":4709,"project_id":1304532,"title":"Migrate the grape-endpoints dashboard to Prometheus","description":"Currently the Grape Endpoints dashboard relies on InfluxDB. Since we are strategically moving from Influxdb to Prometheus, and our current plans are to leave Influxdb behind in Azure, we need to rebuild this dashboard using metrics from Prometheus.\n\n@smcgivern has pointed out that this is an important dashboard which is frequently used, so it's migration should be done migration~4038689 \n\n**References**\n\n* https://performance.gitlab.net/dashboard/db/grape-endpoints \n* [issues](https://gitlab.com/groups/gitlab-org/-/issues?search=https://performance.gitlab.net/dashboard/db/grape-endpoints)\n* https://gitlab.com/gitlab-com/migration/issues/291\n* https://gitlab.com/gitlab-com/infrastructure/issues/1962","state":"closed","created_at":"2018-06-13T09:09:20.823Z","updated_at":"2021-01-27T22:47:12.077Z","closed_at":"2021-01-27T22:29:09.539Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Postmigration"],"milestone":null,"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4709","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4709/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4709/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4709","relative":"#4709","full":"gitlab-com/gl-infra/reliability#4709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11619150,"iid":4342,"project_id":1304532,"title":"Make sure GCP sizing is updated with changes done in Azure week of 6/3","description":"We should go back through the items we had done in https://gitlab.com/gitlab-com/infrastructure/issues/4314 and make sure we scale up GCP hosts similar to what we had done in Azure as needed.\n\n* [ ] API nodes\n* [ ] Sidekiq workers\n* [ ] Worker chef roles for sidekiq queues\n* [ ] Any further tuning of NFS nodes\n* [ ] Pgbouncer changes if any\n* [ ] Prometheus?\n\ncc @andrewn ","state":"closed","created_at":"2018-06-05T23:33:01.431Z","updated_at":"2018-06-06T10:00:56.412Z","closed_at":"2018-06-06T10:00:56.257Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":[],"milestone":null,"assignees":[],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-06-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4342","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4342","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4342/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4342/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4342","relative":"#4342","full":"gitlab-com/gl-infra/reliability#4342"},"severity":"UNKNOWN","moved_to_id":11662770,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11302970,"iid":4328,"project_id":1304532,"title":"Bastion Access to gprd","description":"Reference: https://docs.google.com/spreadsheets/d/1O6BrllYss6lnKyguK5dTrjlqsaZyFT0oqOtI_9_e-hE/edit\n\nReference: https://gitlab.com/gitlab-com/migration/issues/459\n\nIn order to conduct the ~\"GCP Migration\" production and failover rehearsals, please grant the following GitLab team members **Bastion** access to `gprd`\n\n- [ ] @meks\n- [ ] @rymai\n- [ ] @bikebilly\n- [ ] @DylanGriffith\n- [ ] @fjsanpedro\n- [ ] @felipe_artur\n- [ ] @mkozono\n- [ ] @jprovaznik\n\nHow to access Bastions: https://gitlab.com/gitlab-com/runbooks/blob/master/howto/gprd-bastions.md","state":"closed","created_at":"2018-06-04T16:53:57.235Z","updated_at":"2018-06-07T12:53:13.134Z","closed_at":"2018-06-07T12:29:34.908Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4328","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4328","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4328/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4328/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4328","relative":"#4328","full":"gitlab-com/gl-infra/reliability#4328"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11302840,"iid":4327,"project_id":1304532,"title":"Bastion Access to gstg","description":"Reference: https://docs.google.com/spreadsheets/d/1O6BrllYss6lnKyguK5dTrjlqsaZyFT0oqOtI_9_e-hE/edit\n\nReference: https://gitlab.com/gitlab-com/migration/issues/459\n\nIn order to conduct the ~\"GCP Migration\" production and failover rehearsals, please grant the following GitLab team members **Bastion** access to `gstg`\n\n- [ ] @meks\n- [ ] @rymai\n- [ ] @bikebilly\n- [ ] @DylanGriffith\n- [ ] @fjsanpedro\n- [ ] @felipe_artur\n- [ ] @jprovaznik\n\nHow to access Bastions: https://gitlab.com/gitlab-com/runbooks/blob/master/howto/gstg-bastions.md","state":"closed","created_at":"2018-06-04T16:52:30.591Z","updated_at":"2018-06-07T12:53:13.285Z","closed_at":"2018-06-07T12:28:26.949Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4327","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4327","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4327/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4327/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4327","relative":"#4327","full":"gitlab-com/gl-infra/reliability#4327"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11302497,"iid":4326,"project_id":1304532,"title":"SSH, Shell Access in Production","description":"Reference: https://docs.google.com/spreadsheets/d/1O6BrllYss6lnKyguK5dTrjlqsaZyFT0oqOtI_9_e-hE/edit\n\nReference: https://gitlab.com/gitlab-com/migration/issues/459\n\nIn order to conduct the ~\"GCP Migration\" production and failover rehearsals, please grant the following GitLab team members **SSH and Shell** access in Production\n\n- [ ] @digitalmoksha\n- [ ] @nick.thomas","state":"closed","created_at":"2018-06-04T16:44:42.157Z","updated_at":"2018-06-07T12:53:13.399Z","closed_at":"2018-06-06T12:20:52.176Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4326","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4326","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4326/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4326/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4326","relative":"#4326","full":"gitlab-com/gl-infra/reliability#4326"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11302385,"iid":4325,"project_id":1304532,"title":"SSH, Shell Access to Staging","description":"Reference: https://docs.google.com/spreadsheets/d/1O6BrllYss6lnKyguK5dTrjlqsaZyFT0oqOtI_9_e-hE/edit\n\nReference: https://gitlab.com/gitlab-com/migration/issues/459\n\nIn order to conduct the ~\"GCP Migration\" production and failover rehearsals, please grant the following GitLab team members **SSH and Shell** access on Staging\n\n- [ ] @digitalmoksha","state":"closed","created_at":"2018-06-04T16:42:47.788Z","updated_at":"2018-06-07T12:53:13.573Z","closed_at":"2018-06-06T12:21:07.400Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4325","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4325","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4325/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4325/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4325","relative":"#4325","full":"gitlab-com/gl-infra/reliability#4325"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11302358,"iid":4324,"project_id":1304532,"title":"Rails Access to Production","description":"Reference: https://docs.google.com/spreadsheets/d/1O6BrllYss6lnKyguK5dTrjlqsaZyFT0oqOtI_9_e-hE/edit\n\nReference: https://gitlab.com/gitlab-com/migration/issues/459\n\nIn order to conduct the ~\"GCP Migration\" production and failover rehearsals, please grant the following GitLab team members **GitLab Rails** access on to Production\n\n- [ ] @digitalmoksha\n\n\nPlease note that this also requires https://gitlab.com/gitlab-com/infrastructure/issues/4316 to be completed.\n\nhttps://gitlab.com/gitlab-com/infrastructure/issues/4316","state":"closed","created_at":"2018-06-04T16:40:57.803Z","updated_at":"2018-06-07T17:55:14.589Z","closed_at":"2018-06-07T17:55:14.551Z","closed_by":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4324","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4324","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4324/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4324/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4324","relative":"#4324","full":"gitlab-com/gl-infra/reliability#4324"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11302305,"iid":4323,"project_id":1304532,"title":"GitLab Admin Access in Production","description":"Reference: https://docs.google.com/spreadsheets/d/1O6BrllYss6lnKyguK5dTrjlqsaZyFT0oqOtI_9_e-hE/edit\n\nReference: https://gitlab.com/gitlab-com/migration/issues/459\n\nIn order to conduct the ~\"GCP Migration\" production and failover rehearsals, please grant the following GitLab team members **GitLab Admin** access on https://gitlab.com\n\n- [x] @andrewn\n- [x] @digitalmoksha\n- [ ] @meks","state":"closed","created_at":"2018-06-04T16:38:28.030Z","updated_at":"2018-06-07T12:52:39.399Z","closed_at":"2018-06-07T12:52:38.995Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4323","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4323","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4323/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4323/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4323","relative":"#4323","full":"gitlab-com/gl-infra/reliability#4323"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11302265,"iid":4322,"project_id":1304532,"title":"GitLab Admin Access on Staging","description":"Reference: https://docs.google.com/spreadsheets/d/1O6BrllYss6lnKyguK5dTrjlqsaZyFT0oqOtI_9_e-hE/edit\n\nReference: https://gitlab.com/gitlab-com/migration/issues/459\n\nIn order to conduct the ~\"GCP Migration\" production and failover rehearsals, please grant the following GitLab team members **GitLab Admin** access on https://staging.gitlab.com\n\n- [x] @andrewn \n- [ ] @meks \n- [x] @rymai \n- [x] @dawsmith","state":"closed","created_at":"2018-06-04T16:36:57.510Z","updated_at":"2018-06-08T12:51:34.494Z","closed_at":"2018-06-08T12:51:34.433Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4322","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4322","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4322/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4322/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4322","relative":"#4322","full":"gitlab-com/gl-infra/reliability#4322"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":11283994,"iid":4316,"project_id":1304532,"title":"Allow rails-console, db-console and nfs users access to the Bastion hosts","description":"Proposed fix in https://dev.gitlab.org/cookbooks/chef-repo/merge_requests/2054 ....\n\nCurrently users with `rails-console`, `db-console` and `nfs` access are not allowed onto the bastion hosts, so are not able to access the hosts that they previously could.\n\nIt would be good if their previous access was restored.","state":"closed","created_at":"2018-06-04T11:04:34.669Z","updated_at":"2018-06-07T12:53:14.089Z","closed_at":"2018-06-05T15:07:55.595Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["GCP Migration","access request","oncall"],"milestone":null,"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4316","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4316","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4316/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4316/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4316","relative":"#4316","full":"gitlab-com/gl-infra/reliability#4316"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13676071,"iid":4824,"project_id":1304532,"title":"GCP Security Review Followup: Firewall Rules By Role and Subnet","description":"Review the communication between VPC and subnets (currently organized by role) to better catalog active connections in the production environment and recommend additional configuration, firewall rules, etc.","state":"closed","created_at":"2018-05-31T18:57:36.005Z","updated_at":"2018-09-05T17:29:35.813Z","closed_at":"2018-09-05T17:29:35.781Z","closed_by":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"labels":["Postmigration"],"milestone":{"id":629184,"iid":47,"project_id":1304532,"title":"2018-09-08 Completed Milestone","description":"","state":"closed","created_at":"2018-08-24T09:10:56.034Z","updated_at":"2018-09-21T22:56:29.019Z","due_date":"2018-09-08","start_date":"2018-08-26","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/47"},"assignees":[{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4824","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4824","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4824/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4824/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4824","relative":"#4824","full":"gitlab-com/gl-infra/reliability#4824"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305352,"iid":4693,"project_id":1304532,"title":"Update documentation about runner configuration for GCP","description":"# Summary\n\nThe current documentation for the production runner configuration is out of date and should be updated to reflect additions and changes for the GCP environments.\n\n# Links\n\n* https://dev.gitlab.org/cookbooks/chef-repo/blob/master/doc/shared-and-specific-runners.md","state":"closed","created_at":"2018-05-31T17:42:50.745Z","updated_at":"2021-01-04T16:58:12.148Z","closed_at":"2021-01-04T16:58:12.078Z","closed_by":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"labels":["Postmigration","documentation","priority::3"],"milestone":null,"assignees":[],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4693","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4693","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4693/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4693/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4693","relative":"#4693","full":"gitlab-com/gl-infra/reliability#4693"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305367,"iid":4695,"project_id":1304532,"title":"Remove`ci.gitlab.com` from haproxy","description":"We no longer need ssl configuration for ci.gitlab.com, this can be removed from the haproxy cookbook.\n\n\nOriginal description:\n\nAccording to @jarv, our HAproxy configuration for GitLab.com includes a section for the domain name `ci.gitlab.com`\n\nThis has no counterpart in gprd and no entry in the DNS.\n\nDoes it require any action for the migration~2977716 or can we assume it's obsolete and remove the HAProxy configuration currently on GitLab.com ?\n\n/cc @jarv","state":"closed","created_at":"2018-05-29T17:45:20.137Z","updated_at":"2018-08-25T15:52:13.049Z","closed_at":"2018-08-25T15:52:12.992Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["Postmigration","Service::HAProxy"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":5,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4695","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4695","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4695/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4695/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4695","relative":"#4695","full":"gitlab-com/gl-infra/reliability#4695"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305360,"iid":4694,"project_id":1304532,"title":"Set up IMAP Prometheus exporter for monitoring Service Desk","description":"Right now we are blind as to whether mail_room is doing anything for Service Desk or reply-by-email.\n\nA quick thing we could do to improve this is to run an IMAP Prometheus Exporter, such as https://github.com/camptocamp/imap-mailbox-exporter.\nWe'd need to fork it to export the `Unseen` messages in https://godoc.org/github.com/mxk/go-imap/imap#MailboxStatus, but that shouldn't be hard.\n\nAt the minimum, I might just run a local exporter and watch it during the GCP failover.","state":"closed","created_at":"2018-05-23T20:13:48.917Z","updated_at":"2019-07-08T20:01:29.151Z","closed_at":"2018-09-03T09:28:14.713Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Postmigration","priority::2"],"milestone":null,"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4694","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4694","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4694/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4694/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4694","relative":"#4694","full":"gitlab-com/gl-infra/reliability#4694"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13362078,"iid":4734,"project_id":1304532,"title":"Clean up deleted repositories","description":"Similar to https://gitlab.com/gitlab-com/migration/issues/322, we have a lot of +deleted repositories on disk that we should clean up after the migration due to issues such as https://gitlab.com/gitlab-org/gitlab-ee/issues/6091.\n\nWe may want to build this into the product.","state":"closed","created_at":"2018-05-21T20:33:09.828Z","updated_at":"2018-08-16T16:57:33.017Z","closed_at":"2018-08-16T12:19:03.038Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Postmigration"],"milestone":{"id":614477,"iid":46,"project_id":1304532,"title":"2018-August Milestone 1","description":"2 week Milestone to contain work done post GCP migration.\r\n","state":"closed","created_at":"2018-08-06T19:49:50.244Z","updated_at":"2018-09-04T16:14:41.314Z","due_date":"2018-08-24","start_date":"2018-08-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/46"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4734","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4734","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4734/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4734/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4734","relative":"#4734","full":"gitlab-com/gl-infra/reliability#4734"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":10843587,"iid":4218,"project_id":1304532,"title":"Gemnasium service backup - restore test","description":"In #4203 it was brought to our attention that there will be a Gemnasium service that will be utilizing the GCP SQL product and backups. It was determined this was an acceptable backup solution, but we need to test restores.","state":"closed","created_at":"2018-05-15T17:09:58.846Z","updated_at":"2019-02-04T21:40:07.532Z","closed_at":"2019-01-30T13:09:13.965Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["auto updated","backup","gemnasium","moved 2","priority::3"],"milestone":{"id":713047,"iid":57,"project_id":1304532,"title":"2018-12-30 Completed","description":"","state":"closed","created_at":"2018-11-17T17:50:24.811Z","updated_at":"2019-01-02T14:36:41.786Z","due_date":"2018-12-29","start_date":"2018-12-16","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/57"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4218","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4218","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4218/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4218/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4218","relative":"#4218","full":"gitlab-com/gl-infra/reliability#4218"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":13305319,"iid":4688,"project_id":1304532,"title":"Investigate why postgresql service shutdown on `postgres-01-db-gprd` and did not restart","description":"About four hours ago, postgres-01 went down and did not come back up for some reason:\n\n```\n# sudo gitlab-ctl status\nrun: consul: (pid 1857) 15370s; run: log: (pid 1850) 15370s\nrun: logrotate: (pid 28186) 969s; run: log: (pid 1863) 15370s\ndown: postgresql: 15370s; run: log: (pid 1858) 15370s\nrun: remote-syslog: (pid 1826) 15370s; run: log: (pid 1825) 15370s\ndown: repmgrd: 1s, normally up, want up; run: log: (pid 1871) 15370s\n```\n\nManually starting again seems to work. I didn't see anything in the log that suggested why it didn't come up automatically.","state":"closed","created_at":"2018-05-13T14:00:38.263Z","updated_at":"2019-07-08T20:01:06.464Z","closed_at":"2018-10-10T16:20:18.107Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","Postmigration","priority::2"],"milestone":null,"assignees":[],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":null,"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4688","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4688","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4688/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4688/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4688","relative":"#4688","full":"gitlab-com/gl-infra/reliability#4688"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":10641750,"iid":4161,"project_id":1304532,"title":"Sidekiq not running on staging.gitlab.com","description":"Noted by @toon (thanks!)\n\n![Screenshot_from_2018-05-03_14-09-50](/uploads/d00b8f946dcca7340eeb87d5cd1d325c/Screenshot_from_2018-05-03_14-09-50.png)\n\nThis blocks any attempt at a planned failover.","state":"closed","created_at":"2018-05-03T13:10:06.230Z","updated_at":"2018-05-08T07:00:38.007Z","closed_at":"2018-05-08T07:00:10.703Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["staging"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/4161","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/4161","notes":"https://gitlab.com/api/v4/projects/1304532/issues/4161/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/4161/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#4161","relative":"#4161","full":"gitlab-com/gl-infra/reliability#4161"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]