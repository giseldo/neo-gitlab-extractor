[{"id":16586793,"iid":5737,"project_id":1304532,"title":"Services running on the Patroni cluster need to have their limits matching omnibus","description":"gitlab-omnibus runs all of its services with [bumped limits](https://gitlab.com/gitlab-org/omnibus-gitlab/blob/2fc14ae20a136ebb2662383b8d9c97d5f9ff0e1e/config/templates/runit/runsvdir-start.erb#L20-37). We are using custom cookbooks to install pgbouncer and PostgreSQL on the Patroni cluster, so we need to have a way to apply the same limits these services.\n\nThings to take into consideration:\n* PostgreSQL is not managed by systemd or the likes, rather, it's spawned by Patroni so we may need to apply the limits to the Patroni service to be inherited by PostgreSQL.\n* Bumping such limits will likely need the services to be restarted, which can cause brief disruption of service, so careful planning is needed for production roll-out.\n\n~\"corrective action\"","state":"closed","created_at":"2018-12-11T22:57:31.591Z","updated_at":"2019-09-30T16:32:12.796Z","closed_at":"2019-09-30T16:28:54.724Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["auto updated","corrective action"],"milestone":{"id":995576,"iid":42,"group_id":1112072,"title":"Dev \u0026 Ops: 2019-09-09 - 2019-09-22","description":"","state":"closed","created_at":"2019-09-09T14:46:08.050Z","updated_at":"2019-09-23T09:43:07.078Z","due_date":"2019-09-22","start_date":"2019-09-09","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/42"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5737","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5737","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5737/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5737/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5737","relative":"#5737","full":"gitlab-com/gl-infra/reliability#5737"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16586751,"iid":5736,"project_id":1304532,"title":"pgbouncer mtail doesn't catch some errors","description":"After the Patroni migration, we started seeing this error in the logs: \"ERROR accept() failed: Too many open files\". It wasn't caught by [mtail regexp](https://gitlab.com/gitlab-cookbooks/gitlab-mtail/blob/b0a57b7bd3b2d18c564d5fccc08081c7673a442d/files/default/mtail/pgbouncer.mtail#L33), so we need to correct it.\n\n~\"corrective action\"","state":"closed","created_at":"2018-12-11T22:51:49.222Z","updated_at":"2018-12-19T12:24:35.549Z","closed_at":"2018-12-19T11:50:28.386Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["auto updated","corrective action"],"milestone":{"id":713047,"iid":57,"project_id":1304532,"title":"2018-12-30 Completed","description":"","state":"closed","created_at":"2018-11-17T17:50:24.811Z","updated_at":"2019-01-02T14:36:41.786Z","due_date":"2018-12-29","start_date":"2018-12-16","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/57"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5736","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5736","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5736/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5736/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5736","relative":"#5736","full":"gitlab-com/gl-infra/reliability#5736"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16583833,"iid":5734,"project_id":1304532,"title":"Setup CI/CD for terraform modules","description":"With each (GCP) module now residing in its own repository, we need to include a few things to move beyond MVC\n\n1. [x] Add a CHANGELOG to each module repo\n1. [x] Add a README to each module repo\n1. [x] Add a license to each module repo\n1. [x] Add a VERSION file to each module repo\n1. [ ] Configure CI\n    1. [x] Run `tf-lint`\n    1. [x] Check `terraform fmt`\n    1. [x] Run `terraform validate`\n    1. [x] Ensure version gets bumped on merge to master\n    1. [x] Automatically tag repo on merge to master","state":"closed","created_at":"2018-12-11T20:21:11.756Z","updated_at":"2019-02-12T22:26:52.274Z","closed_at":"2019-02-12T21:51:44.156Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["terraform"],"milestone":{"id":786143,"iid":74,"project_id":1304532,"title":"Current","description":"Current milestone for ~oncall","state":"closed","created_at":"2019-02-10T00:14:42.318Z","updated_at":"2019-03-06T16:08:54.602Z","due_date":"2019-02-23","start_date":"2019-02-10","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/74"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5734","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":9},"weight":6,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5734","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5734/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5734/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5734","relative":"#5734","full":"gitlab-com/gl-infra/reliability#5734"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9,"epic":{"id":1111,"iid":9,"title":"Improving Automation","url":"/groups/gitlab-com/gl-infra/-/epics/9","group_id":1112072,"human_readable_end_date":"Feb 23, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":16571102,"iid":5725,"project_id":1304532,"title":"Add in the template of the Patroni migration that we need to use TMUX or SCREEN from the deploy hosts","description":"add in the template of the Patroni migration that we need to use TMUX or SCREEN from the deploy hosts","state":"closed","created_at":"2018-12-11T11:14:28.822Z","updated_at":"2019-01-07T15:26:22.956Z","closed_at":"2019-01-07T14:08:37.849Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["auto updated","unscheduled"],"milestone":{"id":725741,"iid":58,"project_id":1304532,"title":"Completed 2019-01-02","description":"Milestone to be worked by oncall team members.","state":"closed","created_at":"2018-12-02T12:54:22.142Z","updated_at":"2019-01-14T13:18:55.521Z","due_date":"2019-01-12","start_date":"2018-12-30","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/58"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5725","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5725","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5725/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5725/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5725","relative":"#5725","full":"gitlab-com/gl-infra/reliability#5725"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16563840,"iid":5724,"project_id":1304532,"title":"Investigate why/how Pingdom checks got deleted","description":"This is to investigate why/how 12 of our Pingdom checks got deleted sometime between 12/10 and 12/11.","state":"closed","created_at":"2018-12-11T05:48:56.418Z","updated_at":"2019-01-04T06:24:11.949Z","closed_at":"2019-01-04T01:46:10.919Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5724","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5724","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5724/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5724/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5724","relative":"#5724","full":"gitlab-com/gl-infra/reliability#5724"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16561930,"iid":5723,"project_id":1304532,"title":"New patcher should post to slack","description":"When running the new patcher CI/CD process, I find myself manually posting a message to slack every time a stage completes.\n\nThe automation should do this for me.\n\nAt the very least, there should be slack messages for:\n- Starting patching staging\n- Finished patching staging\n- Finished patching canary\n- Prompt for manual step to patch production\n- Finished patching production","state":"closed","created_at":"2018-12-11T02:35:46.275Z","updated_at":"2018-12-11T08:54:48.348Z","closed_at":"2018-12-11T08:52:24.725Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":[],"milestone":null,"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5723","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5723","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5723/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5723/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5723","relative":"#5723","full":"gitlab-com/gl-infra/reliability#5723"},"severity":"UNKNOWN","moved_to_id":16567355,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16561761,"iid":5722,"project_id":1304532,"title":"PostgreSQL_ExporterErrors Alerts In Staging","description":"Staging has been sending PostgreSQL_ExporterErrors alerts.  I've been silencing them, but this should really be fixed. It's possible that this alert is no longer necessary and can be deleted, but I don't have enough information to make that call.\n\n```\nLabels:\n - alertname = PostgreSQL_ExporterErrors\n - channel = database\n - environment = gstg\n - fqdn = postgres-01-db-gstg.c.gitlab-staging-1.internal\n - instance = postgres-01-db-gstg.c.gitlab-staging-1.internal:9187\n - job = postgres\n - monitor = gstg-default\n - pager = pagerduty\n - provider = gcp\n - region = us-east\n - replica = 01\n - severity = critical\n - stage = main\n - tier = db\n - type = postgres\nAnnotations:\n - description = This may indicate postgres_exporter is not running or a buggy query in query.yaml on postgres-01-db-gstg.c.gitlab-staging-1.internal\n - title = Postgres exporter is showing errors for the last hour\nSource: https://prometheus.gstg.gitlab.net/graph?g0.expr=pg_exporter_last_scrape_error%7Benvironment%3D~%22gprd%7Cgstg%22%7D+%3D%3D+1\u0026g0.tab=1\n```","state":"closed","created_at":"2018-12-11T02:18:41.369Z","updated_at":"2018-12-11T13:54:47.332Z","closed_at":"2018-12-11T12:02:11.745Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Database [pl]","alert"],"milestone":null,"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5722","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5722","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5722/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5722/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5722","relative":"#5722","full":"gitlab-com/gl-infra/reliability#5722"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16561374,"iid":5721,"project_id":1304532,"title":"Disk Full on version.gitlab.com due to failing WAL archive - continuation- ensure backups are working","description":"It looks like we need to fix the destination for the archive storage.\n\n```\nwal_e.main   ERROR    MSG: no storage prefix defined\n        HINT: Either set one of the --file-prefix, --gs-prefix, --s3-prefix or --wabs-prefix options or define one of the WALE_FILE_PREFIX, WALE_GS_PREFIX, WALE_S3_PREFIX, WALE_SWIFT_PREFIX or WALE_WABS_PREFIX, environment variables.\n        STRUCTURED: time=2018-12-11T01:14:26.080378-00 pid=23088\n2018-12-11 01:14:26 GMT LOG:  archive command failed with exit code 1\n2018-12-11 01:14:26 GMT DETAIL:  The failed archive command was: /usr/bin/envdir /etc/wal-e.d/env /opt/wal-e/bin/wal-e wal-push pg_xlog/000000010000007B0000000D\n2018-12-11 01:14:26 GMT WARNING:  archiving transaction log file \"000000010000007B0000000D\" failed too many times, will try again later\n```\n\nDetails are in https://gitlab.com/gitlab-com/version-gitlab-com/issues/132","state":"closed","created_at":"2018-12-11T01:28:04.209Z","updated_at":"2018-12-18T16:10:06.577Z","closed_at":"2018-12-14T20:17:48.612Z","closed_by":{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"},"labels":["Database [pl]","oncall","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":3140823,"username":"yguo","name":"yun guo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3140823/avatar.png","web_url":"https://gitlab.com/yguo"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5721","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5721","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5721/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5721/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5721","relative":"#5721","full":"gitlab-com/gl-infra/reliability#5721"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16559111,"iid":5720,"project_id":1304532,"title":"Shared macOS Runners","description":"#### Create Minimal Private Cloud Build for MacOS Shared Runners\n\nWorking issue for tracking our macstadium setup and first iteration:\n\n- [x] Sign up for MacStadium account and get information into 1password\n- [x] Initiate Minimal Private Cloud Build (1 VPN Firewall, 1 Mac Pro, 1TB Storage, vCenter / vSphere, VMware ESX 6.7)\n- [ ] Set up with ESX and first clean base image of mac os x mojave\n- [ ] Communicate with CI/CD team an plan next steps for how to setup shared runner manager and shared runners with labels.\n- [ ] Configure Mac runners for only tagged jobs, and look for jobs with `mac` tag\n\nThis direction lets us make API calls from our platform to vCenter to manage the creation, destruction, and templating of images.","state":"closed","created_at":"2018-12-10T21:54:53.236Z","updated_at":"2021-12-21T22:24:23.200Z","closed_at":"2020-06-26T13:54:36.115Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["Service::CI Runners","auto updated","moved 1","moved 2","moved 3"],"milestone":null,"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":69,"merge_requests_count":0,"upvotes":50,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5720","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5720","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5720/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5720/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5720","relative":"#5720","full":"gitlab-com/gl-infra/reliability#5720"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":42,"epic":{"id":4332,"iid":42,"title":"Shared runners for Windows and self-managed","url":"/groups/gitlab-com/-/epics/42","group_id":6543},"iteration":null,"health_status":null},{"id":16553315,"iid":5719,"project_id":1304532,"title":"Add https/SSL to next.gitter.im (next feature toggles)","description":"Add https/SSL to [`next.gitter.im`](http://next.gitter.im/) (next feature toggles)\n\nhttps://github.com/gitterHQ/next.gitter.im\n\n---\n\nFollow-up from https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4664#note_123807024\n\ncc @skarbek","state":"closed","created_at":"2018-12-10T18:35:42.666Z","updated_at":"2020-11-18T19:24:25.469Z","closed_at":"2018-12-18T20:38:49.981Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Gitter","Pentest2018","auto updated","group::gitter","priority::4","security","severity::3"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":892863,"username":"MadLittleMods","name":"Eric Eastwood","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4d634a2b818e2265fa2924b5f4c2da71?s=80\u0026d=identicon","web_url":"https://gitlab.com/MadLittleMods"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-03-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5719","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5719/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5719/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5719","relative":"#5719","full":"gitlab-com/gl-infra/reliability#5719"},"severity":"UNKNOWN","moved_to_id":74585938,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16549271,"iid":5717,"project_id":1304532,"title":"Use HTTP data source for bootstrap/teardown scripts","description":"Access to scripts via relative paths produces the following errors on plan:\n\n```\nError: module.sentry.google_compute_instance.instance_with_attached_disk: 1 error(s) occurred:\n\n* module.sentry.google_compute_instance.instance_with_attached_disk: file: open /Users/craig/src/gitlab/gitlab-com/gitlab-com-infrastructure/environments/ops/.terraform/modules/5ddd9c31c4df35aeb0460a824e50024e/../../../scripts/google/teardown-v1.sh: no such file or directory in:\n\n${file(\"${path.module}/../../../scripts/google/teardown-v1.sh\")}\n```\n\nThis also prevents splitting out modules into standalone repositories, and all these relative `path.module` references should be updated to use the [http data source](https://www.terraform.io/docs/providers/http/data_source.html)","state":"closed","created_at":"2018-12-10T16:09:14.868Z","updated_at":"2018-12-10T21:28:19.254Z","closed_at":"2018-12-10T20:43:02.427Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["auto updated","terraform"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5717","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5717","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5717/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5717/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5717","relative":"#5717","full":"gitlab-com/gl-infra/reliability#5717"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9,"epic":{"id":1111,"iid":9,"title":"Improving Automation","url":"/groups/gitlab-com/gl-infra/-/epics/9","group_id":1112072,"human_readable_end_date":"Feb 23, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":16541755,"iid":5716,"project_id":1304532,"title":"Failed deploy of 11.6.0 RC4","description":"## Summary\r\n\r\nDeploy of 11.6.0 RC4 to production failed and needed to be rolled back\r\n\r\nService(s) affected :\r\nTeam attribution : \r\nMinutes downtime or degradation : 10h03 - 10h37 = 34m\r\n\r\n* Incident doc: [work doc](https://docs.google.com/document/d/16pY8L3azTvSsOgc8so9FNssqMKJk_31EJ_Rc9lZZYpw/edit#heading=h.jnyksupah24j)\r\n* Production issue: https://gitlab.com/gitlab-com/gl-infra/production/issues/608\r\n\r\n## Impact \u0026 Metrics\r\n\r\nStart with the following:\r\n\r\n- What was the impact of the incident? (i.e. service outage, sub-service brown-out, exposure of sensitive data, ...)\r\n- Who was impacted by this incident? (i.e. external customers, internal customers, specific teams, ...)\r\n- How did the incident impact customers? (i.e. preventing them from doing X, incorrect display of Y, ...)\r\n- How many attempts were made to access the impacted service/feature?\r\n- How many customers were affected?\r\n- How many customers tried to access the impacted service/feature?\r\n\r\nInclude any additional metrics that are of relevance.\r\n\r\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\r\n\r\n\r\n## Detection \u0026 Response\r\n\r\nStart with the following:\r\n\r\n- How was the incident detected?\r\n  - pagerduty alerts where triggered by pingdom and prometheus\r\n- Did alarming work as expected?\r\n  - yes\r\n- How long did it take from the start of the incident to its detection?\r\n  - Incident was detected immediately as we were watching the deployment.\r\n- How long did it take from detection to remediation?\r\n  - Errors started at 10h03, site reported to be back again at 10h37 (34m downtime)\r\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\r\n\r\n## Timeline\r\n\r\n2018-12-10\r\n\r\n- 09h49 Deployment of 11.6.0-rc4 (https://ops.gitlab.net/gitlab-org/takeoff/pipelines/14941)\r\n- 10h03 Pingdom alerts gitlab-ce down (https://gitlab.pagerduty.com/incidents/PJM0YL9)\r\n- 10h06 High Web Error Rate (https://gitlab.pagerduty.com/incidents/PHERBYV)\r\n- 10h14 Jose tweets: https://twitter.com/gitlabstatus/status/1072072022627373056\r\n- 10h14 Initiated rollback to 11.5.3 https://ops.gitlab.net/gitlab-org/takeoff/pipelines/14947\r\n- 10h15 Errors on GitLab.com (https://log.gitlab.net/goto/1bb0fbde4bbf4d43fb8ce0b16c6bdcbf)\r\n- 10h33 Jose tweets we are rolling back: https://twitter.com/gitlabstatus/status/1072076713612468224\r\n- 10h37 Alerts resolved https://gitlab.slack.com/services/B12SVN24D\r\n- 10h42 tweet: Everything back to normal https://twitter.com/gitlabstatus/status/1072079050401701888\r\n\r\n## Root Cause Analysis\r\n\r\nThe purpose of this document is to understand the reasons that caused an incident, and to create mechanisms to prevent it from recurring in the future. A root cause can **never be a person**, the way of writing has to refer to the system and the context rather than the specific actors.\r\n\r\nFollow the \"**5 whys**\" in a **blameless** manner as the core of the root-cause analysis.\r\n\r\nFor this it is necessary to start with the incident, and question why it happened. Keep iterating asking \"why?\" 5 times. While it's not a hard rule that it has to be 5 times, it helps to keep questions get deeper in finding the actual root cause. \r\n\r\nKeep in min that from one \"why?\" there may come more than one answer, consider following the different branches.\r\n\r\n###Example of the usage of \"5 whys\"\r\nThe vehicle will not start. (the problem)\r\n\r\n1. Why? - The battery is dead. \r\n2. Why? - The alternator is not functioning.\r\n3. Why? - The alternator belt has broken.\r\n4. Why? - The alternator belt was well beyond its useful service life and not replaced. \r\n5. Why? - The vehicle was not maintained according to the recommended service schedule. (Fifth why, a root cause)\r\n\r\n## What went well\r\n\r\nStart with the following:\r\n\r\n- Identify the things that worked well or as expected.\r\n- Any additional call-outs for what went particularly well.\r\n\r\n## What can be improved\r\n\r\nStart with the following:\r\n\r\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\r\n- Is there anything that could have been done to improve the detection or time to detection?\r\n- Is there anything that could have been done to improve the response or time to response?\r\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\r\n- Did we have any indication or beforehand knowledge that this incident might take place?\r\n\r\n\r\n## Corrective actions\r\n\r\n- List issues that have been created as corrective actions from this incident.\r\n- For each issue, include the following:\r\n    - \u003cBare Issue link\u003e - Issue labeled as ~\"corrective action\".\r\n    - Include an estimated date of completion of the corrective action.\r\n    - Incldue the named individual who owns the delivery of the corrective action.\r\n\r\n\r\n## Guidelines\r\n\r\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\r\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2018-12-10T11:38:22.726Z","updated_at":"2018-12-17T19:00:25.076Z","closed_at":"2018-12-10T15:54:34.169Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["IncidentReview","oncall","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5716","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5716","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5716/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5716/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5716","relative":"#5716","full":"gitlab-com/gl-infra/reliability#5716"},"severity":"UNKNOWN","moved_to_id":16548868,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16524827,"iid":5714,"project_id":1304532,"title":"execute VACUUM FREEZEE in all the tables","description":"execute VACUUM FREEZEE in all the tables","state":"closed","created_at":"2018-12-09T13:59:37.949Z","updated_at":"2020-05-08T17:05:47.846Z","closed_at":"2018-12-20T14:32:10.213Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","priority::1"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},{"id":2483568,"username":"ahachete","name":"Alvaro Hernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5af6a3c5c96061774cc52fd45ba305da?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahachete"},{"id":2589296,"username":"emanuel_ongres","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2589296/avatar.png","web_url":"https://gitlab.com/emanuel_ongres"}],"author":{"id":3244973,"username":"jfinotto-admin","name":"Jose Finotto","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/acfe6685dc23e2b6abc4dd480f78aeee?s=80\u0026d=identicon","web_url":"https://gitlab.com/jfinotto-admin"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5714","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5714","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5714/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5714/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5714","relative":"#5714","full":"gitlab-com/gl-infra/reliability#5714"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16421696,"iid":5713,"project_id":1304532,"title":"move the fixes to chef , that were found after the failover","description":"move the fixes to chef , that were found after the failover","state":"closed","created_at":"2018-12-08T14:38:15.607Z","updated_at":"2018-12-14T20:54:21.977Z","closed_at":"2018-12-10T11:48:26.186Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":1345655,"username":"3manuek","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1345655/avatar.png","web_url":"https://gitlab.com/3manuek"}],"author":{"id":3244973,"username":"jfinotto-admin","name":"Jose Finotto","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/acfe6685dc23e2b6abc4dd480f78aeee?s=80\u0026d=identicon","web_url":"https://gitlab.com/jfinotto-admin"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5713","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5713","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5713/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5713/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5713","relative":"#5713","full":"gitlab-com/gl-infra/reliability#5713"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16413870,"iid":5712,"project_id":1304532,"title":"The mirror push for gitlab-com-infrastructure is not working","description":"Today we discovered that this repo is not syncing between .com and ops.  To fix the immediate issue, a force push was completed to the .com repo.  However, the next failure came about; the credentials are incorrect :unamused: \n\nI updated these with what's in the 1password vault, and still no dice.  HALP","state":"closed","created_at":"2018-12-07T20:22:37.575Z","updated_at":"2019-01-28T22:27:47.263Z","closed_at":"2019-01-15T09:13:33.771Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["oncall"],"milestone":{"id":753074,"iid":61,"project_id":1304532,"title":"Completed 2019-01-26","description":"On call work milestone - tracking issues worked by oncall.\r\n","state":"closed","created_at":"2019-01-07T21:41:02.373Z","updated_at":"2019-02-03T16:29:51.114Z","due_date":"2019-01-26","start_date":"2019-01-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/61"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5712","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5712","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5712/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5712/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5712","relative":"#5712","full":"gitlab-com/gl-infra/reliability#5712"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16394204,"iid":5709,"project_id":1304532,"title":"Add ARInsights SPF and DKIM records to update GitLab DMARC authentication policy","description":"# Summary\nGitLab is a subscriber to ARInsights software, which is a tool used to monitor analyst relations, typically used by most of the large tech vendors (except MS) and more of the smaller ones. Specifically I use it to send a bimonthly newsletter to industry analysts. We use their SW because it satisfies GDPR requirements, and it also gives me tools to track who opens the newletter and what links they click through on.\n\nThis month the newsletter bounced from 5 recipients with a blocked (550) 550 5.7.1 error. All 4 at Redmonk bounced, as well as one at Forrester. When I brought this to ARInsight's attention they wrote me the following:\n\n\"Your email administrator needs to add our SPF and DKIM records to update your DMARC authentication policy.  This will enable us to send emails from ARchitect that look like they are coming directly from your domain and will not get trapped in any spam filters. I'm going to have the DMARC records generated and will forward to you with some documentation. \n\nAs soon as the records are generated I'll forward on to you, please don't hesitate to ask any questions as we move through the process.\"\n\nI will send the files when I receive them. Please let me know what else I need to do.","state":"closed","created_at":"2018-12-06T23:54:13.005Z","updated_at":"2019-07-08T20:02:19.050Z","closed_at":"2018-12-12T05:19:33.386Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["auto updated","priority::2","unblocks others","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2483603,"username":"Tompsett","name":"Joyce Tompsett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2483603/avatar.png","web_url":"https://gitlab.com/Tompsett"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5709","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5709/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5709/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5709","relative":"#5709","full":"gitlab-com/gl-infra/reliability#5709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16381415,"iid":5705,"project_id":1304532,"title":"Our hosted Elastic Search cluster is starting to run low on space","description":"We've been receiving alerts the past week that we start to run out of space, then our cleanup script will come by and clean up some indexes, and we'll receive an alert that we are good to go.  That cleanup script is now reporting 85% used storage space after it completes the cleanup process.\n\nWe just scaled up a number of nodes, so log volume has increased recently.  We also have issues (not yet pulled) to start adding a few items into elastic search.  \n\nUtilize this issue and bump up the amount of storage we have available to us such that we don't run out of space in our cluster.  Currently each one of our nodes is setup if 2TB of space, we are using between 1.7TB and 1.8TB on all of them.","state":"closed","created_at":"2018-12-06T12:12:33.385Z","updated_at":"2019-07-08T19:16:18.543Z","closed_at":"2018-12-13T10:02:49.289Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["elasticsearch","logging","oncall","priority::3","severity::3","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5705","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5705","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5705/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5705/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5705","relative":"#5705","full":"gitlab-com/gl-infra/reliability#5705"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16359537,"iid":5703,"project_id":1304532,"title":"Can we redirect all www.about.gitlab.com URLs?","description":"Earlier today we came across an issue where some absolute links caused Google Bot to index and serve pages from www.about.gitlab.com in search results. \n\nThe absolute links have been updated and will eventually move themselves out of Google's Index. To resolve the problem in the interim, can we setup a redirect for www.about.gitlab.com to about.gitlab.com?\n\nThank you!","state":"closed","created_at":"2018-12-05T22:56:50.301Z","updated_at":"2019-01-29T05:38:52.674Z","closed_at":"2019-01-28T19:05:55.942Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["CMO Attention","oncall"],"milestone":{"id":753074,"iid":61,"project_id":1304532,"title":"Completed 2019-01-26","description":"On call work milestone - tracking issues worked by oncall.\r\n","state":"closed","created_at":"2019-01-07T21:41:02.373Z","updated_at":"2019-02-03T16:29:51.114Z","due_date":"2019-01-26","start_date":"2019-01-13","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/61"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2453970,"username":"shanerice","name":"Shane Rice","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2453970/avatar.png","web_url":"https://gitlab.com/shanerice"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5703","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5703","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5703/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5703/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5703","relative":"#5703","full":"gitlab-com/gl-infra/reliability#5703"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16326762,"iid":5690,"project_id":1304532,"title":"Separate repositories for continuous delivery target environments","description":"1. [ ] Create new repository for each environment we currently have new gitlab project\n1. [ ] lock old repository to prevent merge-requests/changes while re-organizing repositories (set a push restriction in the gitlab project settings)\n1. [ ] Enable/validate pipeline in new repository\n1. [ ] Remove environment directory from old repository\n\n## Testing\n1. [ ] Copy terraform files from old repository\n1. [x] ~~Setup pipeline using image from [`terraform-ci` repo](infrastructure#5689) (n/a)~~\n1. [ ] Validate `tf-init` successfully configures remote state \u0026 downloads providers/modules\n1. [ ] Validate `tf plan` success \u0026 output from local repository\n1. [ ] Add manual `tf apply` stage\n1. [ ] Enable pipeline and validate end-to-end with no-op change","state":"closed","created_at":"2018-12-04T21:23:42.246Z","updated_at":"2019-12-06T21:44:21.118Z","closed_at":"2019-11-04T19:51:39.100Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["moved 1","team::Reliability","terraform","workflow-infra::Cancelled"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5690","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":1},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5690","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5690/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5690/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5690","relative":"#5690","full":"gitlab-com/gl-infra/reliability#5690"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9,"epic":{"id":1111,"iid":9,"title":"Improving Automation","url":"/groups/gitlab-com/gl-infra/-/epics/9","group_id":1112072,"human_readable_end_date":"Feb 23, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":16326720,"iid":5689,"project_id":1304532,"title":"Shared tooling and docker build pipeline for terraform-ci","description":"Create new `terraform-ci` repository for shared tooling/docker images used in each environments' pipeline `gitlab-ci.yml`\n\nThis repository will provide a single place to build/manage the container used in all terraform CI/CD pipelines, with required packages and utilities included. The existing terraform wrapper scripts under `/bin` in the `gitlab-com-infrastructure` repository need to be migrated here.","state":"closed","created_at":"2018-12-04T21:18:52.552Z","updated_at":"2019-04-25T19:10:04.708Z","closed_at":"2019-03-15T19:28:02.265Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["moved 1","terraform"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5689","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5689","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5689/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5689/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5689","relative":"#5689","full":"gitlab-com/gl-infra/reliability#5689"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9,"epic":{"id":1111,"iid":9,"title":"Improving Automation","url":"/groups/gitlab-com/gl-infra/-/epics/9","group_id":1112072,"human_readable_end_date":"Feb 23, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":16326597,"iid":5688,"project_id":1304532,"title":"Separate terraform modules repositories","description":"1. [x] Create new `terraform-modules/*` repositories\r\n1. [x] Update all `source = ...` lines in current (sub-)modules to [reference new modules repo/paths](https://www.terraform.io/docs/modules/sources.html#generic-git-repository)\r\n1. [x] Update all `source = ...` lines in current repository to [reference new modules repo/paths](https://www.terraform.io/docs/modules/sources.html#generic-git-repository)\r\n\r\n## Testing\r\nFrom within `gitlab-com-infrastructure`\r\n1. [x] Rename `modules` directory repository to ensure no relative path references remain\r\n1. [x] Remove all `.terraform` directories under `./environments`\r\n1. [x] Execute `./bin/tf-init` for each environment\r\n1. [x] Execute `./bin/tf plan` for each environment\r\n1. [x] Remove renamed `modules` directory","state":"closed","created_at":"2018-12-04T21:07:09.708Z","updated_at":"2018-12-17T18:57:04.665Z","closed_at":"2018-12-11T22:19:58.728Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["terraform","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5688","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5688","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5688/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5688/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5688","relative":"#5688","full":"gitlab-com/gl-infra/reliability#5688"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9,"epic":{"id":1111,"iid":9,"title":"Improving Automation","url":"/groups/gitlab-com/gl-infra/-/epics/9","group_id":1112072,"human_readable_end_date":"Feb 23, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":16325790,"iid":5687,"project_id":1304532,"title":"Service discovery for database load balancing","description":"We support service discovery for database load balancing but apparently we're not using it (I looked at a `database.yml` in production, it seems this is not configured).\n\nService discovery was implemented with https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/5883/diffs by @yorickpeterse .\n\n(I'm not sure yet where this issue is going - but I'm inclined to think that we need service discovery to support flawless failovers.)","state":"closed","created_at":"2018-12-04T20:39:35.537Z","updated_at":"2021-11-04T16:52:39.588Z","closed_at":"2019-03-21T02:44:22.070Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Database [pl]"],"milestone":{"id":812591,"iid":8,"group_id":1112072,"title":"JF Team 2019 week 11","description":"","state":"closed","created_at":"2019-03-08T09:57:38.500Z","updated_at":"2019-03-25T05:01:50.858Z","due_date":"2019-03-22","start_date":"2019-03-11","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/8"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5687","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5687","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5687/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5687/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5687","relative":"#5687","full":"gitlab-com/gl-infra/reliability#5687"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16316122,"iid":5677,"project_id":1304532,"title":"analyze database after failover","description":"add step : \"analyze database;\" after the promote on patroni.","state":"closed","created_at":"2018-12-04T13:52:05.211Z","updated_at":"2018-12-14T20:54:20.222Z","closed_at":"2018-12-04T15:04:27.342Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database [pl]","priority::1","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5677","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5677","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5677/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5677/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5677","relative":"#5677","full":"gitlab-com/gl-infra/reliability#5677"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16312576,"iid":5676,"project_id":1304532,"title":"[Design Doc] GCP Maintenance Automation","description":"We need to upgrade the kernel version of our GCE VMs. While the process is pretty straight-forward and we completed the task on a staging fleet (`api`) via a change request successfully, there were some areas where we could leverage automation because we are looking at nearly 100 VMs for Staging environment alone and more in Production. In addition, this is a type of activity we could do in the near future as well. \n\nHere is the design doc for this automation effort, which includes MRs for a proposed project as well. https://docs.google.com/document/d/1u-LtKdu0uSt16IBjsq4szCXq0bCA87Sf0or-Blu55SQ \n\nSpecific asks from the team, by **12/7/18** (if possible):\n- Please review the design doc\n- Please review the MRs (listed in the design doc) \n- Provide feedback \n\nRelated issues:\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5289\n- https://gitlab.com/gitlab-com/gl-infra/production/issues/583","state":"closed","created_at":"2018-12-04T11:56:43.804Z","updated_at":"2018-12-14T20:54:20.011Z","closed_at":"2018-12-09T14:46:54.100Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["Design Document","auto updated","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5676","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5676","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5676/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5676/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5676","relative":"#5676","full":"gitlab-com/gl-infra/reliability#5676"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16302679,"iid":5674,"project_id":1304532,"title":"Transfer concurrentdevops.com under GitLab Ownership","description":"@sytses has acquired the domain `concurrentdevops.com` and we will be transferring it to our domain management.","state":"closed","created_at":"2018-12-04T03:23:07.074Z","updated_at":"2018-12-17T18:26:25.700Z","closed_at":"2018-12-10T19:21:55.794Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["toil","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5674","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5674","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5674/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5674/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5674","relative":"#5674","full":"gitlab-com/gl-infra/reliability#5674"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16299071,"iid":5672,"project_id":1304532,"title":"Add Gitter SSH to SRE offboarding","description":"Add Gitter SSH to SRE (Site-reliability engineer) offboarding, https://gitlab.com/gitlab-com/gl-infra/gitter-infrastructure#ssh-to-boxes\n\n---\n\n`troupe` AWS accounts were addressed in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5669","state":"closed","created_at":"2018-12-03T21:51:31.176Z","updated_at":"2020-11-18T19:24:29.078Z","closed_at":"2018-12-04T13:10:23.156Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Gitter","group::gitter"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":892863,"username":"MadLittleMods","name":"Eric Eastwood","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4d634a2b818e2265fa2924b5f4c2da71?s=80\u0026d=identicon","web_url":"https://gitlab.com/MadLittleMods"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5672","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5672","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5672/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5672/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5672","relative":"#5672","full":"gitlab-com/gl-infra/reliability#5672"},"severity":"UNKNOWN","moved_to_id":74585955,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16298813,"iid":5671,"project_id":1304532,"title":"Network Security Diagram for security/customer consumption","description":"On the [Infra production architecture page](https://about.gitlab.com/handbook/engineering/infrastructure/production-architecture/), we have a current architecture diagram.  To help with security questionnaires, a network security diagram would be good to produce.  This would show VPCs (help answer how we separate production traffic from staging, etc) and then the other network separation we have in place. \n\ncc @MFarber","state":"closed","created_at":"2018-12-03T21:29:45.463Z","updated_at":"2020-07-14T23:14:27.614Z","closed_at":"2018-12-07T16:13:08.469Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["documentation","priority::2","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":10,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5671","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5671","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5671/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5671/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5671","relative":"#5671","full":"gitlab-com/gl-infra/reliability#5671"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16297405,"iid":5670,"project_id":1304532,"title":"301 for /serverless","description":"Redirect `^/serverless(.*)` to `/product/serverless/`\n\nPage is being built, need this redirect in place for press going out next week: https://gitlab.com/gitlab-com/marketing/general/issues/3673","state":"closed","created_at":"2018-12-03T20:05:36.866Z","updated_at":"2018-12-17T18:28:57.005Z","closed_at":"2018-12-03T23:08:34.413Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["auto updated","toil","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":1512223,"username":"williamchia","name":"William Chia","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1512223/avatar.png","web_url":"https://gitlab.com/williamchia"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5670","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5670","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5670/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5670/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5670","relative":"#5670","full":"gitlab-com/gl-infra/reliability#5670"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16296712,"iid":5669,"project_id":1304532,"title":"Add troupe (Gitter) AWS to offboarding","description":"We need to make sure to remove the user on the `troupe` (Gitter) AWS space when offboarding. We should also remove their SSH key https://gitlab.com/gitlab-com/gl-infra/gitter-infrastructure#ssh-to-boxes\n\nI don't have access to the project or it doesn't exist anymore, https://dev.gitlab.org/cookbooks/chef-repo/blob/master/doc/offboarding.md\n\nhttps://gitlab.com/gitlab-com/people-ops/employment/blob/b4b4f283bcf47d109a24c2427428b0c29d622375/.gitlab/issue_templates/offboarding.md#L122\n```\n1. [ ] For former Developers (those who had access to part of the infrastructure), and Production GitLabbers: copy offboarding process from [infrastructure](https://dev.gitlab.org/cookbooks/chef-repo/blob/master/doc/offboarding.md) for offboarding action.\n```\n\n---\n\nSpawned from @skarbek finding an old user in the list, https://gitlab.slack.com/archives/C3W3PSR88/p1543863899004000","state":"closed","created_at":"2018-12-03T19:23:19.571Z","updated_at":"2020-11-18T19:25:33.049Z","closed_at":"2018-12-03T21:52:34.575Z","closed_by":{"id":892863,"username":"MadLittleMods","name":"Eric Eastwood","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4d634a2b818e2265fa2924b5f4c2da71?s=80\u0026d=identicon","web_url":"https://gitlab.com/MadLittleMods"},"labels":["Gitter","auto updated","group::gitter","toil","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":892863,"username":"MadLittleMods","name":"Eric Eastwood","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4d634a2b818e2265fa2924b5f4c2da71?s=80\u0026d=identicon","web_url":"https://gitlab.com/MadLittleMods"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5669","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5669","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5669/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5669/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5669","relative":"#5669","full":"gitlab-com/gl-infra/reliability#5669"},"severity":"UNKNOWN","moved_to_id":74586031,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16291768,"iid":5665,"project_id":1304532,"title":"Various admin for Jim Thavisouk to help with access request process","description":"Please describe your problem below and the oncall engineer will pick it up.\n\nSee  - https://gitlab.com/gitlab-com/access-requests/issues/182","state":"closed","created_at":"2018-12-03T15:21:14.778Z","updated_at":"2018-12-07T18:25:39.316Z","closed_at":"2018-12-07T18:04:25.919Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["oncall","requires production access","toil","unblocks others","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5665","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5665","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5665/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5665/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5665","relative":"#5665","full":"gitlab-com/gl-infra/reliability#5665"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16289344,"iid":5664,"project_id":1304532,"title":"Rename Grafana folder for Postgres","description":"The `PostgreSQL_New` Grafana folder should replace the old `PostgreSQL` and `PostgreSQL_Patroni` folders if there are no objections.","state":"closed","created_at":"2018-12-03T14:00:39.561Z","updated_at":"2018-12-14T20:54:57.671Z","closed_at":"2018-12-05T14:13:39.099Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["toil","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":3,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5664","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5664","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5664/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5664/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5664","relative":"#5664","full":"gitlab-com/gl-infra/reliability#5664"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16281372,"iid":5663,"project_id":1304532,"title":"Database Reviews","description":"* [x] @NikolayS -\u003e @abrandl Recursive CTE https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22308#note_115367888 :eyes: @NikolayS (checked CTE, passed to @abrandl)\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23268\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8603\n* [x] Douwe -\u003e @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23353#note_120477127\n* [x] @NikolayS -\u003e @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7884#note_120724759 :eyes: @NikolayS (tentatively approved; @abrandl see the comment there)\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23412#note_120700982 :eyes: @NikolayS (already reviewed and even merged; double-checked, looks ok)\n* [ ] @NikolayS https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23147#note_120549262 :eyes: @NikolayS (commented, waiting for feedback)\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8641#note_121316786\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23445\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23098\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8550\n* [x] @abrandl urgent - missed deliverable: https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/6878/diffs#note_121418853\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8497#note_121843202\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8603#note_121851696\n* [x] @NikolayS -\u003e @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23508#note_121871425 :+1: @NikolayS (ready to be approved @abrandl, one minor comment left)\n* [x] @abrandl urgent - blocker https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23353#note_121895753\n* [x] Quick https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23512/diffs#note_121901715\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/6878\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8603\n* [x] @NikolayS -\u003e @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23564#note_122262530 :eyes: @NikolayS  (checked, passed to @abrandl)\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23436#note_122432169\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8695#note_122348606\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/7885#note_122342732\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23217\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8442#note_122477084\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8550#note_122275825\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23599\n* [x] @abrandl https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23609","state":"closed","created_at":"2018-12-03T10:06:43.540Z","updated_at":"2018-12-17T12:25:47.470Z","closed_at":"2018-12-17T11:27:29.567Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5663","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":28,"completed_count":27},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5663","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5663/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5663/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5663","relative":"#5663","full":"gitlab-com/gl-infra/reliability#5663"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16250247,"iid":5660,"project_id":1304532,"title":"Add Grafana dashboard for docker registry","description":"registry.gitlab.com should have a dedicated Grafana dashboard to observe it's operational status (related to #5659).","state":"closed","created_at":"2018-11-30T20:59:34.826Z","updated_at":"2019-12-06T13:10:30.763Z","closed_at":"2018-12-14T15:28:50.035Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Container Registry","auto updated","toil","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5660","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5660","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5660/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5660/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5660","relative":"#5660","full":"gitlab-com/gl-infra/reliability#5660"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16250107,"iid":5658,"project_id":1304532,"title":"Structured logging for docker registry","description":"registry.gitlab.com logs (from /var/log/gitlab/registry/) are not sent as structured logs which makes it hard to find and parse them.\nAdjust [registry.conf.erb](https://gitlab.com/gitlab-cookbooks/gitlab_fluentd/blob/master/templates/default/registry.conf.erb) to parse fields correctly. Make sure that multiline panic stack traces also are forwarded (see https://gitlab.com/gitlab-org/gitlab-ce/issues/54703 for an example log).","state":"closed","created_at":"2018-11-30T20:48:15.737Z","updated_at":"2019-12-06T13:10:32.539Z","closed_at":"2019-01-14T21:30:56.023Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Service::Container Registry","auto updated","moved 1"],"milestone":{"id":757545,"iid":63,"project_id":1304532,"title":"AS Team 2019 Week 3","description":"","state":"closed","created_at":"2019-01-11T21:44:30.740Z","updated_at":"2019-01-29T02:23:18.245Z","due_date":"2019-01-27","start_date":"2019-01-14","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/63"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5658","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5658","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5658/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5658/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5658","relative":"#5658","full":"gitlab-com/gl-infra/reliability#5658"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16246365,"iid":5656,"project_id":1304532,"title":"about-src.gitlab.com is being crawled by Google","description":"I noticed it when doing a search for the last summit:\n\n![image](/uploads/bb18f61903d9159b7b582a68f708fa0e/image.png)\n\nI imagine this is not something we want, right?","state":"closed","created_at":"2018-11-30T16:48:51.156Z","updated_at":"2018-12-04T10:03:18.844Z","closed_at":"2018-12-01T00:09:41.688Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["corrective action","toil","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5656","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5656","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5656/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5656/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5656","relative":"#5656","full":"gitlab-com/gl-infra/reliability#5656"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16245371,"iid":5653,"project_id":1304532,"title":"new changes on the migration script","description":"- add the query \n\nselect * from pg_stat_activity where state != idle ; \\\n- remove step that is not mandatory and keep as documentation for troubleshoot ( pg_switch_xlog)\n- automate the test of ssh blocked and any other manual verification that would be easier to automate","state":"closed","created_at":"2018-11-30T16:02:29.448Z","updated_at":"2019-12-26T16:02:34.497Z","closed_at":"2018-12-03T07:52:05.586Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Service::Postgres","priority::1"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5653","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5653","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5653/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5653/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5653","relative":"#5653","full":"gitlab-com/gl-infra/reliability#5653"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16243688,"iid":5652,"project_id":1304532,"title":"Alert Investigation: 2018-11-30 13:49 UTC High CPU on git-01","description":"![image](/uploads/2e11ef1c0bedf6269762c8500b0f8fe1/image.png)\n\nDuring investigation there were 18 `sshd: git@notty` processes tying up the CPU.  I performed an strace on a few and saw very similar output that didn't really point me into any direction as to what I should continue to look for:\n\n```\nclock_gettime(CLOCK_BOOTTIME, {4569259, 270293753}) = 0\nselect(12, [3 5 9 11], [3], NULL, {30, 0}) = 2 (in [9], out [3], left {29, 999993})\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclock_gettime(CLOCK_BOOTTIME, {4569259, 270591957}) = 0\nread(9, \"\\17_\\267e$\\370M\\340\u003e\\277\\371 \\376\\246\\244(\\203H\\213@\\v\\313_\\344\\31 \\214[\\200uPl\"..., 16384) = 16384\nwrite(3, \"_\\275\\356\\314O\\257$\\\\\\\\O\\\\\\302\\\"\\303\\262\\367\\250x\\205\\337BR\\364\\357\\347\\n5\\227\\37\\272\\4\\377\"..., 16448) = 16448\nclock_gettime(CLOCK_BOOTTIME, {4569259, 367838203}) = 0\nselect(12, [3 5 9 11], [3], NULL, {30, 0}) = 2 (in [9], out [3], left {29, 999993})\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclock_gettime(CLOCK_BOOTTIME, {4569259, 368819627}) = 0\nread(9, \"\\17F\\377a\\276[\\255O\\34\\267\\21\\177\\234T\\34qm*:\\345h\\264\\363\\372C[%+\\312g^\\233\"..., 16384) = 16384\nwrite(3, \"\\335\\251R\\2125\\270\\330$\\303\\272Z\u00262\\342 yV\\230W\\371f\\230\\371\\242\\323\\6\\316\\255)#,\\375\"..., 16448) = 16448\nclock_gettime(CLOCK_BOOTTIME, {4569259, 570915822}) = 0\nselect(12, [3 5 9 11], [3], NULL, {30, 0}) = 2 (in [9], out [3], left {29, 999994})\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclock_gettime(CLOCK_BOOTTIME, {4569259, 571406231}) = 0\nread(9, \"\\215#t\\366\\203u\\244K\\370\\346\\23\\325\\334\\351\\241\\314\\241\\376\\301\\314\\3011\\366\\205\\361d\\376\\260\\320D\\344#\"..., 16384) = 16384\n```\n\nThe host was able to process requests just fine.  It was never removed from our load balancers and during this time, I proceeded to force a few git commands through this server, and despite being a tad slower than other git servers, the request worked just fine.  There were no known \"stuck\" git processes, based on the command provided in our runbook.\n\nAt 14:04 UTC I put this server in state DRAIN for all load balancers.  The load immediately started to fall off, but the remaining git processes were apparently long running and left the cpu in a pegged state.\n\nAt 14:26 UTC I decided to pull the plug on the 18 processes via `kill`.  The CPU usage immediately dropped.  I waited for other metrics (load) and the alert to clear before proceeding to put this server back into rotation\n\nAt 14:32 UTC I killed any remaining git ssh process.  There were roughly 20 of them, some of them as old as November 27th.\n\nAt 14:34 UTC the server was put back into rotation.\n\n---\n\nDue to lack of knowledge and visibility into what these processes are doing, I'm not sure what to look at for this type of situation.  If they are long running git commands, it'd be nice if I could tie an ssh session to a process.\n\nIf anyone else has better ideas as to how I should've approach this situation please let me know.  I am not marking this as an incident due to not having enough information to prove abuse and for lifetime in which this situation was occurring, the server was still able to serve requests successfully.\n\n/cc @gitlab\\-com/gl\\-infra","state":"closed","created_at":"2018-11-30T14:48:35.768Z","updated_at":"2018-11-30T15:25:59.042Z","closed_at":"2018-11-30T14:48:47.615Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["alert","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5652","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5652","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5652/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5652/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5652","relative":"#5652","full":"gitlab-com/gl-infra/reliability#5652"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16241705,"iid":5651,"project_id":1304532,"title":"Public Dashboard for GitLab.com is not loading graphs and data","description":"The [GitLab Triage Dashboard](https://dashboards.gitlab.com/d/RZmbBr7mk/gitlab-triage?refresh=30s\u0026orgId=1) does not load the graphs and or data points. This has been confirmed my multiple people as not working:\n\n![image](/uploads/9d8508ab7bf9bfcf4917324b5f08ffb9/image.png)","state":"closed","created_at":"2018-11-30T13:23:17.213Z","updated_at":"2019-09-17T08:28:53.016Z","closed_at":"2019-09-17T08:10:51.880Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5651","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5651","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5651/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5651/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5651","relative":"#5651","full":"gitlab-com/gl-infra/reliability#5651"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16239323,"iid":5650,"project_id":1304532,"title":"Deprecate TLS 1.0 and TLS 1.1 on staging","description":"Like what we have set on canary we think we are ready to apply the TLS update on staging.\n\n## references\n\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5152#note_108864376\n- https://gitlab.com/gitlab-org/gitlab-ee/issues/7794#note_120941430","state":"closed","created_at":"2018-11-30T11:35:00.652Z","updated_at":"2018-12-03T21:02:09.836Z","closed_at":"2018-11-30T14:40:53.560Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["oncall","security","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5650","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5650","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5650/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5650/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5650","relative":"#5650","full":"gitlab-com/gl-infra/reliability#5650"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16236688,"iid":5649,"project_id":1304532,"title":"Upgrade forum.gitlab.com","description":"The forum needs an upgrade. Info in https://gitlab.com/gitlab-com/runbooks/blob/master/howto/discourse-forum.md.\n\ncc @jarv","state":"closed","created_at":"2018-11-30T09:42:37.310Z","updated_at":"2018-12-17T18:28:56.402Z","closed_at":"2018-12-05T19:50:26.908Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Non-SaaS","forum.gitlab.com","requires production access","toil"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5649","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5649","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5649/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5649/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5649","relative":"#5649","full":"gitlab-com/gl-infra/reliability#5649"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16227960,"iid":5646,"project_id":1304532,"title":"RCA: API fleet unavailable 20181129 20:10:00 - 20:36:00 UTC","description":"## Summary\n\nAll of the API servers became unavailable due to someone walking all of the public projects.\n\n- Service(s) affected : API\n- Team attribution : SAE\n- Minutes downtime or degradation : 26 minutes\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- The API was completely inaccessible\n- All users trying to access the API were affected\n- The incident prevented any API actions, including pushes and CI runners fetching jobs \n\n### Graphs and logs\n\n- [Kibana: Project listing requests](https://log.gitlab.net/goto/d1d21142d69d5ff6f30891a3cde44f4c)\n- [Dashboards: DB host load and locks](https://dashboards.gitlab.net/d/000000142/postgresql-overview?orgId=1\u0026from=1543521758415\u0026to=1543524942335)\n- [Dashboards: Workhorse Availability](https://dashboards.gitlab.net/d/OktWokpik/workhorse-overview?panelId=94\u0026fullscreen\u0026orgId=1\u0026from=1543520954651\u0026to=1543525648769)\n- [Dashboards: HAProxy Dashboard during incident](https://dashboards.gitlab.net/d/ZOOh_aNik/haproxy?orgId=1\u0026from=1543521006515\u0026to=1543524880550\u0026var-host=fe-01-lb-gprd.c.gitlab-production.internal\u0026var-port=9101\u0026var-backend=api\u0026var-frontend=All\u0026var-server=All\u0026var-code=All\u0026var-interval=30s)\n\n## Detection \u0026 Response\n\n- The incident was detected with a PagerDuty alert. The first alert resolved itself shortly after firing. The second one was the downtime.\n- Remediation happened on its own.\n\n## Timeline\n\n2018-11-29\n\n- 20:11 - First alert goes off `IncreasedBackendConnectionErrors`\n- 20:16 - First alert clears\n- 20:26 - Second alert fires `IncreasedBackendConnectionErrors`\n- 20:29 - Users begin reporting issues\n- 20:36 - The API servers recover and service is restored\n- 20:41 - Second alert clears\n\n## Root Cause Analysis\n\nWhy did the API servers become unavailable?\n  - Public projects were being iterated through the API\n  - API pagination issues can cause timeouts and overwhelm the servers (https://gitlab.com/gitlab-org/gitlab-ce/issues/42194)\n\n## What went well\n\n- We discovered the problem quickly and there was a quick response\n\n## What can be improved\n\n- This has happened multiple times (see https://gitlab.com/gitlab-com/gl-infra/production/issues/589)\n- The runbooks for HAProxy problems could use some work\n- We could further limit requests to this endpoint\n- We can improve pagination in the application\n\n## Corrective actions\n\n- Dedicated fleet for internal API: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4708\n- Better handling of pagination for api requests:  https://gitlab.com/gitlab-org/gitlab-ce/issues/42194\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2018-11-29T21:18:29.516Z","updated_at":"2018-12-17T18:56:01.024Z","closed_at":"2018-12-05T20:01:37.913Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5646","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5646","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5646/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5646/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5646","relative":"#5646","full":"gitlab-com/gl-infra/reliability#5646"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16224277,"iid":5645,"project_id":1304532,"title":"empty the artifacts bucket in GCS","description":"We had a sync set up to sync artifacts from S3 to GCS nightly because we were hoping to migrate to GCS quickly at the time. In the meanwhile, we have encountered problems and the migration has been placed in the backlog (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4684#note_117887957 for more info). We need to empty out the artifacts bucket in GCS (`gitlab-gprd-artifacts`) and disable the nightly sync until we are closer to actually being able to execute the move. It is simply a massive waste of money to store all that data twice as well as bandwidth transfer costs with no migration time in sight.\n\ncc/ @dawsmith @gitlab\\-com/gl\\-infra\n\nEDIT:\n\nAs per [the object storage dashboard](https://dashboards.gitlab.net/d/BtEcmxLik/object-storage?orgId=1\u0026from=now-12h\u0026to=now) we are storing 307TB in GCS for artifacts. This amounts to \n\n```\n314368 GB * $0.026/month = $8173.56/month\n```\n\n~~It isn't killing us, but it is also a waste.~~\n\nEDIT2: On second thought, 8173.56/mo is a lot and could be an additional engineer.","state":"closed","created_at":"2018-11-29T18:15:33.047Z","updated_at":"2023-04-11T23:18:32.059Z","closed_at":"2018-12-12T14:50:29.833Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Cloud Spend","cleanup","cost","priority::2","toil"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5645","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5645","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5645/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5645/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5645","relative":"#5645","full":"gitlab-com/gl-infra/reliability#5645"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16223440,"iid":5644,"project_id":1304532,"title":"Readiness review for the new post deployment patcher","description":"This issue is for an SRE review of the post deployment patcher.\n\n- [x] SRE sign-off on new patcher tool https://ops.gitlab.net/gitlab-com/gl-infra/patcher\n- [x] review new documentation - https://gitlab.com/gitlab-org/release/docs/merge_requests/84\n- [x] deprecate old patcher howto - https://gitlab.com/gitlab-com/runbooks/merge_requests/840\n- [x] deprecation notice on gitlab-patcher - https://gitlab.com/gitlab-com/gl-infra/gitlab-patcher/merge_requests/7\n- [x] deprecation notice on post-deployment-patches - https://dev.gitlab.org/gitlab/post-deployment-patches/merge_requests/118\n- [x] Turn off issues and MRs on the gitlab-patcher and post-deployment-patches repos\n- [x] Apply the README update to point to official docs - https://ops.gitlab.net/gitlab-com/gl-infra/patcher/merge_requests/12\n- [x] Deploy a noop patch (adds a comment to a source file) through the pipeline\n- [x] Announce in `#backend` and to previous developers who have issued patches that the process has changed.","state":"closed","created_at":"2018-11-29T17:35:11.461Z","updated_at":"2018-12-07T11:16:06.081Z","closed_at":"2018-12-05T14:07:45.841Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":[],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":27,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5644","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":9},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5644","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5644/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5644/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5644","relative":"#5644","full":"gitlab-com/gl-infra/reliability#5644"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16222047,"iid":5643,"project_id":1304532,"title":"Promote the cluster of patroni in production for ongres tests","description":"Promote the cluster of patroni in prod environment for tests. \nJust to remember the cluster do not have any traffic.\n@ahmadsherif  could you please let us know if the cluster is ready?\nThe tests will be a multiple sequence of failover ...","state":"closed","created_at":"2018-11-29T16:30:06.287Z","updated_at":"2018-12-02T12:45:11.437Z","closed_at":"2018-11-30T14:40:37.011Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","priority::1","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5643","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5643","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5643/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5643/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5643","relative":"#5643","full":"gitlab-com/gl-infra/reliability#5643"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16212197,"iid":5640,"project_id":1304532,"title":"Users unable to create project","description":"Users are facing issues when they are trying to create a new project from web UI. They are getting:\n\n`\nPG::QueryCanceled: ERROR: canceling statement due to statement timeout CONTEXT: while rechecking updated tuple (1,14) in relation \"site_statistics\" : UPDATE \"site_statistics\" SET \"repositories_count\" = \"repositories_count\"+1\n`\n\nZD: \n* https://gitlab.zendesk.com/agent/tickets/109256\n* https://gitlab.zendesk.com/agent/tickets/109252","state":"closed","created_at":"2018-11-29T12:08:56.250Z","updated_at":"2018-12-17T18:28:55.958Z","closed_at":"2018-12-05T15:41:17.120Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall","priority::1","toil","unscheduled"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":581582,"username":"arihantar","name":"Arihant","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=80\u0026d=identicon","web_url":"https://gitlab.com/arihantar"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5640","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5640","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5640/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5640/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5640","relative":"#5640","full":"gitlab-com/gl-infra/reliability#5640"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16201607,"iid":5637,"project_id":1304532,"title":"Create GCP Project for Disaster Recovery","description":"Create a GCP project under Infrastructure/Environments called gitlab-dr to use for setting up GEO replication based Disaster Recovery site.\n\nThis project will need its quota expanded in the us-west1 region to match what we have in production. https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5466","state":"closed","created_at":"2018-11-29T02:37:30.693Z","updated_at":"2018-12-02T12:45:11.249Z","closed_at":"2018-11-30T20:46:49.345Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["auto updated","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5637","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5637","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5637/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5637/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5637","relative":"#5637","full":"gitlab-com/gl-infra/reliability#5637"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":12,"epic":{"id":1144,"iid":12,"title":"GEO for DR for GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/12","group_id":1112072,"human_readable_end_date":"May 8, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":16196302,"iid":5634,"project_id":1304532,"title":"The following servers should be added to blackbox monitoring for SSL certificate expiration","description":"* `prometheus-01.nyc1.do.gitlab-runners.gitlab.net`\n* `prometheus-01.us-east1-c.gce.gitlab-runners.gitlab.net`\n* `prometheus-01.us-east1-d.gce.gitlab-runners.gitlab.net`\n\nReference: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5610","state":"closed","created_at":"2018-11-28T20:02:47.266Z","updated_at":"2018-12-17T18:28:55.776Z","closed_at":"2018-12-17T12:41:23.067Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["newhire","oncall","toil"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5634","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5634","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5634/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5634/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5634","relative":"#5634","full":"gitlab-com/gl-infra/reliability#5634"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16188663,"iid":5631,"project_id":1304532,"title":"updates on the monitoring script","description":"1 - change the queries to check the database activity\nselect count(*) from pg_Stat_activity where state !='idle';\n\nselect state, count(*) from pg_Stat_activity group by state;\n\n2 - create pre-flight checks to check the health status of the new cluster: \n-Pgbouncer\n-Patroni \n-Postgresql\n\n3 - Auto check results instead of human analysis.let's try to reduce.\n\n4 - tmux topic... can we remove? and add the logging solution ? ","state":"closed","created_at":"2018-11-28T15:34:41.726Z","updated_at":"2019-12-26T16:02:35.441Z","closed_at":"2018-11-29T16:58:48.958Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Service::Postgres","auto updated","priority::1","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5631","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5631","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5631/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5631/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5631","relative":"#5631","full":"gitlab-com/gl-infra/reliability#5631"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16188312,"iid":5629,"project_id":1304532,"title":"problems with the Application LB","description":"Problems in the tests with the application LB.\n\n```\nNoMethodError (undefined method `load_balancer' for nil:NilClass):\n  ee/lib/gitlab/database/load_balancing/sticking.rb:81:in `load_balancer'\n  ee/lib/gitlab/database/load_balancing/sticking.rb:34:in `all_caught_up?'\n  ee/lib/gitlab/database/load_balancing/sticking.rb:42:in `unstick_or_continue_sticking'\n  ee/lib/gitlab/database/load_balancing/rack_middleware.rb:21:in `stick_or_unstick'\n  ee/lib/ee/api/helpers.rb:33:in `block in current_user'\n  lib/gitlab/utils/strong_memoize.rb:26:in `strong_memoize'\n  ee/lib/ee/api/helpers.rb:28:in `current_user'\n  app/helpers/sentry_helper.rb:9:in `sentry_context'\n  lib/api/helpers.rb:386:in `handle_api_exception'\n  lib/api/api.rb:83:in `block in \u003cclass:API\u003e'\n  ee/lib/omni_auth/strategies/group_saml.rb:22:in `other_phase'\n  lib/gitlab/middleware/multipart.rb:101:in `call'\n  lib/gitlab/request_profiler/middleware.rb:14:in `call'\n  ee/lib/gitlab/jira/middleware.rb:15:in `call'\n  lib/gitlab/middleware/go.rb:17:in `call'\n  lib/gitlab/etag_caching/middleware.rb:11:in `call'\n  lib/gitlab/middleware/read_only/controller.rb:40:in `call'\n  lib/gitlab/middleware/read_only.rb:16:in `call'\n  lib/gitlab/middleware/basic_health_check.rb:25:in `call'\n  lib/gitlab/request_context.rb:20:in `call'\n  lib/gitlab/metrics/requests_rack_middleware.rb:27:in `call'\n  lib/gitlab/middleware/release_env.rb:10:in `call'\n```","state":"closed","created_at":"2018-11-28T15:20:51.543Z","updated_at":"2019-12-26T16:02:36.190Z","closed_at":"2018-11-28T17:21:47.865Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Service::Postgres","auto updated","priority::1","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5629","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5629","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5629/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5629/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5629","relative":"#5629","full":"gitlab-com/gl-infra/reliability#5629"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16188286,"iid":5628,"project_id":1304532,"title":"restart of cluster executed a failover","description":"the restart of the cluster created a failover","state":"closed","created_at":"2018-11-28T15:19:43.161Z","updated_at":"2019-12-26T16:02:37.061Z","closed_at":"2018-11-29T08:45:10.240Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Service::Postgres","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1345655,"username":"3manuek","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1345655/avatar.png","web_url":"https://gitlab.com/3manuek"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1345655,"username":"3manuek","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1345655/avatar.png","web_url":"https://gitlab.com/3manuek"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5628","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5628","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5628/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5628/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5628","relative":"#5628","full":"gitlab-com/gl-infra/reliability#5628"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16188272,"iid":5627,"project_id":1304532,"title":"pending restart on patroni cluster","description":"pending restart on patroni cluster","state":"closed","created_at":"2018-11-28T15:18:57.401Z","updated_at":"2018-12-02T12:45:10.544Z","closed_at":"2018-11-30T14:48:47.994Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":1345655,"username":"3manuek","name":"Emanuel Calvo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1345655/avatar.png","web_url":"https://gitlab.com/3manuek"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5627","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5627","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5627/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5627/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5627","relative":"#5627","full":"gitlab-com/gl-infra/reliability#5627"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22677979,"iid":7225,"project_id":1304532,"title":"Add statusio chatops docs to general incident documentation","description":"Relevant links\nhttps://gitlab.com/gitlab-com/runbooks/blob/master/incidents/general_incidents.md\nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5508","state":"closed","created_at":"2018-11-27T17:05:18.314Z","updated_at":"2021-01-31T19:47:07.409Z","closed_at":"2021-01-31T19:47:07.298Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":[],"milestone":null,"assignees":[],"author":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7225","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7225","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7225/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7225/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7225","relative":"#7225","full":"gitlab-com/gl-infra/reliability#7225"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16145353,"iid":5618,"project_id":1304532,"title":"review runbooks for patroni","description":"We would like to cover the following examples :\nhttps://gitlab.com/gitlab-com/runbooks/merge_requests/831\n\n* start / stop instance / patroni\n* failover\n* add a node\n* remove a node \n* how to start a new cluster","state":"closed","created_at":"2018-11-27T10:43:25.933Z","updated_at":"2019-12-26T16:02:37.886Z","closed_at":"2018-11-30T14:47:24.303Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Service::Postgres","auto updated","priority::1","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5618","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5618","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5618/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5618/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5618","relative":"#5618","full":"gitlab-com/gl-infra/reliability#5618"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16145313,"iid":5617,"project_id":1304532,"title":"changes in staging script for migration","description":"-staging\n - stop all the postgresql clusters\n - change step and stop repmgr first and after check the replication lag.\n - parameters has to be equal","state":"closed","created_at":"2018-11-27T10:41:45.715Z","updated_at":"2019-12-26T16:02:38.762Z","closed_at":"2018-11-27T18:17:10.340Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Service::Postgres","auto updated","priority::1","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5617","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5617","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5617/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5617/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5617","relative":"#5617","full":"gitlab-com/gl-infra/reliability#5617"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16145299,"iid":5616,"project_id":1304532,"title":"create production cluster for patroni / consul","description":"","state":"closed","created_at":"2018-11-27T10:41:08.785Z","updated_at":"2019-12-26T16:02:39.675Z","closed_at":"2018-11-30T11:33:37.952Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Service::Postgres","auto updated","priority::1","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5616","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5616","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5616/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5616/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5616","relative":"#5616","full":"gitlab-com/gl-infra/reliability#5616"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16135243,"iid":5615,"project_id":1304532,"title":"Disable Geo on staging","description":"I just noticed Geo is still enabled on staging.\n\n```ruby\nGeoNode.secondary_nodes\n=\u003e #\u003cActiveRecord::Relation [#\u003cGeoNode id: 100008, primary: false, oauth_application_id: 110492, enabled: true, ... url: \"https://azure.gitlab.com/\", selective_sync_type: \"\", selective_sync_shards: [], verification_max_capacity: 100\u003e]\u003e\n```\n\nThis is a leftover from the GCP migration rehearsals and I don't see any reason why we wouldn't disable Geo completely on staging.\n\n#### Backstory\n\nDuring the rehearsals we did not disable Geo, but added a dummy node to the admin dashboard. This would maintain the Geo event log, which _might_ come in useful if we ever wanted to fallback.","state":"closed","created_at":"2018-11-27T07:55:38.807Z","updated_at":"2019-02-01T12:58:11.871Z","closed_at":"2019-02-01T00:35:57.051Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Geo","auto updated","staging"],"milestone":{"id":753073,"iid":60,"project_id":1304532,"title":"DS team 2019 Week 5","description":"","state":"closed","created_at":"2019-01-07T21:39:55.723Z","updated_at":"2019-03-12T14:16:08.052Z","due_date":"2019-02-10","start_date":"2019-01-28","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/60"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":7,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5615","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5615","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5615/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5615/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5615","relative":"#5615","full":"gitlab-com/gl-infra/reliability#5615"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16112133,"iid":5611,"project_id":1304532,"title":"Permission request: role Kubernetes Engine admin on gitlab-internal project","description":"Hi,\n\nI'm trying to create a kubernetes cluster in the gitlab-internal project for me to test with, but I get the following error:\n\n\u003e  clusterrolebindings.rbac.authorization.k8s.io is forbidden: User \"rpereira@gitlab.com\" cannot create clusterrolebindings.rbac.authorization.k8s.io at the cluster scope: Required \"container.clusterRoleBindings.create\" permission.\n\nCan I be given the required permission/role (Kubernetes Engine Admin possibly)?\n\ncc @northrup","state":"closed","created_at":"2018-11-26T12:24:07.302Z","updated_at":"2018-11-27T18:24:40.916Z","closed_at":"2018-11-27T17:47:51.537Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["access request","auto updated","toil","unblocks others","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},{"id":2967854,"username":"rpereira2","name":"Reuben Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2967854/avatar.png","web_url":"https://gitlab.com/rpereira2"}],"author":{"id":2967854,"username":"rpereira2","name":"Reuben Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2967854/avatar.png","web_url":"https://gitlab.com/rpereira2"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5611","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5611","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5611/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5611/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5611","relative":"#5611","full":"gitlab-com/gl-infra/reliability#5611"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16109352,"iid":5610,"project_id":1304532,"title":"Renew certificates for CI Prometheus servers fleet","description":"Certificates for CI Prometheus servers have expired at November 7th :(\n\nPlease renew them (they should be managed by sslmate) and update proper vaults:\n\n- [x] `prometheus-01.nyc1.do.gitlab-runners.gitlab.net` (vault: `gitlab-runners-prometheus-do-nyc1 ci-prd`)\n- [x] `prometheus-01.us-east1-c.gce.gitlab-runners.gitlab.net` (vault: `gitlab-runners-prometheus-gce-us-east1-c ci-prd`)\n- [x] `prometheus-01.us-east1-d.gce.gitlab-runners.gitlab.net` (vault: `gitlab-runners-prometheus-gce-us-east1-d ci-prd`)","state":"closed","created_at":"2018-11-26T10:27:31.270Z","updated_at":"2019-07-08T20:01:12.948Z","closed_at":"2018-11-28T20:03:00.072Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["ci","oncall","priority::2","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":215818,"username":"tmaczukin","name":"Tomasz Maczukin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a9a99b9665ab7eda2cd7bffd54b1836?s=80\u0026d=identicon","web_url":"https://gitlab.com/tmaczukin"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5610","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5610","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5610/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5610/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5610","relative":"#5610","full":"gitlab-com/gl-infra/reliability#5610"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16102989,"iid":5606,"project_id":1304532,"title":"Runbook and alerting improvements for staging.gitlab.com","description":"As part of https://gitlab.com/gitlab-com/gl-infra/production/issues/586, we need to take the below corrective action items:\n\n- [x] Improve runbook with more troubleshooting tips \n- [x] Create alerts on `node_netstat_TcpExt_ListenDrops` and/or `node_netstat_TcpExt_ListenOverflows`","state":"closed","created_at":"2018-11-26T05:01:12.789Z","updated_at":"2019-01-29T20:48:47.694Z","closed_at":"2019-01-29T19:45:36.099Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["corrective action","oncall"],"milestone":{"id":773435,"iid":71,"project_id":1304532,"title":"2019-02-09 Completed","description":"Current Milestone for ~oncall","state":"closed","created_at":"2019-01-28T22:22:59.905Z","updated_at":"2019-02-10T00:17:32.386Z","due_date":"2019-02-09","start_date":"2019-01-28","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/71"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5606","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5606","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5606/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5606/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5606","relative":"#5606","full":"gitlab-com/gl-infra/reliability#5606"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16071259,"iid":5602,"project_id":1304532,"title":"Cleanup and unify postgres dashboards","description":"The Grafana dashboards for postgres are inconsistent in their use of variables and have hardcoded values for environment, type and prometheus instances in many places, which makes it hard to adapt them for new clusters or envs (like for patroni).\n\nWe should update the dashboards to consistently use selectable variables for `environment` and add a new variable `type` to switch between \"patroni\", \"postgres\" and possibly other db host types in the future. That would make the dashboards re-usable when adding patroni to production.","state":"closed","created_at":"2018-11-23T15:52:02.947Z","updated_at":"2019-12-26T16:02:40.408Z","closed_at":"2018-11-30T14:47:40.545Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database [pl]","Service::Postgres","toil","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5602","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5602","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5602/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5602/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5602","relative":"#5602","full":"gitlab-com/gl-infra/reliability#5602"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16064210,"iid":5596,"project_id":1304532,"title":"301 Redirect for UX Research Panel","description":"Please redirect: https://about.gitlab.com/researchpanel/ to https://about.gitlab.com/community/gitlab-first-look/\n\nPlease note a redirect is already in place from https://about.gitlab.com/researchpanel/ to https://about.gitlab.com/community/researchpanel/ This should be replaced with the above.\n\ncc @williamchia","state":"closed","created_at":"2018-11-23T10:04:26.017Z","updated_at":"2019-03-28T11:47:46.179Z","closed_at":"2018-12-17T16:28:59.329Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["blocked","blocked","oncall","toil"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":841755,"username":"sarahj","name":"Sarah Jones","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/841755/avatar.png","web_url":"https://gitlab.com/sarahj"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5596","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5596","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5596/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5596/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5596","relative":"#5596","full":"gitlab-com/gl-infra/reliability#5596"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16062249,"iid":5595,"project_id":1304532,"title":"Use ElasticSearch Curator for recurring ElasticSearch maintenance tasks","description":"The [Curator tool](https://www.elastic.co/guide/en/elasticsearch/client/curator/current/index.html) completes regular maintenance tasks such as trimming indices, purging data etc by using an easy to configure YAML definition file. Although the activities we currently do can (and are) simply completed with a bash script, the same activities can be done with Curator. The Curator also offers additional functionality of course. Once we upgrade to ES 6.5, the current bash maintenance script won't be necessary (AFAIK) as the functionality is included in ES 6.5. However, Curator may still offer functionality that would be relevant to maintenance of ES.","state":"closed","created_at":"2018-11-23T08:58:00.593Z","updated_at":"2021-01-24T21:37:19.255Z","closed_at":"2021-01-24T21:37:19.176Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["elasticsearch","logging"],"milestone":null,"assignees":[],"author":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5595","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5595","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5595/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5595/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5595","relative":"#5595","full":"gitlab-com/gl-infra/reliability#5595"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16061970,"iid":5594,"project_id":1304532,"title":"Upgrade of Elastic.co hosted ElasticSearch from 5.6.10 to 6.5.1","description":"ElasticSearch version 6.x has been available for a while and is supported by Elastic.co. GitLab should upgrade to take advantage of the latest features and speed improvements. It is also highly recommended by our Elastic.co technical contacts that we upgrade as soon as it is possible. \n\nThe upgrade will be automatically handled by Elastic.co, and should be frictionless. However, we need to be aware of any potential changes to underlying attributes/fields. Breaking changes are described here: https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes.html\n\nThe upgrade will be a rolling upgrade as described here: https://www.elastic.co/guide/en/elasticsearch/reference/current/rolling-upgrades.html. The upgrade will require a full cluster restart which would cause the cluster to be unavailable for a short period of time.\n\nTo complete this tasks, I believe we will need to \n\n* [ ] Determine best approach for testing the upgraded version\n* [ ] Create a new cluster based on latest version of ES\n* [ ] Re-point some data ingestion points, potentially for staging, to new cluster\n* [ ] Ensure no errors and data is available\n* [ ] Remove re-point\n* [ ] Upgrade production cluster\n* [ ] Hope for the best\n\nThe disadvantages of this approach is the full cluster restart and thereby losing logs for a short period of time, which may be acceptable. \n\nI don't know the configuration/environment well enough to determine if the above steps are sufficient or even doable.","state":"closed","created_at":"2018-11-23T08:43:35.618Z","updated_at":"2019-07-15T14:28:21.481Z","closed_at":"2019-07-15T14:06:12.028Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["Observability-reliability","elasticsearch","logging","priority::2"],"milestone":{"id":653500,"iid":50,"project_id":1304532,"title":"Backlog 1","description":"Placeholder milestone to serve as a backlog for upcoming milestones","state":"closed","created_at":"2018-09-20T14:18:27.841Z","updated_at":"2019-02-11T19:25:00.446Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/50"},"assignees":[],"author":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5594","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5594","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5594/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5594/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5594","relative":"#5594","full":"gitlab-com/gl-infra/reliability#5594"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16057209,"iid":5593,"project_id":1304532,"title":"Marvin down, returns a bundler error","description":"# Summary\n\nThe marvin bot on slack is no longer responding to commands but is only showing the error below: \n\n```\n/usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:172:in `user_home': uninitialized constant #\u003cClass:Bundler\u003e::Etc (NameError)\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:197:in`user_bundle_path'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler/settings.rb:377:in `global_config_file'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler/settings.rb:80:in`initialize'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:257:in `new'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:257:in`settings'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:84:in `configured_bundle_path'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:335:in`use_system_gems?'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:519:in `configure_gem_path'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:512:in`configure_gem_home_and_path'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:66:in `configure'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:134:in`definition'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler.rb:101:in `setup'\n   from /usr/lib/ruby/gems/2.5.0/gems/bundler-1.16.2/lib/bundler/setup.rb:20:in`\u003ctop (required)\u003e'\n   from /usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `require'\n   from /usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in`rescue in require'\n   from /usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n   from /home/bundle/cog-command:7:in`\u003cmain\u003e'\nexit status 1\n```","state":"closed","created_at":"2018-11-23T00:54:31.082Z","updated_at":"2018-12-02T12:46:13.329Z","closed_at":"2018-11-27T00:09:50.013Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["chatops","oncall","toil","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2560314,"username":"jerome","name":"Jerome Uy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2560314/avatar.png","web_url":"https://gitlab.com/jerome"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5593","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5593","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5593/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5593/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5593","relative":"#5593","full":"gitlab-com/gl-infra/reliability#5593"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16038360,"iid":5585,"project_id":1304532,"title":"sentry-01-sv-ops.c.gitlab-ops.interal","description":"```\n  ================================================================================\n  Recipe Compile Error\n  ================================================================================\n\n  Chef::Exceptions::RecipeNotFound\n  --------------------------------\n  could not find recipe server for cookbook postgresql\n\n  Cookbook Trace:\n  ---------------\n    /var/chef/cache/cookbooks/gitlab-sentry/recipes/default.rb:9:in `from_file'\n\n  Relevant File Content:\n  ----------------------\n  /var/chef/cache/cookbooks/gitlab-sentry/recipes/default.rb:\n\n    2:  # Cookbook Name:: gitlab-sentry\n    3:  # Recipe:: default\n    4:  #\n    5:  # Copyright 2016, GitLab Inc.\n    6:  #\n    7:  # All rights reserved - Do Not Redistribute\n    8:  #\n    9\u003e\u003e include_recipe 'postgresql::server'\n   10:\n   11:  # Fetch secrets\n   12:  sentry_secrets = get_secrets(node['gitlab-sentry']['secrets']['backend'],\n   13:    node['gitlab-sentry']['secrets']['path'],\n   14:    node['gitlab-sentry']['secrets']['key'])\n   15:\n   16:  sentry_conf = Chef::Mixin::DeepMerge.deep_merge(sentry_secrets['gitlab-sentry'], node['gitlab-sentry'].to_hash)\n   17:\n   18:  ## nginx\n```","state":"closed","created_at":"2018-11-22T12:10:19.206Z","updated_at":"2019-01-22T19:25:15.257Z","closed_at":"2019-01-22T18:59:53.755Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["oncall"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5585","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5585","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5585/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5585/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5585","relative":"#5585","full":"gitlab-com/gl-infra/reliability#5585"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16034098,"iid":5582,"project_id":1304532,"title":"setup a cloudwatch exporter so we can get cloudwatch metrics into prometheus (for AWS)","description":"AS long as we still have critical infrastructure in AWS we should be monitoring it, besides a few ec2 instances it would be nice to also have storage metrics for s3 for the buckets we have not yet migrated.\n\nhttps://github.com/prometheus/cloudwatch_exporter","state":"closed","created_at":"2018-11-22T09:26:23.951Z","updated_at":"2020-06-10T01:08:31.690Z","closed_at":"2020-06-09T17:09:36.639Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["auto updated","corrective action","newhire","priority::2","workflow-infra::Ready"],"milestone":{"id":653500,"iid":50,"project_id":1304532,"title":"Backlog 1","description":"Placeholder milestone to serve as a backlog for upcoming milestones","state":"closed","created_at":"2018-09-20T14:18:27.841Z","updated_at":"2019-02-11T19:25:00.446Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/50"},"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5582","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5582","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5582/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5582/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5582","relative":"#5582","full":"gitlab-com/gl-infra/reliability#5582"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16021789,"iid":5581,"project_id":1304532,"title":"Load Balancer Redundancy Threshold too high","description":"We get FeLoadBalancerLossOfRedundancy alerts to pagers any time there is ANY loss of redundancy in the load balancers.  While we want to know if this happens, that should be more of an informational thing until we get below about 80% to 90% redundancy.  What are the load balancers for, if not to automate managing our redundancy for us.\n\nWe should be able to lose some of our redundancy in the load balancer without setting off pagers.  To implement this, I've changed the threshold from 100% to 90% in https://gitlab.com/gitlab-com/runbooks/merge_requests/832\n\n@gitlab\\-com/gl\\-infra - Please discuss if this is the appropriate threshold or what might be better.","state":"closed","created_at":"2018-11-21T19:54:35.017Z","updated_at":"2018-12-02T12:45:09.483Z","closed_at":"2018-11-29T18:26:19.124Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["alert","oncall","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5581","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5581","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5581/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5581/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5581","relative":"#5581","full":"gitlab-com/gl-infra/reliability#5581"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16017987,"iid":5580,"project_id":1304532,"title":"Create an alert when we are missing haproxy logs","description":"It's happened too many times.  Our logs have disappeared from stackdriver.  Whether it be an incorrectly configured exclusion rule, or a misconfigured td-agent.  Both of these have negatively impacted our visibility into our environment.  Let's prevent this from happening by somehow alerting when we don't have logs available.\n\nAcceptance Criterion:\n* Determine a method for which we can alert on this\n* Determine the appropriate threshold (if necessary)","state":"closed","created_at":"2018-11-21T16:15:36.060Z","updated_at":"2020-01-09T18:19:43.203Z","closed_at":"2020-01-09T17:11:35.821Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["corrective action","priority::1"],"milestone":{"id":995576,"iid":42,"group_id":1112072,"title":"Dev \u0026 Ops: 2019-09-09 - 2019-09-22","description":"","state":"closed","created_at":"2019-09-09T14:46:08.050Z","updated_at":"2019-09-23T09:43:07.078Z","due_date":"2019-09-22","start_date":"2019-09-09","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/42"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5580","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5580","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5580/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5580/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5580","relative":"#5580","full":"gitlab-com/gl-infra/reliability#5580"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16017584,"iid":5579,"project_id":1304532,"title":"Adapt postgres dashboards for Patroni","description":"We need to adapt the postgres dashboards for the Patroni cluster.\n\nDuplicate existing dashboards and change them to point to the “patroni” tagged instances where necessary.\n\ncc @ahmadsherif @Finotto","state":"closed","created_at":"2018-11-21T15:55:17.738Z","updated_at":"2018-12-02T12:45:09.234Z","closed_at":"2018-11-23T15:53:57.869Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Database [pl]","auto updated","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5579","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5579","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5579/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5579/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5579","relative":"#5579","full":"gitlab-com/gl-infra/reliability#5579"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16017555,"iid":5578,"project_id":1304532,"title":"Add preparation steps for backups to patroni migration plan","description":"","state":"closed","created_at":"2018-11-21T15:54:25.415Z","updated_at":"2018-12-02T12:45:09.048Z","closed_at":"2018-11-22T16:39:57.462Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5578","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5578","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5578/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5578/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5578","relative":"#5578","full":"gitlab-com/gl-infra/reliability#5578"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16016939,"iid":5577,"project_id":1304532,"title":"Handbook update to include a service list with owners and responsible","description":"As part of the onboarding, we have identified a potential improvement which is a list of services that are currently known (and potentially managed by gl-infra). This update should be in the Handbook.\n\nSome of the information is being captured in the Google Doc https://docs.google.com/document/d/1xxE-dZIArF59MMH0pbrnjRz3KlrtoNUOKnDwbf7N4L0. Once completed, the essential information must be extracted and added to the handbook.\n\nPotentially a table with some of the following:\n* Service URL\n* Description\n* Owner\n* Responsible team\n* Any potential documentation","state":"closed","created_at":"2018-11-21T15:27:32.925Z","updated_at":"2022-08-02T06:06:48.356Z","closed_at":"2022-08-02T06:06:48.321Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["documentation","documentation"],"milestone":null,"assignees":[],"author":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"type":"ISSUE","assignee":null,"user_notes_count":13,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5577","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5577","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5577/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5577/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5577","relative":"#5577","full":"gitlab-com/gl-infra/reliability#5577"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16014211,"iid":5574,"project_id":1304532,"title":"Compile list of recommended resources for PostgreSQL (both engineering and infra)","description":"Since this question pops up frequently, let's compile a list of recommended reads (like books and stuff) for PostgreSQL related topics for both engineering and infra. \n\nLet's maintain that list at https://about.gitlab.com/handbook/engineering/infrastructure/database (or somewhere on the handbook).","state":"closed","created_at":"2018-11-21T14:06:17.264Z","updated_at":"2020-11-26T15:08:35.044Z","closed_at":"2019-08-06T13:26:48.782Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Database [pl]","auto updated"],"milestone":null,"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":15,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5574","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5574","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5574/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5574/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5574","relative":"#5574","full":"gitlab-com/gl-infra/reliability#5574"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16009745,"iid":5573,"project_id":1304532,"title":"Streamline service access requests with gl-security Access Requests","description":"Streamlining the access requests to be provisioned by gl-infra with the gl-security access request model would ensure compliance while simplifying the process flow. The idea is to ensure all access requests are managed using https://gitlab.com/gitlab-com/access-requests/issues but any requests requiring gl-infra to provision are passed to gl-infra in a suitable and timely manner. The issue is about creating the proper process or technical flow to ensure this is achieved.\n\nWe would like to avoid access requests being created directly in the gl-infra issue tracker. E.g. avoiding this [https://about.gitlab.com/handbook/engineering/#amazon-web-services-aws](https://about.gitlab.com/handbook/engineering/#amazon-web-services-aws)\n\nTasks:\n* [ ] Agree appropriate model with gl-security\n* [ ] Update access request template\n* [ ] Update Security owned application list with agreements\n* [ ] Update handbook with appropriate links","state":"closed","created_at":"2018-11-21T10:43:56.268Z","updated_at":"2022-10-28T14:27:40.716Z","closed_at":"2022-10-28T14:27:40.411Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["auto updated"],"milestone":null,"assignees":[{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"}],"author":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"type":"ISSUE","assignee":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"user_notes_count":12,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5573","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5573","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5573/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5573/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5573","relative":"#5573","full":"gitlab-com/gl-infra/reliability#5573"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":16009513,"iid":5571,"project_id":1304532,"title":"Refactor common config in fluentd templates","description":"There is a lot of copy and paste in the fluentd templates that can be refactored using includes.\nIt was also noticed that the prometheus mixin is missing in the redis config https://gitlab.com/gitlab-cookbooks/gitlab_fluentd/merge_requests/55#note_119012949\n\nThis issue is to pull out as much of the common config as we can to make these templates a bit more manageable.\n\nhttps://gitlab.com/gitlab-cookbooks/gitlab_fluentd","state":"closed","created_at":"2018-11-21T10:33:58.795Z","updated_at":"2022-10-28T16:25:47.044Z","closed_at":"2022-10-28T14:27:58.813Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["auto updated","newhire","workflow-infra::Ready"],"milestone":null,"assignees":[{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5571","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5571","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5571/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5571/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5571","relative":"#5571","full":"gitlab-com/gl-infra/reliability#5571"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15991313,"iid":5566,"project_id":1304532,"title":"Adjust disk capacity for postgres","description":"Currently, we provision 5 TB of SSD disk space per database instance in both `gstg` and `gprd`.\n\nActual current usage is:\n* `gstg`: 0.8 TB\n* `gprd`: 2.3 TB\n\nLeaving room for WAL and still [maxing out IO performance](https://cloud.google.com/compute/docs/disks/performance#size_price_performance), the proposal here is to reduce the disk capacity to:\n\n* `gstg`: 1.5 TB - utilization approx. 54 %\n* `gprd`: 4 TB - utilization approx. 58 %\n\nWe have 8 instances per environment. The saving in `gstg` is 28 TB and in `gprd` 8 TB.\n\nThis translates to a saving of roughly 6,300 USD per month.\n\nPerformance-wise, this does *not* impact `gprd`. For `gstg`, IO performance this change reduces sustained read performance to roughly half of what we currently have. However, we also have smaller instance types in `gstg` anyways.\n\nWorth to note that increasing a disk is easy and does not require a reboot.","state":"closed","created_at":"2018-11-20T15:56:02.420Z","updated_at":"2018-12-17T18:28:55.531Z","closed_at":"2018-12-03T20:35:51.546Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database [pl]","toil"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5566","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5566","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5566/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5566/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5566","relative":"#5566","full":"gitlab-com/gl-infra/reliability#5566"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5,"epic":{"id":1054,"iid":5,"title":"Postgresql HA","url":"/groups/gitlab-com/gl-infra/-/epics/5","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":15979239,"iid":5565,"project_id":1304532,"title":"Logging of IP client addresses in nginx -\u003e ElasticSearch","description":"For troubleshooting purposes, it would be useful to have the client IP address available in ElasticSearch/Kibana for troubleshooting and correlation of activities. At the moment, we only have the IP address of the proxy. This information is most likely already available on the nginx proxy but is not forwarded to ElasticSearch as far as I understand.","state":"closed","created_at":"2018-11-20T11:05:11.989Z","updated_at":"2021-07-08T15:01:10.131Z","closed_at":"2021-07-08T15:01:10.113Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["configuration","priority::4","security","severity::3","workflow-infra::Cancelled"],"milestone":null,"assignees":[],"author":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"type":"ISSUE","assignee":null,"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5565","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5565","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5565/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5565/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5565","relative":"#5565","full":"gitlab-com/gl-infra/reliability#5565"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15977306,"iid":5564,"project_id":1304532,"title":"Configure wal-e archiving/backups for Patroni cluster","description":"After staging has failed over to the Patroni cluster, configure wal-e and make sure backups are working with Patroni:\n\n* [x] Setup wal-e on patroni instances\n* [x] Review archiving related postgres config\n","state":"closed","created_at":"2018-11-20T10:24:34.330Z","updated_at":"2018-12-03T21:24:29.004Z","closed_at":"2018-12-03T20:37:41.568Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","priority::1"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5564","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5564","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5564/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5564/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5564","relative":"#5564","full":"gitlab-com/gl-infra/reliability#5564"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5,"epic":{"id":1054,"iid":5,"title":"Postgresql HA","url":"/groups/gitlab-com/gl-infra/-/epics/5","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":15977260,"iid":5563,"project_id":1304532,"title":"Review staging env / cookbooks for patroni","description":"Please consider and review the maintenance plan.\n\nNotes:\n\n* [ ] Disk size is 5TB, probably 4TB (in gprd) / 1.5TB (in gstg) is more than enough and we save $$$. Check performance implications. -\u003e https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5566 -\u003e https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/632\n* [x] Compile a postgres-config diff between gprd and gprd-patroni before it goes live and make sure we're aware of all changes.\n* [ ] Do we still need to manage `shmall` and `shmmax` ourselves or is this a relict? AFAIK it was only necessary in older postgres versions. \n* [x] Increase disk size for root volume `/` to 100 GB. -\u003e https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/632","state":"closed","created_at":"2018-11-20T10:22:53.693Z","updated_at":"2018-12-02T12:48:30.174Z","closed_at":"2018-11-23T13:07:06.554Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","priority::1","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5563","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5563","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5563/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5563/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5563","relative":"#5563","full":"gitlab-com/gl-infra/reliability#5563"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5,"epic":{"id":1054,"iid":5,"title":"Postgresql HA","url":"/groups/gitlab-com/gl-infra/-/epics/5","group_id":1112072,"human_readable_end_date":"Sep 13, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":15958497,"iid":5560,"project_id":1304532,"title":"Clean up old S3 registry bucket","description":"With the successful migration of the registry to GCS (https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/4710), we need to look into cleaning out and removing the old bucket.\n\nThe size of the registry bucket is:\n\n```\nSelection: 0 Objects, 1 Folders Total size: 41.8 TB Total objects: 2983000\n```","state":"closed","created_at":"2018-11-19T17:04:28.334Z","updated_at":"2019-04-03T13:08:58.060Z","closed_at":"2019-03-26T15:47:12.933Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["Cloud Spend","Executing","Infrastructure","Object Storage","Savings-Estimate::$50k - $100k / QTR","cleanup","cost","moved 1"],"milestone":{"id":818305,"iid":10,"group_id":1112072,"title":"DS Team 2019 Week 13","description":"","state":"closed","created_at":"2019-03-13T23:28:47.476Z","updated_at":"2019-04-10T22:15:31.907Z","due_date":"2019-04-06","start_date":"2019-03-24","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/10"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-03-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5560","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5560","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5560/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5560/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5560","relative":"#5560","full":"gitlab-com/gl-infra/reliability#5560"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15940463,"iid":5555,"project_id":1304532,"title":"Database Reviews","description":"* [x] Sean https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8070\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22971#note_118167275\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23058\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23098#note_118544178\n* [x] https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/8446#note_118367363\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23057#note_118367296\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23098#note_119437237\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23314/diffs#note_119525749\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23236#note_119675631\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/19740#note_120436389\n* [x] https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/22744\n* [x] Andreas https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/19740#note_120734824\n* [x] Fri https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/6878\n* [x] Fri https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/23412","state":"closed","created_at":"2018-11-19T09:03:41.779Z","updated_at":"2018-12-03T15:24:20.588Z","closed_at":"2018-12-03T10:08:19.607Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5555","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":14,"completed_count":14},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5555","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5555/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5555/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5555","relative":"#5555","full":"gitlab-com/gl-infra/reliability#5555"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15920535,"iid":5554,"project_id":1304532,"title":"Infra Team Hiring/Questionnaire grading for Nov 18 - Dec 1","description":"Team bucket to account for effort into hiring.\nQuestionnaires and interview time.\n\nStarting with 13 Questionnaires to do.\n\nThe candidates to be assessed can be found here: https://app2.greenhouse.io/plans/4050457002/candidates?hiring_plan_id%5B%5D=4050457002\u0026job_status=open\u0026sort=last_activity+asc\u0026stage_status_id%5B%5D=4000006002\u0026type=all\u0026in_stages%5B%5D=Assessment\n\n\nList reviewed 20 of November :\n\nPending tickets : \nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5569\nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5570","state":"closed","created_at":"2018-11-17T17:54:06.407Z","updated_at":"2018-12-02T12:58:44.975Z","closed_at":"2018-11-30T14:46:30.539Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["auto updated"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5554","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":13,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5554","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5554/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5554/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5554","relative":"#5554","full":"gitlab-com/gl-infra/reliability#5554"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15913358,"iid":5553,"project_id":1304532,"title":"RCA for 2018-10-24 Incident - back up of Merge Request Queue processing in Sidekiq","description":"**Please note:** if the incident relates to sensitive data, or is security related consider\nlabeling this issue with ~security and mark it confidential.\n***\n\nCopying information from: https://docs.google.com/document/d/1yWJFbf3z7PBgdxQAxrRPFg0B2fkUjPFZY39G6QmHXU8/edit#heading=h.si79cynhlbp7\n\n\n## Summary\n\nWorking notes from the day(s) of the event: \n\nStarting from issue: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5215\n\nSlack threads:\n1st thread: https://gitlab.slack.com/archives/C101F3796/p1540390946000100\n2st thread: https://gitlab.slack.com/archives/C101F3796/p1540404258000100\n3st thread: https://gitlab.slack.com/archives/C101F3796/p1540405525000100\nRoot cause thread: https://gitlab.slack.com/archives/C101F3796/p1540409583000100\nhttps://gitlab.slack.com/archives/C101F3796/p1540412033000100\n\n\nContributors:  Stan, Valery, Northrup, Mike Kozono, Dave, Jose \n\n\nService(s) affected : \nTeam attribution : \nMinutes downtime or degradation : \n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident? (i.e. service outage, sub-service brown-out, exposure of sensitive data, ...)\n\nActions that normally finish in a few seconds, but which are delayed over several minutes, appear to be broken until they finish. Some actions were run multiple times. \n\n- Who was impacted by this incident? (i.e. external customers, internal customers, specific teams, ...)\nAll GitLab.com users\n- How did the incident impact customers? (i.e. preventing them from doing X, incorrect display of Y, ...)\nActions that normally finish in a few seconds, but which are delayed over several minutes (IDK what the peak delay was), appear to be broken until they finish. E.g.:\nMerge requests diffs not being updated\nMerge request widgets not updating\nRepo mirrors not working\n\nSome actions were run multiple times, e.g.:\nMany system notes were duplicated\n\n\n- How many attempts were made to access the impacted service/feature?\n- How many customers were affected?\n- How many customers tried to access the impacted service/feature?\n\nInclude any additional metrics that are of relevance.\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n- Did alarming work as expected?\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n{{The first alert\n\n\nMirror updates overdue\n\n\nSidekiq availability and service operation rates\n\n\nUpdateMergeRequestsWorker running jobs\n\n\nUpdateMergeRequestsWorker errors\n\n\nPostgres locks\n\n\nSidekiq queues\nhttps://dashboards.gitlab.net/d/9GOIu9Siz/sidekiq-stats?orgId=1\u0026panelId=3\u0026fullscreen\u0026from=1540375200000\u0026to=1540418400000\n\n\n\n\n\f\nDetection \u0026 Response\n\nHow was the incident detected? \nPullMirrorsOverdueQueueTooLarge alert https://gitlab.slack.com/archives/C101F3796/p1540398268000100 and reports to #production, and issues being created\nDid alarming work as expected? \nYes and no \nYes - PullMirrorsOverdueQueueTooLarge worked\nNo - Further alarming around the system operating outside of normal - pressure on Redis and other areas only was going to #alerts-general - SRE thinks we are ready to push some of those up to alerting via PagerDuty\nHow long did it take from the start of the incident to its detection? \nThe alarm was the first warning\n\nHow long did it take from detection to remediation? \nAbout 42 minutes until we shut off the feature and recycled the workers, but the queues took another 3 hours to drain due to duplicate jobs locking rows and being killed and retried.\n\nWere there any issues with the response to the incident? \nNo, it just took time to diagnose and mitigate, and at the moment (6 hrs after detection) we still don’t have a root cause.\n}}\n\n\n## Timeline\n\n2018-10-24\n\n14:29 UTC - Feature flag for gitlab_sidekiq_reliable_fetcher was enabled in production and staging. \n\n16:11 UTC - John Northrup has noticed that “pipeline_processing:update_head_pipeline_for_merge_request” queue is growing. \n16:24 UTC - We got the first alert “PullMirrorsOverdueQueueTooLarge”.\n16:59 UTC - Feature flag for gitlab_sidekiq_reliable_fetcher was disabled in production and staging. \n\n17:24 UTC - Alert manager has reported that “PullMirrorsOverdueQueueTooLarge” is resolved\n17:29 UTC - We’ve got a report from the GitLab team member that it takes too much time for MR to be updated\n18:04 UTC - It still takes several minutes for MR to be updated\n18:23 UTC - We see lots of UpdateMergeRequestsWorker jobs that fails due to “PG::QueryCanceled: ERROR:  canceling statement due to statement timeout”\n18:52 UTC - We tweet the message to GitLab.com status https://twitter.com/gitlabstatus/status/1055170090839097344\n20:31 UTC - We tweet that we’re back to normal\n21:36 UTC - We noticed that there were duplicated jobs https://gitlab.slack.com/archives/C101F3796/p1540417012000100?thread_ts=1540409583.000100\u0026cid=C101F3796 since multiple Sidekiq workers were processing the same job JID at the same time\n\n\n\n## Root Cause Analysis\n\nCurrent theory: A bug in the reliable fetch gem https://gitlab.com/gitlab-org/sidekiq-reliable-fetch/issues/5 caused jobs to be duplicated each time a Sidekiq worker was started up. Certain kinds of duplicated jobs (UpdateMergeRequestsWorker in particular) caused too many SQL update queries that were targeted to the same record. It caused lots of locks in the database that in response caused a number of Sidekiq jobs to grow rapidly. \n\n### What went well?:\n* We were alarmed about the problems and immediately started fixing it\n* We were alarmed before we got any user report\n* The situation has been stabilized pretty quickly\n\n\n### What went wrong?:\n* We don’t know the root of the problem yet. Probably because of a not sufficient monitoring and logging \n* Regarding the new queue for update_head_pipeline_for_merge_request - did we miss something in communication with SRE / Engineering?\n* We didn’t declare an incident early - with no CMOC we didn’t tweet every 15 minutes to give more frequent updates to our customers\n* We didn’t have any rollback option when we noticed the issue.This data migrations should be back compatible to a previous state.\n* The sidekiq reliable fetch gem, which we forked off an inactive project, does not seem to have been run in an environment with more than one Sidekiq worker. We did not have any proof that it had been proven in a production environment, so we should have treated it with more caution. More testing and comprehensive staging tests may not have caught this bug, but it would have increased our chances.\n\n\n### Where did we get lucky?\nWe got alarm notification from least expected place from\n\n\nOpen questions:\nWe have identified the most likely cause of duplicate jobs, but it is not confirmed yet for sure https://gitlab.com/gitlab-org/sidekiq-reliable-fetch/issues/5\n\n\n## Corrective actions\n\n\n* We need to find out why some MRs have too many diffs\nhttps://gitlab.com/gitlab-org/gitlab-ce/issues/53153\n* We have to find out why there were duplicates\nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5215\n* We need to reproduce the ReliableFetcher#requeue_on_startup doesn't work with multiple Sidekiq processes issue to confirm that it was the root cause. Then fix it.\nhttps://gitlab.com/gitlab-org/sidekiq-reliable-fetch/issues/5\n\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2018-11-16T23:40:45.287Z","updated_at":"2018-11-17T17:44:03.989Z","closed_at":"2018-11-16T23:42:07.802Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["unscheduled"],"milestone":{"id":668260,"iid":54,"project_id":1304532,"title":"2018-11-17 Completed","description":"","state":"closed","created_at":"2018-10-06T19:10:46.236Z","updated_at":"2018-11-17T17:49:37.353Z","due_date":"2018-11-17","start_date":"2018-11-04","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/54"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5553","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5553","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5553/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5553/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5553","relative":"#5553","full":"gitlab-com/gl-infra/reliability#5553"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15911015,"iid":5552,"project_id":1304532,"title":"[OKR:KR] Deliver 20 significant updates to Infrastructure Handbook","description":"Deliver 20 significant updates to Infrastructure Handbook =\u003e 9/20 (45%)","state":"closed","created_at":"2018-11-16T19:43:08.635Z","updated_at":"2019-12-20T00:12:25.402Z","closed_at":"2019-12-19T23:28:22.543Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","okr:kr"],"milestone":null,"assignees":[{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-12-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5552","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":19,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5552","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5552/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5552/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5552","relative":"#5552","full":"gitlab-com/gl-infra/reliability#5552"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":19,"epic":{"id":2081,"iid":19,"title":"[OKR] Make all user-visible services ready for mission-critical workloads.","url":"/groups/gitlab-com/gl-infra/-/epics/19","group_id":1112072,"human_readable_end_date":"Dec 31, 2018","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":15910080,"iid":5551,"project_id":1304532,"title":"[OKR:O] Maximize user-visible services (particularly GitLab.com) MTBF","description":"","state":"closed","created_at":"2018-11-16T19:24:07.781Z","updated_at":"2020-11-06T15:42:50.720Z","closed_at":"2020-11-06T15:42:50.502Z","closed_by":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"labels":["auto updated","okr:o"],"milestone":null,"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-12-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5551","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":20,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5551","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5551/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5551/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5551","relative":"#5551","full":"gitlab-com/gl-infra/reliability#5551"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15910068,"iid":5550,"project_id":1304532,"title":"[OKR:O] Minimize user-visible services (particularly GitLab.com) MTTR","description":"","state":"closed","created_at":"2018-11-16T19:22:32.514Z","updated_at":"2020-06-04T15:11:21.546Z","closed_at":"2020-06-04T15:11:21.499Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["auto updated","okr:o"],"milestone":null,"assignees":[{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-12-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5550","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":20,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5550","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5550/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5550/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5550","relative":"#5550","full":"gitlab-com/gl-infra/reliability#5550"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15909903,"iid":5549,"project_id":1304532,"title":"[OKR:O] Make all user-visible services (particularly GitLab.com) ready for mission-critical workloads.","description":"","state":"closed","created_at":"2018-11-16T19:18:19.225Z","updated_at":"2020-11-06T15:42:33.336Z","closed_at":"2020-11-06T15:42:33.309Z","closed_by":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"labels":["auto updated","okr:o"],"milestone":null,"assignees":[{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2018-12-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5549","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":20,"blocking_issues_count":0,"has_tasks":true,"task_status":"","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5549","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5549/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5549/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5549","relative":"#5549","full":"gitlab-com/gl-infra/reliability#5549"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15904200,"iid":5548,"project_id":1304532,"title":"Evaluate our pingdom request timeouts","description":"To reduce our page volume we increased our pingdom timeouts from 5second to 20seconds with https://gitlab.com/gitlab-com/runbooks/merge_requests/827 . This is very high and we should take some time to evaluate whether these long request times are isolated, what is causing them, and whether they really need to be this high.","state":"closed","created_at":"2018-11-16T15:17:52.116Z","updated_at":"2022-12-13T20:39:16.072Z","closed_at":"2022-11-15T18:01:05.682Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["Reliability::P2","Service::Monitoring-Other","moved 1","newhire","team::Observability","team::Reliability","work::general","workflow-infra::Cancelled"],"milestone":{"id":2856582,"iid":212,"group_id":1112072,"title":"Observability Squad Q4","description":"https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/838","state":"closed","created_at":"2022-11-02T15:16:16.292Z","updated_at":"2023-02-16T16:31:49.245Z","due_date":"2023-01-31","start_date":"2022-11-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/212"},"assignees":[],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":null,"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5548","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5548","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5548/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5548/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5548","relative":"#5548","full":"gitlab-com/gl-infra/reliability#5548"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15897517,"iid":5543,"project_id":1304532,"title":"Incident Slack Tooling","description":"**------------------**\u003cbr\u003e\n**Update 2019-12-06**\n\nWe created this epic: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/100 to keep track of the overall incident management automation effort which originated from this issue. Keeping track of the effort under an epic made more sense since the subtasks would enumerate pretty quickly. Therefore, closing this issue. \u003cbr\u003e\n**------------------**\n\nIn order to streamline incident handling, we must **reduce cognitive load** on the Incident Team.\n\nOne way to do so is to ensure procedures are as simple as possible so that the Incident Team, and, in particular, the `EOC` and the `IMOC`, can focus on the technical resolution of the incident instead of the necessary procedural calls that are intended to provide visibility into and awareness of the incident.\n\nAnother way is to improve automation to support said procedures. In particular:\n\n* **incident declaration**: \n  * opening `production` issue, \n  * creating tracking document, and\n  * creating `infrastructure` root-cause analysis issue\n  * optionally, severity assignment (and possibly `IMOC` escalation) and Security escalation (in cases of abuse) to notify the Security team\n* **incident management**:\n  * editing incident severity (and possibly `IMOC` escalation)\n  * Security escalation\n* **incident data management**:\n  * ensure incident issues have severity labels\n  * ensure incident issues have service labels\n  * ensure incident issues have attribution labels\n  * ensure incident issues have timely RCAs \n\n## Samples\n\nAs I am not entirely familiar with Slack's custom command capabilities, the following examples are provided as a CLI implementation:\n\n#### Incident Declaration and Resolution\n\n```\n\u003e incident declare [--abuse] \u003cseverity\u003e [@user] \u003cincident description\u003e\n```\n\n* Creates a tracking document in Google docs from a template (ideally filling out some data)\n* Creates an **incident** issue in the `production` queue and assigns it to *\\@user*; if user is not specified, it is assumed to be the `EOC`\n* Creates a corresponding issues in the `infrastructure` queue and links it to both the incident issue and the tracking document; assigned to EOC.\n* When the `--abuse` flag is used, Security on-call is paged through PagerDuty\n\nThis command should return some way (an `\u003cid\u003e`) to refer to the incident from Slack. In commands that would normally use the `\u003cid\u003e`, when omitted, it is assumed to be the currently opened incident.\n\n```\n\u003e incident resolve [\u003cid\u003e]\n```\n\nResolves the incident by closing `production` incident issue.\n\n#### Incident Management\n\n```\n\u003e incident list\n```\n\nLists open, on-going incidents, if any.\n\n```\n\u003e incident status\n```\n\nProvides status on current/last incident (open, closed)\n\n```\n\u003e incident \u003cid\u003e severity \u003cseverity\u003e\n```\n\nChanges incident severity to `\u003cseverity\u003e`; when severity is `S1` or `S2`, escalate to `IMOC`.\n\n#### Incident Data Management\n\nA bot that ensures incident issues have proper labels.","state":"closed","created_at":"2018-11-16T11:15:21.780Z","updated_at":"2019-12-06T08:12:59.040Z","closed_at":"2019-12-06T06:57:28.544Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["For Prioritization","auto updated","corrective action","meta","team::Reliability"],"milestone":null,"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":20,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5543","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5543","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5543/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5543/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5543","relative":"#5543","full":"gitlab-com/gl-infra/reliability#5543"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15892832,"iid":5541,"project_id":1304532,"title":"Move all pingdom checks over to runbook configuration","description":"Currently, a subset of pingdom checks are managed as YAML. See https://gitlab.com/gitlab-com/runbooks/blob/master/pingdom/pingdom.yml\n\nNow that we're confident in this approach, we should bring them all in so that they're all managed through the YAML configuration. \n\nRelated slack thread: https://gitlab.slack.com/archives/C101F3796/p1542354588701400\n\ncc @jarv","state":"closed","created_at":"2018-11-16T08:35:27.553Z","updated_at":"2018-12-11T06:27:40.075Z","closed_at":"2018-12-11T03:02:46.116Z","closed_by":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"labels":["Observability","auto updated","moved 2","newhire"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":2601632,"username":"aamarsanaa","name":"Amarbayar Amarsanaa","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2601632/avatar.png","web_url":"https://gitlab.com/aamarsanaa"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5541","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5541","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5541/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5541/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5541","relative":"#5541","full":"gitlab-com/gl-infra/reliability#5541"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15887120,"iid":5539,"project_id":1304532,"title":"RCA for pingdom check failure on 2018-11-15 for https://gitlab.com/gitlab-com/gitlab-ce/merge_requests/","description":"**Please note:** if the incident relates to sensitive data, or is security related consider\nlabeling this issue with ~security and mark it confidential.\n***\n\n## Summary\n\nFollow-up to gitlab-com/gl-infra/production#572; Pingdom reported failing checks while accessing https://gitlab.com/gitlab-com/gitlab-ce/merge_requests/.\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident? (i.e. service outage, sub-service brown-out, exposure of sensitive data, ...)\n- Who was impacted by this incident? (i.e. external customers, internal customers, specific teams, ...)\n- How did the incident impact customers? (i.e. preventing them from doing X, incorrect display of Y, ...)\n- How many attempts were made to access the impacted service/feature?\n- How many customers were affected?\n- How many customers tried to access the impacted service/feature?\n\nInclude any additional metrics that are of relevance.\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n- Did alarming work as expected?\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n## Timeline\n\nYYYY-MM-DD\n\n- 00:00 UTC - something happened\n- 00:01 UTC - something else happened\n- ...\n\nYYYY-MM-DD+1\n\n- 00:00 UTC - and then this happened\n- 00:01 UTC - and more happened\n- ...\n\n\n## Root Cause Analysis\n\nThe purpose of this document is to understand the reasons that caused an incident, and to create mechanisms to prevent it from recurring in the future. A root cause can **never be a person**, the way of writing has to refer to the system and the context rather than the specific actors.\n\nFollow the \"**5 whys**\" in a **blameless** manner as the core of the post mortem.\n\nFor this it is necessary to start with the incident, and question why it happened. Keep iterating asking \"why?\" 5 times. While it's not a hard rule that it has to be 5 times, it helps to keep questions get deeper in finding the actual root cause. \n\nKeep in min that from one \"why?\" there may come more than one answer, consider following the different branches.\n\n###Example of the usage of \"5 whys\"\nThe vehicle will not start. (the problem)\n\n1. Why? - The battery is dead. \n2. Why? - The alternator is not functioning.\n3. Why? - The alternator belt has broken.\n4. Why? - The alternator belt was well beyond its useful service life and not replaced. \n5. Why? - The vehicle was not maintained according to the recommended service schedule. (Fifth why, a root cause)\n\n## What went well\n\nStart with the following:\n\n- Identify the things that worked well or as expected.\n- Any additional call-outs for what went particularly well.\n\n## What can be improved\n\nStart with the following:\n\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\n- Is there anything that could have been done to improve the detection or time to detection?\n- Is there anything that could have been done to improve the response or time to response?\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\n- Did we have any indication or beforehand knowledge that this incident might take place?\n\n\n## Corrective actions\n\n- List issues that have been created as corrective actions from this incident.\n- For each issue, include the following:\n    - \u003cBare Issue link\u003e - Issue labeled as ~\"corrective action\".\n    - Include an estimated date of completion of the corrective action.\n    - Incldue the named individual who owns the delivery of the corrective action.\n\n\n## Guidelines\n\n* [Blameless Postmortems Guideline](https://about.gitlab.com/handbook/infrastructure/#postmortems)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2018-11-16T00:57:50.145Z","updated_at":"2019-07-08T20:03:10.372Z","closed_at":"2018-11-27T19:48:43.036Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["auto updated","priority::3"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5539","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5539","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5539/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5539/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5539","relative":"#5539","full":"gitlab-com/gl-infra/reliability#5539"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15887023,"iid":5537,"project_id":1304532,"title":"RCA for about.gitlab.com 503s for certificate expired","description":"**Please note:** if the incident relates to sensitive data, or is security related consider\nlabeling this issue with ~security and mark it confidential.\n***\n\n## Summary\n\nFor approximately 20 minutes on 2018-11-16 unauthenticated requests to https://gitlab.com and all requests to https://about.gitlab.com were returning 503 errors because of an expired certificate. \n\n\n## Impact \u0026 Metrics\n\nThe following services were impacted:\n\n* https://about.gitlab.com\n* unauthenticated requests to https://gitlab.com (because of the redirect to about.gitlab.com)\n\n\nThe following services remained unaffected during the outage:\n\n* authenticated logins to https://gitlab.com\n* pages, registry, api, all gitlab.com services\n\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n- Did alarming work as expected?\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n## Timeline\n\n2018-11-16\n\n- 00:03 UTC - we started seeing expired certificate errors for about.gitlab.com\n- 00:06 UTC - curl for `about.gitlab.com` cert reveals that it's good\n- 00:08 UTC - curl for `about-src.gitlab.com` cert reveals that it's expired at 00:00 2018-11-16\n- 00:10 UTC - started purchase process for cert renewal of `about-src.gitlab.com`\n- 00:15 UTC - update chef vault for `about-gitlab-com _default` with new certs\n- 00:18 UTC - manually run chef-client on `about-src.gitlab.com` to roll in new certificate\n- 00:21 UTC - `about-src.gitlab.com` serving new cert now\n- 00:25 UTC - modify Fastly configuration for Origin validation to accept `about-src.gitlab.com` as TLS name\n- 00:27 UTC - Roll out Fastly configuration for Origin SSL TLS name change\n- 00:28 UTC - about.gitlab.com is operating normally.\n\n\n## Root Cause Analysis\n\nThe certificate on the origin server for `about.gitlab.com` had expired causing the CDN provider to throw errors. We didn't realize the cert was expiring or about to expire because when we moved the production site `about.gitlab.com` to be fully CDN resolved we never re-branded the origin server, in stead leaving the old certificate on the server while the CDN provider generated a new one. This then was further compounded by the fact that our certificate monitoring in prometheus for advanced alerting was never reconfigured either, so it was still looking at `about.gitlab.com` rather than the origin server of `about-src.gitlab.com` for cert expiration alerting.\n\n\n## What went well\n\n- Alerting triggered immediately in both Slack ad PagerDuty that there was an issue\n\n## What can be improved\n\n- We need a more automated means to iterate over the domains that we have certs on and monitor when they're going to expire.\n\n\n## Corrective actions\n\n\n## Guidelines\n\n* [Blameless Postmortems Guideline](https://about.gitlab.com/handbook/infrastructure/#postmortems)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2018-11-16T00:44:32.629Z","updated_at":"2020-08-22T08:13:06.501Z","closed_at":"2018-12-03T23:13:18.670Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["auto updated","priority::1"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5537","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5537","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5537/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5537/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5537","relative":"#5537","full":"gitlab-com/gl-infra/reliability#5537"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15882989,"iid":5536,"project_id":1304532,"title":"template for Patroni failover - postgresql steps","description":"Please review the MR : \nhttps://gitlab.com/gitlab-com/migration/merge_requests/202\n\nThe repo is : git@gitlab.com:gitlab-com/migration.git\n\nCreate the steps for the maintenance for the Patroni failover.\nPostgresql / Repmgr / Patroni steps to setupthe new cluster to production.\n\nPlease everything automated. Won't be allowed any direct interaction on hosts. All actions from the bastions.\n\nConsider also to update/clean up the monitoring to do not consider REPMGR the master cluster.\n\n@ahmadsherif  / Ongres @3manuek  are working on the postgresql.\n\n@glopezfernandez @andrewn @dawsmith  @3manuek  @abel3  @ahmadsherif fyi","state":"closed","created_at":"2018-11-15T19:01:20.874Z","updated_at":"2019-07-08T19:57:35.057Z","closed_at":"2018-11-30T14:37:57.299Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","priority::1"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5536","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5536","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5536/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5536/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5536","relative":"#5536","full":"gitlab-com/gl-infra/reliability#5536"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15882948,"iid":5535,"project_id":1304532,"title":"template for Failover to Patroni","description":"Please review the MR : \nhttps://gitlab.com/gitlab-com/migration/merge_requests/202\n\nThe repo is : git@gitlab.com:gitlab-com/migration.git\n\nCreate the steps for the maintenance for the Patroni failover.\nClose/Open traffic.\nRedirect applications for the correct Load balancers/ databases.\n\nPlease everything automated. Won't be allowed any direct interaction on hosts. All actions from the bastions.\n\nAhmad / Ongres are working on the postgresql.\n\n@glopezfernandez @andrewn @dawsmith  @3manuek  @abel3  @ahmadsherif fyi","state":"closed","created_at":"2018-11-15T18:57:54.950Z","updated_at":"2019-07-08T19:57:34.823Z","closed_at":"2018-11-16T14:48:59.936Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["auto updated","priority::1"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5535","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5535","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5535/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5535/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5535","relative":"#5535","full":"gitlab-com/gl-infra/reliability#5535"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15870615,"iid":5531,"project_id":1304532,"title":"create pagerduty slack commands for /imoc /cmoc","description":"The idea will be for oncall engineer type /imoc and page ( by pagerduty the on-call engineer )  and for cmoc type /cmoc and page ( by pagerduty the on-call cmoc ) at slack.\n\nsee the current /pd command for reference.","state":"closed","created_at":"2018-11-15T11:51:48.529Z","updated_at":"2018-11-21T06:28:01.764Z","closed_at":"2018-11-21T06:28:01.587Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["priority::2"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5531","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5531","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5531/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5531/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5531","relative":"#5531","full":"gitlab-com/gl-infra/reliability#5531"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15870563,"iid":5530,"project_id":1304532,"title":"Review and Clean-up PagerDuty Alerts","description":"Check and review the source events that are generating alerts.\n\n@dsylva  could you please add your report here?\n\nDesign Doc : https://docs.google.com/document/d/1dgpACz_clUNLdRRipxUqwlAAg3grG7A6wad0miHyezw\n\nNumber of incidents: https://docs.google.com/spreadsheets/d/1m3Qp-9fLCKSw38o3t48tlUbSwlW6F6Ymq-5Zxg8EPBw","state":"closed","created_at":"2018-11-15T11:49:00.282Z","updated_at":"2020-11-18T21:36:05.079Z","closed_at":"2020-11-18T21:36:05.039Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["priority::2","workflow-infra::Ready"],"milestone":{"id":653500,"iid":50,"project_id":1304532,"title":"Backlog 1","description":"Placeholder milestone to serve as a backlog for upcoming milestones","state":"closed","created_at":"2018-09-20T14:18:27.841Z","updated_at":"2019-02-11T19:25:00.446Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/50"},"assignees":[],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5530","time_stats":{"time_estimate":0,"total_time_spent":3600,"human_time_estimate":null,"human_total_time_spent":"1h"},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5530","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5530/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5530/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5530","relative":"#5530","full":"gitlab-com/gl-infra/reliability#5530"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15867797,"iid":5529,"project_id":1304532,"title":"Stackdriver logs are missing HAProxy logs","description":"Currently, stackdriver appears to be missing large volumes of haproxy logs.\n\nRelated slack thread: https://gitlab.slack.com/archives/CB3LSMEJV/p1542275675780800\n\nThis may be related to last week's haproxy slowdown: https://gitlab.com/gitlab-com/gl-infra/production/issues/553\n\nExample: https://console.cloud.google.com/logs/viewer?authuser=0\u0026project=gitlab-production\u0026minLogLevel=0\u0026expandAll=false\u0026customFacets\u0026limitCustomFacetWidth=true\u0026dateRangeStart=2018-11-14T09%3A53%3A20.960Z\u0026dateRangeEnd=2018-11-15T09%3A53%3A20.960Z\u0026interval=P1D\u0026resource=gce_instance\u0026scrollTimestamp=2018-11-14T14%3A58%3A19.013464014Z\u0026filters=text%3Ahaproxy\u0026advancedFilter=resource.type%3D%22gce_instance%22%0Alabels.tag%3D%22haproxy%22%0AjsonPayload.frontend_name!%3D%22pages_https%22%0AjsonPayload.backend!%3D%22registry%22%0AjsonPayload.frontend_name!%3D%22pages_http%22%0AjsonPayload.frontend_name!%3D%22altssh%22%0AjsonPayload.environment%3D%22gprd%22%0AjsonPayload.server!%3D%22web-cny-01-sv-gprd%22%0AjsonPayload.server!%3D%22web-cny-02-sv-gprd%22%0AjsonPayload.server!%3D%22git-cny-01-sv-gprd%22%0AjsonPayload.server!%3D%22git-cny-02-sv-gprd%22","state":"closed","created_at":"2018-11-15T10:17:20.113Z","updated_at":"2018-12-02T12:50:04.400Z","closed_at":"2018-11-21T16:56:09.622Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["logging","newhire","oncall","toil"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5529","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5529","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5529/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5529/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5529","relative":"#5529","full":"gitlab-com/gl-infra/reliability#5529"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15859519,"iid":5527,"project_id":1304532,"title":"Block search crawlers for all related domains","description":"@plafoucriere discovered assets.gitlab-static.net URLs are indexed by Google. [original message](https://gitlab.slack.com/archives/C0259241C/p1542242346577000)\n\nHe also pointed out results for gprd.gitlab.com show up in Google as well.\n\n[Results with assets.gitlab-static.net](https://www.google.com/search?source=hp\u0026ei=4tjsW4qcLYXn_QaN_72wBA\u0026q=site%3Aassets.gitlab-static.net\u0026btnK=Google+Search\u0026oq=site%3Aassets.gitlab-static.net\u0026gs_l=psy-ab.3...3962.12004..12186...2.0..0.186.1815.30j2......0....1..gws-wiz.....0..0j0i131j0i3j0i10.LdbggfhUnlk)  \n[Results with gprd.gitlab.com](https://www.google.com/search?ei=8djsW67yG867ggeegruQDg\u0026q=site%3Agprd.gitlab.com\u0026oq=site%3Agprd.gitlab.com\u0026gs_l=psy-ab.3...34064.39612..39985...0.0..0.186.987.17j1......0....1..gws-wiz.rUoOGCRUsE4)\n\nWhat are our best options to manage the crawl status for these domains and any subdomains?  I'm hoping we can make a simple robots.txt update to fix both of these. 😄\n\nDo we have any documentation with domains we use across GitLab? I'd love to go through this list and find any other outlying index issues.\n\ncc @sytses @lbanks","state":"closed","created_at":"2018-11-15T02:26:11.092Z","updated_at":"2019-01-17T13:14:47.217Z","closed_at":"2018-11-16T05:20:19.356Z","closed_by":{"id":478289,"username":"northrup","name":"John Northrup","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f076b1aa65652a2852e897baf0a65ba0?s=80\u0026d=identicon","web_url":"https://gitlab.com/northrup"},"labels":["corrective action","unscheduled"],"milestone":{"id":668260,"iid":54,"project_id":1304532,"title":"2018-11-17 Completed","description":"","state":"closed","created_at":"2018-10-06T19:10:46.236Z","updated_at":"2018-11-17T17:49:37.353Z","due_date":"2018-11-17","start_date":"2018-11-04","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/54"},"assignees":[],"author":{"id":2453970,"username":"shanerice","name":"Shane Rice","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2453970/avatar.png","web_url":"https://gitlab.com/shanerice"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5527","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5527","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5527/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5527/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5527","relative":"#5527","full":"gitlab-com/gl-infra/reliability#5527"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15850458,"iid":5524,"project_id":1304532,"title":"Add nginx config test before restart nginx for about.gitlab.com","description":"In https://gitlab.com/gitlab-com/gl-infra/production/issues/560, about.gitlab.com went down because of bad redirects. This can be immediately remedied by forcing a config test BEFORE restarting nginx. Currently the about.gitlab.com cookbook just restarts nginx if the config changes. \n\n- [cookbook-about-gitlab-com](https://gitlab.com/gitlab-cookbooks/cookbook-about-gitlab-com)\n- [relevant recipe](https://gitlab.com/gitlab-cookbooks/cookbook-about-gitlab-com/blob/master/recipes/nginx.rb#L13-17)","state":"closed","created_at":"2018-11-14T16:10:44.052Z","updated_at":"2018-12-18T11:12:30.988Z","closed_at":"2018-12-11T09:40:28.486Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["auto updated","corrective action","newhire","toil"],"milestone":{"id":702333,"iid":56,"project_id":1304532,"title":"2018-12-16 Completed","description":"","state":"closed","created_at":"2018-11-07T14:51:52.534Z","updated_at":"2018-12-18T18:04:48.369Z","due_date":"2018-12-16","start_date":"2018-12-02","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/56"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5524","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5524","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5524/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5524/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5524","relative":"#5524","full":"gitlab-com/gl-infra/reliability#5524"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15849777,"iid":5523,"project_id":1304532,"title":"Admin access to staging.gitlab.com for Tony Carella","description":"* Grant admin access to Tony Carella (acarella@gitlab.com) on staging.gitlab.com\n* Supports the security team, as they are taking some responsibilities for IT Operations at this time\n* No one on the security team has admin access to staging at this time. This will help us cater to access requests coming in for staging.\n* access-requests\n","state":"closed","created_at":"2018-11-14T15:45:00.729Z","updated_at":"2018-11-30T15:07:14.945Z","closed_at":"2018-11-21T15:48:56.908Z","closed_by":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"labels":["access request","oncall","toil","unblocks others","unscheduled"],"milestone":{"id":697388,"iid":55,"project_id":1304532,"title":"2018-12-01 Completed","description":"","state":"closed","created_at":"2018-11-01T18:53:32.778Z","updated_at":"2018-12-03T15:24:38.720Z","due_date":"2018-12-01","start_date":"2018-11-18","expired":true,"web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/milestones/55"},"assignees":[{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"}],"author":{"id":1877050,"username":"former-jthavisouk","name":"Jim","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/4de2f708f5fe199226eca1e81674544c?s=80\u0026d=identicon","web_url":"https://gitlab.com/former-jthavisouk"},"type":"ISSUE","assignee":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5523","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5523","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5523/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5523/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5523","relative":"#5523","full":"gitlab-com/gl-infra/reliability#5523"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":15836792,"iid":5520,"project_id":1304532,"title":"Evaluate Ubuntu Advantage for livepatching support","description":"Ubuntu offers the [Ubuntu Advantage programme](https://gitlab.slack.com/archives/CB3LSMEJV/p1542155941686600) (at a cost) which offers many benefits, a particular benefit for us is livepatching. With a large fleet of instances and major concerns about what can be rebooted, and if rebooted, in which order, live patching of the e.g. kernel becomes very relevant. Additionally, it could help mitigate attacks such as Spectre and Meltdown, which require urgent attention for everything, particularly public cloud hosted instances. The latest example of [speculative execution attacks](https://arstechnica.com/gadgets/2018/11/spectre-meltdown-researchers-unveil-7-more-speculative-execution-attacks/) just enforces the need for such focus and feature. \n\nThe cost of Ubuntu Advantage may seem high ($250 per instance per year) but I believe the benefits outweigh the cost. Listed below are some of the benefits, I can think of:\n\n* (Official Ubuntu benefit) Landscape, the Ubuntu server and desktop management tool\n* (Official Ubuntu benefit) 24/7 telephone and online support portal\n* (Official Ubuntu benefit) Canonical Livepatch Service\n* (Official Ubuntu benefit) Ubuntu 12.04 Extended Security Maintenance\n* (Personal opinion) Reduce cost by not having individual(s) tasked with preparing and executing reboots\n* (Personal opinion) Reduce potential financial and reputational cost of failed reboots and failed reboot chains\n* (Personal opinion) Reduce security risk and improve security posture by mitigating 0-day and similar attacks\n* (Personal opinion) Provide overview of fleet and state of the operating system of the fleet\n\nDisadvantages:\n* Introducing a tool which makes automated changes to our environment which may impact service stability\n* Cost \n* ... probably more I can't think of right now ...\n\nI do not currently have access to data about the number of instances but to reduce cost, it could be considered to use Ubuntu Advantage for only a select few instances that are troublesome to reboot or instances that are public facing. My preference would be to cover the entire fleet but that may be financially unvailable. However, my impression is that GitLab infrastructure has a number of less used instances, which could be shuttered to reduce the overall cost of the infrastructure. Maybe this could even offset some of the Ubuntu Advantage cost.\n\nAny thoughts on the above are very welcome.\n\nThanks,\nPeter","state":"closed","created_at":"2018-11-14T09:24:59.405Z","updated_at":"2018-11-15T08:44:06.747Z","closed_at":"2018-11-15T06:03:49.283Z","closed_by":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"labels":["Compliance","Discussion","availability","configuration","cost","security"],"milestone":null,"assignees":[{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"}],"author":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"type":"ISSUE","assignee":{"id":3063149,"username":"peterdam","name":"Peter Dam","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063149/avatar.png","web_url":"https://gitlab.com/peterdam"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":1,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/5520","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/5520","notes":"https://gitlab.com/api/v4/projects/1304532/issues/5520/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/5520/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#5520","relative":"#5520","full":"gitlab-com/gl-infra/reliability#5520"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]