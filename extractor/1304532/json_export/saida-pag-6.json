[{"id":26249792,"iid":8254,"project_id":1304532,"title":"Remove SSLMate verification records from DNS Terraform env config + state","description":"Noted https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/1124, the import of records from DNS into terraform config obtained SSLMate verification records, which are maintained (via API) by SSLMate itself, and should not be in terraform.\n\nThey need to be removed from the config, and from the terraform state (so we don't actually delete them from Route53)","state":"closed","created_at":"2019-10-23T20:15:59.531Z","updated_at":"2022-08-04T20:03:58.180Z","closed_at":"2020-01-16T20:54:51.663Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8254","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8254","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8254/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8254/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8254","relative":"#8254","full":"gitlab-com/gl-infra/reliability#8254"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26230890,"iid":8247,"project_id":1304532,"title":"RCA: 2019-10-23: Short outage of gitlab.com","description":"\u003c!--\n**Please note:** if the incident relates to sensitive data, or is security related consider\nlabeling this issue with ~security and mark it confidential.\n*** \n--\u003e\n\nIncident: gitlab-com/gl-infra/production#1272\n\n## Summary\n\nWe had 2 short outages of gitlab.com related to issues with our redis cluster being caused by elevated memory usage.\n\n- Service(s) affected : ~\"Service:Web\" \n- Team attribution : \n- Minutes downtime or degradation : 14m\n\nFor calculating duration of event, use the [Platform Metrics Dashboard](https://dashboards.gitlab.net/d/ZUei7TkWz/platform-metrics?orgId=1) to look at appdex and SLO violations.\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident?\n  - all services depending on Redis didn't work during the outage, which was affecting most services.\n- Who was impacted by this incident?\n  - all users\n- How did the incident impact customers?\n  - 500 errors on gitlab.com\n- How many attempts were made to access the impacted service/feature?\n- How many customers were affected?\n- How many customers tried to access the impacted service/feature?\n\nInclude any additional metrics that are of relevance.\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n  - pingdom alerts and immediate reports from users\n- Did alarming work as expected?\n  - yes\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n## Root Cause Analysis\n\nThe purpose of this document is to understand the reasons that caused an incident, and to create mechanisms to prevent it from recurring in the future. A root cause can **never be a person**, the way of writing has to refer to the system and the context rather than the specific actors.\n\nFollow the \"**5 whys**\" in a **blameless** manner as the core of the root-cause analysis.\n\nFor this it is necessary to start with the incident, and question why it happened. Keep iterating asking \"why?\" 5 times. While it's not a hard rule that it has to be 5 times, it helps to keep questions get deeper in finding the actual root cause. \n\nKeep in min that from one \"why?\" there may come more than one answer, consider following the different branches.\n\n### Example of the usage of \"5 whys\"\nThe vehicle will not start. (the problem)\n\n1. Why? - The battery is dead. \n2. Why? - The alternator is not functioning.\n3. Why? - The alternator belt has broken.\n4. Why? - The alternator belt was well beyond its useful service life and not replaced. \n5. Why? - The vehicle was not maintained according to the recommended service schedule. (Fifth why, a root cause)\n\n## What went well\n\nStart with the following:\n\n- Identify the things that worked well or as expected.\n- Any additional call-outs for what went particularly well.\n\n## What can be improved\n\nStart with the following:\n\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\n- Is there anything that could have been done to improve the detection or time to detection?\n- Is there anything that could have been done to improve the response or time to response?\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\n- Did we have any indication or beforehand knowledge that this incident might take place?\n\n## Corrective actions\n\n- annotations for feature flags https://gitlab.com/gitlab-com/gl-infra/delivery/issues/525\n- metrics for oom events https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/8250\n- make sure we have proper memory saturation alerts for redis\n- research why we didn't fail over to redis-02\n- fix sending redis logs to elastic: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/8252\n- Upgrading to Redis 4 or higher would allow us to have used the `MEMORY PURGE` option to deallocate memory, but this is not available to us since we're still on Redis 3.2 https://gitlab.com/gitlab-org/omnibus-gitlab/issues/3785\n- Add Redis memory fragmentation alerts https://gitlab.com/gitlab-com/runbooks/merge_requests/1547\n- Add specialised Redis memory saturation metric https://gitlab.com/gitlab-com/runbooks/merge_requests/1548\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-10-23T12:32:17.812Z","updated_at":"2022-08-04T20:04:05.270Z","closed_at":"2019-12-08T20:37:32.735Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["IncidentReview","Service::Web","oncall","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8247","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8247","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8247/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8247/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8247","relative":"#8247","full":"gitlab-com/gl-infra/reliability#8247"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26226264,"iid":8246,"project_id":1304532,"title":"Improve project restoration runbook","description":"While working on https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/8239 I needed to spend a lot of time to research db restoration steps that are not covered in enough detail in the [runbook](https://gitlab.com/gitlab-com/runbooks/blob/master/howto/community-project-restore.md).\n\nWe should add documentation for how to find the right base backup, which variables need to be set for the pipeline, necessary timeout settings to let the job complete, which gcp project the restore instance is running in etc.\n\nThankfully, part of that already is done in this branch: https://ops.gitlab.net/gitlab-com/gl-infra/gitlab-restore/postgres-gprd/tree/T4cC0re-master-patch-46363. But it's not merged and the README.md instructions contain typos (it should be `IS_RESTORE` instead of `IS_RECOVERY` and `PSQL_BACKUP_TIME` instead of `PQSL_BACKUP_TIME`).\n\n/cc @T4cC0re","state":"closed","created_at":"2019-10-23T10:13:46.540Z","updated_at":"2019-12-06T21:42:16.856Z","closed_at":"2019-10-30T13:19:26.307Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["SRE:On-call","backup","oncall","team::Reliability","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8246","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8246","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8246/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8246/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8246","relative":"#8246","full":"gitlab-com/gl-infra/reliability#8246"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26225375,"iid":8245,"project_id":1304532,"title":"Add external access to Kubernetes Prometheus","description":"We need a simplified way to directly access Prometheus server console (`:9090`).\n\n1. Document/script proxy/tunneling access.\n2. Create web service with auth to access.","state":"closed","created_at":"2019-10-23T09:53:42.754Z","updated_at":"2022-08-04T20:04:06.497Z","closed_at":"2020-04-09T21:41:49.496Z","closed_by":{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"},"labels":["kubernetes","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8245","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8245","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8245/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8245/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8245","relative":"#8245","full":"gitlab-com/gl-infra/reliability#8245"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26222269,"iid":8242,"project_id":1304532,"title":"Clean up recording rules in Kubernetes","description":"Recording rules fail in Kubernetes due to label differences in Chef vs K8s.\n\n1. Fix rules so they work in both.\n2. Split or filter out K8s-incompatible rules.\n\nThis is breaking out one of the items from https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/8186","state":"closed","created_at":"2019-10-23T08:48:58.604Z","updated_at":"2022-09-01T00:40:26.893Z","closed_at":"2022-09-01T00:40:26.879Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Reliability::P4","kubernetes","team::Reliability","workflow-infra::Triage"],"milestone":null,"assignees":[],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8242","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8242","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8242/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8242/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8242","relative":"#8242","full":"gitlab-com/gl-infra/reliability#8242"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26170502,"iid":8229,"project_id":1304532,"title":"Deploy redundant praefect nodes on gstg behind a load balancer","description":"Spawning from a discussion on the Praefect readiness review https://gitlab.com/gitlab-com/gl-infra/readiness/merge_requests/10:\n\nLet's try deploying redundant praefect nodes behind a GCP load balancer to avoid introducing a new SPOF in our infrastructure.\n\n- [x] Terraform changes: Terraform changes https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/1189\n- [x] chef-repo MR: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/2167\n\n/cc @gl-gitaly","state":"closed","created_at":"2019-10-21T19:16:32.644Z","updated_at":"2022-08-04T20:04:16.625Z","closed_at":"2019-11-14T22:41:56.729Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8229","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8229","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8229/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8229/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8229","relative":"#8229","full":"gitlab-com/gl-infra/reliability#8229"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":199,"epic":{"id":14582,"iid":199,"title":"HA Gitaly on GitLab.com","url":"/groups/gitlab-com/-/epics/199","group_id":6543,"human_readable_end_date":"Jan 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":26160887,"iid":8224,"project_id":1304532,"title":"DNS Record modification for domain gitlab.design","description":"UX would like to run research using UX prototypes POCs and we need a domain name to host that under. We already have `gitlab.design` domain that is used to redirect to the Pyjamas site.\n\nCan we have subdomain `research.gitlab.design` allocated for the prototypes? It would be great to add this as a DNS Zone in GCP, so that going forward, people can add second-level subdomains to this sub-domain and point their instances to them.\n\nPS: The redirect site does not have TLS, we should fix that too while we're at it.","state":"closed","created_at":"2019-10-21T13:54:25.196Z","updated_at":"2019-12-06T21:47:32.580Z","closed_at":"2019-11-05T17:39:52.217Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["SRE:On-call","team::Reliability","workflow-infra::Done"],"milestone":{"id":1060421,"iid":55,"group_id":1112072,"title":"W45 Dev \u0026 Ops","description":"","state":"closed","created_at":"2019-11-05T10:13:26.190Z","updated_at":"2019-12-03T22:08:39.621Z","due_date":"2019-11-17","start_date":"2019-11-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/55"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":18,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8224","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8224","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8224/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8224/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8224","relative":"#8224","full":"gitlab-com/gl-infra/reliability#8224"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26121604,"iid":8215,"project_id":1304532,"title":"Discuss: How to make SLO alerts for CI Runners less noisy and more actionable?","description":"The SLO alerts for CI Runners does not yet meet reasonable standards for an actionable alert.  We all know this, but I wanted to jot down a few specific things that would make it better.\n\n- This alert still has an unreasonably low signal-to-noise ratio.\n    - The apdex score dropped below SLO [9 times in the last 24 hours](https://dashboards.gitlab.net/d/general-service/general-service-platform-metrics?orgId=1\u0026from=1571420700000\u0026to=1571507100000\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-type=ci-runners\u0026var-stage=main\u0026var-sigma=2\u0026fullscreen\u0026panelId=7), 5 of which lasted long enough for PagerDuty to alert (see [screenshot as of 17:45 UTC](/uploads/4bb87a9e4b688fe32461617bc310bcd1/Screenshot_from_2019-10-19_10-56-08.png)).\n- This alert has no runbook yet.\n    - The PagerDuty alert refers to `troubleshooting/service-ci-runners.md`, but that file does not exist in the [runbooks repo](https://ops.gitlab.net/gitlab-com/runbooks/tree/master/troubleshooting).\n    - The PagerDuty alert itself gives a recommended response which amounts to: look at other metrics and logs for signs of abusive behavior, high request rate, or slow responses from dependent services.  That's good generic advice for any SLO violation, but it's too vague to be actionable.\n- What dashboards are useful for troubleshooting CI Runners?\n    - The [\"CI Runners Service\" -\u003e \"CI\" dashboard](https://dashboards.gitlab.net/d/000000159/ci?orgId=1\u0026refresh=5m) shows workload-related metrics:\n        - queue sizes\n        - percentiles of durations of recently completed jobs\n        - job count by runner node\n    - The [\"Service Platform Metrics\" dashboard](https://dashboards.gitlab.net/d/general-service/general-service-platform-metrics?orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-type=ci-runners\u0026var-stage=main\u0026var-sigma=2\u0026fullscreen\u0026panelId=7) can show the latency apdex graph when `type` is set to `ci-runners`.\n- Should the SLO should be reframed in a way that makes it more achievable?\n    - The following are just my initial thoughts, but I believe @andrewn is already advocating for improving this, and he probably already has much more specific ideas for improvements.\n    - The CI Runner workload is largely outside of our control (e.g. user-defined jobs may take any amount of time to complete, and they may depend on external resources that are outside of both our control and visibility.  Example: Would SLO be violated by a sufficiently large number of jobs running `sleep 1000`?\n    - Reframing the SLO in terms that address *only the controllable aspects* of our platform's execution of jobs would make this goal more achievable.  What working agreements do we already have for the CI Runner platform, describing to our end-users under what conditions a job execution may be aborted, such as job timeout deadline, usage quotas on machine resources (CPU, network bandwidth, max connection count, max disk IOPS, etc.)?\n    - We may benefit from comparing our set of quotas to those of other platform providers (e.g. GCP, AWS, Heroku, etc.).  Other platform providers also share this problem of needing to set achievable SLOs that are resilient to abusive behavior and support auto-scaling, auto-termination, and auto-rate-limiting.\n- Both auto-scaling and building automatic defensive mitigations for abuse requires having more specific goals than just a latency target for an unconstrained input workload.  More prescriptively describing the service level would also be super helpful in making concrete proposals for automating tactics to achieve these goals while also improving cost efficiency and reducing toil.\n\ncc @gitlab-com/gl-infra","state":"closed","created_at":"2019-10-19T19:14:29.528Z","updated_at":"2022-08-04T22:00:38.010Z","closed_at":"2021-08-30T23:16:23.082Z","closed_by":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"labels":["Discussion","Service::CI Runners","abuse","wg_CIQueueStability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},{"id":2469083,"username":"erushton","name":"Elliot Rushton","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/4194662ce4a5b5f53e61689fd7a2daf9?s=80\u0026d=identicon","web_url":"https://gitlab.com/erushton"},{"id":4228834,"username":"DarrenEastman","name":"Darren Eastman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4228834/avatar.png","web_url":"https://gitlab.com/DarrenEastman"}],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8215","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8215","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8215/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8215/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8215","relative":"#8215","full":"gitlab-com/gl-infra/reliability#8215"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":187,"epic":{"id":14151,"iid":187,"title":"Stable CI Queue Times on .com","url":"/groups/gitlab-com/-/epics/187","group_id":6543,"human_readable_end_date":"Nov 30, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":26102795,"iid":8212,"project_id":1304532,"title":"Add Slack Integration to Sentry","description":"**Problem:** Server 500 errors are being collected by Sentry and the appropriate teams are not learning about those errors on a timely basis. \n\n**Solution:**\nI would like to configure Sentry to have richer Slack integration. This can be done following these steps:\nhttps://forum.sentry.io/t/how-to-configure-slack-in-your-on-prem-sentry/3463\n\nI have already created a Slack Application as per the configuration documents. \n\nThe 3 pieces of data to complete the integration are \n\n```\nslack.client-id: \u003c'client id'\u003e\nslack.client-secret: \u003cclient secret\u003e\nslack.verification-token: \u003cverification token\u003e\n```\n\nThese values need to be added to the config.yml for Sentry via the chef recipe. \n\nThe values for those variables are stored in 1Password Team Vault under the record 'Slack App for Secure Sentry'.\n\nOnce those values are added to config.yml for Sentry and Sentry has been restarted, the \"+Add Workspace\" on this page should work, and allow us to configure the rest of the alerting rules. \nhttps://sentry.gitlab.net/settings/gitlab/gitlabcom/integrations/slack/","state":"closed","created_at":"2019-10-18T19:45:22.832Z","updated_at":"2021-06-24T08:10:06.431Z","closed_at":"2019-11-09T01:04:39.027Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8212","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8212","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8212/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8212/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8212","relative":"#8212","full":"gitlab-com/gl-infra/reliability#8212"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26063153,"iid":8205,"project_id":1304532,"title":"Kubernetes ingress crashing for version.gitlab.com","description":"The new kubernetes ingress for GitLab Services which is managed by the GitLab Kubernetes integration keeps crashing.  It's unclear whether this is a problem with the integration, with the app, or with the version of kubernetes that we are running.\n\nThe migration from AWS to GKE has been rolled back until this is solved.\n\nThe ingress pods show `0 of 1 updated replicas available - Pods have warnings`\n\nAnd the Pod Logs show:\n\n```\nI1018 02:53:08.287037       7 main.go:150] Received SIGTERM, shutting down\nI1018 02:53:08.287102       7 nginx.go:321] shutting down controller queues\nI1018 02:53:08.287131       7 status.go:115] updating status of Ingress rules (remove)\nI1018 02:53:08.303618       7 status.go:134] removing address from ingress status ([35.243.233.112])\nI1018 02:53:08.308592       7 status.go:342] updating Ingress version-gitlab-com-6491770-production/production-auto-deploy status to []\nI1018 02:53:08.316522       7 nginx.go:329] stopping NGINX process...\n```\n\nThe ingress in question is: https://console.cloud.google.com/kubernetes/deployment/us-east1/gs-production-gke/gitlab-managed-apps/ingress-nginx-ingress-controller?project=gs-production-efd5e8\u0026authuser=1\u0026cloudshell=false\u0026organizationId=769164969568\u0026tab=overview\u0026deployment_overview_active_revisions_tablesize=50\u0026duration=PT1H\u0026pod_summary_list_tablesize=20\u0026service_list_datatablesize=20\n\n\n//cc @jameslopez","state":"closed","created_at":"2019-10-18T03:08:51.377Z","updated_at":"2022-08-04T22:00:45.138Z","closed_at":"2019-10-30T23:05:36.063Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Service::Version","kubernetes","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8205","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8205","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8205/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8205/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8205","relative":"#8205","full":"gitlab-com/gl-infra/reliability#8205"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26061435,"iid":8204,"project_id":1304532,"title":"Investigate intermittent response time spikes concurrently affecting multiple services","description":"Hunt for clues about intermittent slowness reported for GitLab.com.\n\nDuring at least the last 2 days (maybe more), several internal users have reported observing brief periods of slow performance on the web UI and git-push.  These reports so far lack details, but reviewing the frontend metrics revealed several brief but large spikes in the 50th percentile response times recorded by HAProxy.  Several (but not all) of HAProxy's backend service pools concurrently reported these spikes, which implies a shared dependency of these specific services may have been stressed.\n\nThis issue aims to:\n* Document the findings so far.\n* Try to identify which internal services were stressed during a few of these spikes.\n* If a pattern emerges, try to determine more about the nature of the bottleneck (e.g. higher overall request rate, higher rate of slow/costly requests, contention over a machine resource, lock contention, saturation of a resource pool, etc.).","state":"closed","created_at":"2019-10-18T00:57:53.905Z","updated_at":"2022-08-04T22:00:45.717Z","closed_at":"2021-02-16T21:45:01.544Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Investigation","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8204","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8204","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8204/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8204/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8204","relative":"#8204","full":"gitlab-com/gl-infra/reliability#8204"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26060003,"iid":8203,"project_id":1304532,"title":"Scale up `review-apps` runners for about-src.gitlab.com","description":"Right now we have 80+ jobs stuck waiting for the single `about-src.gitlab.com` runner to pick up the `review-apps` jobs:\n\n![image](/uploads/4e991349df60e5e7b18b010587e2207c/image.png)\n\nhttps://gitlab.com/gitlab-com/www-gitlab-com/-/jobs?page=2\u0026scope=pending\n\nI think we should scale this up, although the bulk of the time may be downloading the artifacts. We may need more cores on that machine as well to handle this.","state":"closed","created_at":"2019-10-17T23:24:15.783Z","updated_at":"2022-08-04T22:00:46.297Z","closed_at":"2019-12-27T14:06:37.651Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":1057451,"iid":54,"group_id":1112072,"title":"CI/CD \u0026 Enablement - November 2019","description":"","state":"closed","created_at":"2019-11-01T22:45:09.199Z","updated_at":"2019-12-04T21:44:40.512Z","due_date":"2019-11-30","start_date":"2019-11-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/54"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8203","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":6,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8203","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8203/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8203/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8203","relative":"#8203","full":"gitlab-com/gl-infra/reliability#8203"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":255,"epic":{"id":17668,"iid":255,"title":"Improve www-gitlab-com Pipeline Performance","url":"/groups/gitlab-com/-/epics/255","group_id":6543,"human_readable_end_date":"Oct 16, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":26055944,"iid":8202,"project_id":1304532,"title":"Investigate running Discourse on GKE","description":"We're looking to [migrate forum.gitlab.com to GKE](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/101). This issue is to track research on how we're going to be able to do that. \n\nTest project: https://gitlab.com/cody/discourse-k8s-sandbox-2\n\n## Can we use AutoDevOps?\n\nI think we can probably use AutoDevOps for the build and deployment of Discourse. But I'm still investigating how that might work.","state":"closed","created_at":"2019-10-17T20:25:04.010Z","updated_at":"2020-03-13T23:09:26.176Z","closed_at":"2020-03-13T22:09:31.031Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Research","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":2623969,"username":"cody","name":"Cody West","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ae09c0cf2f3c328cfb96554a2fedd2ea?s=80\u0026d=identicon","web_url":"https://gitlab.com/cody"}],"author":{"id":2623969,"username":"cody","name":"Cody West","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ae09c0cf2f3c328cfb96554a2fedd2ea?s=80\u0026d=identicon","web_url":"https://gitlab.com/cody"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8202","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8202","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8202/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8202/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8202","relative":"#8202","full":"gitlab-com/gl-infra/reliability#8202"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":101,"epic":{"id":13702,"iid":101,"title":"forum.gitlab.com GKE migration","url":"/groups/gitlab-com/gl-infra/-/epics/101","group_id":1112072},"iteration":null,"health_status":null},{"id":26055145,"iid":8201,"project_id":1304532,"title":"SSL certificate has expired for pre.gitlab.com","description":"The SSL certificate has expired for https://pre.gitlab.com/.","state":"closed","created_at":"2019-10-17T19:41:25.481Z","updated_at":"2022-08-04T22:00:47.293Z","closed_at":"2019-10-18T15:20:12.396Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Infrastructure","gitlab.com","pre","requires production access","security","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8201","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8201","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8201/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8201/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8201","relative":"#8201","full":"gitlab-com/gl-infra/reliability#8201"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26038539,"iid":8200,"project_id":1304532,"title":"Enable HTTP compression on customers.gitlab.com","description":"# Summary\nhttps://customers.gitlab.com doesn't have HTTP compression enabled. See [this report](https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Fcustomers.gitlab.com%2F) from PageSpeed.\n\n# Proposal\nEnable gzip compression on nginx. This will greatly improve performance and shouldn't cause any issues.","state":"closed","created_at":"2019-10-17T12:30:52.307Z","updated_at":"2023-02-23T07:57:06.141Z","closed_at":"2023-02-23T07:57:06.125Z","closed_by":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"labels":["Reliability::P3","priority::3","section::fulfillment","unblocks others","work::general","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8200","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8200","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8200/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8200/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8200","relative":"#8200","full":"gitlab-com/gl-infra/reliability#8200"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26034432,"iid":8199,"project_id":1304532,"title":"Request access to ops.gitlab.net and restore project for OnGres team","description":"We need access to https://ops.gitlab.net and https://dashboards.gitlab.net/ for all the @gl-consultants-ongres team, in order to move forward with some issues. \n\nWe already have access to the restore project (https://ops.gitlab.net/gitlab-com/gl-infra/gitlab-restore). \n \ncc/ @glopezfernandez","state":"closed","created_at":"2019-10-17T10:34:50.873Z","updated_at":"2022-08-04T22:00:48.237Z","closed_at":"2020-05-06T12:02:39.617Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","OnGres::Support","access request","workflow-infra::Done"],"milestone":{"id":1239654,"iid":76,"group_id":1112072,"title":"W16 DBRE","description":"","state":"closed","created_at":"2020-04-14T09:14:09.392Z","updated_at":"2020-05-13T19:56:10.734Z","due_date":"2020-05-08","start_date":"2020-04-14","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/76"},"assignees":[{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"}],"author":{"id":2493611,"username":"adescoms","name":"Adrián Escoms","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6f86d318669a8b32174b7132607443d?s=80\u0026d=identicon","web_url":"https://gitlab.com/adescoms"},"type":"ISSUE","assignee":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-05-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8199","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8199","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8199/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8199/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8199","relative":"#8199","full":"gitlab-com/gl-infra/reliability#8199"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26008352,"iid":8187,"project_id":1304532,"title":"RCA: Oct 16 / Customers.gitlab.com 500 outage","description":"\u003c!--\n**Please note:** if the incident relates to sensitive data, or is security related consider\nlabeling this issue with ~security and mark it confidential.\n*** \n--\u003e\n\nIncident: https://gitlab.com/gitlab-com/gl-infra/production/issues/1259\n\n## Summary\n\nDuring a production change to customers.gitlab.com, chef was run via ```sudo``` and was unable to create files required to run rake commands to set up Yarn. This caused the application to be unable to serve requests properly.\n\nTo get into this specifically, the commands to use yarn depend on a specific file being updated to trigger them. When chef was run via sudo, the version file was updated, and the specific commands to initialize yarn were not run due to a file permission issue. Subsequent runs of chef (as root or not) would not trigger the initialization commands since the specific file was not being updated again.\n\nhttps://gitlab.com/gitlab-com/gl-infra/production/issues/1257\n\nService(s) affected : customers.gitlab.com\nTeam attribution : \nMinutes downtime or degradation : \n\nFor calculating duration of event, use the [Platform Metrics Dashboard](https://dashboards.gitlab.net/d/ZUei7TkWz/platform-metrics?orgId=1) to look at appdex and SLO violations.\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident? (i.e. service outage, sub-service brown-out, exposure of sensitive data, ...)\n- Who was impacted by this incident? (i.e. external customers, internal customers, specific teams, ...)\n- How did the incident impact customers? (i.e. preventing them from doing X, incorrect display of Y, ...)\n- How many attempts were made to access the impacted service/feature?\n- How many customers were affected?\n- How many customers tried to access the impacted service/feature?\n\nInclude any additional metrics that are of relevance.\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n- Did alarming work as expected?\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n## Root Cause Analysis\n\nThe purpose of this document is to understand the reasons that caused an incident, and to create mechanisms to prevent it from recurring in the future. A root cause can **never be a person**, the way of writing has to refer to the system and the context rather than the specific actors.\n\nFollow the \"**5 whys**\" in a **blameless** manner as the core of the root-cause analysis.\n\nFor this it is necessary to start with the incident, and question why it happened. Keep iterating asking \"why?\" 5 times. While it's not a hard rule that it has to be 5 times, it helps to keep questions get deeper in finding the actual root cause. \n\nKeep in min that from one \"why?\" there may come more than one answer, consider following the different branches.\n\n### Example of the usage of \"5 whys\"\nCustomers.gitlab.com is returning 500 errors.\n\n1. Why? - The Yarn install was not run. \n2. Why? - Chef attempted to run this, but it could not create files in a /home folder.\n3. Why? - Chef-client run via sudo doesn't have permissions to the executing user's home folder.\n4. Why? - The chef recipe assumes the rake commands will have access to the folder. \n5. Why? - Chef is usually run as root (full login) or via the chef-client daemon.\n\n## What went well\n\nStart with the following:\n\n- Identify the things that worked well or as expected.\n- Any additional call-outs for what went particularly well.\n\n## What can be improved\n\nStart with the following:\n\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\n- Is there anything that could have been done to improve the detection or time to detection?\n- Is there anything that could have been done to improve the response or time to response?\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\n- Did we have any indication or beforehand knowledge that this incident might take place?\n\n## Corrective actions\n\n- List issues that have been created as corrective actions from this incident.\n- For each issue, include the following:\n    - \u003cBare Issue link\u003e - Issue labeled as ~\"corrective action\".\n    - Include an estimated date of completion of the corrective action.\n    - Incldue the named individual who owns the delivery of the corrective action.\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-10-16T15:37:34.682Z","updated_at":"2022-08-04T22:00:56.844Z","closed_at":"2019-10-17T19:05:41.626Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8187","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8187","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8187/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8187/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8187","relative":"#8187","full":"gitlab-com/gl-infra/reliability#8187"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":26006259,"iid":8186,"project_id":1304532,"title":"Multiple configuration issues with Prometheus in Kubernetes","description":"* [x] Failing rule evaluations are showing up in the logs quite often\n* [x] No monitoring of Prometheuses running in our clusters (such as the ops environment monitoring all our existing prometheus servers)\n  * We are configured to have at least 2 Prometheus Pods running in `gprd` but only 1 is running currently: `up{cluster=\"gprd-gitlab-gke\",env=\"gprd\",job=\"gitlab-monitoring-promethe-operator\"}` and we are completely unaware of this missing redundancy\n* [x] No external mechanism to reach the prometheus endpoint in our clusters\n  * We only expose the thanos endpoint.  One must utilize `kube port-forward` to reach the prometheus endpoint: https://gitlab.com/gitlab-com/gl-infra/k8s-workloads/monitoring\n* [x] Scraping data appears to be inconsistent \n  * Metric scrapes in Kubernetes appear to only be capturing one metric over the course of time, example query: `kube_pod_container_info{container=\"registry\", cluster=\"gprd-gitlab-gke\"}[5m]`\n* [x] Deduplication of mulitple prometheus instances is not occuring\n  * Example query: `count (kube_pod_container_info{container=\"registry\", cluster=\"gprd-gitlab-gke\"}) without(cluster,container,container_id,endpoint,env,environment,image,image_id,instance,job,namespace,pod,prometheus,provider,region,service)`\n  * Returns multiple data points: \n```\n✔{prometheus_replica=\"prometheus-gitlab-monitoring-promethe-prometheus-1\"}\n✔{prometheus_replica=\"prometheus-gitlab-monitoring-promethe-prometheus-0\"}\n```\n\nAll of the above is contributing to awkward metrics at times.  Specifically, noting our Container Registry dashboard: https://dashboards.gitlab.net/d/8wlZHpTZz/registry-pod-info-copy?orgId=1\u0026from=now-3h\u0026to=now\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-cluster=gprd-gitlab-gke\u0026var-namespace=monitoring\u0026var-Node=All\u0026var-Deployment=gitlab-registry, some metrics appear duplicated at times, which is impacting our ability to properly monitor our clusters with confidence.\n\n\n/cc @ansdval","state":"closed","created_at":"2019-10-16T15:24:32.623Z","updated_at":"2019-12-06T21:42:16.609Z","closed_at":"2019-11-01T14:22:56.078Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["kubernetes","team::Reliability","workflow-infra::Done"],"milestone":{"id":1020810,"iid":49,"group_id":1112072,"title":"W43 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 21 Oct \t| T 22 Oct \t| W 23 Oct \t| Th 24 Oct  | F 25 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -       \t| -          | -\r\n| @cmiskell   \t| -        \t| -         | -       \t| -          | - \r\n| @hphilipps  \t| -      \t| -      \t| 📟  \t| 📟    | 📟\r\n| @msmiley    \t| 📟  \t| /      \t| /      \t| /          | /\r\n\r\nW43 working days: 22\r\n\r\n|             \t| M 28 Oct \t| T 29 Oct \t| W 30 Oct \t| Th 31 Oct  | F 01 Nov \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| -      \t| -      \t| -      \t| -          | 🌴\r\n| @cmiskell   \t| 🌴| -      \t| -      \t| -          | -\r\n| @hphilipps  \t| 📟  \t| 📟  \t| /        \t| 🌴          | 🌴 \r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW44 working days: 23\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 45**","state":"closed","created_at":"2019-10-02T14:57:08.851Z","updated_at":"2019-11-05T02:17:05.981Z","due_date":"2019-11-03","start_date":"2019-10-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/49"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8186","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8186","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8186/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8186/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8186","relative":"#8186","full":"gitlab-com/gl-infra/reliability#8186"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25999110,"iid":8182,"project_id":1304532,"title":"Extend certificate-updater to update expiring GCP LB certificates","description":"As was suggested in today's DNA meeting, it would be a good addition to [Certificate Updater](https://gitlab.com/gitlab-com/gl-infra/certificates-updater/) to be able to update GCP LB certificates.","state":"closed","created_at":"2019-10-16T12:40:30.585Z","updated_at":"2022-08-04T22:00:59.721Z","closed_at":"2019-10-17T12:07:41.186Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["workflow-infra::Done"],"milestone":{"id":1026658,"iid":50,"group_id":1112072,"title":"W41 Dev \u0026 Ops","description":"","state":"closed","created_at":"2019-10-08T09:15:06.314Z","updated_at":"2019-12-03T22:08:12.834Z","due_date":"2019-10-20","start_date":"2019-10-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/50"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8182","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8182","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8182/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8182/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8182","relative":"#8182","full":"gitlab-com/gl-infra/reliability#8182"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25931768,"iid":8167,"project_id":1304532,"title":"Remove testbed env pubsub beat variable","description":"As noted at https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/1083#note_35520 there is spurious pubsubbeat config in the testbed env.  \n\nIt should be removed","state":"closed","created_at":"2019-10-15T01:57:08.028Z","updated_at":"2019-12-06T21:42:16.483Z","closed_at":"2019-10-15T02:03:01.049Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8167","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8167","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8167/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8167/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8167","relative":"#8167","full":"gitlab-com/gl-infra/reliability#8167"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25928449,"iid":8166,"project_id":1304532,"title":"file-33 and file-34 need to be rebalanced","description":"The gitaly nodes file-33 and file-34 have crossed the 80% disk usage threshold and need to have projects moved to less full servers. For reference: https://gitlab.com/gitlab-com/runbooks/blob/master/howto/sharding.md\n\n@dawsmith I don't know if this is SRE-Oncall or part of normal workflows for one of the teams.","state":"closed","created_at":"2019-10-14T21:08:02.743Z","updated_at":"2022-08-04T22:01:10.812Z","closed_at":"2021-02-16T21:48:31.469Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Service::Gitaly","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8166","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8166","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8166/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8166/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8166","relative":"#8166","full":"gitlab-com/gl-infra/reliability#8166"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25928397,"iid":8165,"project_id":1304532,"title":"Move terraform GCS instance service account to project module","description":"While cleaning up terraform code for `gitlab-ENV-secrets` buckets duplicated between the `project` and `storage-buckets` modules, [this block](https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/storage-buckets/blob/master/main.tf#L73-81) was leftover creating the IAM binding granting access to the `terraform` service account used for all GCE VM instances.\n\nWith the secrets bucket moved to the project module, it doesn't make sense to keep this IAM binding in the old module, but moving it implicates also managing the `terraform` service account with the project, and exporting the account email/ID for other terraform configurations to access via remote state lookup for the bindings that _are_ staying in the `storage-buckets` module. I inspected the terraform state files for `gstg` and `gprd` and it appears that this service account is not currently managed by terraform, and so can easily be imported into the `env-projects` configuration after the `project` module is updated.\n\n1. [ ] Add a `google_service_account` resource to the `project` module for the `terraform` account.\n1. [ ] Remove the `google_storage_bucket_iam_binding` from the `storage-buckets` module\n1. [ ] Add a `google_storage_bucket_iam_binding` to the project module\n1. [ ] Import the service account to the terraform state for `env-projects`\n1. [ ] Import the `google_storage_bucket_iam_binding` resource to the terraform state for `env-projects`\n1. [ ] Bump module versions for `project` and `storage-buckets` across all environments","state":"closed","created_at":"2019-10-14T21:04:06.723Z","updated_at":"2022-08-16T17:57:23.352Z","closed_at":"2022-08-16T17:02:56.424Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["TechnicalDebt","priority::2","team::Reliability","terraform","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8165","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8165","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8165/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8165/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8165","relative":"#8165","full":"gitlab-com/gl-infra/reliability#8165"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":219,"epic":{"id":46451,"iid":219,"title":"Terraform Improvements Backlog","url":"/groups/gitlab-com/gl-infra/-/epics/219","group_id":1112072},"iteration":null,"health_status":null},{"id":25912154,"iid":8162,"project_id":1304532,"title":"Rollout Thanos v0.8.x","description":"Thanos v0.8.0 includes a number of improvements. Including a new sidecar flag `--min-time` that allows us to more easily test changes to depending on Prometheus retention.\n\nSee: https://github.com/thanos-io/thanos/releases/tag/v0.8.0","state":"closed","created_at":"2019-10-14T14:21:08.993Z","updated_at":"2022-08-04T22:01:17.839Z","closed_at":"2019-10-16T18:16:42.354Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["workflow-infra::Done"],"milestone":{"id":1006849,"iid":45,"group_id":1112072,"title":"W41 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 07 Oct \t| T 08 Oct \t| W 09 Oct \t| Th 10 Oct  | F 11 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| On-call     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -   \t| On-call    | On-call\r\n| @cmiskell   \t| Moving   \t| Moving    | Moving  \t| Moving     | Moving  \t\r\n| @hphilipps  \t| Vacation \t| Vacation  | Vacation  | Vacation   | Vacation         \t\r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW41 working days: 16\r\n\r\n|             \t| M 14 Oct \t| T 15 Oct \t| W 16 Oct \t| Th 17 Oct  | F 18 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| On-call  \t| On-call  \t| -      \t| -          | -   \r\n| @cmiskell   \t| -      \t| -        \t| -        \t| -          | Moving\r\n| @hphilipps  \t| Ill        \t| Ill        \t| Ill        \t| -          | - \r\n| @msmiley    \t| -        \t| On-call   | On-call  \t| On-call    | On-call\r\n\r\nW42 working days: 21\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-18T18:11:09.033Z","updated_at":"2019-11-12T23:45:39.396Z","due_date":"2019-10-20","start_date":"2019-10-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/45"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8162","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8162","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8162/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8162/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8162","relative":"#8162","full":"gitlab-com/gl-infra/reliability#8162"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25875261,"iid":8142,"project_id":1304532,"title":"Setup logging for Praefect on gstg","description":"As part of its [readiness review](https://gitlab.com/gitlab-com/gl-infra/readiness/merge_requests/10), we must setup logging for Praefect. Since we already deployed it on gstg we can setup its logging infrastructure there so we can verify it and replicate it later on gstg. We'll need:\n\n- [x] A pubsub host: https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/1103\n- [x] A gitlab_fluentd recipe: https://gitlab.com/gitlab-cookbooks/gitlab_fluentd/merge_requests/92\n- [x] Add the recipe to our praefect hosts: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/1983","state":"closed","created_at":"2019-10-12T16:20:20.061Z","updated_at":"2022-08-04T22:01:48.532Z","closed_at":"2019-10-14T21:30:38.392Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8142","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8142","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8142/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8142/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8142","relative":"#8142","full":"gitlab-com/gl-infra/reliability#8142"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":199,"epic":{"id":14582,"iid":199,"title":"HA Gitaly on GitLab.com","url":"/groups/gitlab-com/-/epics/199","group_id":6543,"human_readable_end_date":"Jan 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25845962,"iid":8136,"project_id":1304532,"title":"Remove sidekiq mtail metrics","description":"Sidekiq now has internal metrics for jobs, so we can remove the mtail collection of this data.","state":"closed","created_at":"2019-10-11T10:24:08.514Z","updated_at":"2022-08-16T17:57:36.306Z","closed_at":"2022-08-16T17:02:41.296Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Observability","Service::Monitoring-Other","priority::3","team::Reliability","workflow-infra::Done"],"milestone":{"id":1087804,"iid":60,"group_id":1112072,"title":"Reliability January 2020","description":"","state":"closed","created_at":"2019-12-03T16:29:27.112Z","updated_at":"2020-01-31T23:02:22.156Z","due_date":"2020-01-31","start_date":"2020-01-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/60"},"assignees":[],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8136","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8136","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8136/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8136/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8136","relative":"#8136","full":"gitlab-com/gl-infra/reliability#8136"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25813869,"iid":8128,"project_id":1304532,"title":"Create third storage node in the staging environment","description":"Create new third storage node in the staging environmnent in order to support synthetic system halt testing.","state":"closed","created_at":"2019-10-10T14:19:55.222Z","updated_at":"2022-08-04T22:01:57.204Z","closed_at":"2019-10-14T19:51:28.127Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Service::Gitaly","change","staging","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8128","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8128","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8128/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8128/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8128","relative":"#8128","full":"gitlab-com/gl-infra/reliability#8128"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25783498,"iid":8122,"project_id":1304532,"title":"Services resource deprecated for google_project_services","description":"The `google_project_services` resource used in the project module is deprecated.\n\n```\nWarning: google_project_services is deprecated - many users reported issues with dependent services that were not resolvable.  Please use google_project_service or the https://github.com/terraform-google-modules/terraform-google-project-factory/tree/master/modules/project_services module.  This resource will be removed in version 3.0.0.\n```","state":"closed","created_at":"2019-10-09T20:59:33.333Z","updated_at":"2020-09-29T20:46:18.642Z","closed_at":"2020-09-29T20:46:18.577Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["TechnicalDebt","priority::2","terraform","workflow-infra::Done"],"milestone":{"id":1414431,"iid":94,"group_id":1112072,"title":"Core Infra Team - September 2020","description":"Team Radar:\r\nhttps://docs.google.com/drawings/d/1ohzs3lFCEGTDTg-cO0HNKvVHz1MCSIT54yAj4rr8gMc/edit\r\n\r\nTeam Days: (so we know who is out/oncall when):\r\nhttps://docs.google.com/spreadsheets/d/1Pk0TSopy2m47G8PsbFYn4iZYikAJpsHUb0I1JYMybYc/edit#gid=177519968\r\n\r\nFrom the Radar, we're going to stop:\r\n1. Cloudflare improvements\r\n2. Vault readiness (wrap up readiness, then pause)\r\n\r\nFocus on:\r\n1. [Data recovery help](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11148)\r\n2. [Moving Chef from DO to GCP](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/138)\r\n3. [Looking at production access](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/122)\r\n4. more corrective actions\r\n\r\nWe'll think about a replan in mid September when we know how Chef and data recovery are going.\r\n","state":"closed","created_at":"2020-08-19T21:57:25.852Z","updated_at":"2020-10-06T20:05:58.071Z","due_date":"2020-09-30","start_date":"2020-08-28","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/94"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8122","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8122","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8122/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8122/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8122","relative":"#8122","full":"gitlab-com/gl-infra/reliability#8122"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":219,"epic":{"id":46451,"iid":219,"title":"Terraform Improvements Backlog","url":"/groups/gitlab-com/gl-infra/-/epics/219","group_id":1112072},"iteration":null,"health_status":null},{"id":25776897,"iid":8121,"project_id":1304532,"title":"[RCA] forum.gitlab.com down","description":"Incident: gitlab-com/gl-infra/production#1215\n\n## Summary\n\nforum.gitlab.com was down, found the container had stopped/failed on initial login during triage.\n\nService(s) affected : forum.gitlab.com  \nTeam attribution : @gitlab-com/gl-infra  \nMinutes downtime or degradation : 44 minutes\n\n## Timeline\n\n2019-10-01\n\n* 17:43 UTC - EOC alerted that forum.gitlab.com was down\n* 17:53 UTC - EOC acknowledged Pagerduty alert\n* 18:10 UTC - EOC determines that the existing discourse container cannot be restarted\n* 18:13 UTC - EOC initiates a rebuild of the discourse container to destroy the old, rebuild/restart the new, and initiate the bootstrap process\n* 18:18 UTC - Rebuild process accidentally terminated\n* 18:19 UTC - Rebuild restarted\n* 18:27 UTC - Container rebuild completed, application begins serving requests again\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident? (i.e. service outage, sub-service brown-out, exposure of sensitive data, ...)\n- Who was impacted by this incident? (i.e. external customers, internal customers, specific teams, ...)\n- How did the incident impact customers? (i.e. preventing them from doing X, incorrect display of Y, ...)\n- How many attempts were made to access the impacted service/feature?\n- How many customers were affected?\n- How many customers tried to access the impacted service/feature?\n\nInclude any additional metrics that are of relevance.\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected?\n- Did alarming work as expected?\n- How long did it take from the start of the incident to its detection?\n- How long did it take from detection to remediation?\n- Were there any issues with the response to the incident? (i.e. bastion host used to access the service was not available, relevant team memeber wasn't page-able, ...)\n\n## Root Cause Analysis\n\nThe purpose of this document is to understand the reasons that caused an incident, and to create mechanisms to prevent it from recurring in the future. A root cause can **never be a person**, the way of writing has to refer to the system and the context rather than the specific actors.\n\nFollow the \"**5 whys**\" in a **blameless** manner as the core of the root-cause analysis.\n\nFor this it is necessary to start with the incident, and question why it happened. Keep iterating asking \"why?\" 5 times. While it's not a hard rule that it has to be 5 times, it helps to keep questions get deeper in finding the actual root cause. \n\nKeep in min that from one \"why?\" there may come more than one answer, consider following the different branches.\n\n### Example of the usage of \"5 whys\"\nThe vehicle will not start. (the problem)\n\n1. Why? - The battery is dead. \n2. Why? - The alternator is not functioning.\n3. Why? - The alternator belt has broken.\n4. Why? - The alternator belt was well beyond its useful service life and not replaced. \n5. Why? - The vehicle was not maintained according to the recommended service schedule. (Fifth why, a root cause)\n\n## What went well\n\nStart with the following:\n\n- Identify the things that worked well or as expected.\n- Any additional call-outs for what went particularly well.\n\n## What can be improved\n\nStart with the following:\n\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\n- Is there anything that could have been done to improve the detection or time to detection?\n- Is there anything that could have been done to improve the response or time to response?\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\n- Did we have any indication or beforehand knowledge that this incident might take place?\n\n## Corrective actions\n\n- List issues that have been created as corrective actions from this incident.\n- For each issue, include the following:\n    - \u003cBare Issue link\u003e - Issue labeled as ~\"corrective action\".\n    - Include an estimated date of completion of the corrective action.\n    - Incldue the named individual who owns the delivery of the corrective action.\n\n## Guidelines\n\n* [Blameless RCA Guideline](https://about.gitlab.com/handbook/infrastructure/#rca)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-10-09T18:31:08.455Z","updated_at":"2022-08-04T22:02:00.628Z","closed_at":"2019-10-28T19:32:00.788Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8121","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8121","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8121/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8121/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8121","relative":"#8121","full":"gitlab-com/gl-infra/reliability#8121"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25776600,"iid":8120,"project_id":1304532,"title":"Test effects of making kernel watchdog more patient than NFS timeout on api-XX nodes","description":"#### Goal:\n\nDetermine if making the watchdog more patient can change the failure mode from a kernel panic and reboot to a failed synchronous write operation.\n\nDetermine if a failed NFS write is more or less impactful to our Rails app on `api-XX` VMs than a kernel panic and automatic reboot.  (Example: If the filesystem becomes read-only, then the panic+reboot is preferable because recovery requires no manual intervention.)\n\n#### Method outline:\n\n* Check that the NFS timeout really does follow the arithmetic outlined below (which is based on the nfs manpage, not based on empirical testing).  The two relevant mount options are: `timeo=50` (50 centiseconds = 5 seconds) and `retrans=2`.  The manpage says each retry linearly adds another `timeo` to the timeout, and 2 retries means 3 tries in total.  So: 1st try waits 5 seconds, 2nd try waits 10 seconds, 3rd try waits 15 seconds, then fail after a total patience of 5+10+15=30 seconds.\n* On a non-production VM, try to do a *synchronous write* to an NFS file while sabotaging that write in some way that the NFS client is unaware of.  (Maybe a client-side iptables rule to drop outgoing or incoming NFS traffic?  Disabling the NIC would let the kernel know to sever the TCP connection, so that might not fail in the intended way.)  This test aims to synthetically confirm that we can reproduce the observed behavior.\n* Adjust the kernel watchdog timeout (2 * `kernel.watchdog_thresh` = 20 seconds) to be more patient than the NFS timeout (30 seconds I think, see above).\n* Repeat the synthetic test.  Does the VM fail the write instead of panic and reboot?  Is the NFS volume still mounted in read-write mode?\n* Revert the sabotage.  Does the VM's NFS mount become usable again?\n* If the above tests were done on one of our `api-XX` VMs, is the Rails app still functional without rebooting the VM?\n\n#### Background:\n\nIn #7872 we have been tracking GCP VM spontaneous reboots.  A subset of those reboots are `soft lockup` kernel panics.  In the weeks since we started tracking these unplanned reboots, this particular flavor has only occurred on `api-XX` and `web-XX` VMs.  These VMs regularly use NFS volumes, and that might be relevant.\n\nWe have ample evidence that the GCP platform sometimes drops network connectivity to some or all network peers, often lasting for tens of seconds before recovering.  Some of these `soft lockup` events show signs of such a network connectivity disruption preceding the kernel panic.  So far **all** of these `soft lockup` events share [nearly identical kernel stack traces](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7872#note_227714232), suggesting these events have a common cause.  At the time of the panics, the hung process that was hogging a CPU (implicitly preventing that CPU's watchdog thread from running) was stalled waiting on a synchronous `write` system call.\n\nAs a [working hypothesis](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7872#note_227712046), that hung process's `write` syscall may leave the process in uninterruptible sleep, preventing other processes (including watchdog) from being scheduled on that vCPU.  We do not know what that `write` syscall's file descriptor refers to.  It could point to a file on NFS, a file on ext4, or a network socket.  Because this pathology has so far only affected hosts using NFS, that possibility may be more likely.\n\nIf the hung process is stalled while writing to NFS, then if we adjust the watchdog timer to be more patient than the filesystem's timeout, then the outcome should change from a kernel panic to a failed write.\n\nA write failure should be logged by the kernel (i.e. reliably detectable and more clear to interpret than a kernel panic).  But we need to know if the failed write will lead to longer lasting application problems, since it would not automatically reboot the VM.\n\nThis issue is to test the effects of a failed NFS write on one of our `api-XX` VM, and determine if this outcome is:\n* diagnostically useful\n* preferable to a reboot from an availability standpoint\n\n\n##### What is a `soft lockup`?\n\nA `soft lockup` kernel panic is triggered by the kernel detecting that at least one of its CPUs appears to be hung.  The detection mechanism is that each processor (CPU core or vCPU) has a dedicated watchdog thread that resets a count-down timer each time it runs.  If any processor fails to run that watchdog thread before the timer reaches zero, the kernel takes this as a sign of extreme duress and possibly a bug, since normally the scheduler would easily be able to issue a time slice to the watchdog thread even under heavy load.  So the kernel panics, calling it a `soft lockup` event.","state":"closed","created_at":"2019-10-09T18:19:08.948Z","updated_at":"2019-12-10T12:19:16.962Z","closed_at":"2019-12-10T12:05:43.738Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Investigation","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8120","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8120","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8120/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8120/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8120","relative":"#8120","full":"gitlab-com/gl-infra/reliability#8120"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25771098,"iid":8118,"project_id":1304532,"title":"Synthetic system halt test in staging","description":"The `file-33-stor-gprd` project storage node is currently experiencing repeated unexplained system halts.\n\nIn order to support migrations for re-balancing large projects off of `file-33-stor-gprd` and onto `file-40-stor-gprd`, it is important to collect some data on what to expect if a source system were to halt in the middle of a project migration.\n\nPlanning the steps to undertake in orer to accomplish a test of this scenario, as well as the documenting of the consequences of the expected failures, will be the focus of this issue.\n\n## Plan\n\n1. [x] Create a new file storage node.\n1. [ ] Enable the node to be used as storage using the GitLab admin console.\n1. [ ] Create or move a handful (at least three or four, maybe more) projects\n1. [ ] Begin migration of project from `file-04-stor-gstg` to one of the other nodes.\n1. [ ] Meanwhile, in a shell session in the `file-04-stor-gstg` system, invoke the following commands: `sudo sysctl -w kernel.panic=10; sudo sysctl -w kernel.sysrq=1; echo c | sudo tee /proc/sysrq-trigger`\n1. [ ] Now observe the serial port logs for `file-04-stor-gstg` at https://console.cloud.google.com/compute/instancesDetail/zones/us-east1-c/instances/file-04-stor-gstg/console?project=gitlab-staging-1\u0026organizationId=769164969568#end\n1. [ ] Analyze the migration logs and the system logs to determine the consequences of the system halt on the project migration.","state":"closed","created_at":"2019-10-09T15:26:17.708Z","updated_at":"2022-08-16T16:03:33.901Z","closed_at":"2022-08-16T14:44:57.302Z","closed_by":{"id":210928,"username":"steveazz","name":"Steve Azzopardi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a5eeed7ec5c80642df9ee708bb496d7?s=80\u0026d=identicon","web_url":"https://gitlab.com/steveazz"},"labels":["DStores-Backlog::GTLY","Infrastructure","Service::Gitaly","auto updated","staging","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":null,"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8118","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":1},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8118","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8118/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8118/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8118","relative":"#8118","full":"gitlab-com/gl-infra/reliability#8118"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25734517,"iid":8094,"project_id":1304532,"title":"Add metadata to terraform managed projects","description":"Some of our GCP projects are managed by the [Project](https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/project) terraform module.  Some are managed manually.  There is currently not an easy way to tell which is which without asking someone or checking many different repositories.\n\nI propose altering the Project module to add some metadata to all projects indicating that it is managed by terraform and should not be manually changed.  This could be as simple as adding a `terraform-managed` tag like we have on some other resources.\n\n/cc @Craig @cmcfarland","state":"closed","created_at":"2019-10-08T18:04:26.654Z","updated_at":"2022-08-16T17:57:56.258Z","closed_at":"2022-08-16T17:02:25.608Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["team::Reliability","terraform","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8094","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8094","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8094/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8094/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8094","relative":"#8094","full":"gitlab-com/gl-infra/reliability#8094"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":219,"epic":{"id":46451,"iid":219,"title":"Terraform Improvements Backlog","url":"/groups/gitlab-com/gl-infra/-/epics/219","group_id":1112072},"iteration":null,"health_status":null},{"id":25724069,"iid":8089,"project_id":1304532,"title":"file-41 was not provisioned properly","description":"During this incident https://gitlab.com/gitlab-com/gl-infra/production/issues/1222 we created file-41 and ended up not using it, but kept it anyway as it would have to be created at some point. There were issues with initial provisioning. We've hit this https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6933 , manual rerun of `chef-client` was successful. Then, gitaly was complaining that the `/var/opt/gitlab/git-data/repositories` directory was missing and indeed it was not there. The directory was actually up one level higher, and `/var/opt/gitlab/git-data` was missing. It was manually created, but gitaly still complained until `/var/opt/gitlab/git-data/repositories` was also created.\n\nWhat remains to be done is:\n- verify that file-41 is fully operational\n- investigate why the directory was not created in the first place (find it in Chef code for example)\n- investigate https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6933\n\n\n/cc @craig","state":"closed","created_at":"2019-10-08T12:37:01.595Z","updated_at":"2020-03-13T23:09:24.786Z","closed_at":"2020-03-13T22:10:01.618Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["corrective action","team::Reliability","workflow-infra::Done"],"milestone":{"id":1041390,"iid":53,"group_id":1112072,"title":"W43 Dev \u0026 Ops","description":"","state":"closed","created_at":"2019-10-22T09:01:16.923Z","updated_at":"2019-12-03T22:08:24.570Z","due_date":"2019-11-04","start_date":"2019-10-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/53"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8089","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8089","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8089/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8089/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8089","relative":"#8089","full":"gitlab-com/gl-infra/reliability#8089"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25716261,"iid":8084,"project_id":1304532,"title":"Tracking: SPF record lookup timeout","description":"Tracking issue for https://gitlab.com/gitlab-com/business-ops/Business-Operations/issues/93","state":"closed","created_at":"2019-10-08T09:28:03.708Z","updated_at":"2022-08-04T22:02:30.504Z","closed_at":"2019-10-08T09:28:12.145Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["workflow-infra::Done"],"milestone":{"id":1010428,"iid":46,"group_id":1112072,"title":"Dev \u0026 Ops: 2019-09-23 - 2019-10-06","description":"","state":"closed","created_at":"2019-09-23T09:44:24.361Z","updated_at":"2019-10-08T10:08:00.814Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/46"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8084","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8084","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8084/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8084/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8084","relative":"#8084","full":"gitlab-com/gl-infra/reliability#8084"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25695650,"iid":8078,"project_id":1304532,"title":"Fix terraform CI permissions","description":"While attempting to apply https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/merge_requests/1095, the job returned the following errors:\n\n```hcl\nError: Error creating Disk: googleapi: Error 403: Required 'compute.disks.create' permission for 'projects/gitlab-production/zones/us-east1-b/disks/api-21-sv-gprd-log'\nMore details:\nReason: forbidden, Message: Required 'compute.disks.create' permission for 'projects/gitlab-production/zones/us-east1-b/disks/api-21-sv-gprd-log'\nReason: forbidden, Message: Required 'compute.disks.setLabels' permission for 'projects/gitlab-production/zones/us-east1-b/disks/api-21-sv-gprd-log'\n\n\n  on .terraform/modules/api/instance.tf line 152, in resource \"google_compute_disk\" \"log_disk\":\n 152: resource \"google_compute_disk\" \"log_disk\" {\n\n\n\nError: Error creating Disk: googleapi: Error 403: Required 'compute.disks.create' permission for 'projects/gitlab-production/zones/us-east1-c/disks/api-22-sv-gprd-log'\nMore details:\nReason: forbidden, Message: Required 'compute.disks.create' permission for 'projects/gitlab-production/zones/us-east1-c/disks/api-22-sv-gprd-log'\nReason: forbidden, Message: Required 'compute.disks.setLabels' permission for 'projects/gitlab-production/zones/us-east1-c/disks/api-22-sv-gprd-log'\n\n\n  on .terraform/modules/api/instance.tf line 152, in resource \"google_compute_disk\" \"log_disk\":\n 152: resource \"google_compute_disk\" \"log_disk\" {\n```\n\nWhile I manually applied this change to resolve the error in the near term, we need to update the permissions assigned to the `terraform-ci` service account, to assign the `compute.disks.create` permission as noted for the long-term fix.\n\n/cc @gitlab-com/gl-infra/secure-and-defend","state":"closed","created_at":"2019-10-07T17:37:07.306Z","updated_at":"2019-12-06T21:42:32.988Z","closed_at":"2019-10-30T20:31:25.935Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["TechnicalDebt","team::Reliability","terraform","workflow-infra::Done"],"milestone":{"id":1020810,"iid":49,"group_id":1112072,"title":"W43 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 21 Oct \t| T 22 Oct \t| W 23 Oct \t| Th 24 Oct  | F 25 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -       \t| -          | -\r\n| @cmiskell   \t| -        \t| -         | -       \t| -          | - \r\n| @hphilipps  \t| -      \t| -      \t| 📟  \t| 📟    | 📟\r\n| @msmiley    \t| 📟  \t| /      \t| /      \t| /          | /\r\n\r\nW43 working days: 22\r\n\r\n|             \t| M 28 Oct \t| T 29 Oct \t| W 30 Oct \t| Th 31 Oct  | F 01 Nov \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| -      \t| -      \t| -      \t| -          | 🌴\r\n| @cmiskell   \t| 🌴| -      \t| -      \t| -          | -\r\n| @hphilipps  \t| 📟  \t| 📟  \t| /        \t| 🌴          | 🌴 \r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW44 working days: 23\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 45**","state":"closed","created_at":"2019-10-02T14:57:08.851Z","updated_at":"2019-11-05T02:17:05.981Z","due_date":"2019-11-03","start_date":"2019-10-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/49"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8078","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8078","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8078/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8078/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8078","relative":"#8078","full":"gitlab-com/gl-infra/reliability#8078"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25607220,"iid":8063,"project_id":1304532,"title":"Plan to synthesize a system halt on staging storage node `file-02-stor-gstg.c.gitlab-staging-1.internal` during a project migration","description":"The `file-33-stor-gprd` node usage has exceeded our SLO target.  However, it continues to experience unexpected system halts on a nearly daily basis.\n\nIn order to determine the level of severity of and to otherwise understand the consequences of a system halt while in the midst of the procedure to copy a file from one storage node to another, it is necessary to design the replication of such a scenario in our staging environment.","state":"closed","created_at":"2019-10-03T22:14:16.044Z","updated_at":"2022-08-16T16:03:33.833Z","closed_at":"2022-08-16T14:44:34.298Z","closed_by":{"id":210928,"username":"steveazz","name":"Steve Azzopardi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a5eeed7ec5c80642df9ee708bb496d7?s=80\u0026d=identicon","web_url":"https://gitlab.com/steveazz"},"labels":["DStores-Backlog::GTLY","Service::Gitaly","auto updated","staging","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8063","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8063","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8063/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8063/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8063","relative":"#8063","full":"gitlab-com/gl-infra/reliability#8063"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25603289,"iid":8061,"project_id":1304532,"title":"Investigate Exporting Stackdriver Metrics for kernel panics and reboots to Kibana or Prometheus","description":"## Problem Summary\n\n#7872 is currently being used as a comment collector for tracking reboots after manually parsing through the StackDriver logs. Rather than checking this daily, let's automate the collection of data points by either counting the logs in Kibana or using an exporter to aggregate in Prometheus. I have no strong preference for Kibana or Prometheus, but depending on the log format I expect one may prove to be easier to accomplish than the other. If that's true, we should choose the path of least effort.\n\n### Definition of Done\n\nThis issue is primarily focused with determining how this log forwarding or metrics aggregation can be achieved, if at all. The work to develop the query and write a runbook pointing to the dashboard is in scope, but not required to close this issue. If writing the runbook and creating the dashboard is achievable with minimal effort, it can be tracked her. Otherwise, a new issue should be opened and linked here.","state":"closed","created_at":"2019-10-03T21:23:54.418Z","updated_at":"2022-08-04T22:03:03.694Z","closed_at":"2020-03-13T22:17:32.928Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":1006849,"iid":45,"group_id":1112072,"title":"W41 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 07 Oct \t| T 08 Oct \t| W 09 Oct \t| Th 10 Oct  | F 11 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| On-call     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -   \t| On-call    | On-call\r\n| @cmiskell   \t| Moving   \t| Moving    | Moving  \t| Moving     | Moving  \t\r\n| @hphilipps  \t| Vacation \t| Vacation  | Vacation  | Vacation   | Vacation         \t\r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW41 working days: 16\r\n\r\n|             \t| M 14 Oct \t| T 15 Oct \t| W 16 Oct \t| Th 17 Oct  | F 18 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| On-call  \t| On-call  \t| -      \t| -          | -   \r\n| @cmiskell   \t| -      \t| -        \t| -        \t| -          | Moving\r\n| @hphilipps  \t| Ill        \t| Ill        \t| Ill        \t| -          | - \r\n| @msmiley    \t| -        \t| On-call   | On-call  \t| On-call    | On-call\r\n\r\nW42 working days: 21\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-18T18:11:09.033Z","updated_at":"2019-11-12T23:45:39.396Z","due_date":"2019-10-20","start_date":"2019-10-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/45"},"assignees":[],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8061","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8061","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8061/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8061/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8061","relative":"#8061","full":"gitlab-com/gl-infra/reliability#8061"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25593292,"iid":8057,"project_id":1304532,"title":"Document Patroni, PGBouncer, and Consul Design and Troubleshooting in Runbooks","description":"Discovered #8050 after opening this ticket. They're now linked.\n\u003chr\u003e\nPer https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/5844#note_223351269, we need to update our [Runbooks](https://gitlab.com/gitlab-com/runbooks) to include more information about how Patroni relies on Consul for health checks and leader election, and specific steps to diagnose and troubleshoot issues.\n\nA good bit of that information is already captured in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7790. And will change after https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/8050 is completed.\n\nBelow are more ~Discussion and ~Investigation issues @msmiley has authored that may or may not be valuable to add to the `howto` or `troubleshooting` sections in the Runbooks project repository.\n\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7440\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7735\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7813\n- https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7551","state":"closed","created_at":"2019-10-03T16:10:23.100Z","updated_at":"2019-12-06T21:42:32.652Z","closed_at":"2019-11-19T20:59:34.199Z","closed_by":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"labels":["Database","team::Reliability","workflow-infra::Done"],"milestone":{"id":1037343,"iid":51,"group_id":1112072,"title":"W45 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 04 Nov \t| T 05 Nov \t| W 06 Nov \t| Th 07 Nov  | F 08 Nov\r\n|-------------\t|----------\t|----------\t|----------\t|---------- |----------\t\r\n| @bjk-gitlab \t|         \t|        \t| 🏙 PromCon | 🏙 PromCon | 🏙 PromCon\r\n| @craig      \t|      \t|         \t|         \t|           |          \t\r\n| @craigf     \t| 🌴    \t| 🌴        | 🌴       | 🌴    | 🌴\r\n| @cmiskell   \t|         \t| 📟   | 📟  \t| 📟    | 📟\r\n| @hphilipps  \t|       \t|       \t|      \t|           | \r\n| @msmiley    \t|        \t|       \t|       \t|           | \r\n\r\nW45 working days: 18\r\n\r\n|             \t| M 11 Nov \t| T 12 Nov \t| W 13 Nov \t| Th 14 Nov  | F 15 Nov \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t|         \t|         \t|    \t    |           |    \r\n| @craig      \t|         \t|        \t|        \t|           |  \r\n| @craigf     \t| 🌴  \t| 🌴  \t| 🌴  \t| 🌴    | 🌴\r\n| @cmiskell   \t| 📟   | \\      \t| \\       \t| \\           | \\ \r\n| @hphilipps  \t|   \t    | 📟   | 📟  \t| 📟    | 📟\r\n| @msmiley    \t|       \t|       \t|       \t|           | \r\n\r\nW46 working days: 20\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 38**","state":"closed","created_at":"2019-10-17T15:40:11.302Z","updated_at":"2019-11-19T14:39:12.000Z","due_date":"2019-11-17","start_date":"2019-11-04","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/51"},"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8057","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8057","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8057/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8057/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8057","relative":"#8057","full":"gitlab-com/gl-infra/reliability#8057"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25591865,"iid":8055,"project_id":1304532,"title":"Move stackdriver_exporter to Kubernetes","description":"We currently run the stackdriver exporter for each project from a VM.\n\nThis makes sharding the exporter by stackdriver type prefix more difficult.\n\nMoving this to Kubernetes would greatly simplify the sharding, and reduce resource waste.","state":"closed","created_at":"2019-10-03T15:33:41.830Z","updated_at":"2022-08-16T17:58:14.969Z","closed_at":"2022-08-16T17:02:12.382Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8055","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8055","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8055/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8055/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8055","relative":"#8055","full":"gitlab-com/gl-infra/reliability#8055"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25563008,"iid":8050,"project_id":1304532,"title":"Reduce Patroni sensitivity to transient Consul SerfCheck failures","description":"**Goal:**\n\nTune or replace the Consul SerfCheck, so that the Patroni leader does not lose its cluster_lock before its TTL expires.  The SerfCheck currently detects when clients cannot reach a Patroni node.  Disabling SerfCheck would mean Patroni would no longer know to failover if its clients cannot reach it.  However, on an unreliable network, transient SerfCheck failures have caused unwanted Patroni failovers.\n\nThe overall goal is to improve availability of the writable Postgres instance by avoiding unnecessary Patroni failovers during very brief network disruptions but still allowing Patroni failovers during network disruptions lasting more than a modest timeout (e.g. 30-60 seconds).  Disabling SerfCheck is implicitly favoring one failover mode over another; SerfCheck works well on a reliable network, but it causes failovers a little too aggressively on an unreliable network.\n\n**Background:**\n\nIn recent months, most of the Patroni failover events have been triggered by brief network connectivity disruptions.  When the failover itself takes significantly longer to complete than the health check failure takes to resolve, then availability would have been higher if we had waited a little longer before failover.\n\nRoot cause analysis has identified [3 known ways that Patroni failovers have been triggered by intermittent network disruptions](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7790#note_215232905).  The current issue aims to mitigate Scenario C from the linked notes, copied below for convenience:\n\n\u003e **Scenario C:**\n\u003e \n\u003e *Cause:* Serf-LAN health check messages (UDP port 8301) are dropped in one or both directions on the network path to Patroni leader from *any other Consul agent*. **And** the Consul agent on the Patroni leader is too slow in refuting that suspicion.\n\u003e \n\u003e *Effect:* The Consul agent on a non-Patroni host declares suspicion that Patroni leader has failed. Patroni leader has a limited window to refute this suspicion, which it can learn about via gossip with other Consul agents. If Patroni leader does not promptly refute this suspicion, the Consul server invalidates the Patroni leader's `cluster_lock` (even before its `ttl` expires), leaving the Patroni cluster leaderless. The Patroni replicas detect this and begin the Patroni failover procedure.\n\u003e\n\u003e **Remedies:**\n\u003e\n\u003e ...\n\u003e\n\u003e Tuning or replacing the Serf check as a dependency of the Patroni cluster_lock ([mentioned here](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7790#note_213248381) but not yet ticketed) would reduce or eliminate the chances of Scenario C. If the `serfCheck` is replaced, we must be careful in designing the new health check's failure modes. (For example, we must ensure that planned maintenance does not implicitly break the new health check, because doing so would trigger a Patroni failover -- the very thing we want to avoid when unnecessary.)\n\n**Caveat:**\n\nSince completing the above analysis, we have learned more about the GCP networking infrastructure upon which our service stack currently runs.  We still believe Consul was correctly detecting brief network connectivity outages.\n\nWe do not have long-term data, but it's worth noting that the frequency of network disruptions as detected by Consul SerfCheck appears to be lower in the last few weeks (see below) than it was [in early September](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7790#note_214470872).  (Note that some of the SerfCheck failures shown below are from reboots, many of which were unplanned kernel panics, an unrelated but also interesting issue [being tracked here](https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7872).)\n\n```\nmsmiley@web-35-sv-gprd.c.gitlab-production.internal:~$ ( ls -1tr /var/log/syslog*gz | xargs -r sudo zcat ; sudo cat /var/log/syslog{.1,} ) | egrep 'consul.[0-9]*.:.*2019/' | grep 'EventMemberFailed' | tee /tmp/results.out | wc -l\n20\n```\n\nConsequently, Patroni has not triggered failovers recently.  If that trend persists, then this issue for tuning or replacing SerfCheck is unnecessary.  But we have no reason to believe that GCP network has become more reliable in the last few weeks.","state":"closed","created_at":"2019-10-03T01:07:58.598Z","updated_at":"2022-08-04T22:03:13.185Z","closed_at":"2020-02-13T18:02:41.638Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Database","priority::2","team::Reliability","workflow-infra::Done"],"milestone":{"id":1142605,"iid":66,"group_id":1112072,"title":"W6 DBRE","description":"","state":"closed","created_at":"2020-02-02T07:54:53.150Z","updated_at":"2020-03-02T08:54:59.491Z","due_date":"2020-02-14","start_date":"2020-02-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/66"},"assignees":[{"id":2493611,"username":"adescoms","name":"Adrián Escoms","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6f86d318669a8b32174b7132607443d?s=80\u0026d=identicon","web_url":"https://gitlab.com/adescoms"}],"author":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"type":"ISSUE","assignee":{"id":2493611,"username":"adescoms","name":"Adrián Escoms","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6f86d318669a8b32174b7132607443d?s=80\u0026d=identicon","web_url":"https://gitlab.com/adescoms"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-02-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8050","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8050","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8050/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8050/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8050","relative":"#8050","full":"gitlab-com/gl-infra/reliability#8050"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25551894,"iid":8046,"project_id":1304532,"title":"Enable alerting from CI env","description":"The ci environment doesn't get any alert rules deployed on prometheus nor is it wired up to an alertmanager. We should change that to be able to alert on cloud NAT errors in CI (https://gitlab.com/gitlab-com/runbooks/merge_requests/1498).","state":"closed","created_at":"2019-10-02T16:36:53.386Z","updated_at":"2022-08-04T22:03:15.709Z","closed_at":"2019-10-07T07:12:21.723Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8046","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8046","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8046/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8046/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8046","relative":"#8046","full":"gitlab-com/gl-infra/reliability#8046"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25550100,"iid":8044,"project_id":1304532,"title":"gitlab-iptables appends new rules after final drop rule","description":"When adding new sources to an existing firewall rule attribute in the form of\n\n```\n\"firewall\": {\n      \"rules\": [\n        {\n          \"Prometheus Server - Prometheus server internal metrics access\": {\n            \"port\": \"1234\",\n            \"protocol\": \"tcp\",\n            \"source\": \"1.2.3.4,5.6.7.8\"\n          }\n        },\n        ...\n```\n\nthen the `gitlab-iptables` cookbook is appending iptables rules after the existing rules including the `-j DROP` match-all target which is stopping the evaluation of newly appended rules. To fix it, the `/etc/iptables.d/` directory probably needs to be cleaned from existing rules before changes are applied.","state":"closed","created_at":"2019-10-02T15:44:54.795Z","updated_at":"2022-08-04T22:03:17.247Z","closed_at":"2022-08-02T06:04:04.209Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["chef","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8044","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8044","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8044/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8044/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8044","relative":"#8044","full":"gitlab-com/gl-infra/reliability#8044"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25512267,"iid":8037,"project_id":1304532,"title":"Provision infrastructure for new chef server(s) in gitlab-ops project","description":"In preparation for the [migration to a new, upgraded Chef server](#6128), we need to build the infrastructure on which we will deploy Chef server. ~~For resiliency purposes, we should implement a [HA architecture](https://docs.chef.io/install_server_ha.html)~~\n\nIn light of the fact that we are focusing all new services to run in Kubernetes (barring exceptional circumstances), and actively working to migrate existing services away from GCE VMs, expending effort to build/manage a more complex configuration likely isn't worthwhile. Especially considering that historically we have experienced few (if any) scaling issues with a single Chef server node, as it stands.\n\n1. [x] Create/deploy terraform modules and resources for chef infrastructure (load-balancer, ~~frontend instance group~~, backend instance group for self-healing configuration)\n1. [ ] ~~Update monitoring for new Chef infrastructure (may make sense to split this into a separate issue)~~\n1. [ ] ~~Update documentation in handbook (network/architecture diagrams) and runbooks to reflect the changes~~","state":"closed","created_at":"2019-10-01T16:00:37.304Z","updated_at":"2020-09-02T18:45:48.672Z","closed_at":"2019-10-30T22:03:58.333Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["chef","team::Reliability","workflow-infra::Done"],"milestone":{"id":1020810,"iid":49,"group_id":1112072,"title":"W43 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 21 Oct \t| T 22 Oct \t| W 23 Oct \t| Th 24 Oct  | F 25 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -       \t| -          | -\r\n| @cmiskell   \t| -        \t| -         | -       \t| -          | - \r\n| @hphilipps  \t| -      \t| -      \t| 📟  \t| 📟    | 📟\r\n| @msmiley    \t| 📟  \t| /      \t| /      \t| /          | /\r\n\r\nW43 working days: 22\r\n\r\n|             \t| M 28 Oct \t| T 29 Oct \t| W 30 Oct \t| Th 31 Oct  | F 01 Nov \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| -      \t| -      \t| -      \t| -          | 🌴\r\n| @cmiskell   \t| 🌴| -      \t| -      \t| -          | -\r\n| @hphilipps  \t| 📟  \t| 📟  \t| /        \t| 🌴          | 🌴 \r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW44 working days: 23\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 45**","state":"closed","created_at":"2019-10-02T14:57:08.851Z","updated_at":"2019-11-05T02:17:05.981Z","due_date":"2019-11-03","start_date":"2019-10-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/49"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8037","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":1},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8037","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8037/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8037/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8037","relative":"#8037","full":"gitlab-com/gl-infra/reliability#8037"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":138,"epic":{"id":16102,"iid":138,"title":"Migrate Chef from DO to GCP","url":"/groups/gitlab-com/gl-infra/-/epics/138","group_id":1112072,"human_readable_end_date":"Oct 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25512062,"iid":8036,"project_id":1304532,"title":"Identify updates required to chef-repo pipelines and related workflows","description":"While working through the [Chef server migration and upgrade](#6128), we need to consider the impact to existing pipelines and related workflows around `chef-repo`. Specifically, do we need to make any syntactic changes to the scripts/jobs for the cookbook uploader, cookbook version bumps, role/environment pushes, and/or how we manage data bags and encrypted vault items. In addition, we need to ensure that during the course of the migration, while we're testing the new server and updated infrastructure, we push net-new changes to _both_ Chef servers, so that they stay up to date until we perform the final migration and cutover.\n\n1. [ ] Review `chef-repo` pipeline for any syntax changes required by Chef server (latest as of issue creation is `13.0.17`)\n1. [ ] Review runbooks and hoot documentation for references to workflows that may be impacted by the upgrade (knife commands, data bag/vault management scripts, etc.)\n1. [ ] Update `chef-repo` pipelines to keep both chef servers updated in parallel while we test the new infrastructure","state":"closed","created_at":"2019-10-01T15:55:02.792Z","updated_at":"2023-02-10T17:22:09.938Z","closed_at":"2020-09-21T23:57:32.367Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Research","chef","documentation","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8036","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8036","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8036/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8036/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8036","relative":"#8036","full":"gitlab-com/gl-infra/reliability#8036"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":138,"epic":{"id":16102,"iid":138,"title":"Migrate Chef from DO to GCP","url":"/groups/gitlab-com/gl-infra/-/epics/138","group_id":1112072,"human_readable_end_date":"Oct 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25479123,"iid":8029,"project_id":1304532,"title":"Remove pgio from staging patroni servers","description":"Exhibit 1:\n* https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/8026\n* https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7932\n\nExhibit 2:\nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/6242#note_152545100\n\nWe're not using it, and it is causing problems.   It should be removed.","state":"closed","created_at":"2019-10-01T00:24:02.656Z","updated_at":"2022-08-04T22:03:26.316Z","closed_at":"2019-10-03T14:35:52.593Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["corrective action","workflow-infra::Done"],"milestone":{"id":1010428,"iid":46,"group_id":1112072,"title":"Dev \u0026 Ops: 2019-09-23 - 2019-10-06","description":"","state":"closed","created_at":"2019-09-23T09:44:24.361Z","updated_at":"2019-10-08T10:08:00.814Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/46"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8029","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8029","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8029/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8029/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8029","relative":"#8029","full":"gitlab-com/gl-infra/reliability#8029"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25478058,"iid":8028,"project_id":1304532,"title":"Document, plan, and test migration process for chef server","description":"As a part of #6128 we need to develop the process to migrate from our current chef server in Digital Ocean to a new, upgraded infrastructure in GCP. The initial assumption is that this will center around a backup and restore process, though this may need to be adjusted as we dig into the details.","state":"closed","created_at":"2019-09-30T22:59:24.458Z","updated_at":"2022-08-04T22:03:26.911Z","closed_at":"2020-09-21T23:58:52.935Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Research","chef","documentation","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8028","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8028","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8028/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8028/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8028","relative":"#8028","full":"gitlab-com/gl-infra/reliability#8028"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":138,"epic":{"id":16102,"iid":138,"title":"Migrate Chef from DO to GCP","url":"/groups/gitlab-com/gl-infra/-/epics/138","group_id":1112072,"human_readable_end_date":"Oct 31, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25437232,"iid":8018,"project_id":1304532,"title":"Look into removing non-needed, and re-add needed, public IPs in gprd","description":"After https://gitlab.com/gitlab-com/gl-infra/production/issues/1167, only the blackbox exporter and the console have public IPs in gprd.\n\nRemoving this IP from console would break kubernetes access, and removing it from the blackbox exporter broke monitoring for an unknown reason (possibly whitelisting).\n\nApparently these problems don't appear in gstg, but it's worth checking this out in case we're simply not noticing them.\n\nIf our own whitelisting, as opposed to customer whitelisting, is the reason we need these public IPs, then we should use static IPs and not exit via the Cloud NAT. This decouples Cloud NAT IP pool scaling from our infrastructure (isolates customer concnerns from our own).\n\nOne of the prometheus instances scrapes the CI runner managers and is federated with CI's prometheus. Firewall IP whitelisting in CI broke when we removed prometheus' public IPs, and was fixed by whitelisting the NAT IPs in CI. We should use a static IP for the prometheus instances to decouple this whitelisting from scaling the Cloud NAT IP pool.","state":"closed","created_at":"2019-09-30T08:19:26.853Z","updated_at":"2020-03-13T23:09:26.324Z","closed_at":"2020-03-13T22:10:31.114Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":1020810,"iid":49,"group_id":1112072,"title":"W43 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 21 Oct \t| T 22 Oct \t| W 23 Oct \t| Th 24 Oct  | F 25 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -       \t| -          | -\r\n| @cmiskell   \t| -        \t| -         | -       \t| -          | - \r\n| @hphilipps  \t| -      \t| -      \t| 📟  \t| 📟    | 📟\r\n| @msmiley    \t| 📟  \t| /      \t| /      \t| /          | /\r\n\r\nW43 working days: 22\r\n\r\n|             \t| M 28 Oct \t| T 29 Oct \t| W 30 Oct \t| Th 31 Oct  | F 01 Nov \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| -      \t| -      \t| -      \t| -          | 🌴\r\n| @cmiskell   \t| 🌴| -      \t| -      \t| -          | -\r\n| @hphilipps  \t| 📟  \t| 📟  \t| /        \t| 🌴          | 🌴 \r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW44 working days: 23\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 45**","state":"closed","created_at":"2019-10-02T14:57:08.851Z","updated_at":"2019-11-05T02:17:05.981Z","due_date":"2019-11-03","start_date":"2019-10-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/49"},"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8018","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8018","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8018/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8018/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8018","relative":"#8018","full":"gitlab-com/gl-infra/reliability#8018"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":97,"epic":{"id":13250,"iid":97,"title":"Egress traffic from gitlab.com should come from a known list of IPs","url":"/groups/gitlab-com/gl-infra/-/epics/97","group_id":1112072,"human_readable_end_date":"Mar 20, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25427390,"iid":8016,"project_id":1304532,"title":"Chef not running on dev.gitlab.org","description":"Plausibly broken related to the chef 12 vs chef 14 upgrade:\n\n```\nSep 29 22:05:17 dev.gitlab.org chef-client[20093]: [2019-09-29T22:05:17+00:00] ERROR: cannot load such file -- highline\nSep 29 22:05:17 dev.gitlab.org chef-client[20093]: [2019-09-29T22:05:17+00:00] ERROR: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\ncmiskell@dev:~$ ^C\ncmiskell@dev:~$ dpkg -l |grep chef\nii  chef                                 12.22.5-1                                  amd64        The full stack of chef\n```\n\n@alejandro Any input into what the right way forward is?  I'd hate to break it more than it already is.","state":"closed","created_at":"2019-09-29T22:27:48.482Z","updated_at":"2023-02-10T17:22:09.049Z","closed_at":"2019-09-30T18:27:02.241Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodríguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8016","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8016","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8016/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8016/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8016","relative":"#8016","full":"gitlab-com/gl-infra/reliability#8016"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25386425,"iid":8006,"project_id":1304532,"title":"Issue for investigation of gitlab_com_db_sync errors for data team","description":"This issue will be for investigation of data sync issues from our replica to snowflake for the data team for gitlab.com syncs.\n\nIt is related to https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7141 which covers the syncs for license, version, and customers.  \n\nFacts:\n- The data extracts run in Airflow from the gitlab-analysis project in GCP in a scheduled set of K8s jobs.\n- https://gitlab.com/gitlab-data has the projects, docker files and config\n- Connections are to: `postgresql://analytics:***@10.217.7.101:5432/gitlabhq_production` to connect to the analytics replica - which is GCP production instance postgres-dr-archive-01-db-gprd\n- logs of errors are in the slack channel #analytics-pipelines\n- We'll add example errors and date's times in comments.\n\n\ncc @kathleentam @tlapiana @jjstark from the data team. I'm trying to separate threads of investigation.  This issue will be for gitlab.com sync and we'll keep investigating the sync for customers, license, and version on #7141 .  The backends / gcp projects are different and we can better manange priority/ solutions if we split investigation.","state":"closed","created_at":"2019-09-27T14:40:30.493Z","updated_at":"2022-08-04T22:03:52.711Z","closed_at":"2019-10-03T22:27:16.927Z","closed_by":{"id":2289710,"username":"tlapiana","name":"Thomas La Piana","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2e58cec0335469b42a2bf54daea26a06?s=80\u0026d=identicon","web_url":"https://gitlab.com/tlapiana"},"labels":["Data Team","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2289710,"username":"tlapiana","name":"Thomas La Piana","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2e58cec0335469b42a2bf54daea26a06?s=80\u0026d=identicon","web_url":"https://gitlab.com/tlapiana"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2289710,"username":"tlapiana","name":"Thomas La Piana","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2e58cec0335469b42a2bf54daea26a06?s=80\u0026d=identicon","web_url":"https://gitlab.com/tlapiana"},"user_notes_count":21,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8006","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8006","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8006/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8006/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8006","relative":"#8006","full":"gitlab-com/gl-infra/reliability#8006"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25347064,"iid":8000,"project_id":1304532,"title":"Rollout Prometheus 1.13","description":"Prometheus 1.13.0 comes with a major improvement to Thanos sidecar data streaming. This greatly reduces the overhead of remote-read API access.\n\nCurrent status: Release Candidate is available.","state":"closed","created_at":"2019-09-26T14:25:01.847Z","updated_at":"2020-03-13T23:09:25.020Z","closed_at":"2020-03-13T22:10:16.044Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":1006849,"iid":45,"group_id":1112072,"title":"W41 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 07 Oct \t| T 08 Oct \t| W 09 Oct \t| Th 10 Oct  | F 11 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| On-call     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -   \t| On-call    | On-call\r\n| @cmiskell   \t| Moving   \t| Moving    | Moving  \t| Moving     | Moving  \t\r\n| @hphilipps  \t| Vacation \t| Vacation  | Vacation  | Vacation   | Vacation         \t\r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW41 working days: 16\r\n\r\n|             \t| M 14 Oct \t| T 15 Oct \t| W 16 Oct \t| Th 17 Oct  | F 18 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| On-call  \t| On-call  \t| -      \t| -          | -   \r\n| @cmiskell   \t| -      \t| -        \t| -        \t| -          | Moving\r\n| @hphilipps  \t| Ill        \t| Ill        \t| Ill        \t| -          | - \r\n| @msmiley    \t| -        \t| On-call   | On-call  \t| On-call    | On-call\r\n\r\nW42 working days: 21\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-18T18:11:09.033Z","updated_at":"2019-11-12T23:45:39.396Z","due_date":"2019-10-20","start_date":"2019-10-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/45"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":1,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/8000","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/8000","notes":"https://gitlab.com/api/v4/projects/1304532/issues/8000/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/8000/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#8000","relative":"#8000","full":"gitlab-com/gl-infra/reliability#8000"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25346668,"iid":7999,"project_id":1304532,"title":"Validate the kubectl wrapper script is working as desired","description":"During a recent maintenance event: https://gitlab.com/gitlab-com/gl-infra/production/issues/1192 the wrapper script failed to notify and ask for confirmation from the end user making changes in production.  Utilize this issue to investigate and make the appropriate changes.","state":"closed","created_at":"2019-09-26T14:15:10.577Z","updated_at":"2022-08-04T22:03:57.154Z","closed_at":"2019-09-27T17:15:57.945Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["Kubernetes::In-Progress","priority::2","severity::2","team::Delivery","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7999","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7999","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7999/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7999/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7999","relative":"#7999","full":"gitlab-com/gl-infra/reliability#7999"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25332462,"iid":7988,"project_id":1304532,"title":"The chef secrets bucket is created in 2 places","description":"it looks like the secrets bucket is created in 2 places:\n\n1. https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/project/blob/master/main.tf#L28, which is called from env-projects (in which there is an entry for CI)\n1. https://ops.gitlab.net/gitlab-com/gl-infra/terraform-modules/google/storage-buckets/blob/master/main.tf#L59\n\nSince env-projects and each gitlab env (e.g. gprd) are different TF envs, with separate tfstate, they can both track this bucket. @craig, when you created env-projects, did you have to import this bucket? If so we should decide whether or not this bucket belongs to the meta-env (env-projects) or a gitlab-google-project-tf-env (e.g. gprd, gstg).\n\nSince the secrets bucket must be pre-populated for any chef'ed VMs provisioned with terraform to work, I vote env-projects. @craig feel free to reassign this, but I just wanted to make sure we are on the same page before I make any change.\n\ncc @hphilipps (who I was chatting about this with)","state":"closed","created_at":"2019-09-26T08:28:16.587Z","updated_at":"2022-11-08T22:55:04.937Z","closed_at":"2019-10-17T18:11:34.550Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["chef","team::Reliability","workflow-infra::Done"],"milestone":{"id":1006849,"iid":45,"group_id":1112072,"title":"W41 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 07 Oct \t| T 08 Oct \t| W 09 Oct \t| Th 10 Oct  | F 11 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| On-call     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -   \t| On-call    | On-call\r\n| @cmiskell   \t| Moving   \t| Moving    | Moving  \t| Moving     | Moving  \t\r\n| @hphilipps  \t| Vacation \t| Vacation  | Vacation  | Vacation   | Vacation         \t\r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW41 working days: 16\r\n\r\n|             \t| M 14 Oct \t| T 15 Oct \t| W 16 Oct \t| Th 17 Oct  | F 18 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| On-call  \t| On-call  \t| -      \t| -          | -   \r\n| @cmiskell   \t| -      \t| -        \t| -        \t| -          | Moving\r\n| @hphilipps  \t| Ill        \t| Ill        \t| Ill        \t| -          | - \r\n| @msmiley    \t| -        \t| On-call   | On-call  \t| On-call    | On-call\r\n\r\nW42 working days: 21\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-18T18:11:09.033Z","updated_at":"2019-11-12T23:45:39.396Z","due_date":"2019-10-20","start_date":"2019-10-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/45"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7988","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7988","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7988/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7988/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7988","relative":"#7988","full":"gitlab-com/gl-infra/reliability#7988"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25316711,"iid":7980,"project_id":1304532,"title":"Plan and document roles for Vault cluster","description":"In the process of initial deployment for the Vault cluster, we need to consider how to organize the key/value store in Vault, and how to assign access across that organization, as well as the mechanics/process for approving, assigning, and managing access requests. This should be done in partnership with the security team, as they will likely have ownership over the access management process.","state":"closed","created_at":"2019-09-25T18:55:23.654Z","updated_at":"2022-08-04T23:01:09.686Z","closed_at":"2021-01-11T20:13:17.535Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Research","auto updated","documentation","vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7980","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7980","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7980/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7980/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7980","relative":"#7980","full":"gitlab-com/gl-infra/reliability#7980"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":25316624,"iid":7979,"project_id":1304532,"title":"Plan and document required backends for Vault cluster","description":"Once we have deployed the production vault cluster, we will need to determine the list of backends to support; this should minimally include Okta, but likely also GSuite and GitLab. This issue is intended to conduct the initial research into available backends, document the overall architecture, and plan (if/as needed) for subsequent implantation issues.","state":"closed","created_at":"2019-09-25T18:52:09.057Z","updated_at":"2022-08-04T23:01:10.343Z","closed_at":"2021-01-11T20:13:22.483Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Research","auto updated","documentation","vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7979","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7979","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7979/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7979/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7979","relative":"#7979","full":"gitlab-com/gl-infra/reliability#7979"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":25316457,"iid":7978,"project_id":1304532,"title":"Automate and document unsealing process for Vault","description":"Once we have a production Vault cluster we will need to provide documentation and automation around the unsealing process\n\n1. Document the basic process to seal/unseal the cluster\n1. Add keys for new engineers\n1. Remove keys after engineers change roles / leave the team\n1. Rotate keys for existing engineers\n1. Monitor/report on key expiration, last rotation, etc.","state":"closed","created_at":"2019-09-25T18:44:59.068Z","updated_at":"2022-08-04T23:01:10.916Z","closed_at":"2021-01-11T20:12:58.641Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["Research","documentation","vault","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7978","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7978","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7978/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7978/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7978","relative":"#7978","full":"gitlab-com/gl-infra/reliability#7978"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":62,"epic":{"id":7471,"iid":62,"title":"Deploy Vault to provide a solution for secrets management and use","url":"/groups/gitlab-com/gl-infra/-/epics/62","group_id":1112072},"iteration":null,"health_status":null},{"id":25279862,"iid":7969,"project_id":1304532,"title":"Fix thanos object store errors across envs","description":"ThanosCompactBucketOperationsFailed is firing regularly for thanos-store-0{1,2}-inf-gprd.\n\nGraphs show:\n1. High consistent failure rates in testbed + pre environments (not alerting due to their environment)\n1. Scattering of failures in ops + gstg + dr\n1. Regular failures of the 'get' operation in gprd, leading to these alerts.\n\nThis needs cleaning up for testbed + pre (to eliminate noise), and either fixing the errors, or increasing the threshold if they are normal and recoverable.","state":"closed","created_at":"2019-09-24T23:15:21.826Z","updated_at":"2022-08-04T23:01:17.602Z","closed_at":"2019-10-14T21:50:28.059Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7969","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7969","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7969/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7969/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7969","relative":"#7969","full":"gitlab-com/gl-infra/reliability#7969"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25268576,"iid":7967,"project_id":1304532,"title":"SLO for background processing jobs with a target to reach an upper-bound of 1 min","description":"Currently, for Sidekiq we have an SLA status. You can see a 30 day running average of the status available at https://dashboards.gitlab.net/d/general-slas/general-slas. \n\n![Screen_Shot_2019-09-24_at_12.08.10](/uploads/573f434d38a8d01e28788d4e067709f3/Screen_Shot_2019-09-24_at_12.08.10.png)\n\n@andrewn has done a considerable amount of work setting up alerts based on SLO violation. If we don't have them already setup for background processing jobs, we should. A considerable amount of work has been done to separate and split jobs, priorities, and queues appropriately, which hopefully allows us to place monitoring granularly for each specific category of job.\n\nhttps://dashboards.gitlab.net/d/sidekiq-main/sidekiq-overview?orgId=1 shows the metrics in detail. It's been raised that certain–maybe even all?–background processing jobs should adhere to a 1 min latency average. Though, at first glance, this may not be possible for all jobs–project exports take substantially longer than others.","state":"closed","created_at":"2019-09-24T17:15:58.755Z","updated_at":"2022-08-04T23:01:18.898Z","closed_at":"2019-10-08T20:55:10.571Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Observability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7967","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7967","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7967/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7967/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7967","relative":"#7967","full":"gitlab-com/gl-infra/reliability#7967"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25251099,"iid":7964,"project_id":1304532,"title":"first practice incident - rough agenda","description":"Basic summary\n\nThis is meant to be a simple problem to solve and a table top scenario.\nFirst, we are testing incident response and basic group of host interactions.\n\nOpen questions:\n1.  Could/Should we use staging to do this?\n1.  Should we make a project/repo (like readiness) to make md files for practice scenarios?\n\nScenario:\nservice stop haproxy on all LB - current status no haproxy running (front door is closed)\n\nIncident Start:\nEOC - execute command(s) to stop LB in gstg\n\nStart of incident handling\n1. EOC use `/incident declare` in `#incident management`\n\nValidate:\n1. [x] EOC page\n2. [x] IMOC page\n3. [x] CMOC page\n4. [x] Creation of incident gdoc\n5. [x] Creation of incident issue?\n6. [x] EOC, IMOC, CMOC join incident zoom\n\nOnce manager and cmoc join\n1. IMOC/CMOC - talk through any comments to understand the issue\n1. cmoc log into status.io and talk through what they would do to create incident [Link to tests status page](https://app.status.io/statuspage/5bedc0c2a394fc04c9ccc974)\n1. cmoc - talk through your update to status.io\n\nResolution actions\n1. EOC - talk through actions you would do to get load balancers restarted\n1. EOC/ Manager - talk about how to escalate to engineer on call\n1. Verify incident is resolved\n1. cmoc - confirm resolution and talk through status.io update\n1. Follow up with action items\n1. Create Incident Review issue\n1. How to escalate action items to infradev. \n\ncc @marin and @AnthonySandoval for feedback","state":"closed","created_at":"2019-09-24T15:29:52.257Z","updated_at":"2020-05-04T07:48:08.841Z","closed_at":"2020-04-27T20:24:24.246Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["workflow-infra::Done"],"milestone":{"id":1191536,"iid":71,"group_id":1112072,"title":"Reliability - April 2020","description":"","state":"closed","created_at":"2020-03-12T16:27:31.364Z","updated_at":"2020-05-08T14:25:17.816Z","due_date":"2020-04-30","start_date":"2020-04-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/71"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":31,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7964","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7964","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7964/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7964/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7964","relative":"#7964","full":"gitlab-com/gl-infra/reliability#7964"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":220,"epic":{"id":46477,"iid":220,"title":"Incident Management Process Improvements","url":"/groups/gitlab-com/gl-infra/-/epics/220","group_id":1112072,"human_readable_end_date":"Apr 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":25241086,"iid":7961,"project_id":1304532,"title":"Run rake task to update usage data entries on version.gitlab.com","description":"We need to execute the following rake task on the production instance of `version.gitlab.com`:\n`rake usage_data:fix_usage_data_stats`\n\nThe goal of this rake task is to change any `usage_data` record that has non integers in the `stats` `json` column to be compliant. i.e. having only integers for values in the `stats` column.\n\nThis rake task can be ran 2 ways:\n1.  Against all `usage_data` records that have a non empty `stats` column at once (in batches of 1000):\n*  `rake usage_data:fix_usage_data_stats`\n2.  Against predefined `id` ranges (to lessen the individual execution times per batch):\n*  `rake usage_data:fix_usage_data_stats[1,1000]` - where `1` is the starting `id` in `usage_data` table, and `1000` is the ending `id` in the `usage_data` table.  In this scenario, this would need ran in chunks up until the last `id` in the `usage_data` table, which is printed out in each run if arguments are passed as above.\n\nDecision on which one to run is up to the infrastructure team to decide.","state":"closed","created_at":"2019-09-24T13:19:11.731Z","updated_at":"2021-06-24T08:08:52.347Z","closed_at":"2019-09-25T20:38:48.671Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["SRE:On-call","toil","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7961","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7961","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7961/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7961/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7961","relative":"#7961","full":"gitlab-com/gl-infra/reliability#7961"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25220840,"iid":7958,"project_id":1304532,"title":"Investigate making haproxy metrics more robust","description":"https://dashboards.gitlab.net/d/AkOdlrSmk/imported-haproxy-stats uses haproxy_backend_current_sessions and haproxy_frontend_current_sessions which are point-in-time sampled values.  This leads to some anomalous and misleading graphs when the sampling misses active sessions, e.g. we've seen graphs drop to 0 for 429_rate_limit, when there are provably requests being rate-limited.  It's probably worse for rate-limited sessions that are dropped immediately, compared to any even slightly-longer-running normal HTTP requests which are going to result in a more consistent sampling.\n\nThe anomalous graphs have caused us to go down a rabbit hole of investigations at least once, and we need to do better.\n\nOptions include other haproxy exporter metrics, existing mtail metrics, or at worst, enhancing mtail to capture more data.","state":"closed","created_at":"2019-09-24T04:20:03.645Z","updated_at":"2022-08-04T23:01:25.664Z","closed_at":"2019-10-03T02:46:04.370Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["auto updated","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7958","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7958","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7958/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7958/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7958","relative":"#7958","full":"gitlab-com/gl-infra/reliability#7958"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25122694,"iid":7945,"project_id":1304532,"title":"Stabilize Cloud NAT in CI","description":"See https://gitlab.com/gitlab-org/gitlab/issues/32433#note_220111066 for original context.\n\nCloud NAT was rolled out to private runner machines in CI on 2019-09-20. There were then several job failures attributable to NAT failures: connection failures coinciding with error bursts at the NAT.\n\nSince then several increases in NAT port:VM ratio have been rolled out in order to mitigate these failures (while ensuring there are still enough IPs to support the private runner fleet). There have been no reports of job failures attributable to NAT since that ratio was set to 256 (it had originally been 64, the Cloud NAT default).\n\nThere have still been occasional period of elevated errors but it isn't clear whether or not these result in higher-level failures / slowdowns or are at an acceptable level to be fixed by higher-layer retries (TCP, or application layer).","state":"closed","created_at":"2019-09-23T15:41:01.506Z","updated_at":"2021-05-17T22:22:11.241Z","closed_at":"2020-03-13T22:10:43.380Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7945","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7945","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7945/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7945/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7945","relative":"#7945","full":"gitlab-com/gl-infra/reliability#7945"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25119636,"iid":7944,"project_id":1304532,"title":"Add smokeping_prober to gitlab-exporters","description":"Add a recipe to [gitlab-exporters](https://gitlab.com/gitlab-cookbooks/gitlab-exporters) to deploy the [smokeping_prober](https://github.com/SuperQ/smokeping_prober).","state":"closed","created_at":"2019-09-23T14:39:40.622Z","updated_at":"2019-12-06T21:42:31.556Z","closed_at":"2019-09-30T09:13:47.240Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability","team::Reliability","workflow-infra::Done"],"milestone":{"id":995966,"iid":44,"group_id":1112072,"title":"W39 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 23 Sep \t| T 24 Sep \t| W 25 Sep \t| Th 26 Sep  | F 27 Sep\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| Vacation        \t| -          | -\r\n| @cmiskell   \t| -        \t| On-call   | On-call  \t| On-call    | On-call  \t\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| -          | -         \t\r\n| @msmiley    \t| Vacation \t| Vacation \t| Vacation \t| Vacation   | -\r\n\r\nW39 working days: 21\r\n\r\n|             \t| M 30 Sep \t| T 01 Oct \t| W 02 Oct \t| Th 03 Oct \t| F 04 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|-----------\t|----------\r\n| @bjk-gitlab \t| -        \t| -        \t| SREcon   \t| SREcon      \t| SREcon   \r\n| @craig      \t| -        \t| On-call  \t| On-call  \t| On-call      \t| On-call  \r\n| @craigf     \t| -        \t| -        \t| SREcon   \t| SREcon       \t| SREcon   \r\n| @cmiskell   \t| On-call \t| -        \t| -        \t| -          \t| On-call recovery\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| Holiday      \t| Vacation \r\n| @msmiley    \t| -        \t| -         | -        \t| -          \t| -         \r\n\r\nW40 working days: 16\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-09T20:45:22.363Z","updated_at":"2019-10-07T16:05:35.691Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/44"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7944","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7944","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7944/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7944/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7944","relative":"#7944","full":"gitlab-com/gl-infra/reliability#7944"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25071265,"iid":7933,"project_id":1304532,"title":"dashboards.gitlab.com down","description":"I got an alert for dashboards.gitlab.com being down. Upon investigation I can't log into it. Checked the console and lo, `thanos` had OOMed. Below is the log. \n\n```\n[7387773.088506] Out of memory: Kill process 6189 (thanos) score 923 or sacrifice child\n[7387773.096489] Killed process 6189 (thanos) total-vm:14551252kB, anon-rss:14190680kB, file-rss:1328kB, shmem-rss:0kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088171] thanos invoked oom-killer: gfp_mask=0x14280ca(GFP_HIGHUSER_MOVABLE|__GFP_ZERO), nodemask=(null), order=0, oom_score_adj=0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088174] thanos cpuset=/ mems_allowed=0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088183] CPU: 2 PID: 6194 Comm: thanos Not tainted 4.15.0-1034-gcp #36~16.04.1-Ubuntu\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088184] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088185] Call Trace:\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088198]  dump_stack+0x85/0xcb\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088203]  dump_header+0x77/0x285\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088206]  oom_kill_process+0x22e/0x450\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088208]  out_of_memory+0x11d/0x4c0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088211]  __alloc_pages_slowpath+0xda2/0xe90\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088214]  __alloc_pages_nodemask+0x265/0x280\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088221]  alloc_pages_vma+0x88/0x1e0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088226]  __handle_mm_fault+0xe26/0x11b0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088228]  handle_mm_fault+0xcc/0x1c0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088234]  __do_page_fault+0x265/0x500\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088236]  do_page_fault+0x2e/0xf0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088242]  ? page_fault+0x2f/0x50\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088244]  page_fault+0x45/0x50\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088248] RIP: 0033:0x45dab3\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088249] RSP: 002b:000000c000095f08 EFLAGS: 00010202\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088252] RAX: 0000000000000000 RBX: 00000000000aa000 RCX: 000000c21d158000\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088253] RDX: 0000000003214d20 RSI: 0000000000000010 RDI: 000000c21d16a000\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088254] RBP: 000000c000095f50 R08: 00007f3ed4d14638 R09: 000000000000005e\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088255] R10: 0000000000000909 R11: 000000000000005d R12: 0000000000001901\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088257] R13: 000000000000000a R14: 0000000000000009 R15: 000000000000000e\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088272] Mem-Info:\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088278] active_anon:3719380 inactive_anon:14957 isolated_anon:0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088278]  active_file:1686 inactive_file:1810 isolated_file:12\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088278]  unevictable:913 dirty:0 writeback:0 unstable:0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088278]  slab_reclaimable:13754 slab_unreclaimable:19825\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088278]  mapped:4934 shmem:37945 pagetables:9802 bounce:0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088278]  free:32774 free_pcp:0 free_cma:0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088283] Node 0 active_anon:14877520kB inactive_anon:59828kB active_file:6744kB inactive_file:7240kB unevictable:3652kB isolated(anon):0kB isolated(file):48kB mapped:19736kB dirty:0kB writeback:0kB shmem:151780kB shmem_thp: 0kB shmem_pmdmapped: 0kB anon_thp: 12288kB writeback_tmp:0kB unstable:0kB all_unreclaimable? no\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088285] Node 0 DMA free:15908kB min:68kB low:84kB high:100kB active_anon:0kB inactive_anon:0kB active_file:0kB inactive_file:0kB unevictable:0kB writepending:0kB present:15992kB managed:15908kB mlocked:0kB kernel_stack:0kB pagetables:0kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088290] lowmem_reserve[]: 0 2980 14999 14999 14999\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088294] Node 0 DMA32 free:61196kB min:13412kB low:16764kB high:20116kB active_anon:2976080kB inactive_anon:0kB active_file:1784kB inactive_file:1036kB unevictable:0kB writepending:0kB present:3129332kB managed:3063764kB mlocked:0kB kernel_stack:48kB pagetables:4048kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088298] lowmem_reserve[]: 0 0 12018 12018 12018\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088308] Node 0 Normal free:53992kB min:54096kB low:67620kB high:81144kB active_anon:11900208kB inactive_anon:59828kB active_file:6276kB inactive_file:6744kB unevictable:3652kB writepending:0kB present:12582912kB managed:12313748kB mlocked:3652kB kernel_stack:6400kB pagetables:35160kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088312] lowmem_reserve[]: 0 0 0 0 0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088315] Node 0 DMA: 1*4kB (U) 0*8kB 0*16kB 1*32kB (U) 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (M) 3*4096kB (M) = 15908kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088328] Node 0 DMA32: 184*4kB (UME) 158*8kB (UME) 179*16kB (UME) 251*32kB (UME) 120*64kB (UME) 133*128kB (UME) 63*256kB (UME) 9*512kB (U) 1*1024kB (U) 1*2048kB (H) 0*4096kB = 61408kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088342] Node 0 Normal: 603*4kB (UME) 532*8kB (UME) 906*16kB (UME) 295*32kB (ME) 246*64kB (ME) 57*128kB (M) 1*256kB (M) 0*512kB 1*1024kB (M) 0*2048kB 0*4096kB = 54924kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088356] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=1048576kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088357] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088358] 40487 total pagecache pages\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088360] 0 pages in swap cache\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088361] Swap cache stats: add 0, delete 0, find 0/0\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088362] Free swap  = 0kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088363] Total swap = 0kB\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088363] 3932059 pages RAM\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088364] 0 pages HighMem/MovableOnly\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088365] 83704 pages reserved\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088365] 0 pages cma reserved\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088366] 0 pages hwpoisoned\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088367] [ pid ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088373] [  447]     0   447    25742       47    94208        0             0 lvmetad\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088375] [  463]     0   463     3051     1090    61440        0             0 haveged\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088378] [  465]     0   465    15257     4602   159744        0             0 systemd-journal\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088380] [  475]     0   475    10775      525   118784        0         -1000 systemd-udevd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088382] [ 1212]     0  1212     4031      566    73728        0             0 dhclient\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088384] [ 1392]     0  1392     1305       29    61440        0             0 iscsid\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088386] [ 1393]     0  1393     1430      877    65536        0           -17 iscsid\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088388] [ 1403]     0  1403     6932      454   102400        0             0 cron\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088390] [ 1413]     0  1413    95627      312   114688        0             0 lxcfs\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088392] [ 1438]     0  1438     6511      362    94208        0             0 atd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088394] [ 1449]     0  1449     7154      293    98304        0             0 systemd-logind\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088396] [ 1457]     0  1457    69182      813   172032        0             0 accounts-daemon\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088398] [ 1464]     0  1464     1098      140    53248        0             0 runsvdir\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088400] [ 1472]     0  1472     1099      316    57344        0             0 acpid\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088402] [ 1480]   107  1480    10757      516   135168        0          -900 dbus-daemon\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088404] [ 1492]     0  1492     1060      271    53248        0             0 runsv\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088406] [ 1494]     0  1494     1060       69    53248        0             0 runsv\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088408] [ 1495]     0  1495     1060      235    53248        0             0 runsv\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088410] [ 1496]     0  1496     1060      217    49152        0             0 runsv\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088412] [ 1508]     0  1508     1096       29    53248        0             0 svlogd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088414] [ 1511]     0  1511     1096       17    57344        0             0 svlogd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088416] [ 1513]   999  1513    29142     6731   143360        0             0 node_exporter\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088418] [ 1521]     0  1521     1096       16    53248        0             0 svlogd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088420] [ 1526]     0  1526     1096      270    57344        0             0 svlogd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088422] [ 1759]     0  1759    43334     2459   233472        0             0 unattended-upgr\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088424] [ 1760]     0  1760    69272      269   184320        0             0 polkitd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088426] [ 1787]     0  1787     3343       84    69632        0             0 mdadm\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088428] [ 1895]   112  1895    10067      290   110592        0             0 ntpd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088430] [ 1906]     0  1906     3618      392    69632        0             0 agetty\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088432] [ 1909]     0  1909     3664      327    69632        0             0 agetty\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088434] [ 1968]     0  1968     8134      578    98304        0             0 nginx\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088436] [ 2048]     0  2048    16861     3964   180224        0             0 google_network_\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088438] [ 2049]     0  2049    16808     3710   172032        0             0 google_clock_sk\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088441] [ 2167]     0  2167    16378      350   167936        0         -1000 sshd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088442] [ 2173]     0  2173    16352      156   110592        0             0 master\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088445] [ 2177]   113  2177    17308      777   126976        0             0 qmgr\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088447] [ 6399]   999  6399   337760    27793  2686976        0             0 trickster\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088449] [ 8803]   998  8803    45310     5678   249856        0             0 consul\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088451] [23096]  1002 23096    11322      204   118784        0             0 systemd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088453] [23097]  1002 23097    52180      500   163840        0             0 (sd-pam)\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088455] [23217]  1002 23217     6479      525    94208        0             0 screen\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088457] [23218]  1002 23218     4995      513    77824        0             0 bash\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088459] [23223]     0 23223    12855      527   147456        0             0 sudo\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088461] [23224]     0 23224    12751      494   143360        0             0 su\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088463] [23225]     0 23225     5361      920    86016        0             0 bash\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088465] [29388]     0 29388    43355    10443   364544        0             0 fluentd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088467] [29393]     0 29393   193329    38773  1748992        0             0 ruby\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088469] [ 6189]   999  6189  3637813  3548002 29052928        0             0 thanos\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088471] [10135]     0 10135    41314    12584   360448        0             0 chef-client\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088473] [  831]   115   831    15848      119   106496        0             0 memcached\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088475] [ 8839]   116  8839   650365    16297   761856        0             0 grafana-server\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088477] [16643]   104 16643    64098      243   135168        0             0 rsyslogd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088479] [12654]   113 12654    16869      299   126976        0             0 pickup\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088482] [21777]    33 21777     8314      406    98304        0             0 nginx\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088484] [21778]    33 21778     8313      496    98304        0             0 nginx\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088485] [21779]    33 21779     8316      549    98304        0             0 nginx\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088487] [21780]    33 21780     8314      516    98304        0             0 nginx\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088490] [22344]     0 22344     1094      161    57344        0             0 sleep\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088492] [22348]     0 22348     1094      156    53248        0             0 sleep\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088494] [22350]     0 22350    12235      402   143360        0             0 cron\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088496] [22351]     0 22351     1126      174    53248        0             0 sh\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088498] [22352]     0 22352    35950     2728   184320        0             0 ruby\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088500] [22353]     0 22353    42667    14441   368640        0             0 chef-client\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088502] [22356]     0 22356    16378      608   172032        0             0 sshd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088504] [22361]   110 22361    16378      433   163840        0             0 sshd\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.088506] Out of memory: Kill process 6189 (thanos) score 923 or sacrifice child\nSep 21 04:05:04 dashboards-com-01-inf-ops kernel: [7387773.096489] Killed process 6189 (thanos) total-vm:14551252kB, anon-rss:14190680kB, file-rss:1328kB, shmem-rss:0kB\nSep 21 04:05:05 dashboards-com-01-inf-ops kernel: [7387774.148113] oom_reaper: reaped process 6189 (thanos), now anon-rss:0kB, file-rss:0kB, shmem-rss:0kB\n```","state":"closed","created_at":"2019-09-21T04:09:11.390Z","updated_at":"2019-12-06T21:42:31.431Z","closed_at":"2019-10-10T13:06:56.653Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7933","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7933","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7933/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7933/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7933","relative":"#7933","full":"gitlab-com/gl-infra/reliability#7933"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":25031726,"iid":7924,"project_id":1304532,"title":"Tuning Puma settings on ops.gitlab.net","description":"There is a small background rate of Puma worker terminations with the default memory limit of 650MiB in combination with 4 worker threads.\n\n![puma-memory-max-2019-09-20](/uploads/2eed4c9667664bd5c5d14e54a126f534/puma-memory-max-2019-09-20.png)\n\n![puma-worker-terminations-2019-09-20](/uploads/0fcc69b87dd166cb09b566f5f3fe4c40/puma-worker-terminations-2019-09-20.png)","state":"closed","created_at":"2019-09-20T10:34:26.837Z","updated_at":"2019-12-06T21:42:31.174Z","closed_at":"2019-09-26T12:36:35.509Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":995966,"iid":44,"group_id":1112072,"title":"W39 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 23 Sep \t| T 24 Sep \t| W 25 Sep \t| Th 26 Sep  | F 27 Sep\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| Vacation        \t| -          | -\r\n| @cmiskell   \t| -        \t| On-call   | On-call  \t| On-call    | On-call  \t\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| -          | -         \t\r\n| @msmiley    \t| Vacation \t| Vacation \t| Vacation \t| Vacation   | -\r\n\r\nW39 working days: 21\r\n\r\n|             \t| M 30 Sep \t| T 01 Oct \t| W 02 Oct \t| Th 03 Oct \t| F 04 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|-----------\t|----------\r\n| @bjk-gitlab \t| -        \t| -        \t| SREcon   \t| SREcon      \t| SREcon   \r\n| @craig      \t| -        \t| On-call  \t| On-call  \t| On-call      \t| On-call  \r\n| @craigf     \t| -        \t| -        \t| SREcon   \t| SREcon       \t| SREcon   \r\n| @cmiskell   \t| On-call \t| -        \t| -        \t| -          \t| On-call recovery\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| Holiday      \t| Vacation \r\n| @msmiley    \t| -        \t| -         | -        \t| -          \t| -         \r\n\r\nW40 working days: 16\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-09T20:45:22.363Z","updated_at":"2019-10-07T16:05:35.691Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/44"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7924","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7924","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7924/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7924/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7924","relative":"#7924","full":"gitlab-com/gl-infra/reliability#7924"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":78,"epic":{"id":8807,"iid":78,"title":"Enable Puma on GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/78","group_id":1112072,"human_readable_end_date":"Feb 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24993969,"iid":7919,"project_id":1304532,"title":"View stackdriver metrics from the CI project","description":"In order to implement https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7728, we need to be able to alert on stackdriver metrics in the CI project. This will involve:\n\n- [x] rolling out a sd-exporter there\n- [x] Ensuring that exporter is scraped by prometheus\n- [x] Being able to view those metrics in thanos\n- [x] Being able to send alerts based on these metrics to Alertmanager.\n\ncc @hphilipps","state":"closed","created_at":"2019-09-19T14:57:09.275Z","updated_at":"2020-03-13T23:09:26.602Z","closed_at":"2020-03-13T22:11:07.715Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":995966,"iid":44,"group_id":1112072,"title":"W39 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 23 Sep \t| T 24 Sep \t| W 25 Sep \t| Th 26 Sep  | F 27 Sep\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| Vacation        \t| -          | -\r\n| @cmiskell   \t| -        \t| On-call   | On-call  \t| On-call    | On-call  \t\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| -          | -         \t\r\n| @msmiley    \t| Vacation \t| Vacation \t| Vacation \t| Vacation   | -\r\n\r\nW39 working days: 21\r\n\r\n|             \t| M 30 Sep \t| T 01 Oct \t| W 02 Oct \t| Th 03 Oct \t| F 04 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|-----------\t|----------\r\n| @bjk-gitlab \t| -        \t| -        \t| SREcon   \t| SREcon      \t| SREcon   \r\n| @craig      \t| -        \t| On-call  \t| On-call  \t| On-call      \t| On-call  \r\n| @craigf     \t| -        \t| -        \t| SREcon   \t| SREcon       \t| SREcon   \r\n| @cmiskell   \t| On-call \t| -        \t| -        \t| -          \t| On-call recovery\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| Holiday      \t| Vacation \r\n| @msmiley    \t| -        \t| -         | -        \t| -          \t| -         \r\n\r\nW40 working days: 16\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-09T20:45:22.363Z","updated_at":"2019-10-07T16:05:35.691Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/44"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7919","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7919","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7919/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7919/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7919","relative":"#7919","full":"gitlab-com/gl-infra/reliability#7919"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24938011,"iid":7911,"project_id":1304532,"title":"Revert any manual work created from db user creation gstg-deploy to bypass statement_timeout","description":"Yesterday the staging deploy was failing due to a statement timeout.  See the MR here: https://ops.gitlab.net/gitlab-cookbooks/chef-repo/merge_requests/1849\n\nThis is being reverted.  See the MR for additional context.\n\nAny work that was done to create this dedicated user now needs to be removed as well.  This issue can be closed when that user is removed from the system.","state":"closed","created_at":"2019-09-18T11:54:31.020Z","updated_at":"2022-08-04T23:02:33.841Z","closed_at":"2019-09-18T13:29:56.378Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":null,"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7911","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7911","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7911/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7911/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7911","relative":"#7911","full":"gitlab-com/gl-infra/reliability#7911"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24921423,"iid":7909,"project_id":1304532,"title":"Track the cost of enabling serial port logging into Stackdriver","description":"Enabled in https://gitlab.com/gitlab-com/gl-infra/production/issues/1156, this will cause additional (duplicated) logging into stackdriver, and we would like to understand the cost implications of this.  We can estimate it (and have, with an upper limit of around ~3GB/day in prod), but it will likely be easier to simply measure it after the fact to be really sure.","state":"closed","created_at":"2019-09-17T22:18:52.265Z","updated_at":"2019-12-03T22:28:35.716Z","closed_at":"2019-09-19T13:40:48.155Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-20","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7909","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7909","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7909/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7909/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7909","relative":"#7909","full":"gitlab-com/gl-infra/reliability#7909"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24920914,"iid":7908,"project_id":1304532,"title":"Move Docker Build stage from GitLab Services to ci-images repository","description":"There is a docker file which is built at the beginning of each pipeline in the GitLab Services project.  This image rarely changes, and should be moved to our [CI Images Repository](https://gitlab.com/gitlab-com/gl-infra/ci-images/). It is currently slowing down work by adding a lot of time to every pipeline run (even no-op), for no good reason.\n\nThe docker file is in `docker files/environments_client/Dockerfile` and is built in the [build_client_image](https://ops.gitlab.net/gitlab-com/services-base/blob/master/.gitlab-ci.yml#L19) stage.\n\nThis image is based on `google/cloud-sdk:alpine` and includes:\n\n- `git`\n- `openssh`\n- `curl`\n- `jq`\n- `kubectl`\n- `Helm`\n\nThe version of the Docker image should reflect the version of `Helm` that is installed.\n\nOnce the image is built correctly, the `.gitlab-ci.yml` file needs to be updated with the correct [DOCKER_IMAGE_TAG](https://ops.gitlab.net/gitlab-com/services-base/blob/master/.gitlab-ci.yml#L4)","state":"closed","created_at":"2019-09-17T21:46:34.621Z","updated_at":"2022-08-04T23:02:36.039Z","closed_at":"2019-10-08T00:17:55.801Z","closed_by":{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"},"labels":["team::Reliability","terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7908","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7908","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7908/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7908/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7908","relative":"#7908","full":"gitlab-com/gl-infra/reliability#7908"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24897306,"iid":7901,"project_id":1304532,"title":"Gather input from Engineers regarding the content of a Grafana 101 training video","description":"Objective: To identify content Engineers would like included in a Grafana 101 Training Video\n\nGoals: GitLab Engineers need a comprehensive tutorial video to empower them to use Grafana to ensure they have the background to use this robust analytical and visualization tool.  The goal for this issue to identify the content that will be included in this video.","state":"closed","created_at":"2019-09-17T13:34:45.763Z","updated_at":"2022-08-04T23:02:42.731Z","closed_at":"2019-10-28T12:40:53.967Z","closed_by":{"id":4124757,"username":"dsatcher","name":"Darva Satcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4124757/avatar.png","web_url":"https://gitlab.com/dsatcher"},"labels":["Learning \u0026 Development","auto updated","workflow-infra::Done"],"milestone":{"id":962209,"iid":52,"group_id":6543,"title":"12.4","description":"","state":"closed","created_at":"2019-08-07T03:20:04.349Z","updated_at":"2020-05-13T19:25:20.657Z","due_date":"2019-10-23","start_date":"2019-09-22","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/-/milestones/52"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},{"id":4124757,"username":"dsatcher","name":"Darva Satcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4124757/avatar.png","web_url":"https://gitlab.com/dsatcher"}],"author":{"id":4124757,"username":"dsatcher","name":"Darva Satcher","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4124757/avatar.png","web_url":"https://gitlab.com/dsatcher"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7901","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7901","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7901/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7901/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7901","relative":"#7901","full":"gitlab-com/gl-infra/reliability#7901"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24866551,"iid":7898,"project_id":1304532,"title":"Terraform automation blog post","description":"It feels like we've hit a milestone in our Terraform configs, so it seems like a good time to do a write-up.\n\nInitial ideas/brainstorming\n\n- Using GitLab CI to run terraform\n  - Leverage GitLab Environments feature\n  - Clean up drift, upgrade to 0.12\n- Greenfield (ephemeral-environments, group-projects, services) vs legacy (gitlab-com-infrastructure)\n  - Are we using AutoDevOps for any of these?\n- Mono-repo to versioned modules, tagging pipeline\n- Cleanup/link to [design doc](https://about.gitlab.com/handbook/engineering/infrastructure/library/terraform-automation/)\n- Next steps / future plans\n  - [GitLab Flow](https://about.gitlab.com/handbook/engineering/infrastructure/library/git-workflow/)\n  - [Incorporate Vault](https://about.gitlab.com/handbook/engineering/infrastructure/library/vault/)\n\n/cc @ansdval for prioritization / scheduling\n/cc @devin @craigf @hphilipps @ggillies FYI","state":"closed","created_at":"2019-09-17T01:47:09.931Z","updated_at":"2022-08-04T23:02:44.076Z","closed_at":"2020-09-29T08:04:06.023Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["auto updated","team::Reliability","terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":7,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7898","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7898","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7898/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7898/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7898","relative":"#7898","full":"gitlab-com/gl-infra/reliability#7898"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24854308,"iid":7897,"project_id":1304532,"title":"Remove Geo config in staging","description":"The staging environment is set up as a Geo primary.  This is probably left over from previous work.  It is causing unnecessary jobs, and likely also a lot of unnecessary database records.\n\nI'm going to go ahead and remove the primary config. Since there is no secondary, this shouldn't hurt anything.  If someone needs it, they can set it up again.\n\nI'm creating this issue so that there is a record of what was done.\n\n![Screen_Shot_2019-09-16_at_1.33.59_PM](/uploads/6cf442f3dd08b1e292b1ce482ab5ed37/Screen_Shot_2019-09-16_at_1.33.59_PM.png)","state":"closed","created_at":"2019-09-16T23:35:09.908Z","updated_at":"2022-08-04T23:02:44.756Z","closed_at":"2019-09-16T23:36:44.116Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["staging","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7897","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7897","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7897/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7897/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7897","relative":"#7897","full":"gitlab-com/gl-infra/reliability#7897"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24846543,"iid":7896,"project_id":1304532,"title":"Group Project Request: gitlab-qa-50k","description":"# Group Project Request\n\n- Project / Group Name (\u003c17 characters): `gitlab-qa-50k`\n- Project Administrator (email): gyoung@gitlab.com\n\n### Provide a brief overview of the reason for this project and why it is needed and for how long it will be used.\n\nThis project will contain the environment used to test the 50k reference architecture which will be built and maintained by the Quality Department. \n\nThis project will be used indefinitely - as long as the 50k reference environment stays relevant and supported. \n\nQuality's issue to create the 50k environment: https://gitlab.com/gitlab-org/quality/performance/issues/66\n\n## Security\n\n### Provide a list of data and the corresponding classification that will be used in this project and how it will be accessed.\n\nThe data used is a sterile copy of GitLab CE. There is no sensitive data. The data is used during the load tests to simulate an appropriately complex project. @grantyoung can you verify that what I've described here is valid and correct?\n\n## Group Project Access Checklist\n\nMake sure the following criteria is met and understood by the project administrator. \n\n- [-] If the gitlab.com database is copied, that data has been processed by the [pseudonymization script]( https://gitlab.com/gitlab-com/runbooks/blob/master/howto/pseudonymization-gitlab-db.md).\n- [x] Regular security updates are applied to all nodes in the project.\n- [x] Unused instances will be removed in a timely manner\n- [x] The Project Administrator is responsible for any users or additional administrators that they add to the project\n- [x] The Project Administrator is responsible for justifying any cloud spend within the project.\n- [x] Group Projects are intended for development, test, or demo work. Everything in these projects is considered temporary.\n\n## Infrastructure Tasks\n\n- [x] Create file in https://ops.gitlab.net/gitlab-com/group-projects named `environments/(group name from above).tf` by copying an existing file and changing the Administrator and Group Name variables\n- [x] Merge the change to master\n- [x] Create a branch from master named `(group name from above)` and push\n- [x] Verify that the pipeline completed successfully at https://ops.gitlab.net/gitlab-com/group-projects/pipelines","state":"closed","created_at":"2019-09-16T17:55:45.472Z","updated_at":"2022-08-04T23:02:45.310Z","closed_at":"2019-09-19T21:58:29.437Z","closed_by":{"id":136229,"username":"cindy","name":"Cindy Pallares 🦉","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"labels":["auto updated","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":3218501,"username":"tpazitny","name":"Tanya Pazitny","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3218501/avatar.png","web_url":"https://gitlab.com/tpazitny"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7896","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":9},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7896","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7896/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7896/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7896","relative":"#7896","full":"gitlab-com/gl-infra/reliability#7896"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24846514,"iid":7895,"project_id":1304532,"title":"Group Project Request: gitlab-qa-25k","description":"# Group Project Request\n\n- Project / Group Name (\u003c17 characters): `gitlab-qa-25k`\n- Project Administrator (email): gyoung@gitlab.com\n\n### Provide a brief overview of the reason for this project and why it is needed and for how long it will be used.\n\nThis project will contain the environment used to test the 25k reference architecture which will be built and maintained by the Quality Department. \n\nThis project will be used indefinitely - as long as the 25k reference environment stays relevant and supported. \n\nQuality's issue to create the 25k environment: https://gitlab.com/gitlab-org/quality/performance/issues/57\n\n## Security\n\n### Provide a list of data and the corresponding classification that will be used in this project and how it will be accessed.\n\nThe data used is a sterile copy of GitLab CE. There is no sensitive data. The data is used during the load tests to simulate an appropriately complex project. @grantyoung can you verify that what I've described here is valid and correct?\n\n## Group Project Access Checklist\n\nMake sure the following criteria is met and understood by the project administrator. \n\n- [-] If the gitlab.com database is copied, that data has been processed by the [pseudonymization script]( https://gitlab.com/gitlab-com/runbooks/blob/master/howto/pseudonymization-gitlab-db.md).\n- [x] Regular security updates are applied to all nodes in the project.\n- [x] Unused instances will be removed in a timely manner\n- [x] The Project Administrator is responsible for any users or additional administrators that they add to the project\n- [x] The Project Administrator is responsible for justifying any cloud spend within the project.\n- [x] Group Projects are intended for development, test, or demo work. Everything in these projects is considered temporary.\n\n## Infrastructure Tasks\n\n- [x] Create file in https://ops.gitlab.net/gitlab-com/group-projects named `environments/(group name from above).tf` by copying an existing file and changing the Administrator and Group Name variables\n- [x] Merge the change to master\n- [x] Create a branch from master named `(group name from above)` and push\n- [x] Verify that the pipeline completed successfully at https://ops.gitlab.net/gitlab-com/group-projects/pipelines","state":"closed","created_at":"2019-09-16T17:54:45.813Z","updated_at":"2022-08-04T23:02:45.823Z","closed_at":"2019-09-19T22:15:53.051Z","closed_by":{"id":136229,"username":"cindy","name":"Cindy Pallares 🦉","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"labels":["auto updated","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":3218501,"username":"tpazitny","name":"Tanya Pazitny","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3218501/avatar.png","web_url":"https://gitlab.com/tpazitny"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7895","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":9},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7895","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7895/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7895/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7895","relative":"#7895","full":"gitlab-com/gl-infra/reliability#7895"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24814664,"iid":7886,"project_id":1304532,"title":"Take a screenshot about the group hook under gitlab-org","description":"Following up from https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7855#note_217393324\n\n@cmiskell I just tried to manually trigger it, but I don't think it's working. Could you please take a screenshot on the hook editing page so I can see if it's properly configured?\n\nTest was done at: https://gitlab.com/gitlab-org/quality/triage-serverless/issues/11#note_217393880\n\nMarking as confidential because it contains tokens.","state":"closed","created_at":"2019-09-16T07:19:59.410Z","updated_at":"2022-08-04T23:02:50.331Z","closed_at":"2019-09-17T04:02:43.180Z","closed_by":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"labels":["toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7886","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7886","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7886/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7886/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7886","relative":"#7886","full":"gitlab-com/gl-infra/reliability#7886"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24797351,"iid":7882,"project_id":1304532,"title":"Fix Thanos compaction","description":"Due to lack of monitoring, Thanos compaction has been broken for quite some time. This causes a number of problems.\n\n* Much larger indexing overhead, leading to slow queries.\n* Storage overhead due to large number of indexes, un-compacted blocks.\n* Missing downsample data.\n\nAll of the above lead to higher query overhead and slower queries.","state":"closed","created_at":"2019-09-15T12:10:02.762Z","updated_at":"2019-12-06T21:42:44.997Z","closed_at":"2019-09-20T08:01:01.133Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability-reliability","team::Reliability","workflow-infra::Done"],"milestone":{"id":995879,"iid":43,"group_id":1112072,"title":"W37 Secure \u0026 Defend","description":"We'll be keeping the same Kanban board for team work and filtering on a new milestone every odd numbered week. This \"sprint\" construct is going to be used to facilitate backlog grooming and planning.","state":"closed","created_at":"2019-09-09T19:23:14.535Z","updated_at":"2019-09-23T21:27:53.972Z","due_date":"2019-09-22","start_date":"2019-09-09","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/43"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7882","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7882","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7882/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7882/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7882","relative":"#7882","full":"gitlab-com/gl-infra/reliability#7882"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24783977,"iid":7881,"project_id":1304532,"title":"file-15-stor-gprd rebooted","description":"file-15-stor-gprd rebooted at 9/14 09:37 UTC.\n\nOpened this issue to track repos with zeroed files. Currently searching through all repos:\n\n```\ncd /var/opt/gitlab/git-data/repositories/@hashed\nionice -n 5 find . -regextype sed -regex \".*/objects/.*\" -size 0 \u003e /var/tmp/zerofiles.txt\n```","state":"closed","created_at":"2019-09-14T10:06:43.651Z","updated_at":"2022-08-04T23:02:53.230Z","closed_at":"2019-10-16T20:54:25.295Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["(perceived) data loss","SRE:On-call","Service::Git","oncall","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7881","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7881","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7881/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7881/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7881","relative":"#7881","full":"gitlab-com/gl-infra/reliability#7881"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24770817,"iid":7877,"project_id":1304532,"title":"Consider the use of a Docker image to contain tooling for local workstation use of Kubernetes","description":"Not all Engineers have their machines configured the same.  We may also have a need to specify certain configurations to limit/prevent access.  Could a centrally managed docker image assist us with this situation?","state":"closed","created_at":"2019-09-13T15:42:06.130Z","updated_at":"2022-10-28T16:27:23.241Z","closed_at":"2022-10-28T14:29:02.593Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["Kubernetes::Unplanned","kubernetes","team::Delivery"],"milestone":null,"assignees":[],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7877","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7877","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7877/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7877/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7877","relative":"#7877","full":"gitlab-com/gl-infra/reliability#7877"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24745540,"iid":7872,"project_id":1304532,"title":"GCP VM spontaneous reboots","description":"https://portal.rackspace.com/1173105/tickets/details/190911-ord-0001152\n\nRaised because we couldn't see any reason for the reboots in our logs or other infrastructure logs in Stackdriver, and are vaguely hopeful GCP might be able to provide some sort of explanation.","state":"closed","created_at":"2019-09-13T03:08:42.600Z","updated_at":"2021-06-24T08:10:08.550Z","closed_at":"2019-10-07T16:09:04.956Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Observability","auto updated","priority::1","team::Reliability","workflow-infra::Done"],"milestone":{"id":995966,"iid":44,"group_id":1112072,"title":"W39 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 23 Sep \t| T 24 Sep \t| W 25 Sep \t| Th 26 Sep  | F 27 Sep\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| Vacation        \t| -          | -\r\n| @cmiskell   \t| -        \t| On-call   | On-call  \t| On-call    | On-call  \t\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| -          | -         \t\r\n| @msmiley    \t| Vacation \t| Vacation \t| Vacation \t| Vacation   | -\r\n\r\nW39 working days: 21\r\n\r\n|             \t| M 30 Sep \t| T 01 Oct \t| W 02 Oct \t| Th 03 Oct \t| F 04 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|-----------\t|----------\r\n| @bjk-gitlab \t| -        \t| -        \t| SREcon   \t| SREcon      \t| SREcon   \r\n| @craig      \t| -        \t| On-call  \t| On-call  \t| On-call      \t| On-call  \r\n| @craigf     \t| -        \t| -        \t| SREcon   \t| SREcon       \t| SREcon   \r\n| @cmiskell   \t| On-call \t| -        \t| -        \t| -          \t| On-call recovery\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| Holiday      \t| Vacation \r\n| @msmiley    \t| -        \t| -         | -        \t| -          \t| -         \r\n\r\nW40 working days: 16\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-09T20:45:22.363Z","updated_at":"2019-10-07T16:05:35.691Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/44"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":255,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7872","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7872","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7872/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7872/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7872","relative":"#7872","full":"gitlab-com/gl-infra/reliability#7872"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24740495,"iid":7868,"project_id":1304532,"title":"Investigate creating a kubectl wrapper script with a production warning","description":"Decide if it makes sense to create a kubectl wrapper script to include a check of the current context and the command line.\n\n- If the current context is production **AND**\n- If the current command is not **get**\n- Then confirm whether to continue modifying production (y/N)\n\nWe will have to discuss how to make sure all users are using the wrapper script and not calling `kubectl` directly","state":"closed","created_at":"2019-09-12T20:19:05.937Z","updated_at":"2022-08-04T23:03:01.481Z","closed_at":"2019-09-24T16:00:53.715Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["corrective action","kubernetes","security","team::Delivery","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7868","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7868","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7868/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7868/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7868","relative":"#7868","full":"gitlab-com/gl-infra/reliability#7868"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":91,"epic":{"id":12087,"iid":91,"title":"Prevent accidents on Kubernetes Clusters","url":"/groups/gitlab-com/gl-infra/-/epics/91","group_id":1112072},"iteration":null,"health_status":null},{"id":24740391,"iid":7867,"project_id":1304532,"title":"Investigate the ability to utilize kubectl from a bastion or proxy node","description":"At this moment we allow Engineers to access our production clusters from their local workstation.  Consider blocking this access and forcing Engineers to utilize a proxy or bastion type of connection in order to perform operations against a production cluster.","state":"closed","created_at":"2019-09-12T20:12:38.042Z","updated_at":"2022-10-13T02:55:02.484Z","closed_at":"2019-09-24T16:09:38.831Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["corrective action","kubernetes","security","team::Delivery","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":19,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7867","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7867","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7867/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7867/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7867","relative":"#7867","full":"gitlab-com/gl-infra/reliability#7867"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":91,"epic":{"id":12087,"iid":91,"title":"Prevent accidents on Kubernetes Clusters","url":"/groups/gitlab-com/gl-infra/-/epics/91","group_id":1112072},"iteration":null,"health_status":null},{"id":24739441,"iid":7864,"project_id":1304532,"title":"Set Retention period for cloudtrail bucket","description":"We enabled AWS CloudTrail organization wide in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7565. This means that CloudTrail logs go to an S3 bucket in our primary org account, and that bucket will never clean itself up.\n\nHow long do we want to keep CloudTrail logs for AWS? I was thinking that 1 year should be sufficient. Alternatively, we can keep them longer and just use a transition to cold storage for them.","state":"closed","created_at":"2019-09-12T19:35:32.751Z","updated_at":"2022-08-04T23:03:05.474Z","closed_at":"2019-09-13T18:49:57.280Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":989649,"iid":40,"group_id":1112072,"title":"CI/CD \u0026 Enablement September 2019","description":"","state":"closed","created_at":"2019-09-03T14:00:40.199Z","updated_at":"2019-10-07T17:05:43.892Z","due_date":"2019-09-30","start_date":"2019-09-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/40"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7864","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7864","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7864/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7864/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7864","relative":"#7864","full":"gitlab-com/gl-infra/reliability#7864"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24738075,"iid":7863,"project_id":1304532,"title":"Update the contributors.gitlab.com redirect link","description":"Can you update the contributors.gitlab.com redirect to https://gitlab.biterg.io/app/kibana#/dashboard/3e297c20-622c-11e9-8638-c11f0f1aa3fa? \n\nThis is the \"permanent\" URL and will reflect any changes we make to the dashboard in the future.","state":"closed","created_at":"2019-09-12T18:36:23.891Z","updated_at":"2022-08-04T23:03:06.212Z","closed_at":"2019-10-14T22:48:09.416Z","closed_by":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"labels":["auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":1006849,"iid":45,"group_id":1112072,"title":"W41 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 07 Oct \t| T 08 Oct \t| W 09 Oct \t| Th 10 Oct  | F 11 Oct\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| On-call     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| -   \t| On-call    | On-call\r\n| @cmiskell   \t| Moving   \t| Moving    | Moving  \t| Moving     | Moving  \t\r\n| @hphilipps  \t| Vacation \t| Vacation  | Vacation  | Vacation   | Vacation         \t\r\n| @msmiley    \t| -      \t| -      \t| -      \t| -          | -\r\n\r\nW41 working days: 16\r\n\r\n|             \t| M 14 Oct \t| T 15 Oct \t| W 16 Oct \t| Th 17 Oct  | F 18 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\r\n| @bjk-gitlab \t| -        \t| -        \t| -   \t    | -          | -   \r\n| @craig      \t| -        \t| -       \t| -       \t| -          | - \r\n| @craigf     \t| On-call  \t| On-call  \t| -      \t| -          | -   \r\n| @cmiskell   \t| -      \t| -        \t| -        \t| -          | Moving\r\n| @hphilipps  \t| Ill        \t| Ill        \t| Ill        \t| -          | - \r\n| @msmiley    \t| -        \t| On-call   | On-call  \t| On-call    | On-call\r\n\r\nW42 working days: 21\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-18T18:11:09.033Z","updated_at":"2019-11-12T23:45:39.396Z","due_date":"2019-10-20","start_date":"2019-10-07","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/45"},"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":1361348,"username":"rpaik","name":"Ray Paik","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1361348/avatar.png","web_url":"https://gitlab.com/rpaik"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7863","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7863","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7863/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7863/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7863","relative":"#7863","full":"gitlab-com/gl-infra/reliability#7863"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24736906,"iid":7862,"project_id":1304532,"title":"RCA: Container Registry Deployment Deleted in the Production Kubernetes Cluster","description":"## Summary\n\nAn engineer working locally was mistakenly connected to the production cluster.  The engineer sent a command intended for the local development cluster was instead sent to the production cluster which resulted in the deletion of the Kubernetes Deployment object for the Container Registry.  This brought down the service endpoint as no Pods were available and our HAProxy service started to send HTTP 503's otherwise known as \"The server is currently unavailable\" for any request bound to the Container Registry.\n\n## Impact \u0026 Metrics\n\nStart with the following:\n\n- What was the impact of the incident? Container Service was down.\n- Who was impacted by this incident? Anything that would have requested an image to/from the Container Registry (customers, CI jobs, etc)\n- How did the incident impact customers? This prevents customers from uploading images and downloading images to the Container Registry\n- How many attempts were made to access the impacted service/feature? As seen in the below chart, we sustained a request rate to the Container Registry at a rate above 150 requests per second\n- How many customers were affected? TODO\n- How many customers tried to access the impacted service/feature? TODO\n\nInclude any additional metrics that are of relevance.\n\n![image](/uploads/c1c59190a24739854bbd406d638072c7/image.png)\n\n[Source](https://dashboards.gitlab.net/d/oWe9aYxmk/pod-metrics?orgId=1\u0026from=1568307753787\u0026to=1568309759687\u0026var-Deployment=gitlab-registry\u0026var-env=gprd\u0026var-cluster=gprd-gitlab-gke\u0026var-Node=All\u0026var-namespace=monitoring)\n\nProvide any relevant graphs that could help understand the impact of the incident and its dynamics.\n\n![image](/uploads/d527063af64bca1baca2f88e77248327/image.png)\n\n![image](/uploads/902dc64d520096d8abc9e82478801383/image.png)\n\n[Source](https://dashboards.gitlab.net/d/AkOdlrSmk/imported-haproxy-stats?orgId=1\u0026from=1568307581081\u0026to=1568309405739)\n\nLogs from Stackdriver: [console.cloud.google.com/logs](https://console.cloud.google.com/logs/viewer?project=gitlab-production\u0026minLogLevel=0\u0026expandAll=false\u0026timestamp=2019-09-12T17%3A24%3A15.319215000Z\u0026customFacets\u0026limitCustomFacetWidth=true\u0026dateRangeStart=2019-09-12T13%3A30%3A42.700Z\u0026dateRangeEnd=2019-09-12T19%3A30%3A42.700Z\u0026interval=PT6H\u0026resource=k8s_cluster%2Flocation%2Fus-east1%2Fcluster_name%2Fgprd-gitlab-gke\u0026scrollTimestamp=2019-09-12T17%3A24%3A15.180382000Z\u0026filters=text%3Agitlab-registry\u0026advancedFilter=resource.type%3D%22k8s_cluster%22%0Aresource.labels.location%3D%22us-east1%22%0Aresource.labels.cluster_name%3D%22gprd-gitlab-gke%22%0Atimestamp%3E%3D%222019-09-12T17%3A11%3A02.287936Z%22%0Atimestamp%3C%3D%222019-09-12T17%3A25%3A02.287936Z%22%0AprotoPayload.authenticationInfo.principalEmail%3D%22jskarbek%40gitlab.com%22%0AprotoPayload.resourceName%3D%22extensions%2Fv1beta1%2Fnamespaces%2Fgitlab%2Fdeployments%2Fgitlab-registry%22%20OR%20protoPayload.resourceName%3D%22apps%2Fv1beta2%2Fnamespaces%2Fgitlab%2Fdeployments%2Fgitlab-registry%22)\n\n## Detection \u0026 Response\n\nStart with the following:\n\n- How was the incident detected? Alerts\n- Did alarming work as expected? Yes\n- How long did it take from the start of the incident to its detection? 12 minutes\n- How long did it take from detection to remediation? 1 minute\n- Were there any issues with the response to the incident? The recreation of the deployment uses our default settings of the HPA with a minimum of 2 replicas.  It took roughly 3 minutes until the container registry scaled up to it's original state prior to the incident.  At this point end users may have seen performance degradation.\n\n## Timeline\n\n2019-09-12\n\n- 17:11:51 UTC - `kubectl delete gitlab-registry` - was executed on the production cluster\n- 17:17:XX UTC - alerts indicating our registry endpoint alerted the on-call Engineer\n- 17:19:XX UTC - Incident Call Started\n- 17:23:59 UTC - Engineer recreated the Container Registry deployment\n- 17:27:XX UTC - Alert clears\n\n## Root Cause Analysis\n\nAn Engineer whom was performing local testing on an item directly related to the naming schema associated with objects that would match that of the production cluster.  Due to the nature of testing this removed a bit of context that would have immediately signaled to the Engineer that commands may have been sent to an undesired Kubernetes Cluster.  The engineer performed the command `kubectl delete deploy gitlab-registry` which matches the name of the deployment on the production cluster.  This deletion removes both the Deployment along with all Replicasets and Pods associated with it.  The Service Object remained, but no longer had any running Pods in its place.  HAProxy's healthcheck will now have signaled a failure and removed the `gke-registry` backend which left HAProxy to return HTTP 503's for all incoming requests.\n\n## What went well\n\nStart with the following:\n\n- We were able to diagnose the issue relatively quickly\n- With the use of Kubernetes, we were able to utilize our own tooling to bring the Container Registry to a working state quickly\n\n## What can be improved\n\nStart with the following:\n\n- Using the root cause analysis, explain what can be improved to prevent this from happening again.\n  * Engineers should not have unnecessary access to production clusters\n- Is there anything that could have been done to improve the detection or time to detection?\n  * Clusters should not have the API accessible by anyone other than service accounts acting inside of CI/CD jobs\n  * Clusters should not allow API traffic from users from anywhere\n  * A warning that an Engineer was acting upon a production cluster would caused a second guess at the commands being run locally\n  * An indicator on the shell of the engineer may have warned the Engineer to which cluster they are connected too\n- Is there anything that could have been done to improve the response or time to response?\n  * Consider shortening the alert time required to trigger\n  * An alert dedicated to the monitoring of the Pods/Replicaset/Deployment and whether it exists would've helped diagnose faster\n- Is there an existing issue that would have either prevented this incident or reduced the impact?\n  * No\n- Did we have any indication or beforehand knowledge that this incident might take place?\n  * No\n\n\n## Corrective actions\n\nAn Epic has been created to discuss various ways of limiting exposure to production services in order to prevent future accidents such as this from occurring: https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/91\n\n\n## Guidelines\n\n* [Blameless Postmortems Guideline](https://about.gitlab.com/handbook/customer-success/professional-services-engineering/workflows/internal/root-cause-analysis.html)\n* [5 whys](https://en.wikipedia.org/wiki/5_Whys)","state":"closed","created_at":"2019-09-12T17:53:41.962Z","updated_at":"2022-08-04T23:03:06.818Z","closed_at":"2019-09-18T21:19:07.114Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["IncidentReview","auto updated","wg-isolation","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7862","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7862","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7862/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7862/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7862","relative":"#7862","full":"gitlab-com/gl-infra/reliability#7862"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":83,"epic":{"id":9817,"iid":83,"title":"RCA Deep Dives","url":"/groups/gitlab-com/gl-infra/-/epics/83","group_id":1112072,"human_readable_timestamp":"\u003cstrong\u003e1389\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":24727158,"iid":7858,"project_id":1304532,"title":"file-33-stor-gprd rebooted","description":"file-33-stor-gprd rebooted at 9/11 15:19 and 11/11 15:42 UTC.\n\nOpened this issue to track repos with zeroed files. Searching through all repos:\n\n```\ncd /var/opt/gitlab/git-data/repositories/@hashed\nionice -n 5 find . -regextype sed -regex \".*/objects/.*\" -size 0 \u003e /var/tmp/zerofiles.txt\n```\n\nResults below.","state":"closed","created_at":"2019-09-12T12:34:42.161Z","updated_at":"2022-08-04T23:03:09.367Z","closed_at":"2019-10-16T20:54:00.467Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["(perceived) data loss","SRE:On-call","Service::Git","oncall","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7858","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7858","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7858/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7858/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7858","relative":"#7858","full":"gitlab-com/gl-infra/reliability#7858"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24714776,"iid":7855,"project_id":1304532,"title":"Help delete a group webhook under gitlab-org","description":"The context is at https://gitlab.com/gitlab-org/quality/triage-serverless/issues/11#note_215742570\n\nWe want to delete the webhook under https://gitlab.com/groups/gitlab-org/-/hooks\n\n![image](https://gitlab.com/gitlab-org/quality/triage-serverless/uploads/d0b62d599053d89a74f33cec57fb096b/image.png)\n\nThe one for http://triage-customers.triage-serverless-12690061.triage.serverless.grzegorz.co\n\nHowever we cannot do so via the web UI because of https://gitlab.com/gitlab-org/gitlab-ee/issues/29215\n\nCould someone help us delete it? Then @rspeicher can help us create another one for https://triage-serverless.gitlab.com/\n\nI am not sure why we cannot edit it, but it seems we can only delete and create a new one.","state":"closed","created_at":"2019-09-12T06:45:09.178Z","updated_at":"2019-12-06T21:42:44.271Z","closed_at":"2019-09-12T22:51:49.011Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["team::Reliability","toil","unscheduled","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":423915,"username":"godfat","name":"Lin Jen-Shin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8c73dab2ecd23d5b5627a0235ae2f9b1?s=80\u0026d=identicon","web_url":"https://gitlab.com/godfat"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7855","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7855","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7855/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7855/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7855","relative":"#7855","full":"gitlab-com/gl-infra/reliability#7855"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24701290,"iid":7852,"project_id":1304532,"title":"Potential bug with our GKE module related to node pool instance counts","description":"Two recent events brought up an issue with our GKE module: https://gitlab.com/gitlab-com/gl-infra/terraform-modules/google/gke\n\nDuring testing, an engineer was unable to get a node to be created with nodes participating in the cluster.  And another time when an Engineer was adding an additional node pool, both times the Engineers ran into the same issue.\n\nThe most probable cause may be the removal of the `node_count` option: https://gitlab.com/gitlab-com/gl-infra/terraform-modules/google/gke/commit/8e49364128f22b9b4ef4de8b029e4562de62c154\n\nUtilize this issue to investigate/test/fix whatever may be wrong.","state":"closed","created_at":"2019-09-11T18:04:45.307Z","updated_at":"2022-08-04T23:03:14.725Z","closed_at":"2019-09-16T12:18:38.417Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"}],"author":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"type":"ISSUE","assignee":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7852","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7852","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7852/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7852/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7852","relative":"#7852","full":"gitlab-com/gl-infra/reliability#7852"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24701150,"iid":7851,"project_id":1304532,"title":"Git Data Loss on Gitaly server restart","description":"When a user is pushing a git repository and the Gitaly server which is hosting that repo shuts down for any reason, that push fails leaving 0 byte files on the disk. When the server comes back up, any subsequent pushes to those repositories fail until someone manually intervenes.\n\nThe recent Infrastructure issu is: https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7837\n\nIt's also being discussed in the EE tracker: https://gitlab.com/gitlab-org/gitlab-ee/issues/24267\n\nSome suggestions are:\n\n- `core.fsyncObjectFiles=true` Git Option\n- Set the `data=journal` mount option to prevent zeroing files on crashes. Now we have `data=ordered`.\n\nThe ultimate solution will have to be Gitaly HA, but we will need to mitigate this problem before that is ready.  Use this issue to discuss other ideas.\n\n/cc @gitlab-com/gl-infra","state":"closed","created_at":"2019-09-11T18:01:03.063Z","updated_at":"2022-08-04T23:03:16.319Z","closed_at":"2019-10-15T00:49:49.959Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["(perceived) data loss","Service::Gitaly","devops::create","group::gitaly","priority::1","severity::1","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":null,"user_notes_count":58,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7851","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7851","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7851/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7851/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7851","relative":"#7851","full":"gitlab-com/gl-infra/reliability#7851"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24679182,"iid":7840,"project_id":1304532,"title":"Change status.io account owner","description":"Current status.io account owner is still John Northrup.\n\nIn order to transfer ownership, he needs to choose another team member _with a valid payment method on file_ as owner (https://kb.status.io/account/transfer-ownership/).\n\n@dawsmith Can you check if you (or somebody else) have payment info setup and can arrange with @northrup to take over ownership from him?","state":"closed","created_at":"2019-09-11T10:12:57.846Z","updated_at":"2022-08-04T23:03:23.869Z","closed_at":"2019-09-11T13:59:40.083Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7840","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7840","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7840/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7840/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7840","relative":"#7840","full":"gitlab-com/gl-infra/reliability#7840"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24669320,"iid":7837,"project_id":1304532,"title":"file-35-stor-gprd rebooted","description":"The `file-35-stor-gprd.c.gitlab-production.internal` server rebooted at 03:39 UTC.\n\nThe following repositories have 0 byte files which may need to be deleted before pushes will succeed.\n```\n/2d/a6/2da627fc34bd145119f7c4b28180de9b1b1ecb04cd50395d785d1c69206b35b7.git\n/ee/0e/ee0e418f314258adb918e4c885f7e69d24393d6c089416490541195ccf9ec8b9.git\n/ee/98/ee98bb4e4bccdb9985892d934e1019d8a83c8106fff666d12b61fa48b61f923f.git\n/88/02/8802266a8fdb5df071ff72872f5026a6cac54123e19916215c28faa6cb9c48c3.git\n/a5/96/a596fce6a7c5a270336cf6e4d93a2e68f0f48cf10f9dfe49fb9091b75eb8477b.git\n/f4/46/f446c5ffe314c2cf078dfa09e27fdec032fadba351ab17c39132699db0e56821.git\n/71/a3/71a39ee9d13571f24e71db9481c6c79fe16ae18d46ae3ea0f702a7f2ab81b9fd.git\n/03/b0/03b051a9df00021abd386e862448aae39f02cac86d6705d757868abf0ae181ff.git\n/70/a8/70a8b032d6fb8a191a4262bea0b7ad1edf89069c9916c0fba205df356dbd9147.git\n/db/e7/dbe7ad164b13687f1f4cb406c010c3baa1cdef40e3bed488dc78bd6253172ad9.git\n/86/9d/869dfce8970926048a3fc4af2dc1f6a90a777b655f9d98588a38770e60c9a6e7.git\n/a9/d6/a9d6b8b752a339be792c71051237e96d792e64a4654077d79c58a64e641a60b6.git\n/50/97/5097eec0504007ccff80e78fccecf3f7967688c86f6e7b2efacf5b003acc7159.git\n/69/42/6942e0cdf2a521808561da1b5e0b5255404c14b56551d3c69e2e5b6523791990.git\n/cf/ea/cfeae16b595d765939a14e1406ab2068a4f03c1cb835a12c3b09e4b93319d758.git\n/4b/f2/4bf2aeadb0603ae6c62c755864d5cde291a48ff7ac759b529105aa498ea60c92.git\n/72/f2/72f2fde2baebc34149ad159e3d24051bb70685e8512a48163b3476c4d370d185.git\n/6d/be/6dbee4cf8657d93310ee25693acce504b9972c2fa162ac41c9d056e12efcb8db.git\n/30/6b/306b9095b0213e79aca371b230061b110a54186e2ac80336f8b8925725702e9d.git\n/9e/de/9ede26caa0c4023e99c905ffec40ce1d5aad20f69bce64fde781d51a7e2d4c30.git\n/49/65/4965abd0081151b6f547f562e730f763cff5417d2352380be4c0bd64dbddfcb1.git\n/49/87/498797e5e80b416ee9471d61df9782116fb5917280982006cb543da8f7a6d4f2.git\n```\n\nThese files are located in `/var/opt/gitlab/git-data/repositories/@hashed`","state":"closed","created_at":"2019-09-11T04:19:29.701Z","updated_at":"2022-08-04T23:03:25.445Z","closed_at":"2019-10-16T20:53:24.249Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["(perceived) data loss","SRE:On-call","Service::Git","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7837","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7837","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7837/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7837/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7837","relative":"#7837","full":"gitlab-com/gl-infra/reliability#7837"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24660552,"iid":7835,"project_id":1304532,"title":"Add new sitespeed graphite datasource to grafana","description":"To finalise a completely new setup for doing live monitoring of overall frontend performance through sitespeed I would need the setup of a new graphite datasource in our grafana instance. This would then finalise the issue of https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/2106\n\nI have added the credentials + server address to 1P under `Sitespeed Graphite New`. It would be great to have this as a new datasource `sitespeed new`.\n\nAs a standard grafana member I can add new dashboards without problems or? (So far I tested them only on my local grafana instance)","state":"closed","created_at":"2019-09-10T20:53:08.044Z","updated_at":"2019-12-06T21:42:43.873Z","closed_at":"2019-09-12T03:56:31.906Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["auto updated","performance","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":1149402,"username":"timzallmann","name":"Tim Zallmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1149402/avatar.png","web_url":"https://gitlab.com/timzallmann"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7835","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7835","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7835/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7835/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7835","relative":"#7835","full":"gitlab-com/gl-infra/reliability#7835"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24643616,"iid":7833,"project_id":1304532,"title":"Thanos and prometheus hosts should be labelled with `type=\"metrics\"` label","description":"Currently Thanos and Prometheus do not have a `type` label. \n\nThis means (ironically) that much of our monitoring and alerting infrastructure does not work on these hosts.\n\nThis should be fixed.","state":"closed","created_at":"2019-09-10T14:22:30.203Z","updated_at":"2019-12-06T21:42:43.729Z","closed_at":"2019-09-20T08:01:22.410Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Observability-reliability","auto updated","team::Reliability","workflow-infra::Done"],"milestone":{"id":995879,"iid":43,"group_id":1112072,"title":"W37 Secure \u0026 Defend","description":"We'll be keeping the same Kanban board for team work and filtering on a new milestone every odd numbered week. This \"sprint\" construct is going to be used to facilitate backlog grooming and planning.","state":"closed","created_at":"2019-09-09T19:23:14.535Z","updated_at":"2019-09-23T21:27:53.972Z","due_date":"2019-09-22","start_date":"2019-09-09","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/43"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7833","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7833","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7833/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7833/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7833","relative":"#7833","full":"gitlab-com/gl-infra/reliability#7833"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24643608,"iid":7832,"project_id":1304532,"title":"Discuss 3 oncall shifts","description":"Made a spreadsheet to visualize: https://docs.google.com/spreadsheets/d/1r2VOI9S0omtqUDFKMX5Csu1opN_UsA-U5oAjenjU-0g/edit#gid=0\n\nIssue to discuss this - per Infra team retro.","state":"closed","created_at":"2019-09-10T14:22:23.241Z","updated_at":"2022-08-04T23:03:29.271Z","closed_at":"2019-11-04T17:25:28.878Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":null,"user_notes_count":42,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":"2019-09-27","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7832","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7832","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7832/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7832/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7832","relative":"#7832","full":"gitlab-com/gl-infra/reliability#7832"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24641857,"iid":7830,"project_id":1304532,"title":"Add Prometheus alert routing to issues","description":"We can now use GitLab Prometheus integration to route alerts directly to issues.","state":"closed","created_at":"2019-09-10T13:48:14.990Z","updated_at":"2022-08-04T23:03:30.586Z","closed_at":"2019-09-11T13:37:47.591Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":2,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7830","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7830/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7830/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7830","relative":"#7830","full":"gitlab-com/gl-infra/reliability#7830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24633485,"iid":7828,"project_id":1304532,"title":"Decrease statement_timeout in staging","description":"We have `statement_timeout` settings in gstg that are not consistent with production. We should align that, for example to allow issues with migrations to surface earlier before they're tried in production.\n\nWhile the global `statemnt_timeout` in gstg is 15s, individual per-user settings are different:\n\n```\nroot@patroni-06-db-gstg.c.gitlab-staging-1.internal:/var/opt/gitlab/postgresql# gitlab-psql -U gitlab\nPassword for user gitlab: \npsql (9.6.15)\nSSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)\nType \"help\" for help.\n\ngitlabhq_production=\u003e show statement_timeout;\n statement_timeout \n-------------------\n 5min\n(1 row)\n```\n\nThe `statement_timeout` has been set individually for `gitlab` user, see `pg_user` table:\n\n```\n gitlab            |    16384 | f           | f        | f       | f            | ******** |          | {statement_timeout=5min}\n```\n\nWe should reset this to 15s to align with production. Since staging is a lot smaller than production, we might still not catch all issues - but that's another topic.","state":"closed","created_at":"2019-09-10T10:01:04.252Z","updated_at":"2022-08-04T23:03:32.130Z","closed_at":"2019-09-12T15:26:55.336Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"labels":["Database","auto updated","workflow-infra::Done"],"milestone":null,"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":37,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7828","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7828","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7828/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7828/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7828","relative":"#7828","full":"gitlab-com/gl-infra/reliability#7828"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24627527,"iid":7826,"project_id":1304532,"title":"Temporary database testing instance for pshutsin","description":"Related to https://gitlab.com/gitlab-com/access-requests/issues/1887, we are provisioning a full database instance (from the restore pipeline) for @pshutsin to test a data migration with.","state":"closed","created_at":"2019-09-10T08:39:50.878Z","updated_at":"2020-03-13T22:11:21.594Z","closed_at":"2020-03-13T22:11:21.560Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Database","auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1562869/avatar.png","web_url":"https://gitlab.com/abrandl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7826","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7826","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7826/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7826/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7826","relative":"#7826","full":"gitlab-com/gl-infra/reliability#7826"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24618359,"iid":7824,"project_id":1304532,"title":"ops.gitlab.net cert renewal","description":"https://gitlab.pagerduty.com/incidents/P7HGAQM\n\nExpires in 6 days, already renewed by sslmate, just needs deployment.","state":"closed","created_at":"2019-09-10T01:12:09.364Z","updated_at":"2023-02-10T17:22:09.656Z","closed_at":"2019-09-10T01:37:38.496Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["SRE:On-call","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7824","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7824","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7824/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7824/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7824","relative":"#7824","full":"gitlab-com/gl-infra/reliability#7824"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24574593,"iid":7813,"project_id":1304532,"title":"Add detailed network monitoring for PostgreSQL/Patroni hosts","description":"As I already proposed before in https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7543#note_204263742 :\n\n\u003e We might want to consider having every node send/receive a continuous stream of low bandwidth traffic, and monitor it. Something like a permanently running `iptraf`. This cannot be 1m resolution time, as some already available metrics on Prometheus. With this, we might be able to see clearly if there were network hiccups.\n\nI would like to raise the topic again. Prometheus network monitoring is good except for two data points that are not available:\n*  Low resolution (1 second resolution is desired).\n*  Dependent on the traffic.\n\nI propose to setup a system to inject traffic between the hosts at a constant rate, and export metrics to Prometheus. This way, we can see what is the performance of the network vs the expected one. It may consist of the following:\n\n*  Each host \"monitors/talks to\" two other hosts of the cluster, ideally one in the same zone and another one in another zone, in the same region.\n*  A small amount of traffic, but constant, is exchanged (think of something like `dd if=/dev/zero | pv --rate-limit | nc` etc). For example, 50KB/s.\n*  Export network performance metrics to Prometheus, ideally with a 1 second resolution.\n\nThis mechanism would allow to detect and measure precisely network hiccups and disruptions. It would help clearly to diagnose the recent Patroni failovers, which are believed to be caused by coordinated network disruptions (see https://gitlab.com/gitlab-com/gl-infra/infrastructure/issues/7790#note_213872680).\n\ncc @glopezfernandez","state":"closed","created_at":"2019-09-08T20:50:11.307Z","updated_at":"2019-12-06T21:42:56.397Z","closed_at":"2019-10-03T20:59:26.981Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Database","Observability","OnGres::Project","priority::3","team::Reliability","workflow-infra::Done"],"milestone":{"id":995966,"iid":44,"group_id":1112072,"title":"W39 Secure \u0026 Defend","description":"## Calendar\r\n\r\n|             \t| M 23 Sep \t| T 24 Sep \t| W 25 Sep \t| Th 26 Sep  | F 27 Sep\r\n|-------------\t|----------\t|----------\t|----------\t|----------- |----------\t\r\n| @bjk-gitlab \t| -        \t| -       \t| -        \t| -          | -\r\n| @craig      \t| -     \t| -        \t| -        \t| -          | -         \t\r\n| @craigf     \t| -        \t| -        \t| Vacation        \t| -          | -\r\n| @cmiskell   \t| -        \t| On-call   | On-call  \t| On-call    | On-call  \t\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| -          | -         \t\r\n| @msmiley    \t| Vacation \t| Vacation \t| Vacation \t| Vacation   | -\r\n\r\nW39 working days: 21\r\n\r\n|             \t| M 30 Sep \t| T 01 Oct \t| W 02 Oct \t| Th 03 Oct \t| F 04 Oct \r\n|-------------\t|----------\t|----------\t|----------\t|-----------\t|----------\r\n| @bjk-gitlab \t| -        \t| -        \t| SREcon   \t| SREcon      \t| SREcon   \r\n| @craig      \t| -        \t| On-call  \t| On-call  \t| On-call      \t| On-call  \r\n| @craigf     \t| -        \t| -        \t| SREcon   \t| SREcon       \t| SREcon   \r\n| @cmiskell   \t| On-call \t| -        \t| -        \t| -          \t| On-call recovery\r\n| @hphilipps  \t| -        \t| -        \t| -        \t| Holiday      \t| Vacation \r\n| @msmiley    \t| -        \t| -         | -        \t| -          \t| -         \r\n\r\nW40 working days: 16\r\n\r\n\u003chr\u003e\r\n\r\n**Total working days: 37**","state":"closed","created_at":"2019-09-09T20:45:22.363Z","updated_at":"2019-10-07T16:05:35.691Z","due_date":"2019-10-06","start_date":"2019-09-23","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/44"},"assignees":[{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"}],"author":{"id":2483568,"username":"ahachete","name":"Alvaro Hernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5af6a3c5c96061774cc52fd45ba305da?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahachete"},"type":"ISSUE","assignee":{"id":3947902,"username":"msmiley","name":"Matt Smiley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3947902/avatar.png","web_url":"https://gitlab.com/msmiley"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7813","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7813","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7813/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7813/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7813","relative":"#7813","full":"gitlab-com/gl-infra/reliability#7813"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24564067,"iid":7810,"project_id":1304532,"title":"Connect GitLab services to project environment variables","description":"The environments built by [GitLab Services](https://ops.gitlab.net/gitlab-com/services-base) need the ability to associate environment variables with projects and groups within the GitLab application.\n\nSome service environments will not require variables to connect (master, review apps).  Some will need to automatically set variables in an arbitrary project or group on GitLab.com.  Some will need to set variables in another instance that is not GitLab.com (staging, ops, dev instances).\n\nThe location of the project to connect to should be configurable using a Terraform variable in the files in the [/environments](https://ops.gitlab.net/gitlab-com/services-base/tree/master/environments) folder in the GitLab Services project. The absence of this variable should result in no attempt to set variables in any project or group.\n\nInitially the two variables that there is initial need for are:\n\n- [DATABASE_URL](https://docs.gitlab.com/ee/topics/autodevops/#postgresql-database-support) set from the [CloudSQL Module](https://ops.gitlab.net/gitlab-com/services-base/blob/master/terraform/main.tf#L75)\n- [POSTGRES_ENABLED](https://docs.gitlab.com/ee/topics/autodevops/#database) and possibly other database variables.\n\nWhen setting these variables, the additional attributes also need to be configurable\n\n- Scope - to specify which environments the variable applies to\n- Masked - to hide protected variables\n- State - for completeness","state":"closed","created_at":"2019-09-07T22:30:44.459Z","updated_at":"2020-10-30T19:20:06.575Z","closed_at":"2020-10-30T19:20:06.529Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["auto updated","terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7810","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7810","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7810/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7810/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7810","relative":"#7810","full":"gitlab-com/gl-infra/reliability#7810"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24563892,"iid":7809,"project_id":1304532,"title":"Connect GitLab services GKE clusters to GitLab Projects","description":"The environments built by [GitLab Services](https://ops.gitlab.net/gitlab-com/services-base) need the ability to associate their GKE clusters with projects and groups within the GitLab application.\n\nSome service environments will not have an automatic Kubernetes integration connection (master, review apps).  Some will need to automatically connect to an arbitrary project or group on GitLab.com.  Some will need to connect to another instance that is not GitLab.com (staging, ops, dev instances).\n\nThe location of the project to connect to should be configurable using a Terraform variable in the files in the [/environments](https://ops.gitlab.net/gitlab-com/services-base/tree/master/environments) folder in the GitLab Services project. The absence of this variable should result in no attempt to connect GKE to a project or group.\n\nThe three variables which need to be connected are:\n\n- The CA Cert from the GKE cluster defined using the [GKE Module](https://ops.gitlab.net/gitlab-com/services-base/blob/master/terraform/main.tf#L39)\n- The Endpoint IP of the GKE cluster defined above\n- The Service token of the `gitlab-admin` account defined in the [gitlab-admin-service-account](https://ops.gitlab.net/gitlab-com/services-base/blob/master/kubernetes/gitlab-admin-service-account.yaml)\n\nAdditional settings are:\n\n- `Environment Scope` - which should come from a configuration variable in the environment file and should default to `*`\n- `Base Domain` - which can come from a configuration variable, and will eventually be sync'd with a DNS module\n- `Cluster Name` - should default to the name of the branch or the `var.project` TF variable\n\nThis work should be done in an ephemeral environment and should be functional before it is merged with `master`.  Assign the MR to @devin for review.","state":"closed","created_at":"2019-09-07T21:53:05.400Z","updated_at":"2020-12-15T22:52:53.262Z","closed_at":"2020-10-30T19:16:04.492Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Service::Version","auto updated","terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7809","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7809","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7809/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7809/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7809","relative":"#7809","full":"gitlab-com/gl-infra/reliability#7809"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24539695,"iid":7802,"project_id":1304532,"title":"Stop using numbers in our host naming convention","description":"Lately, I've observed considerable amounts of thought and attention given to replacing hosts and naming them to re-sequence the pool counting up from `01`. This pattern _always_ requires destruction or renaming, if even possible, of the host being replaced before the new host can be created. The extra amount of work this creates and the thought and attention given to such operations distracts us from the goal of destroying and replacing the broken VM.\n\n:cow: :cow: :cow: :cow: :cow:\n\n\nCc @craig - I'm not going to assign this to you, but I know you'd come across a way of doing this with randomization and pools of silly names.","state":"closed","created_at":"2019-09-06T14:29:13.181Z","updated_at":"2022-08-05T04:02:57.500Z","closed_at":"2019-10-28T21:45:41.703Z","closed_by":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"labels":["Discussion","For Prioritization","team::Reliability","terraform","workflow-infra::Done"],"milestone":null,"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7802","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7802","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7802/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7802/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7802","relative":"#7802","full":"gitlab-com/gl-infra/reliability#7802"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24529320,"iid":7798,"project_id":1304532,"title":"Fix replication on dr-delayed and dr-archive db's","description":"postgres-dr-delayed-01-db-gprd and postgres-dr-archive-01-db-gprd stopped replicating after the last [failover](https://gitlab.com/gitlab-com/gl-infra/production/issues/1119) because they are on the wrong timeline.","state":"closed","created_at":"2019-09-06T09:05:06.779Z","updated_at":"2021-06-24T08:09:04.656Z","closed_at":"2019-09-10T19:30:21.009Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Database","OnGres::Support","Service::Postgres","workflow-infra::Done"],"milestone":{"id":995576,"iid":42,"group_id":1112072,"title":"Dev \u0026 Ops: 2019-09-09 - 2019-09-22","description":"","state":"closed","created_at":"2019-09-09T14:46:08.050Z","updated_at":"2019-09-23T09:43:07.078Z","due_date":"2019-09-22","start_date":"2019-09-09","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/42"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":2780522,"username":"kadaffy","name":"Kadaffy Talavera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2780522/avatar.png","web_url":"https://gitlab.com/kadaffy"},{"id":3007633,"username":"gerardo.herzig","name":"Gerardo Herzig","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3007633/avatar.png","web_url":"https://gitlab.com/gerardo.herzig"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/7798","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/7798","notes":"https://gitlab.com/api/v4/projects/1304532/issues/7798/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/7798/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#7798","relative":"#7798","full":"gitlab-com/gl-infra/reliability#7798"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]