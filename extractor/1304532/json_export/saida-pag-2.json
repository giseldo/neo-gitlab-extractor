[{"id":75706089,"iid":12084,"project_id":1304532,"title":"Facilitate 2nd Failover Test of Staging Using Geo With Learnings from 1st Test Applied.","description":"As part of the deliverables of the [GitLab.com Disaster Recovery Working Group](https://about.gitlab.com/company/team/structure/working-groups/disaster-recovery/) we would like to conduct a 2nd single-node test of a Geo-enabled failover for staging.gitlab.com.\n\nThis test would be a planned failover of staging at a scheduled time, which:\n1. Fails over staging.gitlab.com to a Geo-based secondary\n1. Tests that staging.gitlab.com works on this secondary\n1. Fails back over to the original staging.gitlab.com infrastructure.\n\nWhat needs to happen to facilitate this:\n- [ ] Apply changes and learnings from the first single-node test.\n- [ ] Build a change management issue to track the tactical pieces to this failover.\n- [ ] Coordinate with various consumers of staging to help define a testing schedule and what we will need to have in place in the event we are without staging for an extended period of time","state":"closed","created_at":"2020-12-07T12:57:25.486Z","updated_at":"2021-01-13T20:18:45.442Z","closed_at":"2021-01-13T20:18:45.132Z","closed_by":{"id":2524675,"username":"skarbek","name":"John Skarbek","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6455ce4726023aac6dd7fb0acd1f236?s=80\u0026d=identicon","web_url":"https://gitlab.com/skarbek"},"labels":["wg-disaster-recovery","workflow-infra::Done"],"milestone":{"id":1739582,"iid":116,"group_id":1112072,"title":"Datastores team - W02","description":"Datastores iteration for the second/third weeks of 2021.","state":"closed","created_at":"2020-11-24T09:38:22.429Z","updated_at":"2021-11-12T05:28:12.161Z","due_date":"2021-01-24","start_date":"2021-01-11","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/116"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},{"id":4437855,"username":"brentnewton","name":"Brent Newton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4437855/avatar.png","web_url":"https://gitlab.com/brentnewton"}],"author":{"id":4437855,"username":"brentnewton","name":"Brent Newton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4437855/avatar.png","web_url":"https://gitlab.com/brentnewton"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-12-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/12084","time_stats":{"time_estimate":28800,"total_time_spent":0,"human_time_estimate":"8h","human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/12084","notes":"https://gitlab.com/api/v4/projects/1304532/issues/12084/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/12084/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#12084","relative":"#12084","full":"gitlab-com/gl-infra/reliability#12084"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":371,"epic":{"id":159463,"iid":371,"title":"Evaluate Geo as a disaster recovery solution for GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/371","group_id":1112072,"human_readable_end_date":"Feb 21, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":75565488,"iid":12062,"project_id":1304532,"title":"Modify Fastly headers to accommodate same-origin content in frames","description":"\u003c!--\nThis template is for GitLab Team Members seeking support of SRE where there isn't an existing `request-*` template available.\n\nPlease fill out the details below.\n--\u003e\n\n**Details** \n\n - Point of contact for this request: @djensen\n - If a call is needed, what is the proposed date and time of the call:  n/a\n - Additional call details (format, type of call): n/a\n\n**SRE Support Needed**\n\nPlease modify Fastly headers for about.gitlab.com to allow for `\u003cobject\u003e` tags to be used with same-origin content (to allow [clickable SVGs](https://gitlab.com/gitlab-com/www-gitlab-com/-/issues/10052#proposal)):\n\n1. Remove the `X-Frame-Options` header.\n1. Add the CSP `frame-ancestors` directive, and whitelist `about.gitlab.com`.\n\nThis proposal was already discussed here: https://gitlab.com/gitlab-com/www-gitlab-com/-/issues/10052#note_458792328\n\n\u003c!--\nplease do not edit the below\n--\u003e","state":"closed","created_at":"2020-12-03T17:23:20.613Z","updated_at":"2021-11-09T14:49:46.281Z","closed_at":"2021-04-01T23:08:38.661Z","closed_by":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"labels":["AssistType::CloudInfra","AssistingTeam::Development","Core-Infra::P2","Product Operations","wg-product-development-flow","workflow-infra::Done"],"milestone":{"id":1852668,"iid":131,"group_id":1112072,"title":"Core-Infra Feb 28 - Mar 13","description":"","state":"closed","created_at":"2021-01-27T20:22:18.924Z","updated_at":"2021-04-13T15:15:40.701Z","due_date":"2021-03-13","start_date":"2021-02-28","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/131"},"assignees":[{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},{"id":4437855,"username":"brentnewton","name":"Brent Newton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4437855/avatar.png","web_url":"https://gitlab.com/brentnewton"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"user_notes_count":36,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-02-27","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/12062","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/12062","notes":"https://gitlab.com/api/v4/projects/1304532/issues/12062/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/12062/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#12062","relative":"#12062","full":"gitlab-com/gl-infra/reliability#12062"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":75498455,"iid":12050,"project_id":1304532,"title":"Installing Python 3.7.9 fails on bastion-02-inf-gprd.c.gitlab-production.internal","description":"The reason this fails is because `can't decompress data; zlib not available`.\n\nI cannot install zlib, since I don't have root access on bastion systems.\n\n```bash\nnelsnelson@bastion-02-inf-gprd.c.gitlab-production.internal:~/workspace/db-ops$ asdf install python\nDownloading python-build...\nCloning into '/home/nelsnelson/.asdf/plugins/python/pyenv'...\nremote: Enumerating objects: 18376, done.\nremote: Total 18376 (delta 0), reused 0 (delta 0), pack-reused 18376\nReceiving objects: 100% (18376/18376), 3.67 MiB | 0 bytes/s, done.\nResolving deltas: 100% (12514/12514), done.\nChecking connectivity... done.\npython-build 3.7.9 /home/nelsnelson/.asdf/installs/python/3.7.9\nDownloading Python-3.7.9.tar.xz...\n-\u003e https://www.python.org/ftp/python/3.7.9/Python-3.7.9.tar.xz\nInstalling Python-3.7.9...\n\nBUILD FAILED (Ubuntu 16.04 using python-build 1.2.21-1-g943015e)\n\nInspect or clean up the working tree at /tmp/python-build.20201202162150.30331\nResults logged to /tmp/python-build.20201202162150.30331.log\n\nLast 10 log lines:\n    runpy.run_module(\"pip\", run_name=\"__main__\", alter_sys=True)\n  File \"/tmp/python-build.20201202162150.30331/Python-3.7.9/Lib/runpy.py\", line 201, in run_module\n    mod_name, mod_spec, code = _get_module_details(mod_name)\n  File \"/tmp/python-build.20201202162150.30331/Python-3.7.9/Lib/runpy.py\", line 142, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File \"/tmp/python-build.20201202162150.30331/Python-3.7.9/Lib/runpy.py\", line 109, in _get_module_details\n    __import__(pkg_name)\nzipimport.ZipImportError: can't decompress data; zlib not available\nMakefile:1141: recipe for target 'install' failed\nmake: *** [install] Error 1\n```\n\nManually running `make` and `make install` yields a similar error:\n\n```bash\nTraceback (most recent call last):\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/ensurepip/__main__.py\", line 5, in \u003cmodule\u003e\n    sys.exit(ensurepip._main())\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/ensurepip/__init__.py\", line 214, in _main\n    default_pip=args.default_pip,\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/ensurepip/__init__.py\", line 127, in _bootstrap\n    return _run_pip(args + [p[0] for p in _PROJECTS], additional_paths)\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/ensurepip/__init__.py\", line 32, in _run_pip\n    runpy.run_module(\"pip\", run_name=\"__main__\", alter_sys=True)\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/runpy.py\", line 201, in run_module\n    mod_name, mod_spec, code = _get_module_details(mod_name)\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/runpy.py\", line 142, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File \"/home/nelsnelson/tmp/Python-3.7.9/Lib/runpy.py\", line 109, in _get_module_details\n    __import__(pkg_name)\nzipimport.ZipImportError: can't decompress data; zlib not available\nMakefile:1141: recipe for target 'install' failed\nmake: *** [install] Error 1\n```","state":"closed","created_at":"2020-12-02T16:32:16.027Z","updated_at":"2022-08-04T12:36:28.786Z","closed_at":"2020-12-03T03:54:07.953Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-12-02","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/12050","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/12050","notes":"https://gitlab.com/api/v4/projects/1304532/issues/12050/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/12050/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#12050","relative":"#12050","full":"gitlab-com/gl-infra/reliability#12050"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":75423510,"iid":12032,"project_id":1304532,"title":"update alerts and runbooks for using wal-g","description":"Make sure that our alerting for wal-g wal archiving and backups is working as intended and that alerts are pointing to up-to-date runbooks for troubleshooting.","state":"closed","created_at":"2020-12-01T12:28:50.866Z","updated_at":"2020-12-14T15:58:02.836Z","closed_at":"2020-12-14T15:56:44.733Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":{"id":1701937,"iid":111,"group_id":1112072,"title":"Datastores team - W51","description":"Datastores team, 2nd half of December, 14 days.","state":"closed","created_at":"2020-10-30T11:20:40.104Z","updated_at":"2021-11-02T12:42:02.358Z","due_date":"2020-12-27","start_date":"2020-12-14","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/111"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/12032","time_stats":{"time_estimate":14400,"total_time_spent":14400,"human_time_estimate":"4h","human_total_time_spent":"4h"},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/12032","notes":"https://gitlab.com/api/v4/projects/1304532/issues/12032/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/12032/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#12032","relative":"#12032","full":"gitlab-com/gl-infra/reliability#12032"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":27,"epic":{"id":3033,"iid":27,"title":"Backup Masterless","url":"/groups/gitlab-com/gl-infra/-/epics/27","group_id":1112072,"human_readable_end_date":"Dec 14, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":75104668,"iid":12011,"project_id":1304532,"title":"PoC: rails-console read-only sandbox","description":"Based on https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11730#note_455197827\n\n\u003e I have a rough idea of how we can sandbox the read-only console pretty well.\n\u003e \n\u003e We can force SSH to not start a shell, but rather a transient systemd-unit that is forwarded via SSH. That we can lock down as tight as we need to (filesystem ro, partially ro, even network access can be sandboxed to specific hosts). By forcing every user to access the rails-console via that, we can make sure, that whatever we configure is confined in the sandbox and the appropriate config files would be to.\n\u003e \n\u003e We should probably have one designated write-only target though if someone needs to export something. But if the user is unprivileged, they would need the interaction of another person to get the exports. That way we can also eliminate possible scenarios where someone might have gone rouge (which hopefully never happens!)  \nThat way we can also prevent users from shelling out of rails into the OS. We can either restrict it, so they can't shell out period, or they can fiddle around in their sandbox.\n\u003e \n\u003e The read-write console access might be unsandboxed I think.\n\nScope:\n- Enforce full read-only access to *all* resources outside the sandboxed instance.\n- Check feasibility of running sandboxed rails-consoles.\n   - What infra does rails need, that also requires read-only instances?\n      - Can we force rails to treat those (except Postgres - where we most likely *will* rely on a replica) as read-only (/force not triggering writes)?\n   - Does rails care if the state it writes to disk is not carried forward to the next startup?\n- Consider how files exported by rails-console could be extracted from the machine and ensure those ways are known and regulated.\n- All changes and how they are derived *must* be documented in this issue.\n- Ensure output of the sandbox is captured in the systemd journal so it can be easily logged.\n- Codeify changes in chef if possible.\n\nNot scope:\n- User access and group mappings. This PoC assumes allowed users are in the group `rails-console-read-only` and can authenticate to the ssh daemon.","state":"closed","created_at":"2020-11-27T12:39:01.467Z","updated_at":"2021-03-04T12:19:51.719Z","closed_at":"2021-03-04T12:19:51.440Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["workflow-infra::Done"],"milestone":{"id":1749614,"iid":117,"group_id":1112072,"title":"Core Infra - Rails Console Improvements","description":"Milestone tracking work for Rails-console improvements. https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/350\r\n\r\nWhy are we working on this?\r\nTo improve our score here:\r\nhttps://about.gitlab.com/handbook/engineering/infrastructure/performance-indicators/#production-access-score","state":"closed","created_at":"2020-11-30T23:35:12.820Z","updated_at":"2021-11-12T05:27:35.320Z","due_date":"2020-12-31","start_date":"2020-11-16","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/117"},"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/12011","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":20,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/12011","notes":"https://gitlab.com/api/v4/projects/1304532/issues/12011/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/12011/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#12011","relative":"#12011","full":"gitlab-com/gl-infra/reliability#12011"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":350,"epic":{"id":133459,"iid":350,"title":"Project: Rails Console Access","url":"/groups/gitlab-com/gl-infra/-/epics/350","group_id":1112072,"human_readable_end_date":"Jul 31, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":75059477,"iid":12007,"project_id":1304532,"title":"Disable wal-e in gprd","description":"After running wal-g successfully in parallel to wal-e since a while in gprd, and gstg fully being [switched over to wal-g](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/3077) already,  we can disable wal-e in gprd after making sure we [switched over all wal-e backup consumers in gprd](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11983).\n\n* [x] [switch all wal-e backup consumers to wal-g](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11983)\n* [x] add alert silence for wal-e\n* [x] switch archive_command on primary to use wal-g, disable `wal-g wal-push` on secondary\n  * [ ] merge MR for disabling wal-e\n  * [ ] check archive_command on primary\n  * [ ] switch archive_mode from `always` to `on` on patroni-08 (needs postgres restart)\n  * [ ] disable archive_lock cronjobs on all nodes\n* [x] disable wal-e backup-push cronjobs on all nodes\n* [ ] cleanup chef roles\n* [ ] update runbooks\n\nFor execution we can make a copy of the CR issue for gstg, which worked well: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/3077\n\n## Acceptance criteria:\n\n* [x] all backup and wal file consumers are configured to read from the wal-g archive (https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11983)\n* [x] wal-e is disabled in gprd","state":"closed","created_at":"2020-11-26T16:22:07.729Z","updated_at":"2021-10-21T03:17:36.959Z","closed_at":"2020-12-11T15:32:43.677Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":{"id":1682547,"iid":104,"group_id":1112072,"title":"Datastores team - W49","description":"Datastores team, 1st half of December, 14 days.\r\n","state":"closed","created_at":"2020-10-19T15:57:41.817Z","updated_at":"2021-11-02T12:42:03.349Z","due_date":"2020-12-13","start_date":"2020-11-30","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/104"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/12007","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":6},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/12007","notes":"https://gitlab.com/api/v4/projects/1304532/issues/12007/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/12007/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#12007","relative":"#12007","full":"gitlab-com/gl-infra/reliability#12007"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":27,"epic":{"id":3033,"iid":27,"title":"Backup Masterless","url":"/groups/gitlab-com/gl-infra/-/epics/27","group_id":1112072,"human_readable_end_date":"Dec 14, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":74934845,"iid":11983,"project_id":1304532,"title":"switch all gprd db replicas to restore from wal-g archive","description":"We now have working and tested daily db backups done by wal-g in gprd and gstg has wal-e completely disabled already. To be able to disable wal-e in gprd, we need to find all current consumers of the wal-e archive and switch them over to use the wal-g archive.\n\nFor https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11852.\n\n* [x] archive replica\n* [x] delayed replica\n* [x] database-lab/joe\n* [x] any active gitlab-restore instances\n* [x] make wal-g archive the default path for new restore instances\n* [x] anything else?\n\n## Acceptance criteria\n\n* [x] All backup consumers use wal-g archive by default","state":"closed","created_at":"2020-11-24T20:36:50.320Z","updated_at":"2020-12-14T14:03:49.503Z","closed_at":"2020-12-11T15:55:41.328Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":{"id":1682547,"iid":104,"group_id":1112072,"title":"Datastores team - W49","description":"Datastores team, 1st half of December, 14 days.\r\n","state":"closed","created_at":"2020-10-19T15:57:41.817Z","updated_at":"2021-11-02T12:42:03.349Z","due_date":"2020-12-13","start_date":"2020-11-30","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/104"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11983","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":7},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11983","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11983/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11983/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11983","relative":"#11983","full":"gitlab-com/gl-infra/reliability#11983"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":27,"epic":{"id":3033,"iid":27,"title":"Backup Masterless","url":"/groups/gitlab-com/gl-infra/-/epics/27","group_id":1112072,"human_readable_end_date":"Dec 14, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":74835216,"iid":11951,"project_id":1304532,"title":"disable wal-e in gstg","description":"After running wal-g successfully in parallel to wal-e since a while in gstg and gprd, we can disable wal-e in gstg after making sure we [disabled all wal-e backup consumers in gstg](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11883).\n\n* [x] gstg: [disable wal-e backup consumers](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11883)\n* [x] gstg: add alert silence for wal-e\n* [x] gstg: switch archive_command on primary to use wal-g, disable `wal-g wal-push` on secondary\n  * [x] merge MR\n  * [x] check archive_command on primary\n  * [x] switch archive_mode from `always` to `on` on patroni-05 (needs postgres restart)\n  * [x] disable archive_lock cronjobs on all nodes\n* [x] disable wal-e backup-push cronjobs on all nodes","state":"closed","created_at":"2020-11-23T10:36:11.052Z","updated_at":"2021-06-24T08:06:53.191Z","closed_at":"2020-11-24T20:26:46.103Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","alertmanager-silence","workflow-infra::Done"],"milestone":{"id":1682543,"iid":103,"group_id":1112072,"title":"Datastores team - W47","description":"Datastores team, 2nd half of November, 14 days.","state":"closed","created_at":"2020-10-19T15:56:20.002Z","updated_at":"2021-01-06T15:06:29.609Z","due_date":"2020-11-29","start_date":"2020-11-16","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/103"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11951","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11951","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11951/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11951/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11951","relative":"#11951","full":"gitlab-com/gl-infra/reliability#11951"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":27,"epic":{"id":3033,"iid":27,"title":"Backup Masterless","url":"/groups/gitlab-com/gl-infra/-/epics/27","group_id":1112072,"human_readable_end_date":"Dec 14, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":74767597,"iid":11942,"project_id":1304532,"title":"Investigate Failed builds for `gitlab-com/www-gitlab-com`","description":"**NOTE: Much of the initial discussion and links to failed jobs are contained in https://gitlab.com/gitlab-com/gl-infra/production/-/issues/3104.  TODO: Any relevant/necessary info should be moved to this issue, then that one can be closed as a duplicate.**\n\n@cwoolley-gitlab Reported to us a couple of failed jobs when cloning or fetching objects for the `www-gitlab-com` repository.\n\n- https://gitlab.com/gitlab-com/www-gitlab-com/-/jobs/863088257\n- https://gitlab.com/gitlab-com/www-gitlab-com/-/jobs/862981337\n\nI'm pretty sure that I found the error for the first job.\n\n```\nJob failed (system failure): Error response from daemon: error setting label on mount source '/var/lib/docker/volumes/runner-d5ae8d25-project-278964-concurrent-0-cache-3c3f060a0374fc8bc39395164f415a70/_data': bad message (docker.go:817:4s)\n```\n\nLink to document:\n\nhttps://log.gprd.gitlab.net/app/kibana#/discover/doc/AWgzayS3ENm-ja4G1a8d/pubsub-runner-inf-gprd-000339?id=dZoV53UBQEXcWSi0HOqw\n\nIts duration is `1,377,525,329,393` which I presume is nanoseconds, and this translates to `22.958755489883334` minutes, which roughly correlates with the error message from the job: `ERROR: Job failed: execution took longer than 20m0s seconds`.\n\nThere may be some relationship to a couple on-going issues being tracked separately:\n\n* https://gitlab.com/gitlab-com/gl-infra/delivery/-/issues/1358#note_451945972\n* https://gitlab.com/gitlab-com/gl-infra/production/-/issues/3068\n\nThis issue is blocked by [another issue to gather the correct metrics](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/12213)","state":"closed","created_at":"2020-11-20T21:47:17.611Z","updated_at":"2022-08-04T12:37:29.542Z","closed_at":"2021-09-20T17:55:39.808Z","closed_by":{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"},"labels":["Service::Git","corrective action","gitlab.com","group::scalability","severity::4","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11942","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11942","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11942/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11942/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11942","relative":"#11942","full":"gitlab-com/gl-infra/reliability#11942"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":74358395,"iid":11898,"project_id":1304532,"title":"Help redirect hub.gitlab.com","description":"Meta issue - tracking on https://gitlab.com/gitlab-com/marketing/growth-marketing/growth/-/issues/649#note_446580709","state":"closed","created_at":"2020-11-14T00:54:30.931Z","updated_at":"2020-12-09T01:09:38.474Z","closed_at":"2020-12-09T01:09:38.432Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["AssistType::Domain-DNS-SSL-Management","AssistingTeam::Marketing","Core-Infra::P2","Unplanned","workflow-infra::Done"],"milestone":{"id":1682690,"iid":107,"group_id":1112072,"title":"Core-Infra Nov 29-Dec 12th Unplanned items","description":"","state":"closed","created_at":"2020-10-19T17:30:40.022Z","updated_at":"2020-12-16T22:38:00.681Z","due_date":"2020-12-12","start_date":"2020-11-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/107"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-11-16","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11898","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11898","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11898/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11898/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11898","relative":"#11898","full":"gitlab-com/gl-infra/reliability#11898"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":74279059,"iid":11887,"project_id":1304532,"title":"Identify deliverables for beta launch of macOS Shared Runners on .com","description":"The macOS Build Cloud (runners on .com) [closed beta](https://gitlab.com/groups/gitlab-org/-/epics/3922) is currently in progress. The goal over the next few milestones is to wrap up the work on the autoscaler to transition the solution to [open beta](https://gitlab.com/groups/gitlab-org/-/epics/3926). The target for the open beta launch is milestone 13.10, March 2021.\n\nIn addition to the [autoscaling](https://gitlab.com/groups/gitlab-org/-/epics/3936) development, as we learned with the Windows Shared Runners rollout, there is significant work required by the infrastructure team that is a pre-requisite to the open beta launch.  This issue is to start the discussion and planning needed to get the infrastructure components in. place.","state":"closed","created_at":"2020-11-12T19:54:32.689Z","updated_at":"2022-09-01T01:11:24.392Z","closed_at":"2022-09-01T01:11:23.520Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["AssistType::CloudInfra","AssistingTeam::Development","Core-Infra::P3","Reliability::P4","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":4228834,"username":"DarrenEastman","name":"Darren Eastman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4228834/avatar.png","web_url":"https://gitlab.com/DarrenEastman"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11887","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11887/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11887/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11887","relative":"#11887","full":"gitlab-com/gl-infra/reliability#11887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":74253429,"iid":11883,"project_id":1304532,"title":"switch all gstg db replicas to restore from wal-g archive","description":"We now have working and tested daily db backups done by wal-g in gstg. To be able to disable wal-e in gstg, we need to find all current consumers of the wal-e archive and switch them over to use the wal-g archive.\n\nFor https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11852.\n\n* [x] archive replica\n* [x] delayed replica\n* [x] geo secondary db\n* [x] database-lab/joe (?)\n* [x] any active gitlab-restore instances?","state":"closed","created_at":"2020-11-12T11:41:58.953Z","updated_at":"2020-11-24T20:30:46.937Z","closed_at":"2020-11-23T10:50:30.544Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":{"id":1682543,"iid":103,"group_id":1112072,"title":"Datastores team - W47","description":"Datastores team, 2nd half of November, 14 days.","state":"closed","created_at":"2020-10-19T15:56:20.002Z","updated_at":"2021-01-06T15:06:29.609Z","due_date":"2020-11-29","start_date":"2020-11-16","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/103"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11883","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11883","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11883/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11883/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11883","relative":"#11883","full":"gitlab-com/gl-infra/reliability#11883"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":27,"epic":{"id":3033,"iid":27,"title":"Backup Masterless","url":"/groups/gitlab-com/gl-infra/-/epics/27","group_id":1112072,"human_readable_end_date":"Dec 14, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":74171455,"iid":11874,"project_id":1304532,"title":"Update cirepom to leverage new gitlab.com repository_storage_moves API","description":"**Update 2020-11-13**: This issue is being closed, since it does not appear that this will be a viable option, given the ostensibly short term of the impending application-based dog-fooded solution.\n\nThe more I look into modifying the `cirepom` project, the more I become concerned that the status quo is not aligned with the state of the art from the GitLab project repository storage move api.\n\nI think I might need to develop a better understanding of how the code base operates, and how it integrates with gitlab.\n\nCurrently, it appears that `cirepom` initiates a repository migration in this manner:\n\n```ruby\ndef set_project_repository_storage(id,target)\n  exec :put, \"projects/#{grok id}\", \"repository_storage=#{target}\"\nend\n```\n\nSource: https://gitlab.com/gitlab-com/gl-infra/cirepom/-/blob/master/lib/cirepom/store/gitlab.rb#L31\n\nAnd then subsequently monitors and tracks state, quarantining projects whose migrations exhibited errors.\n\nThis is problematic for two reasons:\n\n1. The gitlab application now tracks migration state itself and exposes an API to monitor the state of a given migration.\n2. The gitlab application project repository storage move API has significantly reduced error rates for migrations and increased stability to the point that the quarantine features here may not be necessary, since it is my understanding that they are designed to prevent repeated attempts to migrate repositories whose migrations had already failed.\n\nNew `gitlab.com` API is at `projects/\u003cproject_id\u003e/repository_storage_moves`.\n\nIt doesn't even appear that the defacto GitLab client ruby gem has support for this API, either.  As of 2020-11-10, there are no results for: https://github.com/NARKOZ/gitlab/search?q=repository_storage_moves  But maybe this is a naive query.\n\nIt is unclear to me whether the Firestore datastore features surrounding migration state management and quarantining are of much use after such an update.","state":"closed","created_at":"2020-11-10T22:29:08.394Z","updated_at":"2022-08-04T12:38:08.473Z","closed_at":"2020-11-13T15:52:08.187Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11874","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11874","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11874/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11874/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11874","relative":"#11874","full":"gitlab-com/gl-infra/reliability#11874"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":74091608,"iid":11853,"project_id":1304532,"title":"Chef recipe for installing custom wal-g binary","description":"As there is no release yet for the wal-g version that we are using, we need a chef recipe to install a custom binary: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11619","state":"closed","created_at":"2020-11-09T14:44:39.590Z","updated_at":"2020-11-10T17:20:54.539Z","closed_at":"2020-11-10T17:20:19.691Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11853","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11853","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11853/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11853/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11853","relative":"#11853","full":"gitlab-com/gl-infra/reliability#11853"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":74049552,"iid":11848,"project_id":1304532,"title":"Renew fuzzit.dev","description":"Renew fuzzit.dev domain for 4 years\nWe completed the acquisition of FuzzIt this past year and transferred the domain fuzzit.dev to GitLab.\n\nThe website will be deprecated but we want to add 4 years to the registration to prevent anyone from registering the domain and benefitting from the brand equity.\n\nPlease add 4 years to the fuzzit.dev domain.","state":"closed","created_at":"2020-11-09T02:00:05.292Z","updated_at":"2020-12-30T23:42:56.248Z","closed_at":"2020-12-30T23:42:56.172Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["AssistType::Domain-DNS-SSL-Management","AssistingTeam::Development","Unplanned","workflow-infra::Done"],"milestone":{"id":1722318,"iid":115,"group_id":1112072,"title":"Core-Infra Dec 27-Jan 9 '21 Unplanned items","description":"","state":"closed","created_at":"2020-11-12T21:13:14.237Z","updated_at":"2021-01-20T00:25:04.544Z","due_date":"2021-01-09","start_date":"2020-12-27","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/115"},"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-11-20","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11848","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11848","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11848/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11848/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11848","relative":"#11848","full":"gitlab-com/gl-infra/reliability#11848"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73810238,"iid":11805,"project_id":1304532,"title":"Enable the new patroni-gitlab-pgchecksums chef recipe to run for patroni nodes","description":"Enable the new `patroni-gitlab-pgchecksums` chef recipe for installing `gitlab-pgchecksums` package for patroni nodes.","state":"closed","created_at":"2020-11-03T15:23:15.345Z","updated_at":"2022-08-04T12:38:47.283Z","closed_at":"2020-11-05T09:12:29.671Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["C2","Database","Patroni","Service::Postgres","chef","priority::1","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-11-03","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11805","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11805","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11805/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11805/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11805","relative":"#11805","full":"gitlab-com/gl-infra/reliability#11805"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":171,"epic":{"id":19349,"iid":171,"title":"Enable checksums in the PostgreSQL database and integrity checks","url":"/groups/gitlab-com/gl-infra/-/epics/171","group_id":1112072,"human_readable_end_date":"Jan 29, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":73762705,"iid":11795,"project_id":1304532,"title":"Include statements in postgresql elastic logs for better debugging","description":"Currently, for analysing slow queries, we need to log into a DB host and search through the local logs, because we redacted query statements when sending logs to elastic, for security reasons.\n\nInstead we should consider to include the statement in the logs and just redact values between `''`. This should allows us to aggregate by class of query and make it easier to debug DB performance issues because of slow queries.\n\n~\"corrective action\" for https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2885.","state":"closed","created_at":"2020-11-02T22:09:51.368Z","updated_at":"2021-03-11T18:15:02.416Z","closed_at":"2021-03-11T13:56:04.129Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["Service::Postgres","corrective action","severity::4","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11795","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11795","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11795/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11795/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11795","relative":"#11795","full":"gitlab-com/gl-infra/reliability#11795"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73762129,"iid":11794,"project_id":1304532,"title":"Alert if a small set of queries is dominating postgresql","description":"Normally, most of the DB workload is spread out over many different queries. If the postgres workload is dominated by only a few slow queries (because of missing indices or statistics leading to bad query plans), this can have a severe impact on overall DB performance - up to a full downtime of GitLab.com as seen in [this incident](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2885) - but is sometimes is hard to detect, as we will get many symptomatic alerts but no alerts directly pointing at slow queries.\n\nWe should alert if only a small set of queries is dominating the total query time, as suggested [here](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2885#note_436200513).\n\n~\"corrective action\" for https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2885.","state":"closed","created_at":"2020-11-02T21:42:58.238Z","updated_at":"2022-04-11T14:30:17.087Z","closed_at":"2022-02-24T06:08:35.275Z","closed_by":{"id":9179861,"username":"pguinoiseau","name":"Pierre Guinoiseau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9179861/avatar.png","web_url":"https://gitlab.com/pguinoiseau"},"labels":["Service::Postgres","auto updated","corrective action","priority::2","severity::3","team::Reliability","workflow-infra::Done"],"milestone":{"id":2332331,"iid":160,"group_id":1112072,"title":"Squad 6 Q1","description":"","state":"closed","created_at":"2021-11-15T22:58:26.651Z","updated_at":"2022-10-26T08:40:41.654Z","due_date":"2022-04-30","start_date":"2022-02-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/160"},"assignees":[{"id":9179861,"username":"pguinoiseau","name":"Pierre Guinoiseau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9179861/avatar.png","web_url":"https://gitlab.com/pguinoiseau"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":9179861,"username":"pguinoiseau","name":"Pierre Guinoiseau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9179861/avatar.png","web_url":"https://gitlab.com/pguinoiseau"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11794","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11794","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11794/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11794/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11794","relative":"#11794","full":"gitlab-com/gl-infra/reliability#11794"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73759743,"iid":11793,"project_id":1304532,"title":"Upgrade `thanos-query-03-inf-ops`","description":"A simple apt-upgrade on this box, followed by a restart. See https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11791.","state":"closed","created_at":"2020-11-02T20:30:59.436Z","updated_at":"2020-12-01T23:42:03.328Z","closed_at":"2020-12-01T23:42:03.214Z","closed_by":{"id":136229,"username":"cindy","name":"Cindy Pallares ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"labels":["priority::3","workflow-infra::Done"],"milestone":{"id":1657704,"iid":101,"group_id":1112072,"title":"Observability Team - December 2020","description":"","state":"closed","created_at":"2020-10-02T22:04:55.990Z","updated_at":"2021-01-04T17:00:55.904Z","due_date":"2020-12-30","start_date":"2020-12-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/101"},"assignees":[],"author":{"id":528408,"username":"asandov","name":"AnthonySandoval","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/528408/avatar.png","web_url":"https://gitlab.com/asandov"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11793","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11793","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11793/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11793/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11793","relative":"#11793","full":"gitlab-com/gl-infra/reliability#11793"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73750484,"iid":11790,"project_id":1304532,"title":"Define SLOs and alerts for GCS storage","description":"In case of increased GCS latencies or error rates we only alert on symptoms which can make it difficult to find the real cause. We should define SLOs and alerts for GCS requests.\n\n~\"corrective action\" for https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2887","state":"closed","created_at":"2020-11-02T16:56:31.310Z","updated_at":"2021-12-01T17:50:39.113Z","closed_at":"2021-12-01T07:36:02.640Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["corrective action","severity::3","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11790","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11790","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11790/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11790/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11790","relative":"#11790","full":"gitlab-com/gl-infra/reliability#11790"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73746129,"iid":11786,"project_id":1304532,"title":"Research converting runbook for database credential rotation to an ansible play","description":"Figure out if it is possible to convert the [credential rotation runbook](https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/patroni/postgresql-role-credential-rotation.md) into a `db-ops` play.","state":"closed","created_at":"2020-11-02T15:39:42.838Z","updated_at":"2022-09-01T01:10:19.274Z","closed_at":"2022-09-01T01:10:18.291Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["DStores-Backlog::DBOperations","Reliability::P4","Service::Postgres","ansible","automation","runbook","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11786","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11786","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11786/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11786/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11786","relative":"#11786","full":"gitlab-com/gl-infra/reliability#11786"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73719229,"iid":11781,"project_id":1304532,"title":"Automatically enable GCP DocerkHub mirror for DinD builds for shared runners","description":"## Problem\n\nWith the new [Docker RateLimits](https://www.docker.com/increase-rate-limits) users might start reaching the rate limits of pulling docker images. As discussed in https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11113 we aren't going to be affected by this because we are using the [GCP mirror](https://cloud.google.com/container-registry/docs/pulling-cached-images). However this mirror is only configured when pulling images for the job, it is **not** configured for the docker daemons that start [docker in docker](https://docs.gitlab.com/ee/ci/docker/using_docker_build.html#use-docker-in-docker-workflow-with-docker-executor).\n\nIf users are using [docker in docker](https://docs.gitlab.com/ee/ci/docker/using_docker_build.html#use-docker-in-docker-workflow-with-docker-executor) to build their image, it is going to pull the base images it needs to build the image. Since the docker daemon that is started by dind is not configured to use the mirror it might reach some rate limits.\n\n## Proposal\n\nFollow https://docs.gitlab.com/ee/ci/docker/using_docker_build.html#docker-executor-inside-gitlab-runner-configuration by having our Shared runner fleet automatically mount `/etc/docker/daemon.json` that is configured to use [GCP DockerHub mirror](https://cloud.google.com/container-registry/docs/pulling-cached-images) so even our docker in docker builds will use the mirror.\n\nWhat we would need to do:\n\n1. Update the base VM image that is used in CI to include a `daemon.json` somewhere in the runner manager to have the config below.\n    \u003cdetails\u003e\n    \u003csummary\u003e daemon.json \u003c/summary\u003e\n\n    ```json\n    {\n      \"registry-mirrors\": [\n        \"https://registry-mirror.example.com\"\n      ]\n    }\n    ```\n\n    \u003c/details\u003e\n\n1. Update the shared runner fleet configuration like below.\n\n    \u003cdetails\u003e\n    \u003csummary\u003e config.toml \u003c/summary\u003e\n\n    ```toml\n    [[runners]]\n      ...\n      executor = \"docker\"\n      [runners.docker]\n        image = \"alpine:3.12\"\n        privileged = true\n        volumes = [\"/opt/docker/daemon.json:/etc/docker/daemon.json:ro\"]\n    ```\n    \u003c/details\u003e\n\n## Possible problems\n\n### When users have are configuring the mirror through `command`\n\n**This will be a breaking change for certain users**\n\nWhen a user has the following `command` defined in their `.gitlab-ci.yml` to specify a mirror (they can do this already) and we mount the `/etc/docker/daemon.json` the service is going to fail with the error below.\n\nUser updated docker `dind` service to specify a mirror themselves\n```yaml\nservices:\n   - name: docker:19.03.13-dind\n     command: [\"--registry-mirror\", \"https://registry-mirror.example.com\"] # Specify the registry mirror to use.\n```\n\nGitLab CI failure\n```shell\n2020-11-02T08:18:33.103369077Z unable to configure the Docker daemon with file /etc/docker/daemon.json: the following directives are specified both as a flag and in the configuration file: registry-mirrors: (from flag: [https://mirror.gcr.io/], from file: [https://registry-mirror.example.com])\n```\n\n### Users don't expect the `/etc/docker/daemon.json` to be present\n\nThere might be some jobs out that that don't expect the `/etc/docker/daemon.json` to be present which might also break their jobs if we start mounting this file.","state":"closed","created_at":"2020-11-02T08:23:32.491Z","updated_at":"2022-08-04T12:38:59.341Z","closed_at":"2021-01-07T16:23:00.633Z","closed_by":{"id":210928,"username":"steveazz","name":"Steve Azzopardi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a5eeed7ec5c80642df9ee708bb496d7?s=80\u0026d=identicon","web_url":"https://gitlab.com/steveazz"},"labels":["AssistType::GitLabAdmin","AssistingTeam::Development","Core-Infra::P2","Service::CI Runners","Unplanned","workflow-infra::Done"],"milestone":{"id":1722318,"iid":115,"group_id":1112072,"title":"Core-Infra Dec 27-Jan 9 '21 Unplanned items","description":"","state":"closed","created_at":"2020-11-12T21:13:14.237Z","updated_at":"2021-01-20T00:25:04.544Z","due_date":"2021-01-09","start_date":"2020-12-27","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/115"},"assignees":[],"author":{"id":210928,"username":"steveazz","name":"Steve Azzopardi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a5eeed7ec5c80642df9ee708bb496d7?s=80\u0026d=identicon","web_url":"https://gitlab.com/steveazz"},"type":"ISSUE","assignee":null,"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11781","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":13,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11781","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11781/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11781/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11781","relative":"#11781","full":"gitlab-com/gl-infra/reliability#11781"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73589795,"iid":11762,"project_id":1304532,"title":"Create terraform repo for transient-import project","description":"We get requests often to make VMs for customer project imports (ex: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11695). As of now, these are manually provisioned by someone in infra and handed off to the support or professional services engineer performing the import. I think we could be much more efficient if we made a terraform repo and allowed engineers to mostly self-service the creation of servers.\n\nI propose that we re-use the [GCP module in dev-resources](https://gitlab.com/gitlab-com/dev-resources/-/tree/master/modules/gcp) to make this possible. This module was written for support to create VMs in a similar way for interviews or other testing purposes. The main thing we would need to modify is to remove the chef provisioning part and add a firewall rule to the module to allow the support engineer to access via SSH. \n\nSince much of the terraform is done, this shouldn't take too long to do and would make both infra and support more efficient in these requests.","state":"closed","created_at":"2020-10-29T16:44:24.430Z","updated_at":"2020-12-16T21:58:14.167Z","closed_at":"2020-12-10T23:31:14.276Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["AssistType::CloudInfra","AssistingTeam::Support","Unplanned","workflow-infra::Done"],"milestone":{"id":1682690,"iid":107,"group_id":1112072,"title":"Core-Infra Nov 29-Dec 12th Unplanned items","description":"","state":"closed","created_at":"2020-10-19T17:30:40.022Z","updated_at":"2020-12-16T22:38:00.681Z","due_date":"2020-12-12","start_date":"2020-11-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/107"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11762","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11762","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11762/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11762/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11762","relative":"#11762","full":"gitlab-com/gl-infra/reliability#11762"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73533796,"iid":11753,"project_id":1304532,"title":"Install the `pg_checksums` debian package on patroni nodes","description":"To support postgres [checksums enablement](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11518#note_436803777), install the `pg_checksums` debian package on patroni nodes from the gitlab Aptly package host.\n\nPackage is: `gitlab-pg-checksums_1.0_amd64.deb`\n\nIt should already be uploaded to aptly, but I'll attach it here, just in case.\n\n[gitlab-pg-checksums_1.0_amd64.deb](/uploads/30539087472549bdbbe9143249a97c53/gitlab-pg-checksums_1.0_amd64.deb)\n\nThe goal of this issue is implement how the package that is already in Aptly will be rolled out using chef in the database nodes.","state":"closed","created_at":"2020-10-28T17:22:55.269Z","updated_at":"2022-08-04T12:39:16.657Z","closed_at":"2020-11-05T09:12:20.978Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Infrastructure","Patroni","priority::1","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-10-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11753","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11753","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11753/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11753/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11753","relative":"#11753","full":"gitlab-com/gl-infra/reliability#11753"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":171,"epic":{"id":19349,"iid":171,"title":"Enable checksums in the PostgreSQL database and integrity checks","url":"/groups/gitlab-com/gl-infra/-/epics/171","group_id":1112072,"human_readable_end_date":"Jan 29, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":73257732,"iid":11713,"project_id":1304532,"title":"Help create temporary access for GCP bucket for Package team working on Registry","description":"We have https://gitlab.com/gitlab-com/team-member-epics/access-requests/-/issues/7318#note_435195251 open to help the team working on registry better understand current development work.\n\nFrom the AR:\nJustification for this access: Hayley and I are both maintainers of the GitLab Container Registry. As part of the upcoming registry upgrade (https://gitlab.com/gitlab-org/container-registry/-/issues/191), we will need to create an inventory of the repositories that exist in the current registry buckets. We may also need to examine these during the upgrade. For this reason, we need to be able to list/scan the buckets using the GCS API. This requires a service account with read access (`Viewer` role, I believe). Having this access is also useful to debug customer issues in general.\n\nDecide if we want to make a service account or just give viewer role to the two developers temporarily.","state":"closed","created_at":"2020-10-23T16:16:10.359Z","updated_at":"2021-03-05T20:48:07.982Z","closed_at":"2021-02-12T22:01:39.038Z","closed_by":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"labels":["AssistType::CloudInfra","AssistingTeam::Development","unblocks others","workflow-infra::Done"],"milestone":{"id":1808963,"iid":124,"group_id":1112072,"title":"Core-Infra Jan 31 - Feb 13","description":"","state":"closed","created_at":"2021-01-05T23:32:25.348Z","updated_at":"2021-03-04T21:07:05.795Z","due_date":"2021-02-13","start_date":"2021-01-31","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/124"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"}],"author":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11713","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11713","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11713/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11713/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11713","relative":"#11713","full":"gitlab-com/gl-infra/reliability#11713"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":73108670,"iid":11688,"project_id":1304532,"title":"Readiness Review for Jaeger","description":"This checklist is sourced from https://gitlab.com/gitlab-com/gl-infra/readiness/-/blob/master/.gitlab/issue_templates/production_readiness.md.\n\nLink to the Jaeger runbook, which covers majority of the points listed below: https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/jaeger/README.md\n\nThe scope of this review is:\n- deploying Jaeger to the production environment\n- Elasticsearch instance deployed to Elastic Cloud (used as storage backend for the Jaeger service)\n- Labkit instrumentation\n\n## Summary\n\n* [x] Short overview mentioning purpose of the service, dependencies and owners\n* [x] Explain the scope of this review and what is explicitly out of scope.\n\n## Architecture\n\n* [x] Runbook README.md contains an architecture overview (provide link)\n  * [x] Runbook README.md contains a logical architecture diagram\n  * [x] Runbook README.md contains a physical architecture diagram (optional)\n  * [x] Runbook README.md provides enough information for a reviewer to get an\n    understanding of the service and it's components, dependencies and\n    interactions\n\n## Documentation\n\n* [x] is there a blue print/design doc? (provide link)\n* [x] do we have runbooks? (provide links)\n* [x] are runbooks up-to-date?\n* [x] where else is documentation for this service located?\n* [ ] is there a service catalog entry? (provide link)\n  * [x] is service catalog listing all dependencies?\n  * [ ] has service catalog links to all existing documentation?\n  * [ ] is service catalog linking to readiness review?\n\n## Performance\n\n* [x] is there a runbook section with performance characteristics? (it should\n  cover following considerations, provide link)\n  * [x] current requests/s (min, max, average), latency characteristics,\n    saturation, ...\n  * [x] throtteling/limits\n  * [x] bottlenecks (cpu-bound, memory-bound, ...)\n  * [x] is there documentation on how/why we set certain config options that are\n    affecting performance?\n\n## Scalability\n\n* [x] is there a runbook section with scalability information? (it should cover\n  following considerations, provide link)\n  * [x] expected load in the future\n  * [x] how can we scale to the expected load?\n  * [x] can it be scaled across availability zones or regions?\n  * [x] are there scalability limitations?\n  * [x] are we doing performance tests?\n\n## Availability\n\n* [x] is there a runbook section covering availability considerations? (it\n  should cover following topics, provide link)\n  * [x] failure modes of this service, blast radius, how long does it take to\n    recover?\n  * [x] what happens on outage of services we are depending on?\n  * [x] Availability Zone (AZ) outage\n  * [x] split brain between AZs\n  * [x] region outage\n  * [x] other external dependencies that could affect availability\n  * [x] what other services are affected by an outage of this service?\n  * [x] is there an existing Recovery Time Objective (RTO) documented? How do we\n    plan to achieve it?\n  * [x] do we have an error budget?\n  * [x] are we doing disaster recovery tests?\n  * [x] is there a failover procedure? Do we have runbook instructions?\n\n## Durability\n\n* [x] is there a runbook section covering durability considerations? (it should\n  cover following topics, provide link)\n* [x] possible failure modes and how to recover from them\n  * [x] deletion by accident\n  * [x] disk failure\n  * [x] data corruption\n  * [x] GCP outage\n  * ...\n  * [x] is there an existing Recovery Point Objective (RPO) documented? How do\n    we plan to achieve it?\n  * Backups\n    * [x] are we testing backup replay?\n    * [x] are we monitoring backups?\n    * [x] what is the backup retention policy?\n    * [x] are backups in a different logical and physical environment?\n\n## Security/Compliance\n\n* [ ] is there a runbook section covering security considerations? (it should\n  cover following topics, provide link)\n  * [x] list of access roles\n  * [x] Who has which role?\n  * [x] How do we protect access?\n  * [x] Auditability of access\n  * [x] Which entrypoints need protection?\n  * [x] How are we applying security updates? (OS and service)\n  * [ ] Regulations/Policies applying? (PII, SOX, ...)\n  * [x] how do we protect customer data?\n    * [x] encryption at rest?\n    * [x] could customer data leak in logs?\n    * [x] how long do we keep logs?\n* [ ] is someone from security included for the readiness review?\n\n## Monitoring\n\n* [x] is there a runbook section covering monitoring? (it should\n  cover following topics, provide link)\n  * [x] list key SLIs. Are we monitoring them?\n  * [x] list SLOs. Are we monitoring/alerting on them?\n  * [x] list of relevant alerts\n  * [x] are alerts actionable and linking to a runbook?\n  * [x] do we have a metrics catalog entry for the service? (provide link)\n  * [x] list of relevant dashboards\n  * [x] list of relevant logs","state":"closed","created_at":"2020-10-21T15:14:03.261Z","updated_at":"2023-02-01T10:42:43.841Z","closed_at":"2023-02-01T10:42:43.629Z","closed_by":{"id":210928,"username":"steveazz","name":"Steve Azzopardi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a5eeed7ec5c80642df9ee708bb496d7?s=80\u0026d=identicon","web_url":"https://gitlab.com/steveazz"},"labels":["Reliability::P4","Service::Jaeger","team::Reliability","workflow-infra::Cancelled"],"milestone":{"id":1810563,"iid":125,"group_id":1112072,"title":"Observability Backlog","description":"The Observability SRE Team uses this milestone to scope work to our Kanban [board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278).\r\n\r\nFor our triage issues, please see this [issue search](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026label_name[]=team%3A%3AObservability\u0026label_name[]=workflow-infra%3A%3ATriage).","state":"closed","created_at":"2021-01-06T16:26:59.737Z","updated_at":"2022-01-04T10:18:35.366Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/125"},"assignees":[],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11688","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":69,"completed_count":63},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11688","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11688/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11688/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11688","relative":"#11688","full":"gitlab-com/gl-infra/reliability#11688"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":210,"epic":{"id":43409,"iid":210,"title":"Jaeger Distributed Tracing Enabled for GitLab.com","url":"/groups/gitlab-com/gl-infra/-/epics/210","group_id":1112072,"human_readable_end_date":"Apr 30, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":72672050,"iid":11594,"project_id":1304532,"title":"Estimate how quickly the 16TB disks allocated for new project repository gitaly shards are filled up with new projects","description":"Estimate how quickly the 16TB disks allocated for new project repository gitaly shards are filled up with new projects.\n\nThis will be slightly tricky, since we do not have a constant number of shards participating in this round robin arrangement.","state":"closed","created_at":"2020-10-13T20:22:23.773Z","updated_at":"2022-08-04T12:40:47.053Z","closed_at":"2020-12-01T19:45:46.548Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["DStores-Backlog::GTLY","Infrastructure","Service::Gitaly","workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-10-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11594","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11594","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11594/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11594/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11594","relative":"#11594","full":"gitlab-com/gl-infra/reliability#11594"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":72668091,"iid":11593,"project_id":1304532,"title":"Move sidekiq: Shard Detail dashboard to use recording rules","description":"The shard detail dashboard can be quite slow to load and won't produce data with specific time frames. We can move the queries used in these dashboards to recording rules to pre-compute the queries.","state":"closed","created_at":"2020-10-13T18:45:56.565Z","updated_at":"2021-08-20T00:03:00.190Z","closed_at":"2021-08-19T23:31:04.233Z","closed_by":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"labels":["Service::Monitoring-Other","corrective action","priority::2","severity::3","team::Reliability","workflow-infra::Done"],"milestone":{"id":1810563,"iid":125,"group_id":1112072,"title":"Observability Backlog","description":"The Observability SRE Team uses this milestone to scope work to our Kanban [board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278).\r\n\r\nFor our triage issues, please see this [issue search](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026label_name[]=team%3A%3AObservability\u0026label_name[]=workflow-infra%3A%3ATriage).","state":"closed","created_at":"2021-01-06T16:26:59.737Z","updated_at":"2022-01-04T10:18:35.366Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/125"},"assignees":[{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"}],"author":{"id":136229,"username":"cindy","name":"Cindy Pallares ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/136229/avatar.png","web_url":"https://gitlab.com/cindy"},"type":"ISSUE","assignee":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"user_notes_count":11,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":"2021-08-18","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11593","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11593","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11593/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11593/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11593","relative":"#11593","full":"gitlab-com/gl-infra/reliability#11593"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":72590774,"iid":11580,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file51`","description":"Gitaly storage shard `nfs-file51` (`file-51-stor-gprd.c.gitlab-production.internal`) is at `79.12%` usage as of `2020-10-12`.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file51`.\n\nThere are currently 7 gitaly shard nodes configured to accept new projects (`nfs-file51-57`).  Maintaining at least 7 or 8 shards with sufficient capacity for new user repository creation is about the target level of availability we prefer and is important because it helps us avoid a scenario in which shards fill up too quickly.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent the acceleration of capacity consumption, a new gitaly shard node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-10-12T15:47:22.409Z","updated_at":"2022-08-04T12:40:52.316Z","closed_at":"2020-10-14T13:35:13.175Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["C4","DStores-Backlog::DBOperations","Infrastructure","Service::Gitaly","workflow-infra::Done"],"milestone":null,"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-10-13","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11580","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11580","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11580/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11580/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11580","relative":"#11580","full":"gitlab-com/gl-infra/reliability#11580"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":72269394,"iid":11544,"project_id":1304532,"title":"DNS Audit- Please review these IPs","description":"\u003c!--\nThis template is for GitLab Team Members seeking support of SRE where there isn't an existing `request-*` template available.\n\nPlease fill out the details below.\n--\u003e\n\n**Details** \n - Point of contact for this request: @mmaneval20 \n - If a call is needed, what is the proposed date and time of the call:  [+ Date and Time +]\n - Additional call details (format, type of call): [+ additional details +]\n\n**SRE Support Needed**\nWe are working with a third party security scanner, Bit Sight. They have identified the following IPs as associated with GitLab via DNS records. We have found that a few of them were given up but perhaps the DNS record wasn't updated. \n\nMy ask is that you review [this list](https://docs.google.com/spreadsheets/d/1O6FbyB-uGpVbWjZtEAwVxeM53Db71YMcb2fLUvBUfqI/edit?usp=sharing_). If there are any IPs that are no longer ours, please indicate that on the Google Doc. Then, please validate that the DNS record was properly removed/updated. \n\nIf they are ours, could you please indicated if it is: Production, Pre-prodcution, or User Managed. \n\nI will then get any IPs removed from the Bit Sight Portal. \n\nPlease note that at this time, I'm not saying there is necessarily anything vulnerable or wrong with these IPs. However, we NEED to validate these IPs so we can remove the misattributed IPs that could be negatively impacting our score. \n\nIf it's easier to get on a sync call, let me know. \n\n\n\n\u003c!--\nplease do not edit the below\n--\u003e","state":"closed","created_at":"2020-10-06T16:06:45.285Z","updated_at":"2022-08-04T12:41:19.701Z","closed_at":"2021-02-02T16:36:45.361Z","closed_by":{"id":5096918,"username":"sttruong","name":"Steve Truong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5096918/avatar.png","web_url":"https://gitlab.com/sttruong"},"labels":["AssistType::Domain-DNS-SSL-Management","AssistingTeam::Security","Unplanned","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"},{"id":4437855,"username":"brentnewton","name":"Brent Newton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4437855/avatar.png","web_url":"https://gitlab.com/brentnewton"},{"id":5096918,"username":"sttruong","name":"Steve Truong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5096918/avatar.png","web_url":"https://gitlab.com/sttruong"},{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"}],"author":{"id":6492316,"username":"mmaneval20","name":"Meghan Maneval","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6492316/avatar.png","web_url":"https://gitlab.com/mmaneval20"},"type":"ISSUE","assignee":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11544","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11544","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11544/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11544/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11544","relative":"#11544","full":"gitlab-com/gl-infra/reliability#11544"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":72259382,"iid":11543,"project_id":1304532,"title":"Automate k8s-workloads sidekiq configuration updates","description":"Instead of creating a MR in the `k8s-workload/gitlab-com` project with an empty yaml file and then reverting the MR in order to execute a noop change to trigger a pipeline run, or from clicking a button on a pipeline web page, switch to using [the programmatic method for triggering a pipeline build](https://gitlab.com/gitlab-com/gl-infra/production/-/blob/c92bba1c33cee8d215d9822e5fa0c4a62beef054/.gitlab/issue_templates/storage_shard_creation.md#run-k8s-workload-master-branch-pipeline) and include its execution as part of a pipeline stage when changes are merged to the main branch of our chef repo project.","state":"closed","created_at":"2020-10-06T13:53:48.640Z","updated_at":"2022-08-04T12:41:20.483Z","closed_at":"2021-06-16T16:21:48.434Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Infrastructure","Service::Gitaly","auto updated","chef","kubernetes","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11543","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11543","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11543/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11543/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11543","relative":"#11543","full":"gitlab-com/gl-infra/reliability#11543"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":72241340,"iid":11537,"project_id":1304532,"title":"Container registry - defining PostgreSQL setup for prod","description":"We would like to consider in this issue what will be the production setup for the container registry database.\n\n\nWe had some chats on the issue: https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11294\n\nI would like to summarize here the actual idea of the setup for the PostgreSQL for production:\n\nHardware spec: `n-standard-32` with 64 GB memory.\n\n\nArchitecture:\n\nUsing the production consul cluster have an entry for our Patroni Cluster.\n\nWe will have 3 nodes initially on the cluster:\n1-Primary for read-write traffic.\n1-Secondary for read-only traffic.\n1-Secondary that will not receive traffic to take snapshots and backups.\n\nHave 2 pgbouncers nodes in front of the primary database node for the read-write traffic.\nHave 2 pgbouncer nodes in the read-only servers.\n \n\nLet's enable data checksums in the database from the initial setup.\n\n\nPostgresql Setup:","state":"closed","created_at":"2020-10-06T09:01:21.262Z","updated_at":"2022-11-18T07:46:58.991Z","closed_at":"2022-11-18T07:46:58.967Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Reliability::P4","team::Reliability","workflow-infra::Ready"],"milestone":null,"assignees":[],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11537","time_stats":{"time_estimate":57600,"total_time_spent":0,"human_time_estimate":"16h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11537","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11537/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11537/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11537","relative":"#11537","full":"gitlab-com/gl-infra/reliability#11537"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":324,"epic":{"id":115084,"iid":324,"title":"Create the Container Registry Database Cluster in Production =\u003e x%","url":"/groups/gitlab-com/gl-infra/-/epics/324","group_id":1112072,"human_readable_end_date":"Oct 8, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":72063955,"iid":11516,"project_id":1304532,"title":"Work with Delivery team for the initial Container Registry (new architecture) rollout process in Staging","description":"Work with the Delivery team on any changes needed to deployment tooling\n\n(e.g. work with the team to check the connectivity to the database, and monitor how they will execute the database migrations)","state":"closed","created_at":"2020-10-02T08:19:45.331Z","updated_at":"2022-08-04T12:41:35.294Z","closed_at":"2021-10-04T11:15:55.254Z","closed_by":{"id":6191476,"username":"amyphillips","name":"Amy Phillips","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6191476/avatar.png","web_url":"https://gitlab.com/amyphillips"},"labels":["Database","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11516","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11516","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11516/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11516/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11516","relative":"#11516","full":"gitlab-com/gl-infra/reliability#11516"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":323,"epic":{"id":114995,"iid":323,"title":"Create the Container Registry Database Cluster in Staging","url":"/groups/gitlab-com/gl-infra/-/epics/323","group_id":1112072,"human_readable_end_date":"Oct 1, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":71893025,"iid":11495,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file50`","description":"Gitaly storage shard `nfs-file50` (`file-50-stor-gprd.c.gitlab-production.internal`) is at `82.50%` usage as of `2020-09-29`.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file50`.\n\nThere are currently 6 gitaly shard nodes configured to accept new projects (`nfs-file51-56`).  Maintaining at least 7 or 8 shards with sufficient capacity for new user repository creation is about the target level of availability we prefer and is important because it helps us avoid a scenario in which shards fill up too quickly.\n\nNote: I have already removed `nfs-file50` from the configuration to receive new repositories, because it has become well past the 80% threshold by which it should have been removed already.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent the acceleration of capacity consumption, a new gitaly shard node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-09-29T19:41:55.652Z","updated_at":"2022-08-04T12:41:52.238Z","closed_at":"2020-10-05T18:38:51.450Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["C4","DStores-Backlog::DBOperations","Infrastructure","Service::Gitaly","change","requires production access","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-09-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11495","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11495","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11495/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11495/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11495","relative":"#11495","full":"gitlab-com/gl-infra/reliability#11495"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":71885097,"iid":11493,"project_id":1304532,"title":"2020-09-29: Silence alert for: The authorized_projects queue, main stage, has a queue latency outside of SLO","description":"Silencing alert for: The authorized_projects queue, main stage, has a queue latency outside of SLO (`sidekiq_background_job_queue_apdex_ratio_burn_rate_slo_out_of_bounds`)\n\nDuration: `30 days`\n\nRequest for silence: https://gitlab.slack.com/archives/CB3LSMEJV/p1601395587142400\n\nFeature category: `authentication_and_authorization`","state":"closed","created_at":"2020-09-29T16:13:53.647Z","updated_at":"2022-08-04T12:41:53.632Z","closed_at":"2021-06-16T16:22:34.638Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Service::Sidekiq","alertmanager-silence","auto updated","environment::gprd","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-10-29","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11493","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11493","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11493/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11493/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11493","relative":"#11493","full":"gitlab-com/gl-infra/reliability#11493"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":71712100,"iid":11472,"project_id":1304532,"title":"Add zone checks to firewall rules for Cloudflare Audit Log","description":"#### Problem\n\nThe Cloudflare interface does not make it easy to get a quick overview of our current rules applied to each zone and compare them for consistency. There is also variation due to configuration required for production that may not be necessary for staging.\n\n#### Proposal\n\nCloudflare firewall rules described by issues in gitlab-com/gl-infra/cloudflare-firewall\u003e should be labelled with the zones they are applicable to and checked by Cloudflare Audit log.\n\nThe current proposed labels from https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2783/diffs#5a3efee5111997f9405246307d030ade2f15d696_148_152\n\n```markdown\n  - `zone:gitlab-com`\n  - `zone:staging-gitlab-com`\n  - `zone:gitlab-net`\n```\n\n#### Potential Tests\n\n- [x] Add the necessary labels to existing open tickets\n- [ ] Update Cloudflare Audit to check for the rules in each zone\n- [ ] Update Cloudflare Audit to check if the matching rules in each zone they are in are identical\n- [ ] For the rules that exist in multiple zones, verify that they are in the same order.\n\ncc @T4cC0re @cmcfarland @dawsmith for feedback and discussion.","state":"closed","created_at":"2020-09-25T22:07:45.818Z","updated_at":"2022-08-04T12:42:12.971Z","closed_at":"2022-01-28T12:18:50.598Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["AssistType::CloudInfra","AssistingTeam::Security","CDN","Infrastructure Security","Service::Cloudflare","auto updated","security","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11472","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11472","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11472/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11472/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11472","relative":"#11472","full":"gitlab-com/gl-infra/reliability#11472"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":71707213,"iid":11469,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file49`","description":"Gitaly storage shard `nfs-file49` (`file-49-stor-gprd.c.gitlab-production.internal`) is at `85.07%` usage as of `2020-09-25`.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file49`.\n\nThere are currently 6 gitaly shard nodes configured to accept new projects (`nfs-file49-55`).  Maintaining at least 7 or 8 shards with sufficient capacity for new user repository creation is about the target level of availability we prefer and is important because it helps us avoid a scenario in which shards fill up too quickly.\n\nNote: I have already removed `nfs-file49` from the configuration to receive new repositories, because it has become well past the 80% threshold by which it should have been removed already.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent the acceleration of capacity consumption, a new gitaly shard node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-09-25T19:41:08.134Z","updated_at":"2022-08-04T12:42:16.750Z","closed_at":"2020-09-29T19:41:59.400Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["C3","DStores-Backlog::DBOperations","Infrastructure","Service::Gitaly","change","requires production access","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-09-25","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11469","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11469","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11469/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11469/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11469","relative":"#11469","full":"gitlab-com/gl-infra/reliability#11469"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":71575839,"iid":11451,"project_id":1304532,"title":"Container Registry: Set up backups, delayed replication, and snapshots in production","description":"We should define for the registry database cluster in staging:\n\n* backup pipelines\n* restore pipelines\n* delayed replica\n* disk snapshots from one of the replicas. We could consider having a replica without traffic for all this activities.","state":"closed","created_at":"2020-09-23T15:28:59.425Z","updated_at":"2022-08-04T12:42:31.952Z","closed_at":"2021-10-04T16:12:43.573Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":{"id":1643379,"iid":100,"group_id":1112072,"title":"Container Registry Database - Production","description":"","state":"closed","created_at":"2020-09-24T08:23:02.552Z","updated_at":"2021-11-12T05:28:19.629Z","due_date":"2021-01-31","start_date":"2020-11-15","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/100"},"assignees":[],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11451","time_stats":{"time_estimate":57600,"total_time_spent":0,"human_time_estimate":"16h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11451","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11451/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11451/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11451","relative":"#11451","full":"gitlab-com/gl-infra/reliability#11451"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":324,"epic":{"id":115084,"iid":324,"title":"Create the Container Registry Database Cluster in Production =\u003e x%","url":"/groups/gitlab-com/gl-infra/-/epics/324","group_id":1112072,"human_readable_end_date":"Oct 8, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":71575623,"iid":11450,"project_id":1304532,"title":"Set up backups, delayed replication, and snapshots in staging","description":"We should define for the registry database cluster in staging:\n\n**backup pipelines**\n\n - We execute a daily backup and copy the wal files daily. This is triggered by a shell cron-job that we have in chef. We need to adapt to be generic on the database name.\n - We have a restore pipeline to verify if the backup can restore properly.\n - Enable our deadmansnitch alerts for the restore of this new database backup restore.\n - review our alerts on the backup generation and alerts.\n\n**delayed replica**\n\n - As we have in GitLab.com, we need a delayed replica, where we apply the WAL files with a delay of 8 hours. The main intention of this database is to restore data in case of accidents, e.g.: if we had an accidental `DELETE` statement, or some wrong `WHERE` clause in a `DELETE` statement in production,  we would have an environment to recover the deleted data quickly.\n - This host is not part of the Patroni cluster.\n\n**Disk snapshots**\n\n- We want to have a dedicated replica that will not receive traffic and can not be promoted to be the leader of the Patroni cluster for the container registry database cluster.\n- As we execute in GitLab.com this snapshot has to have the following steps to guarantee the synchronizd:\n  * Execute a pg_Start_backup before the snapshot is initiated.\n  * execute a GCP disk snapshot\n  * Execute a pg_stop_backup after the snapshot is finished.\n\nAll the retention policies should be as GitLab.com.\n\n\nAcceptance criteria: \n- [ ] Fulfill all the requirements from the issue","state":"closed","created_at":"2020-09-23T15:27:04.579Z","updated_at":"2021-08-30T12:19:57.938Z","closed_at":"2021-08-12T13:53:56.898Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Database","team::Reliability","workflow-infra::Done"],"milestone":{"id":1682547,"iid":104,"group_id":1112072,"title":"Datastores team - W49","description":"Datastores team, 1st half of December, 14 days.\r\n","state":"closed","created_at":"2020-10-19T15:57:41.817Z","updated_at":"2021-11-02T12:42:03.349Z","due_date":"2020-12-13","start_date":"2020-11-30","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/104"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11450","time_stats":{"time_estimate":144000,"total_time_spent":0,"human_time_estimate":"40h","human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":13,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11450","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11450/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11450/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11450","relative":"#11450","full":"gitlab-com/gl-infra/reliability#11450"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":323,"epic":{"id":114995,"iid":323,"title":"Create the Container Registry Database Cluster in Staging","url":"/groups/gitlab-com/gl-infra/-/epics/323","group_id":1112072,"human_readable_end_date":"Oct 1, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":71575296,"iid":11449,"project_id":1304532,"title":"Work with Delivery team for the initial rollout process","description":"Work with the Delivery team on any changes needed to deployment tooling\n\n(e.g. work with the team to check the connectivity, and monitor how they will execute the database migrations)","state":"closed","created_at":"2020-09-23T15:24:58.714Z","updated_at":"2022-08-04T12:42:33.372Z","closed_at":"2021-11-05T10:34:26.556Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["workflow-infra::Done"],"milestone":{"id":1643379,"iid":100,"group_id":1112072,"title":"Container Registry Database - Production","description":"","state":"closed","created_at":"2020-09-24T08:23:02.552Z","updated_at":"2021-11-12T05:28:19.629Z","due_date":"2021-01-31","start_date":"2020-11-15","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/100"},"assignees":[],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11449","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11449","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11449/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11449/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11449","relative":"#11449","full":"gitlab-com/gl-infra/reliability#11449"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":324,"epic":{"id":115084,"iid":324,"title":"Create the Container Registry Database Cluster in Production =\u003e x%","url":"/groups/gitlab-com/gl-infra/-/epics/324","group_id":1112072,"human_readable_end_date":"Oct 8, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":71574618,"iid":11447,"project_id":1304532,"title":"Create the (new) monitoring for the Container Registry DB in production","description":"We should review our monitoring set up in a generic method that we could deploy and monitor several clusters, without impact each cluster.\n\nThe metrics and alerts could be customized per cluster since the business requirements can be different. \n\nAlso, we should review our tools, ( scripts, ansible-playbooks...) that we could test and refactor if needed, to be used in different clusters.","state":"closed","created_at":"2020-09-23T15:16:59.862Z","updated_at":"2022-08-04T12:42:34.624Z","closed_at":"2021-10-04T16:01:35.172Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":{"id":1643379,"iid":100,"group_id":1112072,"title":"Container Registry Database - Production","description":"","state":"closed","created_at":"2020-09-24T08:23:02.552Z","updated_at":"2021-11-12T05:28:19.629Z","due_date":"2021-01-31","start_date":"2020-11-15","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/100"},"assignees":[],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-12-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11447","time_stats":{"time_estimate":57600,"total_time_spent":0,"human_time_estimate":"16h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11447","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11447/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11447/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11447","relative":"#11447","full":"gitlab-com/gl-infra/reliability#11447"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":324,"epic":{"id":115084,"iid":324,"title":"Create the Container Registry Database Cluster in Production =\u003e x%","url":"/groups/gitlab-com/gl-infra/-/epics/324","group_id":1112072,"human_readable_end_date":"Oct 8, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":71456812,"iid":11423,"project_id":1304532,"title":"Connect Smartling to Brand and Digital Design team Repository","description":"\u003c!--\nThis template is for GitLab Team Members seeking support of SRE where there isn't an existing `request-*` template available.\n\nPlease fill out the details below.\n--\u003e\n\n**Details** \n - Point of contact for this request: [+ @sdaily +]\n - If a call is needed, what is the proposed date and time of the call:  [+ Date and Time +]\n - Additional call details (format, type of call): [+ additional details +]\n\n**Documentation**\n\nVerify the following system prerequisites are installed: \n\n- Repo user created for Repo Connector\n- The application should be hosted on a server that is continuously available and/or publicly addressable.\n- Java version 8 or higher.\n- Disk space requirements: It should have enough space to clone your Git repositories, as well as 50MB for the installation of the Repository Connector.\n- Links to relevant repos (if public)\n- Example resource files (e.g. GetText .PO file, JSON file, etc)\n- Help Center articles on the Repo Connector: https://help.smartling.com/hc/en-us/sections/360001685234-Repository-Connector\n\n**SRE Support Needed**\n\n*dsmith - from call notes, we just need to:\n\n1. Create a Smartling GCP Project under the Marketing Folder\n1. Setup a VM in the new project -  n1-standard-2 should do, ubuntu 18.04 or 20.04 - setup auto-patcthing with 100GB disk to start.\n1. Do basic hardening\n1. Set up a way to maintain ssh keys for the marketing team to access the config files\n1. Install the connector per the docs above.\n\nOpen question, should we set up a simple ansible repo to do the hardening/key management (or okta asa)/connector install?\n\n## Related MRs\n\n- https://gitlab.com/gitlab-com/marketing/corporate_marketing/corporate-marketing/-/merge_requests/114\n- https://gitlab.com/gitlab-com/marketing/corporate_marketing/corporate-marketing/-/merge_requests/117\n- https://gitlab.com/gitlab-com/marketing/corporate_marketing/corporate-marketing/-/merge_requests/119\n- https://gitlab.com/gitlab-com/marketing/corporate_marketing/corporate-marketing/-/merge_requests/120\n- https://gitlab.com/gitlab-com/marketing/corporate_marketing/corporate-marketing/-/merge_requests/123\n- https://gitlab.com/gitlab-com/marketing/corporate_marketing/corporate-marketing/-/merge_requests/124\n- https://gitlab.com/gitlab-com/marketing/corporate_marketing/corporate-marketing/-/merge_requests/128\n\n/cc @mpreuss22 @bmatturro @brandon_lyon @laurenbarker","state":"closed","created_at":"2020-09-21T15:14:15.941Z","updated_at":"2021-06-18T20:27:24.783Z","closed_at":"2021-06-18T20:27:23.757Z","closed_by":{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"},"labels":["AssistType::CloudInfra","AssistingTeam::Marketing","Localisation Support","Smartling","Unplanned","workflow-infra::Done"],"milestone":{"id":1753312,"iid":118,"group_id":1112072,"title":"Core-Infra Jan 10 - Jan 23 Unplanned items","description":"","state":"closed","created_at":"2020-12-02T20:19:38.933Z","updated_at":"2021-01-27T20:14:53.967Z","due_date":"2021-01-23","start_date":"2021-01-10","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/118"},"assignees":[{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},{"id":2222520,"username":"dawsmith","name":"Dave Smith","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ef341e061f6b86461626e64c5fbcfe52?s=80\u0026d=identicon","web_url":"https://gitlab.com/dawsmith"}],"author":{"id":1243277,"username":"ghost1","name":"Ghost User","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4249f4df72b475e7894fabed1c5888cf?s=80\u0026d=identicon","web_url":"https://gitlab.com/ghost1"},"type":"ISSUE","assignee":{"id":429540,"username":"ahanselka","name":"Alex Hanselka","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/429540/avatar.png","web_url":"https://gitlab.com/ahanselka"},"user_notes_count":61,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-11-18","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11423","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11423","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11423/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11423/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11423","relative":"#11423","full":"gitlab-com/gl-infra/reliability#11423"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":71319088,"iid":11399,"project_id":1304532,"title":"Investigate to turn off Cloudflare E-Mail Obfuscation for performance reasons","description":"Current on gitlab.com an JS is loaded automatically through Cloudflare which is responsible for a feature called E-Mail Obfuscation, which is there to protect e-mail adresses from being scraped. It seems that this was not deliberately turned on but rather is a default. Would be great to investigate and/or turn the feature off to gain some performance through that. \n\nJS that is injected on each page through Cloudflare automatically: https://gitlab.com/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js \n\nExample page where it is loaded: https://gitlab.com/gitlab-org/gitlab\n\nCloudflare info: https://support.cloudflare.com/hc/en-us/articles/200170016-What-is-Email-Address-Obfuscation-","state":"closed","created_at":"2020-09-17T15:23:18.778Z","updated_at":"2021-05-21T16:44:20.892Z","closed_at":"2021-01-14T00:11:46.546Z","closed_by":{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"},"labels":["AssistType::CloudInfra","AssistingTeam::Development","CDN","Service::Cloudflare","Unplanned","performance","workflow-infra::Done"],"milestone":{"id":1753312,"iid":118,"group_id":1112072,"title":"Core-Infra Jan 10 - Jan 23 Unplanned items","description":"","state":"closed","created_at":"2020-12-02T20:19:38.933Z","updated_at":"2021-01-27T20:14:53.967Z","due_date":"2021-01-23","start_date":"2021-01-10","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/118"},"assignees":[{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"}],"author":{"id":1149402,"username":"timzallmann","name":"Tim Zallmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1149402/avatar.png","web_url":"https://gitlab.com/timzallmann"},"type":"ISSUE","assignee":{"id":4337537,"username":"ggillies","name":"Graeme Gillies","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4337537/avatar.png","web_url":"https://gitlab.com/ggillies"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-11-27","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11399","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11399","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11399/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11399/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11399","relative":"#11399","full":"gitlab-com/gl-infra/reliability#11399"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":71178779,"iid":11369,"project_id":1304532,"title":"Create a test plan with Container Registry team to test the new cluster (Q/A + devs), in Staging","description":"Work in progress - see the parent EPIC.","state":"closed","created_at":"2020-09-15T06:37:53.251Z","updated_at":"2022-08-04T12:43:37.767Z","closed_at":"2021-10-04T11:16:35.225Z","closed_by":{"id":6191476,"username":"amyphillips","name":"Amy Phillips","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6191476/avatar.png","web_url":"https://gitlab.com/amyphillips"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11369","time_stats":{"time_estimate":14400,"total_time_spent":0,"human_time_estimate":"4h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11369","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11369/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11369/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11369","relative":"#11369","full":"gitlab-com/gl-infra/reliability#11369"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":323,"epic":{"id":114995,"iid":323,"title":"Create the Container Registry Database Cluster in Staging","url":"/groups/gitlab-com/gl-infra/-/epics/323","group_id":1112072,"human_readable_end_date":"Oct 1, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":71177367,"iid":11368,"project_id":1304532,"title":"New Readiness Review for Container Registry + new PG DB cluster","description":"The new Infra Readiness Review process and template are being created and validated [here](https://gitlab.com/gitlab-com/gl-infra/readiness/-/merge_requests/43). We'll need to follow these two processes/templates:\n- [Operational readiness](https://gitlab.com/gitlab-com/gl-infra/readiness/-/blob/13c0b59a3e61af6993084be786a06c74199bab51/.gitlab/issue_templates/service_readiness.md)\n- [Production Readiness](https://gitlab.com/gitlab-com/gl-infra/readiness/-/blob/13c0b59a3e61af6993084be786a06c74199bab51/.gitlab/issue_templates/production_readiness.md)\n\n\nCritical points to fully cover in this readiness review are:\n- [ ] Complete our DB Runbooks - taking into account our new DB clusters (https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11321)\n- [ ] Update Monitoring (https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11326)\n- [ ] A robust Backup setting\n\n(This issue is still work in progress)","state":"closed","created_at":"2020-09-15T05:47:36.130Z","updated_at":"2022-08-04T12:43:39.150Z","closed_at":"2021-08-11T10:45:57.848Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["team::Reliability","workflow-infra::Done"],"milestone":{"id":1643379,"iid":100,"group_id":1112072,"title":"Container Registry Database - Production","description":"","state":"closed","created_at":"2020-09-24T08:23:02.552Z","updated_at":"2021-11-12T05:28:19.629Z","due_date":"2021-01-31","start_date":"2020-11-15","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/100"},"assignees":[],"author":{"id":5709244,"username":"albertoramos","name":"Alberto Ramos","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709244/avatar.png","web_url":"https://gitlab.com/albertoramos"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11368","time_stats":{"time_estimate":144000,"total_time_spent":0,"human_time_estimate":"40h","human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11368","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11368/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11368/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11368","relative":"#11368","full":"gitlab-com/gl-infra/reliability#11368"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":324,"epic":{"id":115084,"iid":324,"title":"Create the Container Registry Database Cluster in Production =\u003e x%","url":"/groups/gitlab-com/gl-infra/-/epics/324","group_id":1112072,"human_readable_end_date":"Oct 8, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":71163919,"iid":11365,"project_id":1304532,"title":"Cloudflare WAF Rules for `/api/graphql` and `/-/wikis`","description":"\u003c!--\nThis template is for GitLab Team Members seeking support of SRE where there isn't an existing `request-*` template available.\n\nPlease fill out the details below.\n--\u003e\n\n**Details** \n - Point of contact for this request: [+ @asaba +]\n - If a call is needed, what is the proposed date and time of the call:  [+ Date and Time +]\n - Additional call details (format, type of call): [+ additional details +]\n\n**SRE Support Needed**\n[+ Support Request Details +]\n\nThe following paths should be excluded from the WAF rules:\n\n* POSTs to `/api/graphql`, exact match\n* POST to paths containing `/-/wikis/`\n* POST to paths ending with `/-/wikis`\n\nBased on the most recent traffic analysis, these are the last exceptions I think we should add before enabling the WAF in block mode. Details here: https://gitlab.com/gitlab-com/gl-security/appsec/appsec-team/-/issues/50#note_412543041\n\n\u003c!--\nplease do not edit the below\n--\u003e","state":"closed","created_at":"2020-09-14T23:03:29.517Z","updated_at":"2021-06-15T17:36:39.852Z","closed_at":"2021-06-15T17:36:39.840Z","closed_by":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"labels":["AssistType::CloudInfra","AssistingTeam::Security","Infrastructure Security","Service::Cloudflare","Unplanned","workflow-infra::Done"],"milestone":null,"assignees":[{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":555989,"username":"T4cC0re","name":"Hendrik Meyer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/555989/avatar.png","web_url":"https://gitlab.com/T4cC0re"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11365","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11365","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11365/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11365/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11365","relative":"#11365","full":"gitlab-com/gl-infra/reliability#11365"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":71022724,"iid":11348,"project_id":1304532,"title":"gitlab-restore backup restores failing (excessive duration): Reduce the backup size or enable WAL compression.","description":"We get [deadman snitch alerts](https://deadmanssnitch.com/snitches/178d5bf474) for missing backup restores.","state":"closed","created_at":"2020-09-11T11:29:12.597Z","updated_at":"2021-06-24T08:07:15.463Z","closed_at":"2020-10-15T13:44:46.481Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Patroni","Service::Postgres","Unplanned","workflow-infra::Done"],"milestone":{"id":1601701,"iid":95,"group_id":1112072,"title":"Datastores Team - From 21-Sept-2020","description":"","state":"closed","created_at":"2020-08-24T16:23:44.867Z","updated_at":"2021-06-27T15:49:40.503Z","due_date":"2020-10-18","start_date":"2020-09-21","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/95"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11348","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11348","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11348/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11348/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11348","relative":"#11348","full":"gitlab-com/gl-infra/reliability#11348"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70938936,"iid":11326,"project_id":1304532,"title":"New DB for Container Registry: Create the DB monitoring in Staging","description":"**Metrics, dashboards and alerts**\nOur goal is to collect all the metrics to have the following dashboards for the container registry:\n\n- Patroni overview: https://dashboards.gitlab.net/d/patroni-main/patroni-overview?orgId=1\n- Postgresql overview: https://dashboards.gitlab.net/d/000000144/postgresql-overview?orgId=1\n- Pgbouncer overview: https://dashboards.gitlab.net/d/PwlB97Jmk/pgbouncer-overview?orgId=1\n- Host stats: https://dashboards.gitlab.net/d/bd2Kl9Imk/host-stats-old-prometheus?orgId=1\u0026var-environment=gprd\u0026var-node=patroni-01-db-gprd.c.gitlab-production.internal\u0026var-promethus=prometheus-01-inf-gprd \n\nInitially, the alerts should be equal to GitLab.com. If we need we will adapt them.\n\n**Logs**\n\nWe would like to ensure that we have all the logs from the database ecosystem(PostgreSQL, Patroni, PgBouncer and Consul) available in:\n\n* ELK - Kibana\n\n* Sentry","state":"closed","created_at":"2020-09-09T15:36:27.618Z","updated_at":"2021-10-05T12:37:56.506Z","closed_at":"2021-08-19T14:37:07.634Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Database","board::automate","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11326","time_stats":{"time_estimate":115200,"total_time_spent":0,"human_time_estimate":"32h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":13,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11326","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11326/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11326/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11326","relative":"#11326","full":"gitlab-com/gl-infra/reliability#11326"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":323,"epic":{"id":114995,"iid":323,"title":"Create the Container Registry Database Cluster in Staging","url":"/groups/gitlab-com/gl-infra/-/epics/323","group_id":1112072,"human_readable_end_date":"Oct 1, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":70924882,"iid":11321,"project_id":1304532,"title":"Review all the runbooks for the database ecosystem to attend different databases","description":"we need to review all the database related runbooks to attend the possibility of being used in different databases.\n\nSome points to review, hardcoded values, that could be different in other databases.\n\nAlso always consider a certain level of abstraction since we will have more clusters in the future.","state":"closed","created_at":"2020-09-09T11:27:37.216Z","updated_at":"2022-08-04T12:44:10.937Z","closed_at":"2021-04-19T07:41:23.794Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["auto updated","workflow-infra::Done"],"milestone":{"id":1643379,"iid":100,"group_id":1112072,"title":"Container Registry Database - Production","description":"","state":"closed","created_at":"2020-09-24T08:23:02.552Z","updated_at":"2021-11-12T05:28:19.629Z","due_date":"2021-01-31","start_date":"2020-11-15","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/100"},"assignees":[{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-12-31","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11321","time_stats":{"time_estimate":28800,"total_time_spent":0,"human_time_estimate":"8h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11321","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11321/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11321/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11321","relative":"#11321","full":"gitlab-com/gl-infra/reliability#11321"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":324,"epic":{"id":115084,"iid":324,"title":"Create the Container Registry Database Cluster in Production =\u003e x%","url":"/groups/gitlab-com/gl-infra/-/epics/324","group_id":1112072,"human_readable_end_date":"Oct 8, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":70885114,"iid":11307,"project_id":1304532,"title":"Provision a new database cluster in production for the container register service","description":"We need to provision a PostgreSQL cluster in production, after our staging tests are completed. This issue will address the change design and preparation (Design/validation sessions, Change testing, create documentation), with the below requirements.\n\nRequirements:\n\n* Install PostgreSQL version 12.\n* The hardware specs have to be evaluated with the traffic that we are expected.\n* Create a cluster with 1 primary and 2 nodes read-only.\n* Configure a new Patroni cluster.\n* Create a new cluster in consul (that Patroni will use)\n* Provision 2 pgbouncers one to receive the traffic Read-write and other one to receive traffic read-only.","state":"closed","created_at":"2020-09-08T15:30:44.688Z","updated_at":"2022-09-08T13:34:03.955Z","closed_at":"2021-10-04T15:48:25.773Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["alertmanager-silence","board::automate","team::Reliability","workflow-infra::Done"],"milestone":{"id":1643379,"iid":100,"group_id":1112072,"title":"Container Registry Database - Production","description":"","state":"closed","created_at":"2020-09-24T08:23:02.552Z","updated_at":"2021-11-12T05:28:19.629Z","due_date":"2021-01-31","start_date":"2020-11-15","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/100"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11307","time_stats":{"time_estimate":57600,"total_time_spent":0,"human_time_estimate":"16h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11307","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11307/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11307/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11307","relative":"#11307","full":"gitlab-com/gl-infra/reliability#11307"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":324,"epic":{"id":115084,"iid":324,"title":"Create the Container Registry Database Cluster in Production =\u003e x%","url":"/groups/gitlab-com/gl-infra/-/epics/324","group_id":1112072,"human_readable_end_date":"Oct 8, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":70815983,"iid":11295,"project_id":1304532,"title":"Memory troubleshooting guide","description":"(Coming from this incident: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2581)\n\nDiagnosing memory issues is notoriously hard. There are several methods that can be used, and they are largely dependent on the type of process being profiled.\n\nIt would be good to have a guide that goes into how to diagnose high memory usage.\n\nIt may make sense to have separate guides per process type.\n\n* Go: We have pprof and potentially even continuous profiling.\n* Ruby: Stackprof, heap dump via objspace. GC stats. jemalloc stats.\n* Generic: pmap, smaps, core dump, heap dump via gdb.\n* Novel: [heaptrack](https://github.com/KDE/heaptrack), [tcmalloc](https://github.com/google/tcmalloc), [poireau](https://github.com/backtrace-labs/poireau).\n\nSome of these need some more work on the tooling side on our end. But at the very least pprof and continuous profiling would be good to document.\n\nrefs https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/84","state":"closed","created_at":"2020-09-07T09:43:23.463Z","updated_at":"2021-11-18T19:49:46.646Z","closed_at":"2021-11-18T11:27:09.150Z","closed_by":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"labels":["corrective action","group::application performance","performance","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"}],"author":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"type":"ISSUE","assignee":{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11295","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11295","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11295/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11295/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11295","relative":"#11295","full":"gitlab-com/gl-infra/reliability#11295"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":84,"epic":{"id":9892,"iid":84,"title":"Implement practices to help train new on-callers and cross-train each other","url":"/groups/gitlab-com/gl-infra/-/epics/84","group_id":1112072,"human_readable_end_date":"Oct 30, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":70807465,"iid":11294,"project_id":1304532,"title":"Provision new Patroni cluster in staging for the Container Registry service","description":"We need to provide a PostgreSQL database cluster in staging.\n\n### Status\n\n* **MRs**\n  * **DBTB** \n    * Chef: https://gitlab.com/gitlab-com/gl-infra/chef-repo/-/merge_requests/33\n    * TF: https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/-/merge_requests/2581\n  * **Staging** COMPLETED\n    * Chef: https://gitlab.com/gitlab-com/gl-infra/chef-repo/-/merge_requests/75\n    * TF: https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/-/merge_requests/2615\n    * CR: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/4796\n\nRequirements:\n- [x] Install PostgreSQL version 12.\n- [x] Hardware config `n1-standard-8`, or we could migrate to `n1-standard-16`\n- [x] Create a cluster with 1 primary and 2 nodes read-only. One of them dedicated to snapshots.\n- [x] Configure a new Patroni cluster.\n- [x] Create a new cluster in consul ( using the same cluster we use for GitLab.com ).\n- [x] Provision 2 pgbouncer pools, one to receive the traffic Read-write and the second to receive traffic read-only.\n- [ ] We want to offer by default redundancy on pgbouncer. We will have at the moment 2 instances to balance the load on the pgbouncer level since pgbouncer is single-threaded, and in case of a failure we would redirect the load on the second instance. \n- [ ] If we need to expand we would use 2 CPU-cores from each node from the pgbouncer layer that are in front of the primary database host, and would not impact performance on the database layer. Imagine from a hardware perspective form the primary with 32 cores having 4 cores dedicated for pooling, is over 10% that I consider high. And we would be able to scale up this layer.\n- [ ] if we want to use in the future some functionality as pgbouncer pause, it is ideal to have the pgbouncer nodes on a different level, principally considering a hardware problem where the pgbouncer could be impacted with the database node. \n- [x] We need to offer 2 pgbouncer pools, from read-write and read-only, to enable good practices from our developers to redirect the read-only traffic to the secondaries.\n- [x] Let's enable data checksums in the database from the initial setup.","state":"closed","created_at":"2020-09-07T07:08:44.673Z","updated_at":"2021-10-05T10:23:43.455Z","closed_at":"2021-06-04T17:35:08.289Z","closed_by":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"labels":["Database","priority::2","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"type":"ISSUE","assignee":{"id":2360513,"username":"glopezfernandez","name":"Gerardo Lopez-Fernandez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2360513/avatar.png","web_url":"https://gitlab.com/glopezfernandez"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11294","time_stats":{"time_estimate":144000,"total_time_spent":0,"human_time_estimate":"40h","human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":8},"weight":21,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11294","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11294/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11294/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11294","relative":"#11294","full":"gitlab-com/gl-infra/reliability#11294"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":323,"epic":{"id":114995,"iid":323,"title":"Create the Container Registry Database Cluster in Staging","url":"/groups/gitlab-com/gl-infra/-/epics/323","group_id":1112072,"human_readable_end_date":"Oct 1, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":70643594,"iid":11247,"project_id":1304532,"title":"Add restore_command to recovery.conf in patroni cluster","description":"Adding `wal-g wal-fetch` as a `restore_command` to the recovery.conf in our patroni cluster would help with catching up from a big replication delay by loading wal files from GCS until we are close enough to switch over to streaming replication (which will be done transparently by postgres).\n\nThis would reduce the load on the primary and also enable recovering when WAL files already are missing on the primary.\n\nWe already have wal-g binaries installed on all patroni nodes in gstg and gprd. But while gstg will work out of the box, because we use wal-g for wal-push there already we need to point the wal-g configuration in gprd to the wal-e GCS bucket, as we did not enable wal-g wal-push there yet.\n\nThis is a corrective action for https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2570.","state":"closed","created_at":"2020-09-02T16:31:16.518Z","updated_at":"2020-12-08T19:59:39.311Z","closed_at":"2020-12-08T19:59:39.231Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","corrective action","severity::3","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11247","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11247","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11247/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11247/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11247","relative":"#11247","full":"gitlab-com/gl-infra/reliability#11247"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70642475,"iid":11246,"project_id":1304532,"title":"Improve replication lag runbook instructions","description":"The runbook part pointed to by the replication lag alert doesn't cover related issues with WAL files not being cleaned up while a replica is lagging behind and should get instructions to deal with unused replication slots.\n\nThis is a corrective action for https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2570","state":"closed","created_at":"2020-09-02T15:59:56.683Z","updated_at":"2022-08-04T12:44:55.906Z","closed_at":"2020-09-07T10:07:27.551Z","closed_by":{"id":876203,"username":"igorwwwwwwwwwwwwwwwwwwww","name":"Igor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/876203/avatar.png","web_url":"https://gitlab.com/igorwwwwwwwwwwwwwwwwwwww"},"labels":["SRE:On-call","Service::Postgres","corrective action","oncall","workflow-infra::Done"],"milestone":{"id":1601715,"iid":96,"group_id":1112072,"title":"Datastores Team - From 24-Aug-2020","description":"Ongoing","state":"closed","created_at":"2020-08-24T16:42:42.935Z","updated_at":"2021-01-06T15:06:17.571Z","due_date":"2020-09-20","start_date":"2020-08-24","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/96"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":0,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11246","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11246","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11246/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11246/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11246","relative":"#11246","full":"gitlab-com/gl-infra/reliability#11246"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70636194,"iid":11244,"project_id":1304532,"title":"disable-chef-client isn't preserved over reboots","description":"In https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2570#note_401672637 we saw that disabling chef-client with `disable-chef-client` wasn't preserved over a reboot - which unexpectedly brought the DB back into rotation with a high replication delay.\n\nWe need to figure out why it isn't preserved over reboots (the node was in an unhealthy state, so maybe it just failed to write changes to disk in this one case and works in general - need to test) and fix it.","state":"closed","created_at":"2020-09-02T13:47:51.383Z","updated_at":"2021-12-09T18:05:54.564Z","closed_at":"2021-12-09T16:53:08.097Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["SRE:On-call","corrective action","oncall","priority::2","severity::2","team::Reliability","workflow-infra::Done"],"milestone":{"id":2354423,"iid":163,"group_id":1112072,"title":"Corrective Actions Squad - December I","description":":mailbox_with_mail: [Corrective Actions board](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/boards/3164592?scope=all\u0026label_name[]=corrective%20action)\r\n\r\n:pushpin: [Q4 Epic](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/621).\r\n\r\n:arrows_clockwise: [How we work, CA Workflow](https://about.gitlab.com/handbook/engineering/infrastructure/team/reliability/#how-we-work--corrective-actions-workflow).","state":"closed","created_at":"2021-12-01T06:56:20.467Z","updated_at":"2021-12-15T10:11:40.817Z","due_date":"2021-12-15","start_date":"2021-12-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/163"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":37,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11244","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11244","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11244/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11244/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11244","relative":"#11244","full":"gitlab-com/gl-infra/reliability#11244"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70624806,"iid":11241,"project_id":1304532,"title":"Adjust last backup alert threshold to a meaningful value","description":"We currently alert if the last successful basebackup was more than 48h ago. This is problematic as it will randomly alert either around 14h after a backup failed (if the next backup took slightly longer than the last successful one) or not alert at all (if the next backup took less time then the last successful one). We should set it to something like 30h to give a 4h hour tolerance if the backup takes unexpectedly longer then the previous one for some reason (e.g. the Sunday backup might finish slightly faster then the Monday backup because of less traffic).\n\nLooking at [thanos](https://thanos-query.ops.gitlab.net/graph?g0.range_input=2w\u0026g0.max_source_resolution=0s\u0026g0.expr=gitlab_com%3Alast_wale_successful_basebackup_age_in_hours\u0026g0.tab=0), the variance in backup time is less than 2h.","state":"closed","created_at":"2020-09-02T10:02:37.731Z","updated_at":"2020-09-07T22:56:50.982Z","closed_at":"2020-09-02T13:27:45.837Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","corrective action","workflow-infra::Done"],"milestone":{"id":1601715,"iid":96,"group_id":1112072,"title":"Datastores Team - From 24-Aug-2020","description":"Ongoing","state":"closed","created_at":"2020-08-24T16:42:42.935Z","updated_at":"2021-01-06T15:06:17.571Z","due_date":"2020-09-20","start_date":"2020-08-24","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/96"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11241","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11241","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11241/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11241/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11241","relative":"#11241","full":"gitlab-com/gl-infra/reliability#11241"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70422575,"iid":11210,"project_id":1304532,"title":"Patroni not failing over when data disk is full","description":"We had an [incident in staging](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2583) where the data disk on the primary was running full, making the DB unavailable, but Patroni did not fail over to another node.\n\nThe patroni logs contained these exceptions all the time:\n\n```\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  2020-08-27 11:50:01,650 ERROR: get_postgresql_status\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  Traceback (most recent call last):\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:    File \"/opt/patroni/lib/python3.5/site-packages/patroni/api.py\", line 505, in query\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:      with self.patroni.postgresql.connection().cursor() as cursor:\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:    File \"/opt/patroni/lib/python3.5/site-packages/patroni/postgresql/__init__.py\", line 222, in connection\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:      return self._connection.get()\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:    File \"/opt/patroni/lib/python3.5/site-packages/patroni/postgresql/connection.py\", line 23, in get\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:      self._connection = psycopg2.connect(**self._conn_kwargs)\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:    File \"/opt/patroni/lib/python3.5/site-packages/psycopg2/__init__.py\", line 130, in connect\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  psycopg2.OperationalError: could not connect to server: Connection refused\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  #011Is the server running on host \"localhost\" (127.0.0.1) and accepting\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  #011TCP/IP connections on port 5432?\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  During handling of the above exception, another exception occurred:\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  Traceback (most recent call last):\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:    File \"/opt/patroni/lib/python3.5/site-packages/patroni/api.py\", line 452, in get_postgresql_status\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:      self.server.patroni.postgresql.lsn_name), retry=retry)[0]\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:    File \"/opt/patroni/lib/python3.5/site-packages/patroni/api.py\", line 424, in query\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:      return self.server.query(sql, *params)\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:    File \"/opt/patroni/lib/python3.5/site-packages/patroni/api.py\", line 511, in query\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:      raise PostgresConnectionException('connection problems')\n2020-08-27_11:50:01 patroni-01-db-gstg patroni[24887]:  patroni.exceptions.PostgresConnectionException: 'connection problems'\n```\n\nWe need to make sure that patroni is able to fail over when the primary becomes unavailable because of no space left on the data disk.","state":"closed","created_at":"2020-08-28T13:36:15.815Z","updated_at":"2022-08-04T12:45:18.798Z","closed_at":"2020-10-26T15:48:07.717Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Datastores-Backlog::Urgent fix","Patroni","corrective action","severity::3","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11210","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11210","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11210/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11210/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11210","relative":"#11210","full":"gitlab-com/gl-infra/reliability#11210"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70420669,"iid":11209,"project_id":1304532,"title":"Prevent DB WAL files to fill up the data disk","description":"Failing `archive_command`, unused replication slots or [failing logical replication](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2583#note_403884088) can prevent WAL files to be cleaned up. We need to take measures to prevent them to fill up the data partition as this can lead serious problems and data loss.","state":"closed","created_at":"2020-08-28T13:01:13.383Z","updated_at":"2021-10-11T23:01:15.727Z","closed_at":"2021-10-08T15:03:28.300Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["DStores-Backlog::DBOperations","Service::Postgres","auto updated","corrective action","team::Reliability","workflow-infra::Done"],"milestone":{"id":2119954,"iid":144,"group_id":1112072,"title":"EOC Queue Q2 2021","description":"","state":"closed","created_at":"2021-06-27T15:50:33.795Z","updated_at":"2021-11-12T05:29:04.183Z","due_date":"2021-07-31","start_date":"2021-05-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/144"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11209","time_stats":{"time_estimate":10800,"total_time_spent":0,"human_time_estimate":"3h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11209","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11209/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11209/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11209","relative":"#11209","full":"gitlab-com/gl-infra/reliability#11209"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70413585,"iid":11208,"project_id":1304532,"title":"Alert on reboots","description":"While alerting on symptoms should be preferable, for some classes of nodes we can be certain that a reboot will cause noticeable issues. It would be helpful to get an alert for a reboot in this case, because often from looking at the symptoms it is not always easy to deduce a reboot as cause and sometimes the symptoms might still be below thresholds so that we would miss frequent reboots.\n\nWe should alert (but probably not page) for reboots of Gitaly and Patroni nodes.\n\nWe should also alert on high reboot frequencies for all nodes.\n\nThere is a reboots dashboard already: https://dashboards.gitlab.net/d/yzukVGtZz/reboots?orgId=1","state":"closed","created_at":"2020-08-28T10:20:09.667Z","updated_at":"2022-03-04T07:01:11.249Z","closed_at":"2022-03-04T06:23:20.342Z","closed_by":{"id":9179861,"username":"pguinoiseau","name":"Pierre Guinoiseau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9179861/avatar.png","web_url":"https://gitlab.com/pguinoiseau"},"labels":["corrective action","priority::3","severity::3","team::Reliability","workflow-infra::Done"],"milestone":{"id":2332331,"iid":160,"group_id":1112072,"title":"Squad 6 Q1","description":"","state":"closed","created_at":"2021-11-15T22:58:26.651Z","updated_at":"2022-10-26T08:40:41.654Z","due_date":"2022-04-30","start_date":"2022-02-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/160"},"assignees":[{"id":9179861,"username":"pguinoiseau","name":"Pierre Guinoiseau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9179861/avatar.png","web_url":"https://gitlab.com/pguinoiseau"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":9179861,"username":"pguinoiseau","name":"Pierre Guinoiseau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9179861/avatar.png","web_url":"https://gitlab.com/pguinoiseau"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11208","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11208","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11208/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11208/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11208","relative":"#11208","full":"gitlab-com/gl-infra/reliability#11208"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":70226196,"iid":11158,"project_id":1304532,"title":"GitLab connection troubleshooting instructions for customers","description":"When customers are reporting problems connecting to GitLab.com it is often hard to debug the cause because of missing information. We should provide troubleshooting instructions for customers so they can help us debug the problems and make sure support has documentation at hand to point customers to.\n\nA basic first aid kit would be something like\n\n* `traceroute gitlab.com`\n* `curl http://gitlab.com/cdn-cgi/trace`\n* `curl https://gitlab.com/cdn-cgi/trace`\n* `curl -svo /dev/null https://gitlab.com`\n\nFor the future, we should work on enabling [NEL](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10754).","state":"closed","created_at":"2020-08-24T15:13:17.537Z","updated_at":"2022-08-04T12:45:46.821Z","closed_at":"2020-09-14T08:26:26.888Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["SRE:On-call","corrective action","oncall","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11158","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11158","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11158/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11158/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11158","relative":"#11158","full":"gitlab-com/gl-infra/reliability#11158"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69812143,"iid":11106,"project_id":1304532,"title":"[Runbook] Update the permanent maintenance mode section of the patroni management runbook","description":"During the \"simulation\" demo, it was noticed that there was an area or two that could be improved.\n\nUpdate the permanent maintenance mode section of the patroni management runbook so that `Step 3` includes an explanation of why, not just what: https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/patroni/patroni-management.md#permanently-marking-a-replica-as-in-maintenance","state":"closed","created_at":"2020-08-13T17:00:21.799Z","updated_at":"2022-08-04T12:46:21.702Z","closed_at":"2021-06-03T14:08:43.224Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Patroni","auto updated","runbook","workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11106","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11106","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11106/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11106/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11106","relative":"#11106","full":"gitlab-com/gl-infra/reliability#11106"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69679310,"iid":11087,"project_id":1304532,"title":"Improve postgres runbook","description":"I recently received a page for increasing numbers of dead tuples on `patroni-01`, and ran into a dead end while [following the runbook to investigate](https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/patroni/postgres.md#tables-with-a-large-amount-of-dead-tuples). As a follow-up to the investigation from https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2506, we should work with Ongres to ensure that the runbook leads to better/actionable steps for resolution.\n\n/cc @albertoramos @Finotto","state":"closed","created_at":"2020-08-11T06:52:19.855Z","updated_at":"2020-09-21T23:41:44.013Z","closed_at":"2020-09-21T12:12:44.714Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","corrective action","severity::2","workflow-infra::Done"],"milestone":{"id":1601715,"iid":96,"group_id":1112072,"title":"Datastores Team - From 24-Aug-2020","description":"Ongoing","state":"closed","created_at":"2020-08-24T16:42:42.935Z","updated_at":"2021-01-06T15:06:17.571Z","due_date":"2020-09-20","start_date":"2020-08-24","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/96"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":693144,"username":"craig","name":"Craig Barrett","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c8dfa1ca41754b9409068e5e42080cd2?s=80\u0026d=identicon","web_url":"https://gitlab.com/craig"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11087","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11087","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11087/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11087/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11087","relative":"#11087","full":"gitlab-com/gl-infra/reliability#11087"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69552071,"iid":11074,"project_id":1304532,"title":"Add a pagerless, quieter, symlinkable, pipeable version of the existing gkms show utility","description":"It would be nice to have a pagerless, quieter, symlinkable, pipeable version of the existing gkms show utility in the [`chef-repo`](https://ops.gitlab.net/gitlab-cookbooks/chef-repo).","state":"closed","created_at":"2020-08-07T16:34:39.514Z","updated_at":"2022-08-04T12:46:39.484Z","closed_at":"2020-08-07T17:30:07.715Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Service::GCP","chef","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11074","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11074","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11074/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11074/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11074","relative":"#11074","full":"gitlab-com/gl-infra/reliability#11074"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69510779,"iid":11064,"project_id":1304532,"title":"Install `pg_activity` observability tool on the patroni fleet","description":"**Current Situation**\n\u003c!--Describe the current situation which you are intending to iterate on with the work described in this issue.--\u003e\n\nCurrently in order to inspect activity in the database one must open a `psql` session using `sudo gitlab-psql` on a particular node and run a query: `SELECT * FROM pg_stat_activity;` and then page through results until one finds what one is looking for.\n\n**Desired Outcome**\n\u003c!--Describe the intended outcome of the work represented in this issue. How does it improve upon the current situation above?--\u003e\n\nThis change proposes that we install the `pg_activity` tool: https://wiki.postgresql.org/wiki/Monitoring#pg_activity\n\n\nProject: https://pypi.org/project/pg-activity/\n\nSource homepage: https://github.com/dalibo/pg_activity\n\nThis will support an easier method for examining database activity with a wider range of options for sorting and filtering that are only a keystroke away, instead of crafting or copypasta queries into a database `psql` session.\n\n**Acceptance Criteria**\n\u003c!--List out work items necessary to arrive at the desired outcome above, as atomically as possible.--\u003e\n- [x] The json chef role for the staging patroni fleet will have to be modified to include:\n   1. [x] The installation of the `pg-activity` pypi package.\n   1. [x] The invocation script to automatically use credentials from `.pgpass`.\n- [ ] Repeat the above steps for both the `gstg` and the `gprd` environment-specific roles.","state":"closed","created_at":"2020-08-06T14:22:17.943Z","updated_at":"2022-09-01T01:02:27.034Z","closed_at":"2022-09-01T01:02:25.831Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["DStores-Backlog::DBObserv","Database","Reliability::P4","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":null,"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2021-02-01","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11064","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11064","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11064/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11064/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11064","relative":"#11064","full":"gitlab-com/gl-infra/reliability#11064"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69494139,"iid":11059,"project_id":1304532,"title":"Praefect cloud_sql Database in staging is almost constantly near 100% CPU","description":"For example: https://gitlab.slack.com/archives/C017L2ZV4KE/p1596693091048000\n\n![image](/uploads/601fab9e3b845e900939f96c547107be/image.png)\n\nhttps://dashboards.gitlab.net/d/alerts-sat_cloudsql_cpu/alerts-cloudsql_cpu-saturation-detail?orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gstg\u0026var-type=monitoring\u0026var-stage=main\u0026from=now-24h\u0026to=now\n\nNote: the service will change after https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2607, so the chart variables in the link above will need to change too. \n\ncc @ahmadsherif @alejandro","state":"closed","created_at":"2020-08-06T06:31:33.481Z","updated_at":"2020-09-10T22:17:16.492Z","closed_at":"2020-08-20T17:51:47.810Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Service::Praefect","Unplanned","workflow-infra::Done"],"milestone":{"id":1344468,"iid":88,"group_id":1112072,"title":"Datastores Team - Aug 2020","description":"Not actually Aub, but sort of: It'll cover between 27th July till 23th August (Sunday), both inclusive.","state":"closed","created_at":"2020-06-29T08:42:44.192Z","updated_at":"2021-01-06T15:06:09.784Z","due_date":"2020-08-23","start_date":"2020-07-27","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/88"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11059","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11059","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11059/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11059/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11059","relative":"#11059","full":"gitlab-com/gl-infra/reliability#11059"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69421064,"iid":11046,"project_id":1304532,"title":"revamp storage dashboard","description":"redoing https://app.periscopedata.com/app/gitlab/690541/WIP:-GitLab.com-Storage-Cost-Stats to include all stats over time","state":"closed","created_at":"2020-08-04T17:44:43.419Z","updated_at":"2022-08-04T12:46:53.270Z","closed_at":"2021-04-16T16:52:16.451Z","closed_by":{"id":4587775,"username":"davis_townsend","name":"Davis Townsend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ebb933fd506f8541f62b79663bcc834b?s=80\u0026d=identicon","web_url":"https://gitlab.com/davis_townsend"},"labels":["workflow-infra::Done","workflow-infrafin::Concept"],"milestone":null,"assignees":[{"id":4587775,"username":"davis_townsend","name":"Davis Townsend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ebb933fd506f8541f62b79663bcc834b?s=80\u0026d=identicon","web_url":"https://gitlab.com/davis_townsend"}],"author":{"id":4587775,"username":"davis_townsend","name":"Davis Townsend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ebb933fd506f8541f62b79663bcc834b?s=80\u0026d=identicon","web_url":"https://gitlab.com/davis_townsend"},"type":"ISSUE","assignee":{"id":4587775,"username":"davis_townsend","name":"Davis Townsend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ebb933fd506f8541f62b79663bcc834b?s=80\u0026d=identicon","web_url":"https://gitlab.com/davis_townsend"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11046","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11046","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11046/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11046/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11046","relative":"#11046","full":"gitlab-com/gl-infra/reliability#11046"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":359,"epic":{"id":143730,"iid":359,"title":"Cost Visibility","url":"/groups/gitlab-com/gl-infra/-/epics/359","group_id":1112072},"iteration":null,"health_status":null},{"id":69383079,"iid":11036,"project_id":1304532,"title":"Add support for remote file management through chef roles","description":"Add support for remote file management through chef roles.\n\nSee: https://ops.gitlab.net/gitlab-cookbooks/gitlab-server/-/merge_requests/2","state":"closed","created_at":"2020-08-03T19:39:04.776Z","updated_at":"2022-08-04T12:46:59.053Z","closed_at":"2020-08-04T15:55:36.400Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Infrastructure","chef","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11036","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11036","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11036/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11036/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11036","relative":"#11036","full":"gitlab-com/gl-infra/reliability#11036"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69382125,"iid":11035,"project_id":1304532,"title":"Change system-wide default branch name to `main` on GitLab.com","description":"Change system-wide default branch name to `main` on GitLab.com.\n\nSee discussion at: https://gitlab.com/gitlab-org/gitlab/-/issues/221013\n\n/cc @danielgruesso","state":"closed","created_at":"2020-08-03T18:55:04.728Z","updated_at":"2022-08-04T12:46:59.720Z","closed_at":"2021-05-14T12:57:07.022Z","closed_by":{"id":116,"username":"marin","name":"Marin Jankovski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5154f0b0eda3f798c8a254962d57192f?s=80\u0026d=identicon","web_url":"https://gitlab.com/marin"},"labels":["Infrastructure","configuration","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11035","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11035","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11035/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11035/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11035","relative":"#11035","full":"gitlab-com/gl-infra/reliability#11035"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69370978,"iid":11033,"project_id":1304532,"title":"Add the database user management tooling scripts to the patroni fleet","description":"Add the database user management tooling scripts to the patroni fleet.\n\n- https://gitlab.com/gitlab-com/runbooks/-/blob/nnelson/add-postgresql-database-user-role-utility-scripts-gl-infra-production-1847/scripts/database-gitlab-superuser-session-connection-terminate.sh\n- https://gitlab.com/gitlab-com/runbooks/-/blob/nnelson/add-postgresql-database-user-role-utility-scripts-gl-infra-production-1847/scripts/database-gitlab-superuser-user-role-create.sh\n- https://gitlab.com/gitlab-com/runbooks/-/blob/nnelson/add-postgresql-database-user-role-utility-scripts-gl-infra-production-1847/scripts/database-gitlab-superuser-user-role-password-update.sh","state":"closed","created_at":"2020-08-03T15:20:57.779Z","updated_at":"2022-08-04T12:47:00.884Z","closed_at":"2020-08-05T20:01:51.046Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Service::Postgres","runbook","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11033","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11033","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11033/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11033/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11033","relative":"#11033","full":"gitlab-com/gl-infra/reliability#11033"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69370790,"iid":11032,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file49`","description":"Gitaly storage shard `nfs-file49` (`file-49-stor-gprd.c.gitlab-production.internal`) is at `60.02%` usage as of `2020-08-03`.\n\nUpdate: `64.16%` as of `2020-08-12 1940 utc`\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file49`.\n\nThere are currently 7 gitaly shard nodes configured to accept new projects (`nfs-file48-54`).  Maintaining at least this level of availability is important to avoid any shards filling up too quickly.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent the acceleration of capacity consumption, a new gitaly shard node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-08-03T15:15:05.060Z","updated_at":"2022-08-04T12:47:01.507Z","closed_at":"2020-11-18T19:39:27.784Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["C4","DStores-Backlog::DBOperations","Infrastructure","Service::Gitaly","change","requires production access","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-25","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11032","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11032","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11032/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11032/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11032","relative":"#11032","full":"gitlab-com/gl-infra/reliability#11032"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69370738,"iid":11031,"project_id":1304532,"title":"Create new gitaly storage shard node to replace `nfs-file48`","description":"Gitaly storage shard `nfs-file48` (`file-48-stor-gprd.c.gitlab-production.internal`) is at `62.63%` usage as of `2020-08-03`.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file48`.\n\nThere are currently 7 gitaly shard nodes configured to accept new projects (`nfs-file48-54`).  Maintaining at least this level of availability is important to avoid any shards filling up too quickly.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent the acceleration of capacity consumption, a new gitaly shard node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-08-03T15:13:39.595Z","updated_at":"2022-08-04T12:47:02.191Z","closed_at":"2020-08-12T19:37:41.768Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["C4","DStores-Backlog::DBOperations","Infrastructure","Service::Gitaly","change","requires production access","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11031","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11031","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11031/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11031/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11031","relative":"#11031","full":"gitlab-com/gl-infra/reliability#11031"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69308903,"iid":11020,"project_id":1304532,"title":"Proxy  *.about.gitlab-review.app via Fastly","description":"Currently about.gitlab.com is proxied via Fastly but its review apps, hosted on about.gitlab-review.app, are served directly from the `about-src` server. This means that Fastly-dependent features, like edge redirects, can't be tested currently on the review apps domain, requiring us to use a separate domain (about.staging.gitlab.com). Proxying the review apps domain would allow us to simplify our www-gitlab-com infrastructure.","state":"closed","created_at":"2020-07-31T18:59:04.776Z","updated_at":"2022-08-04T12:47:08.706Z","closed_at":"2020-08-11T22:03:31.428Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["manager_approved","workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":9,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11020","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11020","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11020/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11020/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11020","relative":"#11020","full":"gitlab-com/gl-infra/reliability#11020"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69304900,"iid":11017,"project_id":1304532,"title":"Delete provisioned VM for gl-infra-10957","description":"A VM was provisioned for customer migration.\n\nhttps://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10957\n\nDelete it in a month.\n\nhttps://console.cloud.google.com/compute/instancesDetail/zones/us-east1-c/instances/ps-congregate-10957?project=transient-imports\u0026organizationId=769164969568","state":"closed","created_at":"2020-07-31T16:04:23.411Z","updated_at":"2022-08-04T12:47:11.305Z","closed_at":"2021-12-21T17:13:46.676Z","closed_by":{"id":4090207,"username":"glen_miller","name":"Glen P Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4090207/avatar.png","web_url":"https://gitlab.com/glen_miller"},"labels":["Infrastructure","Service::GCP","auto updated","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-08-30","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11017","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11017","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11017/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11017/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11017","relative":"#11017","full":"gitlab-com/gl-infra/reliability#11017"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69299269,"iid":11013,"project_id":1304532,"title":"Fix wal-g gcs uploads","description":"wal-g gcs uploads are not reliable. See https://github.com/wal-g/wal-g/issues/266 and https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9627#note_377259758.","state":"closed","created_at":"2020-07-31T13:27:49.163Z","updated_at":"2022-08-04T12:47:13.930Z","closed_at":"2020-10-19T17:13:42.367Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["workflow-infra::Done"],"milestone":{"id":1640206,"iid":99,"group_id":1112072,"title":"Datastores team - W43","description":"2 week Milestone - half October-early November - for the Datastores team.","state":"closed","created_at":"2020-09-22T13:16:29.720Z","updated_at":"2020-11-11T23:17:06.282Z","due_date":"2020-11-01","start_date":"2020-10-19","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/99"},"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11013","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11013/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11013/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11013","relative":"#11013","full":"gitlab-com/gl-infra/reliability#11013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":69299009,"iid":11012,"project_id":1304532,"title":"Fix wal-g backup-list sorting","description":"wal-g is sorting backups by modification timestamp instead of creation timestamp - this can lead to taking the wrong backup when using `backup-fetch LATEST`. We should sort by creation timestamp instead.\n\nSee https://github.com/wal-g/wal-g/issues/694.","state":"closed","created_at":"2020-07-31T13:19:50.256Z","updated_at":"2022-09-05T14:03:51.807Z","closed_at":"2022-09-05T13:27:22.723Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Reliability::P4","Service::Postgres","team::Reliability","workflow-infra::Ready"],"milestone":null,"assignees":[],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/11012","time_stats":{"time_estimate":28800,"total_time_spent":0,"human_time_estimate":"8h","human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/11012","notes":"https://gitlab.com/api/v4/projects/1304532/issues/11012/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/11012/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#11012","relative":"#11012","full":"gitlab-com/gl-infra/reliability#11012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":380,"epic":{"id":162885,"iid":380,"title":"WAL-G improvements","url":"/groups/gitlab-com/gl-infra/-/epics/380","group_id":1112072,"human_readable_end_date":"Jul 31, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":57456373,"iid":10846,"project_id":1304532,"title":"RepoStor :: Migrations :: Repos of blocked users : HDD","description":"After conversations with @jramsay I learned that repos of users that have been blocked are not removed, so these would be good targets to move off to HDD.","state":"closed","created_at":"2020-07-14T17:21:22.035Z","updated_at":"2022-08-04T12:48:45.394Z","closed_at":"2020-11-10T16:24:59.158Z","closed_by":{"id":4587775,"username":"davis_townsend","name":"Davis Townsend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ebb933fd506f8541f62b79663bcc834b?s=80\u0026d=identicon","web_url":"https://gitlab.com/davis_townsend"},"labels":["infrapm","workflow-infra::Done"],"milestone":{"id":1682540,"iid":102,"group_id":1112072,"title":"Datastores team - W45","description":"Datastores team, 1st half of November, 14 days.","state":"closed","created_at":"2020-10-19T15:54:43.296Z","updated_at":"2020-11-13T22:23:12.095Z","due_date":"2020-11-15","start_date":"2020-11-02","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/102"},"assignees":[],"author":{"id":4587775,"username":"davis_townsend","name":"Davis Townsend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ebb933fd506f8541f62b79663bcc834b?s=80\u0026d=identicon","web_url":"https://gitlab.com/davis_townsend"},"type":"ISSUE","assignee":null,"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-11-11","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10846","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10846","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10846/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10846/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10846","relative":"#10846","full":"gitlab-com/gl-infra/reliability#10846"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":57053756,"iid":10841,"project_id":1304532,"title":"Use `general-public-splashscreen` as the default start page on dashboards.GitLab.com","description":"I'd like to switch the default dashboard on our public grafana instance over to this:\n\nhttps://dashboards.gitlab.com/d/general-public-splashscreen/general-gitlab-dashboards?orgId=1\n\n![image](/uploads/812ecc3ff84854d3222f4827f496da81/image.png)\n\nWhy:\n\n1. Key ARES (apdex, request-per-second, error rate and saturation) metrics for our key public-facing services.\n1. Service status descriptions for each service (healthy, warning, degraded). \n1. Maintained in Git\n\n@bjk-gitlab wdyt?","state":"closed","created_at":"2020-07-14T11:20:48.609Z","updated_at":"2020-08-18T08:36:36.229Z","closed_at":"2020-07-14T12:02:00.844Z","closed_by":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"labels":["unscheduled","workflow-infra::Done"],"milestone":{"id":1341118,"iid":87,"group_id":1112072,"title":"Observability Team - W29 2020","description":"[Sprint Board](https://gitlab.com/groups/gitlab-com/gl-infra/-/boards/1677278?milestone_title=Observability%20Team%20-%20W29%202020)\r\n\r\n## Focus\r\n\r\n- Long Term Logging Strategy\r\n- Continued Alertmanager and pubsubbeats migrations to Kubernetes\r\n\r\n## Calendar\r\n\r\n| _W29 working days: 13_ | M 13 Jul | T 14 Jul | W 15 Jul | Th 16 Jul  | F 17 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | - | - | - | - | -\r\n| @cindy | :pager: | :wrench: | :wrench: | :wrench: | :wrench:\r\n| @craigf | - | - | - | - | :palm_tree:\r\n| @igorwwwwwwwwwwwwwwwwwwww | - | :pager: | :pager: | :pager: | :pager:\r\n| @msmiley | - | :pager: | :pager: | :pager: | :pager:\r\n| @mwasilewski-gitlab | - | - | :baby: | :baby: | :baby:\r\n\r\n| _W30 working days: 8_ | M 20 Jul | T 21 Jul | W 22 Jul | Th 23 Jul  | F 24 Jul\r\n|-------------|----------|----------|----------|----------- |----------\r\n| @bjk-gitlab | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree: | :palm_tree:\r\n| @cindy | - | - | - | - | -\r\n| @craigf | - | :pager: | :pager: | :pager: | :pager:\r\n| @igorwwwwwwwwwwwwwwwwwwww | :pager: | :wrench: | :wrench: | :wrench: | :wrench:\r\n| @msmiley | :pager: | :wrench: | :wrench: | :wrench: | :wrench:\r\n| @mwasilewski-gitlab | :baby: | :baby: | :baby: | :baby: | :baby:\r\n\r\n---\r\n\r\n**Total working days: 21**\r\n\r\n## Issues\r\n\r\n| INDEX |                                      TITLE                                       |                                ISSUE                                 |            WORKFLOW             |\r\n|-------|----------------------------------------------------------------------------------|----------------------------------------------------------------------|---------------------------------|\r\n|     0 | ~~Investigate failing rule evaluations~~                                             | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10819 | ~\"workflow-infra::Done\"         |\r\n|     1 | ~~Re-enable Dead Man's Snitch for \"gstg prometheus\", if needed~~                   | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10806 | ~\"workflow-infra::Done\"      |\r\n|     2 | Gitaly: Log cumulative per-request rusage (\"command stats\")                      | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10790 | ~\"workflow-infra::Under Review\" |\r\n|     3 | Ruby CPU profiling (and flamegraphs) in production                               | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10789 | ~\"workflow-infra::Under Review\" |\r\n|     4 | Shard rules per Prometheus shard                                                 | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10788 | ~\"workflow-infra::Ready\"        |\r\n|     5 | Route non-prod alerts to separate slack channel                                  | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10778 | ~\"workflow-infra::Triage\"       |\r\n|     6 | Resize production logging cluster                                                | https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2385      | ~\"workflow-infra::Ready\"        |\r\n|     7 | Upgrade to td-agent 4                                                            | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10752 | ~\"workflow-infra::Triage\"       |\r\n|     8 | Capture kibana request logs for analysis                                         | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10740 | ~\"workflow-infra::Ready\"        |\r\n|     9 | How did the v1beta1 BackendConfig CRD get installed on the ops cluster, and wher | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10731 | ~\"workflow-infra::Triage\"       |\r\n|    10 | Runbooks need to trigger alertmanager k8s updates                                | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10725 | ~\"workflow-infra::Triage\"       |\r\n|    11 | Enable Trickster as datasource for internal dashboards                           | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10722 | ~\"workflow-infra::Triage\"       |\r\n|    12 | customers.GitLab.com should have Prometheus monitoring                           | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10717 | ~\"workflow-infra::Triage\"       |\r\n|    13 | Install bpftrace                                                                 | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10716 | ~\"workflow-infra::Ready\"        |\r\n|    14 | Add a few more generic host-level ad hoc observability utilities to all chef-man | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10714 | ~\"workflow-infra::Ready\"        |\r\n|    15 | reduce the size of the hot nodes fleet                                           | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10697 | ~\"workflow-infra::In Progress\"  |\r\n|    16 | Create convenience script to capture perf-record and make flamegraph output      | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10592 | ~\"workflow-infra::Ready\"        |\r\n|    17 | Igor Wiedler - On-call Onboarding                                                | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10579 | ~\"workflow-infra::In Progress\"  |\r\n|    18 | Install rbspy via chef                                                           | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10554 | ~\"workflow-infra::Ready\"        |\r\n|    19 | Add Elasticsearch timing to \"Rails Controller\" dashboard                         | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10509 | ~\"workflow-infra::Ready\"        |\r\n|    20 | Update SSL cert for user-content.gitlab-static.net                               | https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2238      | ~\"workflow-infra::In Progress\"  |\r\n|    21 | Write tutorial - How to use flamegraphs for performance profiling                | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10399 | ~\"workflow-infra::Ready\"        |\r\n|    22 | Write tutorial -  Life of a git request                                          | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10389 | ~\"workflow-infra::In Progress\"  |\r\n|    23 | Add Slack staging alert for customers.stg.gitlab.com                             | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10327 | ~\"workflow-infra::Ready\"        |\r\n|    24 | CI Runner Duration Dashboard.                                                    | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10313 | ~\"workflow-infra::Triage\"       |\r\n|    25 | Update Cloudflare alerts                                                         | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10294 | ~\"workflow-infra::Ready\"        |\r\n|    26 | Write a style guide and starter templates for infra tutorials                    | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10291 | ~\"workflow-infra::Under Review\" |\r\n|    27 | Create an infrastructure tutorials section in the runbooks repository            | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10290 | ~\"workflow-infra::Under Review\" |\r\n|    28 | Adjust node disk IO quota metrics to be per node, not per device                 | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10248 | ~\"workflow-infra::Ready\"        |\r\n|    29 | Alert when jobs are not being processed by sidekiq                               | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10242 | ~\"workflow-infra::Ready\"        |\r\n|    30 | long-term plan for logging                                                       | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10095 | ~\"workflow-infra::In Progress\"  |\r\n|    31 | `ElasticCloud Watcher: gitaly_abuse_1` triggered with empty project names        | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10007 | ~\"workflow-infra::Ready\"        |\r\n|    32 | Fix assorted persistent prometheus scrape errors                                 | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9106  | ~\"workflow-infra::Triage\"       |\r\n|    33 | move pubsubbeats to k8s                                                          | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8962  | ~\"workflow-infra::In Progress\"  |\r\n|    34 | Add alert and monitoring to ops.gitlab.net                                       | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8488  | ~\"workflow-infra::Ready\"        |\r\n|    35 | Create new Grafana dashboard git backup                                          | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/7788  | ~\"workflow-infra::In Progress\"  |\r\n|    36 | Create database for GKE Grafana service                                          | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/7787  | ~\"workflow-infra::Ready\"        |\r\n|    37 | Create Elastic Search mappings for IP address log fields in ES Cloud for pubsub  | https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/4689  | ~\"workflow-infra::Triage\"       |\r\n","state":"closed","created_at":"2020-06-25T19:31:02.874Z","updated_at":"2020-07-24T19:46:11.112Z","due_date":"2020-07-24","start_date":"2020-07-13","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/87"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10841","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10841","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10841/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10841/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10841","relative":"#10841","full":"gitlab-com/gl-infra/reliability#10841"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":55804436,"iid":10830,"project_id":1304532,"title":"Demonstrate runbook to add PgBouncer instances","description":"Demonstrate https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/pgbouncer/pgbouncer-add-instance.md\n\n- Creating a PgBouncer Read-Write node:\n  - https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/-/merge_requests/1925\n  - https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/merge_requests/3882\n- Creating a PgBouncer Read-Only instance:\n  - https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/merge_requests/3883","state":"closed","created_at":"2020-07-13T18:35:31.167Z","updated_at":"2021-06-24T08:07:31.269Z","closed_at":"2020-07-20T22:22:55.732Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":{"id":1308306,"iid":84,"group_id":1112072,"title":"Datastores Team - July 2020","description":"July milestone for the Datastores team","state":"closed","created_at":"2020-06-02T09:52:39.656Z","updated_at":"2020-09-15T06:17:02.011Z","due_date":"2020-07-24","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/84"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"}],"author":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10830","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10830/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10830/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10830","relative":"#10830","full":"gitlab-com/gl-infra/reliability#10830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":55752141,"iid":10828,"project_id":1304532,"title":"Create #elasticsearch-lab Slack bot for the Elasticsearch API","description":"The idea is to replicate the success of the `#database-lab` Slack channel but instead for the Elasticsearch index instead of the database.\n\n### What would it look like\n\nThere would be a new app in Slack that has read-only access to our Elasticsearch index (`grpd`) and would profile/validate the query sent to it, redacting any matching documents.\n\nThe bot would then issue the query, and upload the redacted response to the channel as a file upload. Some metadata (like the **query time**, the **result count**, etc) could be shown directly in the bot's response. \n\n### Why would this be useful\n\nAs the usage of the Advanced Search ramps up, we will have to diagnose more slow queries and test improvements, such as https://gitlab.com/gitlab-org/gitlab/-/issues/225998\n\n### Implementation\n\n  - [ ] Do a security review of the Elasticsearch Profile API to ensure the data safety\n  - [ ] Create a Slack application to manage the Elasticsearch calls\n  - [ ] Add the application to our Slack workplace \n\n### References\n\n  - Elasticsearch Validate API: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-validate.html\n  - Elasticsearch Explain API: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-explain.html\n  - Elasticsearch Profile API: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-profile.html\n  - Slack's File API: https://api.slack.com/messaging/files/setup)","state":"closed","created_at":"2020-07-13T17:40:00.049Z","updated_at":"2022-08-04T12:48:55.406Z","closed_at":"2022-08-02T06:01:29.426Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":" GitLab Bot ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["workflow-infra::Done"],"milestone":{"id":1331497,"iid":208,"group_id":6543,"title":"13.3","description":"","state":"active","created_at":"2020-06-19T05:42:41.074Z","updated_at":"2020-06-19T05:42:41.074Z","due_date":"2020-08-17","start_date":"2020-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/-/milestones/208"},"assignees":[],"author":{"id":1491026,"username":"mbergeron","name":"Mical Bergeron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1491026/avatar.png","web_url":"https://gitlab.com/mbergeron"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10828","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10828","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10828/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10828/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10828","relative":"#10828","full":"gitlab-com/gl-infra/reliability#10828"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":54313901,"iid":10809,"project_id":1304532,"title":"Revert MR - Remove postgresql-9.6-repack extension package from the production patroni fleet","description":"[This MR to `remove postgresql-9.6-repack extension package from the production patroni fleet`](https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/merge_requests/3866) should be reverted, that way, the `remove_package` directive which has become useless post-removal, will no longer be unnecessarily codified going forward.","state":"closed","created_at":"2020-07-10T19:56:06.484Z","updated_at":"2022-08-04T12:49:12.366Z","closed_at":"2020-07-15T17:55:32.249Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["chef","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-07-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10809","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10809","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10809/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10809/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10809","relative":"#10809","full":"gitlab-com/gl-infra/reliability#10809"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":54312183,"iid":10808,"project_id":1304532,"title":"Revert MR - Remove postgresql-9.6-repack extension package on the staging patroni fleet","description":"[This MR to `remove postgresql-9.6-repack extension package from the staging patroni fleet`](https://ops.gitlab.net/gitlab-cookbooks/chef-repo/-/merge_requests/3869) should be reverted, that way, the `remove_package` directive which has become useless post-removal, will no longer be unnecessarily codified going forward.","state":"closed","created_at":"2020-07-10T19:13:23.344Z","updated_at":"2022-08-04T12:49:12.896Z","closed_at":"2020-07-15T14:51:58.335Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["chef","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-07-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10808","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10808","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10808/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10808/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10808","relative":"#10808","full":"gitlab-com/gl-infra/reliability#10808"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":54163469,"iid":10791,"project_id":1304532,"title":"Set up a GCS bucket for serving `gitlab-docs` Review Apps","description":"Similarly to https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8203#note_243150421, we'd like to host documentations Review Apps in a GCS bucket served through Cloudflare.\n\nThe setup should almost the same as for `www-gitlab-com` Review Apps.\n\n- The domain would be `*.docs.gitlab-review.app` and managed in https://ops.gitlab.net/gitlab-com/gitlab-com-infrastructure/-/blob/master/environments/dns/gitlab_review_app.auto.tfvars.json#L59-66.\n- The GCS bucket should probably be under **Marketing \u003e Documentation** (similarly to https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8203#note_246351579).\n- The CI config for https://gitlab.com/gitlab-org/gitlab-docs should be updated similarly to https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/35869/diffs.\n\nRelated to https://gitlab.com/gitlab-org/gitlab-docs/-/issues/735.\n\n/cc @kwiebers @axil \n\n/cc @alejandro since you worked on https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/8203 and https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/35869.","state":"closed","created_at":"2020-07-09T13:23:04.437Z","updated_at":"2022-08-04T12:49:22.271Z","closed_at":"2020-07-31T20:46:13.197Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["workflow-infra::Done"],"milestone":null,"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10791","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10791","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10791/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10791/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10791","relative":"#10791","full":"gitlab-com/gl-infra/reliability#10791"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":54077923,"iid":10770,"project_id":1304532,"title":"Monitor CloudSQL performance","description":"As https://gitlab.com/gitlab-org/gitlab/-/issues/227215  (see also https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2383) showed, we probably need to monitor CloudSQL performance, at least for the praefect DB but possibly others as well.  Extended CPU usage above some quite high limit (90%?) is likely a sign that Something Is Wrong and needs attention, and we would have saved a lot of investigation time and delays if we'd had this as a metric that was alerting earlier.\n\n/cc @alejandro this might be something you want to take a look at?","state":"closed","created_at":"2020-07-08T04:52:57.981Z","updated_at":"2021-06-24T08:07:33.030Z","closed_at":"2020-07-27T22:35:41.001Z","closed_by":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"labels":["Service::Praefect","corrective action","workflow-infra::Done"],"milestone":{"id":1308306,"iid":84,"group_id":1112072,"title":"Datastores Team - July 2020","description":"July milestone for the Datastores team","state":"closed","created_at":"2020-06-02T09:52:39.656Z","updated_at":"2020-09-15T06:17:02.011Z","due_date":"2020-07-24","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/84"},"assignees":[{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"}],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":{"id":367626,"username":"alejandro","name":"Alejandro Rodrguez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/367626/avatar.png","web_url":"https://gitlab.com/alejandro"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10770","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10770","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10770/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10770/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10770","relative":"#10770","full":"gitlab-com/gl-infra/reliability#10770"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":53868182,"iid":10725,"project_id":1304532,"title":"Runbooks need to trigger alertmanager k8s updates","description":"The runbooks repo updates the alertmanager config via pushing a file to GCS. This also needs to trigger an update process to update the config in GKE.\n\nSome options include:\n\n* Trigger a deploy/reload of some kind.\n* Directly push a config map change.","state":"closed","created_at":"2020-07-03T08:01:54.389Z","updated_at":"2020-08-04T08:03:06.489Z","closed_at":"2020-07-30T11:50:16.511Z","closed_by":{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"},"labels":["priority::2","workflow-infra::Done"],"milestone":{"id":1380223,"iid":92,"group_id":1112072,"title":"Observability Team - FY21-Q3","description":"","state":"closed","created_at":"2020-07-24T19:07:22.800Z","updated_at":"2020-11-02T23:56:39.868Z","due_date":"2020-10-30","start_date":"2020-08-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/92"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},{"id":3911656,"username":"craigf","name":"Craig Furman","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3911656/avatar.png","web_url":"https://gitlab.com/craigf"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10725","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10725","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10725/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10725/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10725","relative":"#10725","full":"gitlab-com/gl-infra/reliability#10725"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":234,"epic":{"id":50155,"iid":234,"title":"Migrate alertmanager to kubernetes","url":"/groups/gitlab-com/gl-infra/-/epics/234","group_id":1112072,"human_readable_end_date":"Aug 5, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":128,"iid":1,"sequence":1,"group_id":1112072,"title":"2020 W31 - Observability Team","description":"# Nothing to present. \n\n## Markdown rendering is currently broken. Please click through to \nhttps://gitlab.com/-/snippets/1998684.\n","state":3,"created_at":"2020-07-21T16:41:19.392Z","updated_at":"2020-07-27T15:05:58.211Z","start_date":"2020-07-27","due_date":"2020-08-07","web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/iterations/128"},"health_status":null},{"id":50152574,"iid":10682,"project_id":1304532,"title":"Create new gitaly storage shard node `file-54-stor-gprd` to replace `file-47-stor-gprd` in the configured rotation for storing new projects","description":"Gitaly storage shard `nfs-file47` (`file-47-stor-gprd.c.gitlab-production.internal`) is at `89.53%` usage as of `2020-07-10`.\n\nOur usage targets specify that we try to maintain usage between 65-79%.  New project creation would quickly cause more usage than that on `nfs-file47`.\n\nThere are currently 7 gitaly shard nodes configured to accept new projects.  Maintaining at least this level of availability is important to avoid any shards filling up too quickly.\n\nTo remove a single node from the new projects storage rotation cluster, and also prevent usage acceleration, a new gitaly node should be created and added to the list of shards configured in the GitLab Application to store new project repositories.\n\n[Create a production change issue for this, using the `storage_shard_creation` template: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/new?issuable_template=storage_shard_creation)","state":"closed","created_at":"2020-06-27T05:14:11.182Z","updated_at":"2022-08-04T12:50:25.776Z","closed_at":"2020-07-22T20:23:50.459Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["workflow-infra::Done"],"milestone":{"id":1308306,"iid":84,"group_id":1112072,"title":"Datastores Team - July 2020","description":"July milestone for the Datastores team","state":"closed","created_at":"2020-06-02T09:52:39.656Z","updated_at":"2020-09-15T06:17:02.011Z","due_date":"2020-07-24","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/84"},"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-07-10","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10682","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10682","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10682/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10682/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10682","relative":"#10682","full":"gitlab-com/gl-infra/reliability#10682"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":50122720,"iid":10680,"project_id":1304532,"title":"Implement locking mechanism for database backups","description":"We want to [run WAL-G backup push only from one of the Patroni replicas](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/9627). But manually designating a node for running backups is problematic:\n\n* It needs to be manually adjusted again in case of a failover\n* Designating a \"special\" node isn't elegant\n* Backups would stop working if the \"special\" node goes down\n\nProposal:\n\nThe replicas regularly try to acquire a lock (with a TTL) in consul and only the lock holder is running backup-push.\nThis lock also is used to run wal-push from a replica in the transition period from wal-e to wal-g.\n\n* a cron-job on each replica tries to acquire the lock every minute\n* the lock holder creates a local lock file (so other processes, like `archive_command`, don't need to query consul several times per second)\n* the lock cronjob and backup-push script also check if they run on the primary and release the lock/lock-file in that case\n* there is a 1 minute time window for race conditions in case of failover, where wal-push could run from 2 nodes in parallel for a minute, but WAL-G should have no issue with that (should test though)","state":"closed","created_at":"2020-06-26T11:53:27.465Z","updated_at":"2020-07-16T08:58:44.868Z","closed_at":"2020-07-16T08:58:44.795Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["Service::Postgres","workflow-infra::Done"],"milestone":{"id":1308306,"iid":84,"group_id":1112072,"title":"Datastores Team - July 2020","description":"July milestone for the Datastores team","state":"closed","created_at":"2020-06-02T09:52:39.656Z","updated_at":"2020-09-15T06:17:02.011Z","due_date":"2020-07-24","start_date":"2020-06-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/84"},"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10680","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10680","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10680/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10680/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10680","relative":"#10680","full":"gitlab-com/gl-infra/reliability#10680"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":50113426,"iid":10679,"project_id":1304532,"title":"Decommission `ops-gitlab-net` ES cluster","description":"~~The ops-gitlab-net cluster is the only one which is still on 6.x . 6.x is EOL so we should upgrade it to 7.x~~\n\nSearch indexing on ops.gitlab.net is not used. We've disabled the feature and can safely reomve the `ops-gitlab-net` deployment from our Elastic Cloud account.","state":"closed","created_at":"2020-06-26T09:05:03.165Z","updated_at":"2020-09-29T09:40:14.625Z","closed_at":"2020-09-29T09:40:02.255Z","closed_by":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"labels":["Service::Logging","priority::3","workflow-infra::Done"],"milestone":{"id":1380223,"iid":92,"group_id":1112072,"title":"Observability Team - FY21-Q3","description":"","state":"closed","created_at":"2020-07-24T19:07:22.800Z","updated_at":"2020-11-02T23:56:39.868Z","due_date":"2020-10-30","start_date":"2020-08-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/92"},"assignees":[{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"type":"ISSUE","assignee":{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-10-02","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10679","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10679","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10679/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10679/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10679","relative":"#10679","full":"gitlab-com/gl-infra/reliability#10679"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":50082769,"iid":10673,"project_id":1304532,"title":"Investigate initial DNS settings on nodes in GCP and eliminate gaps in resolv.conf settings.","description":"[Reference Incident](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2327)\n\nOne hypothesis from the incident was that pgbouncer will time-out cached zone records, but it won't re-read the DNS information on what upstream provider to use for resolution. This would mean that if a GCP nodes starts and the resolv.conf specifies (for example) the default Google DNS information from DHCP until our dnsmasq information in in place, pgbouncer might keep trying to query the Google DNS instead of the local dnsmasq service.\n\nAcceptance Criterea:\n1. Is this hypothesis correct?\n1. If so, can we prevent the DNS gap from occuring?","state":"closed","created_at":"2020-06-25T14:48:15.078Z","updated_at":"2022-08-04T12:50:33.368Z","closed_at":"2021-09-20T15:06:51.152Z","closed_by":{"id":8814797,"username":"amoter","name":"Anna Liisa Moter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8814797/avatar.png","web_url":"https://gitlab.com/amoter"},"labels":["auto updated","corrective action","severity::4","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10673","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10673","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10673/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10673/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10673","relative":"#10673","full":"gitlab-com/gl-infra/reliability#10673"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":50031592,"iid":10657,"project_id":1304532,"title":"WAL-G backup failing in ops","description":"WalG backups have been failing since May 21.\n\nSee [Thanos data](https://thanos-query.ops.gitlab.net/graph?g0.range_input=5w\u0026g0.end_input=2020-06-24%2014%3A00\u0026g0.max_source_resolution=auto\u0026g0.expr=gitlab_com%3Alast_walg_successful_basebackup_age_in_hours%20%3E%3D%2048\u0026g0.tab=0)","state":"closed","created_at":"2020-06-24T13:58:56.513Z","updated_at":"2020-08-07T15:01:56.801Z","closed_at":"2020-08-07T15:01:56.758Z","closed_by":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"labels":["workflow-infra::Done"],"milestone":{"id":1344468,"iid":88,"group_id":1112072,"title":"Datastores Team - Aug 2020","description":"Not actually Aub, but sort of: It'll cover between 27th July till 23th August (Sunday), both inclusive.","state":"closed","created_at":"2020-06-29T08:42:44.192Z","updated_at":"2021-01-06T15:06:09.784Z","due_date":"2020-08-23","start_date":"2020-07-27","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/88"},"assignees":[{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"}],"author":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"type":"ISSUE","assignee":{"id":506061,"username":"ahmadsherif","name":"Ahmad Sherif","state":"active","avatar_url":"https://secure.gravatar.com/avatar/bd6d0ec4213b91601956c9f801cbfe9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahmadsherif"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10657","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10657","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10657/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10657/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10657","relative":"#10657","full":"gitlab-com/gl-infra/reliability#10657"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":49918227,"iid":10634,"project_id":1304532,"title":"Dial down our `global_search` sidekiq fleet concurrency","description":"A request has been made to dial down our `global_search` sidekiq fleet concurrency because our elasticsearch (advanced global search) cluster is overloaded.\n\nhttps://gitlab.slack.com/archives/C101F3796/p1592846811423200\n\n![Screenshot_2020-06-22_at_20.28.03](/uploads/7ba9ce9c14849ca95d5a23d6430c51e6/Screenshot_2020-06-22_at_20.28.03.png)","state":"closed","created_at":"2020-06-22T17:29:46.263Z","updated_at":"2022-08-04T12:50:59.767Z","closed_at":"2020-06-22T18:22:36.289Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Service::Elasticsearch","elasticsearch","group::global search","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-06-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10634","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10634","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10634/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10634/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10634","relative":"#10634","full":"gitlab-com/gl-infra/reliability#10634"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":49866678,"iid":10622,"project_id":1304532,"title":"Deploys are broken in customers.gitlab.com","description":"It appears that the last few MRs that merged to `master` in https://gitlab.com/gitlab-org/customers-gitlab-com didn't get deployed to customers.gitlab.com.  The last commit that was deployed was [this one](https://gitlab.com/gitlab-org/customers-gitlab-com/-/commit/63d3fee5ea8fc9f365776c56cf081f12feddad5d).  It appears that this stopped working late on Friday, June 19th.\n\nI don't know much about the specifics for how the deploys work but I think it has to do with a problem with the chef-client.  There is a lot of chef related warnings and errors in `/var/log/syslog`, but maybe this snippet is helpful:\n```\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: ================================================================================#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[31mRecipe Compile Error in /var/chef/cache/cookbooks/gitlab_walg/recipes/default.rb#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: ================================================================================#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mMixlib::ShellOut::ShellCommandFailed#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: ------------------------------------#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: Expected process to exit with [0], but received '1'\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m---- Begin output of gsutil cp gs://gitlab-ops-secrets/gitlab-walg/ops.enc - | gcloud kms decrypt       --keyring=gitlab-secrets       --key=ops       --location=global       --plaintext-file=-       --ciphertext-file=- ----\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mSTDOUT:\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mSTDERR: ServiceException: 401 Anonymous caller does not have storage.objects.get access to the Google Cloud Storage object.\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mERROR: (gcloud.kms.decrypt) The required property [project] is not currently set.\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mYou may set it for your current workspace by running:\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m  $ gcloud config set project VALUE\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mor it can be set temporarily by the environment variable [CLOUDSDK_CORE_PROJECT]\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m---- End output of gsutil cp gs://gitlab-ops-secrets/gitlab-walg/ops.enc - | gcloud kms decrypt       --keyring=gitlab-secrets       --key=ops       --location=global       --plaintext-file=-       --ciphertext-file=- ----\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mRan gsutil cp gs://gitlab-ops-secrets/gitlab-walg/ops.enc - | gcloud kms decrypt       --keyring=gitlab-secrets       --key=ops       --location=global       --plaintext-file=-       --ciphertext-file=- returned 1#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0mCookbook Trace:#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: ---------------#033[0m\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]:   /var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:69:in `get'\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m  /var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:87:in `get_secrets'\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m  /var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:98:in `block in merge_secrets'\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m  /var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:94:in `each'\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m  /var/chef/cache/cookbooks/gitlab_secrets/libraries/secrets.rb:94:in `merge_secrets'\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m  /var/chef/cache/cookbooks/gitlab_walg/recipes/walg_env.rb:7:in `from_file'\nJun 20 08:27:07 customers.gitlab.com chef-client[30504]: #033[0m  /var/chef/cache/cookbooks/gitlab_walg/recipes/default.rb:42:in `from_file'#033[0m\n```","state":"closed","created_at":"2020-06-21T02:01:28.995Z","updated_at":"2020-08-24T20:57:46.029Z","closed_at":"2020-06-22T15:48:01.507Z","closed_by":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"labels":["AssistType::CloudInfra","AssistingTeam::Growth\u0026Fullfillment","Unplanned","chef","deploy","oncall","workflow-infra::Done"],"milestone":{"id":1301310,"iid":83,"group_id":1112072,"title":"Core Infra Team - June 2020","description":"Core themes:\r\n1. [Roll out Okta ASA / improved Console Access](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/122)\r\n2. [Increment on secrets management with Vault](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/62)","state":"closed","created_at":"2020-05-27T23:10:12.172Z","updated_at":"2020-07-07T23:38:37.667Z","due_date":"2020-06-26","start_date":"2020-05-29","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/83"},"assignees":[{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10622","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10622","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10622/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10622/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10622","relative":"#10622","full":"gitlab-com/gl-infra/reliability#10622"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":49856734,"iid":10621,"project_id":1304532,"title":"CA for Redis cluster gitlab is missing instances in ops environment","description":"This issue tracks work to make corrective actions for \"`Redis cluster gitlab is missing instances in ops environment`\" alert.\n\nIt was recommended to remove the alert entirely, since there is already an alert definition for an existing instance going down. (https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2405#note_364993343)\n\nIncident issue: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/2293\n\nMR to remove alert rule: https://gitlab.com/gitlab-com/runbooks/-/merge_requests/2405","state":"closed","created_at":"2020-06-20T14:14:48.799Z","updated_at":"2022-08-04T12:51:09.314Z","closed_at":"2021-06-16T18:27:43.561Z","closed_by":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"labels":["Alerting","auto updated","workflow-infra::Done"],"milestone":null,"assignees":[{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"}],"author":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"type":"ISSUE","assignee":{"id":4006601,"username":"nnelson","name":"Nels Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4006601/avatar.png","web_url":"https://gitlab.com/nnelson"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10621","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10621","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10621/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10621/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10621","relative":"#10621","full":"gitlab-com/gl-infra/reliability#10621"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":49310256,"iid":10614,"project_id":1304532,"title":"Write runbook for Project Export","description":"We should have a runbook for manual project exports. \n\nWhile working on https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/10598 we found several ways how exports can fail, which also should be documented together with possible solutions.","state":"closed","created_at":"2020-06-19T13:23:10.331Z","updated_at":"2020-07-06T12:19:15.544Z","closed_at":"2020-07-06T12:19:15.499Z","closed_by":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"labels":["SRE:On-call","oncall","team::Reliability","workflow-infra::Done"],"milestone":null,"assignees":[{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10614","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10614","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10614/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10614/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10614","relative":"#10614","full":"gitlab-com/gl-infra/reliability#10614"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":47057779,"iid":10591,"project_id":1304532,"title":"Enable access logging for gitlab-runner-custom-fargate-downloads S3 bucket","description":"The Runner group would love to be able to gauge how much interest there is in our new AWS Fargate driver. The simplest way to do so would be to track downloads from the S3 bucket at https://gitlab-runner-custom-fargate-downloads.s3.amazonaws.com/master/index.html\n\nThis issue is to request enabling access request logging so that we can then parse the data to see how many downloads of the driver there are.\n\nFYI @gitlab-com/gl-infra/managers\n\nCC @DarrenEastman","state":"closed","created_at":"2020-06-17T21:57:01.387Z","updated_at":"2022-09-01T01:30:54.236Z","closed_at":"2022-09-01T01:30:54.222Z","closed_by":{"id":10167447,"username":"afappiano","name":"Anthony Fappiano","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10167447/avatar.png","web_url":"https://gitlab.com/afappiano"},"labels":["AssistType::CloudInfra","AssistingTeam::Development","Core-Infra::P2","Reliability::P4","Unplanned","team::Reliability"],"milestone":null,"assignees":[],"author":{"id":2469083,"username":"erushton","name":"Elliot Rushton","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/4194662ce4a5b5f53e61689fd7a2daf9?s=80\u0026d=identicon","web_url":"https://gitlab.com/erushton"},"type":"ISSUE","assignee":null,"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10591","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10591","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10591/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10591/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10591","relative":"#10591","full":"gitlab-com/gl-infra/reliability#10591"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":46811018,"iid":10588,"project_id":1304532,"title":"License Database Extract","description":"Hi @Finotto \u0026 @gerardo.herzig\n\nCreated this issue to request a license DB extract as from the [hand book](https://about.gitlab.com/handbook/business-ops/data-team/data-infrastructure/#license-db)\n\nCommand required below:\n\n`pg_dump -Fp --no-owner --no-acl license_gitlab_com_production | sed -E 's/(DROP|CREATE|COMMENT ON) EXTENSION/-- \\1 EXTENSION/g' \u003e S{DUMPFILE}`\n\nThanks so much again :thumbsup:","state":"closed","created_at":"2020-06-17T17:41:39.375Z","updated_at":"2022-08-04T12:51:38.806Z","closed_at":"2020-06-19T10:09:39.689Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},{"id":3007633,"username":"gerardo.herzig","name":"Gerardo Herzig","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3007633/avatar.png","web_url":"https://gitlab.com/gerardo.herzig"}],"author":{"id":5618371,"username":"paul_armstrong","name":"Paul Armstrong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5618371/avatar.png","web_url":"https://gitlab.com/paul_armstrong"},"type":"ISSUE","assignee":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10588","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10588","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10588/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10588/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10588","relative":"#10588","full":"gitlab-com/gl-infra/reliability#10588"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":46808291,"iid":10586,"project_id":1304532,"title":"Export version database for loading into warehouse","description":"Runbook https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/uncategorized/cloudsql-data-export.md","state":"closed","created_at":"2020-06-17T17:39:20.658Z","updated_at":"2020-12-02T19:45:17.093Z","closed_at":"2020-06-17T23:25:29.658Z","closed_by":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"labels":["Service::Version","toil","workflow-infra::Done"],"milestone":null,"assignees":[{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"}],"author":{"id":5618371,"username":"paul_armstrong","name":"Paul Armstrong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5618371/avatar.png","web_url":"https://gitlab.com/paul_armstrong"},"type":"ISSUE","assignee":{"id":2336046,"username":"devin","name":"Devin Sylva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/424b025122218e9a586245e301c1c725?s=80\u0026d=identicon","web_url":"https://gitlab.com/devin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10586","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10586","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10586/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10586/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10586","relative":"#10586","full":"gitlab-com/gl-infra/reliability#10586"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":44840332,"iid":10568,"project_id":1304532,"title":"Review the latest switchover experience, consider possible improvements for future","description":"@Finotto and @hphilipps mentioned that switchover and restart of all replicas performed (successfully) last weekend (started at 23:12 UTC 2020-06-13) caused increased load during ~30 minutes.\n\nhttps://dashboards.gitlab.net/d/patroni-main/patroni-overview?panelId=28\u0026fullscreen\u0026orgId=1\u0026from=1592087756529\u0026to=1592093870453\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-sigma=2\n\n![Screen_Shot_2020-06-16_at_00.08.22](/uploads/0e44980eb93d329ba083e58e563579a7/Screen_Shot_2020-06-16_at_00.08.22.png)\n\nhttps://dashboards.gitlab.net/d/patroni-main/patroni-overview?orgId=1\u0026from=1592087756529\u0026to=1592093870453\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-sigma=2\u0026panelId=31\u0026fullscreen\n\n![Screen_Shot_2020-06-16_at_00.08.38](/uploads/4a9cdf94750ec46dc708d5958f4d5659/Screen_Shot_2020-06-16_at_00.08.38.png)\n\n\nError rates significantly increased during that high-CPU period: \n\nhttps://dashboards.gitlab.net/d/000000144/postgresql-overview?panelId=3\u0026fullscreen\u0026orgId=1\u0026from=1592089200000\u0026to=1592092799000\n\n![Screen_Shot_2020-06-16_at_00.12.52](/uploads/d6eb2083f674f1d0d2bb79236915b7c3/Screen_Shot_2020-06-16_at_00.12.52.png)\n\n\nFrom what I see in monitoring, it looked like significant stress to the system, so I think the additional analysis is needed, resulting to some improvements to the procedure in the future.","state":"closed","created_at":"2020-06-16T07:14:15.511Z","updated_at":"2022-08-04T12:51:48.404Z","closed_at":"2020-06-19T13:53:28.604Z","closed_by":{"id":2759709,"username":"Finotto","name":"Jose Finotto","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2759709/avatar.png","web_url":"https://gitlab.com/Finotto"},"labels":["Database","Service::Postgres","workflow-infra::Done"],"milestone":{"id":1300933,"iid":82,"group_id":1112072,"title":"Datastores Team - June 2020","description":"Datastores milestone covering our 4 week sprint for the month of June 2020.","state":"closed","created_at":"2020-05-27T17:00:09.379Z","updated_at":"2020-07-23T10:49:57.615Z","due_date":"2020-06-26","start_date":"2020-06-01","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/82"},"assignees":[],"author":{"id":1906296,"username":"NikolayS","name":"Nikolay Samokhvalov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1906296/avatar.png","web_url":"https://gitlab.com/NikolayS"},"type":"ISSUE","assignee":null,"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10568","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10568","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10568/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10568/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10568","relative":"#10568","full":"gitlab-com/gl-infra/reliability#10568"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":43848773,"iid":10560,"project_id":1304532,"title":"Use correct timestamps in elastic search postgres logs","description":"The timestamps in kibana logs for postgres are reflecting the time of ingestion but not the actual time of the log event itself. This makes them to be off by a minute sometimes and being in the wrong order. We should use the first field in the postgres.csv log as a timestamp.","state":"closed","created_at":"2020-06-15T14:49:20.375Z","updated_at":"2020-09-29T12:27:42.135Z","closed_at":"2020-09-29T12:27:42.092Z","closed_by":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"labels":["Service::Postgres","priority::3","team::Reliability","workflow-infra::Done"],"milestone":{"id":1380223,"iid":92,"group_id":1112072,"title":"Observability Team - FY21-Q3","description":"","state":"closed","created_at":"2020-07-24T19:07:22.800Z","updated_at":"2020-11-02T23:56:39.868Z","due_date":"2020-10-30","start_date":"2020-08-03","expired":true,"web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/milestones/92"},"assignees":[{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},{"id":3417286,"username":"mwasilewski-gitlab","name":"Michal Wasilewski","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/2a9fc70321a9df494ecdc8f178df11dd?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwasilewski-gitlab"}],"author":{"id":3059703,"username":"hphilipps","name":"Henri Philipps","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3059703/avatar.png","web_url":"https://gitlab.com/hphilipps"},"type":"ISSUE","assignee":{"id":928230,"username":"bjk-gitlab","name":"Ben Kochie","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/928230/avatar.png","web_url":"https://gitlab.com/bjk-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10560","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10560","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10560/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10560/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10560","relative":"#10560","full":"gitlab-com/gl-infra/reliability#10560"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":649,"iid":4,"sequence":4,"group_id":1112072,"title":"2020 W37 - Observability Team","description":null,"state":3,"created_at":"2020-08-18T14:20:43.022Z","updated_at":"2020-08-18T14:20:43.022Z","start_date":"2020-09-07","due_date":"2020-09-18","web_url":"https://gitlab.com/groups/gitlab-com/gl-infra/-/iterations/649"},"health_status":null},{"id":43416308,"iid":10552,"project_id":1304532,"title":"Configure Flipper HTTP adapter on gitlab.com","description":"## Summary\n\nIn terms of ~Dogfooding, we should use GitLab's [feature flag system](https://docs.gitlab.com/ee/user/project/operations/feature_flags.html) in our [development](https://docs.gitlab.com/ee/development/feature_flags/).\n\nEpic is https://gitlab.com/groups/gitlab-org/-/epics/3367\n\n## TODO\n\nTBD","state":"closed","created_at":"2020-06-15T07:24:44.487Z","updated_at":"2022-08-26T00:02:24.875Z","closed_at":"2022-08-26T00:02:24.567Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":" GitLab Bot ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["devops::release","dogfooding","group::progressive delivery"],"milestone":null,"assignees":[],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10552","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10552","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10552/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10552/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10552","relative":"#10552","full":"gitlab-com/gl-infra/reliability#10552"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":43414649,"iid":10551,"project_id":1304532,"title":"Configure Flipper HTTP adapter on staging.gitlab.com","description":"## Summary\n\nIn terms of ~Dogfooding, we should use GitLab's [feature flag system](https://docs.gitlab.com/ee/user/project/operations/feature_flags.html) in our [development](https://docs.gitlab.com/ee/development/feature_flags/).\n\nEpic is https://gitlab.com/groups/gitlab-org/-/epics/3367\n\n## TODO\n\nTBD","state":"closed","created_at":"2020-06-15T07:23:02.356Z","updated_at":"2022-08-04T12:52:00.224Z","closed_at":"2022-08-02T06:01:42.713Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":" GitLab Bot ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["devops::release","dogfooding","group::progressive delivery","workflow-infra::Done"],"milestone":null,"assignees":[],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-com/gl-infra/reliability/-/issues/10551","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 0 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/1304532/issues/10551","notes":"https://gitlab.com/api/v4/projects/1304532/issues/10551/notes","award_emoji":"https://gitlab.com/api/v4/projects/1304532/issues/10551/award_emoji","project":"https://gitlab.com/api/v4/projects/1304532","closed_as_duplicate_of":null},"references":{"short":"#10551","relative":"#10551","full":"gitlab-com/gl-infra/reliability#10551"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]