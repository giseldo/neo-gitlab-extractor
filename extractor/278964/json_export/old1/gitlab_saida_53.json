[{"id":92653441,"iid":339498,"project_id":278964,"title":"Address require-string-literal-i18n-helpers offenses in app/assets/javascripts/packages/shared/constants.js","description":"\nAddress `require-string-literal-i18n-helpers` offenses in `app/assets/javascripts/packages/shared/constants.js`.\n`__`'s only argument and `s__`'s and `n__`'s first two arguments should only ever be\nstring-literals.\n\n- [ ] Re-enabled `require-string-literal-i18n-helpers` rule in the file.\n- [ ] Addressed all offenses.","state":"closed","created_at":"2021-08-26T16:26:35.359Z","updated_at":"2021-10-28T21:18:13.776Z","closed_at":"2021-10-19T06:54:46.905Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5223956,"username":"imrishabh18","name":"Rishabh Gupta","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5223956/avatar.png","web_url":"https://gitlab.com/imrishabh18"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":5223956,"username":"imrishabh18","name":"Rishabh Gupta","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5223956/avatar.png","web_url":"https://gitlab.com/imrishabh18"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339498","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339498","notes":"https://gitlab.com/api/v4/projects/278964/issues/339498/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339498/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339498","relative":"#339498","full":"gitlab-org/gitlab#339498"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6624,"epic":{"id":333198,"iid":6624,"title":"Fix require-string-literal-i18n-helpers offenses","url":"/groups/gitlab-org/-/epics/6624","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92653438,"iid":339497,"project_id":278964,"title":"Address require-string-literal-i18n-helpers offenses in app/assets/javascripts/packages/details/components/package_history.vue","description":"\nAddress `require-string-literal-i18n-helpers` offenses in `app/assets/javascripts/packages/details/components/package_history.vue`.\n`__`'s only argument and `s__`'s and `n__`'s first two arguments should only ever be\nstring-literals.\n\n- [ ] Re-enabled `require-string-literal-i18n-helpers` rule in the file.\n- [ ] Addressed all offenses.","state":"closed","created_at":"2021-08-26T16:26:31.418Z","updated_at":"2021-10-28T21:17:54.322Z","closed_at":"2021-10-15T08:53:01.755Z","closed_by":{"id":5223956,"username":"imrishabh18","name":"Rishabh Gupta","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5223956/avatar.png","web_url":"https://gitlab.com/imrishabh18"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5223956,"username":"imrishabh18","name":"Rishabh Gupta","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5223956/avatar.png","web_url":"https://gitlab.com/imrishabh18"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":5223956,"username":"imrishabh18","name":"Rishabh Gupta","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5223956/avatar.png","web_url":"https://gitlab.com/imrishabh18"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339497","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339497","notes":"https://gitlab.com/api/v4/projects/278964/issues/339497/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339497/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339497","relative":"#339497","full":"gitlab-org/gitlab#339497"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6624,"epic":{"id":333198,"iid":6624,"title":"Fix require-string-literal-i18n-helpers offenses","url":"/groups/gitlab-org/-/epics/6624","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92653393,"iid":339495,"project_id":278964,"title":"Address require-string-literal-i18n-helpers offenses in app/assets/javascripts/design_management/utils/error_messages.js","description":"\nAddress `require-string-literal-i18n-helpers` offenses in `app/assets/javascripts/design_management/utils/error_messages.js`.\n`__`'s only argument and `s__`'s and `n__`'s first two arguments should only ever be\nstring-literals.\n\n- [x] Re-enabled `require-string-literal-i18n-helpers` rule in the file.\n- [x] Addressed all offenses.","state":"closed","created_at":"2021-08-26T16:24:42.989Z","updated_at":"2021-10-28T13:53:15.501Z","closed_at":"2021-10-11T01:52:06.494Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339495","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339495","notes":"https://gitlab.com/api/v4/projects/278964/issues/339495/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339495/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339495","relative":"#339495","full":"gitlab-org/gitlab#339495"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6624,"epic":{"id":333198,"iid":6624,"title":"Fix require-string-literal-i18n-helpers offenses","url":"/groups/gitlab-org/-/epics/6624","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92652386,"iid":339492,"project_id":278964,"title":"Fix N+1 in environments dashboard list","description":"The below test which checks for a query that would not happen as we have [preloading](https://gitlab.com/gitlab-org/gitlab/-/blob/fd131760359a23fa0575b57f49fdd0e012fa682b/ee/app/services/dashboard/environments/list_service.rb#L26-L42) actually fails.\n\nThis failure seems to indicate that there is a bug in the Serializer `Paginator#paginate` as the resource object passed seems to be reloaded somewhere inside the call.\n\n```diff\ndiff --git a/app/serializers/concerns/with_pagination.rb b/app/serializers/concerns/with_pagination.rb\nindex c8ffae355e8..4e8559a7520 100644\n--- a/app/serializers/concerns/with_pagination.rb\n+++ b/app/serializers/concerns/with_pagination.rb\n@@ -16,6 +16,7 @@ def paginated?\n   # we shouldn't try to paginate single resources\n   def represent(resource, opts = {})\n     if paginated? \u0026\u0026 resource.respond_to?(:page)\n+      # Bug: `paginator.paginate(resource)` is reloading the resource.\n       super(paginator.paginate(resource), opts)\n     else\n       super(resource, opts)\ndiff --git a/ee/spec/serializers/dashboard_environments_serializer_spec.rb b/ee/spec/serializers/dashboard_environments_serializer_spec.rb\nindex 0886c9c3c38..5c5f13bc98d 100644\n--- a/ee/spec/serializers/dashboard_environments_serializer_spec.rb\n+++ b/ee/spec/serializers/dashboard_environments_serializer_spec.rb\n@@ -4,6 +4,19 @@\n\n RSpec.describe DashboardEnvironmentsSerializer do\n   describe '.represent' do\n+    def setup\n+      user = create(:user)\n+      project = create(:project, :repository)\n+      project.add_developer(user)\n+      user.update!(ops_dashboard_projects: [project])\n+\n+      [user, project]\n+    end\n+\n+    before do\n+      stub_licensed_features(operations_dashboard: true)\n+    end\n+\n     it 'returns an empty array when there are no projects' do\n       current_user = create(:user)\n       projects = []\n@@ -23,5 +36,47 @@\n\n       expect(result.first.keys.sort).to eq([:avatar_url, :environments, :id, :name, :namespace, :remove_path, :web_url\n])\n     end\n+\n+    context 'Pagination vs Non Pagination' do\n+      let(:request) { double(url: \"#{Gitlab.config.gitlab.url}:8080/-/operations/environments?#{query.to_query}\", quer\ny_parameters: query) }\n+      let(:response) { spy('response') }\n+      let(:query) { { page: 1, per_page: 1 } }\n+\n+      it 'makes same number of queries with and without pagination' do\n+        current_user, project = setup\n+\n+        pipeline = create(:ci_pipeline, user: current_user, project: project)\n+\n+        build_a = create(:ci_build, user: current_user, project: project, pipeline: pipeline)\n+        build_b = create(:ci_build, user: current_user, project: project, pipeline: pipeline)\n+        build_c = create(:ci_build, user: current_user, project: project, pipeline: pipeline)\n+\n+        environment_a = create(:environment, name: \"a\", project: project, state: :available)\n+        environment_b = create(:environment, name: \"b\", project: project, state: :available)\n+\n+        create(:deployment, project: project, environment: environment_a, status: :success, deployable: build_a)\n+        create(:deployment, project: project, environment: environment_b, status: :success, deployable: build_b)\n+        create(:deployment, project: project, environment: environment_a, status: :failed, deployable: build_c)\n+\n+        preloaded_projects = Dashboard::Environments::ListService.new(current_user).execute\n+\n+        non_paginated_case = ActiveRecord::QueryRecorder.new do\n+          described_class.new(current_user: current_user).represent(preloaded_projects)\n+        end\n+\n+        paginated_case = ActiveRecord::QueryRecorder.new do\n+          described_class.new(current_user: current_user).with_pagination(request, response).represent(preloaded_proje\ncts)\n+        end\n+\n+        validation_query_substring = 'SELECT \"ci_pipelines\".* FROM \"ci_pipelines\" INNER JOIN \"ci_builds\" ON \"ci_pipeli\nnes\".\"id\" = \"ci_builds\".\"commit_id\" INNER JOIN \"deployments\" ON \"ci_builds\".\"id\" = \"deployments\".\"deployable_id\"'\n+\n+        # expect(non_paginated_case.count).eq paginated_case.count\n+\n+        expect(non_paginated_case.occurrences.keys.any? { |query| query.include?(validation_query_substring) }).to be_falsey\n+\n+        # Below case will fail because it is not using the preloaded associations and makes a new association call.\n+        expect(paginated_case.occurrences.keys.any? { |query| query.include?(validation_query_substring) }).to be_falsey\n+      end\n+    end\n   end\n end\n```","state":"closed","created_at":"2021-08-26T16:04:01.533Z","updated_at":"2021-12-21T11:15:21.556Z","closed_at":"2021-12-21T11:15:21.499Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["Category:Environment Management","Deliverable","Release::P2","auto updated","bug::performance","devops::release","group::release","maintenance::refactor","missed-SLO","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339492","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339492","notes":"https://gitlab.com/api/v4/projects/278964/issues/339492/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339492/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339492","relative":"#339492","full":"gitlab-org/gitlab#339492"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92649299,"iid":339486,"project_id":278964,"title":"Change `ci_pipeline_creation_step_duration_tracking` feature flag to ops type","description":"# Context\n\nThe `ci_pipeline_creation_step_duration_tracking` feature flag was added in !68485. It is currently enabled by default. Initially, its purpose was to allow an easy way to disable the pipeline creation step histogram because a situation happened previously where there was a mistake with the labels in a histogram that created problems with Prometheus. However, we have discovered that that there is a significant rate of observations done (10-15 pipelines per second multiplied by 22 pipeline creation steps on GitLab.com), and we know that this histogram is not very useful for users who run their own instances. Therefore, we want to update the feature flag to better serve us.\n\n# Technical details\n\n- [ ] Change the `ci_pipeline_creation_step_duration_tracking` feature flag type to `ops`\n- [ ] Update the flag to be disabled by default\n- [ ] Ensure the flag is enabled on gitlab.com","state":"closed","created_at":"2021-08-26T15:10:45.688Z","updated_at":"2021-10-28T13:53:16.247Z","closed_at":"2021-09-09T01:57:27.697Z","closed_by":{"id":3945330,"username":"seanarnold","name":"Sean Arnold","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0bda1b68a7462959aa82bb63bda9b80?s=80\u0026d=identicon","web_url":"https://gitlab.com/seanarnold"},"labels":["Category:Continuous Integration","backend","devops::verify","feature flag","group::pipeline execution","section::ops","type::maintenance","workflow::ready for development"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3945330,"username":"seanarnold","name":"Sean Arnold","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0bda1b68a7462959aa82bb63bda9b80?s=80\u0026d=identicon","web_url":"https://gitlab.com/seanarnold"},{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":{"id":3945330,"username":"seanarnold","name":"Sean Arnold","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0bda1b68a7462959aa82bb63bda9b80?s=80\u0026d=identicon","web_url":"https://gitlab.com/seanarnold"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339486","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339486","notes":"https://gitlab.com/api/v4/projects/278964/issues/339486/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339486/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339486","relative":"#339486","full":"gitlab-org/gitlab#339486"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92648540,"iid":339483,"project_id":278964,"title":"Add support for quick actions in Content Editor","description":"Add support for quick actions like `/assign`, `/close` `/assign_reviewer` in content editor.\n\nWhen someone types a slash action, a dropdown should appear for suggestions.","state":"closed","created_at":"2021-08-26T14:58:07.026Z","updated_at":"2022-10-13T02:48:52.002Z","closed_at":"2022-10-13T02:48:51.981Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","Stretch","auto updated","feature::addition","frontend","missed:15.2","missed:15.3","type::feature","workflow::ready for development"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339483","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339483","notes":"https://gitlab.com/api/v4/projects/278964/issues/339483/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339483/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339483","relative":"#339483","full":"gitlab-org/gitlab#339483"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7560,"epic":{"id":440671,"iid":7560,"title":"Content Editor Complete Maturity","url":"/groups/gitlab-org/-/epics/7560","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":92640686,"iid":339474,"project_id":278964,"title":"When edit windows-1251 encoded file in Web IDE file opens and commits in UTF-8 encoding","description":"### Summary\n\nWhen edit windows-1251 encoded file in Web IDE file opens and commits in UTF-8 encoding\n* applicable for Self-hosted Omnibus GitLab CE 4.1.2\n\n### Steps to reproduce\n\n1) create file encoded in windows-1251\n2) push file in repository\n3) open file in repo, download it and check encoding (will be windows-1251, as expected)\n4) open file with Web IDE (file already will be opened as UTF-8)\n5) commit changes\n6) download file again and check encoding.. now it is UTF-8\n\n### Example Project\n\nSample project: https://gitlab.com/rootnoir/web-ide-windows-1251-issue/-/tree/main \n\n### What is the current *bug* behavior?\n\nWeb IDE force encoding to UTF-8\n\n### What is the expected *correct* behavior?\n\nWeb IDE keeps original file's encoding","state":"closed","created_at":"2021-08-26T13:19:40.878Z","updated_at":"2022-09-05T03:03:20.069Z","closed_at":"2022-09-05T03:03:20.045Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ðŸ¤– GitLab Bot ðŸ¤–","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Web IDE","[deprecated] Accepting merge requests","auto closed","devops::create","good for new contributors","group::editor","priority::4","section::dev","severity::3","stale","type::bug","vintage"],"milestone":{"id":610592,"iid":24,"group_id":9970,"title":"Awaiting further demand","description":"Indicates that an issue has been triaged, but is not yet on the backlog because it is awaiting further demand from customers.","state":"active","created_at":"2018-08-01T12:23:44.946Z","updated_at":"2018-08-01T12:23:44.946Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/24"},"assignees":[],"author":{"id":9588157,"username":"rootnoir","name":"rootnoir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9588157/avatar.png","web_url":"https://gitlab.com/rootnoir"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339474","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339474","notes":"https://gitlab.com/api/v4/projects/278964/issues/339474/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339474/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339474","relative":"#339474","full":"gitlab-org/gitlab#339474"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92639322,"iid":339470,"project_id":278964,"title":"Document license upload validation","description":"### Summary\n\nThis issue is a follow up to [Document logic behind SM user counts which affect billing](https://gitlab.com/gitlab-org/gitlab/-/issues/328611) and focuses on the logic behind validation for license upload and the error messaging that is displayed on upload.\n\n### Scope\n\n1. Validation logic for `billable users`\n1. Validation logic for `users over license` and max users\n1. Validation logic for Previous users\n1. Error message parameters for _\"During the year before this license started, this GitLab installation had `a` active users, exceeding this license's limit of `b` by `c` users. Please upload a license for at least `d` users or contact sales at ...\"_","state":"closed","created_at":"2021-08-26T12:56:05.193Z","updated_at":"2021-11-19T15:31:23.232Z","closed_at":"2021-11-19T15:31:23.210Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Cloud License Sync - V2","[deprecated] Category:Provision","auto updated","backend","devops::fulfillment","documentation","group::provision","section::fulfillment"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":4665308,"username":"doniquesmit","name":"Donique Smit","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c5737881c65a3063443d7692dfe04f4a?s=80\u0026d=identicon","web_url":"https://gitlab.com/doniquesmit"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":20,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339470","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339470","notes":"https://gitlab.com/api/v4/projects/278964/issues/339470/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339470/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339470","relative":"#339470","full":"gitlab-org/gitlab#339470"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6383,"epic":{"id":310864,"iid":6383,"title":"THEME: Maintenance and Support","url":"/groups/gitlab-org/-/epics/6383","group_id":9970,"human_readable_end_date":"Nov 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92634694,"iid":339465,"project_id":278964,"title":"Kubernetes Agent should honour the namespace if set in config","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen using CI/CD Tunnel with Kubernetes agent the namespace is not set on the context even if defined in the agent config.yaml\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n### Steps to reproduce\n\nWhen using the following the CICD job to display the context\n\n```yaml\ndeploy:\n  image:\n    name: bitnami/kubectl:latest\n    entrypoint: [\"\"]\n  script:\n  - kubectl config get-contexts\n```\n\nthe output is\n\n```bash\nCURRENT   NAME                                                                  CLUSTER   AUTHINFO    NAMESPACE\n          path-to-my-config-repo:agent2                                         gitlab    agent:72   \n```\n\nThe namespace was set in the agent config using the `default-namespace` property\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nNo namespace is defined in the context so I need to either\n- pass in `-n/--namespace`\n- add namespace to my yaml\n\nBut as I set the `default-namespace` I assumed it would have been set\n\n```yaml\nci_access:\n  # This agent is accessible from CI jobs in these projects\n  projects:\n    - id: group1/group1-1/project1\n      default_namespace: namespace-to-use-as-default\n  # This agent is accessible from CI jobs in projects in these groups\n  groups:\n    - id: group2/group2-1\n      default_namespace: namespace-to-use-as-default\n```\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nNamespace being set in the context\n\nFor example\n```shell\nkubectl config get-contexts\nCURRENT   NAME                                                                  CLUSTER   AUTHINFO    NAMESPACE\n          path-to-my-config-repo:agent2                                         gitlab    agent:72    my-namespace\n```\n\n### Implementation details\n\nPopulate the context in the automatically injected `KUBECONFIG` with a default namespace","state":"closed","created_at":"2021-08-26T11:35:26.361Z","updated_at":"2022-10-23T23:48:52.762Z","closed_at":"2022-10-23T23:48:51.981Z","closed_by":{"id":3167938,"username":"tigerwnz","name":"Tiger Watson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/eb2c062f746fe8a57d693ee307942aa5?s=80\u0026d=identicon","web_url":"https://gitlab.com/tigerwnz"},"labels":["Category:Kubernetes Management","Hackathon","blocked","candidate::14.5","devops::configure","group::configure","section::ops","severity::3","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3167938,"username":"tigerwnz","name":"Tiger Watson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/eb2c062f746fe8a57d693ee307942aa5?s=80\u0026d=identicon","web_url":"https://gitlab.com/tigerwnz"}],"author":{"id":1318475,"username":"lilHermit","name":"lilHermit","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3c96471c29955b1028736f0bcb46ee9a?s=80\u0026d=identicon","web_url":"https://gitlab.com/lilHermit"},"type":"ISSUE","assignee":{"id":3167938,"username":"tigerwnz","name":"Tiger Watson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/eb2c062f746fe8a57d693ee307942aa5?s=80\u0026d=identicon","web_url":"https://gitlab.com/tigerwnz"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339465","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339465","notes":"https://gitlab.com/api/v4/projects/278964/issues/339465/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339465/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339465","relative":"#339465","full":"gitlab-org/gitlab#339465"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5528,"epic":{"id":217347,"iid":5528,"title":"CI/CD tunnel","url":"/groups/gitlab-org/-/epics/5528","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92632703,"iid":339463,"project_id":278964,"title":"Compliance pipelines load parent config in downstream pipelines","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nWhen a `trigger:` keyword is used in a regular project that has compliance pipeline feature in use, the downstream config is not triggered.\n\nThe bridge job starts a new compliance pipeline that ends up re-running the parent pipeline, and this recurses until the maximum depth error is hit (after 3 attempts)\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nSetup a compliance pipeline based on https://docs.gitlab.com/ee/user/project/settings/index.html#compliance-pipeline-configuration\n\nIn the project, add a simple job that uses `trigger:` to load a local (or cross-project/remote) file:\n\n```\n# .gitlab-ci.yml\n\nstages:\n  - compliance\n  - build\n  - test\n\nbuild:\n  stage: build\n  script: echo build\n\ntest:\n  stage: test\n  trigger:\n    include:\n      - local: child-ci.yml\n    strategy: depend\n```\n\n```\n# child-ci.yml\n\nstages:\n  - build\n  - test\n\ncheck:\n  stage: build\n  script: echo check\n\nmisc:\n  stage: test\n  script: echo misc\n```\n\nUpon execution, notice that the child-ci's jobs `check` and `misc` are never run.\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nSee customer ticket for an example job: https://gitlab.zendesk.com/agent/tickets/229643 (internal link)\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n- Downstream pipeline is never executed\n- Parent pipeline is re-executed recursively\n- Compliance pipeline is executed again for downstream pipelines\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n- Downstream pipeline's jobs are executed\n- Parent pipeline's jobs are not re-executed\n- Compliance pipeline jobs are not re-executed unless determined necessary (such as in cross-project triggers)\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\nSee customer ticket for an example job: https://gitlab.zendesk.com/agent/tickets/229643 (internal link) and screenshots\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\nThis bug happens on GitLab.com\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e\n\nTBD\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T10:53:15.683Z","updated_at":"2022-08-09T19:57:35.352Z","closed_at":"2022-01-25T08:26:51.878Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["GitLab Ultimate","backend","customer","devops::manage","direction","group::compliance","missed-deliverable","missed:14.6","priority::1","release post item","section::dev","severity::3","type::bug","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":7536567,"username":"hchouraria","name":"Harsh Chouraria","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7536567/avatar.png","web_url":"https://gitlab.com/hchouraria"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":40,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339463","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339463","notes":"https://gitlab.com/api/v4/projects/278964/issues/339463/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339463/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339463","relative":"#339463","full":"gitlab-org/gitlab#339463"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6241,"epic":{"id":294509,"iid":6241,"title":"Compliance pipeline post-MVC issues","url":"/groups/gitlab-org/-/epics/6241","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":92623362,"iid":339459,"project_id":278964,"title":"Investigate installation type chart","description":"From @dorrino  \n\n\u003e Hello, does anyone know what the `obs://` data points might be on this chart?\n\nhttps://app.periscopedata.com/app/gitlab/406972/Version-Upgrade-Rate?widget=8890933\u0026udv=0\n\n\u003e Also why there is a single 100% data point in Jan for GitLab Docker Image\n\n\ncc @snalamaru @dorrino @nicolasdular @amandarueda","state":"closed","created_at":"2021-08-26T08:36:29.329Z","updated_at":"2021-09-20T19:22:52.601Z","closed_at":"2021-09-20T19:22:52.588Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["auto updated","devops::growth","group::product intelligence","section::growth"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4189780,"username":"mpeychet_","name":"Mathieu Peychet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4189780/avatar.png","web_url":"https://gitlab.com/mpeychet_"},{"id":8302598,"username":"dorrino","name":"Dilan Orrino","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8302598/avatar.png","web_url":"https://gitlab.com/dorrino"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":4189780,"username":"mpeychet_","name":"Mathieu Peychet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4189780/avatar.png","web_url":"https://gitlab.com/mpeychet_"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339459","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339459","notes":"https://gitlab.com/api/v4/projects/278964/issues/339459/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339459/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339459","relative":"#339459","full":"gitlab-org/gitlab#339459"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92619783,"iid":339452,"project_id":278964,"title":"DevOps Adoption - Remove data-testid constants","description":"The following discussion from !68447 should be addressed:\n\n- [ ] @pslaughter started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68447#note_661100375): \n\n    \u003e **suggestion (non-blocking):** I recommend against putting test ID's in constants.\n    \u003e \n    \u003e - There's not really a reusability win since the automated tests referencing them should be enough to verify the component applied them correctly.\n    \u003e - Ideally we could strip out `data-testid` from production, but moving these values to constants adds to their presence.","state":"closed","created_at":"2021-08-26T07:53:24.906Z","updated_at":"2021-10-28T13:53:17.912Z","closed_at":"2021-10-12T08:59:12.606Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["auto updated","devops::manage","frontend","group::optimize","maintenance::refactor","priority::4","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339452","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339452","notes":"https://gitlab.com/api/v4/projects/278964/issues/339452/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339452/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339452","relative":"#339452","full":"gitlab-org/gitlab#339452"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92617370,"iid":339447,"project_id":278964,"title":"Migrate usage_activity_by_stage_secure to use Metric Instrumentation class","description":"This metric will possibly use `DatabaseMetric` as base class to migrate the count logic to an instrumentation class.\n\nThis issue can be futher broken down to include possible metrics mentioned in `SECURE_PRODUCT_TYPES`\n\n# Acceptance Criteria\n\nMigrate following metrics:\n\n- [x] `container_scanning_jobs`\n- [x] `dast_jobs`\n- [x] `dependency_scanning_jobs`\n- [x] `license_management_jobs`\n- [x] `license_scanning_jobs`\n- [x] `sast_jobs`\n- [x] `secret_detection_jobs`\n- [x] `coverage_fuzzing_jobs`\n- [x] `api_fuzzing_jobs`\n- [x] `api_fuzzing_dnd_jobs`","state":"closed","created_at":"2021-08-26T07:13:47.785Z","updated_at":"2022-09-02T07:12:08.552Z","closed_at":"2022-02-01T23:07:56.563Z","closed_by":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"labels":["auto updated","backend","devops::growth","group::product intelligence","missed:14.6","missed:14.7","section::growth","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339447","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":10},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"10 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339447","notes":"https://gitlab.com/api/v4/projects/278964/issues/339447/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339447/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339447","relative":"#339447","full":"gitlab-org/gitlab#339447"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":92617061,"iid":339445,"project_id":278964,"title":"Migrate redis usage_counters to use Metric Instrumentation class","description":"https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data.rb#L266\n\nThis will use RedisMetric\n\n[Guide](https://docs.gitlab.com/ee/development/service_ping/metrics_instrumentation.html#migrate-service-ping-metrics-to-instrumentation-classes)\n\n```ruby\n      # @return [Hash\u003cSymbol, Integer\u003e]\n      def usage_counters\n        usage_data_counters.map { |counter| redis_usage_data(counter) }.reduce({}, :merge)\n      end\n\n```\n\n### Metrics generated with this method\n\n```ruby\n{:package_events_i_package_composer_delete_package=\u003e0,\n :package_events_i_package_composer_pull_package=\u003e0,\n :package_events_i_package_composer_push_package=\u003e0,\n :package_events_i_package_conan_delete_package=\u003e0,\n :package_events_i_package_conan_pull_package=\u003e0,\n :package_events_i_package_conan_push_package=\u003e0,\n :package_events_i_package_debian_delete_package=\u003e0,\n :package_events_i_package_debian_pull_package=\u003e0,\n :package_events_i_package_delete_package=\u003e0,\n :package_events_i_package_delete_package_by_deploy_token=\u003e0,\n :package_events_i_package_delete_package_by_guest=\u003e0,\n :package_events_i_package_delete_package_by_user=\u003e0,\n :package_events_i_package_generic_delete_package=\u003e0,\n :package_events_i_package_generic_pull_package=\u003e0,\n :package_events_i_package_generic_push_package=\u003e0,\n :package_events_i_package_golang_delete_package=\u003e0,\n :package_events_i_package_golang_pull_package=\u003e0,\n :package_events_i_package_golang_push_package=\u003e0,\n :package_events_i_package_helm_pull_package=\u003e0,\n :package_events_i_package_helm_push_package=\u003e0,\n :package_events_i_package_maven_delete_package=\u003e0,\n :package_events_i_package_maven_pull_package=\u003e0,\n :package_events_i_package_maven_push_package=\u003e0,\n :package_events_i_package_npm_delete_package=\u003e0,\n :package_events_i_package_npm_pull_package=\u003e0,\n :package_events_i_package_npm_push_package=\u003e0,\n :package_events_i_package_nuget_delete_package=\u003e0,\n :package_events_i_package_nuget_pull_package=\u003e0,\n :package_events_i_package_nuget_push_package=\u003e0,\n :package_events_i_package_nuget_pull_symbol_package=\u003e0,\n :package_events_i_package_nuget_push_symbol_package=\u003e0,\n :package_events_i_package_pull_package=\u003e0,\n :package_events_i_package_pull_package_by_deploy_token=\u003e0,\n :package_events_i_package_pull_package_by_guest=\u003e0,\n :package_events_i_package_pull_package_by_user=\u003e0,\n :package_events_i_package_pull_symbol_package=\u003e0,\n :package_events_i_package_pull_symbol_package_by_deploy_token=\u003e0,\n :package_events_i_package_pull_symbol_package_by_guest=\u003e0,\n :package_events_i_package_pull_symbol_package_by_user=\u003e0,\n :package_events_i_package_push_package=\u003e0,\n :package_events_i_package_push_package_by_deploy_token=\u003e0,\n :package_events_i_package_push_package_by_guest=\u003e0,\n :package_events_i_package_push_package_by_user=\u003e0,\n :package_events_i_package_push_symbol_package=\u003e0,\n :package_events_i_package_push_symbol_package_by_deploy_token=\u003e0,\n :package_events_i_package_push_symbol_package_by_guest=\u003e0,\n :package_events_i_package_push_symbol_package_by_user=\u003e0,\n :package_events_i_package_pypi_delete_package=\u003e0,\n :package_events_i_package_pypi_pull_package=\u003e0,\n :package_events_i_package_pypi_push_package=\u003e0,\n :package_events_i_package_rubygems_delete_package=\u003e0,\n :package_events_i_package_rubygems_pull_package=\u003e0,\n :package_events_i_package_rubygems_push_package=\u003e0,\n :package_events_i_package_terraform_module_delete_package=\u003e0,\n :package_events_i_package_terraform_module_pull_package=\u003e0,\n :package_events_i_package_terraform_module_push_package=\u003e0,\n :wiki_pages_view=\u003e0,\n :wiki_pages_create=\u003e0,\n :wiki_pages_update=\u003e0,\n :wiki_pages_delete=\u003e0,\n :web_ide_commits=\u003e0,\n :web_ide_views=\u003e1,\n :web_ide_merge_requests=\u003e0,\n :web_ide_previews=\u003e0,\n :web_ide_previews_success=\u003e0,\n :web_ide_terminals=\u003e0,\n :web_ide_pipelines=\u003e0,\n :snippet_comment=\u003e0,\n :commit_comment=\u003e0,\n :merge_request_comment=\u003e267,\n :snippet_create=\u003e2,\n :snippet_update=\u003e0,\n :all_searches=\u003e0,\n :navbar_searches=\u003e0,\n :cycle_analytics_views=\u003e3,\n :productivity_analytics_views=\u003e0,\n :source_code_pushes=\u003e2,\n :merge_request_create=\u003e0,\n :design_management_designs_create=\u003e0,\n :design_management_designs_update=\u003e0,\n :design_management_designs_delete=\u003e0,\n :kubernetes_agent_gitops_sync=\u003e0,\n :kubernetes_agent_k8s_api_proxy_request=\u003e0,\n :static_site_editor_views=\u003e0,\n :static_site_editor_commits=\u003e0,\n :static_site_editor_merge_requests=\u003e0,\n :diff_searches=\u003e0,\n :service_usage_data_download_payload_click=\u003e0,\n :licenses_list_views=\u003e0,\n :status_page_incident_publishes=\u003e0,\n :status_page_incident_unpublishes=\u003e0,\n :network_policy_forwards=\u003e0,\n :network_policy_drops=\u003e0,\n :users_clicking_license_testing_visiting_external_website=\u003e0,\n :users_visiting_testing_license_compliance_full_report=\u003e1}\n```\n\n## Testing\n\n- [ ] Ensure related tests are updated\n\n## Update\n\nPlease be aware that most of the metrics have been migrated via this issue, we're only left with https://gitlab.com/gitlab-org/gitlab/-/issues/374595 and https://gitlab.com/gitlab-org/gitlab/-/issues/374685","state":"closed","created_at":"2021-08-26T07:09:47.698Z","updated_at":"2022-10-20T08:26:25.120Z","closed_at":"2022-10-20T08:26:24.969Z","closed_by":{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["auto updated","automation:ml wrong","backend","devops::analytics","group::product intelligence","maintenance::refactor","missed:15.4","quad-planning::complete-action","section::analytics","type::maintenance","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339445","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339445","notes":"https://gitlab.com/api/v4/projects/278964/issues/339445/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339445/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339445","relative":"#339445","full":"gitlab-org/gitlab#339445"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":92616746,"iid":339444,"project_id":278964,"title":"Migrate email_campaign_counts to use Metric Instrumentation class","description":"Will implement `DatabaseMetric` for implementing the metric instrumentation class\n\n[Guide](https://docs.gitlab.com/ee/development/service_ping/metrics_instrumentation.html#migrate-service-ping-metrics-to-instrumentation-classes)\n\nhttps://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data.rb#L792\n\n```ruby\n      def email_campaign_counts\n        # rubocop:disable UsageData/LargeTable\n        sent_emails = count(Users::InProductMarketingEmail.group(:track, :series))\n        clicked_emails = count(Users::InProductMarketingEmail.where.not(cta_clicked_at: nil).group(:track, :series))\n\n        Users::InProductMarketingEmail::ACTIVE_TRACKS.keys.each_with_object({}) do |track, result|\n          series_amount = Namespaces::InProductMarketingEmailsService.email_count_for_track(track)\n          # rubocop: enable UsageData/LargeTable:\n\n          0.upto(series_amount - 1).map do |series|\n            # When there is an error with the query and it's not the Hash we expect, we return what we got from `count`.\n            sent_count = sent_emails.is_a?(Hash) ? sent_emails.fetch([track, series], 0) : sent_emails\n            clicked_count = clicked_emails.is_a?(Hash) ? clicked_emails.fetch([track, series], 0) : clicked_emails\n\n            result[\"in_product_marketing_email_#{track}_#{series}_sent\"] = sent_count\n            result[\"in_product_marketing_email_#{track}_#{series}_cta_clicked\"] = clicked_count unless track == 'experience'\n          end\n        end\n      end\n\n```\n\n### Metrics added with this method\n\n```ruby\n Gitlab::UsageData.send :email_campaign_counts\n\n {\"in_product_marketing_email_create_0_sent\"=\u003e0,\n \"in_product_marketing_email_create_0_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_create_1_sent\"=\u003e0,\n \"in_product_marketing_email_create_1_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_create_2_sent\"=\u003e0,\n \"in_product_marketing_email_create_2_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_verify_0_sent\"=\u003e0,\n \"in_product_marketing_email_verify_0_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_verify_1_sent\"=\u003e0,\n \"in_product_marketing_email_verify_1_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_verify_2_sent\"=\u003e0,\n \"in_product_marketing_email_verify_2_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_trial_0_sent\"=\u003e0,\n \"in_product_marketing_email_trial_0_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_trial_1_sent\"=\u003e0,\n \"in_product_marketing_email_trial_1_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_trial_2_sent\"=\u003e0,\n \"in_product_marketing_email_trial_2_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_team_0_sent\"=\u003e0,\n \"in_product_marketing_email_team_0_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_team_1_sent\"=\u003e0,\n \"in_product_marketing_email_team_1_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_team_2_sent\"=\u003e0,\n \"in_product_marketing_email_team_2_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_experience_0_sent\"=\u003e0,\n \"in_product_marketing_email_team_short_0_sent\"=\u003e0,\n \"in_product_marketing_email_team_short_0_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_trial_short_0_sent\"=\u003e0,\n \"in_product_marketing_email_trial_short_0_cta_clicked\"=\u003e0,\n \"in_product_marketing_email_admin_verify_0_sent\"=\u003e0,\n \"in_product_marketing_email_admin_verify_0_cta_clicked\"=\u003e0}\n```","state":"closed","created_at":"2021-08-26T07:04:06.562Z","updated_at":"2022-11-15T10:21:31.263Z","closed_at":"2022-11-15T10:21:10.130Z","closed_by":{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["auto updated","automation:ml wrong","backend","devops::analytics","group::product intelligence","maintenance::refactor","section::analytics","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339444","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339444","notes":"https://gitlab.com/api/v4/projects/278964/issues/339444/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339444/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339444","relative":"#339444","full":"gitlab-org/gitlab#339444"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":92616725,"iid":339442,"project_id":278964,"title":"Migrate search_unique_visits_data to use Metric Instrumentation class","description":"Will use RedisHLLMetric.\n\n[Guide](https://docs.gitlab.com/ee/development/service_ping/metrics_instrumentation.html#migrate-service-ping-metrics-to-instrumentation-classes)\n\nhttps://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data.rb#L668\n\n\n```ruby\n      def search_unique_visits_data\n        events = ::Gitlab::UsageDataCounters::HLLRedisCounter.events_for_category('search')\n        results = events.each_with_object({}) do |event, hash|\n          hash[event] = redis_usage_data { ::Gitlab::UsageDataCounters::HLLRedisCounter.unique_events(event_names: event, **weekly_time_range) }\n        end\n\n        results['search_unique_visits_for_any_target_weekly'] = redis_usage_data { ::Gitlab::UsageDataCounters::HLLRedisCounter.unique_events(event_names: events, **weekly_time_range) }\n        results['search_unique_visits_for_any_target_monthly'] = redis_usage_data { ::Gitlab::UsageDataCounters::HLLRedisCounter.unique_events(event_names: events, **monthly_time_range) }\n\n        { search_unique_visits: results }\n      end\n\n```\n\n## Testing\n\nUpdate related unit test and make sure QA pipelines are passing.","state":"closed","created_at":"2021-08-26T07:03:06.653Z","updated_at":"2022-06-01T08:04:46.219Z","closed_at":"2022-05-31T07:25:11.804Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["auto updated","automation:ml wrong","backend","devops::growth","group::product intelligence","maintenance::refactor","quad-planning::complete-action","section::growth","type::maintenance","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339442","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339442","notes":"https://gitlab.com/api/v4/projects/278964/issues/339442/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339442/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339442","relative":"#339442","full":"gitlab-org/gitlab#339442"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":92610829,"iid":339428,"project_id":278964,"title":"Move \"Add Namespace\" button to GlEmptyState","description":"### Proposal\n\nThis was approved by ~UX in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68720, but the MR was closed due to significant divergence from higher-priority work: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68720\n\n| Current | Propsal |\n| ------ | ------ |\n| ![Screen_Shot_2021-07-21_at_2.55.06_pm](/uploads/e539484963d3f63e3c367ac9aa7c5845/Screen_Shot_2021-07-21_at_2.55.06_pm.png) | ![Screen_Shot_2021-07-21_at_1.49.37_pm](/uploads/d89565f213ea61c41db7df0d5609f641/Screen_Shot_2021-07-21_at_1.49.37_pm.png) |","state":"closed","created_at":"2021-08-26T04:01:58.376Z","updated_at":"2022-11-22T19:35:17.519Z","closed_at":"2021-11-12T05:07:32.346Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Deliverable","Jira::ConnectApp","devops::manage","feature::enhancement","frontend","frontend-weight::2","group::integrations","priority::4","section::dev","severity::4","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339428","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339428","notes":"https://gitlab.com/api/v4/projects/278964/issues/339428/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339428/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339428","relative":"#339428","full":"gitlab-org/gitlab#339428"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92610634,"iid":339427,"project_id":278964,"title":"Execute scheduled security policy scans in a single pipeline","description":"## Why are we doing this work\n\nCurrently if we have a scheduled policy like this:\n\n```yaml\nscan_execution_policy:\n- name: Scheduled scan\n  description: description\n  enabled: true\n  rules:\n  - type: schedule\n    branches:\n    - master\n    - feature-a\n    cadence: */30 * * * *\n  actions:\n  - scan: dast\n    scanner_profile: Scanner Profile A\n    site_profile: Site Profile B\n  - scan: secret_detection\n```\n\nThere will be 4 pipelines created: `secret_detection` for branch `master` and `feature-a` and `dast` for branch `master` and `feature-a`.\n\n![Screenshot_2021-08-25_at_7.14.54_PM](https://gitlab.com/groups/gitlab-org/-/uploads/98211ba6d6b531ffbe5b88daf5112b65/Screenshot_2021-08-25_at_7.14.54_PM.png)\n\nThe reason why we cannot create both `secret_detection` and `dast` on the same pipeline was because we re-use the code from [On Demand DAST scans](https://docs.gitlab.com/ee/user/application_security/dast/#on-demand-scans) and the pipeline source will be `ondemand_dast_scan` and for `secret_detection` the source will be `security_orchestration_policy`.\n\n## Requirements\n\n- [ ] It is desired to have all the jobs for a branch to be executed in a single pipeline instead of multiple pipeline\n- [ ] `dast` scan should be executed in the pipeline with source `security_orchestration_policy`\n\n## Implementation plan\n\n- [ ] ~backend Move the logic of creating a pipeline for each scan in [`Security::SecurityOrchestrationPolicies::RuleScheduleService`](https://gitlab.com/gitlab-org/gitlab/-/blob/394a3e49/ee/app/services/security/security_orchestration_policies/rule_schedule_service.rb) to [`Security::SecurityOrchestrationPolicies::CreatePipelineService`](https://gitlab.com/gitlab-org/gitlab/-/blob/394a3e49/ee/app/services/security/security_orchestration_policies/create_pipeline_service.rb)\n- [ ] ~backend Use [`AppSec::Dast::ScanConfigs::BuildService`](https://gitlab.com/gitlab-org/gitlab/-/blob/1db05df7/ee/app/services/app_sec/dast/scan_configs/build_service.rb) to create pipeline configuration for `dast` scan and set `pipeline.dast_profile = dast_profile` similar to [`Ci::RunDastScanService`](https://gitlab.com/gitlab-org/gitlab/-/blob/1db05df7/ee/app/services/ci/run_dast_scan_service.rb)","state":"closed","created_at":"2021-08-26T03:55:09.608Z","updated_at":"2022-12-05T18:54:12.913Z","closed_at":"2022-11-08T17:01:12.003Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Security Policy Management","backend","devops::govern","feature::enhancement","group::security policies","missed:15.5","section::sec","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339427","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339427","notes":"https://gitlab.com/api/v4/projects/278964/issues/339427/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339427/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339427","relative":"#339427","full":"gitlab-org/gitlab#339427"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92608165,"iid":339422,"project_id":278964,"title":"GitLab Migration - Migrate Project Releases - Milestone attribute","description":"## Proposed Solution\n\n* For each migrated Project, migrate Project [Releases](https://docs.gitlab.com/ee/user/project/releases/).\n\n## Additional details\n\n* **Releases** are based on (git) **Tags** and can be associated with 0, 1, or many **Milestones**.\n* GitLab automatically generates `zip`, `tar.gz`, `tar.bz2`, and `tar` archived source code from the given Git tag. These are read-only assets.\n* Users can add additional assets which are just links with a description (text).\n* Releases have a `released_at` date/timestamp that would need to be preserved.\n\n![image](/uploads/e428aafbe7ccf942a6ea8bb6f6350b66/image.png)\n\nLinks:\n* GitLab documentation about **Releases**: https://docs.gitlab.com/ee/user/project/releases/\n* GitLab **Releases API**: https://docs.gitlab.com/ee/api/releases/index.html#create-a-release\n\n## Iteration\n\nMigrate Release:\n\n* Milestone\n* The \"Evidence collection\" asset\n\nThis information is retrievable from the [Release API](https://docs.gitlab.com/ee/api/releases/index.html#create-a-release)\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:17:38.462Z","updated_at":"2022-05-08T13:43:15.824Z","closed_at":"2022-04-26T10:34:17.572Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","release post item::in review","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339422","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339422","notes":"https://gitlab.com/api/v4/projects/278964/issues/339422/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339422/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339422","relative":"#339422","full":"gitlab-org/gitlab#339422"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92608158,"iid":339421,"project_id":278964,"title":"GitLab Migration - Migrate Designs","description":"\n## Release Notes\n\nWe continue to add support for more metadata to GitLab migration. In GitLab 15.1, weâ€™ve added [designs](https://docs.gitlab.com/ee/user/project/issues/design_management.html). This metadata will help you migrate more of the data without needing to manually copy over designs.\n\n## Proposed Solution\n\n* For each migrated project, migrate Designs.\n* Designs should be assigned to the appropriate issues.\n* Design references in issue/epic description/comments should be updated.\n\n## Additional details\n\n**Designs** require **LFS** and are associated with an **Issue**.\n\nGitLab documentation about **Designs**: https://docs.gitlab.com/ee/user/project/issues/design_management.html\n\n![image](/uploads/bbf83ce5e5497f92a13535349b132083/image.png)\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:17:13.220Z","updated_at":"2022-06-08T07:26:27.307Z","closed_at":"2022-05-26T14:44:48.805Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","group::import","milestone::p2","release post item::secondary","reliability","section::dev","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339421","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339421","notes":"https://gitlab.com/api/v4/projects/278964/issues/339421/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339421/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339421","relative":"#339421","full":"gitlab-org/gitlab#339421"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92608152,"iid":339420,"project_id":278964,"title":"GitLab Migration - Migrate Time Tracking","description":"## Proposed Solution\n\n* For each migrated project, migrate the Time Tracking data.\n\n## Additional details\n\n**Time Tracking** can be associated with **Issues** and **Merge Requests**.\n\nGitLab documentation about **Time Tracking**: https://docs.gitlab.com/ee/user/project/time_tracking.html\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:16:56.149Z","updated_at":"2022-03-06T19:05:43.690Z","closed_at":"2022-03-06T19:05:43.674Z","closed_by":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339420","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339420","notes":"https://gitlab.com/api/v4/projects/278964/issues/339420/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339420/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339420","relative":"#339420","full":"gitlab-org/gitlab#339420"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92608145,"iid":339419,"project_id":278964,"title":"GitLab Migration - Migrate Project Labels","description":"## Proposed Solution\n\n* For each migrated project, migrate Project Labels.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:16:38.891Z","updated_at":"2021-10-28T01:37:15.967Z","closed_at":"2021-09-30T10:41:33.076Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339419","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339419","notes":"https://gitlab.com/api/v4/projects/278964/issues/339419/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339419/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339419","relative":"#339419","full":"gitlab-org/gitlab#339419"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92608134,"iid":339418,"project_id":278964,"title":"GitLab Migration - Migrate Issue Boards","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n## Proposed Solution\n\n* For each migrated project, migrate Issue Boards.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [x] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [x] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T02:16:12.700Z","updated_at":"2021-10-28T21:23:14.533Z","closed_at":"2021-10-26T19:31:22.618Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339418","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339418","notes":"https://gitlab.com/api/v4/projects/278964/issues/339418/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339418/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339418","relative":"#339418","full":"gitlab-org/gitlab#339418"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92608096,"iid":339417,"project_id":278964,"title":"GitLab Migration - Migrate Milestones and Events","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Proposed Solution\n\n* For each migrated project, migrate Milestones and Events.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T02:15:10.188Z","updated_at":"2021-11-10T20:52:26.245Z","closed_at":"2021-11-10T20:52:26.230Z","closed_by":{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339417","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339417","notes":"https://gitlab.com/api/v4/projects/278964/issues/339417/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339417/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339417","relative":"#339417","full":"gitlab-org/gitlab#339417"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607996,"iid":339416,"project_id":278964,"title":"GitLab Migration - Migrate Project configuration","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Proposed Solution\n\n* For each migrated project, migrate Project configuration.\n\nThis issue migrates the project configuration found under Project \u003e Settings \u003e General. \n\nIllustration:\n\n![image](/uploads/202edbc169c774953da80587710a2eb4/image.png)\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T02:12:51.079Z","updated_at":"2022-11-06T18:31:39.643Z","closed_at":"2021-12-15T10:04:36.598Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","Stretch","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339416","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339416","notes":"https://gitlab.com/api/v4/projects/278964/issues/339416/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339416/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339416","relative":"#339416","full":"gitlab-org/gitlab#339416"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607990,"iid":339415,"project_id":278964,"title":"Obsolete: GitLab Migration - Migrate Branches","description":"## Proposed Solution\n\n* For each migrated project, migrate Branches.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:12:28.934Z","updated_at":"2021-11-13T00:44:32.481Z","closed_at":"2021-11-10T12:41:44.528Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","[deprecated] Accepting merge requests","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature"],"milestone":null,"assignees":[],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339415","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339415","notes":"https://gitlab.com/api/v4/projects/278964/issues/339415/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339415/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339415","relative":"#339415","full":"gitlab-org/gitlab#339415"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607986,"iid":339414,"project_id":278964,"title":"GitLab Migration - Migrate Protected branches","description":"## Proposed Solution\n\n* For each migrated project, migrate Protected branches.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:12:10.663Z","updated_at":"2021-11-17T09:46:29.702Z","closed_at":"2021-11-17T09:46:29.685Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339414","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339414","notes":"https://gitlab.com/api/v4/projects/278964/issues/339414/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339414/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339414","relative":"#339414","full":"gitlab-org/gitlab#339414"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607964,"iid":339413,"project_id":278964,"title":"GitLab Migration - Migrate Push rules","description":"## Proposed Solution\n\n* For each migrated project, migrate Push rules.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:11:50.442Z","updated_at":"2021-11-22T12:50:06.763Z","closed_at":"2021-11-17T09:46:26.728Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339413","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339413","notes":"https://gitlab.com/api/v4/projects/278964/issues/339413/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339413/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339413","relative":"#339413","full":"gitlab-org/gitlab#339413"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607899,"iid":339410,"project_id":278964,"title":"GitLab Migration - Migrate Auto DevOps","description":"## Proposed Solution\n\n* For each migrated project, migrate Auto DevOps.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:10:15.682Z","updated_at":"2022-03-28T19:16:26.450Z","closed_at":"2021-12-01T18:20:38.926Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Importers","Deliverable","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339410","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339410","notes":"https://gitlab.com/api/v4/projects/278964/issues/339410/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339410/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339410","relative":"#339410","full":"gitlab-org/gitlab#339410"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607887,"iid":339409,"project_id":278964,"title":"GitLab Migration - Migrate External Pull Requests","description":"## Proposed Solution\n\n* For each migrated project, migrate External Pull Requests.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:09:47.222Z","updated_at":"2021-11-03T22:32:44.876Z","closed_at":"2021-11-03T16:49:57.536Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339409","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339409","notes":"https://gitlab.com/api/v4/projects/278964/issues/339409/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339409/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339409","relative":"#339409","full":"gitlab-org/gitlab#339409"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607871,"iid":339408,"project_id":278964,"title":"GitLab Migration - Pipeline schedules","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Proposed Solution\n\n* For each migrated project, migrate Pipeline schedules.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T02:09:20.479Z","updated_at":"2022-01-25T16:36:47.267Z","closed_at":"2021-12-15T15:37:03.541Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339408","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339408","notes":"https://gitlab.com/api/v4/projects/278964/issues/339408/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339408/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339408","relative":"#339408","full":"gitlab-org/gitlab#339408"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607849,"iid":339407,"project_id":278964,"title":"GitLab Migration - Migrate CI Pipelines","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Proposed Solution\n\n* For each migrated project, migrate CI Pipelines (w/ notes, stages, ext. PR, MR).\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T02:08:41.833Z","updated_at":"2022-09-09T12:02:18.159Z","closed_at":"2021-11-19T15:18:41.448Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","group::import","milestone::p2","reliability","section::dev","type::feature"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339407","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339407","notes":"https://gitlab.com/api/v4/projects/278964/issues/339407/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339407/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339407","relative":"#339407","full":"gitlab-org/gitlab#339407"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607827,"iid":339406,"project_id":278964,"title":"GitLab Migration - Migrate Snippets with Notes and Awards","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Proposed Solution\n\n* For each migrated project, migrate Snippets with Notes and Awards.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T02:08:05.146Z","updated_at":"2021-11-29T22:20:23.901Z","closed_at":"2021-11-29T22:19:55.737Z","closed_by":{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","missed:14.5","reliability","section::dev","type::feature","workflow::production","ðŸ‰"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339406","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339406","notes":"https://gitlab.com/api/v4/projects/278964/issues/339406/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339406/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339406","relative":"#339406","full":"gitlab-org/gitlab#339406"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607817,"iid":339405,"project_id":278964,"title":"GitLab Migration - Migrate LFS objects","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Proposed Solution\n\n* For each migrated project, migrate LFS objects.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T02:07:42.871Z","updated_at":"2022-01-28T10:36:42.493Z","closed_at":"2022-01-28T10:36:42.468Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","Stretch","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339405","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339405","notes":"https://gitlab.com/api/v4/projects/278964/issues/339405/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339405/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339405","relative":"#339405","full":"gitlab-org/gitlab#339405"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607777,"iid":339403,"project_id":278964,"title":"GitLab Migration - Migrate Merge Requests with Projects","description":"## Proposed Solution\n\n* For each migrated project, migrate MRs with diffs, comments, etc.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-26T02:05:34.765Z","updated_at":"2021-11-01T11:12:13.100Z","closed_at":"2021-11-01T11:12:13.080Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339403","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339403","notes":"https://gitlab.com/api/v4/projects/278964/issues/339403/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339403/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339403","relative":"#339403","full":"gitlab-org/gitlab#339403"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92607154,"iid":339401,"project_id":278964,"title":"GitLab Migration - Migrate Project uploads with Projects","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n## Proposed Solution\n\n* For each migrated project, migrate Project uploads.\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T01:36:25.010Z","updated_at":"2022-01-05T13:54:28.375Z","closed_at":"2021-10-27T10:24:18.375Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","group::import","milestone::p2","reliability","section::dev","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339401","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339401","notes":"https://gitlab.com/api/v4/projects/278964/issues/339401/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339401/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339401","relative":"#339401","full":"gitlab-org/gitlab#339401"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92606918,"iid":339400,"project_id":278964,"title":"GitLab Migration - Wiki repositories with Projects","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Proposed Solution\n\n* For each migrated project, migrate Wiki repositories\n\n## Documentation\n\nFollowing documentation should be updated with the objects/fields added in this issue:\n* [ ] User docs: https://docs.gitlab.com/ee/user/group/import/\n* [ ] Dev docs: https://docs.gitlab.com/ee/development/bulk_import.html","state":"closed","created_at":"2021-08-26T01:20:56.144Z","updated_at":"2021-11-09T14:21:49.745Z","closed_at":"2021-11-09T14:21:48.501Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Importers","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","group::import","milestone::p2","reliability","section::dev","type::feature"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339400","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339400","notes":"https://gitlab.com/api/v4/projects/278964/issues/339400/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339400/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339400","relative":"#339400","full":"gitlab-org/gitlab#339400"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92597988,"iid":339392,"project_id":278964,"title":"Track failure/success of GitHub Importer","description":"## Problem\nIn order to understand the current performance and value of our GitHub importer, we need to know what number/percentage of imports is successful/failed.\n\n## Proposal\nCollect metrics (usage ping from Saas and Self-managed, 28d roll-ups):\n* Number of GitHub imports attempted\n* Number of successful GitHub imports\n* Number of failed GitHub imports\n* ~~Number of successful GitHub imports with some failures~~\n\nBuild a Sisense dashboard to show this data over time.\n\nTo iterate, we will start with less detail, only showing success and failure, and no partial successes.\n\n## Out of scope\n* Number of successful GitHub imports with some failures (partial success)","state":"closed","created_at":"2021-08-25T22:09:53.342Z","updated_at":"2022-11-15T11:12:08.257Z","closed_at":"2021-10-07T21:44:02.381Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["Category:Importers","Importer:GitHub","Next Up","Observability","analytics","auto updated","backend","devops::manage","estimation::completed","group::import","instrumentation","milestone::p2","missed:14.3","section::dev","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339392","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339392","notes":"https://gitlab.com/api/v4/projects/278964/issues/339392/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339392/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339392","relative":"#339392","full":"gitlab-org/gitlab#339392"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6807,"epic":{"id":354610,"iid":6807,"title":"Track importers failure/success","url":"/groups/gitlab-org/-/epics/6807","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92591372,"iid":339372,"project_id":278964,"title":"Better handling when users do not have permissions to create a policy","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n## Current behavior and problem\n\nWhen a Security Policy Project has not yet been linked with a Development project, Developers and maintainers of the Development project are still presented with the `New Policy` button on the **Security \u0026 Compliance \u003e Policies** page.\n\nWhen they attempt to create a new policy, they can select either the `Network` policy type or the `Scan Execution` policy type.  These users are allowed to create Network policies; however, they are unable to create a `Scan Execution` policy because they lack the necessary permissions (project Owner) that are required to create and link a Security Policy project to the Development project.  As a result, we currently let them create their policy, but then disable/gray out the `Create merge request` button.\n\n## Proposal\n\nInstead of displaying the new policy editor, instead we should display an empty state and direct the user to have their Project Owner create and link a related Security Policy Project.\n\n## Implementation\n\n- [x] ~frontend similar to the [`network_policy_editor`](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/network_policy/network_policy_editor.vue#L294), conditionally show the `policy_editor_layout` vs `gl_empty_state` in the [`scan_execution_policy_editor`](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/scan_execution_policy/scan_execution_policy_editor.vue) for the `inject`ed value `disableScanExecutionUpdate`","state":"closed","created_at":"2021-08-25T19:04:24.933Z","updated_at":"2021-11-18T07:03:13.038Z","closed_at":"2021-11-10T19:48:31.186Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","Deliverable","Enterprise Edition","GitLab Ultimate","UX","auto updated","devops::govern","direction","frontend","frontend-weight::3","group::security policies","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339372","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339372","notes":"https://gitlab.com/api/v4/projects/278964/issues/339372/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339372/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339372","relative":"#339372","full":"gitlab-org/gitlab#339372"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6611,"epic":{"id":332582,"iid":6611,"title":"Follow-on Improvements for the Security Policy Editor","url":"/groups/gitlab-org/-/epics/6611","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92590589,"iid":339369,"project_id":278964,"title":"FE: Adjustments to the policy editor UX layout and design","description":"[\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n\n## Summary\n\n- users would like the policy editor page a little more readable\n\n## Implementation\n - [x] Improve the visual design of the creation form, detail design please see below, fewer outlines to improve readability, make sure the design matches the designs below.\n - [x] The Policy status toggle should show the text `Enabled` or `Disabled` next to it by improving the [network_policy_editor](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/network_policy/network_policy_editor.vue)\n - [x] The `New Rule` button should have a `+` character next to it (similar to what is found in the `New Actions` button, and the background color and padding should match the designs and be consistent with the New Actions button.\n - [x] Ensure the \"Remove Rule\" icon is not overlapped by rule by improving the [network_policy_editor](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/network_policy/network_policy_editor.vue).  See the screenshot below for an example of the current state.\n      - ![image](https://gitlab.com/gitlab-org/gitlab/uploads/2e89406db3c3aee220c02b54ffdfc82a/image.png)\n\n\n## Visual design improvement\n\nFigma: https://www.figma.com/file/actVYkcrS1tcHCc890DOdv/Policy-details?node-id=627%3A16194\nOriginal design issue:https://gitlab.com/gitlab-org/gitlab/-/issues/344890\n\n| Scan result policy: rule-mode | Scan result policy: yaml-mode |\n| ------ | ------ |\n| ![vuln-result-policy](/uploads/7dcf7d0ba204d91d32b10e5232b293c2/vuln-result-policy.png) |  ![vuln-result-policy-yml](/uploads/a654a52718ddaa75622eb4cb335da449/vuln-result-policy-yml.png)|\n\n| scan execution policy: rule-mode |scan execution policy:yaml-mode |\n| ------ | ------ | \n| ![scan-excution-policy](/uploads/5b5d997a8b166942412ea5ad9f4342fe/scan-excution-policy.png) |![scan-excution-policy-yml](/uploads/f312a950785d03aa4ec5c95fe3821509/scan-excution-policy-yml.png)|\n\n| network policy: rule-mode | network policy: yaml-mode |\n| ------ | ------ |\n| ![vuln-result-policy](/uploads/7dcf7d0ba204d91d32b10e5232b293c2/vuln-result-policy.png) | ![network-policy-yml](/uploads/e1fb13b78f34742322d769e4146de6c3/network-policy-yml.png) |","state":"closed","created_at":"2021-08-25T18:44:50.848Z","updated_at":"2022-07-11T14:38:53.105Z","closed_at":"2022-02-01T22:16:09.778Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","Deliverable","Enterprise Edition","GitLab Ultimate","auto updated","devops::govern","direction","frontend","frontend-weight::3","group::security policies","missed-deliverable","missed:14.7","section::sec","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"}],"author":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"type":"ISSUE","assignee":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339369","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339369","notes":"https://gitlab.com/api/v4/projects/278964/issues/339369/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339369/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339369","relative":"#339369","full":"gitlab-org/gitlab#339369"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6611,"epic":{"id":332582,"iid":6611,"title":"Follow-on Improvements for the Security Policy Editor","url":"/groups/gitlab-org/-/epics/6611","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92579513,"iid":339343,"project_id":278964,"title":"Execute related jests specs for MRs with backend changes","description":"### Plan\n\n* Run `jest --findrelatedTests` on MRs that contain backend changes\n* Incremental benefits:\n  * shorter backend pipelines as only jest tests that depend on affected fixtures are run\n\n### Overview\n\n```mermaid\nflowchart LR\n    subgraph frontend\n    fe[\"FE code\"]--jest --findRelatedTests--\u003ejest\n    end\n    subgraph backend\n    be[\"BE code\"]--crystalball--\u003erspec\n    end\n    \n    be--?--\u003efixtures\n    fixtures--jest --findRelatedTests--\u003ejest\n```\n\nThe diagram above illustrates the test dependency between frontend and backend code and the respective tests. `?` denotes the missing link needed in order to run related jest tests based on a backend change.\n\nSome jest tests load the fixtures as dependency. In https://gitlab.com/gitlab-org/gitlab/-/issues/339346, we have made it possible for jest to track the fixture dependency of the tests, so jest is able to run the relevant tests for each fixture file.\n\nThe next step from here is to identify which fixture file is affected by the backend change, so that when a backend file changes, we can feed `jest --findRelatedTests` with the fixture that was affected.\n\n### How it works?\n\nA fixture rspec file generates a fixture file per example, based on the test description. For example, the following fixture rspec file\n\n```rb\n# spec/frontend/fixtures/pipelines.rb\n  it 'pipelines/pipelines.json' do\n    # ...\n  end\n\n  it \"pipelines/test_report.json\" do\n    # ...\n  end\n```\n\ngenerates the following test fixtures:\n\n```\ntmp/tests/frontend/fixtures-ee/pipelines/pipelines.json\ntmp/tests/frontend/fixtures-ee/pipelines/test_report.json\n```\n\nThe work in https://gitlab.com/gitlab-org/gitlab/-/issues/339346 allows us to find the test files that uses this fixture:\n\n```shell\n$ jest --config jest.config.js --listTests --findRelatedTests tmp/tests/frontend/fixtures-ee/pipelines/pipelines.json tmp/tests/frontend/fixtures-ee/pipelines/test_report.json\n\nee/spec/frontend/pipelines/pipelines_table_spec.js\nspec/frontend/pipelines/pipelines_spec.js\n...\n```\n\n### What is needed?\n\nTo make the link between ruby code and the fixture file, we need the following:\n\n1. A mapping from the source code to the fixture rspec file, for example:\n\n```json\n{\n  \"app/controllers/projects/pipelines_controller.rb\": [\"spec/frontend/fixtures/pipelines.rb\"]\n}\n```\n\n2. A mapping of a fixture rspec file to the fixture file itself, for example:\n\n```json\n{\n  \"spec/frontend/fixtures/pipelines.rb\": [\n    \"tmp/tests/frontend/fixtures-ee/pipelines/pipelines.json\",\n    \"tmp/tests/frontend/fixtures-ee/pipelines/test_report.json\"\n  ]\n}\n```\n\nWith these mappings, we could derive the fixture files that might be affected, then pass them on to jest.\n\nGiven a change in `app/controllers/projects/pipelines_controller.rb`, `spec/frontend/fixtures/pipelines.rb` and therefore `tmp/tests/frontend/fixtures-ee/pipelines/pipelines.json`, `tmp/tests/frontend/fixtures-ee/pipelines/test_report.json` might also change. So we would need to run the following jest command:\n\n```shell\njest --findRelatedTests tmp/tests/frontend/fixtures-ee/pipelines/pipelines.json tmp/tests/frontend/fixtures-ee/pipelines/test_report.json\n```\n\nWhich would run the known jest tests that use the above fixtures:\n```\nee/spec/frontend/pipelines/pipelines_table_spec.js\nspec/frontend/pipelines/pipelines_spec.js\n...\n```\n\n### Implementation detail\n\nTo generate the fixture rspec mapping, we could use Crystalball to track the code executed by each fixture rspec file. This is similar to how we generate the mapping for other rspec files.\n- Crystalball execution tracking: http://gitlab.com/gitlab-org/gitlab/blob/980005f6734277866ce4e266b356e5caf736ca5c/spec/crystalball_env.rb#L8-8\n- Generating source -\u003e test mapping from Crystalball: http://gitlab.com/gitlab-org/gitlab/blob/980005f6734277866ce4e266b356e5caf736ca5c/tooling/lib/tooling/test_map_generator.rb#L7-7\n\nIn addition, we need to map the fixture rspec file to the generated test fixture file. To do this, we need to hook into the rspec example execution and store the path of the generated file. We might be able to extract information from the [helper](http://gitlab.com/gitlab-org/gitlab/blob/980005f6734277866ce4e266b356e5caf736ca5c/spec/support/helpers/javascript_fixtures_helpers.rb#L57-57) for this purpose.\n\nCombining the two, we could generate a map such as the following, which can be used to identify the fixtures that need to be passed to `jest`:\n```json\n{\n  \"app/controllers/projects/pipelines_controller.rb\": [\n    \"tmp/tests/frontend/fixtures-ee/pipelines/pipelines.json\",\n    \"tmp/tests/frontend/fixtures-ee/pipelines/test_report.json\"\n  ]\n}\n```","state":"closed","created_at":"2021-08-25T14:56:38.856Z","updated_at":"2022-03-16T11:38:18.760Z","closed_at":"2021-11-30T14:45:55.464Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","auto updated","ep::pipeline","maintenance::pipelines","missed:14.5","priority::2","type::maintenance","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339343","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339343","notes":"https://gitlab.com/api/v4/projects/278964/issues/339343/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339343/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339343","relative":"#339343","full":"gitlab-org/gitlab#339343"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6608,"epic":{"id":332480,"iid":6608,"title":"Selective Tests Frontend: Jest optimizations","url":"/groups/gitlab-org/-/epics/6608","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92577381,"iid":339338,"project_id":278964,"title":"[Feature flag] Rollout of `scan_result_policy`","description":"## Summary\n\nThis issue is to rollout [scan result policy](https://gitlab.com/groups/gitlab-org/-/epics/6237) on production,\nthat is currently behind the `scan_result_policy` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::container security\" ~\"secure merge request approval\" \n- Most appropriate slack channel to reach out to: `#g_protect_container_security`\n- Best individual to reach out to: @zmartins \n- PM: @sam.white \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org/gitlab-foss` project\n- `gitlab-com/www-gitlab-com` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nAll `/chatops` commands that target production should be done in the `#production` slack channel for visibility.\n\n- [x] Confirm the feature flag is enabled on `staging` without incident\n- [x] Roll out the feature to targeted testing projects/groups first\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [x] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n- [x] Verify the change has the desired outcome with the limited rollout before enabling the feature globally on production.\n- [x] Enable the feature globally on production environment. `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it.\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e","state":"closed","created_at":"2021-08-25T14:28:08.781Z","updated_at":"2022-05-02T03:47:05.663Z","closed_at":"2022-04-28T22:35:32.687Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","backend","devops::govern","direction","group::security policies","missed:14.10","missed:14.3","missed:14.4","missed:14.5","missed:14.6","missed:14.8","section::sec","secure merge request approval","type::feature","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339338","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":50,"completed_count":41},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"41 of 50 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339338","notes":"https://gitlab.com/api/v4/projects/278964/issues/339338/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339338/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339338","relative":"#339338","full":"gitlab-org/gitlab#339338"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6604,"epic":{"id":331936,"iid":6604,"title":"Add `scan_result_policy` as an approval rule functionality","url":"/groups/gitlab-org/-/epics/6604","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92574656,"iid":339337,"project_id":278964,"title":"pagination on pipelines-quota-tab redirect to seats-quota-tab","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\non `https://gitlab.com/groups/{you're group}/-/usage_quotas?page=2#seats-quota-tab` if you try to reach the second page the redirection is \n`https://gitlab.com/groups/{you're group}/-/usage_quotas?page=2#seats-quota-tab` but should \n`https://gitlab.com/groups/{you're group}/-/usage_quotas?page=2#ipelines-quota-tab`\n\n### Steps to reproduce\nwhen you're Usage Qota pipelines or take more than one page and you try to reach the page 2 the link redirect you to Usage Qota of seats.\n\n\n\n### What is the current *bug* behavior?\n\nUsage Qota categorie Pipelines paginations link redirect on Usage Qota categorie Seat \n\n### What is the expected *correct* behavior?\n\nUsage Qota categorie Pipelines paginations should link to Usage Qota categorie Pipelines pages\n\n### Relevant logs and/or screenshots\n![image](/uploads/308c886c23f9ca0161d6318fbc692077/image.png)\n![image](/uploads/435859caadb752109bfd705730f91873/image.png)\n![image](/uploads/f7ffcd55c8d55918a74988733d27e4a1/image.png)\n\n\n### Output of checks\n This bug happens on GitLab.com\n\n### Possible fixes\n\nredirect on `https://gitlab.com/groups/{you're group}/-/usage_quotas?page=2#ipelines-quota-tab` and not on `https://gitlab.com/groups/{you're group}/-/usage_quotas?page=2#seats-quota-tab` should correct when click on pagination of ipelines-quota-tab should resolve the bug","state":"closed","created_at":"2021-08-25T13:49:35.499Z","updated_at":"2022-01-07T20:40:47.439Z","closed_at":"2021-12-08T18:23:59.319Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["Duplicate","[deprecated] Accepting merge requests","[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","priority::4","section::fulfillment","severity::4","type::bug"],"milestone":null,"assignees":[],"author":{"id":7099651,"username":"alexandre.gabrielli1","name":"Alexandre Gabrielli","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7099651/avatar.png","web_url":"https://gitlab.com/alexandre.gabrielli1"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339337","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339337","notes":"https://gitlab.com/api/v4/projects/278964/issues/339337/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339337/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339337","relative":"#339337","full":"gitlab-org/gitlab#339337"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92573850,"iid":339336,"project_id":278964,"title":"Change additional_snowplow_tracking flag to be ops","description":"The feature was introduced with  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/12088\n\nIt is enabled for GitLab.com\n\n[Screen_Shot_2021-08-26_at_09.25.27](/uploads/9be42985e6c72986c6e229d94e4a2280/Screen_Shot_2021-08-26_at_09.25.27.png)\n\nThe feature enables the [Snowplow form tracking option](https://github.com/snowplow/snowplow/wiki/2-Specific-event-tracking-with-the-Javascript-tracker#3101-enableformtracking). \n\nThe feature flag is used [here]( https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/tracking.rb#L22 )\n\n```ruby\nform_tracking: additional_features,\nlink_click_tracking: additional_features\n```\n\nLater used in [tracking/index.js](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/tracking/index.js#L46)\n\n```js\n  if (window.snowplowOptions.formTracking) {\n    Tracking.enableFormTracking(opts.formTrackingConfig);\n  }\n\n  if (window.snowplowOptions.linkClickTracking) {\n    window.snowplow('enableLinkClickTracking');\n  }\n```\n\nWe [decided to change it to an `ops` feature flag](https://gitlab.com/gitlab-org/gitlab/-/issues/339336#note_690948890) as it would otherwise add the tracking to self-managed instances that have enabled Snowplow. We can revisit in the future if we want to remove the feature flag.\n\n## Related issues\n\n- https://gitlab.com/gitlab-org/gitlab/-/merge_requests/15661 \n- https://gitlab.com/gitlab-org/product-intelligence/-/issues/77\n\n## Questions\n\n- Is this rollout for all groups or only for `gitlab-org` group?\n\n/cc @amandarueda @nicolasdular!","state":"closed","created_at":"2021-08-25T13:37:04.413Z","updated_at":"2021-11-03T14:41:03.341Z","closed_at":"2021-11-03T14:41:03.304Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["backend","devops::growth","feature flag","group::product intelligence","missed:14.4","product intelligence::onboarding issue","section::growth","type::maintenance","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339336","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339336","notes":"https://gitlab.com/api/v4/projects/278964/issues/339336/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339336/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339336","relative":"#339336","full":"gitlab-org/gitlab#339336"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92563764,"iid":339324,"project_id":278964,"title":"[Feature flag] Rollout of `ci_minutes_use_notification_level`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## DO NOT ENABLE THE FEATURE FLAG BEFORE OCTOBER 1ST\n\nThe reason is that we want to ensure that the legacy and new tracking values are synchronized after the October 1st data reset. Before that there is a risk that the legacy data contains notification levels updated while we weren't yet updating the new legacy columns due to some MRs from https://gitlab.com/gitlab-org/gitlab/-/issues/290961 still being completed.\n\nAfter October 1st we should have all the values of legacy and new tracking synchronized and we can proceed with the FF rollout.\n\n## Summary\n\nThe reason why \n\nThis issue is to rollout on production the new mechanism that checks whether we need to send the email out to the customer when remaining CI minutes fall below certain thresholds (30%, 5%, 0%).\n\n- When the feature flag is disabled (current case) we use the legacy columns in `namespaces.last_ci_minutes_usage_notification_level` and `namespaces.last_ci_minutes_notification_at`. Our goal is to retire those in favour of the new monthly tracking.\n- When the feature flag is enabled we use the new column in `ci_namespace_monthly_usages.notification_level`, which is also automatically reset on a monthly basis as we reset the CI minutes consumption.\n\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::pipeline execution\" \n- Most appropriate slack channel to reach out to: `#g_pipeline-execution`\n- Best individual to reach out to: @fabiopitino \n- PM: @jreporter \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Ensure that `ci_namespace_monthly_usages.notification_level` contains any values that are lower than `100` (default value). This means that the notification level has been set correctly.\n- Ensure that `ci_namespace_monthly_usages.notification_level` matches the legacy columns in `namespaces` table. This is a sign that the new mechanism is correctly updated side-by-side to the legacy one.\n- Incremental rollout on Gitlab staging\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [ ] Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [ ] Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [ ] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-08-25T11:19:29.812Z","updated_at":"2021-12-16T23:47:45.124Z","closed_at":"2021-12-08T14:14:36.699Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["CI minutes","Category:Continuous Integration","auto updated","backend","devops::verify","feature flag","group::pipeline execution","missed:14.5","section::ops","type::maintenance","workflow::in dev"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339324","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339324","notes":"https://gitlab.com/api/v4/projects/278964/issues/339324/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339324/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339324","relative":"#339324","full":"gitlab-org/gitlab#339324"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4840,"epic":{"id":140298,"iid":4840,"title":"Deprecate CI minutes reset jobs in favour of tracking historical usage data","url":"/groups/gitlab-org/-/epics/4840","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92557527,"iid":339320,"project_id":278964,"title":"Check if value in CS_DEFAULT_BRANCH_IMAGE is valid","description":"## Why are we doing this work\n\nAs a part of https://gitlab.com/groups/gitlab-org/-/epics/5577 `CS_DEFAULT_BRANCH_IMAGE` will be introduced to de-duplicate findings. For the first iteration, we decided not to validate the value set in `CS_DEFAULT_BRANCH_IMAGE`. This might cause problems when the image set is invalid and does not exist in already reported findings. This issue will address the validation of `CS_DEFAULT_BRANCH_IMAGE` by checking `vulnerability_reads` table if the image already exists in `location_image` field. \n\n## Relevant links\n\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/5577)\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\n```diff\ndiff --git a/ee/lib/gitlab/ci/parsers/security/container_scanning.rb b/ee/lib/gitlab/ci/parsers/security/container_scanning.rb\n@@ -5,6 +5,8 @@ module Ci\n     module Parsers\n       module Security\n         class ContainerScanning \u003c Common\n+          include Gitlab::Utils::StrongMemoize\n+\n           private\n\n           def create_location(location_data)\n@@ -20,7 +22,18 @@ def create_location(location_data)\n           def default_branch_image(location_data)\n             return if @report.pipeline.default_branch?\n\n-            location_data['default_branch_image']\n+            default_branch_image = location_data['default_branch_image']\n+            return unless default_branch_vulnerability(default_branch_image)\n+\n+            default_branch_image\n+          end\n+\n+          def default_branch_vulnerability(default_branch_image)\n+            strong_memoize do\n+              ::Vulnerabilities::Read.find_by(project_id: report.project_id,\n+                                              report_type: report.type,\n+                                              location_image: default_branch_image)\n+            end\n           end\n         end\n       end\n```\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-08-25T09:38:32.772Z","updated_at":"2022-08-29T04:01:51.845Z","closed_at":"2022-08-25T15:14:38.420Z","closed_by":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"labels":["Category:Container Scanning","backend","devops::govern","feature::enhancement","good for new contributors","group::security policies","maintenance::refactor","section::sec","type::feature"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339320","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339320","notes":"https://gitlab.com/api/v4/projects/278964/issues/339320/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339320/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339320","relative":"#339320","full":"gitlab-org/gitlab#339320"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92555006,"iid":339318,"project_id":278964,"title":"Migrate compliance_unique_visits_data to use Metric Instrumentation class","description":"This metric will use `RedisHLLMetric`.\n\n[Guide](https://docs.gitlab.com/ee/development/service_ping/metrics_instrumentation.html#migrate-service-ping-metrics-to-instrumentation-classes)\n\nhttps://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data.rb#L658\n\n```ruby\n      def compliance_unique_visits_data\n        results = ::Gitlab::Analytics::UniqueVisits.compliance_events.each_with_object({}) do |target, hash|\n          hash[target] = redis_usage_data { unique_visit_service.unique_visits_for(targets: target) }\n        end\n        results['compliance_unique_visits_for_any_target'] = redis_usage_data { unique_visit_service.unique_visits_for(targets: :compliance) }\n        results['compliance_unique_visits_for_any_target_monthly'] = redis_usage_data { unique_visit_service.unique_visits_for(targets: :compliance, **monthly_time_range) }\n\n        { compliance_unique_visits: results }\n      end\n\n```","state":"closed","created_at":"2021-08-25T09:18:46.873Z","updated_at":"2022-06-17T23:02:10.285Z","closed_at":"2022-06-17T09:51:59.092Z","closed_by":{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["auto updated","backend","devops::growth","group::product intelligence","section::growth","type::maintenance","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"MichaÅ‚ Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339318","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339318","notes":"https://gitlab.com/api/v4/projects/278964/issues/339318/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339318/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339318","relative":"#339318","full":"gitlab-org/gitlab#339318"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":92554889,"iid":339317,"project_id":278964,"title":"Migrate analytics_unique_visits_data to use Metric Instrumentation class","description":"This metric will probably use `RedisHllMetric`.\n\nhttps://docs.gitlab.com/ee/development/service_ping/metrics_instrumentation.html#migrate-service-ping-metrics-to-instrumentation-classes\n\nhttps://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data.rb#L648\n\n```ruby\n      def analytics_unique_visits_data\n        results = ::Gitlab::Analytics::UniqueVisits.analytics_events.each_with_object({}) do |target, hash|\n          hash[target] = redis_usage_data { unique_visit_service.unique_visits_for(targets: target) }\n        end\n        results['analytics_unique_visits_for_any_target'] = redis_usage_data { unique_visit_service.unique_visits_for(targets: :analytics) }\n        results['analytics_unique_visits_for_any_target_monthly'] = redis_usage_data { unique_visit_service.unique_visits_for(targets: :analytics, **monthly_time_range) }\n\n        { analytics_unique_visits: results }\n      end\n\n```\n\n## Testing\n\nUpdate and ensure that the related tests are passing.","state":"closed","created_at":"2021-08-25T09:18:04.963Z","updated_at":"2022-06-17T23:03:15.322Z","closed_at":"2022-06-16T12:04:56.210Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["auto updated","backend","devops::growth","group::product intelligence","quad-planning::complete-action","section::growth","type::maintenance","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339317","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339317","notes":"https://gitlab.com/api/v4/projects/278964/issues/339317/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339317/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339317","relative":"#339317","full":"gitlab-org/gitlab#339317"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":92554633,"iid":339315,"project_id":278964,"title":"Migrate container_expiration_policies_usage to use Metric Instrumentation class","description":"Move the logic from `container_expiration_policies_usage` in `usage_data.rb` to the metric instrumentation class.\n\nDatabase metrics based on `distinct_count`\n\nhttps://docs.gitlab.com/ee/development/service_ping/metrics_instrumentation.html#migrate-service-ping-metrics-to-instrumentation-classes\n\n\nhttps://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data.rb#L345\n\n```ruby\n      def container_expiration_policies_usage\n        results = {}\n        start = minimum_id(Project)\n        finish = maximum_id(Project)\n\n        results[:projects_with_expiration_policy_disabled] = distinct_count(::ContainerExpirationPolicy.where(enabled: false), :project_id, start: start, finish: finish)\n        # rubocop: disable UsageData/LargeTable\n        base = ::ContainerExpirationPolicy.active\n        # rubocop: enable UsageData/LargeTable\n        results[:projects_with_expiration_policy_enabled] = distinct_count(base, :project_id, start: start, finish: finish)\n\n        # rubocop: disable UsageData/LargeTable\n        %i[keep_n cadence older_than].each do |option|\n          ::ContainerExpirationPolicy.public_send(\"#{option}_options\").keys.each do |value| # rubocop: disable GitlabSecurity/PublicSend\n            results[\"projects_with_expiration_policy_enabled_with_#{option}_set_to_#{value}\".to_sym] = distinct_count(base.where(option =\u003e value), :project_id, start: start, finish: finish)\n          end\n        end\n        # rubocop: enable UsageData/LargeTable\n\n        results[:projects_with_expiration_policy_enabled_with_keep_n_unset] = distinct_count(base.where(keep_n: nil), :project_id, start: start, finish: finish)\n        results[:projects_with_expiration_policy_enabled_with_older_than_unset] = distinct_count(base.where(older_than: nil), :project_id, start: start, finish: finish)\n\n        results\n      end\n```","state":"closed","created_at":"2021-08-25T09:16:32.532Z","updated_at":"2022-11-21T12:07:16.142Z","closed_at":"2022-11-21T08:46:18.516Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"MikoÅ‚aj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["auto updated","backend","devops::analytics","group::product intelligence","missed:15.6","section::analytics","type::maintenance","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"MikoÅ‚aj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"MikoÅ‚aj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339315","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339315","notes":"https://gitlab.com/api/v4/projects/278964/issues/339315/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339315/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339315","relative":"#339315","full":"gitlab-org/gitlab#339315"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":92550884,"iid":339312,"project_id":278964,"title":"Consider running `rspec frontend_fixture` in parallel","description":"The `spec/frontend/fixtures/analytics.rb` fixture was introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/66358 on 2021-07-23.\n\nThis clearly lead to an increase of more than 2 minutes in the duration of the critical `rspec frontend_fixture` job:\n\n![Screen_Shot_2021-08-25_at_10.49.01](/uploads/3f0bcd6881b92403ec88ac8f9726696c/Screen_Shot_2021-08-25_at_10.49.01.png)\n\nWe should parallelize this job to reduce the average duration for now.","state":"closed","created_at":"2021-08-25T08:50:30.103Z","updated_at":"2022-03-16T11:38:20.059Z","closed_at":"2021-09-02T16:56:32.218Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","ep::pipeline","maintenance::pipelines","priority::1","type::maintenance","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339312","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339312","notes":"https://gitlab.com/api/v4/projects/278964/issues/339312/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339312/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339312","relative":"#339312","full":"gitlab-org/gitlab#339312"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92548503,"iid":339309,"project_id":278964,"title":"Enable Decomposed database RSpec jobs to run at a schedule","description":"We introduced new RSpec jobs that run in decomposed database mode in this MR: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68232 - the jobs only run when a merge request has the ~\"pipeline:run-decomposed\" label.\n\n## Proposal\n\nWhen the jobs are stable, we should start running these decomposed database jobs at a regular schedule\n\n### Open questions\n\n1. Do we wait until the `decomposed` jobs are all green ?\n1. If we start running the `decomposed` jobs when there are still some failures, how will we track and report the total number of failures ?\n\n/cc @craig-gomes @tpazitny","state":"closed","created_at":"2021-08-25T08:21:35.665Z","updated_at":"2022-03-16T11:38:20.654Z","closed_at":"2021-10-27T09:00:53.576Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Category:Pods","Engineering Productivity","Quality","automation:ml","ci-decomposition","maintenance::pipelines","priority::3","severity::2","type::maintenance"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339309","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339309","notes":"https://gitlab.com/api/v4/projects/278964/issues/339309/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339309/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339309","relative":"#339309","full":"gitlab-org/gitlab#339309"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5840,"epic":{"id":255814,"iid":5840,"title":"Decomposition: Testing and validation strategy","url":"/groups/gitlab-org/-/epics/5840","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92547551,"iid":339306,"project_id":278964,"title":"$CI_COMMIT_REF_NAME outputs incorrect value inside includes: blocks.","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n* When using the `$CI_COMMIT_REF_NAME` predefined variable inside an `include` block in a CI configuration, an incorrect value is output.\n\n* According to [the documentation](https://docs.gitlab.com/ee/ci/variables/predefined_variables.html), `$CI_COMMIT_REF_NAME` should output \"The branch or tag name for which project is built.\", not the full `ref` value, as happens here.\n\nFor example:\n\n- Inside a `script` block on a branch named `master`, the value is the branch name. `master`.\n- Inside an `include` block on a branch named `master`, the value is the full ref: `refs/heads/master`.\n\nThis is an issue for customers using `$CI_COMMIT_REF_NAME` inside a `include.remote` block. \n\n\n### Steps to reproduce\n\n* Create a new project\n* Create a `.gitlab-ci.yml` file like this:\n\n```\nstages:\n  - build\n\nhello_world:\n  stage: build\n  script:\n    - echo $CI_COMMIT_REF_NAME\n\ninclude:\n  - remote: \"https://myrepositoryofthings.com/example?branch_name=$CI_COMMIT_REF_NAME\"\n```\n\n* Note that inside the `remote` key, `$CI_COMMIT_REF_NAME` does not represent the expected value.\n\n\n### Possible fixes\n\nIn `Gitlab::CI::Config`, L138, change the value to reference the branch or tag name, not the full ref.","state":"closed","created_at":"2021-08-25T08:07:57.264Z","updated_at":"2022-09-05T03:03:23.060Z","closed_at":"2022-09-05T03:03:23.043Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ðŸ¤– GitLab Bot ðŸ¤–","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Pipeline Authoring","[deprecated] Accepting merge requests","auto closed","devops::verify","group::pipeline authoring","priority::3","section::ops","severity::3","stale","type::bug","vintage","workflow::scheduling"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339306","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339306","notes":"https://gitlab.com/api/v4/projects/278964/issues/339306/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339306/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339306","relative":"#339306","full":"gitlab-org/gitlab#339306"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92544579,"iid":339303,"project_id":278964,"title":"Add snowplow_enabled to Service ping payload","description":"We could add to Service ping snowplow_enabled to learn how many instances use the Snowplow tracking.\n\nMight be interesting how many instances have the GitLab Snowplow collector set up. This might happen because we had it as an example in docs.\n\nThis would help us understand the number of events we could receive for instances that would have GitLab Snowplow collector configured.\n\n## Requirements\n\n- Add `snowplow_enabled` to Service ping, this metric should be optional.\n- Add `use_giltab_snowplow_collector_hostname` metric to check if we have self managed instances use the GitLab Snowplow collector. \n- Add thetotal number of Snowplow events. Can we have this information?\n\n## Proposal\n\n- Use `Gitlab::CurrentSettings.snowplow_enabled?`\n- Use `Gitlab::CurrentSettings.snowplow_collector_hostname == \"snowplow.trx.gitlab.net\"`","state":"closed","created_at":"2021-08-25T07:14:16.880Z","updated_at":"2021-12-22T17:44:50.881Z","closed_at":"2021-12-07T03:53:22.013Z","closed_by":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"labels":["auto updated","backend","devops::growth","feature::addition","group::product intelligence","section::growth","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339303","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339303","notes":"https://gitlab.com/api/v4/projects/278964/issues/339303/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339303/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339303","relative":"#339303","full":"gitlab-org/gitlab#339303"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92540568,"iid":339299,"project_id":278964,"title":"Classify and fan out cross-database query issues","description":"Next step of #337077.\n\nFor each failing spec in https://gitlab.com/gitlab-org/gitlab/-/blob/8d6e6e652e61aab61f06dc3e07f169de0a0a23d7/.cross-join-allowlist.yml, create issues and fan out to groups\n\n## Background\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/337077, we disallowed any queries that joined between tables in `main:` and `ci:` databases. e.g. (`SELECT * from projects INNER JOIN ci_builds ON ci_builds.project_id = projects.id` is forbidden).\n\nThere are of course existing queries that cross databases. These are allowlisted by allowing the specs that produce them, the list is in [spec/support/database/cross-join-allowlist.yml](spec/support/database/cross-join-allowlist.yml).\n\nIn some cases, the spec allowlist is probably too broad so we switch to using an alternative allowlist method using `allow_cross_joins_across_databases`. This also allows us to annotate with the issue link where we will be fixing the cross-database query.\n\n## Problem\n\nThere are 418 specs allowlisted which means there are at least that many cross-database queries. Potentially, there are no issues opened for these queries, though a majority should have already been discovered from the PoC MR.\n\nEven so, the more `allow_cross_joins_across_databases` places we can add, the less we need to rely on the PoC MR (and stop needing to rebase the PoC MR every so often, which is painful)\n\n## Proposal\n\n1. Gather all candidate call sites - DONE using https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69037\n1. Open relevant issues, and also add `allow_cross_joins_across_databases` where possible. (see https://gitlab.com/gitlab-org/gitlab/-/issues/337077) - DONE\n1. Add `::Gitlab::Database.allow_cross_joins_across_databases` to the offending call sites. - DONE\n1. Write a way to automatically regenerate the `.cross-join-allowlist.yml` allowlist so that we can shrink this over time. - IN PROGRESS We can use https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69037 for now\n\n\n## New issues opened\n\n* https://gitlab.com/gitlab-org/gitlab/-/issues/339429\n* https://gitlab.com/gitlab-org/gitlab/-/issues/339621\n* https://gitlab.com/gitlab-org/gitlab/-/issues/339937\n* https://gitlab.com/gitlab-org/gitlab/-/issues/340188\n* https://gitlab.com/gitlab-org/gitlab/-/issues/343301\n\n#### Existing issue linked\n\n* https://gitlab.com/gitlab-org/gitlab/-/issues/338659\n* https://gitlab.com/gitlab-org/gitlab/-/issues/336891\n* https://gitlab.com/gitlab-org/gitlab/-/issues/335946\n* https://gitlab.com/gitlab-org/gitlab/-/issues/336436\n* https://gitlab.com/gitlab-org/gitlab/-/issues/341796\n* https://gitlab.com/gitlab-org/gitlab/-/issues/336433\n* https://gitlab.com/gitlab-org/gitlab/-/issues/338658","state":"closed","created_at":"2021-08-25T05:19:27.711Z","updated_at":"2021-10-28T08:49:59.565Z","closed_at":"2021-10-26T21:24:42.811Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","devops::systems","missed:14.3","missed:14.4","section::enablement","type::feature"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339299","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339299","notes":"https://gitlab.com/api/v4/projects/278964/issues/339299/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339299/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339299","relative":"#339299","full":"gitlab-org/gitlab#339299"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6168,"epic":{"id":287568,"iid":6168,"title":"Decompose GitLab.com's database to improve scalability","url":"/groups/gitlab-org/-/epics/6168","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92530960,"iid":339284,"project_id":278964,"title":"Follow-up from \"Add ability to easily sanitize attributes\"","description":"The following discussion from !68442 should be addressed:\n\n- [ ] @djadmin started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68442#note_659080709):  (+1 comment)\n\n    \u003e **Questions (non-blocking):**\n    \u003e \n    \u003e 1. Do we really need sanitization for `branch_name` here as the field value is only a selection of pre-created branch names? I ask because it's possible to have branch names with HTML entities and this change will not allow them to use those branch names, well it's impractical (I think :shrug:) to have such names in the first place though.\n    \u003e \n    \u003e    \u003cdetails\u003e\u003csummary\u003escreenshot\u003c/summary\u003e\n    \u003e    ![image](/uploads/884656691059b2349a5498d71f89f26c/image.png)\n    \u003e    \u003c/details\u003e\n    \u003e \n    \u003e 2. I found it interesting how branch names are sanitized at `/{projectPath}/-/branches/new`, for example\n    \u003e \n    \u003e    `\u003cscript\u003ealert(1)\u003c/script\u003e` get converted to `alert(1)` whereas, in our case `Sanitize.fragment` strips it off completely which may lead to ~UX concerns (well again, not in practical scenarios), refer screenshot below\n    \u003e    \u003cdetails\u003e\u003csummary\u003escreenshot\u003c/summary\u003e\n    \u003e    ![image](/uploads/eac1cc1d98dd6e984c519e668076a957/image.png)\n    \u003e    \u003c/details\u003e\n    \u003e \n    \u003e \n    \u003e **Suggestion:** It would be nice to look at the way how branch names are sanitized and if it's worth exploring, feel free to create a follow-up issue for it :slight_smile:","state":"closed","created_at":"2021-08-24T22:54:48.307Z","updated_at":"2022-07-22T03:22:05.529Z","closed_at":"2022-07-22T03:22:05.516Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Category:DAST","backend","devops::secure","group::dynamic analysis","section::sec","type::maintenance"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"}],"author":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"type":"ISSUE","assignee":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339284","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339284","notes":"https://gitlab.com/api/v4/projects/278964/issues/339284/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339284/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339284","relative":"#339284","full":"gitlab-org/gitlab#339284"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":94619597,"iid":342056,"project_id":278964,"title":"[BE] Cloud Licensing - Workflow for Expired Cloud License","description":"## Summary\n\nAfter a license expires, the GitLab instance becomes blocked and git features like pushes are blocked. Here's a link to the docs on this: https://docs.gitlab.com/ee/user/admin_area/license.html#what-happens-when-your-license-expires. When a customer is using a license file they will renew their subscription and upload a new license file to reinstate the features or remove the license file. This will be the same behaviour for cloud licenses, but there is currently no way for a customer to remove a cloud license from their self-managed instance. This issue is to design/investigate the removal of a cloud license. [Original discussion](https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/3215#note_595998053).\n\n## Proposal\n\n- Add a remove license button to the Admin \u003e Subscription page for cloud licenses\n- Follow the same removal flow as legacy licenses\n\nWe should be able to reuse the same endpoint for deleting legacy licenses, [`LicensesController#destroy`](https://gitlab.com/gitlab-org/gitlab/blob/a90ec139423285cd8046a6373603c4b79d85e46d/ee/app/controllers/admin/licenses_controller.rb#L37).  We'll need to update [the `Licenses::DestroyService`](https://gitlab.com/gitlab-org/gitlab/blob/d926e54cc88ad2cba71a3579e033e10954066430/ee/app/services/licenses/destroy_service.rb#L13) to allow cloud licenses to be destroyed.","state":"closed","created_at":"2021-08-24T21:48:35.054Z","updated_at":"2021-10-04T10:17:34.812Z","closed_at":"2021-10-04T10:17:34.795Z","closed_by":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"labels":["Cloud License Sync - V2","[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"}],"author":{"id":7971452,"username":"teresatison","name":"Teresa Tison","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7971452/avatar.png","web_url":"https://gitlab.com/teresatison"},"type":"ISSUE","assignee":{"id":4799322,"username":"cwiesner","name":"Corinna Gogolok","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4799322/avatar.png","web_url":"https://gitlab.com/cwiesner"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/342056","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/342056","notes":"https://gitlab.com/api/v4/projects/278964/issues/342056/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/342056/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#342056","relative":"#342056","full":"gitlab-org/gitlab#342056"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4628,"epic":{"id":127229,"iid":4628,"title":"Cloud Licensing V2","url":"/groups/gitlab-org/-/epics/4628","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92526253,"iid":339274,"project_id":278964,"title":"Update documentation deprecating the existing `vulnerability-check`","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nWith the completion of the first iteration of the scan result policy, `Vulnerability-Check` becomes a deprecated version of the functionality before its removal. \n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [ ] ~backend Add deprecation notice into [Vulnerability-Check](https://docs.gitlab.com/ee/user/application_security/#security-approvals-in-merge-requests) related docs.\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-24T20:55:17.299Z","updated_at":"2022-03-30T18:54:48.802Z","closed_at":"2022-02-22T16:59:00.279Z","closed_by":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","devops::govern","direction","documentation","group::security policies","missed:14.3","missed:14.4","missed:14.5","missed:14.6","missed:14.8","section::sec","secure merge request approval","type::feature","workflow::refinement"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"user_notes_count":27,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339274","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339274","notes":"https://gitlab.com/api/v4/projects/278964/issues/339274/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339274/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339274","relative":"#339274","full":"gitlab-org/gitlab#339274"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6604,"epic":{"id":331936,"iid":6604,"title":"Add `scan_result_policy` as an approval rule functionality","url":"/groups/gitlab-org/-/epics/6604","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92526212,"iid":339273,"project_id":278964,"title":"Update documentation describing the feature (behind a feature flag)","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nAdd documentation describing and providing examples on how to use `scan_result_policy` with the goal of security MR approvals.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] ~backend Add description and how-to similar to what has been done for [scan policies](http://10.0.0.67:3000/help/user/application_security/policies/index.md).\n- [x] ~backend As part of the documentation it is important to mention that the feature is behind a feature flag.\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-08-24T20:54:29.417Z","updated_at":"2022-01-31T03:23:18.520Z","closed_at":"2022-01-25T19:51:06.166Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","devops::govern","direction","documentation","group::security policies","missed:14.3","missed:14.4","missed:14.5","missed:14.6","section::sec","secure merge request approval","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339273","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339273","notes":"https://gitlab.com/api/v4/projects/278964/issues/339273/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339273/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339273","relative":"#339273","full":"gitlab-org/gitlab#339273"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6604,"epic":{"id":331936,"iid":6604,"title":"Add `scan_result_policy` as an approval rule functionality","url":"/groups/gitlab-org/-/epics/6604","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92526111,"iid":339272,"project_id":278964,"title":"Add `scan_result_policy` as part of `orchestration_policy_configuration` into the MR approval logic","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nWe want to consider the new security policy before having a MR set as `approved optional` in similar way it works with the security related approval rules.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n[Approval workflow](https://docs.gitlab.com/ee/development/approval_rules.html#approval-rules-development-guide)\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] ~backend add `scan_result_policy` into existing [MR approval rule logic](https://gitlab.com/gitlab-org/gitlab/-/blob/a1f1fc87b7eb0b94cbb701a71cacb9d8521f190d/ee/app/services/ci/sync_reports_to_approval_rules_service.rb#L89) through [security policy configuration](https://gitlab.com/gitlab-org/gitlab/-/blob/a1f1fc87b7eb0b94cbb701a71cacb9d8521f190d/ee/app/models/ee/project.rb#L105).\n- [x] ~backend update the existing flow for creating MRs \u0026 rules to include `scan_result_policy`\n- [x] ~backend update the existing flow for approving MRs to include `scan_result_policy`\n- [x] ~backend update the existing flow for viewing approval rules in the MRs to include `scan_result_policy`\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-08-24T20:52:56.731Z","updated_at":"2022-04-11T18:29:53.202Z","closed_at":"2021-11-18T20:36:15.697Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","backend","devops::govern","direction","group::security policies","missed:14.3","missed:14.4","section::sec","secure merge request approval","type::feature","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339272","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":4},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339272","notes":"https://gitlab.com/api/v4/projects/278964/issues/339272/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339272/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339272","relative":"#339272","full":"gitlab-org/gitlab#339272"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6604,"epic":{"id":331936,"iid":6604,"title":"Add `scan_result_policy` as an approval rule functionality","url":"/groups/gitlab-org/-/epics/6604","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92526076,"iid":339271,"project_id":278964,"title":"Add `scan_result_policy` as a new security policy type","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nWe want to have the equivalent of the project approval rule (i.e., Vulnerability-Check) as part of the security policies page in order to provide a better user experience and be aligned with the existing policies.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n## Sample policy\n\n```\n---\nscan_execution_policy:\n- name: Enforce DAST in every pipeline\n  description: This policy enforces pipeline configuration to have a job with DAST\n    scan\n  enabled: true\n  rules:\n  - type: pipeline\n    branches:\n    - master\n  actions:\n  - scan: dast\n    site_profile: Scanner Profile A\n    scanner_profile: Site Profile B\nscan_result_policy:\n- name: critical vulnerability CS approvals\n  description: critical severity level only for container scanning\n  enabled: true\n  rules:\n  - type: scan_finding\n    branches:\n    - master\n    scanners:\n    - container_scanning\n    vulnerabilities_allowed: 1\n    severity_levels:\n    - critical\n  - type: scan_finding\n    branches:\n    - master\n    scanners:\n    - dast\n    vulnerabilities_allowed: 1\n    severity_levels:\n    - info\n  - type: scan_finding\n    branches:\n    - master\n    scanners:\n    - container_scanning\n    vulnerabilities_allowed: 10\n    severity_levels:\n    - info\n  actions:\n  - type: require_approval\n    approvals_required: 1\n    approvers:\n    - adalberto.dare\n\n```\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] ~backend Add `scan_result_policy` as a new [security policy type](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/models/security/orchestration_policy_configuration.rb#L21) in accordance with the [current design](https://gitlab.com/gitlab-org/gitlab/-/issues/334848/designs/approval-policy-tokens.png) and [existing code](https://gitlab.com/gitlab-org/gitlab/-/blob/2144154dad548d5538ea4bb24961245eb8873853/ee/app/models/approval_project_rule.rb#L28-35).\n- [x] ~backend Update [controller](https://gitlab.com/gitlab-org/gitlab/-/blob/2144154dad548d5538ea4bb24961245eb8873853/ee/app/controllers/projects/security/policies_controller.rb) and [related services](https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/app/services/security/security_orchestration_policies) so only the required services consider `scan_result_policy`  \n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-08-24T20:51:02.633Z","updated_at":"2021-11-22T03:21:57.789Z","closed_at":"2021-11-18T20:34:03.387Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","backend","devops::govern","direction","group::security policies","missed:14.3","missed:14.4","section::sec","secure merge request approval","type::feature","workflow::in review"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339271","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339271","notes":"https://gitlab.com/api/v4/projects/278964/issues/339271/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339271/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339271","relative":"#339271","full":"gitlab-org/gitlab#339271"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6604,"epic":{"id":331936,"iid":6604,"title":"Add `scan_result_policy` as an approval rule functionality","url":"/groups/gitlab-org/-/epics/6604","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92526063,"iid":339270,"project_id":278964,"title":"Add feature flag for the new security policy type","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nThis is so we can implement the new security policy type without disrupting any of the existing functionalities.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] ~backend create a new feature flag according to our [feature flag docs](https://docs.gitlab.com/ee/development/feature_flags/index.html).\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-08-24T20:50:23.948Z","updated_at":"2021-11-22T03:21:57.827Z","closed_at":"2021-11-18T20:32:30.268Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Enterprise Edition","backend","devops::govern","direction","group::security policies","missed:14.3","section::sec","secure merge request approval","type::feature","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339270","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339270","notes":"https://gitlab.com/api/v4/projects/278964/issues/339270/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339270/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339270","relative":"#339270","full":"gitlab-org/gitlab#339270"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6604,"epic":{"id":331936,"iid":6604,"title":"Add `scan_result_policy` as an approval rule functionality","url":"/groups/gitlab-org/-/epics/6604","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92505203,"iid":339232,"project_id":278964,"title":"Re-add test that `job_token_scope_enabled` defaults to true","description":"The following discussion from !68577 should be addressed:\n\n- [ ] @avielle started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68577#note_659290299): \n\n    \u003e This spec passes locally but not on CI. I suspect this has to do with whether migrations have been run or not in the test environment. I'll re-add it once this MR is merged","state":"closed","created_at":"2021-08-24T13:47:13.774Z","updated_at":"2021-10-28T13:53:21.411Z","closed_at":"2021-08-31T15:28:05.809Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","backend","devops::verify","group::pipeline execution","section::ops","type::maintenance"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339232","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339232","notes":"https://gitlab.com/api/v4/projects/278964/issues/339232/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339232/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339232","relative":"#339232","full":"gitlab-org/gitlab#339232"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92504963,"iid":339230,"project_id":278964,"title":"Rearrange pipeline index page layout to create more space","description":"### Release notes\n\nGitLab values efficiency. We want to empower you to easily navigate our platform especially GitLab jobs and pipelines. You may have noticed how many columns and options are in the Jobs and Pipeline index views, which makes it difficult to understand what information is relevant to your GitLab CI. Now, we have restructured these views so you can quickly get the information about status, name of pipelines, related pipeline information such as merge request IDs as well as commit SHAs. \n\n## ðŸ§© Problem statement\n\nThe layout of the pipeline and job index page have turned fragile due to lack of space. Rethink the layout and eliminate and rearrange content based on their usefulness.\n\n\u003e @v_mishra Could we do something with the `Triggerer` column? Somehow move that data somewhere else? \n\n## âœ¨Proposed solution\n\n![image](/uploads/9cbcb6d7d17b3af7f99bc66342be047b/image.png)\n\nRelated to #338899.","state":"closed","created_at":"2021-08-24T13:43:23.681Z","updated_at":"2022-12-19T16:59:11.657Z","closed_at":"2022-01-28T16:03:55.590Z","closed_by":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"labels":["Actionable Insight::Exploration needed","Category:Continuous Integration","Deliverable","GitLab Core","GitLab Free","SUS::Impacting","UI polish","UX","Verify::P1","auto updated","closed::complete","devops::verify","frontend","group::pipeline execution","missed-deliverable","missed:14.7","release post","release post item","release post item::in review","section::ops","severity::4","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"}],"author":{"id":6115425,"username":"v_mishra","name":"Veethika M","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f09a3a0badac17a57e28b4e18a45c1c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/v_mishra"},"type":"ISSUE","assignee":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"user_notes_count":56,"merge_requests_count":0,"upvotes":0,"downvotes":1,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339230","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339230","notes":"https://gitlab.com/api/v4/projects/278964/issues/339230/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339230/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339230","relative":"#339230","full":"gitlab-org/gitlab#339230"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92499854,"iid":339213,"project_id":278964,"title":"Create feature flag for improved container scanning matching","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Description\n\nNew feature flag has to be created (`improved_container_scan_matching`) \n\n## Relevant links\n\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/5577)\n\n## Implementation plan\n- [ ] ~backend Introduce new feature flag `improved_container_scan_matching`\n- [ ] ~backend Create roll-out issue","state":"closed","created_at":"2021-08-24T12:18:17.506Z","updated_at":"2021-09-15T07:40:25.735Z","closed_at":"2021-09-15T07:40:25.710Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Container Scanning","[deprecated] Accepting merge requests","auto updated","backend","devops::govern","feature flag","feature::addition","group::security policies","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339213","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339213","notes":"https://gitlab.com/api/v4/projects/278964/issues/339213/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339213/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339213","relative":"#339213","full":"gitlab-org/gitlab#339213"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5577,"epic":{"id":223714,"iid":5577,"title":"Custom Container Scanning Vulnerability Deduplication","url":"/groups/gitlab-org/-/epics/5577","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92488013,"iid":339192,"project_id":278964,"title":"Remove `token` column from `ci_builds`","description":"We're requiring the token for CI jobs to be encrypted all the time since https://gitlab.com/gitlab-org/gitlab/-/issues/332284 and this means that it's using the `token_encrypted` column to store the data.\n\nWe should drop the `token` column because it's not used anymore and it will reduce the `ci_builds` table size.\n\n## Progress\n\nThe column removal needs to follow a [three step process to avoid downtime](https://docs.gitlab.com/ee/development/database/avoiding_downtime_in_migrations.html#dropping-columns):\n\n- Ignoring the column https://gitlab.com/gitlab-org/gitlab/-/merge_requests/91047 :white_check_mark: in %\"15.2\" \n- Dropping the column https://gitlab.com/gitlab-org/gitlab/-/merge_requests/92894 :white_check_mark: in %\"15.3\" \n- Removing the ignore rule https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96258 :white_check_mark: in %\"15.4\"","state":"closed","created_at":"2021-08-24T09:08:38.002Z","updated_at":"2022-08-26T20:32:53.348Z","closed_at":"2022-08-26T07:45:08.605Z","closed_by":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"labels":["Category:Continuous Integration","backend","devops::verify","group::pipeline execution","section::ops","type::maintenance","verify-hackathon::delete-fest","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"}],"author":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"type":"ISSUE","assignee":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339192","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339192","notes":"https://gitlab.com/api/v4/projects/278964/issues/339192/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339192/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339192","relative":"#339192","full":"gitlab-org/gitlab#339192"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92487867,"iid":339191,"project_id":278964,"title":"Remove `index_ci_builds_on_token_partial` index from `ci_builds`","description":"We're requiring the token for CI jobs to be encrypted all the time since https://gitlab.com/gitlab-org/gitlab/-/issues/332284 and we should drop the `index_ci_builds_on_token_partial` index because it's not used anymore and it will reduce the `ci_builds` table size.","state":"closed","created_at":"2021-08-24T09:05:49.252Z","updated_at":"2022-07-21T23:12:02.815Z","closed_at":"2022-07-20T06:05:09.285Z","closed_by":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"labels":["Category:Continuous Integration","backend","devops::verify","group::pipeline execution","missed:15.2","section::ops","type::maintenance","verify-hackathon::delete-fest","workflow::production"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"}],"author":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"type":"ISSUE","assignee":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339191","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339191","notes":"https://gitlab.com/api/v4/projects/278964/issues/339191/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339191/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339191","relative":"#339191","full":"gitlab-org/gitlab#339191"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92483772,"iid":339181,"project_id":278964,"title":"[Feature flag] Remove restructured_mr_widget feature flag","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\n**Status:** This flag was set to default ON in 15.1. This issue tracks now the removal of the flag from the code.\n\n---\n\nThis issue is to rollout [the feature](ISSUE LINK) on production,\nthat is currently behind the `restructured_mr_widget` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::code review\" \n- Most appropriate slack channel to reach out to: `#g_create_code-review`\n- Best individual to reach out to: `@iamphill`\n- PM: NAME\n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [ ] Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [ ] Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [ ] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-08-24T08:06:30.503Z","updated_at":"2022-08-21T12:01:25.092Z","closed_at":"2022-07-26T14:42:44.822Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","auto updated","devops::create","feature","feature flag","frontend","group::code review","missed-deliverable","missed:14.10","missed:14.8","missed:15.0","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":41,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339181","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339181","notes":"https://gitlab.com/api/v4/projects/278964/issues/339181/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339181/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339181","relative":"#339181","full":"gitlab-org/gitlab#339181"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5589,"epic":{"id":224926,"iid":5589,"title":"Restructure MR merge widget","url":"/groups/gitlab-org/-/epics/5589","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92454915,"iid":339148,"project_id":278964,"title":"Service desk setting relation is marked to be exported only on EE","description":"We moved service desk feature to CE, but `service_desk_setting` relation is marked to be exported  \nonly on EE version, check https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/import_export/project/import_export.yml#L457.   \n\nWe should move the relation to be exported on CE.  \n\nAlso, check if `file_from_project_id,` added on https://gitlab.com/gitlab-org/gitlab/-/merge_requests/67546 field can be allow listed.","state":"closed","created_at":"2021-08-23T18:51:18.781Z","updated_at":"2023-01-12T00:33:13.529Z","closed_at":"2021-08-30T21:08:20.278Z","closed_by":{"id":1933526,"username":"leetickett","name":"Lee Tickett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1933526/avatar.png","web_url":"https://gitlab.com/leetickett"},"labels":["Category:Service Desk","backend","devops::plan","feature::addition","group::respond","section::dev","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},{"id":1933526,"username":"leetickett","name":"Lee Tickett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1933526/avatar.png","web_url":"https://gitlab.com/leetickett"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339148","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339148","notes":"https://gitlab.com/api/v4/projects/278964/issues/339148/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339148/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339148","relative":"#339148","full":"gitlab-org/gitlab#339148"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92454269,"iid":339145,"project_id":278964,"title":"Annual pentest finding (2021) - Change Email Address without Re-authentication","description":"# Location\n\n`https://gitlab.com/-/profile (user_email)`\n\n# Impact\nChange of the userâ€™s email address without confirming their identity via their password or old email address could lead to an account takeover, in this case though it would only be possible from the local system and is more of a possibility due to finding NCC-GTLB002-008 on page 13, as an attacker with access to the local system could gain access to the account and make changes. \n\n# Description\nGitlab.com provided a method for users to change their email address through normal func tionality, but did not require the current password to be submitted for the address to be changed, an email is sent to the new email address for confirmation, but no email is sent to the old email address to confirm the change was wanted. \nIf there is no requirement to submit the current password, an attacker who had hijacked a legitimate userâ€™s session could take over the userâ€™s account by changing the email address to an arbitrary value and subsequently triggering a password reset. \nDue to a confirmation email sent to the userâ€™s original email address, this issue has been lowered to a low from a medium, this is due to the possibility that an attacker is changing the email address on a system that the user has left unattended with a high chance of their email account open.\n\n\n# Recommendation\nAny changes to a user account should require the userâ€™s current password. \n\n# Reference\n\nOWASP - Require Re-authentication for Sensitive FeaturesÂ¶ https://cheatsheetseries.owasp.org/cheatsheets/A uthentication_Cheat_Sheet.html#require-re-authentication-for-sensitive-features","state":"closed","created_at":"2021-08-23T18:33:26.143Z","updated_at":"2022-01-20T11:08:36.277Z","closed_at":"2021-10-05T08:13:36.844Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["Category:Authentication and Authorization","Epic 6340","FY21::Q3","auto updated","devops::manage","group::authentication and authorization","priority::4","section::dev","security","severity::4","type::feature","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":1895698,"username":"jritchey","name":"James Ritchey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1895698/avatar.png","web_url":"https://gitlab.com/jritchey"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339145","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339145","notes":"https://gitlab.com/api/v4/projects/278964/issues/339145/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339145/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339145","relative":"#339145","full":"gitlab-org/gitlab#339145"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92453067,"iid":339142,"project_id":278964,"title":"FE: Follow-up from \"Add support for non-cilium network policies\"","description":"The following discussion from !68497 should be addressed:\n\n- [x] @psimyn started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68497#note_657507672):  (+1 comment)\n\n    \u003e won't this return true for any yaml file containing the string `NetworkPolicy`? (even in a description field or something)","state":"closed","created_at":"2021-08-23T18:07:27.355Z","updated_at":"2021-09-18T07:03:20.996Z","closed_at":"2021-08-25T20:20:54.145Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Deliverable","auto updated","devops::govern","frontend","frontend-weight::2","group::security policies","maintenance::refactor","section::sec","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339142","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339142","notes":"https://gitlab.com/api/v4/projects/278964/issues/339142/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339142/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339142","relative":"#339142","full":"gitlab-org/gitlab#339142"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5363,"epic":{"id":198785,"iid":5363,"title":"Allow Users to Edit Rule-mode Scan Execution Policies in the Policy UI","url":"/groups/gitlab-org/-/epics/5363","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92442491,"iid":339129,"project_id":278964,"title":"Caching in cleanup policy background jobs","description":"## :fountain: Context\n\nWith time, the [container registry](https://docs.gitlab.com/ee/user/packages/container_registry/) accumulates container image tags. Those tags take physical space on object storage.\n\nTo counter that, we implemented [cleanup policies](https://docs.gitlab.com/ee/user/packages/container_registry/#cleanup-policy). Basically, users will create a set of filters that will allow the backend to distinguish between a tag that needs to be kept and a tag that can be destroyed.\n\nCleanup policies are executed by background jobs periodically. There is a cadence value that users can set but to keep simple, let's say that ~backend will run the policies daily.\n\nNow, container image tags don't live in the rails backend ~database. Those objects live directly in the container registry. So, when the ~backend runs a policy against a container image, it has to contact the container registry (through an API) and get all the information/data about tags.\n\nLet's detail, these interactions (simplified)\n\n```mermaid\nsequenceDiagram\n    autonumber\n    rails cleanup tags service-\u003e\u003erails cleanup tags service: Run the cleanup policy on this container image X\n    rails cleanup tags service-\u003e\u003econtainer registry: Give me all the tags of container image X\n    container registry-\u003e\u003erails cleanup tags service: Array of tag names\n    rails cleanup tags service-\u003e\u003erails cleanup tags service: Apply filters F1 on the array of tag names\n    loop **For each tag name**\n      rails cleanup tags service-\u003e\u003econtainer registry: get the created at timestamp\n      container registry-\u003e\u003erails cleanup tags service: return the created at timestamp\n    end\n    rails cleanup tags service-\u003e\u003erails cleanup tags service: Apply filters F2 on tags with created at\n    rails cleanup tags service-\u003e\u003erails delete tags service: hey delete these tags!\n    rails delete tags service-\u003e\u003erails cleanup tags service: ok\n```\n\n* F1: this set of filters is set on the tag names (such as a regex)\n* F2: these need the `created_at` as they are filters that need to work on the tag list ordered by `created_at`\n\nYou can see in the interactions above that `F2` triggers a loop where the ~backend will trigger one API call per tag to get the `created_at` of a given tag. Please understand, that these are the constraints we need to work with. At some point, container registry updates will unlock evolutions such as returning the list of tags with their name _and_ their `created_at` field in a single API call. Until we have those updates, we need to work with two API endpoints: one to get the list of tags (only names) and one to get the `created_at` of a tag.\n\nTo complete this context, understand that container image tags are mutable. Users can delete them and make them point to a different image. The constraint here is that they do this by interacting directly with the container registry. As such, the rails ~backend has no clue of what happened with a tag.\n\n## :boom: Problem\n\nThe main issue is that F2 removes so many tags that the resulting list of tags (eg. list of tags to destroy) is empty.\n\nSee this [Kibana dashboard](https://log.gprd.gitlab.net/goto/e4f324ada962811b32178cc99e878e4c). We're not going into the details of that dashboard but look at how much `Deleting tags` we have. The related ratio with that section is super small. In other words, in the majority of the jobs execution, we do all these API calls to the container registry for..... :drum: .... nothing (empty list of tags to destroy).\n\nThis is not efficient at all.\n\n[Here](https://log.gprd.gitlab.net/goto/ccc215af3598ec70a6bcfd3efb0ae158) is the p95 of `external_http_count` of the last 24 hours for jobs that didn't destroy any tag.\n\n## :hammer: Solution\n\nThe proposed solution here aims to reduce the loop of pings to get `created_at`s. This will make the background job more efficient and so the ~backend will make a better use of its background resources.\n\nThe idea is to have a cache for some tags (not all of them). We need to be extra cautious with what we cache because as presented in the context, tags are mutable objects and the rails ~backend is not notified when a tag is \"updated\". In other words, caching a tag can be dangerous because we easily have stale data in cache.\n\nLet's see if we can workaround those limitations. Here are the updated steps around F2 in the `cleanup_tags_service.rb`:\n1. Receives the result of F1 (array of tag names)\n1. Read the `older_than` parameter from the cleanup policy\n1. Remove from the cache, all entries older than `older_than`\n1. For each tag, check the cache and fill the `created_at`\n1. For each tag without the `created_at`, ping the container registry\n1. Apply F2 filters\n1. For each tag _**filtered out**_, create a new cache entry for the tag with their `created_at` if a cache entry doesn't exist\n\nI will emphasize here that cache entries are only created for tags that are kept or filtered out by F2. Why? Because, there is no sense in creating a cache entry for a tag that is going to be destroyed.\n\nA few things to note:\n* Cache entries have a TTL. I choose to use the cleanup policy `older_than` parameter but we could chose something shorter such as `older_than` / 2.\n* The job itself will not evict cache entries\n* Optional: the job could log the cache hit ratio\n\nWhy this custom cache logic works with the mutable nature of tags. Because, we snapshot the `created_at` field for tags that we want to keep and when it's time to destroy the tag, we don't destroy the tag itself but the cache entry. This is to \"force\" the job to ping the container registry to get the latest `created_at` = the job destroys tags with information that comes *only* from the container registry.\n\nBy avoiding using the stale data, the job will support any tag mutation. Here is an example (assuming `older_than` = 90 days): \n\n* `T`: the tag `t` is created.\n* `T + 1.day`: the job runs and caches `T` for tag `t`.\n* `T + 10.days`: the tag is destroyed.\n* `T + 20.days`: the tag is recreated (same name).\n* `T + 91.days`\n   * the job runs and remove the cache entry for `t` (T is older that `older_than`.).\n   * the job pings the container registry for `t` and receives `T + 20.days`.\n   * the job filter out `t` (`T + 20.days` is within `older_than`).\n   * the job creates a new cache entry with `T + 20.days` for tag `t`.\n\nThe tag mutation didn't lead the job to a wrong decision. The cache was properly updated with the new `created_at`.\n\n### :bulb: Technical details ideas\n\nThe cache itself can be implemented in two ways:\n* redis\n* regular database table\n\nIt has to support the following operations:\n1. Create an entry with: container image id, tag name, `created_at`\n1. Get the entry for a given container image id and tag name\n1. Given a container image id, remove all the cache entries where `created_at` is \u003c `Time.now - policy.older_than`\n\nHere are some numbers from ~\"gitlab.com\":\n* ~50K container images are processed by cleanup policies\n   * keep in mind that we're rolling out the cleanup policies for all projects and this number will only increase\n* before applying F1, we truncate the list of tags to max 200\n* so, the worst case scenario will be handling 50K * 200 cache entries\n\nRedis feels better geared at this problem than a database. Operation (3.) can be implemented with a TTL in the redis key directly = the job doesn't have to evict the cache entries, redis will do automatically that for us.\n\nThe amount of data to be cached can be a concern. As such, I would suggest using a ~\"feature flag\" to \"mark\" projects (or namespaces) that can use this cache feature.\n\n### :gear: Implementation\n\nFollowing https://gitlab.com/gitlab-org/gitlab/-/issues/339129#note_660056458, redis is a better candidate for what we want to do.\n\n* Step (3.) There is no need for this step with redis. Using [SET](https://redis.io/commands/set), we can set an expiration time. In other words, redis itself will handle this part for us.\n* Step (4.) To get the value from the cache, we can use [GET](https://redis.io/commands/get). Nothing special here.\n* Step (7.) To set a value, we can use [SET](https://redis.io/commands/set) as described above.\n   * Regarding the TTL, it should be `created_at + older_than`\n\nThe key for [SET](https://redis.io/commands/set) and [GET](https://redis.io/commands/get) should be: `container_repository:{\u003cid\u003e}:cleanup_tag:\u003ctag name\u003e`. The container image id and the tag name **must be** part of the key. The value is, well, the `created_at` value :smiley_cat: \n\n:warning: Gotchas\n* Avoid n+1 redis operations since we're looping on a list of tags.\n   * For this use [redis pipelines](https://redis.io/topics/pipelining).","state":"closed","created_at":"2021-08-23T15:37:45.709Z","updated_at":"2022-02-17T12:34:45.401Z","closed_at":"2021-10-12T15:17:58.879Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Container Registry","Category:Package Registry","auto updated","backend","bug::performance","devops::package","group::package registry","package:active","package:scaling","ruby","section::ops","workflow::staging"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":33,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339129","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339129","notes":"https://gitlab.com/api/v4/projects/278964/issues/339129/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339129/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339129","relative":"#339129","full":"gitlab-org/gitlab#339129"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92440694,"iid":339125,"project_id":278964,"title":"Artifacts dropdown shows `No artifacts found` while loading artifacts","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen clicking on the artifacts dropdown on the pipelines table, the dropdown shows `No artifacts found` even when the artifacts are still loading. This is a bit confusing for the user. The message disappears once the artifacts are loaded.\n\n### Steps to reproduce\n\n1. Go to [the pipelines page](https://gitlab.com/gitlab-org/gitlab/-/pipelines?scope=finished\u0026page=1)\n1. Click on the dropdown with the vertical ellipsis icon\n1. See that the `No artifacts found` message appears while the spinner icon is also there.\n\n### Example Project\n\n[GitLab](https://gitlab.com/gitlab-org/gitlab/-/pipelines?scope=finished\u0026page=1)\n\n### What is the current *bug* behavior?\n\n`No artifacts found` is shown when the artifacts are still loading.\n\n\n### What is the expected *correct* behavior?\n\nWe should just see the spinner icon. The `No artifacts found` should show up if no artifacts are returned by the request.\n\n### Relevant logs and/or screenshots\n\n![artifacts dropdown bug example video](/uploads/1d722d33def92a0817cef24e1c0948f3/artifacts_dropdown.mp4)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Possible fixes\n\nInstead of doing a `v-if` on whether there are any artifacts, we should do one on an extra boolean that is only set after the request for artifacts has finished.","state":"closed","created_at":"2021-08-23T15:01:28.178Z","updated_at":"2021-09-15T16:57:27.991Z","closed_at":"2021-09-15T16:57:27.976Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Build Artifacts","devops::verify","group::pipeline insights","priority::3","section::ops","severity::4","type::bug","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339125","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339125","notes":"https://gitlab.com/api/v4/projects/278964/issues/339125/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339125/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339125","relative":"#339125","full":"gitlab-org/gitlab#339125"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92435107,"iid":339116,"project_id":278964,"title":"Unify CommitStatus preloading","description":"We have a few places where we preload commit status relations. In this issue, we'll unify them.\n\nExamples;\n\n```ruby\npreloaders = {\n  ::Ci::Build =\u003e [:metadata, :tags, :job_artifacts_archive],\n  ::Ci::Bridge =\u003e [:metadata, :downstream_pipeline],\n  ::GenericCommitStatus =\u003e []\n}\n\npreloaders.each do |klass, relations|\n  ActiveRecord::Associations::Preloader\n    .new\n    .preload(statuses.select { |job| job.is_a?(klass) }, relations + common_relations)\nend\n```\n\n```ruby\nretry_lock(cancelable_statuses, retries, name: 'ci_pipeline_cancel_running') do |cancelables|\n  cancelables.find_in_batches do |batch|\n    ActiveRecord::Associations::Preloader.new.preload(batch, commit_status_relations)\n    ActiveRecord::Associations::Preloader.new.preload(batch.select { |job| job.is_a?(Ci::Build) }, ci_build_relations)\n\n    batch.each do |job|\n      yield(job) if block_given?\n      job.cancel\n    end\n  end\nend\n```\n\n```ruby\ndef preload_associations_for_drop(commit_status_batch)\n  ActiveRecord::Associations::Preloader.new.preload(commit_status_batch, PRELOADED_COMMIT_STATUS_RELATIONS)\n  ActiveRecord::Associations::Preloader.new.preload(commit_status_batch.select { |job| job.is_a?(Ci::Build) }, PRELOADED_CI_BUILD_RELATIONS)\nend\n```","state":"closed","created_at":"2021-08-23T13:39:09.729Z","updated_at":"2021-10-28T13:53:23.568Z","closed_at":"2021-09-07T07:40:50.502Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["backend","devops::verify","group::pipeline authoring","maintenance::refactor","section::ops","type::maintenance","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339116","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339116","notes":"https://gitlab.com/api/v4/projects/278964/issues/339116/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339116/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339116","relative":"#339116","full":"gitlab-org/gitlab#339116"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92429147,"iid":339111,"project_id":278964,"title":"Rename `service_id` foreign keys to `integration_id`","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nThis is part of the [epic to rename \"services\" to \"integrations\"](https://gitlab.com/groups/gitlab-org/-/epics/2504).\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\nRename the `service_id` columns to `integration_id`. This column exists in these tables:\n\n- [x] `chat_names` (+2 indexes)\n- [x] `issue_tracker_data` (+1 index)\n- [x] `jira_tracker_data` (+1 index)\n- [-] `open_project_tracker_data` (+1 index)\n  - We plan to remove this integration in https://gitlab.com/gitlab-org/gitlab/-/issues/330832, so we don't really need to rename this column.\n- [x] `slack_integrations` (+1 index)\n- [x] `web_hooks` (+1 index)\n\nIt'll probably make sense to create one MR per table.\n\nFor the new `zentao_tracker_data` table we're already using `integration_id`, once all other tables have the same name we can refactor the `ZentaoTrackerData` model introduced in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/67941 to use the `BaseDataFields` concern as well.\n\n## Involved components\n\n\u003c!--\nList files or directories that will be changed by the refactoring.\n--\u003e\n\n- `app/models/concerns/integrations/base_data_fields.rb`\n- `app/models/concerns/integrations/has_data_fields.rb`\n\nThe foreign key is defined as `:service_id` at https://gitlab.com/gitlab-org/gitlab/blob/21db2a36c42dadec7c3bea82ed85daa66eaf6aa0/app/models/concerns/integrations/base_data_fields.rb#L10\n\nFor the Zentao integration we tried using `BaseDataFields` and overriding the `belongs_to` association in `ZentaoTrackerData`, but this didn't work out. So in the end we just duplicated the code from `BaseDataFields` in `ZentaoTrackerData`, and might have to do something similar for the other models.\n\n\u003c!--\nPlease select the appropriate label from the following:\n    ~\"feature::addition\"\n    ~\"feature::maintenance\"\n    ~\"tooling::pipelines\"\n    ~\"tooling::workflow\"\n--\u003e","state":"closed","created_at":"2021-08-23T12:09:58.166Z","updated_at":"2022-11-22T19:35:23.586Z","closed_at":"2022-09-29T07:13:10.735Z","closed_by":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"labels":["Category:Integrations","backend","database","devops::manage","group::integrations","missed:15.2","missed:15.3","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339111","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339111","notes":"https://gitlab.com/api/v4/projects/278964/issues/339111/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339111/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339111","relative":"#339111","full":"gitlab-org/gitlab#339111"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":92415656,"iid":339097,"project_id":278964,"title":"Merge request discussion cache causes resolve permissions to be stale","description":"In MR discussions, a Developer can resolve any note while a Guest can only resolve notes that they authored.\n\nWhen the user's permission is changed, the cache is not invalidated. So if a Developer is downgraded to Guest, the Resolve button is still shown but does nothing (fails on the backend).\n\nThe opposite can also happen. A user could be upgraded from Guest to Developer and the resolve buttons won't be visible.","state":"closed","created_at":"2021-08-23T08:47:16.803Z","updated_at":"2021-10-05T05:08:50.674Z","closed_at":"2021-09-21T05:05:22.122Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["backend","devops::create","feature flag","group::code review","missed:14.3","section::dev","severity::3","type::bug"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339097","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339097","notes":"https://gitlab.com/api/v4/projects/278964/issues/339097/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339097/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339097","relative":"#339097","full":"gitlab-org/gitlab#339097"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6362,"epic":{"id":308706,"iid":6362,"title":"Further cache responses of endpoints used in merge request page","url":"/groups/gitlab-org/-/epics/6362","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92404726,"iid":339088,"project_id":278964,"title":"Remove DastSiteValidationWorker","description":"## Problem\n\n`DastSiteValidation` worker was converted to a noop in %\"14.3\" after moving validation to the runner.\n\n## Solution\n\nRemove the worker.","state":"closed","created_at":"2021-08-23T04:58:34.723Z","updated_at":"2022-06-01T03:06:47.053Z","closed_at":"2022-06-01T03:06:46.998Z","closed_by":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"labels":["Category:DAST","backend","devops::secure","group::dynamic analysis","maintenance::refactor","missed:15.0","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"}],"author":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"type":"ISSUE","assignee":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339088","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339088","notes":"https://gitlab.com/api/v4/projects/278964/issues/339088/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339088/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339088","relative":"#339088","full":"gitlab-org/gitlab#339088"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92397527,"iid":339078,"project_id":278964,"title":"Define image name pattern for container scanning reports","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nWe want to use the container scanning security report schema to enforce the format of the `image` name, thus preventing errors such as [`NoMethodErrorSidekiq`](https://sentry.gitlab.net/gitlab/gitlabcom/issues/2748081/), \n\n\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\nWe don't have to implement the whole [docker image specification](https://github.com/moby/moby/blob/master/image/spec/v1.2.md) because it's not our concern to determine whether a given image name is valid or not. Our concern is to ensure [assumptions made in Rails](https://sentry.gitlab.net/gitlab/gitlabcom/issues/2748081/) are valid.\n\nTo this end, a [simple `pattern` should suffice](https://gitlab.com/gitlab-org/security-products/security-report-schemas/-/commit/91e497e35f8a494953f30465f0a9926048ecb31e):\n\n```diff\n        \"image\": {\n          \"type\": \"string\",\n-         \"minLength\": 1,\n+         \"pattern\": \"^[a-zA-Z0-9_.-]+:[a-zA-Z0-9_.-]+$\",\n\n```\n\n- [x] add the change to the relevant security report schema\n- [ ] release a new version of the schemas\n\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-08-22T22:43:10.524Z","updated_at":"2022-08-10T14:42:57.179Z","closed_at":"2021-12-09T14:49:00.187Z","closed_by":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"labels":["Category:Container Scanning","devops::govern","group::security policies","maintenance::refactor","missed:14.4","missed:14.5","section::sec","type::maintenance","workflow::in dev"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago FigueirÃ³","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339078","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339078","notes":"https://gitlab.com/api/v4/projects/278964/issues/339078/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339078/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339078","relative":"#339078","full":"gitlab-org/gitlab#339078"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92347348,"iid":339046,"project_id":278964,"title":"Rename `Scanner` in Pipeline Security Report Modal to `Tool`","description":"### Summary\n\nWe currently miscategorize `Scan Type` as `Scanner` on the Pipeline Security Report (MR security widget) modal. This term has already been updated to `Tool` on the Pipeline Vulnerability Report as well as all other Vulnerability Reports \u0026 the Vulnerability Details page. \n\nThe \"Scan Type\" should be our categories such as `sast` or `dependency scanning` where-as the \"Scanner\" refers to the underlying tool reporting the findings; i.e. `gosec` or `gemnasium`. This can be confusing and is incongruent with the vulnerability details page, where we list the scanner correctly (see screenshot below)\n\nSee Secure Glossary MR for more on the distinction: https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/49901/diffs\n\nAdditionally, there will be future sources of vulnerability data that does not come from a scanner/pipeline job. For example, we will soon have the ability to add vulnerability objects by manually creating them or doing so directly via API. This adds further weight to `Scanner` being an inappropriate name for the vulnerability source. To be more clear and more inclusive, we will instead rename this column to `Tool`.\n\n### Steps to reproduce\n\n* Visit https://gitlab.com/gitlab-examples/security/security-reports/-/merge_requests/60\n* Expand the MR Security Widget \u0026 select any finding \n* Observe the datapoint `Scanner`, this should read `Tool` \n\n### Example Project\n\nhttps://gitlab.com/gitlab-examples/security/security-reports/-/merge_requests/60\n\n### What is the current behavior?\n\nWe display the \"Scan Type\" under the heading of \"Scanner\"\n\n### What is the desired behavior?\n\nWe display the report type data with the updated heading of \"Tool\"\n\n### Relevant logs and/or screenshots\n\n![image](/uploads/c7d42ca5ba71efe47ed5b43b388dcf8b/image.png)\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Implementation Plan\n\n- [ ] TBD\n- [ ] Update documentation screenshots and references for the Pipeline Security Report modal.","state":"closed","created_at":"2021-08-20T18:40:17.114Z","updated_at":"2021-08-23T17:12:24.382Z","closed_at":"2021-08-23T17:12:24.359Z","closed_by":{"id":4906978,"username":"lkerr","name":"Lindsay Kerr","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906978/avatar.png","web_url":"https://gitlab.com/lkerr"},"labels":["Category:Vulnerability Management","UX","devops::secure","documentation","feature::enhancement","frontend","good for new contributors","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"}],"author":{"id":4906978,"username":"lkerr","name":"Lindsay Kerr","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906978/avatar.png","web_url":"https://gitlab.com/lkerr"},"type":"ISSUE","assignee":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339046","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339046","notes":"https://gitlab.com/api/v4/projects/278964/issues/339046/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339046/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339046","relative":"#339046","full":"gitlab-org/gitlab#339046"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92344567,"iid":339039,"project_id":278964,"title":"[External Status Checks] Replace \"approved\" with \"passed\" in API responses","description":"## Problem to solve\n\nExternal Status Checks briefly used the term \"approved\" before we [changed to use the term \"passed\"](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68491).  During that brief time, \"approved\" was used in the API (see `\"status\": \"approved\"` in [documentation examples](https://docs.gitlab.com/ee/api/status_checks.html)).  Now we have mixed use of pending/approved and pending/pass/fail.\n\n## Proposal\n\nReplace \"approved\" with \"passed\" in External Status Checks API responses and documentation as [discussed](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68491#note_654384086) [elsewhere](https://gitlab.com/gitlab-org/gitlab/-/issues/329636#note_654394212).","state":"closed","created_at":"2021-08-20T17:15:53.708Z","updated_at":"2022-05-09T10:32:08.170Z","closed_at":"2022-05-09T10:32:08.149Z","closed_by":{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"},"labels":["api","backend","breaking change","devops::manage","documentation","feature::enhancement","group::compliance","priority::1","section::dev","type::feature","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339039","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339039","notes":"https://gitlab.com/api/v4/projects/278964/issues/339039/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339039/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339039","relative":"#339039","full":"gitlab-org/gitlab#339039"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92343639,"iid":339036,"project_id":278964,"title":"Follow-up from \"Fix namespace checks for live quota consumption\"","description":"The following discussions from !68646 should be addressed:\n\n- [ ] @fabiopitino started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68646#note_656349369): \n\n    \u003e we should also have examples here when public cost factor is non-zero for instance type runners.\n\n- [ ] @fabiopitino started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68646#note_656349370): \n\n    \u003e we should have here an example when private cost factor is zero for private runners.\n    \u003e \n    \u003e Here are some extra tests we can add:\n    \u003e \n    \u003e ```diff\n    \u003e diff --git a/ee/spec/lib/gitlab/ci/minutes/cost_factor_spec.rb b/ee/spec/lib/gitlab/ci/minutes/cost_factor_spec.rb\n    \u003e index 957a59034c4..9885a67b5d2 100644\n    \u003e --- a/ee/spec/lib/gitlab/ci/minutes/cost_factor_spec.rb\n    \u003e +++ b/ee/spec/lib/gitlab/ci/minutes/cost_factor_spec.rb\n    \u003e @@ -91,18 +91,23 @@\n    \u003e          :instance | Gitlab::VisibilityLevel::PUBLIC   | 0 | 5 | nil | nil | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::PUBLIC   | 0 | 5 | 0   | 400 | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::PUBLIC   | 0 | 5 | 400 | 0   | 0\n    \u003e +        :instance | Gitlab::VisibilityLevel::PUBLIC   | 2 | 5 | 400 | 0   | 2\n    \u003e +        :instance | Gitlab::VisibilityLevel::PUBLIC   | 2 | 5 | nil | 400 | 2\n    \u003e +        :instance | Gitlab::VisibilityLevel::PUBLIC   | 2 | 5 | nil | 0   | 0\n    \u003e  \n    \u003e          :instance | Gitlab::VisibilityLevel::INTERNAL | 0 | 5 | nil | 400 | 5\n    \u003e          :instance | Gitlab::VisibilityLevel::INTERNAL | 0 | 5 | nil | nil | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::INTERNAL | 0 | 5 | nil | 0   | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::INTERNAL | 0 | 5 | 0   | 400 | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::INTERNAL | 0 | 5 | 400 | 0   | 5\n    \u003e +        :instance | Gitlab::VisibilityLevel::INTERNAL | 0 | 0 | 400 | 0   | 0\n    \u003e  \n    \u003e          :instance | Gitlab::VisibilityLevel::PRIVATE  | 0 | 5 | nil | 400 | 5\n    \u003e          :instance | Gitlab::VisibilityLevel::PRIVATE  | 0 | 5 | nil | nil | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::PRIVATE  | 0 | 5 | nil | 0   | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::PRIVATE  | 0 | 5 | 0   | 400 | 0\n    \u003e          :instance | Gitlab::VisibilityLevel::PRIVATE  | 0 | 5 | 400 | 0   | 5\n    \u003e +        :instance | Gitlab::VisibilityLevel::PRIVATE  | 0 | 0 | 400 | 0   | 0\n    \u003e        end\n    \u003e  \n    \u003e        with_them do\n    \u003e ```\n\n- [ ] @fabiopitino started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68646#note_656349371): \n\n    \u003e Shouldn't this be\n    \u003e \n    \u003e ```suggestion:-2+0\n    \u003e           let(:shared_runners_minutes) { 0 }\n    \u003e \n    \u003e           it { is_expected.to eq(0) }\n    \u003e ```\n    \u003e \n    \u003e ?\n\ncc @mbobin","state":"closed","created_at":"2021-08-20T16:46:50.647Z","updated_at":"2021-08-30T14:17:07.373Z","closed_at":"2021-08-30T14:17:07.116Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["CI minutes","Category:Continuous Integration","devops::verify","group::pipeline execution","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339036","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339036","notes":"https://gitlab.com/api/v4/projects/278964/issues/339036/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339036/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339036","relative":"#339036","full":"gitlab-org/gitlab#339036"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92342512,"iid":339034,"project_id":278964,"title":"FE: Create human-readable actions/rules","description":"\n## Why are we doing this work\n- users want a simplified explanation of the policy they create\n\n## Relevant links\n![a](https://gitlab.com/groups/gitlab-org/-/uploads/35b036dbfc9d6fffb925ca910a370bfd/drawer-details.png)\n\n\n## Non-functional requirements\n\n- [x] Testing:\n\n\n## Implementation plan\n\n- [x] ~frontend update [policy_drawer/scan_execution_policy](https://gitlab.com/gitlab-org/gitlab/blob/8054ddac18be39a7425069f9a66b557d7f752a9e/ee/app/assets/javascripts/threat_monitoring/components/policy_drawer/scan_execution_policy.vue) to humanize the rules and actions\n  - add file `ee/threat_monitoring/components/policy_editor/scan_execution/lib/humanize.js` to house all the methods","state":"closed","created_at":"2021-08-20T16:20:38.240Z","updated_at":"2021-10-28T13:53:27.302Z","closed_at":"2021-08-31T16:39:55.011Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Deliverable","auto updated","devops::govern","frontend","frontend-weight::3","group::security policies","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339034","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339034","notes":"https://gitlab.com/api/v4/projects/278964/issues/339034/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339034/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339034","relative":"#339034","full":"gitlab-org/gitlab#339034"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5362,"epic":{"id":198770,"iid":5362,"title":"Allow Users to Edit yaml-mode Scan Execution Policies in the Policy UI","url":"/groups/gitlab-org/-/epics/5362","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92338768,"iid":339028,"project_id":278964,"title":"BE: Fix policy yaml response in scanExecutionPolicies GraphQL query","description":"## Why are we doing this work\n\nFrom https://gitlab.com/gitlab-org/gitlab/-/issues/329423#note_655532951\n\nThe response of `scanExecutionPolicies` graphql query contains the `yaml` with symbolised keys like:\n\n```\n\"yaml\": \"---\\n:name: Enforce DAST in every pipeline\\n:description: This policy enforces pipeline configuration to have a job with DAST\\n  scan\\n:enabled: true\\n:rules:\\n- :type: pipeline\\n  :branches:\\n  - master\\n  - main\\n:actions:\\n- :scan: dast\\n  :scanner_profile: Scanner Profile\\n  :site_profile: Site Profile\\n- :scan: secret_detection\\n\"\n```\n\nIt should be returned as stringified keys like\n\n```\n\"yaml\": \"---\\nname: Enforce DAST in every pipeline\\ndescription: This policy enforces pipeline configuration to have a job with DAST\\n  scan\\nenabled: true\\nrules:\\n- type: pipeline\\n  branches:\\n  - master\\n  - main\\nactions:\\n- scan: dast\\n  scanner_profile: Scanner Profile\\n  site_profile: Site Profile\\n- scan: secret_detection\\n\"\n``` \n\n## Relevant links\n\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/5362)\n\n\n## Non-functional requirements\n- [-] Documentation:\n- [-] Feature flag:\n- [-] Performance:\n- [-] Testing:\n\n\n## Implementation plan\n- [ ] ~backend Change [`policy.to_yaml`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/graphql/resolvers/scan_execution_policy_resolver.rb#L22) to `YAML.dump(policy.deep_stringify_keys)`","state":"closed","created_at":"2021-08-20T14:53:11.089Z","updated_at":"2021-08-26T16:59:40.523Z","closed_at":"2021-08-24T03:00:21.465Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago FigueirÃ³","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","backend","devops::govern","feature::enhancement","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"}],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339028","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339028","notes":"https://gitlab.com/api/v4/projects/278964/issues/339028/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339028/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339028","relative":"#339028","full":"gitlab-org/gitlab#339028"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5362,"epic":{"id":198770,"iid":5362,"title":"Allow Users to Edit yaml-mode Scan Execution Policies in the Policy UI","url":"/groups/gitlab-org/-/epics/5362","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92335205,"iid":339023,"project_id":278964,"title":"Backend: Unify Security Configuration page backend between EE and CE","description":"## Why are we doing this work\n\nThe Security Configuration page needs to show different information depending on the tier the given project is in. Currently, the logic of that behaviour is scattered in various places on the frontend and backend, which makes adding features or moving features to different tiers difficult and error-prone.\n\nFor instance, there's a [check in the `EE::Projects::Security::ConfigurationController`](https://gitlab.com/gitlab-org/gitlab/blob/31da8512f850a3ccf19736ea1b02f932252b1ae6/ee/app/controllers/ee/projects/security/configuration_controller.rb#L35) that's a _proxy_ for \"are we in Ultimate?\", and delegates to the CE controller in the negative case. [_That_ controller](https://gitlab.com/gitlab-org/gitlab/-/blob/31da8512f850a3ccf19736ea1b02f932252b1ae6/app/controllers/projects/security/configuration_controller.rb) passes basically no information to the frontend (there's no [`ConfigurationPresenter`](https://gitlab.com/gitlab-org/gitlab/-/blob/31da8512f850a3ccf19736ea1b02f932252b1ae6/ee/app/presenters/projects/security/configuration_presenter.rb) instance exposed), and so the frontend has to [branch on that](https://gitlab.com/gitlab-org/gitlab/-/blob/31da8512f850a3ccf19736ea1b02f932252b1ae6/ee/app/views/projects/security/configuration/show.html.haml#L6), and [hard-code some information](https://gitlab.com/gitlab-org/gitlab/-/blob/31da8512f850a3ccf19736ea1b02f932252b1ae6/app/assets/javascripts/security_configuration/components/constants.js#L249-257) and have [some awkward type checks](https://gitlab.com/gitlab-org/gitlab/-/blob/31da8512f850a3ccf19736ea1b02f932252b1ae6/app/assets/javascripts/security_configuration/components/feature_card.vue#L28).\n\nInstead, it would be better if the `Security::ConfigurationController` _always_ presented the same structured information to the frontend. Then, the frontend could be simplified to render the information it's given, rather than making decisions itself about what to do given the _lack_ of data. Modifications to the frontend are covered by #333113.\n\n**In short, this would make adding to and modifying the Security Configuration page much simpler and faster.**\n\n## Relevant links\n\n- [Design issue](https://gitlab.com/gitlab-org/gitlab/-/issues/326926)\n\n## Implementation plan\n\nPrerequisite work is done in https://gitlab.com/gitlab-org/gitlab/-/issues/342135\n\n- [x] Create **feature flag** `unify_security_configuration`\n- [x] in EE `ConfigurationController`, `ConfigurationPresenter` accepts attribute for auto-fix permissions: move it to a separate method:\n  ```ruby\n    @configuration = ::Projects::Security::ConfigurationPresenter.new(project,\n                                                                            presenter_attributes,\n                                                                            current_user: current_user)\n\n    # ...\n    def presenter_attributes\n      { auto_fix_permission: auto_fix_authorized? }\n    end\n  ```\n- [x] in FOSS `ConfigurationController` create private `presenter_attributes` that return empty hash\n- [ ] Remove `show` method from EE `ConfigurationPresenter` and move its content to `show` method of FOSS `ConfigurationPresenter`.\n- [x] in FOSS `ConfigurationController` create a condition by which instance of `ConfigurationPresenter` is returned if if feature flag is enabled or GitLab tier is Ultimate. This is a temporal solution until ~frontend is adjusted in #333113.\n- [ ] (Optional) Remove [hard-coding of SAST/Secret Detection feature availability](https://gitlab.com/gitlab-org/gitlab/blob/31da8512f850a3ccf19736ea1b02f932252b1ae6/ee/app/presenters/projects/security/configuration_presenter.rb#L101-104) (possibly depends on https://gitlab.com/gitlab-org/gitlab/-/issues/334722)\n\n## Additional info\n\n#### New FOSS response\n\n```ruby\n{\n  auto_devops_enabled: Boolean,\n  auto_devops_help_page_path: String,\n  auto_devops_path: String,\n  can_enable_auto_devops: Boolean,\n  features: [\n    {\n      type: String,\n      configured: Boolean,\n      configuration_path: String,\n      available: Boolean\n    }\n  ]\n  help_page_path: String,\n  latest_pipeline_path: String,\n  gitlab_ci_present: Boolean,\n  gitlab_ci_history_path: String\n}\n```\n\n#### EE response (same as FOSS + auto-fix)\n\n```ruby\n{\n  auto_devops_enabled: Boolean,\n  auto_devops_help_page_path: String,\n  auto_devops_path: String,\n  can_enable_auto_devops: Boolean,\n  features: [\n    {\n      type: String,\n      configured: Boolean,\n      configuration_path: String,\n      available: Boolean\n    }\n  ]\n  help_page_path: String,\n  latest_pipeline_path: String,\n  auto_fix_enabled: Boolean,\n  can_toggle_auto_fix_settings: Boolean,\n  gitlab_ci_present: Boolean,\n  gitlab_ci_history_path: String,\n  auto_fix_user_path: String\n}\n```\n\n#### Testing\n\n- SET to expand existing Security Configuration test where needed (auto-devops link in particular)\n- SET to investigate FOSS vs EE testing of Security Configuration, add E2E test","state":"closed","created_at":"2021-08-20T13:38:58.619Z","updated_at":"2022-01-18T07:02:58.786Z","closed_at":"2022-01-14T15:00:25.635Z","closed_by":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"labels":["Category:Vulnerability Management","Deliverable","Enterprise Edition","GitLab Core","GitLab Free","GitLab Premium","GitLab Ultimate","SUS::Impacting","backend","devops::secure","group::composition analysis","maintenance::refactor","missed-deliverable","missed:14.4","missed:14.5","missed:14.6","priority::2","quad-planning::complete-action","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339023","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339023","notes":"https://gitlab.com/api/v4/projects/278964/issues/339023/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339023/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339023","relative":"#339023","full":"gitlab-org/gitlab#339023"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6150,"epic":{"id":286283,"iid":6150,"title":"Phase 4: Unification of Backends","url":"/groups/gitlab-org/-/epics/6150","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":"needs_attention"},{"id":92329745,"iid":339015,"project_id":278964,"title":"Dependency List has no language info for Go, NuGet, and Sbt dependencies","description":"### Summary\n\nIn the Dependency List, the `Package Manager` column doesn't show the programming language when the package manager is Go, NuGet, or Sbt. Also, the package manager name isn't capitalized properly.\n\nThis is because these values of the `package_manager` field of the Dependency Scanning reports are not handled by the Dependency List [formatter](ee/lib/gitlab/ci/parsers/security/formatters/dependency_list.rb#L35):\n\n* go\n* nuget\n* sbt\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/338252#note_655979215\n\nThis is only impacts the UI.\n\n### Steps to reproduce\n\n1. Create a project using Go modules, NuGet, or Sbt\n1. Enable Dependency Scanning and trigger a pipeline\n1. Go to the Dependency List page\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/security-products/tests/scala-sbt-multiproject/-/dependencies\n\n### What is the current *bug* behavior?\n\nIn the Dependency List, the aforementioned package managers show up in lowercase, and there's no programming language.\n\nExample: `sbt`\n\n### What is the expected *correct* behavior?\n\nThe package manager shows up with a programming language, and its name is capitalized.\n\nExample: `Sbt (Java)`\n\n### Relevant logs and/or screenshots\n\n![Capture_d_eÌcran_2021-08-20_aÌ€_13.51.22](/uploads/24548f86ee0556307f6239d956f7b606/Capture_d_eÌcran_2021-08-20_aÌ€_13.51.22.png)\n\n### Possible fixes\n\nThe quick fix is to add the missing package managers to the [formatter](ee/lib/gitlab/ci/parsers/security/formatters/dependency_list.rb#L35).\n\nThat said, this won't fix the underlying maintenance issue. Also, in the case of NuGet the programming language can't be inferred from the package manager. One way to address both problems is to make Dependency Scanning analyzers responsible for reporting a human readable name for the package manager along with language name. This involves:\n* adding fields to the security report schemas\n* updating the Gemnasium analyzers so that they fill up these new fields\n* updating the Rails backend so that it uses these new fields while maintaining backward compatibility\n\n### Implementation plan\n\n* [ ] Add missing values to [formatter](ee/lib/gitlab/ci/parsers/security/formatters/dependency_list.rb#L35) and update corresponding specs\n\n/cc @NicoleSchwartz @gonzoyumo @brytannia","state":"closed","created_at":"2021-08-20T11:59:20.442Z","updated_at":"2022-02-23T08:55:29.885Z","closed_at":"2021-10-13T06:34:48.026Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","priority::3","section::sec","severity::4","type::bug","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339015","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339015","notes":"https://gitlab.com/api/v4/projects/278964/issues/339015/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339015/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339015","relative":"#339015","full":"gitlab-org/gitlab#339015"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":92328374,"iid":339012,"project_id":278964,"title":"Dependencies API cannot filter out Go, NuGet, or Sbt dependencies","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen listing project dependencies using the [Dependencies API](https://docs.gitlab.com/ee/api/dependencies.html), having any of these values in the `package_manager` parameter results in an error:\n\n* go\n* nuget\n* sbt\n\nThis is because the endpoint ensures that `package_manager` only includes values listed in `DependencyListService::FILTER_PACKAGE_MANAGERS_VALUES`, and some values are missing. As a result, parameter validation fails.\n\nSee [DependencyListService](ee/app/services/security/dependency_list_service.rb#L7) and [Dependencies API](ee/lib/api/dependencies.rb#L33).\n\nA workaround is to filter out dependencies based on the `package_manager` field on the client side.\n\nOriginal comment is https://gitlab.com/gitlab-org/gitlab/-/issues/338252#note_655979215\n\n### Steps to reproduce\n\n1. Create a test project using Sbt or any of the aforementioned package managers\n1. Enable Dependency Scanning\n1. List dependencies using the [Dependencies API](https://docs.gitlab.com/ee/api/dependencies.html), and include any of the aforementioned values in the `package_manager` param\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/security-products/tests/scala-sbt-multiproject/\n\n### What is the current *bug* behavior?\n\nThe API returns a validation error:\n\n```json\n{\n  \"error\": \"package_manager does not have a valid value\"\n}\n```\n\n### What is the expected *correct* behavior?\n\nThe API properly filters out the dependencies that match the `package_manager` param.\n\n### Possible fixes\n\nAdding missing values to `FILTER_PACKAGE_MANAGERS_VALUES`, in [dependency_list_service.rb](ee/app/services/security/dependency_list_service.rb#L7).\n\nAlternatively, we could change the API endpoint to remove the check on `package_manager`, for ease of maintenance.\n\n### Implementation plan\n\n- [ ] Adding missing values to `FILTER_PACKAGE_MANAGERS_VALUES`\n\n/cc @NicoleSchwartz @gonzoyumo","state":"closed","created_at":"2021-08-20T11:34:52.359Z","updated_at":"2022-02-23T08:55:29.937Z","closed_at":"2021-10-13T09:08:12.152Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","priority::3","section::sec","severity::4","type::bug","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339012","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339012","notes":"https://gitlab.com/api/v4/projects/278964/issues/339012/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339012/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339012","relative":"#339012","full":"gitlab-org/gitlab#339012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":92299932,"iid":338985,"project_id":278964,"title":"Enable Group Migration feature flag by default","description":"### Proposal\n\nWith the delivery of https://gitlab.com/groups/gitlab-org/-/epics/4619, the migration for Groups is now a viable feature. Since the feature is completed, the [feature flag](https://gitlab.com/gitlab-org/gitlab/-/blob/master/config/feature_flags/development/bulk_import.yml) should be ON by default.\n\n### Docs\n* [ ] Update https://docs.gitlab.com/ee/user/group/import/#enable-or-disable-gitlab-group-migration","state":"closed","created_at":"2021-08-19T23:37:03.267Z","updated_at":"2021-11-18T16:01:21.615Z","closed_at":"2021-09-06T08:53:52.658Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","documentation","estimation::completed","feature::enhancement","group::import","milestone::p2","section::dev","type::feature","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338985","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338985","notes":"https://gitlab.com/api/v4/projects/278964/issues/338985/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338985/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338985","relative":"#338985","full":"gitlab-org/gitlab#338985"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4619,"epic":{"id":126564,"iid":4619,"title":"Group Migration - Parity with Group Export/Import","url":"/groups/gitlab-org/-/epics/4619","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92299746,"iid":338984,"project_id":278964,"title":"Global Search Results should not render HTML","description":"### Summary\n\nResults pages are rendering HTML. \nThis can cause issues with Page layout and might even create other problems. \n\n### Proposal\n\nWe should not render HTML or markdown in the search results. \n\n\n![Screen_Shot_2021-08-19_at_6.19.50_PM](/uploads/e82ae817f66beccf226ec126bf964de1/Screen_Shot_2021-08-19_at_6.19.50_PM.png)\n\nhttps://gitlab.com/search?repository_ref=\u0026scope=issues\u0026search=Now\u0026snippets=false\n\nhttps://gitlab.com/freepascal.org/fpc/source/-/issues/6163\n\n\u003cdetails\u003e\u003csummary\u003eClick to expand process progress \u003c/summary\u003e\n\n### Next Steps for this issue\n\n#### Validation track\n\n- `checkboxes are required steps`\n- `Bugs can skip Design and Solution Validation`\n\n- [x] ~\"workflow::validation backlog\" [Problem Validation Backlog](https://about.gitlab.com/handbook/product-development-flow/#validation-phase-1-validation-backlog) -@JohnMcGuire\n  - [x] Issue is Up-to-date \n  - [x] Prioritized in the backlog\n- [x] ~\"workflow::problem validation\" [Problem validation](https://about.gitlab.com/handbook/product-development-flow/#validation-phase-2-problem-validation) - @JohnMcGuire \n  - [x] Thorough understanding of the problem\n    - [Problem Validation Template](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Problem%20Validation.md)\n    - [Opportunity Canvas](https://about.gitlab.com/handbook/product/product-processes/#opportunity-canvas)\n      - Review of the opportunity canvas\n    - [UX Research](https://gitlab.com/gitlab-org/ux-research/-/blob/master/.gitlab/issue_templates/Problem%20validation.md)\n      - Validate your problem with users\n    - Update issue/epic description\n    - Ensure your issue is up-to-date with the latest understanding of the problem.\n    - Understand and document (in the issue) the goals that people want to accomplish using the [Jobs to be Done (JTBD) framework](https://about.gitlab.com/handbook/engineering/ux/jobs-to-be-done/).\n    - communicate the findings to Product and UX leadership.\n    - PMs are strongly encouraged to open [Dogfooding issues](https://about.gitlab.com/handbook/product/product-processes/#dogfooding-process)\n- [x] ~\"workflow::ready for design\" - @nickbrandt \n- [ ] ~\"workflow::design\" [Validation phase 3: Design](https://about.gitlab.com/handbook/product-development-flow/#validation-phase-3-design) - @nickbrandt \n  - [ ] Proposed solution(s) identified and documented\n    - Diverge: explore multiple different approaches as a team\n    - [Think Big session](https://about.gitlab.com/handbook/engineering/ux/thinkbig/).\n      - [document findings in Dovetail](https://about.gitlab.com/handbook/engineering/ux/dovetail/)\n    - Converge: identify a small set of options to validate\n      - [Think Small](https://about.gitlab.com/handbook/engineering/ux/thinkbig/#think-small) session with the team.\n      - Design reviews with team\n      - Low fidelity design ideas\n      - Update issue/epic description with proposed solution\n      - Add Figma design file link or attach design to [GitLab's Design Management](https://docs.gitlab.com/ee/user/project/issues/design_management.html)\n      - Validate approach with help from stakeholders.\n        - Run user validation using any of the [proposed methods](https://about.gitlab.com/handbook/engineering/ux/ux-research/#solution-validation)\n        - [Document your findings in Dovetail](https://about.gitlab.com/handbook/engineering/ux/dovetail/) and appropriate GitLab issue. \n      - Draw inspiration from competitive and adjacent offerings.\n  - [ ] Shared understanding in the team of the proposed solution\n    - Review the proposed solution as a team so that everyone has a chance to contribute\n      - ask questions\n      - raise concerns\n      - suggest alternatives\n    - Review the proposed solution with leadership.\n  - [ ] Confidence in the technical feasibility\n    - Discuss the technical implications with Engineering to ensure that what is being proposed is possible within the desired timeframe.\n    - Engage engineering peers early and often\n    - If the solution is large and complex, consider scheduling a [spike](https://about.gitlab.com/handbook/product/product-processes/#spikes) to mitigate risks and uncover the optimal iteration path. \n  - [ ] Updated issues/epic descriptions - @JohnMcGuire \n    - Ensure issues and epics are up-to-date, so we can continue our work efficiently and asynchronously.\n    - [Experiment definition](https://about.gitlab.com/handbook/engineering/development/growth/#experiment-definition-standards)\n  - Continue Dogfooding process \n- [ ] ~\"workflow::solution validation\" - [Validation phase 4: Solution Validation](https://about.gitlab.com/handbook/product-development-flow/#validation-phase-4-solution-validation) - @nickbrandt \n  - [ ] High confidence in the proposed solution\n    - Gather feedback from relevant stakeholders.\n      - Follow [solution validation guidance](https://about.gitlab.com/handbook/engineering/ux/ux-research-training/solution-validation-and-methods/) to gather feedback.\n  - [ ] Documented Solution validation Learnings\n    - Document solution validation findings as [insights in Dovetail](https://about.gitlab.com/handbook/engineering/ux/dovetail/).\n    - Update the [opportunity canvas](https://about.gitlab.com/handbook/product/product-processes/#opportunity-canvas) (if used) with relevant insights.\n    - Update the issue or epic description to contain or link to the findings.\n\n#### Build track\n\n- [x] ~\"workflow::planning breakdown\" - @JohnMcGuire \n  - [x] Well-scoped MVC issues \n    - Issues are the [SSOT](https://about.gitlab.com/handbook/values/#single-source-of-truth) for all feature development. \n    - Refine issues into something that can be delivered within a single milestone\n    - Open follow on issues to track work that is de-prioritized\n    - Promote existing issues to Epics and open implementation issues for the upcoming milestone\n    - Review feature issues with contributors\n    - Consider scheduling a POC or engineering investigation issue\n    - Make scope tradeoffs to reach for a [right-sized MVC](https://about.gitlab.com/handbook/product/product-principles/#the-minimal-viable-change-mvc)\n    - Request an [issue review](https://about.gitlab.com/handbook/product/product-processes/#issue-reviews) to ensure communication is clear and have proposed the [right iteration plan](https://about.gitlab.com/handbook/product/product-processes/#iteration-strategies) to execute on the solution. \n- [x] ~\"workflow::scheduling\" Prioritized in Milestone \n    - The team should understand what issues should be delivered during the next milestone\n- [ ] ~\"workflow::ready for development\" - @JohnMcGuire \n- [x] ~\"type::bug\" ~\"type::feature\" ~\"type::maintenance\"  - @JohnMcGuire \n- [ ] ~\"Deliverable\" - @changzhengliu and @nickbrandt \n- [ ] Add to Planning Issue - @JohnMcGuire \n- [ ] Defined Quality Plan -@ebanks \n  - [Quad Planning](https://about.gitlab.com/handbook/engineering/quality/quality-engineering/quad-planning/)\n  - [Test planning](https://about.gitlab.com/handbook/engineering/quality/quality-engineering/test-engineering/#test-planning) \n- ~\"workflow::refinement\" - @changzhengliu \n  - as needed, refine the aspects of the original feature\n- [ ] ~\"workflow::in dev\" - @changzhengliu \n  - Applied by the engineer after work (including documentation) has begun on the issue. An MR is typically linked to the issue at this point.\n- [ ] ~\"workflow::in review\" - Engineering\n  - Applied by an engineer indicating that all MRs required to close an issue are in review.\n- [ ] ~\"workflow::blocked\" - Engineering \n  - Applied if at any time during development the issue is blocked. For example: technical issue, open question to PM or PD, cross-group dependency.\n- [ ] ~\"workflow::verification\" - Engineering\n  - After the MRs in the issue have been merged, this label is applied signaling the issue needs to be verified in staging or production. \n- [ ] ~\"workflow::awaiting security release\"  -Engineering \n  - Applied by an engineer after the security issue has passed verification, this label signals that it is ready but awaiting the next monthly security release. \n- [ ] Close the Issue - Once available in production\n- [ ] Feature is available to GitLab.com hosted customers - Developer\n  - Code is deployed to production. \n  - [Feature flag(s)](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/) enabled.\n- [ ] Feature is available to self-managed customers - Developer\n  - Code is included in the self-managed release (depending upon the cut-off).\n- [ ] Stakeholders of a feature will know it's available in production - Developer\n  - After the feature is deployed to production and any needed verification in production is completed, the development team will close the issue.\n  - Prior to the issue being closed, the development team may set the workflow label to workflow::verification or workflow::production for tracking purposes.\n  - Product Manager may follow up with individual [stakeholders](https://about.gitlab.com/handbook/product/product-processes/#what-is-a-stakeholder) to let them know the feature is available.\n- [ ] Customers will be informed about major changes - @JohnMcGuire \n  - Product Manager follows the instructions in the [template](https://gitlab.com/gitlab-com/www-gitlab-com/-/blob/master/.gitlab/merge_request_templates/Release-Post.md), which will then cause it to appear on the [GitLab.com releases page](https://about.gitlab.com/releases/gitlab-com/) and be part of the release post. \n\n\u003c/details\u003e","state":"closed","created_at":"2021-08-19T23:27:11.527Z","updated_at":"2022-11-17T03:15:20.828Z","closed_at":"2022-11-17T03:15:19.464Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Deliverable","advanced search","backend","devops::data_stores","good for new contributors","group::global search","priority::3","section::enablement","severity::3","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"}],"author":{"id":5724558,"username":"JohnMcGuire","name":"John McGuire","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5724558/avatar.png","web_url":"https://gitlab.com/JohnMcGuire"},"type":"ISSUE","assignee":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338984","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":32,"completed_count":10},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"10 of 32 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338984","notes":"https://gitlab.com/api/v4/projects/278964/issues/338984/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338984/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338984","relative":"#338984","full":"gitlab-org/gitlab#338984"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92299744,"iid":338983,"project_id":278964,"title":"Remove Beta badge and warning from Group Migration page","description":"### Proposal\n\nWith the delivery of https://gitlab.com/groups/gitlab-org/-/epics/4619, the migration for Groups is now complete. This means that the feature is no longer in Beta and the `Beta` badge should be removed from the [Import Group page](https://gitlab.com/groups/new#import-group-pane).\n\nAdditionally, the warning should be reworked into an info note to indicate that groups and subgroups are migrated, and to check the docs for the full list of group attributes and relationships that are migrated. This should no longer be a warning, as we are now migrating all the fields and relationships that we think are relevant. The text should state: `Not all related objects are migrated. More info.`, with \"more info\" linking to the doc.\n\nWe should note, either here, and/or on the doc page that projects are not included in this migration and that the projects should continue to be migrated using Project Export/Import. The users should know that they can use GitLab Migration to get the groups and Export/Import to get the projects (mix-and-match, in a way).\n\n### Screenshot\n\n![image](https://gitlab.com/gitlab-org/gitlab/uploads/ac56411c9c0f538b6cbdfaa85460cf58/image.png)\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-19T23:27:07.147Z","updated_at":"2021-10-28T21:17:03.763Z","closed_at":"2021-10-10T11:35:39.703Z","closed_by":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"labels":["Category:Importers","Importer:GitLab Migration","Next Up","UX","devops::manage","direction","documentation","estimation::completed","feature::enhancement","frontend","group::import","milestone::p2","section::dev","type::feature","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris DelaliÄ‡","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338983","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338983","notes":"https://gitlab.com/api/v4/projects/278964/issues/338983/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338983/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338983","relative":"#338983","full":"gitlab-org/gitlab#338983"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4613,"epic":{"id":126554,"iid":4613,"title":"GitLab Migration - UX improvements","url":"/groups/gitlab-org/-/epics/4613","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":92299575,"iid":338980,"project_id":278964,"title":"Setting User Cap causes SAML user to be blocked during first sign in","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen SAML is appropriately configured on a self-managed GitLab instance, a new user can sign in with their SAML identity and have the account automatically created. If there are no \"block auto-created users\" settings enabled, the user can directly sign into GitLab on the first attempt.\n\nHowever, if the \"user cap\" setting is specified, the user is redirected to the sign in page and shown a \"blocked pending Approval\" message:\n![BlockedPendingApproval](/uploads/e46d72028925a7325c7d0b7c1ab0aad0/BlockedPendingApproval.png)\nThis happens even if the user cap is set to say 50 and the current number of users is 5.\n\nThe problem is that the user is not actually blocked - viewing the admin dashboard shows user has been created and is active.\nAlso, the user will be signed in if they immediately refresh the page.\n\nBased on my testing and research, I feel that this behaviour may be related to this commit: https://gitlab.com/gitlab-org/gitlab/-/commit/c312fd3ece6064cfbca6beb84aa3ba4f6baf983c\n\n**Note** The current workaround is to either remove User Cap settings (not great from a user management perspective) or ask all new users to try signing in again upon seeing that banner.\n\n### Steps to reproduce\n\n1. Set up SAML with GitLab SM.\n1. Sign in with new user\n   - User account is created and user is signed in without any issues\n1. Change User Cap settings in admin dashboard to some arbitrarily high number (say 100)\n1. Sign in with another new user\n   - User will be redirected back to sign in page with Blocked Pending Approval warning\n   - Simultaneously, on another browser, check admin dashboard - User is not blocked and is shown as active\n   - Also if user refreshes page, they will be signed in\n\n### What is the current *bug* behavior?\n\nOn first sign-in via SAML, user is redirected to the sign-in page and shown a \"Blocked Pending Approval\" banner.\n\n### What is the expected *correct* behavior?\n\nUser should be signed in.\nUser should not be redirected to the sign in page and should not see the Blocked banner.\n\n### Relevant logs and/or screenshots\n\n```\n==\u003e /var/log/gitlab/gitlab-rails/application.log \u003c==\n2021-08-19T04:58:55.093Z: User \"alvinsaml\" (alvinsaml@gitlab.agounder.com) was created\n\n==\u003e /var/log/gitlab/gitlab-rails/application_json.log \u003c==\n{\"severity\":\"INFO\",\"time\":\"2021-08-19T04:58:55.093Z\",\"correlation_id\":\"01FDECDGDG34EPXBKMNYW4GMVK\",\"message\":\"User \\\"alvinsaml\\\" (alvinsaml@gitlab.agounder.com) was created\"}\n\n==\u003e /var/log/gitlab/sidekiq/current \u003c==\n{\"severity\":\"INFO\",\"time\":\"2021-08-19T04:58:55.093Z\",\"class\":\"SetUserStatusBasedOnUserCapSettingWorker\",\"args\":[\"57\"],\"retry\":3,\"queue\":\"set_user_status_based_on_user_cap_setting\",\"version\":0,\"jid\":\"5d9dcf6\na49dc73a9505b9bfb\",\"created_at\":\"2021-08-19T04:58:55.090Z\",\"meta.caller_id\":\"OmniauthCallbacksController#saml\",\"meta.remote_ip\":\"222.155.71.33\",\"meta.feature_category\":\"users\",\"meta.client_id\":\"ip/222.155.7\n1.33\",\"correlation_id\":\"01FDECDGDG34EPXBKMNYW4GMVK\",\"idempotency_key\":\"resque:gitlab:duplicate:set_user_status_based_on_user_cap_setting:190c53be8781f49e24bd5074bd50cffeb0420616b4549d03555b831b67499258\",\"en\nqueued_at\":\"2021-08-19T04:58:55.091Z\",\"job_size_bytes\":4,\"pid\":491073,\"message\":\"SetUserStatusBasedOnUserCapSettingWorker JID-5d9dcf6a49dc73a9505b9bfb: start\",\"job_status\":\"start\",\"scheduling_latency_s\":0.0\n01335}\n\n==\u003e /var/log/gitlab/gitlab-rails/application.log \u003c==\n2021-08-19T04:58:55.099Z: (SAML) saving user alvinsaml@gitlab.agounder.com from login with admin =\u003e false, extern_uid =\u003e d59309d7-ad69-418a-9f78-75176fb27248\n\n==\u003e /var/log/gitlab/gitlab-rails/application_json.log \u003c==\n{\"severity\":\"INFO\",\"time\":\"2021-08-19T04:58:55.099Z\",\"correlation_id\":\"01FDECDGDG34EPXBKMNYW4GMVK\",\"message\":\"(SAML) saving user alvinsaml@gitlab.agounder.com from login with admin =\\u003e false, extern_uid\n =\\u003e d59309d7-ad69-418a-9f78-75176fb27248\"}\n\n==\u003e /var/log/gitlab/gitlab-rails/audit_json.log \u003c==\n{\"severity\":\"INFO\",\"time\":\"2021-08-19T04:58:55.105Z\",\"correlation_id\":\"01FDECDGDG34EPXBKMNYW4GMVK\",\"author_id\":57,\"author_name\":\"alvinsaml\",\"entity_id\":57,\"entity_type\":\"User\",\"ip_address\":\"222.155.71.33\",\"\nwith\":\"saml\",\"target_id\":57,\"target_type\":\"User\",\"target_details\":\"alvinsaml\",\"entity_path\":\"alvinsaml\"}\n\n==\u003e /var/log/gitlab/sidekiq/current \u003c==\n{\"severity\":\"INFO\",\"time\":\"2021-08-19T04:58:55.133Z\",\"class\":\"ActionMailer::MailDeliveryJob\",\"queue\":\"mailers\",\"args\":[\"[FILTERED]\"],\"retry\":3,\"jid\":\"8ea4751b58399b5a2739c15b\",\"created_at\":\"2021-08-19T04:58\n:55.131Z\",\"meta.caller_id\":\"SetUserStatusBasedOnUserCapSettingWorker\",\"meta.remote_ip\":\"222.155.71.33\",\"meta.feature_category\":\"users\",\"meta.client_id\":\"ip/222.155.71.33\",\"correlation_id\":\"01FDECDGDG34EPXBK\nMNYW4GMVK\",\"idempotency_key\":\"resque:gitlab:duplicate:mailers:8d7d704f9dee4270ae4b60d2637ead724aee9f3e0052e6d77a75900fd0ce070e\",\"enqueued_at\":\"2021-08-19T04:58:55.132Z\",\"job_size_bytes\":412,\"pid\":491073,\"me\nssage\":\"ActionMailer::MailDeliveryJob JID-8ea4751b58399b5a2739c15b: start\",\"job_status\":\"start\",\"scheduling_latency_s\":0.001204}\n\n==\u003e /var/log/gitlab/gitlab-rails/production.log \u003c==\n[ActiveJob] [ActionMailer::MailDeliveryJob] [2da1d55f-5c41-49e7-a8d3-d5268590501d] Performing ActionMailer::MailDeliveryJob (Job ID: 2da1d55f-5c41-49e7-a8d3-d5268590501d) from Sidekiq(mailers) enqueued at 2021-08-19T04:58:55Z with arguments: \"DeviseMailer\", \"user_admin_approval\", \"deliver_now\", {:args=\u003e[#\u003cGlobalID:0x00007efe2a1b10c8 @uri=#\u003cURI::GID gid://gitlab/User/57\u003e\u003e]}\n[ActiveJob] Enqueued ActionMailer::MailDeliveryJob (Job ID: 2da1d55f-5c41-49e7-a8d3-d5268590501d) to Sidekiq(mailers) with arguments: \"DeviseMailer\", \"user_admin_approval\", \"deliver_now\", {:args=\u003e[#\u003cGlobalID:0x00007efe2a13fc98 @uri=#\u003cURI::GID gid://gitlab/User/57\u003e\u003e]}\n\n==\u003e /var/log/gitlab/sidekiq/current \u003c==\n{\"severity\":\"INFO\",\"time\":\"2021-08-19T04:58:55.144Z\",\"class\":\"SetUserStatusBasedOnUserCapSettingWorker\",\"args\":[\"57\"],\"retry\":3,\"queue\":\"set_user_status_based_on_user_cap_setting\",\"version\":0,\"jid\":\"5d9dcf6a49dc73a9505b9bfb\",\"created_at\":\"2021-08-19T04:58:55.090Z\",\"meta.caller_id\":\"OmniauthCallbacksController#saml\",\"meta.remote_ip\":\"222.155.71.33\",\"meta.feature_category\":\"users\",\"meta.client_id\":\"ip/222.155.71.33\",\"correlation_id\":\"01FDECDGDG34EPXBKMNYW4GMVK\",\"idempotency_key\":\"resque:gitlab:duplicate:set_user_status_based_on_user_cap_setting:190c53be8781f49e24bd5074bd50cffeb0420616b4549d03555b831b67499258\",\"enqueued_at\":\"2021-08-19T04:58:55.091Z\",\"job_size_bytes\":4,\"pid\":491073,\"message\":\"SetUserStatusBasedOnUserCapSettingWorker JID-5d9dcf6a49dc73a9505b9bfb: done: 0.051845 sec\",\"job_status\":\"done\",\"scheduling_latency_s\":0.001335,\"redis_calls\":4,\"redis_duration_s\":0.001244,\"redis_read_bytes\":60,\"redis_write_bytes\":1686,\"redis_queues_calls\":3,\"redis_queues_duration_s\":0.00101,\"redis_queues_read_bytes\":60,\"redis_queues_write_bytes\":1595,\"redis_shared_state_calls\":1,\"redis_shared_state_duration_s\":0.000234,\"redis_shared_state_write_bytes\":91,\"db_count\":11,\"db_write_count\":3,\"db_cached_count\":1,\"cpu_s\":0.030672,\"mem_objects\":11671,\"mem_bytes\":816112,\"mem_mallocs\":2381,\"mem_total_bytes\":1282952,\"duration_s\":0.051845,\"completed_at\":\"2021-08-19T04:58:55.144Z\",\"db_duration_s\":0.008677}\n\n==\u003e /var/log/gitlab/gitlab-rails/production.log \u003c==\n[ActiveJob] [ActionMailer::MailDeliveryJob] [2da1d55f-5c41-49e7-a8d3-d5268590501d]   Rendered layout layouts/mailer/devise.html.haml (Duration: 12.6ms | Allocations: 5536)\n[ActiveJob] [ActionMailer::MailDeliveryJob] [2da1d55f-5c41-49e7-a8d3-d5268590501d]   Rendered layout ee/app/views/layouts/mailer/devise.text.erb (Duration: 1.1ms | Allocations: 487)\n\n==\u003e /var/log/gitlab/gitlab-rails/application.log \u003c==\n2021-08-19T04:58:55.177Z: \"Failed login for blocked user: user=alvinsaml ip=222.155.71.33\")\n\n==\u003e /var/log/gitlab/gitlab-rails/application_json.log \u003c==\n{\"severity\":\"INFO\",\"time\":\"2021-08-19T04:58:55.177Z\",\"correlation_id\":\"01FDECDGDG34EPXBKMNYW4GMVK\",\"message\":\"\\\"Failed login for blocked user: user=alvinsaml ip=222.155.71.33\\\")\\n\"}\n\n==\u003e /var/log/gitlab/gitlab-rails/production.log \u003c==\nCompleted 401 Unauthorized in 366ms (ActiveRecord: 127.0ms | Elasticsearch: 0.0ms | Allocations: 117882)\n```\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\nSystem information\nSystem:\t\tUbuntu 20.04\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.7.2p137\nGem Version:\t3.1.4\nBundler Version:2.1.4\nRake Version:\t13.0.3\nRedis Version:\t6.0.14\nGit Version:\t2.32.0\nSidekiq Version:5.2.9\nGo Version:\tunknown\n\nGitLab information\nVersion:\t14.1.1-ee\nRevision:\tf331f932688\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t12.6\nURL:\t\thttps://gitlab....com\nHTTP Clone URL:\thttps://gitlab....com/some-group/some-project.git\nSSH Clone URL:\tgit@gitlab....com:some-group/some-project.git\nElasticsearch:\tno\nGeo:\t\tyes\nGeo node:\tPrimary\nUsing LDAP:\tyes\nUsing Omniauth:\tyes\nOmniauth Providers: saml, azure_activedirectory_v2\n\nGitLab Shell\nVersion:\t13.19.0\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\nGit:\t\t/opt/gitlab/embedded/bin/git\n\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-08-19T23:20:18.092Z","updated_at":"2022-03-18T07:08:55.018Z","closed_at":"2022-03-18T07:08:55.008Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne BaquÃ©","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["[deprecated] Category:Utilization","backend","customer","devops::fulfillment","group::utilization","missed:14.5","missed:14.6","needs weight","priority::3","section::fulfillment","severity::3","type::bug","workflow::production"],"milestone":null,"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne BaquÃ©","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":6524834,"username":"alvin","name":"Alvin Gounder","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c9f09b836954806925fe9f9591a448c2?s=80\u0026d=identicon","web_url":"https://gitlab.com/alvin"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne BaquÃ©","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":26,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":"2021-11-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338980","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338980","notes":"https://gitlab.com/api/v4/projects/278964/issues/338980/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338980/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338980","relative":"#338980","full":"gitlab-org/gitlab#338980"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92296617,"iid":338960,"project_id":278964,"title":"Remove subtransactions from `MergeRequest::Metrics` model","description":"In https://gitlab.com/gitlab-org/gitlab/-/issues/338346#note_652623314 and https://gitlab.com/gitlab-org/gitlab/-/issues/338865#note_655312474, we identified the use of subtransactions can cause significant performance issues on PostgreSQL replicas at scale. If a long running transaction occurs, the subtransaction cache may not fit into the working set of memory, which can lead to a context switch storm when PostgreSQL needs to load subtransaction data from disk. While this arguably is a PostgreSQL bug, we should remove subtransactions entirely because they aren't performant at GitLab.com scale, nor are they strictly necessary.  More context in https://gitlab.slack.com/archives/C02BHCTH02D/p1629392215352100?thread_ts=1629388693.342800\u0026cid=C02BHCTH02D. \n\nFrom https://thanos.gitlab.net/classic/graph?g0.range_input=2h\u0026g0.stacked=0\u0026g0.max_source_resolution=0s\u0026g0.expr=sum(rate(gitlab_active_record_subtransactions_total%7Benv%3D%22gprd%22%7D%5B1m%5D))%20by%20(model)\u0026g0.tab=0 you can see `MergeRequest::Metrics` is generating subtransactions.  These should be removed from the codebase asap.\n\n\n\u003cdetails\u003e\n\u003csummary\u003esavepoint_backtraces\u003c/summary\u003e\n\nNOTE: @ahegyi believes this information is probably outdated since an MR from @engwan, which touched this code but may not have solved for this particular subtransaction.\n\nThis happened in https://log.gprd.gitlab.net/goto/8e3805df10714fff1bfdf3cdccf0789f:\n\n```json\n\"json\": {\n      \"stage\": \"cny\",\n      \"correlation_id\": \"01FE4KT6ANPWC8NEHKF05XZVF0\",\n      \"savepoint_backtraces\": [\n        [\n          \"lib/gitlab/database/transaction/observer.rb:41:in `block in register!'\",\n          \"app/models/application_record.rb:75:in `block in safe_find_or_create_by'\",\n          \"lib/gitlab/database.rb:225:in `block in transaction'\",\n          \"lib/gitlab/database.rb:224:in `transaction'\",\n          \"app/models/application_record.rb:75:in `safe_find_or_create_by'\",\n          \"app/models/merge_request.rb:1859:in `ensure_metrics'\",\n          \"ee/lib/analytics/merge_request_metrics_refresh.rb:11:in `block in execute'\",\n          \"ee/lib/analytics/merge_request_metrics_refresh.rb:10:in `each'\",\n          \"ee/lib/analytics/merge_request_metrics_refresh.rb:10:in `execute'\",\n          \"ee/app/services/ee/merge_requests/approval_service.rb:57:in `calculate_approvals_metrics'\",\n          \"ee/app/services/ee/merge_requests/approval_service.rb:45:in `block in create_event'\",\n          \"lib/gitlab/database.rb:225:in `block in transaction'\",\n          \"lib/gitlab/database.rb:224:in `transaction'\",\n          \"ee/app/services/ee/merge_requests/approval_service.rb:43:in `create_event'\",\n          \"app/services/merge_requests/approval_service.rb:13:in `execute'\",\n          \"ee/app/services/ee/merge_requests/approval_service.rb:14:in `execute'\",\n          \"lib/api/merge_request_approvals.rb:58:in `block (3 levels) in \u003cclass:MergeRequestApprovals\u003e'\",\n          \"ee/lib/gitlab/ip_address_state.rb:10:in `with'\",\n          \"lib/api/api_guard.rb:213:in `call'\",\n          \"ee/lib/omni_auth/strategies/group_saml.rb:41:in `other_phase'\",\n          \"lib/gitlab/jira/middleware.rb:19:in `call'\"\n        ]\n      ],\n      \"level\": \"info\",\n      \"type\": \"api\",\n      \"component\": \"gitlab\",\n      \"subcomponent\": \"application_json\",\n      \"environment\": \"gprd\",\n      \"tag\": \"api-cny-rails.var.log.containers.gitlab-cny-webservice-api-94fb4d79d-44wbg_gitlab-cny_webservice-b8c53fb522a894ab70a95fe313c4a77dccc3943cec14b06666f842bc7ff76571.log\",\n      \"tier\": \"sv\",\n      \"duration_s\": 0.044940201987628825,\n      \"class\": \"Gitlab::Database::Transaction::Context\",\n      \"savepoints_count\": 1,\n      \"time\": \"2021-08-27T20:11:28.139Z\",\n      \"result\": \"commit\",\n      \"releases_count\": 1,\n      \"rollbacks_count\": 0,\n      \"shard\": \"default\",\n      \"depth\": 2,\n      \"sql\": \"/*application:web,correlation_id:01FE4KT6ANPWC8NEHKF05XZVF0,endpoint_id:POST /api/:version/projects/:id/merge_requests/:merge_request_iid/approve*/ BEGIN\",\n      \"severity\": \"INFO\"\n    }\n```\n\u003c/details\u003e","state":"closed","created_at":"2021-08-19T21:26:52.881Z","updated_at":"2021-09-01T20:56:43.044Z","closed_at":"2021-09-01T20:56:43.011Z","closed_by":{"id":5213202,"username":"sgoldstein","name":"Sam Goldstein","state":"active","avatar_url":"https://secure.gravatar.com/avatar/496bede2487964298f1465558fe4bdbf?s=80\u0026d=identicon","web_url":"https://gitlab.com/sgoldstein"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","auto updated","devops::create","group::optimize","infradev","priority::1","section::dev","severity::1","subtransactions","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338960","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338960","notes":"https://gitlab.com/api/v4/projects/278964/issues/338960/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338960/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338960","relative":"#338960","full":"gitlab-org/gitlab#338960"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6540,"epic":{"id":324103,"iid":6540,"title":"A holistic approach to handle database subtransactions","url":"/groups/gitlab-org/-/epics/6540","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92296301,"iid":338953,"project_id":278964,"title":"Remove subtransactions from `Packages::Composer::CacheFile` model","description":"In https://gitlab.com/gitlab-org/gitlab/-/issues/338346#note_652623314 and https://gitlab.com/gitlab-org/gitlab/-/issues/338865#note_655312474, we identified the use of subtransactions can cause significant performance issues on PostgreSQL replicas at scale. If a long running transaction occurs, the subtransaction cache may not fit into the working set of memory, which can lead to a context switch storm when PostgreSQL needs to load subtransaction data from disk. While this arguably is a PostgreSQL bug, we should remove subtransactions entirely because they aren't performant at GitLab.com scale, nor are they strictly necessary.  More context in https://gitlab.slack.com/archives/C02BHCTH02D/p1629392215352100?thread_ts=1629388693.342800\u0026cid=C02BHCTH02D. \n\nFrom https://thanos.gitlab.net/classic/graph?g0.range_input=2h\u0026g0.stacked=0\u0026g0.max_source_resolution=0s\u0026g0.expr=sum(rate(gitlab_active_record_subtransactions_total%7Benv%3D%22gprd%22%7D%5B1m%5D))%20by%20(model)\u0026g0.tab=0 you can see `Packages::Composer::CacheFile` is generating subtransactions.  These should be removed from the codebase asap.\n\nWe currently have [an issue open](https://gitlab.com/gitlab-org/gitlab/-/issues/333694) to remove this code entirely being worked on by a ~\"Community contribution\" that we will likely need to accelerate this efforts.","state":"closed","created_at":"2021-08-19T21:16:13.549Z","updated_at":"2021-10-27T10:38:38.120Z","closed_at":"2021-08-20T22:34:04.154Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","[deprecated] Accepting merge requests","auto updated","bug::performance","devops::package","group::package registry","infradev","priority::1","section::ops","severity::1","subtransactions","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338953","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338953","notes":"https://gitlab.com/api/v4/projects/278964/issues/338953/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338953/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338953","relative":"#338953","full":"gitlab-org/gitlab#338953"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92295721,"iid":338947,"project_id":278964,"title":"Remove subtransactions from `Packages::Package` model","description":"In https://gitlab.com/gitlab-org/gitlab/-/issues/338346#note_652623314 and https://gitlab.com/gitlab-org/gitlab/-/issues/338865#note_655312474, we identified the use of subtransactions can cause significant performance issues on PostgreSQL replicas at scale. If a long running transaction occurs, the subtransaction cache may not fit into the working set of memory, which can lead to a context switch storm when PostgreSQL needs to load subtransaction data from disk. While this arguably is a PostgreSQL bug, we should remove subtransactions entirely because they aren't performant at GitLab.com scale, nor are they strictly necessary.  More context in https://gitlab.slack.com/archives/C02BHCTH02D/p1629392215352100?thread_ts=1629388693.342800\u0026cid=C02BHCTH02D. \n\nFrom https://thanos.gitlab.net/classic/graph?g0.range_input=2h\u0026g0.stacked=0\u0026g0.max_source_resolution=0s\u0026g0.expr=sum(rate(gitlab_active_record_subtransactions_total%7Benv%3D%22gprd%22%7D%5B1m%5D))%20by%20(model)\u0026g0.tab=0 you can see `Packages::Package` is generating subtransactions.  These should be removed from the codebase asap.","state":"closed","created_at":"2021-08-19T20:52:57.471Z","updated_at":"2021-10-27T10:38:41.627Z","closed_at":"2021-08-25T06:49:55.226Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","auto updated","bug::performance","devops::package","group::package registry","infradev","package:active","priority::1","section::ops","severity::1","subtransactions","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338947","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338947","notes":"https://gitlab.com/api/v4/projects/278964/issues/338947/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338947/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338947","relative":"#338947","full":"gitlab-org/gitlab#338947"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92292520,"iid":338939,"project_id":278964,"title":"[Feature flag] Rollout of `ff_external_audit_events_namespace`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/issues/332747) on production,\nthat is currently behind the `ff_external_audit_events_namespace` feature flag.\n\nThis allows namespace owners to set HTTP endpoints to stream all audit events to for that group and its subgroups and projects.\n\n## Owners\n\n- Team: ~\"group::compliance\" \n- Most appropriate slack channel to reach out to: `#g_manage_compliance`\n- Best individual to reach out to: @mwoolf / @djensen\n- PM: Sam Kerr (@stkerr)\n\n## Stakeholders\n\n- PM: @stkerr \n- Primary engineer: @mwoolf \n- EM: @djensen \n- TW: @eread \n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n* Namespace owners should be able to use this feature as documented.\n\n### What might happen if this goes wrong?\n\n* Audit events may not be streamed as expected.\n\n### What can we monitor to detect problems with this?\n\nFailures in the `AuditEventStreamingWorker` sidekiq job.\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [ ] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it.\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [x] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [x] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [x] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [x] Link this rollout issue as a related issue.\n    - [x] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-08-19T19:23:44.325Z","updated_at":"2022-01-05T07:56:29.235Z","closed_at":"2022-01-05T07:56:07.656Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["auto updated","devops::manage","feature flag","feature::addition","group::compliance","ideal for new hires","priority::1","section::dev","type::feature","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":37,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338939","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":23},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"23 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338939","notes":"https://gitlab.com/api/v4/projects/278964/issues/338939/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338939/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338939","relative":"#338939","full":"gitlab-org/gitlab#338939"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6122,"epic":{"id":284129,"iid":6122,"title":"Emit Namespace Level External Audit Events - GraphQL API version","url":"/groups/gitlab-org/-/epics/6122","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":92291131,"iid":338933,"project_id":278964,"title":"Version app: Monitor and proactively handle the DB running out of disk space","description":"[Earlier this year](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/13120), the Version app's database ran out of disk space and caused some downtime. Our team does not have any visibility into the amount of free disk space that the database, so this was not something we anticipated.\n\nIn order to prevent this from happening in the future, we should set up some monitoring/altering so that we can proactively increase the disk size before this causes downtime. [There doesn't appear to be an way of doing this](https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/13120#note_551996175), so it will require some investigation.\n\nIt seems like Cloud SQL has [built-in functionality for automatically increasing the disk size before it gets full](https://cloud.google.com/sql/docs/postgres/instance-settings#automatic-storage-increase-2ndgen). This is one option we could evaluate.","state":"closed","created_at":"2021-08-19T18:50:46.418Z","updated_at":"2021-11-02T12:15:26.952Z","closed_at":"2021-09-30T14:08:18.397Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["Deliverable","[deprecated] Accepting merge requests","auto updated","backend","devops::growth","group::product intelligence","infrastructure","maintenance::refactor","section::growth","type::maintenance","won't do","workflow::ready for development"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[],"author":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338933","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338933","notes":"https://gitlab.com/api/v4/projects/278964/issues/338933/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338933/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338933","relative":"#338933","full":"gitlab-org/gitlab#338933"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6371,"epic":{"id":309188,"iid":6371,"title":"Version-App maintenance","url":"/groups/gitlab-org/-/epics/6371","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":92288508,"iid":338925,"project_id":278964,"title":"API endpoints captured as unauthenticated by RackAttack","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n1. [Rack Attack logging as throttle_unauthenticated](https://log.gprd.gitlab.net/goto/5616be443f6ded2bb326b3922d79ae69) \n![image](/uploads/52eb69002a9c2eab74914f6ed7b3875e/image.png)\n\n1. [Rails logging as a known user](https://log.gprd.gitlab.net/goto/7088596e29af777ff2f1a9e330ae579c) \n![image](/uploads/540be0d859c30682d6a469a0cac91aff/image.png)\n\nIn particular, the same basic endpoint/controller is reporting an authenticated user in the Rails logs, but RackAttack has seen it as unauthenticated.  The problem endpoints are in the dependency proxy:\n\n* Groups::DependencyProxyForContainersController#blob\n* Groups::DependencyProxyForContainersController#manifest\n\n### Example Project\n\nExample project can be found on https://gitlab.zendesk.com/agent/tickets/230844\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\nThe customer gets a 429 rate limit errors for unauthenticated requests when they are actually authenticated using CI/CD with dependency proxy and performing `docker pull` from a self-managed runner that is connected to GitLab.com \n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\nThe customer should not get 429 rate limit errors when request are authenticated until they hit the [rate limit](https://gitlab.zendesk.com/agent/tickets/230844) of 2000 request per minute\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n* https://gitlab.slack.com/archives/CB3LSMEJV/p1629323305299800\n\u003e https://log.gprd.gitlab.net/goto/5616be443f6ded2bb326b3922d79ae69 shows the Rack_Attack logs for the instance they reported from yesterday  (a little over 32 hours ago).  One key fact is that there is no username and json.matched is throttle_unauthenticated, so this was an unauth per-IP rate-limit against $REDACTED_IP\n\n\u003e And https://log.gprd.gitlab.net/goto/7088596e29af777ff2f1a9e330ae579c shows logs from that IP at that time, where we can see for 13:57 they did indeed exceed 500/min (the limit for unauth'd requests : https://docs.gitlab.com/ee/user/gitlab_com/#gitlabcom-specific-rate-limits).BUT: if we look for access logs from that IP without a username (https://log.gprd.gitlab.net/goto/a42ae8238f545ad4668d3b94833a5621), we only find 6.  \n\n\u003e So: the requests were authenticated, but RackAttack thought they weren't.   We've seen this sort of behavior on other endpoints (back when we were enabling rate-limiting in the first place).  It is likely a bug/weirdness in the auth handling\n\n\n* https://log.gprd.gitlab.net/goto/5616be443f6ded2bb326b3922d79ae69\n* https://log.gprd.gitlab.net/goto/7088596e29af777ff2f1a9e330ae579c\n* https://log.gprd.gitlab.net/goto/a42ae8238f545ad4668d3b94833a5621\n* https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/753\n  * Previous similar situation; same basic symptoms, suggests a path for investivgation\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\nGitLab 14.1\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-08-19T17:51:02.694Z","updated_at":"2022-05-24T10:12:20.620Z","closed_at":"2021-10-21T12:55:51.083Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Dependency Proxy","Deliverable","Package:P1","api","customer","devops::package","gitlab.com","group::package registry","group::scalability","section::ops","type::bug","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":6426278,"username":"mmora","name":"Mario Mora","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6426278/avatar.png","web_url":"https://gitlab.com/mmora"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":28,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338925","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338925","notes":"https://gitlab.com/api/v4/projects/278964/issues/338925/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338925/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338925","relative":"#338925","full":"gitlab-org/gitlab#338925"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92287712,"iid":338923,"project_id":278964,"title":"Remove Subtransactions in Event","description":"## Background\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/338346#note_652623314 and https://gitlab.com/gitlab-org/gitlab/-/issues/338865#note_655312474, we identified the use of subtransactions can cause significant performance issues on PostgreSQL replicas at scale. If a long running transaction occurs, the subtransaction cache may not fit into the working set of memory, which can lead to a context switch storm when PostgreSQL needs to load subtransaction data from disk. While this arguably is a PostgreSQL bug, we should remove subtransactions entirely because they aren't performant at GitLab.com scale, nor are they strictly necessary.  More context in https://gitlab.slack.com/archives/C02BHCTH02D/p1629392215352100?thread_ts=1629388693.342800\u0026cid=C02BHCTH02D. \n\n## Problem to solve\n\nFrom Thanos you can see `Event` is generating subtransactions.  These should be removed from the codebase asap:\n\n- [Event model only](https://thanos.gitlab.net/classic/graph?g0.range_input=2h\u0026g0.stacked=0\u0026g0.max_source_resolution=0s\u0026g0.expr=sum(rate(gitlab_active_record_subtransactions_total%7Benv%3D%22gprd%22%2Cmodel%3D%22Event%22%7D%5B1m%5D))%20by%20(model)\u0026g0.tab=0)\n- [All models](https://thanos.gitlab.net/classic/graph?g0.range_input=2h\u0026g0.stacked=0\u0026g0.max_source_resolution=0s\u0026g0.expr=sum(rate(gitlab_active_record_subtransactions_total%7Benv%3D%22gprd%22%7D%5B1m%5D))%20by%20(model)\u0026g0.tab=0)","state":"closed","created_at":"2021-08-19T17:30:42.279Z","updated_at":"2021-10-27T10:38:42.185Z","closed_at":"2021-08-23T14:37:12.062Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","auto updated","bug::performance","devops::manage","group::compliance","infradev","priority::1","section::dev","severity::1","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5213202,"username":"sgoldstein","name":"Sam Goldstein","state":"active","avatar_url":"https://secure.gravatar.com/avatar/496bede2487964298f1465558fe4bdbf?s=80\u0026d=identicon","web_url":"https://gitlab.com/sgoldstein"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338923","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338923","notes":"https://gitlab.com/api/v4/projects/278964/issues/338923/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338923/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338923","relative":"#338923","full":"gitlab-org/gitlab#338923"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92285438,"iid":338911,"project_id":278964,"title":"Allow people to import existing schedules when setting up on-call schedules in GitLab","description":"### Problem\n\nAs part of https://gitlab.com/gitlab-org/gitlab/-/issues/337237 - it was highlighted that people migrating from other tools might want to import their existing schedules into GitLab so they don't have to rebuild everything from scratch. This would make it easier for people to migrate from their existing on-call schedule management to GitLab.\n\n### WIP Proposal\n\nIntroduce a separate workflow on the on-call schedule empty state that allows people to import a .csv or a .ics file. How this could work/look: \n\n| Introduce new option to import a schedule | Modal to select file | File selected | Schedule imported | Schedule import failed |\n| ------ | ------ |  ------ | ------ |  ------ |\n| ![On-call_schedules](/uploads/7fb2087f38af41360c44590849f10936/On-call_schedules.png) | ![Modal](/uploads/6bc722253006dd53ca7a6872fa0e2c96/Modal.png) | ![Modal-1](/uploads/8a15bca02f1df16749d9e59a5fe6219e/Modal-1.png) | ![Rotation_added](/uploads/641c673a0e842e1ddd069a2c735af053/Rotation_added.png) | ![On-call_schedules-1](/uploads/b26d75784f5774c713579102a1b49d23/On-call_schedules-1.png) |\n\n**Things we'll need engineering input on**\n- Since we separate out rotations/on-call schedules, can we actually get the information we need from a single file/import process? Or, would people need to import the schedule first, and then the rotation?\n- Would we be able to map usernames in an exported csv file to usernames in GitLab? If not, would we need an additional step in this process?\n- Can we support both csv and ics files out-of-the-box, or should we focus first on one or the other?\n\nDepending on the answers to these questions, it may or may not make sense to implement this feature. It could be that the work needed to make this possible is prohibitively high, and that this isn't a workflow we want to support. Will update this issue when we make a decision on this point.\n\n\n[Figma file](https://www.figma.com/file/9ZCGhybxbrnq19Sj5BsAZ2/Mobile-designs-on-call-schedules-gitlab-com-and-327021-Copy?node-id=593%3A32096)","state":"closed","created_at":"2021-08-19T16:35:43.795Z","updated_at":"2021-11-30T22:30:48.748Z","closed_at":"2021-10-20T16:22:59.759Z","closed_by":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"labels":["Category:On-call Schedule Management","OKR","UX","UX scorecard-rec","devops::monitor","group::respond","learnability","section::ops","severity::4","type::feature","workflow::validation backlog"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"}],"author":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"type":"ISSUE","assignee":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338911","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338911","notes":"https://gitlab.com/api/v4/projects/278964/issues/338911/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338911/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338911","relative":"#338911","full":"gitlab-org/gitlab#338911"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6594,"epic":{"id":329831,"iid":6594,"title":"On-call schedule management usability improvements","url":"/groups/gitlab-org/-/epics/6594","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92282712,"iid":338908,"project_id":278964,"title":"[Feature flag] Rollout of `ci_create_external_pr_pipeline_async`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [moving the external pr pipeline creation to sidekiq](https://gitlab.com/gitlab-org/gitlab/-/issues/336238) on production,\nthat is currently behind the `ci_create_external_pr_pipeline_async` feature flag.\n\nIntroduced in: !68567\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::pipeline authoring\" \n- Most appropriate slack channel to reach out to: `#g_pipeline-authoring`\n- Best individual to reach out to: @furkanayhan \n- PM: @dhershkovitch \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [ ] Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set ci_create_external_pr_pipeline_async true --dev`\n    - [x] `/chatops run feature set ci_create_external_pr_pipeline_async true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [ ] Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [ ] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e ci_create_external_pr_pipeline_async true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_create_external_pr_pipeline_async \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_create_external_pr_pipeline_async \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set ci_create_external_pr_pipeline_async true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `ci_create_external_pr_pipeline_async`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `ci_create_external_pr_pipeline_async` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete ci_create_external_pr_pipeline_async --dev`\n    - [ ] `/chatops run feature delete ci_create_external_pr_pipeline_async --staging`\n    - [ ] `/chatops run feature delete ci_create_external_pr_pipeline_async`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_create_external_pr_pipeline_async false\n```","state":"closed","created_at":"2021-08-19T15:36:30.968Z","updated_at":"2021-11-08T10:37:28.084Z","closed_at":"2021-11-08T10:37:28.070Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","backend","devops::verify","feature flag","group::pipeline authoring","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338908","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":7},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338908","notes":"https://gitlab.com/api/v4/projects/278964/issues/338908/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338908/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338908","relative":"#338908","full":"gitlab-org/gitlab#338908"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":36606,"iid":35,"sequence":2,"group_id":9970,"title":"Pipeline Authoring: November 01, 2021 - November 14, 2021","description":"Target milestone `14.5`","state":3,"created_at":"2021-10-05T20:42:58.372Z","updated_at":"2021-12-21T15:27:22.624Z","start_date":"2021-11-01","due_date":"2021-11-14","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/36606"},"health_status":"on_track"},{"id":92274458,"iid":338900,"project_id":278964,"title":"ESLint - Switch `v-html` exceptions to inline comments","description":"### Context \n\nWe have been using eslint rule to avoid `v-html`, as you know `v-html` can lead to [XSS issues](https://vuejs.org/v2/api/#v-html).\n\nFor existing `v-html` usages, we turned off eslint rule per-file instead of per-line to avoid adding noise in the templates and code quality reasons discussed at https://gitlab.com/gitlab-org/gitlab/-/merge_requests/39800.\n\n### Proposal\n\nThis issue is to move exception rule from per-file to per-line to balance security and code quality together. This is due to the fact that with per-file exceptions, especially with longer files, `v-html` might slip through easier introducing XSS vulnerabilities.","state":"closed","created_at":"2021-08-19T13:55:08.169Z","updated_at":"2022-03-16T11:38:36.850Z","closed_at":"2021-09-02T09:34:35.856Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["devops::secure","group::analyzer frontend","maintenance::workflow","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338900","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338900","notes":"https://gitlab.com/api/v4/projects/278964/issues/338900/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338900/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338900","relative":"#338900","full":"gitlab-org/gitlab#338900"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":92260140,"iid":338877,"project_id":278964,"title":"Use default_branch_image from JSON report to fingerprint location","description":"## Why are we doing this work\n\nCurrently users who run container scanning in a branch will see a duplicate of the findings that appear in the default branch instead of just findings that are newly introduced by that branch. We want to avoid duplicate findings for branches that are already present in default branch. In order to achieve it, a new [CI/CD variable](https://docs.gitlab.com/ee/user/application_security/container_scanning/#available-variables) `CS_DEFAULT_BRANCH_IMAGE` will be used by the user to set the image which will be used to de-duplicate similar findings for the branch. The value set in this variable will be sent to GitLab Rails from [`gcs`](https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning) through the report JSON (`gl-container-scanning-report.json`).\n\nThis issue will address updating [`Gitlab::Ci::Parsers::Security::ContainerScanning`](https://gitlab.com/gitlab-org/gitlab/-/blob/f38e31c9/ee/lib/gitlab/ci/parsers/security/container_scanning.rb) to read the `default_branch_image` value from `location` object in JSON report. [`Gitlab::Ci::Reports::Security::Locations::ContainerScanning`](https://gitlab.com/gitlab-org/gitlab/-/blob/f38e31c9/ee/lib/gitlab/ci/reports/security/locations/container_scanning.rb) will be updated to use `default_branch_image` to fingerprint the location.\n\n## Requirements\n\n- The `default_branch_image` should be used to fingerprint the location only if the job runs for non-default branch pipeline. \n- For the initial iteration, we will not verify if `default_branch_image` is a valid image.\n- `CS_DEFAULT_BRANCH_IMAGE` value should not be changed once it is set, changing so would not work the way it is expected.\n\n[PoC MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/66267) could be used as a reference.\n\n## Relevant links\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/5577)\n- [Spike](https://gitlab.com/gitlab-org/gitlab/-/issues/330641)\n\n## Non-functional requirements\n- [ ] Documentation:\n  - [ ] Add `CS_DEFAULT_BRANCH_IMAGE` to [doc/user/application_security/container_scanning/index.md](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/user/application_security/container_scanning/index.md#available-cicd-variables)\n  - [ ] Mention that the variable should not be updated once it is set. If it is changed the feature will not work as expected.\n  - [ ] Since the value set in `CS_DEFAULT_BRANCH_IMAGE` will not be validated, it should be mentioned that the user should follow a proper naming convention for `CS_DEFAULT_BRANCH_IMAGE` Preferable values are:\n    - `$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG:latest`\n    - `$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG:CI_DEFAULT_BRANCH`\n- [-] Feature flag:\n- [-] Performance:\n- [ ] Testing:\n  - [ ] Test if setting `CS_DEFAULT_BRANCH_IMAGE` for an existing project with duplicate vulnerabilities does not create new duplicate vulnerabilities\n\n## Implementation plan\n\n- [x] ~backend Introduce new feature flag `improved_container_scan_matching` - https://gitlab.com/gitlab-org/gitlab/-/issues/344534\n- [ ] ~backend Introduce a new parameter `is_default_branch` to [`Gitlab::Ci::Parsers::Security::Common`](https://gitlab.com/gitlab-org/gitlab/-/blob/a83c8de8/lib/gitlab/ci/parsers/security/common.rb#L14) to denote if the job runs on default branch\n- [x] ~backend Update [`Gitlab::Ci::Parsers::Security::ContainerScanning`](https://gitlab.com/gitlab-org/gitlab/-/blob/f38e31c9/ee/lib/gitlab/ci/parsers/security/container_scanning.rb) to read the `default_branch_image` value from `location` object in JSON report if `is_default_branch` is `false`\n- [x] ~backend Update [`Gitlab::Ci::Reports::Security::Locations::ContainerScanning`](https://gitlab.com/gitlab-org/gitlab/-/blob/f38e31c9/ee/lib/gitlab/ci/reports/security/locations/container_scanning.rb) to use `default_branch_image` to fingerprint the location.\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-08-19T10:28:53.833Z","updated_at":"2022-10-30T23:42:54.378Z","closed_at":"2021-12-17T22:24:27.091Z","closed_by":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"labels":["Category:Container Scanning","GitLab Ultimate","backend","devops::govern","direction","group::security policies","missed:14.5","section::sec","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"}],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/338877","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/338877","notes":"https://gitlab.com/api/v4/projects/278964/issues/338877/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/338877/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#338877","relative":"#338877","full":"gitlab-org/gitlab#338877"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5577,"epic":{"id":223714,"iid":5577,"title":"Custom Container Scanning Vulnerability Deduplication","url":"/groups/gitlab-org/-/epics/5577","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]