[{"id":89633517,"iid":335038,"project_id":278964,"title":"[ENG] Run automatic pop-out of trial reminder as separate experiment","description":"Weâ€™ve decided to run the forced popover as a separate experiment. In order to do so, we need a new feature flag and a new experiment set up with the `gitlab-experiment` gem.","state":"closed","created_at":"2021-07-01T19:46:38.725Z","updated_at":"2021-07-20T04:49:37.290Z","closed_at":"2021-07-09T04:36:54.829Z","closed_by":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"labels":["Category:Conversion Experiment","Engineering","Stretch","auto updated","devops::growth","group::acquisition","growth experiment","link::child issue","milestone::p1","section::growth"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335038","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335038","notes":"https://gitlab.com/api/v4/projects/278964/issues/335038/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335038/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335038","relative":"#335038","full":"gitlab-org/gitlab#335038"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3540,"epic":{"id":64886,"iid":3540,"title":"[ENG] Display active trial status","url":"/groups/gitlab-org/-/epics/3540","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89633179,"iid":335037,"project_id":278964,"title":"Follow-up from \"Present error when DAST profile not found\"","description":"The following discussions from !64679 should be addressed:\n\n- [x] @alexkalderimis started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64679#note_616850958): \n\n    \u003e use of `append` is very rare in our codebase. \n    \u003e \n    \u003e I think `#push` or `#\u003c\u003c` are to be preferred:\n    \u003e \n    \u003e ```suggestion:-0+0\n    \u003e             errors.push(\"DAST profile not found: #{name}\")\n    \u003e ```\n    \u003e \n    \u003e ```suggestion:-0+0\n    \u003e             errors \u003c\u003c \"DAST profile not found: #{name}\"\n    \u003e ```\n    \u003e \n    \u003e is there some reason we should use `append` here?\n\n- [x] @alexkalderimis started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64679#note_616850961): \n\n    \u003e ```suggestion:-0+0\n    \u003e           unless can?(current_user, :read_on_demand_scans, profile)\n    \u003e ```\n    \u003e \n    \u003e there is no need for the presence check - an ability check on `nil` is _always_ false.\n\n- [x] @alexkalderimis started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64679#note_616850970): \n\n    \u003e why are we memoizing the `errors`?\n    \u003e \n    \u003e Also, while this is not a big issue, there is no reason to use `strong_memoize` here, since `super` can clearly never return `nil` (since we unconditionally call `concat` on it).\n\n- [x] @alexkalderimis started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64679#note_616850973): \n\n    \u003e yeah, this is an odd test - it is stubbing a lot of state here. I think we can proceed with this, but it does make my spidey-senses twitch.","state":"closed","created_at":"2021-07-01T19:32:41.313Z","updated_at":"2021-09-10T02:50:34.792Z","closed_at":"2021-09-10T02:50:34.778Z","closed_by":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"labels":["Category:DAST","backend","devops::secure","group::dynamic analysis","maintenance::refactor","section::sec"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"}],"author":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"type":"ISSUE","assignee":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335037","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335037","notes":"https://gitlab.com/api/v4/projects/278964/issues/335037/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335037/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335037","relative":"#335037","full":"gitlab-org/gitlab#335037"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89632770,"iid":335035,"project_id":278964,"title":"Condense project selector stores/instances","description":"The following discussion from !64560 should be addressed:\n\n- [ ] @aturinske started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64560#note_615894510):  (+1 comment)\n\n    \u003e This required a lot of methods and that was annoying. Especially since I copied all of them [the instance-level security dashboard component](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/security_dashboard/components/instance/project_manager.vue) and they all seem to work. Maybe (as a follow-up) I should create a wrapper around `project-selector` that encapsulates all these methods for these two instances? Counter-point: There are only two instances, so maybe do that if there is a third instance? There are actually two other instances of the `project-selector` (instance-level [operations](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/operations/components/dashboard/dashboard.vue) and [environment](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/environments_dashboard/components/dashboard/dashboard.vue) dashboards), but both of those use a `Vuex` store. Oh, there is a [`project_selctor Vuex store`](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/security_dashboard/store/modules/project_selector), should I be using that instead of these copy/pasted methods?\n    \u003e \n    \u003e I will...look into this.\n\n\n### Implementation\n\nI talked to @ekigbo about this and we decided on a two pronged approach\n\n- [ ] 1. ~~Work on trying to merge the Vuex stores together so that the one in [`vue_shared`](https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/app/assets/javascripts/vue_shared/dashboards/store) is left. This can start by merging the actions; a lot of the actions are the exact same so import the actions from the `vue_shared` one into the other and delete the repeated actions. Then simplify any extra actions that do anything different and use that actions file as an override file. Hopefully by then we will be able to see if these Vuex stores can be condensed into one or if they need to be separate~~ Delete the [`security dashboard project selector Vuex store`](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/security_dashboard/store/modules/project_selector) as it is only used in https://gitlab.com/gitlab-org/gitlab/blob/master/ee/spec/frontend/security_dashboard/store/modules/vulnerable_projects/mutations_spec.js, which seems like a mistake.\n![image](/uploads/8e9f0f631358c21cdbd53df4c9266ee1/image.png)\n- [ ] 2. Replace all the reused logic in [instance-level security dashboard project manager](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/security_dashboard/components/instance/project_manager.vue) with the newly created [`instance_project_selector`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/threat_monitoring/components/instance_project_selector.vue) component.\n- [ ] As a side note, we should also create storybook stories for the [`project_selector`](https://gitlab.com/gitlab-org/gitlab/blob/master/app/assets/javascripts/vue_shared/components/project_selector/project_selector.vue)\n- [ ] Friendly reminder to make sure to ask for a ~UX feedback after submitting the MR.\n\n## Additional context\n\nThe current implementation has a help text. We want to keep that text.\n\n| current project selector | proposed project selector |\n| ------ | ------ |\n| ![image](/uploads/4d0001b302e057725998dc5493d5f97d/image.png) | ![image](/uploads/886b577045fc98dbcaf2ba5ac07e4939/image.png) |","state":"closed","created_at":"2021-07-01T19:20:15.883Z","updated_at":"2022-12-06T11:44:30.050Z","closed_at":"2022-12-06T11:44:30.025Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Vulnerability Management","devops::govern","frontend","group::threat insights","maintenance::refactor","section::sec","type::maintenance","workflow::refinement"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335035","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335035","notes":"https://gitlab.com/api/v4/projects/278964/issues/335035/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335035/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335035","relative":"#335035","full":"gitlab-org/gitlab#335035"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89631381,"iid":335032,"project_id":278964,"title":"Document user lock due to failed sign-in attempts","description":"We have user lockout console reset instructions documented at https://docs.gitlab.com/ee/security/unlock_user.html. However, we don't seem to have more general user lockout documentation. \n\nI suspect we should create a new page within `doc/administration/`, explaining what leads to a lockout (10 failed sign-in attempts) and that the lock will automatically reset in 10 minutes. There is also an email sent to the user explaining this, as well as a link to unlock immediately. \n\n----- \n\n## Original description\n\n### Problem\n\nI'm using GitLab Community Edition Omnibus. After using GitLab for over 6 years. It is the first time I've encountered a locked user. There is no indication of this state under the Admin UI (we are on 13.12.5) nor is there a path to resolution.\n\nI found this [page](https://docs.gitlab.com/13.12/ee/security/unlock_user.html) on unlocking a user via the console. That resolves the issue for the user, but it's not intuitive.\n\n### Proposal \n\nThere are 2 issues to be addressed:\n\n* Under the Admin UI (probably under `/admin/users`) there should be some indication that a user is locked. One may argue that it isn't necessary because the user will alert an administrator to get the lock resolved. But for the following proposal, it would be necessary.\n  - Add `(Locked)` after the user's name\n* A mean to unlock a locked user via the UI, rather than the console.\n  - This does exist, but the documentation needs to be updated. Update docs to make note of the `Unlock` action. ![Screen_Shot_2021-08-12_at_7.57.45_AM](/uploads/b61eddf59f07d7b9d483f38ab597e85f/Screen_Shot_2021-08-12_at_7.57.45_AM.png)\n\n\nFrom the documentation, this state is triggered by 10 failed login attempts. Does it self correct after some grace period? The documentation doesn't say, so I assume it doesn't. For some one not versed in Ruby on Rails, the console method is obtuse, and it isn't obvious if it had worked.\n\nIt self-corrects after 10 minutes. This should be added to the documentation\n\n### Implementation plan\n\n1. Add `(Locked)` after the name of any locked user\n![Screen_Shot_2021-08-12_at_1.20.48_PM](/uploads/5621b44960f1660e614e16127c1f4d8e/Screen_Shot_2021-08-12_at_1.20.48_PM.png)\n1. Document the `Unlock` action that exists in the `User administration` dropdown\n1. Document that a locked account self-corrects after 10 minutes","state":"closed","created_at":"2021-07-01T18:42:43.569Z","updated_at":"2022-01-27T18:30:59.279Z","closed_at":"2022-01-12T19:19:40.138Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","candidate::14.7","devops::manage","documentation","feature::enhancement","frontend","group::authentication and authorization","release post item::in review","section::dev","type::feature","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":284274,"username":"dvusboy1","name":"K.C. Wong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f2856c57b85a6fdb7ad8da6e7844f66d?s=80\u0026d=identicon","web_url":"https://gitlab.com/dvusboy1"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335032","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335032","notes":"https://gitlab.com/api/v4/projects/278964/issues/335032/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335032/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335032","relative":"#335032","full":"gitlab-org/gitlab#335032"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89628721,"iid":335022,"project_id":278964,"title":"Reschedule RecalculateVulnerabilitiesOccurrencesUuid for all findings to rectify UUIDv5","description":"### Why are we doing this work\n\nAfter https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60540 got merged I noticed 276/4162 of jobs are still pending. We need to reschedule those and figure out what's wrong (if anything).\n\nAs we have recently discovered (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/67578), the way we were generating UUIDv5 was wrong, we need to reschedule BG migration for all findings again. \n\n\n### Implementation plan\n\n* ~database `db/post_migrate/20210604070207_retry_backfill_traversal_ids.rb` can be used as a base for this\n* Reschedule RecalculateVulnerabilitiesOccurrencesUuid for all findings","state":"closed","created_at":"2021-07-01T17:31:10.992Z","updated_at":"2021-10-28T13:55:39.930Z","closed_at":"2021-10-14T21:48:41.229Z","closed_by":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"labels":["Category:Vulnerability Management","backend","database","devops::secure","group::threat insights","maintenance::refactor","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"}],"author":{"id":487608,"username":"Quintasan","name":"MichaÅ‚ ZajÄ…c","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"type":"ISSUE","assignee":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335022","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335022","notes":"https://gitlab.com/api/v4/projects/278964/issues/335022/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335022/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335022","relative":"#335022","full":"gitlab-org/gitlab#335022"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2791,"epic":{"id":27148,"iid":2791,"title":"Deprecate and remove project_fingerprint","url":"/groups/gitlab-org/-/epics/2791","group_id":9970},"iteration":null,"health_status":null},{"id":89627935,"iid":335020,"project_id":278964,"title":"GitHub Importer - ERROR: canceling statement due to statement timeout","description":"### Proposal\n\nStart with: why did bulk inserting an issue cause the database to timeout?\n\n* [ ] investigate the error\n* [ ] identify if there is a problem and resolve it \n* [ ] verify that there is no problem anymore based on data\n* [ ] close this issue\n\n### Error details \nhttps://sentry.gitlab.net/gitlab/gitlabcom/issues/2680174/?referrer=gitlab_plugin\n\n```\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\n\n  activerecord (6.1.3.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:47:in `exec'\n  activerecord (6.1.3.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:47:in `block (2 levels) in execute'\n  activesupport (6.1.3.2) lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'\n  activesupport (6.1.3.2) lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'\n  activesupport (6.1.3.2) lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'\n...\n(108 additional frame(s) were not displayed)\n\nActiveRecord::QueryCanceled: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout\n```","state":"closed","created_at":"2021-07-01T17:19:28.782Z","updated_at":"2022-10-24T03:03:37.970Z","closed_at":"2022-10-24T03:03:37.947Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ðŸ¤– GitLab Bot ðŸ¤–","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Importers","Impact::Low","Importer:GitHub","[deprecated] Accepting merge requests","auto closed","backend","devops::manage","group::import","section::dev","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":null,"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335020","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335020","notes":"https://gitlab.com/api/v4/projects/278964/issues/335020/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335020/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335020","relative":"#335020","full":"gitlab-org/gitlab#335020"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6680,"epic":{"id":342207,"iid":6680,"title":"Importer Availability","url":"/groups/gitlab-org/-/epics/6680","group_id":9970},"iteration":null,"health_status":null},{"id":89625398,"iid":335016,"project_id":278964,"title":"Modifying filter attribute in audit events only shows id number","description":"### Summary\n\nWhen hitting back, the filter option changes from a name to its id number.\n\n### Steps to reproduce\n\nMake a selection for any filter option, and then hit backspace\n\n![bug](/uploads/d51e48ac723249aed38650b754245247/bug.gif)\n\n### What is the expected *correct* behavior?\n\nShow the string, so that the dropdown gives the right options instead of saying no results.\n\n![Screen_Shot_2021-07-01_at_12.31.13_PM](/uploads/eb08f9dd9e6ee52cd82ff15f925b56bc/Screen_Shot_2021-07-01_at_12.31.13_PM.png)\n\n### Implementation\n\n~backend - :three: or more\n\n* Update `ee/app/controllers/admin/audit_logs_controller.rb` to accept \u0026 find by username instead of `entity_id` for users.\n* Update `ee/app/controllers/concerns/audit_events/audit_logs_params.rb` to accept usernames for user entities.\n* Update `ee/app/finders/audit_log_finder.rb` to accept \u0026 find by usernames for users\n* Update `ee/app/controllers/projects/audit_events_controller.rb` to filter using the current user's username instead of id.\n* Update `ee/app/controllers/groups/audit_events_controller.rb` to filter using the current user's username instead of id.\n* Update specs\n\n~frontend - :five:\n\n* Update `ee/app/assets/javascripts/audit_events/components/tokens/user_token.vue` to get the user by username.\n* Update `ee/app/assets/javascripts/audit_events/components/tokens/member_token.vue` to get the member by username.\n* Update `ee/app/assets/javascripts/audit_events/components/tokens/shared/audit_filter_token.vue`:\n  * Fetch suggestions only when not `is_numeric` and not a valid username.\n  * `GlFilteredSearchSuggestion` value should be `username` and not `id` for users and members.\n* Update specs","state":"closed","created_at":"2021-07-01T16:32:15.153Z","updated_at":"2021-11-16T12:26:53.252Z","closed_at":"2021-11-16T12:26:53.237Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["Category:Audit Events","SUS::Impacting","UX","UX debt","backend","devops::manage","frontend","group::compliance","priority::2","section::dev","severity::4","type::bug","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":6193108,"username":"aregnery","name":"Austin Regnery","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6193108/avatar.png","web_url":"https://gitlab.com/aregnery"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335016","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335016","notes":"https://gitlab.com/api/v4/projects/278964/issues/335016/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335016/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335016","relative":"#335016","full":"gitlab-org/gitlab#335016"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":418,"epic":{"id":1213,"iid":418,"title":"Expand audit event usability","url":"/groups/gitlab-org/-/epics/418","group_id":9970},"iteration":null,"health_status":"needs_attention"},{"id":89625008,"iid":335015,"project_id":278964,"title":"Revert the index creation for int8 migration on `events`","description":"Following the decision to revert any changes that were introduced in %14.1 on GitLab.com for the `events` and the `push_event_payloads` tables (https://gitlab.com/gitlab-org/gitlab/-/issues/288005#note_616613886), we want to also revert the upfront index creation of the 3 indexes that were added to `events` with gitlab-com/gl-infra/production#5034.","state":"closed","created_at":"2021-07-01T16:26:53.980Z","updated_at":"2022-05-30T15:02:01.026Z","closed_at":"2021-07-02T10:20:19.774Z","closed_by":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","section::enablement","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335015","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335015","notes":"https://gitlab.com/api/v4/projects/278964/issues/335015/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335015/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335015","relative":"#335015","full":"gitlab-org/gitlab#335015"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5655,"epic":{"id":231482,"iid":5655,"title":"Address the Primary Key Overflow risk for the events table","url":"/groups/gitlab-org/-/epics/5655","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89624446,"iid":335014,"project_id":278964,"title":"Retry proxied JiraConnection installation deletion if the remote server is not reachable","description":"The following discussion from !62144 should be addressed:\n\n- [ ] @toupeira started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62144#note_592236215):  (+2 comments)\n\n    \u003e **thought:** I'm wondering why we're always destroying the installation, even if the self-managed instance didn't succeed.\n    \u003e \n    \u003e I guess it makes sense when the self-managed instance is permanently gone, so we can still clean up the record on gitlab.com. When self-managed has a temporary problem it might make sense to try again (which I believe will already happen currently, since this is a worker and we don't `rescue` the exception), but at that point the `installation` won't exist anymore and the worker will just exit.\n    \u003e \n    \u003e Also, this is happening in the background, so the app entry in Jira is already gone and the user can't re-trigger the uninstall event manually. And as Andy mentioned in the video Jira actually ignores errors from the uninstall endpoint, so I guess we can't be smarter about our response either. :thinking: \n    \u003e \n    \u003e I see two strategies:\n    \u003e \n    \u003e 1. Rescue errors and don't try again, which wouldn't work anyway as the installation is already destroyed on the next attempt.\n    \u003e    - I think we'd have to rescue `Gitlab::HTTP::HTTP_ERRORS`, and also check for `success?` on the `Gitlab::HTTP.post` call.\n    \u003e 2. Only destroy the installation if no errors happened, and let the worker retry.\n    \u003e    - This means the installation would stick around on gitlab.com if the self-managed instance isn't reachable anymore.\n    \u003e    - Maybe we have a way to check if this is the last retry for the worker? This sounds brittle too though.\n    \u003e \n    \u003e So I think for simplicity we should go with option 1, but maybe I'm misunderstanding something and the current code is fine too?","state":"closed","created_at":"2021-07-01T16:18:44.908Z","updated_at":"2022-11-22T19:38:40.150Z","closed_at":"2021-08-20T10:57:51.395Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["Category:Integrations","Jira::ConnectApp","Stretch","backend","devops::manage","group::integrations","maintenance::refactor","section::dev"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335014","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335014","notes":"https://gitlab.com/api/v4/projects/278964/issues/335014/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335014/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335014","relative":"#335014","full":"gitlab-org/gitlab#335014"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5650,"epic":{"id":230344,"iid":5650,"title":"Self-managed support extended to GitLab for Jira app","url":"/groups/gitlab-org/-/epics/5650","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":89623729,"iid":335013,"project_id":278964,"title":"[15.0] Remove Temporary container for 3.9 python, set python 3.9 as default gemnasium-python analyzer","description":"### Proposal\n\nFollowing the deprecation and removal announcement for python 3.9, we now need to:\n\n- remove the CI configuration that builds this image\n- switch default version of python to 3.9 instead of 3.6\n- update tests\n\nNB: release post announcement is handled in a separate issue: https://gitlab.com/gitlab-org/gitlab/-/issues/351503\n\n### Implementation plan\n\n- [x] update .gitlab-ci.yml\n  - [x] set `3.9` as default\n    - [ ] set `DS_PYTHON_VERSION` to `3.9` in dockerfile: https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/-/blob/master/Dockerfile#L1\n    - [ ] set `.functional` `DS_PYTHON_VERSION` to `3.9` in `.gitlab-ci.yml`: https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/-/blob/master/.gitlab-ci.yml#L116\n    - [ ] update comments and other mentions of `3.6` \n  - [x] change `3.9` image builds and integration tests to `3.10`\n    - [ ] change base `.python-3.9-version` job to `.python-3.10-version` and its `DS_PYTHON_VERSION` https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/-/blob/master/.gitlab-ci.yml#L14\n    - [ ] update jobs relying on `.python-3.9-version` job above\n    - [ ] update specs to change `3.9` tag and version to `3.10`\n    - [ ] update comments mentioning `3.9`\n- [x] update documentation to change language version https://docs.gitlab.com/ee/user/application_security/dependency_scanning/#supported-languages-and-package-managers \n- [ ] ensure the deprecated `gemnasium-python:2` image (using python 3.6) produces a report that passes the schema validation, which will be enforced in GitLab 15.0\n\n**This is a breaking change and should be released with the next Major version of the analyzer** See https://gitlab.com/gitlab-org/gitlab/-/issues/353974\n\n### Testing\n\nIntegration tests and secure test projects to be updated","state":"closed","created_at":"2021-07-01T16:10:19.208Z","updated_at":"2022-12-29T03:09:16.082Z","closed_at":"2022-05-16T15:10:05.139Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","maintenance::removal","quad-planning::complete-action","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335013","notes":"https://gitlab.com/api/v4/projects/278964/issues/335013/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335013/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335013","relative":"#335013","full":"gitlab-org/gitlab#335013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":89617509,"iid":335005,"project_id":278964,"title":"Update 14.1 release notes with the BatchedBackgroundMigrationWorker related upgrade requirements","description":"Follow-up to gitlab-org/gitlab#334998 to add the relevant information in the release notes as well.\n\nDue to an issue found where BatchedBackgroundMigrationWorkers not working for self-managed instances, we have created a fix that will require customers to upgrade to 14.1 to enable the fix and the subsequent PK migration processes for self-managed. Details:\n- `Database::BatchedBackgroundMigrationWorker` running only for GitLab.com - https://gitlab.com/gitlab-org/charts/gitlab/-/issues/2785#note_614738345\n- The fix - Run batched migrations on self-managed instances - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/65106\n- Decisions and next steps - https://gitlab.com/gitlab-org/gitlab/-/issues/288005#note_616613886 \n\ncc @amyphillips","state":"closed","created_at":"2021-07-01T15:00:24.656Z","updated_at":"2022-05-30T15:02:01.643Z","closed_at":"2021-07-20T13:28:41.626Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","section::enablement","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335005","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335005","notes":"https://gitlab.com/api/v4/projects/278964/issues/335005/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335005/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335005","relative":"#335005","full":"gitlab-org/gitlab#335005"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5655,"epic":{"id":231482,"iid":5655,"title":"Address the Primary Key Overflow risk for the events table","url":"/groups/gitlab-org/-/epics/5655","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89616303,"iid":335002,"project_id":278964,"title":"Revert the migration for finalizing the conversion to bigint for push_event_payloads","description":"We have not enabled the cron job for `BatchedBackgroundMigrationWorker` on self-managed instances in %\"14.0\", which results to the error mentioned in gitlab-org/charts/gitlab#2785 when an instance upgrades to a higher (minor) version that includes a column swap migration (e.g. gitlab-org/gitlab!64577)\n\nOur plan to resolve this is the following:\n\n1. Enable the cron job for `BatchedBackgroundMigrationWorker` on self-managed instances and backport the change to %\"14.0\" as well (gitlab-org/gitlab#334996)\n1. Revert the column swap migration for `push_event_payloads` (gitlab-org/gitlab!64577) on .com and do not release the migration to self managed instances.\n1. Release all the column swap changes on %\"14.2\" onwards\n\n   That makes %\"14.1\" a safe release, with the batched background migrations able to automatically run and finish the backfilling of all `bigint` columns.\n1. Require that all self-managed instance upgrade through %\"14.1\"\n\n   That will allow instances to catchup, finish all the pending migrations and be ready for the column swap once they upgrade to the next version they plan to upgrade\n\nIn this issue we'll track the efforts to revert the the column swap migration for `push_event_payloads` (gitlab-org/gitlab!64577) on Gitlab.com without releasing any migrations for self-managed instances in %\"14.1\" \n\nThe plan follows [option 2](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/65112) that @krasio proposed in https://gitlab.com/gitlab-org/gitlab/-/issues/288005#note_614744621","state":"closed","created_at":"2021-07-01T14:40:38.908Z","updated_at":"2022-05-30T15:02:02.213Z","closed_at":"2021-07-09T02:13:13.524Z","closed_by":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","section::enablement","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/335002","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/335002","notes":"https://gitlab.com/api/v4/projects/278964/issues/335002/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/335002/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#335002","relative":"#335002","full":"gitlab-org/gitlab#335002"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5655,"epic":{"id":231482,"iid":5655,"title":"Address the Primary Key Overflow risk for the events table","url":"/groups/gitlab-org/-/epics/5655","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89615458,"iid":334999,"project_id":278964,"title":"ADDITIONAL_CA_CERT_BUNDLE can break gemnasium","description":"### Summary\n\nOriginally reported - https://gitlab.com/gitlab-org/security-products/analyzers/template/-/issues/2#note_615877815 by @spyderz\n\nCurrently my gitlab pipeline is breaking for the gemnasium job. I tried to debug and was able to determine that the environment variable ADDITIONAL_CA_CERT_BUNDLE appears to be causing analyzer to exit with a 128 status. Let me know if there is anything else I can do to debug for you.\n\n```bash\ndocker run --privileged -it --rm --volume \"$PWD\":/tmp/app --env CI_PROJECT_DIR=/tmp/app registry.gitlab.com/gitlab-org/security-products/analyzers/gemnasium:2 sh\n/analyzer run\n[INFO] [Gemnasium] [2021-06-06T00:39:15Z] â–¶ GitLab Gemnasium analyzer v2.29.6\n[INFO] [Gemnasium] [2021-06-06T00:39:16Z] â–¶ Using commit 47649dd4418405650aaf9f6f605c835da43d7532\n of vulnerability database\n\n[INFO] [Gemnasium] [2021-06-06T00:39:16Z] â–¶ Cannot auto-remediate dependency file, not supported: composer.lock\nexport 'ADDITIONAL_CA_CERT_BUNDLE=-----BEGIN CERTIFICATE-----\n\u003ccut\u003e\n-----END CERTIFICATE-----'\n/analyzer run\n[INFO] [Gemnasium] [2021-06-06T00:39:48Z] â–¶ GitLab Gemnasium analyzer v2.29.6\nexit status 128\n```\n\n### Steps to reproduce\n\nPass a valid certificate which doesn't belong to `gitlab.com` in the `ADDITIONAL_CA_CERT_BUNDLE` variable and run `gemnasium`:\n\n```sh\n$ git clone git@gitlab.com:gitlab-org/security-products/tests/js-npm.git\n\n\u003csnip\u003e\n\n$ docker run -it --rm -v \"$PWD/js-npm\":/tmp/app \\\n   -e SECURE_LOG_LEVEL=debug \\\n   -e ADDITIONAL_CA_CERT_BUNDLE=\"$(true | openssl s_client -connect google.com:443 -servername google.com 2\u003e/dev/null | openssl x509)\" \\\n   -e CI_PROJECT_DIR=/tmp/app \\\n   registry.gitlab.com/gitlab-org/security-products/analyzers/gemnasium:2\n\n[INFO] [Gemnasium] [2021-10-13T09:20:32Z] â–¶ GitLab Gemnasium analyzer v2.29.8\n...\n[DEBU] [Gemnasium] [2021-10-13T09:20:32Z] â–¶ /usr/bin/git -C /gemnasium-db remote set-url origin https://gitlab.com/gitlab-org/security-products/gemnasium-db.git\n\n[DEBU] [Gemnasium] [2021-10-13T09:20:32Z] â–¶ /usr/bin/git -C /gemnasium-db fetch --force --tags origin master\nfatal: unable to access 'https://gitlab.com/gitlab-org/security-products/gemnasium-db.git/': SSL certificate problem: unable to get local issuer certificate\n\nexit status 128\n```\n\n### What is the current *bug* behavior?\n\nThe following error is returned when running `gemnasium` after configuring `ADDITIONAL_CA_CERT_BUNDLE` to any valid certificate which does not belong to `gitlab.com`:\n\n```\nfatal: unable to access 'https://gitlab.com/gitlab-org/security-products/gemnasium-db.git/': SSL certificate problem: unable to get local issuer certificate\n\nexit status 128\n```\n\n### What is the expected *correct* behavior?\n\n`gemnasium` analyzer should run successfully even if the `ADDITIONAL_CA_CERT_BUNDLE` variable has been configured to a certificate which does not belong to `gitlab.com`\n\n### Reason for the bug\n\nThe reason for the bug is due to the way `git` operates when the `ADDITIONAL_CA_CERT_BUNDLE` variable is provided.\n\nWhen `ADDITIONAL_CA_CERT_BUNDLE` is configured, the analyzer writes the contents of this variable to [`/etc/ssl/certs/ca-cert-additional-gitlab-bundle.pem`](https://gitlab.com/gitlab-org/security-products/analyzers/common/blob/d56a3b3/cacert/cacert.go#L17-17) when the `run` command of the analyzer is executed.\n\nIn order for `git` to use this CA certificate, we have to do some extra work, which was originally implemented as part of [git certificate error with ADDITIONAL_CA_CERT_BUNDLE on alpine containers](https://gitlab.com/gitlab-org/gitlab/-/issues/218634).\n\nThe process we implemented sets the [git `http.sslCAInfo`](https://git-scm.com/docs/git-config#Documentation/git-config.txt-httpsslCAInfo) configuration option by writing the full path to the certificate to the `/etc/gitconfig` file, as shown [here](https://gitlab.com/gitlab-org/security-products/analyzers/common/-/blob/v2.24.0/cacert/bundle.go#L65-84):\n\n```sh\n# contents of /etc/gitconfig\n[http]\n        sslCAInfo = /etc/ssl/certs/ca-cert-additional-gitlab-bundle.pem\n```\n\nOnce this has been done, `git` will pick up the certificate in this file and use it when initiating SSL connections. This allows us to use a custom CA certificate with `git` without requiring any external commands to be executed before running an analyzer, we just need to write the contents of the `/etc/gitconfig` configuration file.\n\nThis process works well in an offline environment where all GitLab components are self-hosted, and a single self-signed CA certificate is used to connect securely with each service, however, it doesn't work in the situation where some services are self-hosted, and others are not.\n\nFor example, in a self-hosted GitLab instance where a pipeline connects to itself to clone the source repo, it can use the self-signed CA cert provided by the `ADDITIONAL_CA_CERT_BUNDLE` variable, however, when `gemnasium` runs and `git` attempts to clone from the `gitlab.com` repo with the same self-signed CA cert, the process will fail, because this certificate is invalid for `gitlab.com`.\n\n### Implementation plan\n\n1. [x] Remove the code from the [common package](https://gitlab.com/gitlab-org/security-products/analyzers/common) which writes to `/etc/gitconfig` that was added as part of [git certificate error with ADDITIONAL_CA_CERT_BUNDLE on alpine containers](https://gitlab.com/gitlab-org/gitlab/-/issues/218634). See [here](https://gitlab.com/gitlab-org/security-products/analyzers/common/-/merge_requests/154) for a draft MR.\n\n   - https://gitlab.com/gitlab-org/security-products/analyzers/common/-/merge_requests/154\n\n1. [x] Update the [`DefaultBundlePath`](https://gitlab.com/gitlab-org/security-products/analyzers/common/blob/432259a/cacert/cacert.go#L17-17) variable in the [common package](https://gitlab.com/gitlab-org/security-products/analyzers/common) from `/etc/ssl/certs/ca-cert-additional-gitlab-bundle.pem` to `/etc/ssl/certs/ca-certificates.crt`\n\n   - https://gitlab.com/gitlab-org/security-products/analyzers/common/-/merge_requests/154\n\n1. [x] Make these changes:\n\n   - [x] Update the `Dockerfile` to ensure that `/etc/ssl/certs/ca-certificates.crt` is group writable to maintain OpenShift compatibility.\n   - [x] Update each project to use the new version of the common library updated in step `2.` and release new versions\n\n   To the following projects:\n\n   - [x] Dependency Scanning\n      - [x] [gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/blob/44fe4c2/Dockerfile#L74-76)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/-/merge_requests/252\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/-/releases/v2.30.2\n      - [x] [gemnasium-python](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/blob/fdd554e/Dockerfile#L60-62)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/-/merge_requests/130\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-python/-/releases/v2.19.2\n      - [x] [bundler-audit](https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit/blob/d8fd538/Dockerfile#L43-45)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit/-/merge_requests/89\n         - https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit/-/releases/v2.11.7\n      - [x] [retire.js](https://gitlab.com/gitlab-org/security-products/analyzers/retire.js/blob/1d174a2/Dockerfile#L47-49)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/retire.js/-/merge_requests/94\n         - https://gitlab.com/gitlab-org/security-products/analyzers/retire.js/-/releases/v2.12.1\n      - [x] [gemnasium-maven](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-maven/blob/0ccdbcf/config/install.sh#L13-16)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-maven/-/merge_requests/144\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-maven/-/releases/v2.24.2\n   - [x] SAST\n      - [x] [eslint](https://gitlab.com/gitlab-org/security-products/analyzers/eslint/blob/7e1f113/Dockerfile#L29-36)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/eslint/-/merge_requests/95\n         - https://gitlab.com/gitlab-org/security-products/analyzers/eslint/-/tags/v2.24.3\n      - [x] [kubesec](https://gitlab.com/gitlab-org/security-products/analyzers/kubesec/blob/d0f9d6f/Dockerfile#L26-26)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/kubesec/-/merge_requests/57\n         - https://gitlab.com/gitlab-org/security-products/analyzers/kubesec/-/releases/v2.16.1\n      - [x] [phpcs-security-audit](https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit/blob/ac2ebba/Dockerfile#L19-28)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit/-/merge_requests/61\n         - https://gitlab.com/gitlab-org/security-products/analyzers/phpcs-security-audit/-/releases/v2.11.3\n      - [x] [security-code-scan](https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan/blob/6fbbe86/main.go#L32-32)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan/-/merge_requests/99\n         - https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan/-/releases/v3.0.3\n      - [x] [nodejs-scan](https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan/blob/aec043f/main.go#L32-32)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan/-/merge_requests/109\n         - https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan/-/releases/v2.19.3\n      - [x] [gosec](https://gitlab.com/gitlab-org/security-products/analyzers/gosec/blob/af5659a/main.go#L33-33)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gosec/-/merge_requests/135\n         - https://gitlab.com/gitlab-org/security-products/analyzers/gosec/-/tags/v3.4.1\n      - [x] [secrets](https://gitlab.com/gitlab-org/security-products/analyzers/secrets/blob/f18c6a4/main.go#L33-33)\n         - https://gitlab.com/gitlab-org/security-products/analyzers/secrets/-/merge_requests/128\n         - https://gitlab.com/gitlab-org/security-products/analyzers/secrets/-/releases/v3.23.1\n\n1. [x] Remove the [cacert.ImportOptions path override](https://gitlab.com/gitlab-org/security-products/analyzers/gosec/-/blob/af5659ad4ba30992e63b5ed7eb5ddadcb337fad2/main.go#L33) used in the following analyzers:\n\n   - [x] [security-code-scan](https://gitlab.com/gitlab-org/security-products/analyzers/security-code-scan/blob/6fbbe86/main.go#L32-32)\n   - [x] [nodejs-scan](https://gitlab.com/gitlab-org/security-products/analyzers/nodejs-scan/blob/aec043f/main.go#L32-32)\n   - [x] [gosec](https://gitlab.com/gitlab-org/security-products/analyzers/gosec/blob/af5659a/main.go#L33-33)\n   - [x] [secrets](https://gitlab.com/gitlab-org/security-products/analyzers/secrets/blob/f18c6a4/main.go#L33-33)","state":"closed","created_at":"2021-07-01T14:27:22.844Z","updated_at":"2022-02-01T14:01:22.407Z","closed_at":"2021-12-16T00:46:49.731Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Dependency Scanning","Category:SAST","Category:Secret Detection","Enterprise Edition","GitLab Ultimate","Stretch","backend","devops::secure","group::composition analysis","missed-SLO","priority::2","section::sec","secure:refinement-backend","severity::2","type::bug","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":66,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334999","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":24,"completed_count":24},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"24 of 24 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334999","notes":"https://gitlab.com/api/v4/projects/278964/issues/334999/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334999/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334999","relative":"#334999","full":"gitlab-org/gitlab#334999"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":89614572,"iid":334998,"project_id":278964,"title":"Add documentation about batched background migrations not being able to run when the cron job is not enabled","description":"We have not enabled the cron job for `BatchedBackgroundMigrationWorker` on self-managed instances in %\"14.0\", which results to the error mentioned in gitlab-org/charts/gitlab#2785 when an instance upgrades to a higher (minor) version that includes a column swap migration (e.g. gitlab-org/gitlab!64577)\n\nOur plan to resolve this is the following:\n1. Enable the cron job for `BatchedBackgroundMigrationWorker` on self-managed instances and backport the change to %\"14.0\" as well (gitlab-org/gitlab#334996)\n1.  Revert the column swap migration for `push_event_payloads` (gitlab-org/gitlab!64577) on .com and do not release the migration to self managed instances.\n1. Release all the column swap changes on %\"14.2\" onwards\n  \n   That makes %\"14.1\" a safe release, with the batched background migrations able to automatically run and finish the backfilling of all `bigint` columns. \n\n1. Require that all self-managed instance upgrade through %\"14.1\"\n\n   That will allow instances to catchup, finish all the pending migrations and be ready for the column swap once they upgrade to the next version they plan to upgrade\n\nThe steps above will guarantee us that we have no instances facing the error mentioned in gitlab-org/charts/gitlab#2785, but there is no way that we can enforce that requirement right now, so instances may end up skipping %\"14.1\" and directly upgrading to a higher minor or major (%\"15.0\") version. If they are upgrading from a version prior to the patch that introduces the cron job in %\"14.0\" as well, then they'll get the error mentioned in gitlab-org/charts/gitlab#2785 once more.\n\nFor that reason, we also have to add documentation on how to recover from that error, either by running the migrations manually or going back to the `14.0.Z` patch, letting the migrations run and then upgrade.\n\nIn this is issue we want to cover all the documentation related updates:\n1. Require that all self-managed instance upgrade through %\"14.1\"\n\n   1. Add a [Version-specific upgrading instruction](https://docs.gitlab.com/ee/update/index.html#version-specific-upgrading-instructions) similar to the requirement for going through [13.1](https://docs.gitlab.com/ee/update/index.html#1310) or [12.0.Z](https://docs.gitlab.com/ee/update/index.html#1200)\n\n   1. Explain that an alternative path is to go through `14.0.Z`, where Z is the patch version that gitlab-org/gitlab!65106 will end up being included to.\n\n   1. Update release notes for %\"14.1\" with that information as well (will be covered in gitlab-org/gitlab#335005 to unblock this issue from completing)\n\n1. Update the error message that the migrations show when the batched background migrations are still active:\n\n   `Expected batched background migration for the given configuration to be marked as 'finished', but it is 'active' ..`\n\n   To also include a link to the [Batched Background Migrations documentation](https://docs.gitlab.com/ee/user/admin_area/monitoring/background_migrations.html)\n\n1. Add a section on the [Batched Background Migrations documentation](https://docs.gitlab.com/ee/user/admin_area/monitoring/background_migrations.html) that will explain the steps necessary when upgrading from `14.0.Z`- to any release other than %\"14.1\" and they see that error.","state":"closed","created_at":"2021-07-01T14:14:30.958Z","updated_at":"2022-05-30T15:02:02.868Z","closed_at":"2021-07-20T13:17:38.520Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","section::enablement","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334998","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334998","notes":"https://gitlab.com/api/v4/projects/278964/issues/334998/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334998/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334998","relative":"#334998","full":"gitlab-org/gitlab#334998"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5655,"epic":{"id":231482,"iid":5655,"title":"Address the Primary Key Overflow risk for the events table","url":"/groups/gitlab-org/-/epics/5655","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89613611,"iid":334996,"project_id":278964,"title":"Add cron job for BatchedBackgroundMigrationWorker on self-managed instances","description":"We have not enabled the cron job for BatchedBackgroundMigrationWorker on self-managed instances in %\"14.0\", which results to the error mentioned in gitlab-org/charts/gitlab#2785 when an instance upgrades to a higher (minor) version that includes a column swap migration (e.g. gitlab-org/gitlab!64577)\n\nWe want to add the cron job and also backport it to %\"14.0\", which is the version that the batched background migrations for backfilling the new `bigint` columns were introduced.\n\nFor more info check the following: \n- https://gitlab.com/gitlab-org/gitlab/-/issues/288005#note_614744621\n- https://gitlab.com/gitlab-org/charts/gitlab/-/issues/2785","state":"closed","created_at":"2021-07-01T13:56:31.696Z","updated_at":"2022-05-30T15:02:03.450Z","closed_at":"2021-07-02T07:01:31.801Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","section::enablement","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334996","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334996","notes":"https://gitlab.com/api/v4/projects/278964/issues/334996/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334996/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334996","relative":"#334996","full":"gitlab-org/gitlab#334996"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5655,"epic":{"id":231482,"iid":5655,"title":"Address the Primary Key Overflow risk for the events table","url":"/groups/gitlab-org/-/epics/5655","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89612560,"iid":334994,"project_id":278964,"title":"Renaming a feature flag breaks Danger","description":"## Description\n\nIf you rename a feature flag file (change a name in the same commit with minimal modification of the content - Git will recognize this as file rename) Danger will fail (exception) because of\n\n```ruby\nfeature_flag.feature_flag_files(change_type: :modified).each do |feature_flag|\n  message_for_global_rollout(feature_flag)\nend\n```\n\nand not being able to read the file (it has been renamed, previous one is not there anymore).\n\n/cc @rymai","state":"closed","created_at":"2021-07-01T13:42:01.155Z","updated_at":"2021-07-09T10:07:31.195Z","closed_at":"2021-07-09T10:07:31.174Z","closed_by":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Danger bot","Engineering Productivity","ep::contributor tooling","type::bug","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"RÃ©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334994","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334994","notes":"https://gitlab.com/api/v4/projects/278964/issues/334994/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334994/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334994","relative":"#334994","full":"gitlab-org/gitlab#334994"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89610911,"iid":334993,"project_id":278964,"title":"GraphQL support for fetching descendant groups","description":"Needed for https://gitlab.com/gitlab-org/gitlab/-/issues/233568\n\nSince we already use GraphQL to fetch group projects for the dropdown while creating issues within a board, then this query will allow us to fetch subgroups while creating Epic within Epic boards.","state":"closed","created_at":"2021-07-01T13:16:33.354Z","updated_at":"2021-11-08T16:50:08.023Z","closed_at":"2021-07-26T14:45:23.811Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Category:Portfolio Management","Category:Team Planning","GraphQL","backend","boards","devops::plan","epics","group::product planning","missed:14.1","section::dev","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334993","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334993","notes":"https://gitlab.com/api/v4/projects/278964/issues/334993/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334993/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334993","relative":"#334993","full":"gitlab-org/gitlab#334993"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4133,"epic":{"id":90893,"iid":4133,"title":"Allow user to create a new epic within a list in an epic board","url":"/groups/gitlab-org/-/epics/4133","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89602561,"iid":334986,"project_id":278964,"title":"Remove project and group releases json endpoints","description":"We already have proper API for releases, and API correctly handles guests permissions(not exposing tags).\n\nBut currently, frontend uses \n* https://gitlab.com/gitlab-org/gitlab/blob/af2320c7637b83525c9419a8263ea20ce2818876/app/controllers/projects/releases_controller.rb#L24\n* https://gitlab.com/gitlab-org/gitlab/blob/af2320c7637b83525c9419a8263ea20ce2818876/app/controllers/groups/releases_controller.rb#L10\n\nat least for issues filters(see [this issue](https://gitlab.com/gitlab-org/gitlab/-/issues/216617).\n\nSince 2 endpoints above aren't a public API, we can remove them when fronted stops requesting them.\n\n- [ ] [Allow guests to see tag names associated with releases](https://gitlab.com/gitlab-org/gitlab/-/issues/335209)\n \n- [ ] send an error to sentry if these enpoints are accessed(or find another way to verify they aren't, e.g. use grafana)\n- [ ] remove these endpoints\n\nThis is marked as security because at the moment these endpoint leak information about git tags.","state":"closed","created_at":"2021-07-01T10:46:06.488Z","updated_at":"2022-02-18T19:05:11.863Z","closed_at":"2022-02-14T11:08:06.620Z","closed_by":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"labels":["Category:Release Orchestration","Next Up","Release::P2","[deprecated] Accepting merge requests","backend","devops::release","group::release","maintenance::refactor","section::ops","type::maintenance","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"type":"ISSUE","assignee":null,"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334986","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334986","notes":"https://gitlab.com/api/v4/projects/278964/issues/334986/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334986/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334986","relative":"#334986","full":"gitlab-org/gitlab#334986"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89601529,"iid":334984,"project_id":278964,"title":"GitHub importer showing only the first API page of repositories (25 repos)","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\nThe GitHub importer page in GitLab doesn't show all repositories available on GitHub when 25 repositories of the first API page are imported. Since every API page has a maximum of 25 repositories, it seems like our code _thinks_ that there are no more repositories available after importing all repositories on the first API page.\n\nFor example, let's suppose a user has 80 repositories on GitHub and wants to import them to GitLab. To do that, GitLab would send an API request to GitHub to get the first API page of repositories. GitLab would need to request 4 API pages (25 repos each) in order to import all repositories. In a normal scenario, a new API page is automatically requested whenever a user scrolls to the bottom of the web page. In this case, when a user has already imported 25 projects of the first API page, after scrolling down, GitLab sends an API request to GitHub for the first API page again and the other API pages (2, 3 and 4) are never shown.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n- Create at least 26 repositories on GitHub (I created [this script to help me do that](https://gitlab.com/b_freitas/github-scripts/-/blob/master/github_project_creator.sh))\n- Import 25 repositories to GitLab\n- Refresh the web page\n- Scroll to the bottom of the web page and, you'll notice that the 26th repository will not show up\n\nTo fix it:\n- Delete one of the imported repositories in GitLab\n- Go back to the importing page\n- Scroll to the bottom of the web page and, you'll notice that 26th repository will show up\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nN/A\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\nOnly the first 25 repositories are shown regardless of how many repositories are available on GitHub.\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\nAll repositories available on GitHub should be visible.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n###### Number of repos on GitHub (88)\n![Screenshot_2021-07-01_at_15.49.45](/uploads/30f7865920c5bdadd01c4505eaf9ea0c/Screenshot_2021-07-01_at_15.49.45.png)\n\n###### GitLab importer page bug\n![Bug_Scenario](/uploads/29965d0e381ad54bdbcb6815e4f5ce36/Bug_Scenario.gif)\n\n###### API Pages (Page 1)\n![Page_1](/uploads/4400cee32dcf24a60a0abfe6e1a9d977/Page_1.png)\n\n###### API Pages (Page 2)\n![Page_2](/uploads/ec76df57aa015209332cf7afa85b9222/Page_2.png)\n\n###### API Pages (Page 3)\n![Page_3](/uploads/1ef6572248f4e9575c9f8665f86e01fb/Page_3.png)\n\n###### API Pages (Page 4)\n![Page_4](/uploads/88a11af4f69117bb6a2b95365663a50e/Page_4.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-07-01T10:22:32.082Z","updated_at":"2021-08-26T10:01:25.882Z","closed_at":"2021-08-26T10:01:25.858Z","closed_by":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"labels":["Category:Importers","Importer:GitHub","Next Up","customer","devops::manage","estimation::completed","frontend","group::import","milestone::p2","section::dev","type::bug","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"}],"author":{"id":7779148,"username":"b_freitas","name":"Bruno Freitas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7779148/avatar.png","web_url":"https://gitlab.com/b_freitas"},"type":"ISSUE","assignee":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334984","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334984","notes":"https://gitlab.com/api/v4/projects/278964/issues/334984/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334984/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334984","relative":"#334984","full":"gitlab-org/gitlab#334984"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3050,"epic":{"id":39430,"iid":3050,"title":"ðŸž GitHub Importer bugs","url":"/groups/gitlab-org/-/epics/3050","group_id":9970},"iteration":null,"health_status":null},{"id":89600370,"iid":334981,"project_id":278964,"title":"\"An error occurred fetching the status checks\" when viewing project settings","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nUsers are receiving a banner that says \"An error occurred fetching the status checks\". Looking at the network logs at the time indicate a 401 HTTP error is causing this. \n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nSeems like this affects projects that have the feature flag [described in this issue](https://gitlab.com/gitlab-org/gitlab/-/issues/320783) enabled\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nSee details in [this ticket](https://gitlab.zendesk.com/agent/tickets/221825) (internal)\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nError banner appears when editing an affected project. Unclear if this affects saving changes, but I don't think so.\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nBanner shouldn't appear and there shouldn't be an authorisation error.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\nBug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nAdd license check to [`ee/app/views/projects/_merge_request_settings.html.haml:11`](ee/app/views/projects/_merge_request_settings.html.haml#L11)\n\n### Implementation plan\n\n~frontend :one: \n\n1. Add license check to [`ee/app/views/projects/_merge_request_settings.html.haml:11`](ee/app/views/projects/_merge_request_settings.html.haml#L11)\n2. Update specs","state":"closed","created_at":"2021-07-01T10:01:51.042Z","updated_at":"2021-07-06T07:57:46.987Z","closed_at":"2021-07-06T07:57:46.965Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["customer","devops::manage","frontend","group::compliance","priority::1","reproduced on GitLab.com","section::dev","severity::3","type::bug","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":3063143,"username":"aakif","name":"Aakif","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3063143/avatar.png","web_url":"https://gitlab.com/aakif"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334981","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334981","notes":"https://gitlab.com/api/v4/projects/278964/issues/334981/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334981/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334981","relative":"#334981","full":"gitlab-org/gitlab#334981"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89598859,"iid":334980,"project_id":278964,"title":"Fix compliance dashboard drawer so it only appears when a non-link is clicked","description":"## Problem\n\nWhen a compliance dashboard row is clicked, the drawer is shown. The issue with this is that happens whether the row is clicked or whether a link directing the user elsewhere is clicked:\n\n![security-complience](https://gitlab.com/gitlab-org/gitlab/uploads/d44104e28fba761b25700cfa576c7121/security-complience.mp4)\n\n## Solution\n\nLimit the drawer opening to only if the element clicked in a row is not a link\n\n## Implementation plan\n\n~frontend :one: \n\n1. Update `ee/app/assets/javascripts/compliance_dashboard/components/merge_requests/grid.vue:80` to check on the element that was clicked\n  1. If it was a link, don't open the drawer as well\n  1. If it isn't a link, open the drawer as normal\n1. Update `ee/spec/frontend/compliance_dashboard/components/merge_requests/grid_spec.js:119` to test the correct implementation","state":"closed","created_at":"2021-07-01T09:41:31.248Z","updated_at":"2021-07-07T14:38:27.854Z","closed_at":"2021-07-07T14:38:27.835Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","devops::manage","feature::enhancement","frontend","group::compliance","priority::3","section::dev","type::bug","type::feature","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334980","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334980","notes":"https://gitlab.com/api/v4/projects/278964/issues/334980/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334980/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334980","relative":"#334980","full":"gitlab-org/gitlab#334980"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5237,"epic":{"id":184672,"iid":5237,"title":"Convert compliance dashboard into an insightful report","url":"/groups/gitlab-org/-/epics/5237","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89596884,"iid":334977,"project_id":278964,"title":"Optimize trackRedisHllUserEvent calls","description":"When viewing an MR, we send along multiple `i_code_review_diff_multiple_files` events via [`trackRedisHllUserEvent`](https://gitlab.com/gitlab-org/gitlab/blob/master/app/assets/javascripts/api.js#L886).\n\n![Screen_Shot_2021-07-01_at_11.13.36](/uploads/5e0dc80cb67ee7aede5afb94a9d72aaf/Screen_Shot_2021-07-01_at_11.13.36.png)\n\nAs we invest a lot of time in optimising the MR page, we should be cautious with tracking requests like this and should fix this problem at a \"library\" (in this case just the `api.js`) level.\n\n## Requirement\n\n- Frontend: Instead of sending along each request, we could buffer the requests and defer the actual execution of the request to not interfere with the loading of the rest of the site.\n- (Optional) Backend: Additionally, we could add an endpoint that accepts multiple tracking events in one request.","state":"closed","created_at":"2021-07-01T09:20:30.000Z","updated_at":"2022-05-10T21:32:20.691Z","closed_at":"2021-08-10T15:37:25.875Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel GarcÃ­a","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["devops::growth","frontend","group::product intelligence","section::growth","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel GarcÃ­a","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel GarcÃ­a","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334977","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334977","notes":"https://gitlab.com/api/v4/projects/278964/issues/334977/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334977/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334977","relative":"#334977","full":"gitlab-org/gitlab#334977"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":89591274,"iid":334967,"project_id":278964,"title":"Add external status check usage to usage ping","description":"### Proposal \n\nIn GitLab 14.1, we introduced the concept of External Status Checks. To track its usage, we should add the number of external status checks on an instance as part of the usage ping.\n\n### Implementation Plan\n\n* Add a new count field to the usage ping which counts the number of objects in the `external_status_checks` table.\n* Add a new count field to count the number of projects with external status checks.","state":"closed","created_at":"2021-07-01T08:06:56.755Z","updated_at":"2022-03-11T08:01:24.723Z","closed_at":"2022-03-11T08:01:24.705Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["GitLab Ultimate","Next Up","backend","devops::manage","group::compliance","ideal for new hires","priority::3","product intelligence","section::dev","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334967","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334967","notes":"https://gitlab.com/api/v4/projects/278964/issues/334967/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334967/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334967","relative":"#334967","full":"gitlab-org/gitlab#334967"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":89583479,"iid":334954,"project_id":278964,"title":"User can configure DAST to wait for an element to be present before crawling the page","description":"\n### Problem\n\nWeb Applications that have Loading modal dialogs in between page transitions pose a problem for DAST browser-based scans.\n\n### Proposal\n\nWhen a DAST browser-based scan transitions to a new page, a series of checks are run to determine that the page is loaded. These include whether or not the document has updated, if there are any pending requests, timeouts, etc.\n\nThis MR proposes that a new CI/CD environment variable `DAST_BROWSER_PAGE_READY_SELECTOR` be made available to the user. When the user enters a selector of the login modal, the DAST browser-based crawler should check to ensure the element is not found or is hidden before classifying a page transition as complete.\n\n### More details\n\nThe issue arises as the DAST crawler assumes the page has finished loading when it is still showing \"Loading\". This can lead to:\n\n- Missed elements in the scan that will not be crawled.\n- DevTools will return the error `code: -32000 msg: Could not compute box model` when attempting to retrieve the position of elements that are occluded by a Loading modal (even if the modal is partially transparent). These are considered hidden elements by the scan and are not crawled.\n\nThe error is picked up in the following code. Note that when the error is found, it is not logged, and the element is assumed to be hidden.\n```go\nfunc (e *InternalElement) IsElementHidden() bool {\n\tx, y, err := e.GetPosition()\n\n\tif err != nil || (x == 0 \u0026\u0026 y == 0) || (x \u003c 0 || y \u003c 0) {\n\t\treturn true\n\t}\n```\n\n### Implementation Plan\n\n- [x] Add `PageReadySelector` to browser-based scanner\n- [x] Upgrade DAST and add `DAST_BROWSER_PAGE_READY_SELECTOR` https://gitlab.com/gitlab-org/security-products/dast/-/merge_requests/537\n- [x] Document `DAST_BROWSER_PAGE_READY_SELECTOR` in https://docs.gitlab.com/ee/user/application_security/dast/browser_based.html#available-cicd-variables. Using this feature has the potential of slowing down the scan [389#note_743194516](https://gitlab.com/gitlab-org/security-products/analyzers/browserker/-/merge_requests/389#note_743194516) so that should be documented too. https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75456","state":"closed","created_at":"2021-07-01T05:51:10.081Z","updated_at":"2022-11-21T17:13:29.671Z","closed_at":"2021-12-07T01:20:58.545Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Category:DAST","GitLab Ultimate","Technical Writing","customer","dast::browserker","devops::secure","documentation","group::dynamic analysis","section::sec","tw-weight::3","tw::finished","type::feature","workflow::in dev"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"}],"author":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"type":"ISSUE","assignee":{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334954","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334954","notes":"https://gitlab.com/api/v4/projects/278964/issues/334954/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334954/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334954","relative":"#334954","full":"gitlab-org/gitlab#334954"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5601,"epic":{"id":226062,"iid":5601,"title":"Spider improvements","url":"/groups/gitlab-org/-/epics/5601","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":89583213,"iid":334953,"project_id":278964,"title":"Gitlab Jira integration sending unmapped deployments","description":"Hi there :wave:, my name is Remy and I am an engineer at Atlassian.\n\n## The issue\nI've noticed gitlab sends a large amount of deployments with `unmapped` environment type to Jira via the [Gitlab marketplace app](https://marketplace.atlassian.com/apps/1221011/gitlab-com-for-jira-cloud?hosting=cloud\u0026tab=overview). Presumably this is not intended by gitlab users, and I'm hoping we can find a way to improve it.\n\n\n## Background and context\nIn January [gitlab began sending](https://www.youtube.com/watch?v=P7EDRaMRWPE) [deployment information](https://developer.atlassian.com/cloud/jira/software/rest/api-group-deployments/#api-group-deployments) to Jira through the [Gitlab marketplace app](https://marketplace.atlassian.com/apps/1221011/gitlab-com-for-jira-cloud?hosting=cloud\u0026tab=overview) :tada: :tada: :tada:\n\nRecently when investigating the data sent from gitlab I noticed that gitlab is sending a surprisingly high number of deployment events of `unmapped` environment type - almost half of all deployments sent.\n\n![Deployment_events_from_Gitlab_by_Environment_Type](/uploads/609a93104e126bae337e822bee1cf34b/Deployment_events_from_Gitlab_by_Environment_Type.png)\n\nThe jira public rest api for submitting deployment information requires deployments to have an `environment` type of one of  `unmapped`, `development`, `testing`, `staging` or `production`. \n\nI believe gitlab attempts a mapping from the freeform field for `name` in the `gitlab-ci.yml` file to one of the 5 environment types above ^\n```\ndeploy_staging:\n  stage: deploy\n  script:\n    - echo \"Deploy to staging server yay\"\n  environment:\n    name: staging\n    url: https://staging.example.com\n\n```\n\nHowever this relies on users already having environment names in their `gitlab-ci.yml` that directly match the jira api's expected value. Users with environments such as stg, prod-east, dev, pre-prod etc would have the deployment event sent as \"unmapped\" and would see:\n\n![image](/uploads/e2eb660ba004b721e1ddac1aff8d8b3a/image.png)\n\n\n## Goals\n\nI'm hoping this raising this ticket can start a discussion on options to improve this for gitlab and jira users :)\n\nPotentially, a quick win could be extending the mapping logic described above to try to handle more cases. Perhaps this problem could also be addressed through documentation.\n\nThanks team!","state":"closed","created_at":"2021-07-01T05:43:34.557Z","updated_at":"2022-11-22T19:38:44.832Z","closed_at":"2021-10-01T11:36:24.746Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["Category:Integrations","Community contribution","Integration::Jira","Jira::ConnectApp","automation:ml","backend","devops::manage","feature::enhancement","group::integrations","section::dev","type::feature","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},{"id":9229781,"username":"rbordignon","name":"Remy Bordignon","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e6d58927f300d665c8957de2796684de?s=80\u0026d=identicon","web_url":"https://gitlab.com/rbordignon"}],"author":{"id":9229781,"username":"rbordignon","name":"Remy Bordignon","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e6d58927f300d665c8957de2796684de?s=80\u0026d=identicon","web_url":"https://gitlab.com/rbordignon"},"type":"ISSUE","assignee":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334953","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334953","notes":"https://gitlab.com/api/v4/projects/278964/issues/334953/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334953/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334953","relative":"#334953","full":"gitlab-org/gitlab#334953"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1626,"epic":{"id":10001,"iid":1626,"title":"Improving the Jira Connect App in Atlassian Marketplace","url":"/groups/gitlab-org/-/epics/1626","group_id":9970},"iteration":null,"health_status":null},{"id":89576006,"iid":334942,"project_id":278964,"title":"Change DB logging metrics per database to use db_config.name instead of database name","description":"In https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63490 we implemented logging per database. We used the database name as the key. But this won't actually work well for us in production where we expect we'll be using the same database name on 2 different database servers. The reason we'll plan to use the same database name is due to our migration plan https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/84588 using streaming replication to sync the databases.\n\nWe therefore cannot use the database name as the key as they will have the same name. Instead we can use `connection.pool.db_config.name` which is the name used in the GitLab application configuration to distinguish between the different databases.\n\nThe downside, however, will be that this may be `primary` depending on how you set things up locally. And therefore you may see `primary_primary` in logs as one of the primary refers to the R/W connection. However, we are planning on calling this `main` by default in config anyway so hopefully that will resolve things and people won't have `primary` in their configuration.","state":"closed","created_at":"2021-07-01T00:18:12.374Z","updated_at":"2022-05-31T12:22:28.905Z","closed_at":"2021-07-25T22:49:52.387Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Category:Pods","devops::data_stores","group::pods","section::enablement","workflow::ready for development"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"}],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334942","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334942","notes":"https://gitlab.com/api/v4/projects/278964/issues/334942/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334942/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334942","relative":"#334942","full":"gitlab-org/gitlab#334942"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6134,"epic":{"id":285044,"iid":6134,"title":"Decomposition:  Create observability for multiple database servers","url":"/groups/gitlab-org/-/epics/6134","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89575483,"iid":334940,"project_id":278964,"title":"Show more specific error message when user attempts to create release with new protected tag","description":"### Background\n\nThis is a follow up to https://gitlab.com/gitlab-org/gitlab/-/issues/327505. See the discussion [in this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/327505#note_609860991).\n\n### Current state\n\nCurrently, if a user attempts to create a new release from the **New Release** page with a new tag that matches a protected tag pattern, the page shows a generic \"Something went wrong\" error.\n\nThis happens because the user doesn't have permission to create a protected tag, but it's not obvious to the user why this is.\n\n### Proposal\n\nIn this case, show a more specific error message:\n\n\u003e You don't have permission to create a tag named `\u003ctag name\u003e` because it would be a protected tag.\n\n### Other related issues\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/235815","state":"closed","created_at":"2021-06-30T23:46:56.386Z","updated_at":"2022-09-19T14:30:13.578Z","closed_at":"2022-09-16T18:07:18.902Z","closed_by":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"labels":["Category:Release Evidence","Next Up","Release::P3","SUS::Impacting","UI text","devops::release","frontend","frontend-weight::1","group::release","missed:15.3","section::ops","severity::3","type::feature","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"}],"author":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"type":"ISSUE","assignee":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334940","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334940","notes":"https://gitlab.com/api/v4/projects/278964/issues/334940/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334940/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334940","relative":"#334940","full":"gitlab-org/gitlab#334940"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89564989,"iid":334935,"project_id":278964,"title":"Customize which scanner(s) will trigger a vulnerability check","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nCurrently Vunerability-check rule applies to all scanners. Providing a way to define which scanner(s) should be considered will give the user more granularity.\n\n![Screen_Shot_2021-06-30_at_4.07.45_PM](/uploads/beaea2f7821b8acb260e4e10fb913fb1/Screen_Shot_2021-06-30_at_4.07.45_PM.png)\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.: \n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] ~frontend Add a dropdown with the scanners available from `http://HOST/PROJECT/-/security/configuration` endpoint\n- [x] ~frontend Add `all` as an option to keep support with the current behaviour\n- [x] ~backend Extend the model to support the scanners related to endpoint: `http://HOST/api/v4/projects/PROJECT_ID/approval_settings/rules`\n- [x] ~backend Extend or derive the [related rules](https://gitlab.com/gitlab-org/gitlab/-/blob/30631669534eb522ed277e7c063cad01a4aed9e6/ee/app/models/approval_wrapped_rule.rb) to consider the scanners\n- [ ] ~documentation Update [related docs](https://docs.gitlab.com/ee/user/application_security/#enable-the-vulnerability-check-rule)\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-06-30T20:00:45.976Z","updated_at":"2021-08-18T07:06:42.633Z","closed_at":"2021-08-06T16:00:27.112Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Deliverable","Enterprise Edition","backend","devops::govern","frontend","group::security policies","section::sec","secure merge request approval","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334935","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334935","notes":"https://gitlab.com/api/v4/projects/278964/issues/334935/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334935/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334935","relative":"#334935","full":"gitlab-org/gitlab#334935"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6261,"epic":{"id":298070,"iid":6261,"title":"Allow for granular vulnerability check approval rules","url":"/groups/gitlab-org/-/epics/6261","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89561338,"iid":334927,"project_id":278964,"title":"Change banner copy on Configuration page","description":"### Problem to solve\n\nAs pointed out in https://gitlab.com/gitlab-org/gitlab/-/issues/333179#note_615405037, the banner on the security configuration page makes it sound like Ultimate is needed to access Secure features, but we offer SAST and Secret Detection to non-Ultimate tiers. \n\nIn addition, using the banner style with the white background makes it look more like part of the UI rather than a announcement who's content is separate from the functionality of the page.\n\n![image](/uploads/59f050813cee0caab368659616f5ee90/image.png)\n\n### Proposal\n\n##### MVC:\n\n![image](/uploads/70678882e6a182f9a8156cd68f65dcbc/image.png)\n\n##### Post-MVC, to be tracked in a follow-up issue (adds illustration):\n\n![image](/uploads/e2ed671bb052d3b46885a8607305afc4/image.png)\n\n### Question\n\nAre we tracking the CTR (click through rate) of this? Now that we're adding more ~\"section::growth\" related features (the non-Ultimate security discover page, security widget empty state in the MR, this banner), we should be mindful of being too spammy or annoying with our messages about upgrading, see [Create guidelines for when and how often to notify users of paid features](https://gitlab.com/gitlab-org/gitlab/-/issues/333005)\n\n\ncc @matt_wilson @tmccaslin @NicoleSchwartz @derekferguson @sam.white @rdickenson @gitlab-com/gitlab-ux/secure-protect-ux @lkerr","state":"closed","created_at":"2021-06-30T18:54:55.029Z","updated_at":"2021-07-29T17:09:43.568Z","closed_at":"2021-07-29T14:45:30.321Z","closed_by":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"labels":["Category:Vulnerability Management","Deliverable","Technical Writing","UI text","UX","devops::secure","frontend","group::analyzer frontend","section::sec","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"}],"author":{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"},"type":"ISSUE","assignee":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"user_notes_count":39,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334927","notes":"https://gitlab.com/api/v4/projects/278964/issues/334927/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334927/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334927","relative":"#334927","full":"gitlab-org/gitlab#334927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6147,"epic":{"id":286279,"iid":6147,"title":"Phase 1 (FOSS / non-Ultimate)","url":"/groups/gitlab-org/-/epics/6147","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":89559541,"iid":334924,"project_id":278964,"title":"Follow-up from \"Add CI/CD access token section in project settings\"","description":"The following discussion from !61935 should be addressed:\n\n- [ ] @cngo started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61935#note_615566795): \n\n    \u003e ```suggestion:-1+0\n    \u003e   const findAddProjectBtn = () =\u003e\n    \u003e     wrapper.findByRole('button', { name: TokenAccess.i18n.addProject });\n    \u003e   const findRemoveProjectBtn = () =\u003e wrapper.findByRole('button', { name: 'Remove access' });\n    \u003e ```\n    \u003e Non-blocking: WDYT about using `findByRole` (from [Testing Library](https://testing-library.com/docs/)) here instead? For it to work, we can do `import { mountExtended as mount } from 'helpers/vue_test_utils_helper';`. Then we can delete the `data-testid`s from the markup.\n    \u003e \n    \u003e The benefits are:\n    \u003e - We test closer to how the user uses the product, which is that they find elements by reading text labels etc. This is also what we [recommend in our docs](https://docs.gitlab.com/ee/development/testing_guide/frontend_testing.html#how-to-query-dom-elements)\n    \u003e - We remove `data-testid`s which stay in the production bundle, which would increase client bundle size","state":"closed","created_at":"2021-06-30T18:22:25.049Z","updated_at":"2021-07-21T17:36:00.099Z","closed_at":"2021-07-21T17:36:00.084Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","Verify::P3","devops::verify","frontend","group::pipeline execution","maintenance::refactor","section::ops","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334924","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334924","notes":"https://gitlab.com/api/v4/projects/278964/issues/334924/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334924/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334924","relative":"#334924","full":"gitlab-org/gitlab#334924"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89558370,"iid":334923,"project_id":278964,"title":"Release webhook not triggered when manually adding release notes to tag","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nEditing a tag to add release notes after the creation of the tag creates a new release but does not fire any webhooks configured on the project to trigger on `releases events`.\n\n### Steps to reproduce\n\n1. Create a new project and initialize it with a repository.\n1. Add a webhook to the project that triggers on `Releases events`.\n1. Manually create a new tag but **do not** add release notes to it.\n1. Edit the newly created tag and add release notes to it.\n1. Observe that a release has now been created but the previously configured webhook has not fired.\n\n### Example Project\n\n- https://gitlab.com/gitlab-gold/tristan/manual-release-webhook\n\n### What is the current *bug* behavior?\n\nWhen a release is created by adding release notes to an already created tag any webhook added to the project set to trigger on `releases events` will not fire.\n\n### What is the expected *correct* behavior?\n\nWhenever a release is created on the project any webhook added to it that is set to trigger on `releases events` will fire.\n\n### Output of checks\n\nThis bug happens on GitLab.com: 14.1.0-pre b51951ef184\n\n### Zendesk Reports (GitLab Internal)\n\n- https://gitlab.zendesk.com/agent/tickets/220211\n\n### Proposal\n\nHere is the pseudocode:\n\n```diff\ndiff --git a/app/controllers/projects/tags/releases_controller.rb b/app/controllers/projects/tags/releases_controller.rb\nindex b852673d82a..7ec3fd07bd0 100644\n--- a/app/controllers/projects/tags/releases_controller.rb\n+++ b/app/controllers/projects/tags/releases_controller.rb\n@@ -15,7 +15,17 @@ def edit\n   end\n \n   def update\n-    release.update(release_params) if release.persisted? || release_params[:description].present?\n+    if release_params[:description].present?\n+      if release.persisted?\n+        ::Releases::UpdateService\n+          .new(user_project, current_user, release_params)\n+          .execute\n+      else\n+        ::Releases::CreateService\n+          .new(user_project, current_user, release_params)\n+          .execute\n+      end\n+    end\n \n     redirect_to project_tag_path(@project, tag.name)\n   end\n@@ -25,13 +35,4 @@ def update\n   def tag\n     @tag ||= @repository.find_tag(params[:tag_id])\n   end\n-\n-  def release\n-    @release ||= Releases::CreateService.new(project, current_user, tag: @tag.name)\n-                                        .find_or_build_release\n-  end\n-\n-  def release_params\n-    params.require(:release).permit(:description)\n-  end\n end\n```","state":"closed","created_at":"2021-06-30T17:49:22.307Z","updated_at":"2022-11-24T18:22:31.382Z","closed_at":"2022-07-27T13:13:25.240Z","closed_by":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"labels":["Category:Release Orchestration","Category:Webhooks","Deliverable","SUS::Impacting","UX","backend","customer","devops::release","group::release","priority::3","reproduced on GitLab.com","section::dev","severity::3","type::bug","workflow::blocked"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"}],"author":{"id":2390023,"username":"tristan","name":"Tristan Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2390023/avatar.png","web_url":"https://gitlab.com/tristan"},"type":"ISSUE","assignee":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"user_notes_count":9,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334923","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334923","notes":"https://gitlab.com/api/v4/projects/278964/issues/334923/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334923/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334923","relative":"#334923","full":"gitlab-org/gitlab#334923"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8061,"epic":{"id":521562,"iid":8061,"title":"Remove releases creation from tags","url":"/groups/gitlab-org/-/epics/8061","group_id":9970,"human_readable_end_date":"Aug 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89554324,"iid":334917,"project_id":278964,"title":"Vulnerability Report: Replace admin icon","description":"## Problem\n\nThe **Vulnerability Report** pages uses the [admin](http://gitlab-org.gitlab.io/gitlab-svgs/?q=~admin) wrench icon ![admin.svg](/uploads/acb5942c2e071e29d51b669d60a5edd8/admin.svg) in a badge under the **Activity** column to trigger a popover. This icon should be reserved for linking to the admin section only.\n\n![CleanShot_2021-06-30_at_11.14.51_2x](/uploads/6604b347b5a07a13ad47f50cc1677537/CleanShot_2021-06-30_at_11.14.51_2x.png)\n\n## Solution\n\nConsider using a different icon from the SVG library, or if necessary, create a request/concept for one that's a better fit.","state":"closed","created_at":"2021-06-30T16:20:19.650Z","updated_at":"2021-12-06T03:41:55.466Z","closed_at":"2021-12-02T23:08:46.551Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["Category:Vulnerability Management","Technical Writing","UI text","UX","devops::secure","feature::enhancement","frontend","group::threat insights","section::sec","tw::finished","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"}],"author":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"type":"ISSUE","assignee":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"user_notes_count":50,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334917","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334917","notes":"https://gitlab.com/api/v4/projects/278964/issues/334917/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334917/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334917","relative":"#334917","full":"gitlab-org/gitlab#334917"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89547096,"iid":334908,"project_id":278964,"title":"ActiveRecord::QueryCanceled: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/2673781/?referrer=gitlab_plugin\n\n```\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  while updating tuple (672545,16) in relation \"projects\"\n\n  activerecord (6.0.3.7) lib/active_record/connection_adapters/postgresql_adapter.rb:675:in `exec_params'\n  activerecord (6.0.3.7) lib/active_record/connection_adapters/postgresql_adapter.rb:675:in `block (2 levels) in exec_no_cache'\n  activesupport (6.0.3.7) lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'\n  activesupport (6.0.3.7) lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'\n  activesupport (6.0.3.7) lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'\n...\n(202 additional frame(s) were not displayed)\n\nActiveRecord::QueryCanceled: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  while updating tuple (672545,16) in relation \"projects\"\n\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  while updating tuple (672545,16) in relation \"projects\"\n\n```","state":"closed","created_at":"2021-06-30T14:19:46.772Z","updated_at":"2021-06-30T15:28:04.304Z","closed_at":"2021-06-30T15:28:03.995Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Importer:GitHub","devops::manage","group::import","section::dev","type::bug"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334908","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334908","notes":"https://gitlab.com/api/v4/projects/278964/issues/334908/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334908/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334908","relative":"#334908","full":"gitlab-org/gitlab#334908"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3050,"epic":{"id":39430,"iid":3050,"title":"ðŸž GitHub Importer bugs","url":"/groups/gitlab-org/-/epics/3050","group_id":9970},"iteration":null,"health_status":null},{"id":89539646,"iid":334900,"project_id":278964,"title":"Add documentation on the compliance dashboard drawer","description":"With https://gitlab.com/gitlab-org/gitlab/-/issues/299357 being implemented, we should document this new ~feature in the [compliance dashboard](https://docs.gitlab.com/ee/user/compliance/compliance_dashboard/) documentation before we rollout the ~\"feature flag\" `:compliance_dashboard_drawer`","state":"closed","created_at":"2021-06-30T13:00:59.421Z","updated_at":"2021-07-06T09:27:00.989Z","closed_at":"2021-07-06T09:27:00.969Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","devops::manage","documentation","group::compliance","priority::2","section::dev","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334900","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334900","notes":"https://gitlab.com/api/v4/projects/278964/issues/334900/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334900/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334900","relative":"#334900","full":"gitlab-org/gitlab#334900"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5237,"epic":{"id":184672,"iid":5237,"title":"Convert compliance dashboard into an insightful report","url":"/groups/gitlab-org/-/epics/5237","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89534753,"iid":334881,"project_id":278964,"title":"Decide on a single `structure.sql` vs `ci_structure.sql`","description":"One of the problems raised as part of the https://gitlab.com/gitlab-org/gitlab/-/issues/334690\nwas the concern regarding usage of a single `structure.sql` vs many `*structure.sql`.\n\n## Methods\n\nLets consider the following database config after the https://gitlab.com/gitlab-org/gitlab/-/issues/333415, and https://gitlab.com/gitlab-org/gitlab/-/issues/335076. This is expected end-goal type of config:\n\n```yaml\nmain:\n  database: gitlab_main\n  schema_search_paths: gitlab_main,gitlab_shared\nci:\n  database: gitlab_ci\n  schema_search_paths: gitlab_ci,gitlab_shared\n```\n\n\u003e Remark: Today, everything by default uses `public schema`. This changes the `public` to become `gitlab_main` as an indication that most features use `main` database. This is discussed in more detail as part of https://gitlab.com/gitlab-org/gitlab/-/issues/333415#ideally.\n\n### 1. Single `structure.sql`\n\nThe single `structure.sql` defines all tables and is populated on many databases,\nmaking us to duplicate the same structure in many places.\n\n```yaml\nmain:\n  database: gitlab_main\n  migration_paths: [db/migrate, db/post_migrate]\n  schema_search_paths: gitlab_main,gitlab_shared\nci:\n  database: gitlab_ci\n  migration_paths: [db/migrate, db/post_migrate]\n  schema_search_paths: gitlab_ci,gitlab_shared\n```\n\nThe `structure.sql` represents a definition of the whole logical database.\n\nThis model:\n\n- Provides a bloated `structure.sql` that is replicated on many databases\n- This implies that a shared `db/migrate` and `db/post_migrate` needs to be used\n  to replicate all migrations on both databases\n- There is a risk that we might run migrations in context of another database, with different schema visibilty\n  where it can result in running some migrations many times\n- Example to consider is the migration procedure: we migrate `data of gitlab_ci schema` into separate\n  database server, how we will run migration on `gitlab_main` for the `gitlab_ci`? Will we skip them\n  or run all of them replicating their behavior\n- Likely we need to introduce a schema matcher as part of `requires_schema` to check this against\n  our `schema visibility` and only run it there\n- Likely this requires (due to how rails manages `structure.sql`) to create a symlink between `ln -s structure.sql ci_structure.sql` to ensure that the same schema is used\n- Likely this requires modifying Rails from emitting `ci_structure.sql`\n\n```sql\n# structure.sql\nCREATE SCHEMA gitlab_main;\nCREATE SCHEMA gitlab_ci;\nCREATE_TABLE gitlab_main.projects;\nCREATE_TABLE gitlab_ci.ci_builds;\n```\n\n```ruby\nclass MyMigration \u003c ActiveRecord::Migration\n  requires_schema :gitlab_main\n  # requires_schema :gitlab_ci\n\n  def up\n    #\n  end\nend\n```\n\n### 2. Many `*structure.sql`\n\nIn this model we have many `*structure.sql`, dedicated for each logical database:\n\n- `db/structure.sql` defines a structure for `main` database\n- `db/ci_structure.sql` defines a structure for `ci` database\n\nThe `*structure.sql` represents a definition of the whole logical database.\n\n```sql\n# structure.sql\nCREATE SCHEMA gitlab_main;\nCREATE SCHEMA gitlab_ci;\nCREATE_TABLE gitlab_main.projects;\nCREATE_TABLE gitlab_ci.ci_builds;\n\n# ci_structure.sql\nCREATE SCHEMA gitlab_ci;\nCREATE_TABLE gitlab_ci.ci_builds;\n```\n\nThis implies that each structure has its own set of migrations. There might be different\nmodels how migrations can be executed, depending on iterations:\n\n#### Model 1: distinct folders\n\n```yaml\nmain:\n  database: gitlab_main\n  migration_paths: [db/migrate, db/post_migrate, db/ci_migrate, db/ci_post_migrate]\n  schema_search_paths: gitlab_main,gitlab_shared\nci:\n  database: gitlab_ci\n  migration_paths: [db/ci_migrate, db/ci_post_migrate]\n  schema_search_paths: gitlab_ci,gitlab_shared\n```\n\n- `db/migrate`, `db/post_migrate` - migrations for `db/structure.sql`\n- `db/ci_migrate`, `db/ci_post_migrate` - migrations for `db/ci_structure.sql`\n\nThis requires that each migration concerning CI needs to be copied into `db/migrate`\nas we don't perform automated reply of them on top of `db/structure.sql`.\n\nThis models:\n\n- Provides a bloated `structure.sql` that is used on main database, and clean `ci_structure.sql`\n- Requires that all migrations of CI are run as well on `main`\n- Requires a way to discover what schema is being modified (likely, by convention, files put into `db/ci_migrate` modify `gitlab_ci` schema)\n- There is a risk that we might run migrations in context of another database, with different schema visibility\n  where it can result in running some migrations many times\n- Example to consider is the migration procedure: we migrate `data of gitlab_ci schema` into separate\n  database server, how we will run migration on `gitlab_main` for the `gitlab_ci`? Will we skip them\n  or run all of them replicating their behavior\n- We need a way to ensure consistency between part of the `structure.sql` and `ci_structure.sql` (a special `pg_dump` to validate that subset of schema is exactly the same)?\n\n#### Model 2: inherited folder\n\n```yaml\nmain:\n  database: gitlab_main\n  migration_paths: [db/migrate, db/post_migrate]\n  schema_search_paths: gitlab_main,gitlab_shared\nci:\n  database: gitlab_ci\n  migration_paths: [db/migrate/ci, db/post_migrate/ci]\n  schema_search_paths: gitlab_ci,gitlab_shared\n```\n\n- `db/migrate`, `db/post_migrate` - migrations for `db/structure.sql`, which will additionally execute all nested migrations from `/ci`\n- `db/migrate/ci`, `db/post_migrate/ci` - migrations for `db/ci_structure.sql`\n\nThis requires that each migration concerning the CI needs to be in `db/migrate/ci`.\n\nThis models:\n\n- Provides a bloated `structure.sql` that is used on main database, and clean `ci_structure.sql`\n- Requires that all migrations of CI are run as well on `main`\n- Requires a way to discover what schema is being modified (likely, by convention, files put into `db/migrate/\u003cschema_name\u003e` modify `gitlab_ci` schema)\n- There is a risk that we might run migrations in context of another database, with different schema visibility\n  where it can result in running some migrations many times\n- Example to consider is the migration procedure: we migrate `data of gitlab_ci schema` into separate\n  database server, how we will run migration on `gitlab_main` for the `gitlab_ci`? Will we skip them\n  or run all of them replicating their behavior\n- We need a way to ensure consistency between part of the `structure.sql` and `ci_structure.sql` (a special `pg_dump` to validate that subset of schema is exactly the same)?\n\n### 3. Many `*structure.sql` schema focused\n\nThis is likely our end-goal. Have clean `*structure.sql` containing only definitions\nrelated to processed data.\n\nIn this model we have many `*structure.sql`, dedicated for each set of schema visibility:\n\n- `db/structure.sql` defines a structure for `public` (or proposed `gitlab_main`) schema, used with `main` database\n- `db/ci_structure.sql` defines a structure for `gitlab_ci` schema, used with `CI` database\n\n```yaml\nmain:\n  database: gitlab_main\n  migration_paths: [db/migrate, db/post_migrate]\n  schema_search_paths: gitlab_main,gitlab_shared\nci:\n  database: gitlab_ci\n  migration_paths: [db/ci_migrate, db/ci_post_migrate]\n  schema_search_paths: gitlab_ci,gitlab_shared\n```\n\nThis approach moves away from having a structure.sql defining a whole logical database,\ninstead moves into schema management. This is an approach that is natively supported by Rails\nwith `config.active_record.dump_schemas = :schema_search_path`, which allows to clearly define\nwhich schemas are to be dumped.\n\nThis approach implies that many configurations for many connections are used, allowing\nto point to the same logical database, but managing only subset of the database with schema.\n\nThis models:\n\n- Requires that we do not use a single connection for many schemas as described as [1. A single monolithic database (not migrated), with a single connection](https://gitlab.com/gitlab-org/gitlab/-/issues/335076#1-a-single-monolithic-database-not-migrated-with-a-single-connection). This will not work, since we will not have a single big `structure.sql`. This might be a blocker for some installations, but as well this is a great end-goal to have.\n- All migrations are run within a specific connection, and specific defined visibility\n- Schema search path defines a visibility and we don't need to add additional semantic for migrations\n- Since we do not run migrations many times, we guarantee that migrations process only what is needed\n- We don't need to maintain consistency, since we guarantee that these are self-sufficient structures\n- In a transition period the `main: { schema_search_path: gitlab_main,gitlab_ci }` can be used to avoid bugs related to cross-joins\n- Provides a truly clean `*structure.sql` without any unrelated schemas\n\n```sql\n# structure.sql\nCREATE SCHEMA gitlab_main;\nCREATE_TABLE gitlab_main.projects;\n\n# ci_structure.sql\nCREATE SCHEMA gitlab_ci;\nCREATE_TABLE gitlab_ci.ci_builds;\n```\n\n### 4. Problems to solve\n\nThis defines a set of problems that we want to solve, these are not tied to particular method,\nbut rather a set of a general design guidelines which are not ordered by the importance:\n\n- a clean/tidy `structure.sql` containing only relevant tables required by a given database\n- easy and predictable behavior of migrations without duplication or overlap\n- predictable behavior and support for non-migrated customers: customers using a single monolithic database\n- predictable behavior for partially migrated customers: ex.: data got copied, many databases are used, but old database still contains all CI data as it is not yet cleaned-up\n- easy way to develop new migrations without hacks/extra checks about execution context (ex. of anti-pattern is `Gitlab.com?`)\n- coherency of structure between databases that is automatically validated\n- predictable behavior and tracking of schema migrations and background migrations\n- we need a way to model and maintain shared tables: https://gitlab.com/gitlab-org/gitlab/-/issues/333415#shared-tables","state":"closed","created_at":"2021-06-30T11:27:36.155Z","updated_at":"2022-05-31T12:22:29.705Z","closed_at":"2021-08-05T14:17:28.002Z","closed_by":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"labels":["Category:Pods","[deprecated] Accepting merge requests","devops::data_stores","group::pods","section::enablement"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[],"author":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"type":"ISSUE","assignee":null,"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334881","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334881","notes":"https://gitlab.com/api/v4/projects/278964/issues/334881/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334881/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334881","relative":"#334881","full":"gitlab-org/gitlab#334881"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6103,"epic":{"id":281355,"iid":6103,"title":"Decomposition: Support for many databases","url":"/groups/gitlab-org/-/epics/6103","group_id":9970,"human_readable_end_date":"Sep 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89530052,"iid":334875,"project_id":278964,"title":"Admin / Analytics / Usage Trends does not conform to normal nav behavior","description":"## Problem\nLooking at the nav behavior for Admin / Analytics, there are 2 sub items, however the `Usage Trends` sub item will hide and convert to a fly out menu when it is the active item.\n\n| DevOps Report | Usage Trends |\n| ------ | ------ |\n| ![Screen_Shot_2021-06-30_at_10.59.46_AM](/uploads/3d160f2a76a63939f10018a998ee2c48/Screen_Shot_2021-06-30_at_10.59.46_AM.png) | ![Screen_Shot_2021-06-30_at_10.59.52_AM](/uploads/5126ea57e5e84442c99f2f7480b3f231/Screen_Shot_2021-06-30_at_10.59.52_AM.png) |\n\n## Solution\nUpdate the nav behavior to conform to the standard subnav appearance.","state":"closed","created_at":"2021-06-30T10:29:23.167Z","updated_at":"2021-07-02T09:33:44.708Z","closed_at":"2021-07-02T09:33:44.692Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Navigation \u0026 Settings","UX","devops::manage","frontend","group::optimize","priority::4","section::dev","severity::4","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334875","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334875","notes":"https://gitlab.com/api/v4/projects/278964/issues/334875/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334875/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334875","relative":"#334875","full":"gitlab-org/gitlab#334875"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89527271,"iid":334874,"project_id":278964,"title":"Convert table in Admin / Applications  and Admin / Deploy keys table to Pajamas CSS","description":"## Problem\nThe tables in these two sections do not conform to the standard ~Pajamas visual styling. The text in the heading wraps unnecessarily and the buttons do not appear to be the updated buttons.\n\n| Applications | Deploy keys |\n| ------ | ------ |\n| ![Screen_Shot_2021-06-30_at_11.31.50_AM](/uploads/6bab71035be3c6d68dbca8209d60fe0a/Screen_Shot_2021-06-30_at_11.31.50_AM.png) | ![Screen_Shot_2021-06-30_at_11.09.03_AM](/uploads/56c1401536a331badb53e14f8bed6ba4/Screen_Shot_2021-06-30_at_11.09.03_AM.png) |\n\n## Solution\n- update tables to conform to Pajamas component.\n- ~~`Deploy keys` buttons: `Edit` and `Destroy` should be changed to icon buttons~~\n- Actions should be moved to ellipsis tertiary dropdown button\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\nWe have some deploy key related end-to-end tests that could be affected by this. Please run the `package-and-qa` job to ensure that the tests are fine. Thanks.","state":"closed","created_at":"2021-06-30T09:44:38.591Z","updated_at":"2021-11-12T15:43:30.724Z","closed_at":"2021-11-12T15:43:30.706Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","FY22::Q3","UX","candidate::14.5","devops::manage","frontend","group::authentication and authorization","pajamas::build","priority::4","quad-planning::complete-action","section::dev","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334874","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334874","notes":"https://gitlab.com/api/v4/projects/278964/issues/334874/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334874/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334874","relative":"#334874","full":"gitlab-org/gitlab#334874"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6263,"epic":{"id":298352,"iid":6263,"title":"Admin / Applications user flow is not optimal","url":"/groups/gitlab-org/-/epics/6263","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89527244,"iid":334873,"project_id":278964,"title":"Creating an application dumps user to an inescapable screen.","description":"## Problem\nWhen you create an application, there is no way to proceed past the success screen unless you close the window or navigate away from it. This is not good UX. This functionally is a dead end in the process.\n\n![1](/uploads/63109c99c43fc06cc48b42383da9a99f/1.gif)\n\n| empty state | create new application | success |\n| ------ | ------ | ------ |\n| ![Screen_Shot_2021-06-30_at_12.39.36_PM](/uploads/c6d042041e1e7051d6ff6830d5c2311d/Screen_Shot_2021-06-30_at_12.39.36_PM.png) | ![Screen_Shot_2021-06-30_at_12.40.10_PM](/uploads/095a6683629a49298db495dc4db1e7ff/Screen_Shot_2021-06-30_at_12.40.10_PM.png) | ![Screen_Shot_2021-06-30_at_12.40.22_PM](/uploads/6fe8136ac8c6b2103789ea439dd73d93/Screen_Shot_2021-06-30_at_12.40.22_PM.png) |\n\n## Proposals\n- The `Edit` and `Destroy` buttons should be changed priorities and a new button should be added to allow the user to continue to the application list.\n- Rename `Destroy` to `Delete`\n\n![Frame_8](/uploads/77eb8139095b27ea9d407c5d82efec25/Frame_8.png) \n\n## Implementation plan\n\n1. Create two new methods in [app/controllers/concerns/oauth_applications.rb](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/controllers/concerns/oauth_applications.rb) (might adjust naming when implementing)\n\n```rb\ndef set_redis_created\n  Gitlab::Redis::SharedState.with do |redis|\n    redis.set(CREATED_REDIS_KEY, Gitlab::Redis::Boolean.encode(true))\n  end\nend\n\ndef get_redis_created\n  Gitlab::Redis::SharedState.with do |redis|\n    created = redis.get(CREATED_REDIS_KEY)\n    redis.del(CREATED_REDIS_KEY)\n\n    created.nil? ? false : Gitlab::Redis::Boolean.decode(created)\n  end\nend\n```\n\n2. Call `set_redis_created` in `create` action of the following controllers:\n   - [app/controllers/admin/applications_controller.rb#L28](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/controllers/admin/applications_controller.rb#L28)\n   - [app/controllers/oauth/applications_controller.rb#L27](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/controllers/oauth/applications_controller.rb#L27)\n\n3. Add `@created = get_redis_created` to the `show` action in the following controllers\n   - [app/controllers/admin/applications_controller.rb#L17](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/controllers/admin/applications_controller.rb#L17)\n   - [app/controllers/oauth/applications_controller.rb#L27](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/controllers/oauth/applications_controller.rb#L27)\n\n4. Check for `@created` instance variable in [app/views/shared/doorkeeper/applications/_show.html.haml#L42](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/shared/doorkeeper/applications/_show.html.haml#L42). Render a `Continue` button if it exists.","state":"closed","created_at":"2021-06-30T09:44:01.393Z","updated_at":"2021-11-10T22:25:53.900Z","closed_at":"2021-11-05T17:36:04.702Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","FY22::Q3","Technical Writing","UI text","UX","auto updated","backend","candidate::14.4","devops::manage","docs::improvement","frontend","group::authentication and authorization","priority::4","quad-planning::complete-no-action","section::dev","tw::doing","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"type":"ISSUE","assignee":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334873","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334873","notes":"https://gitlab.com/api/v4/projects/278964/issues/334873/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334873/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334873","relative":"#334873","full":"gitlab-org/gitlab#334873"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6263,"epic":{"id":298352,"iid":6263,"title":"Admin / Applications user flow is not optimal","url":"/groups/gitlab-org/-/epics/6263","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89526412,"iid":334872,"project_id":278964,"title":"private method `file' called for #\u003cCarrierWave::Storage::Fog::File:0x00007faf00ae0ef0\u003e","description":"https://sentry.gitlab.net/gitlab/staginggitlabcom/issues/2696867\n\n```\nNoMethodError: private method `file' called for #\u003cCarrierWave::Storage::Fog::File:0x00007faf00ae0ef0\u003e\n  from lib/api/group_avatar.rb:21:in `block (2 levels) in \u003cclass:GroupAvatar\u003e'\n```","state":"closed","created_at":"2021-06-30T09:28:30.812Z","updated_at":"2021-06-30T09:31:12.628Z","closed_at":"2021-06-30T09:31:12.612Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["backend","devops::manage","group::import","section::dev","type::bug"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334872","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334872","notes":"https://gitlab.com/api/v4/projects/278964/issues/334872/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334872/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334872","relative":"#334872","full":"gitlab-org/gitlab#334872"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89519015,"iid":334870,"project_id":278964,"title":"[DevopsAdoption] Cleanup DevOps Adoption DB indexes","description":"## Summary\n\nWe can cleanup indexes when generic index is guaranteed to be created. Leave only 1 index on `ci_job_artifacts` for devops adoption.","state":"closed","created_at":"2021-06-30T07:47:41.008Z","updated_at":"2021-10-28T13:55:42.007Z","closed_at":"2021-07-26T11:13:51.626Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["Category:DevOps Reports","backend","devops::manage","group::optimize","section::dev","type::maintenance"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":0,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334870","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334870","notes":"https://gitlab.com/api/v4/projects/278964/issues/334870/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334870/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334870","relative":"#334870","full":"gitlab-org/gitlab#334870"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89511258,"iid":334861,"project_id":278964,"title":"Move `Seat Usage` page from Billing directory to Usage Quotas","description":"## Summary\n\nAs part of the long-term vision for Seat Usage documented in https://gitlab.com/groups/gitlab-org/-/epics/5872 we will move the `Seat Usage` page from the current location within the group settings \u003e Billing directory, to group settings \u003e Usage Quotas.\n\n### Success Criteria\n\n1. [ ] Create `Seats` tab in Usage Quotas \n     1. Order of tabs: `Seats | Pipelines | Storage`\n1. [ ] Move `Seat Usage` page from `Group\u003eBilling\u003eSeat Usage` to `Group\u003eUsage`\n     1. If the design shows any new components to the Seat Usage page, please disregard. The goal of this issue is to move the existing page, not to iterate on the actual page.\n1. [ ] Leave the `See Usage` button on the Group\u003eBilling page, when selected, the loaded page should be in the new location under Usage Quotas\n\n## Design\n\n![Settings___Usage_Quotas___Seats](/uploads/58da203a50d3b5166f10fcd699c4f1d8/Settings___Usage_Quotas___Seats.png)","state":"closed","created_at":"2021-06-30T04:27:56.584Z","updated_at":"2022-12-12T16:16:21.878Z","closed_at":"2021-08-18T09:52:23.214Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["#field-fyi","Deliverable","[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334861","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334861","notes":"https://gitlab.com/api/v4/projects/278964/issues/334861/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334861/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334861","relative":"#334861","full":"gitlab-org/gitlab#334861"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6397,"epic":{"id":312200,"iid":6397,"title":"Seat Usage Page - SaaS","url":"/groups/gitlab-org/-/epics/6397","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":89509017,"iid":334860,"project_id":278964,"title":"Remove un-used method with_active_integrations","description":"The following discussion from !64794 should be addressed:\n\n- [ ] @tkuah started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64794#note_614808388): \n\n    \u003e This method `with_active_services` / `with_active_integrations` seems un-used ? It's only call from its spec, and in comments...\n\n/cc @alexkalderimis @a_akgun","state":"closed","created_at":"2021-06-30T02:55:28.926Z","updated_at":"2022-11-22T19:38:51.547Z","closed_at":"2021-07-01T09:50:33.978Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["backend","devops::manage","group::ecosystem [DEPRECATED]","maintenance::refactor","section::dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334860","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334860","notes":"https://gitlab.com/api/v4/projects/278964/issues/334860/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334860/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334860","relative":"#334860","full":"gitlab-org/gitlab#334860"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89507572,"iid":334857,"project_id":278964,"title":"Follow-up from \"Only test project integrations\"","description":"The following discussion from !65049 should be addressed:\n\n- [ ] @.luke started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/65049#note_614787230): \n\n    \u003e Unrelated to this MR, but this looks like a feature-test-like `describe` block has snuck into a unit test. I'll create a follow-up to rejig this to just the `#can_test?` and `#test` blocks.","state":"closed","created_at":"2021-06-30T01:35:15.060Z","updated_at":"2022-11-22T19:38:53.994Z","closed_at":"2021-07-08T02:32:57.304Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["backend","devops::manage","group::ecosystem [DEPRECATED]","maintenance::refactor","section::dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334857","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334857","notes":"https://gitlab.com/api/v4/projects/278964/issues/334857/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334857/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334857","relative":"#334857","full":"gitlab-org/gitlab#334857"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89506762,"iid":334856,"project_id":278964,"title":"Swimlanes - Load more epics button and hide unassigned issues","description":"As part of improving Swimlanes performance, we want to change the way we fetch epics:\n\n- Add `Load more epics` button and stop chaining the fetching of all epics\n- Reduce the epics page size to 10\n- Go back to fetching issues per epic instead of fetching issues under epics per list\n- Collapse Unassigned issues lane by default and only fetch those issues on expand","state":"closed","created_at":"2021-06-30T00:53:15.974Z","updated_at":"2021-09-14T08:09:55.086Z","closed_at":"2021-07-13T23:56:28.058Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["devops::plan","frontend","group::product planning","section::dev","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334856","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334856","notes":"https://gitlab.com/api/v4/projects/278964/issues/334856/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334856/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334856","relative":"#334856","full":"gitlab-org/gitlab#334856"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5955,"epic":{"id":266638,"iid":5955,"title":"Improve GraphQL boards performance","url":"/groups/gitlab-org/-/epics/5955","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89503826,"iid":334848,"project_id":278964,"title":"ðŸŽ¨ Design: Introduce Scan Result Security Policies","description":"This design issue is to design the user experience for the requirements listed in [this parent epic](https://gitlab.com/groups/gitlab-org/-/epics/6261)\n\n### Design\n\n- Figma: https://www.figma.com/file/actVYkcrS1tcHCc890DOdv/Vulnerability-check-approval-rules?node-id=120%3A4988\n- Video walkthrough: https://youtu.be/-WHILcrp0Wc\n\nNote: the Fig image below might have small differences from the image attached below, the image attached is the SSOT.\n\n![finding-result-policy](/uploads/98ed72dac63072ce30ee6fffa492166a/finding-result-policy.gif)\n\n\n### Notes from design management discussions:\n\n\u003e\u003e\u003e\nWe should impose some limitations here. For now let's limit projects to no more than 100 scan results policies with no more than 100 rules in each policy. These limits can be adjusted if needed later.\n\u003e\u003e\u003e\n\n\u003e\u003e\u003e\nThe confusing part might come from the expectation that you could also create scan result policies by clicking `Add approval rule` (because this is a modal form that can't be easily adjusted to accommodate policies other than providing a link).\n\u003e\u003e\u003e\n\n\u003e\u003e\u003e \nWe will need to find a way to migrate/transition users from the current workflow to the new one. This might be a good way for us to leave the current `Vulnerability-Check` functionality in place as it exists today and have it live side-by-side with the new Security Approval Policies.\n\u003e\u003e\u003e","state":"closed","created_at":"2021-06-29T22:15:24.244Z","updated_at":"2022-05-09T19:35:40.681Z","closed_at":"2021-09-17T11:03:19.628Z","closed_by":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"labels":["Category:Security Policy Management","UX","devops::govern","group::security policies","missed:14.2","section::sec","secure merge request approval","workflow::design"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"}],"author":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"type":"ISSUE","assignee":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"user_notes_count":44,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334848","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334848","notes":"https://gitlab.com/api/v4/projects/278964/issues/334848/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334848/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334848","relative":"#334848","full":"gitlab-org/gitlab#334848"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6237,"epic":{"id":293896,"iid":6237,"title":"Introduce Scan Result Security Policies","url":"/groups/gitlab-org/-/epics/6237","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89503410,"iid":334847,"project_id":278964,"title":"Remove old services routes","description":"## About\n\nThis issue is to remove the old redirected routes (see https://gitlab.com/gitlab-org/gitlab/-/issues/334846). For more information see the Epic https://gitlab.com/groups/gitlab-org/-/epics/6260 and that Epic's parent Epic https://gitlab.com/groups/gitlab-org/-/epics/2504.\n\nFollowing our deprecation guidelines for [changing existing routes](https://docs.gitlab.com/ee/development/routing.html#changing-existing-routes), the old routes are considered _Likely to be saved or shared_, this issue must be done at least 1 milestone after https://gitlab.com/gitlab-org/gitlab/-/issues/334846.","state":"closed","created_at":"2021-06-29T22:00:54.075Z","updated_at":"2022-11-22T19:38:54.676Z","closed_at":"2021-06-29T22:28:45.437Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Integrations","backend","devops::manage","group::ecosystem [DEPRECATED]","type::maintenance","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334847","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334847","notes":"https://gitlab.com/api/v4/projects/278964/issues/334847/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334847/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334847","relative":"#334847","full":"gitlab-org/gitlab#334847"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6260,"epic":{"id":298065,"iid":6260,"title":"Rename controller and routes from services to integrations","url":"/groups/gitlab-org/-/epics/6260","group_id":9970},"iteration":null,"health_status":null},{"id":89503374,"iid":334846,"project_id":278964,"title":"Rename project-level integrations routes and `Projects::ServicesController` from services to integrations","description":"## About\n\nWe want to rename the project-level integration routes (`-/\u003cproject-full-path\u003e/services`) and the corresponding `Projects::ServicesController` controller from _services_ to _integrations_.\n\nThis change involves updating the regexes needed to support these files in `tooling/danger/project_helper.rb` https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74330.\n\nWe also want to rename the views in `app/views/projects/services` (but not the [custom integration templates](https://gitlab.com/gitlab-org/gitlab/-/issues/353379) in the same folder, which should be moved into `app/views/shared/integrations` instead) https://gitlab.com/gitlab-org/gitlab/-/issues/353379.\n\n**Notes:**\n\n- We _do not_ want to rename the instance-level `Admin::ServicesController` and routes and these are for a deprecated feature called \"integration templates\".\n- Route changes are sometimes subject to [deprecation requirements](https://docs.gitlab.com/ee/development/routing.html#changing-existing-routes), however these routes are considered _Limited use, unlikely to be shared_, so we can make a \"breaking\" change.\n\n### Testing \u0026 Availability\n\nSuggestion: update any tests to reflect the changes in routes, this will likely include some QA tests as well.\nSee `qa/qa/page/project/settings/services/prometheus.rb`\n\n### Rollout\n\n- [x] Rename controller and related files: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/88043\n- [x] Remove legacy `/-/integrations` routes in %\"15.2\": https://gitlab.com/gitlab-org/gitlab/-/merge_requests/90634","state":"closed","created_at":"2021-06-29T22:00:37.201Z","updated_at":"2022-11-22T19:38:55.374Z","closed_at":"2022-06-23T11:48:41.862Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Integrations","Deliverable","backend","devops::manage","group::integrations","maintenance::refactor","quad-planning::complete-action","routing","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334846","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":0,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334846","notes":"https://gitlab.com/api/v4/projects/278964/issues/334846/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334846/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334846","relative":"#334846","full":"gitlab-org/gitlab#334846"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":89501121,"iid":334838,"project_id":278964,"title":"[Feature flag] Rollout of `cache_mr_widget_serializer`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](ISSUE LINK) on production,\nthat is currently behind the `\u003cfeature-flag-name\u003e` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: NAME_OF_TEAM\n- Most appropriate slack channel to reach out to: `#g_TEAM_NAME`\n- Best individual to reach out to: NAME\n- PM: NAME\n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [ ] Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [ ] Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [ ] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-06-29T20:35:44.180Z","updated_at":"2022-08-12T22:38:05.390Z","closed_at":"2021-08-16T20:59:03.790Z","closed_by":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"labels":["feature flag","type::feature"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"}],"author":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"type":"ISSUE","assignee":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334838","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334838","notes":"https://gitlab.com/api/v4/projects/278964/issues/334838/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334838/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334838","relative":"#334838","full":"gitlab-org/gitlab#334838"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6142,"epic":{"id":285495,"iid":6142,"title":"Cache responses of endpoints used in merge request page","url":"/groups/gitlab-org/-/epics/6142","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89499559,"iid":334833,"project_id":278964,"title":"Address the Primary Key Overflow risk for the geo_job_artifact_deleted_events table - Step 2: Finalize background migrations and swap columns","description":"With gitlab-org/gitlab#331789 we have started the process of converting `geo_job_artifact_deleted_events.job_artifact_id` to `bigint` (`int8`), as it references `ci_job_artifacts.id`.\n\nIn this issue we'll address the second step of the process:\n1. Ensure the migration of `job_artifact_id` to `job_artifact_id_convert_to_bigint` is completed.\n1. Define the index over `job_artifact_id` (`index_geo_job_artifact_deleted_events_on_job_artifact_id`) for the new `job_artifact_id_convert_to_bigint` column as well\n1. Copy the FK\n1. Swap columns\n\nThe implementation should follow that of gitlab-org/gitlab!64577 (and the additional patch on gitlab-org/gitlab!64973).","state":"closed","created_at":"2021-06-29T19:47:18.709Z","updated_at":"2022-05-30T15:02:05.420Z","closed_at":"2021-08-11T17:35:18.076Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","section::enablement","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":9047949,"username":"stomlinson","name":"Simon Tomlinson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9047949/avatar.png","web_url":"https://gitlab.com/stomlinson"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":9047949,"username":"stomlinson","name":"Simon Tomlinson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9047949/avatar.png","web_url":"https://gitlab.com/stomlinson"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334833","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334833","notes":"https://gitlab.com/api/v4/projects/278964/issues/334833/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334833/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334833","relative":"#334833","full":"gitlab-org/gitlab#334833"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6041,"epic":{"id":274305,"iid":6041,"title":"Update Geo tables affected by the PK Overflow risk conversions","url":"/groups/gitlab-org/-/epics/6041","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89498030,"iid":334824,"project_id":278964,"title":"Address the Primary Key Overflow risk for the deployments table - Step 2: Finalize background migrations and swap columns","description":"With gitlab-org/gitlab#329535 we have started the process of converting `deployments.deployable_id` to `bigint` (`int8`), which indirectly references `ci_builds`.\n\nIn this issue we'll address the second step of the process:\n1. Ensure the migration of `deployable_id` to `deployable_id_convert_to_bigint` is completed.\n1. Copy the index over `deployable_id` (`index_deployments_on_deployable_type_and_deployable_id`)\n1. Swap columns\n\nThe implementation should follow that of gitlab-org/gitlab!64577 (and the additional patch on gitlab-org/gitlab!64973), with only difference that there is no Foreign Key as this is a polymorphic association.","state":"closed","created_at":"2021-06-29T19:04:00.963Z","updated_at":"2022-05-30T15:02:06.026Z","closed_at":"2021-08-20T14:49:15.832Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","missed:14.2","section::enablement","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":9047949,"username":"stomlinson","name":"Simon Tomlinson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9047949/avatar.png","web_url":"https://gitlab.com/stomlinson"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":9047949,"username":"stomlinson","name":"Simon Tomlinson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9047949/avatar.png","web_url":"https://gitlab.com/stomlinson"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334824","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334824","notes":"https://gitlab.com/api/v4/projects/278964/issues/334824/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334824/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334824","relative":"#334824","full":"gitlab-org/gitlab#334824"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5761,"epic":{"id":250084,"iid":5761,"title":"Address the Primary Key Overflow risk for the Family of CI tables","url":"/groups/gitlab-org/-/epics/5761","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89497987,"iid":334823,"project_id":278964,"title":"Address the Primary Key Overflow risk for the taggings table - Step 2: Finalize background migrations and swap columns","description":"With gitlab-org/gitlab#329536 we have started the process of converting `taggings.id` and `taggings.taggable_id` to `bigint` (`int8`). \n\n`taggings.id` is the 7th table with the highest value for its PK (https://gitlab.com/groups/gitlab-org/-/epics/4785#primary-key-statistics-summary) and `taggings.taggable_id` indirectly references `ci_builds` (polymorphic association).\n\nIn this issue we'll address the second step of the process:\n1. Ensure the migration of `taggings.id` to `id_convert_to_bigint` is completed.\n1. Ensure the migration of `taggings.taggable_id` to `taggable_id_convert_to_bigint` is completed.\n1. Define any indexes over `taggings.id` and `taggings.taggable_id` for the new columns as well\n1. Define a unique index over `taggings.id_convert_to_bigint`\n1. Swap columns, drop existing PK, define new PK, swap sequences\n\nThe implementation should follow what we'll add for gitlab-org/gitlab!64779, with only difference that we finalize and swap one additional column and there is no Foreign Key as this is a polymorphic association.","state":"closed","created_at":"2021-06-29T19:02:26.998Z","updated_at":"2022-05-30T15:02:06.650Z","closed_at":"2021-09-22T13:41:43.045Z","closed_by":{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo FrazÃ£o","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","missed:14.2","missed:14.3","section::enablement"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo FrazÃ£o","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo FrazÃ£o","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334823","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334823","notes":"https://gitlab.com/api/v4/projects/278964/issues/334823/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334823/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334823","relative":"#334823","full":"gitlab-org/gitlab#334823"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5761,"epic":{"id":250084,"iid":5761,"title":"Address the Primary Key Overflow risk for the Family of CI tables","url":"/groups/gitlab-org/-/epics/5761","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89490727,"iid":334812,"project_id":278964,"title":"Create a new Task w/ Title","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\n#### Customer Value\n\n\u003e * because they are missing \"Task\" type issues, they are currently modelling user stories as epics and use issues only for Tasks\n\u003e  * consequence is that they can't use milestones and burn-down charts or iterations for user stories, which isn't ideal\n\u003e  * this also is an issue in Value Stream Analytics, because it works with issues, not epics\n\u003e * tried using Epics for OKRs as well, but that does not work well for cross-cutting (cross group) initiative\n\n**Goal:** Improve the user task success and satisfaction scores for the process of creating children of user stories by a minimum of 40%.\n\n**Note:** Because we do not have parent/child relationships on issues yet, `Task` will have a link type of `related` for this MVC.\n\n#### Internal Value\n\n- Incrementally iterate on new, single FE Vue App as part of the longer-term strategy to pay down product and technical debt on the exiting issue view. \n- Incrementally, iteratively work towards the goals of the [Work Items Initiative](https://gitlab.com/groups/gitlab-org/-/epics/6033)\n\n## Proposal\n\nConvert a markdown taskable to issue of type `Task` with link type of `related` from within the existing issue detail view. Prevent tasks from being created through the current issue creation flow.\n\n## UX Screens\nView recording of prototype here:   \n![Screen_Recording_2022-01-18_at_11.26.53_AM](/uploads/e2815b0316d76aa6efaf02e65abe1660/Screen_Recording_2022-01-18_at_11.26.53_AM.mov)  \n\n\nSteps noted:\n* User hovers (desktop) or taps (mobile) on the MD list item and seen an option to \"Convert to work item\"\n* Selecting this option launches a modal with an editable version of the title and type. Also shown here is Weight and Assignee (are these MVC?)\n* Saving as-is makes the task convert to a work item with a badge showing the type\n* Work item is added as a Related item\n\n\n**QUESTION:** Have we designed any error states / toasts / user feedback when an error happens for the new work item UI? We'll need that for this issue if there is an error when creating the issue. \n\n## Acceptance Criteria\n\n- [x] Clicking on a button next to a markdown taskable opens the new work item modal/sidebar (create mode).\n- [x] The title is prefilled with the text string from the markdown taskable.\n- [x] The title can be changed from within the modal before clicking create. \n- [x] Successfully creating the task closes the modal and replaces the markdown taskable plain text with a GFM reference to the issue of type `Task`.\n- [x] Clicking cancel or clicking out of the modal cancels the creation process and closes the modal/sidebar. \n- [x] If there is an error when creating, the Task detail view provides context to the user. \n- [x] Styled appropriately for Mobile and Desktop.  \n- [ ] Snowplow tracking implemented\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n- Same permissions as existing issue permissions. \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n- Yes\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- E2E test for converting markdown taskable to issue of type `Task` \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n- Count of `Task` created weekly/monthly\n- Count of MAU creating `Task` weekly/monthly\n\n## FE Event Trackers\n\nStructured event taxonomy: https://docs.gitlab.com/ee/development/snowplow/#structured-event-taxonomy\n\nWhen the \"convert to task\" button is clicked:\n\n```\ncategory: workItems:show\nlabel: work_item_create\naction: click_markdown_taskable_create_button\nproperty: [type_{{insert issue type}}]\n```\n\nNote: `[type_{{insert issue type}}]` is intended to future proof this tracker a bit as we will likely allow the selection of type prior to the modal/sidebar at some point in the future. We can hard code this for now if we remember to update it when/if this happens later :smile: \n\nWhen the work item is successfully created. Do not fire event until success from server:\n\n```\ncategory: workItems:new\nlabel: work_item_create\naction: create_work_item_success\nproperty: [work_item_type_{{insert issue type}}]\n```\n\nWhen the work item creation process is cancelled (clicking cancel OR mousing out):\n\n```\ncategory: workItems:new\nlabel: work_item_create\naction: create_work_item_cancelled\nproperty: [work_item_type_{{insert issue type}}]\n```\n\n### Implementation Steps\n\n**MR 1, UI**:\n\n* [x] Add button to `Convert to Task`\n* [x] Make button open modal/sidebar with new work item detail view (create mode)\n* [x] Prefill title with text from markdown taskable and auto-focus keyboard/cursor on the title input\n* [x] Clicking out of the modal/sidebar before creation cancels the process\n* [x] Click cancel in the modal/sidebar cancels the process\n\nThis part will require a bit of refactoring on the router logic on create view. Instead of redirecting to the previous route, we'll need to close the \"sidebar modal\"\n\n**MR 2, working with API**:\n\n* [ ] Click create uses the `createWorkItem` mutation\n* [ ] After creation, replace the markdown taskable text in the description with a GFM issue reference to the newly created Task.\n* [x] Provide a way for the user to understand any errors if they happen when clicking create.\n\nCurrently, the Create view already utilizes `gl-alert` component to show an error on `createWorkItem` mutation.\n \n\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-06-29T15:58:34.185Z","updated_at":"2022-09-22T14:16:33.280Z","closed_at":"2022-03-22T11:09:00.725Z","closed_by":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"labels":["Category:Issue Tracking","Category:Portfolio Management","Category:Team Planning","Deliverable","Technical Writing","devops::plan","documentation","epics","frontend","group::project management","missed-deliverable","missed:14.4","missed:14.6","missed:14.7","missed:14.8","section::dev","tw-weight::5","type::maintenance","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"}],"author":{"id":4669960,"username":"cdybenko","name":"Christen Dybenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4669960/avatar.png","web_url":"https://gitlab.com/cdybenko"},"type":"ISSUE","assignee":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"user_notes_count":32,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334812","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":16,"completed_count":13},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"13 of 16 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334812","notes":"https://gitlab.com/api/v4/projects/278964/issues/334812/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334812/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334812","relative":"#334812","full":"gitlab-org/gitlab#334812"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7110,"epic":{"id":382837,"iid":7110,"title":"ðŸš€ Create a new Task work item from Markdown Task","url":"/groups/gitlab-org/-/epics/7110","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":{"id":45529,"iid":56,"sequence":11,"group_id":9970,"title":"Iteration 11","description":null,"state":3,"created_at":"2022-01-18T00:05:01.885Z","updated_at":"2022-03-30T00:05:02.273Z","start_date":"2022-03-16","due_date":"2022-03-29","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/45529"},"health_status":null},{"id":89490725,"iid":334810,"project_id":278964,"title":"Add assignees to a task","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n## Problem to solve\n\nUsability improvement for Tasks! A natural element of a task is the assignee. Tasks should be assignable.\n\n## Proposal\n\n\n- Tasks can be assigned to one (~\"GitLab Free\") or more (~\"GitLab Premium\") users\n- If someone is `@` mentioned in the markdown taskable, pre-fill the assignee(s) on the task view (create mode)  \n\n## Acceptance Criteria\n\n- [x] Search for assignees\n- [x] Add assignees\n- [x] Remove assignees\n- [x] Quick apply assign to self\n- [x] Close manage assignee modal\n- [x] Show avatars of assigned users on work item view\n- [x] Supports existing \"invite members\" workflow\n- [x] FE event tracker\n- [x] Redis counter\n- [ ] Unify assignees code in the backend from issuable services and widget service\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n- Same permissions as existing issue permissions. \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n- Yes \n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- Write tests, but this will be iteratively developed behind a FF and not generally available. \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n- Work items are not yet a stage where we will be measuring quantitatively.\n\n### Tiering\n\n* Single assignee is ~\"GitLab Free\"\n* Multiple assignees is ~\"GitLab Premium\"\n\n\n## FE Event Trackers\n\n```\ncategory: workItems:show\nlabel: el\naction: assigned_user\nproperty: [type_{{insert issue type}}]\n```\n\n```\ncategory: workItems:show\nlabel: el\naction: unassigned_user\nproperty: [type_{{insert issue type}}]\n\n```\n\n## Redis counter\n\n```markdown\n- **name:** `users_updating_work_item_assignees` \n- **category:** `work_items`\n- **redis_slot:** `users` \n- **include in the following aggregation counters:**\n  - [x] `xmau_plan`\n  - [x] `xmau_project_management`\n  - [ ] `xmau_product_planning`\n  - [ ] `xmau_certify`\n  - [x] `users_work_items`\n```\n\n### Release Notes\n\nTasks represent discrete work units necessary to complete an issue. You can now assign tasks to a single individual in GitLab Free or multiple people in GitLab Premium or Ultimate. Assigned tasks can be accessed from your personal issues dashboard and are filterable by assignee from within a project's issue list. \n\nhttps://docs.gitlab.com/ee/user/tasks.html#assign-users-to-a-task","state":"closed","created_at":"2021-06-29T15:58:33.184Z","updated_at":"2022-12-06T11:39:02.928Z","closed_at":"2022-09-19T18:56:08.385Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Issue Tracking","Category:Portfolio Management","Category:Team Planning","GitLab Core","Stretch","UX","backend","design-weight::2","devops::plan","direction","documentation","epics","frontend","group::project management","missed-deliverable","missed:14.4","missed:15.1","missed:15.3","release post item","release post item::in review","section::dev","tw-weight::3","type::feature","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":4669960,"username":"cdybenko","name":"Christen Dybenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4669960/avatar.png","web_url":"https://gitlab.com/cdybenko"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":39,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334810","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":15,"completed_count":12},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"12 of 15 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334810","notes":"https://gitlab.com/api/v4/projects/278964/issues/334810/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334810/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334810","relative":"#334810","full":"gitlab-org/gitlab#334810"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7103,"epic":{"id":382735,"iid":7103,"title":"âœ… Work Items - Tasks","url":"/groups/gitlab-org/-/epics/7103","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":{"id":62776,"iid":76,"sequence":21,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-06-07T00:05:01.842Z","updated_at":"2022-08-17T00:05:02.139Z","start_date":"2022-08-03","due_date":"2022-08-16","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/62776"},"health_status":null},{"id":89490724,"iid":334809,"project_id":278964,"title":"View and edit the description of a Task (MVC 1)","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nI need to add a description to a work item. \n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nAdd support for descriptions to work items. \n\n## UX Screens\n\nMVC1 is attached to the design manager. \n\n## FE Event Trackers\n\n- po_description_update\n\n## Redis Tracker\n\n```markdown\n- **name:** `users_updating_work_item_descriptions` \n- **category:** `work_items`\n- **redis_slot:** `users` \n- **include in the following aggregation counters:**\n  - [x] `xmau_plan`\n  - [x] `xmau_project_management`\n  - [ ] `xmau_product_planning`\n  - [ ] `xmau_certify`\n  - [x] `users_work_items`\n```\n\n## Acceptance Criteria\n\n- [ ] Edit description with issue description editor\n- [ ] Formatting options work as expected\n- [ ] MVC for gracefully handling conflicts (same as issue description) -- Proposed UI/UX (https://gitlab.com/gitlab-org/gitlab/-/issues/362967+)\n- [ ] In-progress edits are persisted to localstorage (existing behavior)\n- [ ] Properly renders all GFM and attachments like the existing description rendering\n- [ ] Preview changes\n- [ ] Many changes that happen within a small time span are batched together in the description diff system notes (existing behavior)\n- [ ] Mobile and Desktop implemented\n- [ ] Description updates in real-time via GraphQL subscription instead of `/realtime_changes` endpoint. \n- [ ] Unsupported quick actions are not available. \n- [ ] FE Tracker\n- [ ] Redis Tracker\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n- Same permissions as existing issue permissions. \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n- None for now. \n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- Write tests, but this will be iteratively developed behind a FF and not generally available. \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n- Work items are not yet a stage where we will be measuring quantitatively.\n\n# Engineering Implementation Details\n\n## Frontend\n\nSince this is the initial widget that we will be creating, we need to include a few things that will be included globally\n\n- [ ]  Create directory to hold widgets\n- [ ]  Create `description` component\n- [ ]  Create `description` GraphQL mutation\n- [ ]  Create documentation with instructions on how to create a widget for use within work items\n- [ ]  Add snowplow tracking on updating of description\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-06-29T15:58:32.699Z","updated_at":"2022-11-09T15:41:36.041Z","closed_at":"2022-06-21T21:00:34.123Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Issue Tracking","Category:Portfolio Management","Category:Team Planning","Deliverable","UX","backend","design-weight::2","devops::plan","direction","documentation","epics","frontend","group::project management","missed-deliverable","missed:15.1","release post item","section::dev","tw-weight::3","type::maintenance","workflow::in dev"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"}],"author":{"id":4669960,"username":"cdybenko","name":"Christen Dybenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4669960/avatar.png","web_url":"https://gitlab.com/cdybenko"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":95,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334809","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":22,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 22 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334809","notes":"https://gitlab.com/api/v4/projects/278964/issues/334809/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334809/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334809","relative":"#334809","full":"gitlab-org/gitlab#334809"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7168,"epic":{"id":390058,"iid":7168,"title":"âœï¸ Work Items - View and update the description of a Work Item","url":"/groups/gitlab-org/-/epics/7168","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":{"id":53425,"iid":68,"sequence":17,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-04-12T00:05:01.804Z","updated_at":"2022-06-22T00:05:02.250Z","start_date":"2022-06-08","due_date":"2022-06-21","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/53425"},"health_status":null},{"id":89490723,"iid":334808,"project_id":278964,"title":"Edit the title of a Task","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n### Problem to solve\n\nOnce a task is created with a title, there is no way to update the title.\n\n### Proposal\n\n- Allow an authorized user to update the title of a Task\n\n### UX\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/334808#note_717912980\n\n### Acceptance Criteria\n\n- [x] Edit title with support for inline editing\n- [x] Handle mobile touch events appropriately to prevent accidentally entering edit state\n- [x] Save changes to title\n- [ ] Cancel and discard changes to title\n- [ ] Title updates in real-time.\n- [ ] Mobile styles\n- [ ] Desktop style \n- [ ] FE Trackers    \n\n### FE Trackers\n\n```\ncategory: workItems:show\nlabel: el\naction: updated_title\nproperty: [type_{{insert issue type}}]\n```\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n- Same permissions as existing issue permissions. \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n- Maybe? \n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- Yep \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n- Count of Task title updates\n- Unique users updating Task title","state":"closed","created_at":"2021-06-29T15:58:32.250Z","updated_at":"2022-01-18T23:23:42.963Z","closed_at":"2022-01-18T23:23:42.950Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Issue Tracking","Category:Portfolio Management","Category:Team Planning","Deliverable","GitLab Free","devops::plan","documentation","epics","frontend","group::product planning","missed-deliverable","missed:14.4","missed:14.5","missed:14.6","section::dev","tw-weight::3","workflow::in review"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"}],"author":{"id":4669960,"username":"cdybenko","name":"Christen Dybenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4669960/avatar.png","web_url":"https://gitlab.com/cdybenko"},"type":"ISSUE","assignee":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"user_notes_count":23,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334808","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334808","notes":"https://gitlab.com/api/v4/projects/278964/issues/334808/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334808/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334808","relative":"#334808","full":"gitlab-org/gitlab#334808"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7083,"epic":{"id":381451,"iid":7083,"title":"ðŸš€   Open Tasks in Issues to view and manage Title","url":"/groups/gitlab-org/-/epics/7083","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":38166,"iid":40,"sequence":1,"group_id":9970,"title":"Iteration 1: October 27, 2021 - November 09, 2021","description":"updated description","state":3,"created_at":"2021-10-22T17:12:40.529Z","updated_at":"2022-04-07T21:59:07.147Z","start_date":"2021-10-27","due_date":"2021-11-09","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/38166"},"health_status":null},{"id":89490721,"iid":334807,"project_id":278964,"title":"View a Task (detail page)","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n## Problem to Solve\n\nOnce a task is created, there needs to be a way to view it.\n\n## Proposal\n\n- If task is in issue, open task detail in modal/sidebar\n- If task is anywhere else, open in direct route `-/issues/...`\n\n## Acceptance Criteria\n\n- [ ] When clicking on task (referenced from issue detail view), load task detail view in modal/sidebar.\n- [ ] When clicking through to Task detail view from anywhere other than issue detail, load the Task at the `/issue/123/ route.`\n- [ ] The title is visible in the task detail view\n- FE Event trackers\n\n## FE Event Trackers\n\n```\ncategory: workItems:show\nlabel: work_item_view\naction: viewed_work_item_from_modal\nproperty: [type_{{insert issue type}}]\n\n```\n\n```\ncategory: workItems:show\nlabel: work_item_view\naction: viewed_work_item_from_direct_route\nproperty: [type_{{insert issue type}}]\n\n```\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n- Same permissions as existing issue permissions. \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n- Maybe?\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- Necessary unit and end-to-end tests \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n- Work items are not yet a stage where we will be measuring quantitatively.\n\n\n### Tiers\n\n- Core Work Item view, default issue types (Task will be a default), and \"related\" `Task` issues is ~\"GitLab Free\" \n- Parent/child relationships are ~\"GitLab Premium\", which is consistent with single level epics\n\n---\n# Engineering Implementation Details\n\n## Frontend tasks\n\n- [x]  New `work_item` directory\n- [x]  Uses Apollo\n- [x]  Includes a place for GraphQL Schemas to live\n- [x]  Includes a place for Apollo mocks to live\n- [x]  Uses Vue Router\n- [x]  Create Feature work item type (page?)\n- [x]  Include title on a Feature page\n- [x]  Work item global styling","state":"closed","created_at":"2021-06-29T15:58:31.734Z","updated_at":"2022-03-09T13:21:36.371Z","closed_at":"2021-11-19T20:38:08.421Z","closed_by":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"labels":["Category:Issue Tracking","Category:Portfolio Management","Category:Team Planning","Deliverable","GitLab Free","GitLab Premium","Technical Writing","devops::plan","documentation","epics","frontend","group::project management","missed-deliverable","missed:14.4","section::dev","tw-weight::5","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},{"id":4545397,"username":"cngo","name":"Coung Ngo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4545397/avatar.png","web_url":"https://gitlab.com/cngo"}],"author":{"id":4669960,"username":"cdybenko","name":"Christen Dybenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4669960/avatar.png","web_url":"https://gitlab.com/cdybenko"},"type":"ISSUE","assignee":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"user_notes_count":26,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334807","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":8},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334807","notes":"https://gitlab.com/api/v4/projects/278964/issues/334807/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334807/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334807","relative":"#334807","full":"gitlab-org/gitlab#334807"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7083,"epic":{"id":381451,"iid":7083,"title":"ðŸš€   Open Tasks in Issues to view and manage Title","url":"/groups/gitlab-org/-/epics/7083","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89489239,"iid":334801,"project_id":278964,"title":"NoMethodError: undefined method `new_pos' for nil:NilClass","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/2676648/?referrer=gitlab_plugin\n\n```\nNoMethodError: undefined method `new_pos' for nil:NilClass\n  gitlab/github_import/representation/diff_note.rb:66:in `line_code'\n    .diff_line_code(file_path, diff_line.new_pos, diff_line.old_pos)\n  gitlab/github_import/importer/diff_note_importer.rb:34:in `execute'\n    line_code: note.line_code,\n  gitlab/github_import/object_importer.rb:37:in `import'\n    importer_class.new(object, project, client).execute\n  gitlab/github_import/rescheduling_methods.rb:31:in `try_import'\n    import(*args)\n  gitlab/github_import/rescheduling_methods.rb:19:in `perform'\n    if try_import(project, client, hash)\n...\n(86 additional frame(s) were not displayed)\n\nundefined method `new_pos' for nil:NilClass\n```","state":"closed","created_at":"2021-06-29T15:28:27.129Z","updated_at":"2022-02-25T16:38:03.538Z","closed_at":"2022-02-22T09:10:36.534Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Importers","Importer:GitHub","backend","devops::manage","estimation::completed","group::import","section::dev","type::bug"],"milestone":null,"assignees":[],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334801","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334801","notes":"https://gitlab.com/api/v4/projects/278964/issues/334801/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334801/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334801","relative":"#334801","full":"gitlab-org/gitlab#334801"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3050,"epic":{"id":39430,"iid":3050,"title":"ðŸž GitHub Importer bugs","url":"/groups/gitlab-org/-/epics/3050","group_id":9970},"iteration":null,"health_status":null},{"id":89482218,"iid":334791,"project_id":278964,"title":"Display correct container width when viewing a blob","description":"When viewing a blob with the blob refactor FF enabled, the need to ensure that the correct container width is used.\n\n| Before (incorrect) | After (correct) |\n| ------ | ------ |\n| ![Screenshot_2021-06-29_at_15.45.54](/uploads/307b1462d9a3b456e120ffa2dacdc676/Screenshot_2021-06-29_at_15.45.54.png) | ![Screenshot_2021-06-29_at_15.42.39](/uploads/29e9405c42086509dc9c7dc28e8f732b/Screenshot_2021-06-29_at_15.42.39.png) |","state":"closed","created_at":"2021-06-29T13:48:06.147Z","updated_at":"2021-09-13T15:04:02.235Z","closed_at":"2021-09-03T05:58:42.400Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Stretch","devops::create","frontend","group::source code","priority::3","repository","section::dev","severity::4","type::bug","workflow::in dev"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334791","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334791","notes":"https://gitlab.com/api/v4/projects/278964/issues/334791/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334791/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334791","relative":"#334791","full":"gitlab-org/gitlab#334791"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5531,"epic":{"id":217419,"iid":5531,"title":"Refactor Repository Browser to 1 Vue Application","url":"/groups/gitlab-org/-/epics/5531","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":89481478,"iid":334790,"project_id":278964,"title":"Ensure that the correct Nav block is displayed when viewing a blob","description":"When viewing a blob we need to ensure that the correct nav block is displayed.\n\nNote, this bug only happens when navigating from the repository files view.\n\n![Screen_Recording_2021-06-29_at_15.32.55](/uploads/c4f5d1c2ca75f3897f2a7edd3b576229/Screen_Recording_2021-06-29_at_15.32.55.mov)\n\n| Before (incorrect) | After (correct) |\n| ------ | ------ |\n| ![Screenshot_2021-06-29_at_15.33.35](/uploads/07476983f1cd585e2e6e5e20edc1c467/Screenshot_2021-06-29_at_15.33.35.png) | ![Screenshot_2021-06-29_at_15.34.00](/uploads/e4fc87e395eec59639b54a93a67e9966/Screenshot_2021-06-29_at_15.34.00.png) |","state":"closed","created_at":"2021-06-29T13:39:56.680Z","updated_at":"2021-08-19T18:55:09.063Z","closed_at":"2021-08-19T18:55:08.727Z","closed_by":{"id":853414,"username":"andr3","name":"AndrÃ© LuÃ­s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["Category:Source Code Management","Deliverable","devops::create","frontend","group::source code","repository","section::dev","type::bug","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334790","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334790","notes":"https://gitlab.com/api/v4/projects/278964/issues/334790/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334790/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334790","relative":"#334790","full":"gitlab-org/gitlab#334790"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5531,"epic":{"id":217419,"iid":5531,"title":"Refactor Repository Browser to 1 Vue Application","url":"/groups/gitlab-org/-/epics/5531","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":89480883,"iid":334789,"project_id":278964,"title":"Ensure Auxilary viewers work as expected","description":"As part of the Repository blob refactor we need to ensure that the Auxilary viewers still work as expected.\n\nFor instance when viewing a `package.json` file, the auxiliary viewer displays `Analyzing fileâ€¦`.\n\n| Before (incorrect) | After (correct) |\n| ------ | ------ |\n| ![Screenshot_2021-06-29_at_15.17.11](/uploads/b61f48de3193325f0c116af9d70325a3/Screenshot_2021-06-29_at_15.17.11.png) | ![Screenshot_2021-06-29_at_15.21.28](/uploads/a7b4b2d10fe694b8d8ba7d6b661a91ba/Screenshot_2021-06-29_at_15.21.28.png) |\n\n### Files with Auxilary viewers\n\nRef: https://gitlab.com/gitlab-org/gitlab/blob/master/app/models/blob.rb#L48\n\n* GitlabCiYml,\n* RouteMap,\n* Readme,\n* License,\n* Contributing,\n* Changelog,\n* MetricsDashboardYml,\n* CargoToml,\n* Cartfile,\n* ComposerJson,\n* Gemfile,\n* Gemspec,\n* GodepsJson,\n* GoMod,\n* PackageJson,\n* Podfile,\n* Podspec,\n* PodspecJson,\n* RequirementsTxt,\n* YarnLock\n\n### Possible fix\n\nWe need to ensure we [init the Auxilary viewers](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/blob/viewer/index.js#L59) when we load the blob app.","state":"closed","created_at":"2021-06-29T13:30:21.725Z","updated_at":"2021-08-18T07:00:47.958Z","closed_at":"2021-07-28T06:43:19.034Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","devops::create","frontend","group::source code","quad-planning::complete-action","repository","section::dev","workflow::ready for development"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334789","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334789","notes":"https://gitlab.com/api/v4/projects/278964/issues/334789/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334789/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334789","relative":"#334789","full":"gitlab-org/gitlab#334789"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5531,"epic":{"id":217419,"iid":5531,"title":"Refactor Repository Browser to 1 Vue Application","url":"/groups/gitlab-org/-/epics/5531","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":89473816,"iid":334785,"project_id":278964,"title":"Ensure the correct action buttons are displayed when viewing binary files","description":"In https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64839 we added the ability to use the legacy (HAML) viewers. \n\nHowever, when viewing certain files (e.g. binary files) the action buttons should show/hide accordingly.\n\n| Before (incorrect) | After (correct) |\n| ------ | ------ |\n| ![Screenshot_2021-06-29_at_14.12.05](/uploads/bbaa86fdf46f1ccdffece6440f493b79/Screenshot_2021-06-29_at_14.12.05.png) | ![Screenshot_2021-06-29_at_14.12.19](/uploads/04d53b30fabc464d29b1aaa5b0486e37/Screenshot_2021-06-29_at_14.12.19.png) |","state":"closed","created_at":"2021-06-29T12:18:33.636Z","updated_at":"2021-08-18T07:00:48.015Z","closed_at":"2021-08-02T08:19:08.617Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","devops::create","frontend","group::source code","quad-planning::complete-no-action","repository","section::dev","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334785","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334785","notes":"https://gitlab.com/api/v4/projects/278964/issues/334785/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334785/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334785","relative":"#334785","full":"gitlab-org/gitlab#334785"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5531,"epic":{"id":217419,"iid":5531,"title":"Refactor Repository Browser to 1 Vue Application","url":"/groups/gitlab-org/-/epics/5531","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":89467222,"iid":334780,"project_id":278964,"title":"Follow-up from \"Add the initial drawer to the compliance dashboard\"","description":"The following discussion from !64771 should be addressed:\n\n- [ ] @jiaan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64771#note_614078944):  (+1 comment)\n\n    \u003e **Question:** I see there's at least one other `GlDrawer` with this, WDYT about consolidating this workaround as a `GlDrawer` component prop?\n\n## Implementation plan\n\n~frontend :one:\n\n1. Find all uses of `Z_INDEX: 252` and `getDrawerHeaderHeight()`\n2. Unify and move these to `~/lib/utils/constants` and `~/lib/utils/drawer.js`\n3. Update usages to use new util files\n4. Add tests for new util files","state":"closed","created_at":"2021-06-29T10:37:13.181Z","updated_at":"2021-10-28T13:55:43.322Z","closed_at":"2021-10-18T13:15:07.626Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["Category:Compliance Management","devops::manage","frontend","group::compliance","maintenance::refactor","priority::3","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334780","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334780","notes":"https://gitlab.com/api/v4/projects/278964/issues/334780/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334780/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334780","relative":"#334780","full":"gitlab-org/gitlab#334780"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5237,"epic":{"id":184672,"iid":5237,"title":"Convert compliance dashboard into an insightful report","url":"/groups/gitlab-org/-/epics/5237","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89463025,"iid":334776,"project_id":278964,"title":"Use main database terminology","description":"In a [team meeting](https://docs.google.com/document/d/1W7QsQL_2wMLW9KJU5ZEZdyIqYtRC6_bwOoNXJUWNbiU/edit#bookmark=id.gn31fwjrpzhz)  (internal), we had a discussion about the main database in contrast to primary / replica.\n\nIn a informal [Slack poll](https://gitlab.slack.com/archives/C01TQ838Y3T/p1624266333458700) (internal), we in ~\"group::sharding\" settled on `main`.\n\n- [x] Update docs\n- [x] Make our own wrapper helper so that we hide rails' `ActiveRecord::Base.configurations.primary?` method. Also it's a `::nodoc::` method, so I will feel a lot better if we have some tests against this so we know if/when Rails breaks this.","state":"closed","created_at":"2021-06-29T09:26:27.011Z","updated_at":"2022-05-31T12:22:30.404Z","closed_at":"2021-07-11T22:09:28.066Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","devops::data_stores","group::pods","maintenance::refactor","section::enablement","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334776","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334776","notes":"https://gitlab.com/api/v4/projects/278964/issues/334776/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334776/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334776","relative":"#334776","full":"gitlab-org/gitlab#334776"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6103,"epic":{"id":281355,"iid":6103,"title":"Decomposition: Support for many databases","url":"/groups/gitlab-org/-/epics/6103","group_id":9970,"human_readable_end_date":"Sep 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89458016,"iid":334766,"project_id":278964,"title":"[Feature flag] Rollout of `user_refresh_from_replica_worker_uses_replica_db`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64276) on production,\nthat is currently behind the `user_refresh_from_replica_worker_uses_replica_db` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: Manage::Access\n- Most appropriate slack channel to reach out to: `#g_manage_access`\n- Best individual to reach out to: Manoj M J\n- PM: Orit Golowinski\n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [x] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [x] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-06-29T08:04:58.516Z","updated_at":"2021-09-09T07:29:55.666Z","closed_at":"2021-09-08T08:50:55.261Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["devops::manage","feature flag","section::dev","workflow::in dev"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"type":"ISSUE","assignee":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334766","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":31},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"31 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334766","notes":"https://gitlab.com/api/v4/projects/278964/issues/334766/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334766/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334766","relative":"#334766","full":"gitlab-org/gitlab#334766"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89454223,"iid":334762,"project_id":278964,"title":"[Feature flag] Rollout of `diffs_batch_render_cached`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [Introduce caching on Projects::MergeRequests::DiffsController#diffs_batch.json](https://gitlab.com/gitlab-org/gitlab/-/issues/332970) on production,\nthat is currently behind the `diffs_batch_render_cached ` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: Code Review\n- Most appropriate slack channel to reach out to: `#g_create_code-review`\n- Best individual to reach out to: @dskim_gitlab \n- PM: @phikai \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing projects\n- Rollout on GitLab.com for a week\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-com/www-gitlab-com` project\n\n## Expectations\n\n### What are we expecting to happen?\n\nWe expect the response time on Diffs#diffs_batch.json would improve.\n\n### What might happen if this goes wrong?\n\nIt might use up too much of the available cache storage which might affect overall application performance. \n\n### What can we monitor to detect problems with this?\n* [diffs_batch.json Rails Controller](https://dashboards.gitlab.net/d/web-rails-controller/web-rails-controller?from=now-7d\u0026orgId=1\u0026to=now\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-stage=main\u0026var-controller=Projects::MergeRequests::DiffsController\u0026var-action=diffs_batch.json)\n* [Redis cache dashboard](https://dashboards.gitlab.net/d/redis-cache-main/redis-cache-overview?orgId=1)\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [x] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [x] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set diffs_batch_render_cached false\n```","state":"closed","created_at":"2021-06-29T07:00:42.365Z","updated_at":"2021-09-18T07:00:59.214Z","closed_at":"2021-09-08T02:06:04.218Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["Deliverable","automation:ml","automation:ml wrong","backend","devops::create","feature flag","group::code review","section::dev"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334762","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":19},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"19 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334762","notes":"https://gitlab.com/api/v4/projects/278964/issues/334762/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334762/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334762","relative":"#334762","full":"gitlab-org/gitlab#334762"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6142,"epic":{"id":285495,"iid":6142,"title":"Cache responses of endpoints used in merge request page","url":"/groups/gitlab-org/-/epics/6142","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89453445,"iid":334761,"project_id":278964,"title":"Add index on historical_data.recorded_at","description":"`historical_data.recorded_at` (added in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/45893/) is used to order and filter queries, but it currently does not have an index. Though the table won't be too big, it would be still beneficial since adding one can avoid table scan.\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\nThis change should also include at the minimum, a change to the existing Model spec to account for this new column.","state":"closed","created_at":"2021-06-29T06:44:56.291Z","updated_at":"2021-08-19T01:26:46.698Z","closed_at":"2021-08-19T01:26:46.414Z","closed_by":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"labels":["Unplanned","[deprecated] Category:Utilization","[deprecated] ðŸŽ","backend","bug::performance","database","devops::fulfillment","group::utilization","maintenance::refactor","quad-planning::complete-action","section::fulfillment","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"}],"author":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"type":"ISSUE","assignee":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334761","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334761","notes":"https://gitlab.com/api/v4/projects/278964/issues/334761/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334761/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334761","relative":"#334761","full":"gitlab-org/gitlab#334761"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89449636,"iid":334754,"project_id":278964,"title":"[Feature flag] Rollout of `wiki_uses_default_branch`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [this wiki feature](https://gitlab.com/gitlab-org/gitlab/-/issues/221159) on production,\nthat is currently behind the `wiki_uses_default_branch` feature flag.\n\n## Owners\n\n- Team: group::editor\n- Most appropriate slack channel to reach out to: `#g_editor`\n- Best individual to reach out to: @fjsanpedro\n- PM: `@ericschurter`\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [ ] Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [ ] Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] If the feature might impact the user experience, notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n- [ ] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-06-29T05:27:13.579Z","updated_at":"2021-07-28T05:14:02.105Z","closed_at":"2021-07-28T05:14:02.080Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier LÃ³pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Wiki","Technical Writing","devops::create","documentation","feature flag","group::editor","section::dev","workflow::in dev"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier LÃ³pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier LÃ³pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier LÃ³pez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334754","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":47,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 47 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334754","notes":"https://gitlab.com/api/v4/projects/278964/issues/334754/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334754/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334754","relative":"#334754","full":"gitlab-org/gitlab#334754"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89443987,"iid":334752,"project_id":278964,"title":"Use consistent spacing in Jira Issue Detail sidebar","description":"https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61650 resolved various spacing inconsistencies on the GitLab issues sidebar. It appears there are similar inconsistencies in the Jira Issue Detail sidebar.\n\n\u003cimg src=\"/uploads/f3aa387670e6bb07d12ad1e2c61de5d8/Screen_Shot_2021-06-29_at_2.08.35_pm.png\" width=\"500px\" /\u003e\n\nRefer to https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61650 for how best to fix the spacing: it mostly involves replacing uses of the `title` class with `gl-line-height-20 gl-mb-2 gl-text-gray-900`","state":"closed","created_at":"2021-06-29T04:41:49.820Z","updated_at":"2022-11-22T19:39:00.154Z","closed_at":"2022-02-02T05:56:29.109Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["SUS::Impacting","Stretch","UI polish","devops::manage","frontend","group::integrations","quad-planning::complete-no-action","section::dev","severity::4","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334752","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334752","notes":"https://gitlab.com/api/v4/projects/278964/issues/334752/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334752/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334752","relative":"#334752","full":"gitlab-org/gitlab#334752"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89423646,"iid":334710,"project_id":278964,"title":"Align Identicon colors with GitLab UI","description":"## What/Why\n\nRelated to https://gitlab.com/gitlab-org/gitlab-ui/-/issues/1444 \u003cbr /\u003e\nFollow up to change https://gitlab.com/gitlab-org/gitlab-ui/-/merge_requests/2255\n\nThere are two ways we currently access Identicons in GitLab.  Either we use the `GlAvatar` fallback from GitLab UI or we utilize the `Identicon` component in GitLab.  These two component aim to represent the same UI yet have different color pallets associated with them.\n\nAn example of the discrepancy: \n\n## Screenshot\n\n| GitLab | GitLab UI |\n| ------ | ------ |\n| ![GitLab](/uploads/aa65d1beff6dbe59d6d51bb1b371ac93/GitLab.png) | ![GitLab_UI](/uploads/07a7f074d8adc05790607ae02cb375d7/GitLab_UI.png) |\n\nFurthermore in the linked MR above we updated the GitLab UI color pallet even further as well as got a [design spec](https://www.figma.com/file/qEddyqCrI7kPSBjGmwkZzQ/Component-library?node-id=1833%3A2791) created.\n\n## Proposal\n\nWhile in the future it may make sense to move the Identicon component to GitLab UI entirely, for now lets simply update the colors to match GitLab UI.  Ideally accessing the color variables from there if possible.","state":"closed","created_at":"2021-06-28T17:07:56.311Z","updated_at":"2022-05-30T16:31:32.902Z","closed_at":"2021-07-06T14:23:00.290Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["Category:Global Search","UX","UX debt","devops::data_stores","frontend","group::global search","maintenance::refactor","section::enablement","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334710","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334710","notes":"https://gitlab.com/api/v4/projects/278964/issues/334710/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334710/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334710","relative":"#334710","full":"gitlab-org/gitlab#334710"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89419393,"iid":334704,"project_id":278964,"title":"Accept lowercase for data_category in metric definition","description":"We recently introduced the `data_category` field for usage metrics with `Optional`, `Operational`, and `Standard`. We currently only accept the ENUM was uppercase, compared to the other definitions were we use lowercase.\n\n## Questions\n- Should we accept lowercase as well?\n- If so, should we update existing definitions?","state":"closed","created_at":"2021-06-28T15:29:37.814Z","updated_at":"2021-08-13T12:12:25.103Z","closed_at":"2021-08-13T10:30:10.419Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["Unplanned","backend","devops::growth","group::product intelligence","maintenance::refactor","section::growth","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334704","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334704","notes":"https://gitlab.com/api/v4/projects/278964/issues/334704/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334704/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334704","relative":"#334704","full":"gitlab-org/gitlab#334704"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89413717,"iid":334690,"project_id":278964,"title":"Schema management for isolating tables iteratively","description":"This is a follow-up from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64289#note_612972450:\n\nLet me summarize what I understand we're doing here (and please correct what I missed) and detail an alternative solution that does not require substantial changes to the migration methodology, keeps things simple in that regard (there's only *one* way of doing database migrations) and also helps us with self-managed.\n\nI would like to ask to consider this proposal before we decide upon the MR at hand.\n\nIt also has implications beyond schema management, where I don't know what you've already discussed in full, but from a great discussion with @iroussos I believe this proposal plays to our needs in general.\n\nI'll be using `database:ci` and `database:main` to talk about separate logical databases and connections to those databases.\n\n### Goals\n\n\u003e This will be the easiest way to keep the schemas in sync since they will be the same schema. These schemas won't need to diverge until %15.0 and at that point we can create the different directory for migrations.\n\u003e ...\n\u003e GitLab.com the database schema will be the same anyway as we're doing it via streaming replication of the current main database so this avoids a weird divergence in production\n\n1. Keep *exactly* the same database schema between `database:main` and `database:ci` \n1. Isolate tables: In this iteration, `ci_instance_variables` is identified as `belongs to CI` and should be isolated. More CI tables will be isolated like this.\n1. Discovery: When looking at the `database:ci` database, I want to only see `belongs to CI` tables\n1. Disallow cross-joins: When connected to `database:ci`, we want to error out hard when queries join across tables that `belong to CI` and that don't.\n\n### Solution: Managed search path\n\nThis can all be done without introducing an additional database schema and additional migration methodology for the `database:ci` database:\n\n1. We always deploy the same schema to `database:ci` and `database:main` (this is goal (1) after all) - keep doing what we already, use `db/structure.sql` and migrations as SSOT for that\n1. We create an additional postgres schema (`CREATE SCHEMA gitlab_ci`) for CI\n1. For a connection to `database:main`, we add `gitlab_ci` to the `search_path = public, gitlab_ci, ...`\n1. For a connection to `database:ci`, we limit the search path to `search_path = gitlab_ci` (goal (3) - limited discovery + goal (4) - disallow cross-joins)\n1. We add a migration that moves `ci_instance_variables` to `gitlab_ci` schema (this is a metadata op: `ALTER TABLE... SET SCHEMA gitlab_ci` (goal (2) - isolate table)\n\nManaging the `search_path` is supported by Rails (part of the connection config).\n\nExpanding on goal (4) - disallow cross-joins: A connection to `database:ci` will only \"see\" what's in the `gitlab_ci` schema. An attempted `select * from ci_instance_variables JOIN other_table_in_public` will error out hard, because this table is not visible. \n\nUpon a later stage, when we actually want the `database:ci` database schema to *diverge*, we introduce separate schema management for `ci`. When we have that, we can simply drop the `public` schema (with everything in it). Given the implications for self-managed below, we may not want to to do this step (we don't need it - there's no harm in having a few empty tables around :shrug: ).\n\n#### How to iterate on extracting a group of tables, e.g. `ci_*`\n\nIn this summary, we aim to extract CI-related tables and change the application to remove cross joins to unrelated tables. The goal is to be able to extract this set of tables into an entirely different database.\n\nSteps:\n\n1. Create a schema inside `db:main` for the group, e.g. `gitlab_ci`\n1. Move relevant tables into this schema - transparent for the application (append search_path)\n1. Identify and remove cross joins to adapt the application\n1. Once compatible, use `db:ci` connection with a `search_path` limited to `gitlab_ci` to have an isolated view of the database for CI\n1. Once this is proven to work, tables in `gitlab_ci` can actually be taken out of `db:main` and moved into `db:ci` (if desired, e.g. GitLab.com). No application changes needed apart from changing the database connection config (different database)\n\nAll this can be done and shipped today, to both GitLab.com and self-managed. There is no need for infrastructure or omnibus changes supporting this.\n\n### Discussion\n\nBenefits:\n\n1. All goals achieved :white_check_mark: - a soft separation of tables that is easy to deal with\n1. We can start very quickly: Start with step (1) of the solution above and you'll already have `ci_instance_variables` available to you in `database:ci` (albeit not isolated - this can be done in later steps)\n1. Ability to selectively validate isolation changes avoiding big bang changes. See https://gitlab.com/gitlab-org/gitlab/-/issues/334690#note_614694876.\n1. No dependency/support needed for infrastructure and omnibus changes to start with isolating application logic and tables (can all be deployed to GitLab.com/self-managed today)\n1. No change at all to how we manage the database schema (includes post-deploy/background migrations)\n1. Transparent to anybody else outside the \"sharding\" effort\n1. Self-managed: Can ship to self-managed just with regular migrations - no special treatment needed\n1. Self-managed: Huge plus (see below) - no need for separate databases unless desired\n  1. Logical backups (pg_dump) continue to produce consistent dump if only one database\n1. We don't necessarily need https://gitlab.com/gitlab-org/gitlab/-/issues/334227 to implement schema comparison checking - the schema will be based on the same migrations and hence be equivalent by design.\n\n\nWeaknesses:\n\n1. We know how to work with different postgres schemas (we already do), but not all our custom migration helpers support it completely (~\"group::database\" to check and make sure this works). No urgency here since we don't expect to do a lot of migrations on `ci_instance_variables` soon.\n1. If we wanted to have a different schema \"on the other\" side (in `database:ci`) to e.g. incorporate partitioning changes before we migrate data, this would need some work. Can be dealt with as needed and as we design the data migration parts later (it's not needed today).\n\n#### Self-managed vs. GitLab.com\n\nThis is a huge plus for self-managed: They will only need **one** database, they don't need to migrate data to a separate database if that is not needed (for scaling purposes). A standard self-managed install keeps having one database only but has a few schemas: `public, gitlab_ci, gitlab_AAA, gitlab_BBB, ...`. This can even result in using the same connection pool for the different roles (and configuring `search_path`, so that all tables are visible or manage it upon \"switching\" connections) instead of having one connection pool per role (which multiplies connections), reducing resource needs.\n\nAnother benefit is that backups (pg_dump) continue to work as-is for installations that keep having one database only. With multiple databases, taking a consistent snapshot is more involved.\n\nFor GitLab.com (or another large install), we'll break the database apart and extract each postgres schema into its own database. At this point, we already know that the relevant parts of the app (e.g. CI) works fine when they only \"see\" their own schema, e.g. only CI tables. So this step is a matter of designing the data migration only (we don't have to deal with app changes anymore).\n\nThis means we can also validate \"isolation changes\" (making sure that the app works when it doesn't see all tables anymore, but only specific ones) quickly and iteratively - we can ship it to GitLab.com without having to have a separate database already (with all the mechanics this needs) and it easily ships to self-managed, too.","state":"closed","created_at":"2021-06-28T14:18:59.273Z","updated_at":"2022-05-31T12:22:31.613Z","closed_at":"2021-06-30T11:49:56.178Z","closed_by":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"labels":["Category:Pods","devops::data_stores","group::pods","section::enablement"],"milestone":null,"assignees":[],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":null,"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334690","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334690","notes":"https://gitlab.com/api/v4/projects/278964/issues/334690/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334690/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334690","relative":"#334690","full":"gitlab-org/gitlab#334690"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6103,"epic":{"id":281355,"iid":6103,"title":"Decomposition: Support for many databases","url":"/groups/gitlab-org/-/epics/6103","group_id":9970,"human_readable_end_date":"Sep 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89413328,"iid":334689,"project_id":278964,"title":"FE: Max User count visualization","description":"This is the FE issue for https://gitlab.com/gitlab-org/gitlab/-/issues/290202\n\nLocation: https://gitlab.com/gitlab-org/gitlab/-/issues/321933/#note_557291192","state":"closed","created_at":"2021-06-28T14:12:17.162Z","updated_at":"2021-07-19T09:32:01.328Z","closed_at":"2021-07-18T01:39:38.615Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["Deliverable","[deprecated] Accepting merge requests","[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","section::fulfillment","spike","type::feature"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4961018,"username":"mlunoe","name":"Michael LunÃ¸e","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":4961018,"username":"mlunoe","name":"Michael LunÃ¸e","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4961018/avatar.png","web_url":"https://gitlab.com/mlunoe"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334689","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334689","notes":"https://gitlab.com/api/v4/projects/278964/issues/334689/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334689/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334689","relative":"#334689","full":"gitlab-org/gitlab#334689"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5872,"epic":{"id":257458,"iid":5872,"title":"Seats Usage - Vision","url":"/groups/gitlab-org/-/epics/5872","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":89402192,"iid":334682,"project_id":278964,"title":"[Feature flag] Rollout of `compliance_dashboard_drawer`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/issues/299357) on production,\nthat is currently behind the `:compliance_dashboard_drawer` feature flag.\n\nThis feature adds a drawer to each merge request in the compliance dashboard. This drawer shows more details on the merge request to help users with their compliance auditing needs.\n\n## Owners\n\n- Team: `group::compliance`\n- Most appropriate slack channel to reach out to: `#g_manage_compliance`\n- Best individual to reach out to: @rob.hunt \n- PM: @stkerr \n\n## The Rollout Plan\n\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\nThe drawer is shown with all the information expected\n\n### What might happen if this goes wrong?\n\nIf it doesn't work or breaks the compliance dashboard, we should immediately turn off the feature flag and investigate.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [x] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Cross-post chatops slack command to `#support_gitlab-com`.\n  ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)) and in your team channel\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set compliance_dashboard_drawer false\n```","state":"closed","created_at":"2021-06-28T11:03:02.945Z","updated_at":"2021-12-06T20:39:13.300Z","closed_at":"2021-07-15T05:48:53.683Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","devops::manage","feature flag","frontend","group::compliance","release post item::in review","section::dev","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334682","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":35,"completed_count":30},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"30 of 35 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334682","notes":"https://gitlab.com/api/v4/projects/278964/issues/334682/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334682/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334682","relative":"#334682","full":"gitlab-org/gitlab#334682"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5237,"epic":{"id":184672,"iid":5237,"title":"Convert compliance dashboard into an insightful report","url":"/groups/gitlab-org/-/epics/5237","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89401619,"iid":334680,"project_id":278964,"title":"[VSA] Display MRs instead of CI Builds for Test and Staging stages","description":"## Background\n\nIn group-level VSA, the default `test` and `staging` stages are unique because they display CI Build records, whereas other stages show either Issue or MR records.  I'm fairly sure displaying CI Build records is no longer correct (legacy).\n\n## Problems to solve\n\n- **Performance.** In group-level VSA, the default `test` and `staging` stages are timing out when listing the CI Build records. (Previously, it was hard to notice due to a frontend bug: https://gitlab.com/gitlab-org/gitlab/-/issues/334487.) This is probably because the `test` and `staging` queries join on the `ci_builds` table and show build records on the UI. This makes the database scan way too many rows, which leads to statement timeout.\n- **Confusing UI.** A single MR will produce multiple CI Build records if there are multiple jobs in the pipeline (causing excessive granularity in the UI) or the pipeline is run more than once (causing duplication in the UI).\n\n## Proposal\n\nTo improve the UI, show MR records (instead of CI Build records) for the `test` and `staging` stages.  To improve the performance, eliminate the `JOIN ON ci_builds` because it will no longer be necessary.\n\nNotes:\n\n1. No change needed for the summary calculations (like median). The pipeline times are not used for those calculations. We use the data we have in the `merge_request_metrics` table: `latest_build_started_at`, `latest_build_finished_at` and `first_deployed_to_production_at` columns.\n1. Removing the joins would also help the ongoing CI sharding effort.\n\n## Example of CI Builds\n\n![image](/uploads/a9b4b54c92014e1790d2b7bfcf564c00/image.png)","state":"closed","created_at":"2021-06-28T10:49:23.952Z","updated_at":"2021-08-18T17:23:30.352Z","closed_at":"2021-08-18T16:52:53.510Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Category:Value Stream Management","backend","bug::performance","devops::manage","feature::enhancement","group::optimize","section::dev","type::feature","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334680","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334680","notes":"https://gitlab.com/api/v4/projects/278964/issues/334680/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334680/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334680","relative":"#334680","full":"gitlab-org/gitlab#334680"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89399175,"iid":334676,"project_id":278964,"title":"[Docs] SaaS - Document User Caps and Pending Members view","description":"## Details\n\nWe need to write docs for SaaS User Caps, and the new Pending Members view implemented in https://gitlab.com/gitlab-org/gitlab/-/issues/333064\n\n\nWe can get an idea from the docs written for Self-Managed:\n* [User Caps](https://docs.gitlab.com/ee/user/admin_area/settings/sign_up_restrictions.html#user-cap)\n* [Users Pending Approval](https://docs.gitlab.com/ee/user/admin_area/moderate_users.html)","state":"closed","created_at":"2021-06-28T10:05:00.149Z","updated_at":"2022-01-27T14:51:36.669Z","closed_at":"2022-01-18T10:20:07.607Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["Technical Writing","[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","section::fulfillment","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"}],"author":{"id":4737352,"username":"astoicescu","name":"Andrei Stoicescu","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4737352/avatar.png","web_url":"https://gitlab.com/astoicescu"},"type":"ISSUE","assignee":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334676","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334676","notes":"https://gitlab.com/api/v4/projects/278964/issues/334676/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334676/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334676","relative":"#334676","full":"gitlab-org/gitlab#334676"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89393214,"iid":334670,"project_id":278964,"title":"Keep CI PoC green and rebased on `master`","description":"## Problem\n\nAs part of the effort discover all needed changes required by the CI move,\nwe should aim to keep CI PoC green and always rebased on master the more changes we move.","state":"closed","created_at":"2021-06-28T08:37:52.518Z","updated_at":"2022-05-31T12:22:32.151Z","closed_at":"2022-03-01T03:15:35.111Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","devops::data_stores","group::pods","missed:14.3","missed:14.4","missed:14.5","missed:14.6","missed:14.7","missed:14.8","section::enablement","workflow::in dev"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"type":"ISSUE","assignee":{"id":12452,"username":"ayufan","name":"Kamil TrzciÅ„ski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"user_notes_count":31,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334670","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334670","notes":"https://gitlab.com/api/v4/projects/278964/issues/334670/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334670/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334670","relative":"#334670","full":"gitlab-org/gitlab#334670"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6167,"epic":{"id":287358,"iid":6167,"title":"Decomposition: CI Tables","url":"/groups/gitlab-org/-/epics/6167","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89379815,"iid":334660,"project_id":278964,"title":"[Eng] Experiment: Add guided walkthrough to the pipeline editor","description":"Placeholder development issue for https://gitlab.com/gitlab-org/gitlab/-/issues/334657 based on design https://gitlab.com/gitlab-org/gitlab/-/issues/334659\n\n# Experiment\n\n# Experiment Summary\n\n# Design\n\n- Control: \n- Variant: \n\n# Rollout strategy\n\n# Inclusions and exclusions\n\n# Tracking Details\n\nActions we want to track: \n\n# Implementation checklist\n\n- [x] Update Suggest Pipeline banner CTA to redirect users to Pipeline Editor instead of Single File Editor (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73514)\n- [x] Update pipeline editor sidebar default expanded state to `false` (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73050)\n- [x] Show a popover guiding the user to commit. Clicking on the CTA button in the popover should auto-scroll to the commit form at the bottom of the screen (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73050)\n- [x] Implement tracking (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74063)","state":"closed","created_at":"2021-06-28T03:09:00.697Z","updated_at":"2021-11-26T13:42:31.718Z","closed_at":"2021-11-18T08:07:20.416Z","closed_by":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"labels":["DEPRECATED Growth-Deliverable","Deliverable","devops::growth","group::activation","growth experiment","missed-deliverable","missed:14.4","section::growth","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"}],"author":{"id":4234774,"username":"pcalder","name":"Phil Calder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4234774/avatar.png","web_url":"https://gitlab.com/pcalder"},"type":"ISSUE","assignee":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334660","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334660","notes":"https://gitlab.com/api/v4/projects/278964/issues/334660/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334660/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334660","relative":"#334660","full":"gitlab-org/gitlab#334660"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6251,"epic":{"id":296546,"iid":6251,"title":"[Eng] Experiment: Add guided walkthrough to the pipeline editor","url":"/groups/gitlab-org/-/epics/6251","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89318058,"iid":334627,"project_id":278964,"title":"Project import is too slow for exports from large groups","description":"### Summary\n\nAs part of our restoration efforts for a customer in https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/13645, we observed project imports taking upwards of 3hrs, even for very small (e.g. \u003c500KB) gitlab project exports.\n\nIt's our belief that user mapping and authorization refresh activity was consuming the bulk of the import time, since the projects contained zero (or single digit numbers) issues, and very little metadata. \n\nThe project imports we were performing in that context had no git bundles (i.e. no repo data) included either).\n\n### Steps to reproduce\n\n1. Export a project from a gitlab.com namespace with thousands of users and thousands of subgroups.\n1. Attempt a gitlab project import.\n\n### Example Project\n\nMany available in https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/13645\n\n### What is the current *bug* behavior?\n\nProject import takes hours.\n\n### What is the expected *correct* behavior?\n\nProject import should take only seconds.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n## Proposed solution\n\n- Do not run `refresh_member_authorized_projects` callback if `importing?` (for both Group and Project Import)\n- Enqueue `ProjectRecalculateWorker` at the end of project import in the `Project#after_import`\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-06-25T19:09:10.635Z","updated_at":"2021-08-24T10:27:48.530Z","closed_at":"2021-08-24T10:27:40.580Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:Project Export/Import","Next Up","Unplanned","approaching-SLO","backend","customer","devops::manage","group::import","milestone::p1","missed-SLO","priority::1","section::dev","severity::1","type::bug","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":4587943,"username":"jrreid","name":"Jamie Reid","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4587943/avatar.png","web_url":"https://gitlab.com/jrreid"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334627","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334627","notes":"https://gitlab.com/api/v4/projects/278964/issues/334627/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334627/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334627","relative":"#334627","full":"gitlab-org/gitlab#334627"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3054,"epic":{"id":39522,"iid":3054,"title":"ðŸž Project Export/Import bugs","url":"/groups/gitlab-org/-/epics/3054","group_id":9970},"iteration":null,"health_status":null},{"id":89280590,"iid":334597,"project_id":278964,"title":"Audit DAST components to conform with GlButton","description":"This issue is to list down and update components that use deprecated button variants (success, info, warning) in DAST \u0026 On-demand Scans.\n\n### Why\n\nAs per the design guidelines, positive or negative non-destructive action that is confirmation of what the user desires to take place should be using `Confirm` variant for GlButton component\n\nhttps://design.gitlab.com/components/button/#deprecated-variants\n\n### Scope\n- [x] On-demand Scans\n  - [x] `Save and run scan` button\n  - [x] `Save scan` button\n- [x] DAST Profile Selectors\n  -  [x] `New  scanner profile` button\n  -  [x] `New site profile` button\n- [x] Manage Profiles section\n  - [x] `New` dropdown button\n  - [x] `Validation site` button\n- [x] Site validation modal\n- [x] New Profiles section\n  - [x] `Save` button in site profiles\n  - [x] `Save` button in scanner profiles\n- [x] Security Configuration\n  - [x] `Enable` button\n  - [x] `Configure` button\n  - [x] `Enabled via MR` button\n### Implementation Plan\n\n- [x] Replace `success` variant with `confirm`\n- [x] Replace `info` variant with `confirm`\n- [x] Replace `warning` variant with `confirm`\n- [x] Fix broken specs","state":"closed","created_at":"2021-06-25T04:45:03.372Z","updated_at":"2021-06-30T12:39:19.003Z","closed_at":"2021-06-30T12:37:05.849Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Category:DAST","Stretch","UX","devops::secure","frontend","group::dynamic analysis","section::sec","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334597","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":21,"completed_count":21},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"21 of 21 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334597","notes":"https://gitlab.com/api/v4/projects/278964/issues/334597/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334597/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334597","relative":"#334597","full":"gitlab-org/gitlab#334597"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89271341,"iid":334586,"project_id":278964,"title":"Geo SSF: Repository sync should update HEAD ref","description":"## Problem\n\nSome snippet repositories can fail verification even after successful resyncs because `HEAD` ref on the secondary isn't exactly the same as it is on the primary (it may not even exist at all on the secondary).\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/333462 for gory details.\n\n## Proposal\n\nWe need to do similar to https://gitlab.com/gitlab-org/gitlab/-/blob/8c924b4743031b4bb656df344751f9e0b74157db/ee/app/services/geo/repository_sync_service.rb#L57 in `FrameworkRepositorySyncService`. We should do this generically for `Repository` since this will be needed for many Repository types. And the only `Project`-specific part is when `change_head` enqueues `ProjectCacheWorker`.\n\nHere is a WIP commit aiming at doing the above https://gitlab.com/gitlab-org/gitlab/-/commit/ccaacdb6e496792e3582cf8338806456271744ce","state":"closed","created_at":"2021-06-24T22:51:01.577Z","updated_at":"2021-08-16T23:06:40.955Z","closed_at":"2021-07-19T18:21:30.656Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Category:Disaster Recovery","Category:Geo Replication","Enterprise Edition","GitLab Premium","devops::systems","group::geo","priority::2","section::enablement","severity::2","type::bug","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334586","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334586","notes":"https://gitlab.com/api/v4/projects/278964/issues/334586/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334586/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334586","relative":"#334586","full":"gitlab-org/gitlab#334586"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2810,"epic":{"id":27925,"iid":2810,"title":"Geo: Self Service Framework - Snippet verification","url":"/groups/gitlab-org/-/epics/2810","group_id":9970,"human_readable_end_date":"May 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89270312,"iid":334583,"project_id":278964,"title":"Prevent accidental deletion of container image repositories","description":"### Problem to solve\n\nWhen deleting a container registry image, users can inadvertently delete the wrong thing. This can lead to a situation where images are deleted by people working in good faith which can then be time consuming/difficult to recover. In some cases, it's not abundantly clear which project a user is looking at leading to mistaken deletions.\n\nFrom the images below, only the (small) breadcrumb shows which project the user is acting on.\n\n![image](/uploads/7db73381f25fa76b6e3e5dc28a5e7264/image.png)\n![image](/uploads/e176a544d2919b2538e487ca9db284a3/image.png)\n\n### Proposal\n\n### Delete image repository (boring solution)\n\n* Move the `Delete image repository` button into a `more actions` button dropdown at the top of the page.\n  * ~\"component:button\" ellipsis: https://design.gitlab.com/components/button/#ellipsis\n  * Clicking the `more action` button displays the *Delete image repository* option.\n    * Clicking *Delete image repository* triggers the existing flow for deleting the repository.\n  * Clicking anywhere outside the dropdown closes it.\n\n\n### Considerations\n\nIt can be time-consuming for users as well as support teams of gitlab.com as well as self-managed customers. There have been a couple of recent incidents of this occurring involving large customers as well as experienced users of GitLab.","state":"closed","created_at":"2021-06-24T22:23:08.471Z","updated_at":"2022-05-09T21:44:22.374Z","closed_at":"2021-08-04T08:28:50.522Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"NicolÃ² Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Container Registry","Deliverable","Package:P1","UX","corrective action","devops::package","frontend","group::package registry","reliability","section::ops","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"NicolÃ² Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":3913904,"username":"dcroft","name":"Daniel Croft","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2af6159fa5cd9659356041c6a9b9ce62?s=80\u0026d=identicon","web_url":"https://gitlab.com/dcroft"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"NicolÃ² Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":19,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334583","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334583","notes":"https://gitlab.com/api/v4/projects/278964/issues/334583/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334583/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334583","relative":"#334583","full":"gitlab-org/gitlab#334583"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89269698,"iid":334580,"project_id":278964,"title":"API Fuzzing Override Interval used as minutes instead of seconds","description":"### Summary\n\nThe value sets to `FUZZAPI_OVERRIDES_INTERVAL` is treated as minutes instead of seconds.\n\nThis variable is defined in the documentation as \n\n\u003e How often to run overrides command in seconds. Defaults to 0 (once).\n\n### Steps to reproduce\n\nCreate an API Fuzzing Job with:\n\n```yml\ninclude:\n  - template: API-Fuzzing.gitlab-ci.yml\n    \nvariables:\n  FUZZAPI_PROFILE: Quick-10\n  FUZZAPI_OPENAPI: ${URL}/swagger/v1/swagger.json\n  FUZZAPI_TARGET_URL: ${URL}\n  FUZZAPI_OVERRIDES_FILE: /output/dast-api-overrides.json\n  FUZZAPI_OVERRIDES_CMD: .gitlab/infra/get_access_token.py\n  FUZZAPI_OVERRIDES_INTERVAL: 164\n```\n\n### What is the current *bug* behavior?\n\nIt shows the interval as 9840 seconds `FUZZAPI_OVERRIDES_INTERAL * 60`\n\n### What is the expected *correct* behavior?\n\nIt should respect the `FUZZAPI_OVERRIDES_INTERAL` as seconds\n\n### Relevant logs and/or screenshots\n```\nUsing docker image sha256:19191be1cde4a998c0a217c7fc8b6a79a71dcad5cb9c869bf29c2ec2933213e8 for registry.gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing:1 with digest registry.gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing@sha256:79b5a5f50df907542798bcf3c6e7b6ea514e7a3023daf827aba7f5252a833172 ...\n$ /peach/analyzer-fuzz-api\nanalyzer-fuzz-api\n2021-06-24 21:36:05 [INF] worker-entry: Gitlab API Security Worker Entry\n2021-06-24 21:36:05 [INF] worker-entry: --------------------------------\n2021-06-24 21:36:05 [INF] worker-entry: \n2021-06-24 21:36:05 [INF] worker-entry: version: 1.6.160\n2021-06-24 21:36:05 [INF] worker-entry: api: http://127.0.0.1:5000\n2021-06-24 21:36:05 [INF] worker-entry: config: /peach/configs/gitlab-api-fuzzing-config.yml\n2021-06-24 21:36:05 [INF] worker-entry: openapi: https://example.com/swagger/v1/swagger.json\n2021-06-24 21:36:05 [INF] worker-entry: overrides_env: not shown\n2021-06-24 21:36:05 [INF] worker-entry: overrides_file: /output/dast-api-overrides.json\n2021-06-24 21:36:05 [INF] worker-entry: overrides_cmd: .gitlab/infra/get_access_token.py\n2021-06-24 21:36:05 [INF] worker-entry: overrides_interval: 164\n2021-06-24 21:36:05 [INF] worker-entry: profile: Quick-10\n2021-06-24 21:36:05 [INF] worker-entry: project: project-slug\n2021-06-24 21:36:05 [INF] worker-entry: security report: gl-api-fuzzing-report.json\n2021-06-24 21:36:05 [INF] worker-entry: security report asset path: gl-assets\n2021-06-24 21:36:05 [INF] worker-entry: ci_project_url: https://gitlab.example.com/project-slug\n2021-06-24 21:36:05 [INF] worker-entry: ci_job_id: 3189\n2021-06-24 21:36:05 [INF] worker-entry: service_start_timeout: 300\n2021-06-24 21:36:05 [INF] worker-entry: target_url: https://example.com\n2021-06-24 21:36:05 [INF] worker-entry: timeout: 30\n2021-06-24 21:36:05 [INF] worker-entry: verbose: False\n2021-06-24 21:36:05 [INF] worker-entry: \n2021-06-24 21:36:05 [INF] worker-entry: Waiting for API Security (http://127.0.0.1:5000) to become available...\n2021-06-24 21:36:05 [INF] worker-entry: Backing off 0.3 seconds afters 1 tries\n2021-06-24 21:36:06 [INF] worker-entry: Backing off 1.0 seconds afters 2 tries\n2021-06-24 21:36:07 [INF] worker-entry: Backing off 3.2 seconds afters 3 tries\n2021-06-24 21:36:10 [INF] worker-entry: Waiting for scan target (https://example.com) to become available...\n2021-06-24 21:36:10 [INF] API Security: Starting API Security scanner session (try 1 of 120)\n2021-06-24 21:36:26 [INF] API Security: API Security Version: 1.6.160\n2021-06-24 21:36:26 [INF] API Security: Successfully started API Security scanner session\n2021-06-24 21:36:26 [INF] API Security: Launching test automation\n2021-06-24 21:36:26 [DBG] API Runner: Detected we are running from CI\n2021-06-24 21:36:26 [INF] API Runner: Loading operations from: https://example.com/swagger/v1/swagger.json\n2021-06-24 21:36:28 [INF] API Runner: Setting up override interval to 9840 seconds\n```\n\n### Output of checks\n\nThis bug happens on up-to-date self-managed GitLab instance\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\nSystem information\nSystem:\t\tUbuntu 18.04\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.7.2p137\nGem Version:\t3.1.4\nBundler Version:2.1.4\nRake Version:\t13.0.3\nRedis Version:\t6.0.14\nGit Version:\t2.32.0\nSidekiq Version:5.2.9\nGo Version:\tunknown\n\nGitLab information\nVersion:\t14.0.1-ee\nRevision:\t38151bb98b6\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t12.6\nURL:\t\thttps://example.com\nHTTP Clone URL:\thttps://example.com/some-group/some-project.git\nSSH Clone URL:\tgit@example.com:some-group/some-project.git\nElasticsearch:\tno\nGeo:\t\tno\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: \n\nGitLab Shell\nVersion:\t13.19.0\nRepository storage paths:\n- default: \t/mnt/gitlab_data/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\nGit:\t\t/opt/gitlab/embedded/bin/git\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n\n### Possible fixes\n\nDon't multiply this value by 60\n\n### Tasks\n\n1. [ ] Add/update test\n1. [x] Change code to interpret as seconds\n1. [ ] Publish a new image","state":"closed","created_at":"2021-06-24T21:56:06.167Z","updated_at":"2021-07-09T19:29:42.432Z","closed_at":"2021-07-09T19:29:42.415Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:Fuzz Testing","devops::secure","group::dynamic analysis","priority::2","section::sec","severity::2","type::bug","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"}],"author":{"id":1564972,"username":"josetruyol","name":"Jose Truyol","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f670cecf8b70f2a8e4164ebddfa776e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/josetruyol"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334580","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334580","notes":"https://gitlab.com/api/v4/projects/278964/issues/334580/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334580/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334580","relative":"#334580","full":"gitlab-org/gitlab#334580"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89269070,"iid":334578,"project_id":278964,"title":"API Fuzzing override cmd output","description":"### Proposal \n\nCurrently, the job `apifuzzer_fuzz` from the `API-Fuzzing.gitlab-ci.yml` template has no clear way to enable/disable stdout and/or stderr from the script provided at `FUZZAPI_OVERRIDES_CMD` env variable. We have no way to know if it fails or succeeds\n\nIt will be great if this job has something like `FUZZAPI_OVERRIDES_CMD_VERBOSE` to enable or disable our command output to the job log.\n\nThe job output looks like this:\n\n```\n2021-06-24 17:56:46 [INF] API Runner: Setting up override interval to 18000 seconds\n2021-06-24 17:56:46 [INF] API Runner: Process [54] Command: 'bash -c .gitlab/infra/get_access_token.py'\n2021-06-24 17:56:49 [INF] API Runner: Override refreshing from file path or URI: /output/dast-api-overrides.json\n2021-06-24 17:56:49 [ERR] API Runner: Override Set up has failed. Error : 'The file path: '/output/dast-api-overrides.json' does not exist.'\nPeach.Web.Runner.Services.FileLoaderException: The file path: '/output/dast-api-overrides.json' does not exist.\n   at Peach.Web.Runner.Services.FileLoader.LoadFilePath(String inputUrlOrFilePath) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/FileLoader.cs:line 100\n   at Peach.Web.Runner.Services.FileLoader.Load(String inputUrlOrFilePath) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/FileLoader.cs:line 33\n   at Peach.Web.Runner.Services.Overrides.LoadFromFile(String inputUrlOrFilePath) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/Overrides.cs:line 36\n   at Peach.Web.Runner.Services.Overrides.ReloadOverrides() in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/Overrides.cs:line 134\n   at Peach.Web.Runner.Services.Overrides.Setup(IApplicationOptions applicationOptions) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/Overrides.cs:line 123\n   at Peach.Web.Runner.Services.OperationRunner.Run(IReader reader, IApplicationOptions applicationOptions, ICommandOptions commandOptions) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/OperationRunner.cs:line 60\n2021-06-24 17:56:50 [WAR] API Security: Automation process exitted with out calling suite teardown\n2021-06-24 17:56:50 [INF] API Security: Generating security report as 'gl-api-fuzzing-report.json'.\n2021-06-24 17:56:50 [INF] API Security: \n2021-06-24 17:56:50 [INF] API Security: --[ Tested Operations ]-------------------------\n2021-06-24 17:56:50 [INF] API Security: No operations were tested. Please check your configuration.\n2021-06-24 17:56:50 [INF] API Security: ------------------------------------------------\n2021-06-24 17:56:50 [INF] API Security: --[ Excluded Operations ]-----------------------\n2021-06-24 17:56:50 [INF] API Security: No operations were excluded\n2021-06-24 17:56:50 [INF] API Security: ------------------------------------------------\n2021-06-24 17:56:50 [INF] API Security: \n2021-06-24 17:56:50 [INF] API Security: Testing completed successfully, no security issues detected.\n```\n\nThe python script print to console any error that prevents it to generate the file with the token, or if everything was okay.\n\n### Implementation\n\n1. [x] Add new variable `FUZZAPI_OVERRIDES_CMD_VERBOSE` that defaults to off/false. When enabled, show the overrides script's console output.\n1. [x] When the overrides script exits with non-zero, display the command output and log it to the debug log.\n1. [x] Add unit/integration tests\n1. [x] Document the new variable\n   1. [x] Document in API Fuzzing docs\n   1. [x] Document in DAST API docs\n1. [x] Expand the overrides documentation section with information about non-zero exit code, this variable, and also how to generate a log file that is collected by the job.\n   1. Simple python program using the python logging. Call out how to construct the correct filename `$CI_PROJECT_DIR/gl-user-override.log`.  In python you will need to get the CI_PROJECT_DIR through the environment interface.\n1. [ ] Publish new image","state":"closed","created_at":"2021-06-24T21:30:38.784Z","updated_at":"2022-02-14T22:29:00.600Z","closed_at":"2022-02-14T22:29:00.587Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","feature::addition","group::dynamic analysis","section::sec","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":1564972,"username":"josetruyol","name":"Jose Truyol","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f670cecf8b70f2a8e4164ebddfa776e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/josetruyol"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334578","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":7},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334578","notes":"https://gitlab.com/api/v4/projects/278964/issues/334578/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334578/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334578","relative":"#334578","full":"gitlab-org/gitlab#334578"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89268249,"iid":334577,"project_id":278964,"title":"SAML Group Sync should include Minimal Access at top-level","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\u003c!-- This issue template can be used a great starting point for feature requests. The last section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab. --\u003e\n\n### Release notes \n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve \n\nWhen using [SAML Group Sync, we warn users](https://docs.gitlab.com/ee/user/group/saml_sso/#group-sync) that users not in a group will be removed. The current solution at the top-level is to have everyone in at least 1 group. However, Minimal Access is not an option for Group Sync roles.\n\nThis can cause odd access issues, such as in https://gitlab.zendesk.com/agent/tickets/219713 , where it looks like what's happening is that when a user signs in, they're removed from the top-level because they're not in a SAML Group, but readded through the SAML Default Role. The problem is that the user gets a 404 when they first sign in due to the initial removal.\n\n**Note**: The behavior in which the user is readded to the Group via the SAML Default Role is not consistent on all the cases.\n\n### Proposal \n\nAdd Minimal Access role to the top-level SAML Group Sync list of possible roles.\n\n\n\n\u003c!--- Use the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n\nConsider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n\nOther sections to consider adding: \n\n### Intended users\n\nWho will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### User experience goal\n\nUser should be able to configure Minimal Access role for users at top-level when using Group Sync\n\n\n### Further details\n\nInclude use cases, benefits, goals, or any other details that will help us understand the problem better. \n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?\nConsider adding checkboxes and expectations of users with certain levels of membership https://docs.gitlab.com/ee/user/permissions.html\n* [ ] Add expected impact to members with no access (0)\n* [ ] Add expected impact to Guest (10) members\n* [ ] Add expected impact to Reporter (20) members\n* [ ] Add expected impact to Developer (30) members \n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members \n\n### Documentation\n\n See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/workflow.html\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html \n\n### Availability \u0026 Testing\n\nThis section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning \n\n### What does success look like, and how can we measure that?\n\nHave \"Minimal Access\" role in top-level SAML Group Sync dropdown.\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n**What risks does this change pose to our availability?**\n\nThis is a low risk feature for GitLab.com and self-managed availability.\n\n**What additional test coverage or changes to tests will be needed?** \n\n* When minimal access is selected as an access level, all users not part of a Group in the IDP are added to the group with minimal access and that they are able to sign-in correctly. \n* When a minimal access group link is not available/set, users not part of a Group in the IDP are removed from the top level group. In this case ensure, that they do not see a 404 when they try to sign-in.\n\n**Will it require cross-browser testing?**\n\nN/A","state":"closed","created_at":"2021-06-24T20:55:12.465Z","updated_at":"2022-10-26T15:00:31.792Z","closed_at":"2021-11-18T19:54:48.561Z","closed_by":{"id":9425173,"username":"hsutor","name":"Hannah Sutor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9425173/avatar.png","web_url":"https://gitlab.com/hsutor"},"labels":["FY22::Q3","GitLab Premium","[deprecated] Accepting merge requests","candidate::14.5","customer","devops::manage","direction","gitlab.com","group::authentication and authorization","priority::2","quad-planning::complete-action","release post item::in review","saml","section::dev","type::feature","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[],"author":{"id":2454149,"username":"cynthia","name":"Cynthia \"Arty\" Ng","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2454149/avatar.png","web_url":"https://gitlab.com/cynthia"},"type":"ISSUE","assignee":null,"user_notes_count":18,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334577","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334577","notes":"https://gitlab.com/api/v4/projects/278964/issues/334577/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334577/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334577","relative":"#334577","full":"gitlab-org/gitlab#334577"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6385,"epic":{"id":310982,"iid":6385,"title":"Group SAML Sync for GitLab.com (non MVC)","url":"/groups/gitlab-org/-/epics/6385","group_id":9970},"iteration":null,"health_status":null},{"id":89268222,"iid":334576,"project_id":278964,"title":"Choose language type for code blocks in the Content Editor","description":"## Problem to solve\n\nThe Content Editor renders code blocks using syntax highlighting but there is no control over what syntax to use. Syntax highlighting can be a critical aspect of reading and parsing code blocks and incorrect highlighting can make it hard to read code examples.\n\n## Proposal\n\nLet the author select the language for a code block. I should be able to click a dropdown and select the language from a list.\n\nLanguages to select from are derived by [supported languages for highlight.js](https://highlightjs.org/static/demo/):\n\n- HTML\n- Bash\n- C++\n- C#\n- CSS\n- Markdown\n- Diff\n- Ruby\n- Go\n- TOML\n- Java\n- JavaScript\n- JSON\n- Kotlin\n- Less\n- Lua\n- Makefile\n- Perl\n- Objective-C\n- PHP\n- Python\n- R\n- Rust\n- SCSS\n- Shell\n- SQL\n- Swift\n- YAML\n- TypeScript\n- VB .NET\n\n## User Experience Details\n\nWhen editing a file in the Content Editor, I should be able to:\n\n- Create a new code block with a default (plaintext) styling\n- Choose a syntax highlighting language from supported languages in `highlight.js`\n- Override the syntax highlighting language on any existing code block in the document\n- Preview the syntax highlighting immediately (the code block should be styled without having to save the document)\n\n### Future iterations\n\nIn later iterations, we could\n\n1. Attempt to automatically detect the language when code blocks are being written and set it to our best guess\n1. Bring consistency to code styling across the repository blob viewer, Web IDE, and code blocks in the Content Editor\n\n## Design\n\nFigma: https://www.figma.com/file/z5pzAvKoabaruwKH63lMm6/Code-block---Language-highlighting-%23334576?node-id=8%3A11337\n\n| Viewing | Block focused and editable |\n| ------ | ------ |\n| ![image](/uploads/b0f8b2b2e4681b5fcf73ce34570ef396/image.png) | ![image](/uploads/191bf802b5461196f605903dbd5378e4/image.png) |\n\n| Scrolling |\n| ------ |\n| ![scrolling-codeblock](/uploads/87a6676b1b0e641f4badd5f2634d945f/scrolling-codeblock.mp4) |\n\n### Scrolling behaviour\n\nCurrently codeblocks do not have a limit on their height. The height is based on the content of the codeblock. When a codeblock is taller than the viewable area during editing, then the vertical scroll is associated to the editor not the codeblock.\n\nIn the future we could consider vertical scrolling on a codeblock for blocks larger than X lines. For example with snippets while editing after 28 lines there is vertical scrolling but when viewing the snippet it shows all of the lines.\n\n## Questions\n\n1. What should be the default? \n1. How do we maintain the types of languages and keep that in sync with what is supported elsewhere, like in the Web IDE?\n1. Is there any way we can auto-detect the language?\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n## Implementation guide\n\n- Read the [Content Editor development guidelines](https://docs.gitlab.com/ee/development/fe_guide/content_editor.html)\n- Read the guide for implementing [custom extensions](https://tiptap.dev/guide/custom-extensions) in Tiptap\n- Read the guide for implementing [node views](https://tiptap.dev/guide/node-views/vue) in Tiptap\n- Create a node view wrapper for the `code_block_highlight` extension. \n- We recommend using a dropdown component with inline filter search to display the list of available languages. See this GitLab UI example as a reference https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-dropdown--with-header-and-footer\n- The MR https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69131 should be helpful to provide a good head start.","state":"closed","created_at":"2021-06-24T20:53:53.000Z","updated_at":"2022-12-15T21:55:56.994Z","closed_at":"2022-04-20T12:25:07.572Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","Deliverable","GitLab Free","UX","devops::create","direction","frontend","good for new contributors","group::editor","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":53,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334576","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334576","notes":"https://gitlab.com/api/v4/projects/278964/issues/334576/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334576/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334576","relative":"#334576","full":"gitlab-org/gitlab#334576"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6246,"epic":{"id":295290,"iid":6246,"title":"Make code blocks more useful in the Content Editor","url":"/groups/gitlab-org/-/epics/6246","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89266327,"iid":334569,"project_id":278964,"title":"Follow-up pass for renaming Usage Ping/Data to Service Ping/Data","description":"After closing the blocking issues, we need to do another pass to remove any leftover variables, references, and symbols that might reference Usage Ping/Data. For example:\n\n- Documentation links like: `help_page_path('development/usage_ping/index.md')`\n- Ruby variables for frontend [(example)](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/controllers/application_controller.rb#L521)\n- Some filenames. Easy to rename but it might produce conflicts as we're actively working over these files.","state":"closed","created_at":"2021-06-24T19:58:05.001Z","updated_at":"2021-08-07T00:38:02.406Z","closed_at":"2021-08-07T00:21:17.836Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel GarcÃ­a","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["devops::growth","frontend","group::product intelligence","maintenance::refactor","section::growth","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel GarcÃ­a","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel GarcÃ­a","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel GarcÃ­a","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334569","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334569","notes":"https://gitlab.com/api/v4/projects/278964/issues/334569/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334569/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334569","relative":"#334569","full":"gitlab-org/gitlab#334569"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6107,"epic":{"id":281993,"iid":6107,"title":"Rename UsagePing to ServicePing (Frontend)","url":"/groups/gitlab-org/-/epics/6107","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":89231170,"iid":334503,"project_id":278964,"title":"Follow-up from \"Enable EE registration features for UsagePing\"","description":"The following discussion from !64003 should be addressed:\n\n- [ ] @alberts-gitlab started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64003#note_610262124):  (+3 comments)\n\n    \u003e @rkadam3  What do you think of including `License.features_with_usage_ping.include?(:feature)` in the implementation of `License.feature_available?(:feature)`, so that if new features are added to `FEATURES_WITH_USAGE_PING`, existing feature available checks will not need to be changed?\n    \u003e \n    \u003e Then from the test perspective, the existing `stub_licensed_features` can remain unchanged, and we don't need to test explicitly for enabling usage ping. It would be tested from the behaviour of `Licenase.feature_available?` instead.","state":"closed","created_at":"2021-06-24T10:33:54.866Z","updated_at":"2021-12-07T09:21:38.118Z","closed_at":"2021-12-07T09:21:38.101Z","closed_by":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"labels":["[deprecated] Accepting merge requests","auto updated","backend","devops::growth","group::product intelligence","maintenance::refactor","section::growth","workflow::in dev"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334503","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334503","notes":"https://gitlab.com/api/v4/projects/278964/issues/334503/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334503/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334503","relative":"#334503","full":"gitlab-org/gitlab#334503"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89229768,"iid":334500,"project_id":278964,"title":"Mount REST endpoints as `integrations` endpoints","description":"We can duplicate the integrations REST functionality under `integrations` endpoints.","state":"closed","created_at":"2021-06-24T10:06:38.659Z","updated_at":"2022-11-22T19:39:12.521Z","closed_at":"2021-10-01T11:22:44.261Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["Category:API","Category:Integrations","Community contribution","Technical Writing","api","auto updated","backend","devops::manage","documentation","group::integrations","section::dev","tw-weight::8","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},{"id":7333052,"username":"rukkykofi","name":"Oghenerukevwe Kofi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dceb5fa86ba02449837868fc9dc6808e?s=80\u0026d=identicon","web_url":"https://gitlab.com/rukkykofi"}],"author":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334500","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334500","notes":"https://gitlab.com/api/v4/projects/278964/issues/334500/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334500/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334500","relative":"#334500","full":"gitlab-org/gitlab#334500"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6186,"epic":{"id":288969,"iid":6186,"title":"API: Rename services to integrations","url":"/groups/gitlab-org/-/epics/6186","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":89229512,"iid":334499,"project_id":278964,"title":"Cleanup of any temporary bridges","description":"As part of \u00262504 we have added a bunch of temporary methods, constants and instance variables to bridge between old and new names.\n\nThese should be removed as a chore once all other issues are closed.","state":"closed","created_at":"2021-06-24T10:01:53.674Z","updated_at":"2022-11-22T19:39:13.297Z","closed_at":"2021-07-19T08:33:15.255Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["[deprecated] Accepting merge requests","auto updated","backend","devops::manage","group::ecosystem [DEPRECATED]","maintenance::refactor","section::dev","type::maintenance"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[],"author":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334499","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334499","notes":"https://gitlab.com/api/v4/projects/278964/issues/334499/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334499/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334499","relative":"#334499","full":"gitlab-org/gitlab#334499"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":89223321,"iid":334493,"project_id":278964,"title":"Scalable Metrics Dictionary: BE - Version Control","description":"## Summary\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/6522 we've created a new scalable metrics dictionary. This issue is to add versioning to the metrics.\n\n## Success Criteria\n\n1. By metric, we should be able to identify when a metric was instrumented\n1. We should be able to filter the Metrics Dictionary by version\n\n\n## Other Considerations\n\nWe currently don't have `milestone` set for all metrics. It is okay to set all metrics to one milestone where it's missing and document this.\n\nPlease be aware of the feature explained in [this epic](https://gitlab.com/groups/gitlab-org/-/epics/6419) which we intend to build in the future. How these metrics are versioned may have an impact to that future work.\n\n## Work plan\n\n- Add milestone to metrics dictionary https://gitlab.com/gitlab-org/growth/product-intelligence/metric-dictionary/-/merge_requests/4\n- Update milestone regex to validate using \"\u003c13.9\", update a small set of metric definition https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69398\n- Update rest of metrics definition https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69400\n- Make the milestone field required, in this step we will find if we miss any milestone https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69638","state":"closed","created_at":"2021-06-24T08:35:36.698Z","updated_at":"2021-09-18T07:02:54.907Z","closed_at":"2021-09-06T15:10:37.705Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["Deliverable","backend","devops::growth","frontend","group::product intelligence","section::growth","type::feature","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":27,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334493","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334493","notes":"https://gitlab.com/api/v4/projects/278964/issues/334493/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334493/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334493","relative":"#334493","full":"gitlab-org/gitlab#334493"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6522,"epic":{"id":321040,"iid":6522,"title":"Scalable Metrics Dictionary","url":"/groups/gitlab-org/-/epics/6522","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89213556,"iid":334485,"project_id":278964,"title":"[VSA][FE] Update item count to 1000+","description":"As proposed in https://gitlab.com/gitlab-org/gitlab/-/issues/300235#note_527936785, backend already limits the count to max 1001 items at the moment to keep the count query efficient.\n\nWe need to change the frontend to\n\n* show the count, if count \u003c 1001\n* show 1000+, if the count = 1001","state":"closed","created_at":"2021-06-24T04:41:49.196Z","updated_at":"2021-06-29T13:06:11.994Z","closed_at":"2021-06-29T13:06:11.979Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Value Stream Management","devops::manage","documentation","frontend","group::optimize","priority::2","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334485","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334485","notes":"https://gitlab.com/api/v4/projects/278964/issues/334485/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334485/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334485","relative":"#334485","full":"gitlab-org/gitlab#334485"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89204861,"iid":334476,"project_id":278964,"title":"Investigate `connects_to shards:` to enable percentage rollout of which DB is used","description":"The following discussions from !64289 should be addressed:\n\n- [ ] @DylanGriffith started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64289#note_607561238):  (+1 comment)\n\n    \u003e Question (non-blocking): Why do we need special handling for an empty array. Wouldn't it just loop and do nothing and therefore we don't need special handling nor a special test?\n\n- [ ] @ayufan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64289#note_609273577):  (+1 comment)\n\n    \u003e Not for now, but for later to allow to percentage rollout which DB is used:\n    \u003e \n    \u003e ```ruby\n    \u003e connects_to shards: {\n    \u003e   main: { writing: main, reading: :main_replica },\n    \u003e   ci: { writing: ci, reading: :ci_replica },\n    \u003e }\n    \u003e ```\n    \u003e \n    \u003e Things to consider:\n    \u003e - will this open a new set of connection pools to `:main/:main_replica`, if it does this is a problem due to amount of connections","state":"closed","created_at":"2021-06-24T01:31:01.482Z","updated_at":"2022-05-31T12:22:32.760Z","closed_at":"2021-11-22T20:30:13.204Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","[deprecated] Accepting merge requests","automation:ml","automation:ml wrong","ci-decomposition-followup","devops::data_stores","group::pods","section::enablement"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334476","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334476","notes":"https://gitlab.com/api/v4/projects/278964/issues/334476/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334476/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334476","relative":"#334476","full":"gitlab-org/gitlab#334476"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6167,"epic":{"id":287358,"iid":6167,"title":"Decomposition: CI Tables","url":"/groups/gitlab-org/-/epics/6167","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89202950,"iid":334474,"project_id":278964,"title":"Follow-up from \"Rename integration helpers [RUN AS-IF-FOSS]\"","description":"The following discussion from !64544 should be addressed:\n\n- [ ] @.luke started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64544#note_609940740): \n\n    \u003e Unrelated to this MR, but I wonder why we don't expose `integration.event_description` here? I'll create a follow-up.","state":"closed","created_at":"2021-06-23T23:25:22.467Z","updated_at":"2022-11-22T19:39:15.750Z","closed_at":"2021-07-07T06:41:40.741Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Integrations","auto updated","backend","devops::manage","group::ecosystem [DEPRECATED]","section::dev","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334474","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334474","notes":"https://gitlab.com/api/v4/projects/278964/issues/334474/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334474/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334474","relative":"#334474","full":"gitlab-org/gitlab#334474"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89202678,"iid":334473,"project_id":278964,"title":"Make post_migrate path configurable on config/database.yml","description":"The following discussion from !64289 should be addressed:\n\n- [ ] @ayufan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64289#note_608167430): \n\n    \u003e This class becomes a problem, as it is not many connections aware, and is globally configured.\n    \u003e \n    \u003e It think we should change this class, to:\n    \u003e \n    \u003e - be `instance` instead of `singleton`\n    \u003e - consume `migration_paths` out of `db_config`\n    \u003e - add to `database.yml` `post_migration_paths:`\n    \u003e - add to `database.yml` `schema_migrations`\n    \u003e \n    \u003e The above `post_migration_paths:` also implies a way how this should likely be configured.\n    \u003e Otherwise, we are going to hardcode `post_migrate` many times.\n    \u003e \n    \u003e The best would be to have an additional mixin in this form for `activerecord/lib/rails/generators/active_record/migration.rb` of `Rails` that would extend `def configured_migrate_path`.\n    \u003e \n    \u003e Then, just ensure that proper paths are configured as part of initialisers.\n    \u003e \n    \u003e This would allow us to remove a lot of these manual overrides, and extensions, and constants, and `add_ci_migrate_path_to_primary_db`.\n\n\u003e I wish if we would be able to clearly describe the migration behavior in a `database.yml`, likely to be done later.\n\n```yaml\nmain:\n  schema_migrations_path: db/schema_migrations\n  migration_paths:\n   - db/migrate\n   - db/ci_migrate\n  post_migration_paths:\n   - db/post_migrate\n   - db/ci_post_migrate\nci:\n  schema_migrations_path: db/ci_schema_migrations\n  migration_paths:\n   - db/ci_migrate\n  post_migration_paths:\n   - db/ci_post_migrate\n```","state":"closed","created_at":"2021-06-23T23:06:52.614Z","updated_at":"2022-05-31T12:22:33.343Z","closed_at":"2022-04-13T06:10:55.385Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Category:Pods","[deprecated] Accepting merge requests","ci-decomposition-followup","devops::data_stores","group::pods","section::enablement"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334473","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334473","notes":"https://gitlab.com/api/v4/projects/278964/issues/334473/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334473/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334473","relative":"#334473","full":"gitlab-org/gitlab#334473"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6718,"epic":{"id":345707,"iid":6718,"title":"Decomposition: Follow-ups after the first iteration","url":"/groups/gitlab-org/-/epics/6718","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89190787,"iid":334428,"project_id":278964,"title":"Add Registration Features information to docs","description":"## Summary\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/6144, we are introducing a new offering where users can obtain a free (paid) feature in exchange for registering with us and enabling Service Ping (fka Usage Ping).\n\nThis issue is to update our docs with information related to this offering.","state":"closed","created_at":"2021-06-23T18:18:56.255Z","updated_at":"2021-07-09T20:54:07.203Z","closed_at":"2021-06-30T02:19:39.894Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["Technical Writing","devops::growth","docs-only","group::product intelligence","product work","section::growth","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334428","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334428","notes":"https://gitlab.com/api/v4/projects/278964/issues/334428/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334428/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334428","relative":"#334428","full":"gitlab-org/gitlab#334428"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6144,"epic":{"id":285878,"iid":6144,"title":"Registration Features - MVC","url":"/groups/gitlab-org/-/epics/6144","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89189292,"iid":334425,"project_id":278964,"title":"Add flag for namespaces \u0026 projects which are created as part of the onboarding/first-mile process","description":"In order for us to determine the long-term effects of the compulsory creation of a Group \u0026 Project as part of the onboarding / first-mile process we should flag those records as having been created during that process.\n\nThis will allow us to better understand the overall impact those compulsory actions have. We can measure interesting things, like:\n\n- the conversion rate of those flagged Groups vs. the overall conversion rate of all Groups\n- the names of those Groups\n  - are they random, like `asdfasdfasdf`?\n  - are they the same as the userâ€™s chosen `username`?\n  - do users tend to change the names within X days of creating them?\n- how many other Groups \u0026 Projects do those users go on to create?\n- how much activity happens in those Groups vs. how much activity the users engage in overall","state":"closed","created_at":"2021-06-23T17:38:37.462Z","updated_at":"2023-01-11T09:01:47.473Z","closed_at":"2021-10-26T18:37:37.554Z","closed_by":{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},"labels":["DEPRECATED Growth-Deliverable","Stretch","devops::growth","feature::addition","group::adoption DEPRECATED","missed:14.3","section::growth","type::feature","workflow::in review"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334425","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334425","notes":"https://gitlab.com/api/v4/projects/278964/issues/334425/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334425/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334425","relative":"#334425","full":"gitlab-org/gitlab#334425"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89189006,"iid":334424,"project_id":278964,"title":"Remove unused e2e projects","description":"Docker-in-docker jobs have been removed from the CI templates for API Fuzzing and DAST API. This leaves us with some legacy docker-in-docker end-to-end test projects that can be safely removed.\n\nThe following projects will be deleted:\n\n1. [ ] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/har-dnd\n1. [ ] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/har-dnd-build-target-image\n1. [ ] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/openapi-v2-dnd\n1. [ ] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/postman-v2.1-vars-dnd\n1. [ ] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/postman-v2.1-dnd\n1. [ ] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/openapi-v3-dnd","state":"closed","created_at":"2021-06-23T17:30:33.147Z","updated_at":"2022-03-16T11:41:35.914Z","closed_at":"2021-06-23T22:51:32.484Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Category:Fuzz Testing","Deliverable","GitLab Ultimate","devops::secure","group::dynamic analysis","type::maintenance","workflow::scheduling"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334424","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334424","notes":"https://gitlab.com/api/v4/projects/278964/issues/334424/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334424/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334424","relative":"#334424","full":"gitlab-org/gitlab#334424"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":89188352,"iid":334418,"project_id":278964,"title":"Update security_orchestration_policy JSON schema with new scan type","description":"## Why are we doing this work\n\nUpdate the security orchestration policy JSON schema to support `secret_detection` as a new action scan type. Since there are no extra information needed for `secret_detection`, `scanner_profile` and `site_profile` are not needed for this type (which are specific to DAST).\n\n## Relevant links\n\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/6146)\n\n## Non-functional requirements\n\n- [-] Documentation:\n- [-] Feature flag:\n- [-] Performance:\n- [-] Testing:\n\n\n## Implementation plan\n\n- ~backend Update `ee/app/validators/json_schemas/security_orchestration_policy.json` with new action scan type `secret_detection`. Update `scanner_profile` and `site_profile` to be required only if the scan type is `dast`.","state":"closed","created_at":"2021-06-23T17:10:08.920Z","updated_at":"2021-08-18T07:06:42.683Z","closed_at":"2021-08-04T04:55:47.087Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Security Policy Management","Deliverable","backend","devops::govern","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334418","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334418","notes":"https://gitlab.com/api/v4/projects/278964/issues/334418/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334418/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334418","relative":"#334418","full":"gitlab-org/gitlab#334418"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6146,"epic":{"id":285933,"iid":6146,"title":"Add Support for Secret Detection Policies","url":"/groups/gitlab-org/-/epics/6146","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89188160,"iid":334417,"project_id":278964,"title":"Create service to run SecurityOrchestrationPolicies jobs as new pipeline","description":"## Why are we doing this work\n\nWe want Secret Detection scans to be run according to schedule cadence as mentioned in the policy. Secret Detection scans should run in `historic` mode for scheduled scan. Historic mode is typically enabled by setting `SECRET_DETECTION_HISTORIC_SCAN` to `true` as a CI variable. ([See documentation](https://docs.gitlab.com/ee/user/application_security/secret_detection/#full-history-secret-scan))\n\n## Relevant links\n\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/6146)\n\n## Non-functional requirements\n\n- [x] Documentation: Update `doc/user/application_security/policies/index.md` to:\n  * Add `secret_detection` as possible values for `scan` field\n  * Reflect normal mode for pipeline job and historic mode for scheduled scan\n  * Mention that only scans with the default ruleset will be supported.\n- [x] Feature flag: This is already behind `security_orchestration_policies_configuration` flag\n- [-] Performance:\n- [x] Testing:\n  * Test if the policy with scan type `secret_detection` creates a scheduled secret detection job as mentioned in the policy with the specified branch and `cadence`.\n  * Test if a single policy with multiple scan actions(`dast` and `secret_detection`) are also working as expected\n\n\n## Implementation plan\n\n* [x] ~backend extend `self.sources` method in `app/models/concerns/enums/ci/pipeline.rb` with new value: `security_orchestration_policy: 14`, add `security_orchestration_policy` to slice arguments in `self.dangling_sources` method.\n* [x] ~backend extend `dangling_build?` method in `lib/gitlab/ci/pipeline/chain/command.rb` with `security_orchestration_policy`.\n* [x] ~backend create new service `Security::SecurityOrchestrationPolicies::CreatePipelineService` that creates a pipeline with selected security scan using `Ci::CreatePipelineService`. \n* [x] ~backend Extend `process_action` method in `ee/app/services/security/security_orchestration_policies/rule_schedule_service.rb` to support new scan `secret_detection` and start new pipeline with `Secret Detection` job only using `Security::SecurityOrchestrationPolicies::CreatePipelineService`.\n* [x] ~backend Set `SECRET_DETECTION_HISTORIC_SCAN` CI variable to `true` as mentioned in the requirement:\n\n\u003e Any Security Policy secret detection jobs that are run as part of a scheduled scan will run in `history` mode only.\n\n:warning: This issue has some level of overlap with https://gitlab.com/gitlab-org/gitlab/-/issues/330714 which also creates a new service to prepare the job configuration.","state":"closed","created_at":"2021-06-23T17:02:42.438Z","updated_at":"2021-08-24T06:07:14.924Z","closed_at":"2021-08-24T06:07:14.820Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Security Policy Management","auto updated","backend","devops::govern","group::security policies","section::sec","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334417","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334417","notes":"https://gitlab.com/api/v4/projects/278964/issues/334417/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334417/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334417","relative":"#334417","full":"gitlab-org/gitlab#334417"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6146,"epic":{"id":285933,"iid":6146,"title":"Add Support for Secret Detection Policies","url":"/groups/gitlab-org/-/epics/6146","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":89187479,"iid":334415,"project_id":278964,"title":"Update SecurityOrchestrationPolicies processor to support secret detection","description":"## Why are we doing this work\n\nWe want Secret Detection scans to be run whenever a project pipeline is run according to the policy mentioned in the security policy project. Secret Detection scans should run in `normal` mode for pipeline. Normal mode is typically enabled by setting `SECRET_DETECTION_HISTORIC_SCAN` to `false` as a CI variable. ([See documentation](https://docs.gitlab.com/ee/user/application_security/secret_detection/#full-history-secret-scan))\n\n## Relevant links\n\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/6146)\n\n## Non-functional requirements\n\n- [-] Documentation:\n- [x] Feature flag: This is already behind `security_orchestration_policies_configuration` flag\n- [-] Performance:\n- [x] Testing:\n    - Test if the policy with scan type `secret_detection` creates the secret detection job when the pipeline runs matching the policy with the specified branch.\n    - Test if a single policy with multiple scan actions(`dast` and `secret_detection`) are also working as expected\n\n\n## Implementation plan\n\n- ~backend Extend `Security::OrchestrationPolicyConfiguration` with a method to get actions with given scan type from active policies, for now the `scan` type would be `secret_detection`\n- ~backend Create new service similar to `Security::SecurityOrchestrationPolicies::OnDemandScanPipelineConfigurationService` to prepare the job configuration for `secret_detection` and extend `ee/lib/gitlab/ci/config/security_orchestration_policies/processor.rb` with the new service for `secret_detection`.\n- ~backend Set `SECRET_DETECTION_HISTORIC_SCAN` CI variable to `false` as mentioned in the requirement:\n\n\u003e Any Security Policy secret detection jobs that are run as part of a pipeline will run in `normal` mode only.\n\n:warning: This issue has some level of overlap with https://gitlab.com/gitlab-org/gitlab/-/issues/330714 which also creates a new service to prepare the job configuration.","state":"closed","created_at":"2021-06-23T16:44:33.563Z","updated_at":"2021-08-24T06:08:01.048Z","closed_at":"2021-08-18T06:37:01.556Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Security Policy Management","Deliverable","auto updated","backend","devops::govern","group::security policies","section::sec","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/334415","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/334415","notes":"https://gitlab.com/api/v4/projects/278964/issues/334415/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/334415/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#334415","relative":"#334415","full":"gitlab-org/gitlab#334415"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6146,"epic":{"id":285933,"iid":6146,"title":"Add Support for Secret Detection Policies","url":"/groups/gitlab-org/-/epics/6146","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]