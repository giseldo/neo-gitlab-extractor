[{"id":100372698,"iid":349892,"project_id":278964,"title":"Intermittent issue with Mermaid Diagrams not getting rendered","description":"### Issue \n\nIt was found that `mermaid` diagrams are not getting rendered in the comment section. It appears to be an intermittent issue and gets resolved upon page refresh.\n\nIt has been reported multiple times internally and discussed in a [Slack thread](https://gitlab.slack.com/archives/CETG54GQ0/p1641586490035900).\n\n### Steps to reproduce \n\n**Note:** It's an intermittent issue with no clear steps to reproduce.\n\n1. Create a new issue\n1. Add a comment with the following content (enclosed them with ```mermaid)\n\n```\nsequenceDiagram\n    User-\u003e\u003eGitLab: GET /project/-/archive/master.zip\n    GitLab-\u003e\u003eUser: 302 Found\n    Note over User,GitLab: Location: https://cdn.com/project/-/archive/master.zip?token=secure-user-token\n    User-\u003e\u003eCDN: GET /project/-/archive/master.zip?token=secure-user-token\n    alt object not in cache\n      CDN-\u003e\u003eGitLab: GET /project/-/archive/master.zip\n      Note over CDN,GitLab: X-Gitlab-External-Storage-Token: secure-cdn-token\u003cbr/\u003eX-Gitlab-Static-Object-Token: secure-user-token\n      GitLab-\u003e\u003eCDN: 200 OK\n      CDN-\u003e\u003eUser: master.zip\n    else object in cache\n      CDN-\u003e\u003eGitLab: GET /project/-/archive/master.zip\n      Note over CDN,GitLab: X-Gitlab-External-Storage-Token: secure-cdn-token\u003cbr/\u003eX-Gitlab-Static-Object-Token: secure-user-token\u003cbr/\u003eIf-None-Match: etag-value\n      GitLab-\u003e\u003eCDN: 304 Not Modified\n      CDN-\u003e\u003eUser: master.zip\n    end\n```\n\n```\ngraph LR; A--\u003eC;\n```\n\n3. Refresh the page until you find the comment is not rendered\n\n### PoC\n\n![image](/uploads/dd48f54f626de2932e80406bd508b0ea/image.png)\n\n### Fix\n\nTBD","state":"closed","created_at":"2022-01-10T15:28:55.732Z","updated_at":"2022-11-15T04:29:29.615Z","closed_at":"2022-01-25T11:39:08.269Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["devops::plan","frontend","group::project management","markdown","section::dev","severity::3","type::bug"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349892","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349892","notes":"https://gitlab.com/api/v4/projects/278964/issues/349892/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349892/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349892","relative":"#349892","full":"gitlab-org/gitlab#349892"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100368478,"iid":349887,"project_id":278964,"title":"[FE] Add ability to filter by provisioned users","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\nThis is the ~frontend counterpart to https://gitlab.com/gitlab-org/gitlab/-/issues/350400\n\nToday within a project/group, you can have a mixture of provisioned and non-provisioned users, but there is no way to filter by this status.\n\nWe added an \"Enterprise User\" badge in https://gitlab.com/gitlab-org/gitlab/-/issues/325712, It would be great if we could filter by badges (also SAML)\n\n![image](https://gitlab.com/gitlab-org/gitlab/uploads/d61073e450dd4ced0f67ce711a23f58d/image.png)\n\n### Implementation plan\n\nAbstract [app/assets/javascripts/members/components/filter_sort/members_filtered_search_bar.vue#L22](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/members/components/filter_sort/members_filtered_search_bar.vue#L22) to an `availableFilterTokens` util in [app/assets/javascripts/members/utils.js](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/members/utils.js). Then create another `availableFilterTokens` util in [ee/app/assets/javascripts/members/utils.js](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/members/utils.js) that extends the CE version and adds the `Enterprise` filter token.\n\n`Work` icon to be used for drop down filter icon.\n\n![Screen_Shot_2022-03-03_at_10.58.00_AM](/uploads/d63ad8f17f50deca5c72209f9f62ec04/Screen_Shot_2022-03-03_at_10.58.00_AM.png)\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-01-10T14:25:19.600Z","updated_at":"2022-03-16T18:45:55.542Z","closed_at":"2022-03-16T18:45:55.520Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["GitLab Free","GitLab Premium","GitLab Ultimate","candidate::14.9","devops::manage","direction","documentation","frontend","group::organization","section::dev","type::feature","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":4156460,"username":"ogolowinski","name":"Orit Golowinski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4156460/avatar.png","web_url":"https://gitlab.com/ogolowinski"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349887","notes":"https://gitlab.com/api/v4/projects/278964/issues/349887/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349887/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349887","relative":"#349887","full":"gitlab-org/gitlab#349887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7445,"epic":{"id":427595,"iid":7445,"title":"Migrate Users from Admin Area to the group level","url":"/groups/gitlab-org/-/epics/7445","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":100362452,"iid":349880,"project_id":278964,"title":"CI/CD Analytics: Modify VSA summary metrics API to include id/type for each metric","description":"### Problem to solve\n\nCurrently, the Value Stream Analytics (VSA) summary endpoint returns all metrics in one request. On the CI/CD Analytics page, we want to reuse that API call and show only the deployment count and deployment frequency metrics. However, the returned metrics don't really have an id/type attribute for each metric.  They each have a human-readable `title` attribute, but it would be bad practice for the frontend to attempt to use that to identify the type of metric, because title (and translations) can change over time.  Frontend needs a non-changing id/type attribute to rely on.\n\n### Proposal\n\nExtend the metric serializer (used in `Gitlab::CycleAnalytics::StageSummary` and `Gitlab::Analytics::CycleAnalytics::Summary::Group::StageSummary`) to expose a new attribute `identifier`. This attribute will uniquely identify a metric.  For example, the metric with `title` \"Deployment Frequency\" would have the `identifier` \"deployment_frequency\".\n\n### Out of scope\n\nTo avoid loading unnecessary metrics, the API should accept filters where we can specify which metrics to return:\n\n1.. Extend the project and group level `summary_controller` to accept a new filter param: `identifiers` (comma separated list)\n1. Update the Summary classes to query only the requested identifiers","state":"closed","created_at":"2022-01-10T13:02:41.363Z","updated_at":"2022-01-25T11:30:59.368Z","closed_at":"2022-01-24T15:38:30.212Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["GitLab Ultimate","backend","devops::manage","feature::enhancement","group::optimize","priority::1","section::dev","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349880","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349880","notes":"https://gitlab.com/api/v4/projects/278964/issues/349880/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349880/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349880","relative":"#349880","full":"gitlab-org/gitlab#349880"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100357414,"iid":349873,"project_id":278964,"title":"Replace the dropdown split button for rebasing an MR into two separate buttons","description":"\n## 🧩 Problem\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/76056 allows to rebase without triggering CI from the UI. But in https://gitlab.com/gitlab-org/gitlab/-/issues/118825#note_803407947,  there's a discussion to deprecate the dropdown icon from the split button and split it into two buttons if the space allows..\n\n\nThis is dependent on https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/-/merge_requests/2668 being resolved before proceeding.\n\n## 📝 Proposal\n\nInstead of presenting the two options to rebase in a split dropdown button, present them as two separate buttons.\n\n![rebase-no-CI](/uploads/99889efef64035ccf965aebd1a8205ca/rebase-no-CI.png)\n\n## Implementation Guide\n\nHere's the button that needs replacing:\nhttps://gitlab.com/gitlab-org/gitlab/-/blob/b087a567e4bdb2acdd05fac0c37ce687761127f0/app/assets/javascripts/vue_merge_request_widget/components/states/mr_widget_rebase.vue#L213\n\nBe warned, the logic in this file is prone to edge cases so be sure to test it thrououghly.","state":"closed","created_at":"2022-01-10T11:36:52.599Z","updated_at":"2022-03-07T12:22:34.580Z","closed_at":"2022-03-07T12:22:34.567Z","closed_by":{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"},"labels":["Category:Continuous Integration","SUS::Impacting","Seeking community contributions","UX","UX debt","[deprecated] Accepting merge requests","auto updated","devops::verify","frontend","group::pipeline execution","section::ops","severity::4","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":6115425,"username":"v_mishra","name":"Veethika M","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f09a3a0badac17a57e28b4e18a45c1c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/v_mishra"},"type":"ISSUE","assignee":null,"user_notes_count":29,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349873","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349873","notes":"https://gitlab.com/api/v4/projects/278964/issues/349873/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349873/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349873","relative":"#349873","full":"gitlab-org/gitlab#349873"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100348324,"iid":349867,"project_id":278964,"title":"Follow-up from \"Add alert if api call is failing on Storage purchase\"","description":"The following discussion from !77307 should be addressed:\n\nAs we have implemented alert display with emitted events for `orderSummary`, we should also use it for `checkout` component errors (for example card payment errors). The change should be done for both `checkout` and `addonPurchaseDetails` components\n\n- [ ] @sheldonled started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77307#note_804708852):  (+3 comments)\n\n## Proposal\n\nMigrate flash alerts to `GlAlert` with emitted events, see https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77307 for example","state":"closed","created_at":"2022-01-10T10:48:45.593Z","updated_at":"2022-04-26T07:50:55.757Z","closed_at":"2022-04-26T07:50:55.738Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["Category:Purchase","Unplanned","auto updated","devops::fulfillment","frontend","group::purchase","maintenance::refactor","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349867","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349867","notes":"https://gitlab.com/api/v4/projects/278964/issues/349867/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349867/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349867","relative":"#349867","full":"gitlab-org/gitlab#349867"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100342021,"iid":349863,"project_id":278964,"title":"Ability to Remove groups at the parent group level","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\n\u003c!-- What is the user problem you are trying to solve with this issue? --\u003e\n\nAs the first deliverable for https://gitlab.com/groups/gitlab-org/-/epics/7314, we want to achieve feature parity between self and SaaS users.\n\nWe want to bring out the edit capabilities for group owners that only appears in the admin panel today\n\n### Proposal\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\nGroup owners should be able to see a new delete button for all their groups\n\n![image](/uploads/90c84d5eb70cecd706e37a2c8a351a6b/image.png)\n\nPressing on the delete button will navigate the user to the group-\u003eremove group setting page for the group that was selected\n\n![image](/uploads/d35300b4b34ae6fa5dcad346645b95a7/image.png)\n\nFor users that are *not* group owners nothing should change from what they see today\n\nWe are intentionally redirecting the user to the remove group setting and not offering the remove dialog box, to make it more difficult to remove group as we have had some complaints about accidentally deleting groups unintentionally. \n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n\n--\u003e\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n\n### Metrics\n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n### Availability and Testing\n- Run `package-and-qa` job for MR(s)\n- Add / update feature specs\n  - Consider adding test cases around inheritance rules as well (verifying parent group owner can access new delete button for its subgroups, subgroup group owner cannot access delete button for parent group, etc.)\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-01-10T09:41:24.312Z","updated_at":"2022-03-21T07:27:41.724Z","closed_at":"2022-02-15T13:58:58.924Z","closed_by":{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"},"labels":["Category:Subgroups","GitLab Free","devops::manage","direction","documentation","group::organization","quad-planning::complete-action","release post item::in review","section::dev","type::feature"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"}],"author":{"id":4156460,"username":"ogolowinski","name":"Orit Golowinski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4156460/avatar.png","web_url":"https://gitlab.com/ogolowinski"},"type":"ISSUE","assignee":{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"},"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349863","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349863","notes":"https://gitlab.com/api/v4/projects/278964/issues/349863/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349863/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349863","relative":"#349863","full":"gitlab-org/gitlab#349863"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7411,"epic":{"id":424492,"iid":7411,"title":"Migrate Admin functionality at the group level","url":"/groups/gitlab-org/-/epics/7411","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100335101,"iid":349858,"project_id":278964,"title":"Spike: List Service ping complex database metrics that have custom logic","description":"# Summary\n\nWith this issue we want to list all the metrics that have incorrect queries generated and come up with a plan for how to fix them.\n\n# Why?\n\nIn order to have a correct Service Ping generated in DWH and not generate it manually\n\n# Details\n\nThe majority of metrics are using `count` or `disctinct_count`.\n\nThere are a couple of metrics that have more complex logic and for this one, we don't build the correct query to run Service Ping in DWH.\n\nThe `project_imports` metrics are an example of complex query https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data.rb#L896\n\n# Proposals\n\n1. Make the logic simple, to only use `count`  or `distinct_count`\n1. Overwrite the projects_imported_counts in `lib/giltab/usage_data_queries.rb` handle the correct query here\n1. Move these metrics in instrumentation classes and overite the to_sql method with the correct query for DWH\n1. Other?","state":"closed","created_at":"2022-01-10T07:51:34.749Z","updated_at":"2022-01-31T16:04:03.477Z","closed_at":"2022-01-31T16:04:03.461Z","closed_by":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"labels":["backend","devops::growth","group::product intelligence","section::growth","spike","type::maintenance","workflow::ready for review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349858","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349858","notes":"https://gitlab.com/api/v4/projects/278964/issues/349858/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349858/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349858","relative":"#349858","full":"gitlab-org/gitlab#349858"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7451,"epic":{"id":428291,"iid":7451,"title":"Fix broken queries for Service Ping Automation in DWH","url":"/groups/gitlab-org/-/epics/7451","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100323347,"iid":349848,"project_id":278964,"title":"Indicate locked users in Admin -\u003e Users list view","description":"### Proposal\n\nFollow-up to https://gitlab.com/gitlab-org/gitlab/-/issues/335032\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/335032 we added `(Locked)` in the Admin Area user detail view to indicate that a user is locked. We should also add a `Locked` badge to the Admin Area user list view so the list can be quickly scanned to see which users are locked. \n\n![Screen_Shot_2022-01-09_at_5.03.05_PM](/uploads/66407aa97520529b86de7dbe5d2eb083/Screen_Shot_2022-01-09_at_5.03.05_PM.png)\n\n### Implementation plan\n\n- Add `badges \u003c\u003c { text: s_(\"AdminUsers|Locked\"), variant: 'warning' } if user.access_locked?` to [app/helpers/users_helper.rb#L98](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/helpers/users_helper.rb#L98)\n- Add feature spec to [spec/features/admin/admin_users_spec.rb#L15](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/features/admin/admin_users_spec.rb#L15)","state":"closed","created_at":"2022-01-10T01:04:12.429Z","updated_at":"2022-02-17T08:45:22.573Z","closed_at":"2022-01-28T19:17:15.874Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","GitLab Free","candidate::14.8","devops::manage","documentation","feature::addition","frontend","group::authentication and authorization","quad-planning::complete-no-action","section::dev","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349848","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349848","notes":"https://gitlab.com/api/v4/projects/278964/issues/349848/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349848/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349848","relative":"#349848","full":"gitlab-org/gitlab#349848"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100323306,"iid":349847,"project_id":278964,"title":"Opt-in to new Apdex calculation methods","description":"As mentioned in https://gitlab.com/gitlab-org/error-budget-reports/-/issues/4 we should opt-in to using the new apdex calculation methods by the end of FY23Q1.\n\nSee https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/1451#how-do-we-opt-in for how to opt-in.\n\nAny endpoints that are performing poorly enough to affect our Apdex negatively can be marked as low urgency while we fix the performance issues.","state":"closed","created_at":"2022-01-10T01:00:34.982Z","updated_at":"2022-11-22T19:09:05.071Z","closed_at":"2022-02-07T20:41:54.104Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["OKR","auto updated","devops::manage","group::integrations","reliability","section::dev","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349847","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349847","notes":"https://gitlab.com/api/v4/projects/278964/issues/349847/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349847/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349847","relative":"#349847","full":"gitlab-org/gitlab#349847"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6913,"epic":{"id":370101,"iid":6913,"title":"Integrations Error Budgets","url":"/groups/gitlab-org/-/epics/6913","group_id":9970},"iteration":null,"health_status":null},{"id":100322273,"iid":349845,"project_id":278964,"title":"[Feature flag] Enable recursive webhook detection","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/issues/329743) on production,\nthat is currently behind the `webhook_recursion_detection` feature flag.\n\nWhen enabled, the feature will log when recursive webhooks are detected. A future iteration will block the webhook from firing.\n\n## Owners\n\n- Team: ~\"group::integrations\" \n- Most appropriate slack channel to reach out to: `#g_ecosystem_integrations`\n- Best individual to reach out to: `@.luke`\n- PM: `@g.hickman` \n\n## Expectations\n\n### What are we expecting to happen?\n\nWe will see logging of any recursive webhooks.\n\n### When is the feature viable?\n\nAs soon as the flag is enabled.\n\n### What might happen if this goes wrong?\n\nExcessive calls to redis might cause redis service degradation.\n\n### What can we monitor to detect problems with this?\n\n**Grafana service performance**\n\n- [redis](https://dashboards.gitlab.net/d/redis-main/redis-overview?orgId=1) apdex / saturation / rps / workload / operation latency\n- [`WebHookWorker`](https://dashboards.gitlab.net/d/sidekiq-worker-detail/sidekiq-worker-detail?orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-stage=main\u0026var-worker=WebHookWorker) execution latency / error rate / redis time (expected to rise)\n\n**Sentry errors**\n\n- [`WebHookService`](https://sentry.gitlab.net/gitlab/gitlabcom/?query=is%3Aunresolved+WebHookService)\n- [`WebHookWorker`](https://sentry.gitlab.net/gitlab/gitlabcom/?query=is%3Aunresolved+WebHookWorker)\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set webhook_recursion_detection true --dev`\n    - [x] `/chatops run feature set webhook_recursion_detection true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab webhook_recursion_detection true`\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab-foss webhook_recursion_detection true`\n    - [x] `/chatops run feature set --project=gitlab-com/www-gitlab-com webhook_recursion_detection true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --group=gitlab-org webhook_recursion_detection true`\n    - [x] `/chatops run feature set --group=gitlab-com webhook_recursion_detection true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e webhook_recursion_detection true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set webhook_recursion_detection \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set webhook_recursion_detection \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set webhook_recursion_detection true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `webhook_recursion_detection`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `webhook_recursion_detection` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete webhook_recursion_detection --dev`\n    - [x] `/chatops run feature delete webhook_recursion_detection --staging`\n    - [x] `/chatops run feature delete webhook_recursion_detection`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set webhook_recursion_detection false\n```","state":"closed","created_at":"2022-01-09T23:44:28.511Z","updated_at":"2022-11-22T19:09:05.810Z","closed_at":"2022-01-24T21:38:20.654Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["backend","devops::manage","feature flag","feature::addition","group::integrations","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349845","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":28},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"28 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349845","notes":"https://gitlab.com/api/v4/projects/278964/issues/349845/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349845/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349845","relative":"#349845","full":"gitlab-org/gitlab#349845"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6004,"epic":{"id":270610,"iid":6004,"title":"Improve the reliability of webhooks","url":"/groups/gitlab-org/-/epics/6004","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":100322052,"iid":349844,"project_id":278964,"title":"Corpus table doesn't refresh when uploading corpus after using pagination","description":"Follow-up to https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75607#note_804803930\n\nIf you upload a corpus, then change pages and upload another corpus the list view does not get reloaded. This is most likely due to an issue with Apollo caching. \n\n![Untitled__1_](/uploads/024247b973083a638c8a3b6fbd33702b/Untitled__1_.mp4)\n\nA few possible solutions to look into:\n\n1. Change the `fetchPolicy` to `cache-and-network`\n   * This seems to work but then the loading icon does't show for some reason :thinking:\n1. Manually update the cache with `writeQuery`\n   * Haven't tested this but I think it should work","state":"closed","created_at":"2022-01-09T23:28:25.405Z","updated_at":"2022-02-10T06:22:53.424Z","closed_at":"2022-02-10T06:22:53.407Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["devops::secure","feature flag","frontend","fuzzing::coverage","group::dynamic analysis","missed:14.7","priority::3","section::sec","severity::4","type::bug","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"}],"author":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349844","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349844","notes":"https://gitlab.com/api/v4/projects/278964/issues/349844/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349844/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349844","relative":"#349844","full":"gitlab-org/gitlab#349844"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6902,"epic":{"id":367971,"iid":6902,"title":"Fuzz corpus management - Clean Up","url":"/groups/gitlab-org/-/epics/6902","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100320899,"iid":349843,"project_id":278964,"title":"[Feature flag] Enable rate limiting by IP of /users/sign_up endpoint","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [Enforce rate limit per IP on /users/sign_up](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77835) on production, that is currently behind the `rate_limit_user_sign_up_endpoint` feature flag.\n\nThis introduces rate limiting for `/users/sign_up`, in order to mitigate the risk of misuses, such as mass-discovery of usernames/emails in use, as part of the solution of [this issue](https://gitlab.com/gitlab-org/gitlab/-/issues/339151)\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: group::optimize\n- Most appropriate slack channel to reach out to: `#g_manage_optimize`\n- Best individual to reach out to: @m_frankiewicz \n- PM: @hdelalic \n\n## Stakeholders\n\n- The Security Team\n\n## Expectations\n\n### What are we expecting to happen?\n\nThe endpoint `/users/sign_up` will be rate-limited to maximum 20 calls per minute per IP address.\n\n### What might happen if this goes wrong?\n\nIf the rate limit turns out to be too stringent, it is possible that some legitimate user is being limited in how frequently they can call this endpoint. In that case, the feature should be turned off, and a higher limit should be applied, after agreeing with security on what is appropriate.\n\n### What can we monitor to detect problems with this?\n\nAn increase of 429 response statuses on calls to `/users/sign_up` could indicate either an attempt to misuse the endpoint that is correctly stopped by this feature, or possibly a legitimate user that is hitting the limit.\n\n### What can we check for monitoring production after rollouts?\n\nProduction logs for 429 response statuses on calls to `/users/sign_up`. A high number of those would indicate that we are possibly limiting too many users.\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [x] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info] (https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default))  MR with documentation changes: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/78548.\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2022-01-09T21:57:26.354Z","updated_at":"2022-03-16T10:53:37.530Z","closed_at":"2022-03-16T10:53:37.518Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["backend","devops::manage","feature flag","feature::addition","group::optimize","section::dev","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349843","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":29},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"29 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349843","notes":"https://gitlab.com/api/v4/projects/278964/issues/349843/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349843/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349843","relative":"#349843","full":"gitlab-org/gitlab#349843"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100284001,"iid":349830,"project_id":278964,"title":"Redirect to on-demand scan form after editing a DAST site/scanner profile from it","description":"The following discussion from !77288 should be addressed:\n\n- [ ] @mfangman started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77288#note_804628445):  (+1 comment)\n\n    \u003e This feedback is **non-blocking** and can be moved to a follow-up issue if needed\n    \u003e \n    \u003e #### UX Feedback:\n    \u003e When editing a `saved scan`, if the user edits a profile used in the save scan they are redirected to the profile library when complete.\n    \u003e \n    \u003e ![edit-scan](/uploads/65cbffce73fb8e8c7b6909403ad4cd30/edit-scan.gif)\n    \u003e \n    \u003e **Proposed solution:** When editing a profile via the \"Edit on-demand DAST scan\" screen, users should be redirected back to the edit scan page after completing (saving or canceling) profile changes.","state":"closed","created_at":"2022-01-08T09:33:27.534Z","updated_at":"2022-01-17T07:36:00.938Z","closed_at":"2022-01-17T07:36:00.926Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["Category:DAST","UX","backend","devops::secure","feature::enhancement","frontend","group::dynamic analysis","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349830","notes":"https://gitlab.com/api/v4/projects/278964/issues/349830/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349830/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349830","relative":"#349830","full":"gitlab-org/gitlab#349830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":100277298,"iid":349826,"project_id":278964,"title":"Clarify the scope and timeline of data on group repository analytics","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\nThe data provided in Repository Analytics are varied in scope and timeline, and make it confusing to analyze what is provided. To solve for this, we will add clarification, such as help text and informational popovers, around how the data relates to one another and why data may be missing today, such as subgroups.\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\n- The data provided in Repository Analytics are varied in scope and timeline, and make it confusing to analyze what is provided. \n\n- The top `Test Code Coverage` single stats do not have a timeline associated with when those were last updated. Therefore, the number of projects with code coverage does not always match up with the total number of projects listed in `Latest test coverage results`. The reason is because the numbers are updated within the last day, while the `latest test coverage results` are updated overtime, with `last update` date in the table. We don't tell you that though so it's up for the user's interpretation\n\n- The projects listed in `latest test coverage results` do not include projects from subgroups of the group you are looking at. We don't tell you that upfront, so it's confusing why they are missing.\n\n- Finally, the graph shows average test coverage over the last 30 days, another varied timeline.\n\nThis was brought up in a slack conversation: https://gitlab.slack.com/archives/CPANF553J/p1641593228010800\n\n\u003c!-- What is the user problem you are trying to solve with this issue? --\u003e\n\n### Proposal\n\nMake the following changes, see designs in design management for details:\n\n- add a last updated date next to the test code coverage header\n- change the styling of the last 30 days text in `average test coverage` card header\n- add an info icon to the `latest test coverage results` card header\n- move the download historic test coverage data button into the `latest test coverage results` card header\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n### Intended users\n\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n\n--\u003e\n\n### Metrics\n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-01-08T00:18:14.188Z","updated_at":"2022-09-16T17:00:01.957Z","closed_at":"2022-06-07T17:44:40.772Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Code Testing and Coverage","GitLab Premium","SUS::Impacting","UI text","UX","devops::verify","direction","documentation","frontend","group::pipeline insights","missed:15.0","section::ops","severity::3","type::feature","usability","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":9302527,"username":"gdoyle","name":"Gina Doyle","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9302527/avatar.png","web_url":"https://gitlab.com/gdoyle"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349826","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349826","notes":"https://gitlab.com/api/v4/projects/278964/issues/349826/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349826/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349826","relative":"#349826","full":"gitlab-org/gitlab#349826"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":100271837,"iid":349814,"project_id":278964,"title":"Merge i18n translations (Feb 2022)","description":"Merge the latest i18n translations from Crowdin on a monthly cadence.\n\nDocumentation available here: https://docs.gitlab.com/ee/development/i18n/merging_translations.html\n\n#### ToDo\n* [x] After cloning: update Title, set Milestone, Due date (15th), Related to previous month's issue.\n* [x] After the 1st of the month: assign to yourself, set ~2526320 \n* [x] If needed, configure the [GitLab-Crowdin integration](https://docs.gitlab.com/ee/development/i18n/merging_translations.html#recreate-the-gitlab-integration-in-crowdin)\n* [x] Kick off a sync from [Crowdin](https://crowdin.com/project/gitlab-ee/apps/system/gitlab)\n* [x] Find the [MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026author_username=gitlab-crowdin-bot) created by @gitlab-crowdin-bot and associate it with this issue\n* [x] Complete the MR\n* [x] Update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43) with the latest numbers. (Find the issue [here](https://gitlab.com/groups/gitlab-org/-/epics/3571))\n* [x] When done, clone [this template issue](https://gitlab.com/gitlab-org/gitlab/-/issues/339980) for the next milestone.","state":"closed","created_at":"2022-01-07T19:57:55.412Z","updated_at":"2022-03-28T19:18:20.636Z","closed_at":"2022-02-03T22:12:34.237Z","closed_by":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","milestone::p2","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-02-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349814","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349814","notes":"https://gitlab.com/api/v4/projects/278964/issues/349814/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349814/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349814","relative":"#349814","full":"gitlab-org/gitlab#349814"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":100268717,"iid":349803,"project_id":278964,"title":"Create a mailer to be called when users exceed seats_in_use","description":"## Problem to solve\n\nAs a part of the issue https://gitlab.com/gitlab-org/gitlab/-/issues/348487, an email has to be sent to the admin of the group when the count of users exceed seats_in_use. \n\n## Proposal\n\nWe need to create a mailer which will be called in background. The mailer would accept the namespace_id and would send the following email \n\n\u003e\u003e\u003e\n\n**Subject line: Additional charges for your GitLab subscription**\n\nDear \\[customer\\],\n\nYou have exceeded the number of seats in your GitLab subscription **A-3834954834** by **\\[seats owed number\\]**. Even if you've exceeded the seats in your subscription, you can continue to add users, and GitLab will bill you a prorated amount for any seat overages on a quarterly basis.\n\nYou can find more information about the quarterly reconciliation process in [our documentation](https://docs.gitlab.com/ee/subscriptions/quarterly_reconciliation.html#quarterly-reconciliation-process).\n\n[Please reach out if you have questions](/gitlab-org/gitlab/-/blob/master/gitlab-org/gitlab/-/blob/master/gitlab-org/gitlab/-/blob/master/url), and we’ll be happy to assist.\n\nThank you for your business!\n\nGitLab Billing Team\n\n\u003e\u003e\u003e\n\nRelated to https://gitlab.com/gitlab-org/gitlab/-/issues/348487","state":"closed","created_at":"2022-01-07T18:14:42.783Z","updated_at":"2022-01-28T11:03:48.339Z","closed_at":"2022-01-27T21:45:33.637Z","closed_by":{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"},"labels":["Category:Purchase","auto updated","backend","devops::fulfillment","group::purchase","section::fulfillment","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"}],"author":{"id":4903695,"username":"shreyasagarwal","name":"Shreyas Agarwal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d5b09dfe06a10d119c1b2043c43de680?s=80\u0026d=identicon","web_url":"https://gitlab.com/shreyasagarwal"},"type":"ISSUE","assignee":{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349803","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349803","notes":"https://gitlab.com/api/v4/projects/278964/issues/349803/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349803/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349803","relative":"#349803","full":"gitlab-org/gitlab#349803"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7230,"epic":{"id":401187,"iid":7230,"title":"[QSR] [SaaS] Create transparency about User Overage process at the time of adding users","url":"/groups/gitlab-org/-/epics/7230","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":100267184,"iid":349801,"project_id":278964,"title":"Data Tracking: Add high-conversion trial actions to Continuous Onboarding database  license_scanning","description":"\nFollowup from https://gitlab.com/gitlab-org/gitlab/-/issues/345173\n\n\n## Context \n\nTo appropriately measure an [upcoming Conversion experiment](https://gitlab.com/groups/gitlab-org/-/epics/7113) where we will add high-converting trial features to continuous onboarding (C.O), we need to add tracking to the C.O. database for a few trial features: \n\n## Information to Track\n\nWe'll add the following BE product-generated event name and stage to the Continuous Onboarding postgres DB ([file here](https://gitlab.com/gitlab-org/security/gitlab/-/blob/master/app/models/onboarding_progress.rb))\n\nThis issue is specifically scoped to the Secure stage events we wish to add to the C.O. postgres DB. Secure events are below in **BOLD**.\n\nWe will add a column to the database to associate which plan is associated with each high-converting trial feature. Plan assignments can be viewed in the table below.\n\n[Data Analysis: High-converting trial features](https://docs.google.com/spreadsheets/d/15ZEfq5Z_59_HPPjFwFpykAD7LFIE4AIZ-qYpJYGDf5U/edit#gid=0)\n\n| Stage   | Event Name           | Plan Type      | Namespaces | Paid Conversion | PCT of namespaces |\n|---------|----------------------|---------------------|------------|-----------------|-------------------|\n| **secure**  | **license_scanning**    |  Ultimate               | 154        | 13.60%          | 3.70%             |\n\n\n# Questions","state":"closed","created_at":"2022-01-07T17:45:16.204Z","updated_at":"2022-04-18T07:04:21.571Z","closed_at":"2022-04-15T10:53:25.179Z","closed_by":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"labels":["Deliverable","auto updated","devops::growth","feature::enhancement","group::acquisition","section::growth","type::feature"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349801","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349801","notes":"https://gitlab.com/api/v4/projects/278964/issues/349801/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349801/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349801","relative":"#349801","full":"gitlab-org/gitlab#349801"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100263685,"iid":349793,"project_id":278964,"title":"[VSA] Tidy up chart titles","description":"### Problem\n\nVSA's chart titles are messy and clutter up the page. They also push the charts further down the page which hinders discoverability.\n\n### Proposal\n\n1. ~~Add `key metrics` above metrics for clarity~~ (covered by https://gitlab.com/gitlab-org/gitlab/-/issues/359060)\n1. ~~Hide \"The average time spent in the selected stage for the items that were completed on each date. Data limited to the last 500 items.\" behind a tooltip for `Days to completion`~~\n1. Remove `type of work` title and append \"Showing data for group 'GitLab.org' from Dec 9, 2021 to Jan 7, 2022\" to description below.\n1. Hide `Tasks by type` description behind a tooltip.\n\n## Implementation guide\n- [x] Remove the [type of work heading](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/analytics/cycle_analytics/components/type_of_work_charts.vue#L83)\n- [x] Move [this description](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/analytics/cycle_analytics/components/type_of_work_charts.vue#L84) into a tooltip next to the [`Tasks by type` heading](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/analytics/cycle_analytics/components/tasks_by_type/tasks_by_type_filters.vue#L97)\n\nNote: We could probably move the `tasks by type` heading into the [type of work component](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/analytics/cycle_analytics/components/type_of_work_charts.vue) as a minor refactor too","state":"closed","created_at":"2022-01-07T16:22:01.946Z","updated_at":"2022-06-03T01:27:24.817Z","closed_at":"2022-06-03T01:27:24.801Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Next Up","OKR","SUS::Impacting","Stretch","UX","UX scorecard-rec","devops::manage","documentation","feature::enhancement","frontend","group::optimize","priority::3","section::dev","severity::4","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":4583714,"username":"npost","name":"Nick Post","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4583714/avatar.png","web_url":"https://gitlab.com/npost"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349793","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349793","notes":"https://gitlab.com/api/v4/projects/278964/issues/349793/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349793/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349793","relative":"#349793","full":"gitlab-org/gitlab#349793"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7345,"epic":{"id":415530,"iid":7345,"title":"UX Scorecard recommendations - Manage:Optimize FY22-Q4","url":"/groups/gitlab-org/-/epics/7345","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100263674,"iid":349791,"project_id":278964,"title":"Enable the GitLab Agent for Kubernetes to initiate vulnerability scans","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nCurrently, the agent expects that the Starboard Operator is responsible for executing all scans. We would like to enforce that scans run via scan execution policies (https://gitlab.com/gitlab-org/gitlab/-/issues/341358). In order to do this, we need to be able to trigger new scans to run instead of relying on the operator to do this for us. \n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\n### Scheduling\n\nAs scan execution policies define a cadence, e.g. `cadence: 0 0 * * *`, we need a task scheduling library, for example [robfig/cron](https://github.com/robfig/cron).\n\nWe need the ability to reschedule, so that we can react to changes to the cadence.\n\n### Scanning\n\n1. Query Kubernetes for the [same workload kinds](https://github.com/aquasecurity/starboard/blob/caee8d91738eaffb6dd7a278824b8efd79b726e6/pkg/operator/controller/vulnerabilityreport.go#L50) as Starboard, taking into account the namespace filter configuration of the Agent.\n\n2. For every identified workload object, initiate a scan with [`vulnerabilityreport.Scan `](https://github.com/aquasecurity/starboard/blob/b9b78dfc9c8d5fd485f8d2b8816357eef577a887/pkg/vulnerabilityreport/scanner.go#L58). The number of scans executing in parallel must be limited. Collect all resulting `v1alpha1.VulnerabilityReport`s.\n\n3. Merge the resulting vulnerability reports.\n\n4. Transmit the resulting vulnerability report.\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~3207279\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2022-01-07T16:21:31.695Z","updated_at":"2022-05-23T11:42:17.999Z","closed_at":"2022-05-17T11:26:40.592Z","closed_by":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"labels":["Category:Container Scanning","backend","devops::govern","feature::enhancement","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":null,"user_notes_count":32,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349791","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349791","notes":"https://gitlab.com/api/v4/projects/278964/issues/349791/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349791/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349791","relative":"#349791","full":"gitlab-org/gitlab#349791"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6771,"epic":{"id":351102,"iid":6771,"title":"Simplify Cluster Image Scanning Setup","url":"/groups/gitlab-org/-/epics/6771","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100263227,"iid":349788,"project_id":278964,"title":"Empty state for iterations","description":"## Problem\n\nWhen arriving on the Iterations page at the group level, if there are no iterations, there is currently also no proper empty state. Users are unclear as to what the purpose and value is of iterations and it's not immediately clear where to begin.\n\n## Proposal\n\n![Empty_State](/uploads/d14112d2e180a998737e69d3fe7d1b49/Empty_State.png)","state":"closed","created_at":"2022-01-07T16:08:46.132Z","updated_at":"2022-04-18T07:00:49.056Z","closed_at":"2022-03-31T04:42:43.549Z","closed_by":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"labels":["Deliverable","SUS::Impacting","UI text","UX scorecard-rec","auto updated","devops::plan","frontend","group::project management","missed-deliverable","missed:14.8","missed:14.9","section::dev","severity::4","workflow::in review"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":4554611,"username":"hollyreynolds","name":"Holly Reynolds","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554611/avatar.png","web_url":"https://gitlab.com/hollyreynolds"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349788","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349788","notes":"https://gitlab.com/api/v4/projects/278964/issues/349788/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349788/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349788","relative":"#349788","full":"gitlab-org/gitlab#349788"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7354,"epic":{"id":416473,"iid":7354,"title":"UX Scorecard FY22-Q4 - Iterations improvements","url":"/groups/gitlab-org/-/epics/7354","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":45530,"iid":57,"sequence":12,"group_id":9970,"title":"Iteration 12","description":null,"state":3,"created_at":"2022-01-18T00:05:01.890Z","updated_at":"2022-04-13T00:05:02.156Z","start_date":"2022-03-30","due_date":"2022-04-12","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/45530"},"health_status":null},{"id":100254024,"iid":349779,"project_id":278964,"title":"Remove jQuery from Mermaid rendering","description":"The following discussion from !74414 should be addressed:\n\n- [x] @leipert started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74414#note_804153809):  (+1 comment)\n\n    \u003e @djadmin Could we go without jquery on this one? Maybe a follow-up?","state":"closed","created_at":"2022-01-07T13:28:03.717Z","updated_at":"2022-11-07T14:38:55.950Z","closed_at":"2022-11-07T03:01:22.600Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["auto updated","devops::manage","frontend","group::foundations","jQuery","maintenance::refactor","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349779","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349779","notes":"https://gitlab.com/api/v4/projects/278964/issues/349779/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349779/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349779","relative":"#349779","full":"gitlab-org/gitlab#349779"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3417,"epic":{"id":59461,"iid":3417,"title":"Remove jQuery from GitLabs Frontend code","url":"/groups/gitlab-org/-/epics/3417","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":100252638,"iid":349777,"project_id":278964,"title":"Should we remove the param 'without_deleted' from ProjectsFinder","description":"##### Description\n- Ideally we should never list projects that have `pending_delete` as true, the ones with a true value mean that they have been picked up the the [`DestroyService`](https://gitlab.com/gitlab-org/gitlab/-/blob/264257aa983f72269ff3c6a53dda2eb03ff0e794/app/services/projects/destroy_service.rb#L25) and are in the middle of being deleted. In order to filter out such projects we have the param `without_deleted` in the `ProjectsFinder` and when this is true we add the scope [`without_deleted`](https://gitlab.com/gitlab-org/gitlab/-/blob/264257aa983f72269ff3c6a53dda2eb03ff0e794/app/models/project.rb#L509) while finding projects.\n- When using `ProjectsFinder` we've usually passed the param `{ without_deleted: true }`, however, there are still occurrences where we haven't set this param as true which might cause projects that are in the middle of being deleted to be displayed and might not be an ideal behaviour.\n- Also, if we notice in `Admin::ProjectsFinder` we've called the [`without_deleted`](https://gitlab.com/gitlab-org/gitlab/-/blob/cce3194c3ef887e21d81d1f460a5d7976064507c/app/finders/admin/projects_finder.rb#L13) scope at the beginning which suggests that we have filtered such projects at the start itself.\n\n##### Questions\n1. Why did we create this param initially? \n2. Are there any use cases where we want to display projects with `pending_delete` as `true` to the users?\n\n##### Proposal\nShould we remove this param and use the scope `without_deleted` as the first filter [here](https://gitlab.com/gitlab-org/gitlab/-/blob/35b5cabeb0f676f8225665c6240533af03b0e094/app/finders/projects_finder.rb#L76)?\n\n### Availability and Testing\n- No new E2E test needed at this time, unit and integration test updates should suffice.\n- Please also run `e2e:package-and-test` job on MR to ensure no regressions are introduced. Feel free to reach out to @vburton if there are any E2E failures or questions.","state":"closed","created_at":"2022-01-07T12:56:43.752Z","updated_at":"2022-11-21T12:02:39.517Z","closed_at":"2022-10-26T04:07:32.474Z","closed_by":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"labels":["Deliverable","backend","devops::manage","group::organization","milestone::p3","missed-deliverable","missed:15.5","quad-planning::complete-action","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"}],"author":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"type":"ISSUE","assignee":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349777","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349777","notes":"https://gitlab.com/api/v4/projects/278964/issues/349777/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349777/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349777","relative":"#349777","full":"gitlab-org/gitlab#349777"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100246026,"iid":349769,"project_id":278964,"title":"Delete the obsolete Open Environment Button in MR diffs","description":"## What is broken?\n\n[A long time ago](https://gitlab.com/gitlab-org/gitlab-foss/-/merge_requests/8867), we introduced a feature to jump to an associated environment URL from a MR diff. As an example, you can take a look at the button below (surrounded by red square):\n\n![2022-01-07_19-16](/uploads/f954898799c951b22778c3fba562d725/2022-01-07_19-16.png)\n\nIn short, this feature is **NOT** working as expected today. The button only appears after an MR _has been merged_, which supposed to be visible _at any time/state_. Here is the overview of the internal process:\n\n1. User visits the [`diffs_batch` endpoint](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/controllers/projects/merge_requests/diffs_controller.rb#L32).\n1. `@compare.diffs_in_batch` (accidentally?) _alters_ the `merge_request.merge_request_diff` from the actual commit diff (`diff_type: \"regular\"`) to auto-generated/prospective merge diff (`diff_type: \"merge_head\"`). This process change was introduced over a year ago by ~\"devops::create\" .\n1. `@merge_request.environments_for` tries to fetch an environment from the `merge_head` SHA, but it fails. Because it's _NOT_ the SHA that the deployments/environments ran for the merge requests. As a correction, it must be fetched from `regular` SHA. This is the first bug.\n1. Let's say somewhat the environment was able to be fetched. `PaginatedDiffSerializer` serializes diffs including the environment, but [`DiffFileEntity#external_url`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/serializers/diff_file_base_entity.rb#L69) becomes always `null`, because `diff_file.content_sha` also points the `merge_head` SHA (again, this should be `regular` SHA). Since this `merge_head` SHA is auto-generated by the system and not publicly accessible, `external_url_for` fails. This is the second bug.\n\n## And this implementation is causing a performance issue\n\nAs you can see in [this issue](https://gitlab.com/gitlab-org/gitlab/-/issues/348149), we're **still executing database queries to try fetching the associated environments even if it's not properly used**. This query optimization requires significant effort, that at least takes a month to complete.\n\n## Proposal\n\nGiven that this feature is already unfunctional for over a year and requires a decent effort for the performance optimization, we should delete this implementation in order for resolving this significant ~\"technical debt\" and ~performance debt. We already have a dedicated environment section in merge request widgets, instead of diffs, and that's the main development/improvement area nowadays.","state":"closed","created_at":"2022-01-07T10:32:16.375Z","updated_at":"2022-06-29T17:11:01.860Z","closed_at":"2022-06-29T17:11:01.843Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Category:Environment Management","Next Up","UX","[deprecated] Accepting merge requests","auto updated","devops::release","group::release","section::ops","type::maintenance","workflow::ready for development"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349769","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349769","notes":"https://gitlab.com/api/v4/projects/278964/issues/349769/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349769/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349769","relative":"#349769","full":"gitlab-org/gitlab#349769"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100244475,"iid":349767,"project_id":278964,"title":"Vulnerability management survey Banner not listening for vulnerability_management_survey flag","description":"The Vulnerability management survey Banner is currently not listening for the vulnerability_management_survey flag.\n\nThis bug was introduced when refactoring the Vulnerability management survey Banner to use the shared survey Banner component.\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/77583","state":"closed","created_at":"2022-01-07T10:02:17.790Z","updated_at":"2022-01-12T16:06:01.570Z","closed_at":"2022-01-12T12:15:31.696Z","closed_by":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"labels":["type::bug","workflow::in review"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"}],"author":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"type":"ISSUE","assignee":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349767","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349767","notes":"https://gitlab.com/api/v4/projects/278964/issues/349767/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349767/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349767","relative":"#349767","full":"gitlab-org/gitlab#349767"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100233526,"iid":349761,"project_id":278964,"title":"Re-style integration reset button","description":"Follow-up to https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77555#note_803777507\n\n### Design\n\nWe need to update the integration reset button to look like the following:\n\n![Screen_Shot_2022-01-07_at_11.23.08](/uploads/7f4b90ca952434093dafe3bf9a68bae1/Screen_Shot_2022-01-07_at_11.23.08.png)","state":"closed","created_at":"2022-01-07T06:56:40.125Z","updated_at":"2022-11-22T19:09:10.171Z","closed_at":"2022-01-13T05:34:17.805Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Stretch","UI polish","UX","auto updated","devops::manage","feature::enhancement","frontend","group::integrations","section::dev","severity::4","type::feature","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349761","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349761","notes":"https://gitlab.com/api/v4/projects/278964/issues/349761/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349761/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349761","relative":"#349761","full":"gitlab-org/gitlab#349761"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100224104,"iid":349748,"project_id":278964,"title":"Registry phase 2 migration: Frontend changes for registry Rails migration","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\nAt this time, there are no planned front-end changes, but keeping this issue open as a placeholder in case anything comes up.\n\n## :rainbow: ~frontend changes\n\nI'm not sure if this is need but we can expose the `migration_state` in the Container Registry pages so that users know that their container repository is being migrated.\n\nThis can be useful to communicate why the `importing` status is blocking write operations by linking documentation that explains all the details of this migration.","state":"closed","created_at":"2022-01-06T23:58:36.160Z","updated_at":"2022-01-07T22:44:43.958Z","closed_at":"2022-01-07T22:44:43.940Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Container Registry","Container Registry Migration","Package:P1","[deprecated] Accepting merge requests","devops::package","frontend","group::package registry","type::feature"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349748","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349748","notes":"https://gitlab.com/api/v4/projects/278964/issues/349748/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349748/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349748","relative":"#349748","full":"gitlab-org/gitlab#349748"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100224098,"iid":349747,"project_id":278964,"title":"Registry phase 2 migration: Additional backend changes","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\n## :chains: Additional ~backend changes and other considerations\n\n### Delete tags service\n\nThe delete tags service should take the `migration_state` into account: skip tags destruction if the container repository is in `importing` status.\n\n### Code organization\n\nI would suggest to use `migration` as a prefix for all the column names, attributes, urls or ruby namespaces to make explicit that those parts are for this issue.","state":"closed","created_at":"2022-01-06T23:58:02.496Z","updated_at":"2022-02-05T02:37:17.274Z","closed_at":"2022-02-05T02:37:17.227Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Package:P1","backend","devops::package","group::package registry","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349747","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349747","notes":"https://gitlab.com/api/v4/projects/278964/issues/349747/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349747/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349747","relative":"#349747","full":"gitlab-org/gitlab#349747"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100224085,"iid":349746,"project_id":278964,"title":"Observer job","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\n### Observer\n\n#### Goal\n\nGather and log different metrics around the migration process\n\n#### How it is enqueued\n\nThis will be a cron worker. Every 30/60 minutes might be a good starting point.\n\n#### Logic\n\n1. Log\n   * Container repositories count for each state of `migration_state` (using the same scope as the Enqueuer job)\n\n#### Notes\n\nDepending on the complexity of the other jobs, we could merge these observability features in one of the others.","state":"closed","created_at":"2022-01-06T23:56:31.957Z","updated_at":"2022-02-11T03:57:43.956Z","closed_at":"2022-02-11T03:57:43.914Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","Package:P1","backend","devops::package","group::package registry","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349746","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349746","notes":"https://gitlab.com/api/v4/projects/278964/issues/349746/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349746/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349746","relative":"#349746","full":"gitlab-org/gitlab#349746"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":100224082,"iid":349745,"project_id":278964,"title":"Guard job","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\n### Guard / Watcher\n\n#### Goal\n\nWatch for how long container repositories have been in `(pre)_import` state. Detect stale migrations and abort them.\n\nIt also acts as the \"self heal\" component. Container Registry notifications are not guaranteed to be received by Rails. As such, we can miss them and this is a something we need to be prepared for. Imagine that we miss the notification that the `import` step is done = the container repository stays in `read-only` mode :scream:.\n\n#### How it is enqueued\n\nThis will be a cron worker. Suggested frequency: each 10 minutes.\n\n`X` still needs to be set but it must be lower than `container_registry_max_step_duration`\n\n#### Logic\n\n1. Loop through states `import`, `pre_import`, `pre_import_done` (order is important here) and loop on each container repositories that have been in those statuses longer than `container_registry_max_step_duration`. For each container repository:\n   1. Ping the Container Registry on `migration/status`\n   1. For erroneous responses, execute `container_repository.abort`\n      * if `migration_retries_count` = `container_registry_max_retries`, execute `container_repository.skip`\n   1. For \"migration step ongoing response\" responses, skip the container repository.\n   1. For \"migration step successful\" responses, transition the container repository to the next `migration_state`.\n\n#### Notes\n\nI thought about enqueuing this job only when we need to (example, when a container repository is pushed in the `pre_importing`, enqueue the Watcher job to run in `container_registry_max_step_duration`). This is nice *but* the risk in my eyes, is too big. We could miss a container repository in the `importing` status which is the status where we don't allow write operations.\n\nThat risk is too big (imagine a user saying: \"I couldn't push to my container repository these last 3 days\" :scream:). That's why I went with a simpler solution (cron job) where it is guaranteed that this job will run at some point in time.\n\nI would rather spend some backend resources (basically the cron job will have \"no op\" executions) than missing a container repository in a given `migration_state`.","state":"closed","created_at":"2022-01-06T23:56:21.070Z","updated_at":"2022-02-11T10:08:00.258Z","closed_at":"2022-02-11T10:08:00.226Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","Package:P1","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349745","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349745","notes":"https://gitlab.com/api/v4/projects/278964/issues/349745/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349745/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349745","relative":"#349745","full":"gitlab-org/gitlab#349745"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":100224070,"iid":349744,"project_id":278964,"title":"Enqueuer job","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\n### Enqueuer\n\n#### Goal\n\nStart the migration process for the next eligible container repository.\n\n#### How it is enqueued\n\nTwo ways:\n\n1. Cron worker. Suggested frequency: each hour.\n1. When a container repository goes out of finishes the migration. Basically, when a container repository enters the `done` or `aborted` status.\n\n#### Logic\n\nThis worker needs to be [deduplicated](https://docs.gitlab.com/ee/development/sidekiq_style_guide.html#deduplication) because we have many sources that can enqueue (Sidekiq) this job and those multiple enqueues should be merged into a single one, so that we don't flood the Sidekiq queues.\n\n1. If the global feature flag is disabled, return.\n1. Check the capacity using the capacity ~\"feature flag\" and the number of (`pre_importing` + `pre_importing_done` + `importing` repositories).\n   * If that number reaches (or is over) the capacity, return.\n1. Check the most recent container repository that was out of the migration process. Check the timestamp to enforce `container_registry_phase_2_enqueue_speed_X`, eg. enforce the waiting time between migration enqueues.\n1. Look for aborted container repositories.\n   * If any, retry the failed migration step.\n     * If the retry fails, skip this container repository\n1. If an aborted container repository was handled, return\n1. Select the next container repository using these filters:\n   * Not member of the deny list\n   * Is in the `container_registry_target_plan`\n   * Has been created before `container_registry_created_before`\n   * Select randomly (this might be not possible)\n1. Check the number of tags on the selected container repository.\n   * If it has more than `container_registry_max_tags_count`\n     * update the container repository with `migration_state = skipped` + `migration_skipped_reason = :too_many_tags` + `migration_skipped_at = Time.zone.now`\n   * Re execute step (5.)\n1. Start the migration of the selected container repository with `container_repository.start_pre_import`\n   * :warning: Calling the registry on the `/migration/pre_import/start` endpoint might return `429 Too Many Requests`\n     * If that's the case, try again for `container_registry_start_max_retries` times.\n          * Implement an exponential back off so that we don't spike the number of network requests in a very short period of time.\n     * If still unsuccessful, simply end the job.\n   * (Re enqueue the Enqueuer job if the capacity has not been reached.)\n     * I'm not sure about this step.\n\n#### Notes\n\nUsing a cron job provides a way to kickstart the whole process. It also provides some self healing capability. Let's say that the whole system is terminated because of an external reason (such as emergency reboot), this job will allow us to \"resume\" the migration.\n\nThere is a flaw in this job that I don't like. This job can keep failing finding an eligible container repository. Let's say that the random pick is keeping selecting container repositories with more than `container_registry_max_tags_count` tags, we can end up in a long loop and that's not great.\n\nThis job needs to properly log everything that it does. I'm even thinking in logging the number of times that a `skipped` repository has been found = how many times the \"selection\" loop has run.","state":"closed","created_at":"2022-01-06T23:55:15.294Z","updated_at":"2022-02-11T22:27:45.915Z","closed_at":"2022-02-11T22:27:45.879Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","Package:P1","backend","devops::package","group::package registry","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349744","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349744","notes":"https://gitlab.com/api/v4/projects/278964/issues/349744/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349744/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349744","relative":"#349744","full":"gitlab-org/gitlab#349744"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":100224066,"iid":349743,"project_id":278964,"title":"Registry phase 2 migration: Update /jwt/auth","description":"### Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\n### Update endpoint: `/jwt/auth`\n\n* Update the endpoint to reject JWT token requests for scopes `push`, `delete` or `*` if the container repository is in `migration_state: :importing`\n\n### Add `import` resource name to Auth service\n\nSee [this thread](https://gitlab.com/gitlab-org/container-registry/-/merge_requests/834#note_804484495) for more details about the new scope.\n\n* Add a new resource name `import` for `registry` resource access tokens to the [`ContainerRegistryAuthenticationService`](https://gitlab.com/gitlab-org/gitlab/-/blob/c6db952169cdc0573ba8b03d86b42847e718fe4b/app/services/auth/container_registry_authentication_service.rb#L96)\n* Add a class method `import_access_token` that grants the import access similar to the [`full_access_token`](https://gitlab.com/gitlab-org/gitlab/-/blob/e360c3ef4912b3e3a8898038030d396f166e22ce/app/services/auth/container_registry_authentication_service.rb#L31)","state":"closed","created_at":"2022-01-06T23:54:56.418Z","updated_at":"2022-01-31T14:43:36.345Z","closed_at":"2022-01-25T16:21:02.924Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","Package:P1","backend","devops::package","group::package registry","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349743","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349743","notes":"https://gitlab.com/api/v4/projects/278964/issues/349743/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349743/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349743","relative":"#349743","full":"gitlab-org/gitlab#349743"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":100224061,"iid":349742,"project_id":278964,"title":"Registry phase 2 migration: New APIs required for the migration","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\nWe decided to make a unified endpoint `PUT /api/:version/internal/registry/repositories/:path/migration/status` that will consume the request body as defined in the [import notification endpoint](https://gitlab.com/gitlab-org/container-registry/-/blob/master/docs-gitlab/api.md#import-notification).\n\n```json\n{\n  \"name\": \"gitlab-container-registry\",\n  \"path\": \"gitlab-org/build/cng/gitlab-container-registry\",\n  \"status\": \"imported\",\n  \"detail\": \"import completed successfully\"\n}\n```\n\nThe possible statuses are defined in https://gitlab.com/gitlab-org/container-registry/-/issues/510#proposal\n\n## :radio: API changes\n\n### New endpoint: `PUT /api/:version/internal/registry/repositories/:path/migration/status`\n\n* ~backend tasks:\n  * Check for authentication\n    * Only requests with the Container Registry [secret](https://gitlab.com/gitlab-org/gitlab/-/blob/71becb2a21d6b9ae3483ec8ae6dfc6320ea3a9a5/lib/api/container_registry_event.rb#L16) are allowed.\n  * Check for migration `status` coherence\n  * If current status is `pre_import_complete`:\n     * Execute `container_repository.finish_pre_import`\n     * Execute `container_repository.start_import`\n  * If current status is `imported`:\n     * Execute `container_repository.finish_import`\n     * Log all the `migration_*` timestamps\n* Possible response codes:\n  * `200 OK` Everything is fine.\n  * `400 BadRequest` if called for a container repository that is not in the right migration state with a body similar to this one:\n      ```json\n      { \"message\": \"400 Bad request - Wrong migration state(\u003ccurrent migration state\u003e) for status \u003cstatus value sent\u003e }\n      ```\n  * `401 Unauthorized` if the secret is missing.","state":"closed","created_at":"2022-01-06T23:54:33.358Z","updated_at":"2022-02-03T07:16:32.111Z","closed_at":"2022-02-02T08:55:00.279Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","Package:P1","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349742","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349742","notes":"https://gitlab.com/api/v4/projects/278964/issues/349742/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349742/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349742","relative":"#349742","full":"gitlab-org/gitlab#349742"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100224058,"iid":349741,"project_id":278964,"title":"Registry phase 2 migration: Client class","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7575 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\n## :mailbox_with_mail: Registry client changes\n\nThe custom API that the Container Registry is going to provide for the migration is exposed through a custom \"namespace\" (`/gitlab/*`). See https://gitlab.com/gitlab-org/container-registry/-/blob/master/docs-gitlab/api.md#import-repository.\n\nThis namespace is bound to evolve and see more additions. I think that we should take this opportunity to have a separate class than [actual one](https://gitlab.com/gitlab-org/gitlab/-/blob/d4071d5ac1be7ca6e5a45706ccc815f19239477a/lib/container_registry/client.rb). Actually, we could even simply extend the existing class. This helps with choosing the right client depending on the Container Registry type that is currently used:\n\n* GitLab Container Registry: use the extended client class.\n* Third party Container Registry: use the non extended client class.\n\nWe might need to update `app/services/update_container_registry_info_service.rb` to accommodate the fact that we need to check that the Container Registry support the update API endpoints. The result of that check will determine the right container registry client class to use.","state":"closed","created_at":"2022-01-06T23:54:16.152Z","updated_at":"2022-02-17T17:43:14.287Z","closed_at":"2022-01-26T07:59:05.465Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","Package:P1","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349741","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349741","notes":"https://gitlab.com/api/v4/projects/278964/issues/349741/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349741/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349741","relative":"#349741","full":"gitlab-org/gitlab#349741"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":100224006,"iid":349740,"project_id":278964,"title":"Registry phase 2 migration: Database/model changes","description":"## Context\n\nThe context for this issue can be viewed in the epic https://gitlab.com/groups/gitlab-org/-/epics/7316 and the breakdown of work can be viewed in this comment https://gitlab.com/groups/gitlab-org/-/epics/7316#note_792633854.\n\n## Database changes\n\nNew columns for `application_settings` - these settings will be adjusted over time as we slowly make our way through importing all of the container repositories:\n\n* `container_registry_max_tags_count` - The maximum number of tags we will allow a container repository to have to qualify for import.\n* `container_registry_import_max_retries` - The number of import retries to try before skipping the import.\n* `container_registry_import_start_max_retries` - The number of retries to enqueue the import before skipping.\n* `container_registry_import_max_step_duration` - Consider aborting or skipping the import if it is taking longer than this value.\n* `container_registry_import_target_plan` - The plan to import from (we are starting with 'free').\n* `container_registry_import_created_before` - Container repositories created before this date will qualify for import (end of 14.7, or before 2022-01-23).\n\nNew columns for `container_repositories`:\n\n* `migration_state` - The current import state of the container repository.\n* `migration_pre_import_started_at` - When the pre-import process started.\n* `migration_pre_import_done_at` - When the pre-import process finished.\n* `migration_import_started_at` - When the import process started.\n* `migration_import_done_at` - When the import process finished.\n* `migration_skipped_reason` - Reason why the container repository import may have been skipped.\n* `migration_skipped_at` - When the import was skipped.\n* `migration_aborted_in_state` - What `migration_state` the container repository was in when it was aborted.\n* `migration_retries_count` - Number of retries for the container repository.","state":"closed","created_at":"2022-01-06T23:49:32.347Z","updated_at":"2022-01-20T02:20:50.655Z","closed_at":"2022-01-20T02:20:50.604Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","Package:P1","backend","database","devops::package","group::package registry","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349740","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349740","notes":"https://gitlab.com/api/v4/projects/278964/issues/349740/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349740/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349740","relative":"#349740","full":"gitlab-org/gitlab#349740"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100223792,"iid":349739,"project_id":278964,"title":"Roadmap - Open closed as progress bar","description":"## Problem\n\nA lot of organizations use a percentage of open/closed issues to track completion.\n\n## JTBD\n\nAs a PM, I want to view the progress bars as either percentage of weight complete or percentage of open/closed issues.\n\n## Solution\n\n- [ ] See design for progress bar: https://gitlab.com/gitlab-org/gitlab/-/issues/349739/designs/Epic_progress_bar.png\n- [ ] Add setting in sidebar, please refer to https://gitlab.com/gitlab-org/gitlab/-/issues/345158/designs/Roadmap_settings.png\n- [ ] Add URL param to persist setting (weight or issue status). Added context: https://gitlab.com/gitlab-org/gitlab/-/issues/345158#note_824144656\n\n\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-01-06T23:36:01.004Z","updated_at":"2022-03-02T17:20:25.087Z","closed_at":"2022-02-18T04:12:11.726Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["GitLab Premium","Stretch","devops::plan","direction","documentation","frontend","group::product planning","section::dev","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4669960,"username":"cdybenko","name":"Christen Dybenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4669960/avatar.png","web_url":"https://gitlab.com/cdybenko"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":9,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349739","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349739","notes":"https://gitlab.com/api/v4/projects/278964/issues/349739/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349739/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349739","relative":"#349739","full":"gitlab-org/gitlab#349739"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7357,"epic":{"id":416523,"iid":7357,"title":"Completion of epic by \"open vs closed\" issue count","url":"/groups/gitlab-org/-/epics/7357","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100221234,"iid":349729,"project_id":278964,"title":"Redirect Static Site Editor traffic to the Web Editor or Web IDE","description":"## Problem to solve\n\nAfter the removal of the Static Site Editor, there may be traffic coming into GitLab that would result in a 404. \n\n## Proposal\n\nRedirect traffic from the Static Site Editor to the Web IDE, with the correct file open.","state":"closed","created_at":"2022-01-06T21:40:37.547Z","updated_at":"2022-05-11T18:25:12.406Z","closed_at":"2022-03-29T20:10:31.683Z","closed_by":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"labels":["auto updated"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349729","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349729","notes":"https://gitlab.com/api/v4/projects/278964/issues/349729/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349729/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349729","relative":"#349729","full":"gitlab-org/gitlab#349729"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7351,"epic":{"id":415906,"iid":7351,"title":"Remove Static Site Editor","url":"/groups/gitlab-org/-/epics/7351","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100220580,"iid":349724,"project_id":278964,"title":"Set a rule limit on ProcessScanResultPolicyService","description":"As [discussed](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76595#note_790503449) in this MR(!76595). Setting a limit to the amount of rules is important prior to enabling this feature flag.\n\nAnd as proposed in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76595#note_802561635 , we will limit each policy to 5 rules summing a total of maximum of 25 rules per repository.\n\n\n#### Implementation plan\n\n- [x] ~backend Add limit as part of [the process](https://gitlab.com/gitlab-org/gitlab/-/blob/27c8c592a43c9a4f652ac3399a81a9fd68b2d334/ee/app/services/security/security_orchestration_policies/process_scan_result_policy_service.rb#L30-34) scan result jobs.\n- [x] ~backend And/or add the limit on [the schema file](https://gitlab.com/gitlab-org/gitlab/-/blob/27c8c592a43c9a4f652ac3399a81a9fd68b2d334/ee/app/validators/json_schemas/security_orchestration_policy.json#L239). \n- [x] ~documentation Update this information as part of the policy documentation","state":"closed","created_at":"2022-01-06T21:08:55.877Z","updated_at":"2022-01-17T19:32:58.818Z","closed_at":"2022-01-17T19:32:58.802Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["auto updated","backend","devops::govern","feature::enhancement","group::security policies","maintenance::refactor","section::sec","secure merge request approval","type::feature","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":33100,"username":"mayra-cabrera","name":"Mayra Cabrera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/33100/avatar.png","web_url":"https://gitlab.com/mayra-cabrera"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349724","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349724","notes":"https://gitlab.com/api/v4/projects/278964/issues/349724/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349724/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349724","relative":"#349724","full":"gitlab-org/gitlab#349724"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100216873,"iid":349718,"project_id":278964,"title":"Explore KAS RAM usage and enable autoscaling on RAM","description":"## Problem to solve\n\nKas RAM capacity issues are [causing some concern](https://gitlab.com/gitlab-com/gl-infra/capacity-planning/-/issues/incident/25\n).\n## Definition of done\n- [x] Research and better understand Kas Ram usage patterns. Use data from profiler https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/1520.\n- [x] Change Chart to autoscale on RAM usage rather than CPU usage. See https://gitlab.com/gitlab-com/gl-infra/production/-/issues/5918 for the background.","state":"closed","created_at":"2022-01-06T19:20:45.029Z","updated_at":"2022-11-08T22:59:08.662Z","closed_at":"2022-10-25T22:06:26.983Z","closed_by":{"id":4855585,"username":"ash2k","name":"Mikhail Mazurskiy","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a3161684bd29f5016064a6c16ccd3bc7?s=80\u0026d=identicon","web_url":"https://gitlab.com/ash2k"},"labels":["candidate::15.0","corrective action","devops::configure","group::configure","missed:14.10","missed:14.8","missed:14.9","section::ops","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4855585,"username":"ash2k","name":"Mikhail Mazurskiy","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a3161684bd29f5016064a6c16ccd3bc7?s=80\u0026d=identicon","web_url":"https://gitlab.com/ash2k"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":4855585,"username":"ash2k","name":"Mikhail Mazurskiy","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a3161684bd29f5016064a6c16ccd3bc7?s=80\u0026d=identicon","web_url":"https://gitlab.com/ash2k"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349718","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349718","notes":"https://gitlab.com/api/v4/projects/278964/issues/349718/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349718/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349718","relative":"#349718","full":"gitlab-org/gitlab#349718"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6730,"epic":{"id":347045,"iid":6730,"title":"Kubernetes Agent reliability, observability, operational work","url":"/groups/gitlab-org/-/epics/6730","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":100215398,"iid":349713,"project_id":278964,"title":"Discussion: Avoid Gitlab.dev_env_or_com?","description":"I think `Gitlab.dev_env_or_com?` should be avoided for \"feature\" development, because the dev environment shouldn't work as if it's gitlab.com.\n\nQA test fail https://gitlab.com/gitlab-org/gitlab/-/issues/349626","state":"closed","created_at":"2022-01-06T18:34:02.489Z","updated_at":"2022-03-11T00:29:54.766Z","closed_at":"2022-03-11T00:29:54.725Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["auto updated","workflow::in review"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349713","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349713","notes":"https://gitlab.com/api/v4/projects/278964/issues/349713/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349713/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349713","relative":"#349713","full":"gitlab-org/gitlab#349713"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100211273,"iid":349701,"project_id":278964,"title":"Add test coverage for empty todos list","description":"A [bug](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77402) sneaked in due to lack of test coverage for an empty todo list that ended up resulting in a `500` error. \n\nThe said bug, was due to using `_s` (undefined method) rather than `s_`. Our pipelines did not pick this bug up.\n\nLet's add some test coverage to ensure `app/views/dashboard/todos/index.html.haml` is tested properly to catch any bugs like this. \n\nOne test case could have caught this bug if we tested that if a user had no todos `current_user.todos.any?` that the expected content was rendered properly.\n\nI think the spec that makes the most sense is `spec/features/dashboard/todos/todos_spec.rb`","state":"closed","created_at":"2022-01-06T16:42:11.264Z","updated_at":"2022-01-16T09:12:23.966Z","closed_at":"2022-01-16T09:12:23.953Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["auto updated","devops::manage","frontend","group::import","section::dev","type::feature","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349701","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349701","notes":"https://gitlab.com/api/v4/projects/278964/issues/349701/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349701/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349701","relative":"#349701","full":"gitlab-org/gitlab#349701"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100210452,"iid":349697,"project_id":278964,"title":"Backfill SSL verification for existing CI integrations with known-good hostnames","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nWrite a data migration to enable SSL verification on existing records for certain integrations with known-good hostnames:\n\n- `Integrations::DroneCi`: `cloud.drone.io`\n- `Integrations::Teamcity`: `\\A[^\\.]+\\.teamcity\\.com\\z`\n\nWe already implemented this migration in https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2043/diffs?commit_id=33596b7abbf1ae3545ba62690b1cc2a68f9189d3 for a security fix, but ended up handling this in the application since we're now discouraging migrations in security fixes (https://gitlab.com/gitlab-org/gitlab/-/issues/349151, https://gitlab.com/gitlab-org/release/docs/-/merge_requests/417).\n\nIn the release after this migration is added, we can also remove the application code again in the `Integrations::DroneCi` and `Integrations::Teamcity` models.\n\n### Availability \u0026 Testing\n\n* ~~Unit tests for the [associated MR already exist](https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2043/diffs?commit_id=33596b7abbf1ae3545ba62690b1cc2a68f9189d3#diff-content-2d33b3fbaef8a806fb650079234c68f0a55ac7e2)~~ (already implemented) :100: \n* There are existing tests around the migration\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes \n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e","state":"closed","created_at":"2022-01-06T16:21:59.998Z","updated_at":"2022-11-22T19:09:10.958Z","closed_at":"2022-05-16T11:44:13.756Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Integrations","Deliverable","backend","devops::manage","group::integrations","quad-planning::complete-action","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-05-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349697","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349697","notes":"https://gitlab.com/api/v4/projects/278964/issues/349697/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349697/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349697","relative":"#349697","full":"gitlab-org/gitlab#349697"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100197261,"iid":349677,"project_id":278964,"title":"[VSA] Clearer labelling for custom / saved value stream dropdown","description":"### Problem\n\nIt isn't immediately clear what the saved value stream dropdown is. Especially to new users.\n\n### Proposal\n\nAdd a label next to the dropdown.\n\n| Stacked | Inline | Integrated with title |\n| ------ | ------ | ------ |\n| ![Screenshot_2022-01-07_at_16.00._2x](/uploads/e8fe8a5f408fa190be11c54e98b96f89/Screenshot_2022-01-07_at_16.00._2x.png) | ![Screenshot_2022-01-07_at_16.00._2x](/uploads/d2c8917dac843c5b185e7c7f74064e9c/Screenshot_2022-01-07_at_16.00._2x.png) | ![Screenshot_2022-01-07_at_15.56.](/uploads/9fcc476f8aeac72bc78b8361611b02a6/Screenshot_2022-01-07_at_15.56..gif) |\n\n## MVC solution\n\nAfter discussion and revisions the MVC solution will\n\n- Add a label to the dropdown\n- Move the dropdown to own line and positioned to the left to increase prominence (F-shaped pattern of reading)\n\n| Before | After |\n| ------ | ------ |\n| ![image](/uploads/faa98684a183a987e4d1bffa3f3dcf24/image.png) | ![image](/uploads/882bf773fa3ad8a654f4d07eeb707d66/image.png) |\n\n### [🕵️ Annotated Figma file →](https://www.figma.com/file/f4ax05m9prTMy9k7lkPFvy/?node-id=1514%3A5762)","state":"closed","created_at":"2022-01-06T12:05:00.027Z","updated_at":"2022-06-21T12:02:48.554Z","closed_at":"2022-05-26T00:44:17.459Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Deliverable","GitLab Premium","OKR","SUS::Impacting","UX","UX scorecard-rec","devops::manage","feature::enhancement","frontend","group::optimize","priority::2","section::dev","severity::4","type::feature","usability","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":4583714,"username":"npost","name":"Nick Post","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4583714/avatar.png","web_url":"https://gitlab.com/npost"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349677","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349677","notes":"https://gitlab.com/api/v4/projects/278964/issues/349677/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349677/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349677","relative":"#349677","full":"gitlab-org/gitlab#349677"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7345,"epic":{"id":415530,"iid":7345,"title":"UX Scorecard recommendations - Manage:Optimize FY22-Q4","url":"/groups/gitlab-org/-/epics/7345","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100193322,"iid":349670,"project_id":278964,"title":"Add training loading status to vulnerability details page","description":"Add training loading status to the vulnerability details page \n\nWhen we are querying we'll use the [skeleton loading](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-skeleton-loading--default) pattern\n\n![](https://gitlab.com/gitlab-org/gitlab/uploads/407457dc19778c8f05e5743dd2eed64d/2021-11-18_at_10.16_PM.png)\n\nAnd if no training is found, here's how it should look like\n\n![](https://gitlab.com/gitlab-org/gitlab/uploads/e0bf3f0e45aa5ce00ac539ec9554bb69/image.png)\n\nNote this issue is part of a MR series, please see here \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346066#note_802988533","state":"closed","created_at":"2022-01-06T10:32:14.147Z","updated_at":"2022-01-31T03:23:18.230Z","closed_at":"2022-01-29T04:34:51.679Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["auto updated","devops::secure","frontend","group::threat insights","section::sec","type::feature"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349670","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349670","notes":"https://gitlab.com/api/v4/projects/278964/issues/349670/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349670/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349670","relative":"#349670","full":"gitlab-org/gitlab#349670"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100193079,"iid":349669,"project_id":278964,"title":"Make API call to fetch training from vendor","description":"![2022-01-06_at_11.27_AM](/uploads/561723a3ed7275da15c3ef07e046be52/2022-01-06_at_11.27_AM.png)\n\nPlease see this spike on how to use the API from our providers \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346069\n\nNote this issue is part of a MR series, please see here \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346066#note_802988533","state":"closed","created_at":"2022-01-06T10:27:01.255Z","updated_at":"2022-02-02T23:00:44.236Z","closed_at":"2022-01-29T04:35:20.160Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["devops::secure","frontend","group::threat insights","section::sec","type::feature"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349669","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349669","notes":"https://gitlab.com/api/v4/projects/278964/issues/349669/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349669/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349669","relative":"#349669","full":"gitlab-org/gitlab#349669"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100189387,"iid":349661,"project_id":278964,"title":"VersionApp limit the size of logs","description":"Follow up from https://gitlab.com/gitlab-com/gl-infra/infrastructure/-/issues/11066#note_394355761\n\nLimit the size of logs on the application side. We observed a very large spike in space consumption, and looking at the version application logs it looks like some very large request parameter hashes from `UsageDataController#create` are begin logged.","state":"closed","created_at":"2022-01-06T09:27:03.050Z","updated_at":"2022-02-04T12:39:51.185Z","closed_at":"2022-01-26T14:03:41.227Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["PI System Reliability and Monitoring","Unplanned","backend","devops::growth","group::product intelligence","section::growth","type::maintenance","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":4,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349661","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349661","notes":"https://gitlab.com/api/v4/projects/278964/issues/349661/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349661/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349661","relative":"#349661","full":"gitlab-org/gitlab#349661"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100173865,"iid":349654,"project_id":278964,"title":"Unitless number in CSS `calc()` causes the computation to fail","description":"See [this comment](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77040/diffs#note_802637310) for context.\n\nWhen switching from Sass computations (finalized as a single value before output) to CSS `calc` computations (computed by the rendering engine in the browser), we need to ensure that each number has an appropriate unit.\n\nIn many cases, this will probably be some measurement unit like `px` or `rem`, but it could also be `%` or `vw` (for example).\n\n### Problem\n\nThe Diff File header in Merge Requests does not stick to the top of the screen as you scroll.\n\n### Cause\n\n[CSS `calc()` cannot have unitless values in the expression](https://gitlab.com/gitlab-org/gitlab/-/blob/f5668e0a8dd6e5c5266313a3b9cd5e33583942a1/app/assets/stylesheets/framework/diffs.scss#L37).\n\n### Fix\n\nAdd `px` to `11`.\n\n### Notes\n\nAs we (rightly should) switch to more native CSS and less Sass, we need to be careful that we understand the differences in those engines so that things like this don't slip through.  \n\nOne especially tricky part of this is that we're still using Sass to interpolate variables into the stylesheet, which are then ADDED by the native CSS engine. There are a lot of potential vectors for unitless values to slip in.","state":"closed","created_at":"2022-01-06T00:59:06.048Z","updated_at":"2022-01-13T14:04:53.817Z","closed_at":"2022-01-07T19:28:03.134Z","closed_by":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"labels":["Category:Code Review Workflow","devops::create","frontend","group::code review","merge requests","regression","regression:14.7","section::dev","type::bug"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"type":"ISSUE","assignee":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349654","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349654","notes":"https://gitlab.com/api/v4/projects/278964/issues/349654/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349654/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349654","relative":"#349654","full":"gitlab-org/gitlab#349654"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100171046,"iid":349640,"project_id":278964,"title":"Add member namespace_id DB constraints","description":"When migration of members is finished and when project namespace is backfilled for each project, we can:\n\nWhen `namespace_id` column of the `members` table has been backfilled:\n\n- add NOT NULL constraint for `member_namespace_id` column\n- change `add_concurrent_foreign_key :members, :namespaces, column: :namespace_id, on_delete: :nullify` to `add_concurrent_foreign_key :members, :namespaces, column: :namespace_id, on_delete: :cascade`\n\n\n----\n\n### Availability and Testing \n- Please run `package-and-qa` job for MR to ensure no regressions occur. Some areas to keep an eye on for errors would be during resource fabrication (when adding members to a project or group, etc.), as well as in any after hooks for errors on resource deletion (deleting a user, group or project).","state":"closed","created_at":"2022-01-05T22:29:13.880Z","updated_at":"2022-11-03T20:42:41.246Z","closed_at":"2022-09-19T03:30:47.828Z","closed_by":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"labels":["Deliverable","devops::manage","group::organization","missed-deliverable","missed:15.0","missed:15.3","namespace","quad-planning::complete-action","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349640","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349640","notes":"https://gitlab.com/api/v4/projects/278964/issues/349640/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349640/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349640","relative":"#349640","full":"gitlab-org/gitlab#349640"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7054,"epic":{"id":379658,"iid":7054,"title":"Consolidate Group and Project member management","url":"/groups/gitlab-org/-/epics/7054","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100151649,"iid":349613,"project_id":278964,"title":"Cache data - Scalable Metrics Dictionary","description":"We want to store the metric dictionary data on the client, so we don't need to load 1.5MB every time.\n\nReference at https://developers.google.com/web/ilt/pwa/caching-files-with-service-worker.","state":"closed","created_at":"2022-01-05T14:35:36.755Z","updated_at":"2022-02-08T15:39:48.574Z","closed_at":"2022-02-08T15:39:48.555Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["devops::growth","feature::enhancement","frontend","group::product intelligence","section::growth","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349613","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349613","notes":"https://gitlab.com/api/v4/projects/278964/issues/349613/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349613/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349613","relative":"#349613","full":"gitlab-org/gitlab#349613"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6522,"epic":{"id":321040,"iid":6522,"title":"Scalable Metrics Dictionary","url":"/groups/gitlab-org/-/epics/6522","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100151637,"iid":349612,"project_id":278964,"title":"Use date range for iteration display and make title optional","description":"## Proposal\n\n1. Make iteration title optional\n2. Use iteration dates as the primary attributes for display (when listing/showing iterations)\n\n## Why?\n\nThe idea of iteration (or sprint) is allowing measurements of team velocity and capacity through timeboxing as @cwoolley-gitlab describes well in this note https://gitlab.com/gitlab-org/gitlab/-/issues/349537#note_801322905\n\n\u003e In other words, the \"categorization\" or \"naming\" of groups of issues is unrelated and orthogonal to iterations - that is what labels, epics, and other semantic grouping approaches are used for.\n\nIn fact, we observed that users often embed dates and team names in iterations titles as a hack to make iterations readily searchable and distinguishable.  The cadence feature currently in development will provide the ability to group (done in  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63643) and find (WIP https://gitlab.com/gitlab-org/gitlab/-/issues/336611) iterations by their cadences.\n\n\n# Implementation tasks\n\n- [-] ~backend Make iteration sequence attribute available via GraphQL and REST API\n\n    (update: we won't make use of iteration sequence. See: https://gitlab.com/gitlab-org/gitlab/-/issues/349537#note_803716187)\n\n- [x] ~frontend Update various iteration components to use date range when displaying iterations\n\n    - !78039: updates iteration lists\n    - !78361: updates iteration dropdowns\n    - The iteration notification message needs to be updated to include cadence (the task is tracked separately in #350318).\n\n- [-] ~backend ~~Make iteration an optional attribute !78044~~ To be tracked in https://gitlab.com/gitlab-org/gitlab/-/issues/353350\n\n- [-] ~frontend ~~Update the iteration creation/edit form to indicate title is optional~~ (we are deprecating iteration titles).\n\n\n**related issue**","state":"closed","created_at":"2022-01-05T14:35:27.834Z","updated_at":"2022-06-20T22:35:58.595Z","closed_at":"2022-02-23T23:59:57.815Z","closed_by":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"labels":["Deliverable","UX","backend","devops::plan","documentation","feature::enhancement","frontend","group::project management","missed-deliverable","missed:14.7","section::dev","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"}],"author":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"type":"ISSUE","assignee":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349612","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":4,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349612","notes":"https://gitlab.com/api/v4/projects/278964/issues/349612/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349612/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349612","relative":"#349612","full":"gitlab-org/gitlab#349612"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7567,"epic":{"id":444020,"iid":7567,"title":"Iteration Cadence GA tasks","url":"/groups/gitlab-org/-/epics/7567","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":43344,"iid":52,"sequence":9,"group_id":9970,"title":"Iteration 9","description":null,"state":3,"created_at":"2021-12-21T00:05:01.990Z","updated_at":"2022-03-02T00:05:02.143Z","start_date":"2022-02-16","due_date":"2022-03-01","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/43344"},"health_status":null},{"id":100150221,"iid":349608,"project_id":278964,"title":"Display not enabled training section in vulnerability details page","description":"Display \"not enabled\" training section on the vulnerability details page when the training is disabled of ALL providers in the configuration page \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346057\n\n| Not Enabled | Enabled (reference only) |\n| ------ | ------ |\n| ![image](/uploads/d12710d88b2e551a21d1170faad2555d/image.png) | ![2022-01-06_at_11.30_AM](/uploads/b099631457030fa058503597e4d0f2d2/2022-01-06_at_11.30_AM.png) |\n\n\nHowever, if at least one training provider is enabled, we will simply display the \"training not found\" mock if applicable:\n\n\u003cimg src=\"/uploads/06dcb17bfb8ca5c482533e9db1531b87/image.png\" height=\"100px\"\u003e\n\n---\n\nNote this issue is part of a MR series, please see here \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346066#note_802988533","state":"closed","created_at":"2022-01-05T14:09:43.871Z","updated_at":"2022-01-24T03:36:02.395Z","closed_at":"2022-01-18T16:07:24.052Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["devops::secure","frontend","group::threat insights","section::sec","type::feature"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349608","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349608","notes":"https://gitlab.com/api/v4/projects/278964/issues/349608/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349608/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349608","relative":"#349608","full":"gitlab-org/gitlab#349608"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100149548,"iid":349607,"project_id":278964,"title":"Global Search - Update placeholder text","description":"## Proposal\n\nUpdate the global search placeholder text from \"Search of jump to…\" to \"Search or go to…\" because \"go\" is clearer and more concise than \"jump.\"\n\nAnecdotally, \"go\" is also much more common than \"jump\" in [Google Trends](https://trends.google.com/trends/explore?q=jump,go) data, and [Google Books Ngram Viewer](https://books.google.com/ngrams/graph?content=jump%2C+go\u0026year_start=1800\u0026year_end=2019\u0026corpus=26\u0026smoothing=3\u0026direct_url=t1%3B%2Cjump%3B%2Cc0%3B.t1%3B%2Cgo%3B%2Cc0).\n\n| **Before** | **After** |\n| ------ | ------ |\n| ![CleanShot_2022-01-05_at_07.36.23_2x](/uploads/47ebf7b664005ff9f7962b3a72dfa4b5/CleanShot_2022-01-05_at_07.36.23_2x.png) | ![CleanShot_2022-01-05_at_07.36.59_2x](/uploads/fbcee5b2594fe754d76857c41532b5db/CleanShot_2022-01-05_at_07.36.59_2x.png) |","state":"closed","created_at":"2022-01-05T13:57:35.758Z","updated_at":"2022-05-30T15:59:58.507Z","closed_at":"2022-01-05T16:50:45.856Z","closed_by":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"labels":["Category:Design System","devops::data_stores","group::global search","navigation"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"}],"author":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"type":"ISSUE","assignee":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349607","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349607","notes":"https://gitlab.com/api/v4/projects/278964/issues/349607/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349607/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349607","relative":"#349607","full":"gitlab-org/gitlab#349607"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100147438,"iid":349605,"project_id":278964,"title":"Remove vulnerability_occurrences temporary index on report type","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nIn https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76151 we created a new temporary index on the `vulnerability_occurrences` table in order to fix an issue with `raw_metadata` (https://gitlab.com/gitlab-org/gitlab/-/issues/347145).\n\nThat index needs to be removed in %\"14.8\" since it is only used for performing the migration.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n1. Create a new database migration\n   1. Up: `remove_concurrent_index_by_name :vulnerability_occurrences, tmp_idx_vulnerability_occurrences_on_id_where_report_type_7_99`\n   1. Down: `add_concurrent_index :vulnerability_occurrences, :id, where: 'report_type IN (7, 99)', name: tmp_idx_vulnerability_occurrences_on_id_where_report_type_7_99`\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2022-01-05T13:20:17.893Z","updated_at":"2022-03-22T06:49:35.357Z","closed_at":"2022-03-22T06:49:35.336Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Category:Vulnerability Management","devops::govern","group::security policies","missed:14.8","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349605","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349605","notes":"https://gitlab.com/api/v4/projects/278964/issues/349605/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349605/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349605","relative":"#349605","full":"gitlab-org/gitlab#349605"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100138366,"iid":349598,"project_id":278964,"title":"Add namespace_id reference to routes","description":"To consolidate routing (and eventually use only namespaces for routes), we first add `namespace_id` reference column to `routes` table. Eventually routes' namespace_id will serve as a replacement for polymorphic `source` reference. In a next phase we backfill `namespace_id` with:\n\n* for `Namespace` source_type `namespace_id`=`source_id` (IOW for groups and user namespaces it points to the same source_id)\n* for `Project` source_type `namespace_id` will be set to project's project namespace (project.project_namespace) when backfilled in https://gitlab.com/gitlab-org/gitlab/-/issues/348981\n\nScope of this issue is to add namespace reference to routes.\n\nRelated to https://gitlab.com/groups/gitlab-org/-/epics/7184#note_776564877","state":"closed","created_at":"2022-01-05T10:30:09.644Z","updated_at":"2022-02-17T08:30:21.183Z","closed_at":"2022-01-13T14:12:29.615Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["auto updated","quad-planning::complete-no-action"],"milestone":null,"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349598","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349598","notes":"https://gitlab.com/api/v4/projects/278964/issues/349598/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349598/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349598","relative":"#349598","full":"gitlab-org/gitlab#349598"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7184,"epic":{"id":392209,"iid":7184,"title":"Consolidate Group and Project routing","url":"/groups/gitlab-org/-/epics/7184","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100128319,"iid":349588,"project_id":278964,"title":"Remove ff_external_audit_events_namespace feature flag","description":"## Overview\n\nDuring %14.7, we set the `ff_external_audit_events_namespace` feature flag to be defaulted to true. We should remove it in a future milestone.\n\n## Implementation plan\n\n* Remove feature flag from codebase.\n* Update documentation to show that feature flag was removed.\n\nRelated to #338939.","state":"closed","created_at":"2022-01-05T07:55:01.005Z","updated_at":"2022-04-01T10:01:02.218Z","closed_at":"2022-01-27T07:48:44.684Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["auto updated","devops::manage","feature flag","feature::addition","group::compliance","ideal for new hires","maintenance::refactor","priority::4","section::dev","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349588","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349588","notes":"https://gitlab.com/api/v4/projects/278964/issues/349588/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349588/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349588","relative":"#349588","full":"gitlab-org/gitlab#349588"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100111543,"iid":349566,"project_id":278964,"title":"Follow two-step merge request creation process for \"Create merge request\" within an issue","description":"### ➡️ See [parent epic](https://gitlab.com/groups/gitlab-org/-/epics/7337) for more details ⬅️\n\n### Problem\n\n- Most `Create merge request` buttons in the UI open up the `create` form where the user can fill in the MR details before actually submitting the form\n- The `Create merge request` button within each issue doesn't follow that process; instead, it auto-magically creates the open MR, bypassing the create form entirely. This can be unexpected behavior and is inconsistent with the majority of the buttons.\n\n#### Proposal\n\n`Create merge request` should lead to the `create` form\n\n![Screen_Shot_2022-01-04_at_2.02.47_PM](/uploads/7ad81b4d1f69960cd2e58ef229fa6274/Screen_Shot_2022-01-04_at_2.02.47_PM.png)","state":"closed","created_at":"2022-01-04T20:56:49.199Z","updated_at":"2022-11-22T10:07:38.732Z","closed_at":"2022-02-01T14:40:55.083Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Code Review Workflow","Deliverable","devops::create","feature::enhancement","frontend","group::code review","section::dev","type::feature","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349566","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349566","notes":"https://gitlab.com/api/v4/projects/278964/issues/349566/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349566/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349566","relative":"#349566","full":"gitlab-org/gitlab#349566"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7337,"epic":{"id":414301,"iid":7337,"title":"Always show merge request form when clicking \"Create merge request\"","url":"/groups/gitlab-org/-/epics/7337","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100098920,"iid":349560,"project_id":278964,"title":"Conversion Experiment Cleanup: expose free users to required merge request approvals","description":"\u003c!-- Title suggestion: [Experiment Name] Successful Cleanup --\u003e\n\n## Summary\n\nThe experiment https://gitlab.com/gitlab-org/gitlab/-/issues/346176+ is currently rolled out to 100% of users and has been deemed a success.\nThe changes need to become an official part of the product.\n \n### Associated assets:\n* Epic: https://gitlab.com/groups/gitlab-org/-/epics/3695\n* Rollout issue: https://gitlab.com/gitlab-org/gitlab/-/issues/346176\n* Experiment key / feature flag name: `promote_mr_approvals_in_free`\n\n## Steps\n\n- [X] Determine whether the feature should apply to SaaS and/or self-managed\n     - SaaS only\n- [X] Determine whether the feature should apply to EE - and which tiers - and/or Core\n    - Free SaaS only\n- [X] Determine if tracking should be kept as is, removed, or modified.\n    - Tracking should be kept\n- [X] Ensure any relevant documentation has been updated.\n    - No documentation needs to be updated \n- [x] Consider changes to any `feature_category:` introduced by the experiment if ownership is changing (PM for Growth and PM for the new category as DRIs)\n    - No changes to any `feature_category` were introduced\n- [x] Check to see if the experiment introduced new design assets. Add them to the appropriate repos and document them if needed.\n- [ ] Optional: Migrate experiment to a default enabled [feature flag](https://docs.gitlab.com/ee/development/feature_flags) for one milestone and add a changelog. Converting to a feature flag can be skipped at the ICs discretion if risk is deemed low with consideration to both SaaS and (if applicable) self managed\n- [ ] In the next milestone, [remove the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) if applicable\n- [ ] After the flag removal is deployed, [clean up the feature/experiment feature flags](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) by running chatops command in `#production` channel\n- [ ] Ensure the corresponding [Experiment Rollout](https://gitlab.com/groups/gitlab-org/-/boards/1352542?label_name[]=devops%3A%3Agrowth\u0026label_name[]=growth%20experiment\u0026label_name[]=experiment-rollout) issue is updated","state":"closed","created_at":"2022-01-04T19:23:46.485Z","updated_at":"2022-09-28T14:12:11.448Z","closed_at":"2022-09-28T14:12:10.498Z","closed_by":{"id":11697411,"username":"jmontal","name":"Jay Montal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11697411/avatar.png","web_url":"https://gitlab.com/jmontal"},"labels":["Next Up","auto updated","devops::growth","feature flag","group::acquisition","growth experiment","missed:15.4","section::growth","type::maintenance"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11697411,"username":"jmontal","name":"Jay Montal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11697411/avatar.png","web_url":"https://gitlab.com/jmontal"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":11697411,"username":"jmontal","name":"Jay Montal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11697411/avatar.png","web_url":"https://gitlab.com/jmontal"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349560","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":6},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349560","notes":"https://gitlab.com/api/v4/projects/278964/issues/349560/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349560/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349560","relative":"#349560","full":"gitlab-org/gitlab#349560"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3695,"epic":{"id":71984,"iid":3695,"title":"Expose free users to required merge request approvals","url":"/groups/gitlab-org/-/epics/3695","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100091735,"iid":349550,"project_id":278964,"title":"[VSA][FE] Move the stage navigation below the filter bar.","description":"### Problem to solve\n\nSome users confused how top metrics are calculated.\n\nIn [feedback](https://gitlab.com/groups/gitlab-org/-/epics/6046#note_796773738), a customer said: \"In the VSA window it is not obvious to me how the metrics at the top of the window are linked to the numbers at the bottom, it seems disjointed (section in red verses section in blue)– see [Example Screenshot]\".  At least one other user has reported similar confusion, relating to how the stage navigation metrics are calculated given that they are above the filter bar.\n\n### Proposal\n\nMove the stage navigation below the filter bar.  (See the [mockup](https://gitlab.com/gitlab-org/gitlab/-/issues/349550#note_804553490).)\n\n### Example Screenshot\n\n![Screen_Shot_2022-01-04_at_10.26.00_AM](/uploads/d326c70df834db492eacf73b9ef3b426/Screen_Shot_2022-01-04_at_10.26.00_AM.png)","state":"closed","created_at":"2022-01-04T16:30:17.328Z","updated_at":"2022-08-08T09:41:31.279Z","closed_at":"2022-04-28T01:37:04.549Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Category:Value Stream Management","Deliverable","OKR","SUS::Impacting","UX","UX scorecard-rec","devops::manage","feature::enhancement","frontend","group::optimize","priority::3","section::dev","severity::4","type::feature","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349550","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349550","notes":"https://gitlab.com/api/v4/projects/278964/issues/349550/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349550/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349550","relative":"#349550","full":"gitlab-org/gitlab#349550"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7345,"epic":{"id":415530,"iid":7345,"title":"UX Scorecard recommendations - Manage:Optimize FY22-Q4","url":"/groups/gitlab-org/-/epics/7345","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100064625,"iid":349527,"project_id":278964,"title":"MR Widget Telemetry: License compliance  add trackRedisCounterEvent","description":"This is a follow up for: https://gitlab.com/gitlab-org/gitlab/-/issues/343121\n\nIt was encountered that the current telemetry solution only is only tracking unique users but should also have a Counter Event.\n\nHow to do this was discussed for a similar tracking event [here](https://gitlab.com/gitlab-org/gitlab/-/issues/343123#note_753624456).\n\nIt is needed to add another call to `trackRedisCounterEvent` in `ee/app/assets/javascripts/vue_shared/license_compliance/mr_widget_license_report.vue`","state":"closed","created_at":"2022-01-04T09:15:42.533Z","updated_at":"2022-02-07T03:20:45.591Z","closed_at":"2022-02-02T09:55:30.834Z","closed_by":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"labels":["Category:License Compliance","auto updated","devops::create","frontend","group::composition analysis","instrumentation","merge request widget","missed:14.7","section::sec","type::feature","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"}],"author":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"type":"ISSUE","assignee":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"user_notes_count":11,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349527","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349527","notes":"https://gitlab.com/api/v4/projects/278964/issues/349527/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349527/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349527","relative":"#349527","full":"gitlab-org/gitlab#349527"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6857,"epic":{"id":363243,"iid":6857,"title":"Review telemetry data for MR widgets","url":"/groups/gitlab-org/-/epics/6857","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100052154,"iid":349515,"project_id":278964,"title":"Improve copy on delete modal in package","description":"## Problem\nThis issue stems from a UX scorecard heuristic evaluation. [video snippet](https://youtu.be/ryEpc3wSzhE?t=2178)\n\nThe copy on the delete modals in package could be improved. Words like `irreversible` may be confusing to users. \n\nThis modal is shown in 2 places:\n* Delete a package from the package list page (`Packages \u0026 Registries \u003e Package Registry \u003e Select ellipsis button \u003e Delete package`)\n* Delete the package from the package detail page (`Packages \u0026 Registries \u003e Package Registry \u003e Select package \u003e ellipsis button \u003e Delete package`)\n\n![Screen_Shot_2022-01-04_at_15.45.47](/uploads/d4be4e4214cd0b0cd3e1d2ed3714bebb/Screen_Shot_2022-01-04_at_15.45.47.png)\n\n| Current copy | Proposal |\n| ------ | ------ |\n| You are about to delete (package), this operation is irreversible, are you sure? [Cancel] [Delete] | You are about to delete (package), are you sure? [Cancel] [Permanently delete] |\n\n## Implementation guide\n\n- Change `Delete` to `Permanently delete` in https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/packages_and_registries/package_registry/pages/details.vue#L266\n- Remove the text `This operation is irreversible.` in https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/packages_and_registries/package_registry/pages/details.vue#L428-429 \u0026 https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/packages_and_registries/package_registry/components/list/packages_list.vue#L126\n- Make title \u0026 content of delete package modal within the list page \u0026 details page consistent","state":"closed","created_at":"2022-01-04T02:50:16.255Z","updated_at":"2022-10-16T21:39:06.834Z","closed_at":"2022-10-16T21:39:06.807Z","closed_by":{"id":9608331,"username":"katiemacoy","name":"Katie Macoy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9608331/avatar.png","web_url":"https://gitlab.com/katiemacoy"},"labels":["Category:Package Registry","Community contribution","Hacktoberfest","OKR","SUS::Impacting","Technical Writing","UX","UX scorecard-rec","devops::package","frontend","frontend-weight::1","good for new contributors","group::package registry","section::ops","severity::4","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":10886527,"username":"ali_o_kan","name":"Laurent Deketelaere","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10886527/avatar.png","web_url":"https://gitlab.com/ali_o_kan"}],"author":{"id":9608331,"username":"katiemacoy","name":"Katie Macoy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9608331/avatar.png","web_url":"https://gitlab.com/katiemacoy"},"type":"ISSUE","assignee":{"id":10886527,"username":"ali_o_kan","name":"Laurent Deketelaere","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10886527/avatar.png","web_url":"https://gitlab.com/ali_o_kan"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349515","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349515","notes":"https://gitlab.com/api/v4/projects/278964/issues/349515/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349515/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349515","relative":"#349515","full":"gitlab-org/gitlab#349515"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":100036555,"iid":349502,"project_id":278964,"title":"Make navigation themes translatable","description":"The following strings for the Navigation themes and the Syntax highlighting theme\n in the [Profile \u003e Preferences](https://gitlab.com/-/profile/preferences) are not translatable:\n\n```\nIndigo\nLight Indigo\n...\n\nWhite\nDark\n...\n\nFixed\nFluid\nFiles and Readme (default)\nActivity\n```\n\n![image](https://gitlab.com/groups/gitlab-org/-/uploads/536841d1bb8c5d7568a08edcdf1d95a1/image.png)","state":"closed","created_at":"2022-01-03T16:52:55.337Z","updated_at":"2022-01-06T21:48:31.237Z","closed_at":"2022-01-06T21:48:31.223Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349502","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349502","notes":"https://gitlab.com/api/v4/projects/278964/issues/349502/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349502/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349502","relative":"#349502","full":"gitlab-org/gitlab#349502"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7331,"epic":{"id":411780,"iid":7331,"title":"Strings that are not translatable","url":"/groups/gitlab-org/-/epics/7331","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100022576,"iid":349495,"project_id":278964,"title":"Codeowners can be bypassed for moved files","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nAfter a large movement of files inside of our monorepo we encountered that branches that are not rebased onto the latest change of the codeowners, can bypass the approvals required originally.\nIf you change a file in that commit at its original location, the diff shows the file merged at the new location but the codeowner check is running on the old location.\n\n### Steps to reproduce\n\nhttps://gitlab.com/PhilippBoeschen/codeowners-bypass is a reproduction of the issue inside of the merge requests you can see one example where the codeowner list is not applied correctly.\nAnd one example on the latest commit that shows the feature working as intended.\n\nHere's how to reproduce this state:\n```sh\ngit init\necho \"change #1\" \u003e a.txt\ngit add a.txt \ngit commit -m \"Add a.txt\" a.txt \necho \"/a.txt @Foo\" \u003e CODEOWNERS\ngit add CODEOWNERS \ngit commit -m \"Add codeowners\"\ngit mv a.txt b.txt\necho \"/b.txt @Foo\" \u003e CODEOWNERS\ngit commit -am \"Moving a.txt to b.txt with codeowners\"\ngit push\ngit checkout -b codeowners-bypass HEAD^\necho \"change #2\" \u003e\u003e a.txt\ngit commit -am \"Add new line to a.txt\"\ngit push -u origin codeowners-bypass\n\n# this just is the positive case\ngit checkout main\ngit checkout -b codeowners-approval-works HEAD\necho \u003e\u003e \"Change #3\" \u003e\u003e b.txt\ngit add b.txt \ngit commit -m \"Adding line to b.txt\"\ngit push -u origin codeowners-approval-works\n```\n\n### Example Project\n\nhttps://gitlab.com/PhilippBoeschen/codeowners-bypass\n\n### What is the current *bug* behavior?\n\nCodeowner rules for the destination file are not used.\n\n### What is the expected *correct* behavior?\n\nCodeowner rules for the destination file are used.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nIn theory running the merged result against the Codeowners file should prevent this from happening.\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-01-03T11:51:11.575Z","updated_at":"2022-06-21T12:01:44.362Z","closed_at":"2022-05-31T05:58:30.229Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["Category:Code Review Workflow","Deliverable","backend","customer","devops::create","group::code review","missed-deliverable","missed:15.0","priority::2","section::dev","severity::4","type::bug","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":10544005,"username":"PhilippBoeschen","name":"Philipp Böschen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/99d83d345835a8e7aa97282225037da7?s=80\u0026d=identicon","web_url":"https://gitlab.com/PhilippBoeschen"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":41,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349495","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349495","notes":"https://gitlab.com/api/v4/projects/278964/issues/349495/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349495/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349495","relative":"#349495","full":"gitlab-org/gitlab#349495"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99997974,"iid":349482,"project_id":278964,"title":"Make menu items in top nav translatable","description":"The following strings in the top navigation/menu are not translatable:\n\n```\nGroups\nMilestones\nSnippets\nActivity\nEnvironments\nOperations\nSecurity\n```","state":"closed","created_at":"2022-01-02T19:01:45.381Z","updated_at":"2022-01-10T07:55:11.880Z","closed_at":"2022-01-10T07:55:11.865Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349482","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349482","notes":"https://gitlab.com/api/v4/projects/278964/issues/349482/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349482/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349482","relative":"#349482","full":"gitlab-org/gitlab#349482"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7331,"epic":{"id":411780,"iid":7331,"title":"Strings that are not translatable","url":"/groups/gitlab-org/-/epics/7331","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99934180,"iid":349440,"project_id":278964,"title":"Consider removing package_file index","description":"The following discussion from !76767 should be addressed:\n\n- [ ] @sabrams started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76767#note_798611282): \n\n    \u003e It seems as though all queries for package files will now include a `status` filter: we generally select all files for a given package of a given status. \n    \u003e \n    \u003e This makes me wonder if we can remove the index:\n    \u003e \n    \u003e ```sh\n    \u003e \"index_packages_package_files_on_package_id_id\" btree (package_id, id)\n    \u003e ```\n    \u003e \n    \u003e The new index takes up about 850MB, so the existing one is likely similar and would be worth removing if we are able to. Since package files are accessed widely throughout the package code, I suggest we open a followup to check usage of `index_packages_package_files_on_package_id_id` in the milestone following the addition of this new index. If it is no longer being used, we can remove it.\n\n### Proposal\n\nMonitor the `index_packages_package_files_on_package_id_id` index on `package_files`. After `index_packages_package_files_on_package_id_status_and_id` is added, if `index_packages_package_files_on_package_id_id` is no longer being used, it can be removed. If it is still being heavily used, this issue can be closed.\n\n#### Query\n\nTo check the index usage\n\n```sql\nSELECT idx_scan, idx_tup_read, idx_tup_fetch \nFROM pg_stat_all_indexes \nWHERE indexrelname = 'index_packages_package_files_on_package_id_id';\n```","state":"closed","created_at":"2021-12-30T22:36:10.858Z","updated_at":"2022-01-31T23:00:19.067Z","closed_at":"2022-01-31T23:00:19.049Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Package Registry","backend","bug::performance","devops::package","group::package registry","maintenance::refactor","ruby","section::ops","type::maintenance","workflow::blocked"],"milestone":null,"assignees":[],"author":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349440","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349440","notes":"https://gitlab.com/api/v4/projects/278964/issues/349440/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349440/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349440","relative":"#349440","full":"gitlab-org/gitlab#349440"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99912379,"iid":349415,"project_id":278964,"title":"Make string in user profile translatable","description":"The string https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/profiles/preferences/show.html.haml#L97 on the [user profile preferences](https://gitlab.com/-/profile/preferences) is not translatable:\n\n![image](/uploads/1819d1332c6941be671aee1087f9c9eb/image.png)","state":"closed","created_at":"2021-12-30T10:56:08.447Z","updated_at":"2022-01-11T07:07:19.771Z","closed_at":"2022-01-11T07:07:19.745Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349415","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349415","notes":"https://gitlab.com/api/v4/projects/278964/issues/349415/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349415/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349415","relative":"#349415","full":"gitlab-org/gitlab#349415"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7331,"epic":{"id":411780,"iid":7331,"title":"Strings that are not translatable","url":"/groups/gitlab-org/-/epics/7331","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99906548,"iid":349408,"project_id":278964,"title":"Make User profile / Chat translatable","description":"The string `Active chat names` on the [user profile settings](https://gitlab.com/-/profile/chat_names) is not translatable yet:\n\n![image](/uploads/a1faeffb3ef630e9dd56fda0ff1c33ce/image.png)","state":"closed","created_at":"2021-12-30T08:38:47.112Z","updated_at":"2022-01-04T15:48:39.270Z","closed_at":"2022-01-04T15:48:39.251Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349408","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349408","notes":"https://gitlab.com/api/v4/projects/278964/issues/349408/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349408/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349408","relative":"#349408","full":"gitlab-org/gitlab#349408"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7331,"epic":{"id":411780,"iid":7331,"title":"Strings that are not translatable","url":"/groups/gitlab-org/-/epics/7331","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99905255,"iid":349406,"project_id":278964,"title":"Make merge requests and issues dashboard translatable","description":"### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n\nSome strings on the following pages are not translatable:\n* [Dashboard/Merge Requests](https://gitlab.com/dashboard/merge_requests)\n* [Dashboard/Issues](https://gitlab.com/dashboard/issues)\n\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nOpen [MR Dashboard](https://gitlab.com/dashboard/merge_requests) or [Issues Dashboard](https://gitlab.com/dashboard/issues)\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n![image](/uploads/ca30043d26b14e2be9b598a4359b82b9/image.png)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-12-30T07:51:14.465Z","updated_at":"2022-01-05T11:51:11.826Z","closed_at":"2022-01-05T11:51:11.807Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349406","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349406","notes":"https://gitlab.com/api/v4/projects/278964/issues/349406/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349406/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349406","relative":"#349406","full":"gitlab-org/gitlab#349406"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7331,"epic":{"id":411780,"iid":7331,"title":"Strings that are not translatable","url":"/groups/gitlab-org/-/epics/7331","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99894586,"iid":349398,"project_id":278964,"title":"Update search field in Global Search to GitLab UI component type that matches interaction","description":"### Problem to solve\n\nWe currently use the GitLab UI component [`search-by-type`](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-search-box-by-type--default) for the search field on the Global Search results page. This component type is utilized for search fields that update upon typing (discussed [here in Pajamas](https://design.gitlab.com/components/search#variants)). Since the field used for Global Search does not do this, and requires a submit action to initiate, we should use the [`search-by-click`](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-search-box-by-click--default) component instead. In updating this, we can be consistent with other search interactions in our product, as well as remove the separate \"Search\" button that we have today on the page.\n\n_current experience_\n![Screen_Shot_2021-12-29_at_3.57.27_PM](/uploads/d701a3f5e3d627f5c9d16901d5a54730/Screen_Shot_2021-12-29_at_3.57.27_PM.png)\n\n### Proposed solution\n- Update the search field component to the [`search-by-click`](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-search-box-by-click--default) component.\n- Remove the additional \"Search\" button seen today.\n- Pressing \"Enter\" also triggers the action (as it does currently)\n\n_proposed component_\n![Screen_Shot_2021-12-29_at_4.10.37_PM](/uploads/ed621e10bbbad099f7bd2e2326b6369c/Screen_Shot_2021-12-29_at_4.10.37_PM.png)","state":"closed","created_at":"2021-12-29T22:51:41.632Z","updated_at":"2022-05-30T16:00:02.518Z","closed_at":"2022-03-14T09:26:48.937Z","closed_by":{"id":10776513,"username":"tbulva","name":"Tomas Bulva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10776513/avatar.png","web_url":"https://gitlab.com/tbulva"},"labels":["Category:Global Search","UX","auto updated","devops::data_stores","frontend","group::global search","section::enablement","severity::4"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5041243,"username":"nickbrandt","name":"Nick Brandt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/96e3036898d44a8ad7063ba07cce0998?s=80\u0026d=identicon","web_url":"https://gitlab.com/nickbrandt"},{"id":10776513,"username":"tbulva","name":"Tomas Bulva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10776513/avatar.png","web_url":"https://gitlab.com/tbulva"}],"author":{"id":5041243,"username":"nickbrandt","name":"Nick Brandt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/96e3036898d44a8ad7063ba07cce0998?s=80\u0026d=identicon","web_url":"https://gitlab.com/nickbrandt"},"type":"ISSUE","assignee":{"id":5041243,"username":"nickbrandt","name":"Nick Brandt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/96e3036898d44a8ad7063ba07cce0998?s=80\u0026d=identicon","web_url":"https://gitlab.com/nickbrandt"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349398","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349398","notes":"https://gitlab.com/api/v4/projects/278964/issues/349398/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349398/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349398","relative":"#349398","full":"gitlab-org/gitlab#349398"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7254,"epic":{"id":402557,"iid":7254,"title":"The Global Search result page should have organized controls, layout, and help resources","url":"/groups/gitlab-org/-/epics/7254","group_id":9970,"human_readable_end_date":"Sep 22, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99888552,"iid":349387,"project_id":278964,"title":"Improve search - Scalable Metrics Dictionary","description":"","state":"closed","created_at":"2021-12-29T17:41:41.258Z","updated_at":"2022-01-28T17:52:37.263Z","closed_at":"2022-01-28T16:32:16.802Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["devops::growth","feature::enhancement","group::product intelligence","section::growth","type::feature","workflow::ready for development"],"milestone":null,"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349387","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349387","notes":"https://gitlab.com/api/v4/projects/278964/issues/349387/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349387/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349387","relative":"#349387","full":"gitlab-org/gitlab#349387"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6522,"epic":{"id":321040,"iid":6522,"title":"Scalable Metrics Dictionary","url":"/groups/gitlab-org/-/epics/6522","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99887042,"iid":349385,"project_id":278964,"title":"Make Todos Translatable","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n\nSeem like a lot of strings on the following page is not translatable:\n\n[To-Do List](https://gitlab.com/dashboard/todos)\n\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nOpen [To-Do List](https://gitlab.com/dashboard/todos)\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n![image](/uploads/6ff7c748f26b128497caa86cece4d42b/image.png)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-12-29T16:45:06.433Z","updated_at":"2022-01-10T07:54:15.268Z","closed_at":"2022-01-10T07:54:15.232Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","devops::manage","frontend","group::import","section::dev","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":4156460,"username":"ogolowinski","name":"Orit Golowinski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4156460/avatar.png","web_url":"https://gitlab.com/ogolowinski"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349385","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349385","notes":"https://gitlab.com/api/v4/projects/278964/issues/349385/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349385/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349385","relative":"#349385","full":"gitlab-org/gitlab#349385"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7331,"epic":{"id":411780,"iid":7331,"title":"Strings that are not translatable","url":"/groups/gitlab-org/-/epics/7331","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99874370,"iid":349362,"project_id":278964,"title":"Backend: Ensure no pipeline runs when rebasing without triggering CI","description":"\u003c!-- The first section \"Release notes\" is required if you want to have your release post blog MR auto generated. Currently in BETA, details on the **release post item generator** can be found in the handbook:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator and this video: https://www.youtube.com/watch?v=rfn9ebgTwKg. The next four sections: \"Problem to solve\", \"Intended users\", \"User experience goal\", and \"Proposal\", are strongly recommended in your first draft, while the rest of the sections can be filled out during the problem validation or breakdown phase. However, keep in mind that providing complete and relevant information early helps our product team validate the problem and start working on a solution. --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve \n\nWhen we skip CI for a rebase we skip creating a pipeline for branch but a merge request pipeline creation is still attempted. ~~We would need to verify that.~~ this was observed in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76056#note_756816723\n\nNot having a head pipeline for the merge request could block merging unless the user has \"pipelines must succeed\" setting disabled.\n\n### User experience goal\n\nWhen we are telling the user that the pipeline would not run for the rebase, we should make sure that it doesn't. \n\n### Proposal\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/118825 attempts at bringing the API based feature to skip CI for rebase to the UI, but the behaviour on the backend need to be fixed to skip the pipeline for merge request(detached) from running altogether. \n\nfrom the original MR comment\n\n\u003e To effectively skip also the merge request pipeline we would need to pass push options down to `MergeRequests::CreatePipelineService` from `Git::BranchPushService`. This should then skip also the merge request pipeline. This though, may be better be a separate issue where we change the background behavior, then in this MR we use the API for the frontend. WDYT?\n\n```mermaid\nflowchart TD\n\nrebase[Rebase the MR with `ci.skip` push option] --\u003e push[Push changes to remote]\npush --\u003e receive[PostReceive worker - with push options sent through]\nreceive --\u003e Git::BranchPushService\nGit::BranchPushService -- push options not yet forwarded --\u003e UpdateMergeRequestsWorker --\u003e MergeRequests::RefreshService --\u003e MergeRequests::CreatePipelineService -- no push options --\u003e Ci::CreatePipelineService --\u003e bug[pipeline not skipped]\nGit::BranchPushService -- push options already forwarded --\u003e Git::BranchHooksService --\u003e Git::BaseHooksService -- with push options --\u003e Ci::CreatePipelineService --\u003e skipped[pipeline skipped]\n```\n\n### Links / references\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/76056#note_756816723\n\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-12-29T10:54:02.720Z","updated_at":"2022-06-25T15:57:37.160Z","closed_at":"2022-06-21T09:15:25.837Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","FY23::Q2","GitLab Free","OKR","SUS::Impacting","Stretch","UX","UX debt","Verify::P3","backend","customer","devops::verify","documentation","feature::enhancement","group::pipeline execution","missed:14.10","missed:15.0","section::ops","severity::1","type::feature","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":6115425,"username":"v_mishra","name":"Veethika M","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f09a3a0badac17a57e28b4e18a45c1c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/v_mishra"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":47,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-04-30","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349362","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349362","notes":"https://gitlab.com/api/v4/projects/278964/issues/349362/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349362/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349362","relative":"#349362","full":"gitlab-org/gitlab#349362"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"at_risk"},{"id":99869749,"iid":349361,"project_id":278964,"title":"PG::QueryCanceled: ERROR: \"canceling statement due to statement timeout\" on accessing group's settings \u003e general","description":"\u003c!---\nBefore opening a new QA failure issue, make sure to first search for it in the\nQA failures board: https://gitlab.com/groups/gitlab-org/-/boards/1385578\n\nThe issue should have the following:\n\n- The relative path of the failing spec file in the title, e.g. if the login\n  test fails, include `qa/specs/features/browser_ui/1_manage/login/log_in_spec.rb` in the title.\n  This is required so that existing issues can easily be found by searching for the spec file.\n- If the issue is about multiple test failures, include the path for each failing spec file in the description.\n- A link to the failing job.\n- The stack trace from the job's logs in the \"Stack trace\" section below.\n- A screenshot (if available), and HTML capture (if available), in the \"Screenshot / HTML page\" section below.\n---\u003e\n\n### Summary\n\nVisiting settings \u003e general on any group results in a 500 - PG::QueryCanceled: ERROR: \"canceling statement due to statement timeout\"\n\neg: https://staging.gitlab.com/groups/test-group-top-level-500/-/edit\n\ne2e test Job: https://ops.gitlab.net/gitlab-org/quality/staging/-/jobs/5849978\n\n### Stack trace\n\n[Link to logs on sentry](https://sentry.gitlab.net/gitlab/staginggitlabcom/issues/3114835/?query=is%3Aunresolved%20user%3Ausername%3Agitlab-qa%20url%3Ahttps%3A%2F%2Fstaging.gitlab.com%2Fgroups%2Fgitlab-qa-sandbox-group%2Ftemplate-group%2F-%2Fedit)\n\n[Kibana logs](https://nonprod-log.gitlab.net/goto/5bc88610-6885-11ec-aec7-f387696fcb42):\n\n```\n\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\n\nActionView::Template::Error\n\nlib/gitlab/database/load_balancing/connection_proxy.rb:110:in `block in read_using_load_balancer', lib/gitlab/database/load_balancing/load_balancer.rb:55:in `read', lib/gitlab/database/load_balancing/connection_proxy.rb:109:in `read_using_load_balancer', lib/gitlab/database/load_balancing/connection_proxy.rb:54:in `select_all', app/helpers/groups_helper.rb:118:in `sort_by', app/helpers/groups_helper.rb:118:in `parent_group_options', app/views/groups/settings/_transfer.html.haml:15, app/views/groups/settings/_transfer.html.haml:4, app/views/groups/settings/_advanced.html.haml:28, app/views/groups/edit.html.haml:59, app/controllers/application_controller.rb:133:in `render', ee/lib/gitlab/ip_address_state.rb:10:in `with', ee/app/controllers/ee/application_controller.rb:44:in `set_current_ip_address', app/controllers/application_controller.rb:490:in `set_current_admin', lib/gitlab/session.rb:11:in `with_session', app/controllers/application_controller.rb:481:in `set_session_storage', lib/gitlab/i18n.rb:105:in `with_locale', lib/gitlab/i18n.rb:111:in `with_user_locale', app/controllers/application_controller.rb:475:in `set_locale', app/controllers/application_controller.rb:469:in `set_current_context', ee/lib/omni_auth/strategies/group_saml.rb:41:in `other_phase', lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call', lib/gitlab/middleware/rails_queue_duration.rb:33:in `call', lib/gitlab/middleware/speedscope.rb:13:in `call', lib/gitlab/request_profiler/middleware.rb:17:in `call', lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call', lib/gitlab/metrics/rack_middleware.rb:16:in `block in call', lib/gitlab/metrics/web_transaction.rb:46:in `run', lib/gitlab/metrics/rack_middleware.rb:16:in `call', lib/gitlab/jira/middleware.rb:19:in `call', lib/gitlab/middleware/go.rb:20:in `call', lib/gitlab/etag_caching/middleware.rb:21:in `call', lib/gitlab/middleware/query_analyzer.rb:11:in `block in call', lib/gitlab/database/query_analyzer.rb:42:in `within', lib/gitlab/middleware/query_analyzer.rb:11:in `call', lib/gitlab/middleware/multipart.rb:173:in `call', lib/gitlab/middleware/read_only/controller.rb:50:in `call', lib/gitlab/middleware/read_only.rb:18:in `call', lib/gitlab/middleware/same_site_cookies.rb:27:in `call', lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call', lib/gitlab/middleware/basic_health_check.rb:25:in `call', lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call', lib/gitlab/middleware/request_context.rb:21:in `call', config/initializers/fix_local_cache_middleware.rb:11:in `call', lib/gitlab/middleware/compressed_json.rb:26:in `call', lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call', lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call', lib/gitlab/metrics/requests_rack_middleware.rb:75:in `call', lib/gitlab/middleware/release_env.rb:13:in `call' \n```\n\n### E2E test Stack trace\n\n```\nFailures:\n  1) Manage Group file templates creates file via custom LICENSE file template\n     Failure/Error: general.choose_file_template_repository(@file_template_project.name)\n     \n     Capybara::ElementNotFound:\n       Unable to find css \"[data-qa-selector=\\\"file_template_repositories\\\"],.qa-file-template-repositories\"\n     # /usr/local/bundle/gems/capybara-3.35.3/lib/capybara/node/finders.rb:303:in `block in synced_resolve'\n     # /usr/local/bundle/gems/capybara-3.35.3/lib/capybara/node/base.rb:83:in `synchronize'\n     # /usr/local/bundle/gems/capybara-3.35.3/lib/capybara/node/finders.rb:292:in `synced_resolve'\n     # /usr/local/bundle/gems/capybara-3.35.3/lib/capybara/node/finders.rb:53:in `find'\n     # /usr/local/bundle/gems/capybara-3.35.3/lib/capybara/session.rb:762:in `find'\n     # /usr/local/bundle/gems/capybara-3.35.3/lib/capybara/session.rb:350:in `within'\n     # ./qa/page/base.rb:343:in `within_element'\n     # ./qa/support/page/logging.rb:149:in `within_element'\n     # ./qa/page/settings/common.rb:11:in `expand_content'\n     # ./qa/ee/page/group/settings/general.rb:120:in `choose_file_template_repository'\n     # ./qa/specs/features/ee/browser_ui/1_manage/group/group_file_template_spec.rb:117:in `block in set_file_template_if_not_already_set'\n     # ./qa/scenario/actable.rb:16:in `perform'\n     # ./qa/specs/features/ee/browser_ui/1_manage/group/group_file_template_spec.rb:116:in `set_file_template_if_not_already_set'\n     # ./qa/specs/features/ee/browser_ui/1_manage/group/group_file_template_spec.rb:84:in `block (4 levels) in \u003cmodule:QA\u003e'\n```\n\n### Screenshot / HTML page\n\n\u003c!--\nAttach the screenshot and HTML snapshot of the page from the job's artifacts:\n1. Download the job's artifacts and unarchive them.\n1. Open the `gitlab-qa-run-2020-*/gitlab-{ce,ee}-qa-*/{,ee}/{api,browser_ui}/\u003cpath to failed test\u003e` folder.\n1. Select the `.png` and `.html` files that appears in the job logs (look for `HTML screenshot: /path/to/html/page.html` / `Image screenshot: `/path/to/html/page.png`).\n1. Drag and drop them here.\n\nNote: You don't need to include a screenshot if the information it contains can be included as text. Include the text instead.\nE.g., error 500/404, \"Retry later\" errors, etc.\n\nIf you include multiple screenshots it can be helpful to hide all but the first in a details/summary element, to avoid excessive scrolling:\n\n\u003cdetails\u003e\u003csummary\u003eExpand for screenshot\u003c/summary\u003e\n  drag and drop the screenshot here\n\u003c/details\u003e\n--\u003e\n\nScreenshot shows 500\n\n### Possible fixes\n\n\n\u003c!-- Default due date. --\u003e\n\u003c!-- Base labels. --\u003e\n\u003c!-- Test failure type label, please use just one.--\u003e\n\u003c!--\nChoose the stage that appears in the test path, e.g. ~\"devops::create\" for\n`qa/specs/features/browser_ui/3_create/web_ide/add_file_template_spec.rb`.\n--\u003e\n\u003c!--\nSelect a label for where the failure was found, e.g. if the failure occurred in\na nightly pipeline, select ~\"found:nightly\".\n--\u003e\n\u003c!--\nhttps://about.gitlab.com/handbook/engineering/quality/guidelines/#priorities:\n- ~\"priority::1\": Tests that are needed to verify fundamental GitLab functionality.\n- ~\"priority::2\": Tests that deal with external integrations which may take a longer time to debug and fix.\n--\u003e\n\u003c!-- Select the current milestone if ~\"priority::1\" or the next milestone if ~\"priority::2\". --\u003e\n\n### Availability and Testing\n\nSuggested test plan:\n- Populate the MR’s review app with at least the same number of groups that `gitlab-qa-bot` is a member of on staging (880 top-level groups as of 2/23/22)\n    - A custom script can be created that generates groups via the `/groups` API using the admin’s PAT. The admin will then be added as owner of these groups by default, and we can manually log in as admin to visit Settings -\u003e General for any of the groups.\n    - Or, once the initial `review-qa-*` jobs have completed, the script can be extended to invite one of the `gitlab-qa-user` to each group (`gitlab-qa-user1` seems to be the most widely used). We can then try rerunning the review app tests (`review-qa-all`) again to see if any issues occur. \n\nPlease note `pipeline:run-review-app` label may need to be applied to the MR if it is not automatically triggered by any of the conditions listed [here](https://docs.gitlab.com/ee/development/testing_guide/review_apps.html#review-apps )\n\nFeel free to reach out to @vburton to coordinate or discuss other data that may be needed","state":"closed","created_at":"2021-12-29T08:58:52.534Z","updated_at":"2022-07-08T13:29:19.175Z","closed_at":"2022-06-30T04:40:06.041Z","closed_by":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"labels":["Linear queries","QA","Quality","backend","failure::test-environment","found:staging.gitlab.com","group::organization","missed:14.10","missed:14.9","missed:15.0","missed:15.1","priority::2","quad-planning::complete-action","section::dev","test","workflow::in dev"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"}],"author":{"id":2632430,"username":"sliaquat","name":"Sanad Liaquat","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2632430/avatar.png","web_url":"https://gitlab.com/sliaquat"},"type":"ISSUE","assignee":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-01-12","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349361","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349361","notes":"https://gitlab.com/api/v4/projects/278964/issues/349361/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349361/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349361","relative":"#349361","full":"gitlab-org/gitlab#349361"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5296,"epic":{"id":190836,"iid":5296,"title":"Linear namespace queries","url":"/groups/gitlab-org/-/epics/5296","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99843720,"iid":349336,"project_id":278964,"title":"Resource group timeout","description":"## Problem\n\nIt seems like customers are infrequently encountering issues where CI jobs get incorrectly and permanently stuck \"waiting for resource\" (see: #121715 and #121717). It seems the system can occasionally think a resource group has jobs running, when in fact, there are no jobs running associated with that resource group. This blocks all future jobs in this resource group from starting, and has to the potential to bring all CI pipelines to a grinding halt. The only solution is having Support manually release a resource group.\n\nI'm not sure why this is happening, or whether the underlying issue can be fixed, but as a fallback solution, it'd be nice if resource groups \"timed out.\" I'll caveat this by saying I don't have a deep understanding of GitLab's architecture, so it's hard to describe what I mean with much detail. But basically, if a resource group exists for a long enough period of time without any running jobs associated with it, it should time out and be cleaned up automatically.\n\nFunctionality like this would potentially solve the pain point customers are experiencing in #121715 and #121717.\n\nThis request is _similar_ to #118434, but not the same. (That issue is asking for the job itself to time out, but it wouldn't fix the problem of a phantom resource group blocking future jobs from running.)\n\n## Problem details\n\nIt seems some of the system failed to process pipeline jobs due to `ActiveRecord::StaleObjectError` (i.e. concurrent update).\n\n- [Sentry](https://sentry.gitlab.net/gitlab/gitlabcom/?query=%22AssignResourceFromResourceGroupWorker%22\u0026statsPeriod=14d)\n- [Example](https://sentry.gitlab.net/gitlab/gitlabcom/issues/3309580/?query=%22AssignResourceFromResourceGroupWorker%22)\n- [Kibana](https://log.gprd.gitlab.net/goto/d7852cd0-1d03-11ed-b86b-d963a1a6788e)\n\n## Proposal\n\nUse `Gitlab::OptimisticLocking` to update the pipeline job concurrent-safely:\n\n```diff\ndiff --git a/app/services/ci/resource_groups/assign_resource_from_resource_group_service.rb b/app/services/ci/resource_groups/assign_resource_from_resource_group_service.rb\nindex dfd97498fc8..055b27ea3c2 100644\n--- a/app/services/ci/resource_groups/assign_resource_from_resource_group_service.rb\n+++ b/app/services/ci/resource_groups/assign_resource_from_resource_group_service.rb\n@@ -10,7 +10,9 @@ def execute(resource_group)\n         free_resources = resource_group.resources.free.count\n \n         resource_group.upcoming_processables.take(free_resources).each do |processable|\n-          processable.enqueue_waiting_for_resource\n+          Gitlab::OptimisticLocking.retry_lock(processable, name: 'enqueue_waiting_for_resource') do |processable|\n+            processable.enqueue_waiting_for_resource\n+          end\n         end\n       end\n       # rubocop: enable CodeReuse/ActiveRecord\n```","state":"closed","created_at":"2021-12-28T15:36:21.234Z","updated_at":"2022-11-02T19:42:22.235Z","closed_at":"2022-11-02T18:58:57.799Z","closed_by":{"id":1430387,"username":"wescossick","name":"Wes Cossick","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1430387/avatar.png","web_url":"https://gitlab.com/wescossick"},"labels":["Category:Continuous Delivery","Deliverable","Next Up","Release::P2","backend","customer","devops::release","group::release","priority::2","resource groups","section::ops","severity::2","type::bug"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":1430387,"username":"wescossick","name":"Wes Cossick","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1430387/avatar.png","web_url":"https://gitlab.com/wescossick"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":13,"merge_requests_count":0,"upvotes":7,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349336","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349336","notes":"https://gitlab.com/api/v4/projects/278964/issues/349336/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349336/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349336","relative":"#349336","full":"gitlab-org/gitlab#349336"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99838517,"iid":349329,"project_id":278964,"title":"GitLab's Service Desk allows spoofing issue creator via reply-to email header","description":"**[HackerOne report #1433607](https://hackerone.com/reports/1433607)** by `rijalrojan` on 2021-12-22:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\n`Service Desk` is a feature that is enabled by default in Gitlab cloud and is optional in on-premise instances. When enabled, this allows users to report issues to maintainers by sending an email. The receiver email format is as follows: `contact-project+USERNAME-PROJECTNAME-PROJECTID-issue-[@]incoming.gitlab.com`. This takes in the email and creates a ticket on it's behalf. Created tickets are accessible by maintainers only. \n\n![Screen_Shot_2021-12-21_at_7.12.53_PM.png](https://h1.sec.gitlab.net/a/72730579-127f-4970-9d88-73685c8b41c5/Screen_Shot_2021-12-21_at_7.12.53_PM.png)\n\nThe system that ingests the email and creates a ticket, respects `Reply-To` header more than the actual `From` header when it receives the email. For example, in Gmail/Gsuite you can setup your own `reply-to` \n\n![Screen_Shot_2021-12-21_at_7.14.34_PM.png](https://h1.sec.gitlab.net/a/0ddcbc2d-cd3d-4551-b12d-c315d83ab02d/Screen_Shot_2021-12-21_at_7.14.34_PM.png)\n\nNow when I send email to my test instance, this is what it looks like: \n\n![Screen_Shot_2021-12-21_at_7.15.44_PM.png](https://h1.sec.gitlab.net/a/90638b3a-1f7d-40ac-959a-fede4cd8ffa9/Screen_Shot_2021-12-21_at_7.15.44_PM.png)\n\nYou can use this to create tickets in behalf of maintainers and others. **Service desk by default allows creating ticket for private repository as well so this is not defaulted to only public repos**\n\n#####  Steps to reproduce  \n1. Change your `Reply-To` in Gmail/GSuite to reflect your victim's email.  \n2. Send an email to a service desk email and notice your `Reply-To` is used as the sender. \n\n#####  Impact\n\nThe easiest and direct impact to this is being able to spoof and create tickets as maintainers.\n\n####  Impact\n\nThe easiest and direct impact to this is being able to spoof and create tickets as maintainers. I am investigating further in my own instance but it will take time to setup.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [Screen_Shot_2021-12-21_at_7.12.53_PM.png](https://h1.sec.gitlab.net/a/72730579-127f-4970-9d88-73685c8b41c5/Screen_Shot_2021-12-21_at_7.12.53_PM.png)\n* [Screen_Shot_2021-12-21_at_7.14.34_PM.png](https://h1.sec.gitlab.net/a/0ddcbc2d-cd3d-4551-b12d-c315d83ab02d/Screen_Shot_2021-12-21_at_7.14.34_PM.png)\n* [Screen_Shot_2021-12-21_at_7.15.44_PM.png](https://h1.sec.gitlab.net/a/90638b3a-1f7d-40ac-959a-fede4cd8ffa9/Screen_Shot_2021-12-21_at_7.15.44_PM.png)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2021-12-28T13:18:32.900Z","updated_at":"2022-09-12T15:50:10.672Z","closed_at":"2022-03-16T09:55:49.017Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["HackerOne","Security Hackathon","Weakness::CWE-345","backend","devops::plan","group::certify","missed:14.8","priority::4","section::dev","securitybot::ignore","severity::4","type::bug","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349329","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349329","notes":"https://gitlab.com/api/v4/projects/278964/issues/349329/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349329/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349329","relative":"#349329","full":"gitlab-org/gitlab#349329"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99826108,"iid":349315,"project_id":278964,"title":"Validate vulnerability_reads schema when vulnerabilities and vulnerability_occurrences schema are updated","description":"Based on the discussion https://gitlab.com/gitlab-org/gitlab/-/issues/335326#note_780709997 we need to implement a validator/checker to check the schema of `vulnerability_reads` every time `vulnerabilities` and `vulnerability_occurrences` schema are updated. \n\nProposal: https://gitlab.com/gitlab-org/gitlab/-/issues/335326#note_784116408\n\n/cc @minac\n\n### Why are we doing this work\n\nTo improve the performance of the \"Vulnerability Report\" page, we've decided to implement \"Command Query Responsibility Segregation\"(CQRS) by creating a \"read table\" with the denormalized columns of the \"vulnerabilities\" and \"vulnerability_occurrences\" tables which are subject to filtering and sorting. \n\nSince we will have a new table, we need to find a way to keep the schema of this new table up-to-date with its source tables(`vulnerabilities` and `vulnerability_occurrences`).\n\n### Implementation Plan\n\n- [ ] ~documentation Create a new doc page to explain the CQRS approach\n- [ ] ~backend Implement the \"schema check\" mechanism as follows to inform the feature developers whenever the schema of the `vulnerabilities` and `vulnerability_occurrences` tables change;\n  - [ ] Implement a module to generate a checksum value for the Active Record model schemas(1).\n  - [ ] Include this new module in the `Vulnerability` and `Vulnerabilities::Finding` models and set `schema_version`s(2).\n  - [ ] Write a new spec to check if the expected schema version matches with the actual schema on the database.\n\n### Technical Details/Pseudo Implementation \n\nHere you can find the non-complete implementations for the above plan to have a sense of what needs to be done.\n\n\u003cdetails\u003e\n\u003csummary\u003e(1) The module to calculate and lock the schema version for a model\u003c/summary\u003e\n\n```ruby\nmodule LockedSchema\n  attr_accessor :locked_schema_version\n\n  def self.included(base)\n    Registry.register(base)\n  end\n\n  def validate_schema_version!\n    return true if locked_schema_version == current_schema_version\n\n    raise \"Seems like you've added a new column or index to #{table_name}. \\n\" \\\n          \"Did you consider updating the `vulnerability_reads` table as well?\\n\" \\\n          \"If the changes you've introduced is not relevant with the `vulnerability_reads` table,\" \\\n          \"please update the `locked_schema_version` with `#{current_schema_version}`. \\n\" \\\n          \"If the changes are also important for the `vulnerability_reads` table, \\n\" \\\n          \"please update the schema and triggers and set the `locked_schema_version`.\"\n  end\n\n  def current_schema_version\n    (_column_names + _index_names).join('-')\n                                  .then { |s| Digest::SHA256.hexdigest(s) }\n  end\n\n  private\n\n  def _column_names\n    connection.columns(table_name).map(\u0026:name)\n  end\n\n  def _index_names\n    connection.indexes(table_name).map(\u0026:name)\n  end\n\n  class Registry\n    def self.models\n      @models ||= []\n    end\n\n    def self.register(model)\n      models \u003c\u003c model\n    end\n  end\nend\n```\n\u003c/details\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003e(2) Usage of this module in a model\u003c/summary\u003e\n\n```ruby\nclass Vulnerability\n  include LockedSchema\n\n  self.locked_schema_version = \"976edf9df7c67f945572d0758b42d8e07ac41dca02defb4a261d96f2e4507e20\"\nend\n```\n\u003c/details\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003e(3) An example spec\u003c/summary\u003e\n\n```ruby\n# in a new spec file\n\nRSpec.describe \"Locked model schemas\" do\n  LockedSchema::Registry.models.each do |model|\n    it \"checks the schema of the #{model.name}\" do\n      expect(model.validate_schema_version!).to be_truthy\n    end\n  end\nend\n```\n\u003c/details\u003e\n\n**Note:** The above one is just a pseudo implementation that is far away from being complete. Even the syntax hasn't been checked therefore please take it just as a narrative which gives the reader the sense of what needs to be done.","state":"closed","created_at":"2021-12-28T08:18:54.568Z","updated_at":"2022-11-20T22:59:52.816Z","closed_at":"2022-02-08T17:14:27.717Z","closed_by":{"id":487608,"username":"Quintasan","name":"Michał Zając","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"labels":["Category:Vulnerability Management","auto updated","backend","database","devops::secure","feature::enhancement","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[],"author":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349315","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349315","notes":"https://gitlab.com/api/v4/projects/278964/issues/349315/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349315/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349315","relative":"#349315","full":"gitlab-org/gitlab#349315"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6903,"epic":{"id":368043,"iid":6903,"title":"Improve performance of vulnerability reads","url":"/groups/gitlab-org/-/epics/6903","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99817939,"iid":349307,"project_id":278964,"title":"Update Registration Features CTA for repository size limit","description":"Related to #341949.\n\nWe need to update the method to show the Registration Features CTA used at https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73222. This requires:\n\n- Adding CE templates with only the CTA (one for groups and projects settings, and one for application settings)\n- Add content-based tests for the CTA behavior.\n- Use the new `registration_features_can_be_prompted` helper.","state":"closed","created_at":"2021-12-28T02:41:15.472Z","updated_at":"2022-02-18T15:28:32.839Z","closed_at":"2022-01-21T16:07:57.569Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["Deliverable","Unplanned","devops::growth","feature::enhancement","frontend","group::product intelligence","missed:14.7","section::growth","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349307","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349307","notes":"https://gitlab.com/api/v4/projects/278964/issues/349307/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349307/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349307","relative":"#349307","full":"gitlab-org/gitlab#349307"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6822,"epic":{"id":356771,"iid":6822,"title":"In-app awareness of Registration Features","url":"/groups/gitlab-org/-/epics/6822","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99816322,"iid":349306,"project_id":278964,"title":"Fix the here-links on the Cloud Native documentation overview","description":"\u003c!--\n\n* Use this issue template for suggesting new docs or updates to existing docs.\n  Note: Doc work as part of feature development is covered in the Feature Request template.\n\n* For issues related to features of the docs.gitlab.com site, see\n     https://gitlab.com/gitlab-org/gitlab-docs/issues/\n\n* For information about documentation content and process, see\n     https://docs.gitlab.com/ee/development/documentation/ --\u003e\n\n### Problem to solve\n\nThe Cloud-native installation page https://docs.gitlab.com/charts/installation/deployment.html has many \"here-links\" which should all be re-worded so that the link describes where it is going.\n\nThe [main benefits](https://www.futurehosting.com/blog/links-should-have-meaningful-anchor-text-heres-why/) are to meet [WCAG standards](https://www.w3.org/WAI/WCAG21/quickref/#link-purpose-in-context), and [SEO signalling](https://moz.com/learn/seo/anchor-text).\n\n\u003c!-- Include the following detail as necessary:\n* What product or feature(s) affected?\n* What docs or doc section affected? Include links or paths.\n* Is there a problem with a specific document, or a feature/process that's not addressed sufficiently in docs?\n* Any other ideas or requests?\n--\u003e\n\n### Further details\n\n\u003c!--\n* Any concepts, procedures, reference info we could add to make it easier to successfully use GitLab?\n* Include use cases, benefits, and/or goals for this work.\n* If adding content: What audience is it intended for? (What roles and scenarios?)\n  For ideas, see personas at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ or the persona labels at\n  https://gitlab.com/groups/gitlab-org/-/labels?subscribed=\u0026search=persona%3A\n--\u003e\n\n### Proposal\n\n\u003c!-- Further specifics for how can we solve the problem. --\u003e\n\nUpdate the \"here\"-links with descriptive anchor text\n\n### Who can address the issue\n\n\u003c!-- What if any special expertise is required to resolve this issue? --\u003e\n\n### Other links/references\n\n\u003c!-- E.g. related GitLab issues/MRs --\u003e\n\nGitLab's Documentation Style Guide has [basic link criteria](https://docs.gitlab.com/ee/development/documentation/styleguide/#basic-link-criteria) which discusses link Markdown formatting and the style of anchor text to aim for.","state":"closed","created_at":"2021-12-28T00:59:27.459Z","updated_at":"2022-03-16T00:09:18.800Z","closed_at":"2022-01-31T16:18:59.816Z","closed_by":{"id":3585,"username":"axil","name":"Achilleas Pipinellis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3585/avatar.png","web_url":"https://gitlab.com/axil"},"labels":["Distribution:Deploy","SEO::Improvement","SUS::Impacting","Support Team Contributions","Technical Writing","accessibility","automation:ml","automation:ml wrong","devops::systems","documentation","group::distribution","section::enablement","severity::4"],"milestone":null,"assignees":[{"id":5791080,"username":"mlockhart","name":"Mike Lockhart","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5791080/avatar.png","web_url":"https://gitlab.com/mlockhart"}],"author":{"id":5791080,"username":"mlockhart","name":"Mike Lockhart","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5791080/avatar.png","web_url":"https://gitlab.com/mlockhart"},"type":"ISSUE","assignee":{"id":5791080,"username":"mlockhart","name":"Mike Lockhart","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5791080/avatar.png","web_url":"https://gitlab.com/mlockhart"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349306","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349306","notes":"https://gitlab.com/api/v4/projects/278964/issues/349306/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349306/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349306","relative":"#349306","full":"gitlab-org/gitlab#349306"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99731121,"iid":349246,"project_id":278964,"title":"Deprecate experimentation module","description":"We're now in a position to deprecate the experimentation module (EXMOD)\n\nDeprecate experimentation module\n\nAfter https://gitlab.com/gitlab-org/gitlab/-/issues/345932#note_772134948 We may now deprecate experimentation module\n\n- [x] Deprecate [GLEX recording to EXMOD](http://gitlab.com/gitlab-org/gitlab/blob/ef09594cec60baa640cf6b061346aadf6fb4ee43/app/experiments/application_experiment.rb#L26-26) !102534\n   - this will need to wait until all experiments that use it(`ApplicationExperiment#publish_to_database`) are finished or remove this from scope of this issue.\n   - see https://gitlab.com/gitlab-org/gitlab/-/issues/349246#note_1131884650 for confirmations\n- [x] Ensure no EXMOD experiments are live \n   - https://gitlab.com/gitlab-org/gitlab/-/issues/349246#note_800955141\n- [x] Deprecate the EXMOD code - !100742\n- [x] Remove EXMOD documentation - !78091\n   - https://docs.gitlab.com/ee/development/experiment_guide/#implementing-an-experiment\n- [x] Deprecate unused tables\n   - [x] experiments\n      - [x] this will need to wait until all experiments that use it(`ApplicationExperiment#publish_to_database`) are finished\n         - see https://gitlab.com/gitlab-org/gitlab/-/issues/349246#note_1131884650 for confirmations\n      - [x] remove code/model - !103552 \n      - [x] remove table - !103933 %15.7 (need answer on https://gitlab.com/gitlab-org/gitlab/-/issues/349246#note_1167599884 first  :white_check_mark: )\n   - [x] experiment_users (no longer in use)\n      - [x] remove code/model and associations - !100862\n      - [x] remove table - !102337 \n   - [x] experiment_subjects\n      - [x] this will need to wait until all experiments that use it(`ApplicationExperiment#publish_to_database`) are finished\n         - see https://gitlab.com/gitlab-org/gitlab/-/issues/349246#note_1131884650 for confirmations\n      - [x] remove code/model - !103552 \n      - [x] remove table - !103933 %15.7 (need answer on https://gitlab.com/gitlab-org/gitlab/-/issues/349246#note_1167599884 first :white_check_mark: )\n- [x] Decide what to do with related data in the data warehouse (need answer on https://gitlab.com/gitlab-org/gitlab/-/issues/349246#note_1167599884 first)\n\n@gitlab-org/growth/engineers  @gdoud @mkarampalas @s_awezec  cc @hilaqu @pcalder @whaber","state":"closed","created_at":"2021-12-24T13:17:22.032Z","updated_at":"2022-12-02T23:51:02.298Z","closed_at":"2022-12-02T23:51:02.181Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["Next Up","auto updated","deprecation","devops::growth","group::acquisition","missed:14.7","missed:14.8","missed:15.5","section::growth","type::maintenance","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":32,"merge_requests_count":0,"upvotes":7,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349246","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":17,"completed_count":17},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"17 of 17 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349246","notes":"https://gitlab.com/api/v4/projects/278964/issues/349246/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349246/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349246","relative":"#349246","full":"gitlab-org/gitlab#349246"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99708989,"iid":349230,"project_id":278964,"title":"Code review comment emoji dropdown bleeds into other page elements when user tries to add 2nd emoji","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nWhen I tried to add a 2nd emoji to a comment on code review page, the emoji dropdown bleeds into other elements on the page.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nOn code review page, make a comment, attempt to add 2 emojis to the comment.\n\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nThe dropdown should not bleed into other page elements, user should be able to add another emoji to the comment.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n![Screen_Shot_2021-12-23_at_3.38.16_PM](/uploads/72bc088c579a2503f1e494bc9f55fdf7/Screen_Shot_2021-12-23_at_3.38.16_PM.png)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\nHappens on Gitlab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-12-23T23:49:55.922Z","updated_at":"2022-02-18T07:01:12.677Z","closed_at":"2022-01-26T17:58:50.386Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Code Review Workflow","Deliverable","devops::create","emoji","frontend","group::code review","merge requests","priority::2","regression","regression:14.6","section::dev","severity::3","type::bug","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":5022822,"username":"treagitlab","name":"Tiffany Rea","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5022822/avatar.png","web_url":"https://gitlab.com/treagitlab"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349230","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349230","notes":"https://gitlab.com/api/v4/projects/278964/issues/349230/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349230/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349230","relative":"#349230","full":"gitlab-org/gitlab#349230"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99698508,"iid":349210,"project_id":278964,"title":"Implementation - New performance indicator Pipeline Authoring - Pipeline Editor","description":"## Summary\n\nWe would like to introduce a new Performance Indicator for the team.  \n\nFor each user that is using the pipeline editor we should measure:\n\n- Has the user has made a change in their config in editor\n- Pipeline results (failed/succeed)\n- Then count:\n- How many tries did it take to get green?\n- % of users that gets green on first try?\n\n## Proposal\n\nThrough the codebase, metrics will be added to track the behavior of the aforementioned activities noted above and then that data will be sent along to Sisense so that they can be elegantly represented into a dashboard report.","state":"closed","created_at":"2021-12-23T16:46:55.568Z","updated_at":"2022-01-04T14:00:42.142Z","closed_at":"2022-01-04T13:11:49.274Z","closed_by":{"id":4509877,"username":"dhershkovitch","name":"Dov Hershkovitch","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7daa3113f0359f08a217fa800d9cc1d2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dhershkovitch"},"labels":["Category:Pipeline Authoring","[deprecated] Accepting merge requests","auto updated","backend","candidate::14.7","devops::verify","group::pipeline authoring","section::ops","type::feature","workflow::ready for development"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[],"author":{"id":9468400,"username":"marknuzzo","name":"Mark Nuzzo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9468400/avatar.png","web_url":"https://gitlab.com/marknuzzo"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349210","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349210","notes":"https://gitlab.com/api/v4/projects/278964/issues/349210/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349210/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349210","relative":"#349210","full":"gitlab-org/gitlab#349210"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99696596,"iid":349204,"project_id":278964,"title":"Remove use of lodash/merge and use spread in sec config","description":"The following discussion from !77166 should be addressed:\n\n- [ ] @sming-gitlab started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77166#note_794050528):  (+1 comment)\n\n    \u003e **suggestion (non-blocking):** I love the lodash library but when there is a plain JS option, I always lean towards that for performance reasons. In this case, I feel the spread operator is totally up for this job. This is subjective, so feel free to ignore if preferred 😄\n    \u003e \n    \u003e ```diff\n    \u003e - import merge from 'lodash/merge';\n    \u003e \n    \u003e + export const createMockResolvers = ({ resolvers: customMockResolvers = {} } = {}) =\u003e ({\n    \u003e +   ...defaultMockResolvers,\n    \u003e +   ...customMockResolvers\n    \u003e + })\n    \u003e ```","state":"closed","created_at":"2021-12-23T16:16:55.232Z","updated_at":"2022-01-10T03:24:21.403Z","closed_at":"2022-01-10T03:20:14.492Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["devops::secure","frontend","group::threat insights","section::sec","type::feature"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349204","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349204","notes":"https://gitlab.com/api/v4/projects/278964/issues/349204/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349204/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349204","relative":"#349204","full":"gitlab-org/gitlab#349204"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99692518,"iid":349197,"project_id":278964,"title":"Move description-related columns from namespace table to namespace_settings table","description":"Namespaces table is very wide, and used in many places, it's basically backbone of GitLab. Because it used so many times and holds much information, sometimes it contributes to the slow performance. \nRemoving all the columns relating to the description of the group from the namespaces table and moving them to description-related table would make the  namespaces table slimmer and probably more performant thanks to that.\n\n\n\u003cdetails\u003e\n\u003csummary\u003escary statement\u003c/summary\u003e\n\n```\n\nWITH RECURSIVE \"base_and_ancestors\" AS ((WITH RECURSIVE \"base_and_ancestors\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $1 AND \"members\".\"source_type\" = $2 AND \"namespaces\".\"type\" = $3 AND \"members\".\"user_id\" = $4 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $5))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_ancestors\" WHERE \"namespaces\".\"type\" = $6 AND \"namespaces\".\"id\" = \"base_and_ancestors\".\"parent_id\")), \"base_and_descendants\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $7 AND \"members\".\"source_type\" = $8 AND \"namespaces\".\"type\" = $9 AND \"members\".\"user_id\" = $10 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $11))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"type\" = $12 AND \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\")) SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_ancestors\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $13)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_descendants\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $14)) namespaces WHERE \"namespaces\".\"type\" = $15 AND \"namespaces\".\"require_two_factor_authentication\" = $16)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_ancestors\" WHERE \"namespaces\".\"type\" = $17 AND \"namespaces\".\"id\" = \"base_and_ancestors\".\"parent_id\")), \"base_and_descendants\" AS ((WITH RECURSIVE \"base_and_ancestors\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $18 AND \"members\".\"source_type\" = $19 AND \"namespaces\".\"type\" = $20 AND \"members\".\"user_id\" = $21 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $22))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_ancestors\" WHERE \"namespaces\".\"type\" = $23 AND \"namespaces\".\"id\" = \"base_and_ancestors\".\"parent_id\")), \"base_and_descendants\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $24 AND \"members\".\"source_type\" = $25 AND \"namespaces\".\"type\" = $26 AND \"members\".\"user_id\" = $27 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $28))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"type\" = $29 AND \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\")) SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_ancestors\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $30)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_descendants\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $31)) namespaces WHERE \"namespaces\".\"type\" = $32 AND \"namespaces\".\"require_two_factor_authentication\" = $33)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"type\" = $34 AND \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\")) SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_ancestors\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $35)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_descendants\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $36)) namespaces WHERE \"namespaces\".\"type\" = $37 AND \"namespaces\".\"id\" IN (SELECT \"namespaces\".\"id\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $38 AND \"members\".\"source_type\" = $39 AND \"namespaces\".\"type\" = $40 AND \"members\".\"user_id\" = $41 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $42)) ORDER BY \"namespaces\".\"name\" ASC\n```\n\u003c/details\u003e\n\nWe can move some of the columns to the `namespace_settings` table or create new table to keep dedicated set of settings. I identified some columns that in my opinion are good candidates for moving. I did a quick research on each - it does not mean I'm 100% confident that the move will be easy :(.\n\nSome of the columns, for example description-related columns, because of how wide they are - moving them will benefit performance and make this table less busy.\n\nRight now, this is particularly visible while using 'GroupFinder' - every call to this class is loading all 49 columns of namespaces table.\n\n\nColumns to migrate (separate MRs per attribute):  \n- [ ] description\n- [ ] description_html\n- [ ] cached_markdown_version\n\n### Implementation plan\n\n1. Create the column in the `namespace_settings` table.\n1. Setup ActiveRecord callback to keep the value up to date between `namespace` and `namespace_settings`\n1. Add a special index that allows iterating over the records. (`create index i1 on namespace (id) where your_field is not null`)\n1. Implement and trigger background migration.\n1. Release N+1: Update the backend to persist the column only in the `namespace_settings` table.\n1. Release N+1: Ignore the column in the `namespace` table.\n1. Release N+2: Remove the column from `namespace` following our [DB guidelines](https://docs.gitlab.com/ee/development/migration_style_guide.html#example-add-a-column-my_column-to-the-users-table).\n\n## Availability and Testing\n- Run `package-and-qa` job and evaluate results for any issues related to these database changes","state":"closed","created_at":"2021-12-23T14:51:12.746Z","updated_at":"2022-04-07T13:03:50.954Z","closed_at":"2022-04-07T13:03:50.242Z","closed_by":{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},"labels":["auto updated","backend","database","devops::manage","group::organization","missed:14.9","quad-planning::complete-action","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"}],"author":{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},"type":"ISSUE","assignee":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349197","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349197","notes":"https://gitlab.com/api/v4/projects/278964/issues/349197/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349197/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349197","relative":"#349197","full":"gitlab-org/gitlab#349197"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7326,"epic":{"id":409842,"iid":7326,"title":"Remove some columns from namespaces table","url":"/groups/gitlab-org/-/epics/7326","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":99684049,"iid":349187,"project_id":278964,"title":"Allow the same secondary email address to be used by more than one user","description":"When investigating on Production DB, @ahegyi found out, that there are two GitLab accounts that share the same email. The shared email is a primary email for one account and a secondary email (`emails` table) for the other account. There is a model validation that should prevent this, but at the database level nothing prevents this situation, so it can still occur due to race conditions.\n\nWhile we could introduce some mechanism to prevent this at the database level, it seems better to do the opposite: allow the same address to appear more than once in the `emails` table, as long as it is for different users. This is to support the following possible scenario:\n\nLet's say I have my GL account (gmail) and I'm invited to work at Company X where I get a custom email and a new GL account. It's a valid scenario that I set my secondary email to my own gmail email.\n\n### Proposed solution\n\nAllow duplicated emails, as long as they belong to different users. The primary email (`User#email`) would stay globally unique, but a primary email of one user could be a secondary email of another user.\n\n(For context, see discussion here https://gitlab.com/gitlab-org/gitlab/-/issues/344132#note_789578967)","state":"closed","created_at":"2021-12-23T11:43:09.664Z","updated_at":"2022-01-21T10:17:27.426Z","closed_at":"2022-01-09T21:07:13.705Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["backend","devops::manage","group::optimize","section::dev","type::feature","won't do"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349187","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349187","notes":"https://gitlab.com/api/v4/projects/278964/issues/349187/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349187/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349187","relative":"#349187","full":"gitlab-org/gitlab#349187"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99676683,"iid":349182,"project_id":278964,"title":"Add support for HighlightJS when no ('None') theme is selected","description":"As part of [highlighting source code using HighlightJS](https://gitlab.com/groups/gitlab-org/-/epics/7146) we need to ensure that [our syntax themes](https://docs.gitlab.com/ee/user/profile/preferences.html#syntax-highlighting-theme) still work as expected.\n\nThis issue is about adding support for HighlightJS when no ('**None**') theme is selected.","state":"closed","created_at":"2021-12-23T09:18:52.969Z","updated_at":"2022-04-21T05:58:24.540Z","closed_at":"2022-04-21T05:58:24.523Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","devops::create","frontend","group::source code","section::dev","type::feature"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349182","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349182","notes":"https://gitlab.com/api/v4/projects/278964/issues/349182/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349182/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349182","relative":"#349182","full":"gitlab-org/gitlab#349182"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7146,"epic":{"id":387817,"iid":7146,"title":"Highlight source code syntax on the frontend using HighlightJS","url":"/groups/gitlab-org/-/epics/7146","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99675888,"iid":349181,"project_id":278964,"title":"HighlightJS: Improve performance when rendering files with many lines","description":"As part of [highlighting source code using HighlightJS](https://gitlab.com/groups/gitlab-org/-/epics/7146) I noticed slow performance when using Highlight.js to highlight source code with many lines.\n\n- [example](https://gitlab.com/jerasmus/jerasmus-test-project/-/blob/master/main.js) (`:highlight_js` FF enabled)\n\nWe need to come up with ways to improve the rendering performance.\n\n### Initial ideas\n\n- Slice big files into smaller chunks and only highlight them once they come into view (IntersectionObserver)\n- Make use of `content-visibility: auto;` to ensure the browser only renders what is visible to the user (limited browser support)","state":"closed","created_at":"2021-12-23T09:01:59.964Z","updated_at":"2022-04-18T07:01:05.201Z","closed_at":"2022-03-23T09:34:24.217Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","devops::create","frontend","group::source code","section::dev","type::feature"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349181","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349181","notes":"https://gitlab.com/api/v4/projects/278964/issues/349181/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349181/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349181","relative":"#349181","full":"gitlab-org/gitlab#349181"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7146,"epic":{"id":387817,"iid":7146,"title":"Highlight source code syntax on the frontend using HighlightJS","url":"/groups/gitlab-org/-/epics/7146","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99665086,"iid":349169,"project_id":278964,"title":"Update security configuration tabs to utilize lazy loading","description":"## Context\n\nCurrently the tabs on the \"Security \u0026 Compliance\" configuration page does not utilize lazy loading, which means not-needed data could be loaded.\n\n## Solution\n\nUsing the `lazy` [prop](https://bootstrap-vue.org/docs/components/tabs#tabs) on `\u003cgl-tabs\u003e` within `app/assets/javascripts/security_configuration/components/app.vue` makes sure we only use the data we need.\n\n_Note_: The newly added \"Vulnerability Management\" tab (behind the feature flag `:secure_vulnerability_training`) already has a loading state, but we might need to add this to the other two tabs.\n\n## Implementation Plan\n\n- [x] Update tab in `app/assets/javascripts/security_configuration/components/app.vue` to use `lazy` prop\n- [x] Make sure we have loading states and add if not for all tabs","state":"closed","created_at":"2021-12-23T03:39:16.471Z","updated_at":"2022-01-17T03:40:34.698Z","closed_at":"2022-01-17T03:40:34.690Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["devops::secure","frontend","group::threat insights","section::sec","type::maintenance","workflow::verification"],"milestone":null,"assignees":[],"author":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349169","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349169","notes":"https://gitlab.com/api/v4/projects/278964/issues/349169/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349169/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349169","relative":"#349169","full":"gitlab-org/gitlab#349169"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99663873,"iid":349167,"project_id":278964,"title":"Namespace.all_objects","description":"In order to more easily port `ObjectHierarchy` calls to our linear system, we need to provide an `all_objects` equivalent. The `ObjectHierarchy#all_objects` method is a little quirky to translate as it's specific to the design of the `ObjectHierarchy` class which effectively \"executes\" the ancestor and descendant search.\n\nWhen we translate this to linear scopes it's just a `UNION` of the input scopes.\n\nThere's a couple of reasons it might be worth having an `all_objects` equivalent.\n\n1. To lower the knowledge bar to port recursive queries to linear queries.\n2. To explicitly test that a `UNION` of multiple ancestor and descendant queries works as expected. E.g. https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76910","state":"closed","created_at":"2021-12-23T02:45:05.327Z","updated_at":"2022-06-08T13:49:28.504Z","closed_at":"2022-02-15T01:29:09.159Z","closed_by":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"labels":["backend","bug::performance","devops::manage","group::organization","section::dev","type::maintenance","workflow::scheduling"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"}],"author":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349167","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349167","notes":"https://gitlab.com/api/v4/projects/278964/issues/349167/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349167/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349167","relative":"#349167","full":"gitlab-org/gitlab#349167"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5296,"epic":{"id":190836,"iid":5296,"title":"Linear namespace queries","url":"/groups/gitlab-org/-/epics/5296","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99656711,"iid":349161,"project_id":278964,"title":"Follow-up from \"Adds noopener noreferrer to target=\"_blank\" links\"","description":"The following discussion from !74947 should be addressed:\n\n- [ ] @mrincon started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74947#note_793257805): \n\n    \u003e **Suggestion (for follow-up)**: We could get this localized.","state":"closed","created_at":"2021-12-22T22:59:19.583Z","updated_at":"2022-06-28T14:46:43.206Z","closed_at":"2022-06-28T14:46:43.185Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["2FA","Category:Internationalization","auto updated","devops::manage","frontend","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349161","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349161","notes":"https://gitlab.com/api/v4/projects/278964/issues/349161/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349161/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349161","relative":"#349161","full":"gitlab-org/gitlab#349161"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99655387,"iid":349160,"project_id":278964,"title":"Use GitLab's advisory DB with container scanning","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nWe want to include the latest advisories from [gemnasium-db](https://gitlab.com/gitlab-org/security-products/gemnasium-db) in our container scanning analyzer.\n\n\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\n\n## Relevant links\n\n- Trivy supports the GitLab Advisory DB, called [\"GLAD\" in the implementation](https://gitlab.com/gitlab-org/security-products/dependencies/trivy-db/-/commit/ae22941a55d0375d9aa889c105f32d85d6ee9585).\n- We have an up-to-date [fork of `trivy-db` in GitLab](https://gitlab.com/gitlab-org/security-products/dependencies/trivy-db).\n\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n  - [ ] Container scanning user documentation\n  - [ ] Legal requirements\n\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n- [x] Legal:\n  - [x] we are legally allowed to do this\n  - [x] the documentation requirements have been added to the scope\n\n## Implementation plan\n\n### Building the database artifacts\n\nMaciej's [trivy-db-gitlab-build](https://gitlab.com/gitlab-org/protect/demos/sandbox/trivy-db-gitlab-build) now releases the built trivy-db databases as OCI artifacts to the project's container registry.\n\n* [ ] Copy [gitlab-org/protect/demos/sandbox/trivy-db-gitlab-build](https://gitlab.com/gitlab-org/protect/demos/sandbox/trivy-db-gitlab-build) to [gitlab-org/security-products/dependencies/trivy-db-glad](https://gitlab.com/gitlab-org/security-products/dependencies/trivy-db-glad). Currently, two workarounds are included as we rely on upstream merging our contributions:\n    * Maciej's [fork of vuln-list-db](https://github.com/mparuszewski/vuln-list-update/tree/support-custom-target-uri) is currently used, because [the PR](https://github.com/aquasecurity/vuln-list-update/pull/136) has not been merged yet.\n    * trivy-db's OCI [media type is not in use](https://gitlab.com/gitlab-org/protect/demos/sandbox/trivy-db-gitlab-build/-/blob/8cda3a6d2a9e363adac288c188fafbb8e636aeb1/.gitlab-ci.yml#L77-80), because as of March 30, the GitLab registry does not support it. However [support was added](https://gitlab.com/gitlab-org/container-registry/-/merge_requests/957) and the media types will be supported likely tomorrow, March 31. \n* [ ] Add a README explaining the build process\n* [ ] Schedule pipeline runs for the default branch, every 12 hours\n\n### Consuming the database artifacts\n\nIn `container-scanning/script/setup.sh`, pull in the database artifact:\n\n```diff\ndiff --git a/script/setup.sh b/script/setup.sh\n--- a/script/setup.sh\n+++ b/script/setup.sh\n@@ -10,7 +10,7 @@ setup_trivy_files() {\n   echo \"Dowloading and installing Trivy ${trivy_version}\"\n   wget --no-verbose https://github.com/aquasecurity/trivy/releases/download/v\"${trivy_version}\"/trivy_\"${trivy_version}\"_Linux-64bit.tar.gz -O - | tar -zxvf -\n   echo \"Dowloading Trivy DB\"\n-  oras pull ghcr.io/aquasecurity/trivy-db:\"${trivy_db_version}\" -a \u0026\u0026 tar -zxvf db.tar.gz -C \"$TMP_FOLDER\"\n+  oras pull registry.gitlab.com/gitlab-org/security-products/dependencies/trivy-db-glad:\"${trivy_db_version}\" -a \u0026\u0026 tar -zxvf db.tar.gz -C \"$TMP_FOLDER\"\n   rm -f db.tar.gz\n   echo \"Setting up Trivy files\"\n   mkdir -p /home/gitlab/.cache/trivy/db\n```\n\n### Legal requirements\n\n1. [ ] Move the `trivy` binary to its own directory, along with [`LICENSE`](https://github.com/aquasecurity/trivy/blob/main/LICENSE)\n1. [ ] Add [GitLab's EE license](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/LICENSE) for the container scanning analyzer to `/home/gitlab`.\n1. [ ] Add trivy-db's [`NOTICE`](https://github.com/aquasecurity/trivy-db/blob/main/NOTICE) and [`LICENSE`](https://github.com/aquasecurity/trivy-db/blob/main/LICENSE) files to `/home/gitlab/.cache/trivy/db`\n1. [ ] Add GitLab's Gemnasium license to the location where its database is to be installed in the image.\n\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-12-22T22:37:15.963Z","updated_at":"2022-05-17T19:15:19.060Z","closed_at":"2022-05-15T21:35:09.775Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Container Scanning","GitLab Ultimate","backend","devops::govern","feature::enhancement","group::security policies","missed:14.10","section::sec","type::feature","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"user_notes_count":60,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349160","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":19,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 19 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349160","notes":"https://gitlab.com/api/v4/projects/278964/issues/349160/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349160/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349160","relative":"#349160","full":"gitlab-org/gitlab#349160"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7395,"epic":{"id":421746,"iid":7395,"title":"Use GitLab Advisory DB in Container Scanning","url":"/groups/gitlab-org/-/epics/7395","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106486514,"iid":358740,"project_id":278964,"title":"Follow-up from \"MR Widgets example (added Terraform widget)\" - kebab and level 2 text color","description":"The following discussion from gitlab-org/frontend/playground/gitlab-mr-widgets-demo!3 should be addressed:\n\n- [x] @gdoyle started a [discussion](https://gitlab.com/gitlab-org/frontend/playground/gitlab-mr-widgets-demo/-/merge_requests/3#note_792692405):  (+3 comments)\n\n    \u003e - **Kebab should be top-aligned:** The kebab floats to the bottom at small screen sizes, and it should be top-aligned according to the [Figma spec file](https://www.figma.com/file/qEddyqCrI7kPSBjGmwkZzQ/Component-library?node-id=40541%3A69653). I think this would be a note for @anna_vovchenko !\n    \u003e ![Screen_Shot_2021-12-22_at_8.28.55_AM](/uploads/a62886cbb16f73b004f542b4e679cd54/Screen_Shot_2021-12-22_at_8.28.55_AM.png)\n    \u003e \n    \u003e - **Level 2 description text color**: It looks like `Reported Resource Changes: 1 to add, 0 to change, 0 to delete` is #303030 right now and should be `gray-700` (#525252) according to the [Figma spec file]. I think this would also be a note for @anna_vovchenko !\n    \u003e (https://www.figma.com/file/qEddyqCrI7kPSBjGmwkZzQ/Component-library?node-id=40541%3A69653)\n    \u003e","state":"closed","created_at":"2021-12-22T20:25:37.207Z","updated_at":"2022-04-19T18:46:22.071Z","closed_at":"2022-04-19T18:46:22.063Z","closed_by":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"labels":["SUS::Impacting","UX","UX debt","devops::configure","frontend","group::configure","merge request widget","section::ops","severity::4","workflow::production"],"milestone":null,"assignees":[{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"}],"author":{"id":9302527,"username":"gdoyle","name":"Gina Doyle","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9302527/avatar.png","web_url":"https://gitlab.com/gdoyle"},"type":"ISSUE","assignee":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358740","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358740","notes":"https://gitlab.com/api/v4/projects/278964/issues/358740/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358740/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358740","relative":"#358740","full":"gitlab-org/gitlab#358740"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99645702,"iid":349147,"project_id":278964,"title":"Enable gitlab-org Dependency Proxy Cleanup Policies","description":"Dependency cleanup policies can be enabled to clean up items from the dependency proxy cache after 90 days: https://about.gitlab.com/releases/2021/12/22/gitlab-14-6-released/#enable-dependency-proxy-cleanup-policies-from-the-ui\n\nLet's discuss enabling this for `gitlab-org` since Dependency Proxy is used by at least `gitlab-org/gitlab`","state":"closed","created_at":"2021-12-22T18:35:57.096Z","updated_at":"2022-03-16T11:28:10.866Z","closed_at":"2022-01-19T02:06:39.174Z","closed_by":{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"},"labels":["Dogfooding","Dogfooding::Use Existing Feature","Engineering Productivity","ep::pipeline","type::maintenance"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":15139,"username":"rspeicher","name":"Robert Speicher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73c8253932541a7b5cbc5d79493f2bea?s=80\u0026d=identicon","web_url":"https://gitlab.com/rspeicher"}],"author":{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"},"type":"ISSUE","assignee":{"id":15139,"username":"rspeicher","name":"Robert Speicher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73c8253932541a7b5cbc5d79493f2bea?s=80\u0026d=identicon","web_url":"https://gitlab.com/rspeicher"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349147","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349147","notes":"https://gitlab.com/api/v4/projects/278964/issues/349147/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349147/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349147","relative":"#349147","full":"gitlab-org/gitlab#349147"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99644539,"iid":349145,"project_id":278964,"title":"Polish up `.time-tracking-help-state` CSS rules","description":"## Context\n\nThe following discussion from !77087 should be addressed:\n\n- [ ] @pslaughter started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77087#note_792995149): \n\n    \u003e **issue (non-blocking):** Looking at the definition of [`.time-tracking-help-state`](https://gitlab.com/gitlab-org/gitlab/blob/d56e9bc5e8062827b018cdf5b84f8a1f2bb22d40/app/assets/stylesheets/pages/issuable.scss#L791), there's some issues with this which we should probably fix at some point:\n    \u003e \n    \u003e - Instead of hardcoding `px`, we should use [spacing scale variables](https://gitlab.com/gitlab-org/gitlab-ui/blob/6d5ee52f28487b6e8d06eb11c2e4cb2796891efa/src/scss/variables.scss#L8) or `rem`.\n    \u003e - Instead of hardcoding colors, we should use CSS variables to support dark mode ([example](https://gitlab.com/gitlab-org/gitlab/blob/178ec5fe2cbdaccf2a6317d8bfbd15cb56a2d90a/app/assets/stylesheets/lazy_bundles/select2_overrides.scss#L135)).\n    \u003e \n    \u003e I label this as non-blocking, because I believe we're still at an improvement with this current MR :thumbsup:","state":"closed","created_at":"2021-12-22T17:55:54.773Z","updated_at":"2022-12-12T11:17:09.419Z","closed_at":"2022-12-12T11:17:09.403Z","closed_by":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"labels":["Category:Team Planning","[deprecated] Accepting merge requests","boards","devops::plan","frontend","group::product planning","issues","missed:14.7","section::dev","time tracking","type::maintenance"],"milestone":null,"assignees":[],"author":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349145","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349145","notes":"https://gitlab.com/api/v4/projects/278964/issues/349145/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349145/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349145","relative":"#349145","full":"gitlab-org/gitlab#349145"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99642820,"iid":349140,"project_id":278964,"title":"CI job \"add-jh-folder\" fails for MRs from forks","description":"### Summary\n\nWhen an MR is opened from a fork, the `add-jh-folder` fails since !75667 was merged. This is because the script looks for the MR in the fork project, see [here], for example:\n\n```\n/usr/local/bundle/gems/gitlab-4.17.0/lib/gitlab/request.rb:59:in `validate': Server responded with code 404, message: 404 Not found. Request URI: https://gitlab.com/api/v4/projects/30803320/merge_requests/77247 (Gitlab::Error::NotFound)\n```\n\n### Steps to reproduce\n\nOpen an MR from a branch in a fork of this project.\n\n### What is the current *bug* behavior?\n\nThe CI job fails because it looks for the MR in the fork project.\n\n### What is the expected *correct* behavior?\n\nThe CI job fails because it looks for the MR in the target (i.e., this) project.\n\n### Relevant logs and/or screenshots\n\nSee this job output: https://gitlab.com/mlegner/gitlab/-/jobs/1913187907\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Possible fixes\n\nThis seems to be the problematic script: https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/scripts/setup/find_jh_branch_spec.rb","state":"closed","created_at":"2021-12-22T16:59:16.566Z","updated_at":"2022-03-16T11:28:11.412Z","closed_at":"2021-12-24T13:10:03.621Z","closed_by":{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"},"labels":["Engineering Productivity","maintenance::pipelines","type::maintenance"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"}],"author":{"id":2645496,"username":"mlegner","name":"Markus Legner","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2645496/avatar.png","web_url":"https://gitlab.com/mlegner"},"type":"ISSUE","assignee":{"id":6290669,"username":"godfat-gitlab","name":"Lin Jen-Shin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6290669/avatar.png","web_url":"https://gitlab.com/godfat-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349140","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349140","notes":"https://gitlab.com/api/v4/projects/278964/issues/349140/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349140/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349140","relative":"#349140","full":"gitlab-org/gitlab#349140"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99637599,"iid":349132,"project_id":278964,"title":"[Feature flag] Enable rate limit on username update","description":"## Summary\n\nThis issue is to rollout [rate limiting of username update](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77221) on production,\nthat is currently behind the `rate_limit_profile_update_username` feature flag.\n\nThe rate limit is enforced in order to mitigate misuse of the feature, for example to mass discover which usernames are in use (by checking if they are disallowed by the uniqueness validation).\n\n## Owners\n\n- Team: group::optimize\n- Most appropriate slack channel to reach out to: `#g_manage_optimize`\n- Best individual to reach out to: @m_frankiewicz\n- PM: @hdelalic \n\n## Stakeholders\n\n- The Security Team\n\n## Expectations\n\n### What are we expecting to happen?\n\nThe `ProfilesController#update_username` action, used to change the username, will be rate-limited to maximum 10 calls per minute per logged-in user.\n\nIf the rate limit turns out to be too stringent, it is possible that some legitimate user is being limited in how frequently they can call this action. In that case, the feature should be turned off, and a higher limit should be applied, after agreeing with security on what is appropriate.\n\n### What can we monitor to detect problems with this?\n\nAn increase of 429 response statuses on calls to `ProfilesController#update_username` could indicate either an attempt to misuse the feature that is correctly stopped by this rate limit, or possibly a legitimate user that is hitting the limit.\n\n### What can we check for monitoring production after rollouts?\n\nProduction logs for 429 response statuses on calls to `ProfilesController#update_username`. A high number of those would indicate that we are possibly limiting too many users.\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [x] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)). MR with documentation changes: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/78548\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```\n\n## Availability and Testing\nFor more details, see [discussion](https://gitlab.com/gitlab-org/gitlab/-/issues/349132#note_820205301) in comments\n- Tests at the controller level exist for testing the rate limit of this specific endpoint.\n- An issue is currently opened for extending QA tests for rate limits in general: https://gitlab.com/gitlab-org/gitlab/-/issues/350898\n- Rollout and rollback steps concerning availability are already outlined in description above.","state":"closed","created_at":"2021-12-22T15:22:29.268Z","updated_at":"2022-03-16T11:00:50.036Z","closed_at":"2022-03-16T11:00:50.018Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["backend","devops::manage","feature flag","feature::addition","group::optimize","quad-planning::complete-action","section::dev","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349132","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":31},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"31 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349132","notes":"https://gitlab.com/api/v4/projects/278964/issues/349132/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349132/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349132","relative":"#349132","full":"gitlab-org/gitlab#349132"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99637426,"iid":349131,"project_id":278964,"title":"[Feature flag] Enable chat notification deployment protected branch filter","description":"## Summary\n\nThis issue is to rollout [filtering chat notifications for protected branches](https://gitlab.com/gitlab-org/gitlab/-/issues/217020) on production,\nthat is currently behind the `chat_notification_deployment_protected_branch_filter` feature flag.\n\nIntroduced by: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74423\n\n## Owners\n\n- Team: ~\"group::integrations\" \n- Most appropriate slack channel to reach out to: `#g_ecosystem_integrations`\n- Best individual to reach out to: @arturoherrero, @Andysoiron, @alexkalderimis \n- PM: @mushakov \n\n## Stakeholders\n\nThis change affects users who rely on the existing behavior. Site administrators should review uses of the chat notification features.\n\n## Expectations\n\n### What are we expecting to happen?\n\nChat notifications for deployments on non-protected branches should stop being sent.\n\nThis is essentially a bug fix, but because it changes observed behavior, and users may wish to preserve existing behavior,\nthis is released under a feature flag.\n\n### What might happen if this goes wrong?\n\nUsers may wonder what has happened to chat notifications. No usability issues are expected.\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status b259d408e57475e3d96deb29691c62c391023d91`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set chat_notification_deployment_protected_branch_filter true --dev`\n    - [x] `/chatops run feature set chat_notification_deployment_protected_branch_filter true --staging`\n- [X] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the commit (b259d408e57475e3d96deb29691c62c391023d91) of the [feature MRs](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74423) have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status b259d408e57475e3d96deb29691c62c391023d91`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab chat_notification_deployment_protected_branch_filter true`\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab-foss chat_notification_deployment_protected_branch_filter true`\n    - [x] `/chatops run feature set --project=gitlab-com/www-gitlab-com chat_notification_deployment_protected_branch_filter true`\n    - [x] `/chatops run feature set --project=alexkalderimis/scratchpad chat_notification_deployment_protected_branch_filter true`\n- [X] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n      Verified on https://gitlab.com/alexkalderimis/scratchpad/-/environments (changing deployment rules on production\n      repositories is inadvisable)\n\n### Preparation before global rollout\n\n- [X] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [X] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [X] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue][feature_issue] an estimated time this will be enabled on GitLab.com.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set chat_notification_deployment_protected_branch_filter 20 --actors`\n    - [x] `/chatops run feature set chat_notification_deployment_protected_branch_filter 50 --actors`\n    - [x] `/chatops run feature set chat_notification_deployment_protected_branch_filter 80 --actors`\n\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set chat_notification_deployment_protected_branch_filter true`\n- [x] Announce on [the feature issue][feature_issue] that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n- [x] Create a merge request to remove `chat_notification_deployment_protected_branch_filter` feature flag. Ask for review and merge it.\n      \n  See: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/82583\n\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n    - [x] MR is in review\n    - [x] MR is closed\n\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status ad9573df04405d5577cf68dd7df52a52f34fb1ee`\n- [x] Close [the feature issue][feature_issue] to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete chat_notification_deployment_protected_branch_filter --dev`\n    - [x] `/chatops run feature delete chat_notification_deployment_protected_branch_filter --staging`\n    - [x] `/chatops run feature delete chat_notification_deployment_protected_branch_filter`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set chat_notification_deployment_protected_branch_filter false\n```\n\n[feature_issue]: https://gitlab.com/gitlab-org/gitlab/-/issues/217020","state":"closed","created_at":"2021-12-22T15:20:37.087Z","updated_at":"2022-11-22T19:09:28.321Z","closed_at":"2022-03-11T14:14:43.222Z","closed_by":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"labels":["devops::manage","feature flag","feature::addition","group::integrations","missed:14.7","missed:14.8","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349131","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":38,"completed_count":37},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"37 of 38 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349131","notes":"https://gitlab.com/api/v4/projects/278964/issues/349131/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349131/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349131","relative":"#349131","full":"gitlab-org/gitlab#349131"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99632387,"iid":349124,"project_id":278964,"title":"Advanced Search: Add meta field to indices mappings","description":"For debugging purposes it would be extremely helpful to have additional information for every index. I believe we should add the version of GitLab that created the index in this field as our first iteration.\n\nWe could also output this information in https://gitlab.com/gitlab-org/gitlab/-/issues/340437\n\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-meta-field.html","state":"closed","created_at":"2021-12-22T14:05:18.992Z","updated_at":"2022-05-30T16:00:04.824Z","closed_at":"2021-12-23T08:09:52.471Z","closed_by":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"labels":["Category:Global Search","auto updated","devops::data_stores","group::global search","needs weight","section::enablement"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"}],"author":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"type":"ISSUE","assignee":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349124","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349124","notes":"https://gitlab.com/api/v4/projects/278964/issues/349124/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349124/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349124","relative":"#349124","full":"gitlab-org/gitlab#349124"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99628244,"iid":349117,"project_id":278964,"title":"Have a way to check if a Service ping metric data is available in Sisense","description":"\n# Why?\n\nThis would help answer a question we often have:\n\n_Is the data available for a given metric for GitLab.com?_\n\n\n# Proposal\n\n- [x] Have a copy-paste query in metric dictionary built specifically for the selected metric. The query is ready to be used in Sisense https://gitlab.com/gitlab-org/growth/product-intelligence/metric-dictionary/-/merge_requests/13\n\n  https://metrics.gitlab.com/\n- [x] Record  video https://www.youtube.com/watch?v=n4o65ivta48\n- ~~[ ] Have a dashboard in Sisense with a metric key path filter that could be queried for the latest data for GitLab.com~~\n\nQuery to get information by the metric key path with a custom filter\n\nFilter query `metric_key_path`\n\n```sql\nselect metrics_path from common.dim_usage_ping_metric\n```\n\n```sql\nWITH all_metrics AS (\n  \n    SELECT --checking all metrics in the last few months\n      usage_data.metrics_path,\n      ping_payload.ping_created_at,\n      usage_data.metric_value,\n      ROW_NUMBER() OVER(PARTITION BY usage_data.metrics_path ORDER BY ping_payload.ping_created_at DESC) AS ping_rnk --descending rank based on ping_created_at\n    FROM common_prep.prep_usage_data_flattened usage_data\n    JOIN common.fct_usage_ping_payload ping_payload\n      ON usage_data.dim_usage_ping_id = ping_payload.dim_usage_ping_id\n    WHERE ping_payload.ping_created_at \u003e= DATEADD('month', -2, DATE_TRUNC('month', CURRENT_DATE)) --last 2 months to present\n      AND ping_payload.dim_instance_id = 'ea8bf810-1d6f-4a6a-b4fd-93e8cbd8b57f' --SaaS\n)\nSELECT\n  dim_usage_ping_metric.metrics_path,\n  IFF(all_metrics.metrics_path IS NOT NULL, TRUE, FALSE) AS metric_has_data,\n  ping_created_at AS last_ping,\n  metric_value AS last_metric_value\nFROM common.dim_usage_ping_metric --metrics from yml files (https://dbt.gitlabdata.com/#!/model/model.gitlab_snowflake.dim_usage_ping_metric)\nLEFT JOIN all_metrics\n  ON dim_usage_ping_metric.metrics_path = all_metrics.metrics_path\n  AND ping_rnk = 1 --limit to most recent ping\nWHERE metrics_status = 'active'  \nAND [dim_usage_ping_metric.metrics_path=metric_key_path]\nORDER BY 1\n```","state":"closed","created_at":"2021-12-22T12:57:07.991Z","updated_at":"2022-03-16T11:28:12.556Z","closed_at":"2022-01-17T15:03:54.025Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["devops::growth","group::product intelligence","section::growth","type::maintenance"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349117","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349117","notes":"https://gitlab.com/api/v4/projects/278964/issues/349117/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349117/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349117","relative":"#349117","full":"gitlab-org/gitlab#349117"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6522,"epic":{"id":321040,"iid":6522,"title":"Scalable Metrics Dictionary","url":"/groups/gitlab-org/-/epics/6522","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":99622850,"iid":349110,"project_id":278964,"title":"Change the `secrets` keyword to use CI_JOB_JWT_V2","description":"## Scope\n\nThis issue is part of a bigger development effort described in detail by its epic. The scope of this issue is to coordinate the work needed to move the `secrets` stanza over to the new `CI_JOB_JWT_V2` predefined variable.\n\n## Proposal\n\nUse the `CI_JOB_JWT_V2` based on a new configuration value\n\n### Iterations\n\n1. Implement the configuration, and set the default to be `CI_JOB_JWT`\n   - create a deprecation notice\n1. Change the default to `CI_JOB_JWT_V2` in %\"15.0\" and leave the configuration option\n1. Update the documentation with the necessary changes to allow users to reconfigure their Authentication with Vault - https://gitlab.com/gitlab-org/gitlab/-/issues/357624\n\n#### Current status! (as of the start of %\"14.10\")\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/349110#note_874544155","state":"closed","created_at":"2021-12-22T11:15:55.893Z","updated_at":"2022-05-11T06:47:57.244Z","closed_at":"2022-05-05T09:10:03.396Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["CI variables","Category:Secrets Management","breaking change","candidate::15.0","devops::verify","documentation","group::pipeline authoring","section::ops","type::maintenance","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":23,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349110","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349110","notes":"https://gitlab.com/api/v4/projects/278964/issues/349110/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349110/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349110","relative":"#349110","full":"gitlab-org/gitlab#349110"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7193,"epic":{"id":394607,"iid":7193,"title":"Transition to cloud-supported JWT Token (V2)","url":"/groups/gitlab-org/-/epics/7193","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":50313,"iid":62,"sequence":15,"group_id":9970,"title":"Iteration 15","description":"Target milestone `15.0`","state":3,"created_at":"2022-03-06T00:05:02.021Z","updated_at":"2022-05-16T00:05:02.460Z","start_date":"2022-05-02","due_date":"2022-05-15","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/50313"},"health_status":null},{"id":99620787,"iid":349109,"project_id":278964,"title":"Spike in Snowplow bad events","description":"## Summary\n\nSince 20th of December there is increasing number of Snowplow Bad Events on CloudWatch log\n\n![Screenshot_2021-12-22_at_11.38.56](/uploads/05f0e61c19ef999a030e51ce92fae720/Screenshot_2021-12-22_at_11.38.56.png)\n\n**Number of Good/Bad events in Sisense**\n\n\n\u003cimg src=\"/uploads/5fc91781652cdda45c7046cd5841167d/Screen_Shot_2021-12-22_at_12.29.08.png\" width=\"50%\" /\u003e\n\nMost likely it is related to:\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/75418\n\n### Update after investigation:\n\nError we're getting is:\n```\n“2021-12-22 10:06:42 UTC\\” is invalid against requested date format(s) [yyyy-MM-dd’T’HH:mm:ssZ, yyyy-MM-dd’T’HH:mm:ss.SSSZ]\\n`\n```\n\nHowever, not all events are marked as BAD events. This could be because the format is different from Backend \u0026 Frontend events.\n- Frontend Events submit: `2021-12-22T11:16:56.015Z`\n- Backend Events submit: `2021-12-22 11:20:09 UTC`\n\nThe number of page view events didn't drop between 20th and 21st, which support the theory that it's mostly backend events:\n\n\u003cimg src=\"/uploads/c4a9c46e1022e4b664697f6a216f320e/Screen_Shot_2021-12-22_at_12.31.37.png\" width=\"50%\" /\u003e\n\n\nMR to resolve the issue in the schema: https://gitlab.com/gitlab-org/iglu/-/merge_requests/73","state":"closed","created_at":"2021-12-22T10:40:54.737Z","updated_at":"2022-01-18T12:14:28.324Z","closed_at":"2021-12-22T16:47:53.968Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["Unplanned","backend","group::product intelligence","priority::1","severity::1"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349109","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349109","notes":"https://gitlab.com/api/v4/projects/278964/issues/349109/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349109/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349109","relative":"#349109","full":"gitlab-org/gitlab#349109"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":99619983,"iid":349099,"project_id":278964,"title":"Use reverse token filter to improve extension queries","description":"In https://gitlab.com/gitlab-org/gitlab/-/merge_requests/76933#note_791957843 @DylanGriffith has suggested to use \"reverse token filter\" https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-reverse-tokenfilter.html for `file_name` in order to efficiently filter documents by extension","state":"closed","created_at":"2021-12-22T10:26:47.048Z","updated_at":"2022-10-21T14:15:13.545Z","closed_at":"2022-02-08T08:29:58.521Z","closed_by":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"labels":["Category:Global Search","auto updated","bug::performance","devops::data_stores","feature::enhancement","group::global search","needs weight","section::enablement","type::feature","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"}],"author":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"type":"ISSUE","assignee":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349099","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349099","notes":"https://gitlab.com/api/v4/projects/278964/issues/349099/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349099/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349099","relative":"#349099","full":"gitlab-org/gitlab#349099"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7257,"epic":{"id":402697,"iid":7257,"title":"Remove wildcard prefix searches","url":"/groups/gitlab-org/-/epics/7257","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":100109716,"iid":349561,"project_id":278964,"title":"Container Scanning fails for \"from scratch\" Images","description":"**Is**\n\nScanning a \"from scratch\" docker image fails with\n\n```\n...\n021-12-22T07:34:45.807Z\tDEBUG\tOS is not detected and vulnerabilities in OS packages are not detected.\n2021-12-22T07:34:45.807Z\tDEBUG\tDetected OS: unknown\n2021-12-22T07:34:45.807Z\tINFO\tNumber of language-specific files: 0\n\n[ERROR] [2021-12-22 07:34:45 +0000] []  ▶  private method `select' called for nil:NilClass\n```\n\n**Expected**\nThe scan should finish without errors\n\n**Analysis**\n\nI think gtcs has wrong assumption for the json output of trivy. The Keys `metadata / os Family `,  `metadata / os / Name`, `Results` and perhaps others do not always exist.\nThis is where https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/blob/master/lib/gcs/dependency_list_converter.rb#L26 and following will fail.\n\n## Implementation Plan\n\n- [x] ~backend in `lib/gcs/dependency_list_converter.rb` in `container-scanning` analyzer return empty report when there JSON report from Trivy does not contain `Result` section.","state":"closed","created_at":"2021-12-22T09:16:29.583Z","updated_at":"2022-01-17T22:43:03.937Z","closed_at":"2022-01-17T22:43:03.592Z","closed_by":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"labels":["Category:Container Scanning","backend","devops::govern","group::security policies","priority::2","section::sec","severity::2","type::bug","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"}],"author":{"id":1221728,"username":"martinei","name":"Martin Eigenbrodt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/35bc7be2e4af751cafe8eb9453a76b05?s=80\u0026d=identicon","web_url":"https://gitlab.com/martinei"},"type":"ISSUE","assignee":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/349561","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/349561","notes":"https://gitlab.com/api/v4/projects/278964/issues/349561/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/349561/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#349561","relative":"#349561","full":"gitlab-org/gitlab#349561"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]