[{"id":86867246,"iid":330614,"project_id":278964,"title":"Github Importer failing with `string contains null byte`","description":"```\n{\n  \"severity\": \"ERROR\",\n  \"time\": \"2021-05-08T02:40:33.950Z\",\n  \"correlation_id\": \"573874bb5174a590276799ee274da98a\",\n  \"exception.class\": \"ArgumentError\",\n  \"exception.message\": \"string contains null byte\",\n  \"exception.backtrace\": [\n    \"lib/gitlab/database.rb:178:in `block (2 levels) in bulk_insert'\",\n    \"lib/gitlab/database.rb:177:in `map'\",\n    \"lib/gitlab/database.rb:177:in `block in bulk_insert'\",\n    \"lib/gitlab/database.rb:176:in `map'\",\n    \"lib/gitlab/database.rb:176:in `bulk_insert'\",\n    \"lib/gitlab/github_import/importer/note_importer.rb:41:in `execute'\",\n    \"app/workers/concerns/gitlab/github_import/object_importer.rb:31:in `import'\",\n    \"app/workers/concerns/gitlab/github_import/rescheduling_methods.rb:31:in `try_import'\",\n    \"app/workers/concerns/gitlab/github_import/rescheduling_methods.rb:19:in `perform'\",\n    \"lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'\",\n    \"lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:40:in `perform'\",\n    \"lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'\",\n    \"lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `block in call'\",\n    \"lib/gitlab/application_context.rb:63:in `block in use'\",\n    \"lib/gitlab/application_context.rb:63:in `use'\",\n    \"lib/gitlab/application_context.rb:24:in `with_context'\",\n    \"lib/gitlab/sidekiq_middleware/worker_context/server.rb:15:in `call'\",\n    \"lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'\",\n    \"lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/admin_mode/server.rb:8:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/request_store_middleware.rb:10:in `block in call'\",\n    \"lib/gitlab/with_request_store.rb:17:in `enabling_request_store'\",\n    \"lib/gitlab/with_request_store.rb:10:in `with_request_store'\",\n    \"lib/gitlab/sidekiq_middleware/request_store_middleware.rb:9:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/server_metrics.rb:38:in `block in call'\",\n    \"lib/gitlab/metrics/background_transaction.rb:30:in `run'\",\n    \"lib/gitlab/sidekiq_middleware/server_metrics.rb:38:in `call'\",\n    \"lib/gitlab/sidekiq_middleware/monitor.rb:8:in `block in call'\",\n    \"lib/gitlab/sidekiq_daemon/monitor.rb:49:in `within_job'\",\n    \"lib/gitlab/sidekiq_middleware/monitor.rb:7:in `call'\",\n    \"lib/gitlab/sidekiq_logging/structured_logger.rb:19:in `call'\"\n  ],\n```","state":"closed","created_at":"2021-05-11T13:43:29.962Z","updated_at":"2022-05-31T09:32:27.207Z","closed_at":"2021-05-17T17:56:44.087Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Importer:GitHub","Next Up","Unplanned","backend","devops::manage","group::import","section::dev","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330614","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330614","notes":"https://gitlab.com/api/v4/projects/278964/issues/330614/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330614/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330614","relative":"#330614","full":"gitlab-org/gitlab#330614"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3050,"epic":{"id":39430,"iid":3050,"title":"üêû GitHub Importer bugs","url":"/groups/gitlab-org/-/epics/3050","group_id":9970},"iteration":null,"health_status":null},{"id":86856126,"iid":330606,"project_id":278964,"title":"Company size 0 is not a valid size","description":"@kcomoli @s_awezec (cc @amandarueda ) I think we should prevent \"company size\" of 0 in the trial form because people are inclined to enter so, and CustomersDot rejects it.\n\nWe're logging the errors users are facing in CustomerDot interactions - \nhttps://sentry.gitlab.net/gitlab/gitlabcom/issues/2601019/?query=SubscriptionPortalRESTException","state":"closed","created_at":"2021-05-11T12:10:17.858Z","updated_at":"2021-05-17T06:32:32.612Z","closed_at":"2021-05-17T06:28:44.557Z","closed_by":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"labels":["Category:Conversion Experiment","devops::growth","group::acquisition","section::growth"],"milestone":null,"assignees":[],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330606","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330606","notes":"https://gitlab.com/api/v4/projects/278964/issues/330606/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330606/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330606","relative":"#330606","full":"gitlab-org/gitlab#330606"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86855683,"iid":330605,"project_id":278964,"title":"[Feature flag] Rollout of `ci_modified_paths_of_external_prs`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [only external_pull_requests with changes is not working](https://gitlab.com/gitlab-org/gitlab/-/issues/208692) on production,\nthat is currently behind the `ci_modified_paths_of_external_prs` feature flag.\n\nIntroduced in: !60736\n\n## Owners\n\n- Team: ~\"group::pipeline authoring\" \n- Most appropriate slack channel to reach out to: `#g_pipeline-authoring`\n- Best individual to reach out to: @furkanayhan \n- PM: @dhershkovitch \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set ci_modified_paths_of_external_prs true --dev`\n    - [x] `/chatops run feature set ci_modified_paths_of_external_prs true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e ci_modified_paths_of_external_prs true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature. If there is no risk that the feature affects usability or server loads, skip to the global rollout.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_modified_paths_of_external_prs \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_modified_paths_of_external_prs \u003crollout-percentage\u003e`\n- [x] Enable the feature globally on production environment.\n  - [x] `/chatops run feature set ci_modified_paths_of_external_prs true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Cross-post chatops slack command to `#support_gitlab-com`.\n  ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)) and in your team channel\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `ci_modified_paths_of_external_prs` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete ci_modified_paths_of_external_prs --dev`\n    - [x] `/chatops run feature delete ci_modified_paths_of_external_prs --staging`\n    - [x] `/chatops run feature delete ci_modified_paths_of_external_prs`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_modified_paths_of_external_prs false\n```","state":"closed","created_at":"2021-05-11T12:04:39.203Z","updated_at":"2021-10-28T13:56:52.253Z","closed_at":"2021-09-15T10:28:15.008Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","backend","devops::verify","feature flag","group::pipeline authoring","section::ops","type::maintenance","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":11,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330605","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":42,"completed_count":22},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"22 of 42 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330605","notes":"https://gitlab.com/api/v4/projects/278964/issues/330605/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330605/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330605","relative":"#330605","full":"gitlab-org/gitlab#330605"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86855512,"iid":330603,"project_id":278964,"title":"Show certain CustomersDot exceptions to the end user","description":"We've recently globally disabled showing exceptions returning from CustomersDot to the users as part of https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59487 due to some of those exceptions leaking details. \n\nIt turns out, some of those exceptions convey useful information which the user needs to see. \n\nWhen I search sentry for `https://sentry.gitlab.net/gitlab/gitlabcom/?query=SubscriptionPortalRESTException`  I can discover the following type of errors:\n\n### Errors we should show.\n\nThose come mostly from Zuora and we show verbatim to the users.\n\n```\n{\"email\"=\u003e[\"has already been taken\"]}\n{\"message\"=\u003e\"Your card has insufficient funds.\"}\n{\"message\"=\u003e\"Your card was declined.\"}\n\nValidation failed: Gl namespace can have only one trial\nGitlab::HostedPlans::CreateTrialService::TrialAlreadyUsed\n```\n\n### Exceptions which leak data\n\n```\nInvalid Namespace ID: 111. Customer ID: 222\nValidation failed: Company can't contain XSS payload\nPostgres error....\n```\n\nThis is where things get complicated, so we can't show raw exceptions coming from CustomersDot components because they leak some security related information. But we must show exceptions meant to be shown to the end users.\n\n\n\n## Solution Approach\n\nShow the user facing errors whenevr they show up\n\n```\n    KNOWN_ZUORA_ERRORS = [\n      'A one-time charge can be updated only if it belongs to a New Product amendment.',\n      'Electronic payment needs electronic payment method.',\n      'Please apply some changes to your subscription before continuing.',\n      'Please enter a valid quantity.',\n      'State/Province should be ISO standard state or province. N/A is not an ISO state/province of United States.',\n      'Taxation Requirement: State is required for Sold To Contact if the country is United States or Canada.',\n      'The Zuora GetTax call to Avalara returned the following error(s): Tax calculation cannot be determined. Zip is not valid for the state.',\n      'Your card has insufficient funds.',\n      'Your card number is incorrect.',\n      \"Your card's expiration month is invalid.\",\n      'Your card was declined.'\n    ].freeze\n```","state":"closed","created_at":"2021-05-11T12:00:19.107Z","updated_at":"2021-05-26T07:18:27.213Z","closed_at":"2021-05-26T07:18:27.207Z","closed_by":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"labels":["Category:Purchase","[deprecated] üçé","devops::fulfillment","frontend","group::purchase","section::fulfillment"],"milestone":null,"assignees":[{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330603","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330603","notes":"https://gitlab.com/api/v4/projects/278964/issues/330603/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330603/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330603","relative":"#330603","full":"gitlab-org/gitlab#330603"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86841396,"iid":330583,"project_id":278964,"title":"Support YAML files for OpenAPI Specs","description":"### Problem\n\nAccording to the [OpenAPI specification a openapi definition](https://swagger.io/specification/#format) can be defined in yaml or json. However API fuzzing only accepts a json format. \n\nThe [swagger online editor](https://editor.swagger.io/) can easily convert from json to yaml, but defaults to YAML. Users may prefer to work in YAML as a result. \n\n### Proposal\n\nAllow a user to specify the specification in YAML or JSON format. \n\nTasks:\n\n1. [x] Verify `NSwag` library supports yaml\n1. [x] Update validation performed by `worker-entry` to support yaml for OpenAPI specifications\n1. [x] Update `runner` as needed to support yaml for OpenAPI\n1. [x] Testing\n   1. [x] Add unit tests for `runner` in c#\n      1. OpenAPI YAML for v2.0, v3.0\n   1. [x] Add integration test for `worker-entry` that uses yaml\n      1. OpenAPI YAML for v2.0, v3.0 (using UTF-8-BOM)\n   1. [x] Add e2e test that uses yaml\n      1. [openapi-v2-yaml](https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/openapi-v2-yaml)\n      1. [openapi-v3-yaml](https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/openapi-v3-yaml)\n1. [x] Publish new container\n1. [X] Update documentation to reflect either format is supported. MR [!61751](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61751)\n   1. [X] API Fuzzing\n   1. [X] DAST API\n\nMR [!508](https://gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing-src/-/merge_requests/508)","state":"closed","created_at":"2021-05-11T08:54:44.524Z","updated_at":"2021-06-17T15:38:31.559Z","closed_at":"2021-05-21T14:27:08.723Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","feature::enhancement","group::dynamic analysis","section::sec","type::feature","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330583","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":11},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"11 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330583","notes":"https://gitlab.com/api/v4/projects/278964/issues/330583/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330583/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330583","relative":"#330583","full":"gitlab-org/gitlab#330583"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86816564,"iid":330564,"project_id":278964,"title":"Better recovery from missing trace chunks in Redis","description":"As discovered in https://gitlab.com/gitlab-org/gitlab/-/issues/330141 (particularly [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/330141#note_571027032)) it is possible that we could end up with Ci::BuildTraceChunk's  that think their data is in Redis when it is not, and when anything tries to process that (e.g. the `Ci::ArchiveTracesCronWorker`, and viewing the job output in the UI, plus potentially others) it fails with Gitlab::Ci::Trace::ChunkedIO::FailedToGetChunkError in lib/gitlab/ci/trace/chunked_io.rb (see [Sentry](https://sentry.gitlab.net/gitlab/gitlabcom/issues/2613520/events/41293982/?environment=gprd).\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/296616 is perhaps on the path to make this sort of scenario less likely, but IMO we need better handling of this at the sharp end once everything has gone wrong.  We might need to be selective about the way to recover, e.g. in the UI some placeholder text might be acceptable, and similar when archiving the artifact, but there could be other scenarios where we don't want to do that if the error could be transient.  It depends how permanent the replacement is and what impact that might have (or, if we're relying on the failure to generate a retry waiting for the data to arrive).","state":"closed","created_at":"2021-05-10T23:44:03.089Z","updated_at":"2022-06-13T03:03:39.803Z","closed_at":"2022-06-13T03:03:39.788Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"ü§ñ GitLab Bot ü§ñ","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Continuous Integration","Development Department","[deprecated] Accepting merge requests","auto closed","auto updated","backend","devops::verify","group::pipeline execution","priority::2","section::ops","severity::3","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3623028,"username":"cmiskell","name":"Craig Miskell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/852a93b505b1f4a5549595792035f445?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmiskell"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330564","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330564","notes":"https://gitlab.com/api/v4/projects/278964/issues/330564/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330564/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330564","relative":"#330564","full":"gitlab-org/gitlab#330564"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86815650,"iid":330561,"project_id":278964,"title":"Abusing ApolloUploadServer middleware leads to denial of service","description":"**[HackerOne report #1181284](https://hackerone.com/reports/1181284)** by `0xn3va` on 2021-04-30, assigned to @rchan-gitlab:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nGitlab uses [ApolloUploadServer](https://github.com/jetruby/apollo_upload_server-ruby) middleware to directly upload images via graphql in the design management functionality. When a user sends a request like the following:\n\n```http  \nPOST /api/graphql HTTP/1.1  \nHost: 0xn3va.gitlab.local  \nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryelAQ2cJthWWBkd4o\n\n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"operations\"\n\n{\"operationName\":\"uploadDesign\",\"variables\":{\"files\":[],\"projectPath\":\"0xn3va/ios-tmpl\",\"iid\":\"21\"},\"query\":\"...\"}  \n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"map\"\n\n{\"1\":[\"variables.files.0\"]}  \n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"1\"; filename=\"image.png\"  \nContent-Type: image/png  \n...  \n```\n\nthe middleware intercepts the request, uploads images into a temp folder, and updates the array for the `files` key in the `operations` variable using the `map`. The `map` contains the following values (in our example  it is `{\"1\":[\"variables.files.0\"]}`):  \n- `1` is the name of a variable with the image in the request  \n- `variables.files` is a \"path\" to an array inside the `operations`, where the middleware should add an object of temporary file  \n- `0` is a key, which the middleware uses to insert the object\n\nYou can see how `ApolloUploadServer` updates the graphql query in the `ApolloUploadServer::GraphQLDataBuilder.assign_file` method:\n\n```ruby  \ndef assign_file(field, splited_path, file)  \n  wrapped_file = Wrappers::UploadedFile.new(file)\n\n  if field.is_a? Hash  \n    field.merge!(splited_path.last =\u003e wrapped_file)  \n  elsif field.is_a? Array  \n    field[splited_path.last.to_i] = wrapped_file  \n  end  \nend  \n```\n\nHere `splited_path.last` is the key (index) that the user can set in the `map` variable (in our example it is `0`). And `field` is the array where the middleware will store the temp file object.\n\nIn other words, you can set an index in the array, where the middleware should insert the object. If you send a request with index `N` greater than `0`:\n\n```http  \nPOST /api/graphql HTTP/1.1  \nHost: 0xn3va.gitlab.local  \nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryelAQ2cJthWWBkd4o\n\n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"operations\"\n\n{\"operationName\":\"uploadDesign\",\"variables\":{\"files\":[],\"projectPath\":\"0xn3va/ios-tmpl\",\"iid\":\"21\"},\"query\":\"...\"}  \n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"map\"\n\n{\"1\":[\"variables.files.10\"]}  \n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"1\"; filename=\"image.png\"  \nContent-Type: image/png  \n...  \n```\n\nGitlab will respond with an error, where it will write the same error message for the `N - 1` variable since they are null:\n\n```http  \nHTTP/1.1 200 OK  \nServer: nginx  \nContent-Length: 2550\n\n{\"errors\":[{\"message\":\"Variable $files of type [Upload!]! was provided invalid value for 0 (Expected value to not be null), 1 (Expected value to not be null), 2 (Expected value to not be null), 3 (Expected value to not be null), 4 (Expected value to not be null), 5 (Expected value to not be null), 6 (Expected value to not be null), 7 (Expected value to not be null), 8 (Expected value to not be null), 9 (Expected value to not be null), 10 (Expected value to not be null), 11 (Expected value to not be null), 12 (Expected value to not be null), 13 (Expected value to not be null), 14 (Expected value to not be null), 15 (Expected value to not be null), 16 (Expected value to not be null), 17 (Expected value to not be null), 18 (Expected value to not be null), 19 (Expected value to not be null), 20 (Expected value to not be null), 21 (Expected value to not be null)\",\"locations\":[{\"line\":1,\"column\":23}],\"extensions\":{\"value\":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{\"size\":38344,\"content_type\":\"application/octet-stream\",\"original_filename\":\"file123.png\",\"sha256\":\"bf6d7ed0d79ada812ec750c80f7556430a39cdcee0cf6b05db3dda72777cdee2\",\"remote_id\":\"\"}],\"problems\":[{\"path\":[0],\"explanation\":\"Expected value to not be null\"},{\"path\":[1],\"explanation\":\"Expected value to not be null\"},{\"path\":[2],\"explanation\":\"Expected value to not be null\"},{\"path\":[3],\"explanation\":\"Expected value to not be null\"},{\"path\":[4],\"explanation\":\"Expected value to not be null\"},{\"path\":[5],\"explanation\":\"Expected value to not be null\"},{\"path\":[6],\"explanation\":\"Expected value to not be null\"},{\"path\":[7],\"explanation\":\"Expected value to not be null\"},{\"path\":[8],\"explanation\":\"Expected value to not be null\"},{\"path\":[9],\"explanation\":\"Expected value to not be null\"},{\"path\":[10],\"explanation\":\"Expected value to not be null\"},{\"path\":[11],\"explanation\":\"Expected value to not be null\"},{\"path\":[12],\"explanation\":\"Expected value to not be null\"},{\"path\":[13],\"explanation\":\"Expected value to not be null\"},{\"path\":[14],\"explanation\":\"Expected value to not be null\"},{\"path\":[15],\"explanation\":\"Expected value to not be null\"},{\"path\":[16],\"explanation\":\"Expected value to not be null\"},{\"path\":[17],\"explanation\":\"Expected value to not be null\"},{\"path\":[18],\"explanation\":\"Expected value to not be null\"},{\"path\":[19],\"explanation\":\"Expected value to not be null\"},{\"path\":[20],\"explanation\":\"Expected value to not be null\"},{\"path\":[21],\"explanation\":\"Expected value to not be null\"}]}}]}  \n```\n\nAs a result, you can send in multiple threads the requests with large `N` and load the application significantly, because Gitlab will try to return you huge responses.\n\n#####  Steps to reproduce\n\n1. Create a repository  \n2. Go to the Issues page and create a new issue  \n3. Click the area with `Drop or upload designs to attach` text  \n4. Choose any file and intercept the request, you should see something like this:\n\n    ```http  \n    POST /api/graphql HTTP/1.1  \n    Host: 0xn3va.gitlab.local  \n    Content-Length: 40889  \n    Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryelAQ2cJthWWBkd4o  \n    Cookie: _gitlab_session=\u003cSESSION-TOKEN\u003e  \n    Connection: close\n\n    ------WebKitFormBoundaryelAQ2cJthWWBkd4o  \n    Content-Disposition: form-data; name=\"operations\"\n\n    {\"operationName\":\"uploadDesign\",\"variables\":{\"files\":[],\"projectPath\":\"\u003cPROJECT-PATH\u003e\",\"iid\":\"\u003cISSUE-IID\u003e\"},\"query\":\"...\"}  \n    ------WebKitFormBoundaryelAQ2cJthWWBkd4o  \n    Content-Disposition: form-data; name=\"map\"\n\n    {\"1\":[\"variables.files.0\"]}  \n    ------WebKitFormBoundaryelAQ2cJthWWBkd4o  \n    Content-Disposition: form-data; name=\"1\"; filename=\"file.png\"  \n    Content-Type: image/png\n\n    ...  \n    ------WebKitFormBoundaryelAQ2cJthWWBkd4o--  \n    ```\n\n5. Send the request to Turbo Intruder  \n6. Change the `map` variable \n\n    ```json  \n    {\"1\":[\"variables.files.10000000000000\"]}  \n    ```\n\n7. Click the \"Attack\" button.\n\n#####  Impact\n\nDenial of service for all users\n\n#####  What is the current *bug* behavior?\n\nThe response size depends on the index value from a request. As a result, Gitlab receives a huge response on a small request.\n\n#####  What is the expected *correct* behavior?\n\nGitlab returns a response with length that does not depend on which arguments were passed.\n\n#####  Relevant logs and/or screenshots\n\nCPU load in normal mode:\n\n![Screenshot_2021-04-30_at_18.47.35.png](https://h1.sec.gitlab.net/a/3cd71927-fe2f-44a8-9ed2-7058d1a53d21/Screenshot_2021-04-30_at_18.47.35.png)\n\nCPU load with the following request in Turbo Intruder:\n\n```http  \nPOST /api/graphql HTTP/1.1  \nHost: 0xn3va.gitlab.local  \nContent-Length: 40889  \nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryelAQ2cJthWWBkd4o  \nCookie: _gitlab_session=\u003cSESSION-TOKEN\u003e  \nConnection: close\n\n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"operations\"\n\n{\"operationName\":\"uploadDesign\",\"variables\":{\"files\":[],\"projectPath\":\"\u003cPROJECT-PATH\u003e\",\"iid\":\"\u003cISSUE-IID\u003e\"},\"query\":\"...\"}  \n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"map\"\n\n{\"1\":[\"variables.files.1000000000\"]}  \n------WebKitFormBoundaryelAQ2cJthWWBkd4o  \nContent-Disposition: form-data; name=\"1\"; filename=\"file.png\"  \nContent-Type: image/png  \n...  \n------WebKitFormBoundaryelAQ2cJthWWBkd4o--  \n```\n\n![Screenshot_2021-04-30_at_18.53.16.png](https://h1.sec.gitlab.net/a/06251365-7fbf-43ea-a1ab-4f96f9314609/Screenshot_2021-04-30_at_18.53.16.png)\n\nGitlab is not available:\n\n![Screenshot_2021-04-30_at_18.53.03.png](https://h1.sec.gitlab.net/a/baaf570f-0421-4bb8-b8b4-6a78b990f912/Screenshot_2021-04-30_at_18.53.03.png)\n\n#####  Output of checks\n\n######  Results of GitLab environment info\n\n```bash  \n$ gitlab-rake gitlab:env:info\n\nSystem information  \nSystem:  \nProxy:\t\tno  \nCurrent User:\tgit  \nUsing RVM:\tno  \nRuby Version:\t2.7.2p137  \nGem Version:\t3.1.4  \nBundler Version:2.1.4  \nRake Version:\t13.0.3  \nRedis Version:\t6.0.10  \nGit Version:\t2.29.0  \nSidekiq Version:5.2.9  \nGo Version:\tunknown\n\nGitLab information  \nVersion:\t13.10.3-ee  \nRevision:\tdb2e358dba4  \nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails  \nDB Adapter:\tPostgreSQL  \nDB Version:\t12.6  \nURL:\t\thttp://0xn3va.gitlab.local  \nHTTP Clone URL:\thttp://0xn3va.gitlab.local/some-group/some-project.git  \nSSH Clone URL:\tgit@0xn3va.gitlab.local:some-group/some-project.git  \nElasticsearch:\tno  \nGeo:\t\tno  \nUsing LDAP:\tno  \nUsing Omniauth:\tyes  \nOmniauth Providers: gitlab\n\nGitLab Shell  \nVersion:\t13.17.0  \nRepository storage paths:  \n- default: \t/var/opt/gitlab/git-data/repositories  \nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell  \nGit:\t\t/opt/gitlab/embedded/bin/git  \n```\n\n####  Impact\n\nDenial of service for all users\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [Screenshot_2021-04-30_at_18.47.35.png](https://h1.sec.gitlab.net/a/3cd71927-fe2f-44a8-9ed2-7058d1a53d21/Screenshot_2021-04-30_at_18.47.35.png)\n* [Screenshot_2021-04-30_at_18.53.03.png](https://h1.sec.gitlab.net/a/baaf570f-0421-4bb8-b8b4-6a78b990f912/Screenshot_2021-04-30_at_18.53.03.png)\n* [Screenshot_2021-04-30_at_18.53.16.png](https://h1.sec.gitlab.net/a/06251365-7fbf-43ea-a1ab-4f96f9314609/Screenshot_2021-04-30_at_18.53.16.png)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2021-05-10T23:16:43.676Z","updated_at":"2022-11-22T19:41:54.765Z","closed_at":"2021-08-31T18:32:20.178Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Category:API","GraphQL","HackerOne","Stretch","Weakness::CWE-400","backend","devops::manage","group::integrations","missed:14.1","priority::2","section::dev","security","severity::2"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":42,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-08-08","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330561","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330561","notes":"https://gitlab.com/api/v4/projects/278964/issues/330561/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330561/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330561","relative":"#330561","full":"gitlab-org/gitlab#330561"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86815563,"iid":330560,"project_id":278964,"title":"Remove deprecated WIP from GraphQL","description":"We have deprecated WIP in favor of Draft in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60803#note_571534130.\n\nThis issue is a reminder that we need to delete those deprecated code in 14.5 according to the GraphQL deprecation guideline.","state":"closed","created_at":"2021-05-10T23:12:43.906Z","updated_at":"2022-01-10T15:50:09.124Z","closed_at":"2021-11-22T10:42:26.601Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["backend","devops::create","group::code review","missed:14.5","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-10-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330560","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330560","notes":"https://gitlab.com/api/v4/projects/278964/issues/330560/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330560/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330560","relative":"#330560","full":"gitlab-org/gitlab#330560"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3879,"epic":{"id":80141,"iid":3879,"title":"Rename WIP merge requests to Draft","url":"/groups/gitlab-org/-/epics/3879","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86811946,"iid":330553,"project_id":278964,"title":"Add pipeline jobs for new scanners","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nCurrent work has been done towards abstracting [container-scanning](https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning) project to support multiple scanners. The goal is to provide a structured/simple way of integrating third party scanners.\n\nThis [MR](https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/merge_requests/30) removes dependency from the docker file but the addition of pipeline jobs, to cover whenever `$SCANNER` is different than `trivy`, is still required.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\nRelated MR: https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/merge_requests/30\n\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] ~backend Add new jobs for building and testing GCS when `$SCANNER` is set to `grype`. `allow_failure: true` might be required for the integration tests while we wait for the scanner to be added.\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-05-10T21:26:13.097Z","updated_at":"2021-06-06T22:46:33.884Z","closed_at":"2021-06-06T22:46:33.859Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Container Scanning","backend","devops::govern","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330553","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":1},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330553","notes":"https://gitlab.com/api/v4/projects/278964/issues/330553/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330553/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330553","relative":"#330553","full":"gitlab-org/gitlab#330553"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5462,"epic":{"id":213052,"iid":5462,"title":"Follow-on Improvements to Trivy Integration","url":"/groups/gitlab-org/-/epics/5462","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86804168,"iid":330545,"project_id":278964,"title":"Investigate/Improve code reuse for alert details sidebar components","description":"The following discussion from !60960 should be addressed:\n\n- [ ] @oregand started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60960#note_570576306):  (+1 comment)\n\n    \u003e **suggestion (non-blocking)**\n    \u003e \n    \u003e We could DRY this into its own component as the only thing that seems to change now is the inner content which could be a slot :smile:\n\n## Implementation\n- [ ] ~frontend investigate the comopnents in the [`alert details sidebar`](https://gitlab.com/gitlab-org/gitlab/-/tree/master/app/assets/javascripts/vue_shared/alert_details/components/sidebar) for opportunities to refactor them using a reusable component. Ignore any `assignee`-related widgets because those are slated to be removed with https://gitlab.com/gitlab-org/gitlab/-/issues/331321, so this issue is to just look at the `header`, `status`, and `todo` widget.","state":"closed","created_at":"2021-05-10T17:55:37.828Z","updated_at":"2022-09-20T04:42:49.132Z","closed_at":"2022-09-20T04:42:49.111Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["[deprecated] Accepting merge requests","devops::govern","frontend","frontend-weight::2","group::security policies","section::dev"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330545","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330545","notes":"https://gitlab.com/api/v4/projects/278964/issues/330545/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330545/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330545","relative":"#330545","full":"gitlab-org/gitlab#330545"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86802321,"iid":330540,"project_id":278964,"title":"Solution validation: inline alerts in the MR","description":"#### What did we learn?\n\n\u003c!-- Add information for this section after the research is complete. --\u003e\n\n| Results |\n| ------ |\n| The top _actionable_ finding was that **users unfamiliar with GitLab struggled to know where to filter** the inline findings. The top _informative_ findings were 1) **Users familiar with GitLab will have no problem noticing and interacting with the inline findings** and 2) **participants unfamiliar with GitLab were confused on the difference between `Start a review` and `Add a comment`** in the MR comment. Overall, there was **a lot of praise** about the feature and it received a **6.14 out of 7 rating** on a scale of how useful users (all software developers) see this feature being in their workflows. |\n| [Link to Dovetail project](https://dovetailapp.com/projects/3USNZ4MNLlhYwtp7d0bI6E/insights/present) |\n\n### Problem to solve\n\nCode quality built a backend functionality to add inline findings in the MR diff. SAST and Secret Detection want to show [inline vulnerability findings](https://gitlab.com/gitlab-org/gitlab/-/issues/322689) as well, but we need to make sure that the proposed designs are validated with our primary persona, [Sasha, Software Developer](https://about.gitlab.com/handbook/marketing/strategic-marketing/roles-personas/#sasha-software-developer), first. \n\n* Potential positive impact: Developers (the target persona) can triage findings from within the MR diff contextual to the code being introduced, rather than remembering or needing to look at the widgets in the MR overview tab\n\n* Potential negative impact: These inline findings create too much noise from an already busy area of the UI, creating confusion and a poorer user experience, contributing to an [already falling SUS score](https://gitlab.com/gitlab-com/www-gitlab-com/-/issues/11204).\n\n### User stories\n\n- As a developer, I want to see detected security vulnerabilities in the context of my code so that I can triage them (in addition to code quality issues) in the same place and without disrupting my workflow. \n\n- As a security engineer, I want to encourage developers on my team to triage their own vulnerabilities so that we can shift left and empower them to prioritize application security without adding additional time or effort to their workflow.\n\n### Steps\n\n* [ ] Look at prior research from Vulnerability Management (Dovetail) (if any)\n* [x] Create [research script](https://docs.google.com/document/d/1ceghHTqquqO4wITGJbCPtg7g6BW3HKEeQNu37BdzRhM/edit?usp=sharing)\n* [x] Include links to prototypes into script\n* [x] Create [Google doc](https://docs.google.com/spreadsheets/d/1soxx32jsae7gkd3j0UDgU_Y7gmMEEJk5ne0Is7UDjq8/edit?usp=sharing) for notetaking\n* [x] Recruit at least 5 internal participants and book times on calendars for synchronous research sessions \n* [x] Complete internal solution validation testing\n* [x] Collect and analyze [research insights](https://app.mural.co/invitation/mural/gitlab2474/1623695111802?sender=rlippert4870\u0026key=7213e7f9-6eff-451c-8fe7-a80276d4134e) \n* [x] Iterate on designs (V2)\n* [x] RITE testing internally V2 \n* [x] Internal feedback and iterations with team (see [Reconsider the UX of interacting with Vulnerabilities in the MR](https://gitlab.com/gitlab-org/gitlab/-/issues/339983/))\n* [x] Complete external solution validation testing (UserTesting.com or FirstLook)\n* [x] Create Dovetail project with insights\n* [x] Communicate insights with Secure and UX teams\n\n### Related links\n\n* [Design exploration: Annotate MR diff with SAST \u0026 Secret Detection findings](https://gitlab.com/gitlab-org/gitlab/-/issues/322689)\n\ncc @pedroms @phikai @tmccaslin @gitlab-com/gitlab-ux/secure-protect-ux","state":"closed","created_at":"2021-05-10T17:04:37.813Z","updated_at":"2022-09-16T18:31:05.045Z","closed_at":"2022-01-12T07:50:49.976Z","closed_by":{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"},"labels":["UX","UX Roadmap","UX Theme::Automate triage","UX solution validation","design-weight::8","devops::secure","group::static analysis","missed:14.2","missed:14.3","missed:14.4","missed:14.5","missed:14.6","section::sec","severity::4","workflow::solution validation"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"}],"author":{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"},"type":"ISSUE","assignee":{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"},"user_notes_count":31,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330540","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":13,"completed_count":12},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"12 of 13 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330540","notes":"https://gitlab.com/api/v4/projects/278964/issues/330540/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330540/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330540","relative":"#330540","full":"gitlab-org/gitlab#330540"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5972,"epic":{"id":268353,"iid":5972,"title":"Create framework for inline notifications in MR diff","url":"/groups/gitlab-org/-/epics/5972","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86798765,"iid":330535,"project_id":278964,"title":"Fix project import download from remote object storage","description":"While testing https://gitlab.com/gitlab-org/gitlab/-/issues/282503 on staging, it was found that a typo was introduced in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59033, which pointed the download to the wrong variable.","state":"closed","created_at":"2021-05-10T16:07:23.762Z","updated_at":"2021-05-18T20:57:03.045Z","closed_at":"2021-05-13T14:30:25.050Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Importers","Importer:Project Export/Import","Next Up","Unplanned","backend","devops::manage","group::import","section::dev","type::bug","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330535","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330535","notes":"https://gitlab.com/api/v4/projects/278964/issues/330535/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330535/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330535","relative":"#330535","full":"gitlab-org/gitlab#330535"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3054,"epic":{"id":39522,"iid":3054,"title":"üêû Project Export/Import bugs","url":"/groups/gitlab-org/-/epics/3054","group_id":9970},"iteration":null,"health_status":null},{"id":86796779,"iid":330531,"project_id":278964,"title":"Follow-up from \"Improve large MR count query: avoid primary sticking and add caching\"","description":"The following discussion from !57341 should be addressed:\n\n- [ ] @ayufan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/57341#note_571649595): \n\n    \u003e @aakriti.gupta \n    \u003e \n    \u003e I think this usage is wrong. We should not modify a global session that is outside of this getter as this confuses other calls and guarantees we have around stickiness to primary.\n    \u003e \n    \u003e If you truly want do use replicas, you should ensure that you run in a replicas context.\n    \u003e \n    \u003e I was thinking about something along this way: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/57477/diffs#4f51a2d53426d701bb783d5d4886ffd5883ac7be.\n\n## Reason\n\nThis was created after looking at ELK logs where we see some sidekiq jobs using replicas even though they are not configured to do so: https://log.gprd.gitlab.net/goto/189996cc467d77ae1005e4cba0c29b00","state":"closed","created_at":"2021-05-10T15:29:18.816Z","updated_at":"2021-10-27T10:39:10.613Z","closed_at":"2021-06-22T14:10:03.076Z","closed_by":{"id":4787364,"username":"nmilojevic1","name":"Nikola Milojevic","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8451d96c8a6229c26374f6278f44dac0?s=80\u0026d=identicon","web_url":"https://gitlab.com/nmilojevic1"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","infradev","priority::2","severity::2","workflow::verification"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4787364,"username":"nmilojevic1","name":"Nikola Milojevic","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8451d96c8a6229c26374f6278f44dac0?s=80\u0026d=identicon","web_url":"https://gitlab.com/nmilojevic1"}],"author":{"id":12452,"username":"ayufan","name":"Kamil Trzci≈Ñski","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"type":"ISSUE","assignee":{"id":4787364,"username":"nmilojevic1","name":"Nikola Milojevic","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8451d96c8a6229c26374f6278f44dac0?s=80\u0026d=identicon","web_url":"https://gitlab.com/nmilojevic1"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330531","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330531","notes":"https://gitlab.com/api/v4/projects/278964/issues/330531/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330531/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330531","relative":"#330531","full":"gitlab-org/gitlab#330531"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5974,"epic":{"id":268361,"iid":5974,"title":"Generalise our Load Balancing usage to allow many databases","url":"/groups/gitlab-org/-/epics/5974","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86785295,"iid":330508,"project_id":278964,"title":"Geo: Provide more information when the verification status is N/A","description":"### Problems to solve\n\nComing from the design discussion - https://gitlab.com/gitlab-org/gitlab/-/issues/329851#note_567082777\n\nWe need to specify why users are seeing N/A and better link them to our documentation - which datatype we supported for the verification.\n\nDocumentation link - https://docs.gitlab.com/ee/administration/geo/replication/datatypes.html#data-types\n\n### Design\n\n- [Figma spec üîó](https://www.figma.com/file/MYEfBPGuLygUMLAMa4UGkI/Geo?node-id=710%3A11914)\n- Copy: `N/A: Geo does not verify this component yet. See the data types we plan to support.`","state":"closed","created_at":"2021-05-10T13:12:52.548Z","updated_at":"2022-02-01T19:48:51.658Z","closed_at":"2022-01-27T14:10:44.628Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["SUS::Impacting","Technical Writing","UI text","UX","devops::systems","feature::enhancement","frontend","group::geo","quad-planning::complete-no-action","section::enablement","severity::4","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4903414,"username":"sunjungp","name":"Sunjung Park","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a2c072c26031ffd81b676b43eeb7b781?s=80\u0026d=identicon","web_url":"https://gitlab.com/sunjungp"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330508","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330508","notes":"https://gitlab.com/api/v4/projects/278964/issues/330508/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330508/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330508","relative":"#330508","full":"gitlab-org/gitlab#330508"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6042,"epic":{"id":274361,"iid":6042,"title":"Geo Status Page Improvements","url":"/groups/gitlab-org/-/epics/6042","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86784935,"iid":330505,"project_id":278964,"title":"Add tests for RedisHLLMetric class","description":"The following discussion from !60089 should be addressed:\n\n- [ ] @toupeira started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60089#note_571422880):  (+1 comment)\n\n    \u003e **suggestion:** Looks like this is the first time we're using the `event_names` method, which is why we haven't noticed this bug yet? :smile_cat: \n    \u003e \n    \u003e Should we add some basic specs for this class? This could also be a follow-up.","state":"closed","created_at":"2021-05-10T13:06:29.653Z","updated_at":"2021-06-04T00:14:27.202Z","closed_at":"2021-05-25T05:52:40.684Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["backend","devops::growth","group::product intelligence","maintenance::refactor","milestone::p3","section::growth"],"milestone":null,"assignees":[],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330505","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330505","notes":"https://gitlab.com/api/v4/projects/278964/issues/330505/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330505/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330505","relative":"#330505","full":"gitlab-org/gitlab#330505"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5931,"epic":{"id":264515,"iid":5931,"title":"Usage Ping Maintenance","url":"/groups/gitlab-org/-/epics/5931","group_id":9970,"human_readable_end_date":"Jan 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86784577,"iid":330502,"project_id":278964,"title":"Follow-up from \"Consolidate CycleAnalytics and ValueStreamAnalytics namespaced i18n strings\"","description":"We have a mixture of strings externalized under the `CycleAnalytics` namespace, we should consolidate these under `ValueStreamAnalytics` as well as update any new i18n strings without a namespace.\n\nThe following discussion from !60575 should be addressed:\n\n- [ ] @rspeicher started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60575#note_569213542):  (+6 comments)\n\n    \u003e I'm a little confused by this. We only added this translation string in this MR, but as far as I can tell it's only referenced in a spec. Why does this work?","state":"closed","created_at":"2021-05-10T13:00:08.323Z","updated_at":"2022-03-03T23:33:24.823Z","closed_at":"2022-03-03T23:31:22.631Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Category:Internationalization","Category:Value Stream Management","backend","devops::manage","frontend","group::optimize","section::dev"],"milestone":null,"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330502","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330502","notes":"https://gitlab.com/api/v4/projects/278964/issues/330502/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330502/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330502","relative":"#330502","full":"gitlab-org/gitlab#330502"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86776521,"iid":330496,"project_id":278964,"title":"üé® Design: API fuzzing: project level manage profiles","description":"### Background\n\nBased on the discovery on the previous [`issue`](https://gitlab.com/gitlab-org/gitlab/-/issues/297539), we have two personas and many tasks. And the design becomes too big to cover within one issue. So I divided the original issue into 6:\n\n1. üé® Design: API fuzzing: project-level configure with local(project) profile #330481\n1. üé® Design: API fuzzing: project level configure: edit beaver token #331500\n1. üé® Design: API fuzzing: project level configure edit route #331498\n1. **(This issue)** üé® Design: API fuzzing: project-level manage profiles #330496\n1. üé® Design: API fuzzing: project-level configure with group profile #330480\n1. üé® Design: API fuzzing: group-level manage group profile #330482\n\n\nIssue number 2 and 3 will need some help of research with [issue-Problem validation: How people use group-level settings and project-level settings for API fuzzing](https://gitlab.com/gitlab-org/ux-research/-/issues/1447)\n\n### JTBD\n\nWhen I am configuring a CI/CD security scan, I want to specify which assets need to be scanned and under which circumstances, So that I can ensure my assets are secure prior to or at their release.\n\n### Target Persona\n\nThis user is focusing on the personas:\n\nthose who use group-level profiles\n\n* [Sam-Seucrity analyst](https://about.gitlab.com/handbook/marketing/strategic-marketing/roles-personas/#sam-security-analyst)\n* [Sasha-Dev](https://about.gitlab.com/handbook/marketing/strategic-marketing/roles-personas/#sasha-software-developer)\n\n### Scenario\n\nThis issue is focused on the following scenario:\n\n* As a person who is responsible for API fuzz testing (works on project level), some times, I go look into profiles, to see which profiles use the most, perform the best, which ones are not. I might edit some profiles, remove the unused ones or create new ones. So that I have a better overview of the API fuzzing status for my project\n\n\n### Tasks\n\n* Scenario 1:\n  * task 1: I want to have an overview of the status of all profile\n  * task 2: I want to identify the good/bad ones\n  * task 3: I want to edit some profiles\n  * task 4: I want to remove some profiles\n  * task 5: I want to create new profiles\n\n\u003cimg src=\"/uploads/5d8d8a66842ebd15761b57a761536232/Screenshot_2021-05-10_at_15.50.22.png\"  width=\"420\" \u003e\n\n### Design proposal\n\n- Figma file: https://www.figma.com/file/T3GLY9ygaPgywEuoIfOvvD/API-Fuzzing-Configuration?node-id=1050%3A0]\n- Handover to devs video: https://www.loom.com/share/d004304f71cf4d039eeb8b8f72877bd9\n\n![overview-manage-profiles](/uploads/4efec801a91de42c301259128380702c/overview-manage-profiles.gif)","state":"closed","created_at":"2021-05-10T11:23:49.940Z","updated_at":"2021-10-29T16:30:38.820Z","closed_at":"2021-07-06T11:43:16.319Z","closed_by":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"labels":["Category:Fuzz Testing","Technical Writing","UX","devops::secure","group::dynamic analysis","section::sec","tw::finished"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"}],"author":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"type":"ISSUE","assignee":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330496","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330496","notes":"https://gitlab.com/api/v4/projects/278964/issues/330496/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330496/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330496","relative":"#330496","full":"gitlab-org/gitlab#330496"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86772634,"iid":330493,"project_id":278964,"title":"Define nomenclature for usage ping","description":"Follow-up issue from discussion https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61243#note_571262451\n\nDefine nomenclature for Usage Ping: \n\nTo be defined:\n\n* `Usage Ping`\n* `Usage Data`\n\nCurrent terms defined https://docs.gitlab.com/ee/development/usage_ping/metrics_instrumentation.html#nomenclature\n\nWe could use this issue to define common terms used by Product Intelligence \n\ncc @kpaizee","state":"closed","created_at":"2021-05-10T10:15:38.548Z","updated_at":"2021-06-18T01:06:29.972Z","closed_at":"2021-06-17T11:44:50.761Z","closed_by":{"id":8555568,"username":"kpaizee","name":"Kati Paizee","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8555568/avatar.png","web_url":"https://gitlab.com/kpaizee"},"labels":["Technical Writing","backend","devops::growth","documentation","group::product intelligence","milestone::p2","section::growth","workflow::ready for development"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":8555568,"username":"kpaizee","name":"Kati Paizee","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8555568/avatar.png","web_url":"https://gitlab.com/kpaizee"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8555568,"username":"kpaizee","name":"Kati Paizee","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8555568/avatar.png","web_url":"https://gitlab.com/kpaizee"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330493","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330493","notes":"https://gitlab.com/api/v4/projects/278964/issues/330493/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330493/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330493","relative":"#330493","full":"gitlab-org/gitlab#330493"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5279,"epic":{"id":189497,"iid":5279,"title":"Service Ping 2.0 Enhancements","url":"/groups/gitlab-org/-/epics/5279","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86769406,"iid":330488,"project_id":278964,"title":"Demo project that shows all Dependency Scanning features","description":"### Problem to solve \n\nThere's a need for a demo project that demonstrates all Dependency Scanning (DS) features:\n- Support engineers need a way to quickly check that DS features work properly on a GitLab installation.\n- Developers working on the DS features need a project with data.\n\nThe demo project would have:\n- DS jobs for all supported languages and package managers\n- Dependency List with DS vulnerabilities\n- Vulnerability Report page with DS vulnerabilities\n- Auto-remediation for DS vulnerabilities\n\n### Proposal \n\nCreate a composite project made of all the [test projects](https://gitlab.com/gitlab-org/security-products/tests), possibly using [git submodule](https://docs.gitlab.com/ee/ci/git_submodules.html).\n\n### Implementation plan\n\n- [x] create a `dependency-scanning` project under https://gitlab.com/gitlab-org/security-products/tests\n- [x] add CI config and enable Dependency Scanning in this new project\n- [x] copy files from Dependency Scanning [test projects](https://gitlab.com/gitlab-org/security-products/tests) or use [git submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)\n- [x] add README to communicate the purpose of the project, and how to maintain it\n- [x] announce in ~\"group::composition analysis\" weekly meeting\n- [x] announce in ~\"group::composition analysis\" Slack channel","state":"closed","created_at":"2021-05-10T09:32:01.286Z","updated_at":"2022-03-16T11:43:06.582Z","closed_at":"2021-08-17T12:24:10.643Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","maintenance::workflow","missed-deliverable","missed:14.1","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330488","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330488","notes":"https://gitlab.com/api/v4/projects/278964/issues/330488/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330488/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330488","relative":"#330488","full":"gitlab-org/gitlab#330488"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5822,"epic":{"id":255197,"iid":5822,"title":"Composition Analysis Engineer's Choice","url":"/groups/gitlab-org/-/epics/5822","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":86766043,"iid":330481,"project_id":278964,"title":"üé® Design: API fuzzing: configure with project-level  profile","description":"### Background\n\nBased on the discovery on the previous [`issue`](https://gitlab.com/gitlab-org/gitlab/-/issues/297539), we have two personas and many tasks. And the design becomes too big to cover within one issue. So I divided the original issue into 6:\n\n1. **(This issue)** üé® Design: API fuzzing: project-level configure with local(project) profile #330481\n1. üé® Design: API fuzzing: project level configure: edit beaver token #331500\n1. üé® Design: API fuzzing: project level configure edit route #331498\n1. üé® Design: API fuzzing: project-level manage profiles #330496\n1. üé® Design: API fuzzing: project-level configure with group profile #330480\n1. üé® Design: API fuzzing: group-level manage group profile #330482\n\n\n\nIssue number 2 and 3 will need some help of research with [issue-Problem validation: How people use group-level settings and project-level settings for API fuzzing](https://gitlab.com/gitlab-org/ux-research/-/issues/1447)\n\n### JTBD\n\nWhen I am configuring a CI/CD security scan, I want to specify which assets need to be scanned and under which circumstances, So that I can ensure my assets are secure prior to or at their release.\n\n### Target Persona\n\nThis user is focusing on the personas:\n\nthose who use group-level profiles\n\n* [Sam-Seucrity analyst](https://about.gitlab.com/handbook/marketing/strategic-marketing/roles-personas/#sam-security-analyst)\n* [Sasha-Dev](https://about.gitlab.com/handbook/marketing/strategic-marketing/roles-personas/#sasha-software-developer)\n\n### Scenario\n\nThis issue is focused on the following scenario:\n\nAs a person who is responsible for API fuzz testing (works on project level), when I create a new scan or modify current ones, I often face several configuration tasks, I need to set up the right target; decide it is authenticated scan or not; choose between using a project-level profile or using the group-level profile to make sure the API fuzzing scan function the best. \n\nWhen I think the group-level profile is NOT the best for the scan I am going to run. I need to use something I have created before for this project or create a new one. Both choices need me to take a look at all profile configurations and make adjustments if needed.\n\n\n### Tasks\n\n  * task 1: I want to enable API fuzzing testing for CI/CD pipeline\n  * task 2: I want to turn on/off authentication for API fuzzing testing \n  * task 3: I want to decide to use an existing local(project-level) profile or create a new one\n  * task 4: I want to fine-tune the profile settings for the particular scan\n  * task 4: I want to run the scan\n\n**Note:** This doesn't include tasks: like edit route info or use beaver token\n\n\u003cimg src=\"/uploads/4b3eb9e2fe98fca3ed8444d3c121ccf1/Screenshot_2021-05-10_at_13.16.23.png\"  width=\"420\" \u003e\n\n### Design proposal\n\n* Figma: https://www.figma.com/file/T3GLY9ygaPgywEuoIfOvvD/API-Fuzzing-Configuration?node-id=915%3A0\n* Handover to devs video: https://www.loom.com/share/ca8d3a6316b44cddb3faba9d0237fd70\n\nInteraction:\n![overview-api-fuzzing](/uploads/fe95e42690181b18620eea095362e0d4/overview-api-fuzzing.gif)","state":"closed","created_at":"2021-05-10T08:45:29.221Z","updated_at":"2021-10-29T16:30:38.743Z","closed_at":"2021-07-02T13:23:05.604Z","closed_by":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"labels":["Category:Fuzz Testing","UX","devops::secure","group::dynamic analysis","section::sec"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"}],"author":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"type":"ISSUE","assignee":{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330481","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330481","notes":"https://gitlab.com/api/v4/projects/278964/issues/330481/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330481/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330481","relative":"#330481","full":"gitlab-org/gitlab#330481"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86764068,"iid":330478,"project_id":278964,"title":"Follow-up: \"Add tooltips to VSA table sorting columns\"","description":"The following discussion from !61220 should be addressed:\n\n- [ ] @ljlane started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61220#note_570458559):  (+3 comments)\n\n    \u003e Ah, this wasn't obvious to me. I was sorting the first column and couldn't understand the sorting logic. What would make this more obvious in the UI @ekigbo? A tooltip over the sort arrow?","state":"closed","created_at":"2021-05-10T08:12:43.821Z","updated_at":"2021-08-30T10:47:18.650Z","closed_at":"2021-08-12T12:27:03.250Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Category:Value Stream Management","UI polish","UI text","UX","[deprecated] Accepting merge requests","devops::manage","frontend","good for new contributors","group::optimize","priority::4","section::dev","workflow::ready for development"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":null,"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330478","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330478","notes":"https://gitlab.com/api/v4/projects/278964/issues/330478/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330478/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330478","relative":"#330478","full":"gitlab-org/gitlab#330478"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86762760,"iid":330475,"project_id":278964,"title":"Prevent creation of push_package event when package publication fails on package manager APIs","description":"## Background\n\nDuring the review of !55018, it was discovered that the `push_package` tracking event is created before the package, which can cause the event to be created even when the package file creation fails. For gitlab.com, the impact would be inaccurate `push_package` counts in [Package GitLab.com Stage Activity Dashboard](https://app.periscopedata.com/app/gitlab/527857/Package-GitLab.com-Stage-Activity-Dashboard) (internal) and other Sisense dashboards used for product insights.\n\n- @10io started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/55018#note_568899051):  (+3 comments)\n\n    \u003e Can we push this line on L189, right before `created!`.\n    \u003e \n    \u003e As it stands here, this will create an event even before we create the package = we're taking into account failed uploads.\n    \u003e \n    \u003e Those events are used to build SiSense dashboards that will provide us insights such as which registries are the most used ones.\n\n## Goal\n\nCheck the publish API endpoints for each package format and make sure the `push_package` is always created after the package and package file.\n\n| Package format | API endpoints file | MR |\n| ---            | ---                | ---         |\n| ~~Terraform~~      | [`lib/api/terraform/modules/v1/packages.rb`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/api/terraform/modules/v1/packages.rb) | !55018 |\n| \u003cul\u003e\u003cli\u003e- [x] NPM\u003c/li\u003e\u003c/ul\u003e | [`lib/api/npm_project_packages.rb`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/api/npm_project_packages.rb) | !68054 |\n| \u003cul\u003e\u003cli\u003e- [x] Maven\u003c/li\u003e\u003c/ul\u003e | [`lib/api/maven_packages.rb`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/api/maven_packages.rb) |!71618 |\n| \u003cul\u003e\u003cli\u003e- [x] Composer\u003c/li\u003e\u003c/ul\u003e | [`lib/api/composer_packages.rb`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/api/composer_packages.rb) | !72192 |","state":"closed","created_at":"2021-05-10T07:52:21.715Z","updated_at":"2023-01-10T17:06:18.620Z","closed_at":"2021-10-19T03:38:31.561Z","closed_by":{"id":9182939,"username":"hortiz5","name":"Hugo Ortiz","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9182939/avatar.png","web_url":"https://gitlab.com/hortiz5"},"labels":["Category:Package Registry","Package:P2","Stretch","backend","devops::package","group::package registry","ruby","section::ops","type::bug","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":9182939,"username":"hortiz5","name":"Hugo Ortiz","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9182939/avatar.png","web_url":"https://gitlab.com/hortiz5"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":9182939,"username":"hortiz5","name":"Hugo Ortiz","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9182939/avatar.png","web_url":"https://gitlab.com/hortiz5"},"user_notes_count":38,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330475","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330475","notes":"https://gitlab.com/api/v4/projects/278964/issues/330475/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330475/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330475","relative":"#330475","full":"gitlab-org/gitlab#330475"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86753116,"iid":330466,"project_id":278964,"title":"Custom database resolver","description":"https://api.rubyonrails.org/classes/ActiveRecord/Middleware/DatabaseSelector.html\n\nWhat is the contract for a custom `database_resolver` ? Looks like a resolver_klass class must support a `read` and `write` method - https://github.com/rails/rails/blob/75ac626c4e21129d8296d4206a1960563cc3d4aa/activerecord/lib/active_record/middleware/database_selector.rb#L60-L68\n\nSee also https://github.com/rails/rails/blob/75ac626c4e21129d8296d4206a1960563cc3d4aa/activerecord/lib/active_record/middleware/database_selector/resolver.rb for the implementation of the default resolver class","state":"closed","created_at":"2021-05-10T03:32:50.960Z","updated_at":"2022-05-31T12:23:09.634Z","closed_at":"2022-04-13T06:13:04.448Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Category:Pods","ci-decomposition-followup","devops::data_stores","group::pods","section::enablement"],"milestone":null,"assignees":[],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330466","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330466","notes":"https://gitlab.com/api/v4/projects/278964/issues/330466/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330466/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330466","relative":"#330466","full":"gitlab-org/gitlab#330466"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6719,"epic":{"id":345719,"iid":6719,"title":"Change custom Load Balancer implementation to use Rails 6 replicas implementation","url":"/groups/gitlab-org/-/epics/6719","group_id":9970},"iteration":null,"health_status":null},{"id":86752613,"iid":330464,"project_id":278964,"title":"Make table sorting options more obvious","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nFollowing on from discussion in https://gitlab.com/gitlab-org/gitlab/-/issues/301082#note_570459360, are there options we can explore to make the table sorting more obvious to users?\n\n\u003e Ahh, I have to click on the Time column for the arrow to display. It wasn't obvious to me that sorting by the Time column \n\u003e was even an option because I didn't see the arrow.\n\u003e\n\u003e ![Screen_Shot_2021-05-07_at_4.58.57_PM](https://gitlab.com/gitlab-org/gitlab/uploads/a31e914f0d0c17d6f6ed0cfa0494a767/Screen_Shot_2021-05-07_at_4.58.57_PM.png)\n\u003e \n\u003e I wonder if there is some way to make this more obvious @ekigbo ?\n\n\u003e This feels familiar like it tripped me up once before in the UI. Ah yes, in the DevOps Adoption table.\n\u003e \n\u003e @npost Do we have any other design options for sorting?\n\n### Proposal \n\nAdd blue hover highlighting as described in [@ameliabauerly's comment](https://gitlab.com/gitlab-org/gitlab/-/issues/330464#note_571675576)","state":"closed","created_at":"2021-05-10T03:03:50.384Z","updated_at":"2021-05-14T04:02:16.800Z","closed_at":"2021-05-14T04:02:16.610Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Next Up","Stuff that should Just Work","UI polish","UX","automation:ml","devops::manage","frontend","group::optimize","section::dev","workflow::ready for development"],"milestone":null,"assignees":[{"id":4583714,"username":"npost","name":"Nick Post","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4583714/avatar.png","web_url":"https://gitlab.com/npost"}],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":{"id":4583714,"username":"npost","name":"Nick Post","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4583714/avatar.png","web_url":"https://gitlab.com/npost"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330464","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330464","notes":"https://gitlab.com/api/v4/projects/278964/issues/330464/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330464/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330464","relative":"#330464","full":"gitlab-org/gitlab#330464"},"severity":"UNKNOWN","moved_to_id":87063176,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86750660,"iid":330455,"project_id":278964,"title":"Links in commit messages don't look like links","description":"We currently style `.commit a` to remove the color, which means links to Issues \u0026 MRs in commit messages are not clearly links\n\n\nFor example: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/57647/diffs?commit_id=c0524e4ddc8f7ca4154f052ddeb882ad315bb579\n\n![Screen_Shot_2021-05-10_at_11.30.17_am](/uploads/e245818d5ddb8471459f7ec05d7e23ce/Screen_Shot_2021-05-10_at_11.30.17_am.png)\n\nWe should keep the commit message links normal link color, as shown here:\n\n![Screen_Shot_2021-05-10_at_11.31.03_am](/uploads/1476410ee76fbd5fa85ffb4ada660b92/Screen_Shot_2021-05-10_at_11.31.03_am.png)\n\n\nFrom https://gitlab.com/gitlab-org/gitlab/-/merge_requests/57647#note_570961036","state":"closed","created_at":"2021-05-10T01:34:20.651Z","updated_at":"2021-08-23T08:58:28.010Z","closed_at":"2021-08-23T08:58:27.995Z","closed_by":{"id":9426861,"username":"eduardobonet","name":"Eduardo Bonet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9426861/avatar.png","web_url":"https://gitlab.com/eduardobonet"},"labels":["Category:Source Code Management","[deprecated] Accepting merge requests","accessibility","automation:ml","devops::create","frontend","group::source code","merge requests","priority::4","section::dev","severity::4","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":9426861,"username":"eduardobonet","name":"Eduardo Bonet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9426861/avatar.png","web_url":"https://gitlab.com/eduardobonet"}],"author":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"type":"ISSUE","assignee":{"id":9426861,"username":"eduardobonet","name":"Eduardo Bonet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9426861/avatar.png","web_url":"https://gitlab.com/eduardobonet"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330455","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330455","notes":"https://gitlab.com/api/v4/projects/278964/issues/330455/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330455/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330455","relative":"#330455","full":"gitlab-org/gitlab#330455"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86748920,"iid":330447,"project_id":278964,"title":"Honour existing credential setup for container scanning","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nThis work avoids introducing unnecessary breaking changes when we switch from Clair to Trivy in %14.0.\n\nKlar, the container scanner being replaced by \"gcs\", uses `DOCKER_USER` and `DOCKER_PASSWORD` to authenticate to private repositories. It also uses `CI_REGISTRY_USER` and `CI_REGISTRY_PASSWORD` as the default values for these variables.\n\n## Relevant links\n\n- Closed MR: https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/merge_requests/24\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing: ensure scanning of public and private repositories are working with all variations of credentials. `DOCKER_USER`/`DOCKER_PASSWORD`, when given, must take precedence over the default (`CI_REGISTRY_*`).\n\n\n## Implementation plan\n\n1. [ ] Set default values for `DOCKER_USER`/`DOCKER_PASSWORD`\n1. [ ] Set `TRIVY_USERNAME`/`TRIVY_PASSWORD` to values above and make the environment variables available to Trivy","state":"closed","created_at":"2021-05-09T23:39:13.029Z","updated_at":"2021-05-13T03:52:35.792Z","closed_at":"2021-05-13T03:52:35.751Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Container Scanning","backend","devops::govern","group::security policies","section::sec","severity::3","type::bug","workflow::verification"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330447","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330447","notes":"https://gitlab.com/api/v4/projects/278964/issues/330447/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330447/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330447","relative":"#330447","full":"gitlab-org/gitlab#330447"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86748846,"iid":330446,"project_id":278964,"title":"Refactor all specs to use `:integration` factory, allowing us to remove the `:service` alias","description":"For https://gitlab.com/gitlab-org/gitlab/-/issues/201848 the implementation https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61210 renamed the old `:service` factory to `:integration`, but aliased it as `:service` to allow old specs to continue to run unchanged. \n\nThis issue is to refactor all specs to use `:integration` rather than `:service` so we can remove the alias.","state":"closed","created_at":"2021-05-09T23:28:08.154Z","updated_at":"2022-11-22T19:41:58.965Z","closed_at":"2022-01-10T17:57:03.578Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Integrations","Community contribution","backend","devops::manage","group::integrations","maintenance::refactor","priority::3","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},{"id":6265352,"username":"edith007","name":"Siddharth Asthana","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6265352/avatar.png","web_url":"https://gitlab.com/edith007"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330446","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330446","notes":"https://gitlab.com/api/v4/projects/278964/issues/330446/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330446/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330446","relative":"#330446","full":"gitlab-org/gitlab#330446"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":86748650,"iid":330444,"project_id":278964,"title":"Delete unnecessary container scanning analyzer images","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal \n\nIn order to save storage resources, we should delete temporary and non-release images from the Container Scanning project.\n\nA clean-up policy will be configured: https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/settings/ci_cd\n\nProposed settings:\n\n- Keep the most recent: 5 tags per image name\n- Keep tag matching: ~~`^([0-9]+|edge)|(([0-9]+)\\.([0-9]+)\\.([0-9]+)(?:-([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?(?:\\+[0-9A-Za-z-]+)?)$`~~ `^(edge|[0-9]+$)|(([0-9]+)\\.([0-9]+)\\.([0-9]+)(?:-([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?(?:\\+[0-9A-Za-z-]+)?)$` ([example](regexr.com/5tsiq)). Regex explanation:\n  - `(edge|[0-9]+$)` keeps \"major\" version images, and specific names (only `edge` at the moment as `latest` is always kept)\n  - the rest of the regex matches SemVer\n- Remove tags older than: 30 days\n- Remove tags matching: `.*`\n\nThe settings above keep all image tags defined in the project [readme](https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/tree/master#available-image-tags) indefinitely. All other image tags are deleted after 30 days.\n\nAs of this writing, there are 80 temporary tags and about 25 branch tags that can be removed. At the average image size of 145MB, this saves 15GB of space.\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n\n--\u003e","state":"closed","created_at":"2021-05-09T23:06:31.359Z","updated_at":"2021-10-28T13:56:57.524Z","closed_at":"2021-05-30T21:16:06.048Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Container Scanning","GitLab Core","GitLab Premium","GitLab Ultimate","backend","devops::govern","group::security policies","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330444","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330444","notes":"https://gitlab.com/api/v4/projects/278964/issues/330444/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330444/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330444","relative":"#330444","full":"gitlab-org/gitlab#330444"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5462,"epic":{"id":213052,"iid":5462,"title":"Follow-on Improvements to Trivy Integration","url":"/groups/gitlab-org/-/epics/5462","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86748208,"iid":330443,"project_id":278964,"title":"Remove Gitlab::Integrations::StiType (custom attribute class for adapting an integration's type value)","description":"After https://gitlab.com/gitlab-org/gitlab/-/issues/333508 we can remove the `Gitlab::Integrations::StiType` custom attribute class as it will no longer be needed.\n\n### Availability \u0026 Testing\n\nThoughts: removing `StiType` after the type migration should be covered by existing feature/e2e specs.\nSome specs may need to be removed/updated.","state":"closed","created_at":"2021-05-09T22:28:03.416Z","updated_at":"2022-11-22T19:41:59.541Z","closed_at":"2022-05-20T14:28:18.328Z","closed_by":{"id":10222550,"username":"g.hickman","name":"Grant Hickman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10222550/avatar.png","web_url":"https://gitlab.com/g.hickman"},"labels":["Category:Integrations","Stretch","backend","devops::manage","group::integrations","missed:14.10","priority::3","quad-planning::complete-action","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330443","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330443","notes":"https://gitlab.com/api/v4/projects/278964/issues/330443/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330443/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330443","relative":"#330443","full":"gitlab-org/gitlab#330443"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6177,"epic":{"id":288464,"iid":6177,"title":"Data migration: Change `integrations.type` values to reflect new namespaced models","url":"/groups/gitlab-org/-/epics/6177","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86748130,"iid":330442,"project_id":278964,"title":"Data migration: Change `services.type` values to reflect new namespaced models","description":"## About\n\nFor https://gitlab.com/gitlab-org/gitlab/-/issues/201855 we namespaced the integration models (e.g., from `AsanaService` to `Integrations::Asana`). In the implementation https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60968 we added a new custom attribute class `Gitlab::Integrations::StiType` to allow the namespaced models to continue to function as STI models without breaking the STI lookup.\n\n## Proposal\n\nAs a first step to removing `Gitlab::Integrations::StiType` we want to migrate the `type` column value of all integrations to reflect their actual new namespaced model class (e.g., from `\"AsanaService\"` to `\"Integrations::Asana\"`).\n\nRemoval of the `StiType` class is in a separate issue https://gitlab.com/gitlab-org/gitlab/-/issues/330443.","state":"closed","created_at":"2021-05-09T22:22:07.979Z","updated_at":"2022-11-22T19:42:00.214Z","closed_at":"2021-06-14T01:54:12.532Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Integrations","Deliverable","backend","database","devops::manage","group::ecosystem [DEPRECATED]","priority::3","section::dev","type::maintenance","workflow::ready for development"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330442","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330442","notes":"https://gitlab.com/api/v4/projects/278964/issues/330442/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330442/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330442","relative":"#330442","full":"gitlab-org/gitlab#330442"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":86715263,"iid":330429,"project_id":278964,"title":"Migrate security-report-download-dropdown in security_reports_app.vue to use newer merge-request-artifact-download component Part 1","description":"As a result of:\n\n| Issue | Description |\n| ------ | ------ |\n| https://gitlab.com/gitlab-org/gitlab/-/issues/289952 | Creates MR Artifact Download Component\n| https://gitlab.com/gitlab-org/gitlab/-/issues/328481 | Use MR Artifact Download component in Cov Fuzz and API Fuzz MR widgets \n| https://gitlab.com/gitlab-org/gitlab/-/issues/328194 | Creates Pipeline Artifact Download Component\n| https://gitlab.com/gitlab-org/gitlab/-/issues/328481 | Use Pipeline Artifact Component on Pipeline Security Tab\n\nWe should go back and update for CE - Community Edition for SAST.\n\n\nThe `security-report-download-dropdown` component has additional logic and a graphQL query that has already been wrapped in `merge_request_artifact_download.vue`. We should swap out these components in favor of the newer one.\n\n| Part | Issue | Description\n| ------ | ------ | ----- |\n| 1 | https://gitlab.com/gitlab-org/gitlab/-/issues/330429 | Move EE code to CE update existing usages \u003c-- this one\n| 2 | https://gitlab.com/gitlab-org/gitlab/-/issues/331025 | Swap out component for newer component\n\n## Part 1 Implementation Plan\n\n- Move the contents of https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/app/assets/javascripts/vue_shared/security_reports/components/artifact_downloads into the CE directory\n- Refactor imports and usages of merge_request_aritact_downloads.js and pipeline_artifact_downloads.vue to point to CE directory\n- Achieve passing pipeline\n\n## Part 2\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/331025","state":"closed","created_at":"2021-05-08T18:30:18.275Z","updated_at":"2021-06-15T19:59:31.233Z","closed_at":"2021-06-15T19:59:31.218Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["AST Leadership","Deliverable","GitLab Ultimate","devops::secure","documentation","frontend","section::sec","secure:refinement-frontend","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330429","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330429","notes":"https://gitlab.com/api/v4/projects/278964/issues/330429/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330429/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330429","relative":"#330429","full":"gitlab-org/gitlab#330429"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86697381,"iid":330406,"project_id":278964,"title":"Reimplement Lock button to Blob Header in Vue","description":"This is a follow-up issue to https://gitlab.com/gitlab-org/gitlab/-/issues/323210, where we are rebuilding the Blob header into Vue.\n\nThis issue is to cover the \"Replace\" button\n\n\u003cimg src=\"/uploads/bd38e84f1b77448e18a0550be89fdac5/image__1_.png\" height=\"300px\"\u003e\n\n## Backend support \n\nPlease see this [comment](https://gitlab.com/gitlab-org/gitlab/-/issues/330406#note_572236568):\n\n\u003e we *do* want a GraphQL mutation to lock or unlock a given path (this is an EE-only feature), per this note: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61380#note_571707390\n\n## Testing\n\n- [ ] Please run `package-and-qa` with the `refactor_blob_viewer` feature flag enabled when the work is complete, but before the flag is enabled on Staging or GitLab.com, to confirm that the QA test of the lock button passes.\n\n## Previous information\n\n(Keeping for history puprposes)\n\n\u003cdetails\u003e\u003csummary\u003ePrevious Information\u003c/summary\u003e\n\nIn this issue \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/323210, we are converting the Repo header from HAML into Vue and using GraphQL to make queries and mutations. To navigate to this page (Repository \u003e Files \u003e click on a file to see the blob viewer). In order for this to be done, we need some BE help in creating the necessary GraphQL schema for the FE to use.\n\n\u003cimg src=\"/uploads/4ea68953341f663155481fdfaf62a162/image.png\" height=\"300px\"\u003e\n\n\n| - | Query | Mutation|\n| ------ | ------ | --- |\n| Web IDE |‚úÖ ||\n| Lock | ‚úÖ |‚úÖ|\n| Replace | ‚úÖ? |‚úÖ|\n| Delete | ‚úÖ? |‚úÖ|\n\n## Web IDE\n\nSimilar to the `editBlobPath`, can we also add a ie. `webIdePath`\n\nhttps://docs.gitlab.com/ee/api/graphql/reference/#repositoryblob\n\nHere's an example of the link: `/-/ide/project/root/public-project/edit/master/-/app.js`\n\n## Lock\n\nFor the lock button, we will need a Query and Mutation schema.\n\nMutation:\n\nIn the old `lock` button, we make a call to this endpoint \u003e https://gitlab.com/gitlab-org/gitlab/blob/0d11dfeee18f582c380fcfa9acaade27541079b2/ee/app/assets/javascripts/path_locks.js#L21 (ex. `/root/public-project/path_locks/toggle` and passing the file as the param `readme.md`).\n\nQuery:\n\nWill also need a field to check if the file has been locked or not. I guess it would be made available as the Web IDE path, so something like `isLock` field.\n\n## Replace and Delete\n\nI'm not sure if these require a Query schema or not, so will need a bit more investigation.\n\nAs for mutation, we will need it. In the current way, the buttons trigger a model that submits a form\n\n| Replace | Delete |\n| ------ | ------ |\n| ![image](/uploads/c4cee0067508618e7c1ff78e8f2e6897/image.png) | ![image](/uploads/0171ca6956781c7eb4211674fcac8ad4/image.png)|\n|![image](/uploads/ca63df66c0855945cb483be95608f4fc/image.png)|![image](/uploads/e2379b4e008afdcc529d5b806d5beb14/image.png)|\n\n\n![replace-delete-sample](/uploads/247643326a6482c0c39edfec6014a7eb/replace-delete-sample.mov)\n\u003c/details\u003e","state":"closed","created_at":"2021-05-08T03:00:34.424Z","updated_at":"2021-08-18T07:00:48.307Z","closed_at":"2021-08-11T10:33:07.529Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","backend","backend complete","backend-weight::2","devops::create","frontend","frontend-weight::3","group::source code","quad-planning::complete-action","section::dev","type::feature","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330406","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330406","notes":"https://gitlab.com/api/v4/projects/278964/issues/330406/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330406/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330406","relative":"#330406","full":"gitlab-org/gitlab#330406"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5531,"epic":{"id":217419,"iid":5531,"title":"Refactor Repository Browser to 1 Vue Application","url":"/groups/gitlab-org/-/epics/5531","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":86693252,"iid":330401,"project_id":278964,"title":"[DevOps Adoption] Show total number of features adopted","description":"### Overview\n\nAs a business leader, I want a quick way to understand how many GitLab features have been adopted by my teams so I can \n1. See how much value we are getting out of GitLab and justify renewing our GitLab contract\n1. Evaluate the state of our DevOps transformation\n1. Evaluate progress on moving to GitLab so that we can reduce the number of tools in our DevOps toolchain \n\n### Proposal\n\nAdd an overview section to the DevOps Adoption page that shows the number of features adopted out of the total number of features that are tracked in the adoption table.\n\n\n### Requirements\n- [x] Add an Overview section at the top of the DevOps Adoption page above the adoption table. The Overview section has the following four horizontal sections as shown in the attached design:\n    1. Overall Adoption\n    1. Dev\n    1. Sec\n    1. Ops\n- [x] Each section has an icon next to the name as shown in the design\n- [x] Under the title of each section is text showing the number of features adopted out of the total number of features that we're tracking for that section. For example, under Dev \"3/4 key features adopted\"\n- [x] Overall Adoption is an aggregation of Dev, Sec, and Ops\n- [x] To calculate the number of features adopted, we check the features adopted in the current group and any sub groups that appear in the adoption table.\n- [ ] Update the UI text at the top of the page to read \"Feature adoption is based on usage in this group and its sub groups over the last 30 days. Last updated ...\" \n     \n**Note** Exact string TBD based on https://gitlab.com/gitlab-org/gitlab/-/issues/329708 and pending TW review\n- [x] Include a progress bar for Overall adoption, Dev, Sec, and Ops using the following colours:\n     * Dev - `dv-orange-600`\n     * Sec - `dv-aqua-500`\n     * Ops - `dv-green-600`\n- [x] Add to both the instance level and group level feature\n- [ ] Add supporting user documentation describing the value of the overview section and how it works\n- [ ] Release post (announce https://gitlab.com/gitlab-org/gitlab/-/issues/326480#note_572149641 at the same time)\n\n### Out of scope\n- Do not include a percentage. We will add a percentage later when we have more features available in the adoption table. Otherwise users may be confused why their percentage continues to change every time we add an additional feature to the table.\n- Do not include tier information for each feature. We will do that in a future iteration.","state":"closed","created_at":"2021-05-07T22:15:21.222Z","updated_at":"2021-07-13T04:48:44.804Z","closed_at":"2021-07-02T13:25:24.910Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["Category:DevOps Reports","GitLab Ultimate","Technical Writing","UI text","devops::manage","direction","documentation","frontend","group::optimize","priority::1","release post item","section::dev","type::feature","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330401","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":7},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330401","notes":"https://gitlab.com/api/v4/projects/278964/issues/330401/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330401/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330401","relative":"#330401","full":"gitlab-org/gitlab#330401"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5805,"epic":{"id":254296,"iid":5805,"title":"[DevOps Adoption] Show high-level overview of GitLab adoption","url":"/groups/gitlab-org/-/epics/5805","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86691952,"iid":330398,"project_id":278964,"title":"[DevOps Adoption] Add Fuzz Testing to the DevOps Adoption table (FE)","description":"### Overview\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/330389 adds support for getting Fuzz Testing adoption information. Once the BE work is done, let's add it to the adoption table.\n\n### Proposal\n\nAdd Fuzz Testing to the adoption table for both the instance and group level feature.\n\n### Requirements\n\n* [ ] Add Fuzz Testing as a feature in the Sec tab of the DevOps adoption table\n* [ ] Adoption is shown as a boolean true/false value\n* [ ] Update the user documentation to include Fuzz Testing in the list of features available in the adoption table\n* [ ] Add a tooltip in the UI that explains how usage is determined. Tooltip text TBD based on the implementation decision for the BE work.","state":"closed","created_at":"2021-05-07T21:21:52.245Z","updated_at":"2021-07-29T08:10:53.712Z","closed_at":"2021-07-29T08:10:53.698Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["Category:DevOps Reports","GitLab Ultimate","devops::manage","direction","frontend","group::optimize","priority::2","section::dev","type::feature","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330398","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330398","notes":"https://gitlab.com/api/v4/projects/278964/issues/330398/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330398/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330398","relative":"#330398","full":"gitlab-org/gitlab#330398"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5019,"epic":{"id":156873,"iid":5019,"title":"Add additional features to DevOps feature adoption table","url":"/groups/gitlab-org/-/epics/5019","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86691060,"iid":330389,"project_id":278964,"title":"[DevOps Adoption] Add Fuzz Testing to DevOps Adoption (BE)","description":"### Overview\n\nCustomers are interested in seeing if teams in their organization are performing fuzz testing. This helps engineering leadership evaluate the value they are getting out of GitLab's security features. In customer interviews so far, security scanning is one of the top requested features, with fuzz testing specifically called out in some interviews. \n\n### Proposal\n\nAdd fuzz testing to the DevOps Adoption snapshots (`analytics_devops_adoption_snapshots` table). The value for fuzz testing should be true if [a fuzz testing artifact was created](https://docs.gitlab.com/ee/user/application_security/coverage_fuzzing/#artifacts).\n\n### Requirements\n\n* [ ] End users can get fuzz adoption (true/false) for a group or instance using the API\n* [ ] BE support for adding fuzz testing in the DevOps Adoption table in the UI","state":"closed","created_at":"2021-05-07T20:41:59.327Z","updated_at":"2021-07-12T09:05:15.183Z","closed_at":"2021-07-12T09:05:14.757Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["Category:DevOps Reports","GitLab Ultimate","Next Up","backend","devops::manage","direction","group::optimize","priority::2","section::dev","type::feature"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330389","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330389","notes":"https://gitlab.com/api/v4/projects/278964/issues/330389/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330389/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330389","relative":"#330389","full":"gitlab-org/gitlab#330389"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5019,"epic":{"id":156873,"iid":5019,"title":"Add additional features to DevOps feature adoption table","url":"/groups/gitlab-org/-/epics/5019","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86690685,"iid":330388,"project_id":278964,"title":"Technical Investigation: Dependency Proxy to pull from any container registry","description":"### Topic to Evaluate\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/326378 proposes making the Dependency Proxy work generically with any non-GitLab container registry. This would allow GitLab customers to easily proxy and cache container images from Amazon's or Google's registry, reducing external dependencies and decreasing build times. It also presents an opportunity for GitLab to make authenticating to these external registries more efficient. \n\nThe challenge is that the Dependency Proxy was hard-coded to work with Docker Hub. A technical investigation is needed to confirm that the feature can first be expanded to support other registries and that it can be done in a way to make Developers' lives easier and more efficient. \n\n### Tasks to  Evaluate\n\n- Can the GitLab Dependency Proxy be expanded to cover other registries? Ideally, it would be generic, but if we had to start with one or two, I'd prioritize ECR/GCR. \n- How will authentication work? Are there any required changes in auth? Any risks? \n- What is a reasonable MVC and how does that solve the problem? \n- Consider https://gitlab.com/gitlab-org/gitlab/-/issues/294187 which proposes adding TTL policies for the Dependency Proxy. Are there any implications with regards to storage and connecting to external registries?\n- Consider how we can measure the metrics mentioned in https://gitlab.com/gitlab-org/gitlab/-/issues/238056.\n\n- [x] Determine feasibility of the feature\n- [x] Create issue for implementation or update existing implementation issue description with implementation proposal \n- [x] Set weight on implementation issue\n- [x] If weight is greater than 5, break the issue into smaller issues\n\n#### Competitive intel\n\n- Read about how Artifactory allows you to [pull from multiple external registries](https://www.jfrog.com/confluence/display/JFROG/Docker+Registry)\n- [Scarf Gateway](https://docs.scarf.sh/gateway/#overview) is an interesting open-source tool that proxies requests from a defined list of registries\n\n### Risks and Implementation Considerations\n\n- Connecting to multiple registries seems like a premium feature. We are considering allowing you to connect to a given number of registries depending on your tier.\n- Another option is to connect to Docker Hub by default and charge for adding other private registries.","state":"closed","created_at":"2021-05-07T20:31:03.452Z","updated_at":"2021-06-18T07:08:38.422Z","closed_at":"2021-06-08T21:26:52.918Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Dependency Proxy","Deliverable","GitLab Premium","GitLab Ultimate","Package:P2","Stretch","backend","devops::package","group::package registry","needs investigation","ruby","section::ops","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330388","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330388","notes":"https://gitlab.com/api/v4/projects/278964/issues/330388/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330388/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330388","relative":"#330388","full":"gitlab-org/gitlab#330388"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6061,"epic":{"id":276767,"iid":6061,"title":"Generic image registry support for dependency proxy","url":"/groups/gitlab-org/-/epics/6061","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86690433,"iid":330387,"project_id":278964,"title":"Improve error handling in runner","description":"### Problem\n\nWhen an issue occurs calling the API Security rest API a `PeachException` is thrown by the C# library. This exception is not being handled by the `runner` code resulting in an unactionable and hard to understand error output.\n\n[Example job output](https://gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing-src/-/jobs/1242874389)\n```\n2021-05-06 22:41:23 [INF] API Runner: Found 5 operations\n2021-05-06 22:41:23 [INF] API Runner: Running directly, starting testing job\n2021-05-06 22:41:39 [ERR] API Runner: Unexpected error!\nPeachProxy.PeachException: PeachProxy failed to communicate with Peach API Security APIs\n ---\u003e System.AggregateException: One or more errors occurred. (Response status code does not indicate success: 500 (Internal Server Error).)\n ---\u003e System.Net.Http.HttpRequestException: Response status code does not indicate success: 500 (Internal Server Error).\n   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()\n   at PeachProxy.PeachProxy.\u003c\u003ec__DisplayClass34_0.\u003c\u003cSessionSetup\u003eb__0\u003ed.MoveNext() in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/SDK/libraries/csharp/PeachProxy/PeachProxy.cs:line 286\n--- End of stack trace from previous location where exception was thrown ---\n   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)\n   at Polly.AsyncPolicy.ExecuteAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)\n   --- End of inner exception stack trace ---\n   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)\n   at System.Threading.Tasks.Task`1.get_Result()\n   at PeachProxy.PeachProxy.SessionSetup(String project, String profile, String config) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/SDK/libraries/csharp/PeachProxy/PeachProxy.cs:line 279\n   --- End of inner exception stack trace ---\n   at PeachProxy.PeachProxy.SessionSetup(String project, String profile, String config) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/SDK/libraries/csharp/PeachProxy/PeachProxy.cs:line 309\n   at Peach.Web.Runner.Services.OperationRunner.Run(IReader reader, IApplicationOptions applicationOptions, ICommandOptions commandOptions) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/OperationRunner.cs:line 88\n   at Peach.Web.Runner.Services.CLI.BaseCommandOptions.ExecuteSubCommand(BaseCommandOptions parent, LoggingLevelSwitch loggingLevelSwitch, IOperationRunner runner, IReader reader, IOsPlatform osPlatform) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/CLI/BaseCommandOptions.cs:line 45\n   at Peach.Web.Runner.Services.CLI.OpenApiCommandOptions.OnExecute(CommandLineApplication app) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/CLI/OpenAPICommandOptions.cs:line 45\n--- End of stack trace from previous location where exception was thrown ---\n   at McMaster.Extensions.CommandLineUtils.Conventions.ExecuteMethodConvention.Invoke(MethodInfo method, Object instance, Object[] arguments)\n   at McMaster.Extensions.CommandLineUtils.Conventions.ExecuteMethodConvention.OnExecute(ConventionContext context, CancellationToken cancellationToken)\n   at McMaster.Extensions.CommandLineUtils.Conventions.ExecuteMethodConvention.\u003c\u003ec__DisplayClass0_0.\u003c\u003cApply\u003eb__0\u003ed.MoveNext()\n--- End of stack trace from previous location where exception was thrown ---\n   at McMaster.Extensions.CommandLineUtils.CommandLineApplication.ExecuteAsync(String[] args, CancellationToken cancellationToken)\n   at McMaster.Extensions.CommandLineUtils.CommandLineApplication.Execute(String[] args)\n   at Peach.Web.Runner.Services.CLI.CommandLineParser.ExecuteAsync(String[] args) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/CLI/CommandLineParser.cs:line 33\nUnhandled exception. PeachProxy.PeachException: PeachProxy failed to communicate with Peach API Security APIs\n ---\u003e System.AggregateException: One or more errors occurred. (Response status code does not indicate success: 500 (Internal Server Error).)\n ---\u003e System.Net.Http.HttpRequestException: Response status code does not indicate success: 500 (Internal Server Error).\n   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()\n   at PeachProxy.PeachProxy.\u003c\u003ec__DisplayClass34_0.\u003c\u003cSessionSetup\u003eb__0\u003ed.MoveNext() in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/SDK/libraries/csharp/PeachProxy/PeachProxy.cs:line 286\n--- End of stack trace from previous location where exception was thrown ---\n   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)\n   at Polly.AsyncPolicy.ExecuteAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)\n   --- End of inner exception stack trace ---\n   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)\n   at System.Threading.Tasks.Task`1.get_Result()\n   at PeachProxy.PeachProxy.SessionSetup(String project, String profile, String config) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/SDK/libraries/csharp/PeachProxy/PeachProxy.cs:line 279\n   --- End of inner exception stack trace ---\n   at PeachProxy.PeachProxy.SessionSetup(String project, String profile, String config) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/SDK/libraries/csharp/PeachProxy/PeachProxy.cs:line 309\n   at Peach.Web.Runner.Services.OperationRunner.Run(IReader reader, IApplicationOptions applicationOptions, ICommandOptions commandOptions) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/OperationRunner.cs:line 88\n   at Peach.Web.Runner.Services.CLI.BaseCommandOptions.ExecuteSubCommand(BaseCommandOptions parent, LoggingLevelSwitch loggingLevelSwitch, IOperationRunner runner, IReader reader, IOsPlatform osPlatform) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/CLI/BaseCommandOptions.cs:line 45\n   at Peach.Web.Runner.Services.CLI.OpenApiCommandOptions.OnExecute(CommandLineApplication app) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/CLI/OpenAPICommandOptions.cs:line 45\n--- End of stack trace from previous location where exception was thrown ---\n   at McMaster.Extensions.CommandLineUtils.Conventions.ExecuteMethodConvention.Invoke(MethodInfo method, Object instance, Object[] arguments)\n   at McMaster.Extensions.CommandLineUtils.Conventions.ExecuteMethodConvention.OnExecute(ConventionContext context, CancellationToken cancellationToken)\n   at McMaster.Extensions.CommandLineUtils.Conventions.ExecuteMethodConvention.\u003c\u003ec__DisplayClass0_0.\u003c\u003cApply\u003eb__0\u003ed.MoveNext()\n--- End of stack trace from previous location where exception was thrown ---\n   at McMaster.Extensions.CommandLineUtils.CommandLineApplication.ExecuteAsync(String[] args, CancellationToken cancellationToken)\n   at McMaster.Extensions.CommandLineUtils.CommandLineApplication.Execute(String[] args)\n   at Peach.Web.Runner.Services.CLI.CommandLineParser.ExecuteAsync(String[] args) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/CLI/CommandLineParser.cs:line 33\n   at Peach.Web.Runner.Program.Main(String[] args) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Program.cs:line 59\n/app/gl-apifuzzing-runner: line 11:   215 Aborted                 (core dumped) dotnet $DIR/gl-apifuzzing-runner.exe.dll \"$@\"\n```\n\n### Proposal\n\n1. [ ] Specifically handle `PeachException` and provide a reasonable error message to the end user.\n1. [ ] Handle all exceptions:\n   1. [ ] Provide a good generic error message with exception error message for console output\n   1. [ ] Write out debug information to debug log -- stack trace, etc. This should end up in the runner log file, not the console output.\n1. [ ] Add tests to validate proper handling\n1. [ ] Release new container image","state":"closed","created_at":"2021-05-07T20:26:08.354Z","updated_at":"2021-08-12T16:39:47.188Z","closed_at":"2021-08-12T16:39:47.173Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","feature::enhancement","group::dynamic analysis","section::sec","type::feature","workflow::scheduling"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330387","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330387","notes":"https://gitlab.com/api/v4/projects/278964/issues/330387/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330387/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330387","relative":"#330387","full":"gitlab-org/gitlab#330387"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86689543,"iid":330386,"project_id":278964,"title":"Prefer `_OPENAPI` variable URL over contents of OpenAPI documents","description":"### Problem\n\nWhen determining the URL to test for API Security, the contents of the OpenAPI document are used over the URL in the `_OPENAPI` variable. Instead, the variable should be used over the document contents.\n\nThis issue is about how we calculate the target URL when when `DAST_API_HOST_OVERRIDE`/`DAST_API_TARGET_URL`/`environment_url.txt` isn't provided.\n\n### Proposal\n\nChange the order of precedence in the `runner` code.\n\n1. Combine variable url with OpenAPI v2 `basePath`\n1. Combine variable url with OpenAPI v3 server url's path\n   1. Server URL: `http://myfancyservice/api/v1` + `FUZZAPI_OPENAPI=http://target/swagger` --\u003e `http://target/api/v1`\n1. Use openapi url directly (removing last path element)\n   1. Example: `http://target/api/openapispec` --\u003e `http://target/api` with `openapispec` removed.\n1. If the openapi variable doesn't contain a URL, use the document's url's when possible\n\n#### Tasks\n\n1. [x] Update `runner` logic to calculate target url\n1. [x] Create/update unit tests for each scenario\n1. [x] E2e test for each case\n1. [x] Release new container image","state":"closed","created_at":"2021-05-07T20:18:14.934Z","updated_at":"2021-06-01T16:26:22.838Z","closed_at":"2021-06-01T16:26:22.798Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","feature::enhancement","group::dynamic analysis","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330386","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330386","notes":"https://gitlab.com/api/v4/projects/278964/issues/330386/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330386/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330386","relative":"#330386","full":"gitlab-org/gitlab#330386"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86686035,"iid":330382,"project_id":278964,"title":"Add `job_artifacts` with `name` to `PipelineType` (GraphQL)","description":"Add `job_artifacts` with `name` and `PipelineType`\n\nDetails - manual actions, artifacts etc.\n\n(as detailed in https://gitlab.com/groups/gitlab-org/-/epics/5960#note_570249587)","state":"closed","created_at":"2021-05-07T19:23:17.557Z","updated_at":"2021-11-03T13:11:17.987Z","closed_at":"2021-11-03T13:11:17.888Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","GraphQL","Verify candidate","[deprecated] Accepting merge requests","backend","devops::verify","group::pipeline execution","maintenance::refactor","priority::2","section::ops","severity::2"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330382","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330382","notes":"https://gitlab.com/api/v4/projects/278964/issues/330382/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330382/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330382","relative":"#330382","full":"gitlab-org/gitlab#330382"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5960,"epic":{"id":267122,"iid":5960,"title":"Missing pipeline data for GraphQL API","url":"/groups/gitlab-org/-/epics/5960","group_id":9970},"iteration":null,"health_status":null},{"id":86686018,"iid":330381,"project_id":278964,"title":"Add `short_sha`, `ref` and `ref_path` to `PipelineType` (GraphQL)","description":"**Add `short_sha`, `ref` and `ref_path` to `PipelineType`**\n\n(as detailed in https://gitlab.com/groups/gitlab-org/-/epics/5960#note_570249587)","state":"closed","created_at":"2021-05-07T19:22:21.379Z","updated_at":"2022-01-18T16:05:57.941Z","closed_at":"2022-01-18T16:05:57.906Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["Category:Continuous Integration","GraphQL","Verify candidate","[deprecated] Accepting merge requests","backend","devops::verify","group::pipeline execution","maintenance::refactor","priority::2","section::ops","severity::2","type::maintenance"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330381","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330381","notes":"https://gitlab.com/api/v4/projects/278964/issues/330381/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330381/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330381","relative":"#330381","full":"gitlab-org/gitlab#330381"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5960,"epic":{"id":267122,"iid":5960,"title":"Missing pipeline data for GraphQL API","url":"/groups/gitlab-org/-/epics/5960","group_id":9970},"iteration":null,"health_status":null},{"id":86686000,"iid":330380,"project_id":278964,"title":"Add `failed_builds` to `PipelineType` (GraphQL)","description":"Add `failed_builds` to `PipelineType`\n\n(as detailed in https://gitlab.com/groups/gitlab-org/-/epics/5960#note_570249587)","state":"closed","created_at":"2021-05-07T19:21:38.628Z","updated_at":"2022-01-18T16:35:38.265Z","closed_at":"2022-01-18T16:09:37.680Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","GraphQL","Verify candidate","[deprecated] Accepting merge requests","backend","devops::verify","group::pipeline execution","maintenance::refactor","priority::2","section::ops","severity::2","type::maintenance"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330380","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330380","notes":"https://gitlab.com/api/v4/projects/278964/issues/330380/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330380/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330380","relative":"#330380","full":"gitlab-org/gitlab#330380"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5960,"epic":{"id":267122,"iid":5960,"title":"Missing pipeline data for GraphQL API","url":"/groups/gitlab-org/-/epics/5960","group_id":9970},"iteration":null,"health_status":null},{"id":86685933,"iid":330377,"project_id":278964,"title":"Create Resolver to get all jobs from a stage based on the id or name (GraphQL)","description":"Create a resolver that accepts a `stage` name or id as an argument, so we can fetch only jobs for a stage. (used in mini pipeline graph dropdown.)\n\n(as detailed in https://gitlab.com/groups/gitlab-org/-/epics/5960#note_570249587)","state":"closed","created_at":"2021-05-07T19:19:58.411Z","updated_at":"2022-05-19T15:51:17.508Z","closed_at":"2022-05-19T15:51:17.482Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","GraphQL","Verify candidate","[deprecated] Accepting merge requests","backend","devops::verify","group::pipeline execution","maintenance::refactor","priority::2","section::ops","severity::2","type::maintenance"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":null,"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330377","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330377","notes":"https://gitlab.com/api/v4/projects/278964/issues/330377/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330377/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330377","relative":"#330377","full":"gitlab-org/gitlab#330377"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5960,"epic":{"id":267122,"iid":5960,"title":"Missing pipeline data for GraphQL API","url":"/groups/gitlab-org/-/epics/5960","group_id":9970},"iteration":null,"health_status":null},{"id":86674684,"iid":330368,"project_id":278964,"title":"Add new fields to security report","description":"### Problem\n\n[This MR](https://gitlab.com/gitlab-org/security-products/security-report-schemas/-/merge_requests/74) adds a new set of fields `scan.analyzer` to the security report format.\n\n### Proposal\n\nAdd support for the new fields in API Security scanner. The fields will be filled out differently for DAST API vs. API Fuzzing.\n\n#### API Fuzzing\n\n* `scan.analyzer.id`, `gitlab-api-fuzzing`\n* `scan.analyzer.name`, `GitLab API Fuzzing`\n* `scan.analyzer.version`, `0.0.0`\n* `scan.analyzer.url`, `https://docs.gitlab.com/ee/user/application_security/api_fuzzing/`\n* `scan.analyzer.vendor.name`, 'GitLab'\n\n#### DAST API\n\n* `scan.analyzer.id`, `gitlab-dast-api`\n* `scan.analyzer.name`, `GitLab DAST API`\n* `scan.analyzer.version`, `0.0.0`\n* `scan.analyzer.url`, `https://docs.gitlab.com/ee/user/application_security/dast_api/`\n* `scan.analyzer.vendor.name`, 'GitLab'\n\n### Tasks:\n\n1. [x] Add new fields to Security Report controller\n   1. [x] Use NSwagStudio to convert the new schema to a C# class\n      1. Outputs \"CSharp Client\"\n      1. Uncheck generate client classes\n      1. Check generate ToJson and FromJson methods.\n   1. [x] Set new fields in security report controller\n1. [x] Update unit tests to check based on mode\n1. [x] Add test to validate against schema\n   1. [x] Allow specifying schema version ([see comment](https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/e2e-image/-/merge_requests/2#note_718954877))\n1. [ ] Release new container","state":"closed","created_at":"2021-05-07T16:31:17.254Z","updated_at":"2021-11-08T03:21:27.741Z","closed_at":"2021-11-04T16:54:06.579Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","feature::enhancement","group::dynamic analysis","section::sec","security reports","type::feature","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330368","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330368","notes":"https://gitlab.com/api/v4/projects/278964/issues/330368/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330368/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330368","relative":"#330368","full":"gitlab-org/gitlab#330368"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86663656,"iid":330350,"project_id":278964,"title":"Add Bot Badge to Bot Users","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nA Bot User is created using a Project Access Token. When you go to the Members list of said project and look at the bot user, there is a link that says \"Learn more about \u003cbot_user\u003e\". Currently, this link is broken and doesn't lead anywhere. I suspect this is supposed to lead to [project_access_tokens.html#project-bot-users](https://docs.gitlab.com/ee/user/project/settings/project_access_tokens.html#project-bot-users).\n\n### Steps to reproduce\n\n1. Create a project access token.\n1. Go to the members list of the project\n1. Find the bot user that was created.\n1. Hover over the user and try to click on the link in the pop-up.\n\n### What is the current *bug* behavior?\n\nClicking on \"Learn more about \u003cbot_user\u003e\" doesn't do anything.\n\n### What is the expected *correct* behavior?\n\nUser should be able to easily identify that the user is a bot.\n\n### Relevant logs and/or screenshots\n\n![learn_more](/uploads/17a765d4089e2231eb2779b4fa079765/learn_more.png)\n\n**Update from 07-2022**\n\nCurrent interaction:\n\n\u003cimg src=\"https://gitlab.com/gitlab-org/gitlab/uploads/5590a6181e918b32ea00e617a2a16c91/image.png\"\u003e\n\n### Output of checks\n\nThis happens on GitLab.com 13.12.0-pre 6102cc9472b \n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Proposal\n\nAdd a badge to indicate the account is a bot.\n\n| live | proposed |\n| ------ | ------ |\n| ![Screen_Shot_2022-07-25_at_4.13.00_PM](/uploads/7760c57014e8af18ebf562726ec2e810/Screen_Shot_2022-07-25_at_4.13.00_PM.png) | ![Frame_24](/uploads/327c49e33b8b23b9b36d2d1ec26cefc3/Frame_24.png) |","state":"closed","created_at":"2021-05-07T13:26:52.180Z","updated_at":"2022-09-21T12:02:18.896Z","closed_at":"2022-09-16T07:17:42.217Z","closed_by":{"id":11004366,"username":"eduardosanz","name":"Eduardo Sanz Garc√≠a","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11004366/avatar.png","web_url":"https://gitlab.com/eduardosanz"},"labels":["Category:Authentication and Authorization","Deliverable","SUS::Impacting","UX","devops::manage","feature::enhancement","frontend","group::authentication and authorization","priority::3","release post item::in review","section::dev","severity::3","type::feature","workflow::verification"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":11004366,"username":"eduardosanz","name":"Eduardo Sanz Garc√≠a","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11004366/avatar.png","web_url":"https://gitlab.com/eduardosanz"}],"author":{"id":5537005,"username":"cleveland","name":"Cleveland Bledsoe Jr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9b3b602b16b5453efe7c1190e8ae558e?s=80\u0026d=identicon","web_url":"https://gitlab.com/cleveland"},"type":"ISSUE","assignee":{"id":11004366,"username":"eduardosanz","name":"Eduardo Sanz Garc√≠a","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11004366/avatar.png","web_url":"https://gitlab.com/eduardosanz"},"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330350","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330350","notes":"https://gitlab.com/api/v4/projects/278964/issues/330350/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330350/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330350","relative":"#330350","full":"gitlab-org/gitlab#330350"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86653282,"iid":330344,"project_id":278964,"title":"Import groups from another instance of Gitlab fails for instance with relative url","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nBulk group import will fail when connecting gitlab instance with relative url configuration\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n1. Open `Import Group` window\n2. Use gitlab instance with relative url configuration for `GitLab source URL`\n3. Connect instance\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nStatus page returns no projects to import\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nStatus page should return projects to import or at least some error message which would indicate that it failed retrieving groups and not that there are no groups to import\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n![Screenshot_2021-05-07_at_14.47.31](/uploads/741ea7960abcdfa74ba6666986224abc/Screenshot_2021-05-07_at_14.47.31.png)\n\n---\n\n![Screenshot_2021-05-07_at_14.10.07](/uploads/8e5bcb89b5f23f36ebde923b41c9e33d/Screenshot_2021-05-07_at_14.10.07.png)\n\n---\n\n![Screenshot_2021-05-07_at_14.39.35](/uploads/e3bab44cb1bf7d96ab362df7e1c0151f/Screenshot_2021-05-07_at_14.39.35.png)\n\n```json\n{\"error\":{\"message\":\"Unable to connect to server: Failed to open TCP connection to 127.0.0.1:52591 (Connection refused - connect(2) for \\\"127.0.0.1\\\" port 52591)\",\"redirect\":\"/relative/groups/new\"}}\n```\n\n```json\n{\"severity\":\"ERROR\",\"time\":\"2021-05-07T10:28:37.270Z\",\"correlation_id\":\"01F535YF6105R9CGMB75BTFP1A\",\"exception.class\":\"Errno::ECONNREFUSED\",\"exception.message\":\"Failed to open TCP connection to 127.0.0.1:52591 (Connection refused - connect(2) for \\\"127.0.0.1\\\" port 52591)\",\"exception.backtrace\":[\"lib/gitlab/http.rb:44:in `perform_request'\",\"lib/bulk_imports/clients/http.rb:22:in `block in get'\",\"lib/bulk_imports/clients/http.rb:64:in `with_error_handling'\",\"lib/bulk_imports/clients/http.rb:21:in `get'\",\"app/controllers/import/bulk_imports_controller.rb:70:in `importable_data'\",\"app/controllers/import/bulk_imports_controller.rb:25:in `block (2 levels) in status'\",\"app/controllers/import/bulk_imports_controller.rb:23:in `status'\",\"ee/lib/gitlab/ip_address_state.rb:10:in `with'\",\"ee/app/controllers/ee/application_controller.rb:44:in `set_current_ip_address'\",\"app/controllers/application_controller.rb:485:in `set_current_admin'\",\"lib/gitlab/session.rb:11:in `with_session'\",\"app/controllers/application_controller.rb:476:in `set_session_storage'\",\"lib/gitlab/i18n.rb:73:in `with_locale'\",\"lib/gitlab/i18n.rb:79:in `with_user_locale'\",\"app/controllers/application_controller.rb:470:in `set_locale'\",\"app/controllers/application_controller.rb:463:in `block in set_current_context'\",\"lib/gitlab/application_context.rb:70:in `block in use'\",\"lib/gitlab/application_context.rb:70:in `use'\",\"lib/gitlab/application_context.rb:27:in `with_context'\",\"app/controllers/application_controller.rb:454:in `set_current_context'\",\"lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'\",\"lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'\",\"lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'\",\"lib/gitlab/metrics/transaction.rb:56:in `run'\",\"lib/gitlab/metrics/rack_middleware.rb:16:in `call'\",\"lib/gitlab/middleware/speedscope.rb:13:in `call'\",\"lib/gitlab/request_profiler/middleware.rb:17:in `call'\",\"lib/gitlab/jira/middleware.rb:19:in `call'\",\"lib/gitlab/middleware/go.rb:20:in `call'\",\"lib/gitlab/etag_caching/middleware.rb:21:in `call'\",\"lib/gitlab/middleware/multipart.rb:172:in `call'\",\"lib/gitlab/middleware/read_only/controller.rb:50:in `call'\",\"lib/gitlab/middleware/read_only.rb:18:in `call'\",\"lib/gitlab/middleware/same_site_cookies.rb:27:in `call'\",\"lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'\",\"lib/gitlab/middleware/basic_health_check.rb:25:in `call'\",\"lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'\",\"lib/gitlab/middleware/request_context.rb:21:in `call'\",\"config/initializers/fix_local_cache_middleware.rb:11:in `call'\",\"lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'\",\"lib/gitlab/metrics/requests_rack_middleware.rb:76:in `call'\",\"lib/gitlab/middleware/release_env.rb:12:in `call'\"],\"user.username\":\"qa-user-5ba09f60b981ea4e\",\"tags.program\":\"web\",\"tags.locale\":\"en\",\"tags.feature_category\":\"importers\",\"tags.correlation_id\":\"01F535YF6105R9CGMB75BTFP1A\"}\n```\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e\n\nIt seems that issue would be related to `base_uri` construction in `lib/bulk_imports/clients/http.rb:74` as it will strip the relative part of url passed.","state":"closed","created_at":"2021-05-07T11:45:00.813Z","updated_at":"2021-07-19T12:25:03.921Z","closed_at":"2021-07-19T11:58:53.164Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:GitLab Migration","Next Up","backend","devops::manage","estimation::completed","group::import","milestone::p3","section::dev","severity::4","type::bug","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330344","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330344","notes":"https://gitlab.com/api/v4/projects/278964/issues/330344/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330344/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330344","relative":"#330344","full":"gitlab-org/gitlab#330344"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4619,"epic":{"id":126564,"iid":4619,"title":"Group Migration - Parity with Group Export/Import","url":"/groups/gitlab-org/-/epics/4619","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86649837,"iid":330334,"project_id":278964,"title":"Follow-up from \"Add payment form URL\"","description":"The following discussions from !61103 should be addressed:\n\n- [x] @cwiesner started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61103#note_569626850): \n\n    \u003e **nitpick (non-blocking):** `context` block descriptions usually start with `when`, `with` or similar:\n    \u003e \n    \u003e ```suggestion:-0+0\n    \u003e       context 'when on non test and non dev environments' do\n    \u003e ```\n\n- [x] @mwoolf started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61103#note_569659333): \n\n    \u003e **suggestion (non-blocking):** This feels like a good example of where `RSpec::Parameterized::TableSyntax` would be a good idea.\n    \u003e \n    \u003e Since this is a rapid action and my suggestion is purely stylistic, this is definitely non-blocking.","state":"closed","created_at":"2021-05-07T10:36:44.967Z","updated_at":"2021-05-18T14:48:27.457Z","closed_at":"2021-05-18T13:53:37.645Z","closed_by":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"labels":["Category:Purchase","auto updated","devops::fulfillment","frontend","group::purchase","maintenance::refactor","section::fulfillment","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330334","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330334","notes":"https://gitlab.com/api/v4/projects/278964/issues/330334/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330334/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330334","relative":"#330334","full":"gitlab-org/gitlab#330334"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86648190,"iid":330330,"project_id":278964,"title":"GithubImporter: Dry up the representation layer","description":"Currently the Github importer Representation layer has quite some duplication among all the representation classes. Following the good practices and the Bitbucket importer example, most of this duplication can be moved to a _base_ class.","state":"closed","created_at":"2021-05-07T10:08:25.941Z","updated_at":"2021-05-18T21:21:03.071Z","closed_at":"2021-05-07T17:19:03.478Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Importers","Github","Importer:GitHub","Next Up","backend","devops::manage","group::import","maintenance::refactor","section::dev","workflow::ready for development"],"milestone":null,"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330330","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330330","notes":"https://gitlab.com/api/v4/projects/278964/issues/330330/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330330/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/330331"},"references":{"short":"#330330","relative":"#330330","full":"gitlab-org/gitlab#330330"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3051,"epic":{"id":39431,"iid":3051,"title":"üí° GitHub Importer improvements","url":"/groups/gitlab-org/-/epics/3051","group_id":9970},"iteration":null,"health_status":null},{"id":86643081,"iid":330328,"project_id":278964,"title":"Use due date widget in the refactored boards sidebar.","description":"In `board_content_sidebar.vue`, we should replace `board_sidebar_due_date.vue` with `sidebar_date_widget.vue`.\n\n`sidebar_date_widget.vue` is the recently created due date widget - `board_sidebar_due_date.vue` should be deleted after this task is done.\n\n### Todos\n\n- [ ] Replace `board_sidebar_due_date.vue` with `sidebar_date_widget.vue` in `board_content_sidebar.vue`.\n- [ ] :warning: Make sure to update feature specs for due dates (if the coverage is missing).","state":"closed","created_at":"2021-05-07T09:28:56.914Z","updated_at":"2021-07-18T07:06:43.658Z","closed_at":"2021-06-24T03:30:03.823Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["Deliverable","[deprecated] Accepting merge requests","bug::performance","devops::plan","frontend","group::product planning","section::dev","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[],"author":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330328","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330328","notes":"https://gitlab.com/api/v4/projects/278964/issues/330328/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330328/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330328","relative":"#330328","full":"gitlab-org/gitlab#330328"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86642702,"iid":330326,"project_id":278964,"title":"GitLab omnibus image out of sync with QA image on e2e test pipelines","description":"We have noticed a few instances where the Omnibus GitLab image is out of sync with the QA image.\n\nIn [this case](https://gitlab.com/gitlab-org/gitlab/-/commit/09df69536f7bb4e9950e86081a48484c2329daf4#note_569565374), the GitLab image was missing a selector that added to `app/views/users/show.html.haml` file [in this MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60347) but the QA image had the test added in the same MR.\n\nSame issue was also seen in e2e test pipeline in another MR: https://gitlab.com/gitlab-org/gitlab/-/commit/6e0a31cd9a231947fcbc69d7b43160dc218861aa#note_569565707\n\nCould be related to:\n\n* https://gitlab.com/gitlab-org/omnibus-gitlab/-/issues/5429\n* https://gitlab.com/gitlab-org/gitlab/-/merge_requests/56110","state":"closed","created_at":"2021-05-07T09:23:43.446Z","updated_at":"2022-03-16T11:43:07.873Z","closed_at":"2021-05-17T12:19:45.324Z","closed_by":{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","QA","Quality","type::maintenance"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":2632430,"username":"sliaquat","name":"Sanad Liaquat","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2632430/avatar.png","web_url":"https://gitlab.com/sliaquat"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"R√©my Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330326","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330326","notes":"https://gitlab.com/api/v4/projects/278964/issues/330326/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330326/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330326","relative":"#330326","full":"gitlab-org/gitlab#330326"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86642681,"iid":330325,"project_id":278964,"title":"Add selected container repository id + jid in cleanup workers logs","description":"### :fire: Problem\n\nCleanup policies execution are done by [limited capacity worker](https://gitlab.com/gitlab-org/gitlab/-/blob/0a68a5825203a4e12443734aeaafd413036a4fc2/app/workers/concerns/limited_capacity/worker.rb). Those kind of workers don't get their worker from the parameters. Instead, they will fetch the next work to do by themselves.\n\nAs such, if the job selects the next work and fails, we don't really know which container image was due for cleanup.\n\nThis makes ~bug investigations more difficult. Example: we know that a cleanup failed but we can't locate the logs related with the job that failed.\n\n### :fire_engine: Solution\n\nAfter selecting the next container image to cleanup, log a \"running\" message with\n* the container image id\n* the job id","state":"closed","created_at":"2021-05-07T09:23:18.894Z","updated_at":"2021-08-18T07:05:31.911Z","closed_at":"2021-07-28T13:12:42.463Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Background Processing","Category:Container Registry","Deliverable","Package:P1","backend","devops::package","group::package registry","package:scaling","ruby","section::ops","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330325","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330325","notes":"https://gitlab.com/api/v4/projects/278964/issues/330325/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330325/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330325","relative":"#330325","full":"gitlab-org/gitlab#330325"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2270,"epic":{"id":15539,"iid":2270,"title":"Cleanup policy for tags","url":"/groups/gitlab-org/-/epics/2270","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86641990,"iid":330322,"project_id":278964,"title":"Container image cleanup status can get stuck in the ongoing status","description":"### :fire: Problem\n\nCleanup statuses are important for the background workers processing them. They use those statuses to properly locate the next cleanup to execute.\n\nWe've seen a situation where a cleanup was stuck in the \"ongoing\" state. This state indicates to workers that the cleanup is being done by another worker so that cleanups in those states are never considered for pick up.\n\nThe root cause is not clear but from https://gitlab.com/gitlab-org/gitlab/-/issues/328860#note_568575485:\n\u003e We do stop Sidekiq sometimes: during a deploy, or when Sidekiq exceeds a certain memory limit. We don't exactly do a super graceful shutdown of sidekiq (https://gitlab.com/gitlab-com/gl-infra/delivery/-/issues/603), and jobs don't always finish so a long running job like this one could suffer from a hard shutdown.\n\nWe currently have a global [`rescue`](https://gitlab.com/gitlab-org/gitlab/-/blob/77a544a4fd0fad676bf02f048c5b12cfa6ff31b0/app/services/container_expiration_policies/cleanup_service.rb#L22-25), so that workers will put the cleanup in a resumable state in case of any error. What is described above is that basically, an ongoing cleanup process can be killed without any prior notice. As such, the `rescue` is not executed.\n\n### :fire_engine: Solution\n\n\u003e Instead, we could probably cleanup after ourselves in a next run, perhaps in the cron?\n\u003e \n\u003e ```ruby\n\u003e ContainerRepository.cleanup_ongoing.where(expiration_policy_started_at \u003c ?, 30.minutes.ago).update_all(expiration_policy_cleanup_status: :cleanup_unfinished)\n\u003e ```\n\u003e \n\u003e I think this will be okay to do in a single update statement, since the number of container repositories in this state would be at most the configured capacity.\n\nBasically, use the cron job to do a coherence check and \"fix\" cleanups in the wrong state.","state":"closed","created_at":"2021-05-07T09:12:08.921Z","updated_at":"2021-07-05T11:36:00.116Z","closed_at":"2021-05-21T15:00:17.759Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Background Processing","Category:Container Registry","Deliverable","Package:P1","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::bug","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330322","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330322","notes":"https://gitlab.com/api/v4/projects/278964/issues/330322/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330322/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330322","relative":"#330322","full":"gitlab-org/gitlab#330322"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2270,"epic":{"id":15539,"iid":2270,"title":"Cleanup policy for tags","url":"/groups/gitlab-org/-/epics/2270","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86639486,"iid":330316,"project_id":278964,"title":"Improve repeated module namespace in usage data metrics instrumentation","description":"Follow up issue from note\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/59649#\n\n\u003e The module namespace seems to be always `Gitlab::Usage::Metrics::Instrumentations` and could be DRYed I think by omitting it and using it wherever `instrumentation_class` is used.\n\n## Proposal \n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/59649/diffs#99de9a21c9275f807bb051606b717eef2683a99f_0_12\n\nCompose the class name by using the information in metric defintion YAML and the repeated namespaces when generating usage ping\n\n```ruby\ninstrumentation_class = \"Gitlab::Usage::Metrics::Instrumentations::#{definition.attributes[:instrumentation_class]}\"\n```\n\ncc @alper","state":"closed","created_at":"2021-05-07T08:43:31.565Z","updated_at":"2021-06-17T12:47:32.493Z","closed_at":"2021-05-17T17:43:27.234Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["devops::growth","group::product intelligence","maintenance::refactor","milestone::p3","section::growth","workflow::in review"],"milestone":null,"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330316","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330316","notes":"https://gitlab.com/api/v4/projects/278964/issues/330316/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330316/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330316","relative":"#330316","full":"gitlab-org/gitlab#330316"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5281,"epic":{"id":189695,"iid":5281,"title":"Generate Usage Ping from Metrics YML","url":"/groups/gitlab-org/-/epics/5281","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86638947,"iid":330315,"project_id":278964,"title":"Disable cleanup policies linked to no container repositories","description":"### :fire: Problem\n\nAt the time of this writing, on ~\"gitlab.com\" we have the following situation:\n\n* [~3 millions](https://console.postgres.ai/gitlab/gitlab-production-tunnel/sessions/3947/commands/13571) (internal) cleanup policies that are enabled but the linked project has not container images\n* [~6000](https://console.postgres.ai/gitlab/gitlab-production-tunnel/sessions/3947/commands/13572)(internal) cleanup policies that are enabled and the linked project has at least one container image\n\nIn a upcoming [work](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/58123), we're going to add an index that specifically targets enabled cleanup policies. This is to help the background workers to scan through them.\n\nThe second set of cleanup policies is really what the background workers are interested in. By having that heavy first set of unrelated policies, the index will not be working properly as background workers will only use 0.2% of the data in the index.\n\n### :fire_engine: Solution\n\nWe can't build the index in such way that it selects only the enabled policies that are linked to at least on container image.\n\nThe only solution is thus, disabling those cleanup policies (the ones from the first set). By doing so, they will be removed from the index, the amount of data hold in the index will be heavily reduced and we expect to have a much more efficient index.\n\nThere are two ways to disable those policies:\n1. A post migration. This is a one shot solution as a post migration is executed only when it is deployed and that's it.\n1. Add this as a step on the cron job of the cleanup policies. This way, each time the job is executed, we make sure that we don't have the first set.\n    * This needs to be properly document because it means that users deleting container images could disable the associated cleanup policy if they delete *all* container images.\n\n#### :helmet_with_cross: Comparison\n\nLet's image that we want to build a query like this one\n\n```sql\nWITH policies AS (\n        SELECT \"container_expiration_policies\".\"project_id\"\n          FROM \"container_expiration_policies\"\n           WHERE \"container_expiration_policies\".\"enabled\" = TRUE\n           AND \"container_expiration_policies\".\"next_run_at\" \u003c NOW()\n       )  \nSELECT container_repositories.id\n  FROM container_repositories\n WHERE \"container_repositories\".\"project_id\" IN (\n        SELECT \"policies\".\"project_id\"\n          FROM policies\n       )\n```\n\n(We're pulling all the container image ids that are like to enabled and runnable cleanup policies)\n\nHere is what we get the index holding both sets: https://console.postgres.ai/gitlab/gitlab-production-tunnel/sessions/3947/commands/13576 (internal). Using the index is not helpful, we get `14s` of execution time. :scream_cat: \n\nHere is what we have with the index holding only the second set: https://console.postgres.ai/gitlab/gitlab-production-tunnel/sessions/3948/commands/13588 (internal). 20ms of execution time. So :rocket: \n\n#### :radio: Other considerations\n\nWe're disabling the cleanup policies on the users behalf. This change should be properly communicated.\n\n#### :hammer: SQL UPDATE\n\n```sql\nUPDATE container_expiration_policies SET enabled=FALSE WHERE \"container_expiration_policies\".\"enabled\" = TRUE and NOT (EXISTS (SELECT 1 FROM \"container_repositories\" WHERE (container_repositories.project_id = container_expiration_policies.project_id)))\n```\n\n### Breaking change for 14.0\nThe 14.0 breaking change blog post has been updated to include a note for this change: gitlab-com/www-gitlab-com!79292","state":"closed","created_at":"2021-05-07T08:40:16.536Z","updated_at":"2021-09-17T06:36:39.302Z","closed_at":"2021-07-05T08:02:35.355Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Background Processing","Category:Container Registry","Deliverable","Package:P1","backend","devops::package","group::package registry","package:active","package:scaling","ruby","section::ops","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":39,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330315","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330315","notes":"https://gitlab.com/api/v4/projects/278964/issues/330315/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330315/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330315","relative":"#330315","full":"gitlab-org/gitlab#330315"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2270,"epic":{"id":15539,"iid":2270,"title":"Cleanup policy for tags","url":"/groups/gitlab-org/-/epics/2270","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"needs_attention"},{"id":86638183,"iid":330314,"project_id":278964,"title":"[VSA] - Fix UX issues with multiselect dropdown on group level","description":"### Problem\n\nOn group-level VSA users can select multiple projects from the dropdown.\nHowever, there are some ~UX issues with the dropdown when trying to select multiple projects:\n\n- The dropdown is closed when an item gets selected\n- The search input in the dropdown isn't visible anymore when a previously scrolled to the bottom (user has to scroll back to top)\n\n![group_level_vsa_multiselect_project_dropdown](/uploads/5a6eed38d3297111d09fbdb855a81cbf/group_level_vsa_multiselect_project_dropdown.mp4)\n\n### Prooposal\n\nWe should introduce the following changes to the dropdown:\n- When multiselect is enabled, the dropdown should remain open when a user selects an item\n- The dropdown is only closed when the user clicks away\n- Once the user clicks away, search input is cleared and the we scroll back to the top","state":"closed","created_at":"2021-05-07T08:35:26.678Z","updated_at":"2022-01-04T17:59:45.284Z","closed_at":"2021-07-20T07:53:53.296Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["devops::manage","feature::enhancement","frontend","group::optimize","priority::2","section::dev","type::feature","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330314","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330314","notes":"https://gitlab.com/api/v4/projects/278964/issues/330314/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330314/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330314","relative":"#330314","full":"gitlab-org/gitlab#330314"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86628789,"iid":330306,"project_id":278964,"title":"Benchmark with production like load if we can even use logical decoding to move a group","description":"In https://gitlab.com/gitlab-org/gitlab/-/issues/329977 we will use logical replication in Postgres to move groups and make a concrete set of steps that work. But before we get too far with the implementation of this we need to be confident that this can work at our scale. The volume of data in our WAL may be so large that we practically can't follow/decode and filter it without falling behind.\n\nWe should try to use a production like environment to run the steps and see if we can actually keep up.","state":"closed","created_at":"2021-05-07T05:26:28.918Z","updated_at":"2022-10-24T09:44:44.196Z","closed_at":"2021-08-23T08:58:07.581Z","closed_by":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"labels":["Category:Pods","database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":null,"assignees":[],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":null,"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330306","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330306","notes":"https://gitlab.com/api/v4/projects/278964/issues/330306/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330306/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330306","relative":"#330306","full":"gitlab-org/gitlab#330306"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5840,"epic":{"id":255814,"iid":5840,"title":"Decomposition: Testing and validation strategy","url":"/groups/gitlab-org/-/epics/5840","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86628543,"iid":330305,"project_id":278964,"title":"Can we remove the \"Move\" project/group feature and replace it with a \"Copy\" feature","description":"## Problem\n\nRelated to https://gitlab.com/gitlab-org/gitlab/-/issues/330304 we may want to have a `top_level_namespace_id` column to reliably identify the shard for any sharded record. Moving projects and subgroups to other groups will mean this column is not immutable but additionally it will be quite an expensive operation to perform as things may need to move shards. There will also likely be many caches that need invalidating as well as a primary database that stores shard locations that will need updating and cannot be done reliably in a single transaction as these things will cross several logical databases.\n\n## Solution\n\nIf we could have `top_level_namespace_id` as immutable a lot of problems will become a lot simpler. Moving projects and groups is probably the only barrier to this. We could just remove these features or change the way they work such that a moved project is actually just copied instead of moved. Thus it will change all the IDs of everything in the group. We can additionally archive (or delete) the original project. There are many tradeoffs but it's also possible that moving projects to different top level groups is not that important for users and they may be able to live with the copy approach.\n\nIf our Copy feature behaved similar to export then import it would mean a bunch of records are not copied across (like artifacts, container images and so on). We could expand to also implement copying for more things.","state":"closed","created_at":"2021-05-07T05:15:38.344Z","updated_at":"2022-05-31T12:23:11.696Z","closed_at":"2021-06-10T22:19:12.193Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Category:Pods","database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":null,"assignees":[],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330305","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330305","notes":"https://gitlab.com/api/v4/projects/278964/issues/330305/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330305/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330305","relative":"#330305","full":"gitlab-org/gitlab#330305"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5839,"epic":{"id":255812,"iid":5839,"title":"Manage logical database shards","url":"/groups/gitlab-org/-/epics/5839","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86628432,"iid":330304,"project_id":278964,"title":"Is it practical to de-normalize top_level_namespace_id on every sharded object?","description":"## Problem\n\nCurrently the majority of tables in GitLab do not have a reference to their top level key without traversing several joins. For example, an issue belongs to a project which belongs to a subgroup which eventually through several levels belongs to a top level group.\n\nIf we move to horizontal sharding by \"top level group\" then there are going to be many difficult operations that need to find all data belonging to a shard. For example when moving groups between shards we need to efficiently select all records from all tables that belong to this shard. \n\n## Solution\n\nDe-normalize a `top_level_group_id` column on every single sharded table. This will make moving groups much easier as described in https://gitlab.com/gitlab-org/gitlab/-/issues/329308#universal-sharding-ids and probably there will be other cases where this simplifies a lot of our logic.\n\nGiven the large number of tables involved we should investigate how feasible this will be. If we don't go with `top_level_group_id` we're at least going to need to de-normalize `project_id` on to every table. `project_id` will be much less efficient for finding all the data in a group but it will be easier to implement because most tables already have `project_id` on them.","state":"closed","created_at":"2021-05-07T05:08:00.353Z","updated_at":"2022-05-31T12:23:12.601Z","closed_at":"2021-05-21T08:55:02.180Z","closed_by":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"labels":["Category:Pods","database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":null,"assignees":[],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330304","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330304","notes":"https://gitlab.com/api/v4/projects/278964/issues/330304/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330304/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330304","relative":"#330304","full":"gitlab-org/gitlab#330304"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5839,"epic":{"id":255812,"iid":5839,"title":"Manage logical database shards","url":"/groups/gitlab-org/-/epics/5839","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86626511,"iid":330300,"project_id":278964,"title":"Rename methods called \"service\" to \"integration\"","description":"This is part of https://gitlab.com/groups/gitlab-org/-/epics/2504 to rename `Service` to `Integration`. \n\nAfter changing the `Service` class to `Integration` https://gitlab.com/gitlab-org/gitlab/-/issues/201848 we're left with a number of methods (mostly in `Integration` and `Project`, but likely elsewhere) that refer to these objects as \"services\" in both method names and variable names. \n\nTo complete the rename, we should also refactor these methods (and their variables) to refer to these objects as \"integrations\".","state":"closed","created_at":"2021-05-07T03:47:57.038Z","updated_at":"2022-11-22T19:42:02.235Z","closed_at":"2021-07-16T14:54:46.255Z","closed_by":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"labels":["Category:Integrations","Deliverable","backend","devops::manage","group::ecosystem [DEPRECATED]","missed-deliverable","missed:14.0","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330300","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330300","notes":"https://gitlab.com/api/v4/projects/278964/issues/330300/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330300/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330300","relative":"#330300","full":"gitlab-org/gitlab#330300"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":86620115,"iid":330278,"project_id":278964,"title":"Remove WIP/Draft regex title parsing","description":"https://gitlab.com/gitlab-org/gitlab/-/issues/228685#note_562984123\n\nThis will complete [Remove support for WIP prefix in merge requests](https://gitlab.com/gitlab-org/gitlab/-/issues/228685)\n\nWe will continue to allow users the workflow of changing the title to change status.  When processing incoming changes to an MR (via `MergeRequest::Update/CreateService`) we will update the title by prepending/removing `Draft:` when the status changes) so that the title reflects the current draft status, however the Single Source of Truth (SSoT) about draft status should be the DB record, not the title.\n\n+ remove regex parsing of title\n+ remove regex as a Source Of Truth\n+ remove frontend regex parsing in favor of `draft` column status\n\nNote that we may still need to support this regex in the backend, as we parse incoming commits for [several triggers](https://docs.gitlab.com/ee/user/project/merge_requests/drafts.html#mark-merge-requests-as-drafts) to change draft status","state":"closed","created_at":"2021-05-06T23:00:54.545Z","updated_at":"2022-06-21T12:01:44.836Z","closed_at":"2022-05-24T18:57:58.507Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","group::code review","missed-deliverable","missed:14.10","missed:14.2","missed:14.8","quad-planning::complete-no-action","section::dev","type::feature"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":33,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330278","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330278","notes":"https://gitlab.com/api/v4/projects/278964/issues/330278/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330278/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330278","relative":"#330278","full":"gitlab-org/gitlab#330278"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3879,"epic":{"id":80141,"iid":3879,"title":"Rename WIP merge requests to Draft","url":"/groups/gitlab-org/-/epics/3879","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86620048,"iid":330276,"project_id":278964,"title":"Add data migration to flip draft status column false-\u003etrue for all open wip/draft MRs","description":"https://gitlab.com/gitlab-org/gitlab/-/issues/228685#note_562984123\n\nThis is a step towards completing [Remove support for WIP prefix in merge requests](https://gitlab.com/gitlab-org/gitlab/-/issues/228685)\n\nEnsure that any open MR's `draft` status column matches what we expect in terms of regex title parsing results.","state":"closed","created_at":"2021-05-06T22:57:01.791Z","updated_at":"2021-08-16T16:21:28.045Z","closed_at":"2021-06-19T04:55:14.238Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","group::code review","section::dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330276","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330276","notes":"https://gitlab.com/api/v4/projects/278964/issues/330276/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330276/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330276","relative":"#330276","full":"gitlab-org/gitlab#330276"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3879,"epic":{"id":80141,"iid":3879,"title":"Rename WIP merge requests to Draft","url":"/groups/gitlab-org/-/epics/3879","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86620036,"iid":330275,"project_id":278964,"title":"ensure /draft quick action and \"the button\" (\"Un/Mark as Draft\") will flip draft status","description":"https://gitlab.com/gitlab-org/gitlab/-/issues/228685#note_562984123\n\nThis is a step towards completing [Remove support for WIP prefix in merge requests](https://gitlab.com/gitlab-org/gitlab/-/issues/228685)\n\nOnce we have [added a boolean \"draft\" column](https://gitlab.com/gitlab-org/gitlab/-/issues/330274) we need to ensure that toggling of the status through quick action and UI elements flip this field value as well.","state":"closed","created_at":"2021-05-06T22:55:21.013Z","updated_at":"2021-06-18T07:07:01.910Z","closed_at":"2021-05-26T18:09:43.362Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","frontend","frontend-weight::2","group::code review","section::dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330275","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330275","notes":"https://gitlab.com/api/v4/projects/278964/issues/330275/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330275/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330275","relative":"#330275","full":"gitlab-org/gitlab#330275"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86619984,"iid":330274,"project_id":278964,"title":"Add a boolean column for tracking MR draft status","description":"https://gitlab.com/gitlab-org/gitlab/-/issues/228685#note_562984123\n\nThis is a step towards completing [Remove support for WIP prefix in merge requests](https://gitlab.com/gitlab-org/gitlab/-/issues/228685)\n\nBy adding this column, we will be able to eventually remove regex parsing of MR titles to determine draft status.\n\nAdditionally, check wip/draft status reporting methods to use EITHER regex or the value of this field.","state":"closed","created_at":"2021-05-06T22:52:49.460Z","updated_at":"2021-05-18T07:06:31.055Z","closed_at":"2021-05-17T01:33:39.301Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","group::code review","section::dev"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330274","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330274","notes":"https://gitlab.com/api/v4/projects/278964/issues/330274/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330274/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330274","relative":"#330274","full":"gitlab-org/gitlab#330274"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86619973,"iid":330273,"project_id":278964,"title":"Remove `ci_raise_job_rules_without_workflow_rules_warning` feature flag","description":"Introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/38387 in %13.3\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T22:52:16.622Z","updated_at":"2021-05-25T14:53:29.071Z","closed_at":"2021-05-25T14:26:17.270Z","closed_by":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"labels":["Category:Continuous Integration","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","section::ops","severity::4","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330273","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330273","notes":"https://gitlab.com/api/v4/projects/278964/issues/330273/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330273/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330273","relative":"#330273","full":"gitlab-org/gitlab#330273"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6010,"epic":{"id":271035,"iid":6010,"title":"Verify:Pipeline Execution - Feature Flag cleanup","url":"/groups/gitlab-org/-/epics/6010","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86619956,"iid":330272,"project_id":278964,"title":"Remove `ci_pipeline_status_omit_commit_sha_in_cache_key` feature flag","description":"Introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/33712 in %13.2\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T22:51:04.681Z","updated_at":"2021-06-23T12:05:41.641Z","closed_at":"2021-06-23T11:52:08.603Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","Verify candidate","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","missed:14.0","onboarding","section::ops","severity::4"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330272","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330272","notes":"https://gitlab.com/api/v4/projects/278964/issues/330272/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330272/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330272","relative":"#330272","full":"gitlab-org/gitlab#330272"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6010,"epic":{"id":271035,"iid":6010,"title":"Verify:Pipeline Execution - Feature Flag cleanup","url":"/groups/gitlab-org/-/epics/6010","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86619932,"iid":330271,"project_id":278964,"title":"Remove support for `/wip` quick action","description":"This is a first step towards completing [Remove support for WIP prefix in merge requests](https://gitlab.com/gitlab-org/gitlab/-/issues/228685)","state":"closed","created_at":"2021-05-06T22:49:20.539Z","updated_at":"2021-06-18T07:07:01.959Z","closed_at":"2021-05-21T18:43:41.802Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","group::code review","section::dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330271","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330271","notes":"https://gitlab.com/api/v4/projects/278964/issues/330271/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330271/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330271","relative":"#330271","full":"gitlab-org/gitlab#330271"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86619917,"iid":330270,"project_id":278964,"title":"Remove `ci_pipeline_latest` feature flag","description":"Introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/34160 in %13.2\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T22:48:24.355Z","updated_at":"2021-06-23T12:05:18.297Z","closed_at":"2021-06-23T11:52:10.745Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","Verify candidate","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","missed:14.0","onboarding","section::ops","severity::4"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330270","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330270","notes":"https://gitlab.com/api/v4/projects/278964/issues/330270/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330270/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330270","relative":"#330270","full":"gitlab-org/gitlab#330270"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6010,"epic":{"id":271035,"iid":6010,"title":"Verify:Pipeline Execution - Feature Flag cleanup","url":"/groups/gitlab-org/-/epics/6010","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86619851,"iid":330268,"project_id":278964,"title":"Remove `ci_runners_tokens_optional_encryption` feature flag","description":"Introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/8638 in %11.6\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T22:44:40.659Z","updated_at":"2021-06-23T12:05:59.667Z","closed_at":"2021-06-23T11:52:10.166Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","Verify candidate","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","missed:14.0","onboarding","section::ops","severity::4"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330268","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330268","notes":"https://gitlab.com/api/v4/projects/278964/issues/330268/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330268/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330268","relative":"#330268","full":"gitlab-org/gitlab#330268"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6010,"epic":{"id":271035,"iid":6010,"title":"Verify:Pipeline Execution - Feature Flag cleanup","url":"/groups/gitlab-org/-/epics/6010","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86619724,"iid":330266,"project_id":278964,"title":"Remove `ci_artifacts_exclude` feature flag","description":"Introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/30708 in %13.0\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T22:40:24.710Z","updated_at":"2021-06-24T14:53:25.442Z","closed_at":"2021-06-24T14:53:25.421Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","Verify candidate","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","missed:14.0","onboarding","section::ops","severity::4","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330266","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330266","notes":"https://gitlab.com/api/v4/projects/278964/issues/330266/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330266/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330266","relative":"#330266","full":"gitlab-org/gitlab#330266"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6010,"epic":{"id":271035,"iid":6010,"title":"Verify:Pipeline Execution - Feature Flag cleanup","url":"/groups/gitlab-org/-/epics/6010","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":86619688,"iid":330265,"project_id":278964,"title":"Remove `ci_dynamic_child_pipeline` feature flag","description":"Introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/23790 in %12.9\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T22:37:50.921Z","updated_at":"2021-06-15T16:09:06.740Z","closed_at":"2021-06-15T16:09:06.713Z","closed_by":{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"},"labels":["Category:Continuous Integration","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","priority::4","section::ops","severity::4","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330265","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330265","notes":"https://gitlab.com/api/v4/projects/278964/issues/330265/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330265/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330265","relative":"#330265","full":"gitlab-org/gitlab#330265"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6010,"epic":{"id":271035,"iid":6010,"title":"Verify:Pipeline Execution - Feature Flag cleanup","url":"/groups/gitlab-org/-/epics/6010","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86619657,"iid":330264,"project_id":278964,"title":"Remove `ci_dynamic_child_pipeline` feature flag","description":"Introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/23790 in %12.9\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T22:36:42.063Z","updated_at":"2021-06-07T20:38:33.799Z","closed_at":"2021-06-07T20:38:33.769Z","closed_by":{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"},"labels":["Category:Continuous Integration","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","priority::4","section::ops","severity::4","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330264","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330264","notes":"https://gitlab.com/api/v4/projects/278964/issues/330264/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330264/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330264","relative":"#330264","full":"gitlab-org/gitlab#330264"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86618906,"iid":330263,"project_id":278964,"title":"Insights: Hide issues chart when GitLab issues are deactivated","description":"## Problem\n\nIf a customer disables GitLab issues for a project, issue-based charts still appear on the Analytics \u003e Insights page. This makes the Insights page look inaccurate and/or empty.\n\n## Proposal\n\nIn both group-level Insights and project-level Insights, hide all issue-based charts if the GitLab issue tracker is disabled.\n\n## Example of the problem\n\n![Insights___GitLab_org___security-products___analyzers___browserker___GitLab](/uploads/8e3fa80c1273d65d8efac0d470239ae0/Insights___GitLab_org___security-products___analyzers___browserker___GitLab.png)","state":"closed","created_at":"2021-05-06T22:08:26.672Z","updated_at":"2022-12-20T08:46:54.672Z","closed_at":"2022-12-20T08:46:54.624Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Category:DevOps Reports","Hackathon","Hacktoberfest","[deprecated] Accepting merge requests","backend","devops::plan","good for new contributors","group::optimize","priority::3","section::dev","severity::4","type::bug","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330263","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330263","notes":"https://gitlab.com/api/v4/projects/278964/issues/330263/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330263/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330263","relative":"#330263","full":"gitlab-org/gitlab#330263"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86618507,"iid":330260,"project_id":278964,"title":"Rename Vulnerability Status `Detected` to better differentiate it from Activity","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Background\n\nThere's currently some confusion around the usage of `Detected` within the vulnerability list as it is used to refer to both the `Vulnerability.status` and `Vulnerability.activity`.\n\nThe activity is workflow-driven and updated according to events that can occur around a vulnerability (such as becoming resolved or having an attached issue).\n\nThe vulnerability status refers to a human-driven attribute: starting in a \"Detected\" state and manually transitioning to others such as \"Confirmed\".\n\nThere are issues with applying volition to the \"Activity\" states since those are deterministic, so \"no longer detected\" works well for communicated the reality: that we are no longer detecting the vulnerability.\n\nThe status of \"detected\", however, is closer to a default state of \"untriaged\". I propose we use a different term to communicate a vulnerability is still open that better differentiates the Status from Activity\n\n\n### Proposal\n\n#### Now\n1. Change `Detected` to `Needs triage` (see designs) \n\n#### Next \n1. Consider keeping and `status:Detected` for new findings (see [comment](https://gitlab.com/gitlab-org/gitlab/-/issues/330260#note_655391703))\n\n#### Future\n1. Consider an Open/Closed state for vulnerabilities in the future (see [issue](https://gitlab.com/gitlab-org/gitlab/-/issues/341510))","state":"closed","created_at":"2021-05-06T21:51:26.441Z","updated_at":"2022-01-11T04:12:53.750Z","closed_at":"2021-12-02T11:58:34.763Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["Category:Vulnerability Management","devops::secure","feature::enhancement","frontend","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[],"author":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"type":"ISSUE","assignee":null,"user_notes_count":34,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330260","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330260","notes":"https://gitlab.com/api/v4/projects/278964/issues/330260/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330260/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330260","relative":"#330260","full":"gitlab-org/gitlab#330260"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3590,"epic":{"id":68427,"iid":3590,"title":"Polished User Experience","url":"/groups/gitlab-org/-/epics/3590","group_id":9970},"iteration":null,"health_status":null},{"id":86616111,"iid":330256,"project_id":278964,"title":"Broken `main` branch on License Finder due to breaking change on pypi.org","description":"Failing job\n* https://gitlab.com/gitlab-org/security-products/analyzers/license-finder/-/jobs/1242634794\n\nError:\n\n```\nCould not fetch URL https://pypi.test/simple/requests/: 403 Client Error: [[[!!! BREAKING CHANGE !!!]]] Support for clients that do not support Server Name Indication is temporarily disabled and will be permanently deprecated soon. See https://status.python.org/incidents/hzmjhqsdjqgb and https://github.com/pypa/pypi-support/issues/978 [[[!!! END BREAKING CHANGE !!!]]] for url: https://pypi.test/simple/requests/ - skipping\n```\n\nReason: https://github.com/pypa/pypi-support/issues/978\n\n\nWe are using Haproxy [to simulate a private registry](https://gitlab.com/gitlab-org/security-products/analyzers/license-finder/-/blob/5b39bd19cb9a246171dce00d6a258f80b45b274c/spec/integration/python/pip_spec.rb#L166). The Rspec test is configured to use a custom endpoint `pypi.test` with a self-signed certificate. The query is actually forwarded to pypi.org via [haproxy](https://gitlab.com/gitlab-org/security-products/analyzers/license-finder/blob/main/spec/fixtures/haproxy.cfg) but it looks like such query is rejected by pypi servers.\n\n### Possible fix\n\nFind a way to configure HAproxy so that queries are accepted by pypi.org.\n\nAs a last resort we can quarantine this spec.","state":"closed","created_at":"2021-05-06T20:35:43.420Z","updated_at":"2021-06-18T07:09:19.644Z","closed_at":"2021-05-31T05:51:43.690Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Broken Pipeline","Category:License Compliance","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","priority::1","section::sec","severity::2","type::bug","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330256","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330256","notes":"https://gitlab.com/api/v4/projects/278964/issues/330256/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330256/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330256","relative":"#330256","full":"gitlab-org/gitlab#330256"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":86615815,"iid":330255,"project_id":278964,"title":"Geo: \"Last event ID processed by cursor\" says 51 years ago due to unix timestamp of 0","description":"## Updated summary\n\nGaps in `geo_event_log.id` are normal and expected, for example due to rolled back transactions. Gaps occur more frequently with a higher volume of events.\n\nOriginally, we assumed that gaps are abnormal and unexpected. So our backend and UI does not account for this possibility. We display `Last event ID processed by cursor` and its timestamp to admins.\n\nWhen a gap is permanent, [Admin Area \u003e Geo \u003e Nodes shows this](https://gitlab.com/gitlab-org/gitlab/-/issues/329851#note_569149273) until we expire the recorded gap after 1 hour:\n\n![Screen_Shot_2021-05-06_at_1.32.52_PM](/uploads/e1fa5e1cf7785bfce841b0613c524adc/Screen_Shot_2021-05-06_at_1.32.52_PM.png)\n\n## Original description\n\nNoticed first in https://gitlab.com/gitlab-org/gitlab/-/issues/329851#note_569149273. Diving into Rails console at staging.gitlab.com:\n\n* The UI says `51 years ago` because `cursor_last_event_timestamp` is `0`\n* `cursor_last_event_timestamp` is `0` because `cursor_last_event_date` is `nil` on the secondary's `geo_node_statuses` record\n* `cursor_last_event_date` is `nil` because a `geo_event_log` record does not exist with an ID of `258385150`: [See code](https://gitlab.com/gitlab-org/gitlab/-/blob/e865a2fa47b51719eae8e95a3fa6b10d2ce6b90a/ee/app/models/geo_node_status.rb#L473)\n* `cursor_last_event_id` is `258385150` because `::Gitlab::Geo::EventGapTracking.min_gap_id` is `258385150` and it's (less than `Geo::EventLogState.last_processed\u0026.event_id`: `258387080`): [See code](https://gitlab.com/gitlab-org/gitlab/-/blob/e865a2fa47b51719eae8e95a3fa6b10d2ce6b90a/ee/app/models/geo_node_status.rb#L333)\n\nQuestions:\n\n* Under normal operation, the primary prunes events which have been processed by all secondaries. It should not have pruned event `258385150` because the secondary says it has not processed it. Why did it prune this event?\n  * A possibility: Since it also prunes *all* events if there are no `geo_nodes` records marked as secondaries, maybe there were no secondary nodes at the time?\n  * At the moment, [there are machines in `staging.gitlab.com` that don't know which `GeoNode` they belong to](https://gitlab.com/gitlab-org/gitlab/-/issues/330024). Maybe this is related?\n* Is `::Gitlab::Geo::EventGapTracking.min_gap_id` equal to `258385150` because `geo_cursor` did not [record that it processed that event](https://gitlab.com/gitlab-org/gitlab/-/blob/967a403c7203d62f57a70c4d4dd1b3b6a885f654/ee/lib/gitlab/geo/log_cursor/daemon.rb#L46)?\n  * Or is there a bug in gap tracking? I noticed `min_gap_id == Geo::EventLog.first.id - 2` on two separate times that I checked.\n  * Is there a configuration problem in PG replication?\n\n\u003cdetails\u003e\n\u003csummary\u003eClick here to see `Event log gap detected` log 123 times over the last 19 hours in geo.staging.gitlab.com's geo.log\u003c/summary\u003e\n\n```\nmkozono@geo-secondary-01-sv-gstg.c.gitlab-staging-1.internal:/var/log/gitlab$ sudo grep 'Event log gap detected' gitlab-rails/geo.log | less\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T01:00:12.422Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258329564,\"current_event_id\":258329566}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:10:41.728Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258338171,\"current_event_id\":258338173}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:12:00.571Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258338310,\"current_event_id\":258338313}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:12:04.292Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258338326,\"current_event_id\":258338329}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:12:11.225Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258338361,\"current_event_id\":258338364}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:12:15.245Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258338381,\"current_event_id\":258338384}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:12:27.261Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258338421,\"current_event_id\":258338424}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:19:09.692Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258338556,\"current_event_id\":258338558}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:35:12.467Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258339101,\"current_event_id\":258339104}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:35:12.475Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258339104,\"current_event_id\":258339106}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:47:25.964Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258339390,\"current_event_id\":258339392}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T03:59:12.893Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258339791,\"current_event_id\":258339793}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T04:34:12.572Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258343124,\"current_event_id\":258343126}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T04:39:05.481Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258343539,\"current_event_id\":258343541}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T04:39:41.462Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258343667,\"current_event_id\":258343669}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T05:18:57.046Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258346609,\"current_event_id\":258346611}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T05:19:00.426Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258346624,\"current_event_id\":258346626}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T05:19:44.709Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258346835,\"current_event_id\":258346838}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T05:20:24.667Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258346980,\"current_event_id\":258346982}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:09:58.851Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350108,\"current_event_id\":258350110}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:09:58.859Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350110,\"current_event_id\":258350112}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:09:58.866Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350112,\"current_event_id\":258350114}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:00.072Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350139,\"current_event_id\":258350141}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:00.196Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350143,\"current_event_id\":258350145}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:01.904Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350165,\"current_event_id\":258350167}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:07.311Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350225,\"current_event_id\":258350227}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:07.317Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350227,\"current_event_id\":258350229}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:09.285Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350240,\"current_event_id\":258350243}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:09.307Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350247,\"current_event_id\":258350250}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:10.306Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350267,\"current_event_id\":258350269}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:11.083Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350281,\"current_event_id\":258350283}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:11.958Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350293,\"current_event_id\":258350296}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:12.085Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350298,\"current_event_id\":258350300}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:14.235Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350343,\"current_event_id\":258350345}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:16.501Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350367,\"current_event_id\":258350369}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:19.999Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350378,\"current_event_id\":258350380}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:10:20.858Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350388,\"current_event_id\":258350390}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:11:58.019Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350610,\"current_event_id\":258350612}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:12:00.573Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350637,\"current_event_id\":258350640}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:12:05.180Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350686,\"current_event_id\":258350689}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:12:51.624Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258350958,\"current_event_id\":258350961}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:13:47.877Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258351150,\"current_event_id\":258351153}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:13:54.688Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258351183,\"current_event_id\":258351185}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:15:47.965Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258351383,\"current_event_id\":258351385}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:21:09.397Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258351542,\"current_event_id\":258351544}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T06:39:33.920Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258352371,\"current_event_id\":258352373}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T07:12:04.271Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258353700,\"current_event_id\":258353702}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T07:30:10.359Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258354116,\"current_event_id\":258354118}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:02:39.540Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258357281,\"current_event_id\":258357283}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:04:25.809Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258357813,\"current_event_id\":258357815}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:05:21.771Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258358015,\"current_event_id\":258358017}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:09:49.964Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258358969,\"current_event_id\":258358971}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:09:53.412Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359008,\"current_event_id\":258359010}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:09:54.735Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359011,\"current_event_id\":258359013}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:09:55.558Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359020,\"current_event_id\":258359022}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:09:55.577Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359022,\"current_event_id\":258359024}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:09:59.168Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359046,\"current_event_id\":258359049}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:10:01.130Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359073,\"current_event_id\":258359076}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:10:02.306Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359100,\"current_event_id\":258359102}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:10:02.313Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359103,\"current_event_id\":258359105}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:10:09.520Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359205,\"current_event_id\":258359207}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:10:09.535Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359209,\"current_event_id\":258359211}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:11:24.662Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359484,\"current_event_id\":258359486}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:11:24.719Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359490,\"current_event_id\":258359492}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:11:49.385Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359632,\"current_event_id\":258359634}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:11:49.389Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359634,\"current_event_id\":258359636}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:12:31.863Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359942,\"current_event_id\":258359944}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:12:31.866Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258359944,\"current_event_id\":258359946}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T09:47:12.142Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258362487,\"current_event_id\":258362489}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T10:32:03.028Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258363924,\"current_event_id\":258363927}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:06:31.492Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367080,\"current_event_id\":258367082}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:21.819Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367342,\"current_event_id\":258367345}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:21.825Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367345,\"current_event_id\":258367347}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:25.418Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367387,\"current_event_id\":258367389}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:29.077Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367410,\"current_event_id\":258367412}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:29.083Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367412,\"current_event_id\":258367414}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:36.616Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367466,\"current_event_id\":258367468}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:36.622Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367468,\"current_event_id\":258367470}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:10:39.944Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367497,\"current_event_id\":258367500}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:12:13.633Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258367648,\"current_event_id\":258367651}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:40:49.346Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258368896,\"current_event_id\":258368898}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T12:44:09.137Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258369264,\"current_event_id\":258369266}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T13:03:03.442Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258370112,\"current_event_id\":258370114}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T13:04:26.554Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258370412,\"current_event_id\":258370416}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T13:07:07.020Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258370905,\"current_event_id\":258370908}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T13:08:05.187Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258371057,\"current_event_id\":258371060}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T13:14:11.664Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258372038,\"current_event_id\":258372040}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T14:40:15.041Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258376132,\"current_event_id\":258376134}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T14:44:03.101Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258376403,\"current_event_id\":258376405}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:06.203Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377401,\"current_event_id\":258377403}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:06.210Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377403,\"current_event_id\":258377405}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:08.954Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377429,\"current_event_id\":258377431}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:08.969Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377432,\"current_event_id\":258377435}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:10.474Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377451,\"current_event_id\":258377453}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:11.851Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377463,\"current_event_id\":258377466}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:11.875Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377470,\"current_event_id\":258377472}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:13.717Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377477,\"current_event_id\":258377480}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:13.727Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377481,\"current_event_id\":258377484}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:13.750Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377487,\"current_event_id\":258377491}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:10:13.785Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377496,\"current_event_id\":258377498}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:12:03.726Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258377883,\"current_event_id\":258377885}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:12:14.688Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258378004,\"current_event_id\":258378007}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:14:04.513Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258378318,\"current_event_id\":258378321}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T15:19:29.862Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258378798,\"current_event_id\":258378800}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T16:12:10.692Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258380941,\"current_event_id\":258380943}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T16:40:45.287Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258382132,\"current_event_id\":258382134}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T16:57:08.226Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258382845,\"current_event_id\":258382848}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T17:09:03.775Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258383083,\"current_event_id\":258383085}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:01:03.181Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258384754,\"current_event_id\":258384756}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:10:03.810Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385149,\"current_event_id\":258385152}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:10:05.544Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385163,\"current_event_id\":258385168}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:11:44.443Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385358,\"current_event_id\":258385361}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:11:56.914Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385424,\"current_event_id\":258385427}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:12:21.704Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385542,\"current_event_id\":258385545}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:12:26.103Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385578,\"current_event_id\":258385580}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:12:26.109Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385580,\"current_event_id\":258385582}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:13:51.038Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258385685,\"current_event_id\":258385688}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:39:41.142Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258386543,\"current_event_id\":258386545}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T18:55:16.559Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258387277,\"current_event_id\":258387279}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T19:36:18.738Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258390233,\"current_event_id\":258390236}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T19:38:02.750Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258390460,\"current_event_id\":258390462}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T19:46:13.749Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258391003,\"current_event_id\":258391005}\n{\"severity\":\"INFO\",\"time\":\"2021-05-06T20:00:03.449Z\",\"correlation_id\":null,\"class\":\"Gitlab::Geo::EventGapTracking\",\"host\":\"geo.staging.gitlab.com\",\"message\":\"Event log gap detected\",\"previous_event_id\":258391911,\"current_event_id\":258391913}\n```\n\n\u003c/details\u003e","state":"closed","created_at":"2021-05-06T20:25:22.504Z","updated_at":"2022-08-10T03:03:55.036Z","closed_at":"2021-05-27T14:45:03.881Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["UX","devops::systems","found:staging.gitlab.com","frontend","group::geo","priority::3","section::enablement","severity::3","type::bug","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330255","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330255","notes":"https://gitlab.com/api/v4/projects/278964/issues/330255/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330255/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330255","relative":"#330255","full":"gitlab-org/gitlab#330255"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86613634,"iid":330248,"project_id":278964,"title":"Design: Allow filtering vulnerability dashboard by non-remediated activity (\u0026 more Activity filters)","description":"### Proposal \n\nfor filtering vulnerabilities on the vulnerability dashboard, it would be nice to filter out remediated vulnerabilities. All I care about are vulnerabilities with no activity or possibly with issues. This is currently an \"OR\" condition only.\n\nThere are 4 possible states of \"Activity\":\n1. All vulnerabilities\n1. \"No activity\" on vulnerability\n1. Issues attached to vulnerabilities\n1. Vulnerability is no longer present\n\nI want to exclude the last collection however 1, 2, and 3 are exclusive to each other.\n\n![Screen_Shot_2021-05-06_at_12.32.30_PM](/uploads/7b1f8a5c9365a79456252216e7bb31f6/Screen_Shot_2021-05-06_at_12.32.30_PM.png)\n\n### Implementation Plan\n\n- [x] Change the \"All\" option on the status filter to read \"All statuses\". https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63709\n- [x] Change the \"All\" option on the activity filter to read \"All activity\". https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63709\n- [x] Hide the `GitLab` header for the `Scanner` filter until there are custom vendor scanners. https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63596\n- [ ] Add the design proposal(s) to the activity filter.\n\n### Design proposal\n\nSee design section. Note on functionality: Either **neither** option can be selected or **only 1** of them within each section, but never both. Here's a video of how the interaction should look (please ignore the _designs_ in the video, they are now outdated):\n\nhttps://www.loom.com/share/54af09e3503f40c38785129279fbecf8","state":"closed","created_at":"2021-05-06T19:30:16.571Z","updated_at":"2022-08-31T15:55:14.323Z","closed_at":"2022-04-15T16:18:20.206Z","closed_by":{"id":4708748,"username":"matt_wilson","name":"Matt Wilson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4708748/avatar.png","web_url":"https://gitlab.com/matt_wilson"},"labels":["Category:Vulnerability Management","SUS::Impacting","Technical Writing","UI text","UX","component:dropdown","devops::secure","feature::enhancement","group::threat insights","missed:14.6","missed:14.7","missed:14.8","missed:14.9","section::sec","severity::4","type::feature","workflow::planning breakdown"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"}],"author":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"type":"ISSUE","assignee":{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"},"user_notes_count":68,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330248","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330248","notes":"https://gitlab.com/api/v4/projects/278964/issues/330248/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330248/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330248","relative":"#330248","full":"gitlab-org/gitlab#330248"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7883,"epic":{"id":496332,"iid":7883,"title":"Additional Activity filters for Vulnerability Reports","url":"/groups/gitlab-org/-/epics/7883","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86613298,"iid":330246,"project_id":278964,"title":"Add the blob async request to StartupJS","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal \n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\nWhen rendering the blob content page, we request the pre-rendered markup of the content via an ajax request.\n\nThe moment this request is triggered, is way down on the list of requests.\n\nAdding this to the startupjs could add some easy and quick wins in terms of performance improvements in small or large file pages.\n\n\n### Waterfall\n\n![Screenshot_2021-05-06_at_20.19.05](/uploads/5425286caf3c8fe9b8ca2441806881bf/Screenshot_2021-05-06_at_20.19.05.png)\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n\n--\u003e\n\n### Context\n\nThis will benefit the current implementation (HAML) before we're able to enable the Vue implementation. \n Regardless, we should keep this optimisation in the future blob renderer too.","state":"closed","created_at":"2021-05-06T19:22:41.535Z","updated_at":"2021-06-18T07:06:53.556Z","closed_at":"2021-06-02T06:28:06.687Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","bug::performance","devops::create","feature::enhancement","frontend","group::source code","section::dev","type::feature"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":853414,"username":"andr3","name":"Andr√© Lu√≠s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330246","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330246","notes":"https://gitlab.com/api/v4/projects/278964/issues/330246/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330246/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330246","relative":"#330246","full":"gitlab-org/gitlab#330246"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86612334,"iid":330241,"project_id":278964,"title":"Improve usability of Source Editor's contextual menu","description":"### Release notes\n\nWeb IDE improved. In GitLab 13.XX, a developer can use Web IDE more easily.\n\n### Problem to solve \n\nFor example, a developer cannot copy and paste from the context menu on Web IDE.\n\n![monaco-0-20](/uploads/b928e2bae84b6dad1c9ff30a061ad5ab/monaco-0-20.png)\n\n### Intended users\n\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n\n### User experience goal\n\nA user (non-developer) who is familiar with Microsoft Word, not with text editors, can use Web IDE to update documents efficiently.\n\n### Proposal\n\nEveryone in the team can contribute from Web IDE.\n\n### Further details\n\nn/a\n\n### Permissions and Security\n\nn/a\n\n### Documentation\n\nn/a\n\n### Availability \u0026 Testing\n\nTBD\n\n### Available Tier\n\n* Free\n\n### What does success look like, and how can we measure that?\n\nn/a\n\n### What is the type of buyer?\n\nn/a\n\n### Is this a cross-stage feature?\n\nn/a\n\n### Links / references","state":"closed","created_at":"2021-05-06T19:00:28.287Z","updated_at":"2021-07-14T14:27:46.737Z","closed_at":"2021-07-14T14:27:46.719Z","closed_by":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"labels":["Backlog Refinement::Editor","GitLab Core","Source Editor","UX","[deprecated] Accepting merge requests","devops::create","group::editor","section::dev","type::feature"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[],"author":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330241","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330241","notes":"https://gitlab.com/api/v4/projects/278964/issues/330241/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330241/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330241","relative":"#330241","full":"gitlab-org/gitlab#330241"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5010,"epic":{"id":152385,"iid":5010,"title":"Create:Editor - Improvements - Editor Lite","url":"/groups/gitlab-org/-/epics/5010","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86610345,"iid":330222,"project_id":278964,"title":"Remove `ci_cross_pipeline_artifacts_download` feature flag","description":"FF was enabled by default in %13.7: https://gitlab.com/gitlab-org/gitlab/-/issues/287622\n\n- Related to https://gitlab.com/gitlab-org/gitlab/-/issues/255983 and introduced by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/48342/diffs\n\nWe should remove the FF as part of code cleanup.","state":"closed","created_at":"2021-05-06T18:34:44.282Z","updated_at":"2021-06-17T23:13:05.290Z","closed_at":"2021-06-04T14:15:33.487Z","closed_by":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"labels":["Category:Continuous Integration","backend","devops::verify","feature flag","group::pipeline execution","maintenance::refactor","priority::4","section::ops","severity::4","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330222","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330222","notes":"https://gitlab.com/api/v4/projects/278964/issues/330222/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330222/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330222","relative":"#330222","full":"gitlab-org/gitlab#330222"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6010,"epic":{"id":271035,"iid":6010,"title":"Verify:Pipeline Execution - Feature Flag cleanup","url":"/groups/gitlab-org/-/epics/6010","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86604285,"iid":330144,"project_id":278964,"title":"Security MR Widget \"?\" icon alignment is off for non-Ultimate users","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nFor non-Ultimate users, the `?` icon in the Security MR Widget is too close to the text.  We have a related bug at https://gitlab.com/gitlab-org/gitlab/-/issues/296030 regarding the `?` icons within approvers section. \n\n### Steps to reproduce\n\nThis MR widget variant appears when you are a non-admin role on a core/non-Ultimate project.  \n1. Create a non-Ultimate project (easiest way is to create a private project)\n1. Create an MR that will include security scan results\n1. Add a member with the Developer role\n1. Log in as that member and view the MR\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n`?` icon on Security scans row is spaced too close to the text.\n\n### What is the expected *correct* behavior?\n\nStandard spacing used on other icons should be used. \n\n### Relevant logs and/or screenshots\n\nVariant for a non-admin users on a non-Ultimate project (blue `?` with spacing issue)\n![image](/uploads/c4db44fb48559d554bdd4670adb0201a/image.png)\n\nVariant for an admin user on a non-Ultimate project (white `?' with correct spacing)\n![image](/uploads/c27ff61153bbf4ca42eba3645895a8e8/image.png)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n- [ ] Edit [help_icon.vue](https://gitlab.com/gitlab-org/gitlab/blob/7da9d01fdbd144e52b6107fcf49e8e2c948fcb7c/app/assets/javascripts/vue_shared/security_reports/components/help_icon.vue) to use the same icon (`question`) and color (link blue) in the two cases, and add padding as necessary for this case\n   - To test the two cases, follow the set up instructions in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/49613.","state":"closed","created_at":"2021-05-06T16:25:06.491Z","updated_at":"2021-06-22T12:50:55.119Z","closed_at":"2021-06-22T12:50:55.101Z","closed_by":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"labels":["devops::secure","frontend","group::static analysis","missed:14.0","priority::3","section::sec","severity::4","type::bug","workflow::ready for development"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"}],"author":{"id":5412787,"username":"nmccorrison","name":"Neil McCorrison","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5412787/avatar.png","web_url":"https://gitlab.com/nmccorrison"},"type":"ISSUE","assignee":{"id":7293390,"username":"jannik_lehmann","name":"Jannik Lehmann","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7293390/avatar.png","web_url":"https://gitlab.com/jannik_lehmann"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330144","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330144","notes":"https://gitlab.com/api/v4/projects/278964/issues/330144/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330144/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330144","relative":"#330144","full":"gitlab-org/gitlab#330144"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86603232,"iid":330140,"project_id":278964,"title":"SQL n+1 in `GET /api/:version/groups/:id/projects`","description":"The endpoint `GET /api/:version/groups/:id/projects` appears to have a SQL n+1 issue.\n\nAt a guess, it appears that the problem is related to the `include_subgroups=true` parameter, especially when a large page size is used. Worst case is around 1000 sql calls per request, but 95th percentile is over 400 per request.\n\n* p95: 475.014 db calls\n* max: 1,072 db calls\n* samples 256781 (24 hours)\n\n~\"Mechanical Sympathy\" alert: https://gitlab.slack.com/archives/CM5EQH125/p1620310206029700\n \n\n* [Kibana Search of Rails log for db counts \u003e 100](https://log.gprd.gitlab.net/app/kibana#/discover?_a=(columns:!(json.method,json.status,json.controller,json.action,json.path,json.duration_s,json.db_count),filters:!((query:(match:(json.meta.caller_id.keyword:(query:'GET+%2Fapi%2F%3Aversion%2Fgroups%2F%3Aid%2Fprojects',type:phrase)))),(query:(range:(json.db_count:(gte:100))))),index:'7092c4e2-4eb5-46f2-8305-a7da2edad090',sort:!(!(json.db_count,desc)))\u0026_g=(time:(from:'now-24h',to:'now')))\n* [Kibana Visualization for P50/75/95/99 for db count](https://log.gprd.gitlab.net/goto/8549e2fb0981f94b81c86477697c573b)\n* [Kibana search of postgres log for query duration \u003e 8 seconds](https://log.gprd.gitlab.net/goto/94b6be94f7312e9ae299451939730b8d)\n* [Kibana search of View Durations \u003e 5 seconds](https://log.gprd.gitlab.net/goto/78f2fc7f42a8d0519eafc42058d96039)\n* [Rails Dashboard](https://log.gprd.gitlab.net/app/dashboards#/view/db37b560-9793-11eb-a990-d72c312ff8e9?_g=(filters:!((query:(match_phrase:(json.meta.caller_id.keyword:'GET+%2Fapi%2F%3Aversion%2Fgroups%2F%3Aid%2Fprojects')))),time:(from:'now-24',to:now)))\n\n## Current status 2022/03/14\n\n- https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80937 merged\n  - [Feature flag](https://gitlab.com/gitlab-org/gitlab/-/issues/353503) for above will be enabled this week\n- https://gitlab.com/gitlab-org/gitlab/-/merge_requests/81838 approaching final review\n\n## Next steps\n\n- [x] Measure effects of removing N+1 for `first_auto_devops_config` - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80937\n  - Improves maybe another 100 ms or so. Not huge, but it does reduce DB queries by about 100, also, depending on group hierarchy depth/breadth. We will measure full results in production using the dashboards. \n- [x] Perform another analysis of the endpoint to determine next bottleneck, whether N+1 or slow query. Done with Stan's help - see https://gitlab.com/gitlab-org/gitlab/-/issues/330140#note_848497207\n- [x] Parse the data above to determine next steps.  \n\n## Exit criteria\n\nDashboard: https://log.gprd.gitlab.net/goto/ca3934e0-8e74-11ec-a649-b7cbb8e4f62e\n\n* Reduce % queries with DB count \u003e100 from 14% to 5%\n* Reduce 99th percentile of DB count from 779 to 400\n* Reduce 99th percentile of DB duration from 2.2s to 1.5s","state":"closed","created_at":"2021-05-06T16:05:10.451Z","updated_at":"2022-04-16T02:43:23.201Z","closed_at":"2022-04-06T10:00:21.236Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Category:Authentication and Authorization","Category:Subgroups","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","Mechanical Sympathy","bug::performance","devops::manage","group::authentication and authorization","infradev","missed:14.6","missed:14.7","missed:14.9","priority::3","quad-planning::complete-no-action","section::dev","severity::3","type::bug","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"}],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"user_notes_count":147,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330140","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330140","notes":"https://gitlab.com/api/v4/projects/278964/issues/330140/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330140/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330140","relative":"#330140","full":"gitlab-org/gitlab#330140"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5296,"epic":{"id":190836,"iid":5296,"title":"Linear namespace queries","url":"/groups/gitlab-org/-/epics/5296","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86600051,"iid":330133,"project_id":278964,"title":"[Feature flag] Apply rate-limiting to webhook executions","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Feature\n\nThis feature uses the `:web_hooks_rate_limit` feature flag!\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/61151 introduces the functionality, but is disabled by default (both through the FF, and by not defining a threshold yet).\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n- [Apply rate-limiting to webhook executions](https://gitlab.com/gitlab-org/gitlab/-/issues/329207)\n\n## Owners\n\n- Team: ~\"group::ecosystem\" \n- Most appropriate slack channel to reach out to: `#g_create_ecosystem-be`\n- Best individual to reach out to: @toupeira \n- PM: @deuley \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\nThis issue only focuses on the rollout for the Free plan on gitlab.com.\n\nPossible follow-up issues:\n\n- Adding thresholds on paid plans.\n- Adding a default threshold for self-managed instances.\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nFrequently called webhooks will get rate-limited.\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nWe might set the threshold too low and break user's workflows.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n|  | Staging | Production\n| ------ | ------ | -- |\n| Rate limit events (Rails) | https://nonprod-log.gitlab.net/goto/51d8ebf49baf1f84ed7a6f443bfffeb5 | https://log.gprd.gitlab.net/goto/f327f3c32a524be2be2a38e43bf8cffe\n| Rate limit events (Sidekiq) | https://nonprod-log.gitlab.net/goto/f81cb098d007be1ea735bf702bd1e88d | https://log.gprd.gitlab.net/goto/cd9cdcae88393e22e822cd8f37b4b46d\n\n(Note: The log source depends on whether the webhook was triggered from a web request or a job worker)\n\n## Rollout Timeline\n\n\u003c!-- Please check which steps are needed and remove those which don't apply --\u003e\n\n**Rollout Steps**\n\n*Preparation Phase*\n- [x] Enable on staging (`/chatops run feature set web_hooks_rate_limit true --staging`)\n\n- [x] Verify behaviour on staging\n  - Set a temporary threshold for the Free plan.\n  - Verify the rate limiting behaves as expected (rate-limit takes effect, resets after the interval, doesn't affect non-Free plans)\n  - Reset the temporary threshold.\n\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default))\n\n- [x] Check that https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62130 is deployed to gitlab.com.\n\n- [x] Enable on production (`/chatops run feature set web_hooks_rate_limit true`)\n  - No threshold is defined yet so this won't have an effect, but as a side-effect of checking the plan limits we'll also log the subscription plan in Kibana.\n\n- [x] Determine a suitable threshold for the Free plan, based on usage patterns in Kibana.\n\n- [x] Submit an MR to:\n  - Add a migration to set the threshold for the Free plan on gitlab.com.\n  - Document the threshold on https://docs.gitlab.com/ee/user/gitlab_com/index.html#webhooks.\n  - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62918\n\n- [x] Disable on production (`/chatops run feature set web_hooks_rate_limit false`)\n\n*Full Rollout Phase*\n\n- [x] Announce on the issue an estimated time this will be enabled on GitLab.com\n\n- [x] Check if the feature flag change needs to be accompanied with a\n      [change management\n      issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process). Cross\n      link the issue here if it does.\n\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production. If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n\n- [x] Notify about the upcoming change in `#support_gitlab-com` ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#where-to-run-commands)) and in your team channel\n\n- [x] **After the %\"14.0\" release announcement on June 22:**\n  - [x] Enable on production (`/chatops run feature set web_hooks_rate_limit true`)\n  - [x] Verify the behaviour on production (trigger more than 120 webhook calls per minute and check logs)\n  - [x] Announce on the issue that the flag has been enabled\n\n- [x] Submit an MR to make the feature flag enabled by default.\n  - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64708\n- [x] Wait for the MR to be deployed.\n- [x] Remove the feature flag on all environments.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set web_hooks_rate_limit false\n```","state":"closed","created_at":"2021-05-06T15:17:56.836Z","updated_at":"2022-11-24T18:22:41.612Z","closed_at":"2021-07-08T17:45:04.094Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Application Limits","Category:Integrations","Category:Webhooks","Deliverable","backend","devops::manage","feature flag","group::ecosystem [DEPRECATED]","section::dev","type::maintenance"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330133","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":20,"completed_count":19},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"19 of 20 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330133","notes":"https://gitlab.com/api/v4/projects/278964/issues/330133/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330133/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330133","relative":"#330133","full":"gitlab-org/gitlab#330133"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8975,"epic":{"id":623279,"iid":8975,"title":"Improve the reliability of webhooks: Webhook rate limiting","url":"/groups/gitlab-org/-/epics/8975","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86597879,"iid":330127,"project_id":278964,"title":"Allow enabling diff virtual scrolling by browser session","description":"The diff virtual scrolling is behind a feature flag so that we can enable it per project and can ship it iteratively. However it would be nice if we could enable it in the browser to test per session.\n\nThis could be done either with a cookie or a URL parameter. URL parameter may be preferred so that we can start to run the sitespeed tests with it enabled to see our performance gains.","state":"closed","created_at":"2021-05-06T14:47:06.947Z","updated_at":"2021-06-18T07:07:02.006Z","closed_at":"2021-05-19T14:16:06.591Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","OKR FY22 Q2::Large MR","devops::create","feature::addition","frontend","group::code review","priority::3","section::dev","severity::3","type::feature"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330127","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330127","notes":"https://gitlab.com/api/v4/projects/278964/issues/330127/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330127/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330127","relative":"#330127","full":"gitlab-org/gitlab#330127"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5952,"epic":{"id":266300,"iid":5952,"title":":rocket: Diffs virtual scrolling","url":"/groups/gitlab-org/-/epics/5952","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86597703,"iid":330126,"project_id":278964,"title":"Fix linking to diff discussion when virtual scrolling is enabled","description":"As part of enabling virtual scrolling on diffs we need to look at fixing linking to a diff discussion.\n\nWe can't just rely on the browser automatically scrolling to the hash because the div may not be in the DOM. So I think we need to call a method on the virtual scroller to scroll to a set index.","state":"closed","created_at":"2021-05-06T14:44:56.003Z","updated_at":"2021-07-18T07:07:18.315Z","closed_at":"2021-06-30T12:13:14.179Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","OKR FY22 Q2::Large MR","devops::create","diff","frontend","group::code review","merge requests","missed:14.0","priority::3","section::dev","severity::3","type::bug","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330126","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330126","notes":"https://gitlab.com/api/v4/projects/278964/issues/330126/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330126/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330126","relative":"#330126","full":"gitlab-org/gitlab#330126"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5952,"epic":{"id":266300,"iid":5952,"title":":rocket: Diffs virtual scrolling","url":"/groups/gitlab-org/-/epics/5952","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86597533,"iid":330125,"project_id":278964,"title":"Fix linking to diff file when virtual scrolling is enabled","description":"As part of enabling virtual scrolling on diffs we need to look at fixing linking to a diff file. \n\nWe can't just rely on the browser automatically scrolling to the hash because the div may not be in the DOM. So I think we need to call a method on the virtual scroller to scroll to a set index.","state":"closed","created_at":"2021-05-06T14:42:34.037Z","updated_at":"2021-07-18T07:07:18.353Z","closed_at":"2021-06-30T06:44:48.361Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","OKR FY22 Q2::Large MR","UX","devops::create","diff","frontend","group::code review","merge requests","missed:14.0","priority::2","section::dev","severity::3","type::bug","workflow::in dev"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"}],"author":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330125","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330125","notes":"https://gitlab.com/api/v4/projects/278964/issues/330125/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330125/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330125","relative":"#330125","full":"gitlab-org/gitlab#330125"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5952,"epic":{"id":266300,"iid":5952,"title":":rocket: Diffs virtual scrolling","url":"/groups/gitlab-org/-/epics/5952","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86593237,"iid":330123,"project_id":278964,"title":"Return 15 pipelines instead of 20 pipelines.json","description":"Currently we return `20` pipelines for the pipelines table (pipelines.json) and for each pagination page. Performance is not the best on this page, load times are slow and we load a tremendous amount of DOM elements due to all the data we display.\n\n### Proposal\n\nWe could load the first `15` pipelines and then the next `15` pipelines as a user paginates. This would reduce the amount of data and DOM nodes we need to load on the view.\n\n![Screen_Shot_2021-05-06_at_9.45.57_AM](/uploads/f2c62c0ce82fa996abd1edba395ef4f0/Screen_Shot_2021-05-06_at_9.45.57_AM.png)","state":"closed","created_at":"2021-05-06T13:46:24.218Z","updated_at":"2021-07-20T10:05:20.613Z","closed_at":"2021-07-20T10:05:20.589Z","closed_by":{"id":3714742,"username":"ck3g","name":"Vitali Tatarintev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3714742/avatar.png","web_url":"https://gitlab.com/ck3g"},"labels":["Category:Continuous Integration","Verify candidate","backend","bug::performance","devops::verify","group::pipeline execution","onboarding","priority::3","section::ops","severity::3","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3714742,"username":"ck3g","name":"Vitali Tatarintev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3714742/avatar.png","web_url":"https://gitlab.com/ck3g"}],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":{"id":3714742,"username":"ck3g","name":"Vitali Tatarintev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3714742/avatar.png","web_url":"https://gitlab.com/ck3g"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330123","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330123","notes":"https://gitlab.com/api/v4/projects/278964/issues/330123/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330123/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330123","relative":"#330123","full":"gitlab-org/gitlab#330123"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86592219,"iid":330121,"project_id":278964,"title":"FE: Seat Usage should be sortable","description":"## Proposal\n\nAllow to sort the Seat Usage page by `Last activity` date, `Users` and `Email`.\n\nSorting should have descending and ascending option.\n\nThe ~frontend issue for https://gitlab.com/gitlab-org/gitlab/-/issues/330055\n\nThere's a component on top of the page \"Users occupying seats in ...\" (marked in the screenshot below), this component should stay in its place, the search would be in the middle and the sort would be on the left (discussion in [thread](https://gitlab.com/gitlab-org/gitlab/-/issues/330121#note_602892189)).\n\n\u003cimg src=\"https://gitlab.com/gitlab-org/gitlab/uploads/c0057d62e9ad288523dfd35650c5a5fa/Screen_Shot_2021-06-16_at_15.52.02.png\" width=\"500\"/\u003e\n\n## Design\n \n![seat_usage_filters](/uploads/0695cbef1e9c2ad12a9f07efd386b17d/seat_usage_filters.png)\n_Copied over from #292038_\n\n## Implementation\n\nNoting that both the sort and filter controls were added with this issue. In this first iteration, filtering by member name is the only available criteria. More iterations on filtering to come in https://gitlab.com/gitlab-org/gitlab/-/issues/330059 and https://gitlab.com/gitlab-org/gitlab/-/issues/334179","state":"closed","created_at":"2021-05-06T13:28:49.127Z","updated_at":"2021-09-02T14:37:44.476Z","closed_at":"2021-07-30T13:35:54.590Z","closed_by":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"labels":["#field-fyi","[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","missed:14.1","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330121","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330121","notes":"https://gitlab.com/api/v4/projects/278964/issues/330121/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330121/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330121","relative":"#330121","full":"gitlab-org/gitlab#330121"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4547,"epic":{"id":121875,"iid":4547,"title":"GitLab.com Billable Members List","url":"/groups/gitlab-org/-/epics/4547","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":86587305,"iid":330109,"project_id":278964,"title":"Usage Data name suggestion returns a number","description":"\n```ruby\nGitlab::Usage::Metrics::NamesSuggestions::Generator.generate('usage_activity_by_stage_monthly.create.approval_project_rules_with_more_approvers_than_required')\n=\u003e 129\n```\n\nName suggestion returns a number, it should return a string.","state":"closed","created_at":"2021-05-06T12:28:31.207Z","updated_at":"2022-11-14T08:37:26.865Z","closed_at":"2022-11-14T07:49:32.693Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["Hacktoberfest","Seeking community contributions","[deprecated] Accepting merge requests","backend","devops::analytics","group::product intelligence","priority::4","section::analytics","severity::4","stale","type::bug","vintage","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":null,"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330109","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330109","notes":"https://gitlab.com/api/v4/projects/278964/issues/330109/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330109/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330109","relative":"#330109","full":"gitlab-org/gitlab#330109"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5931,"epic":{"id":264515,"iid":5931,"title":"Usage Ping Maintenance","url":"/groups/gitlab-org/-/epics/5931","group_id":9970,"human_readable_end_date":"Jan 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86584832,"iid":330103,"project_id":278964,"title":"CI: Identify int4 foreign keys prone to overflow","description":"We have large tables with int4 primary keys that are forcasted to overflow within the coming months. Many of these originate from the \"CI data model\", even though this is also the case elsewhere. https://gitlab.com/groups/gitlab-org/-/epics/4785 is the top-level epic and https://gitlab.com/groups/gitlab-org/-/epics/5761 covers the \"family of CI tables around `ci_builds`\".\n\nAsk: We need a CI domain expert to identify *all* relevant int4 foreign keys in the CI data model that we will need to migrate to int8.\n\n~\"group::database\" owns the overall migration procedure, e.g. the backfilling data migration and making transparent schema changes to facilitate this - so this will be taken care of.\n\n### What to look for\n\nLet's take an example: `ci_builds.id` is a int4 primary key that needs to be migrated. Assuming this is done, it's not a int8 column and we start to go beyond the `int4` range - what will happen? Anything that references this column from elsewhere is going to break if it is still a `int4` column.\n\nWhat we've done so far is reviewing explicit foreign keys and we're also going to migrate tables referencing a problematic primary key. The best example here is https://gitlab.com/groups/gitlab-org/-/epics/5761 which covers all tables referencing `ci_builds.id` explicitly.\n\nHowever, there is uncertainty since we know that not all foreign keys are modeled explicitly in the database as foreign key constraints. An example here is polymorphic associations as being discussed in https://gitlab.com/gitlab-org/gitlab/-/issues/329540#note_563983872.\n\nThe intent here is to make sure we don't overlook a certain column. If we do, this feature is going to break loudly as soon as we cross the `int4` data range.\n\n### Outcome\n\nIt would be enough for us to have a authoritative list of foreign keys in the \"CI data model\" that are known to overflow unless we migrate those. ~\"group::database\" to organize the work of migrating those columns.\n\nAdditionally, it would be great to have someone from ~\"group::pipeline execution\"  familiar with the subject, so we can reach out in case we need help understanding the model or implementing those changes later.\n\n### Expected Timeline: %14.0\n\nThis is rather urgent, given that we forecast the overflow to happen in a few months and we need to migrate a lot of data prior to this event. There are additional complications involved with these migrations that require us spreading work across multiple milestones (which all has to ideally happen before an overflow event occurs).\n\nPlease also see the [forecast](https://gitlab.com/groups/gitlab-org/-/epics/4785#forecast).","state":"closed","created_at":"2021-05-06T11:42:55.775Z","updated_at":"2021-07-20T17:18:07.880Z","closed_at":"2021-07-20T17:18:07.865Z","closed_by":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"labels":["Category:Continuous Integration","Category:Database","Engineering Allocation","[deprecated] Accepting merge requests","ci::scaling","devops::verify","group::pipeline execution","missed:14.0","section::ops"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":null,"user_notes_count":41,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330103","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330103","notes":"https://gitlab.com/api/v4/projects/278964/issues/330103/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330103/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330103","relative":"#330103","full":"gitlab-org/gitlab#330103"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5761,"epic":{"id":250084,"iid":5761,"title":"Address the Primary Key Overflow risk for the Family of CI tables","url":"/groups/gitlab-org/-/epics/5761","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86581318,"iid":330099,"project_id":278964,"title":"Remove the index_namespaces_id_parent_id_is_not_null index","description":"The following discussion from !61098 should be addressed:\n\n- [ ] @ahegyi started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61098#note_568715468):  (+1 comment)\n\n    \u003e Remove the `index_namespaces_id_parent_id_is_not_null` index in the next milestone after the namespace `traversal_ids` migration is finished.","state":"closed","created_at":"2021-05-06T10:30:58.625Z","updated_at":"2022-05-24T12:01:04.891Z","closed_at":"2022-05-14T00:46:36.854Z","closed_by":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"labels":["Deliverable","Linear queries","backend","database","devops::manage","group::organization","missed-deliverable","missed:14.1","quad-planning::complete-no-action","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330099","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330099","notes":"https://gitlab.com/api/v4/projects/278964/issues/330099/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330099/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330099","relative":"#330099","full":"gitlab-org/gitlab#330099"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6308,"epic":{"id":302941,"iid":6308,"title":"traversal_ids migration cleanup","url":"/groups/gitlab-org/-/epics/6308","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86574893,"iid":330093,"project_id":278964,"title":"Introduce image integration tests in Dependency Scanning analyzers","description":"## Summary\n\nIntroduce integration tests that check the Docker image and CLI of a Dependency Scanning analyzer project.\n\nCompared to the existing job integration tests (AKA \"QA jobs\"), these new integration tests can be executed out of a CI job. As a consequence, they don't guarantee that the scanning job integrates properly with the CI. In particular, the Docker image might be incompatible in the job definition or with the CI itself.\n\nImage integration tests are preferable to CLI integration tests because they better reproduce the running environment of the scanning job. That said, there might be cases where it's sufficient to test the analyzer CLI, and where executing `docker run` only slows down the test with no benefit.\n\n## Improvements\n\nIt becomes easy to add tests that leverage the existing test projects:\n- tests for supported environment variables (though it's not possible to check the default value set in the job definition)\n- tests for when the supported files are moved to a sub-directory or sub-sub-directory\n- tests using a custom vulnerability database, and resulting in a different report\n\nRight now these tests can be implemented as job integration tests, but this involves creating branches in the [Secure test projects](https://gitlab.com/gitlab-org/security-products/tests), and maintaining them.\n\nAlso, it becomes possible to test scenarios where the analyzer fails with a specific exit code. At the moment this can't be achieved with the existing job integration tests. See https://gitlab.com/gitlab-org/gitlab/-/issues/324963\n\n## Risks\n\nSee [Optional: Missing test coverage](#optional-missing-test-coverage)\n\n## Involved components\n\nAll Dependency Scanning [analyzers](https://gitlab.com/gitlab-org/security-products/analyzers).\n\n## Optional: Intended side effects\n\nNone\n\n## Optional: Missing test coverage\n\nThere's a possibly a gap between image and CLI integration tests and the corresponding job integration tests.\n\nPossible gaps:\n- The analyzer behaves differently because of the environment variables. This might be because of:\n   - [predefined CI variables](https://docs.gitlab.com/ee/ci/variables/predefined_variables.html)\n   - job [variables](https://docs.gitlab.com/ee/ci/yaml/#variables), possibly defined in a job it [extends](https://docs.gitlab.com/ee/ci/yaml/#extends)\n   - variables set in the environment where the image or CLI integration tests are executed \n- The scanning job is skipped but the analyzer CLI runs.\n   - [`rules:exists`](https://docs.gitlab.com/ee/ci/yaml/#rulesexists) doesn't match any file of the scanned directory.\n      - Filename doesn't match.\n      - Filename does match but directory depth doesn't.\n\nAlso, CLI and image integration tests need to be updated whenever the job [script](https://gitlab.com/gitlab-org/gitlab/-/blob/2e4b79adc7844ead32559ceb2774bde3abf4f9c9/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml#L34) changes. If they're not updated, they no longer test the command that's being executed on the CI.\n\nSee [Dependency Scanning CI template](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml)\n\n## Implementation plan\n\n- Demonstrate image integration tests in the [gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/) project\n   - [x] List job integration tests that could be implemented as image integration tests\n   - [x] Port these to image integration tests\n   - [ ] **Optionally**, port the other job integration tests, but skip them by default; see [testing community contributions](#note_581650737)\n   - [x] Update project dev documentation, and explain how to run image integration tests\n- [x] Take notes on how to port job integration tests, [in this issue](#note_585331906)\n- Communicate with Secure section\n   - [x] Share on Slack\n   - [x] Share in a weekly meeting for the Secure stage","state":"closed","created_at":"2021-05-06T08:58:23.389Z","updated_at":"2022-03-16T11:43:12.114Z","closed_at":"2021-06-17T07:47:06.243Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","maintenance::workflow","section::sec","type::maintenance","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330093","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":6},"weight":5,"blocking_issues_count":1,"has_tasks":true,"task_status":"6 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330093","notes":"https://gitlab.com/api/v4/projects/278964/issues/330093/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330093/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330093","relative":"#330093","full":"gitlab-org/gitlab#330093"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5823,"epic":{"id":255201,"iid":5823,"title":"Composition Analysis Testing improvements","url":"/groups/gitlab-org/-/epics/5823","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":86574318,"iid":330092,"project_id":278964,"title":"DRY Gemnasium parsers unit tests","description":"## Summary\n\nThe unit tests of the Gemnasium [parsers](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/-/blob/v2.29.5/scanner/parser) contain a lot of duplicated code, and we should DRY them up for readability, ease of maintenance, and consistency.\n\nIn particular, the unit tests of the `Parse` Go function always do the following:\n- read/decode expected packages from file, get packages from parser, sort packages, compare\n- read/decode expected dependencies from file, get dependencies from parser, sort dependencies, compare\n\nThese steps should be shared in a test package shared used by all unit tests.\n\nAlso, the test¬†package should take care of creating the files containing the expected data when it's missing. This is implemented in https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/-/blob/v2.29.5/scanner/parser/pipdeptree/pipdeptree_test.go#L16 but has not been ported to the other parsers.\n\n## Improvements\n\nconsistency, readability, ease of maintenance\n\n## Risks\n\nNone\n\n## Involved components\n\nall parsers of the [gemnasium](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium) project\n\n## Optional: Intended side effects\n\nNone\n\n## Optional: Missing test coverage\n\nNone\n\n## Implementation plan\n\n- [x] create test package based on https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/-/blob/v2.29.5/scanner/parser/pipdeptree/pipdeptree_test.go#L16\n- [x] update unit tests of all parser to use that test package\n- [x] update [README](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium/#dependency-file-parsers) to encourage developers to use the test package when implementing dependency fie parsers","state":"closed","created_at":"2021-05-06T08:49:54.806Z","updated_at":"2021-10-28T13:57:01.222Z","closed_at":"2021-08-12T12:58:37.226Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","missed-deliverable","missed:14.1","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330092","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330092","notes":"https://gitlab.com/api/v4/projects/278964/issues/330092/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330092/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330092","relative":"#330092","full":"gitlab-org/gitlab#330092"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5823,"epic":{"id":255201,"iid":5823,"title":"Composition Analysis Testing improvements","url":"/groups/gitlab-org/-/epics/5823","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":86572788,"iid":330090,"project_id":278964,"title":"Container repository cleanups can get stuck in the ongoing state","description":"From https://gitlab.com/gitlab-org/gitlab/-/issues/328860#note_568539611:\n\n\u003e \u003e Do you have an idea on how it ended up in this state? We'll need to account for those jobs getting killed for whatever reason, wouldn't we?\n\u003e \n\u003e @reprazent I'm currently investigating that part.\n\u003e \n\u003e The current code flow is:\n\u003e 1. worker select a container image and update the cleanup status to `ongoing`. [Here](https://gitlab.com/gitlab-org/gitlab/-/blob/e228b0bd05961cc6a1c5b598f1386379fbd495f9/app/workers/container_expiration_policies/cleanup_container_repository_worker.rb#L167)\n\u003e 1. the selected container image is sent to related service for cleanup. [Here](https://gitlab.com/gitlab-org/gitlab/-/blob/e228b0bd05961cc6a1c5b598f1386379fbd495f9/app/workers/container_expiration_policies/cleanup_container_repository_worker.rb#L121)\n\u003e 1. the service for cleanup has a `rescue` to put the container image cleanup in the `unfinished` state. [Here](https://gitlab.com/gitlab-org/gitlab/-/blob/e228b0bd05961cc6a1c5b598f1386379fbd495f9/app/services/container_expiration_policies/cleanup_service.rb#L22)\n\u003e \n\u003e I think that they are only two possible explanations:\n\u003e 1. (3.) did not rescue the error properly. This sounds a bit far fetched as we are rescuing `StandardError`. From my search on [Sentry](https://sentry.gitlab.net/gitlab/gitlabcom/?query=is%3Aunresolved+CleanupContainerRepositoryWorker), I don't see any error that is not a `StandardError` one, so I'm not convinced that we are in this case. In addition, I don't see any `fail` message in [Kibana](https://log.gprd.gitlab.net/goto/9fa533907df79b435368a9f073434668) for the last day that the cleanup ran.\n\u003e     * We could `rescue` everything here. (3.) is a `rescue` and `raise` block so we wouldn't silence all the errors but simply detect them.\n\u003e 1. Something bad happened between (1.) and (3.). I don't see anything outstanding in Sentry or Kibana but we could imagine having situations where the worker crashed or was killed.\n\u003e     * We could move the `begin` + `rescue` block to the worker so that it is around (1.) - (3.)\n\u003e     * I'm more confident in this solution for solving the issue.\n\nand here is @reprazent's answer:\n\n\u003e @10io Do we have a jid for the last time this container-repository was picked up? We could see if we find the `start` and `done`/`fail` messages. My suspicion is that the job started, but never got the chance to finish cleanly. We do stop Sidekiq sometimes: during a deploy, or when Sidekiq exceeds a certain memory limit. We don't exactly do a super graceful shutdown of sidekiq (https://gitlab.com/gitlab-com/gl-infra/delivery/-/issues/603), and jobs don't always finish so a long running job like this one could suffer from a hard shutdown.\n\u003e \n\u003e When Sidekiq gets hard-killed, all jobs will receive [`Sidekiq::Shutdown`](https://github.com/mperham/sidekiq/blob/3330df0ee37cfd3e0cd3ef01e3e66b584b99d488/lib/sidekiq/processor.rb#L57), which is an `Interrupt` not a `StandardError`. So the rescue block will not get executed. We [should not try to rescue this](https://github.com/mperham/sidekiq/blob/3330df0ee37cfd3e0cd3ef01e3e66b584b99d488/lib/sidekiq.rb#L259).\n\u003e \n\u003e Instead, we could probably cleanup after ourselves in a next run, perhaps in  the cron?\n\u003e \n\u003e ```ruby\n\u003e ContainerRepository.cleanup_ongoing.where(expiration_policy_started_at \u003c ?, 30.minutes.ago).update_all(expiration_policy_cleanup_status: :cleanup_unscheduled)\n\u003e ```\n\u003e \n\u003e I think this will be okay to do in a single update statement, since the number of container repositories in this state would be at most the configured capacity.  Could you create a separate issue for this?\n\u003e \n\u003e We need to work on a nicer shutdown for sidekiq jobs, but the work should also be resilient to this, who knows what can happen in the :cloud: :trolleybus:.\n\nIn simple terms: select all the cleanups that started more than `30.minutes` ago and reset their status.","state":"closed","created_at":"2021-05-06T08:37:33.400Z","updated_at":"2021-06-04T08:07:17.528Z","closed_at":"2021-06-04T08:07:16.758Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","[deprecated] Accepting merge requests","backend","devops::package","group::package registry","ruby","section::ops"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330090","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330090","notes":"https://gitlab.com/api/v4/projects/278964/issues/330090/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330090/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/330322"},"references":{"short":"#330090","relative":"#330090","full":"gitlab-org/gitlab#330090"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2270,"epic":{"id":15539,"iid":2270,"title":"Cleanup policy for tags","url":"/groups/gitlab-org/-/epics/2270","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86569899,"iid":330089,"project_id":278964,"title":"Disallow null for recent visit tables columns","description":"- for `board_group_recent_visits` we allow `null` values for `user_id`, `group_id` and `board_id`.\n- for `board_project_recent_visits` we allow `null` values for `user_id`, `project_id` and `board_id`.\n\nThese values should always be present. Mentioned in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60720#note_568268307","state":"closed","created_at":"2021-05-06T07:59:37.356Z","updated_at":"2022-10-21T12:00:54.079Z","closed_at":"2022-10-19T10:30:23.609Z","closed_by":{"id":508743,"username":"jarka","name":"Jarka Ko≈°anov√°","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"labels":["Category:Team Planning","Stretch","Track Health Status","backend","boards","database","devops::plan","group::product planning","maintenance::refactor","missed:15.4","missed:15.5","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":508743,"username":"jarka","name":"Jarka Ko≈°anov√°","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"}],"author":{"id":508743,"username":"jarka","name":"Jarka Ko≈°anov√°","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"type":"ISSUE","assignee":{"id":508743,"username":"jarka","name":"Jarka Ko≈°anov√°","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330089","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330089","notes":"https://gitlab.com/api/v4/projects/278964/issues/330089/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330089/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330089","relative":"#330089","full":"gitlab-org/gitlab#330089"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86562833,"iid":330074,"project_id":278964,"title":"[BE] VSA - Change sort attribute to name","description":"In https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60793 we have added sorting to VSA stage tables.\n\nWe discovered a potential usability issue: Clicking on the `Issue` column will not sort by name. Instead, it will sort by `end_event` (see [this discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60793#note_567551004) for details).\n\nLet's change the sort attribute to the name of the related item (could be an issue, a MR, etc. depending on the active stage).","state":"closed","created_at":"2021-05-06T05:34:02.494Z","updated_at":"2022-05-31T14:06:45.000Z","closed_at":"2022-05-31T14:06:44.969Z","closed_by":{"id":10879254,"username":"hsnir1","name":"Haim Snir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10879254/avatar.png","web_url":"https://gitlab.com/hsnir1"},"labels":["Category:Value Stream Management","GitLab Premium","Technical Writing","backend","devops::manage","documentation","group::optimize","section::dev","type::feature","workflow::scheduling"],"milestone":null,"assignees":[],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330074","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330074","notes":"https://gitlab.com/api/v4/projects/278964/issues/330074/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330074/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330074","relative":"#330074","full":"gitlab-org/gitlab#330074"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86561616,"iid":330069,"project_id":278964,"title":"Shared filtered search bar does not allow selecting multiple labels","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nThe shared filtered search component is not allowing the selection of multiple labels, we should be able to select\nmultiple labels if the `unique: false` property is set on the token.\n\n### Steps to reproduce\n\n1. Navigate to https://gitlab.com/gitlab-org/gitlab/-/analytics/code_reviews\n1. Add a label filter\n1. Attempt to add another one, the loading indicator continues to spin\n\n### Example Project\nWe can see this happening with the filter bars on code review analytics and VSA\n- https://gitlab.com/gitlab-org/gitlab/-/analytics/code_reviews\n- https://gitlab.com/groups/gitlab-org/-/analytics/value_stream_analytics\n- https://gitlab.com/gitlab-org/gitlab/-/analytics/merge_request_analytics\n\nThis seems to only affect filter bars using  the `~/vue_shared/components/filtered_search_bar/store/modules/filters` shared vuex module.\n\n### What is the current *bug* behavior?\n\nThe selected label seems to be added as a `search` parameter to the request for labels, since the label is already selected the result is no new labels are returned to be displayed\n\n### What is the expected *correct* behavior?\n\nWe should see all the available labels, except for the one currently selected.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-05-06T04:46:19.269Z","updated_at":"2021-07-14T20:49:16.680Z","closed_at":"2021-05-27T19:15:07.093Z","closed_by":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"labels":["Category:Value Stream Management","devops::manage","filter bar","frontend","group::optimize","priority::2","section::dev","severity::1","type::bug","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":37,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330069","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330069","notes":"https://gitlab.com/api/v4/projects/278964/issues/330069/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330069/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330069","relative":"#330069","full":"gitlab-org/gitlab#330069"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86555830,"iid":330061,"project_id":278964,"title":"Kubernetes 1.20 support for Protect features","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nTo support Kubernetes release 1.20, we need to test protect features and make sure that they work with this release. General Kubernetes 1.20 support for GitLab features is being tracked in https://gitlab.com/groups/gitlab-org/-/epics/6509. The following protect features will need to be tested:\n\n- Cluster Image Scanning\n- Container Network Security\n- Container Host Security\n\n\n## Relevant links\n\n- [Epic](https://gitlab.com/groups/gitlab-org/-/epics/6509)\n- [Supported versions](https://docs.gitlab.com/ee/user/project/clusters/#supported-cluster-versions)\n- [Kubernetes 1.20 release post](https://kubernetes.io/blog/2020/12/08/kubernetes-1-20-release-announcement/)\n- [Kubernetes 1.20 release notes](https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.20.md)\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\nCreate a Kubernetes 1.20.x cluster on GKE and run tests\n\n- [x] ~backend Run cluster image scanning integration tests\n- [x] ~backend Install Cilium and test network alerts\n- [x] ~backend Install Falco and test pod security policies\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-05-06T00:20:11.142Z","updated_at":"2022-02-25T15:02:49.822Z","closed_at":"2021-08-26T00:31:42.719Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["backend","candidate::14.3","devops::govern","group::security policies","section::sec","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330061","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330061","notes":"https://gitlab.com/api/v4/projects/278964/issues/330061/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330061/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330061","relative":"#330061","full":"gitlab-org/gitlab#330061"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6509,"epic":{"id":319357,"iid":6509,"title":"Add support for Kubernetes version 1.20","url":"/groups/gitlab-org/-/epics/6509","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86555561,"iid":330060,"project_id":278964,"title":"Document supported K8S versions for Protect features","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nOur [documentation](https://docs.gitlab.com/ee/user/clusters/applications.html#install-cilium-using-gitlab-cicd) does not explicitly indicate which versions of the K8S cluster we support for each supported vendor: AWS [EKS](https://aws.amazon.com/eks/), GCP [GKE](https://cloud.google.com/kubernetes-engine/).\n\nIn order to track the releases on these vendors, we need to determine and communicate which versions we support.\n\n## Relevant links\n\n- [GKE release channels](https://cloud.google.com/kubernetes-engine/docs/concepts/release-channels#channels)\n- [GKE schedule for release channels](https://cloud.google.com/kubernetes-engine/docs/release-schedule#schedule_for_release_channels)\n- [GKE current versions](https://cloud.google.com/kubernetes-engine/docs/release-notes#current_versions)\n- [GKE regular channel release notes](https://cloud.google.com/kubernetes-engine/docs/release-notes-regular)\n- [Amazon EKS platform versions](https://docs.aws.amazon.com/eks/latest/userguide/platform-versions.html)\n- [Amazon EKS Kubernetes versions](https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html)\n\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation: [Install Cilium using GitLab CI/CD\n](https://docs.gitlab.com/ee/user/clusters/applications.html#install-cilium-using-gitlab-cicd), [Getting started with Container Network Security](https://docs.gitlab.com/ee/user/project/clusters/protect/container_network_security/quick_start_guide.html)\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\n- [x] Rely on existing [supported cluster versions](https://docs.gitlab.com/ee/user/project/clusters/#supported-cluster-versions).\n- [ ] Document to users which versions we support on each vendor.\n- [x] Determine how ~\"group::container security\" can be notified of changes to the support (e.g. when 1.20 is added to the list of supported clusters, we need to know so we can add it to our automated tests (that don't exist yet)).\n  - ~\"group::configure\" will notify ~\"group::container security\" when they beginning planning to add support for a new cluster version. Issues will be created as-needed in order to perform testing.  \n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-05-06T00:11:11.617Z","updated_at":"2021-11-23T13:27:15.196Z","closed_at":"2021-10-05T14:45:18.594Z","closed_by":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"labels":["Deliverable","Technical Writing","backend","documentation","group::security policies","missed-deliverable","missed:14.2","missed:14.3","section::sec","workflow::in dev"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir√≥","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330060","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330060","notes":"https://gitlab.com/api/v4/projects/278964/issues/330060/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330060/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330060","relative":"#330060","full":"gitlab-org/gitlab#330060"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86553328,"iid":330057,"project_id":278964,"title":"Removing User From Group (or making them Guest in Ultimate) Does Not Update Highest Role","description":"### Summary\n\nRemoving a user from a group does not run the [`UpdateHighestRoleWorker`](https://gitlab.com/gitlab-org/gitlab/-/blob/6f0bab97f73a13317c8a616ecdadbcf4dfa19473/app/workers/update_highest_role_worker.rb).\n\nThis can result in inaccurate information in the `user_highest_roles` table if the deleted membership was the user's highest role.  For instance, if the user was a maintainer in only one project, and the user is removed from that project, then `user_highest_roles` will still have maintainer as the highest role for the user.\n\nOne ultimate effect of this is that it can create a discrepancy between the billable users as reported in the admin dashboard (`/admin`) vs in the user stats page (`/admin/dashboard/stats`).\n\nThis state will persist until another triggering event causes the user's highest role to be updated.  One such event is adding the user to another group.  Another would be blocking the user (changing the user's state).  Another would be changing a users's access level in a group of which the user is already a member.\n\nAlso see this thread:  https://gitlab.com/gitlab-org/gitlab/-/issues/292496#note_564115346\n\n### Steps to reproduce\n\nBefore you start, make the following changes to your gitlab code:\n```diff\ndiff --git a/app/models/concerns/update_highest_role.rb b/app/models/concerns/update_highest_role.rb\nindex 6432cc794a5..61751ec96b5 100644\n--- a/app/models/concerns/update_highest_role.rb\n+++ b/app/models/concerns/update_highest_role.rb\n@@ -3,8 +3,8 @@\n module UpdateHighestRole\n   extend ActiveSupport::Concern\n \n-  HIGHEST_ROLE_LEASE_TIMEOUT = 10.minutes.to_i\n-  HIGHEST_ROLE_JOB_DELAY = 10.minutes\n+  HIGHEST_ROLE_LEASE_TIMEOUT = 1.minutes.to_i\n+  HIGHEST_ROLE_JOB_DELAY = 1.minutes\n \n   included do\n     after_commit :update_highest_role\n@@ -19,7 +19,10 @@ module UpdateHighestRole\n   # The exlusive lease will not be released after completion to prevent multiple jobs\n   # being executed during the defined timeout.\n   def update_highest_role\n+    # These puts statements will appear in gdk tail rails-web\n+    puts \"Running update_highest_role...\"\n     return unless update_highest_role?\n+    puts \"Continuing...\"\n \n     run_after_commit_or_now do\n       lease_key = \"update_highest_role:#{update_highest_role_attribute}\"\ndiff --git a/app/workers/update_highest_role_worker.rb b/app/workers/update_highest_role_worker.rb\nindex b818e8177cc..f38d542b257 100644\n--- a/app/workers/update_highest_role_worker.rb\n+++ b/app/workers/update_highest_role_worker.rb\n@@ -14,6 +14,8 @@ class UpdateHighestRoleWorker\n   # rubocop: disable CodeReuse/ActiveRecord\n   def perform(user_id)\n     user = User.find_by(id: user_id)\n+    # This puts statement will appear in gdk tail rails-background-jobs\n+    puts \"Updating user role for #{user.first_name}...\"\n \n     return unless user.present?\n```\n\nThese changes will make it easier to replicate the issue.\n\n1. Restart GDK.\n1. Create a new user with no memberships.\n1. Start up a rails console session.  Find the test user and assign it to a variable.  Something like `user = User.where(first_name: \"Joe\").first` will work.\n1. Add the user to Group A as a Developer.  This can be done through the group memberships UI:\n![Screen_Shot_2021-05-05_at_7.20.13_PM](/uploads/452b1e1ec55716a555bad79ba10c2160/Screen_Shot_2021-05-05_at_7.20.13_PM.png)\n1. Observe in `gdk tail` that the update works.  You can also run `user.reload.highest_role` in the console to verify the highest role.\n1. Add the user to Group B as a Guest.  Observe in `gdk tail` that this also results in an update.  Wait for this to complete.  Verify the highest role in the console again:  `user.reload.highest_role`.\n1. Remove the user from Group A.  Observe that execution does not proceed past [the check in the `UpdateHighestRole` concern](https://gitlab.com/gitlab-org/gitlab/-/blob/d780b8baa6c7d4e0c2eefd6967c263d22967452c/app/models/concerns/update_highest_role.rb#L22).  Double check in the rails console: `user.reload.highest_role`.  Observe that the highest role remains `30`, indicating developer status.  This is the bug.  The user will continue to have a highest role status of developer until something else triggers an update.\n1. Add the user to Group A as a Guest.  Observe the update works.  Run `user.reload.highest_role` in the rails console after the update to verify that highest role has now been set to `10`.\n\n\n\n### What is the current *bug* behavior?\n\nThe user highest role will remain incorrect until another event triggers a highest role update.  One such event would be adding the user to another group.\n\n### What is the expected *correct* behavior?\n\nThe user's highest role should probably be updated whenever a user is removed from a group.\n\nWhen a `member` is deleted, `update_highest_role?` returns `false`, because `previous_changes` is an empty hash:  https://gitlab.com/gitlab-org/gitlab/-/blob/ad3db46ac38143c470381a2f553e363d85fe577e/app/models/member.rb#L552\n\n`Member#update_highest_role?` should probably return `true` in this case.","state":"closed","created_at":"2021-05-05T23:21:25.446Z","updated_at":"2021-08-18T21:22:53.831Z","closed_at":"2021-07-06T22:17:43.889Z","closed_by":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"labels":["[deprecated] Category:Utilization","[deprecated] üçé","backend","devops::fulfillment","group::utilization","priority::3","section::fulfillment","severity::4","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"}],"author":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"type":"ISSUE","assignee":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330057","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330057","notes":"https://gitlab.com/api/v4/projects/278964/issues/330057/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330057/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330057","relative":"#330057","full":"gitlab-org/gitlab#330057"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86552909,"iid":330055,"project_id":278964,"title":"BE: Seat Usage should be sortable","description":"## Summary\n\nAs a next iteration of the SaaS Billable Members List, it would be very helpful if the list was sortable. This would allow owners to quickly find members who have not been active lately.\n\n## Proposal\n\nSort the Seat Usage page by `Last activity` date (descending and ascending options), `Users` and `Email`. Note, this is related to the top level user list only and not the expanded data listed beneath each user.\n\nThis is likely to use the sort element in the filter bar like the Members list uses. Awaiting UX design for confirmation.\n\n![Screen_Shot_2021-05-20_at_4.07.13_p.m.](/uploads/bad2ba21d8885afcfa019814595213d7/Screen_Shot_2021-05-20_at_4.07.13_p.m..png)\n\n![Screen_Shot_2021-05-05_at_5.54.43_p.m.](/uploads/0eee609c0f17955a5536840ca45c9c02/Screen_Shot_2021-05-05_at_5.54.43_p.m..png)","state":"closed","created_at":"2021-05-05T22:59:52.796Z","updated_at":"2021-09-02T13:54:44.036Z","closed_at":"2021-06-28T08:44:18.189Z","closed_by":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"labels":["Deliverable","[deprecated] Category:Utilization","[deprecated] üçé","backend","devops::fulfillment","group::utilization","quad-planning::complete-no-action","section::fulfillment","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330055","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330055","notes":"https://gitlab.com/api/v4/projects/278964/issues/330055/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330055/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330055","relative":"#330055","full":"gitlab-org/gitlab#330055"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4547,"epic":{"id":121875,"iid":4547,"title":"GitLab.com Billable Members List","url":"/groups/gitlab-org/-/epics/4547","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":86549208,"iid":330049,"project_id":278964,"title":"[DevOps Adoption] Store segment target group in DB (FE)","description":"## Problem to solve\n\nUnder https://gitlab.com/gitlab-org/gitlab/-/issues/329521 we are solving a problem with DevOps Adoption behavior by storing the segment's target group. That requires a substantial change to the API, which requires a change to the ~frontend to match.\n\n## Proposal\n\nFor Group-level DevOps Adoption, modify the ~frontend to match the ~backend revisions implemented under https://gitlab.com/gitlab-org/gitlab/-/issues/329521.","state":"closed","created_at":"2021-05-05T20:39:35.708Z","updated_at":"2021-06-02T10:58:56.752Z","closed_at":"2021-06-02T10:58:56.688Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["devops::manage","frontend","group::optimize","priority::2","section::dev","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330049","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330049","notes":"https://gitlab.com/api/v4/projects/278964/issues/330049/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330049/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330049","relative":"#330049","full":"gitlab-org/gitlab#330049"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]