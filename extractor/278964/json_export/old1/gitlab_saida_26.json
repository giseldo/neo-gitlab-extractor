[{"id":106270227,"iid":358187,"project_id":278964,"title":"[MR Widget Eng] Test summary details modal","description":"## Overview\n\nThe current test summary MR widget allows for the user to click on a test case and view more details such as the trace. We need to add this functionality in the new test summary widget extension.\n\n### Example screenshot of existing functionality\n\n![Screen_Shot_2022-04-07_at_10.48.25_AM](/uploads/f372a3976059f772c628d250ab4d0fde/Screen_Shot_2022-04-07_at_10.48.25_AM.png)","state":"closed","created_at":"2022-04-07T17:46:56.315Z","updated_at":"2022-06-16T21:35:09.952Z","closed_at":"2022-06-16T21:35:09.937Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Code Testing and Coverage","devops::verify","frontend","group::pipeline insights","section::ops","type::feature","workflow::feature-flagged"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358187","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358187","notes":"https://gitlab.com/api/v4/projects/278964/issues/358187/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358187/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358187","relative":"#358187","full":"gitlab-org/gitlab#358187"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6548,"epic":{"id":324258,"iid":6548,"title":"[MR Widget Eng] Adapting the new framework to existing widgets","url":"/groups/gitlab-org/-/epics/6548","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106269337,"iid":358184,"project_id":278964,"title":"[MR Widget Eng] Test summary feature flag","description":"## Overview\n\nThe test summary widget is currently behind the `refactor_mr_widgets_extensions` feature flag that all of the other new widgets use. Since this test summary widget is going to take a little bit longer, we should add a specific feature flag for the test summary widget to allow for all of the already finished widgets to be turned on.","state":"closed","created_at":"2022-04-07T17:21:12.757Z","updated_at":"2022-04-21T15:07:40.952Z","closed_at":"2022-04-21T13:28:26.143Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Code Testing and Coverage","devops::verify","frontend","group::pipeline insights","section::ops","type::feature"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358184","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358184","notes":"https://gitlab.com/api/v4/projects/278964/issues/358184/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358184/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358184","relative":"#358184","full":"gitlab-org/gitlab#358184"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106268927,"iid":358183,"project_id":278964,"title":"Security training config: update to use license helper (frontend)","description":"In this issue, we will\n\n* remove the license GraphQL query\n* update it to use the helper introduced in this issue \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/358182.\n  * We will pass this value in HAML to Vue via the data-attribute\n\n## Notes\n\nFor reference, we can follow the `jira` implementation\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/357327#note_901804367\n\n\u003e here is an example of how we solved this with the jira-issues for vulnerabilities, which also shows a different UI for non-ultimate users:\n\u003e \n\u003e `app/assets/javascripts/integrations/edit/components/jira_issues_fields.vue`\n\u003e \n\u003e The data to determine if the feature is available is coming from the backend via the HAML template, I think this is doing the check:\n\u003e \n\u003e `https://gitlab.com/gitlab-org/gitlab/-/blob/7e79d9c0c7d9e6033793200dc18a270fc6f65efc/ee/app/models/ee/project.rb#L316`\n\n## Mandatory Testing Requirement\n\nMake sure to simulate the SaaS version of the product and conduct the following test when developing locally:\n\n1. `export GITLAB_SIMULATE_SAAS=1` \u003c- Simulate your development is GitLab.com, [info](https://docs.gitlab.com/ee/development/ee_features.html#act-as-saas)\n1. `git checkout 358182-send-security-training-enabled-using-backend`\n1. `gdk restart`\n1. Admin \u003e Settings \u003e General \u003e \"Account and limit\" \u003e enable \"Allow use of licensed EE features\"\n\nNow load the page \u003e http://gdk.test:3000/sec-group/security-reports-ex/-/security/configuration?tab=vulnerability-management and make sure this does NOT happen.\n\n![license-check-error](https://gitlab.com/sming-gitlab/my-gitlab/uploads/0593f750b17f2b6cca480c5f389dcc3c/license-check-error.mov)","state":"closed","created_at":"2022-04-07T17:09:14.037Z","updated_at":"2022-06-20T03:43:26.050Z","closed_at":"2022-06-16T02:39:59.706Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["devops::secure","frontend","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358183","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358183","notes":"https://gitlab.com/api/v4/projects/278964/issues/358183/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358183/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358183","relative":"#358183","full":"gitlab-org/gitlab#358183"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106268911,"iid":358182,"project_id":278964,"title":"Security training config: create license helper (backend)","description":"The Security Configuration page will display \"Available with Ultimate\" for the security training feature that is only available once you upgrade.\n\n![image](/uploads/fcd44219203c4002f36d84e4f9213b50/image.png)\n\nIn the current implementation, the ~frontend is using GraphQL query to check the license of the current user([implementation plan](https://gitlab.com/gitlab-org/gitlab/-/issues/357327#note_904804272)). However, the ~backend should be the source of truth -- and if we ever move this to FOSS, it won't require additional ~frontend changes. Keeping things in a single source would really benefit maintainability :thumbsup: It is also what is used to implement the Jira issues, please see `Notes` section for details.\n\nHere's the related ~frontend issue https://gitlab.com/gitlab-org/gitlab/-/issues/358183 to accommodate the changes from this issue :grinning: \n\n## Notes\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/357327#note_901804367\n\n\u003e here is an example of how we solved this with the jira-issues for vulnerabilities, which also shows a different UI for non-ultimate users:\n\u003e \n\u003e [jira_issues_fields.vue](https://gitlab.com/gitlab-org/gitlab/blob/d327ce47aba094e462b141f7ac17051121b31515/app/assets/javascripts/integrations/edit/components/jira_issues_fields.vue)\n\u003e \n\u003e The data to determine if the feature is available is coming from the backend via the HAML template, I think this is doing the check:\n\u003e \n\u003e `https://gitlab.com/gitlab-org/gitlab/-/blob/7e79d9c0c7d9e6033793200dc18a270fc6f65efc/ee/app/models/ee/project.rb#L316`\n\u003e\n```ruby\ndef jira_issues_integration_available?\n  feature_available?(:jira_issues_integration)\nend\n```\n\u003e \n\u003e The ~backend should be the source of truth - so if we ever move this to FOSS it would not need any frontend changes.","state":"closed","created_at":"2022-04-07T17:08:36.817Z","updated_at":"2022-06-20T03:43:26.097Z","closed_at":"2022-06-16T02:39:23.985Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["backend","devops::secure","feature::enhancement","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358182","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358182","notes":"https://gitlab.com/api/v4/projects/278964/issues/358182/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358182/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358182","relative":"#358182","full":"gitlab-org/gitlab#358182"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106268895,"iid":358181,"project_id":278964,"title":"Security training config: display unavailable text for non-ultimate","description":"ðŸš¨ Important: Please see this implementation plan for the details \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/357327#note_904804272\n\n![2022-04-07_at_10.13_AM](/uploads/3d4adcae038613603c522c3d46c9fa4e/2022-04-07_at_10.13_AM.png)","state":"closed","created_at":"2022-04-07T17:07:48.522Z","updated_at":"2022-06-27T03:41:07.855Z","closed_at":"2022-06-23T12:41:31.579Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["devops::secure","feature::addition","frontend","group::threat insights","missed:15.1","quad-planning::complete-no-action","section::sec","type::feature","workflow::in review"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358181","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358181","notes":"https://gitlab.com/api/v4/projects/278964/issues/358181/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358181/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358181","relative":"#358181","full":"gitlab-org/gitlab#358181"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106268855,"iid":358180,"project_id":278964,"title":"Security training config: disable card state for non-ultimate","description":"ðŸš¨ Important: Please see this implementation plan for the details \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/357327#note_904804272\n\n![image](/uploads/2a808dc0a9a7aa7bb232fc2c24f7c6f3/image.png)\n\n* toggles=disabled\n* background = `#fafafa`\n* additional text `Available with Ultimate` added inline + right justified with provider name","state":"closed","created_at":"2022-04-07T17:07:22.166Z","updated_at":"2022-06-27T03:41:07.896Z","closed_at":"2022-06-23T12:41:09.324Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["devops::secure","feature::addition","frontend","group::threat insights","missed:15.1","section::sec","type::feature","workflow::in review"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358180","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358180","notes":"https://gitlab.com/api/v4/projects/278964/issues/358180/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358180/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358180","relative":"#358180","full":"gitlab-org/gitlab#358180"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106266583,"iid":358175,"project_id":278964,"title":"SAML login fails for accounts with an LDAP identity when LDAP provider is removed","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\nA customer (:ticket: [ZD #279850](https://gitlab.zendesk.com/agent/tickets/279850), internal) has previously used LDAP, so their user accounts have ldap identities connected to them. They are no longer using LDAP (`gitlab_rails['ldap_enabled'] = false`) and rely on SAML for login. This worked fine before upgrading to 14.9.2, after which users no longer could login, getting a HTTP 500 error from GitLab after being redirected from the ADFS provider.\n\nAfter removing the unused LDAP idenity from a user account, this user was then able to successfully login again.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n1. Use LDAP, have GitLab user accounts associated with LDAP identities\n2. Disable LDAP integration\n3. Use SAML for login, experience no issues\n4. Upgrade to GitLab 14.9.2\n5. Attempt to login using SAML\n\n### What is the current *bug* behavior?\n\nUser gets HTTP 500 from GitLab after the redirect back to GitLab.\n\n### What is the expected *correct* behavior?\n\nUser is successfully logged in.\n\n### Relevant logs and/or screenshots\n\nHere is the entire stack trace:\n\n```\nCompleted 500 Internal Server Error in 176ms (ActiveRecord: 80.3ms | Elasticsearch: 0.0ms | Allocations: 36426)\n\nGitlab::Auth::Ldap::Config::InvalidProvider (Unknown provider (ldapmain). Available providers: []):\n\nlib/gitlab/auth/ldap/config.rb:62:in `invalid_provider'\nlib/gitlab/auth/ldap/config.rb:73:in `initialize'\nee/app/models/ee/user.rb:447:in `new'\nee/app/models/ee/user.rb:447:in `block_auto_created_users?'\nee/app/models/ee/user.rb:418:in `blocked_auto_created_oauth_ldap_user?'\nee/app/models/ee/user.rb:412:in `activate_based_on_user_cap?'\nee/lib/ee/gitlab/auth/o_auth/user.rb:26:in `activate_user_based_on_user_cap?'\nee/lib/ee/gitlab/auth/o_auth/user.rb:11:in `activate_user_if_user_cap_not_reached'\nlib/gitlab/auth/o_auth/user.rb:58:in `save'\nlib/gitlab/auth/o_auth/user.rb:86:in `find_and_update!'\napp/controllers/omniauth_callbacks_controller.rb:162:in `sign_in_user_flow'\napp/controllers/omniauth_callbacks_controller.rb:130:in `omniauth_flow'\napp/controllers/omniauth_callbacks_controller.rb:49:in `saml'\nee/lib/gitlab/ip_address_state.rb:10:in `with'\nee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'\napp/controllers/application_controller.rb:499:in `set_current_admin'\nlib/gitlab/session.rb:11:in `with_session'\napp/controllers/application_controller.rb:490:in `set_session_storage'\nlib/gitlab/i18n.rb:105:in `with_locale'\nlib/gitlab/i18n.rb:111:in `with_user_locale'\napp/controllers/application_controller.rb:484:in `set_locale'\napp/controllers/application_controller.rb:478:in `set_current_context'\nlib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'\nlib/gitlab/middleware/rails_queue_duration.rb:33:in `call'\nlib/gitlab/middleware/memory_report.rb:13:in `call'\nlib/gitlab/middleware/speedscope.rb:13:in `call'\nlib/gitlab/request_profiler/middleware.rb:17:in `call'\nlib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'\nlib/gitlab/metrics/rack_middleware.rb:16:in `block in call'\nlib/gitlab/metrics/web_transaction.rb:46:in `run'\nlib/gitlab/metrics/rack_middleware.rb:16:in `call'\nlib/gitlab/jira/middleware.rb:19:in `call'\nlib/gitlab/middleware/go.rb:20:in `call'\nlib/gitlab/etag_caching/middleware.rb:21:in `call'\nlib/gitlab/middleware/query_analyzer.rb:11:in `block in call'\nlib/gitlab/database/query_analyzer.rb:46:in `within'\nlib/gitlab/middleware/query_analyzer.rb:11:in `call'\nlib/gitlab/middleware/multipart.rb:173:in `call'\nlib/gitlab/middleware/read_only/controller.rb:50:in `call'\nlib/gitlab/middleware/read_only.rb:18:in `call'\nlib/gitlab/middleware/same_site_cookies.rb:27:in `call'\nlib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'\nlib/gitlab/middleware/basic_health_check.rb:25:in `call'\nlib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'\nlib/gitlab/middleware/request_context.rb:21:in `call'\nlib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'\nconfig/initializers/fix_local_cache_middleware.rb:11:in `call'\nlib/gitlab/middleware/compressed_json.rb:26:in `call'\nlib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'\nlib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'\nlib/gitlab/metrics/requests_rack_middleware.rb:77:in `call'\nlib/gitlab/middleware/release_env.rb:13:in `call'\n```\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\nGitLab 14.9.2 Omnibus install\n\n#### Results of GitLab application Check\n\nNot performed\n\n### Possible fixes\n\nThe problem appears to have been introduced in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/81272+\n\n`blocked_auto_created_oauth_ldap_user` from the stack trace above was introduced in that MR, which was merged for 14.9, see also [Slack discussion in #g_utilization](https://gitlab.slack.com/archives/C01E07BC4FQ/p1649255554021039):\n\n\u003e it looks like youâ€™re correct and it wouldnâ€™t have errored before that MR, because it would have gone through `::Gitlab.config.omniauth.block_auto_created_users` (boolean)\n\u003e now it needs a matching provider (`ldapmain`) otherwise itâ€™ll error :thinking_face:\n\n\u003e I guess the desired behaviour is that if there are no `Gitlab::Auth::Ldap::Config.servers` defined then it should return false in block_auto_created_users? ? :thinking_face:\n\n---\n\nAs mentioned above, a workaround is to remove the no longer needed but still associated identities from the user data:\n\n```\n# Rails console snippet\nuserid = User.find_by(username: \"mytestuser\").id\nid = Identity.where(provider: \"ldapmain\").where(user_id: userid)\nid.destroy_all\n```\n\nThis snippet should work to bulk delete all these identities for all users:\n\n```\n# Rails console snippet\nldap_identities = Identity.where(provider: \"ldapmain\")\nldap_identities.each do | identity |\n    puts 'Destroying identity: ' + identity.attributes.to_s\n    identity.destroy!\nrescue =\u003e e\n    puts 'This error was generated when destroying identity:\\n ' + identity.attributes.to_s + ':\\n' + e.to_s\nend\n```\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-04-07T16:26:54.933Z","updated_at":"2022-11-11T14:01:47.333Z","closed_at":"2022-08-01T12:44:15.226Z","closed_by":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"labels":["SUS::Impacting","UX","[deprecated] Category:Utilization","backend","customer","devops::fulfillment","group::utilization","missed:15.1","missed:15.2","priority::2","regression","regression:14.9","section::fulfillment","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"}],"author":{"id":10339034,"username":"manuelgrabowski","name":"Manuel Grabowski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10339034/avatar.png","web_url":"https://gitlab.com/manuelgrabowski"},"type":"ISSUE","assignee":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"user_notes_count":12,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":"2022-06-06","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358175","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358175","notes":"https://gitlab.com/api/v4/projects/278964/issues/358175/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358175/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358175","relative":"#358175","full":"gitlab-org/gitlab#358175"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106265150,"iid":358172,"project_id":278964,"title":"[SPIKE] MR Widget Extension default telemetry","description":"As part of the MR Widgets we should have baseline telemetry data for all widgets so that we can more properly understand how these widgets are used and have a consistent way to measure usage across all of the widgets.\n\n## Items to Track\n\nTracking should be on a per widget basis\n\n1. Number of users who are exposed to each widget\n2. Number of users who expand each widget\n3. Number of users who click `full report`\n\nOn something like this example https://gitlab.com/gitlab-org/frontend/playground/gitlab-mr-widgets-demo/-/merge_requests/1 - If one user were to visit that page we'd have:\n\n1. One user for:\n   1. Browser performance\n   2. Load Performance\n   3. Status Checks\n\nIf the user clicked expand, we'd get an additional count on expand.\n\n### Additional Details\n\nIn order to ensure we get both self-managed and SaaS details we should implement this tracking with Redis_HLL counters.\n\nWe shouldn't namespace these to a group (or include them in Code Review MR Aggregates) - we could do something like:\n\n - `i_merge_request_widget_WIDGET_NAME_view` - unique users who view widget\n - `i_merge_request_widget_WIDGET_NAME_count_view` - count of total number of views\n - `i_merge_request_widget_WIDGET_NAME_expand` - unique users who expand widget\n - `i_merge_request_widget_WIDGET_NAME_count_expand` - count of total number of expands\n - `i_merge_request_widget_WIDGET_NAME_click_full_report` - unique users who click full report\n - `i_merge_request_widget_WIDGET_NAME_count_click_full_report` - count of total number of click full report\n - `i_merge_request_widget_WIDGET_NAME_expand_type` - see below\n - `i_merge_request_widget_WIDGET_NAME_count_expand_type` - see below\n\n### `expand_type` metrics\n\nFor these metrics we should try to count both the unique users and the number of times widgets are expanded based on the `status` of the report. This means we would know, for example, how many users expand a widget that has a `failed` status.\n\nThe level one `status` are: https://design.gitlab.com/regions/merge-request-reports#level-1-1","state":"closed","created_at":"2022-04-07T15:57:56.375Z","updated_at":"2022-07-07T20:33:59.673Z","closed_at":"2022-05-10T22:28:21.304Z","closed_by":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"labels":["Deliverable","Merge Request Report Widgets","WorkingGroup::MergeRequestReportWidgets","auto updated","devops::create","frontend","group::code review","section::dev","spike","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"user_notes_count":17,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358172","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358172","notes":"https://gitlab.com/api/v4/projects/278964/issues/358172/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358172/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358172","relative":"#358172","full":"gitlab-org/gitlab#358172"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6644,"epic":{"id":337727,"iid":6644,"title":"Merge Request Report Widgets Working Group","url":"/groups/gitlab-org/-/epics/6644","group_id":9970,"human_readable_end_date":"Jan 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106264137,"iid":358168,"project_id":278964,"title":"Update API settings description to say that schema is not fixed","description":"For guidance on the overall deprecations, removals and breaking changes workflow, please visit https://about.gitlab.com/handbook/product/gitlab-the-product/#breaking-changes-deprecations-and-removing-features\n\n\u003c!-- Use this template as a starting point for deprecations. --\u003e\n\n### Deprecation Summary\n\nIn [this discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83984#note_894789306) about removing an application setting from the API we came to the conclusion that the description for the [application settings API](https://docs.gitlab.com/ee/api/settings) is not clear. It says:\n\n\u003e These API calls allow you to read and modify GitLab instance application settings as they appear in `/admin/application_settings/general`.\n\nThis can be interpreted as, the schema is bound to the UI, and it can be changed without notice if the UI changes. However, it is not saying this explicitly.\n\nWe want to change the description to clearly indicate that the schema for this endpoint is not fixed and can be changed at any time. This needs to be considered to be a ~\"breaking change\" so it needs to be announced two milestones ahead and can only be done in a major release.\n\n\u003c!--\nThis should contain a brief description of the feature or functionality that is deprecated. The description should clearly state the potential impact of the deprecation to end users.\n\nIt is recommended that you link to the documentation.\n\nThe description of the deprecation should state what actions the user should take to rectify the behavior. If the deprecation is scheduled for an upcoming release, the content should remain in the deprecations documentation page until it has been completed. For example, if a deprecation is announced in 14.9 and scheduled to be completed in 15.0, the same content would be included in the documentation for 14.9, 14.10, and 15.0.\n--\u003e\n\n### Breaking Change\n\nPlease consider the API schema described in https://docs.gitlab.com/ee/api/settings as flexible. Fields and parameters can be added or removed without notice.\n\n### Affected Topology\n\nAll API users\n\n### Affected Tier\n\n* Free\n* Premium\n* Ultimate\n\n### Checklists\n\n**Labels**\n\n- [x] This issue is labeled ~deprecation, and with the relevant `~devops::`, `~group::`, and `~Category:` labels.\n- [x] This issue is labeled  ~\"breaking change\" if the removal of the deprecated item will be a [breaking change](https://about.gitlab.com/handbook/product/gitlab-the-product/#examples-of-breaking-changes).\n\n**Timeline**\n\nPlease add links to the relevant merge requests.\n\n- As soon as possible, but no later than the third milestone preceding the major release (for example, given the following release schedule: `15.8, 15.9, 15.10, 16.0` â€“ `15.8` is the third milestone preceding the major release):\n    - [x] A [deprecation entry](https://about.gitlab.com/handbook/marketing/blog/release-posts/#creating-a-deprecation-entry) has been created so the deprecation will appear in release posts and on the [general deprecation page](https://docs.gitlab.com/ee/update/deprecations).\n      - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/108010+\n    - [ ] Documentation has been updated to add a note about the [end-of-life](https://docs.gitlab.com/ee/development/documentation/styleguide/#end-of-life-for-features-or-products) and to mark the feature as [deprecated](https://docs.gitlab.com/ee/development/documentation/styleguide/#deprecated-features).\n- [ ] On or before the major milestone: A [removal entry](https://about.gitlab.com/handbook/marketing/blog/release-posts/#removals) has been created so the removal will appear on the [removals by milestones](https://docs.gitlab.com/ee/update/removals) page and be announced in the release post.\n- On the major milestone:\n    - [ ] The deprecated item has been removed.\n    - [ ] If the removal of the deprecated item is a [breaking change](https://about.gitlab.com/handbook/product/gitlab-the-product/#examples-of-breaking-changes), the merge request is labeled ~\"breaking change\".\n\n**Mentions**\n\n- [ ] Your stage's stable counterparts have been `@mentioned`  on this issue. For example, Customer Support, Customer Success (Technical Account Manager), Product Marketing Manager.\n  - To see who the stable counterparts are for a product team visit [product categories](https://about.gitlab.com/handbook/product/categories/)\n       - If there is no stable counterpart listed for Sales/CS please mention `@timtams`\n       - If there is no stable counterpart listed for Support please mention `@gitlab-com/support/managers`\n       - If there is no stable counterpart listed for Marketing please mention `@cfoster3`\n- [ ] Your GPM has been `@mentioned` so that they are aware of planned deprecations. The goal is to have reviews happen at least two releases before the final removal of the feature or introduction of a breaking change.\n\n### Deprecation Milestone\n\n\u003c!-- In which milestone will this deprecation be announced ? --\u003e\n\n### Planned Removal Milestone\n\n\u003c!-- In which milestone will the feature or functionality be removed and announced? --\u003e\n\n### Links\n\n\u003c!--\nAdd links to any relevant documentation or code that will provide additional details or clarity regarding the planned change.\n\nThis issue is the main SSOT for the deprecations and removals process. Be sure to link all\nissues and MRs related to this deprecation/removal to this issue. This can include removal\nissues that were created ahead of time, and the MRs doing the actual deprecation/removal work.\n--\u003e\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\n\u003c!-- Populate the Section, Group, and Category --\u003e\n\u003c!-- Choose the Pricing Tier(s) --\u003e\n\u003c!-- Identifies that this Issue is related to deprecating a feature --\u003e\n\u003c!-- Add the ~\"breaking change\" label to this issue if necessary --\u003e","state":"closed","created_at":"2022-04-07T15:37:04.896Z","updated_at":"2023-01-11T20:13:27.302Z","closed_at":"2023-01-11T20:13:27.025Z","closed_by":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"labels":["Category:API","Category:Integrations","Deliverable","GitLab Free","GitLab Premium","GitLab Ultimate","[deprecated] Accepting merge requests","api","auto updated","backend","breaking change","deprecation","devops::manage","group::integrations","section::dev","type::maintenance","won't do","workflow::in review"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":6115756,"username":"joseph","name":"Joseph Wambua","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97a2e7dc3273d27e993f35de226a0ed6?s=80\u0026d=identicon","web_url":"https://gitlab.com/joseph"}],"author":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"type":"ISSUE","assignee":{"id":6115756,"username":"joseph","name":"Joseph Wambua","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97a2e7dc3273d27e993f35de226a0ed6?s=80\u0026d=identicon","web_url":"https://gitlab.com/joseph"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358168","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358168","notes":"https://gitlab.com/api/v4/projects/278964/issues/358168/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358168/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358168","relative":"#358168","full":"gitlab-org/gitlab#358168"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106262218,"iid":358166,"project_id":278964,"title":"Move `ensure_batched_background_migration_is_finished` to the correct helper","description":"Move `ensure_batched_background_migration_is_finished` to its dedicated module:\n\n* `Gitlab::Database::Migrations::BatchedBackgroundMigrationHelpers`","state":"closed","created_at":"2022-04-07T15:03:23.071Z","updated_at":"2022-10-30T16:03:34.861Z","closed_at":"2022-10-24T13:30:12.131Z","closed_by":{"id":480097,"username":"alexives","name":"Alex Ives","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480097/avatar.png","web_url":"https://gitlab.com/alexives"},"labels":["Category:Database","[deprecated] Accepting merge requests","auto updated","devops::data_stores","group::database","section::enablement","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[],"author":{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo FrazÃ£o","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358166","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358166","notes":"https://gitlab.com/api/v4/projects/278964/issues/358166/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358166/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358166","relative":"#358166","full":"gitlab-org/gitlab#358166"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7454,"epic":{"id":428836,"iid":7454,"title":"Batched Background Migrations: improve developer experience","url":"/groups/gitlab-org/-/epics/7454","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":106261767,"iid":358164,"project_id":278964,"title":"Use new concern to reset secret fields in all integrations","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nApply the `ResetSecretFields` concern from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/81813 in all integrations that need it:\n\n- All integrations which currently have a custom `reset_password` method\n- Any other integrations which have \"secret\" fields and \"exposing\" fields (usually URLs)\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\nFor each integration we need to:\n\n- Convert the integration to use the field definition DSL (tracked in https://gitlab.com/groups/gitlab-org/-/epics/7652)\n- Add `exposes_secrets: true` to relevant fields.\n- Include the shared examples from `spec/support/shared_examples/models/integrations/reset_secret_fields_shared_examples.rb` in the specs.","state":"closed","created_at":"2022-04-07T14:54:44.403Z","updated_at":"2022-11-22T18:46:25.286Z","closed_at":"2022-10-21T12:16:29.032Z","closed_by":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"labels":["Category:Integrations","Deliverable","backend","devops::manage","group::integrations","maintenance::refactor","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358164","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358164","notes":"https://gitlab.com/api/v4/projects/278964/issues/358164/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358164/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358164","relative":"#358164","full":"gitlab-org/gitlab#358164"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106261016,"iid":358160,"project_id":278964,"title":"ReDoS in net/http affects webhooks: Sidekiq job stuck at 100% CPU for a year","description":"**[HackerOne report #1531958](https://hackerone.com/reports/1531958)** by `afewgoats` on 2022-04-06, assigned to `GitLab Team`:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nA Gitlab webhook may be pointed at a malicious webhook receiver.  \nThe webhook receiver can respond with a specially crafted long header.  \nGitlab processes the header with Ruby's net/http where there is a regular expression operation with quadratic complexity (ReDoS).  \nThis causes the `web_hook` Sidekiq job to get stuck at 100% CPU utilisation until the regular expression processing is complete (weeks later).  \nThe long headers are also kept in memory and the connection can be kept open.\n\n######  Comparison to 1252116\n\nIn report #1252116, the impact was that the network connection was kept open indefinitely, potentially causing connection pool and memory exhaustion. This new report is instead about CPU exhaustion for a more serious and more powerful DoS. It also bypasses the timeout added to fix #1252116 (https://gitlab.com/gitlab-org/gitlab/-/commit/a8807ee52d0b22b68beb31f0cad6ad5b77b4caf6) (deployed in 14.9.2) as the timeout only gets hit once the regular expression has finished processing (timeout is checked between header lines).\n\n######  The root cause\n\nA Regular Expression Denial of Service (ReDoS) vulnerability in Ruby's net/http affects Gitlab webhooks.\n\nThe bug is in [net/http/response.rb#57](https://github.com/ruby/net-http/blob/7b852b1feb7c1c0bc3019687d6ee5c385ce26eb9/lib/net/http/response.rb#L57) when reading headers line by line:\n\n```rb  \nline = sock.readuntil(\"\\n\", true).sub(/\\s+\\z/, '')  \n```\n\nThe `sub` regex is the issue. While it looks safe and linear, the `sub` operation will actually have quadratic complexity as there is no starting anchor.\n\nA header line which contains many consecutive spaces but *does not end in a space*, such as\n\n```rb  \n( \"a\" + \" \" * 950000 + \"b\" ).sub(/\\s+\\z/, '')  \n```\n\nwill exhibit extreme backtracking.\n\nThe time complexity is quadratic with respect to the number of spaces in the string (doubling the number of spaces quadruples the processing time). Approximate timings from my laptop (I measured until 10,000 and then extrapolated):\n\n```  \n|  Spaces  |  Seconds   |  Hours   |  Days  |  \n|----------|------------|----------|--------|  \n|     2000 |        1.8 |          |        |  \n|     4000 |        7.2 |          |        |  \n|     8000 |       28.6 |          |        |  \n|    10000 |       44.7 |          |        |  \n|   100000 |     4473.0 |     1.24 |   0.05 |  \n|  1000000 |   447300.0 |   124.25 |   5.18 |  \n| 10000000 | 44730000.0 | 12425.00 | 517.71 |  \n```\n\n#####  Steps to reproduce\n\n1. Run the attached malicious node server on port 3000: `node ./net-http-response.js`  \n2. Create a project and add webhooks for issue events to http://maliciousserver:3000/xyz.  \n3. (If you hosted the malicious server on your local network, you will need to \"Allow requests to the local network from web hooks and services\" in /admin/application_settings/network.)  \n4. Create an issue (or close or reopen one) to trigger the webhook. Gitlab will make a webhook request.  \n5. The malicious server will respond with `HTTP/1.1 200 OK` and then a header line with 9,500,000 consecutive spaces in the middle.  \n6. The `web_hook` Sidekiq job will be stuck processing at 100% CPU and will not complete for **over a year**. This can be seen in the Background Jobs panel (/admin/background_jobs) and `top`:\n\n![gitlab-high-cpu-header-regex-dos.png](https://h1.sec.gitlab.net/a/a803f0d6-0dbb-4454-b7be-ab901b463fc6/gitlab-high-cpu-header-regex-dos.png)\n\n![gitlab-header-regex-dos-sidekiq-background_jobs.png](https://h1.sec.gitlab.net/a/c5d05bc9-f813-4c27-b4b5-9407821ef281/gitlab-header-regex-dos-sidekiq-background_jobs.png)\n\nThe ReDoS triggers on web requests made to Gitlab which trigger an external request e.g. validating the URL before repository import. However, in these cases a `RequestTimeoutException` triggers after 60 seconds of 100% CPU.\n\nThe regex runs without a timeout on project webhooks. It's not just project webhooks though. Any use of `Gitlab::HTTP.post` such as system webhooks and integrations (e.g. Mattermost) are affected.\n\nTo demonstrate the net/http bug:\n\n```rb  \nrequire 'net/http'  \nuri = URI('http://maliciousserver:3000/x')  \nNet::HTTP.get(uri)  \n```\n\n#####  What is the current *bug* behavior?\n\nGitlab webhooks and system hooks get stuck for years in a CPU intensive regular expression operation when receiving a malicious header from an external service.\n\n#####  What is the expected *correct* behavior?\n\nProcessing a webhook response should never take longer than a year. More strictly, it should obey the webhook read timeout and also not run at 100% CPU.\n\nRuby should simply use `sock.readuntil(\"\\n\", true).rstrip` instead of a regex as I think it does the same thing. I can make a PR / issue for ruby unless you want to do it yourselves - let me know if and how you want me to proceed.\n\nPotentially drop responses with very long header lines.\n\n#####  Relevant logs and/or screenshots\n\nnet/http is called by httparty which is called by  \n```  \n\"lib/gitlab/http.rb:57:in `perform_request'\",\"app/services/web_hook_service.rb:125:in `make_request'\"  \n```\n\n#####  Output of checks\n\nThe bug happens locally. I did not test this on Gitlab.com because I'm sure it will affect it.\n\n######  Results of GitLab environment info\n\n(For installations with omnibus-gitlab package run and paste the output of:  \n`sudo gitlab-rake gitlab:env:info`)\n\nRunning in docker\n\n```  \nSystem information  \nSystem:  \nProxy:          no  \nCurrent User:   git  \nUsing RVM:      no  \nRuby Version:   2.7.5p203  \nGem Version:    3.1.4  \nBundler Version:2.2.33  \nRake Version:   13.0.6  \nRedis Version:  6.2.6  \nSidekiq Version:6.4.0  \nGo Version:     unknown\n\nGitLab information  \nVersion:        14.9.2-ee  \nRevision:       3034418fb31  \nDirectory:      /opt/gitlab/embedded/service/gitlab-rails  \nDB Adapter:     PostgreSQL  \nDB Version:     12.7  \nURL:            https://gitlab.example.com  \nHTTP Clone URL: https://gitlab.example.com/some-group/some-project.git  \nSSH Clone URL:  git@gitlab.example.com:some-group/some-project.git  \nElasticsearch:  no  \nGeo:            no  \nUsing LDAP:     no  \nUsing Omniauth: yes  \nOmniauth Providers: \n\nGitLab Shell  \nVersion:        13.24.0  \nRepository storage paths:  \n- default:      /var/opt/gitlab/git-data/repositories  \nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell  \n```\n\n####  Impact\n\nCPU exhaustion DoS.  \nMemory exhaustion DoS.  \nCPU intensive Sidekiq job runs forever (ok, not forever, but over a year) wasting energy and slowing down the system.  \nAlso possible to get connection pool exhaustion by sending data slowly and keeping the socket open until the regex completes (bypassing fix for #1252116) for multiple webhook connections.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [gitlab-high-cpu-header-regex-dos.png](https://h1.sec.gitlab.net/a/a803f0d6-0dbb-4454-b7be-ab901b463fc6/gitlab-high-cpu-header-regex-dos.png)\n* [gitlab-header-regex-dos-sidekiq-background_jobs.png](https://h1.sec.gitlab.net/a/c5d05bc9-f813-4c27-b4b5-9407821ef281/gitlab-header-regex-dos-sidekiq-background_jobs.png)\n* [net-http-response.js](https://h1.sec.gitlab.net/a/f0253922-20e1-4080-91f9-2ba71f81ae68/net-http-response.js)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-04-07T14:42:58.173Z","updated_at":"2022-11-22T18:46:25.997Z","closed_at":"2022-06-30T19:49:07.349Z","closed_by":{"id":5791466,"username":"ngeorge1","name":"Nikhil George","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5791466/avatar.png","web_url":"https://gitlab.com/ngeorge1"},"labels":["Deliverable","HackerOne","Weakness::CWE-400","[deprecated] Accepting merge requests","backend","bug::vulnerability","devops::manage","group::integrations","missed-SLO","priority::2","section::dev","security","severity::2","type::bug","workflow::awaiting security release"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-05-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358160","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358160","notes":"https://gitlab.com/api/v4/projects/278964/issues/358160/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358160/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358160","relative":"#358160","full":"gitlab-org/gitlab#358160"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":106259233,"iid":358156,"project_id":278964,"title":"Introduce 'Any' milestone filtering for issue boards","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\nThis is a follow up from https://gitlab.com/gitlab-org/gitlab/-/issues/13340. In Boards, we should introduce an option to filter for issues with 'Any' milestone set. \n\n### Proposal\n\nIn Boards, we should introduce an option to filter for issues with 'Any' milestone set.  This would mean when the issue has had a milestone explicitly selected by a user.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Ingrid (Infrastructure Operator)](https://about.gitlab.com/handbook/product/personas/#ingrid-infrastructure-operator)\n* [Dakota (Application Development Director)](https://about.gitlab.com/handbook/product/personas/#dakota-application-development-director)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\n### Feature Usage Metrics\n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-07T14:17:23.881Z","updated_at":"2022-05-06T13:08:38.815Z","closed_at":"2022-05-06T13:08:38.801Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["GitLab Free","GitLab Premium","GitLab Ultimate","Next Up","devops::plan","direction","documentation","frontend","group::product planning","section::dev","type::feature","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"}],"author":{"id":5709669,"username":"mushakov","name":"Melissa Ushakov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709669/avatar.png","web_url":"https://gitlab.com/mushakov"},"type":"ISSUE","assignee":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358156","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358156","notes":"https://gitlab.com/api/v4/projects/278964/issues/358156/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358156/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358156","relative":"#358156","full":"gitlab-org/gitlab#358156"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106258510,"iid":358153,"project_id":278964,"title":"GitLab Migration - migrations with status timeout (3) are not updated in the UI","description":"\n\nWhen importing using GitLab Migration a problematic import can get its status updated to `timeout` state (`3`). When this happens, the UI i not updated and the import is visually shown as 'Importing', but no progress will be made. \n\n![image](/uploads/92c68c07a788d26e110208767c8e073a/image.png)\n\nWe recently added timeout state to bulk imports which should be reflected in the UI.","state":"closed","created_at":"2022-04-07T14:08:02.130Z","updated_at":"2022-05-11T05:25:37.182Z","closed_at":"2022-05-06T19:00:53.897Z","closed_by":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"labels":["Category:Importers","Importer:GitLab Migration","Next Up","auto updated","devops::manage","frontend","group::import","quad-planning::complete-no-action","section::dev","type::bug","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358153","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358153","notes":"https://gitlab.com/api/v4/projects/278964/issues/358153/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358153/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358153","relative":"#358153","full":"gitlab-org/gitlab#358153"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106255433,"iid":358149,"project_id":278964,"title":"Update documentation with the schema for streaming audit events","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\n\u003c!-- What is the user problem you are trying to solve with this issue? --\u003e\n\nUsers want to use Streaming Audit Events to pull data into their current 3rd party systems. However, we currently only support the ability to send data to an HTTP destination. This means users must write custom logic to receive, process, and then re-send the events. This is very difficult because our current documentation does not describe the structure and type of data that will be sent through Streaming Audit Events.\n\n### Proposal\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n- Update the [documentation](https://docs.gitlab.com/ee/administration/audit_event_streaming.html) to describe the schema that streaming audit events will be delivered as.\n- Note: New pages can be added to the docs for this, it doesn't have to all be on the linked page.\n- Provide JSONSchema file with validated output. (Optional)\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-07T13:35:54.978Z","updated_at":"2022-12-07T21:32:57.899Z","closed_at":"2022-08-17T11:44:44.599Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Category:Audit Events","GitLab Ultimate","Next Up","devops::manage","direction","documentation","group::compliance","missed:15.2","priority::1","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":4376883,"username":"stkerr","name":"Sam Kerr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/591c8b969464f7b4fb97b6f2f654f11a?s=80\u0026d=identicon","web_url":"https://gitlab.com/stkerr"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358149","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358149","notes":"https://gitlab.com/api/v4/projects/278964/issues/358149/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358149/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358149","relative":"#358149","full":"gitlab-org/gitlab#358149"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5925,"epic":{"id":263863,"iid":5925,"title":"Streaming Audit Events to user-defined location","url":"/groups/gitlab-org/-/epics/5925","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":106255096,"iid":358148,"project_id":278964,"title":"Remove ci related metrics from usage_activity_by_stage_secure from usage_data.rb","description":"Instrumentation classes were added with https://gitlab.com/gitlab-org/gitlab/-/issues/339447\n\n[Guide](https://docs.gitlab.com/ee/development/service_ping/metrics_instrumentation.html#migrate-service-ping-metrics-to-instrumentation-classes)\n\nWe can remove the code from [`usage_data.rb`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/ee/gitlab/usage_data.rb#L377)\n\n```ruby\n          prefix = 'user_'\n\n          results = {\n            user_preferences_group_overview_security_dashboard: count(::User.active.group_view_security_dashboard.where(time_period))\n          }\n\n          time_frame = metric_time_period(time_period)\n\n          SECURE_PRODUCT_TYPES.each do |secure_type, attribs|\n            results[\"#{prefix}#{attribs[:name]}\".to_sym] = add_metric('CountUsersCreatingCiBuildsMetric', time_frame: time_frame, options: { secure_type: secure_type })\n          end\n\n          results.merge!(count_secure_pipelines(time_period))\n          results.merge!(count_secure_scans(time_period))\n\n          results[:\"#{prefix}unique_users_all_secure_scanners\"] = distinct_count(::Ci::Build.where(name: SECURE_PRODUCT_TYPES.keys).where(time_period), :user_id)\n\n          # handle license rename https://gitlab.com/gitlab-org/gitlab/issues/8911\n          combined_license_key = \"#{prefix}license_management_jobs\".to_sym\n          license_scan_count = results.delete(\"#{prefix}license_scanning_jobs\".to_sym)\n          results[combined_license_key] += license_scan_count \u003e 0 ? license_scan_count : 0 if license_scan_count.is_a?(Integer)\n\n          super.merge(results)\n\n```\n\n### Metrics generated with this method\n\nNote that we have for all time and for recent 28 days\n\n```ruby\nGitlab::UsageData.usage_activity_by_stage_secure({})=\u003e\n{:user_preferences_group_overview_security_dashboard=\u003e0,\n :user_container_scanning_jobs=\u003e0,\n :user_dast_jobs=\u003e0,\n :user_dependency_scanning_jobs=\u003e0,\n :user_license_management_jobs=\u003e0,\n :user_sast_jobs=\u003e0,\n :user_secret_detection_jobs=\u003e0,\n :user_coverage_fuzzing_jobs=\u003e0,\n :user_api_fuzzing_jobs=\u003e0,\n :user_api_fuzzing_dnd_jobs=\u003e0,\n :sast_scans=\u003e0,\n :dependency_scanning_scans=\u003e0,\n :container_scanning_scans=\u003e0,\n :dast_scans=\u003e0,\n :secret_detection_scans=\u003e0,\n :coverage_fuzzing_scans=\u003e0,\n :api_fuzzing_scans=\u003e0,\n :cluster_image_scanning_scans=\u003e0,\n :user_unique_users_all_secure_scanners=\u003e0}\n```","state":"closed","created_at":"2022-04-07T13:29:12.909Z","updated_at":"2022-09-05T03:04:44.460Z","closed_at":"2022-09-05T03:04:44.063Z","closed_by":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"labels":["backend","devops::analytics","group::product intelligence","maintenance::refactor","section::analytics","type::maintenance","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358148","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358148","notes":"https://gitlab.com/api/v4/projects/278964/issues/358148/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358148/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358148","relative":"#358148","full":"gitlab-org/gitlab#358148"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6140,"epic":{"id":285452,"iid":6140,"title":"Migrate Metrics which are dynamically added from usage_data.rb to instrumentation classes","url":"/groups/gitlab-org/-/epics/6140","group_id":9970},"iteration":null,"health_status":null},{"id":106253251,"iid":358141,"project_id":278964,"title":"Release N - Move description-related columns from namespace table to namespace_settings table","description":"Namespaces table is very wide, and used in many places, it's basically backbone of GitLab. Because it used so many times and holds much information, sometimes it contributes to the slow performance. \nRemoving all the columns relating to the description of the group from the namespaces table and moving them to description-related table would make the  namespaces table slimmer and probably more performant thanks to that.\n\n\n\u003cdetails\u003e\n\u003csummary\u003escary statement\u003c/summary\u003e\n\n```\n\nWITH RECURSIVE \"base_and_ancestors\" AS ((WITH RECURSIVE \"base_and_ancestors\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $1 AND \"members\".\"source_type\" = $2 AND \"namespaces\".\"type\" = $3 AND \"members\".\"user_id\" = $4 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $5))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_ancestors\" WHERE \"namespaces\".\"type\" = $6 AND \"namespaces\".\"id\" = \"base_and_ancestors\".\"parent_id\")), \"base_and_descendants\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $7 AND \"members\".\"source_type\" = $8 AND \"namespaces\".\"type\" = $9 AND \"members\".\"user_id\" = $10 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $11))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"type\" = $12 AND \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\")) SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_ancestors\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $13)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_descendants\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $14)) namespaces WHERE \"namespaces\".\"type\" = $15 AND \"namespaces\".\"require_two_factor_authentication\" = $16)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_ancestors\" WHERE \"namespaces\".\"type\" = $17 AND \"namespaces\".\"id\" = \"base_and_ancestors\".\"parent_id\")), \"base_and_descendants\" AS ((WITH RECURSIVE \"base_and_ancestors\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $18 AND \"members\".\"source_type\" = $19 AND \"namespaces\".\"type\" = $20 AND \"members\".\"user_id\" = $21 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $22))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_ancestors\" WHERE \"namespaces\".\"type\" = $23 AND \"namespaces\".\"id\" = \"base_and_ancestors\".\"parent_id\")), \"base_and_descendants\" AS ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $24 AND \"members\".\"source_type\" = $25 AND \"namespaces\".\"type\" = $26 AND \"members\".\"user_id\" = $27 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $28))\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"type\" = $29 AND \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\")) SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_ancestors\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $30)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_descendants\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $31)) namespaces WHERE \"namespaces\".\"type\" = $32 AND \"namespaces\".\"require_two_factor_authentication\" = $33)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"namespaces\", \"base_and_descendants\" WHERE \"namespaces\".\"type\" = $34 AND \"namespaces\".\"parent_id\" = \"base_and_descendants\".\"id\")) SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM ((SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_ancestors\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $35)\nUNION\n(SELECT \"namespaces\".\"id\", \"namespaces\".\"name\", \"namespaces\".\"path\", \"namespaces\".\"owner_id\", \"namespaces\".\"created_at\", \"namespaces\".\"updated_at\", \"namespaces\".\"type\", \"namespaces\".\"description\", \"namespaces\".\"avatar\", \"namespaces\".\"membership_lock\", \"namespaces\".\"share_with_group_lock\", \"namespaces\".\"visibility_level\", \"namespaces\".\"request_access_enabled\", \"namespaces\".\"ldap_sync_status\", \"namespaces\".\"ldap_sync_error\", \"namespaces\".\"ldap_sync_last_update_at\", \"namespaces\".\"ldap_sync_last_successful_update_at\", \"namespaces\".\"ldap_sync_last_sync_at\", \"namespaces\".\"lfs_enabled\", \"namespaces\".\"description_html\", \"namespaces\".\"parent_id\", \"namespaces\".\"shared_runners_minutes_limit\", \"namespaces\".\"repository_size_limit\", \"namespaces\".\"require_two_factor_authentication\", \"namespaces\".\"two_factor_grace_period\", \"namespaces\".\"cached_markdown_version\", \"namespaces\".\"project_creation_level\", \"namespaces\".\"runners_token\", \"namespaces\".\"file_template_project_id\", \"namespaces\".\"saml_discovery_token\", \"namespaces\".\"runners_token_encrypted\", \"namespaces\".\"custom_project_templates_group_id\", \"namespaces\".\"auto_devops_enabled\", \"namespaces\".\"extra_shared_runners_minutes_limit\", \"namespaces\".\"last_ci_minutes_notification_at\", \"namespaces\".\"last_ci_minutes_usage_notification_level\", \"namespaces\".\"subgroup_creation_level\", \"namespaces\".\"emails_disabled\", \"namespaces\".\"max_pages_size\", \"namespaces\".\"max_artifacts_size\", \"namespaces\".\"mentions_disabled\", \"namespaces\".\"default_branch_protection\", \"namespaces\".\"unlock_membership_to_ldap\", \"namespaces\".\"max_personal_access_token_lifetime\", \"namespaces\".\"push_rule_id\", \"namespaces\".\"shared_runners_enabled\", \"namespaces\".\"allow_descendants_override_disabled_shared_runners\", \"namespaces\".\"traversal_ids\" FROM \"base_and_descendants\" AS \"namespaces\" WHERE \"namespaces\".\"type\" = $36)) namespaces WHERE \"namespaces\".\"type\" = $37 AND \"namespaces\".\"id\" IN (SELECT \"namespaces\".\"id\" FROM \"namespaces\" INNER JOIN \"members\" ON \"namespaces\".\"id\" = \"members\".\"source_id\" WHERE \"members\".\"type\" = $38 AND \"members\".\"source_type\" = $39 AND \"namespaces\".\"type\" = $40 AND \"members\".\"user_id\" = $41 AND \"members\".\"requested_at\" IS NULL AND (access_level \u003e= $42)) ORDER BY \"namespaces\".\"name\" ASC\n```\n\u003c/details\u003e\n\nWe can move some of the columns to the `namespace_settings` table or create new table to keep dedicated set of settings. I identified some columns that in my opinion are good candidates for moving. I did a quick research on each - it does not mean I'm 100% confident that the move will be easy :(.\n\nSome of the columns, for example description-related columns, because of how wide they are - moving them will benefit performance and make this table less busy.\n\nRight now, this is particularly visible while using 'GroupFinder' - every call to this class is loading all 49 columns of namespaces table.\n\n\nColumns to migrate (separate MRs per attribute):  \n- [ ] description\n- [ ] description_html\n- [ ] cached_markdown_version\n\n### Implementation plan\n\n1. **Create the column in the `namespace_settings` table.**\n1. **Setup ActiveRecord callback to keep the value up to date between `namespace` and `namespace_settings`**\n1. **Add a special index that allows iterating over the records. (`create index i1 on namespace (id) where your_field is not null`)**\n1. Implement and trigger background migration.\n1. Release N+1: Update the backend to persist the column only in the `namespace_settings` table.\n1. Release N+1: Ignore the column in the `namespace` table.\n1. Release N+2: Remove the column from `namespace` following our [DB guidelines](https://docs.gitlab.com/ee/development/migration_style_guide.html#example-add-a-column-my_column-to-the-users-table).\n\n## Availability and Testing\n- Run `package-and-qa` job and evaluate results for any issues related to these database changes","state":"closed","created_at":"2022-04-07T13:04:36.900Z","updated_at":"2022-09-07T21:25:38.533Z","closed_at":"2022-09-07T21:25:38.457Z","closed_by":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"labels":["auto updated","backend","database","devops::manage","group::organization","missed:14.10","missed:14.9","missed:15.0","missed:15.1","missed:15.2","missed:15.3","quad-planning::complete-action","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"}],"author":{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},"type":"ISSUE","assignee":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358141","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358141","notes":"https://gitlab.com/api/v4/projects/278964/issues/358141/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358141/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358141","relative":"#358141","full":"gitlab-org/gitlab#358141"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7869,"epic":{"id":495120,"iid":7869,"title":"Move description-related columns from namespace table to namespace_settings table","url":"/groups/gitlab-org/-/epics/7869","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":106250332,"iid":358131,"project_id":278964,"title":"Commit box linked pipelines out of sync","description":"### Problem\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/21425 we solved the out of sync issue for pipeline stages and the full pipeline status in the commit box.\n\nThis issue is for solving linked pipelines being out of sync on the commit box with the pipelines tab.\n\n![Screen_Shot_2022-04-07_at_8.23.11_AM](/uploads/27b20b9874c6cdcda7be13a0279a22f6/Screen_Shot_2022-04-07_at_8.23.11_AM.png)\n\n### Solution\n\nSetup polling on https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/projects/commit_box/info/components/commit_box_pipeline_mini_graph.vue#L45 with same interval as the other queries","state":"closed","created_at":"2022-04-07T12:24:52.121Z","updated_at":"2022-07-14T13:38:06.727Z","closed_at":"2022-06-23T17:37:19.677Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","SUS::Impacting","UX","devops::verify","frontend","group::pipeline execution","priority::4","section::ops","severity::4","type::bug","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358131","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358131","notes":"https://gitlab.com/api/v4/projects/278964/issues/358131/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358131/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358131","relative":"#358131","full":"gitlab-org/gitlab#358131"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106249783,"iid":358129,"project_id":278964,"title":"NoMethodError: undefined method `ping' for nil:NilClass","description":"## Description\n\n`prometheus_client` can be a `nil` object from [L103](https://gitlab.com/gitlab-org/gitlab/-/blob/f6a703c/app/models/integrations/prometheus.rb#L103).\n\nSo when we test the connection [L96](https://gitlab.com/gitlab-org/gitlab/-/blob/f6a703c/app/models/integrations/prometheus.rb#L96), it fails with a `NoMethodError`.\n\n### Implementation Guide\n\nThere are two options:\n1. Return an object that implements the `ping` method, following the [Null Object Pattern](https://en.wikipedia.org/wiki/Null_object_pattern).\n2. Include `NoMethodError` in the rescue or catch a more generic error, like `StandardError` to include this possible error.\n\nWhen a user hits Test integration for Prometheus, occasionally this issue occurs. If the URL for the connection is not correct, it is failing (probably as 500 error for the user). \n\n### Backtrace\n\nhttps://sentry.gitlab.net/gitlab/gitlabcom/issues/3190063/?referrer=gitlab_plugin\n\n```\nNoMethodError: undefined method `ping' for nil:NilClass\n  app/models/integrations/prometheus.rb:96:in `test'\n    prometheus_client.ping\n  app/services/integrations/test/base_service.rb:26:in `execute'\n    integration.test(data)\n  app/controllers/projects/services_controller.rb:77:in `service_test_response'\n    result = ::Integrations::Test::ProjectService.new(integration, current_user, params[:event]).execute\n  app/controllers/projects/services_controller.rb:60:in `test'\n    render json: service_test_response, status: :ok\n  app/controllers/application_controller.rb:520:in `set_current_admin'\n    return yield unless Gitlab::CurrentSettings.admin_mode\n...\n(153 additional frame(s) were not displayed)\n```","state":"closed","created_at":"2022-04-07T12:14:10.180Z","updated_at":"2022-11-22T18:46:29.714Z","closed_at":"2022-07-13T07:36:45.384Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["Community contribution","Seeking community contributions","backend","devops::manage","good for new contributors","group::integrations","section::dev","type::bug"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":894030,"username":"moofkit","name":"Dmitriy Ivliev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/894030/avatar.png","web_url":"https://gitlab.com/moofkit"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":894030,"username":"moofkit","name":"Dmitriy Ivliev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/894030/avatar.png","web_url":"https://gitlab.com/moofkit"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358129","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358129","notes":"https://gitlab.com/api/v4/projects/278964/issues/358129/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358129/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358129","relative":"#358129","full":"gitlab-org/gitlab#358129"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5033,"epic":{"id":160034,"iid":5033,"title":"Improve test functionality of the integrations","url":"/groups/gitlab-org/-/epics/5033","group_id":9970},"iteration":null,"health_status":null},{"id":106248996,"iid":358128,"project_id":278964,"title":"[Feature flag] Rollout of `measure_service_ping_metric_collection`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](ISSUE LINK) on production,\nthat is currently behind the `measure_service_ping_metric_collection` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: product intelligence\n- Most appropriate slack channel to reach out to: `#g_product_intelligence`\n- Best individual to reach out to: @mikolaj_wawrzyniak \n- PM: @alinamihaila \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nGitLab instances would start reporting how long it took to collect each of service ping metrics\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nServicePing would stop working\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\nMonitor if there are issues during weekly ServicePing generation for GitLab.com\n\n\n### What can we check for monitoring production after rollouts?\n\nMonitor number of ServicePing instances coming from self-managed instances\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [x] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it.\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```\n\n## Testing\n\nEnsure QA pipelines are passing.","state":"closed","created_at":"2022-04-07T11:59:49.642Z","updated_at":"2022-07-15T12:17:37.521Z","closed_at":"2022-07-15T12:17:37.500Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"MikoÅ‚aj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["Category:Service Ping","PI System Reliability and Monitoring","auto updated","backend","devops::analytics","group::product intelligence","missed:14.10","quad-planning::complete-action","section::analytics","type::feature","workflow::verification"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"MikoÅ‚aj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"MikoÅ‚aj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"MikoÅ‚aj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358128","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":50,"completed_count":24},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"24 of 50 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358128","notes":"https://gitlab.com/api/v4/projects/278964/issues/358128/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358128/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358128","relative":"#358128","full":"gitlab-org/gitlab#358128"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106245616,"iid":358123,"project_id":278964,"title":"Add a histogram showing accessed pipelines age","description":"## Description\n\nImplement two new Prometheus histograms:\n\n1. Pipeline age histogram\n2. Build age histogram\n\nWe would make an observation every time a build / pipeline gets loaded from the database.\n\nWe would ship that in two iterations, pipelines age histogram first, and then we would do the same for builds. The reason why two iterations may be justified is that by implementing a histogram, we would also immediately get a counter to see how many pipelines we actually load every second. This would allow us to reduce the risk of shipping histogram for builds.","state":"closed","created_at":"2022-04-07T10:59:10.235Z","updated_at":"2023-01-10T15:52:50.349Z","closed_at":"2022-07-18T11:17:25.878Z","closed_by":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"labels":["CI data partitioning","ci::scaling","devops::verify","group::pipeline execution","missed:15.1","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358123","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358123","notes":"https://gitlab.com/api/v4/projects/278964/issues/358123/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358123/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358123","relative":"#358123","full":"gitlab-org/gitlab#358123"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5417,"epic":{"id":206291,"iid":5417,"title":"Partition CI/CD pipelines data","url":"/groups/gitlab-org/-/epics/5417","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":106242586,"iid":358117,"project_id":278964,"title":"Backend: Consider removing `index_ci_builds_on_queued_at` index","description":"## Description\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/332953#note_904030362 and https://gitlab.com/gitlab-org/gitlab/-/issues/358109 we found out that `index_ci_builds_on_queued_at` index might not be used, yet it occupies a significant amount of space in our database cluster: approximately 61 GB.\n\n## Proposal\n\nSafely remove the index in a controlled way.\n\n## Technical Proposal\n\nSee the thread here: https://gitlab.com/gitlab-org/gitlab/-/issues/358117#note_911847860\n\n* set `lock_timeout` to a low value, below 1s\n* perform N attempts of `DROP INDEX` (without concurrently)\n\n`with_lock_retries` + `DROP INDEX` is essentially what we used in the migrations finalizing PK conversions to `bigint`, for example https://gitlab.com/gitlab-org/gitlab/-/blob/8b5913e697406b171986550206ce01febd5e9359/db/post_migrate/20210706212710_finalize_ci_job_artifacts_bigint_conversion.rb#L47-78. Similar approach was recently used to remove FKs on busy tables - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/79418/diffs#diff-content-f212d81a24aa908167b2c2d87798a3584b8a61c0.","state":"closed","created_at":"2022-04-07T10:22:08.074Z","updated_at":"2023-01-10T15:52:50.076Z","closed_at":"2022-06-27T08:57:05.057Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","[deprecated] Accepting merge requests","backend","ci::scaling","database","devops::verify","group::pipeline execution","section::ops","type::maintenance","verify-hackathon::delete-fest","workflow::ready for development"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":null,"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358117","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358117","notes":"https://gitlab.com/api/v4/projects/278964/issues/358117/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358117/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358117","relative":"#358117","full":"gitlab-org/gitlab#358117"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5417,"epic":{"id":206291,"iid":5417,"title":"Partition CI/CD pipelines data","url":"/groups/gitlab-org/-/epics/5417","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":106237513,"iid":358110,"project_id":278964,"title":"Backend: Chains of needs is not automatically triggered after a failure","description":"### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\nNot all jobs in a chain of needs are triggered automatically if one of the previous jobs fails.\n\n### Steps to reproduce\n\n1. Create a stage with multiple jobs, each depending on the previous one using `needs`. The third job `needs` the second, the second job `needs` the first etc. Sample GitLab ci file below.\n2. Trigger the pipeline and let the first job fail.\n3. After the failure of the first job, retry the failed job and let it pass.\n4. Wait for the next jobs to be triggered.\n\ngitlab-ci.yml:\n```yml\nstages:\n  - my_stage\n\njob_1:\n  stage: my_stage\n  tags:\n    - my-runner\n  script:\n    - exit $(( $RANDOM % 2)) # Exit randomly with 0 or 1\n\njob_2:\n  stage: my_stage\n  needs:\n    - job_1\n  tags:\n    - my-runner\n  script:\n    - exit 0\n\njob_3:\n  stage: my_stage\n  needs:\n    - job_2\n  tags:\n    - my-runner\n  script:\n    - exit 0\n\n```\n\n### What is the current *bug* behavior?\nIf `job_1` failed, the next steps are marked as skipped:\n\n![first_failed](/uploads/8bc2d75d66700eff140e67d15d9792e7/first_failed.png)\n\nAfter successfully retrying `job_1`, next in the line `job_2` gets automatically triggered but `job_3` remains skipped:\n\n![only_second_after_retry](/uploads/85f042ddcf0d402021e60a0dcb505208/only_second_after_retry.png)\n\nAfter **manually** retrying `job_2`, `job_3` finally gets automatically triggered:\n\n![all_three](/uploads/b93ffc2877dc1d773686286ee0062f40/all_three.png)\n\n### What is the expected *correct* behavior?\n\nAfter `job_1` fails, press retry on `job_1` and both `job_2` and `job_3` are automatically triggered.\n\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2022-04-07T09:52:44.275Z","updated_at":"2022-10-26T10:34:31.680Z","closed_at":"2022-10-05T09:19:05.278Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","backend","backend-weight::2","bug::functional","candidate::15.5","customer","devops::verify","group::pipeline authoring","priority::3","section::ops","severity::3","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":9562067,"username":"sebastian.kucharzyk.tcl","name":"Sebastian Kucharzyk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9562067/avatar.png","web_url":"https://gitlab.com/sebastian.kucharzyk.tcl"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":19,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358110","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358110","notes":"https://gitlab.com/api/v4/projects/278964/issues/358110/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358110/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358110","relative":"#358110","full":"gitlab-org/gitlab#358110"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":69697,"iid":84,"sequence":26,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-07-11T00:05:03.302Z","updated_at":"2022-10-17T00:05:02.143Z","start_date":"2022-10-03","due_date":"2022-10-16","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/69697"},"health_status":"on_track"},{"id":106213955,"iid":358088,"project_id":278964,"title":"Remove default_scope from event model","description":"The default scope used in Event model should be removed because using the method is banned https://gitlab.com/gitlab-org/gitlab/-/merge_requests/33847 and continues to cause problems https://gitlab.com/gitlab-org/gitlab/-/issues/323730#note_903665325 https://gitlab.com/gitlab-org/gitlab/-/merge_requests/77436#note_803969255","state":"closed","created_at":"2022-04-07T03:39:38.397Z","updated_at":"2022-09-14T07:12:16.143Z","closed_at":"2022-09-14T07:12:15.913Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Stretch","automation:ml","automation:ml wrong","backend","devops::manage","group::optimize","maintenance::refactor","missed:15.3","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358088","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358088","notes":"https://gitlab.com/api/v4/projects/278964/issues/358088/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358088/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358088","relative":"#358088","full":"gitlab-org/gitlab#358088"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106213429,"iid":358086,"project_id":278964,"title":"Correct link to right anchor for managing Packages storage","description":"### Summary\n\nRight now the link from the Usage Quota page for Package storage takes you here: https://docs.gitlab.com/ee/user/packages/package_registry/index.html#delete-a-package. Unfortunately, this anchor is no longer valid.\n\nIt should take you here: https://docs.gitlab.com/ee/user/packages/package_registry/index.html#reduce-storage-usage\n\n\nGoal: \nUpdate tooltip link for `Packages` on the Usage quotas page on group and project level: \n\n![Screenshot_2022-04-07_at_11.37.58](/uploads/e533439fcbb8a829f016a79048de1ed3/Screenshot_2022-04-07_at_11.37.58.png)","state":"closed","created_at":"2022-04-07T03:25:53.828Z","updated_at":"2022-05-10T08:50:29.002Z","closed_at":"2022-05-10T08:50:28.986Z","closed_by":{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},"labels":["[deprecated] Category:Utilization","auto updated","devops::fulfillment","frontend","group::utilization","section::fulfillment","type::maintenance","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"}],"author":{"id":926632,"username":"joshlambert","name":"Joshua Lambert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a0bdc5209b11e9c0953f80234dcb4ffb?s=80\u0026d=identicon","web_url":"https://gitlab.com/joshlambert"},"type":"ISSUE","assignee":{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358086","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358086","notes":"https://gitlab.com/api/v4/projects/278964/issues/358086/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358086/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358086","relative":"#358086","full":"gitlab-org/gitlab#358086"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106207489,"iid":358080,"project_id":278964,"title":"[SaaS] Seat overage email schedules excessive number of jobs and API requests","description":"This is a follow up from the discussion here: https://gitlab.com/gitlab-org/gitlab/-/issues/348487#note_900886862\n\n## Problem\n\nCurrently GitLab is making an API request to CustomersDot ~40K times daily to notify the customers app that a new member has been added to a group that has exceeded the number of purchased seats. This is happening in the [`GitlabSubscriptions::NotifySeatsExceededWorker`](https://gitlab.com/gitlab-org/gitlab/-/blob/e4080de6935228a4677a4327acee9e5cf551c2a3/ee/app/workers/gitlab_subscriptions/notify_seats_exceeded_worker.rb). Only ~100 of these requests actually result in an email being sent to the group owners.\n\nThis many network requests and jobs may impact performance or delay other jobs.\n\nThis problem lead to the Sidekiq queues in CustomersDot getting inundated with jobs, https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4934+.  In particular, we saw that one namespace had thousands of jobs and continued to enqueue more every few seconds.  We put in a few quick fix (https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5581) to prevent requests for this namespace from enqueuing more `Reconciliations::SendSeatOverageNotificationJob`.  We also added a [CDot feature flag](https://gitlab.com/gitlab-org/customers-gitlab-com/-/feature_flags/165/edit), `block_seat_overage_notification`, to easily enable this blocking logic.  Once this issue is resolved, we should be able to roll back this logic in CDot and remove the feature flag as part of https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4948.\n\n## Proposal\n\nWe should flag the groups that have recently exceeded their purchased seat allowance and use a scheduled job to send this information to CustomersDot in batches, rather than individually.\n\nA potential solution would be:\n\n- [x] Create a `Subscription#max_seats_used_changed_at` field, with an index **(being implemented in: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84913)**\n- [x] Update the [`UpdateMaxSeatsUsedForGitlabComSubscriptionsWorker`](https://gitlab.com/gitlab-org/gitlab/-/blob/b7a551597d2f6ac592465146b5ad7b8008c2ad0a/ee/app/workers/update_max_seats_used_for_gitlab_com_subscriptions_worker.rb) and the GitlabSubscription model callbacks to update the new field when the `max_seats_used` value changes **(being implemented in: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84913)**\n- [x] Update [subscription renewal process on GitLab](https://gitlab.com/gitlab-org/gitlab/-/blob/b7a551597d2f6ac592465146b5ad7b8008c2ad0a/ee/app/models/gitlab_subscription.rb) to reset the new column **(being implemented in: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84913)**\n- [x] Update the [CustomersDot GraphQL endpoint](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/3c5bd59e327eb1f1722e78cb725f0410aa6be120/app/graphql/mutations/emails/send_seat_overage_notification.rb#L23) to support batches of notifications https://gitlab.com/gitlab-org/customers-gitlab-com/-/merge_requests/5677\n- [x] Create a scheduled job that looks for all active subscriptions that have `max_seats_used_changed_at` in the last 24 (or 48?) hours set and batch send these to CustomersDot\n   - Add index on the `max_seats_used_changed_at` column to support this query\n- [x] Stop responding to [the event from the member creation service](https://gitlab.com/gitlab-org/gitlab/-/blob/020ac9a48e93fa7be6a7e07e10013a8e5bd4ccc0/ee/lib/ee/gitlab/event_store.rb#L26)\n\n**Note:** a more in-depth discussion around this issue started here https://gitlab.com/gitlab-org/gitlab/-/issues/348487#note_900886862 if more context is needed.","state":"closed","created_at":"2022-04-06T23:20:44.116Z","updated_at":"2023-01-11T20:48:36.365Z","closed_at":"2022-12-27T20:51:29.561Z","closed_by":{"id":3614911,"username":"rcobb","name":"Ryan Cobb","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7047b7014264f07daf9836e55fc5ef4c?s=80\u0026d=identicon","web_url":"https://gitlab.com/rcobb"},"labels":["Track Health Status","[deprecated] Category:Billing and Subscription Management","backend","devops::fulfillment","group::billing and subscription management","maintenance::performance","missed:15.6","missed:15.7","section::fulfillment","type::maintenance","workflow::verification"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":3614911,"username":"rcobb","name":"Ryan Cobb","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7047b7014264f07daf9836e55fc5ef4c?s=80\u0026d=identicon","web_url":"https://gitlab.com/rcobb"}],"author":{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"},"type":"ISSUE","assignee":{"id":3614911,"username":"rcobb","name":"Ryan Cobb","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7047b7014264f07daf9836e55fc5ef4c?s=80\u0026d=identicon","web_url":"https://gitlab.com/rcobb"},"user_notes_count":34,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358080","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":5,"blocking_issues_count":2,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358080","notes":"https://gitlab.com/api/v4/projects/278964/issues/358080/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358080/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358080","relative":"#358080","full":"gitlab-org/gitlab#358080"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7230,"epic":{"id":401187,"iid":7230,"title":"[QSR] [SaaS] Create transparency about User Overage process at the time of adding users","url":"/groups/gitlab-org/-/epics/7230","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":106622821,"iid":359054,"project_id":278964,"title":"Add config files to the new events","description":"\u003c!-- Please complete the template below as best as you can. Make sure to check if this issue has already been raised by someone else first to avoid duplication. \n\nFor each section below, please add screenshots or links or anything that may help visual learners understand the problem better, even if this takes you an extra minute or two this is a great help to some folks.\n\nhttps://www.learning-styles-online.com/style/visual-spatial/\n\n--\u003e\n\n### Problem\nIn https://gitlab.com/gitlab-org/product-intelligence/-/issues/493+ we selected a few metrics to migrate to Snowplow events. Now, once related FF is enabled globally we need to add events config files to `/config/events` folder.\n\nIt will also let us to see events on https://metrics.gitlab.com/snowplow/\n\n### Outcome \n\nCode changes made and merged, resolving the problem above.","state":"closed","created_at":"2022-04-06T23:11:44.598Z","updated_at":"2022-08-18T14:13:39.629Z","closed_at":"2022-05-04T10:26:51.068Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["Unplanned","backend","devops::growth","group::product intelligence","missed:14.10","section::growth","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359054","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359054","notes":"https://gitlab.com/api/v4/projects/278964/issues/359054/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359054/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359054","relative":"#359054","full":"gitlab-org/gitlab#359054"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7493,"epic":{"id":435080,"iid":7493,"title":"Send RedisHLL metrics via Snowplow for SaaS namespaces - Phase 1","url":"/groups/gitlab-org/-/epics/7493","group_id":9970,"human_readable_end_date":"Jun 22, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106206638,"iid":358078,"project_id":278964,"title":"Bump major version and build support for prod-1.6","description":"### Problem\n\nThe current build system only supports master builds, this will be a problem when we start bumping the major version every release. Additionally, to lower the chances of the speed work causing customer issues over the next month, we will be incrementing the major version early and merging the speed work into v2.\n\n### Proposal\n\n1. [x] Update the following build scripts to support `master` and `prod-1.6` branches\n   1. [x] `buildtag.sh`\n   2. [x] `make_publish_prod.sh`\n   3. [x] `make_publish.sh`\n2. [x] Update `.gitlab-ci.yml` to add `prod-1.6` branch along with `master`\n3. [x] Create a test `prod-1.6` branch and test build pipeline\n3. [x] Update README\n4. [x] Perform actual increment version process (see README)","state":"closed","created_at":"2022-04-06T22:30:01.945Z","updated_at":"2022-04-14T16:54:18.767Z","closed_at":"2022-04-14T16:54:18.749Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358078","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358078","notes":"https://gitlab.com/api/v4/projects/278964/issues/358078/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358078/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358078","relative":"#358078","full":"gitlab-org/gitlab#358078"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106189222,"iid":358038,"project_id":278964,"title":"Adjust trial status progress from 0/30 â†’ 1/30 for day one","description":"![image](/uploads/9baea3c1f9562ce6b8d5b76d2ec7f47a/image.png)\n\nIt used to be â€œ# days leftâ€, but was changed in #340731+.\n\n- [ ] Investigate why it shows `0` instead of `1` at the beginning\n  - Side question: Does it also show `29/30` for the last day rather than `30/30`?\n  - It might be related to the fact that trial starts in the middle of the day and ends as well","state":"closed","created_at":"2022-04-06T15:57:22.734Z","updated_at":"2023-01-06T21:23:50.586Z","closed_at":"2023-01-06T21:23:50.539Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["Next Up","devops::growth","group::acquisition","missed:15.5","missed:15.6","missed:15.7","priority::4","section::growth","severity::4","type::bug","workflow::in review"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358038","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358038","notes":"https://gitlab.com/api/v4/projects/278964/issues/358038/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358038/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358038","relative":"#358038","full":"gitlab-org/gitlab#358038"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106181346,"iid":358023,"project_id":278964,"title":"Remove placeholders from description and remediation","description":"\n### Problem\n\nThe ultimate goal for DAST CWE checks is that the `description` and `remediation` fields should contain content from matched values, see https://gitlab.com/gitlab-org/gitlab/-/issues/358021.\n\nPlaceholders for this content have already been added to these fields, for example `{cookie_name}`. Until the above issue is complete, the placeholders are shown directly to the user both in the DAST [documentation](https://docs.gitlab.com/ee/user/application_security/dast/checks/1004.1.html),\n\n\n| Screenshot |\n| ------ |\n| \u003cimg src=\"/uploads/746b15ae9cdef80dae9dd07d2c5d7ce4/Screen_Shot_2022-04-06_at_2.51.55_pm.png\" width=400/\u003e |\n\n\nand in the Security Dashboard Vulnerability Report.\n\n| Screenshot |\n| ------ |\n| \u003cimg src=\"/uploads/60c0303505a3ec3c68f87b4f2bc39c9a/Screen_Shot_2022-04-06_at_2.51.31_pm.png\" width=400 /\u003e |\n\n### Proposal\n\nThe placeholders should be removed and check text made more generic until issue https://gitlab.com/gitlab-org/gitlab/-/issues/358021 has been implemented.\n\n\n### Implementation plan\n\n- [X] [Remove placholders](https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/152)\n- [X] Release DAST CWE checks\n- [X] [Regenerate the checks GitLab documentation, check in, merge, release.](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/92196)","state":"closed","created_at":"2022-04-06T13:55:57.245Z","updated_at":"2022-07-18T03:21:42.246Z","closed_at":"2022-07-13T02:39:15.761Z","closed_by":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"labels":["Category:DAST","GitLab Ultimate","dast::browserker","devops::secure","group::dynamic analysis","missed:15.1","section::sec","type::feature","workflow::in review"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"}],"author":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"type":"ISSUE","assignee":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358023","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358023","notes":"https://gitlab.com/api/v4/projects/278964/issues/358023/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358023/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358023","relative":"#358023","full":"gitlab-org/gitlab#358023"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8034,"epic":{"id":519327,"iid":8034,"title":"Browser-based DAST post-passive check cleanup","url":"/groups/gitlab-org/-/epics/8034","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106180433,"iid":358019,"project_id":278964,"title":"Potential for large # records loaded into memory during indexing","description":"There are repeated `WARN` logs in the background jobs logs generated from the [`preload_database_records` method in `document_reference.rb`](ee/lib/gitlab/elastic/document_reference.rb#L30). The warnings are from [ActiveRecord](https://api.rubyonrails.org/classes/ActiveRecord/Relation/RecordFetchWarning.html). We should look into using batches here to prevent very large amounts of records being loaded into memory.\n\nSteps to reproduce\n\n* verify that [gdk has Elasticsearch enabled](https://gitlab.com/gitlab-org/gitlab-development-kit/-/blob/main/doc/howto/elasticsearch.md)\n* ensure you have projects with large number of issues, notes, and merge requests loaded into gdk\n* follow the background jobs logs - `gdk tail rails-background-jobs`\n* recreate the Elasticsearch indexes from scratch - `bundle exec rake gitlab:elastic:index` (Note: this will delete and recreate the Elasticsearch indexes and make take awhile)\n* you should see warnings in the logs about the number of records being fetched during indexing\n\nThe following discussion from !79949 should be addressed:\n\n- [ ] @terrichu started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/79949#note_901657855):  (+1 comment)\n\n    \u003e I have noticed some warnings in the background jobs logs from the [`preload_database_records` method in `document_reference.rb`](ee/lib/gitlab/elastic/document_reference.rb#L30). I can't tell where the warnings are being generated from and they appear to be related to the large number of records fetched by the queries. I'll do some more digging and report back.\n    \u003e \n    \u003e ```\n    \u003e 2022-04-05_19:44:57.94495 rails-background-jobs : {\"severity\":\"WARN\",\"time\":\"2022-04-05T19:44:57.944Z\",\"message\":\"Query fetched 7887 Issue records: SELECT \\\"namespaces\\\".\\\"id\\\", \\\"namespaces\\\".\\\"name\\\", \\\"namespaces\\\".\\\"path\\\", \\\"namespaces\\\".\\\"owner_id\\\", \\\"namespaces\\\".\\\"created_at\\\", \\\"namespaces\\\".\\\"updated_at\\\", \\\"namespaces\\\".\\\"type\\\", \\\"namespaces\\\".\\\"description\\\", \\\"namespaces\\\".\\\"avatar\\\", \\\"namespaces\\\".\\\"membership_lock\\\", \\\"namespaces\\\".\\\"share_with_group_lock\\\", \\\"namespaces\\\".\\\"visibility_level\\\", \\\"namespaces\\\".\\\"request_access_enabled\\\", \\\"namespaces\\\".\\\"ldap_sync_status\\\", \\\"namespaces\\\".\\\"ldap_sync_error\\\", \\\"namespaces\\\".\\\"ldap_sync_last_update_at\\\", \\\"namespaces\\\".\\\"ldap_sync_last_successful_update_at\\\", \\\"namespaces\\\".\\\"ldap_sync_last_sync_at\\\", \\\"namespaces\\\".\\\"description_html\\\", \\\"namespaces\\\".\\\"lfs_enabled\\\", \\\"namespaces\\\".\\\"parent_id\\\", \\\"namespaces\\\".\\\"shared_runners_minutes_limit\\\", \\\"namespaces\\\".\\\"repository_size_limit\\\", \\\"namespaces\\\".\\\"require_two_factor_authentication\\\", \\\"namespaces\\\".\\\"two_factor_grace_period\\\", \\\"namespaces\\\".\\\"cached_markdown_version\\\", \\\"namespaces\\\".\\\"project_creation_level\\\", \\\"namespaces\\\".\\\"runners_token\\\", \\\"namespaces\\\".\\\"file_template_project_id\\\", \\\"namespaces\\\".\\\"saml_discovery_token\\\", \\\"namespaces\\\".\\\"runners_token_encrypted\\\", \\\"namespaces\\\".\\\"custom_project_templates_group_id\\\", \\\"namespaces\\\".\\\"auto_devops_enabled\\\", \\\"namespaces\\\".\\\"extra_shared_runners_minutes_limit\\\", \\\"namespaces\\\".\\\"last_ci_minutes_notification_at\\\", \\\"namespaces\\\".\\\"last_ci_minutes_usage_notification_level\\\", \\\"namespaces\\\".\\\"subgroup_creation_level\\\", \\\"namespaces\\\".\\\"emails_disabled\\\", \\\"namespaces\\\".\\\"max_pages_size\\\", \\\"namespaces\\\".\\\"max_artifacts_size\\\", \\\"namespaces\\\".\\\"mentions_disabled\\\", \\\"namespaces\\\".\\\"default_branch_protection\\\", \\\"namespaces\\\".\\\"unlock_membership_to_ldap\\\", \\\"namespaces\\\".\\\"max_personal_access_token_lifetime\\\", \\\"namespaces\\\".\\\"push_rule_id\\\", \\\"namespaces\\\".\\\"shared_runners_enabled\\\", \\\"namespaces\\\".\\\"allow_descendants_override_disabled_shared_runners\\\", \\\"namespaces\\\".\\\"traversal_ids\\\" FROM \\\"namespaces\\\" WHERE \\\"namespaces\\\".\\\"id\\\" IN (110, 22, 28, 1, 17, 25, 52, 27, 23, 5, 19, 26, 16, 24, 7, 2, 4, 15, 107, 20) /*application:sidekiq,correlation_id:17f8f1aae7bf73255fc2500fb6de6266,jid:a3da2b002b7ea6ef3565d8fd,endpoint_id:ElasticIndexInitialBulkCronWorker,db_config_name:main,line:/ee/lib/gitlab/elastic/document_reference.rb:35:in `block in preload_database_records'*/\"}\n    \u003e 2022-04-05_19:45:00.00834 rails-background-jobs : {\"severity\":\"WARN\",\"time\":\"2022-04-05T19:45:00.008Z\",\"message\":\"Query fetched 3681 Note records: SELECT \\\"routes\\\".* FROM \\\"routes\\\" WHERE \\\"routes\\\".\\\"source_type\\\" = 'Project' AND \\\"routes\\\".\\\"source_id\\\" IN (2, 1, 43, 8, 5, 7, 3, 6, 4, 32) /*application:sidekiq,correlation_id:17f8f1aae7bf73255fc2500fb6de6266,jid:a3da2b002b7ea6ef3565d8fd,endpoint_id:ElasticIndexInitialBulkCronWorker,db_config_name:main,line:/ee/lib/gitlab/elastic/document_reference.rb:35:in `block in preload_database_records'*/\"}\n    \u003e 2022-04-05_19:45:00.47723 rails-background-jobs : {\"severity\":\"INFO\",\"time\":\"2022-04-05T19:45:00.476Z\",\"retry\":0,\"queue\":\"default\",\"backtrace\":true,\"version\":0,\"queue_namespace\":\"cronjob\",\"args\":[],\"class\":\"ScheduleMergeRequestCleanupRefsWorker\",\"jid\":\"98ec1afd27e77146e24c25ee\",\"created_at\":\"2022-04-05T19:44:33.229Z\",\"meta.caller_id\":\"Cronjob\",\"correlation_id\":\"c43956edc25a02168f74d46380dde47c\",\"meta.feature_category\":\"code_review\",\"uber-trace-id\":\"35ce2a03d50f46fe:35ce2a03d50f46fe:0:1\",\"worker_data_consistency\":\"always\",\"idempotency_key\":\"resque:gitlab:duplicate:default:33e8a9dcd4c9780ad0ea123ad7ccbabde1aa1e90ffcbb928434ba4b5800a5811\",\"size_limiter\":\"validated\",\"enqueued_at\":\"2022-04-05T19:44:33.230Z\",\"job_size_bytes\":2,\"pid\":39562,\"message\":\"ScheduleMergeRequestCleanupRefsWorker JID-98ec1afd27e77146e24c25ee: done: 12.211456 sec\",\"job_status\":\"done\",\"scheduling_latency_s\":15.034695,\"redis_calls\":2,\"redis_duration_s\":0.000527,\"redis_read_bytes\":213,\"redis_write_bytes\":373,\"redis_cache_calls\":1,\"redis_cache_duration_s\":0.000337,\"redis_cache_read_bytes\":203,\"redis_cache_write_bytes\":61,\"redis_queues_calls\":1,\"redis_queues_duration_s\":0.00019,\"redis_queues_read_bytes\":10,\"redis_queues_write_bytes\":312,\"db_count\":1,\"db_write_count\":0,\"db_cached_count\":0,\"db_replica_count\":0,\"db_primary_count\":1,\"db_main_count\":1,\"db_main_replica_count\":0,\"db_replica_cached_count\":0,\"db_primary_cached_count\":0,\"db_main_cached_count\":0,\"db_main_replica_cached_count\":0,\"db_replica_wal_count\":0,\"db_primary_wal_count\":0,\"db_main_wal_count\":0,\"db_main_replica_wal_count\":0,\"db_replica_wal_cached_count\":0,\"db_primary_wal_cached_count\":0,\"db_main_wal_cached_count\":0,\"db_main_replica_wal_cached_count\":0,\"db_replica_duration_s\":0.0,\"db_primary_duration_s\":0.384,\"db_main_duration_s\":0.384,\"db_main_replica_duration_s\":0.0,\"cpu_s\":0.390895,\"duration_s\":12.211456,\"completed_at\":\"2022-04-05T19:45:00.476Z\",\"load_balancing_strategy\":\"primary\",\"db_duration_s\":0.00474}\n    \u003e 2022-04-05_19:45:02.14660 rails-background-jobs : {\"severity\":\"WARN\",\"time\":\"2022-04-05T19:45:02.146Z\",\"message\":\"Query fetched 4329 MergeRequest records: SELECT \\\"project_features\\\".* FROM \\\"project_features\\\" WHERE \\\"project_features\\\".\\\"project_id\\\" IN (2, 1, 43, 13, 11, 8, 5, 7, 3, 17, 18, 6, 12, 4, 10, 16, 9, 15, 26, 14) /*application:sidekiq,correlation_id:17f8f1aae7bf73255fc2500fb6de6266,jid:a3da2b002b7ea6ef3565d8fd,endpoint_id:ElasticIndexInitialBulkCronWorker,db_config_name:main,line:/ee/lib/gitlab/elastic/document_reference.rb:35:in `block in preload_database_records'*/\"}\n    \u003e ```","state":"closed","created_at":"2022-04-06T13:43:40.114Z","updated_at":"2022-10-21T12:59:14.305Z","closed_at":"2022-10-21T12:59:14.281Z","closed_by":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"labels":["Category:Global Search","auto updated","backend","bug::performance","devops::data_stores","group::global search","needs weight","priority::2","section::enablement","severity::3","type::bug","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"}],"author":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"type":"ISSUE","assignee":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358019","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358019","notes":"https://gitlab.com/api/v4/projects/278964/issues/358019/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358019/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358019","relative":"#358019","full":"gitlab-org/gitlab#358019"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106175883,"iid":358004,"project_id":278964,"title":"Index lifecycle management for Advanced Search indices","description":"## Problem\n\nAs GitLab scales, so do the size of individual shards within Advanced Search indexes and the indexes themselves. Currently, our maintenance of this problem includes:\n\n1. Create new index with more primary shards\n2. Pause indexing\n3. Reindex data from old index to new index\n4. Point alias to new index\n5. Resume indexing\n\nThe manual intervention does not scale **AND** it does not help self managed instances with shard size imbalance.\n\n## Proposal\n\nCreate a scalable automated solution to handle shards becoming too big. This will keep all of our indexes around the same size with the same number of shards which would make capacity planning more predictable as the system scales. \n\nWe can create an [Index Lifecycle Management Policy (ILM policy)](https://www.elastic.co/guide/en/elasticsearch/reference/current/index-lifecycle-management.html) for segments based on `namespace_id`. This will include:\n\n* Create all policies using Advanced Search Migrations to push changes out the self managed users\n* Use read and write aliases\n* Documents move to cold phase after X number of days (updated?)\n* Each â€œsegmentâ€ would have its own ILM - segments are data types (projects, issues, notes, etc.)\n* Example\n  * index name: projects_80_0001, projects_80_0002\n  * Write alias: projects_80_write\n  * Read alias: projects_80_read\n  * Global search: projects_*\n  * Group search: \u003cnamespace_id\u003e % \u003cnumber_of_indices\u003e = \u003cindex_alias_name\u003e\n\n\n```mermaid\ngraph TD\n    R{Sharded Read} --\u003e A1(alias: issues-1)\n    R --\u003e A2(alias: issues-2)\n    A1 --\u003e |ILM| I1(index: issues-1-1)\n    A1 --\u003e |ILM| I2(index: issues-1-2)\n    A2 --\u003e |ILM| I3(index: issues-2-1)\n    A2 --\u003e |ILM| I4(index: issues-2-2)\n    GR(alias: issues) --\u003e I1\n    GR --\u003e I2\n    GR --\u003e I3\n    GR --\u003e I4\n    RR{Sharded Write} --\u003e AA1(alias: issues-1)\n    RR --\u003e AA2(alias: issues-2)\n    AA1 -.-\u003e II1(index: issues-1-1)\n    AA1 --\u003e II2(index: issues-1-2)\n    AA2 -.-\u003e II3(index: issues-2-1)\n    AA2 --\u003e II4(index: issues-2-2)\n\n```","state":"closed","created_at":"2022-04-06T12:54:59.171Z","updated_at":"2022-09-06T14:58:53.644Z","closed_at":"2022-09-06T14:58:53.308Z","closed_by":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"labels":["Category:Global Search","auto updated","devops::data_stores","feature::enhancement","group::global search","section::enablement","type::feature","workflow::solution validation"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/358004","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/358004","notes":"https://gitlab.com/api/v4/projects/278964/issues/358004/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/358004/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#358004","relative":"#358004","full":"gitlab-org/gitlab#358004"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8653,"epic":{"id":591678,"iid":8653,"title":"Action Items from Elastic consultation","url":"/groups/gitlab-org/-/epics/8653","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":106167094,"iid":357975,"project_id":278964,"title":"Include mock integrations in tests","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nWe have some \"mock\" integrations which are only available in the development environment:\n\n- `Integrations::MockCi`\n- `Integrations::MockMonitoring`\n\nThese are excluded from some tests because we check for `Rails.env.development?` at https://gitlab.com/gitlab-org/gitlab/-/blob/531b10548509b9e2c913b3e43363b2e6010ea7e5/app/models/integration.rb#L273\n\n## Proposal\n\nChange this to `Gitlab.dev_or_test_env?`, and tweak any specs as necessary (we have several dynamic ones that loop through `Integration.available_integration_names`).\n\n\u003c!--\nPlease select the appropriate label from the following:\n    ~\"feature::addition\"\n    ~\"type::maintenance\"\n    ~\"maintenance::refactor\"\n    ~\"maintenance::pipelines\"\n    ~\"maintenance::workflow\"\n--\u003e","state":"closed","created_at":"2022-04-06T11:32:18.511Z","updated_at":"2022-11-22T18:46:32.231Z","closed_at":"2022-05-23T18:42:04.122Z","closed_by":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"labels":["Category:Integrations","Deliverable","backend","devops::manage","group::integrations","maintenance::refactor","missed-deliverable","missed:15.0","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357975","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357975","notes":"https://gitlab.com/api/v4/projects/278964/issues/357975/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357975/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357975","relative":"#357975","full":"gitlab-org/gitlab#357975"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106166444,"iid":357973,"project_id":278964,"title":"Jira connect verify context-qsh in JiraConnect::InstallationsController","description":"This is a follow-up from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83836#note_901376025\n\nWe currently only verify the JWT qsh claim in [`JiraConnect::SubscriptionsController`](https://gitlab.com/gitlab-org/gitlab/-/blob/a9bc2aa908049e8114880209e6e86925ff209705/app/controllers/jira_connect/subscriptions_controller.rb). I checked the other controllers in the JiraConnect namespace and came to the conclusion that we should verify qsh claims in [`JiraConnect::InstallationsController`](https://gitlab.com/gitlab-org/gitlab/-/blob/a9bc2aa908049e8114880209e6e86925ff209705/app/controllers/jira_connect/installations_controller.rb) too.\n\nHere is why the other controllers don't need to verify qsh:\n\n- [`JiraConnect::AppDescriptorController`](https://gitlab.com/gitlab-org/gitlab/-/blob/a9bc2aa908049e8114880209e6e86925ff209705/app/controllers/jira_connect/app_descriptor_controller.rb) this controller renders the [app descriptor ](https://developer.atlassian.com/cloud/jira/platform/connect-app-descriptor/) and should be publicly available. So no `qsh` verification needed.\n- [`JiraConnect::EventsController`](https://gitlab.com/gitlab-org/gitlab/-/blob/a9bc2aa908049e8114880209e6e86925ff209705/app/controllers/jira_connect/events_controller.rb) this is the controller that handles [lifecycle endpoints](https://developer.atlassian.com/cloud/jira/platform/connect-app-descriptor/#lifecycle). It uses asymmetric JWT verification which has a [build in]((https://gitlab.com/gitlab-org/gitlab/-/blob/a9bc2aa908049e8114880209e6e86925ff209705/app/controllers/jira_connect/events_controller.rb#L61)) qsh verification.","state":"closed","created_at":"2022-04-06T11:23:37.558Z","updated_at":"2022-11-22T18:46:32.835Z","closed_at":"2022-04-21T08:37:07.985Z","closed_by":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"labels":["Jira::ConnectApp","backend","devops::manage","group::integrations","section::dev","type::maintenance"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"}],"author":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"type":"ISSUE","assignee":{"id":16943,"username":"Andysoiron","name":"Andy Soiron","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/16943/avatar.png","web_url":"https://gitlab.com/Andysoiron"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357973","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357973","notes":"https://gitlab.com/api/v4/projects/278964/issues/357973/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357973/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357973","relative":"#357973","full":"gitlab-org/gitlab#357973"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106160653,"iid":357966,"project_id":278964,"title":"CounterJobWorker exceeds 300 seconds","description":"### Problem\n\nThe Analytics::UsageTrends::CounterJobWorker job is running over 300s and eating into our error budget.\n\n### Solution\n\nSimilar story as the consistency worker. We scan tables and count rows, for large tables this will take longer than 5 minutes.\n\n\u003e **Consistency worker**\n\u003e\n\u003e In the consistency worker, we limit the maximum runtime to 5 minutes however, we do the check after one \"item\" (group) is finished processing. The processing of one item can be longer than 5 minutes.\n\u003e 1. Iterate each aggregated issues and MRs\n\u003e 1. If the issue or MR is already deleted, remove the aggregated row.\n\u003e For large groups, this will take some time. We can fix it by tracking the execution. When the 5-minute limit is done, we stop the processing. The next job would continue the processing where the previous job finished.\n\nMR solving for Consistency Worker: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/86463.","state":"closed","created_at":"2022-04-06T10:24:09.694Z","updated_at":"2022-09-21T12:02:50.943Z","closed_at":"2022-08-26T06:02:10.735Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Deliverable","Error Budget Improvement","backend","bug::performance","devops::manage","group::optimize","priority::3","section::dev","severity::2","type::bug","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357966","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357966","notes":"https://gitlab.com/api/v4/projects/278964/issues/357966/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357966/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357966","relative":"#357966","full":"gitlab-org/gitlab#357966"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7839,"epic":{"id":492153,"iid":7839,"title":"Optimize error budget spend on sidekiq jobs","url":"/groups/gitlab-org/-/epics/7839","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106158721,"iid":357962,"project_id":278964,"title":"[VSA] The 'lead time' tile is linked incorrectly to the 'Lead time for changes' chart.","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nToday, clicking on `VSA 'lead time'` tile is linked to the `'Lead time for changes' chart`. This is an incorrect connection.\n\n![Screen_Shot_2022-04-05_at_22.07.04](/uploads/5687e33e585a532a72134d4fd6b7e2b7/Screen_Shot_2022-04-05_at_22.07.04.png)\n\n### Steps to reproduce\n\nhttps://gitlab.com/gitlab-org/gitlab/-/value_stream_analytics\n\n### What is the expected *correct* behavior?\n\nThese are the correct links:\n\n-  The VSA `lead time` tile should link to the `Issue Analytics` page -  https://gitlab.com/groups/gitlab-org/-/issues_analytics.\n-  The VSA (DORA) `Lead time for changes` tile should link to  `Lead time for changes` chart - https://gitlab.com/gitlab-org/gitlab/-/pipelines/charts?chart=lead-time.\n\n\n### Possible fixes\n\n1. Link the `lead time` tile to the `Issue Analytics` page -  https://gitlab.com/groups/gitlab-org/-/issues_analytics.\n1. Link the VSA (DORA) `Lead time for changes` to  `Lead time for changes` chart - https://gitlab.com/gitlab-org/gitlab/-/pipelines/charts?chart=lead-time.\n\n  We should correct the links in the following files:\n\n  * https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/lib/gitlab/analytics/cycle_analytics/summary/lead_time.rb\n  * https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/gitlab/analytics/cycle_analytics/summary/lead_time_for_changes.rb \n\n3. Both for VSA Groups and VSA Projects.\n\n\n* Next step will be to apply the VSA filters also for the drill-downs to the Issue Analytics page.","state":"closed","created_at":"2022-04-06T09:50:18.998Z","updated_at":"2022-04-13T13:15:12.279Z","closed_at":"2022-04-13T13:15:12.257Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["backend","devops::manage","group::optimize","priority::1","section::dev","severity::2","type::bug","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":10879254,"username":"hsnir1","name":"Haim Snir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10879254/avatar.png","web_url":"https://gitlab.com/hsnir1"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357962","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357962","notes":"https://gitlab.com/api/v4/projects/278964/issues/357962/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357962/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357962","relative":"#357962","full":"gitlab-org/gitlab#357962"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106156725,"iid":357957,"project_id":278964,"title":"Create seed data for Ci::DailyBuildGroupReportResult","description":"## Problem \n\nIn order to understand how our ~\"group::pipeline insights\" features such as [code coverage history](https://docs.gitlab.com/ee/ci/pipelines/settings.html#view-code-coverage-history) works it can be quite difficult to get the data locally.\n\nTo improve developer experience and speed up the maintainable work for this feature we should **create some seed data** that developers can ran with a **rake task** to backfill our [Ci::DailyBuildGroupReportResult](https://gitlab.com/gitlab-org/gitlab/-/blob/87458f6c91c117a297c31ccf162c5c32f9283ad2/app/models/ci/daily_build_group_report_result.rb) which is the model being used for this feature.\n\n## Solution\n\n1. Create a new class `Gitlab::Seeder::DailyBuildGroupReportResultSeeder` in [db/fixtures/development](https://gitlab.com/gitlab-org/gitlab/-/tree/87458f6c91c117a297c31ccf162c5c32f9283ad2/db/fixtures/development) \n2. Populate relevant data to be used for our feature, take inspiration from [our fixture](https://gitlab.com/gitlab-org/gitlab/-/blob/87458f6c91c117a297c31ccf162c5c32f9283ad2/spec/factories/ci/daily_build_group_report_results.rb)","state":"closed","created_at":"2022-04-06T09:23:37.591Z","updated_at":"2022-09-16T17:00:05.676Z","closed_at":"2022-08-08T15:18:54.902Z","closed_by":{"id":11758441,"username":"dbiryukov","name":"Dmytro Biryukov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11758441/avatar.png","web_url":"https://gitlab.com/dbiryukov"},"labels":["Category:Continuous Integration","Verify::P1","backend","devops::verify","good for new contributors","group::pipeline insights","missed:15.2","onboarding","priority::2","section::ops","type::maintenance","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":11758441,"username":"dbiryukov","name":"Dmytro Biryukov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11758441/avatar.png","web_url":"https://gitlab.com/dbiryukov"}],"author":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"type":"ISSUE","assignee":{"id":11758441,"username":"dbiryukov","name":"Dmytro Biryukov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11758441/avatar.png","web_url":"https://gitlab.com/dbiryukov"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357957","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357957","notes":"https://gitlab.com/api/v4/projects/278964/issues/357957/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357957/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357957","relative":"#357957","full":"gitlab-org/gitlab#357957"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106154821,"iid":357952,"project_id":278964,"title":"Disable authentication with auto-generated passwords","description":"When registering via OAuth provider, an auto-generated password is [set](https://gitlab.com/gitlab-org/gitlab/-/blob/v14.9.0-ee/lib/gitlab/auth/o_auth/auth_hash.rb#L36) for the user. We [do](https://docs.gitlab.com/ee/security/passwords_for_integrated_authentication_methods.html) this to maintain data consistency. \n\nPasswords are also required for git+HTTP operations. However, until the user does not set their own password, there's no way for them to retrieve / use the current one.\n\nSince these passwords are not usable in any way, let's disable authentication with them until the password is manually set.\n\nThis would also helped avoid https://gitlab.com/gitlab-com/gl-security/security-operations/sirt/operations/-/issues/2167.\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\nAdd lower level test to ensure the auto generated password is not usable to sign in and perform Git operations.","state":"closed","created_at":"2022-04-06T08:58:23.174Z","updated_at":"2022-10-31T11:35:24.140Z","closed_at":"2022-10-31T11:35:24.112Z","closed_by":{"id":12188811,"username":"tachyons-gitlab","name":"Aboobacker MK","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12188811/avatar.png","web_url":"https://gitlab.com/tachyons-gitlab"},"labels":["Deliverable","backend","corrective action","devops::manage","group::authentication and authorization","maintenance::refactor","needs refining","priority::3","quad-planning::complete-action","section::dev","severity::3","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":12188811,"username":"tachyons-gitlab","name":"Aboobacker MK","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12188811/avatar.png","web_url":"https://gitlab.com/tachyons-gitlab"}],"author":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"type":"ISSUE","assignee":{"id":12188811,"username":"tachyons-gitlab","name":"Aboobacker MK","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12188811/avatar.png","web_url":"https://gitlab.com/tachyons-gitlab"},"user_notes_count":15,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":"2022-07-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357952","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357952","notes":"https://gitlab.com/api/v4/projects/278964/issues/357952/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357952/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357952","relative":"#357952","full":"gitlab-org/gitlab#357952"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106135568,"iid":357930,"project_id":278964,"title":"Stored XSS in Notes (with CSP bypass for gitlab.com) - Cache invalidation","description":"We resolved https://gitlab.com/gitlab-org/gitlab/-/issues/353370 by sanitising the user provided input before rendering it, but as noted in https://gitlab.com/gitlab-org/gitlab/-/issues/353370#note_899460658 we didn't invalidate existing cached fields that can contain vulnerable rendered html. \n\nRelated to https://gitlab.com/gitlab-org/gitlab/-/issues/353370+","state":"closed","created_at":"2022-04-06T01:27:34.540Z","updated_at":"2022-06-08T13:58:55.926Z","closed_at":"2022-05-02T21:51:11.122Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["backend","bug::vulnerability","devops::create","group::code review","priority::2","section::dev","security","severity::2","type::bug","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-05-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357930","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357930","notes":"https://gitlab.com/api/v4/projects/278964/issues/357930/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357930/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357930","relative":"#357930","full":"gitlab-org/gitlab#357930"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106135292,"iid":357929,"project_id":278964,"title":"Parse iteration dates with parsePikadayDate util","description":"The bug was privately reported by a customer (through @sazhar1.)\n\n\u003e The iteration data is fetched when loading the Iteration details UI.\nBut when opening the edit menu the same values are being used and somehow being changed (both start and due date lag one day)\n\n### Reproduction\n\n![Screen_Recording_2022-04-05_at_5.55.41_PM](/uploads/01de5d379482f15f0b8dd26672a7fc0a/Screen_Recording_2022-04-05_at_5.55.41_PM.mov)","state":"closed","created_at":"2022-04-06T01:15:01.441Z","updated_at":"2022-04-26T19:14:18.699Z","closed_at":"2022-04-12T01:20:27.171Z","closed_by":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"labels":["customer","devops::plan","frontend","group::project management","section::dev","type::bug","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"}],"author":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"type":"ISSUE","assignee":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357929","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357929","notes":"https://gitlab.com/api/v4/projects/278964/issues/357929/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357929/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357929","relative":"#357929","full":"gitlab-org/gitlab#357929"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106134441,"iid":357928,"project_id":278964,"title":"Opt vulnerability_management in to new error budget calculation method","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nAs requested in https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/1343#note_901603347\n\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\n\n## Relevant links\n\n- [Draft MR](https://gitlab.com/gitlab-com/runbooks/-/merge_requests/4268)\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n- [ ] Set priority for REST API endpoints to low\n- [ ] Finish Draft MR to opt in to new measurement\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\n## Verification steps\n\nCheck that TI is using the new error budget measurements.\n\n\u003c!--\nAdd verification steps to help GitLab team members test the implementation. This is particularly useful\nduring the MR review and the ~\"workflow::verification\" step. You may not know exactly what the\nverification steps should be during issue refinement, so you can always come back later to add\nthem.\n\n1. Check-out the corresponding branch\n1. ...\n1. Profit!\n--\u003e","state":"closed","created_at":"2022-04-06T00:34:46.116Z","updated_at":"2022-05-31T03:30:53.419Z","closed_at":"2022-05-31T03:30:44.750Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago FigueirÃ³","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["[deprecated] Accepting merge requests","backend","devops::secure","group::threat insights","maintenance::workflow","quad-planning::complete-no-action","section::sec","type::maintenance","workflow::ready for development"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[],"author":{"id":480804,"username":"thiagocsf","name":"Thiago FigueirÃ³","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357928","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357928","notes":"https://gitlab.com/api/v4/projects/278964/issues/357928/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357928/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357928","relative":"#357928","full":"gitlab-org/gitlab#357928"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106132383,"iid":357922,"project_id":278964,"title":"Use Dependency Scanning FIPS-enabled images automatically","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\nDependency Scanning now switches to FIPS-enabled images automatically when running on FIPS compliant GitLab Runner. Users no longer need to set the CI variable `DS_IMAGE_SUFFIX` to use FIPS-enabled images of Dependency Scanning, and they can now remove this variable from CI configurations.\n\n### Problem to solve\n\nDependency Scanning CI jobs executed on [FIPS compliant GitLab Runners](https://docs.gitlab.com/runner/install/#fips-compliant-gitlab-runner) should automatically use [FIPS-enabled Docker images](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/#fips-enabled-images). Users shouldn't need to set CI variables to explicit use these images.\n\n### Proposal\n\nLeverage the [predefined CI variable](https://docs.gitlab.com/ee/ci/variables/predefined_variables.html) `CI_GITLAB_FIPS_MODE` to automatically switch to FIPS-enabled images when the scanning job is running on a FIPS compliant GitLab Runner.\n\nTechnically, a solution is to add a rule to all Gemnasium jobs:\n- `gemnasium-dependency_scanning`\n- `gemnasium-maven-dependency_scanning`\n- `gemnasium-python-dependency_scanning`\n\nThe additional is the same as the existing one but:\n- It has an extra condition to be triggered when `CI_GITLAB_FIPS_MODE` is true.\n- It sets `DS_IMAGE_SUFFIX` to `-fips`.\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/357922#note_916752164\n\nThere are no FIPS-enabled images for `bundler-audit` and `retire.js`, but we assume that `bundler-audit-dependency_scanning` and `retire.js-dependency_scanning` are removed from the CI template in %\"15.0\".\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Ingrid (Infrastructure Operator)](https://about.gitlab.com/handbook/product/personas/#ingrid-infrastructure-operator)\n* [Dakota (Application Development Director)](https://about.gitlab.com/handbook/product/personas/#dakota-application-development-director)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\n### Documentation\n\nhttps://docs.gitlab.com/ee/user/application_security/dependency_scanning/#fips-enabled-images needs to be updated, saying that starting from 15.0 FIPS-enabled are used automatically.\n \n### Testing\n\nThe tests should ensure that:\n- Default images are used when `CI_GITLAB_FIPS_MODE` is false.\n- Default images are also used when `CI_GITLAB_FIPS_MODE` is not set.\n- FIPS images are used when `CI_GITLAB_FIPS_MODE` is true.\n\n### Feature Usage Metrics\n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n### Implementation plan\n\n- [x] Update [CI template](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Jobs/Dependency-Scanning.gitlab-ci.yml) to use FIPS-enabled images, and provide integration tests \n- [x] Update [documentation](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/#fips-enabled-images)","state":"closed","created_at":"2022-04-05T22:51:52.975Z","updated_at":"2022-05-24T12:04:33.411Z","closed_at":"2022-05-16T15:05:13.902Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","FIPS","GitLab Ultimate","backend","devops::secure","feature::addition","group::composition analysis","section::sec","type::feature","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357922","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357922","notes":"https://gitlab.com/api/v4/projects/278964/issues/357922/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357922/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357922","relative":"#357922","full":"gitlab-org/gitlab#357922"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7857,"epic":{"id":492852,"iid":7857,"title":"Composition Analysis - Dependency Scanning - FIPS work","url":"/groups/gitlab-org/-/epics/7857","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":106132350,"iid":357921,"project_id":278964,"title":"SPIKE: Add a database flag to distinguish an invited user vs. a standard signup","description":"The original issue defines the implementation but engineering is confused and somewhat opposed to the proposal. We will use this spike to investigate a possible different implementation.\n\nSpike for:\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/354901","state":"closed","created_at":"2022-04-05T22:49:15.890Z","updated_at":"2022-07-19T21:38:06.466Z","closed_at":"2022-07-15T11:21:02.169Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["auto updated","devops::growth","group::acquisition","missed:15.0","missed:15.1","section::growth","spike","type::feature","workflow::verification"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":33,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357921","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357921","notes":"https://gitlab.com/api/v4/projects/278964/issues/357921/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357921/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357921","relative":"#357921","full":"gitlab-org/gitlab#357921"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106132328,"iid":357920,"project_id":278964,"title":"sbom + cryptographic audit of gemnasium-python","description":"### Problem to solve\n\nAll cryptographic modules used must be documented, including version, location(s) used, what they are used to accomplish.\n\n* This information will be required when going through the audit. Best to document it up front.\n* Non-FIPS compliant cryptographic modules do *not* have to be removed from the containers.\n* Non-FIPS compliant cryptographic modules can be used in the platform so long as they're not used for security practices. This use must be thoroughly documented.\n\nNIST keeps a validation database of approved/certified FIPS modules. This should be used as a primary resource regarding what we can and cannot use.\n\n### Implementation Plan\n\n- Create or update a high level flow diagram (i.e. we get ci variables from the pipeline and then run a build, gather sbom, then use the DB inside the container to check sbom for vulns, then export a report)\n- Point out places where encryption is used and what modules are used\n- check if those modules are NIST approved\n- export sbom\n\nwe'll need to be able to present this to auditors\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-05T22:47:59.356Z","updated_at":"2022-06-29T07:09:29.791Z","closed_at":"2022-05-12T13:36:53.727Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Enterprise Edition","FIPS","GitLab Ultimate","Stretch","backend","devops::secure","feature::addition","group::composition analysis","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357920","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357920","notes":"https://gitlab.com/api/v4/projects/278964/issues/357920/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357920/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357920","relative":"#357920","full":"gitlab-org/gitlab#357920"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7857,"epic":{"id":492852,"iid":7857,"title":"Composition Analysis - Dependency Scanning - FIPS work","url":"/groups/gitlab-org/-/epics/7857","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":106132211,"iid":357919,"project_id":278964,"title":"sbom + cryptographic audit of gemnasium-maven","description":"### Problem to solve\n\nAll cryptographic modules used must be documented, including version, location(s) used, what they are used to accomplish.\n\n* This information will be required when going through the audit. Best to document it up front.\n* Non-FIPS compliant cryptographic modules do *not* have to be removed from the containers.\n* Non-FIPS compliant cryptographic modules can be used in the platform so long as they're not used for security practices. This use must be thoroughly documented.\n\nNIST keeps a validation database of approved/certified FIPS modules. This should be used as a primary resource regarding what we can and cannot use.\n\n### Implementation Plan\n\n- Create or update a high level flow diagram (i.e. we get ci variables from the pipeline and then run a build, gather sbom, then use the DB inside the container to check sbom for vulns, then export a report)\n- Point out places where encryption is used and what modules are used\n- check if those modules are NIST approved\n- export sbom\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-05T22:46:39.069Z","updated_at":"2022-05-25T10:22:28.730Z","closed_at":"2022-05-12T13:52:43.514Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Enterprise Edition","FIPS","GitLab Ultimate","Stretch","backend","devops::secure","feature::addition","group::composition analysis","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357919","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357919","notes":"https://gitlab.com/api/v4/projects/278964/issues/357919/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357919/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357919","relative":"#357919","full":"gitlab-org/gitlab#357919"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7857,"epic":{"id":492852,"iid":7857,"title":"Composition Analysis - Dependency Scanning - FIPS work","url":"/groups/gitlab-org/-/epics/7857","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":106132109,"iid":357918,"project_id":278964,"title":"sbom + cryptographic audit of gemnasium","description":"### Problem to solve\n\nAll cryptographic modules used must be documented, including version, location(s) used, what they are used to accomplish.\n\n* This information will be required when going through the audit. Best to document it up front.\n* Non-FIPS compliant cryptographic modules do *not* have to be removed from the containers.\n* Non-FIPS compliant cryptographic modules can be used in the platform so long as they're not used for security practices. This use must be thoroughly documented.\n\nNIST keeps a validation database of approved/certified FIPS modules. This should be used as a primary resource regarding what we can and cannot use.\n\n### Implementation Plan\n\n- Create or update a high level flow diagram (i.e. we get ci variables from the pipeline and then run a build, gather sbom, then use the DB inside the container to check sbom for vulns, then export a report)\n- Point out places where encryption is used and what modules are used\n- check if those modules are NIST approved\n- export sbom\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-05T22:42:50.840Z","updated_at":"2022-05-25T10:22:28.652Z","closed_at":"2022-05-12T13:37:26.535Z","closed_by":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","FIPS","GitLab Ultimate","backend","devops::secure","feature::addition","group::composition analysis","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"}],"author":{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},"type":"ISSUE","assignee":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357918","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357918","notes":"https://gitlab.com/api/v4/projects/278964/issues/357918/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357918/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357918","relative":"#357918","full":"gitlab-org/gitlab#357918"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7857,"epic":{"id":492852,"iid":7857,"title":"Composition Analysis - Dependency Scanning - FIPS work","url":"/groups/gitlab-org/-/epics/7857","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":106125902,"iid":357900,"project_id":278964,"title":"Support additional filters when iterating in batches","description":"**Context:**\n\nCurrently, the `PrimaryKeyBatchingStrategy` always iterates over the whole table. This can cause performance issues if we only want to transform a small subset of data.\n\nHypothetical example:\n\n- Table: Cars\n- Records: 200M\n- BMW cars: 100 = `Cars.where(brand: bmw).size`\n\nProblem: \nIf we want to make a data transformation only on BMW cars, our batching strategy will iterate over the 200M records.\n\n**Goal:**\n\nAdd support for applying additional filters when iterating a table.","state":"closed","created_at":"2022-04-05T19:07:18.041Z","updated_at":"2022-10-30T16:03:34.929Z","closed_at":"2022-10-26T04:11:09.303Z","closed_by":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"labels":["Category:Database","Engineering Allocation","auto updated","backend","database::active","devops::data_stores","group::database","missed:14.6","missed:14.7","missed:15.2","missed:15.3","missed:15.4","missed:15.5","section::enablement","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo FrazÃ£o","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"}],"author":{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo FrazÃ£o","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"},"type":"ISSUE","assignee":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357900","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357900","notes":"https://gitlab.com/api/v4/projects/278964/issues/357900/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357900/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357900","relative":"#357900","full":"gitlab-org/gitlab#357900"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7453,"epic":{"id":428833,"iid":7453,"title":"Batched Background Migrations: Improve batch handling","url":"/groups/gitlab-org/-/epics/7453","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":106125065,"iid":357898,"project_id":278964,"title":"Update license-finder to 7.0.1","description":"### Problem to solve\n\nlicense finder `7.0.1` is available, we should consider upgrading [our analyzer](https://gitlab.com/gitlab-org/security-products/analyzers/license-finder).\n\n### Proposal\n\nPlease carefully check the [how to update the upstream Scanner](https://gitlab.com/gitlab-org/security-products/analyzers/license-finder#how-to-update-the-upstream-scanner).\n\nOr follow the default workflow:\n\n- [ ] review the [changelog](https://github.com/pivotal/LicenseFinder/blob/master/CHANGELOG.md)\n- [ ] update the pinned version (in the Dockerfile or script or template, the mileage may vary)\n- [ ] make sure all test passes\n\n### Testing\n\n- [ ] Check relevant test projects leveraging license-finder and make sure QA pipelines are passing with this new version:\n[QA projects for License Compliance](https://gitlab.com/explore/projects?tag=GL-Secure-QA,License+Management)\n\n### What does success look like, and how can we measure that?\n\nOur feature is leveraging the latest version (`7.0.1`) of license-finder.\n\n### What is the type of buyer?\n\n~\"GitLab Ultimate\"\n\n### Links / references","state":"closed","created_at":"2022-04-05T18:45:50.811Z","updated_at":"2022-05-24T12:04:33.914Z","closed_at":"2022-05-16T19:11:38.384Z","closed_by":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","group::composition analysis","maintenance::dependency","priority::2","quad-planning::complete-action","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357898","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357898","notes":"https://gitlab.com/api/v4/projects/278964/issues/357898/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357898/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357898","relative":"#357898","full":"gitlab-org/gitlab#357898"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":106123845,"iid":357891,"project_id":278964,"title":"Move gitlab_subscription to a correct level","description":"The following discussion from !84069 should be addressed:\n\n- [ ] @dstull started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84069#note_901414410):  (+1 comment)\n\n    \u003e **thought (non-blocking):** \n    \u003e \n    \u003e Interesting/Unrelated thought I had here.\n    \u003e \n    \u003e I don't think this file is in the right location.  It is not extending a `foss` module, so typically I would expect the path of this to be `ee/lib/api/entities/gitlab_subscription.rb` instead.\n    \u003e \n    \u003e nothing to do here, merely something perhaps if we care enough to investigate in a follow-up.","state":"closed","created_at":"2022-04-05T18:15:22.995Z","updated_at":"2022-04-12T14:09:49.830Z","closed_at":"2022-04-11T13:45:23.698Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["Category:Purchase","Unplanned","backend","devops::fulfillment","group::purchase","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357891","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357891","notes":"https://gitlab.com/api/v4/projects/278964/issues/357891/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357891/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357891","relative":"#357891","full":"gitlab-org/gitlab#357891"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106123025,"iid":357886,"project_id":278964,"title":"Update GLEX to resolve concurrency issues","description":"There are bugs that have been fixed in GLEX that we want in the gitlab project.\n\nWe probably need to:\n\n- [x] Cut a new version of GLEX\n- [x] Bump GLEX in GitLab\n\nrelated:\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/353921","state":"closed","created_at":"2022-04-05T17:49:48.776Z","updated_at":"2022-04-18T07:04:28.177Z","closed_at":"2022-04-12T16:11:53.120Z","closed_by":{"id":4303974,"username":"jejacks0n1","name":"Jeremy Jackson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303974/avatar.png","web_url":"https://gitlab.com/jejacks0n1"},"labels":["DEPRECATED Growth-Deliverable","auto updated","devops::growth","experiment framework","group::adoption DEPRECATED","section::growth","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4303974,"username":"jejacks0n1","name":"Jeremy Jackson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303974/avatar.png","web_url":"https://gitlab.com/jejacks0n1"}],"author":{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},"type":"ISSUE","assignee":{"id":4303974,"username":"jejacks0n1","name":"Jeremy Jackson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303974/avatar.png","web_url":"https://gitlab.com/jejacks0n1"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357886","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357886","notes":"https://gitlab.com/api/v4/projects/278964/issues/357886/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357886/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357886","relative":"#357886","full":"gitlab-org/gitlab#357886"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106121088,"iid":357879,"project_id":278964,"title":"Track original import exceptions for easier debugging","description":"Related to the discussion in https://gitlab.com/gitlab-org/gitlab/-/issues/357340#note_901491654 \n\nFile-based Import process usually swallos any real exceptions during import and re-raises ones with filtered out contents, different backtrace and error message. This can be problematic when debugging imports to try and understand what the real issues is.\n\nAs suggested by @stanhu we should track the original exception in Sentry to be able to see what the original error is and reduce the feedback loop when debugging imports.\n\n```diff\ndiff --git a/lib/gitlab/import_export/importer.rb b/lib/gitlab/import_export/importer.rb\nindex c2510bbe938..a2734f20804 100644\n--- a/lib/gitlab/import_export/importer.rb\n+++ b/lib/gitlab/import_export/importer.rb\n@@ -29,6 +29,8 @@ def execute\n         # This is a state we don't want them to be, so we better delete them.\n         remove_non_migrated_snippets\n \n+        ::Gitlab::ErrorTracking.track_exception(e)\n+\n         raise Projects::ImportService::Error, e.message\n       ensure\n         remove_base_tmp_dir\n\n```","state":"closed","created_at":"2022-04-05T16:57:14.178Z","updated_at":"2022-04-06T17:36:56.134Z","closed_at":"2022-04-06T17:36:56.096Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["Category:Importers","Importer:Project Export/Import","auto updated","devops::manage","estimation::completed","group::import","section::dev","type::maintenance","workflow::ready for development"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357879","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357879","notes":"https://gitlab.com/api/v4/projects/278964/issues/357879/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357879/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357879","relative":"#357879","full":"gitlab-org/gitlab#357879"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106120905,"iid":357877,"project_id":278964,"title":"FE: Interactive validation in security policy editor","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nTroubleshooting invalid security policies is currently somewhat difficult. I would be much easier if we could have interactive validation with in-line error reporting like we have on the CI / CD Editor:\n\n![](https://gitlab.com/gitlab-org/gitlab/uploads/5dd724c35f3ec249cbd9cdf34a263372/Screen_Shot_2021-09-21_at_7.43.46_AM.png)\n\nWe should be able to re-use its implementation with the [security orchestration policy schema](https://gitlab.com/gitlab-org/gitlab/-/blob/5fab6ac5747f72b3dc4bfb796904db118a31bb01/ee/app/validators/json_schemas/security_orchestration_policy.json)\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\nPossible implementation references:\n\n- https://gitlab.com/gitlab-org/gitlab/-/blob/1e7a2d16b7b67fde966aa3ca0cb510a97dd52a5b/app/assets/javascripts/editor/extensions/source_editor_ci_schema_ext.js#L5\n- https://gitlab.com/gitlab-org/gitlab/-/blob/1e7a2d16b7b67fde966aa3ca0cb510a97dd52a5b/app/assets/javascripts/pipeline_editor/components/editor/text_editor.vue#L18\n\n### Implementation\n- [ ] ~frontend Download the schema from the new `fetch_schema_service` when the page is loaded in the [scan_execution_policy_editor](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/scan_execution_policy/scan_execution_policy_editor.vue)\n- [ ] ~frontend pass the schema into [policy_editor_layout](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/policy_editor_layout.vue) on a newly created `schema` prop to the `policy-yaml-editor`\n- [ ] ~frontend  update [policy_yaml_editor](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_yaml_editor.vue) to [register the schema with the source_editor instance](https://gitlab.com/gitlab-org/gitlab/blob/master/app/assets/javascripts/pipeline_editor/components/editor/text_editor.vue#L18)\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-05T16:51:44.874Z","updated_at":"2022-08-01T03:22:55.445Z","closed_at":"2022-07-28T14:11:46.864Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","devops::govern","direction","feature::enhancement","frontend","frontend-weight::3","group::security policies","missed:15.2","section::sec","type::feature","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357877","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357877","notes":"https://gitlab.com/api/v4/projects/278964/issues/357877/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357877/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357877","relative":"#357877","full":"gitlab-org/gitlab#357877"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7843,"epic":{"id":492614,"iid":7843,"title":"Interactive validation in security policy editor","url":"/groups/gitlab-org/-/epics/7843","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106120886,"iid":357876,"project_id":278964,"title":"BE: Interactive validation in security policy editor","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nTroubleshooting invalid security policies is currently somewhat difficult. I would be much easier if we could have interactive validation with in-line error reporting like we have on the CI / CD Editor:\n\n![](https://gitlab.com/gitlab-org/gitlab/uploads/5dd724c35f3ec249cbd9cdf34a263372/Screen_Shot_2021-09-21_at_7.43.46_AM.png)\n\nWe should be able to re-use its implementation with the [security orchestration policy schema](https://gitlab.com/gitlab-org/gitlab/-/blob/5fab6ac5747f72b3dc4bfb796904db118a31bb01/ee/app/validators/json_schemas/security_orchestration_policy.json)\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\nPossible implementation references:\n\n- https://gitlab.com/gitlab-org/gitlab/-/blob/1e7a2d16b7b67fde966aa3ca0cb510a97dd52a5b/app/assets/javascripts/editor/extensions/source_editor_ci_schema_ext.js#L5\n- https://gitlab.com/gitlab-org/gitlab/-/blob/1e7a2d16b7b67fde966aa3ca0cb510a97dd52a5b/app/assets/javascripts/pipeline_editor/components/editor/text_editor.vue#L18\n\n### Implementation\n- [x] ~documentation extend JSON schema for Security Policies to have rich descriptions explaining each field,\n- [x] ~backend Create `ee/app/services/security/security_orchestration_policies/fetch_schema_service.rb` which reads the JSON schema file and returns the raw JSON.\n- [x] ~backend Add a `schema` action to `ee/app/controllers/projects/security/policies_controller.rb` which returns the raw schema JSON.\n- [x] ~backend Update `ee/config/routes/project.rb` so that `resources :policies` is able to return the schema.\n\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-05T16:51:07.515Z","updated_at":"2022-07-21T03:37:45.238Z","closed_at":"2022-05-19T12:19:58.071Z","closed_by":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"labels":["Category:Security Policy Management","Deliverable","Enterprise Edition","GitLab Ultimate","backend","backend-weight::2","devops::govern","direction","feature::enhancement","group::security policies","missed-deliverable","missed:14.10","section::sec","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[],"author":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"type":"ISSUE","assignee":null,"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357876","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":4},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357876","notes":"https://gitlab.com/api/v4/projects/278964/issues/357876/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357876/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357876","relative":"#357876","full":"gitlab-org/gitlab#357876"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7843,"epic":{"id":492614,"iid":7843,"title":"Interactive validation in security policy editor","url":"/groups/gitlab-org/-/epics/7843","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106116256,"iid":357858,"project_id":278964,"title":"Exclude Advanced Search indexing if the project includes no repositories","description":"## Overview\n\nWhile reproducing an ElasticSearch issue for a large Premium customer ([internal ticket](https://gitlab.zendesk.com/agent/tickets/190271)), I noticed that `sudo gitlab-rake gitlab:elastic:projects_not_indexed` will keep including projects that contain no repo (but issues).\n\nWould it make sense to note that in the output, or even add a select/reject method to not include such projects in the first place?\n\n\n## How to validate locally \n\n_Numbered steps to set up and validate the change are strongly suggested._\n\n1. Setup a GitLab with ES integration, and some projects with repos\n1. Check the Rake output before and after adding another project that contains no repository.","state":"closed","created_at":"2022-04-05T15:25:01.537Z","updated_at":"2022-05-30T15:58:30.229Z","closed_at":"2022-04-06T17:48:49.952Z","closed_by":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"labels":["Category:Global Search","advanced search","devops::data_stores","group::global search","section::enablement","type::feature","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"}],"author":{"id":5724558,"username":"JohnMcGuire","name":"John McGuire","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5724558/avatar.png","web_url":"https://gitlab.com/JohnMcGuire"},"type":"ISSUE","assignee":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357858","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357858","notes":"https://gitlab.com/api/v4/projects/278964/issues/357858/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357858/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357858","relative":"#357858","full":"gitlab-org/gitlab#357858"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106111546,"iid":357850,"project_id":278964,"title":"Enqueuer: reduce the lease timeout duration","description":"## :fire: Problem\n\nThe Enqueuer is using a lease [timeout](https://gitlab.com/gitlab-org/gitlab/-/blob/4bd32e42c5cf11b70d4c773491739e464d80fe09/app/workers/container_registry/migration/enqueuer_worker.rb#L11) duration of `1.hour`.\n\nDuring testing, we hit a situation where the background job was \"killed\" and the lease was not released.\n\nThis led to a quite long wait time as we had to wait for the lease key to timeout.\n\n## :fire_engine: Solution\n\nUpdate the Enqueuer lease timeout to `30.minutes`","state":"closed","created_at":"2022-04-05T14:13:17.211Z","updated_at":"2022-04-07T15:29:24.515Z","closed_at":"2022-04-07T15:29:24.474Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration Blocker","Container Registry Migration Unplanned","Container Registry Migration::Phase 2","backend","devops::package","group::package registry","ruby","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357850","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357850","notes":"https://gitlab.com/api/v4/projects/278964/issues/357850/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357850/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357850","relative":"#357850","full":"gitlab-org/gitlab#357850"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106106954,"iid":357845,"project_id":278964,"title":"DAST browser-based scans should show the correct finding summary","description":"\n### Problem to solve\n\nDAST browser-based scans include a summary of the evidence in a finding so that users can verify whether or not the finding is a false-positive.\n\nThe summary of a finding is made up of all matched values in the vulnerability check. This can lead to summaries that contain content that is not relevant to the finding, and hamper a user's ability to determine whether or not the finding is an FP.\n\n### Examples\n\nSome example summaries for checks:\n\n- `614.1` summary `\"cwe_session_id=********; Domain=dast-cwe-checks; Expires=1969-12-31 23:59:59 +0000 UTC; Path=/ cwe_user_id=********; Domain=dast-cwe-checks; Expires=1969-12-31 23:59:59 +0000 UTC; Path=/ https://dast-cwe-checks:8090/auth\"`. This contains two cookies and a URL. It is hard for the user to know which cookie is related to the finding, and the URL provides no extra information.\n- `16.1` summary `\"\"`. No summary is not useful.\n- `16.2` summary `server`. Not showing what the `server` information contains means the user can't determine if the finding is an FP or not.\n\n### Proposal\n\nSummary could be built using the same templating logic that is used in report uniqueness templates (which are used to detect duplicate findings).\n\nFor example, a summary for `16.2` could have the template `request header '{request-header:name}' has value '{request_header:value}'`, which would render on the finding as `request header 'server' has value 'nginx 1.2.1'`.\n\nIt's assumed in the above example that `request_header` is the name of a matcher that defined in the `16.2` yaml file.\n\n### Implementation\n\n- [ ] Add `summary` to the passive check DAST CWE schema\n- [ ] Define summary for each DAST CWE passive check\n- [ ] Parse the summary in Browserker, and build a model similar to the uniqueness template\n- [ ] The uniqueness template and summary in Browserker should be related\n  - If the uniqueness template returns two instances, then there should be two instances of the summary\n  - If this is not possible, an error should be raised (implies that the YAML file is incorrect)\n- [ ] Render the summary into the evidence field\n- [ ] Aggregated findings should combine summaries\n  - At the moment, the summary of the aggregated finding is the first finding's summary. This will hide information.\n  - Join summaries that are unique from all findings\n  - If required, we can make this a separate issue\n- [x] ~~Keep in mind: the same may need to happen to `description` of a finding in future~~ Cam: Suggest we don't keep this mind, we can worry about it in future.\n\n### Implementation Plan\n\n- [x] [Generalize UniqueBy to represent templates ](https://gitlab.com/gitlab-org/security-products/analyzers/browserker/-/merge_requests/734)\n- [x] [Duplicate `report_uniqueness` under `templates` in `dast-cwe-checks`](https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/160)\n- [X] [Add placeholder `summary` under `templates` in `dast-cwe-checks` using `report_uniqueness`](https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/160)\n- [x] [Support parsing `report_uniqueness` from new field](https://gitlab.com/gitlab-org/security-products/analyzers/browserker/-/merge_requests/741)\n- [X] [Remove top-level `report_uniqueness`](https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/163) ([browserker](https://gitlab.com/gitlab-org/security-products/analyzers/browserker/-/merge_requests/744))\n- [x] Add `summary` to `templates` (https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/169, https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/168, https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/167, https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/merge_requests/165)\n- [x] [Add support for parsing `summary`](https://gitlab.com/gitlab-org/security-products/analyzers/browserker/-/merge_requests/749) \n- [x] [Dynamically generated summaries](https://gitlab.com/gitlab-org/security-products/analyzers/browserker/-/merge_requests/748)\n\n### Follow-up\n\n- [ ] `checks/16/16.7.yaml` display issues with the header\n- [ ] https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/issues/4\n- [ ] https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/issues/5\n- [ ] https://gitlab.com/gitlab-org/security-products/dast-cwe-checks/-/issues/6","state":"closed","created_at":"2022-04-05T13:13:55.650Z","updated_at":"2022-08-22T03:20:57.542Z","closed_at":"2022-08-16T00:39:22.809Z","closed_by":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"labels":["Category:DAST","GitLab Ultimate","dast::browserker","devops::secure","group::dynamic analysis","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"}],"author":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"type":"ISSUE","assignee":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357845","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":19,"completed_count":9},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"9 of 19 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357845","notes":"https://gitlab.com/api/v4/projects/278964/issues/357845/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357845/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357845","relative":"#357845","full":"gitlab-org/gitlab#357845"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8034,"epic":{"id":519327,"iid":8034,"title":"Browser-based DAST post-passive check cleanup","url":"/groups/gitlab-org/-/epics/8034","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106106484,"iid":357844,"project_id":278964,"title":"Backend: More user-friendly error messages for CI includes","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\nWe don't provide clear error messages to help developers troubleshoot problems with CI includes. See the proposal section with the details of the errors to improve.\n\nThis issue originated in this [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/81982#note_873904619)\n\n\u003c!-- What is the user problem you are trying to solve with this issue? --\u003e\n\n### Proposal\n\n| Problem | Current error screenshot | Proposed new error text |\n| ------ | ------ | ------ |\n| We have these [include](https://docs.gitlab.com/ee/ci/yaml/#include) types: `local`, `file`, `remote`, and `template`. All of them have their own structure and syntax. Your \"include\" does not match any of our include types. | ![image](/uploads/3c6e4b67a83634bba6616d74c1aa1259/image.png) | `abc` is not a valid subkey for `include`. Valid subkeys are `local`, `file`, `remote`, or `template`. [Learn more](https://docs.gitlab.com/ee/ci/yaml/#include). |\n| When a user includes different types of includes in the same entry (like `project` and `template` in this case), we show the same error. | ![image](/uploads/db6bb4a734628699656954d1834d3d84/image.png) | Each include must use only one of `local`, `file`, `remote`, or `template`. [Learn more](https://docs.gitlab.com/ee/ci/yaml/#include). |\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n### Intended users\n\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Ingrid (Infrastructure Operator)](https://about.gitlab.com/handbook/product/personas/#ingrid-infrastructure-operator)\n* [Dakota (Application Development Director)](https://about.gitlab.com/handbook/product/personas/#dakota-application-development-director)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\n### Feature Usage Metrics\n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\nN/A\n\n--\u003e\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-05T13:07:15.684Z","updated_at":"2022-11-17T20:38:12.768Z","closed_at":"2022-11-15T16:12:54.537Z","closed_by":{"id":12867582,"username":"lma-git","name":"Leaminn Ma","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12867582/avatar.png","web_url":"https://gitlab.com/lma-git"},"labels":["Category:Pipeline Authoring","GitLab Free","GitLab Premium","GitLab Ultimate","SUS::Impacting","Technical Writing","UI text","UX","backend","backend-weight::2","candidate::15.6","devops::verify","direction","documentation","feature::enhancement","group::pipeline authoring","onboarding","priority::3","section::ops","severity::3","type::feature"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12867582,"username":"lma-git","name":"Leaminn Ma","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12867582/avatar.png","web_url":"https://gitlab.com/lma-git"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":12867582,"username":"lma-git","name":"Leaminn Ma","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12867582/avatar.png","web_url":"https://gitlab.com/lma-git"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357844","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357844","notes":"https://gitlab.com/api/v4/projects/278964/issues/357844/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357844/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357844","relative":"#357844","full":"gitlab-org/gitlab#357844"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106098900,"iid":357826,"project_id":278964,"title":"Follow-up from \"Add how to migrate to instrumentation class page\"","description":"The following discussion from !84060 should be addressed:\n\n- [ ] @mikolaj_wawrzyniak started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84060#note_899580300): \n\n    \u003e **suggestion (non-blocking):** We might provide some helping tips how to decide which metric type to use. For ~\"group::product intelligence\" engineers this task might feel trivial, but it might not be to people outside of our group","state":"closed","created_at":"2022-04-05T11:26:59.134Z","updated_at":"2022-09-06T17:25:57.281Z","closed_at":"2022-08-16T10:01:55.501Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["devops::analytics","docs-only","documentation","group::product intelligence","maintenance::refactor","section::analytics","type::maintenance","workflow::production"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357826","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357826","notes":"https://gitlab.com/api/v4/projects/278964/issues/357826/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357826/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357826","relative":"#357826","full":"gitlab-org/gitlab#357826"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106097394,"iid":357824,"project_id":278964,"title":"VSA: VSA table - rename the Time column to 'Duration time'","description":"# Problem \n\nIn the VSA table, the data format of the Time column is [unclear.](https://gitlab.com/gitlab-org/gitlab/-/issues/353554#note_900912219) \n\n# Solution \n\n1. Rename the `Time` column to `Duration time`.\n2. Both on project VSA and group VSA.\n3. Ensure that documentation / screenshots are updated as part of the issue.\n\n![Screen_Shot_2022-04-05_at_14.06.09](/uploads/885b6d9f87c6dadc5ed510c9807f66bb/Screen_Shot_2022-04-05_at_14.06.09.png)\n\n# Implementation Guide\n\n* The stage table is a shared component between group and project level VSA, so [changing the title in here](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/cycle_analytics/components/stage_table.vue#L136) should apply to both.\n* We might also need to update some tests, possibly the [stage table tests](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/frontend/cycle_analytics/stage_table_spec.js).","state":"closed","created_at":"2022-04-05T11:09:18.626Z","updated_at":"2022-06-08T06:51:56.755Z","closed_at":"2022-06-06T01:46:43.319Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["devops::manage","documentation","feature::enhancement","frontend","group::optimize","missed:15.0","priority::4","section::dev","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":10879254,"username":"hsnir1","name":"Haim Snir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10879254/avatar.png","web_url":"https://gitlab.com/hsnir1"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357824","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357824","notes":"https://gitlab.com/api/v4/projects/278964/issues/357824/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357824/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357824","relative":"#357824","full":"gitlab-org/gitlab#357824"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106094314,"iid":357820,"project_id":278964,"title":"NoMethodError returned on Jira issues list when Jira is not enabled","description":"### Summary\nWhen accessing the Jira issues list directly from URL, a 500 error is returned.\n\n### Steps to reproduce\n1. Disable the Jira integration (if any).\n2. Visit the Jira issues list page at `:project/-/integrations/jira/issues`. For example, `http://127.0.0.1:3000/gitlab-org/gitlab-shell/-/integrations/jira/issues`.\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\nAn error page.\n\n### What is the expected *correct* behavior?\nUser should either be redirected to project root with some sort of notice / alert or return a 404 page.\n\n### Relevant logs and/or screenshots\n![Screenshot_2022-04-05_at_17-15-07_NoMethodError_at__gitlab-org_gitlab-shell_-_integrations_jira_issues](/uploads/b77799bff31461eedc268079c0853ef8/Screenshot_2022-04-05_at_17-15-07_NoMethodError_at__gitlab-org_gitlab-shell_-_integrations_jira_issues.png)\n\n### Output of checks\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-04-05T10:19:40.976Z","updated_at":"2022-11-22T18:46:36.228Z","closed_at":"2022-05-08T21:42:33.063Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Integrations","Deliverable","Integration::Jira","Jira::IssueList","backend","devops::manage","group::integrations","missed-deliverable","missed:14.10","section::dev","type::bug","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357820","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357820","notes":"https://gitlab.com/api/v4/projects/278964/issues/357820/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357820/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357820","relative":"#357820","full":"gitlab-org/gitlab#357820"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3622,"epic":{"id":69342,"iid":3622,"title":"MVC: Expand Jira integration to allow viewing issues","url":"/groups/gitlab-org/-/epics/3622","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106092644,"iid":357818,"project_id":278964,"title":"Link to package managers when viewing dependency files with highlight.js","description":"As part of [Highlighting source code on the frontend using Highlight.js](https://gitlab.com/groups/gitlab-org/-/epics/7146) we should ensure package names are linked to their respective package managers when viewing dependency files.\n\nDependency files that we should generate links for include:\n\n- Gemfile\n- Gemspec\n- PackageJson\n- ComposerJson\n- Podfile\n- Podspec\n- PodspecJson\n- Cartfile\n- GodepsJson\n- RequirementsTxt\n- CargoToml\n- GoMod\n- GoSum","state":"closed","created_at":"2022-04-05T10:04:03.899Z","updated_at":"2022-04-12T11:50:44.659Z","closed_at":"2022-04-12T11:50:44.268Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","devops::create","frontend","group::source code","section::dev","type::feature"],"milestone":null,"assignees":[],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357818","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357818","notes":"https://gitlab.com/api/v4/projects/278964/issues/357818/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357818/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357818","relative":"#357818","full":"gitlab-org/gitlab#357818"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7146,"epic":{"id":387817,"iid":7146,"title":"Highlight source code syntax on the frontend using HighlightJS","url":"/groups/gitlab-org/-/epics/7146","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106086682,"iid":357810,"project_id":278964,"title":"Jira project_key is validated even when integration is not active","description":"### Summary\nBy default, we don't validate integrations when they are not set to active. We should edit the condition in https://gitlab.com/gitlab-org/gitlab/blob/514e4dab4ccacdb222e333820dfa47cfca9e5591/ee/app/models/ee/integrations/jira.rb#L70.\n\n### Steps to reproduce\n1. Go to **Project \u003e Integrations \u003e Jira**.\n2. Select the **Enable Jira issues** checkbox but don't fill in the **Jira project key**.\n3. Click **Save changes**.\n\n### What is the current *bug* behavior?\nThe page returns the following error:\n```\nThe form contains the following error:\n\nProject key can't be blank\n```\n\n### What is the expected *correct* behavior?\nForm should save without errors.\n\n### Relevant logs and/or screenshots\n![Jira_project_key_validation](/uploads/7a7f9bb5d6819054e8145d540c19877b/Jira_project_key_validation.png)\n\n### Output of checks\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-04-05T08:50:44.748Z","updated_at":"2022-11-22T18:46:37.515Z","closed_at":"2022-06-15T06:58:43.317Z","closed_by":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"labels":["Category:Integrations","Integration::Jira","backend","devops::manage","good for new contributors","group::integrations","section::dev","type::bug","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357810","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357810","notes":"https://gitlab.com/api/v4/projects/278964/issues/357810/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357810/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357810","relative":"#357810","full":"gitlab-org/gitlab#357810"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5033,"epic":{"id":160034,"iid":5033,"title":"Improve test functionality of the integrations","url":"/groups/gitlab-org/-/epics/5033","group_id":9970},"iteration":null,"health_status":null},{"id":106065800,"iid":357778,"project_id":278964,"title":"Follow-up from \"New Authentication and Authorization section\"","description":"The following discussion from !84141 should be addressed:\n\n- [ ] @phikai started a [discussion](hhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/84141#note_899766924):\n\n\u003e \u003e Does \\*\\* allow for rule configuration for any depth?\n\u003e \u003e \n\u003e @kwiebers It doesn't look like we specifically document that behavior, but it seems like @ashmckenzie checked it.\n\u003e \n\u003e @ashmckenzie @kwiebers consider a ~documentation contribution to add that to the page.","state":"closed","created_at":"2022-04-05T00:32:39.624Z","updated_at":"2022-05-31T15:25:33.725Z","closed_at":"2022-05-31T15:25:29.580Z","closed_by":{"id":9425173,"username":"hsutor","name":"Hannah Sutor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9425173/avatar.png","web_url":"https://gitlab.com/hsutor"},"labels":["Engineering Productivity","auto updated","automation:ml","documentation","group::authentication and authorization","section::dev","type::maintenance"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":4303148,"username":"kwiebers","name":"Kyle Wiebers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303148/avatar.png","web_url":"https://gitlab.com/kwiebers"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357778","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357778","notes":"https://gitlab.com/api/v4/projects/278964/issues/357778/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357778/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357778","relative":"#357778","full":"gitlab-org/gitlab#357778"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106064301,"iid":357775,"project_id":278964,"title":"Elasticsearch Quarantine jobs fail","description":"As evidenced here https://gitlab.com/gitlab-org/gitlab-qa-mirror/-/jobs/2283809734 the elasticsearch quarantine jobs appear to be ~~running with elasticsearch service off~~ returning empty search results. The error we're getting from these jobs is `Scope not supported without Elasticsearch!`.\n\nNeed to look at gitlab-qa and perhaps the recent changes to gitlab-ci.yml common changes to find root cause. Suspect these jobs are starting without using gitlab-qa's `Scenario::Test::Integration::Elasticsearch` spec suite.","state":"closed","created_at":"2022-04-04T23:47:41.605Z","updated_at":"2022-05-30T15:58:31.912Z","closed_at":"2022-04-22T23:19:11.248Z","closed_by":{"id":4945780,"username":"ebanks","name":"Erick Banks","state":"active","avatar_url":"https://secure.gravatar.com/avatar/80fec5512e3a226d9fd734eb8875d4e5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ebanks"},"labels":["Category:Global Search","QA","devops::data_stores","group::global search","section::enablement","type::bug","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4945780,"username":"ebanks","name":"Erick Banks","state":"active","avatar_url":"https://secure.gravatar.com/avatar/80fec5512e3a226d9fd734eb8875d4e5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ebanks"}],"author":{"id":4945780,"username":"ebanks","name":"Erick Banks","state":"active","avatar_url":"https://secure.gravatar.com/avatar/80fec5512e3a226d9fd734eb8875d4e5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ebanks"},"type":"ISSUE","assignee":{"id":4945780,"username":"ebanks","name":"Erick Banks","state":"active","avatar_url":"https://secure.gravatar.com/avatar/80fec5512e3a226d9fd734eb8875d4e5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ebanks"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357775","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357775","notes":"https://gitlab.com/api/v4/projects/278964/issues/357775/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357775/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357775","relative":"#357775","full":"gitlab-org/gitlab#357775"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106062991,"iid":357770,"project_id":278964,"title":"[Feature flag] Cleanup mrc_api_use_raw_diffs_from_gitaly","description":"\u003c!-- Title suggestion:  --\u003e\n\n## Summary\n\nThis issue is to cleanup the `mrc_api_use_raw_diffs_from_gitaly` feature flag, after the feature flag has been enabled by default for an appropriate amount of time in production.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\nAdded in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/46190\n\nIssue: https://gitlab.com/gitlab-org/gitlab/-/issues/225322\n## Owners\n\n- Team: ~\"group::code review\" \n- Most appropriate slack channel to reach out to: `#g_create_code-review`\n- Best individual to reach out to: NAME\n- PM: @phikai \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n## Expectations\n\n### What might happen if this goes wrong?\n\n\u003c!-- Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### Cleaning up the feature flag\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.","state":"closed","created_at":"2022-04-04T22:44:47.206Z","updated_at":"2022-04-06T15:39:32.590Z","closed_at":"2022-04-06T15:39:32.568Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["backend","devops::create","feature flag","feature::addition","group::code review","section::dev","type::feature"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357770","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357770","notes":"https://gitlab.com/api/v4/projects/278964/issues/357770/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357770/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357770","relative":"#357770","full":"gitlab-org/gitlab#357770"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106039777,"iid":357680,"project_id":278964,"title":"Ensure UI never calls Gitaly's GetRepositorySize directly","description":"## Completed Effort\n\nIn https://gitlab.com/gitlab-org/gitaly/-/merge_requests/4430, the Gitaly team changed the way `GetRepositorySize` calculates the disk usage of a repository. Previously, the operation did a simple `du -sk` on the `.git` directory. While this was efficient and technically gives us the physical disk usage of each repository, it's not accurate from the perspective that the **way** we store the repository eg: repack or not repacked can cause the size to vary greatly. (see discussion in https://gitlab.com/gitlab-org/gitlab/-/issues/351415)\n\nFor this reason, `GetRepositorySize` now uses (behind a feature flag) a git operation `git rev-list --all --objects --disk-usage` to get the usage of all objects in the git object database. This ends up giving a much more consistent number that more accurately represents the usage of the repository from a user's point of view.\n\n## Remaining Effort\n\nWith this update in place, the issue with this method is that it's much slower than `du -sk`, since it does a full graph walk through the entire object database. On large repositories, this can take several seconds or longer.\n\nWe don't want this to impact project page loads. Already in Rails, the call to `GetRepositorySize` is cached and stored in a `project_statistics` table. \n\nWith this new slower but more accurate method of calculating sizes, we need to make sure that the UI never calls `GetRepositorySize` directly, but instead always gets its value from the `project_statistics` table. In addition to this, we want to minimize the number of times this gets called and limit it to only get called after housekeeping runs for a repository, rather than calling it on every push.\n\nTo update the size after each push, instead of calling `GetRepositorySize`, we can do this incrementally in `Gitlab::GitAccess` since we already check the size of the quarantine directory to see if the push will burst the size limit. We can update the statistics table when we do this check.\n\nThen, after each time housekeeping is called on a repository, we can call `ProjectCacheWorker` to update the repo size. This way we limit the expensive `GetRepositorySize` call to only when we do housekeeping.\n\nTo provide clarity for the rest of the effort associated with this issue, the following discrete updates are needed.\n\n- [x] call `ProjectCacheWorker` to update the statistics table after housekeeping is run.\n\n- [x] Ensure that Rails does not call `GetRepositorySize` directly, but instead reads repository size from the `project_statistics` table (which will have the cached value).\n\n- [x] Do not include internal refs eg: refs/merge-requests, refs/keep-around etc. in the repository size calculation\n\n- [x] Exclude RepositorySize from Gitaly appdex calculation, as the latency will go way up due to git-rev-list(1)\n\n- [x] Add an endpoint for the UI to call for on demand repository size recalculation\n\n- [x] Add a button to recalculate repository size\n\n- [ ] Remove the feature flag around the updated grpc once we know it's not being called except during a `ProjectCacheWorker` call due to performance concerns.\n\n## Button in Usage Quotas\n\nIntroduce a \"Recalculate repository usage\" button on the `Settings \u003e Usage Quotas` page.\n\n- Button placed on Usage Quotas page\n- Clicking on the button will trigger the function GetRepositorySize\n    - Feedback to the user will be in the form of an informational alert (blue)\n    - Alert title: `Repository size recalculation started`\n    - Alert content: `Refresh page in a few minutes to view usage.` \n\n| Usage Quotas with button | Usage Quotas with alert |\n| ------ | ------ |\n| ![image](/uploads/e4c6c58d473c6cb87fc968d2015de1bf/image.png) | ![image](/uploads/642fd5e6386f6cf5e9314a1b827eeb74/image.png) |","state":"closed","created_at":"2022-04-04T14:35:19.490Z","updated_at":"2022-10-12T11:40:39.533Z","closed_at":"2022-05-23T14:19:06.509Z","closed_by":{"id":9303898,"username":"jcaigitlab","name":"John Cai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9303898/avatar.png","web_url":"https://gitlab.com/jcaigitlab"},"labels":["CEO Interest","Category:Gitaly","Deliverable","auto updated","customer","devops::create","group::gitaly","missed-deliverable","missed:15.0","quad-planning::complete-action","section::dev","workflow::in dev"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":9303898,"username":"jcaigitlab","name":"John Cai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9303898/avatar.png","web_url":"https://gitlab.com/jcaigitlab"}],"author":{"id":9303898,"username":"jcaigitlab","name":"John Cai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9303898/avatar.png","web_url":"https://gitlab.com/jcaigitlab"},"type":"ISSUE","assignee":{"id":9303898,"username":"jcaigitlab","name":"John Cai","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9303898/avatar.png","web_url":"https://gitlab.com/jcaigitlab"},"user_notes_count":149,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357680","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":6},"weight":3,"blocking_issues_count":1,"has_tasks":true,"task_status":"6 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357680","notes":"https://gitlab.com/api/v4/projects/278964/issues/357680/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357680/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357680","relative":"#357680","full":"gitlab-org/gitlab#357680"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8342,"epic":{"id":562434,"iid":8342,"title":"ðŸ“ Address pain points around RepositorySize","url":"/groups/gitlab-org/-/epics/8342","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":106031287,"iid":357672,"project_id":278964,"title":"Set custom target duration for workspace owned endpoints","description":"\u003cdetails\u003e\u003csummary\u003eList of workspace owned endpoints with percentile duration, count \u0026 assignees\u003c/summary\u003e\n\n| Assignee       | json.meta.caller_id.keyword                        | Count      | 99.5th percentile of json.duration_s | 99.8th percentile of json.duration_s | Done  |\n|----------------|----------------------------------------------------|------------|--------------------------------------|--------------------------------------|-------|\n| `@abdwdd`      | GET /api/:version/projects/:id                     | 93,100,880 | 1.05937                              | 1.69109                              | :white_check_mark: |\n| `@abdwdd`      | ProjectsController#show                            | 15,986,577 | 2.52937                              | 5.06596                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/users/:id                        | 13,113,774 | 0.2669                               | 0.47297                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/users                            | 13,113,132 | 1.14146                              | 1.70484                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/projects                         | 13,108,440 | 7.82867                              | 9.81246                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/user                             | 10,610,815 | 0.39961                              | 1.00027                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/users/:user_id/status            | 10,040,461 | 0.10754                              | 0.18678                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/groups/:id/projects              | 8,824,978  | 5.85517                              | 6.86789                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/projects/:id/events              | 7,735,495  | 1.45651                              | 1.8584                               | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/groups/:id                       | 5,150,970  | 3.73052                              | 4.94272                              | :white_check_mark: |\n| `@abdwdd`      | GroupsController#show                              | 4,949,985  | 2.83309                              | 5.00538                              | :white_check_mark: |\n| `@abdwdd`      | UsersController#show                               | 3,965,024  | 1.72251                              | 3.24759                              | :white_check_mark: |\n| `@abdwdd`      | Explore::ProjectsController#index                  | 2,791,210  | 1.75478                              | 3.8705                               | :white_check_mark: |\n| `@abdwdd`      | AutocompleteController#users                       | 2,739,064  | 0.50779                              | 0.92261                              | :white_check_mark: |\n| `@abdwdd`      | Groups::ChildrenController#index                   | 2,203,037  | 3.62021                              | 5.31476                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/groups/:id/subgroups             | 1,947,576  | 3.93619                              | 4.92143                              | :white_check_mark: |\n| `@abdwdd`      | GET /api/:version/users/:user_id/projects          | 1,683,247  | 1.14394                              | 1.73706                              | :white_check_mark: |\n| `@alexpooley`  | GET /api/:version/events                           | 1,420,575  | 0.54984                              | 1.61813                              | FALSE |\n| `@alexpooley`  | GET /api/:version/groups                           | 1,367,014  | 11.58713                             | 12.15611                             | FALSE |\n| `@alexpooley`  | UsersController#activity                           | 1,001,540  | 1.28216                              | 1.80703                              | FALSE |\n| `@alexpooley`  | UsersController#projects                           | 775,857    | 1.57519                              | 2.99734                              | FALSE |\n| `@alexpooley`  | ProjectsController#activity                        | 755,177    | 2.48891                              | 4.76119                              | FALSE |\n| `@alexpooley`  | GET /api/:version/projects/:id/badges              | 658,844    | 0.8669                               | 1.32858                              | FALSE |\n| `@alexpooley`  | UsersController#calendar                           | 598,567    | 0.25509                              | 0.47564                              | FALSE |\n| `@alexpooley`  | GET /api/:version/users/:id/events                 | 581,287    | 1.07614                              | 1.53928                              | FALSE |\n| `@alexpooley`  | Dashboard::ProjectsController#index                | 425,211    | 4.89864                              | 8.96423                              | FALSE |\n| `@alexpooley`  | PUT /api/:version/projects/:id                     | 375,620    | 1.57786                              | 2.50053                              | FALSE |\n| `@alexpooley`  | GET /api/:version/namespaces/:namespace/exists     | 353,713    | 30.58513                             | 35.42726                             | FALSE |\n| `@alexpooley`  | ProjectsController#edit                            | 291,023    | 3.98361                              | 5.55277                              | FALSE |\n| `@alexpooley`  | GET /api/:version/avatar                           | 231,637    | 0.12732                              | 0.21486                              | FALSE |\n| `@alexpooley`  | GET /api/:version/groups/:id/descendant_groups     | 200,797    | 2.20826                              | 2.95435                              | FALSE |\n| `@alexpooley`  | ProjectsController#new                             | 192,679    | 3.91722                              | 5.83171                              | FALSE |\n| `@alexpooley`  | UsersController#groups                             | 183,580    | 4.18367                              | 5.1677                               | FALSE |\n| `@alexpooley`  | Projects::AutocompleteSourcesController#members    | 181,951    | 3.10514                              | 4.30266                              | FALSE |\n| `@serenafang`  | Projects::AvatarsController#show                   | 177,242    | 0.71481                              | 2.90803                              | FALSE |\n| `@serenafang`  | ProfilesController#show                            | 171,025    | 2.55528                              | 4.37404                              | FALSE |\n| `@serenafang`  | Dashboard::GroupsController#index                  | 168,576    | 1.4943                               | 2.71653                              | FALSE |\n| `@serenafang`  | DELETE /api/:version/projects/:id                  | 156,031    | 1.13783                              | 1.67743                              | FALSE |\n| `@serenafang`  | Projects::StarrersController#index                 | 131,076    | 1.57801                              | 2.95205                              | FALSE |\n| `@serenafang`  | DashboardController#activity                       | 130,691    | 4.1129                               | 6.20465                              | FALSE |\n| `@serenafang`  | UsersController#contributed                        | 124,881    | 2.52974                              | 4.93816                              | FALSE |\n| `@serenafang`  | GroupsController#activity                          | 120,022    | 12.63074                             | 14.14131                             | FALSE |\n| `@serenafang`  | POST /api/:version/projects/:id/invitations        | 116,938    | 1.36445                              | 1.89794                              | FALSE |\n| `@serenafang`  | ProjectsController#create                          | 111,616    | 15.7071                              | 23.17206                             | FALSE |\n| `@serenafang`  | AutocompleteController#project_groups              | 108,133    | 0.15346                              | 0.2359                               | FALSE |\n| `@serenafang`  | Profiles::KeysController#index                     | 107,590    | 3.32338                              | 4.55977                              | FALSE |\n| `@serenafang`  | Profiles::PreferencesController#show               | 100,065    | 2.19089                              | 4.25577                              | FALSE |\n| `@serenafang`  | UsersController#followers                          | 96,861     | 0.69253                              | 1.07758                              | FALSE |\n| `@serenafang`  | UsersController#following                          | 95,232     | 0.63762                              | 1.02239                              | FALSE |\n| `@serenafang`  | UsersController#starred                            | 93,769     | 0.8491                               | 1.40772                              | FALSE |\n| `@serenafang`  | GET /api/:version/namespaces/:id                   | 89,241     | 1.21766                              | 2.05704                              | FALSE |\n| `@manojmj`     | POST /api/:version/projects                        | 83,560     | 7.55789                              | 15.33274                             | :white_check_mark: |\n| `@manojmj`     | GET /api/:version/user/emails                      | 77,459     | 0.16386                              | 0.28517                              | :white_check_mark: |\n| `@manojmj`     | UsersController#exists                             | 77,307     | 0.05566                              | 0.09315                              | :white_check_mark: |\n| `@manojmj`     | Dashboard::ProjectsController#starred              | 72,931     | 5.68369                              | 8.9324                               | :white_check_mark: |\n| `@manojmj`     | PUT /api/:version/groups/:id                       | 69,127     | 3.18384                              | 4.11138                              | :white_check_mark: |\n| `@manojmj`     | POST /api/:version/groups                          | 68,146     | 2.47837                              | 4.02736                              | :white_check_mark: |\n| `@manojmj`     | Explore::ProjectsController#starred                | 67,468     | 1.77085                              | 3.1845                               | :white_check_mark: |\n| `@manojmj`     | GET /api/:version/namespaces                       | 56,637     | 2.16204                              | 2.9386                               | :white_check_mark: |\n| `@manojmj`     | Profiles::AccountsController#show                  | 54,689     | 2.04696                              | 4.28633                              | :white_check_mark: |\n| `@manojmj`     | ProjectsController#update                          | 52,350     | 2.82776                              | 4.62182                              | :white_check_mark: |\n| `@manojmj`     | Explore::ProjectsController#topic                  | 48,652     | 2.45641                              | 4.71084                              | :white_check_mark: |\n| `@manojmj`     | ProfilesController#update                          | 48,448     | 0.57916                              | 1.05857                              | :white_check_mark: |\n| `@manojmj`     | Profiles::KeysController#create                    | 47,772     | 1.38518                              | 3.11132                              | :white_check_mark: |\n| `@manojmj`     | Groups::UploadsController#show                     | 41,783     | 1.58983                              | 2.06077                              | :white_check_mark: |\n| `@manojmj`     | GroupsController#edit                              | 41,481     | 3.74786                              | 5.31615                              | :white_check_mark: |\n| `@manojmj`     | GET /api/:version/groups/:id/badges                | 40,033     | 0.33895                              | 0.63679                              | :white_check_mark: |\n| `@manojmj`     | Profiles::PreferencesController#update             | 36,421     | 0.21359                              | 0.38441                              | :white_check_mark: |\n| `@mksionek`    | POST /api/:version/groups/:id/invitations          | 35,381     | 1.6975                               | 2.60026                              | :white_check_mark: |\n| `@mksionek`    | UsersController#calendar_activities                | 34,131     | 1.40009                              | 3.02005                              | :white_check_mark: |\n| `@mksionek`    | GroupsController#create                            | 32,065     | 4.75473                              | 7.05915                              | :white_check_mark: |\n| `@mksionek`    | ProjectsController#destroy                         | 28,419     | 2.12098                              | 4.30169                              | :white_check_mark: |\n| `@mksionek`    | PUT /api/:version/users/:id/custom_attributes/:key | 28,038     | 0.35996                              | 0.57872                              | :white_check_mark: |\n| `@mksionek`    | Groups::SharedProjectsController#index             | 27,202     | 0.94276                              | 1.39324                              | :white_check_mark: |\n| `@mksionek`    | Explore::GroupsController#index                    | 25,089     | 11.96455                             | 12.38804                             | :white_check_mark: |\n| `@mksionek`    | GroupsController#new                               | 23,056     | 2.78644                              | 4.77355                              | :white_check_mark: |\n| `@mksionek`    | HEAD /api/:version/projects/:id                    | 22,426     | 2.08882                              | 3.85417                              | :white_check_mark: |\n| `@mksionek`    | Explore::ProjectsController#trending               | 16,447     | 1.67801                              | 3.63657                              | :white_check_mark: |\n| `@mksionek`    | HEAD /api/:version/groups/:id/projects             | 14,762     | 2.77396                              | 3.97395                              | :white_check_mark: |\n| `@mksionek`    | Profiles::EmailsController#index                   | 13,729     | 1.89107                              | 3.89805                              | :white_check_mark: |\n| `@mksionek`    | GET /api/:version/users/:user_id/memberships       | 12,413     | 0.21935                              | 0.36944                              | :white_check_mark: |\n| `@mksionek`    | GroupsController#update                            | 8,820      | 5.15273                              | 11.31634                             | :white_check_mark: |\n| `@mksionek`    | POST /api/:version/projects/:id/badges             | 8,598      | 0.89358                              | 1.33818                              | :white_check_mark: |\n| `@mksionek`    | GET /api/:version/projects/:id/badges/:badge_id    | 8,518      | 1.13602                              | 1.52739                              | :white_check_mark: |\n| `@mksionek`    | PUT /api/:version/users/:id                        | 8,258      | 0.77664                              | 1.28064                              | :white_check_mark: |\n| `@peterhegman` | Projects::LearnGitlabController#index              | 7,389      | 2.19472                              | 4.81248                              | :white_check_mark: |\n| `@peterhegman` | DELETE /api/:version/groups/:id                    | 7,322      | 0.63161                              | 0.99                                 | :white_check_mark: |\n| `@peterhegman` | DELETE /api/:version/projects/:id/badges/:badge_id | 7,319      | 0.54671                              | 0.89263                              | :white_check_mark: |\n| `@peterhegman` | ProjectsController#toggle_star                     | 7,151      | 0.91423                              | 2.32033                              | :white_check_mark: |\n| `@peterhegman` | AutocompleteController#projects                    | 6,977      | 0.29585                              | 0.43146                              | :white_check_mark: |\n| `@peterhegman` | PUT /api/:version/namespaces/:id                   | 6,698      | 1.64041                              | 2.42389                              | :white_check_mark: |\n| `@peterhegman` | HEAD /api/:version/user                            | 6,247      | 0.38569                              | 0.71337                              | :white_check_mark: |\n| `@peterhegman` | POST /api/:version/projects/:id/unarchive          | 6,229      | 0.90405                              | 1.42148                              | :white_check_mark: |\n| `@peterhegman` | ProjectsController#transfer                        | 5,868      | 32.28066                             | 35.38824                             | :white_check_mark: |\n| `@peterhegman` | PUT /api/:version/projects/:id/badges/:badge_id    | 5,379      | 1.54004                              | 1.94394                              | :white_check_mark: |\n| `@peterhegman` | GroupsController#projects                          | 4,608      | 2.95869                              | 5.47828                              | :white_check_mark: |\n| `@peterhegman` | Explore::ProjectsController#topics                 | 4,194      | 2.09986                              | 3.78675                              | :white_check_mark: |\n| `@peterhegman` | ProjectsController#archive                         | 4,038      | 3.17028                              | 4.60723                              | :white_check_mark: |\n| `@peterhegman` | PUT /api/:version/user/preferences                 | 3,859      | 0.19356                              | 0.2828                               | :white_check_mark: |\n| `@peterhegman` | Dashboard::ProjectsController#removed              | 3,624      | 1.92036                              | 3.79999                              | :white_check_mark: |\n| `@peterhegman` | GET /api/:version/users/:user_id/starred_projects  | 3,493      | 1.57088                              | 2.15764                              | :white_check_mark: |\n| `@peterhegman` | GroupsController#destroy                           | 3,488      | 0.69026                              | 1.28388                              | :white_check_mark: |\n\n\u003c/details\u003e\n\n## Problem\n\nAs part of https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/1451, we need to set custom target duration for web \u0026 API requests.\n\n\n## How to assign urgency\n\n\nThe process is described [here](https://docs.gitlab.com/ee/development/application_slis/rails_request_apdex.html) but for convenience I have added 99.8/99.5 percentiles, count (past 7 days) and the endpoints to the above table from [kibana](https://log.gprd.gitlab.net/app/visualize#/edit/474fdd60-b127-11ec-afaf-2bca15dfbf33?_g=(filters%3A!()%2CrefreshInterval%3A(pause%3A!t%2Cvalue%3A0)%2Ctime%3A(from%3Anow-7d%2Cto%3Anow))).\n\nWe need to set urgencies to all the above endpoints. For **API requests**, check the values under **99.5th** percentile column and for **web requests** check the values under **99.8th** percentile column to see how the endpoint is performing. [This table](https://docs.gitlab.com/ee/development/application_slis/rails_request_apdex.html#how-to-adjust-the-urgency) has the available urgencies.\n\nIdeally, the endpoint with higher request count should have higher urgency but some endpoints like `GET /api/:version/projects/:id` might not be performing optimally so we need to create or find an existing performance issue for the endpoint \u0026 add it to [this epic](https://gitlab.com/groups/gitlab-org/-/epics/7832) to track all such issues. We can then set a lower urgency temporarily and link the issue inside the code.\n If the endpoint is performing optimally we can set a higher urgency. For instance, `GET /api/:version/users/:id` can be set to `medium` urgency.\n\nThe endpoints with lower number of requests should be set to `default` or can even be set to `low` urgency if there are only few thousands requests and the percentile duration is greater than default.\n\n### Sample MR for reference\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/84418","state":"closed","created_at":"2022-04-04T12:47:43.297Z","updated_at":"2022-06-02T17:38:53.354Z","closed_at":"2022-05-03T08:20:38.024Z","closed_by":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"labels":["devops::manage","group::organization","missed:14.10","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"}],"author":{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"},"type":"ISSUE","assignee":{"id":2982208,"username":"mksionek","name":"Gosia Ksionek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2982208/avatar.png","web_url":"https://gitlab.com/mksionek"},"user_notes_count":2,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":"2022-04-30","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357672","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357672","notes":"https://gitlab.com/api/v4/projects/278964/issues/357672/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357672/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357672","relative":"#357672","full":"gitlab-org/gitlab#357672"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106031162,"iid":357671,"project_id":278964,"title":"Simplify Integration#api_field_names after security fix","description":"The following discussion from https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2369 should be addressed:\n\n- [x] @.luke started a [discussion](https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2369#note_898976820):  (+1 comment)\n\n    \u003e **Thought**\n    \u003e \n    \u003e After this change merges to `master`, in a follow-up, it should be possible change [`Integration#api_field_names`](https://gitlab.com/gitlab-org/gitlab/-/blob/bcb79d53fd54e545cf80416beb77360e06262c22/app/models/integration.rb#L478) to:\n    \u003e \n    \u003e ```ruby\n    \u003e def api_field_names\n    \u003e   fields.reject { _1[:type] == 'password' }.pluck(:name)\n    \u003e end\n    \u003e ```\n    \u003e \n    \u003e What do you think?\n\n### Availability \u0026 Testing\n\nWe have tests around this behavior at the [unit](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/models/integration_spec.rb#L755) and [request](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/requests/api/integrations_spec.rb#L381) layer\n\nThese tests should be great to support this effort, and assert that no sensitive fields will leak through.\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e","state":"closed","created_at":"2022-04-04T12:45:20.646Z","updated_at":"2022-11-22T18:55:02.788Z","closed_at":"2022-06-15T06:54:43.773Z","closed_by":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"labels":["Category:Integrations","Stretch","backend","devops::manage","good for new contributors","group::integrations","maintenance::refactor","quad-planning::complete-action","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357671","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357671","notes":"https://gitlab.com/api/v4/projects/278964/issues/357671/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357671/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357671","relative":"#357671","full":"gitlab-org/gitlab#357671"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106030943,"iid":357670,"project_id":278964,"title":"Enqueuer job: status reconcilement should check for status coherence","description":"## :fire: Problem\n\nDuring testing, we hit this peculiar situation:\n\n* repository rails migration status: `import_aborted` (with `migration_retries_count` set to `1`)\n* Container Registry status response:\n  ```\n  HTTP/1.1 200 OK\n  Content-Length: 87\n  Content-Type: application/json\n  Date: Mon, 04 Apr 2022 12:17:32 GMT\n  \n  {\n      \"detail\": \"\",\n      \"name\": \"XXX\",\n      \"path\": \"XXXX/XXXX\",\n      \"status\": \"import_in_progress\"\n  }\n  ```\n\nThis can create a never ending loop:\n\n1. The Enqueuer picks up the next abort migration, the above repo in this case.\n1. The Enqueuer will [try](https://gitlab.com/gitlab-org/gitlab/-/blob/c6d9e7146515853145011beef69bcef21ca4a0d5/app/models/container_repository.rb#L288) to reconcile the status but will end up [doing nothing](https://gitlab.com/gitlab-org/gitlab/-/blob/c6d9e7146515853145011beef69bcef21ca4a0d5/app/models/container_repository.rb#L298-299).\n1. The Enqueuer ends.\n1. If capacity allows, it re enqueuer a job = go back to (1.)\n\n## :fire_engine: Solution\n\nThe Enqueuer should not be doing if during status reconcile, the received status are `import_in_progress pre_import_in_progress pre_import_canceled import_canceled`. That already [implemented](https://gitlab.com/gitlab-org/gitlab/-/blob/c6d9e7146515853145011beef69bcef21ca4a0d5/app/models/container_repository.rb#L19).\n\nHaving said that, we should check for state coherence. Eg. if we have `pre_import_in_progress`, we should leave the image repository on the Rails side in `pre_importing`.\n\nTricky part: we need to update the migration status on the Rails side _without_ the side effects of calling the Container Registry. For example, forcing `pre_importing` should not all the Container Registry to start the pre import. We might need to use `#update_columns`.\n\nThis way, the Enqueuer will fix the status coherence (eg. same status on the Rails and Containe Registry side) which helps with:\n* current capacity accuracy.\n* the next Enqueuer jobs will pick it up again.\n* the Guard worker will detect long running migrations and process them properly.","state":"closed","created_at":"2022-04-04T12:41:35.896Z","updated_at":"2022-04-07T09:31:33.536Z","closed_at":"2022-04-07T09:31:33.504Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration Blocker","Container Registry Migration Unplanned","Container Registry Migration::Phase 2","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::maintenance","workflow::in review"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357670","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357670","notes":"https://gitlab.com/api/v4/projects/278964/issues/357670/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357670/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357670","relative":"#357670","full":"gitlab-org/gitlab#357670"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106027884,"iid":357664,"project_id":278964,"title":"[Feature flag] Enable ci_safe_artifact_content_type","description":"\n\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout a change in our public API for our [artifact raw endpoint](https://gitlab.com/gitlab-org/gitlab/-/blob/ecd79f912a710f3a027a064ebd7bbc3c06f5e7d0/lib/api/ci/job_artifacts.rb#L50-64) which will serving artifact with the `content-type` set to `text/plain`.\n\nThis is currently behind the `ci_safe_artifact_content_type` feature flag introduced in \u003chttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/83826\u003e.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::sharding\" \n- Most appropriate slack channel to reach out to: `#g_pipeline_insights`\n- Best individual to reach out to: @morefice\n- PM: @jreporter\n- Manager: @shampton \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nWe expect to render an empty state as you can see on [this design](https://gitlab.com/gitlab-org/gitlab/-/issues/296963/designs/Pipelines-Test-Details.png).\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\nArtifact browsing could be broken as we experienced in https://gitlab.com/gitlab-org/gitlab/-/issues/357078.\n\nIf something goes wrong related to this FF, you can disable it by running `/chatops run feature set ci_safe_artifact_content_type false` in `#production`.\n\n### What can we monitor to detect problems with this?\n\n### What can we check for monitoring production after rollouts?\n\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set ci_safe_artifact_content_type true --dev`\n    - [x] `/chatops run feature set ci_safe_artifact_content_type true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set  --project=gitlab-org/gitlab ci_safe_artifact_content_type true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss ci_safe_artifact_content_type true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com ci_safe_artifact_content_type true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org ci_safe_artifact_content_type true`\n    - [ ] `/chatops run feature set --group=gitlab-com ci_safe_artifact_content_type true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e ci_safe_artifact_content_type true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_safe_artifact_content_type 10 percent --actors`\n    - [x] `/chatops run feature set ci_safe_artifact_content_type 25 percent --actors`\n    - [x] `/chatops run feature set ci_safe_artifact_content_type 50 percent --actors`\n    - [x] `/chatops run feature set ci_safe_artifact_content_type 100 percent --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_safe_artifact_content_type 10`\n    - [ ] `/chatops run feature set ci_safe_artifact_content_type 25`\n    - [ ] `/chatops run feature set ci_safe_artifact_content_type 50`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set ci_safe_artifact_content_type true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `ci_safe_artifact_content_type`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `ci_safe_artifact_content_type` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete ci_safe_artifact_content_type --dev`\n    - [ ] `/chatops run feature delete ci_safe_artifact_content_type --staging`\n    - [ ] `/chatops run feature delete ci_safe_artifact_content_type`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_safe_artifact_content_type false\n```\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-04T12:02:02.123Z","updated_at":"2022-04-22T19:09:31.289Z","closed_at":"2022-04-07T15:24:41.212Z","closed_by":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"labels":["CI artifacts","Category:Build Artifacts","Deliverable","FY23::Q1","OKR","Verify candidate","Verify::P1","backend","devops::verify","feature flag","group::pipeline insights","priority::3","section::ops","security","security-backlog::valid","severity::3","type::bug","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-06-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357664","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":54,"completed_count":9},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"9 of 54 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357664","notes":"https://gitlab.com/api/v4/projects/278964/issues/357664/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357664/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357664","relative":"#357664","full":"gitlab-org/gitlab#357664"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106017528,"iid":357648,"project_id":278964,"title":"Index on deployments table for DeploymentsFinder query","description":"Create index\n\n```sql\nexec CREATE INDEX index_deployments_on_project_id_and_environment_id_and_status_and_finished_at ON deployments USING btree (project_id, environment_id, status, finished_at);\n```\n\nto support query\n\n```sql\nSELECT \"deployments\".\"deployable_id\" FROM \"deployments\" WHERE \"deployments\".\"project_id\" = 7764 AND (deployments.environment_id = (SELECT \"environments\".\"id\" FROM \"environments\" WHERE \"environments\".\"project_id\" = 7764 AND \"environments\".\"name\" = 'production' LIMIT 1)) AND \"deployments\".\"status\" = 2 AND \"deployments\".\"deployable_id\" IS NOT NULL ORDER BY \"deployments\".\"finished_at\" DESC LIMIT 1000\n```\n\nThis index is needed by the DeploymentsFinder's `by_pipeline` filter method as noted in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83024#note_898758391","state":"closed","created_at":"2022-04-04T09:40:28.446Z","updated_at":"2022-11-02T20:28:40.124Z","closed_at":"2022-04-06T13:39:30.548Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["backend","database","devops::release","group::release","section::ops","type::feature","workflow::in review"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357648","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357648","notes":"https://gitlab.com/api/v4/projects/278964/issues/357648/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357648/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357648","relative":"#357648","full":"gitlab-org/gitlab#357648"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106004857,"iid":357637,"project_id":278964,"title":"Remove `.service-installation` class to polish UI","description":"We should remove the `.service-installation` class from `app/views/projects/mattermosts/new.html.haml` and the CSS styles along it. We should also polish the UI to make sure it looks up to standard.\n\n![Mattermost_new](/uploads/a28dac54312ea15420d4c2477d6e87bc/Mattermost_new.png)\n\nNoticed while looking into https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84232. Steps to reproduce can be found in this [comment](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84232#note_899105018).","state":"closed","created_at":"2022-04-04T06:50:38.265Z","updated_at":"2022-11-22T18:55:05.047Z","closed_at":"2022-04-27T07:46:42.908Z","closed_by":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"labels":["Category:Integrations","Deliverable","Integration::Mattermost","SUS::Impacting","UI polish","devops::manage","frontend","group::integrations","section::dev","severity::4","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"}],"author":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"type":"ISSUE","assignee":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357637","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357637","notes":"https://gitlab.com/api/v4/projects/278964/issues/357637/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357637/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357637","relative":"#357637","full":"gitlab-org/gitlab#357637"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105999884,"iid":357633,"project_id":278964,"title":"Missing data for Merge Requests merged, showing as Avg: NaN Â· Max: NaN","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nUnder Merge Request Analytics, the `Merge Requests merged` is showing missing data on GitLab.com ~SaaS and on a  ~\"GitLab Ultimate\" ~\"self-managed\" ~customer  reported instance for version `14.9.1` ([internal ZD ticket](https://gitlab.zendesk.com/agent/tickets/279727)). The data is shown as follows: \n\n- Merge Requests merged Avg: NaN Â· Max: NaN\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n- Go to Merge Request Analytics of a project\n- Enter a date range \n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nLink to an [example date range on GitLab.com](https://gitlab.com/gitlab-org/gitlab/-/analytics/merge_request_analytics?start_date=2020-12-01\u0026end_date=2021-03-31)\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n`Merge Requests merged` does not get populated and showing as `Avg: NaN Â· Max: NaN`\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n`Merge Requests merged` should be populated correctly as per the customer.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n![image](/uploads/06f0a62fcce6ebe644839cb0e355290c/image.png)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\nThis bug happens on GitLab.com\n\n\u003c!--  \n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n--\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-04-04T04:31:13.235Z","updated_at":"2022-06-21T12:02:48.116Z","closed_at":"2022-06-10T01:28:49.072Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Deliverable","GitLab Premium","GitLab Ultimate","SUS::Impacting","SaaS","UX","customer","devops::manage","frontend","group::optimize","priority::3","section::dev","self-managed","severity::3","type::bug","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":9671016,"username":"dkua1","name":"Daphne Kua","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9671016/avatar.png","web_url":"https://gitlab.com/dkua1"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357633","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357633","notes":"https://gitlab.com/api/v4/projects/278964/issues/357633/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357633/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357633","relative":"#357633","full":"gitlab-org/gitlab#357633"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105998620,"iid":357632,"project_id":278964,"title":"Allow user to specify custom language type for codeblock","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\n\u003c!-- What is the user problem you are trying to solve with this issue? --\u003e\nCodeblock formatting works for common languages like JavaScript for example. The language type for a codeblock is declared in Markdown after the 3 backticks like below:\n\n```\n```javascript\n```\n\nThere are also other types that exists for a codeblock but there is no formal syntax formatting for it. An example of this is [nomnoml for UML diagrams](https://nomnoml.com/).\n```\n```nomnoml\n```\n\n### Proposal\n\nWith the Content Editor we would want to allow users to specific codeblocks types without needing to go to the raw Markdown source to make this edit.\n\n- Display custom type beginning used\n- Display option for action of creating a new custom type\n- Entering a custom type in a text input\n\n| Custom type in list with action to create custom type | Creating a custom type |\n| ------ | ------ |\n| ![image](/uploads/675af682af2e135367c9cbaa52d00909/image.png) | ![image](/uploads/a4eeebb14fd2fdd6ec05124b19a80b40/image.png) |\n\n### Questions\n\n1. What should we do when the user specifies a language that already exists? Are we able to have \"Did you mean X?\" or have an autocomplete as they enter the custom label? The rationale here is that it our library may already support that type but they forgot to search for it prior to creating a custom label.\n    - **Answer:** If a user types a language that already exists, we select that from the dropdown when the user clicks \"Apply\". Otherwise we show Custom (language_type) in the dropdown. Unlike labels, we're not really creating something duplicate here. Anything custom that the user enters doesn't create a new entry in the dropdown list, it just shows in the dropdown title\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!--\n### Intended users\n\n Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Ingrid (Infrastructure Operator)](https://about.gitlab.com/handbook/product/personas/#ingrid-infrastructure-operator)\n* [Dakota (Application Development Director)](https://about.gitlab.com/handbook/product/personas/#dakota-application-development-director)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\u003c!-- \n### Feature Usage Metrics\n\nHow are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2022-04-04T03:41:59.361Z","updated_at":"2022-06-08T10:20:40.070Z","closed_at":"2022-06-08T10:20:40.052Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","devops::create","group::editor","section::dev","severity::4","type::feature"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":2338505,"username":"mle","name":"Michael Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2338505/avatar.png","web_url":"https://gitlab.com/mle"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357632","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357632","notes":"https://gitlab.com/api/v4/projects/278964/issues/357632/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357632/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357632","relative":"#357632","full":"gitlab-org/gitlab#357632"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6246,"epic":{"id":295290,"iid":6246,"title":"Make code blocks more useful in the Content Editor","url":"/groups/gitlab-org/-/epics/6246","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105998618,"iid":357631,"project_id":278964,"title":"Remove ruby 2.5 from the example for YAML template API docs","description":"https://docs.gitlab.com/ee/api/templates/gitlab_ci_ymls.html#single-gitlab-ci-yaml-template","state":"closed","created_at":"2022-04-04T03:41:31.069Z","updated_at":"2022-04-04T06:42:25.623Z","closed_at":"2022-04-04T06:42:25.606Z","closed_by":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"labels":["Category:API","Community contribution","WorkingGroup::API","api","docs::improvement","documentation","type::maintenance"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"}],"author":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"type":"ISSUE","assignee":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-04-04","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357631","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357631","notes":"https://gitlab.com/api/v4/projects/278964/issues/357631/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357631/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357631","relative":"#357631","full":"gitlab-org/gitlab#357631"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7835,"epic":{"id":491137,"iid":7835,"title":"Remove ruby 2.5 from gitlab repo","url":"/groups/gitlab-org/-/epics/7835","group_id":9970,"human_readable_end_date":"Apr 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":105995674,"iid":357629,"project_id":278964,"title":"[MR Widget Eng] - Introduce License compliance specific feature flag","description":"## Purpose\n\nThere are still some unresolved issues to gain acceptable functionality in the new License Compliance MR widget extension. Those unresolved issues are captured in this epic https://gitlab.com/groups/gitlab-org/-/epics/7763\n\nFor now, so we don't block rolling out the MR widget extension rollout, we introduce a secondary feature flag.\n\nThe new feature flag is `refactorLicenseComplianceExtension`. \n\n## Feature flag notes\n\nIn order for the LicenseCompliance MR widget extension to show instead of the old one both `refactorMrWidgetsExtensions` and `refactorLicenseComplianceExtension` must be enabled.\n\nOtherwise it will show the legacy widget alongside the new ones.\n\n## Implementation plan\n\n- In `ee/app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue` add `shouldShowLicenseComplianceExtension` computed prop to contain flag logic\n\n- Update `registerLicenseCompliance()` method in `ee/app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue` to use `shouldShowLicenseComplianceExtension` computed prop to determine whether or not to register new mr widget extension for license compliance\n\n- Update vue template logic in `ee/app/assets/javascripts/vue_merge_request_widget/mr_widget_options.vue` to use new `shouldShowLicenseComplianceExtension` computed prop\n\n- Push new frontend feature flag from controller in `ee/app/controllers/ee/projects/merge_requests_controller.rb`\n\n- Stub new feature flag in `ee/spec/features/merge_request/user_sees_status_checks_widget_spec.rb`\n\n- Add new YAML file for feature flag as `config/feature_flags/development/refactor_license_compliance_extension.yml`","state":"closed","created_at":"2022-04-04T01:07:37.628Z","updated_at":"2022-05-24T12:04:34.186Z","closed_at":"2022-05-02T22:09:33.172Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["Deliverable","UX","WorkingGroup::MergeRequestReportWidgets","devops::secure","feature::enhancement","frontend","group::composition analysis","merge request widget","missed-deliverable","missed:14.10","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357629","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357629","notes":"https://gitlab.com/api/v4/projects/278964/issues/357629/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357629/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357629","relative":"#357629","full":"gitlab-org/gitlab#357629"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6548,"epic":{"id":324258,"iid":6548,"title":"[MR Widget Eng] Adapting the new framework to existing widgets","url":"/groups/gitlab-org/-/epics/6548","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":105994190,"iid":357626,"project_id":278964,"title":"Add GitLab Developer Portal to site footer","description":"The ~\"group::integrations\" team have had feedback from a 3rd party about their experience adding a new integration to the codebase (see [Google meeting doc](https://docs.google.com/document/d/1W2gSZqyhUi8BMKVQxJo4-adJEXnzY8EJM-YEVCM0o-s/edit?usp=sharing) internal only). \n\nMany of the difficulties they experienced were to do with documentation:\n\n- Discovering relevant documentation.\n- Navigating between relevant documentation pages.\n- Documentation that laid out the overall concepts and choices.\n\nThe GitLab Developer Portal https://developer.gitlab.com would have been the perfect resource for them had they discovered it, but it lacks discoverability. (Additionally, very few of the ~\"group::integrations\" team themselves were aware of this resource until diving into this organisation's pain points.)\n\nThe GitLab Developer Portal should be linked from the main GitLab footer on https://about.gitlab.com so it is a discoverable resource. The word `Developers` is often the word used to link to such a guide on the footer.\n\n![Screenshot_2022-04-04_at_11.23.10_AM](/uploads/29c61966c6ca0bff434a85a306bd68e1/Screenshot_2022-04-04_at_11.23.10_AM.png)","state":"closed","created_at":"2022-04-03T23:13:04.967Z","updated_at":"2022-11-22T18:55:10.072Z","closed_at":"2022-04-28T01:02:51.834Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["auto updated","devops::manage","feature::enhancement","frontend","group::integrations","missed:14.10","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":11396297,"username":"aghwotuovuoke","name":"Ovuoke Aghwotu","state":"active","avatar_url":"https://secure.gravatar.com/avatar/01b3dc9b9010b8e5006ffc1e959d3080?s=80\u0026d=identicon","web_url":"https://gitlab.com/aghwotuovuoke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":11396297,"username":"aghwotuovuoke","name":"Ovuoke Aghwotu","state":"active","avatar_url":"https://secure.gravatar.com/avatar/01b3dc9b9010b8e5006ffc1e959d3080?s=80\u0026d=identicon","web_url":"https://gitlab.com/aghwotuovuoke"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357626","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357626","notes":"https://gitlab.com/api/v4/projects/278964/issues/357626/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357626/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357626","relative":"#357626","full":"gitlab-org/gitlab#357626"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2177,"epic":{"id":14802,"iid":2177,"title":"Create a GitLab Developer Portal","url":"/groups/gitlab-org/-/epics/2177","group_id":9970},"iteration":null,"health_status":null},{"id":105936922,"iid":357612,"project_id":278964,"title":"Gitlab doesn't detect the deployment pods after K8s cluster upgrade to v1.22","description":"### Summary\n\n\"_Kubernetes deployment not found_\" after upgrade to K8s v1.22.\n\n### Steps to reproduce\n\nNo changes in Gitlab. Just upgrade any K8s cluster from _v1.20_ or _v1.21_ to **v1.22**.\n\n### What is the current *bug* behavior?\n\nDeployments \u003e Environments \u003e Any env shows this:\n\n\u003e Kubernetes Pods\n\u003e\n\u003e Kubernetes deployment not found\n\u003e To see deployment progress for your environments, make sure you are deploying to `$KUBE_NAMESPACE` and annotating with `app.gitlab.com/app=$CI_PROJECT_PATH_SLUG` and `app.gitlab.com/env=$CI_ENVIRONMENT_SLUG`.\n\n![image](/uploads/eb1887565e8971a085b0e7e35b43fe3f/image.png)\n\n### What is the expected *correct* behavior?\n\nThis is working properly on the same Gitlab instance for projects deployed to K8s clusters v1.20 or v1.21.\n\n![image](/uploads/004cdee692d0214f9745a0e27435985c/image.png)\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\nSystem information\nSystem:         Ubuntu 20.04\nProxy:          no\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.7.5p203\nGem Version:    3.1.4\nBundler Version:2.2.33\nRake Version:   13.0.6\nRedis Version:  6.2.6\nSidekiq Version:6.4.0\nGo Version:     unknown\n\nGitLab information\nVersion:        14.9.2-ee\nRevision:       3034418fb31\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     PostgreSQL\nDB Version:     12.7\nURL:            https://git.DOMAIN\nHTTP Clone URL: https://git.DOMAIN/some-group/some-project.git\nSSH Clone URL:  git@git.DOMAIN:some-group/some-project.git\nElasticsearch:  no\nGeo:            no\nUsing LDAP:     yes\nUsing Omniauth: yes\nOmniauth Providers:\n\nGitLab Shell\nVersion:        13.24.0\nGitLab Shell path: /opt/gitlab/embedded/service/gitlab-shell\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 13.24.0 ? ... OK (13.24.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nInternal API available: OK\nRedis available via internal API: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes (cluster/worker) ... 1/1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... Server: ldapmain\nLDAP authentication... Success\nLDAP users with access to your GitLab server (only showing the first 100 results)\n        User output sanitized. Found 25 users of 100 limit.\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nSystemd unit files or init script exist? ... skipped (omnibus-gitlab has neither init script nor systemd units)\nSystemd unit files or init script up-to-date? ... skipped (omnibus-gitlab has neither init script nor systemd units)\nProjects have namespace: ...\n2/1 ... yes\n4/2 ... yes\n4/3 ... yes\n3/4 ... yes\n10/5 ... yes\n4/6 ... yes\n4/7 ... yes\n4/8 ... yes\n4/9 ... yes\n10/10 ... yes\n4/11 ... yes\n10/12 ... yes\n4/15 ... yes\n31/16 ... yes\n31/17 ... yes\n4/18 ... yes\n10/19 ... yes\n32/20 ... yes\n10/21 ... yes\n31/22 ... yes\n31/23 ... yes\nRedis version \u003e= 5.0.0? ... yes\nRuby version \u003e= 2.7.2 ? ... yes (2.7.5)\nGit user has default SSH configuration? ... yes\nActive users: ... 16\nIs authorized keys file accessible? ... yes\nGitLab configured to store new projects in hashed storage? ... yes\nAll projects are in hashed storage? ... yes\nElasticsearch version 7.x (6.4 - 6.x deprecated to be removed in 13.8)? ... skipped (elasticsearch is disabled)\n\nChecking GitLab App ... Finished\n\nChecking GitLab subtasks ... Finished\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2022-04-02T11:44:07.342Z","updated_at":"2022-07-04T19:20:37.935Z","closed_at":"2022-06-27T21:03:27.417Z","closed_by":{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"labels":["Stretch","backend","devops::configure","group::configure","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"}],"author":{"id":798949,"username":"mteodor","name":"Teodor 'dÃ¸ru' MICU","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a0e326e532ce66486bfcb27f22d9ca1c?s=80\u0026d=identicon","web_url":"https://gitlab.com/mteodor"},"type":"ISSUE","assignee":{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357612","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357612","notes":"https://gitlab.com/api/v4/projects/278964/issues/357612/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357612/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357612","relative":"#357612","full":"gitlab-org/gitlab#357612"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4827,"epic":{"id":139481,"iid":4827,"title":"Supported Kubernetes versions","url":"/groups/gitlab-org/-/epics/4827","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":105917419,"iid":357601,"project_id":278964,"title":"Permalink (`y`) hotkey not working","description":"The `y` hotkey is not working when navigating to a blob from the file browser.\n\n### Steps to reproduce\n\n1. Navigate to https://gitlab.com/gitlab-org/gitlab/-/tree/master\n2. Click on `.gitlab-ci.yml` or any other file\n3. Press `y` and notice that the URL does not change\n\nVisiting `https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab-ci.yml` directly and pressing `y` works.","state":"closed","created_at":"2022-04-01T23:14:05.742Z","updated_at":"2022-10-21T12:01:15.149Z","closed_at":"2022-09-26T09:44:20.606Z","closed_by":{"id":11703928,"username":"nradina","name":"Nataliia Radina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11703928/avatar.png","web_url":"https://gitlab.com/nradina"},"labels":["Category:Source Code Management","Deliverable","bug::functional","devops::create","frontend","group::source code","priority::3","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11703928,"username":"nradina","name":"Nataliia Radina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11703928/avatar.png","web_url":"https://gitlab.com/nradina"}],"author":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"type":"ISSUE","assignee":{"id":11703928,"username":"nradina","name":"Nataliia Radina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11703928/avatar.png","web_url":"https://gitlab.com/nradina"},"user_notes_count":6,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357601","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357601","notes":"https://gitlab.com/api/v4/projects/278964/issues/357601/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357601/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357601","relative":"#357601","full":"gitlab-org/gitlab#357601"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105915717,"iid":357598,"project_id":278964,"title":"Handbook: How to migrate a metric to Instrumentation Class","description":"We should document how to migrate a metric to Instrumentation Class for our internal (team member) customers.\n\nReference: https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/101579#note_895678396","state":"closed","created_at":"2022-04-01T22:16:48.774Z","updated_at":"2022-04-20T14:06:59.813Z","closed_at":"2022-04-20T08:20:56.460Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["[deprecated] Accepting merge requests","devops::growth","documentation","group::product intelligence","section::growth","type::maintenance"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357598","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357598","notes":"https://gitlab.com/api/v4/projects/278964/issues/357598/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357598/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357598","relative":"#357598","full":"gitlab-org/gitlab#357598"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7352,"epic":{"id":415908,"iid":7352,"title":"Improve documentation getting started experience for Product Intelligence at GitLab","url":"/groups/gitlab-org/-/epics/7352","group_id":9970,"human_readable_end_date":"Jun 22, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105914012,"iid":357584,"project_id":278964,"title":"UX: Improve acceptance terms landing page for SSO signup flow","description":"# Summary \n\nIn the current SSO signup flow, after selecting the SSO provider the user wants to use credentials to create a Gitlab.com account, they are directed to a page where they are asked to accept our legal terms. This page is fairly bare. We'd like to update this experience and have the legal copy reviewed/updated as part of the Free user efficiency effort. \n\n# Design Request \n\nLet's explore options for a smoother interaction and/or design for when a user accepts the terms of service for signing up for a GitLab account with a third party. \n\n![image__12_](/uploads/9810bf14dddb38317373d9d097798697/image__12_.png)\n\nWe'll also work to resolve the disjointed experience a user receives when directed to the TOS page upon clicking the TOS link - See video walkthrough below: \n\nhttps://www.loom.com/share/a90b6d5f837b4e0c8dfdeffc1eea38a1. \n\nThe user is directed to the TOS page on the GitLab website, but isn't provided a path back to the registration flow from which they came. \n\n# Solution\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/361103#proposed-experience\n\n# Design file","state":"closed","created_at":"2022-04-01T21:33:46.213Z","updated_at":"2022-07-11T08:39:13.909Z","closed_at":"2022-07-11T08:39:13.896Z","closed_by":{"id":4412383,"username":"kcomoli","name":"Kevin Comoli","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4412383/avatar.png","web_url":"https://gitlab.com/kcomoli"},"labels":["UX","devops::growth","free user priority","group::acquisition","missed:15.1","section::growth","type::feature","workflow::design"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":4412383,"username":"kcomoli","name":"Kevin Comoli","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4412383/avatar.png","web_url":"https://gitlab.com/kcomoli"}],"author":{"id":9347704,"username":"gdoud","name":"Gayle Doud","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9347704/avatar.png","web_url":"https://gitlab.com/gdoud"},"type":"ISSUE","assignee":{"id":4412383,"username":"kcomoli","name":"Kevin Comoli","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4412383/avatar.png","web_url":"https://gitlab.com/kcomoli"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357584","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357584","notes":"https://gitlab.com/api/v4/projects/278964/issues/357584/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357584/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357584","relative":"#357584","full":"gitlab-org/gitlab#357584"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105913795,"iid":357583,"project_id":278964,"title":"Add structured events to top-level banner items","description":"# Summary\n\nWe can't fully leverage the structured event tracking that exists for items in the top navigation banner because we're missing a few key events in this area. This issue is intended to capture the work needed to account for the additional tracking that's needed for the primary items in the navigation banner. We'll create a separate issue to cover tracking for the items within the dropdown items in the top navigation banner.\n\n# Tracking Details\n\nAdd structured events for the following items in the top navigation bar: \n\n- Menu item\n\n| New/Existing event | Activity | Category | Action | Label | Property | Context | \n| ------ | ------ | ------ | ------ | ------ | ------ | ------ |\n| New | User clicks \"Menu\" item | root:index  | click_dropdown  |  Menu  |  navigation | \n\n# Tracking Assets :movie_camera: Loom video \u0026 :camera: Screenshot","state":"closed","created_at":"2022-04-01T21:27:11.198Z","updated_at":"2022-08-18T13:24:54.753Z","closed_at":"2022-06-06T06:05:09.271Z","closed_by":{"id":10216431,"username":"syarynovskyi","name":"Serhii Yarynovskyi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10216431/avatar.png","web_url":"https://gitlab.com/syarynovskyi"},"labels":["devops::growth","group::acquisition","section::growth","snowplow tracking events","type::feature","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":10216431,"username":"syarynovskyi","name":"Serhii Yarynovskyi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10216431/avatar.png","web_url":"https://gitlab.com/syarynovskyi"}],"author":{"id":9347704,"username":"gdoud","name":"Gayle Doud","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9347704/avatar.png","web_url":"https://gitlab.com/gdoud"},"type":"ISSUE","assignee":{"id":10216431,"username":"syarynovskyi","name":"Serhii Yarynovskyi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10216431/avatar.png","web_url":"https://gitlab.com/syarynovskyi"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357583","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357583","notes":"https://gitlab.com/api/v4/projects/278964/issues/357583/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357583/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357583","relative":"#357583","full":"gitlab-org/gitlab#357583"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105912388,"iid":357581,"project_id":278964,"title":"Remove temporary index added by \"Add temp index for notes without discussion_id\"","description":"The following discussion from !84038 should be addressed:\n\n- [ ] @Alexand started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84038#note_898097035): \n\n    \u003e Could we create already the issue to track the removal of the temporary index, and add a comment [as suggested in our docs](https://docs.gitlab.com/ee/development/adding_database_indexes.html#temporary-indexes)?\n    \u003e \n    \u003e The docs actually exemplify on a sync migration, but since we're effectively creating the index with this async one, I wondered if it would be worth to create it already and add the comment. WDYT?","state":"closed","created_at":"2022-04-01T20:57:09.101Z","updated_at":"2022-06-21T12:00:58.278Z","closed_at":"2022-06-01T03:12:24.240Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Deliverable","auto updated","backend","devops::plan","group::project management","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":683729,"username":"Alexand","name":"JoÃ£o Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357581","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357581","notes":"https://gitlab.com/api/v4/projects/278964/issues/357581/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357581/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357581","relative":"#357581","full":"gitlab-org/gitlab#357581"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105905539,"iid":357569,"project_id":278964,"title":"Add identifier field to securityTrainingUrls GraphQL Query","description":"In order to capture the metric identifier when the training link is clicked, the training link must contain the identifier. Here's the related ~frontend issue \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/353322#note_897929840\n\nCould we please include this information in our `securityTrainingUrls` GraphQL Query response:\n\n```\n{\n  project(fullPath: \"sec-group/security-reports-ex\") {\n    id\n    securityTrainingUrls(identifierExternalIds: [\"81\", \"79\"]) {\n      name\n      status\n      url\n      identifier // ðŸ‘ˆ the name of the vulnerability\n    }\n  }\n}\n```\n\nLooking at the response from both our vendors, **Kontra** and **SCW**, looks like they do provide this information; both under the `name` field.\n\n```\n// Sample response from SCW\n{\n  url: \"https://portal.securecodewarrior.com/?utm_source=partner-integration:gitlab#/website-trial/web/injection/sql/java/spring\",\n  name: \"Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection')\", ðŸ‘ˆ\n  description: \"...\"\n};\n\n\n// Sample response from Kontra\n{\n    name: \"Reflected Cross Site Scripting\", ðŸ‘ˆ\n    \"cwe\": [\n        81,\n        83,\n        87\n    ],\n    \"language\": \"java\",\n    \"link\": \"https://application.security/free-application-security-training/owasp-top-10-reflected-cross-site-scripting\"\n}\n```\n\n## Implementation plan:\n\n- [x] Add external identifier (got from initializer https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/finders/security/training_providers/base_url_finder.rb) in api response \n output https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/finders/security/training_providers/base_url_finder.rb#L19-25","state":"closed","created_at":"2022-04-01T18:13:22.564Z","updated_at":"2022-04-25T03:22:30.887Z","closed_at":"2022-04-19T23:05:35.670Z","closed_by":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"labels":["backend","devops::secure","feature::addition","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357569","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357569","notes":"https://gitlab.com/api/v4/projects/278964/issues/357569/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357569/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357569","relative":"#357569","full":"gitlab-org/gitlab#357569"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105898308,"iid":357553,"project_id":278964,"title":"Disable user scope for global searching on Gitlab.com","description":"### Overview \n\n   Occasionally Global Searching, when searches are across any group, is resource-intensive to both Elastic search and Postgres. \n\nRecently we have seen a resource impact for searches in the User scope across any group. Searches can take up to 15 min. \n\nSearching users without a specified group would be a niche use case that would not be presumed valuable as part of Global Search. \n\n\n### Proposed solution\n\nOne possible solution is to disable the scope when no group is selected. \n\nThis MR is focused on Mitigating the impact to Advanced Search when using Elasticsearch. It's not clear if this is an option for User Scope searches which does not use Elasticsearch. \nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/68640#504ab799da80c4c1fdb6316833bcac0b90d13572_159_172\n\nref: \nhttps://gitlab.com/gitlab-org/gitlab/-/blob/8cf4b3e0924030712320911ca40b0f074e03b51b/app/controllers/search_controller.rb#L172","state":"closed","created_at":"2022-04-01T15:38:41.884Z","updated_at":"2022-09-16T21:00:31.366Z","closed_at":"2022-04-18T19:11:17.181Z","closed_by":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"labels":["Category:Global Search","advanced search","devops::data_stores","group::global search","section::enablement","type::maintenance","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"}],"author":{"id":5724558,"username":"JohnMcGuire","name":"John McGuire","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5724558/avatar.png","web_url":"https://gitlab.com/JohnMcGuire"},"type":"ISSUE","assignee":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357553","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357553","notes":"https://gitlab.com/api/v4/projects/278964/issues/357553/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357553/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357553","relative":"#357553","full":"gitlab-org/gitlab#357553"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105890958,"iid":357544,"project_id":278964,"title":"Update translations levels (May 2022)","description":"## Introduction\n\nWith the implementation of the feature to show the [translation coverage](https://gitlab.com/gitlab-org/gitlab/-/issues/328430) in the language selection dropdown, the translation levels need to be updated on a monthly cadence. \n\n## Proposal\n\nOnce the monthly merge of the new translations is complete, update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43) from Crowdin.\n\n## Documentation\n\n* https://docs.gitlab.com/ee/development/i18n/merging_translations.html#manually-update-the-translation-levels\n\n#### ToDo\n* [ ] After cloning: update Title, set Milestone, Due date (15th), Related to previous month's issue.\n* [ ] After the 1st of the month: assign to yourself, set ~2526320 \n* [ ] Complete the [regular monthly merge](https://gitlab.com/groups/gitlab-org/-/epics/3571) of translations from Crowdin.\n* [ ] Get the translation levels (% approved words) from [Crowdin](https://crowdin.com/project/gitlab-ee).\n* [ ] Create an MR to update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43).\n* [ ] Associate that MR to this issue.\n* [ ] Complete the MR.\n* [ ] When done, clone [this template issue](https://gitlab.com/gitlab-org/gitlab/-/issues/349815) for the next milestone.","state":"closed","created_at":"2022-04-01T14:10:13.543Z","updated_at":"2022-05-24T12:01:41.045Z","closed_at":"2022-04-05T07:36:19.075Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","section::dev","type::maintenance","workflow::blocked"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-05-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357544","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357544","notes":"https://gitlab.com/api/v4/projects/278964/issues/357544/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357544/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357544","relative":"#357544","full":"gitlab-org/gitlab#357544"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":105879774,"iid":357517,"project_id":278964,"title":"Browser-based check 16.1 should ignore responses that don't have a body","description":"\n### Problem\n\nThe Browser-based DAST check `16.1` checks to see if a response has a `Content-Type` header. The check registers a finding for redirects and other responses without bodies. These are almost certainly false-positives.\n\n### Proposal\n\nThe check requires that a response is present, with the `requirement: \"has_response\"`. This should be converted to a `requirement: \"has_response_body\"`. The has response body requirement should also verify that a response is present.\n\n### Implementation\n\n- [x] Requirement `has_response_body` can be parsed in Browserker\n- [x] Requirement `has_response_body` verifies that there is a response and it has a response body of length \u003e 0\n- [x] Requirement `has_response_body` is understood by the schema\n- [x] Check `16.1` is updated to use the new requirement\n- [x] `16.1` test is updated to verify it doesn't create a finding when there is no body","state":"closed","created_at":"2022-04-01T10:39:00.236Z","updated_at":"2022-06-20T03:43:26.183Z","closed_at":"2022-06-16T08:16:32.190Z","closed_by":{"id":8995688,"username":"atiwari71","name":"Aditya Tiwari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8995688/avatar.png","web_url":"https://gitlab.com/atiwari71"},"labels":["Category:DAST","dast::browserker","devops::secure","group::dynamic analysis","section::sec","type::feature","workflow::start"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":8995688,"username":"atiwari71","name":"Aditya Tiwari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8995688/avatar.png","web_url":"https://gitlab.com/atiwari71"}],"author":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"type":"ISSUE","assignee":{"id":8995688,"username":"atiwari71","name":"Aditya Tiwari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8995688/avatar.png","web_url":"https://gitlab.com/atiwari71"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357517","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357517","notes":"https://gitlab.com/api/v4/projects/278964/issues/357517/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357517/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357517","relative":"#357517","full":"gitlab-org/gitlab#357517"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5779,"epic":{"id":251192,"iid":5779,"title":"Browser-based DAST - Passive Attack Parity","url":"/groups/gitlab-org/-/epics/5779","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105878867,"iid":357515,"project_id":278964,"title":"Create row count metric and alert for stalled (pre)imports during registry migration phase 2","description":"## Problem\n\n(Pre)import completion notifications from the registry to Rails can go missing and in that case, Rails will be left in the dark in regards to completions. This is especially critical if we're dealing with missing final import completion notifications, we a repository is kept in read-only mode during a final import.\n\nWe need a way to monitor this specific event and alert us if the count of \"stalled\" (at least from the Rails perspective) migrations goes above a given threshold and/or keep above if for longer than a given amount of time.\n\n## Solution\n\n### Prometheus\n\nCreate two new row count metrics on top of the Rails `container_repositories` database table, one for counting potentially stalled pre-imports and another for final imports. This requires a change in `gitlab-exporter` and `chef-repo`, similar to what was done in https://gitlab.com/gitlab-org/gitlab/-/issues/356286, which will take care of generating the respective Prometheus metrics.\n\n### Grafana\n\nWe should then add a graph for the resulting metrics to the registry migration dashboard in Grafana (similar to https://gitlab.com/gitlab-com/runbooks/-/merge_requests/4482).\n\n### Alerts (Slack and ~\"severity::4\" incident)\n\nFinally, we should create an alert in the `runbooks` project so that if each count goes above `N` for longer than `Y` we'll get a notification on Slack ([#alerts](https://gitlab.slack.com/channels/alerts) and [#feed_alerts-general](https://gitlab.slack.com/channels/alerts-general) channels) and an S4 incident is automatically created for investigation.\n\nSee https://gitlab.com/gitlab-com/runbooks/-/blob/master/docs/monitoring/alerts_manual.md for instructions.\n\nHere is a _very_ similar example: https://gitlab.com/gitlab-com/runbooks/-/merge_requests/3966/diffs.","state":"closed","created_at":"2022-04-01T10:20:13.436Z","updated_at":"2022-05-26T13:48:28.059Z","closed_at":"2022-04-13T11:26:07.631Z","closed_by":{"id":5054840,"username":"jdrpereira","name":"JoÃ£o Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration Unplanned","Container Registry Migration::Phase 2","Observability","backend","devops::package","group::package registry","section::ops","type::maintenance"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5054840,"username":"jdrpereira","name":"JoÃ£o Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"}],"author":{"id":5054840,"username":"jdrpereira","name":"JoÃ£o Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"type":"ISSUE","assignee":{"id":5054840,"username":"jdrpereira","name":"JoÃ£o Pereira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054840/avatar.png","web_url":"https://gitlab.com/jdrpereira"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357515","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357515","notes":"https://gitlab.com/api/v4/projects/278964/issues/357515/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357515/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357515","relative":"#357515","full":"gitlab-org/gitlab#357515"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105877831,"iid":357514,"project_id":278964,"title":"pre-push git hooks for the Gemnasium repos","description":"### Problem to solve\n\nAs a developer working on Gemnasium in an MR, I want to know that my change doesn't pass code linting before I push a new commit, and don't want to wait for a failing linting job (running on the CI) to tell me about it.\n- Async notifications about failing linting jobs cause a context switch, and that impacts my productivity.\n- Pushing code that doesn't pass code linting is a waste of resources.\n- (Also, it clutters the git history for the branch.)\n\n### Proposal\n\nConfigure `pre-push` git hooks that perform the same checks as the ones performed in the pipeline:\n- go lint\n- go mod tidy\n- CI lint (either using the API or locally using the [JSON schema](https://gitlab.com/gitlab-org/gitlab/-/raw/master/app/assets/javascripts/editor/schema/ci.json))\n\nUse [lefthook](https://github.com/evilmartians/lefthook) to configure the git hooks, [like in the `gitlab` project](https://docs.gitlab.com/ee/development/contributing/style_guides.html).\n\nThe lefthook configuration and the scripts it needs are shared by the 3 Gemnasium projects.\n\nShare the same code to perform the checks locally in the `pre-push` hooks, and in the linting jobs running on the CI.\n\nSee https://gitlab.com/gitlab-org/security-products/ci-templates/-/merge_requests/286#note_897023510 and https://gitlab.com/gl-retrospectives/secure-sub-dept/composition-analysis/-/issues/17#note_874691062 for context.\n\n### Documentation\n\nTODO: figure out where this should be documented\n\n### Intended users\n\n~\"group::composition analysis\" ~backend developers, and contributors to Gemnasium.\n\n/cc @adamcohen @ifrenkel @gonzoyumo","state":"closed","created_at":"2022-04-01T10:03:51.273Z","updated_at":"2023-01-09T21:26:33.521Z","closed_at":"2023-01-09T21:24:23.341Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Dependency Scanning","GitLab Ultimate","backend","devops::secure","group::composition analysis","maintenance::workflow","priority::3","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357514","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357514","notes":"https://gitlab.com/api/v4/projects/278964/issues/357514/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357514/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357514","relative":"#357514","full":"gitlab-org/gitlab#357514"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105874438,"iid":357513,"project_id":278964,"title":"[VSA] Hide the create/end event filter","description":"For the upcoming %\"15.0\" milestone we should remove the toggle implemented as part of https://gitlab.com/gitlab-org/gitlab/-/issues/352428\n\n**How:**\n\nHide the enable/disable toggle by changing the FE code and enable the `use_vsa_aggregated_tables` FF by default.\n\nAdditionally, create a follow-up issue (15.1 or 15.2) to completely remove the toggle. This gives us an option to roll back to the old behaviour in case we discover issues with the new filtering mechanism. The rollback option is for emergencies: when we must restore the old VSA backend. This can be achievedd by disabling the `use_vsa_aggregated_tables` feature flag.","state":"closed","created_at":"2022-04-01T09:43:25.431Z","updated_at":"2022-05-24T12:01:16.653Z","closed_at":"2022-05-10T08:29:52.435Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Category:Value Stream Management","Deliverable","auto updated","devops::manage","frontend","group::optimize","priority::1","section::dev","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357513","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357513","notes":"https://gitlab.com/api/v4/projects/278964/issues/357513/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357513/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357513","relative":"#357513","full":"gitlab-org/gitlab#357513"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6046,"epic":{"id":274497,"iid":6046,"title":"[VSA] Date range filter should apply to end events","url":"/groups/gitlab-org/-/epics/6046","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105867872,"iid":357498,"project_id":278964,"title":"Enqueuer: update enqueue waiting time checks","description":"## :fire: Problem\n\nThe Enqueuer can enforce a waiting time between 2 migrations.\n\nTo do this, it will do the following:\n1. Gather all migrations in final states (`import_done`, `pre_import_done`, `import_aborted`).\n1. Take the most recent `X_done_at` timestamps and use that as the last activity.\n1. Use the delay between `Time.zone.now` and the timestamp in (2.).\n\nThe problem is that due to bugs, the related timestamps could be missing. If this [statement](https://gitlab.com/gitlab-org/gitlab/-/blob/0558447ca45a850a96abcd637ea576caf92ffb60/app/workers/container_registry/migration/enqueuer_worker.rb#L83) is evaluated with a `nil` value, it will always return false = the job will be never allowed to run.\n\n## :fire_engine: Solution\n\nI think we should update the logic around the waiting time enforcement with:\n\n* Additionally consider `import_skipped` with the related timestamp `migration_skipped_at`\n* Make sure that all `before_transition` for each considered state that set the related timestamp uses `any` as the starting state.\n   * Example of [one](https://gitlab.com/gitlab-org/gitlab/-/blob/0558447ca45a850a96abcd637ea576caf92ffb60/app/models/container_repository.rb#L162) that need an update\n* Add a guard similar to this [one](https://gitlab.com/gitlab-org/gitlab/-/blob/0558447ca45a850a96abcd637ea576caf92ffb60/app/workers/container_registry/migration/enqueuer_worker.rb#L81).\n   * To avoid evaluating a `nil` `last_import_step_done_at`.","state":"closed","created_at":"2022-04-01T08:53:21.113Z","updated_at":"2022-04-12T14:24:15.008Z","closed_at":"2022-04-12T14:24:14.958Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration::Phase 2","backend","devops::package","group::package registry","ruby","section::ops","type::bug","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357498","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357498","notes":"https://gitlab.com/api/v4/projects/278964/issues/357498/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357498/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357498","relative":"#357498","full":"gitlab-org/gitlab#357498"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105862439,"iid":357487,"project_id":278964,"title":"Merge i18n translations (May 2022)","description":"Merge the latest i18n translations from Crowdin on a monthly cadence.\n\nDocumentation available here: https://docs.gitlab.com/ee/development/i18n/merging_translations.html\n\n#### ToDo\n* [x] After cloning: update Title, set Milestone, Due date (15th), Related to previous month's issue.\n* [x] After the 1st of the month: assign to yourself, set ~\"workflow::in dev\" \n* [x] If needed, configure the [GitLab-Crowdin integration](https://docs.gitlab.com/ee/development/i18n/merging_translations.html#recreate-the-gitlab-integration-in-crowdin)\n* [x] Kick off a sync from [Crowdin](https://crowdin.com/project/gitlab-ee/apps/system/gitlab)\n* [x] Find the [MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026author_username=gitlab-crowdin-bot) created by @gitlab-crowdin-bot and associate it with this issue\n* [x] Complete the MR\n* [x] Update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43) with the latest numbers. (Find the issue [here](https://gitlab.com/groups/gitlab-org/-/epics/3571))\n* [x] When done, clone [this template issue](https://gitlab.com/gitlab-org/gitlab/-/issues/339980) for the next milestone.","state":"closed","created_at":"2022-04-01T07:50:36.037Z","updated_at":"2022-05-24T12:01:41.175Z","closed_at":"2022-05-11T05:24:28.750Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-05-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357487","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357487","notes":"https://gitlab.com/api/v4/projects/278964/issues/357487/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357487/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357487","relative":"#357487","full":"gitlab-org/gitlab#357487"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":105861308,"iid":357484,"project_id":278964,"title":"Swagger UI: passing `displayOperationId=true` in URL not displaying operation IDs anymore","description":"### Summary\n\nSince [upgrading Swagger UI](https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2312), passing `?displayOperationId=true` doesn't seem to work anymore.\n\nIt looks like this is a bug in the Swagger UI dependency, according to [their docs](https://swagger.io/docs/open-source-tools/swagger-ui/usage/configuration/) it is possible to pass `displayOperationId` in the URL query string.\n\nWe could temporarily patch this in our codebase by reading `displayOperationId` from the query string and pass it as a [config option](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/blob/openapi/index.js#L10). Alternatively, we can enable `displayOperationId`by default.\n\n### Steps to reproduce\n\n1. Create an OpenAPI file\n2. View the file\n3. Add `?displayOperationId=true` in the URL query string\n\n### Example Project\n\nhttps://gitlab.com/jerasmus/jerasmus-test-project/-/blob/master/swagger.json?displayOperationId=true\n\n### What is the current *bug* behavior?\n\nPassing `?displayOperationId=true` in the URL does not display the operation names.\n\n![Screenshot_2022-04-01_at_09.31.33](/uploads/7d3365c198a6fd911269586f4060148e/Screenshot_2022-04-01_at_09.31.33.png)\n\n### What is the expected *correct* behavior?\n\nPassing `?displayOperationId=true` in the URL should display the operation names.\n\n![Screenshot_2022-04-01_at_09.32.02](/uploads/b5bbd2b57580f1201e22d81e5af4da1a/Screenshot_2022-04-01_at_09.32.02.png)\n\n### Possible fixes\n\n\n1. We could temporarily patch this in our codebase by reading `displayOperationId` from the query string and pass it as a [config option](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/blob/openapi/index.js#L10). \n2. Alternatively, we can enable `displayOperationId`by default.\n3. Or we can fix the bug in Swagger-ui by contributing upstream.","state":"closed","created_at":"2022-04-01T07:36:20.296Z","updated_at":"2022-06-08T12:09:40.068Z","closed_at":"2022-05-17T06:21:14.110Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","customer","devops::create","frontend","group::source code","priority::3","section::dev","severity::4","type::bug"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":10,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357484","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357484","notes":"https://gitlab.com/api/v4/projects/278964/issues/357484/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357484/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357484","relative":"#357484","full":"gitlab-org/gitlab#357484"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105858980,"iid":357480,"project_id":278964,"title":"[Feature flag] Rollout of `uncached_mr_attention_requests_count`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the fix](https://gitlab.com/gitlab-org/gitlab/-/issues/357385) on production, that is currently behind the `uncached_mr_attention_requests_count` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::code review\" \n- Most appropriate slack channel to reach out to: `#g_create_code-review`\n- Best individual to reach out to: `@patrickbajao`\n- PM: `@phikai`\n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nAttention requests count shown is accurate with actual open MRs with attention requests.\n\n### What might happen if this goes wrong?\n\nSlow down of pages where the attention requests count is shown.\n\n### What can we monitor to detect problems with this?\n\nDashboards of common pages:\n- Root: https://dashboards.gitlab.net/d/web-rails-controller/web-rails-controller?orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-stage=main\u0026var-controller=RootController\u0026var-action=index\n- Project page: https://dashboards.gitlab.net/d/web-rails-controller/web-rails-controller?orgId=1\n- MR page: https://dashboards.gitlab.net/d/web-rails-controller/web-rails-controller?orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-stage=main\u0026var-controller=Projects::MergeRequestsController\u0026var-action=show\n\nIf the SQL latency charts of those pages show slowness, disable the feature flag.\n\n### What can we check for monitoring production after rollouts?\n\nSame dashboards as above.\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set uncached_mr_attention_requests_count true --dev`\n    - [x] `/chatops run feature set uncached_mr_attention_requests_count true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --user=andrashorvath uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=chriscool uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=proglottis uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=jcaigitlab uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=pks-t uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=8bitlife uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=samihiltunen uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=toon uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=wchandler uncached_mr_attention_requests_count true`\n    - [x] `/chatops run feature set --user=avar uncached_mr_attention_requests_count true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the bug issue](https://gitlab.com/gitlab-org/gitlab/-/issues/357385) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_create_code-review`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set uncached_mr_attention_requests_count 25 --actors`\n    - [ ] `/chatops run feature set uncached_mr_attention_requests_count 50 --actors`\n    - [ ] `/chatops run feature set uncached_mr_attention_requests_count 75 --actors`\n    - [ ] `/chatops run feature set uncached_mr_attention_requests_count 100 --actors`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set uncached_mr_attention_requests_count true`\n- [ ] Announce on [the bug issue](https://gitlab.com/gitlab-org/gitlab/-/issues/357385) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `uncached_mr_attention_requests_count` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the bug issue](https://gitlab.com/gitlab-org/gitlab/-/issues/357385) to indicate the fix will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete uncached_mr_attention_requests_count --dev\n    - [x] `/chatops run feature delete uncached_mr_attention_requests_count --staging`\n    - [x] `/chatops run feature delete uncached_mr_attention_requests_count`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set uncached_mr_attention_requests_count false\n```","state":"closed","created_at":"2022-04-01T07:05:40.727Z","updated_at":"2022-08-26T13:27:01.798Z","closed_at":"2022-07-01T19:37:16.342Z","closed_by":{"id":853414,"username":"andr3","name":"AndrÃ© LuÃ­s","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["backend","devops::create","feature flag","feature::addition","group::code review","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357480","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":56,"completed_count":17},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"17 of 56 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357480","notes":"https://gitlab.com/api/v4/projects/278964/issues/357480/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357480/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357480","relative":"#357480","full":"gitlab-org/gitlab#357480"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5331,"epic":{"id":195597,"iid":5331,"title":"Merge requests that require my attention","url":"/groups/gitlab-org/-/epics/5331","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":105854302,"iid":357467,"project_id":278964,"title":"Follow-up from \"Update policy list root file to be malleable\"","description":"The following discussion from !83911 should be addressed:\n\n- [ ] @afontaine started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83911#note_896518919): \n\n    \u003e Do we always need both `groupPath` and `projectPath`, or can we consider resolving them all under a `namespacePath` or `entityPath` or something?\n    \u003e \n    \u003e I see we're already using `namespaceType` to keep track of whether this is a group or a project.","state":"closed","created_at":"2022-04-01T04:32:28.533Z","updated_at":"2022-09-20T04:01:33.787Z","closed_at":"2022-09-20T04:01:33.763Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","auto updated","devops::govern","frontend","frontend-weight::2","group::security policies","missed:15.1","missed:15.2","missed:15.3","section::sec","type::maintenance"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357467","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357467","notes":"https://gitlab.com/api/v4/projects/278964/issues/357467/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357467/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357467","relative":"#357467","full":"gitlab-org/gitlab#357467"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105850607,"iid":357461,"project_id":278964,"title":"Use IterationCadenceID for querying cadences","description":"The frontend components are using Cadence model IDs to query cadences. We should replace them with `IterationCadenceID` to unblock #257883.","state":"closed","created_at":"2022-04-01T01:18:13.489Z","updated_at":"2022-04-26T19:14:18.629Z","closed_at":"2022-04-21T23:22:20.454Z","closed_by":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"labels":["GraphQL","auto updated","devops::plan","frontend","group::project management","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"}],"author":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"type":"ISSUE","assignee":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357461","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357461","notes":"https://gitlab.com/api/v4/projects/278964/issues/357461/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357461/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357461","relative":"#357461","full":"gitlab-org/gitlab#357461"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105850597,"iid":357460,"project_id":278964,"title":"Use IterationCadenceID for querying cadences","description":"","state":"closed","created_at":"2022-04-01T01:17:52.704Z","updated_at":"2022-04-26T19:14:18.571Z","closed_at":"2022-04-02T01:05:01.784Z","closed_by":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"labels":["GraphQL","auto updated","devops::plan","frontend","group::project management","section::dev"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[],"author":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357460","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357460","notes":"https://gitlab.com/api/v4/projects/278964/issues/357460/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357460/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357460","relative":"#357460","full":"gitlab-org/gitlab#357460"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105849236,"iid":357457,"project_id":278964,"title":"Map worker-entry tests to job index","description":"### Problem\n\nThe worker-entry integration tests are performed across 20 ci jobs, distributed based on time. Because of this it is very hard to figure out which test ran on which worker to access the test assets, unless the test is failing.\n\n### Proposal\n\nAll of the worker-entry tests are shown on the pipelines `Test` tab. Can we add information to the details, or perhaps name of the test in order to know which job index number is in use?\n\nIndex numbers shown in red:\n\n![image](/uploads/f4a8e9684f9c0befc80e16758b401110/image.png)\n\nThe `Test` tab is built by importing the junit output from pytest. Can the output be modified to add this information? Could the test title include the index number in it?","state":"closed","created_at":"2022-03-31T23:58:02.191Z","updated_at":"2022-05-19T15:33:04.298Z","closed_at":"2022-05-19T15:33:04.276Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357457","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357457","notes":"https://gitlab.com/api/v4/projects/278964/issues/357457/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357457/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357457","relative":"#357457","full":"gitlab-org/gitlab#357457"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105849127,"iid":357456,"project_id":278964,"title":"Add more nuance to tests that use vulnerability count as an assert","description":"### Problem\n\nMany of our tests, especially integration tests, use vulnerability counts as a primary \"it's working right\" signal. When a test fails due to a vulnerability count issue, it can be hard to understand/identify cause because no additional information is provided to the developer. This also makes it hard to spot patterns in flaky tests, and has lead to many tests having a range of vulnerability counts to work around a flaky result.\n\n### Proposal\n\nInstead of asserting on a count we should assert on the array of `cve`'s found. This would allow diff output on failure and also make it easy to identify when testing isn't deterministic in some way.\n\nTo be prepared for parallel speed work the list should be sorted.\n\nThere are several places we use count:\n\n1. [x] The quick integration jobs in `.gitlab-ci.yml` which use `checkreportfaultcount.sh`. - https://gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing-src/-/merge_requests/671\n1. [x] The worker-entry tests - https://gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing-src/-/merge_requests/672\n1. ~[ ] Tests that use `checklastjob.py`~ - These tests are not used and may be removed in the future\n1. [x] The e2e tests\n    1. [x] Change the [e2e-image](https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/e2e-image) to assert on expected CVEs that are passed in\n        1. [x] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/e2e-image/-/merge_requests/3\n        1. [ ] https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/e2e-image/-/merge_requests/4\n    1. [x] Add expected CVEs to the e2e tests in the main build - https://gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing-src/-/merge_requests/677","state":"closed","created_at":"2022-03-31T23:46:06.714Z","updated_at":"2022-06-30T17:38:08.700Z","closed_at":"2022-06-30T17:38:08.685Z","closed_by":{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","milestone::p1","section::sec","type::maintenance","workflow::in dev"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357456","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":6},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357456","notes":"https://gitlab.com/api/v4/projects/278964/issues/357456/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357456/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357456","relative":"#357456","full":"gitlab-org/gitlab#357456"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":105847724,"iid":357447,"project_id":278964,"title":"Backend: Migrate dotenv_variables values for Bronze/Silver/Gold to match Premium/Ultimate plans..","description":"### Summary\n\nCurrently, the `dotenv_variables` value in our `bronze`, `silver` and `gold` plans are set to a lower value than our `free` plan as noted by the output below.  Though these plans may no longer be in use and have migrated to `premium` and `ultimate` plans, the values should be updated so that they are consistent with how they should look compared to other GitLab plans.\n\n```sql\ngitlabhq_production=\u003e select name, dotenv_size, dotenv_variables from plan_limits inner join plans on plan_limits.plan_id = plans.id;\n      name      | dotenv_size | dotenv_variables\n----------------+-------------+------------------\n early_adopter  |        5120 |               20\n bronze         |        5120 |               20\n silver         |        5120 |               20\n gold           |        5120 |               20\n free           |        5120 |               50\n default        |        5120 |              150\n premium        |        5120 |              100\n ultimate       |        5120 |              150\n ultimate_trial |        5120 |              150\n premium_trial  |        5120 |              100\n opensource     |        5120 |              150\n(11 rows)\n```\n\n### Solution\n\nCreate a migration like the previous [one](https://gitlab.com/gitlab-org/gitlab/-/blob/931c9f3c133c09209fc8f7a41e1642fe30cb2de7/db/migrate/20211105161404_insert_dotenv_application_limits.rb) that set these values so that they are brought up to be in alignment with what the correct `dotenv_variables` size should be.\n\nThose values in `bronze`, `silver` and `gold` should match with the `Premium` and `Ultimate` plans that replaced them.","state":"closed","created_at":"2022-03-31T22:08:23.632Z","updated_at":"2022-05-02T09:51:55.385Z","closed_at":"2022-04-25T10:26:27.461Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["CI variables","Category:Pipeline Authoring","backend","devops::verify","group::pipeline authoring","pipeline processing","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"}],"author":{"id":9468400,"username":"marknuzzo","name":"Mark Nuzzo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9468400/avatar.png","web_url":"https://gitlab.com/marknuzzo"},"type":"ISSUE","assignee":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/357447","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/357447","notes":"https://gitlab.com/api/v4/projects/278964/issues/357447/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/357447/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#357447","relative":"#357447","full":"gitlab-org/gitlab#357447"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":47581,"iid":59,"sequence":14,"group_id":9970,"title":"Pipeline Authoring: April 18, 2022 - May 1, 2022","description":"Target milestone `15.0`","state":3,"created_at":"2022-02-06T00:05:01.693Z","updated_at":"2022-05-02T00:05:02.688Z","start_date":"2022-04-18","due_date":"2022-05-01","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/47581"},"health_status":null}]