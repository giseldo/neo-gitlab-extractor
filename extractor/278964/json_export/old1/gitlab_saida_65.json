[{"id":88363547,"iid":332942,"project_id":278964,"title":"Switch over to Build associations for DAST On-demand CI Variable Delivery","description":"The following discussion from !63362 should be addressed:\n\n- [ ] @philipcunningham started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63362#note_594934607): \n\n    \u003e ~backend \n    \u003e \n    \u003e i expect that we will want to use this variable association mechanism over the existing one (via `ci_pipelines` association) but keep the notion of there being a trigger for on-demand. i would like to do this as a follow-up in a subsequent milestone. does that work for you?","state":"closed","created_at":"2021-06-08T05:30:34.493Z","updated_at":"2021-08-06T01:53:48.528Z","closed_at":"2021-08-06T01:53:48.512Z","closed_by":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"labels":["Category:DAST","backend","devops::secure","group::dynamic analysis","maintenance::refactor","section::sec","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"}],"author":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"type":"ISSUE","assignee":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332942","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332942","notes":"https://gitlab.com/api/v4/projects/278964/issues/332942/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332942/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332942","relative":"#332942","full":"gitlab-org/gitlab#332942"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88360676,"iid":332937,"project_id":278964,"title":"GraphQL: Add issue to response for `IssueMoveList` mutation","description":"The following discussion from !59379 should be addressed:\n\n- [ ] @cablett started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59379#note_578022909): \n\n    \u003e I'm a bit surprised we didn't have this before. Anyway, I'm glad it's being added now. I see this is also missing from `IssueMoveList` so we might want a followup issue to add it there too. :thumbsup:","state":"closed","created_at":"2021-06-08T03:39:51.734Z","updated_at":"2021-11-08T16:06:31.015Z","closed_at":"2021-06-08T03:40:53.765Z","closed_by":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"labels":["Category:Team Planning","GraphQL","boards","devops::plan","group::product planning","maintenance::refactor","section::dev"],"milestone":null,"assignees":[],"author":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332937","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332937","notes":"https://gitlab.com/api/v4/projects/278964/issues/332937/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332937/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332937","relative":"#332937","full":"gitlab-org/gitlab#332937"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88358114,"iid":332932,"project_id":278964,"title":"Update spotbugs Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:54:52.156Z","updated_at":"2022-05-02T03:47:05.742Z","closed_at":"2022-04-29T22:52:33.877Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332932","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332932","notes":"https://gitlab.com/api/v4/projects/278964/issues/332932/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332932/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332932","relative":"#332932","full":"gitlab-org/gitlab#332932"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88358043,"iid":332931,"project_id":278964,"title":"Update pmd-apex Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:51:45.734Z","updated_at":"2022-05-02T03:47:05.784Z","closed_at":"2022-04-29T22:52:58.980Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332931","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332931","notes":"https://gitlab.com/api/v4/projects/278964/issues/332931/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332931/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332931","relative":"#332931","full":"gitlab-org/gitlab#332931"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88358030,"iid":332930,"project_id":278964,"title":"Update secrets Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:51:02.384Z","updated_at":"2022-05-02T03:47:05.822Z","closed_at":"2022-04-29T22:53:49.800Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332930","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332930","notes":"https://gitlab.com/api/v4/projects/278964/issues/332930/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332930/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332930","relative":"#332930","full":"gitlab-org/gitlab#332930"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88358023,"iid":332929,"project_id":278964,"title":"Update nodejs-scan Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:50:24.925Z","updated_at":"2022-05-02T03:47:05.854Z","closed_at":"2022-04-29T22:55:06.402Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332929","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332929","notes":"https://gitlab.com/api/v4/projects/278964/issues/332929/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332929/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332929","relative":"#332929","full":"gitlab-org/gitlab#332929"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88358016,"iid":332928,"project_id":278964,"title":"Update kubesec Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:49:36.435Z","updated_at":"2022-05-02T03:47:06.386Z","closed_at":"2022-04-29T22:55:12.188Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332928","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332928","notes":"https://gitlab.com/api/v4/projects/278964/issues/332928/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332928/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332928","relative":"#332928","full":"gitlab-org/gitlab#332928"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88357999,"iid":332927,"project_id":278964,"title":"Update sobelow Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:48:01.121Z","updated_at":"2022-05-02T03:47:06.425Z","closed_at":"2022-04-29T22:55:14.872Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332927","notes":"https://gitlab.com/api/v4/projects/278964/issues/332927/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332927/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332927","relative":"#332927","full":"gitlab-org/gitlab#332927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88357954,"iid":332926,"project_id":278964,"title":"Update gosec Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:46:41.496Z","updated_at":"2022-05-02T03:47:06.463Z","closed_at":"2022-04-29T22:55:27.737Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332926","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332926","notes":"https://gitlab.com/api/v4/projects/278964/issues/332926/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332926/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332926","relative":"#332926","full":"gitlab-org/gitlab#332926"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88357945,"iid":332925,"project_id":278964,"title":"Update flawfinder Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:45:52.956Z","updated_at":"2022-05-02T03:47:06.495Z","closed_at":"2022-04-29T22:55:33.999Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332925","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332925","notes":"https://gitlab.com/api/v4/projects/278964/issues/332925/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332925/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332925","relative":"#332925","full":"gitlab-org/gitlab#332925"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88357937,"iid":332924,"project_id":278964,"title":"Update mobSF Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:45:26.994Z","updated_at":"2022-05-02T03:47:06.528Z","closed_at":"2022-04-29T22:56:01.901Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332924","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332924","notes":"https://gitlab.com/api/v4/projects/278964/issues/332924/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332924/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332924","relative":"#332924","full":"gitlab-org/gitlab#332924"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88357913,"iid":332923,"project_id":278964,"title":"Update eslint Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:45:00.374Z","updated_at":"2022-05-02T03:47:06.557Z","closed_at":"2022-04-29T22:56:49.712Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332923","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332923","notes":"https://gitlab.com/api/v4/projects/278964/issues/332923/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332923/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332923","relative":"#332923","full":"gitlab-org/gitlab#332923"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88357882,"iid":332922,"project_id":278964,"title":"Update bandit Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:43:26.005Z","updated_at":"2022-05-02T03:47:06.588Z","closed_at":"2022-04-29T22:57:16.007Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332922","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332922","notes":"https://gitlab.com/api/v4/projects/278964/issues/332922/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332922/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332922","relative":"#332922","full":"gitlab-org/gitlab#332922"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88357794,"iid":332921,"project_id":278964,"title":"Update security-code-scan Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T01:40:58.275Z","updated_at":"2022-05-02T03:47:06.618Z","closed_at":"2022-04-29T22:57:21.465Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332921","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332921","notes":"https://gitlab.com/api/v4/projects/278964/issues/332921/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332921/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332921","relative":"#332921","full":"gitlab-org/gitlab#332921"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88356363,"iid":332919,"project_id":278964,"title":"Update phpcs-security-audit Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T00:27:32.359Z","updated_at":"2022-05-02T03:47:06.648Z","closed_at":"2022-04-29T22:57:27.891Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332919","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332919","notes":"https://gitlab.com/api/v4/projects/278964/issues/332919/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332919/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332919","relative":"#332919","full":"gitlab-org/gitlab#332919"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88356332,"iid":332918,"project_id":278964,"title":"Update Semgrep Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate the base image to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update Dockerfile to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass\n\n## Example\nhttps://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70","state":"closed","created_at":"2021-06-08T00:25:36.922Z","updated_at":"2022-05-02T03:47:06.678Z","closed_at":"2022-04-29T22:54:39.066Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5057937,"username":"dsearles","name":"Daniel Paul Searles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5057937/avatar.png","web_url":"https://gitlab.com/dsearles"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332918","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332918","notes":"https://gitlab.com/api/v4/projects/278964/issues/332918/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332918/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332918","relative":"#332918","full":"gitlab-org/gitlab#332918"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88356266,"iid":332917,"project_id":278964,"title":"Boards - Adding new list should update issue from other columns","description":"When adding a new list on a board (GraphQL issue boards and Epic boards), cards get duplicated between Open column and the new list instead of disappearing from the Open column.\n\n![epic_board_list_bug](/uploads/b69c7a40e474302bb915da8319104fc8/epic_board_list_bug.gif)\n\nInitially raised by @cablett","state":"closed","created_at":"2021-06-08T00:21:02.768Z","updated_at":"2021-11-08T16:06:33.576Z","closed_at":"2021-06-09T23:59:04.739Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["Category:Team Planning","boards","devops::plan","feature flag","frontend","group::product planning","section::dev","type::bug","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332917","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332917","notes":"https://gitlab.com/api/v4/projects/278964/issues/332917/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332917/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332917","relative":"#332917","full":"gitlab-org/gitlab#332917"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88355016,"iid":332910,"project_id":278964,"title":"Replace `work_in_progress` with `draft` in API","description":"Another step in \u00263879, in %\"14.0\" we should be able to introduce a breaking change like this.","state":"closed","created_at":"2021-06-07T23:06:51.510Z","updated_at":"2021-06-18T07:07:01.771Z","closed_at":"2021-06-10T04:04:01.570Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","group::code review","section::dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332910","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332910","notes":"https://gitlab.com/api/v4/projects/278964/issues/332910/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332910/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332910","relative":"#332910","full":"gitlab-org/gitlab#332910"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88353070,"iid":332906,"project_id":278964,"title":"Backup/restore rake tasks handles many databases","description":"Our `gitlab:backup` rake task should back up, and restore all databases.","state":"closed","created_at":"2021-06-07T21:42:29.114Z","updated_at":"2022-05-11T01:14:44.723Z","closed_at":"2022-05-11T01:14:44.396Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","auto updated","devops::systems","group::geo","pods::active","section::enablement","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332906","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332906","notes":"https://gitlab.com/api/v4/projects/278964/issues/332906/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332906/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/349052"},"references":{"short":"#332906","relative":"#332906","full":"gitlab-org/gitlab#332906"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6259,"epic":{"id":297938,"iid":6259,"title":"Decomposition: Backup/restore supports multiple databases","url":"/groups/gitlab-org/-/epics/6259","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":88350691,"iid":332901,"project_id":278964,"title":"Closed and Open issue vulnerability popover reference is too subtle","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nThe closed/open issue reference in vulnerability list popovers is quite subtle... some might say too subtle. The icons clearly differentiate but there isn't enough surface area to make the color distinction between blue and green matter.\n\nCan this be improved? _Should it be_?\n\n### Steps to reproduce\n\nVisit vulnerability list and see vulnerability with multiple linked issue (both open and closed) and observe.\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/security-products/analyzers/gosec/-/security/vulnerability_report\n\n### Relevant logs and/or screenshots\n\n![Screen_Shot_2021-06-07_at_11.57.49_AM](/uploads/dcc55009316ec27604f09c04f137d1b5/Screen_Shot_2021-06-07_at_11.57.49_AM.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n\n\n###  Proposal\n\n- Use new open/closed issue icons\n- Use `closed` text if issue has been closed\n- Add `4px` margin between icon and text\n\n| Before | After |\n| ------ | ------ |\n| ![Screen_Shot_2021-06-07_at_11.57.49_AM](/uploads/dcc55009316ec27604f09c04f137d1b5/Screen_Shot_2021-06-07_at_11.57.49_AM.png) | \u003cimg src=\"/uploads/9b8cba67a41a9cdb6e539fe1c7a1804d/Screen_Shot_2021-07-14_at_12.02.59_PM.png\" width=\"300px\"\u003e |\n\n\n### Implementation plan\n\n- [ ] ~frontend `ee/app/assets/javascripts/security_dashboard/components/shared/issues_badge.vue` is responsible for rendering this bit. Apply the proposed changes here.","state":"closed","created_at":"2021-06-07T20:27:02.837Z","updated_at":"2021-11-01T03:21:31.678Z","closed_at":"2021-10-26T08:34:01.353Z","closed_by":{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"},"labels":["Category:Vulnerability Management","UX","devops::secure","feature::enhancement","frontend","good for new contributors","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"}],"author":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"type":"ISSUE","assignee":{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"},"user_notes_count":35,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332901","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332901","notes":"https://gitlab.com/api/v4/projects/278964/issues/332901/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332901/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332901","relative":"#332901","full":"gitlab-org/gitlab#332901"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3590,"epic":{"id":68427,"iid":3590,"title":"Polished User Experience","url":"/groups/gitlab-org/-/epics/3590","group_id":9970},"iteration":null,"health_status":null},{"id":88350291,"iid":332899,"project_id":278964,"title":"Update Brakeman Dockerfile to use UBI8-minimal","description":"## Description\nIn order to harden the security of our Analyzers, we should migrate from Alpine base images to `UBI8-minimal:8.4`. \n\n## Proposal\nUpdate Dockerfile to use [UBI8-minimal](https://catalog.redhat.com/software/containers/ubi8/ubi-minimal/5c359a62bed8bd75a2c3fba8). See https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/merge_requests/70 for an example of this work. \n\nYou can use the [analyzer-scripts](https://gitlab.com/gitlab-org/secure/tools/analyzer-scripts) for quick iteration locally when testing changes to your Dockerfiles.\n\n## Tasks\n- [ ] Update [Dockerfile](https://gitlab.com/gitlab-org/security-products/analyzers/brakeman/-/blob/master/Dockerfile) to use UBI8-minimal:8.4.\n- [ ] Ensure `microdnf update` is in the final stage\n- [ ] Ensure the QA tests pass","state":"closed","created_at":"2021-06-07T20:15:38.409Z","updated_at":"2022-05-02T03:47:06.709Z","closed_at":"2022-04-29T22:57:32.673Z","closed_by":{"id":10034774,"username":"connorgilbert","name":"Connor Gilbert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10034774/avatar.png","web_url":"https://gitlab.com/connorgilbert"},"labels":["Category:SAST","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","section::sec","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5211947,"username":"zrice","name":"Zach Rice","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5211947/avatar.png","web_url":"https://gitlab.com/zrice"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332899","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332899","notes":"https://gitlab.com/api/v4/projects/278964/issues/332899/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332899/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332899","relative":"#332899","full":"gitlab-org/gitlab#332899"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6069,"epic":{"id":277317,"iid":6069,"title":"Distroless images for SAST analyzers","url":"/groups/gitlab-org/-/epics/6069","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88349437,"iid":332896,"project_id":278964,"title":"Persist Content Editor as default Markdown editor","description":"## Problem to solve\n\nTo use the Content Editor in the Wiki, you have to click the `Use new editor` button every time you edit a page. If you don't want to use the Content Editor, you have to dismiss the message on the Wiki edit view every time.\n\n## Proposal\n\nPersist the user preference for editing Markdown pages on the Wiki. If the user opts in to the Content Editor, it should become the default for all Markdown editing until the user explicitly opts out. \n\n### Details\n\n- This should _not_ be implemented as a user preference, since this should be a short-lived preference\n- The preference should be stored on a user basis, not a project. We shouldn't force everyone on a project to edit using the content editor if one user has opted in.","state":"closed","created_at":"2021-06-07T19:57:07.480Z","updated_at":"2022-07-21T12:01:44.246Z","closed_at":"2022-06-21T22:31:35.798Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Category:Wiki","Content Editor","Deliverable","UX","devops::create","frontend","group::editor","missed-deliverable","missed:14.4","missed:14.5","missed:14.7","missed:15.0","section::dev","workflow::planning breakdown"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":37,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332896","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332896","notes":"https://gitlab.com/api/v4/projects/278964/issues/332896/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332896/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332896","relative":"#332896","full":"gitlab-org/gitlab#332896"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5403,"epic":{"id":203844,"iid":5403,"title":"Use the Content Editor in Wiki","url":"/groups/gitlab-org/-/epics/5403","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e668\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":88348159,"iid":332895,"project_id":278964,"title":"Communicate beta status of Content Editor in Wiki","description":"## Problem to solve\n\nThe Content Editor is undergoing rapid development but doesn't support the full gamut of GitLab Flavored Markdown syntax and changes to the editing experience (particularly moving to a block-based editing approach) may be surprising or disruptive to folks who try out our MVC early.\n\nThe current experience to switch to the content editor is: \n\n![Screen_Shot_2021-06-07_at_3.40.12_PM](/uploads/9d026cafb96818aa289b03b2d653987d/Screen_Shot_2021-06-07_at_3.40.12_PM.png)\n\nAnd to switch back to the \"classic\" editor:\n\n![Screen_Shot_2021-06-07_at_3.40.17_PM](/uploads/c50839ccfc7e5044956de5d795236bd1/Screen_Shot_2021-06-07_at_3.40.17_PM.png)\n\n## Proposal\n\nRefine the messaging and CTA for switching between the classic Markdown editor and the Content Editor in the Wiki.\n\n#### On the classic editor\n\nTo encourage usage of the Content Editor but set the right expectations, we should communicate the benefits of the new editing experience but be upfront about the current status of the editor and any known incompatibilities. There should be a link to the strategy epic and the documentation. \n\n```\nGet a richer editing experience with our visual Markdown editor. Read the [documentation] and implementation [epic] to learn what's currently supported.\n\n[Use the new editor][Try this later]\n```\n\n`Try this later` dismisses the alert.\n\n#### On the new editor\n\nWe should encourage feedback on the new editor and give a clear path to reverting back to the old editor. \n\n```\nTell us your experiences with the new Markdown editor [in this feedback issue].\n\nRead the [documentation] and implementation [epic] to learn what's currently supported.\n```\n\nContent editor caption (text under the content editor) change\n```\nSwitching to the classic editor will discard current changes. [Use the classic editor]. \n```\n\n### Designs\n\nFigma: https://www.figma.com/file/5JHxgRwRQmn62y2Ra5Ajj0/Content-editor-message-57370?node-id=105%3A1\n\n| On classic editor | On content editor |\n| ------ | ------ |\n| ![image](/uploads/c795e7189daeb4a8f67345fbc1f2eb0e/image.png) | ![image](/uploads/5fbead21858f0017ec87c11a95dbfd50/image.png) |","state":"closed","created_at":"2021-06-07T19:37:56.493Z","updated_at":"2021-06-17T14:39:10.468Z","closed_at":"2021-06-16T17:48:52.672Z","closed_by":{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"labels":["Category:Wiki","Content Editor","Technical Writing","UI text","UX","[deprecated] Accepting merge requests","devops::create","group::editor","section::dev","tw-weight::5","tw::finished"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332895","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332895","notes":"https://gitlab.com/api/v4/projects/278964/issues/332895/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332895/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332895","relative":"#332895","full":"gitlab-org/gitlab#332895"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5643,"epic":{"id":229786,"iid":5643,"title":"Create:Editor -- 13.11 - 14.0 -- Add Content Editor on Wiki Page","url":"/groups/gitlab-org/-/epics/5643","group_id":9970,"human_readable_end_date":"May 14, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88344878,"iid":332892,"project_id":278964,"title":"[Investigation] Expose Mergeability data","description":"Once we have a Mergeability framework (https://gitlab.com/gitlab-org/gitlab/-/issues/332430) we need to enable consumption of its results. Work with ~frontend to identify how that information would be best consumed by them. This will likely include a new `/mergeable' endpoint, as well as embedded in existing API/GraphQL entities.\n\n## Proposal\n\nThe purpose of this issue is for the ~backend and ~frontend to coordinate a plan and develop the set of issues/work required to start consuming the new mergeability framework.\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-06-07T19:06:52.720Z","updated_at":"2022-09-08T18:39:34.842Z","closed_at":"2022-07-15T08:30:02.505Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","auto updated","backend","backend-weight::2","devops::create","direction","frontend","frontend-weight::2","group::code review","merge requests","section::dev","spike"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332892","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332892","notes":"https://gitlab.com/api/v4/projects/278964/issues/332892/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332892/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332892","relative":"#332892","full":"gitlab-org/gitlab#332892"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5598,"epic":{"id":226017,"iid":5598,"title":"  Better defined mergeability","url":"/groups/gitlab-org/-/epics/5598","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88343892,"iid":332891,"project_id":278964,"title":"Add instrumentation to address pipeline creation performance","description":"Follow-up from `@grzesiek`'s comment:\n\n\u003e Take a look at this [pipeline creation duration histogram](https://thanos.gitlab.net/graph?g0.range_input=6h\u0026g0.max_source_resolution=0s\u0026g0.expr=histogram_quantile(0.99%2C%20sum(rate(gitlab_ci_pipeline_creation_duration_seconds_bucket%5B1m%5D))%20by%20(le))\u0026g0.tab=0).\n\u003e\n\u003e We see that for 99 percentile this sometimes take 20 seconds to create a pipeline. This is using `rate` function that calculates an average over 1 minute range vector, and we exclude 1% of the worst cases, so it is possible that this can get much worse.\n\u003e\n\u003e PromQL used here:\n\u003e \n\u003e ```\n\u003e histogram_quantile(0.99, sum(rate(gitlab_ci_pipeline_creation_duration_seconds_bucket[1m])) by (le))\n\u003e ```\n\u003e\n\u003e ![pipeline_creation_p99_6h](https://gitlab.com/gitlab-org/gitlab/uploads/e497094f415b325904019ba26e056547/pipeline_creation_p99_6h.png)\n\u003e \n\u003e This is data from the last 6 hours. This looks much worse in the last 12 hours:\n\u003e \n\u003e ![pipeline_creation_p99_12h](https://gitlab.com/gitlab-org/gitlab/uploads/45ba1bed3805f81dd3697d1a4d7ccd47/pipeline_creation_p99_12h.png)\n\n## Next steps suggested\n\nThe next step I would suggest is **instrumenting pipeline creation chain (including fetching and merging includes) with additional histograms that could help to identify possible causes of slowness**. The slowness might be related to calculating variables, but might be related to fetching external includes, or to something else. Additional instrumentation will help to uncover the mystery :smile_cat:\n\n## Proposal\n\n- Add instrumentation for each step of the chain\n- Add charts to Verify:PE Grafana Dashboard\n- Add more granular instrumentation (e.g. `includes` processing or `Seed::Build`) if necessary","state":"closed","created_at":"2021-06-07T18:47:22.109Z","updated_at":"2021-09-01T18:07:42.654Z","closed_at":"2021-09-01T18:07:42.642Z","closed_by":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"labels":["Category:Continuous Integration","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","FY22::Q3","Observability","SaaS","Verify candidate","Verify::P1","backend","bug::performance","devops::verify","group::pipeline execution","infradev","missed:14.2","onboarding","priority::2","reliability","section::ops","severity::2","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":5709468,"username":"cheryl.li","name":"Cheryl Li","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5709468/avatar.png","web_url":"https://gitlab.com/cheryl.li"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332891","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332891","notes":"https://gitlab.com/api/v4/projects/278964/issues/332891/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332891/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332891","relative":"#332891","full":"gitlab-org/gitlab#332891"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6588,"epic":{"id":328775,"iid":6588,"title":"Engineering Allocation: Improve SaaS Reliability in the Verify stage","url":"/groups/gitlab-org/-/epics/6588","group_id":9970,"human_readable_end_date":"Apr 8, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":88343693,"iid":332890,"project_id":278964,"title":"Project Search sort based on algorithmic score","description":"The Project Search dropdown currently sorts by project.created_at, then project.id  (taken from the performance bar. There is a param called `order_by` which if set to `similarity` will use a weighted algorithm to sort the projects returned: [see the `reorder_projects_with_similarity_order_support` method in lib/api/groups.rb](lib/api/groups.rb#L120). This may be enough to fix the sorting of projects returned in the dropdown (and may be a ~frontend fix vs. a ~backend fix). I'm adding both labels and you can remove one of them once the MR is created.\n\n\u003cdetails\u003e\n\n\u003csummary\u003ecurrent sql\u003c/summary\u003e\n\n```sql\n\n/*application:web,correlation_id:01F7KWW7YB5A5JJF0SHE591PKS,endpoint_id:GET /api/:version/groups/:id/projects*/\nSELECT\n    \"projects\".*\nFROM ((\n        SELECT\n            \"projects\".*\n        FROM\n            \"projects\"\n        WHERE\n            \"projects\".\"namespace_id\" = 9970\n            AND (EXISTS (\n                    SELECT\n                        1\n                    FROM\n                        \"project_authorizations\"\n                    WHERE\n                        \"project_authorizations\".\"user_id\" = 5708766\n                        AND (project_authorizations.project_id = projects.id))\n                    OR projects.visibility_level IN (10, 20)))\n        UNION (\n            SELECT\n                \"projects\".*\n            FROM\n                \"projects\"\n                INNER JOIN \"project_group_links\" ON \"projects\".\"id\" = \"project_group_links\".\"project_id\"\n            WHERE\n                \"project_group_links\".\"group_id\" = 9970\n                AND (EXISTS (\n                        SELECT\n                            1\n                        FROM\n                            \"project_authorizations\"\n                        WHERE\n                            \"project_authorizations\".\"user_id\" = 5708766\n                            AND (project_authorizations.project_id = projects.id))\n                        OR projects.visibility_level IN (10, 20)))) projects\n    WHERE ((\"projects\".\"path\" ILIKE '%test%'\n            OR \"projects\".\"name\" ILIKE '%test%')\n        OR \"projects\".\"description\" ILIKE '%test%')\nAND \"projects\".\"pending_delete\" = FALSE\nORDER BY\n    \"projects\".\"created_at\" DESC,\n    \"projects\".\"id\" DESC\nLIMIT 20 OFFSET 0\n```\n\n\u003c/details\u003e\n\n### Plan\n\nThe Project search dropdown has two modes: \n\n1. Any Group selected\n1. Specific Group selected\n\nI'll open an MR for each as the solutions are not identical, but both will rely upon sorting by similarity scopes that are exposed.","state":"closed","created_at":"2021-06-07T18:41:21.446Z","updated_at":"2022-05-30T16:31:49.874Z","closed_at":"2021-09-10T18:52:25.182Z","closed_by":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"labels":["Category:Global Search","Deliverable","database","devops::data_stores","frontend","group::global search","section::enablement","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"}],"author":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"type":"ISSUE","assignee":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332890","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332890","notes":"https://gitlab.com/api/v4/projects/278964/issues/332890/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332890/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332890","relative":"#332890","full":"gitlab-org/gitlab#332890"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6040,"epic":{"id":274289,"iid":6040,"title":"Improve the sorting and search experience for the project and group dropdowns in global search","url":"/groups/gitlab-org/-/epics/6040","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88339292,"iid":332883,"project_id":278964,"title":"Bug: Not showing warning when we don't show the full diff in a merge request","description":"When the merge request contains more files than a set limit (either 1000, or 3000 at the moment depending on a feature flag), we do not show files beyond this limit, known as `overflow`. So when the diff overflows, we do not show the limit, instead we are meant to show a warning to the user that files are not shown as here:\n \n![Screenshot_2021-05-28_at_15.57.32](/uploads/ed47c8ec00101aa5d29ca2c5e912db61/Screenshot_2021-05-28_at_15.57.32.png)\n\nhttps://gitlab.com/marc_shaw/test/-/merge_requests/8/diffs?commit_id=eb895692548ad9df148ba6ad9308e0da90832777\n\nInstead we do not do this anymore, as seen here:\n\nhttps://gitlab.com/marc_shaw/test/-/merge_requests/8/diffs\n\nThe current warning is shown, when we request the data from gitaly (ie, looking at individual commits), and not when looking at the merge request diff.\n\nWhat seems to be happening is that when we reload the diff in the refresh service, we send the limit to Gitaly, which then returns the limit but tells us there is overflow (https://gitlab.com/gitlab-org/gitlab/-/blob/8d5fb3c7cdc8e995e1d003f6f5b61e72ba78677e/lib/gitlab/git/diff_collection.rb#L170). We use this and set the 3000+ in the files changed (https://gitlab.com/gitlab-org/gitlab/-/blob/8d5fb3c7cdc8e995e1d003f6f5b61e72ba78677e/lib/gitlab/git/diff_collection.rb#L113). However, when we retrieve the diff files from external storage, we don't know there is an overflow because we only get back the 3000 files exactly, and we show the size as 3000+ (https://gitlab.com/gitlab-org/gitlab/-/blob/8d5fb3c7cdc8e995e1d003f6f5b61e72ba78677e/app/models/merge_request_diff.rb#L706) but we don't show the warning.\n\nWe should be showing a warning to the user that some files are not shown.","state":"closed","created_at":"2021-06-07T16:36:00.791Z","updated_at":"2021-07-18T07:07:04.724Z","closed_at":"2021-06-29T20:24:51.188Z","closed_by":{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"},"labels":["Deliverable","backend","devops::create","diff","group::code review","merge requests","priority::2","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"}],"author":{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"},"type":"ISSUE","assignee":{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"},"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332883","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332883","notes":"https://gitlab.com/api/v4/projects/278964/issues/332883/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332883/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332883","relative":"#332883","full":"gitlab-org/gitlab#332883"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88338919,"iid":332881,"project_id":278964,"title":"Allow + characters in repo names","description":"### Problem to be solved\n\nCustomer has a repository naming conventions that is heavily dependent on using the '+' and they have many existing repositories that have been around for a long time that contain the '+'\n\n### Proposal\nAllow customers to use the '+' in naming repositories","state":"closed","created_at":"2021-06-07T16:28:27.336Z","updated_at":"2022-12-01T20:23:31.936Z","closed_at":"2021-08-03T07:09:09.493Z","closed_by":{"id":4156460,"username":"ogolowinski","name":"Orit Golowinski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4156460/avatar.png","web_url":"https://gitlab.com/ogolowinski"},"labels":["Category:Authentication and Authorization","Category:Source Code Management","[deprecated] Accepting merge requests","devops::create","group::authentication and authorization","section::dev","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3796140,"username":"sarahwaldner","name":"Sarah Waldner","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3796140/avatar.png","web_url":"https://gitlab.com/sarahwaldner"},"type":"ISSUE","assignee":null,"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332881","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332881","notes":"https://gitlab.com/api/v4/projects/278964/issues/332881/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332881/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/220528"},"references":{"short":"#332881","relative":"#332881","full":"gitlab-org/gitlab#332881"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88337955,"iid":332880,"project_id":278964,"title":"[QA] Write specs for Allure Reporter","description":"We neglected to write specs for QA::Runtime::AllureReport (qa/runtime/allure_report.rb).\n\nWe should write tests to ensure that this code works correctly, that will run in the `qa:internal` job.\n\n/cc @acunskis","state":"closed","created_at":"2021-06-07T16:14:16.814Z","updated_at":"2021-08-01T20:57:58.478Z","closed_at":"2021-08-01T20:57:58.465Z","closed_by":{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"},"labels":["QA","Quality","[deprecated] Accepting merge requests","maintenance::refactor","test"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"}],"author":{"id":272636,"username":"ddavison","name":"Dan Davison","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6e56557ffa1baafe3e73e45bd2dc9524?s=80\u0026d=identicon","web_url":"https://gitlab.com/ddavison"},"type":"ISSUE","assignee":{"id":8551613,"username":"acunskis","name":"Andrejs Cunskis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8551613/avatar.png","web_url":"https://gitlab.com/acunskis"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332880","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332880","notes":"https://gitlab.com/api/v4/projects/278964/issues/332880/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332880/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332880","relative":"#332880","full":"gitlab-org/gitlab#332880"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88333368,"iid":332866,"project_id":278964,"title":"UX Improvement Followup - Geo Resync/Reverify Confirm Modal","description":"The following discussion from !63238 should be addressed:\n\n- [ ] @acroitor  started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63238#note_592825172):\n\n    \u003e BE LGTM, I have one question/suggestion: is it possible to get the number of projects that are going to be synched or verified? So the message would say smth like: `This will resync all 535 projects` ?\n\n## Proposal\n\nThe confirm modal that is fired when users click resync/reverify could be improved to really expose how big of a job they are about to fire off.  Adding the number of affected records to the warning as suggested above could help expose this info.\n\nThe modal is fired on `Projects` and `Designs` replication view.","state":"closed","created_at":"2021-06-07T15:05:30.026Z","updated_at":"2022-06-07T15:37:30.602Z","closed_at":"2022-06-01T14:35:16.101Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["SUS::Impacting","UI text","UX","devops::systems","follow-up","frontend","group::geo","section::enablement","severity::4","workflow::in dev"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":10886527,"username":"ali_o_kan","name":"Laurent Deketelaere","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10886527/avatar.png","web_url":"https://gitlab.com/ali_o_kan"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":10886527,"username":"ali_o_kan","name":"Laurent Deketelaere","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10886527/avatar.png","web_url":"https://gitlab.com/ali_o_kan"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332866","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332866","notes":"https://gitlab.com/api/v4/projects/278964/issues/332866/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332866/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332866","relative":"#332866","full":"gitlab-org/gitlab#332866"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88321779,"iid":332851,"project_id":278964,"title":"[VSA][Discovery] Backend performance optimization before query change","description":"## Value Stream Analytics backend proposal\n\n### TLDR\n\nDue to a [proposed timestamp filter change](https://gitlab.com/groups/gitlab-org/-/epics/6046), the DB queries of [Value Stream Analytics](https://docs.gitlab.com/ee/user/analytics/value_stream_analytics.html) will get more complicated and require significant database-related work to make them viable (same performance as today). The work would take several milestones. I think we can make the feature more performant and \"future-proof\" by collecting the VSA related data in a different table(s) and keep it up to date asynchronously. \n\n### Feature overview\n\nValue stream analytics measures the duration between two timestamp columns and exposes the matching records. This functionality enables the user to measure the cycle time during the development process.\n\nExample:\n\n- Calculate the average duration between merge request merged at and merge request first deployed to production time.\n- Calculate the average duration between merge request creation and when \"workflow::production\" label was added.\n- Show the relevant records sorted by duration (longest duration first).\n\nSQL (merged at - first deployed to production):\n\n```sql\nSELECT AVG(merge_request_metrics.first_deployed_to_production_at - merge_request_metrics.merged_at)\nFROM merge_requests\nINNER JOIN (merge_request_metrics...)\nWHERE\nmerge_requests.target_project_id IN (recursive namespace query)\nAND merge_requests.created_at BETWEEN 'X' and 'Y'\n```\n\nNotice the `created_at` filter. This limits the number of rows the DB needs to scan.\n\nThe timestamp column definitions (start event, end event) are stored in a model called `Stage` (table: `analytics_cycle_analytics_group_stages`). A `Stage` is associated with a `Group` or a `Project`. We have a fixed list of supported timestamp columns. Currently, these columns are scattered across the database:\n\n- `merge_requests`\n- `issues`\n- `merge_request_metrics`\n- `issue_metrics`\n- `resource_label_events`\n\nThere are strict rules which timestamp columns are allowed together, a slightly outdated graph can be found here: https://docs.gitlab.com/ee/development/value_stream_analytics.html#validating-start-and-end-events\n\n### Performance\n\nThe group-level performance was reviewed in 2019 Q4 and it was approved however since then the feature got significantly slower. Note: we use the standard `IssueableFinders` to build the queries and we look at the whole hierarchy (recursive namespace lookup). My assumption is the number of subgroups, projects, issues and merge requests grew significantly in the past year affect the query performance significantly. \n\n- Median aggregation query from DB-lab: https://explain.depesz.com/s/fj9B, https://explain.depesz.com/s/lvYG\n- Records query: https://explain.depesz.com/s/5AKY\n\nVSA queries `Issue` or `MergeRequest` records within a given time range based on the `created_at` column. We have an index covering the `project_id` and `created_at` columns in both database tables so the number of records we scan is somewhat limited. Note: this is going to change.\n\n### The feature change\n\nThe way VSA works (created_at filter) was defined a long time ago and we don't exactly know the reasoning behind it. There is a [proposal](https://gitlab.com/gitlab-org/gitlab/-/issues/330075) to change the `created_at` filter to use the end event timestamp to address the customer confusion concerns.\n\nWe have about 15 possible end events in different database tables which would make the database queries more difficult to optimize (add index or de-normalize and add index). \n\nSupported end events:\n\n```\nissues.created_at\nissue_metrics.first_mentioned_in_commit_at\nissue_metrics.first_associated_with_milestone_at\nissue_metrics.first_added_to_board_atstone_at\nmerge_request_metrics.first_deployed_to_production_at\nmerge_request_metrics.latest_build_started_at\nmerge_request_metrics.latest_build_finished_at\nmerge_request_metrics.latest_closed_at\nmerge_request_metrics.first_commit_at\nmerge_request_metrics.merged_at\nmerge_requests.created_at\nissues.closed_at\nissues.last_edited_at\nresource_label_events.created_at\n```\n\n#### Example 1: Index needed\n\nIn case the end event is `merge_request_metrics.latest_build_finished_at` an extra index is needed on the `target_project_id, latest_build_finished_at` columns. Note that the `target_project_id` is available in the `merge_request_metrics`, this de-normalization was done for an other feature.\n\nWe might also need to tweak the query to avoid joining all the `MergeRequest` records in the group hierarchy and only look at the ones that matching the `merge_request_metrics.latest_build_finished_at` filter.\n\nExample query:\n\n```sql\nSELECT AVG(merge_request_metrics.latest_build_finished_at - merge_requests.created_at)\nFROM merge_requests\nINNER JOIN (merge_request_metrics...)\nWHERE\nmerge_requests.target_project_id IN (recursive namespace query)\nAND merge_request_metrics.latest_build_finished_at BETWEEN 'X' and 'Y'\n```\n\n#### Example 2: De-normalization\n\nThe `issue_metrics` database table does not have the `project_id` column, so in case the end event is `issue_metrics.first_added_to_board_at`, then the DB loads all issues within the group hierarchy and join the `issue_metrics` database table. The query will need to scan all `issues` records to filter them down by the joined `issue_metrics` table.\n\nTo make it performant, we can add the `project_id` to the `issue_metrics` table.\n\nNote: the same thing needs to happen in the `resource_label_events` table.\n\n\n#### Database concerns\n\nBy doing these query optimizations for each database columns (about 15 columns) we can make the feature as performant as the current version, however, in my opinion, the costs are quite high:\n\n- De-normalization work for at least 2 tables (minimum 2 milestones).\n- Index creation on `(project_id, timestamp_column)`.\n- Rewriting, optimizing and reviewing the issuable queries for each column.\n- One index is about 3GB, in some cases, we would have fewer rows in the index. \n\nI estimate around 40-50 gigabyte for the indexes only. Note that this number will grow at the same rate as GitLab.com grows. \n\n\n### Alternative solution\n\nValue Stream Analytics is a premium feature so only a small percentage of the `MergeRequest` (\u003c10%) and `Issue` (\u003c3%) records are going to be queried on GitLab.com. By looking at the VSA usage, this number decreases a little bit (`MergeRequest` \u003c5%, `Issue` \u003c3%).\n\nMy idea is to collect and track the start and event timestamps in a separate table so the queries will be mostly `INDEX ONLY SCANs`. To deal with the large data volume, we would run the `AVERAGE` and `MEDIAN` queries with batching (keyset paginated) with some sort of limit to avoid reading too many rows per web request. For example: read maximum 10x10_000 rows (10 queries). If the limit is reached show message: truncated results, too much data.\n\nThe database structure for collecting stage data (for merge requests). Table name: `analytics_merge_request_stage_events`\n\n|column|type|description|\n|-|-|-|\n|merge_request_id|bigint|composite primary key with stage_id|\n|stage_id|bigint|points to the stage record where the start and end event is defined|\n|start_event_timestamp|bigint|stores the start event timestamp for the stage|\n|end_event_timestamp|bigint|stores the end event timestamp for the stage|\n|group_id|bigint|Project's group|\n|project_id|bigint|Project where the merge request was created|\n\nThis structure allows very fast queries where we filter the end event with a time range. Indexes:\n\n```sql\n# in the root group\n(stage_id, end_event_timestamp, start_event_timestamp, merge_request_id)\n# in a subgroup\n(stage_id, group_id, end_event_timestamp, start_event_timestamp, merge_request_id)\n# in a project\n(stage_id, project_id, end_event_timestamp, start_event_timestamp, merge_request_id)\n```\n\nQuery example:\n\n\n```sql\nSELECT AVG(end_event_timestamp - start_event_timestamp)\nFROM analytics_merge_request_stage_events\nWHERE end_event_timestamp BETWEEN '2020-01-01' AND '2020-06-06'\nAND stage_id = 5\n```\n\nThe `merge_request_id` would provide the tie-breaker behaviour when listing records (pagination) and also could be used when aggregating in batches (avoiding statement timeout). For example `count` and `sum` the duration for 10000 records. The query would run N times and we could calculate the average in Ruby:\n\n```ruby\n# N = 2\ncount_batch_1 = 10000\nsum_batch_1 = 123123123\n\ncount_batch_2 = 15\nsum_batch_2 = 123\n\naverage = (sum_batch_1 + sum_batch_2) / (count_batch_1 + count_batch_2)\n```\n\n### Finders and queries\n\nThe current `IssuableFinder` adds extra `JOINs` and `EXISTS` queries to perform the access control (confidential issues, project authorization). Since VSA operates on the `Group` level, we could check group permissions on page load so we can avoid complicated queries.\n\n### Data separation\n\nVSA is an analytical feature that ideally should be in its own database (Timescale?). Today, it's too early to make this move however, with the sharding group work things might be easier in the future. For now, what we can do is prepare for easy separation from the core database tables:\n\n- Eventually consistent data.\n- Asynchronous data collection.\n- No foreign keys on the database columns.\n\nWe'll need a well-defined interface where the data boundaries are crossed (for example when `merge_requests` table is joined). In case our data is in a different database, we could \"easily\" modify the queries to work across database nodes (`disable_joins`).\n\n#### Data collection\n\n`Stage` records are associated with a `Group` or with a `Project`. By collecting all stages in the group hierarchy, we can build batched queries to insert new data in the `analytics_merge_request_stage_events` database table.\n\nThe following table keeps track of the latest processed `updated_at` column value: `analytics_merge_request_stage_updates`\n\n|column|type|description|\n|-|-|-\n|stage_id|bigint|primary key|\n|last_updated_at|timestamp|stores the last processed `merge_requests.updated_at`|\n\nFirst run:\n\n1. Find the top-level `Group` for the stage.\n2. Build a batched (keyset paginated) query over the merge requests in the Group hierarchy. (PoC: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62379)\n3. Collect the timestamps that are required for the stages.\n4. Insert the rows into the `analytics_merge_request_stage_events` table.\n5. Insert a row with `stage_id` and `last_updated_at` values.\n\nSecond run:\n\n1. Find the top-level `Group` for the stage.\n2. Build a batched (keyset paginated) query over the merge requests in the Group hierarchy.\n3. Using the `last_updated_at` column, iterate over the recently updated records.\n4. Insert the rows into the `analytics_merge_request_stage_events` table.\n5. Update the `last_updated_at` column.\n\nNote: we might need to do multiple `LEFT JOINs` to gather the relevant timestamp columns from different tables however, this would not make the query significantly slower. The batch query would always read N `MergeRequest` rows.\n\nNot sure this is the best idea. Currently, I don't have a \"cheaper\" way of detecting `Issue` or `MergeRequest changes in a group hierarchy. I don't think we have hosted plan specific pub-sub functionality.\n\n#### Consistency\n\nWhen a `MergeRequest` or an `Issue` record is updated, the record update process described above would \"catch\" the changes and the data would be updated eventually. \n\nWe also need to ensure consistency when the project is removed or some records were deleted. We can do that with a periodic job that scans through the `analytics_merge_request_stage_events` database table and makes an `EXISTS` query against the `merge_requests` table.\n\n#### Table size\n\nSince we might have multiple stages per group, we would store quite a lot's of data in the `analytics_merge_request_stage_events` database table (worst case: 5 rows per merge request record). To address table size concerns, we could do hash partitioning or time range partitioning (use time-decay pattern if Product is OK with keeping 1 or 2 years of data).\n\n#### Cross joins\n\nVSA allows filtering on labels, author, assignee, milestone. With the new structure, we would be able to query this data using `JOINs`. When we have complete separation (different data store), this data would need to be duplicated.\n\n#### No FOSS\n\nThere is a free (FOSS) version of VSA with fixed stages, no customization allowed, project-level only. Collecting data for FOSS users would cost too much storage and processing power. In order to keep the data volume low, we cannot support the FOSS version. We can keep the old behavior (no timestamp filter change).","state":"closed","created_at":"2021-06-07T12:21:03.646Z","updated_at":"2021-07-08T15:09:29.883Z","closed_at":"2021-07-08T15:09:29.851Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Category:Value Stream Management","backend","bug::performance","devops::manage","group::optimize","section::dev","workflow::ready for development"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332851","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332851","notes":"https://gitlab.com/api/v4/projects/278964/issues/332851/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332851/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332851","relative":"#332851","full":"gitlab-org/gitlab#332851"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6046,"epic":{"id":274497,"iid":6046,"title":"[VSA] Date range filter should apply to end events","url":"/groups/gitlab-org/-/epics/6046","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88318703,"iid":332846,"project_id":278964,"title":"Move user administration to a dropdown button to match the behavior of member's listing.","description":"## Issue\nSee originating issue: https://gitlab.com/gitlab-org/gitlab/-/issues/327378\n\nThe Members Admin screen is unnecessarily messy. The dialog containers are redundant with the modal popup warnings that follow clicking an administrative button.\n\n## Proposal\nLet's move the user administration buttons to the primary action button row to mimic the same UX of the members list.\n\n#### Current screens:\n| Memeber's list | Current User detail screen | \n| ------ | ------ | \n| ![Screen_Shot_2021-06-07_at_1.31.11_PM](/uploads/26897ba08def72599426b29ff63a0f9c/Screen_Shot_2021-06-07_at_1.31.11_PM.png) | ![image](/uploads/269febf90c5be7b1dfa8e88b9f6459ea/image.png) | \n\n#### Updates\n| Confirm user | zero state | drop down | modal |\n| ------ | ------ | ------ | ------ |\n| ![CONFIRM_user](/uploads/28f13fd6270ba543f18e6460dd10d97b/CONFIRM_user.png) | ![zero_state](/uploads/58f0127838b6744fa6d0dead1699edee/zero_state.png) | ![dropdown](/uploads/debdc645bcab01f3f51227226c066c3f/dropdown.png) | ![modal](/uploads/42a5bc18064091f29a0639bf9ac25c57/modal.png) |","state":"closed","created_at":"2021-06-07T11:34:17.755Z","updated_at":"2021-08-03T20:28:56.962Z","closed_at":"2021-07-22T15:35:11.724Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["UX","candidate::14.1","devops::manage","frontend","group::authentication and authorization","section::dev","user settings","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"type":"ISSUE","assignee":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332846","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332846","notes":"https://gitlab.com/api/v4/projects/278964/issues/332846/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332846/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332846","relative":"#332846","full":"gitlab-org/gitlab#332846"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88318008,"iid":332845,"project_id":278964,"title":"Pipeline Editor not bringing in included config from branch","description":"### Summary\n\nIt seems that when you use the Pipeline Editor on a non-default branch, with a pipeline that that adds config with: `include: local`, it does not bring in the correct version of the included file.\n\n### Steps to reproduce\n\nIn my test project, I had a version of this config on master:\n\n```yaml\nmain-branch-job:\n  script:\n    - echo\n\ninclude:\n  - local: 'include-file.yml'\n```\n\nand `include-file.yml`:\n\n```yaml\nincluded-job:\n  script:\n    - echo \"This job was added with include\"\n```\n\nThen I created a new branch, and edited `include-file.yml`:\n\n```yaml\nincluded-job-2:\n  script:\n    - echo \"This job was added with include in my branch, not master\"\n```\n\nFinally, I went to the pipeline editor and selected my branch, and saw two issues:\n\n- The **View merged YAML** tab did *not* show `included-job-2`. In fact, if I pushed new commits to `include-file.yml` on *master*, they showed up in the merged YAML for my branch.\n- (separate issue, but I just noticed) The pipeline at the top was *not* the latest pipeline in my branch, it was the latest pipeline on master.\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-06-07T11:20:39.333Z","updated_at":"2021-07-21T06:47:20.519Z","closed_at":"2021-07-21T06:47:20.501Z","closed_by":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"labels":["Category:Pipeline Authoring","Deliverable","Technical Writing","candidate::14.1","customer","devops::verify","frontend","group::pipeline authoring","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"}],"author":{"id":4155490,"username":"marcel.amirault","name":"Marcel Amirault","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155490/avatar.png","web_url":"https://gitlab.com/marcel.amirault"},"type":"ISSUE","assignee":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"user_notes_count":17,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332845","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332845","notes":"https://gitlab.com/api/v4/projects/278964/issues/332845/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332845/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332845","relative":"#332845","full":"gitlab-org/gitlab#332845"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5393,"epic":{"id":202656,"iid":5393,"title":"Pipeline Editor - Branch selector","url":"/groups/gitlab-org/-/epics/5393","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":88314367,"iid":332844,"project_id":278964,"title":"Create a download for the Secret when creating an application in Admin / Applications","description":"## Problem\nSee originating issue: https://gitlab.com/gitlab-org/gitlab/-/issues/329622\n\nWhen you create an application the `Secret` field is visible. This can preset a security concer. As well, this exact screen is visible when you `View` the application from `Admin` / `Applications` / Application name.\n\n![Screen_Shot_2021-06-07_at_12.02.08_PM](/uploads/9f5930db3003d7c74b5d00483f8f5822/Screen_Shot_2021-06-07_at_12.02.08_PM.png)\n\n## Proposal\nLet's move the secret to a download button similar to how we download 2FA credentials.\n| 2fa example | download button |\n| ------ | ------ |\n| ![Screen_Shot_2021-06-07_at_12.27.25_PM](/uploads/9c2009b0c308e09f84a9a3358a5fa778/Screen_Shot_2021-06-07_at_12.27.25_PM.png) | ![Screen_Shot_2021-07-06_at_1.37.32_PM](/uploads/cfb10d381996bdcbfab9b26cc64606cb/Screen_Shot_2021-07-06_at_1.37.32_PM.png) |","state":"closed","created_at":"2021-06-07T10:15:06.839Z","updated_at":"2022-03-28T19:27:34.623Z","closed_at":"2021-08-13T20:38:20.906Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","Deliverable","UX","candidate::14.2","devops::manage","group::authentication and authorization","release post item::in review","section::dev","security","settings","type::feature","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332844","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332844","notes":"https://gitlab.com/api/v4/projects/278964/issues/332844/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332844/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332844","relative":"#332844","full":"gitlab-org/gitlab#332844"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88313871,"iid":332842,"project_id":278964,"title":"Follow-up from \"Add boilerplate for DAST Configuration Page\"","description":"The following discussion from !63137 should be addressed:\n\n- [ ] @pgascouvaillancourt started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63137#note_592135384):  (+2 comments)\n\n    \u003e **thought:** With the number of configuration apps growing in Secure, it seems like we're repeating the same structure over and over (a header with some margin, containing a `\u003ch4\u003e` and sometimes a description below it). I wonder if it would make sense to create a simple component to abstract this structure and to make sure all apps are consistent :thinking:","state":"closed","created_at":"2021-06-07T10:07:13.570Z","updated_at":"2021-09-09T14:11:23.788Z","closed_at":"2021-09-09T08:55:43.589Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Category:DAST","auto updated","devops::secure","frontend","group::dynamic analysis","maintenance::refactor","section::sec","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332842","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332842","notes":"https://gitlab.com/api/v4/projects/278964/issues/332842/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332842/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332842","relative":"#332842","full":"gitlab-org/gitlab#332842"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88294891,"iid":332821,"project_id":278964,"title":"Enable ff `sidebar_refactor` by default","description":"Based on all the work done in https://gitlab.com/groups/gitlab-org/-/epics/5647, we need to enable the feature flag `sidebar_refactor` to enable it by default in prod and also self-hosted instances.\n\nThis change can be quite challenging since we need to address and change a lot of QA specs.","state":"closed","created_at":"2021-06-07T05:45:41.474Z","updated_at":"2021-06-15T07:35:51.193Z","closed_at":"2021-06-15T07:35:51.158Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier Lpez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Navigation \u0026 Settings","backend","devops::create","group::editor","section::dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier Lpez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier Lpez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier Lpez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332821","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332821","notes":"https://gitlab.com/api/v4/projects/278964/issues/332821/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332821/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332821","relative":"#332821","full":"gitlab-org/gitlab#332821"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5647,"epic":{"id":229847,"iid":5647,"title":"Create:Editor -- 13.11 - 14.0 -- Update Left Sidebar","url":"/groups/gitlab-org/-/epics/5647","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88293831,"iid":332819,"project_id":278964,"title":"While Fetching deployments using below Endpoint for mentioned accountId, we are not getting latest deployment","description":"### Background\n\nWhile Fetching deployments using below Endpoint for mentioned accountId, we are not getting latest deployment. Mentioned deployableId is latest deployment of user but when we are fetching deployment from gitlab this deploybaleid is not fetched even after fetching 3 pages (75 deployments object) of deployments.\n\nURI = \"/api/v4/projects/{environment}/deployments\" \n\nWe are trying to to fetch latest deployment i.e. deployableId = 1292009309\nAccountId = 6563338\n\n```\nTimestamp,Gitlab Deployment Response 1,Gitlab Deployment Response 2,Gitlab Deployment Response 3,Customer ID,Gitlab Deployment Matching Deployment ID\n2021-06-03 11:05:14,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:04:43,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:04:13,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:03:43,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:03:13,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:02:43,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:02:13,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:01:44,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:01:13,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n2021-06-03 11:00:43,\"1309740365,1309689529,1309596779,1309560575,1309466707,1309415907,1309415475,1309371596,1309268899,1309212516,1309145064,1309105876,1309078427,1309039114,1309015956,1308844970,1308833308,1308792418,1308682279,1308638598,1308633784,1308627687,1308621128,1308602126,1308515316\",\"1308511488,1308511206,1308510754,1308506788,1308452086,1308414941,1308392894,1308381834,1308311584,1308205330,1308189254,1308176974,1308130491,1308114733,1308094729,1308089034,1308066946,1307963677,1307942529,1307889047,1307845466,1307817001,1307789297,1306797212,1306681409\",\"1306679850,1306676753,1306656587,1306601134,1306484786,1306450901,1306307022,1306248013,1306220822,1306215601,1306116557,1306036252,1305697680,1305626883,1305582113,1305531419,1305517377,1305498622,1305315947,1305306022,1305121281,1304688402,1304589583,1304166869,1302398887\",45902e3f-ae4e-4f20-9b5d-f26504a40f85,1276431124\n```\n\n### Proposal\n\nInclude the `deployment_id` in the webhook payload for deployements.\n\nThis will allow users to identify the deployment directly, without going through the `deployable` object.","state":"closed","created_at":"2021-06-07T05:15:01.744Z","updated_at":"2021-08-09T16:07:30.464Z","closed_at":"2021-08-09T16:07:30.446Z","closed_by":{"id":1733360,"username":"ismailarilik","name":"smail Arlk","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e3c14bc9e2c14b4624dc1882ab888873?s=80\u0026d=identicon","web_url":"https://gitlab.com/ismailarilik"},"labels":["Community contribution","atlassian","backend","devops::create","feature::enhancement","good for new contributors","group::release","section::dev","type::feature","workflow::planning breakdown"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":1733360,"username":"ismailarilik","name":"smail Arlk","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e3c14bc9e2c14b4624dc1882ab888873?s=80\u0026d=identicon","web_url":"https://gitlab.com/ismailarilik"}],"author":{"id":6751534,"username":"apatel5","name":"Atlassian Opsgenie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6751534/avatar.png","web_url":"https://gitlab.com/apatel5"},"type":"ISSUE","assignee":{"id":1733360,"username":"ismailarilik","name":"smail Arlk","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e3c14bc9e2c14b4624dc1882ab888873?s=80\u0026d=identicon","web_url":"https://gitlab.com/ismailarilik"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332819","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332819","notes":"https://gitlab.com/api/v4/projects/278964/issues/332819/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332819/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332819","relative":"#332819","full":"gitlab-org/gitlab#332819"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88275156,"iid":332747,"project_id":278964,"title":"[Backend] Emit audit event to HTTP destination","description":"### Proposal \n\nOnce [this issue](https://gitlab.com/gitlab-org/gitlab/-/issues/332746) is complete, namespaces that have set an external destination for their audit logs should see those audit logs being sent to their chosen destination.\n\n### Implementation Plan\n\n* Create a new sidekiq worker to handle sending the audit log.\n* Data about the project or group emitting the event should exist within the JSON payload.\n* When any new audit log is created, the `AuditEventService` should asynchronously send the data that is written to `log/audit_log.json` to the desired HTTP endpoint.","state":"closed","created_at":"2021-06-06T10:47:47.538Z","updated_at":"2022-10-15T00:33:00.385Z","closed_at":"2021-11-09T08:31:49.658Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","GitLab Ultimate","backend","customer","devops::manage","group::compliance","infradev","priority::2","section::dev","severity::3","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":36,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332747","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332747","notes":"https://gitlab.com/api/v4/projects/278964/issues/332747/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332747/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332747","relative":"#332747","full":"gitlab-org/gitlab#332747"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6122,"epic":{"id":284129,"iid":6122,"title":"Emit Namespace Level External Audit Events - GraphQL API version","url":"/groups/gitlab-org/-/epics/6122","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88275133,"iid":332746,"project_id":278964,"title":"[Backend] Set audit event HTTP destination","description":"### Proposal \n\nTo enable GitLab to send audit events to an external HTTP desintation, we need to allow root-namespace owners to set a destination URL that will apply to all group and project level events within that namespace.\n\n### Implementation Plan\n\n* Create new feature flag for the entire epic and rollout issue. (`:group_emit_external_audit_events`)\n* Create new model: `ExternalAuditEventDestination`\n  * It's likely that whilst this first iteration will be a 1:1 relationship between namespace:destination, it will probably become a 1:N relationship.\n  * `Namespace has_many ExternalAuditEventDestinations` but the UI will infer that only one is available right now.\n* Create GraphQL mutation to allow **Owners** to set this value. A blank value is valid.","state":"closed","created_at":"2021-06-06T10:43:53.393Z","updated_at":"2021-12-06T20:39:13.932Z","closed_at":"2021-10-07T08:56:24.519Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["GitLab Ultimate","backend","devops::manage","group::compliance","priority::1","section::dev","type::feature","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332746","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332746","notes":"https://gitlab.com/api/v4/projects/278964/issues/332746/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332746/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332746","relative":"#332746","full":"gitlab-org/gitlab#332746"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6122,"epic":{"id":284129,"iid":6122,"title":"Emit Namespace Level External Audit Events - GraphQL API version","url":"/groups/gitlab-org/-/epics/6122","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88251202,"iid":332734,"project_id":278964,"title":"Fix errors and drag\u0026drop in UploadBlobModal component","description":"Let's address the concerns that were discovered from this MR \u003e https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62880. The `app/assets/javascripts/repository/components/upload_blob_modal.vue` seems to have the following issues:\n\n\n1. The drag \u0026 drop feature doesn't seem to work. But clicking the `upload` does.\n\n![drag-drop-file-not-working](/uploads/36d70c810ad1cd23ef0e5daf95194374/drag-drop-file-not-working.mov)\n\n2. There is an `Uncaught TypeError` once a file is uploaded.\n\n| Replace file | Upload file |\n| ------ | ------ |\n|![image](/uploads/be84aa010f50a3b6d25e269d219c5940/image.png) | ![image](/uploads/a731fdc0e30d5430493fad2487f62b5b/image.png)|","state":"closed","created_at":"2021-06-05T08:33:21.549Z","updated_at":"2021-09-29T05:46:29.776Z","closed_at":"2021-09-29T05:46:29.753Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["Category:Source Code Management","devops::create","frontend","group::optimize","priority::3","section::dev","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332734","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332734","notes":"https://gitlab.com/api/v4/projects/278964/issues/332734/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332734/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332734","relative":"#332734","full":"gitlab-org/gitlab#332734"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5531,"epic":{"id":217419,"iid":5531,"title":"Refactor Repository Browser to 1 Vue Application","url":"/groups/gitlab-org/-/epics/5531","group_id":9970,"human_readable_end_date":"Apr 17, 2023","human_readable_timestamp":"\u003cstrong\u003e3\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":88242166,"iid":332728,"project_id":278964,"title":"Merge i18n translations (July 2021)","description":"Merge the latest i18n translations from Crowdin on a monthly cadence.\n\nDocumentation available here: https://docs.gitlab.com/ee/development/i18n/merging_translations.html\n\n#### ToDo\n* [x] If needed, configure the [GitLab-Crowdin integration](https://docs.gitlab.com/ee/development/i18n/merging_translations.html#recreate-the-gitlab-integration-in-crowdin)\n* [x] Kick off an import from [Crowdin](https://crowdin.com/project/gitlab-ee/settings#integration-gitlab) (after July 1)\n* [x] Find the [MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026author_username=gitlab-crowdin-bot) created by @gitlab-crowdin-bot and associate it with this issue\n* [x] Complete the MR\n* [x] Update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L40) with the latest numbers. https://gitlab.com/gitlab-org/gitlab/-/issues/333255\n* [x] When done, clone this issue for the next milestone.","state":"closed","created_at":"2021-06-04T23:31:04.505Z","updated_at":"2022-03-28T19:16:55.750Z","closed_at":"2021-07-13T22:23:35.999Z","closed_by":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","milestone::p2","section::dev","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-07-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332728","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332728","notes":"https://gitlab.com/api/v4/projects/278964/issues/332728/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332728/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332728","relative":"#332728","full":"gitlab-org/gitlab#332728"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":88236236,"iid":332719,"project_id":278964,"title":"Dependency Scanning loading resulted in an error within MR widget","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nIf your pipeline contains Dependency Scanning artifacts from both the base gemnasium dependency scanning job as well as the gemnasium-python dependency scanning job, the Security scanning widget in the merge request will display `Dependency scanning: Loading resulted in an error`. \n\nUsing the browsers network debugger, we can see requests to the `dependency_scanning_reports.json` file for the MR (e.g. `https://gitlab.com/group/project/-/merge_requests/1/dependency_scanning_reports`) is returning a 400, with a status_reason of `JSON parsing failed`.\n\nThe results of these scans still appear without issue in the full report, and on the Security tab of the pipeline itself. The reports themselves are valid as well.\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n- MR that fails: https://gitlab.com/gonzoyumo/ds-mr-bug/-/merge_requests/1\n- Corresponding pipeline view that sucessfully parses the reports: https://gitlab.com/gonzoyumo/ds-mr-bug/-/pipelines/315248866/security\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nThe Dependency Scanning section of the Security scanning MR widget displays `Dependency scanning: Loading resulted in an error`. \n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nThe widget properly displays the scanners findings of both valid reports. \n\n\n### Possible fixes\n\nThe problem happens [when merging artifacts into one report](https://gitlab.com/gitlab-org/gitlab/blob/d25802063e9bb06fd03c771f99bc7fcd53bdae5d/ee/app/services/security/merge_reports_service.rb#L67) (and it's called [here](https://gitlab.com/gitlab-org/gitlab/-/blob/d25802063e9bb06fd03c771f99bc7fcd53bdae5d/ee/app/models/ee/ci/build.rb#L176)). Findings are compared by [scanner keys](https://gitlab.com/gitlab-org/gitlab/-/blob/d25802063e9bb06fd03c771f99bc7fcd53bdae5d/ee/lib/gitlab/ci/reports/security/scanner.rb#L47) and in the case of this issue, this comparison fails as one of the reports (python one) returns `nil` instead of an array of keys.\n\nFor undiscovered reasons when scanners are compared, in some cases `vendor` is returned as `nil`. As we're going to remove scanner category from vulnerabilities, see https://gitlab.com/gitlab-org/gitlab/-/issues/233359, it makes sense to make a small fix for now.\n\nFailing examples:\n\n```\n\u003e a = [3, \"gemnasium\", \"Gemnasium\", nil]\n\u003e b = [3, \"gemnasium\", \"Gemnasium\", \"GitLab\"]\n\u003e a \u003c=\u003e b\n=\u003e nil\n```\n\nComparing with `compact` fixes this issue.\n\n### Proposed fix\n\nUpdate [scanner comparer](https://gitlab.com/gitlab-org/gitlab/-/blob/856a51d3b0444bd6fa138b66dd59acc8e40527bd/lib/gitlab/ci/reports/security/scanner.rb#L42-L42) to compare compact arrays of keys.","state":"closed","created_at":"2021-06-04T19:45:27.597Z","updated_at":"2021-07-21T15:34:54.075Z","closed_at":"2021-07-20T16:02:00.055Z","closed_by":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"labels":["Category:Dependency Scanning","Enterprise Edition","GitLab Ultimate","Stretch","backend","customer","devops::secure","group::composition analysis","merge request widget","priority::2","section::sec","severity::2","type::bug","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":4554657,"username":"calebw","name":"Caleb Williamson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554657/avatar.png","web_url":"https://gitlab.com/calebw"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":10,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332719","notes":"https://gitlab.com/api/v4/projects/278964/issues/332719/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332719/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332719","relative":"#332719","full":"gitlab-org/gitlab#332719"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88233298,"iid":332713,"project_id":278964,"title":"Add add operation","description":"Add the [`add`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/utils/usage_data.rb#L157) operation to metrics instrumentation classes \n\nThe add operation is adding up an array of values\n\nCurrent implementation \n\n```ruby\n#lib/gitlab/utils/usage_data.rb\n\ndef add(*args)\n  return -1 if args.any?(\u0026:negative?)\n\n  args.sum\nrescue StandardError\n   FALLBACK\nend\n\n=\u003e add(12, 2, 1)\n=\u003e 15\n```\n\n- This operation might not fit under the `DatabaseMetric` as it is not taking a relation as a parameter.\n- This could be a different type of instrumentation class that can handle an array of numbers on which we can have arithmetic operations. \n- The same result could be achieved if we use individual GenericMetric instrumentation classes and we might not add a dedicated Metric instrumentation class.\n\nProposal for API for this metric and operation\n\n```ruby\nBoardsCountMetric \u003c NumbersMetric\n\noperation :add\n\ndata { [1, 10] }\n```\n\nThe same result could be achieved if we use individual generic metrics for the metric that use add operation.\n`BaseMetric` class includes the [`Gitlab::Utils::UsageData`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage/metrics/instrumentations/base_metric.rb) and all the methods are available.\n\nFor example:\n\n```ruby\nmodule Gitlab\n  module Usage\n    module Metrics\n      module Instrumentations\n        class CountProjectImports \u003c GnericMetric\n\n        value do\n          project_imports = distinct_count(::Project.where(time_period).where.not(import_type: nil), :creator_id)\n          bulk_imports = distinct_count(::BulkImport.where(time_period), :user_id)\n          jira_issue_imports = distinct_count(::JiraImportState.where(time_period), :user_id)\n          csv_issue_imports = distinct_count(Issues::CsvImport.where(time_period), :user_id)\n          group_imports = distinct_count(::GroupImportState.where(time_period), :user_id)\n\n          add(project_imports, bulk_imports, jira_issue_imports, csv_issue_imports, group_imports)\n        end\n```","state":"closed","created_at":"2021-06-04T18:08:20.501Z","updated_at":"2022-06-21T12:06:31.880Z","closed_at":"2022-05-31T10:01:51.754Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["Deliverable","auto updated","backend","devops::growth","group::product intelligence","priority::3","section::growth","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332713","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332713","notes":"https://gitlab.com/api/v4/projects/278964/issues/332713/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332713/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332713","relative":"#332713","full":"gitlab-org/gitlab#332713"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7451,"epic":{"id":428291,"iid":7451,"title":"Fix broken queries for Service Ping Automation in DWH","url":"/groups/gitlab-org/-/epics/7451","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88228117,"iid":332691,"project_id":278964,"title":"Implement upgrade banner in new Security Configuration design","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nThe [redesign](https://gitlab.com/gitlab-org/gitlab/-/issues/326926) of the Security Configuration page includes an upgrade banner at the top of the page which needs to be implemented.\n\n## Relevant links\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/326926)\n  - [Banner design](https://gitlab.com/gitlab-org/gitlab/-/issues/326926/designs/MVC-A2-CONFIG_project-security_testing-Core.png)\n\n## Non-functional requirements\n\n- [-] Documentation:\n- [-] Feature flag:\n- [-] Performance:\n- [x] Testing: component specs\n\n\n## Implementation plan\n\n~frontend \n- [x] Implement renderless `UserCalloutDismisser` component that will handle query/mutation/display GraphQL logic\n- [x] Implement presentation component for banner.\n   - [x] Use a single primary button with the text \"Update or start a free trial\" and use same link as already used by FOSS implementation","state":"closed","created_at":"2021-06-04T15:45:38.705Z","updated_at":"2021-06-17T15:16:14.145Z","closed_at":"2021-06-17T15:16:14.129Z","closed_by":{"id":553096,"username":"markrian","name":"Mark Florian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/553096/avatar.png","web_url":"https://gitlab.com/markrian"},"labels":["Category:Vulnerability Management","GitLab Core","GitLab Free","GitLab Premium","SUS::Impacting","devops::secure","feature::enhancement","frontend","group::analyzer frontend","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":553096,"username":"markrian","name":"Mark Florian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/553096/avatar.png","web_url":"https://gitlab.com/markrian"}],"author":{"id":553096,"username":"markrian","name":"Mark Florian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/553096/avatar.png","web_url":"https://gitlab.com/markrian"},"type":"ISSUE","assignee":{"id":553096,"username":"markrian","name":"Mark Florian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/553096/avatar.png","web_url":"https://gitlab.com/markrian"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332691","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332691","notes":"https://gitlab.com/api/v4/projects/278964/issues/332691/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332691/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332691","relative":"#332691","full":"gitlab-org/gitlab#332691"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6147,"epic":{"id":286279,"iid":6147,"title":"Phase 1 (FOSS / non-Ultimate)","url":"/groups/gitlab-org/-/epics/6147","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":88224505,"iid":332685,"project_id":278964,"title":"Add Activity Filters to vulnerabilitySeveritiesCount","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nWe need to filter the vulnerabilities count for activities in the Vulnerability Report when activities are selected. This means adding `hasIssues` and `hasResolution` to the `vulnerabilitySeveritiesCount` GraphQL query and VulnerabilitySeveritiesCountResolver. No modification to VulnerabilitiesFinder should be necessary.\n\n## Relevant links\n\n- [Frontend Issue](#328488)\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [x] Documentation: Update GraphQL docs\n- [x] Testing: Update/Add tests for vulnerabilitySeveritiesCount\n\n\n## Implementation plan\n\n- [x] ~backend Add `hasIssues` and `hasResolution` to the `vulnerabilitySeveritiesCount` GraphQL query\n- [x] ~backend Add `hasIssues` and `hasResolution` to the `VulnerabilitySeveritiesCountResolver` GraphQL resolver","state":"closed","created_at":"2021-06-04T14:37:42.736Z","updated_at":"2021-06-10T23:39:00.961Z","closed_at":"2021-06-09T23:22:39.739Z","closed_by":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"labels":["Category:Vulnerability Management","backend","backend-weight::1","devops::secure","group::threat insights","section::sec","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[],"author":{"id":4473655,"username":"jschafer","name":"Jonathan Schafer","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c9a0dad78ff350f1f7fffd44514269a?s=80\u0026d=identicon","web_url":"https://gitlab.com/jschafer"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332685","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332685","notes":"https://gitlab.com/api/v4/projects/278964/issues/332685/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332685/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332685","relative":"#332685","full":"gitlab-org/gitlab#332685"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88221231,"iid":332679,"project_id":278964,"title":"De-identification Project - Milestone Placeholder","description":"This is a placeholder issue to hold weight for milestone planning purposes utilized by ~\"group::product intelligence\" Product Manager.","state":"closed","created_at":"2021-06-04T13:42:16.571Z","updated_at":"2021-08-12T15:19:27.515Z","closed_at":"2021-08-12T11:57:36.925Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["Data de-identification","backend","blocked","devops::growth","group::product intelligence","section::growth"],"milestone":null,"assignees":[],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332679","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332679","notes":"https://gitlab.com/api/v4/projects/278964/issues/332679/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332679/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332679","relative":"#332679","full":"gitlab-org/gitlab#332679"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6309,"epic":{"id":303192,"iid":6309,"title":"Pseudonymization MVC","url":"/groups/gitlab-org/-/epics/6309","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88213756,"iid":332670,"project_id":278964,"title":"Spike: Iterate on Snowplow Alerts","description":"With https://gitlab.com/gitlab-org/gitlab/-/issues/325890 we got the first alert set up that would trigger a warning if not enough, or too many snowplow alerts got triggered.\n\nWe often got alerts since then that are false positives. I worry that this could lead to us ignoring real alerts and would like to look into the next iteration of this alert system.\n\nMy questions are:\n1. Could we provide more information into the alerts to allow quickly check if it's a false positive or real alert?\n1. Could we separate the alerts for \"not enough\" vs \"too many\" snowplow events?\n1. Could we instead of using static values as a threshold, use the average for a given weekday over the past X weeks with a deviation of X%? e.g. the average amount of events on a Sunday is 10M vs Monday 15M. We don't throw an alert if its within the range of 10% (9M events on a Sunday, 13.5M events on a Monday)","state":"closed","created_at":"2021-06-04T11:25:11.117Z","updated_at":"2021-10-14T10:11:36.871Z","closed_at":"2021-10-14T10:11:36.498Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["PI System Reliability and Monitoring","[deprecated] Accepting merge requests","backend","devops::growth","group::product intelligence","section::growth","spike","workflow::ready for development"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":null,"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332670","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332670","notes":"https://gitlab.com/api/v4/projects/278964/issues/332670/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332670/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332670","relative":"#332670","full":"gitlab-org/gitlab#332670"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6530,"epic":{"id":321607,"iid":6530,"title":"Snowplow Alerts","url":"/groups/gitlab-org/-/epics/6530","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88211834,"iid":332667,"project_id":278964,"title":"Admins should be blocked from impersonating expired accounts","description":"### Summary\n\n(Issue split from #332570)\n\nIf you impersonate into an expired account, you the loading of the repo browser fails\n\n### Steps to reproduce\n\n1) Impersonate into an account which is expired (e.g. after changing the password of the account)\n2) Navigate to a project of the impersonated user\n\n### What is the current *bug* behavior?\n\nMessage `An error occurred while fetching folder content` appears and an incomplete folder UI is displayed.\n\n### What is the expected *correct* behavior?\n\nTwo options:\n1) Instead of folder browser an error message appears like \"Your password has expired. Renew it to see this content.\".\n2) The user cannot even access the page =\u003e user can only access their profile, but nothing other (if it is currently not already the case). The Admin can see everything, but get an message, that the user cannot access this site (e.g. in case the admin should be able to check on which projects an expired user had access).\n\nRelated to option 2: This may be an extension of MR gitlab-org/security!1446 as maybe an expired user should not see anything (e.g issues, CI, ...) - but didn't tried which access an expired user still has.\n\n### Relevant logs and/or screenshots\n\n![image](/uploads/920df5bd8ee4658bbd0cec5c7361c8bf/image.png)\n\n### Proposal\n\nThe `Impersonate` button for expired users in the Admin Area should be disabled with a tooltip that explains why.\n\n![image](/uploads/29192ed03b601e48ef0f42ed524b5cc5/image.png)","state":"closed","created_at":"2021-06-04T10:35:45.419Z","updated_at":"2022-11-30T10:33:49.340Z","closed_at":"2022-11-14T22:02:42.683Z","closed_by":{"id":11997412,"username":"jessieay","name":"Jessie Young","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11997412/avatar.png","web_url":"https://gitlab.com/jessieay"},"labels":["Deliverable","SUS::Impacting","Technical Writing","Track Health Status","UI text","UX","approaching-SLO","backend","backend-weight::2","customer","devops::manage","group::authentication and authorization","missed-SLO","missed-deliverable","missed:15.2","priority::2","quad-planning::complete-no-action","section::dev","severity::2","tw-weight::1","tw::finished","type::bug","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11997412,"username":"jessieay","name":"Jessie Young","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11997412/avatar.png","web_url":"https://gitlab.com/jessieay"}],"author":{"id":3964391,"username":"heiko.thiel","name":"Heiko Thiel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/54c27e9d3de5709d6c078a3f50c0b38a?s=80\u0026d=identicon","web_url":"https://gitlab.com/heiko.thiel"},"type":"ISSUE","assignee":{"id":11997412,"username":"jessieay","name":"Jessie Young","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11997412/avatar.png","web_url":"https://gitlab.com/jessieay"},"user_notes_count":57,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332667","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332667","notes":"https://gitlab.com/api/v4/projects/278964/issues/332667/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332667/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332667","relative":"#332667","full":"gitlab-org/gitlab#332667"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88192979,"iid":332653,"project_id":278964,"title":"Default dependency list sort order icon is incorrect","description":"### Summary\n\nThe default sort order label and icon for the [dependency list](https://gitlab.com/gitlab-org/security-products/tests/java-maven/-/dependencies) is currently `asc` for vulnerability severity values\n\n![image](/uploads/4663b77e6259c9784fa8fe1616a066d0/image.png)\n\nThis would imply that the vulnerabilities should be sorted in _ascending_ order, or `info, unknown, low, medium, high, critical`, however, the vulnerabilities are [actually sorted](https://gitlab.com/gitlab-org/security-products/tests/java-maven/-/dependencies) in _descending_ order, or `critical, high, medium, low, unknown, info`: \n\n![image](/uploads/a69885328ab2e5f9617d82ec70300808/image.png)\n\nThis means that the sort order is correct, but the sort order label and icon are incorrect.\n\nIt also means the backend tests are very confusing, such as [this one](https://gitlab.com/gitlab-org/gitlab/blob/35644c23da3/ee/spec/services/security/dependency_list_service_spec.rb#L94-94):\n\n```ruby\ncontext 'sorted by desc severity' do\n  let(:params) do\n    {\n      sort: 'desc',\n      sort_by: 'severity'\n    }\n  end\n\n  it 'returns array of data properly sorted' do\n    ...\n  end\nend\n```\n\nThe above test shows that it's checking to make sure that the order is by `sorted by desc severity` and it passes `desc` as the sort order, yet it's actually ensuring that the severity order is `info, unknown, low, medium, high, critical`, which is an _ascending sort order_.\n\nThe purpose of this issue is to change the sort order label to `desc`, which will display the correct severity order icon in the dependency list and make the tests/code easier to maintain and understand.\n\n### Steps to reproduce\n\n1. Visit dependency list page for a project: https://gitlab.com/gitlab-org/security-products/tests/java-maven/-/dependencies\n1. Expand some of the vulnerabilities and look at the severity values. Notice that they're sorted in decreasing order of severity value, with the highest/most important vulnerabilities listed first. This is what I would consider a _descending_ sort order, for example: highest to lowest, largest to smallest, most important to least important, yet the sort order icon is _ascending_ and the sort order that's sent to the [backend endpoint](https://gitlab.com/gitlab-org/security-products/tests/java-maven/-/dependencies.json?sort_by=severity\u0026sort=asc\u0026page=1\u0026filter=all) is is also _ascending_ (`asc`):\n\n   `dependencies.json?sort_by=severity\u0026sort=asc`\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/security-products/tests/java-maven/-/dependencies\n\n### What is the current *bug* behavior?\n\nDependency list shows `ascending` icon for sorting dependencies by severity level, meanwhile the dependencies are sorted in the `descending` order.\n\n### What is the expected *correct* behavior?\n\nThe icon for sorting the dependency list should match the current sort order.\n\n### Related discussions\n\nSee [here](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62983#note_592130914) for further details\n\n### Possible fixes\n\n1. Change [fetchDependencies](https://gitlab.com/gitlab-org/gitlab/blob/35644c23da3/ee/app/assets/javascripts/dependencies/store/modules/list/actions.js#L27-57) to use a `desc` sort order by default when fetching the vulnerabilities from the `dependencies.json` endpoint\n1. Update [Security::DependencyListService#sort()](https://gitlab.com/gitlab-org/gitlab/blob/35644c23da3/ee/app/services/security/dependency_list_service.rb#L53-67) and the other sorting methods in the file to ensure that `asc` order is `info, unknown, low, medium, high, critical` and `desc` order is `critical, high, medium, low, unknown, info`\n1. Update the spec for [Security::DependencyListService](https://gitlab.com/gitlab-org/gitlab/blob/d830b385471/ee/spec/services/security/dependency_list_service_spec.rb#L1-1) to make sure that all tests pass and use the correct sorting order and label. \n\n   For example, the test [`sorted by desc severity`](https://gitlab.com/gitlab-org/gitlab/blob/d830b385471/ee/spec/services/security/dependency_list_service_spec.rb#L94-109) will need to be changed\n\n   from:\n\n   ```ruby\n   context 'sorted by desc severity' do\n     let(:params) do\n       {\n         sort: 'desc',\n         sort_by: 'severity'\n       }\n     end\n   \n     it 'returns array of data properly sorted' do\n         ...\n     end\n   end\n   ```\n\n   to:\n   \n   ```ruby\n   context 'sorted by asc severity' do\n     let(:params) do\n       {\n         sort: 'asc',\n         sort_by: 'severity'\n       }\n     end\n   \n     it 'returns array of data properly sorted' do\n         ...\n     end\n   end\n   ```\n\n\n/cc @gonzoyumo @NicoleSchwartz @mkaeppler","state":"closed","created_at":"2021-06-04T04:01:45.813Z","updated_at":"2021-07-18T07:09:20.393Z","closed_at":"2021-07-07T09:27:07.411Z","closed_by":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","dependency list","devops::secure","group::composition analysis","priority::2","section::sec","severity::3","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"}],"author":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332653","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332653","notes":"https://gitlab.com/api/v4/projects/278964/issues/332653/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332653/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332653","relative":"#332653","full":"gitlab-org/gitlab#332653"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88192096,"iid":332652,"project_id":278964,"title":"Support `finished_after` filter in Deployment API","description":"## Release notes\n\nWith this update, you can now filter the list of deployments in a project by `finished_before` or `finished_after`. Previously, filtering was allowed only by the updated dates. This allows you to more efficiently search for the relevant deployments in your workflow.\n\n## Problem\n\nDeployment API has `updated_before` filter, which was introduced in https://gitlab.com/gitlab-org/gitlab/-/issues/33101. The issue describes that:\n\n\u003e\u003e\u003e\nAn Enterprise customer is pulling data from the [\"list project deployments\" API endpoint](https://docs.gitlab.com/ee/api/deployments.html#list-project-deployments) to populate a custom-built dashboard. The customer only wants to display the latest changes. However, the customer has no way to restrict the API results to the latest changes. Instead, the customer retrieves all records, checks one-by-one and processes only the records updated after the latest `updated_at` value in the last batch retrieved. The customer has asked for the ability to query for `updated_at` values after a specified timestamp.\n\u003e\u003e\u003e\n\n`updated_at` filtering would make sense in Issues or MRs context, however, it does _NOT_ make sense in deployments context. For example, looking at a query that customers are currently executing:\n\n```\nSELECT\n    \"deployments\".*\nFROM\n    \"deployments\"\n    INNER JOIN \"environments\" ON \"environments\".\"id\" = \"deployments\".\"environment_id\"\nWHERE\n    \"deployments\".\"project_id\" = $ 1\n    AND \"deployments\".\"updated_at\" \u003c= $ 2\n    AND \"environments\".\"name\" = $ 3\nORDER BY\n    \"deployments\".\"iid\" DESC\nLIMIT\n    $ 4 OFFSET $ 5\n```\n\nThis **does NOT** fetch the latest changes to the environment that the original issue was born for. But this fetches mixed states of deployment _records_ that includes:\n\n- Deployments that actually deployed to the target environment. This is the \"changes\" in deployment context.\n- Deployment jobs that still running to the target environment. (It should be excluded)\n- Failed deployment jobs that didn't make into the target environment. (It should be excluded)\n- Canceled deployment jobs that didn't make into the target environment. (It should be excluded)\n- These mixed-states deployment rows are ordered by `iid`, which is **creation order, not update order** (See more https://gitlab.com/gitlab-org/gitlab/-/issues/29884#note_549584527) (i.e. this sorting is messing up `updated_at` filtering)\n\nWe should allow them to filter by `finished_at` instead. Here is the correct query/parameter combination to fetch latest changes/deployments to a specific environment.\n\n```\nSELECT\n    \"deployments\".*\nFROM\n    \"deployments\"\nWHERE\n    \"deployments\".\"environment_id\" = 1069567\n    AND \"deployments\".\"status\" = 2\n    AND \"deployments\".\"finished_at\" \u003c= '2021-04-14T09:05:29Z'\nORDER BY\n    \"deployments\".\"finished_at\" DESC\nLIMIT\n    100 OFFSET 100\n```\n\nFYI, this query can be executed in 40ms, which is 2000x faster than the query above.\n\n## Proposal\n\nAllow `finished_before` and `finished_after` query parameters to be passed to [Deployment LIST API](https://docs.gitlab.com/ee/api/deployments.html#list-project-deployments)\n\n```diff\ndiff --git a/lib/api/deployments.rb b/lib/api/deployments.rb\nindex ee0a026d7ac..ec4577cf460 100644\n--- a/lib/api/deployments.rb\n+++ b/lib/api/deployments.rb\n@@ -24,6 +24,8 @@ class Deployments \u003c ::API::Base\n         optional :sort, type: String, values: DeploymentsFinder::ALLOWED_SORT_DIRECTIONS, default: DeploymentsFinder::DEFAULT_SORT_DIRECTION, desc: 'Sort by asc (ascending) or desc (descending)'\n         optional :updated_after, type: DateTime, desc: 'Return deployments updated after the specified date'\n         optional :updated_before, type: DateTime, desc: 'Return deployments updated before the specified date'\n+        optional :finished_after, type: DateTime, desc: 'Return deployments finished after the specified date'\n+        optional :finished_before, type: DateTime, desc: 'Return deployments finished before the specified date'\n         optional :environment,\n           type: String,\n           desc: 'The name of the environment to filter deployments by'\n```","state":"closed","created_at":"2021-06-04T03:13:24.306Z","updated_at":"2022-12-23T01:07:29.756Z","closed_at":"2022-12-12T10:02:36.479Z","closed_by":{"id":11334402,"username":"ahmed.hemdan","name":"Ahmed Hemdan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11334402/avatar.png","web_url":"https://gitlab.com/ahmed.hemdan"},"labels":["Category:Continuous Delivery","Deliverable","GitLab Free","Release::P1","api","backend","backend-weight::1","customer","database","devops::release","group::release","release post item::in review","section::ops","type::feature"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11334402,"username":"ahmed.hemdan","name":"Ahmed Hemdan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11334402/avatar.png","web_url":"https://gitlab.com/ahmed.hemdan"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":11334402,"username":"ahmed.hemdan","name":"Ahmed Hemdan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11334402/avatar.png","web_url":"https://gitlab.com/ahmed.hemdan"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332652","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332652","notes":"https://gitlab.com/api/v4/projects/278964/issues/332652/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332652/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332652","relative":"#332652","full":"gitlab-org/gitlab#332652"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9171,"epic":{"id":647208,"iid":9171,"title":"Deployment API performance improvement","url":"/groups/gitlab-org/-/epics/9171","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":88191765,"iid":332651,"project_id":278964,"title":"Drop support for `data-track-event`","description":"After working on #332650 we can safely remove support for `data-track-event`.\n\nReference in the docs: https://docs.gitlab.com/ee/development/snowplow/index.html#tracking-with-data-attributes","state":"closed","created_at":"2021-06-04T02:58:07.479Z","updated_at":"2021-09-21T14:45:09.064Z","closed_at":"2021-09-21T14:45:09.046Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["Technical Writing","devops::growth","documentation","frontend","group::product intelligence","missed:14.3","section::growth","tw-weight::3","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332651","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332651","notes":"https://gitlab.com/api/v4/projects/278964/issues/332651/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332651/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332651","relative":"#332651","full":"gitlab-org/gitlab#332651"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5569,"epic":{"id":223482,"iid":5569,"title":"Snowplow Maintenance","url":"/groups/gitlab-org/-/epics/5569","group_id":9970,"human_readable_end_date":"Jan 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88191621,"iid":332650,"project_id":278964,"title":"Replace `data-track-event` with `data-track-action`","description":"On #290962 we deprecated using `data-track-event` in favor of `data-track-action`. We now need to perform a migration to update the code in HAML and Vue templates.\n\nReference in the docs: https://docs.gitlab.com/ee/development/snowplow/index.html#tracking-with-data-attributes","state":"closed","created_at":"2021-06-04T02:53:47.818Z","updated_at":"2021-09-16T18:44:09.570Z","closed_at":"2021-09-16T14:30:15.903Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["devops::growth","frontend","group::product intelligence","section::growth","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332650","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332650","notes":"https://gitlab.com/api/v4/projects/278964/issues/332650/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332650/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332650","relative":"#332650","full":"gitlab-org/gitlab#332650"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5569,"epic":{"id":223482,"iid":5569,"title":"Snowplow Maintenance","url":"/groups/gitlab-org/-/epics/5569","group_id":9970,"human_readable_end_date":"Jan 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88189583,"iid":332649,"project_id":278964,"title":"FE: GitLab sub group subscription data/transfer bug","description":"This is the ~frontend issue for https://gitlab.com/gitlab-org/gitlab/-/issues/330524\n\n## Actions\n\n1. [ ] Disable the transfer option in the UI if the group isn't a root one per [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/330524#note_572201963)","state":"closed","created_at":"2021-06-04T01:16:22.927Z","updated_at":"2021-07-18T03:13:03.022Z","closed_at":"2021-07-15T01:25:45.649Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","needs weight","priority::3","section::fulfillment","severity::4","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332649","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332649","notes":"https://gitlab.com/api/v4/projects/278964/issues/332649/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332649/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332649","relative":"#332649","full":"gitlab-org/gitlab#332649"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88189231,"iid":332648,"project_id":278964,"title":"Remove  Mutation.mergeRequestSetWip","description":"Marked for deprecation in %13.12, we can remove it per the [GraphQL Deprecation and Removal Process](https://docs.gitlab.com/ee/api/graphql/#deprecation-and-removal-process)\n\nAdditionally, update the documentation `doc/api/graphql/reference/index.md`\n\n(Since we don't have a 14.6 milestone yet, so that we don't lose this, I'm assigning it %\"14.4\" for scheduling at that time.)","state":"closed","created_at":"2021-06-04T00:46:22.304Z","updated_at":"2022-02-22T19:59:45.722Z","closed_at":"2022-02-22T19:59:45.709Z","closed_by":{"id":4058309,"username":"mnohr","name":"Matt Nohr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f2b70c7a75fd0a15ef789d4b1e620449?s=80\u0026d=identicon","web_url":"https://gitlab.com/mnohr"},"labels":["Category:Code Review Workflow","[deprecated] Accepting merge requests","backend","devops::create","frontend","frontend-weight::1","group::code review","missed:14.8","quad-planning::complete-no-action","section::dev","workflow::ready for development"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332648","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332648","notes":"https://gitlab.com/api/v4/projects/278964/issues/332648/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332648/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332648","relative":"#332648","full":"gitlab-org/gitlab#332648"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88189154,"iid":332647,"project_id":278964,"title":"Remove`work_in_progress` from Merge Request GraphQL type","description":"Marked for deprecation in %13.12, we can remove it per the [GraphQL Deprecation and Removal Process](https://docs.gitlab.com/ee/api/graphql/#deprecation-and-removal-process)\n\n(Since we don't have a 14.6 milestone yet, so that we don't lose this, I'm assigning it %\"14.4\" for scheduling at that time.)","state":"closed","created_at":"2021-06-04T00:43:10.967Z","updated_at":"2022-02-18T07:01:13.143Z","closed_at":"2022-01-10T15:50:05.481Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","frontend","group::code review","quad-planning::complete-no-action","section::dev","workflow::ready for development"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332647","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332647","notes":"https://gitlab.com/api/v4/projects/278964/issues/332647/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332647/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332647","relative":"#332647","full":"gitlab-org/gitlab#332647"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88188819,"iid":332646,"project_id":278964,"title":"Guest Users can re-edit their comments on Merge Requests which they no longer have access to","description":"**[HackerOne report #1212288](https://hackerone.com/reports/1212288)** by `cradlr` on 2021-05-28, assigned to GitLab Team:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nA guest user can re-edit their comments in the Merge Request comment section when they no-longer have access to that Merge Request as a guest user.\n\n**We can fix this issue following the normal flow instead of the security flow**, see https://gitlab.com/gitlab-org/gitlab/-/issues/332646#note_592596619.\n\n#####  Steps to reproduce\n\n1. I have used Firefox containers to gave multiple sessions in 1 browser. Create 2 user accounts in gitlab.com.  \n2. From the main owner's account create a project -\u003e create a Group. Invite a member to that Group with the privileges of owner.  \n3. Create a project form the main owner's account under the group which has shared owner privileges.  \n4. Switch to the invited user's session and Create an issue-\u003eCreate a Merge Request.-\u003eThen add the file.  \n5. Now comment on the Merge Request from the main owner's account and put a reply to that comment form the invited user's account.  \n6. Re-edit the response made by the invited user and push that request to repeater.  \n7. Change the permissions of the invited user's account to guest and assign that particular merge request to the main owner from the main owner's account.  \n8. Refresh the session of the invited user's account. 404 error message shows up.  \n9. Switch to repeater and edit the response and fire the request. We get a 500 Server error message.  \n10. Verify the changes from the main owner's account.\n\n```\n====================PUT REQUEST===========================  \nPUT /test-groups2/owner-subgroup/inherited/notes/588153581 HTTP/1.1  \nHost: gitlab.com  \nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:88.0) Gecko/20100101 Firefox/88.0  \nAccept: application/json, text/plain, */*  \nAccept-Language: en-US,en;q=0.5  \nAccept-Encoding: gzip, deflate  \nReferer: https://gitlab.com/test-groups2/owner-subgroup/inherited/-/merge_requests/15  \nX-CSRF-Token: REDACTED\nX-Requested-With: XMLHttpRequest  \nContent-Type: application/json;charset=utf-8  \nContent-Length: 96  \nOrigin: https://gitlab.com  \nConnection: close  \nCookie: REDACTED\n\n{\"target_type\":\"merge_request\",\"target_id\":101955619,\"note\":{\"note\":\"hola. !rrrrrrrrrrrrrrrrr\"}}\n\n======================Response================================================  \nHTTP/1.1 500 Internal Server Error  \nDate: Fri, 28 May 2021 21:24:40 GMT  \nContent-Type: text/html; charset=utf-8  \nContent-Length: 2926  \nConnection: close  \nCache-Control: no-cache, no-store, max-age=0, must-revalidate  \nExpires: Fri, 01 Jan 1990 00:00:00 GMT  \nPragma: no-cache  \nX-Request-Id: 01F6TDTTP0E8VFGAW32MFJX5QX  \nX-Runtime: 0.305979  \nGitLab-LB: fe-06-lb-gprd  \nGitLab-SV: web-33-sv-gprd  \nCF-Cache-Status: DYNAMIC  \ncf-request-id: 0a5676826400004e68cabbd000000001  \nExpect-CT: max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"  \nStrict-Transport-Security: max-age=31536000  \nX-Content-Type-Options: nosniff  \nServer: cloudflare  \nCF-RAY: 656a8d170d744e68-FRA  \n==========================================================================\n```\n\nThanks,  \nCradlr\n\n####  Impact\n\nImproper authorization leads to the re-edit of the comment for a guest user.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [Priv-Escalation-comments-Merge-Requests.mp4](https://h1.sec.gitlab.net/a/08d67dc2-b568-4867-9b27-88459ed5cb21/Priv-Escalation-comments-Merge-Requests.mp4)","state":"closed","created_at":"2021-06-04T00:23:01.768Z","updated_at":"2022-01-19T13:09:09.702Z","closed_at":"2021-12-06T04:39:25.662Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["Category:Integrations","HackerOne","Weakness::CAPEC-233","backend","devops::create","group::code review","priority::4","section::dev","security","security-backlog::review-complete","severity::4","workflow::in dev"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332646","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332646","notes":"https://gitlab.com/api/v4/projects/278964/issues/332646/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332646/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332646","relative":"#332646","full":"gitlab-org/gitlab#332646"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88184196,"iid":332643,"project_id":278964,"title":"Combine \"Access Expires\" and \"Expiration\" into One Column on Group Members Table","description":"## Problem\n\nThe order of the columns in the Group Members table separates \"Access expires\" from \"Expiration\", making it confusing as to whether these two columns relate to each other.\n\n![membership](/uploads/dd4a2146524f8db7ba06818e76e82455/membership.png)\n\n## Proposal\nWe will delete the `Access expires` column.\n\n####  [Figma working file](https://www.figma.com/file/R31JCMX9jI5Nw7Gvj4R5uP/332643-Group-Members-Table-Column-Order?node-id=19%3A5438)\n\n## Implementation plan\n\n1. Remove `expires` from `SHARED_FIELDS` constant in [app/assets/javascripts/pages/groups/group_members/index.js#L14](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/pages/groups/group_members/index.js#L14) and [app/assets/javascripts/pages/projects/project_members/index.js#L29](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/pages/projects/project_members/index.js#L29).\n1. Remove `expires` field from [app/assets/javascripts/members/constants.js#L40](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/members/constants.js#L40)\n1. Delete `app/assets/javascripts/members/components/table/expires_at.vue` and `spec/frontend/members/components/table/expires_at_spec.js`\n1. Update feature specs\n   - [spec/features/groups/members/manage_groups_spec.rb#L114](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/features/groups/members/manage_groups_spec.rb#L114)\n   - [spec/features/groups/members/master_adds_member_with_expiration_date_spec.rb#L19](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/features/groups/members/master_adds_member_with_expiration_date_spec.rb#L19)\n   - [spec/features/projects/members/invite_group_spec.rb#L182](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/features/projects/members/invite_group_spec.rb#L182)\n   - [spec/features/projects/members/groups_with_access_list_spec.rb#L38](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/features/projects/members/groups_with_access_list_spec.rb#L38)","state":"closed","created_at":"2021-06-03T21:28:09.167Z","updated_at":"2021-10-08T14:43:06.355Z","closed_at":"2021-10-08T14:43:06.336Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Authentication and Authorization","FY22::Q3","UX","UX solution validation","candidate::14.4","design-weight::3","devops::manage","frontend","group::authentication and authorization","priority::4","quad-planning::complete-no-action","section::dev","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":30,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332643","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332643","notes":"https://gitlab.com/api/v4/projects/278964/issues/332643/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332643/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332643","relative":"#332643","full":"gitlab-org/gitlab#332643"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88180294,"iid":332630,"project_id":278964,"title":"GitHub Importer: Option to fetch comments 1 at a time","description":"## Problem to solve\n\nThe MRs usually get imported, but they lack a lot of metadata, specifically the comments and diffs. The comments and diffs are inconsistent. Thes [example](https://gitlab.com/gitlab-org/gitlab/-/issues/330783#example) is still occurring after the patches are applied.\n\nThe last test I ran showed 155/285 comments for the large pull request I am using to validate the changes.\n\n## Aftermath\n\nAfter more tests and investigations, this error was categorized as intermittent, probably something related to networking/infrastructure. \n\nAlso, we recently noticed a possible cause for missing data in the Github importer (https://gitlab.com/gitlab-org/gitlab/-/issues/333246). I'll (@kassio) focus on fix that next, which might be the reason of the missing diff note comments.\n\n- https://gitlab.com/gitlab-org/gitlab/-/issues/332630#note_600582875\n\n## Proposed solution\n\nPer [this note](https://gitlab.com/gitlab-org/gitlab/-/issues/332630#note_637900725):\n\n* [ ] Implement fetching issue comments and MR comments 1 at a time, instead of page by page.\n* [ ] Put this change behind a feature flag that is disabled by default.\n* [ ] Document this solution with the recommended number of issues/MR above which one should consider using this method.\n\n## Out of scope\n\nFollowing features/ideas were discussed, but are not included in this issue:\n* Rewriting GitHub Importer to use GraphQL. - not all the needed resources are available in GitHub's GraphQL\n* A hybrid solution that utilizes both approaches (paging and fetching 1 at a time), as needed. - too complex\n* A solution that analyzes the data and recommends an approach. - a potential future enhancement","state":"closed","created_at":"2021-06-03T19:57:40.420Z","updated_at":"2022-05-31T09:32:27.421Z","closed_at":"2021-08-24T10:29:50.472Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:GitHub","Next Up","Unplanned","backend","customer","devops::manage","group::import","milestone::p1","missed:14.0","missed:14.1","section::dev","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delali","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":77,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332630","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332630","notes":"https://gitlab.com/api/v4/projects/278964/issues/332630/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332630/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332630","relative":"#332630","full":"gitlab-org/gitlab#332630"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6270,"epic":{"id":299300,"iid":6270,"title":" GitHub Importer Reliability Improvements","url":"/groups/gitlab-org/-/epics/6270","group_id":9970,"human_readable_end_date":"Aug 31, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88179394,"iid":332626,"project_id":278964,"title":"Make it apparent when subgroup can't invite groups outside the root group namespace","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n### Problem\n\nWhen a subgroup is unable to invite groups outside of its root group namespace, it might not be apparent to a subgroup owner who is searching for groups to invite and can't find them. The search simply doesn't yield results outside of the namespace.\n\nDemonstration\n\n![CannotShare](/uploads/c5d3598c117e29036d0f17709ccb92d7/CannotShare.mov)\n\n### Proposal \n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n\n--\u003e\n\nMake it apparent when a subgroup is governed by its root group and can't be shared outside of the namespace. Either by showing some indication on the members invite page, or by making the search empty state more informative.","state":"closed","created_at":"2021-06-03T19:27:38.914Z","updated_at":"2021-09-21T14:18:06.947Z","closed_at":"2021-09-14T17:07:07.890Z","closed_by":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"labels":["GitLab Core","GitLab Premium","GitLab Ultimate","Technical Writing","UI text","UX","[deprecated] Accepting merge requests","[deprecated] Category:Utilization","devops::fulfillment","group::utilization","section::fulfillment"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"}],"author":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"type":"ISSUE","assignee":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332626","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332626","notes":"https://gitlab.com/api/v4/projects/278964/issues/332626/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332626/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332626","relative":"#332626","full":"gitlab-org/gitlab#332626"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88174501,"iid":332621,"project_id":278964,"title":"diffs_metatdata Returning 500 Error - nil can't be coerced into Integer","description":"### Error Budget\n\nAs the Code Review team, we are over our [Error Budget](https://dashboards.gitlab.net/d/stage-groups-code_review/stage-groups-group-dashboard-create-code-review?orgId=1). As we get requests that fail, we \"use\" some of our allotment of error budget. If we use too many minutes, then we are beyond our error budget.\n\n### Kibana Logs\n\nI was looking at the [Kibana Rails failed request logs](\nhttps://log.gprd.gitlab.net/app/kibana#/discover?_a=(columns:!(json.method,json.status,json.controller,json.action,json.path,json.duration_s),filters:!((query:(bool:(minimum_should_match:1,should:!((match_phrase:(json.meta.feature_category:code_review)),(match_phrase:(json.meta.feature_category:editor_extension)))))),(query:(range:(json.status:(gte:500))))),index:'7092c4e2-4eb5-46f2-8305-a7da2edad090')\u0026_g=(time:(from:'2021-06-03T11:02:00.000Z',to:'2021-06-03T17:02:59.999Z'))). These are requests where the JSON response code is 500.\n\nCurrently, about 40% of the errors come from one request, `Projects::MergeRequests::DiffsController#diffs_metadata`. Over 99% of these are returning the error message:\n\n```\nnil can't be coerced into Integer\n```\n\nBased on my Kibana search, this error is occurring about 1000 times each day. This currently accounts for about 1/3 of the JSON 500 errors we are returning.\n\nWe should check for this case and not return a 500 error.","state":"closed","created_at":"2021-06-03T17:48:26.507Z","updated_at":"2021-07-06T19:04:07.719Z","closed_at":"2021-06-08T16:00:11.227Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["backend","devops::create","group::code review","section::dev","type::bug"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":4058309,"username":"mnohr","name":"Matt Nohr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f2b70c7a75fd0a15ef789d4b1e620449?s=80\u0026d=identicon","web_url":"https://gitlab.com/mnohr"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332621","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332621","notes":"https://gitlab.com/api/v4/projects/278964/issues/332621/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332621/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332621","relative":"#332621","full":"gitlab-org/gitlab#332621"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6292,"epic":{"id":302092,"iid":6292,"title":"Create:Code Review Error Budget Improvement","url":"/groups/gitlab-org/-/epics/6292","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88172173,"iid":332613,"project_id":278964,"title":"Follow-up with consistently failing job for ci_build_trace_sections migration","description":"Follow-up issue for visibility from https://gitlab.com/gitlab-org/gitlab/-/issues/328432#note_592233257:\n\nHow do we deal with consistently failing jobs?\n\nCopying Yannis' @iroussos comment here for reference:\n\nI think that we are in a stalemate in this case which showcases that we have to add a smarter retry mechanism: If we pick a batch size so large (or hit a batch with very expensive updates or a combination of both) so that the job can not finish on time with the set batch size, we have no way to retry the job while breaking it in smaller jobs.\nI think that there are 2 paths to consider here:\n\nAbility to run a failed job with an increased ExclusiveLease timeout (easy solution but we will always hit a threshold)\nAbility to split a job to two (or multiple) new jobs with smaller batch sizes and min/max as chunks of the original range","state":"closed","created_at":"2021-06-03T16:40:29.307Z","updated_at":"2022-05-30T15:28:41.819Z","closed_at":"2021-07-30T10:12:51.986Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","missed:14.1","section::enablement","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":1562869,"username":"abrandl","name":"Andreas Brandl","state":"active","avatar_url":"https://secure.gravatar.com/avatar/487c4c74f7e1714b5a270e00d4735e84?s=80\u0026d=identicon","web_url":"https://gitlab.com/abrandl"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":32,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332613","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332613","notes":"https://gitlab.com/api/v4/projects/278964/issues/332613/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332613/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332613","relative":"#332613","full":"gitlab-org/gitlab#332613"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5654,"epic":{"id":231455,"iid":5654,"title":"Improve background migrations for primary key conversions","url":"/groups/gitlab-org/-/epics/5654","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88170428,"iid":332609,"project_id":278964,"title":"Forks of public projects by project members can leak codebase","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nThere are public projects that intentionally restrict visibility of the source code to _only_ project members. (for example: https://gitlab.com/gitlab-org/customers-gitlab-com)\n\nProject members can fork these projects into another namespace to test changes without impacting the upstream project.\n\nA project member clicking \"Fork\" will copy the project, but not the project visibility settings. This can lead to unintentionally exposing proprietary source code never intended for public consumption.\n\n\n\n### Steps to reproduce\n\n1. Create public project in a group namespace.\n2. Set repository view/edit access to \"Only Project Members\" \n![image](/uploads/37ef9cd5e081298b5bf6472fecb9ee23/image.png)\n3. Verify that project source code is not publicly visible using different browser or incognito mode\n4. Fork this project into your personal namespace.\n5. Verify that the project source code on the fork is publicly visible.\n\nResults of not realizing this happened: https://gitlab.com/gitlab-com/gl-security/security-operations/sirt/operations/-/issues/1454\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/customers-gitlab-com (any GitLab team member forking this project will publicly expose the source code)\n\n### What is the current *bug* behavior?\n\nAs a project member, forking a project with Repository visibility set to \"Only Project Members\" creates a project where Repository is visible to all.\n\n### What is the expected *correct* behavior?\n\nProject members forking a project with Repository visibility set to \"Only Project Members\" have their fork's Repository visibility also configured to \"Only Project Members\" (perhaps with them as the only member?)\n\n### Relevant logs and/or screenshots\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e\n\n### Example of how this can unintentionally leak data\n\nhttps://gitlab.com/gitlab-com/gl-security/security-operations/sirt/operations/-/issues/1454","state":"closed","created_at":"2021-06-03T16:05:31.776Z","updated_at":"2022-09-02T07:53:17.404Z","closed_at":"2021-06-30T17:10:34.607Z","closed_by":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"labels":["Category:Source Code Management","devops::create","group::source code","priority::3","section::dev","security","severity::3","type::bug","workflow::refinement"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"}],"author":{"id":3645992,"username":"greg","name":"Greg Myers","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3645992/avatar.png","web_url":"https://gitlab.com/greg"},"type":"ISSUE","assignee":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"user_notes_count":18,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":"2021-09-02","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332609","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332609","notes":"https://gitlab.com/api/v4/projects/278964/issues/332609/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332609/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332609","relative":"#332609","full":"gitlab-org/gitlab#332609"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":264,"epic":{"id":529,"iid":264,"title":"  Make forking workflows loveable","url":"/groups/gitlab-org/-/epics/264","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":88169421,"iid":332607,"project_id":278964,"title":"Geo Status 2.0 Regression - Replication Details Margin","description":"Extra spacing on the Replication details dropdown\n\n![Screen_Shot_2021-06-03_at_10.40.00_AM](/uploads/44504fad894d7f247422a13576858247/Screen_Shot_2021-06-03_at_10.40.00_AM.png)","state":"closed","created_at":"2021-06-03T15:40:16.193Z","updated_at":"2021-11-02T19:09:59.699Z","closed_at":"2021-10-28T08:42:56.096Z","closed_by":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"labels":["UX","devops::systems","found:staging.gitlab.com","frontend","group::geo","missed:14.4","priority::4","section::enablement","severity::4","type::bug","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4554077,"username":"nhxnguyen","name":"Nick Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554077/avatar.png","web_url":"https://gitlab.com/nhxnguyen"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4554077,"username":"nhxnguyen","name":"Nick Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554077/avatar.png","web_url":"https://gitlab.com/nhxnguyen"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332607","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332607","notes":"https://gitlab.com/api/v4/projects/278964/issues/332607/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332607/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332607","relative":"#332607","full":"gitlab-org/gitlab#332607"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6042,"epic":{"id":274361,"iid":6042,"title":"Geo Status Page Improvements","url":"/groups/gitlab-org/-/epics/6042","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88165789,"iid":332601,"project_id":278964,"title":"[UserCap BE]: Disable group sharing","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/4315, we introduced a `User Cap` setting for self-managed admins to prevent accidental user overages, now we are doing the same for SaaS group owners to prevent accidental overages.\n\nThis work will be broken down into the following backend steps:\n\n- [Add user cap setting](https://gitlab.com/gitlab-org/gitlab/-/issues/332590) \n- [Adding/inviting members](https://gitlab.com/gitlab-org/gitlab/-/issues/332592)\n- [Notifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332595)\n- [Member management](https://gitlab.com/gitlab-org/gitlab/-/issues/332596)\n- [Auto approval](https://gitlab.com/gitlab-org/gitlab/-/issues/334381)\n- [Approval Modal](https://gitlab.com/gitlab-org/gitlab/-/issues/334822)\n- [Group access modifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332598)\n- **Group sharing** :point_left: we are here\n- [UserCap availability](https://gitlab.com/gitlab-org/gitlab/-/issues/342227)\n\nFor a given group, group sharing should be disabled when:\n* this group's ancestor group has a User cap set.\n* this group is an ancestor group and has a User cap set.\n\nIf a User Cap setting is enabled for a root group, then `Namespace#share_with_group_lock` should be enabled for this root group as well as all its subgroups.\n\nThis discussion around this requirement will add more context: https://gitlab.com/groups/gitlab-org/-/epics/5803#note_558309774.\n\nThe \"disable group share\" functionality is being delivered as part of https://gitlab.com/gitlab-org/gitlab/-/issues/217623\n\n## Relevant links\n\n- Epic: https://gitlab.com/groups/gitlab-org/-/epics/5803\n- Designs: https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/V4.png, https://gitlab.com/gitlab-org/gitlab/-/issues/328680/designs/pending.png\n\n## Implementation plan\n\n- [ ] Add validation for User Cap enablement to require (or auto enable?) disabling of group sharing\n\n## Additional notes\n\nFurther consideration for this change is:\n\nWhat should happen with the associated group sharing disable attribute when an owner disables the User Cap feature?\n\nInitial thoughts are that the attribute can be enabled independantly from User Caps, so it should be left enabled because we have no way of knowing if it was enabled in conjunction with User Caps or not, but this should be confirmed.","state":"closed","created_at":"2021-06-03T14:36:54.369Z","updated_at":"2022-09-07T04:39:55.658Z","closed_at":"2021-08-10T10:58:46.922Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","quad-planning::complete-no-action","section::fulfillment","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332601","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332601","notes":"https://gitlab.com/api/v4/projects/278964/issues/332601/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332601/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332601","relative":"#332601","full":"gitlab-org/gitlab#332601"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88165597,"iid":332598,"project_id":278964,"title":"[UserCap BE]: Group access modifications","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/4315, we introduced a `User Cap` setting for self-managed admins to prevent accidental user overages, now we are doing the same for SaaS group owners to prevent accidental overages.\n\nThis work will be broken down into the following backend steps:\n\n- [Add user cap setting](https://gitlab.com/gitlab-org/gitlab/-/issues/332590) \n- [Adding/inviting members](https://gitlab.com/gitlab-org/gitlab/-/issues/332592)\n- [Notifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332595)\n- [Member management](https://gitlab.com/gitlab-org/gitlab/-/issues/332596)\n- [Auto approval](https://gitlab.com/gitlab-org/gitlab/-/issues/334381)\n- [Approval Modal](https://gitlab.com/gitlab-org/gitlab/-/issues/334822)\n- **Group access modifications**:  :point_left: we are here\n- [Group sharing](https://gitlab.com/gitlab-org/gitlab/-/issues/332601)\n- [UserCap availability](https://gitlab.com/gitlab-org/gitlab/-/issues/342227)\n\nWe need to restrict full access to group members if their state is pending, we can do this by modifying the access policy to include a state check once that has been implemented as part of https://gitlab.com/gitlab-org/gitlab/-/issues/332592\n\n\n## Relevant links\n\n- Epic: https://gitlab.com/groups/gitlab-org/-/epics/5803\n- Designs: https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/V4.png, https://gitlab.com/gitlab-org/gitlab/-/issues/328680/designs/pending.png\n\n## Implementation plan\n\n- [ ] Modify access policy to include state*\n\n_*This should probably be behind a feature flag to prevent confusion until the full feature is ready_","state":"closed","created_at":"2021-06-03T14:32:39.194Z","updated_at":"2022-02-22T22:06:26.542Z","closed_at":"2022-02-18T22:40:53.744Z","closed_by":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"labels":["Deliverable","[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","missed-deliverable","missed:14.5","missed:14.6","missed:14.7","quad-planning::complete-no-action","section::fulfillment","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332598","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332598","notes":"https://gitlab.com/api/v4/projects/278964/issues/332598/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332598/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332598","relative":"#332598","full":"gitlab-org/gitlab#332598"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88165158,"iid":332596,"project_id":278964,"title":"[UserCap BE]: Pending Member management","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/4315, we introduced a `User Cap` setting for self-managed admins to prevent accidental user overages, now we are doing the same for SaaS group owners to prevent accidental overages.\n\nThis work will be broken down into the following backend steps:\n\n- [Add user cap setting](https://gitlab.com/gitlab-org/gitlab/-/issues/332590) \n- [Adding/inviting members](https://gitlab.com/gitlab-org/gitlab/-/issues/332592)\n- [Notifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332595)\n- **Member management** :point_left: we are here\n- [Auto approval](https://gitlab.com/gitlab-org/gitlab/-/issues/334381)\n- [Approval Modal](https://gitlab.com/gitlab-org/gitlab/-/issues/334822)\n- [Group access modifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332598)\n- [Group sharing](https://gitlab.com/gitlab-org/gitlab/-/issues/332601)\n- [UserCap availability](https://gitlab.com/gitlab-org/gitlab/-/issues/342227)\n\nThis issue for managing the approval process for pending members once a root group has made use of and/or reached the user cap.\n\n\n## Relevant links\n\n- Epic: https://gitlab.com/groups/gitlab-org/-/epics/5803\n- Designs: https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/V4.png, https://gitlab.com/gitlab-org/gitlab/-/issues/328680/designs/pending.png, https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/rt-group-owner-approved-awaiting-signup.png#note_594880937\n\n## Implementation plan\n\n- [x] Add new individual member approval API endpoint (REST API is currently used for member management, but should consider GraphQL too)\n- [x] Add audit log entry when approving individual or all members\n- [x] Add or modify existing billable member API endpoint to list pending members for a root group\n- [ ] ~~Prevent pending members from being returned in default Billable Members endpoint*~~ Extracted into https://gitlab.com/gitlab-org/gitlab/-/issues/345694\n\n\n\n_*This should probably be behind a feature flag to prevent confusion until the full feature is ready_\n\n\n### Additional notes\n\nOnly group owners should have access to these changes.\n\n~~For the last point in the plan (auto-approval), when a group owner disables the user cap setting, any pending members should be automatically approved so that they're no longer pending.~~ Auto-approval has been moved into https://gitlab.com/gitlab-org/gitlab/-/issues/334381\n\nFor listing pending members, please note that new users (e.g. invited via email to a group) should remain in the pending list once approved, until they have signed up, see: https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/rt-group-owner-approved-awaiting-signup.png#note_594880937","state":"closed","created_at":"2021-06-03T14:24:34.646Z","updated_at":"2021-12-20T22:34:00.003Z","closed_at":"2021-12-07T14:26:40.842Z","closed_by":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"labels":["Deliverable","[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","missed:14.3","missed:14.4","missed:14.5","quad-planning::complete-no-action","section::fulfillment","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"user_notes_count":41,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332596","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":3},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332596","notes":"https://gitlab.com/api/v4/projects/278964/issues/332596/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332596/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332596","relative":"#332596","full":"gitlab-org/gitlab#332596"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88164616,"iid":332595,"project_id":278964,"title":"[UserCap BE]: Banner Notifications","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/4315, we introduced a `User Cap` setting for self-managed admins to prevent accidental user overages, now we are doing the same for SaaS group owners.\n\nThis work will be broken down into the following backend steps:\n\n- [Add user cap setting](https://gitlab.com/gitlab-org/gitlab/-/issues/332590) \n- [Adding/inviting members](https://gitlab.com/gitlab-org/gitlab/-/issues/332592)\n- **Notifications** :point_left: we are here\n- [Member management](https://gitlab.com/gitlab-org/gitlab/-/issues/332596)\n- [Auto approval](https://gitlab.com/gitlab-org/gitlab/-/issues/334381)\n- [Approval Modal](https://gitlab.com/gitlab-org/gitlab/-/issues/334822)\n- [Group access modifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332598)\n- [Group sharing](https://gitlab.com/gitlab-org/gitlab/-/issues/332601)\n- [UserCap availability](https://gitlab.com/gitlab-org/gitlab/-/issues/342227)\n\nThis issue is to handle the UI banner notifications required for Group owners when a user cap has been reached.\n\nThese notifications should only be seen by the root Group owners.\n\n\n## Relevant links\n\n- Epic: https://gitlab.com/groups/gitlab-org/-/epics/5803\n- Designs: https://gitlab.com/gitlab-org/gitlab/-/issues/321934\n\n## Implementation plan\n\n- [x] Support the display of a FE banner when the User Cap is reached\n\n### Additional notes\n\nThere are performance considerations to take into account with the banner. Up until now it has been assumed that the User Cap being reached will be calculated by querying for billable members and comparing to the User Cap value, but we know this is an expensive query that we will wish to reduce the number of calls for.\n\nOne potential solution is to add a new soft-lock column for Groups that indicates that the User Cap has been reached, or (possibly more favourable) caching the same in Redis.","state":"closed","created_at":"2021-06-03T14:14:24.260Z","updated_at":"2021-11-15T11:38:56.127Z","closed_at":"2021-11-01T20:26:32.098Z","closed_by":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"labels":["[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","missed:14.3","missed:14.4","quad-planning::complete-no-action","section::fulfillment","workflow::production"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"user_notes_count":40,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332595","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332595","notes":"https://gitlab.com/api/v4/projects/278964/issues/332595/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332595/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332595","relative":"#332595","full":"gitlab-org/gitlab#332595"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88164053,"iid":332593,"project_id":278964,"title":"Add a confirmation modal for adding to merge train when last pipeline failed","description":"##  Problem\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/35917 we added a danger variant treatment to the `start merge train` / `Add to merge train` button when last pipeline has failed.\n\nFor any danger actions associated with merge, we present a confirmation modal to users, and similar experience should be provided here as well.\n\n##  Design proposal\n\n- Present users with a confirmation modal when they click on the `start merge train` / `Add to merge train` button\n\n![Start-merge-train-confirmation__1_](/uploads/fe7aa51b3f6b6242517cd6629c6f0e98/Start-merge-train-confirmation__1_.png)\n\n##  Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n### Unit Tests\nAs always, let's make sure we have good coverage for changes we're introducing/updating here.\n\n### Integration Tests\nLet's introduce an integration test that validates the following:\n* If there's no ongoing merge train,\n    1. the modal shows a button with the \"Start train\" label.\n    2. clicking on \"Start train\" will start a pipeline build for this MR.\n* If there's an ongoing merge train,\n    1. the modal shows a button with the \"Add to train\" label.\n    2. clicking on \"Add to train\" will start a pipeline build for this MR + all other MRs already in the train.\n\nThis will make sure that we're able to fetch the current status of the merge train (whether one is ongoing or not) in order to display the correct button label and also makes sure the button actually does start a build.\n\n### End-to-End Tests\nI don't see a need for us to introduce an E2E test for this as the call being made to start the merge train is the same call we're making to a happy path case when the pipeline is passing and a user wants to start or add to a merge train.","state":"closed","created_at":"2021-06-03T14:05:27.054Z","updated_at":"2021-09-07T11:27:00.088Z","closed_at":"2021-09-02T15:14:45.583Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","Technical Writing","UI text","UX","Verify candidate","Verify::P1","devops::verify","frontend","group::pipeline execution","onboarding","quad-planning::complete-action","section::ops","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":6115425,"username":"v_mishra","name":"Veethika M","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f09a3a0badac17a57e28b4e18a45c1c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/v_mishra"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332593","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332593","notes":"https://gitlab.com/api/v4/projects/278964/issues/332593/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332593/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332593","relative":"#332593","full":"gitlab-org/gitlab#332593"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88164034,"iid":332592,"project_id":278964,"title":"[UserCap BE]: Adding Members","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/4315, we introduced a `User Cap` setting for self-managed admins to prevent accidental user overages, now we are doing the same for SaaS group owners.\n\nThis work will be broken down into the following backend steps:\n\n- [Add user cap setting](https://gitlab.com/gitlab-org/gitlab/-/issues/332590) \n- **Adding/inviting members** :point_left: we are here\n- [Notifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332595)\n- [Member management](https://gitlab.com/gitlab-org/gitlab/-/issues/332596)\n- [Auto approval](https://gitlab.com/gitlab-org/gitlab/-/issues/334381)\n- [Approval Modal](https://gitlab.com/gitlab-org/gitlab/-/issues/334822)\n- [Group access modifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332598)\n- [Group sharing](https://gitlab.com/gitlab-org/gitlab/-/issues/332601)\n- [UserCap availability](https://gitlab.com/gitlab-org/gitlab/-/issues/342227)\n\nThis issue is to handle the changes to Members to support the use of a user cap at the Group level.\n\nWe'll need to support various states for new Members, so that they can be in a pending state when the user cap has been reached.\n\n\n## Relevant links\n\n- Epic: https://gitlab.com/groups/gitlab-org/-/epics/5803\n- Designs: https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/V4.png\n\n## Implementation plan\n\n- [x] Add a new column to `Members` for their state\n- [x] Add a state machine for Members ([User state machine](https://gitlab.com/gitlab-org/gitlab/blob/f5a5bcd254901f347b36d92bfd2a0a8be4f178ed/app/models/user.rb#L320) for inspiration)\n- [x] Apply correct state on Member creation depending on User Cap for root namespace when being added or invited\n- [x] Apply correct state on Member creation depending on User Cap for root namespace when requesting access \n\n### Additional notes\n\nRequesting access may not need to be handled separately, but is a use-case we need to be aware of","state":"closed","created_at":"2021-06-03T14:05:03.640Z","updated_at":"2021-11-15T11:38:56.092Z","closed_at":"2021-09-09T13:05:07.882Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","missed:14.1","quad-planning::complete-no-action","section::fulfillment","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":40,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332592","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":5,"blocking_issues_count":2,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332592","notes":"https://gitlab.com/api/v4/projects/278964/issues/332592/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332592/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332592","relative":"#332592","full":"gitlab-org/gitlab#332592"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88163644,"iid":332590,"project_id":278964,"title":"[UserCap BE]: Add User Cap setting","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/4315, we introduced a `User Cap` setting for self-managed admins to prevent accidental user overages, now we are doing the same for SaaS group owners.\n\nThis work will be broken down into the following backend steps:\n\n- **Add user cap setting** :point_left: we are here\n- [Adding/inviting members](https://gitlab.com/gitlab-org/gitlab/-/issues/332592)\n- [Notifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332595)\n- [Member management](https://gitlab.com/gitlab-org/gitlab/-/issues/332596)\n- [Auto approval](https://gitlab.com/gitlab-org/gitlab/-/issues/334381)\n- [Approval Modal](https://gitlab.com/gitlab-org/gitlab/-/issues/334822)\n- [Group access modifications](https://gitlab.com/gitlab-org/gitlab/-/issues/332598)\n- [Group sharing](https://gitlab.com/gitlab-org/gitlab/-/issues/332601)\n- [UserCap availability](https://gitlab.com/gitlab-org/gitlab/-/issues/342227)\n\nThis issue is to handle adding the ability to assign a user cap value to a group. This will be managed within a Group's settings.\n\n## Relevant links\n\n- Epic: https://gitlab.com/groups/gitlab-org/-/epics/5803\n- Designs: https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/V4.png\n\n## Implementation plan\n\n- [x] Add a new column to store user cap number to the `Namespaces` table\n- [ ] ~~Add `ApplicationSetting` support for new setting~~\n- [x] Add ability to update the user cap setting for a root level group\n- [x] Calculate and expose user cap status (cap reached etc) for front-end use (see: https://gitlab.com/gitlab-org/gitlab/-/issues/330028)\n- [x] Introduce a feature flag for controlling access to User Cap functionality, e.g. exposing the status in the point above\n\nEdit: I've removed the second point above because I'm not sure it's actually needed - this is a group/namespace level setting, not an instance-wide one","state":"closed","created_at":"2021-06-03T13:58:20.800Z","updated_at":"2021-12-09T11:30:44.593Z","closed_at":"2021-07-21T15:03:01.482Z","closed_by":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"labels":["[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","missed:14.1","quad-planning::complete-no-action","section::fulfillment","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":4192493,"username":"ebaque","name":"Etienne Baqu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4192493/avatar.png","web_url":"https://gitlab.com/ebaque"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332590","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332590","notes":"https://gitlab.com/api/v4/projects/278964/issues/332590/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332590/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332590","relative":"#332590","full":"gitlab-org/gitlab#332590"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88163254,"iid":332587,"project_id":278964,"title":"Constrain Scope of External Status Checks to Protected Branches","description":"### Proposal \n\nCurrently, regardless of the addition of protected branches to an External Status Check, the checks apply to _all_ merge requests within a project.\n\nThis needs to be constrained to only apply to those checks which are applicable to each MR based on the protected branches list.\n\n### Implementation Plan\n\n* Ensure webhooks are not fired if target branch doesn't match a protected branch, if any are set.\n* Ensure /project/:project_id/status_checks only returns appropriate status checks.","state":"closed","created_at":"2021-06-03T13:50:39.317Z","updated_at":"2021-06-22T12:18:47.280Z","closed_at":"2021-06-22T08:31:26.381Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["backend","devops::manage","feature::addition","group::compliance","priority::1","section::dev","severity::1","type::feature","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332587","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332587","notes":"https://gitlab.com/api/v4/projects/278964/issues/332587/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332587/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332587","relative":"#332587","full":"gitlab-org/gitlab#332587"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5968,"epic":{"id":268001,"iid":5968,"title":"[Backend] External Status Checks","url":"/groups/gitlab-org/-/epics/5968","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88152277,"iid":332565,"project_id":278964,"title":"Rename GitlabUsagePingWorker to GitlabServicePingWorker and refactor/fix specs","description":"Files to be refactored:\n\n1. `app/workers/gitlab_usage_ping_worker.rb`\n2. `config/initializers/1_settings.rb`\n3. `spec/workers/every_sidekiq_worker_spec.rb`\n4. `spec/workers/gitlab_usage_ping_worker_spec.rb`","state":"closed","created_at":"2021-06-03T10:11:07.078Z","updated_at":"2021-07-19T11:34:18.143Z","closed_at":"2021-07-15T17:30:18.945Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["backend","devops::growth","group::product intelligence","section::growth","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332565","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332565","notes":"https://gitlab.com/api/v4/projects/278964/issues/332565/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332565/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332565","relative":"#332565","full":"gitlab-org/gitlab#332565"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6106,"epic":{"id":281992,"iid":6106,"title":"Rename UsagePing to ServicePing (Backend)","url":"/groups/gitlab-org/-/epics/6106","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88152246,"iid":332564,"project_id":278964,"title":"Rename SubmitUsagePingService to SubmitServicePingService and refactor specs","description":"Files to be refactored:\n\n1. `app/services/submit_usage_ping_service.rb`\n2. `app/workers/gitlab_usage_ping_worker.rb`\n3. `spec/services/submit_usage_ping_service_spec.rb`\n4. `spec/workers/gitlab_usage_ping_worker_spec.rb`","state":"closed","created_at":"2021-06-03T10:10:43.445Z","updated_at":"2021-07-08T06:53:12.735Z","closed_at":"2021-07-01T07:02:59.501Z","closed_by":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"labels":["Community contribution","backend","devops::growth","group::product intelligence","section::growth","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":6265352,"username":"edith007","name":"Siddharth Asthana","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6265352/avatar.png","web_url":"https://gitlab.com/edith007"},{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":6265352,"username":"edith007","name":"Siddharth Asthana","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6265352/avatar.png","web_url":"https://gitlab.com/edith007"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332564","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332564","notes":"https://gitlab.com/api/v4/projects/278964/issues/332564/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332564/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332564","relative":"#332564","full":"gitlab-org/gitlab#332564"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6106,"epic":{"id":281992,"iid":6106,"title":"Rename UsagePing to ServicePing (Backend)","url":"/groups/gitlab-org/-/epics/6106","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88152197,"iid":332563,"project_id":278964,"title":"Rename UsagePingController to ServicePingController and refactor/fix specs","description":"Files to be refactored:\n\n1. `app/controllers/projects/usage_ping_controller.rb`\n2. `spec/controllers/projects/usage_ping_controller_spec.rb`\n3. `spec/routing/project_routing_spec.rb`","state":"closed","created_at":"2021-06-03T10:10:15.352Z","updated_at":"2021-07-19T11:34:17.957Z","closed_at":"2021-06-28T20:46:06.313Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["backend","devops::growth","group::product intelligence","section::growth","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332563","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332563","notes":"https://gitlab.com/api/v4/projects/278964/issues/332563/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332563/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332563","relative":"#332563","full":"gitlab-org/gitlab#332563"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6106,"epic":{"id":281992,"iid":6106,"title":"Rename UsagePing to ServicePing (Backend)","url":"/groups/gitlab-org/-/epics/6106","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88145312,"iid":332554,"project_id":278964,"title":"Add estimate_batch_distinct_count operation to database metric instrumentation","description":"This issue is for adding [`estimate_batch_distinct_count`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/utils/usage_data.rb#L67) to [database metric](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage/metrics/instrumentations/database_metric.rb)\n\nIn order to support metrics using `estimate_batch_distinct_count` for example `user_container_scanning_jobs`","state":"closed","created_at":"2021-06-03T08:32:24.509Z","updated_at":"2021-08-17T21:21:50.646Z","closed_at":"2021-08-17T21:21:50.617Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["Unplanned","backend","devops::growth","group::product intelligence","section::growth","workflow::verification"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332554","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332554","notes":"https://gitlab.com/api/v4/projects/278964/issues/332554/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332554/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332554","relative":"#332554","full":"gitlab-org/gitlab#332554"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6118,"epic":{"id":283588,"iid":6118,"title":"Add additional support to instrumentation classes","url":"/groups/gitlab-org/-/epics/6118","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":88143414,"iid":332553,"project_id":278964,"title":"Allow only implemented operation for DatabaseMetrics in instrumentation classes","description":"Add a check for database instrumented classes so we can use only implemented operations.\n\nRaise error if an incorrect operation is used.\n\nAllowed operations are `count`, `distinct_count`(We might add more meanwhile.)\n\n```ruby\n# correct\nmodule Gitlab\n  module Usage\n    module Metrics\n      module Instrumentations\n        class CountBoardsMetric \u003c DatabaseMetric\n          operation :count\n\n          relation { Board }\n        end\n      end\n    end\n  end\nend\n```\n\n```ruby\n# incorrect\nmodule Gitlab\n  module Usage\n    module Metrics\n      module Instrumentations\n        class CountBoardsMetric \u003c DatabaseMetric\n          operation :other_operation\n\n          relation { Board }\n        end\n      end\n    end\n  end\nend\n```\n\nThis would help us validate the operations we use in database metrics and avoid unexpected usage of operations","state":"closed","created_at":"2021-06-03T08:05:10.259Z","updated_at":"2022-05-04T07:34:23.251Z","closed_at":"2022-05-04T07:34:23.181Z","closed_by":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["Category:Service Ping","backend","devops::growth","group::product intelligence","priority::3","section::growth","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332553","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332553","notes":"https://gitlab.com/api/v4/projects/278964/issues/332553/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332553/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332553","relative":"#332553","full":"gitlab-org/gitlab#332553"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6118,"epic":{"id":283588,"iid":6118,"title":"Add additional support to instrumentation classes","url":"/groups/gitlab-org/-/epics/6118","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":88143158,"iid":332552,"project_id":278964,"title":"Add sum operation to DatabaseMetric","description":"Currently, we have available `count` and `distinct_count`. This issue is for adding [`sum` operation](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/utils/usage_data.rb#L90).\n\nCurrent implementation \n```ruby\n#lib/gitlab/utils/usage_data.rb\n\ndef sum(relation, column, batch_size: nil, start: nil, finish: nil)\n  Gitlab::Database::BatchCount.batch_sum(relation, column, batch_size: batch_size, start: start, finish: finish)\nrescue ActiveRecord::StatementInvalid\n  FALLBACK\nend\n```\n\nRequirements:\n\n- Given an ActiveRecord relation we should be able to sum a given column.\n- For a DatabaseMetric we should have an available `sum` operation.\n- Add instrumentation classes for the related metrics, which are using `sum`\n\nExample of usage\n\n```ruby\n# frozen_string_literal: true\n\nmodule Gitlab\n  module Usage\n    module Metrics\n      module Instrumentations\n        class SumJiraImportStateMetric \u003c DatabaseMetric\n          operation :sum\n          column: :imported_issues_count\n \n          relation { jiraImportState.finished }\n        end\n      end\n    end\n  end\nend\n```","state":"closed","created_at":"2021-06-03T07:58:40.192Z","updated_at":"2022-05-26T15:14:15.011Z","closed_at":"2022-05-26T04:43:31.233Z","closed_by":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"labels":["Category:Service Ping","backend","devops::growth","group::product intelligence","priority::3","section::growth","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332552","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332552","notes":"https://gitlab.com/api/v4/projects/278964/issues/332552/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332552/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332552","relative":"#332552","full":"gitlab-org/gitlab#332552"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6118,"epic":{"id":283588,"iid":6118,"title":"Add additional support to instrumentation classes","url":"/groups/gitlab-org/-/epics/6118","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":88139962,"iid":332551,"project_id":278964,"title":"ActiveRecord::SubclassNotFound: The single-table inheritance mechanism failed to locate the subclass: 'BuildsEmailService'. This ...","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/2666446/?referrer=gitlab_plugin\n\n```\nNameError: uninitialized constant BuildsEmailService\nDid you mean?  BuildSerializer\n  activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:282:in `const_get'\n  activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:282:in `block in constantize'\n  activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `each'\n  activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `inject'\n  activesupport (6.0.3.7) lib/active_support/inflector/methods.rb:280:in `constantize'\n...\n(115 additional frame(s) were not displayed)\n\nActiveRecord::SubclassNotFound: The single-table inheritance mechanism failed to locate the subclass: 'BuildsEmailService'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Integration.inheritance_column to use another column for that information.\n  activerecord (6.0.3.7) lib/active_record/inheritance.rb:234:in `rescue in find_sti_class'\n  activerecord (6.0.3.7) lib/active_record/inheritance.rb:227:in `find_sti_class'\n  activerecord (6.0.3.7) lib/active_record/inheritance.rb:215:in `discriminate_class_for_record'\n  activerecord (6.0.3.7) lib/active_record/persistence.rb:257:in `instantiate'\n  activerecord (6.0.3.7) lib/active_record/querying.rb:58:in `block (2 levels) in find_by_sql'\n...\n(109 additional frame(s) were not displayed)\n\nThe single-table inheritance mechanism failed to locate the subclass: 'BuildsEmailService'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Integration.inheritance_column to use another column for that information.\n```\n\n### Workaround\n\nThe workaround is to manually delete the `BuildsEmailService` records - see https://gitlab.com/gitlab-org/gitlab/-/issues/331064#note_592138966\n\n### Solution\n\nWe'll remove the records with a migration https://gitlab.com/gitlab-org/gitlab/-/issues/331064.","state":"closed","created_at":"2021-06-03T07:02:16.728Z","updated_at":"2022-11-22T19:40:44.496Z","closed_at":"2021-06-11T04:11:06.824Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["automation:ml","automation:ml wrong","backend","devops::manage","group::ecosystem [DEPRECATED]","section::dev","severity::3","type::bug","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332551","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332551","notes":"https://gitlab.com/api/v4/projects/278964/issues/332551/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332551/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332551","relative":"#332551","full":"gitlab-org/gitlab#332551"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":88139651,"iid":332549,"project_id":278964,"title":"Lock group MR approval settings when instance settings are enforced","description":"## Why are we doing this work\n\nAt the moment, instance-level MR approval settings do not have any effect on the group-level counterparts. Once the backend API is [implemented](gitlab-org/gitlab#325279), the UI should reflect this enforcement in the settings.\n\n## Relevant links\n\n- Backend issue (gitlab-org/gitlab#325279)\n\n## Non-functional requirements\n\n- [ ] Documentation: Update the [doc](https://docs.gitlab.com/ee/user/project/merge_requests/approvals/settings.html), including screenshots if possible\n- [ ] Feature flag: Ensure this feature is behind `group_merge_request_approval_settings_feature_flag`\n- [ ] Performance:\n- [ ] Testing: Add feature/UI tests\n\n## Implementation plan\n\n~frontend weight :one: \n\n1. Consume the locked status from the state and set it on the `ApprovalSettingsCheckbox` https://gitlab.com/gitlab-org/gitlab/-/issues/335962.\n1. Update specs","state":"closed","created_at":"2021-06-03T06:54:19.382Z","updated_at":"2021-09-08T12:45:58.441Z","closed_at":"2021-09-08T12:45:58.419Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["Enterprise Edition","Next Up","automation:ml","devops::manage","documentation","frontend","group::compliance","priority::2","section::dev","tw-weight::3","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332549","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332549","notes":"https://gitlab.com/api/v4/projects/278964/issues/332549/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332549/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332549","relative":"#332549","full":"gitlab-org/gitlab#332549"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5957,"epic":{"id":266916,"iid":5957,"title":"Group-level settings for merge request approval SETTINGS in child projects","url":"/groups/gitlab-org/-/epics/5957","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88139641,"iid":332548,"project_id":278964,"title":"Lock project MR approval settings when group settings are enforced","description":"## Why are we doing this work\n\nAt the moment, group-level MR approval settings do not have any effect on the project-level counterparts. Once the backend API is [implemented](gitlab-org/gitlab#325620), the UI should reflect this enforcement in the settings.\n\n## Relevant links\n\n- Backend issue (gitlab-org/gitlab#325620)\n\n## Non-functional requirements\n\n- [ ] Documentation: Update the [doc](https://docs.gitlab.com/ee/user/project/merge_requests/approvals/settings.html), including screenshots if possible\n- [ ] Feature flag: Ensure this feature is behind `group_merge_request_approval_settings_feature_flag`\n- [ ] Performance:\n- [ ] Testing: Add feature/UI tests\n\n## Implementation plan\n\n~frontend weight :three: \n\n1. Update the approval mappers to always output object based settings\n1. Update `ApprovalSettings` to consume object format settings\n1. Update `ApprovalSettingsCheckbox` to display locked and locked text depending on where the rule was enforced\n1. Update the project settings to use the new endpoint when the ~\"feature flag\" is enabled\n1. Update specs","state":"closed","created_at":"2021-06-03T06:54:04.077Z","updated_at":"2021-09-27T08:26:49.470Z","closed_at":"2021-09-27T08:26:49.453Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["Category:Compliance Management","Enterprise Edition","Next Up","Technical Writing","automation:ml","devops::manage","documentation","frontend","group::compliance","priority::1","section::dev","tw-weight::3","workflow::in review"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332548","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332548","notes":"https://gitlab.com/api/v4/projects/278964/issues/332548/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332548/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332548","relative":"#332548","full":"gitlab-org/gitlab#332548"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5957,"epic":{"id":266916,"iid":5957,"title":"Group-level settings for merge request approval SETTINGS in child projects","url":"/groups/gitlab-org/-/epics/5957","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":88132545,"iid":332535,"project_id":278964,"title":"Linear traversal for multiple groups","description":"Provide the ability to perform traversal queries straight off an `ActiveRecord::Relation` object. Start with `self_and_descendants`.\n\nCurrently, we can query a single `Group` which will flip between a linear or recursive algorithm depending on the `use_traversal_ids` feature flag:\n\n```ruby\ngroup.self_and_descendants\n```\n\nOr, we can query an `ActiveRecord::Relation` object recursively:\n\n```ruby\nGitlab::ObjectHierarchy.new(owned_groups).base_and_descendants\n```\n\nThis format is a bit cumbersome and not possible for linear queries.\n\nWe need to be able to query:\n\n```ruby\nsome_groups.self_and_descendants\n```\n\nWhich will flip between linear or recursive based on the `use_traversal_ids` feature flag.","state":"closed","created_at":"2021-06-03T02:51:51.312Z","updated_at":"2021-08-18T01:28:58.535Z","closed_at":"2021-08-18T01:28:58.529Z","closed_by":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"labels":["Category:Authentication and Authorization","[deprecated] Accepting merge requests","automation:ml","automation:ml wrong","bug::performance","devops::manage","group::authentication and authorization","section::dev","workflow::in review"],"milestone":null,"assignees":[],"author":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332535","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332535","notes":"https://gitlab.com/api/v4/projects/278964/issues/332535/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332535/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332535","relative":"#332535","full":"gitlab-org/gitlab#332535"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4115,"epic":{"id":90156,"iid":4115,"title":"Faster namespace queries","url":"/groups/gitlab-org/-/epics/4115","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88112538,"iid":332488,"project_id":278964,"title":"Prevent runner from reading scanner response in API Fuzzing and API DAST","description":"# Problem\n\nIn pipeline [jobs-1309455853](https://gitlab.com/gitlab-org/security-products/demos/api-dast/soap-example/-/jobs/1309455853), used by the SOAP sample for API DAST. This pipeline failed in the `runner` application. \nThe `runner` receives a header `Content-Type` set to `utf-8'` (when normally is `utf-8`). This encoding is invalid, and the call to `HttpResponseMessage.Content.ReadAsStringAsync` throws an `ArgumentException` when trying to read the string/text.\n\n# Proposal \nThe `runner` does not need to consume the response's content, hence this bug can be prevented by not retrieving the body of the response. Additionally, the `runner` application was logging (in debug mode) the body of the response. This can also be removed to reduce log size.\n\n1. [x] Prevent runner from retrieving response's content.\n1. [x] Remove response's content log entry","state":"closed","created_at":"2021-06-02T15:27:50.221Z","updated_at":"2021-06-03T18:40:29.991Z","closed_at":"2021-06-03T18:40:29.951Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","section::sec","type::bug"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332488","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332488","notes":"https://gitlab.com/api/v4/projects/278964/issues/332488/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332488/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332488","relative":"#332488","full":"gitlab-org/gitlab#332488"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88112211,"iid":332487,"project_id":278964,"title":"Add Redis Metric instrumentation class","description":"We currently have \n\n- [`DatabaseMetric`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage/metrics/instrumentations/database_metric.rb)\n- [`RedisHLLMetric`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage/metrics/instrumentations/redis_hll_metric.rb)\n- [`GenericMetric`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage/metrics/instrumentations/generic_metric.rb)\n\nWe should add  support for RedisMetrics in instrumentation classes\n\n### Overview\n\n```mermaid\nclassDiagram\n    BaseMetric --|\u003e DatabaseMetric\n    BaseMetric --|\u003e RedisMetric\n    BaseMetric --|\u003e RedisHLLMetric\n    BaseMetric --|\u003e GenericMetric \n```\n\n### This will likely require code changes similar to the following:\n\n- Might be similar to RedisHLLMetric\n- Add a new type of metric instrumentation class specific to regular Redis counters under [metrics](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage/metrics/instrumentations/)\n  - class should accept `options` we should be able to send event names that are set in metrics definitions\n  - class should have a `suggested_name`\n- Examples of Redis counter are https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data_counters.rb\n- Add instrumentation class for one of the Redis metrics. Update metric definition YAML file, for example [`counts.source_code_pushes`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/config/metrics/counts_all/20210216182006_source_code_pushes.yml)\n- Update custom rails generator `lib/generators/gitlab/usage_metric/usage_metric_generator.rb`\n- Update cop https://gitlab.com/gitlab-org/gitlab/-/blob/master/rubocop/rubocop-usage-data.yml#L122\n- Add tests for the new metric type class\n- Add test for instrumented class \n- Update tests for usage_data_metrics\n- Update Metrics instrumentation [docs](https://docs.gitlab.com/ee/development/usage_ping/metrics_instrumentation.html) \n\nNote: This is a proposal might be other ways to implement this metric class.\n\n```ruby\nclass RedisMetric \u003c BaseMetric\n  def initialize(time_frame:, options: {})\n     super\n     raise ArgumentError, \"options events are required\" unless metric_events.present?\n   end\n\n   def metric_events\n     options[:events]\n   end\n\n   def suggested_name\n     # ...\n   end\n\n   def value\n    redis_usage_data { Gitlab::UsageDataCounters::SourceCodeCounter.read(metric_events) }\n   end \nend\n```\n\n[`counts.source_code_pushes`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/config/metrics/counts_all/20210216182006_source_code_pushes.yml)\n\n```yaml\noptions:\n  events: [pushes]\ninstrumentation_class: RedisMetric\n```","state":"closed","created_at":"2021-06-02T15:21:32.523Z","updated_at":"2022-03-16T11:42:21.540Z","closed_at":"2021-07-30T16:02:30.837Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["backend","devops::growth","group::product intelligence","maintenance::workflow","section::growth","spike","type::maintenance","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332487","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332487","notes":"https://gitlab.com/api/v4/projects/278964/issues/332487/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332487/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332487","relative":"#332487","full":"gitlab-org/gitlab#332487"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6118,"epic":{"id":283588,"iid":6118,"title":"Add additional support to instrumentation classes","url":"/groups/gitlab-org/-/epics/6118","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":88110310,"iid":332482,"project_id":278964,"title":"Auto stop doesn't work after redeploying an environment","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen using `auto_stop_in`, the environment gets stopped as expected, however if the deploy job starts again and the environments starts a second time (or more), the auto_stop_in job will not run again, and the environment will not be actually stopped.\n\nAlso, confusingly, the environments get updated as stopped in the GitLab UI, but they are **not**, because the stop job did not run.\n\n### Steps to reproduce\n\n1. Use a `.gitlab-ci.yml` with a start and stop job, [example here](https://gitlab.com/cat/repro-auto-stop/-/blob/main/.gitlab-ci.yml)\n1. Deploy the environment, wait for it to get auto stopped\n1. Deploy the environment again, and notice after \"auto_stop_in\" time passes (minimum hourly because it's in a Sidekiq cron job, see #240886) the environment shows as stopped, but the stop job never ran again.\n\n### Example Project\n\nhttps://gitlab.com/cat/repro-auto-stop/-/pipelines/313613453\n\nYou can see both jobs ran, but if you look at https://gitlab.com/cat/repro-auto-stop/-/jobs, the stop job only ran `once`, for the first auto-stop, and the environments shows as stopped [on the Environments page](https://gitlab.com/cat/repro-auto-stop/-/environments).\n\n### What is the current *bug* behavior?\n\nEnvironments don't get properly stopped when using auto_stop_in, if they get redeployed\n\n### What is the expected *correct* behavior?\n\n`auto_stop_in` should be respected and environments get properly auto stopped.\n\n### Possible fixes\n\nThe problem is really that `Ci::StopEnvironmentsService#execute_in_batch` attempts to preload the stop_actions for every environment. There is a [condition in the CTE](https://gitlab.com/gitlab-org/gitlab/blob/bf490f3d50512d2e6e741535736c2a2d5ed40605/app/models/environment.rb#L191) that only retrieves jobs with the status as `BLOCKED_STATUS` (manual, scheduled). However, we [update all the environments](https://gitlab.com/gitlab-org/gitlab/blob/bf490f3d50512d2e6e741535736c2a2d5ed40605/app/services/ci/stop_environments_service.rb#L26) to `state: stopped` either way, but the stop_actions aren't actually fetched and ran.\n\nManually finding the stop_action job and running it works, so it doesn't seem like a limitation when the job has the status `success`, through something like: `Environment.find(id).stop_with_action!(User.find_by_username(\"root\"))`\n\nCurrently, the only workaround seems to be manually _finding_ (since the environment is now stopped, so this is no easy way by itself) \u0026 running the stop job again.","state":"closed","created_at":"2021-06-02T14:48:35.936Z","updated_at":"2021-09-08T15:38:56.487Z","closed_at":"2021-09-08T15:38:56.453Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Release Orchestration","approaching-SLO","backend-weight::1","customer","devops::release","frontend-weight::1","group::release","missed-SLO","priority::2","section::ops","severity::2","type::bug","workflow::ready for development"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":4375373,"username":"cat","name":"Catalin Irimie","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fd4f68fe3a123d56ac4413dc960b7559?s=80\u0026d=identicon","web_url":"https://gitlab.com/cat"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":12,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332482","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332482","notes":"https://gitlab.com/api/v4/projects/278964/issues/332482/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332482/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332482","relative":"#332482","full":"gitlab-org/gitlab#332482"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88108958,"iid":332480,"project_id":278964,"title":"Follow up: Convert Content Editor high level architecture diagram to PlantUML","description":"I provides the following advantages:\n\n* saves us an image\n* improves accessibility (we've got information that's available only in an image, and nowhere else)\n* keeps our visual style consistent (this image doesn't match our look / feel)\n\n/cc @aqualls","state":"closed","created_at":"2021-06-02T14:28:54.078Z","updated_at":"2021-09-18T07:01:06.394Z","closed_at":"2021-09-09T18:23:34.997Z","closed_by":{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"labels":["Deliverable","Technical Writing","development guidelines","devops::create","docs::improvement","documentation","frontend","group::editor","missed:14.1","quad-planning::complete-no-action","section::dev","tw-weight::1","workflow::ready for development"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"}],"author":{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"type":"ISSUE","assignee":{"id":3540517,"username":"ealcantara","name":"Enrique Alcntara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332480","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332480","notes":"https://gitlab.com/api/v4/projects/278964/issues/332480/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332480/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332480","relative":"#332480","full":"gitlab-org/gitlab#332480"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88103051,"iid":332473,"project_id":278964,"title":"Allow storing method of detection in Vulnerabilities","description":"### Why are we doing this work?\n\nWhen working on https://gitlab.com/gitlab-org/gitlab/-/issues/10272 it came to our attention that there's no way for us to store detection method used to discover a vulnerability. While we have a `report_type` column it doesn't (and shouldn't) imply any detection method. As such we need a capability to store the detection method used to discover a vulnerability.\n\n### Implementation plan\n\n* ~database create a database migration to add `detection_method: text` to `vulnerability_findings` table\n* ~backend add `DETECTION_METHODS` enum to `Enums::Vulnerability`\n* ~backend add `enum detection_method` to `Vulnerabilities::Finding`\n\n**Proposed enum values:**\n* GitLab security report (default)\n* External security report (default for API vuln creation)\n* Bug bounty\n* Code review\n* Security audit\n\n/cc @thiagocsf @matt_wilson","state":"closed","created_at":"2021-06-02T12:57:01.887Z","updated_at":"2022-09-12T19:38:57.048Z","closed_at":"2021-06-21T00:39:41.807Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Vulnerability Management","Deliverable","Enterprise Edition","GitLab Ultimate","GraphQL","Persona: Security Analyst","api","backend","customer","database","devops::secure","documentation","feature::addition","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":487608,"username":"Quintasan","name":"Micha Zajc","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"}],"author":{"id":487608,"username":"Quintasan","name":"Micha Zajc","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"type":"ISSUE","assignee":{"id":487608,"username":"Quintasan","name":"Micha Zajc","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332473","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332473","notes":"https://gitlab.com/api/v4/projects/278964/issues/332473/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332473/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332473","relative":"#332473","full":"gitlab-org/gitlab#332473"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5277,"epic":{"id":188956,"iid":5277,"title":"Manually create a Vulnerability record","url":"/groups/gitlab-org/-/epics/5277","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88096591,"iid":332467,"project_id":278964,"title":"Add support for having keyword for Service Ping metric name suggestion","description":"## Problem \n\nName suggestions for Service Ping Metrics do not process `having` SQL keyword when building suggestions, this leads to name collisions for metrics with different constraints passed with `having` keyword.  \n\n### Example problem case\n\n```pry\n# more approvers \n\nGitlab::Usage::Metrics::NamesSuggestions::Generator.generate('usage_activity_by_stage_monthly.create.approval_project_rules_with_more_approvers_than_required')\n=\u003e \"count_\u003cadjective describing: '(approval_project_rules.rule_type = 0)'\u003e_approval_project_rules_\u003cwith\u003e_approval_project_rules_users\"\n\n\n # less approvers\n\nGitlab::Usage::Metrics::NamesSuggestions::Generator.generate('usage_activity_by_stage_monthly.create.approval_project_rules_with_less_approvers_than_required')\n=\u003e \"count_\u003cadjective describing: '(approval_project_rules.rule_type = 0)'\u003e_approval_project_rules_\u003cwith\u003e_approval_project_rules_users\"\n\n```\n\n## Solution\n\nEnhance name suggestion to parse and account for `having` keyword\n\n## Testing\n\nUpdate related tests and make sure QA pipelines are passing","state":"closed","created_at":"2021-06-02T11:24:14.748Z","updated_at":"2022-11-09T17:09:08.936Z","closed_at":"2022-11-09T17:09:08.894Z","closed_by":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["Category:Service Ping","backend","devops::analytics","feature::enhancement","group::product intelligence","quad-planning::complete-action","section::analytics","type::feature","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikoaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Micha Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332467","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332467","notes":"https://gitlab.com/api/v4/projects/278964/issues/332467/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332467/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332467","relative":"#332467","full":"gitlab-org/gitlab#332467"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6086,"epic":{"id":278754,"iid":6086,"title":"Usage Metrics Hygiene Policy","url":"/groups/gitlab-org/-/epics/6086","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88096158,"iid":332466,"project_id":278964,"title":"Remove totals metrics definitions for ci templates","description":"These metrics are not used, the totals are added automatically. We decided to mark them `broken` and remove them with this issue.\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/62199#note_586931701\n\nRemove metrics definitions: \n\n- `redis_hll_counters.ci_templates.ci_templates_total_unique_counts_weekly`\n- `redis_hll_counters.ci_templates.ci_templates_total_unique_counts_monthly`","state":"closed","created_at":"2021-06-02T11:19:23.430Z","updated_at":"2022-10-14T15:16:36.137Z","closed_at":"2021-09-22T01:17:40.242Z","closed_by":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"labels":["backend","devops::growth","group::product intelligence","missed:14.3","section::growth","workflow::in review"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332466","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332466","notes":"https://gitlab.com/api/v4/projects/278964/issues/332466/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332466/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332466","relative":"#332466","full":"gitlab-org/gitlab#332466"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88093224,"iid":332458,"project_id":278964,"title":"Break pipeline query into initial and polling queries","description":"Let's break up the query for the pipelines page (`app/graphql/queries/pipelines/get_pipeline_details.query.graphql`) into one for the information that may update on polling and an initial one that contains all data.\n\nAs noted in https://gitlab.com/gitlab-org/gitlab/-/issues/329895, we are running into a bug on self-hosted instances where the length of the query for the pipelines is causing issues with other infrastructures. This seems to be due to the characters added when the pretty-printed query is URIEncoded. \n\n[Research indicates](https://spectrum.chat/apollo/apollo-link/apollo-client-queries-strip-whitespace\\~46a1d036-82ab-4b00-881a-37f7a1936a6f) that this is happening at the library level and addressing it at the root would therefore require an upstream change. This would not be terribly fast, so let's make the query smaller to begin with.\n\nIf we separate the queries, then we can query all fields on initial load but put that back in a POST, which moves the query to the body of the request. Then the polling query can be shorter and while there will still be the \"pretty printing\" entities in the URL, it should keep it under the limit. (NOTE: Confirming this will be the first step here.)\n\nThe longer-term solution would be to move to using subscriptions/websockets, but this would make the new graph usable on all instances while we work that out.\n\n---\n It may make sense to try to submit this anyways, since other people may run into it, but it's a bonus I think.","state":"closed","created_at":"2021-06-02T10:16:41.130Z","updated_at":"2021-10-12T18:01:41.543Z","closed_at":"2021-07-15T09:14:58.531Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["Category:Pipeline Authoring","Deliverable","backend","backend-weight::2","devops::verify","frontend","frontend-weight::3","group::pipeline authoring","section::ops","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":109884,"username":"sarahghp","name":"Sarah Groff Hennigh-Palermo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b3a4be73ec22c01a87b77ddc2bb6f7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahghp"},{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"}],"author":{"id":109884,"username":"sarahghp","name":"Sarah Groff Hennigh-Palermo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b3a4be73ec22c01a87b77ddc2bb6f7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahghp"},"type":"ISSUE","assignee":{"id":109884,"username":"sarahghp","name":"Sarah Groff Hennigh-Palermo","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b3a4be73ec22c01a87b77ddc2bb6f7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahghp"},"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332458","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332458","notes":"https://gitlab.com/api/v4/projects/278964/issues/332458/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332458/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332458","relative":"#332458","full":"gitlab-org/gitlab#332458"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":88092324,"iid":332453,"project_id":278964,"title":"Explicit PostgreSQL schemas","description":"We want the ability to namespace tables, using PostgreSQL schemas. This allow us the ability to \"hide\" tables that will be moved away to a separate logical database, using `schema_search_path`\n\n## Problem\n\nUp till now, we have no explicit schema, and have allowed users to implicitly choose which schema to install GitLab database tables\n\n## Solution\n\nBe explicit about which schemas GitLab will use. Create the following new schemas:\n\n1. Create new `gitlab_ci` schema\n1. Create new `gitlab_shared` schema\n1. Create new `gitlab_main` schema (nice to have?)\n\n## Next\n\n1. https://gitlab.com/gitlab-org/gitlab/-/issues/336040","state":"closed","created_at":"2021-06-02T10:02:26.675Z","updated_at":"2022-05-31T12:22:54.332Z","closed_at":"2021-08-02T10:17:45.980Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","devops::data_stores","group::pods","section::enablement","workflow::ready for development"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332453","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332453","notes":"https://gitlab.com/api/v4/projects/278964/issues/332453/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332453/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332453","relative":"#332453","full":"gitlab-org/gitlab#332453"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6451,"epic":{"id":314946,"iid":6451,"title":"Use database SCHEMAs to better isolated CI decomposed features","url":"/groups/gitlab-org/-/epics/6451","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e546\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":88092283,"iid":332452,"project_id":278964,"title":"Omnibus / CNG support","description":"Add ability to provision multiple databases with Omnibus and CNG/Charts","state":"closed","created_at":"2021-06-02T10:02:04.124Z","updated_at":"2022-05-31T12:22:55.064Z","closed_at":"2021-06-10T21:30:25.108Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","devops::data_stores","group::pods","section::enablement"],"milestone":null,"assignees":[],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332452","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332452","notes":"https://gitlab.com/api/v4/projects/278964/issues/332452/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332452/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/4492386/issues/851"},"references":{"short":"#332452","relative":"#332452","full":"gitlab-org/gitlab#332452"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6159,"epic":{"id":286520,"iid":6159,"title":"Decomposition: Fix Distribution features","url":"/groups/gitlab-org/-/epics/6159","group_id":9970,"human_readable_end_date":"Dec 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88092014,"iid":332451,"project_id":278964,"title":"Disable rails legacy_connection_handling","description":"Set `config.active_record.legacy_connection_handling` to false. We need this to be false so we can use specific  connection handler for both vertical, and horizontal sharding.\n\nOtherwise we get this error:\n\n```\n[1] pry(main)\u003e Ci::ApplicationRecord.connected_to(role: :reading) { Ci::Pipeline.first }\nNotImplementedError: `connected_to` can only be called on ActiveRecord::Base with legacy connection handling.\nfrom /Users/tkuah/.rbenv/versions/2.7.2/lib/ruby/gems/2.7.0/gems/activerecord-6.1.3.1/lib/active_record/connection_handling.rb:142:in `connected_to'\n```\n\n## Proposal\n\nFollow https://edgeguides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling, possibly need ENV VAR to migrate with production change management\n\n1. Add support to disable rails legacy_connection_handling :white_check_mark: \n1. Roll this out to production - https://gitlab.com/gitlab-com/gl-infra/production/-/issues/4885 :white_check_mark: \n1. If no adverse effects, remove ENABLE_RAILS_61_CONNECTION_HANDLING, and disable by default =\u003e https://gitlab.com/gitlab-org/gitlab/-/merge_requests/65107\n\n### Risk\n\n\u003e If you turn off legacy_connection_handling in your application, any method that's unsupported will raise an error (i.e. connection_handlers=).\n\n\nConfidence level 80%","state":"closed","created_at":"2021-06-02T09:57:38.203Z","updated_at":"2022-05-31T12:22:55.887Z","closed_at":"2021-06-30T23:55:51.276Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Pods","devops::data_stores","group::pods","section::enablement","workflow::staging"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-07-02","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332451","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332451","notes":"https://gitlab.com/api/v4/projects/278964/issues/332451/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332451/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332451","relative":"#332451","full":"gitlab-org/gitlab#332451"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6103,"epic":{"id":281355,"iid":6103,"title":"Decomposition: Support for many databases","url":"/groups/gitlab-org/-/epics/6103","group_id":9970,"human_readable_end_date":"Sep 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88081142,"iid":332440,"project_id":278964,"title":"Usage Ping Dictionary - metric updates","description":"Placeholder issue to link MRs and work-related with metrics definitions update\n\nWeight might change during a milestone considering the work added.\n\nGenerally, this would be a weight of 1. I'll add notes with the reason if this changes.\n\n### Related work\n\n- Update Usage Ping Metrics Definitions for ~\"group::configure\" e https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62199\n- Update Usage Ping Metrics Definitions for ~\"group::product intelligence\"  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63289","state":"closed","created_at":"2021-06-02T07:18:40.699Z","updated_at":"2021-06-18T01:06:30.407Z","closed_at":"2021-06-17T04:56:24.689Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["backend","devops::growth","group::product intelligence","section::growth","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332440","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332440","notes":"https://gitlab.com/api/v4/projects/278964/issues/332440/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332440/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332440","relative":"#332440","full":"gitlab-org/gitlab#332440"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5425,"epic":{"id":207156,"iid":5425,"title":"Usage Ping Dictionary","url":"/groups/gitlab-org/-/epics/5425","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88077230,"iid":332436,"project_id":278964,"title":"Follow-up from \"Tracking event value spec fixes\"","description":"The following discussion from !62805 should be addressed:\n\n- [ ] @justin_ho started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62805#note_589216768):  (+4 comments)\n\n    \u003e Question: Is there something that converts the float to a string? If not, why isn't this just `value: 0,`? Same applies to the expects below.\n\n\nIn the comment thread above in the MR !62805 we found that the integer from html `value` field is returned as a string in case of snowplow events. After discussion, we found that we would need to add a transformation layer for the events to solve that. \n\nChanges would involve adding the code to transform and add specs for the new code and fix existing specs to accommodate the new changes.","state":"closed","created_at":"2021-06-02T05:44:09.545Z","updated_at":"2021-12-07T15:04:36.015Z","closed_at":"2021-12-07T14:31:17.966Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel Garca","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["[deprecated] Accepting merge requests","automation:ml","devops::growth","group::product intelligence","section::growth"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":8198564,"username":"rkadam3","name":"Rajendra Kadam","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8198564/avatar.png","web_url":"https://gitlab.com/rkadam3"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332436","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332436","notes":"https://gitlab.com/api/v4/projects/278964/issues/332436/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332436/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332436","relative":"#332436","full":"gitlab-org/gitlab#332436"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88076897,"iid":332434,"project_id":278964,"title":"Refactor board scope label select using GraphQL/Apollo","description":"Currently `ee/app/assets/javascripts/boards/components/board_scope.vue` uses a label selector relying on jQuery being loaded from the board sidebar component. This component should align with other sidebar components to use the same stack and a GraphQL + Apollo widget should be used in board scope.","state":"closed","created_at":"2021-06-02T05:34:27.536Z","updated_at":"2021-11-30T19:46:05.625Z","closed_at":"2021-11-04T04:50:52.441Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["automation:ml","devops::plan","frontend","group::project management","section::dev","workflow::production"],"milestone":null,"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332434","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332434","notes":"https://gitlab.com/api/v4/projects/278964/issues/332434/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332434/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332434","relative":"#332434","full":"gitlab-org/gitlab#332434"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3900,"epic":{"id":80936,"iid":3900,"title":"Refactor Issue Boards to use GraphQL + VueX","url":"/groups/gitlab-org/-/epics/3900","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":38166,"iid":40,"sequence":1,"group_id":9970,"title":"Iteration 1: October 27, 2021 - November 09, 2021","description":"updated description","state":3,"created_at":"2021-10-22T17:12:40.529Z","updated_at":"2022-04-07T21:59:07.147Z","start_date":"2021-10-27","due_date":"2021-11-09","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/38166"},"health_status":null},{"id":88074825,"iid":332431,"project_id":278964,"title":"Extract the rest of mergeable_state checks into the new mergability framework","description":"We have extracted one of the checks of the mergeable_state checks into the new framework, we should move the rest into it.\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/300042#note_571737459\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-06-02T04:16:07.523Z","updated_at":"2022-08-10T16:17:26.687Z","closed_at":"2022-02-21T18:10:07.094Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["auto updated","automation:ml","automation:ml wrong","backend","devops::create","direction","group::code review","merge requests","section::dev"],"milestone":null,"assignees":[],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332431","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332431","notes":"https://gitlab.com/api/v4/projects/278964/issues/332431/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332431/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332431","relative":"#332431","full":"gitlab-org/gitlab#332431"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5598,"epic":{"id":226017,"iid":5598,"title":"  Better defined mergeability","url":"/groups/gitlab-org/-/epics/5598","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88074735,"iid":332430,"project_id":278964,"title":"Build basic mergeability framework","description":"Based on the exploration and design discussions in https://gitlab.com/gitlab-org/gitlab/-/issues/300042, build the basic framework that can report mergeability status such that it returns a default `false` response (assuming our failure mode is to block MRs, rather than allow them)\n\n### Open/Unscoped Questions\n+ Which API/endpoints does this status appear in?\n+ Should this be behind a feature flag, or can we build this as a parallel Source of Truth?\n+\n\n### To Do\n- [ ] sync with @pedroms on UX implications\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-06-02T04:11:06.273Z","updated_at":"2022-08-10T16:17:51.281Z","closed_at":"2021-10-20T13:06:47.837Z","closed_by":{"id":4058309,"username":"mnohr","name":"Matt Nohr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f2b70c7a75fd0a15ef789d4b1e620449?s=80\u0026d=identicon","web_url":"https://gitlab.com/mnohr"},"labels":["Deliverable","auto updated","backend","devops::create","direction","group::code review","merge requests","missed:14.3","section::dev","type::feature","workflow::verification"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332430","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332430","notes":"https://gitlab.com/api/v4/projects/278964/issues/332430/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332430/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332430","relative":"#332430","full":"gitlab-org/gitlab#332430"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5598,"epic":{"id":226017,"iid":5598,"title":"  Better defined mergeability","url":"/groups/gitlab-org/-/epics/5598","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88074510,"iid":332429,"project_id":278964,"title":"Add MergeRequests::CheckResult table/class","description":"Suggested by @fabiopitino in https://gitlab.com/gitlab-org/gitlab/-/issues/300042#note_548137305\n\n```\nmerge_requests_check_results(\n  merge_request_id bigint\n  run_at timestamp \n  check_name varchar\n  status enum[success, pending, failed]\n  details jsonb\n)\n```\n\nSince we \"know\" what checks will need to be :white_check_mark: before we create the `MergeRequest`, we can create a `MergeRequests::CheckResult` record for each applicable type of check, defaulting the status to `failed` (or `pending`? :thinking: )\n\n```ruby\nclass MergeRequest\n  has_many :check_results,\n    through: :merge_requests_check_results, \n    source: :merge_requests, \n    class_name: \"MergeRequests::CheckResult\"\nend\n\nclass MergeRequests::CheckResult \n  belongs_to :merge_request\nend\n```\n\n## Open Questions\n### Is this an STI situation? Should `check_name` be instead a `type` and then `MergeabilityCheck::SomeCheck.check_name`?\n\nNo, it probably isn't. We don't _yet_ need any additional functionality associated with the check, as it should primarily be a state object.\n\n+\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-06-02T04:01:45.408Z","updated_at":"2022-08-10T16:17:51.086Z","closed_at":"2022-01-12T18:47:29.161Z","closed_by":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"labels":["auto updated","automation:ml","automation:ml wrong","backend","devops::create","direction","group::code review","merge requests","missed:14.2","section::dev","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":null,"user_notes_count":44,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332429","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332429","notes":"https://gitlab.com/api/v4/projects/278964/issues/332429/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332429/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332429","relative":"#332429","full":"gitlab-org/gitlab#332429"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5598,"epic":{"id":226017,"iid":5598,"title":"  Better defined mergeability","url":"/groups/gitlab-org/-/epics/5598","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88065018,"iid":332408,"project_id":278964,"title":"Display icon for issues created by banned users on boards","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal \n\nFrontend polish for https://gitlab.com/gitlab-org/gitlab/-/issues/327355\n\nSimilarly to how confidential issues are clearly indicated by the `eye-slash` icon on the issue list, issue board, and the issue itself, hidden issues should be indicated by the `spam` icon on the issue board.\n\n![image](/uploads/c8c8eb962b009db4d0c0becc441b5e42/image.png)\n\nHidden issues are currently correctly indicated with the `spam` icon on the issue list, but not on the issue board.\n\n![Screen_Shot_2021-06-11_at_5.49.26_PM](/uploads/079182d2a207dd1d4c847a9cb64b44d0/Screen_Shot_2021-06-11_at_5.49.26_PM.png)\n\n![image](/uploads/99701c54b5f1b6f5dfbe30fd38ee42ac/image.png)\n\n\n### Implementation plan\n\n#### Issue board view\n\n1. Add `hidden` field to [GraphQL issue type](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/graphql/types/issue_type.rb#L54): \n   ```ruby\n    field :hidden, GraphQL::Types::Boolean, null: false, method: :hidden?,\n          description: 'Indicates the issue is hidden because the author has been banned.'\n   ```\n1. Expose `hidden` attribute in [app/assets/javascripts/boards/graphql/issue.fragment.graphql](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/boards/graphql/issue.fragment.graphql) and [ee/app/assets/javascripts/boards/graphql/issue.fragment.graphql](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/boards/graphql/issue.fragment.graphql)\n1. Add icon with tooltip to [app/assets/javascripts/boards/components/board_card_inner.vue#L201](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/boards/components/board_card_inner.vue#L201)\n1. Update [spec/frontend/boards/board_card_inner_spec.js](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/frontend/boards/board_card_inner_spec.js)","state":"closed","created_at":"2021-06-01T21:27:46.588Z","updated_at":"2021-10-04T21:32:42.045Z","closed_at":"2021-09-16T17:13:30.949Z","closed_by":{"id":9425173,"username":"hsutor","name":"Hannah Sutor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9425173/avatar.png","web_url":"https://gitlab.com/hsutor"},"labels":["Category:Authentication and Authorization","GitLab Core","GitLab Premium","GitLab Ultimate","devops::manage","feature::addition","frontend","group::authentication and authorization","section::dev","type::feature","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"}],"author":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"type":"ISSUE","assignee":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332408","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332408","notes":"https://gitlab.com/api/v4/projects/278964/issues/332408/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332408/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332408","relative":"#332408","full":"gitlab-org/gitlab#332408"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5741,"epic":{"id":247366,"iid":5741,"title":"Extend Blocking Functionality to Allow for Shadow-Banning","url":"/groups/gitlab-org/-/epics/5741","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88063480,"iid":332402,"project_id":278964,"title":"[Feature flag] Remove `:usage_data_i_testing_web_performance_widget_total`","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:usage_data_i_testing_web_performance_widget_total` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/blob/05662f26100c2a6e70f60bcf33caa7d8055752b6/config/feature_flags/development/usage_data_i_testing_web_performance_widget_total.yml) and should be removed.\n\nThis feature flag was created as part of usage ping, with guidance from ~\"product intelligence\". Now that usage ping is stable, we are safe to remove the feature flag. We should still ping a member of ~\"group::product intelligence\" on the MR for approval.\n\n## Owners\n\n- Group: ~\"group::testing\"\n- Slack channel: `#g_testing`\n- PM: @jheimbuck_gl \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:feature_name` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-06-01T20:36:54.995Z","updated_at":"2021-08-26T17:06:48.940Z","closed_at":"2021-08-26T17:06:46.504Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Performance Testing","devops::verify","feature flag","group::pipeline insights","maintenance::refactor","section::ops","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332402","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332402","notes":"https://gitlab.com/api/v4/projects/278964/issues/332402/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332402/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332402","relative":"#332402","full":"gitlab-org/gitlab#332402"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6101,"epic":{"id":281056,"iid":6101,"title":"[Feature Flags] - Verify:Testing remove old usage ping feature flags","url":"/groups/gitlab-org/-/epics/6101","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]