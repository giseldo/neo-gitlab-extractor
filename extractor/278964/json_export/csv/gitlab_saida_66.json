[{"id":88063458,"iid":332401,"project_id":278964,"title":"[Feature flag] Remove `usage_data_i_testing_test_case_parsed`","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:usage_data_i_testing_test_case_parsed` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/blob/05662f26100c2a6e70f60bcf33caa7d8055752b6/config/feature_flags/development/usage_data_i_testing_test_case_parsed.yml) and should be removed.\n\nThis feature flag was created as part of usage ping, with guidance from ~\"product intelligence\". Now that usage ping is stable, we are safe to remove the feature flag. We should still ping a member of ~\"group::product intelligence\" on the MR for approval.\n\n## Owners\n\n- Group: ~\"group::testing\"\n- Slack channel: `#g_testing`\n- PM: @jheimbuck_gl \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:feature_name` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-06-01T20:35:52.231Z","updated_at":"2021-09-30T14:12:59.628Z","closed_at":"2021-09-29T18:44:01.300Z","closed_by":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"labels":["Category:Code Testing and Coverage","devops::verify","feature flag","group::pipeline insights","maintenance::refactor","section::ops","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332401","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332401","notes":"https://gitlab.com/api/v4/projects/278964/issues/332401/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332401/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332401","relative":"#332401","full":"gitlab-org/gitlab#332401"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6101,"epic":{"id":281056,"iid":6101,"title":"[Feature Flags] - Verify:Testing remove old usage ping feature flags","url":"/groups/gitlab-org/-/epics/6101","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88063399,"iid":332400,"project_id":278964,"title":"[Feature flag] Remove `usage_data_i_testing_metrics_report_widget_total`","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:usage_data_i_testing_metrics_report_widget_total` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/blob/05662f26100c2a6e70f60bcf33caa7d8055752b6/config/feature_flags/development/usage_data_i_testing_metrics_report_widget_total.yml) and should be removed.\n\nThis feature flag was created as part of usage ping, with guidance from ~\"product intelligence\". Now that usage ping is stable, we are safe to remove the feature flag. We should still ping a member of ~\"group::product intelligence\" on the MR for approval.\n\n## Owners\n\n- Group: ~\"group::testing\"\n- Slack channel: `#g_testing`\n- PM: @jheimbuck_gl \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:feature_name` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-06-01T20:34:44.000Z","updated_at":"2021-09-07T18:06:25.176Z","closed_at":"2021-09-07T18:06:22.170Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Code Testing and Coverage","devops::verify","feature flag","group::pipeline insights","maintenance::refactor","section::ops","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332400","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332400","notes":"https://gitlab.com/api/v4/projects/278964/issues/332400/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332400/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332400","relative":"#332400","full":"gitlab-org/gitlab#332400"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6101,"epic":{"id":281056,"iid":6101,"title":"[Feature Flags] - Verify:Testing remove old usage ping feature flags","url":"/groups/gitlab-org/-/epics/6101","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88063380,"iid":332399,"project_id":278964,"title":"[Feature flag] Remove `usage_data_i_testing_metrics_report_artifact_uploaders`","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:usage_data_i_testing_metrics_report_artifact_uploaders` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/blob/05662f26100c2a6e70f60bcf33caa7d8055752b6/config/feature_flags/development/usage_data_i_testing_metrics_report_artifact_uploaders.yml) and should be removed.\n\nThis feature flag was created as part of usage ping, with guidance from ~\"product intelligence\". Now that usage ping is stable, we are safe to remove the feature flag. We should still ping a member of ~\"group::product intelligence\" on the MR for approval.\n\n## Owners\n\n- Group: ~\"group::testing\"\n- Slack channel: `#g_testing`\n- PM: @jheimbuck_gl \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:feature_name` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-06-01T20:33:48.700Z","updated_at":"2021-09-23T13:14:55.643Z","closed_at":"2021-09-23T13:14:55.625Z","closed_by":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"labels":["Category:Code Testing and Coverage","devops::verify","feature flag","group::pipeline insights","maintenance::refactor","section::ops","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332399","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332399","notes":"https://gitlab.com/api/v4/projects/278964/issues/332399/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332399/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332399","relative":"#332399","full":"gitlab-org/gitlab#332399"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6101,"epic":{"id":281056,"iid":6101,"title":"[Feature Flags] - Verify:Testing remove old usage ping feature flags","url":"/groups/gitlab-org/-/epics/6101","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88063368,"iid":332398,"project_id":278964,"title":"[Feature flag] Remove `:usage_data_i_testing_load_performance_widget_total`","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:usage_data_i_testing_load_performance_widget_total` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/blob/05662f26100c2a6e70f60bcf33caa7d8055752b6/config/feature_flags/development/usage_data_i_testing_load_performance_widget_total.yml) and should be removed.\n\nThis feature flag was created as part of usage ping, with guidance from ~\"product intelligence\". Now that usage ping is stable, we are safe to remove the feature flag. We should still ping a member of ~\"group::product intelligence\" on the MR for approval.\n\n## Owners\n\n- Group: ~\"group::testing\"\n- Slack channel: `#g_testing`\n- PM: @jheimbuck_gl \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:feature_name` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-06-01T20:33:07.432Z","updated_at":"2021-09-13T22:14:59.751Z","closed_at":"2021-09-13T22:14:57.058Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Performance Testing","devops::verify","feature flag","group::pipeline insights","maintenance::refactor","section::ops","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332398","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332398","notes":"https://gitlab.com/api/v4/projects/278964/issues/332398/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332398/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332398","relative":"#332398","full":"gitlab-org/gitlab#332398"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6101,"epic":{"id":281056,"iid":6101,"title":"[Feature Flags] - Verify:Testing remove old usage ping feature flags","url":"/groups/gitlab-org/-/epics/6101","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88063322,"iid":332397,"project_id":278964,"title":"[Feature flag] Remove `usage_data_i_testing_group_code_coverage_visit_total`","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:usage_data_i_testing_group_code_coverage_visit_total` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/blob/05662f26100c2a6e70f60bcf33caa7d8055752b6/config/feature_flags/development/usage_data_i_testing_group_code_coverage_visit_total.yml) and should be removed.\n\nThis feature flag was created as part of usage ping, with guidance from ~\"product intelligence\". Now that usage ping is stable, we are safe to remove the feature flag. We should still ping a member of ~\"group::product intelligence\" on the MR for approval.\n\n## Owners\n\n- Group: ~\"group::testing\"\n- Slack channel: `#g_testing`\n- PM: @jheimbuck_gl \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:feature_name` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-06-01T20:31:02.848Z","updated_at":"2021-09-28T19:38:22.409Z","closed_at":"2021-09-28T19:38:22.394Z","closed_by":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"labels":["Category:Code Testing and Coverage","devops::verify","feature flag","group::pipeline insights","maintenance::refactor","section::ops","workflow::in review"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332397","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332397","notes":"https://gitlab.com/api/v4/projects/278964/issues/332397/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332397/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332397","relative":"#332397","full":"gitlab-org/gitlab#332397"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6101,"epic":{"id":281056,"iid":6101,"title":"[Feature Flags] - Verify:Testing remove old usage ping feature flags","url":"/groups/gitlab-org/-/epics/6101","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88063161,"iid":332396,"project_id":278964,"title":"[Feature Flag] Remove `:usage_data_i_testing_full_code_quality_report_total`","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:usage_data_i_testing_full_code_quality_report_total` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/blob/05662f26100c2a6e70f60bcf33caa7d8055752b6/config/feature_flags/development/usage_data_i_testing_full_code_quality_report_total.yml) and should be removed.\n\nThis feature flag was created as part of usage ping, with guidance from ~\"product intelligence\". Now that usage ping is stable, we are safe to remove the feature flag. We should still ping a member of ~\"group::product intelligence\" on the MR for approval.\n\n## Owners\n\n- Group: ~\"group::testing\"\n- Slack channel: `#g_testing`\n- PM: @jheimbuck_gl \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [ ] Remove `:feature_name` feature flag\n    - [ ] Remove all references to the feature flag from the codebase\n    - [ ] Remove the YAML definitions for the feature from the repository\n    - [ ] Create a Changelog Entry\n\n- [ ] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [ ] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-06-01T20:25:49.423Z","updated_at":"2021-10-28T13:56:26.422Z","closed_at":"2021-08-12T15:09:07.468Z","closed_by":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"labels":["Category:Code Quality","Category:Code Testing and Coverage","devops::verify","feature flag","group::pipeline insights","maintenance::refactor","section::ops","type::maintenance","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332396","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332396","notes":"https://gitlab.com/api/v4/projects/278964/issues/332396/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332396/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332396","relative":"#332396","full":"gitlab-org/gitlab#332396"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6101,"epic":{"id":281056,"iid":6101,"title":"[Feature Flags] - Verify:Testing remove old usage ping feature flags","url":"/groups/gitlab-org/-/epics/6101","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88056370,"iid":332377,"project_id":278964,"title":"Using API to retrieve issue list for a specific (current) iteration","description":"We are facing an issue with GitLab API. Actually we are not able to extract the list of issues with the field \"Iteration\" as part of the data. For example, if I try to execute the following RESTAPI call:\n\nhttps://gitlab.com/api/v4/projects/24363096/issues\n\nGitLab will return the list of issues that are part of project ID 24363096, but Iteration is not a field part of it.","state":"closed","created_at":"2021-06-01T17:50:33.972Z","updated_at":"2022-03-22T16:47:23.810Z","closed_at":"2022-03-16T02:34:23.214Z","closed_by":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"labels":["Deliverable","backend","customer","devops::plan","group::project management","section::dev","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"}],"author":{"id":7102774,"username":"petke02","name":"Kevin Peters","state":"active","avatar_url":"https://secure.gravatar.com/avatar/837fda809643929bafe25475d2b31cf0?s=80\u0026d=identicon","web_url":"https://gitlab.com/petke02"},"type":"ISSUE","assignee":{"id":5961404,"username":"euko","name":"Eulyeon Ko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5961404/avatar.png","web_url":"https://gitlab.com/euko"},"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332377","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332377","notes":"https://gitlab.com/api/v4/projects/278964/issues/332377/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332377/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332377","relative":"#332377","full":"gitlab-org/gitlab#332377"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88051893,"iid":332373,"project_id":278964,"title":"API Security jobs not failing when an error occurs","description":"### Problem\n\nDuring [this job](https://gitlab.com/gitlab-org/security-products/demos/api-dast/soap-example/-/jobs/1309455853), the runner exceptioned and caused the testing to fail. However, the job is in the passing state instead of failed.\n\n### Proposal\n\n1. [x] Investigate and correct the logic so that jobs fail correctly\n1. [x] Unit test/integration test\n1. [x] Publish new container","state":"closed","created_at":"2021-06-01T16:43:39.085Z","updated_at":"2021-06-23T17:07:54.839Z","closed_at":"2021-06-23T17:07:54.826Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:DAST","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","priority::3","section::sec","severity::3","type::bug","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332373","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332373","notes":"https://gitlab.com/api/v4/projects/278964/issues/332373/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332373/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332373","relative":"#332373","full":"gitlab-org/gitlab#332373"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88050291,"iid":332370,"project_id":278964,"title":"Add drafts scope to MergeRequest","description":"Add `drafts` scope to `MergeRequest` where `draft: true`","state":"closed","created_at":"2021-06-01T16:06:39.208Z","updated_at":"2021-06-18T07:07:01.825Z","closed_at":"2021-06-01T16:13:26.870Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Code Review Workflow","Deliverable","backend","devops::create","frontend","group::code review","section::dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332370","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332370","notes":"https://gitlab.com/api/v4/projects/278964/issues/332370/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332370/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332370","relative":"#332370","full":"gitlab-org/gitlab#332370"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88042872,"iid":332353,"project_id":278964,"title":"Add feature specs for wiki content editor","description":"## Introduction\n\nWrite feature specs for wiki content editor. The specs should cover the same set of cases covered in `spec/frontend/pages/shared/wikis/components/wiki_form_spec.js`, but on an end-to-end level for better coverage.","state":"closed","created_at":"2021-06-01T14:03:13.319Z","updated_at":"2021-09-18T07:01:06.448Z","closed_at":"2021-08-20T16:02:43.095Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Category:Wiki","Content Editor","Deliverable","devops::create","frontend","group::editor","maintenance::refactor","missed-deliverable","missed:14.2","quad-planning::complete-action","section::dev","test","workflow::ready for development"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332353","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332353","notes":"https://gitlab.com/api/v4/projects/278964/issues/332353/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332353/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332353","relative":"#332353","full":"gitlab-org/gitlab#332353"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88039020,"iid":332347,"project_id":278964,"title":"Cleanup policies UI do not show `nil` values","description":"### Summary\n\nCleanup policies have `nil`able fields:\n* [older_than](https://gitlab.com/gitlab-org/gitlab/-/blob/2951fb8c0d1bfc285507491996c0461c15891631/app/models/container_expiration_policy.rb#L22)\n* [keep_n](https://gitlab.com/gitlab-org/gitlab/-/blob/2951fb8c0d1bfc285507491996c0461c15891631/app/models/container_expiration_policy.rb#L23)\n\nThe problem is that the UI doesn't present those `nil` values.\n\nHere is a cleanup policy with `nil` values for `older_than` and `keep_n`:\n\n```ruby\n#\u003cContainerExpirationPolicy:0x00007fdcee48dd48\n project_id: 390,\n created_at: Tue, 13 Apr 2021 13:12:28 UTC +00:00,\n updated_at: Tue, 01 Jun 2021 12:56:05 UTC +00:00,\n next_run_at: Wed, 02 Jun 2021 12:56:05 UTC +00:00,\n name_regex: \".*\",\n cadence: \"1d\",\n older_than: nil,\n keep_n: nil,\n enabled: true,\n name_regex_keep: nil\u003e\n```\n\nand here is what the UI displays:\n\n![Screenshot_2021-06-01_at_14.58.07](/uploads/3888ddfd0fcc02099e4fa57e9ca92751/Screenshot_2021-06-01_at_14.58.07.png)\n\nThis is confusing and could lead to data loss. Users could think that container images will cleaned up until there are 10 tags left but with `keep_n` `nil`, the cleanup policy will actually remove *all* tags.\n\n#### Crunching numbers\n\nAt the time of this writing, we have on ~\"gitlab.com\" :\n* [~100 enabled cleanup policies](https://postgres.ai/console/gitlab/gitlab-production-tunnel-pg12/sessions/4395/commands/15314) linked to projects with container images and with `keep_n` set to `nil`.\n* [~150 enabled cleanup policies](https://postgres.ai/console/gitlab/gitlab-production-tunnel-pg12/sessions/4395/commands/15315) linked to projects with container images and with `older_than` set to `nil`.\n\n### Example Project\n\nhttps://gitlab.com/10io/NugetInstall/-/settings/ci_cd\n\n### What is the current *bug* behavior?\n\nThe UI displays 10 tags and 90 days for `keep_n` and `older_than` respectively when set to `nil`\n\n### What is the expected *correct* behavior?\n\nThe UI should display a blank value.","state":"closed","created_at":"2021-06-01T13:09:51.173Z","updated_at":"2021-07-18T07:08:39.322Z","closed_at":"2021-07-14T08:43:36.182Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Container Registry","Deliverable","Package:P1","customer","devops::package","frontend","group::package registry","section::ops","type::bug","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332347","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332347","notes":"https://gitlab.com/api/v4/projects/278964/issues/332347/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332347/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332347","relative":"#332347","full":"gitlab-org/gitlab#332347"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2270,"epic":{"id":15539,"iid":2270,"title":"Cleanup policy for tags","url":"/groups/gitlab-org/-/epics/2270","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88034868,"iid":332340,"project_id":278964,"title":"Follow-up from: Move `timeSummaryForPathNavigation` to datetime_utils","description":"We should move the `timeSummaryForPathNavigation` method to `~/lib/utils/datetime_utility.js` and rename it to a descriptive and general name\n\n### Todo\n* [x] Move and rename [`timeSummaryForPathNavigation`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/cycle_analytics/utils.js#L48) to `~/lib/utils/datetime_utility.js`\n* [x] Move and rename [the related specs](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/frontend/cycle_analytics/utils_spec.js#L50)\n\nThe following discussion from !62630 should be addressed:\n\n- [x] @kushalpandya started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62630#note_589773017):  (+1 comment)\n\n    \u003e I wonder if this utility is worthy of moving to `lib/utils` :thinking:","state":"closed","created_at":"2021-06-01T11:59:35.244Z","updated_at":"2021-11-24T09:03:52.165Z","closed_at":"2021-11-24T09:03:37.812Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["[deprecated] Accepting merge requests","devops::manage","frontend","group::optimize","section::dev"],"milestone":null,"assignees":[],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332340","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332340","notes":"https://gitlab.com/api/v4/projects/278964/issues/332340/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332340/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332340","relative":"#332340","full":"gitlab-org/gitlab#332340"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6201,"epic":{"id":289935,"iid":6201,"title":"[VSA] Technical debt","url":"/groups/gitlab-org/-/epics/6201","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88031757,"iid":332333,"project_id":278964,"title":"[Feature flag] Rollout of `ci_daily_limit_for_pipeline_schedules`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [\"Create application limits for scheduled pipeline\"](https://gitlab.com/gitlab-org/gitlab/-/issues/323066) on production,\nthat is currently behind the `ci_daily_limit_for_pipeline_schedules` feature flag.\n\nIntroduced by !62826\n\n## Owners\n\n- Team: ~\"group::pipeline authoring\" \n- Most appropriate slack channel to reach out to: `#g_pipeline-authoring`\n- Best individual to reach out to: @furkanayhan \n- PM: @dhershkovitch \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with testing groups\n- Rollout on GitLab.com for a certain period (How long)\n- Percentage Rollout on GitLab.com\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Testing Groups/Projects/Users\n\n\u003c!-- If applicable, any groups/projects that are happy to have this feature turned on early. Some organizations may wish to test big changes they are interested in with a small subset of users ahead of time for example. --\u003e\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n- ...\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n- Error on: https://log.gprd.gitlab.net/goto/e27150eb88759f873148903ce819fe3c\n- Error on: https://sentry.gitlab.net/gitlab/gitlabcom/?query=Sidekiq%2FPipelineScheduleWorker\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set ci_daily_limit_for_pipeline_schedules true --dev`\n    - [x] `/chatops run feature set ci_daily_limit_for_pipeline_schedules true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [ ] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e ci_daily_limit_for_pipeline_schedules true`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_daily_limit_for_pipeline_schedules \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_daily_limit_for_pipeline_schedules \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set ci_daily_limit_for_pipeline_schedules true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Cross-post chatops slack command to `#support_gitlab-com`.\n  ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)) and in your team channel\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `ci_daily_limit_for_pipeline_schedules` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete ci_daily_limit_for_pipeline_schedules --dev`\n    - [ ] `/chatops run feature delete ci_daily_limit_for_pipeline_schedules --staging`\n    - [ ] `/chatops run feature delete ci_daily_limit_for_pipeline_schedules`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_daily_limit_for_pipeline_schedules false\n```","state":"closed","created_at":"2021-06-01T11:06:52.853Z","updated_at":"2021-10-28T13:56:27.090Z","closed_at":"2021-09-16T14:22:55.204Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","backend","devops::verify","feature flag","group::pipeline authoring","section::ops","type::maintenance","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332333","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":41,"completed_count":12},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"12 of 41 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332333","notes":"https://gitlab.com/api/v4/projects/278964/issues/332333/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332333/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332333","relative":"#332333","full":"gitlab-org/gitlab#332333"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88029183,"iid":332330,"project_id":278964,"title":"Add view pipeline button to the pipeline editor","description":"This is an implementation issue for https://gitlab.com/gitlab-org/gitlab/-/issues/327195\n\n### Problem\n\nFrom UX research we found that the pipeline ID link in the status section of the pipeline editor isn't easily discoverable as the link the pipeline. It's not \"human-readable\" and is not a cleat CTA to view the pipeline.\n\n### Proposal\n\nWe want to add a \"View pipeline\" button which is easy to see CTA to view this pipeline. The button should take you to the same place as the pipeline ID link. \n\nThe button should use confirm/secondary variant, with 16px padding on the right.\n\n![image](/uploads/149c0e391ce4810982c4ecf21e7a5722/image.png)","state":"closed","created_at":"2021-06-01T10:22:57.994Z","updated_at":"2021-08-10T12:12:06.867Z","closed_at":"2021-08-10T06:00:09.372Z","closed_by":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"labels":["Category:Pipeline Authoring","DEPRECATE_pipeline authoring","Verify candidate","candidate::14.2","devops::verify","group::pipeline authoring","section::ops","usability","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"}],"author":{"id":4509877,"username":"dhershkovitch","name":"Dov Hershkovitch","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7daa3113f0359f08a217fa800d9cc1d2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dhershkovitch"},"type":"ISSUE","assignee":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332330","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332330","notes":"https://gitlab.com/api/v4/projects/278964/issues/332330/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332330/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332330","relative":"#332330","full":"gitlab-org/gitlab#332330"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":88028888,"iid":332329,"project_id":278964,"title":"Match existing users to epics and their subrelations","description":"### Problem statement\n\nWith implementation of epics migration using ndjson https://gitlab.com/gitlab-org/gitlab/-/issues/329864 we no longer have user mapping for existing group members. \n\nCurrently members mapper attributes any occurrences of user references (like `user_id`, `creator_id`, `author_id`, etc) to the importer user.\n\nWe need to build a new way of mapping user references to epics and their subrelations. Any approach taken will most likely affect all ndjson pipelines going forward that have user references.\n\n### Proposed solution\n\nTBD","state":"closed","created_at":"2021-06-01T10:17:41.321Z","updated_at":"2022-03-28T19:16:55.787Z","closed_at":"2021-07-02T09:14:51.482Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Deliverable","GitLab Core","Importer:GitLab Migration","Next Up","backend","devops::manage","direction","estimation::completed","feature::enhancement","group::import","milestone::p2","section::dev","type::feature","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332329","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332329","notes":"https://gitlab.com/api/v4/projects/278964/issues/332329/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332329/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332329","relative":"#332329","full":"gitlab-org/gitlab#332329"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5189,"epic":{"id":179639,"iid":5189,"title":"Group Migration - Complete Epics","url":"/groups/gitlab-org/-/epics/5189","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88025878,"iid":332323,"project_id":278964,"title":"Rename instance_statistics_measurements in GraphQL QueryType","description":"### Problem to solve\n\nIn %\"13.10\", we renamed the `instanceStatisticsMeasurements` node to `usageTrendsMeasurements`. The API docs shows  the deprecation: https://docs.gitlab.com/ee/api/graphql/reference/index.html#queryinstancestatisticsmeasurements\n\n### Proposal\n\n@Quintasan [proposed in an MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62797#note_589775032): \"create a follow-up issue to rename `instance_statistics_measurements` in `app/graphql/types/query_type.rb` to reflect this change\".\n\n- [x] Announce the deprecation: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/79429\n- [x] Note the deprecation in the documentation\n- [x] Remove remaining references to `instanceStatisticsMeasurements` in the next major release","state":"closed","created_at":"2021-06-01T09:33:20.535Z","updated_at":"2022-05-24T12:01:17.461Z","closed_at":"2022-05-09T08:16:27.064Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Deliverable","backend","breaking change","devops::manage","group::optimize","maintenance::refactor","priority::2","section::dev","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332323","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332323","notes":"https://gitlab.com/api/v4/projects/278964/issues/332323/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332323/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332323","relative":"#332323","full":"gitlab-org/gitlab#332323"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88017619,"iid":332313,"project_id":278964,"title":"in-flight project imports are deleted by import_export_project_cleanup_worker when disk (not object storage) is used","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen GitLab imports a project, it expands the `tar.gz` file temporarily to disk.\n\nThere's a sidekiq job `import_export_project_cleanup_worker` which runs every hour to ensure that these files get deleted, should they be abandoned.\n\nThe [ImportExportCleanUpService code](https://gitlab.com/gitlab-org/gitlab/-/blob/v13.12.0-ee/app/services/import_export_clean_up_service.rb#L30) specifies 1440 minutes (24 hours) as the threshold of this housekeeping.\n\nIt uses a unix `find` command to delete the files and directories:\n\n```\nfind #{path} -not -path #{path} -mmin +#{mmin} -delete\n```\n\nThis doesn't appear to work as expected.\n\nIt operates on the age of the files inside the `tar.gz` file, and does not appear to check whether that export is actually still in use.\n\nResult: once a project export has been expanded onto disk, it potentially has only seconds or minutes before the sidekiq job will delete the files off disk. \n\n#### Workaround\n\nSelf Managed: disable and delete the job in Sidekiq when a project import is required.\n\nThis workaround is not permanent.  When you restart GitLab (or just sidekiq - `gitlab-ctl restart sidekiq`) the job is reinstated.  (Verified ONLY on GitLab 13.12.)\n\n- Admin Area -\u003e Monitoring -\u003e Background Jobs -\u003e `Cron` tab\n- Locate `import_export_project_cleanup_worker` (eg: ctrl-f and search for it)\n\n![image](/uploads/f96833c7570db6e0095a068a34574f81/image.png)\n\n- Disable it. (using the `Disable` button, far right) this will cause it to drop to the end of the list.\n- Locate it again, and then `Delete` it.  The job will re-enable itself, otherwise.\n\n![image](/uploads/2797f1ca9dd4ba2dc6a65d3eb9c28f17/image.png)\n\n- Now perform the project import(s).\n\n### Steps to reproduce\n\n- Obtain a large project export,\n  - The QA team test project has these specs: 3.5 Gb Files, 900k commits, 20k issues, 7k MRs, 1.5k labels - the export file is [available here](https://gitlab.com/gitlab-org/quality/performance-data/-/blob/master/projects_export/linux_export.tar.gz) (2.7 Gb).  \n- If it's a new export, wait 24 hours for the datestamps in the `tar.gz` file to age.\n- locate the storage path: `pp Gitlab::ImportExport.storage_path`\n- monitor the storage path:\n\n```\nexport GLPATH=\"/var/opt/gitlab/gitlab-rails/shared/tmp/gitlab_exports\"\nwhile true ; do\n  date\n  find $GLPATH -not -path $GLPATH -mmin +1440 -type f\n  sleep 120\ndone\n```\n\n- the sidekiq job runs at :00 every hour, so start the import just before - for example wall clock xx:50.\n- The target GitLab instance needs to:\n  - NOT use object storage\n  - Be powerful enough and have enough memory to cope with a large project import, but\n  - NOT be so quick that the import completes!  Suggest 4CPUs, and 6-8gb of free RAM once GitLab is running.\n  - Be running the full suite of Sidekiq jobs.\n- Import the project.  Using the rake task provides greater observability.\n\nAs the housekeeping runs over a shared location, I would expect it to interfere with imports via the UI, via the API, the rake task, or an other mechanism that uses that location on disk.\n\n### Example Project\n\nThe QA team test project has these specs: 3.5 Gb Files, 900k commits, 20k issues, 7k MRs, 1.5k labels - the export file is [available here](https://gitlab.com/gitlab-org/quality/performance-data/-/blob/master/projects_export/linux_export.tar.gz) (2.7 Gb).  \n\n### What is the current *bug* behavior?\n\nSidekiq deletes the in flight project import/export files based on the datestamp of the files.\n\n#### Details\n\nAny project that takes more than 30-60 minutes to import, this bug manifests itself by making it appear that GitLab either cannot import that project, or will only do so intermittently or partially. \n\nThe ways this appears is:\n\n[1] Any element of the project not already processed or imported is no longer available to the import process.  Pipelines, for example, are imported after the git repo, merge requests, and issues - so a partial import with no pipelines is a common outcome.\n\nI suspect this ~bug causes the follow misbehavior:\n\n  - None of the pipeline related GPT tests work, because the the pipelines were not imported ([Customer ticket reference](https://gitlab.zendesk.com/agent/tickets/194955) for GitLab team members)\n  - The Git Repo is imported first, database elements follow on later and are in separate NDJSON files. As these are deleted by the job, they don't get imported, result: partial database import https://gitlab.com/gitlab-org/gitlab/-/issues/271596\n    - This bug is not the only cause of this problem.\n  - The avatar is not imported, because the code in [avatar_restorer.rb](https://gitlab.com/gitlab-org/gitlab/-/blob/v13.12.0-ee/lib/gitlab/import_export/avatar_restorer.rb#L24) does not find it. (One of a number of issues raised by one customer, [ticket](https://gitlab.zendesk.com/agent/tickets/158866) for GitLab team members)\n\n[2] A largish git repo will delay the later stages of the import long enough that all the NDJSON is deleted.  This causes the following error (rake task import)\n\n```\nERROR -- : Exception: Error importing repository  into group/group/projectname - invalid import format\n```\n\n  - this can appear very arbitrary: a freshly exported project will work, but might hit the 15 hour timeout in [stuck_import_job.rb](https://gitlab.com/gitlab-org/gitlab/-/blob/v13.12.0-ee/app/workers/gitlab/import/stuck_import_job.rb#L8), or it might hit `Exception: 4:Deadline Exceeded` (cause currently unknown)\n  - an attempt to import the project again may be initiated more than 24 hours after the project was exported, the component files therefore immediately qualify for deletion\n\n### What is the expected *correct* behavior?\n\nHousekeeping of these files does not occur until 24 hours has elapsed.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\nThis bug was isolated on 13.12.1, but the code is at least four years old.  It affects the 13.x release cycle in a particular way because NDJSON exports use multiple files.\n\nI suspect the NDJSON files are locked on disk while in use, so GitLab will finish importing any given NDJSON file, and then find that the other project features don't exist to be imported.\n\n\n### Possible fixes\n\nThe problematic code is: https://gitlab.com/gitlab-org/gitlab/-/blob/v13.12.0-ee/app/services/import_export_clean_up_service.rb#L30\n\nI suspect there are more robust ways to determine whether a export can be deleted or not. See https://gitlab.com/gitlab-org/gitlab/-/issues/332313#note_589903036 for a discussion about using `-maxdepth` with `find`.","state":"closed","created_at":"2021-06-01T07:43:53.173Z","updated_at":"2022-11-09T17:27:28.095Z","closed_at":"2021-06-10T10:20:37.871Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:Project Export/Import","Next Up","Unplanned","customer","devops::manage","estimation::completed","group::import","section::dev","type::bug","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":4624911,"username":"bprescott_","name":"Ben Prescott_","state":"active","avatar_url":"https://secure.gravatar.com/avatar/91aa28150f430ec564dc5af5952c35a0?s=80\u0026d=identicon","web_url":"https://gitlab.com/bprescott_"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":24,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332313","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332313","notes":"https://gitlab.com/api/v4/projects/278964/issues/332313/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332313/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332313","relative":"#332313","full":"gitlab-org/gitlab#332313"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3054,"epic":{"id":39522,"iid":3054,"title":"🐞 Project Export/Import bugs","url":"/groups/gitlab-org/-/epics/3054","group_id":9970},"iteration":null,"health_status":null},{"id":88012442,"iid":332306,"project_id":278964,"title":"Reuse ancestors widget in epic sidebar","description":"As part of epic boards sidebar (https://gitlab.com/gitlab-org/gitlab/-/issues/231401), an Apollo + GraphQL widget read-only widget is being created for ancestors. It should be used in epic sidebar once available.","state":"closed","created_at":"2021-06-01T06:05:30.379Z","updated_at":"2021-08-19T23:51:37.964Z","closed_at":"2021-08-19T23:51:37.950Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["automation:ml","devops::plan","frontend","group::product planning","section::dev","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332306","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332306","notes":"https://gitlab.com/api/v4/projects/278964/issues/332306/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332306/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332306","relative":"#332306","full":"gitlab-org/gitlab#332306"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6095,"epic":{"id":280611,"iid":6095,"title":"Refactor epic sidebar to Vue + Apollo client","url":"/groups/gitlab-org/-/epics/6095","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88012393,"iid":332305,"project_id":278964,"title":"Reuse Participants widget in epic sidebar","description":"As part of epic boards sidebar (https://gitlab.com/gitlab-org/gitlab/-/issues/231401), a participants Apollo + GraphQL widget was created. It should be used in epic sidebar.\n\nWidget is `app/assets/javascripts/sidebar/components/participants/sidebar_participants_widget.vue` and an example of its use exists in `ee/app/assets/javascripts/boards/components/epic_board_content_sidebar.vue`.","state":"closed","created_at":"2021-06-01T06:03:31.188Z","updated_at":"2021-08-23T23:14:32.193Z","closed_at":"2021-08-23T23:14:32.175Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["automation:ml","devops::plan","frontend","group::product planning","section::dev","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332305","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332305","notes":"https://gitlab.com/api/v4/projects/278964/issues/332305/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332305/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332305","relative":"#332305","full":"gitlab-org/gitlab#332305"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6095,"epic":{"id":280611,"iid":6095,"title":"Refactor epic sidebar to Vue + Apollo client","url":"/groups/gitlab-org/-/epics/6095","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88012297,"iid":332304,"project_id":278964,"title":"Reuse Labels widget in epic sidebar","description":"Once Labels Apollo + GraphQL widget has been written (https://gitlab.com/groups/gitlab-org/-/epics/6092), it should be used in epic sidebar.","state":"closed","created_at":"2021-06-01T06:00:55.669Z","updated_at":"2021-12-02T22:59:12.662Z","closed_at":"2021-12-02T22:59:12.651Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["automation:ml","devops::plan","frontend","group::product planning","section::dev","workflow::production"],"milestone":null,"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332304","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332304","notes":"https://gitlab.com/api/v4/projects/278964/issues/332304/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332304/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332304","relative":"#332304","full":"gitlab-org/gitlab#332304"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6095,"epic":{"id":280611,"iid":6095,"title":"Refactor epic sidebar to Vue + Apollo client","url":"/groups/gitlab-org/-/epics/6095","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88012178,"iid":332303,"project_id":278964,"title":"Reuse date widget in epic sidebar","description":"As part of epic boards sidebar (https://gitlab.com/gitlab-org/gitlab/-/issues/231401), a date widget was created, supporting Inherited dates for epics. This component should replace date selectors in epic sidebar.\n\nWidget is `app/assets/javascripts/sidebar/components/date/sidebar_date_widget.vue` and an example of its use exists in `ee/app/assets/javascripts/boards/components/epic_board_content_sidebar.vue`.","state":"closed","created_at":"2021-06-01T05:59:00.103Z","updated_at":"2021-12-02T22:55:14.553Z","closed_at":"2021-12-02T22:55:14.543Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["automation:ml","devops::plan","frontend","group::product planning","section::dev","workflow::production"],"milestone":null,"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332303","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332303","notes":"https://gitlab.com/api/v4/projects/278964/issues/332303/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332303/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332303","relative":"#332303","full":"gitlab-org/gitlab#332303"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6095,"epic":{"id":280611,"iid":6095,"title":"Refactor epic sidebar to Vue + Apollo client","url":"/groups/gitlab-org/-/epics/6095","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88011914,"iid":332302,"project_id":278964,"title":"Reuse Add To Do / Mark as done sidebar widget in epic sidebar","description":"Once the widget is written as part of https://gitlab.com/gitlab-org/gitlab/-/issues/331875, it should be used in epic sidebar.","state":"closed","created_at":"2021-06-01T05:55:24.156Z","updated_at":"2021-08-18T23:30:06.767Z","closed_at":"2021-08-18T23:30:06.470Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["automation:ml","devops::plan","frontend","group::product planning","section::dev","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332302","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332302","notes":"https://gitlab.com/api/v4/projects/278964/issues/332302/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332302/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332302","relative":"#332302","full":"gitlab-org/gitlab#332302"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6095,"epic":{"id":280611,"iid":6095,"title":"Refactor epic sidebar to Vue + Apollo client","url":"/groups/gitlab-org/-/epics/6095","group_id":9970,"human_readable_end_date":"Dec 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88010606,"iid":332301,"project_id":278964,"title":"Environments should not show as stopped if on_stop fails","description":"The current behaviour of Operations -\u003e Environments is that environments are marked as 'stopped' as soon as the Stop button is clicked.\n\nIf, for any reason, the on_stop job fails, the environment and its underlying resources remain fully or partially available. \n\nThis can cause interference with future deployments to the same environment. It can also cause unnecessary cost, i.e. if the deployment creates cloud resources.\n\nI propose that an environment should only transition to the Stopped tab once the on_stop job has completed successfully.\n\n## Implementation plan\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/332301#note_897915546","state":"closed","created_at":"2021-06-01T05:09:57.627Z","updated_at":"2022-09-22T18:34:09.011Z","closed_at":"2022-06-03T13:45:35.106Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Release Orchestration","Next Up","Release::P2","approaching-SLO","automation:ml","backend","devops::release","environments","group::release","missed-SLO","priority::2","section::ops","severity::2","type::bug"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":1910015,"username":"rainynight65","name":"Alex Hempel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ee5c2941d2997b864e9173c270513a0c?s=80\u0026d=identicon","web_url":"https://gitlab.com/rainynight65"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":34,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332301","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332301","notes":"https://gitlab.com/api/v4/projects/278964/issues/332301/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332301/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332301","relative":"#332301","full":"gitlab-org/gitlab#332301"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":88007369,"iid":332298,"project_id":278964,"title":"Linear queries for GroupDescendantsFinder","description":"[app/finders/group_descendants_finder.rb ](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/finders/group_descendants_finder.rb) queries with `ObjectHierarchy` directly rather than through group traversal methods.\n\nThese result in slow queries for our largest group.\n\n![Screen_Shot_2021-06-01_at_11.31.29_am](/uploads/6e6b4e359125a12058dd1397799b7334/Screen_Shot_2021-06-01_at_11.31.29_am.png)","state":"closed","created_at":"2021-06-01T03:35:00.434Z","updated_at":"2021-12-03T10:33:01.630Z","closed_at":"2021-12-03T10:33:00.956Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Authentication and Authorization","Linear queries","automation:ml","automation:ml wrong","backend","bug::performance","devops::manage","group::authentication and authorization","section::dev"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":4092171,"username":"alexpooley","name":"Alex Pooley","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4092171/avatar.png","web_url":"https://gitlab.com/alexpooley"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332298","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332298","notes":"https://gitlab.com/api/v4/projects/278964/issues/332298/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332298/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332298","relative":"#332298","full":"gitlab-org/gitlab#332298"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5296,"epic":{"id":190836,"iid":5296,"title":"Linear namespace queries","url":"/groups/gitlab-org/-/epics/5296","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":88004332,"iid":332293,"project_id":278964,"title":"Integration settings template: Microsoft Teams notifications","description":"### Background \n\nSee [parent epic](https://gitlab.com/groups/gitlab-org/-/epics/6094) for problem statement and more context.\n\n### Proposal \nThe following views should be available in the Designs section below.\n- Current view\n- Proposed view\n\n\n### Availability \u0026 Testing\n\nWe have [tests to validate](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/support/shared_examples/integrations/integration_settings_form.rb) integration fields on the settings form.  These will help support this refresh effort\n\nSuggestions: \n * run `package-and-qa`\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e","state":"closed","created_at":"2021-06-01T01:28:14.811Z","updated_at":"2022-11-22T19:40:48.147Z","closed_at":"2022-06-13T15:15:07.918Z","closed_by":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"labels":["Category:Integrations","Deliverable","Integration::MicrosoftTeams","SUS::Impacting","Technical Writing","UI polish","devops::manage","frontend","group::integrations","priority::3","quad-planning::complete-action","section::dev","severity::4","type::feature","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"}],"author":{"id":5022246,"username":"lvanc","name":"Libor Vanc","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5022246/avatar.png","web_url":"https://gitlab.com/lvanc"},"type":"ISSUE","assignee":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332293","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332293","notes":"https://gitlab.com/api/v4/projects/278964/issues/332293/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332293/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332293","relative":"#332293","full":"gitlab-org/gitlab#332293"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6094,"epic":{"id":280449,"iid":6094,"title":"Improve integrations settings template","url":"/groups/gitlab-org/-/epics/6094","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87996158,"iid":332280,"project_id":278964,"title":"Integration settings template: Jira","description":"### Background \n\nSee [parent epic](https://gitlab.com/groups/gitlab-org/-/epics/6094) for problem statement and more context.\n\n### Proposal \nThe following views should be available in the Designs section below.\n- Current view\n- Proposed view\n\n### Design source\n:pencil2: [Figma project](https://www.figma.com/file/5PlLM5rhhr73AxVL0wV64E/Improve-integrations-settings-template-!6094?node-id=450%3A2989)","state":"closed","created_at":"2021-05-31T19:29:46.562Z","updated_at":"2022-11-22T19:40:50.092Z","closed_at":"2022-03-18T16:11:14.300Z","closed_by":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"labels":["Category:Integrations","Integration::Jira","SUS::Impacting","Stretch","Technical Writing","UI polish","UI text","devops::manage","frontend","group::integrations","priority::2","section::dev","severity::4","tw-weight::5","tw::finished","type::maintenance","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"}],"author":{"id":5022246,"username":"lvanc","name":"Libor Vanc","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5022246/avatar.png","web_url":"https://gitlab.com/lvanc"},"type":"ISSUE","assignee":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332280","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332280","notes":"https://gitlab.com/api/v4/projects/278964/issues/332280/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332280/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332280","relative":"#332280","full":"gitlab-org/gitlab#332280"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6094,"epic":{"id":280449,"iid":6094,"title":"Improve integrations settings template","url":"/groups/gitlab-org/-/epics/6094","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87988929,"iid":332272,"project_id":278964,"title":"[Feature flag] Rollout of `ci_scoped_job_token`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [secured workflow for CI Job Token](https://gitlab.com/gitlab-org/gitlab/-/issues/328553) on production,\nthat is currently behind the `ci_scoped_job_token` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::pipeline execution\" \n- Most appropriate slack channel to reach out to: `#g_pipeline-execution`\n- Best individual to reach out to: @fabiopitino \n- PM: @jreporter \n\n## Expectations\n\n### What are we expecting to happen?\n\nThis feature flag starts tracking authentications via CI_JOB_TOKEN and compares permissions with the new [job token scope](https://docs.gitlab.com/ee/api/index.html#limit-gitlab-cicd-job-token-access). The job token scope is however disabled for all projects at the project settings level. Users will need to enable the setting to benefit of the feature.\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nIn case of unexpected issues we can turn off the feature flag and investigate the matter.\n\nThings that might go wrong could be CI_JOB_TOKEN not having proper access to expected projects.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n- Sentry https://sentry.gitlab.net/gitlab/gitlabcom/ for any unexpected errors\n- [401 API status](https://log.gprd.gitlab.net/app/discover#/?_g=()\u0026_a=(columns:!(json.status),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'7092c4e2-4eb5-46f2-8305-a7da2edad090',key:json.type.keyword,negate:!f,params:(query:api),type:phrase),query:(match_phrase:(json.type.keyword:api))),('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'7092c4e2-4eb5-46f2-8305-a7da2edad090',key:json.status,negate:!f,params:(query:'401'),type:phrase),query:(match_phrase:(json.status:'401')))),index:'7092c4e2-4eb5-46f2-8305-a7da2edad090',interval:auto,query:(language:kuery,query:'json.type.keyword%20:%20%22api%22'),sort:!())) - ensure this does not go up unexpectedly\n- [404 API status](https://log.gprd.gitlab.net/goto/1125eb0120aaba3c59a403a93a551aea) - ensure this does not go up unexpectedly\n\n## Rollout Steps\n\n### Pre-rollout requirements\n\n- [x] Reset existing `project_cd_cd_settings.job_token_scope_enabled` to `false`\n    - During the previous rollout we had created some projects with `job_token_scope_enabled: true` by default but then we disabled the feature flag. \n    - We need to set those back to `false` before we attempt to rollout the FF on production. \n    - To do that we could drop and recreate the column with `default: false` in the same migration transaction.\n- [x] Ensure the [post-deployment migration](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69502) that disables the project setting by default ran successfully, leaving it enabled only for projects that were already using the feature.\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set ci_scoped_job_token true --dev`\n    - [x] `/chatops run feature set ci_scoped_job_token true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n    - [x] Enable job token scope via project settings for specific projects and run manual tests\n    - [x] Ensure public projects data (e.g. clone repo, downloading package or image) is always allowed as long as the user has the right permissions\n    - [x] Ensure internal projects data (e.g. clone repo, downloading package or image) is always allowed as long as the user has the right permissions\n    - [x] Ensure private projects data (e.g. clone repo, downloading package or image) is prevented if target project is not added to the job token's scope. Once added or if whole job token setting is disabled, access should be allowed.\n    - [x] Ensure new projects get created with job token scope disabled via project's settings.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [x] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e ci_scoped_job_token true`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_scoped_job_token \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_scoped_job_token \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set ci_scoped_job_token true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Cross-post chatops slack command to `#support_gitlab-com`.\n  ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)) and in your team channel\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it.\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `ci_scoped_job_token` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete ci_scoped_job_token --dev`\n    - [x] `/chatops run feature delete ci_scoped_job_token --staging`\n    - [x] `/chatops run feature delete ci_scoped_job_token`\n- [x] Close this rollout issue.\n\n## Context\n\n\u003cdetails\u003e\n\u003csummary\u003eOld rollout checklist from before the incident\u003c/summary\u003e\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- [x] Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set ci_scoped_job_token true --dev`\n    - [x] `/chatops run feature set ci_scoped_job_token true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Preparation before production rollout\n\n- [x] Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [x] If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), enable it on GitLab.com for [testing groups/projects](#testing-groupsprojectsusers).\n    - [x] `/chatops run feature set --\u003cactor-type\u003e=\u003cactor\u003e ci_scoped_job_token true`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Global rollout on production\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_scoped_job_token \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_scoped_job_token \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set ci_scoped_job_token true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Cross-post chatops slack command to `#support_gitlab-com`.\n  ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)) and in your team channel\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it.\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `ci_scoped_job_token` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the above MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete ci_scoped_job_token --dev`\n    - [ ] `/chatops run feature delete ci_scoped_job_token --staging`\n    - [ ] `/chatops run feature delete ci_scoped_job_token`\n- [ ] Close this rollout issue.\n\n\u003c/details\u003e\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_scoped_job_token false\n```","state":"closed","created_at":"2021-05-31T16:41:51.911Z","updated_at":"2022-09-19T21:04:41.684Z","closed_at":"2021-12-01T11:05:29.704Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Category:Continuous Integration","Verify::P1","backend","customer","devops::verify","feature flag","feature::addition","group::pipeline execution","missed:14.0","missed:14.1","missed:14.2","missed:14.3","section::ops","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":128,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332272","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":88,"completed_count":59},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"59 of 88 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332272","notes":"https://gitlab.com/api/v4/projects/278964/issues/332272/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332272/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332272","relative":"#332272","full":"gitlab-org/gitlab#332272"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":87987678,"iid":332269,"project_id":278964,"title":"Align titles and icons in Security pages","description":"This follows-up on @cam.x's comment in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62134#note_580549583.\n\nCamelia noticed that the **Threat Monitoring** and its `?` icon are misaligned:\n\n![](https://gitlab.com/gitlab-org/gitlab/uploads/39a751f0e62ca2d391a9cc140886f912/Frame_1.png)\n\nThe initial plan was to fix this particular title only, along with other design tweaks in **Threat Monitoring**, but it appears that we have a similar issue in other Security pages. Affected pages are:\n\n* **Dependency List**\n* **License Compliance**\n* **Threat Monitoring**\n\nTo keep the experience as consistent as possible, let's fix the alignment in all those titles at once.","state":"closed","created_at":"2021-05-31T16:15:24.506Z","updated_at":"2021-06-02T10:59:40.289Z","closed_at":"2021-06-02T10:59:40.272Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["UI polish","devops::secure","frontend","section::sec","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332269","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332269","notes":"https://gitlab.com/api/v4/projects/278964/issues/332269/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332269/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332269","relative":"#332269","full":"gitlab-org/gitlab#332269"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87978450,"iid":332255,"project_id":278964,"title":"Button order inconsistency for Admin\u003eUsers","description":"## Issue\nWhile working on a [related issue](https://gitlab.com/gitlab-org/gitlab/-/issues/327378), I found a visual inconsistency with the primary action buttons The primary action buttons do not conform to standard [ordering rules](https://design.gitlab.com/components/button/#order). They should have the primary action on the edge of the container.\n\n#### Example\n\n![Screen_Shot_2021-05-31_at_1.32.52_PM](/uploads/3d2c01234f9447edb9f14098a2f3e19c/Screen_Shot_2021-05-31_at_1.32.52_PM.png)\n\n## Proposal\n\nSwap placement of primary action buttons.","state":"closed","created_at":"2021-05-31T13:44:59.373Z","updated_at":"2021-07-11T09:14:50.755Z","closed_at":"2021-07-05T15:09:50.936Z","closed_by":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"labels":["UX","devops::manage","frontend","frontend-weight::1","group::authentication and authorization","section::dev","workflow::ready for development"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[],"author":{"id":4584545,"username":"dmoraBerlin","name":"Daniel Mora","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0604ecfb7035e409af09d4a3b6d7dcb2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmoraBerlin"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332255","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332255","notes":"https://gitlab.com/api/v4/projects/278964/issues/332255/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332255/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332255","relative":"#332255","full":"gitlab-org/gitlab#332255"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87975913,"iid":332252,"project_id":278964,"title":"comparison of Integer with nil failed with canceling pipelines","description":"Seen on dev (https://sentry.gitlab.net/gitlab/devgitlaborg/issues/2665399/):\n\n\u003cdetails\u003e\n\u003csummary\u003eBacktrace:\u003c/summary\u003e\n\n```\nActiveRecord::StaleObjectError: Attempted to update a stale object: Ci::Build.\n  from active_record/locking/optimistic.rb:95:in `_update_row'\n  from active_record/persistence.rb:918:in `_update_record'\n  from active_record/attribute_methods/dirty.rb:205:in `_update_record'\n  from active_record/callbacks.rb:335:in `block in _update_record'\n  from active_support/callbacks.rb:135:in `run_callbacks'\n  from active_support/callbacks.rb:825:in `_run_update_callbacks'\n  from active_record/callbacks.rb:335:in `_update_record'\n  from active_record/timestamp.rb:123:in `_update_record'\n  from active_record/persistence.rb:905:in `create_or_update'\n  from active_record/callbacks.rb:327:in `block in create_or_update'\n  from active_support/callbacks.rb:135:in `run_callbacks'\n  from active_support/callbacks.rb:825:in `_run_save_callbacks'\n  from active_record/callbacks.rb:327:in `create_or_update'\n  from active_record/timestamp.rb:128:in `create_or_update'\n  from active_record/persistence.rb:470:in `save'\n  from active_record/validations.rb:47:in `save'\n  from active_record/transactions.rb:314:in `block in save'\n  from active_record/transactions.rb:375:in `block in with_transaction_returning_status'\n  from active_record/connection_adapters/abstract/database_statements.rb:278:in `transaction'\n  from active_record/transactions.rb:212:in `transaction'\n  from gitlab/database.rb:372:in `block in transaction'\n  from active_support/notifications.rb:180:in `block in instrument'\n  from active_support/notifications/instrumenter.rb:24:in `instrument'\n  from active_support/notifications.rb:180:in `instrument'\n  from gitlab/database.rb:371:in `transaction'\n  from active_record/transactions.rb:366:in `with_transaction_returning_status'\n  from active_record/transactions.rb:314:in `save'\n  from active_record/suppressor.rb:44:in `save'\n  from state_machines/integrations/active_record.rb:511:in `block in save'\n  from state_machines/integrations/active_record.rb:530:in `block in around_save'\n  from state_machines/transition_collection.rb:150:in `block in run_actions'\n  from state_machines/transition_collection.rb:170:in `catch_exceptions'\n  from state_machines/transition_collection.rb:148:in `run_actions'\n  from state_machines/transition_collection.rb:133:in `run_callbacks'\n  from state_machines/transition_collection.rb:224:in `run_callbacks'\n  from state_machines/transition_collection.rb:128:in `block in run_callbacks'\n  from state_machines/transition.rb:371:in `before'\n  from state_machines/transition.rb:190:in `block in run_callbacks'\n  from state_machines/transition.rb:292:in `block in pausable'\n  from state_machines/transition.rb:292:in `catch'\n  from state_machines/transition.rb:292:in `pausable'\n  from state_machines/transition.rb:190:in `run_callbacks'\n  from state_machines/transition_collection.rb:127:in `run_callbacks'\n  from state_machines/transition_collection.rb:212:in `run_callbacks'\n  from state_machines/transition_collection.rb:63:in `block (2 levels) in perform'\n  from state_machines/transition_collection.rb:63:in `catch'\n  from state_machines/transition_collection.rb:63:in `block in perform'\n  from state_machines/transition_collection.rb:182:in `block in within_transaction'\n  from state_machines/transition.rb:171:in `block in within_transaction'\n  from state_machines/machine.rb:1868:in `block in within_transaction'\n  from state_machines/integrations/active_record.rb:557:in `block in transaction'\n  from active_record/connection_adapters/abstract/database_statements.rb:278:in `transaction'\n  from active_record/transactions.rb:212:in `transaction'\n  from gitlab/database.rb:372:in `block in transaction'\n  from active_support/notifications.rb:180:in `block in instrument'\n  from active_support/notifications/instrumenter.rb:24:in `instrument'\n  from active_support/notifications.rb:180:in `instrument'\n  from gitlab/database.rb:371:in `transaction'\n  from state_machines/integrations/active_record.rb:556:in `transaction'\n  from state_machines/machine.rb:1868:in `within_transaction'\n  from state_machines/transition.rb:170:in `within_transaction'\n  from state_machines/transition_collection.rb:181:in `within_transaction'\n  from state_machines/transition_collection.rb:62:in `perform'\n  from state_machines/integrations/active_record.rb:530:in `around_save'\n  from state_machines/integrations/active_record.rb:511:in `save'\n  from state_machines/transition_collection.rb:154:in `block (2 levels) in run_actions'\n  from state_machines/transition_collection.rb:154:in `each'\n  from state_machines/transition_collection.rb:154:in `block in run_actions'\n  from state_machines/transition_collection.rb:170:in `catch_exceptions'\n  from state_machines/transition_collection.rb:148:in `run_actions'\n  from state_machines/transition_collection.rb:60:in `perform'\n  from state_machines/transition.rb:163:in `perform'\n  from state_machines/event.rb:155:in `fire'\n  from state_machines/event.rb:219:in `block in add_actions'\n  from state_machines/machine.rb:729:in `block (2 levels) in define_helper'\n  from ci/pipeline.rb:591:in `block (3 levels) in cancel_running'\n  from ci/pipeline.rb:589:in `each'\n  from ci/pipeline.rb:589:in `block (2 levels) in cancel_running'\n  from active_record/relation/batches.rb:136:in `block in find_in_batches'\n  from active_record/relation/batches.rb:238:in `block in in_batches'\n  from active_record/relation/batches.rb:222:in `loop'\n  from active_record/relation/batches.rb:222:in `in_batches'\n  from active_record/relation/batches.rb:135:in `find_in_batches'\n  from ci/pipeline.rb:585:in `block in cancel_running'\n  from gitlab/optimistic_locking.rb:15:in `block in retry_lock'\n  from active_record/connection_adapters/abstract/database_statements.rb:278:in `transaction'\n  from active_record/transactions.rb:212:in `transaction'\n  from gitlab/database.rb:372:in `block in transaction'\n  from active_support/notifications.rb:180:in `block in instrument'\n  from active_support/notifications/instrumenter.rb:24:in `instrument'\n  from active_support/notifications.rb:180:in `instrument'\n  from gitlab/database.rb:371:in `transaction'\n  from gitlab/optimistic_locking.rb:14:in `retry_lock'\n  from ci/pipeline.rb:584:in `cancel_running'\n  from gitlab/metrics/instrumentation.rb:162:in `cancel_running'\n  from ci/pipeline.rb:600:in `auto_cancel_running'\n  from gitlab/ci/pipeline/chain/cancel_pending_pipelines.rb:15:in `block (2 levels) in perform!'\n  from active_record/relation/batches.rb:70:in `block (2 levels) in find_each'\n  from active_record/relation/batches.rb:70:in `each'\n  from active_record/relation/batches.rb:70:in `block in find_each'\n  from active_record/relation/batches.rb:136:in `block in find_in_batches'\n  from active_record/relation/batches.rb:238:in `block in in_batches'\n  from active_record/relation/batches.rb:222:in `loop'\n  from active_record/relation/batches.rb:222:in `in_batches'\n  from active_record/relation/batches.rb:135:in `find_in_batches'\n  from active_record/relation/batches.rb:69:in `find_each'\n  from gitlab/ci/pipeline/chain/cancel_pending_pipelines.rb:14:in `block in perform!'\n  from gitlab/optimistic_locking.rb:15:in `block in retry_lock'\n  from active_record/connection_adapters/abstract/database_statements.rb:280:in `block in transaction'\n  from active_record/connection_adapters/abstract/transaction.rb:280:in `block in within_new_transaction'\n  from active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'\n  from active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'\n  from active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'\n  from active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'\n  from active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'\n  from active_record/connection_adapters/abstract/transaction.rb:278:in `within_new_transaction'\n  from active_record/connection_adapters/abstract/database_statements.rb:280:in `transaction'\n  from active_record/transactions.rb:212:in `transaction'\n  from gitlab/database.rb:372:in `block in transaction'\n  from active_support/notifications.rb:180:in `block in instrument'\n  from active_support/notifications/instrumenter.rb:24:in `instrument'\n  from active_support/notifications.rb:180:in `instrument'\n  from gitlab/database.rb:371:in `transaction'\n  from gitlab/optimistic_locking.rb:14:in `retry_lock'\n  from gitlab/ci/pipeline/chain/cancel_pending_pipelines.rb:13:in `perform!'\n  from gitlab/ci/pipeline/chain/sequence.rb:19:in `block in build!'\n  from gitlab/ci/pipeline/chain/sequence.rb:16:in `each'\n  from gitlab/ci/pipeline/chain/sequence.rb:16:in `build!'\n  from ci/create_pipeline_service.rb:84:in `execute'\n  from ci/create_pipeline_service.rb:102:in `execute!'\n  from git/base_hooks_service.rb:61:in `create_pipelines'\n  from gitlab/metrics/instrumentation.rb:162:in `create_pipelines'\n  from git/base_hooks_service.rb:13:in `execute'\n  from gitlab/metrics/instrumentation.rb:162:in `execute'\n  from git/branch_hooks_service.rb:10:in `execute'\n  from gitlab/metrics/instrumentation.rb:162:in `execute'\n  from git/branch_push_service.rb:71:in `execute_related_hooks'\n  from gitlab/metrics/instrumentation.rb:162:in `execute_related_hooks'\n  from git/branch_push_service.rb:28:in `execute'\n  from gitlab/metrics/instrumentation.rb:162:in `execute'\n  from git/process_ref_changes_service.rb:57:in `block in process_changes'\n  from git/process_ref_changes_service.rb:47:in `each'\n  from git/process_ref_changes_service.rb:47:in `process_changes'\n  from gitlab/metrics/instrumentation.rb:162:in `process_changes'\n  from git/process_ref_changes_service.rb:20:in `block in process_changes_by_action'\n  from git/process_ref_changes_service.rb:19:in `each'\n  from git/process_ref_changes_service.rb:19:in `process_changes_by_action'\n  from gitlab/metrics/instrumentation.rb:162:in `process_changes_by_action'\n  from git/process_ref_changes_service.rb:10:in `execute'\n  from gitlab/metrics/instrumentation.rb:162:in `execute'\n  from post_receive.rb:114:in `process_ref_changes'\n  from post_receive.rb:60:in `process_project_changes'\n  from post_receive.rb:32:in `perform'\n  from sidekiq/processor.rb:192:in `execute_job'\n  from sidekiq/processor.rb:165:in `block (2 levels) in process'\n  from sidekiq/middleware/chain.rb:128:in `block in invoke'\n  from gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'\n  from gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:40:in `perform'\n  from gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'\n  from sidekiq/middleware/chain.rb:130:in `block in invoke'\n  from gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'\n  from gitlab/sidekiq_middleware/worker_context/server.rb:17:in `block in call'\n  from gitlab/application_context.rb:70:in `block in use'\n  from labkit/context.rb:36:in `with_context'\n  from gitlab/application_context.rb:70:in `use'\n  from gitlab/application_context.rb:27:in `with_context'\n  from gitlab/sidekiq_middleware/worker_context/server.rb:15:in `call'\n  from sidekiq/middleware/chain.rb:130:in `block in invoke'\n  from gitlab/sidekiq_status/server_middleware.rb:7:in `call'\n  from sidekiq/middleware/chain.rb:130:in `block in invoke'\n  from gitlab/sidekiq_versioning/middleware.rb:9:in `call'\n  from sidekiq/middleware/chain.rb:130:in `block in invoke'\n```\n\u003c/details\u003e","state":"closed","created_at":"2021-05-31T13:05:39.223Z","updated_at":"2021-06-29T08:11:15.593Z","closed_at":"2021-06-29T07:49:19.788Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Continuous Integration","Category:Pipeline Authoring","backend","devops::verify","group::pipeline authoring","priority::2","regression","regression:12.3","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332252","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332252","notes":"https://gitlab.com/api/v4/projects/278964/issues/332252/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332252/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332252","relative":"#332252","full":"gitlab-org/gitlab#332252"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":87965544,"iid":332239,"project_id":278964,"title":"Create cadence and start iteration button on New cadence form","description":"Followup from https://gitlab.com/gitlab-org/gitlab/-/issues/322741#note_587153794","state":"closed","created_at":"2021-05-31T10:10:17.125Z","updated_at":"2021-11-03T20:18:13.323Z","closed_at":"2021-11-03T20:18:13.306Z","closed_by":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"labels":["devops::plan","documentation","frontend","group::project management","missed:14.0","missed:14.1","missed:14.2","missed:14.3","missed:14.4","section::dev","tw-weight::3","workflow::in review","🍉"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332239","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332239","notes":"https://gitlab.com/api/v4/projects/278964/issues/332239/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332239/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332239","relative":"#332239","full":"gitlab-org/gitlab#332239"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87921672,"iid":332208,"project_id":278964,"title":"Add index on  merge_requests for 'draft'","description":"https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62718#note_587361249\n\n\u003e I know its cardinality is just 2(true, false) but I believe that the draft MRs will be quite low compared to the rest so a compound index like `(target_project_id, draft)` could be useful\n\nRelated to #228685","state":"closed","created_at":"2021-05-30T04:00:22.231Z","updated_at":"2021-10-28T13:56:28.192Z","closed_at":"2021-06-04T16:58:15.005Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Category:Source Code Management","backend","devops::create","group::source code","merge requests","section::dev","type::maintenance"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332208","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332208","notes":"https://gitlab.com/api/v4/projects/278964/issues/332208/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332208/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332208","relative":"#332208","full":"gitlab-org/gitlab#332208"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87878103,"iid":332151,"project_id":278964,"title":"Improve repo renames on Geo secondary","description":"_(this is a spinoff from https://gitlab.com/gitlab-org/gitlab/-/issues/323238#note_524532325 and it's surrounding discussion)_\n\n### Problem\n\nBecause of how the repositories are stored in the database by Gitaly Cluster (i.e. Praefect), renames are tricky and might cause failures.  On heavily loaded Praefect clusters, this can lead to inconsistencies between what is on disk, and what is in the Praefect database. This requires manual steps to recover. \n\nGeo renames/moves repositories into two directories: `@failed-geo-sync` and `@geo-temporary`. Failures in moving these repositories can lead to sync failures, which require modifying the filesystem or db to clear.\n\n\n#### One example of steps to reproduce\n\n\u003e\u003e\u003e\nI'm running [3k + 3k ref Geo reference architecture](https://gitlab.com/gitlab-org/quality/gitlab-environment-toolkit-configs/Geo/-/tree/master/3k_3k) for testing. And I've created a bunch of `gitlab-shell` projects (no forks) with the following script: https://gitlab.com/-/snippets/2149641\n\nThe Geo secondary is currently in this state:\n\n![2021-07-14_12-19](https://gitlab.com/gitlab-org/gitlab/uploads/3794dfb8a43c862ef15106382235873b/2021-07-14_12-19.png)\n\nWhen I'm looking at the Geo Replication status page I'm seeing these types of errors:\n\n* `Synchronization failed - Error syncing repository: Temporary repository can not be removed`\n* `Synchronization failed - Error syncing repository: Can not move temporary repository to canonical location`\n* `Synchronization failed - Error syncing repository: 2:mutator call: route repository mutator: get primary: repository \"default\"/\"@geo-temporary/@hashed/fd/87/fd8751df0d48ed07232aa08e9845c135af55152c8e87d804faf1b8f13716156b.git\" not found.`\n* `Verification failed - Repository checksum mismatch`\n\nThose `verification failed` only have 1 retry, but the other errors all have 400-500 retries and some even up to 1500 retries. (it's running for a few weeks now)\n\nI'm not sure yet what the exact cause is, but it seems this method of using `@geo-temporary` repositories and then moving them isn't working well with Gitaly cluster.\n\u003e\u003e\u003e\n\n### Proposal\n\n* Gitaly team is working on https://gitlab.com/gitlab-org/gitaly/-/issues/3832 and https://gitlab.com/gitlab-org/gitaly/-/issues/3485. Once either of those are implemented, verify that they prevent running into the consistency issue, or make necessary changes to Geo .\n* Implement a command to clean up currently impacted systems using the praefect `list-untracked-repositories` and `remove-repository` commands\n* We should consider documenting some sizing recommendations for Praefect. Using a stock 3k reference architecture, we started seeing the issues on a Geo secondary after we created around 40,000 repositories. Even doubling the CPU/Memory on the database node didn't speed the db up enough to avoid the timeouts.","state":"closed","created_at":"2021-05-28T14:25:42.175Z","updated_at":"2022-11-15T20:48:18.997Z","closed_at":"2022-08-31T14:42:30.584Z","closed_by":{"id":787914,"username":"ibaum","name":"Ian Baum","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7c508dc85ddd5049564a95662311543b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ibaum"},"labels":["Category:Disaster Recovery","Category:Gitaly","Enterprise Edition","Geo Administration","GitLab Premium","customer","data integrity","devops::systems","group::gitaly","missed-SLO","missed:15.3","priority::2","section::enablement","severity::2","type::bug","workflow::blocked"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":787914,"username":"ibaum","name":"Ian Baum","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7c508dc85ddd5049564a95662311543b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ibaum"}],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":{"id":787914,"username":"ibaum","name":"Ian Baum","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7c508dc85ddd5049564a95662311543b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ibaum"},"user_notes_count":97,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332151","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332151","notes":"https://gitlab.com/api/v4/projects/278964/issues/332151/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332151/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332151","relative":"#332151","full":"gitlab-org/gitlab#332151"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5624,"epic":{"id":228554,"iid":5624,"title":"Gitaly + Geo: Address Praefect performance concerns when using Gitaly Cluster + Geo","url":"/groups/gitlab-org/-/epics/5624","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87858738,"iid":332139,"project_id":278964,"title":"Vulnerability counts are not updated when a scanner filter is applied","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nWe need to filter the vulnerabilities count for scannerId in the Vulnerability Report when activities are selected. This means adding `scannerId` to the `vulnerabilitySeveritiesCount` GraphQL query and VulnerabilitySeveritiesCountResolver. No modification to VulnerabilitiesFinder should be necessary.\n\n### Summary\n\nOn the vulnerability report, when a scanner filter is applied:\n\n||\n|-|\n|![ksnip_20210527-220411](/uploads/a31a781375862cef9a2ac6c40a081393/ksnip_20210527-220411.png)|\n\nThe counts at the top are incorrectly showing the counts for all vulnerabilities without the scanner filter applied, instead of the correct count with the scanner filter applied:\n\n|||\n|-|-|\n|![ksnip_20210527-220635](/uploads/ed88187ed7d36a4c5a7170664441d06b/ksnip_20210527-220635.png)|![ksnip_20210527-220722](/uploads/1c3ea2b14ae1d235bb1fd402f87a8fd3/ksnip_20210527-220722.png)|\n\n### Steps to reproduce\n\n1. Clone this project locally: https://gitlab.com/gitlab-org/secure/security-reports\n\n2. Run a pipeline on the project so that the vulnerabilities are populated.\n\n3. Go to the vulnerability report and note the counts at the top. Select a scanner filter and note that the counts at the top do not change when the scanner filter is changed.\n\n### Possible fixes\n\nFor the GraphQL queries in this file:\n\nhttps://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/security_dashboard/graphql/queries/vulnerability_severities_count.query.graphql\n\nThey do not support the new `scannerId` property that was added to the vulnerabilities search, i.e.:\n\n||\n|-|\n|![ksnip_20210527-222613](/uploads/958182cdfe24980ba6944a232502d597/ksnip_20210527-222613.png)|\n\nWe need to add support for the `scannerId` property to the vulnerability severities count GraphQL query as well.\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation: Update GraphQL docs\n- [ ] Testing: Update/Add tests for vulnerabilitySeveritiesCount\n\n\n## Implementation plan\n\n- [ ] ~backend Add `scannerId` to the `vulnerabilitySeveritiesCount` GraphQL query\n- [ ] ~backend Add `scannerId` to the `VulnerabilitySeveritiesCountResolver` GraphQL resolver","state":"closed","created_at":"2021-05-28T08:26:55.062Z","updated_at":"2021-06-17T19:28:03.381Z","closed_at":"2021-06-09T15:28:28.529Z","closed_by":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"labels":["Category:Vulnerability Management","backend","backend-weight::1","devops::secure","feature::enhancement","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"}],"author":{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"},"type":"ISSUE","assignee":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332139","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332139","notes":"https://gitlab.com/api/v4/projects/278964/issues/332139/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332139/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332139","relative":"#332139","full":"gitlab-org/gitlab#332139"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87846129,"iid":332123,"project_id":278964,"title":"GitHub API (Octokit) search query can grow too long and run into a HTTP 414 (URI Too Long)","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Update\n\nProposed solution for this issue: Use GitHub GraphQL API to perform this query instead of REST GET request. This will definitely increase the possible query length to the limit that seems to be unreachable. GET query string length limit that causes such error is 2KB and GraphQL body limit is 8KB as it uses POST (see [below](https://gitlab.com/gitlab-org/gitlab/-/issues/332123#possible-solution)).\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nWhen mirroring or importing repositories from a GitHub instance, the Octokit client is used.\nWhen a search term is presented on the repository listing UI, the search query built by Octokit tries to inject every collaborated repository via `repo:` terms, and every discovered organization via `org:` terms in addition to the base query.\n\nWhen these lists of repos or orgs are fairly long in length, it causes the resulting search API v3 request to be extremely long due to use of URI parameters.\n\nThe search fails with a HTTP 414 (URI Too Long) returned from the GitHub instance.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nEnable feature flag to use the new GitHub client implementation (legacy implementation appeared too slow at returning even listing results):\n\n```\nFeature.enable(:remove_legacy_github_client)\n```\n\n1. Create a large number of orgs and repos on a GitHub instance\n2. Use GitHub integration in GitLab via a personal authentication token\n3. List importable repositories via the GitHub integration in the New Project screen\n4. Observe the list to be long when scrolling the list of repositories on GitHub, decide to search a name instead\n5. Enter search term in top right search bar on this page, issue the search\n6. Error appears: `Requesting your github repositories failed`\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nSearching for repositories by name on GitHub import page fails with an error\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nSearching for repositories by name on GitHub import page must show results\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n![image](/uploads/42d7eaa92396b844bdf02ce55a65a33f/image.png)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\nThis was originally reported over a self-managed GitLab instance, importing against a GitHub Enterprise instance. Version of GitLab used was: v13.9.0-ee.\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible solution\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e\n\nThere are two directions that will help us to prevent such cases:\n\n- Use GitHub GraphQL API to perform this query instead of REST GET request. This will definitely increase the possible query length to the limit that seems to be unreachable. GET query string length limit that causes such error is 2KB and GraphQL body limit is 8KB as it uses POST (this issue).\n\n- Decrease search query by adding filters where to find repositories: owned, collaborated or in the specific organization (for this thing there is [another issue](https://gitlab.com/gitlab-org/gitlab/-/issues/382196)).\n\nMore detailed logs including the very large API query is available on customer's ticket https://gitlab.zendesk.com/agent/tickets/213714 (internal, https://about.gitlab.com/handbook/support/internal-support/#viewing-support-tickets)","state":"closed","created_at":"2021-05-28T01:35:34.223Z","updated_at":"2022-12-24T04:28:24.332Z","closed_at":"2022-12-19T14:11:31.181Z","closed_by":{"id":2277639,"username":"knockfog-ext","name":"Rostyslav Safonov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2277639/avatar.png","web_url":"https://gitlab.com/knockfog-ext"},"labels":["Category:Importers","Deliverable","Importer:GitHub","SoftServe::Import","backend","customer","devops::manage","group::import","priority::3","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":2277639,"username":"knockfog-ext","name":"Rostyslav Safonov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2277639/avatar.png","web_url":"https://gitlab.com/knockfog-ext"}],"author":{"id":7536567,"username":"hchouraria","name":"Harsh Chouraria","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7536567/avatar.png","web_url":"https://gitlab.com/hchouraria"},"type":"ISSUE","assignee":{"id":2277639,"username":"knockfog-ext","name":"Rostyslav Safonov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2277639/avatar.png","web_url":"https://gitlab.com/knockfog-ext"},"user_notes_count":55,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332123","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332123","notes":"https://gitlab.com/api/v4/projects/278964/issues/332123/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332123/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332123","relative":"#332123","full":"gitlab-org/gitlab#332123"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3050,"epic":{"id":39430,"iid":3050,"title":"🐞 GitHub Importer bugs","url":"/groups/gitlab-org/-/epics/3050","group_id":9970},"iteration":null,"health_status":null},{"id":87834721,"iid":332100,"project_id":278964,"title":"Insert emoji in the Content Editor","description":"## Problem to solve :thinking: \n\nWhen using the Content Editor to write Markdown in a WYSIWYG environment, we want to provide as much guidance as possible when inserting rich content. There's no more rich content in the world than emoji. :stuck_out_tongue_winking_eye: \n\nCurrently, if you know the emoji name like `:slight_smile:` you can insert an emoji using the Content Editor. When the page is saved, the emoji is rendered correctly. Alternatively, you can paste emoji in from another editor and it will save correctly. But that's not as intuitive as it should be. :face_palm_tone1: \n\n## Proposal :bulb: \n\nAdd an icon to the toolbar of the Content Editor that brings up an emoji picker. Trigger this same picker inline with the content when the user types `:`\n\n## Details\n\nFor consistency, we should use the icon and picker from the issue view, when you add a reaction. \n\n![Screen_Shot_2022-07-06_at_4.53.40_PM](https://gitlab.com/gitlab-org/gitlab/uploads/58c9b3a713c27963252237154eb140b4/Screen_Shot_2022-07-06_at_4.53.40_PM.png)\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-05-27T19:18:18.073Z","updated_at":"2022-10-12T08:41:49.887Z","closed_at":"2022-10-05T04:53:37.460Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","GitLab Free","Stretch","devops::create","direction","frontend","group::editor","missed:15.2","missed:15.3","quad-planning::complete-no-action","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332100","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332100","notes":"https://gitlab.com/api/v4/projects/278964/issues/332100/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332100/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332100","relative":"#332100","full":"gitlab-org/gitlab#332100"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5438,"epic":{"id":209984,"iid":5438,"title":"GitLab Flavored Markdown extensions for Content Editor","url":"/groups/gitlab-org/-/epics/5438","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":87834716,"iid":332097,"project_id":278964,"title":"Render Kroki diagrams in the Content Editor","description":"Placeholder issue for rendering Kroki diagrams that already exist in the document in the Content Editor.\n\nDetails to be added.","state":"closed","created_at":"2021-05-27T19:18:11.827Z","updated_at":"2022-03-28T13:48:42.982Z","closed_at":"2022-03-28T13:48:42.959Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","GitLab Free","Stretch","devops::create","frontend","group::editor","missed:14.8","quad-planning::complete-no-action","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332097","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332097","notes":"https://gitlab.com/api/v4/projects/278964/issues/332097/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332097/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332097","relative":"#332097","full":"gitlab-org/gitlab#332097"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6547,"epic":{"id":324245,"iid":6547,"title":"Render all Wiki supported GFM content in the Content Editor","url":"/groups/gitlab-org/-/epics/6547","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87834714,"iid":332095,"project_id":278964,"title":"Render PlantUML diagrams in the Content Editor","description":"## Problem to solve\n\nPlantUML diagrams are supported in GFM but they are currently unable to be rendered in the Content Editor. \n\n## Proposal\n\nExtend the Content Editor to support rendering PlantUML nodes in the document.","state":"closed","created_at":"2021-05-27T19:18:11.042Z","updated_at":"2022-04-18T07:01:26.260Z","closed_at":"2022-03-28T13:48:40.251Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","Deliverable","GitLab Free","backend","devops::create","frontend","group::editor","missed-deliverable","missed:14.8","quad-planning::complete-no-action","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332095","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332095","notes":"https://gitlab.com/api/v4/projects/278964/issues/332095/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332095/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332095","relative":"#332095","full":"gitlab-org/gitlab#332095"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6547,"epic":{"id":324245,"iid":6547,"title":"Render all Wiki supported GFM content in the Content Editor","url":"/groups/gitlab-org/-/epics/6547","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87834712,"iid":332093,"project_id":278964,"title":"Preview Mermaid diagrams in the Content Editor","description":"## Problem to solve\n\nWhen working in the Content Editor you get a rich text Markdown editing experience. There are, however, some types of content that are still written in code. Mermaid diagrams are an example. The syntax supported inside code blocks and they can be written in the content editor. But to get a preview of the diagram, you have to switch over to the raw source editor and use the Preview tab there. You shouldn't have to leave the content editor to preview the Mermaid diagram. \n\n## Proposal\n\nIntroduce a Preview button, icon, or tab in the Mermaid diagram blocks in the content editor. Clicking this will generate a preview of the diagram and a way to return to the editing mode.\n\n| Toolbar | Blank state | Popup | Preview |  \n| ------ | ------ | ------ | ------ |\n| ![image](/uploads/fab3edf17e5a0131ff05e24f03012c83/image.png) | ![image](/uploads/13b00f99fcaee7c671185f1b77f69ad4/image.png) | ![image](/uploads/85211d0549878a6dc730d6fbd6738899/image.png) | ![image](/uploads/0e9e8e6a51c4cadf5effc9d86527459b/image.png) |","state":"closed","created_at":"2021-05-27T19:18:10.289Z","updated_at":"2022-06-21T12:02:14.504Z","closed_at":"2022-06-16T19:16:55.961Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","Deliverable","GitLab Free","Stretch","devops::create","frontend","group::editor","quad-planning::complete-no-action","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":48,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332093","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332093","notes":"https://gitlab.com/api/v4/projects/278964/issues/332093/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332093/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332093","relative":"#332093","full":"gitlab-org/gitlab#332093"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5438,"epic":{"id":209984,"iid":5438,"title":"GitLab Flavored Markdown extensions for Content Editor","url":"/groups/gitlab-org/-/epics/5438","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":87832740,"iid":332075,"project_id":278964,"title":"Edit Subscript text in the Content Editor","description":"## Problem to solve\n\nIn order to support the full [GitLab Flavored Markdown spec](https://docs.gitlab.com/ee/user/markdown.html#gitlab-flavored-markdown-gfm), the Content Editor must be support rendering and editing all the elements of the standard implementation .\n\nHere, we are focused on editing Subscript text.\n\n### Intended users\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n\n### User experience goal\n\nThe user should be able to create and edit Subscript text in the Content Editor.\n\n## Proposal\n\nCreate an extension for the Content Editor that supports editing Subscript text.\n\nAn icon should be displayed in the toolbar. The toolbar icon will apply or remove Subscript styling to any selected text and should reflect the state of the currently selected span of content. If the content is mixed (for example, the selected characters contain some bold and some regular text) then we should indicate the inactive state. \n\nNote, per the GFM spec: \n\n\u003eCommonMark and GitLab Flavored Markdown don’t support the Redcarpet superscript syntax ( x^2 ). Use the standard HTML syntax for superscripts and subscripts\n\n## Details\n\nExtensions to the Content Editor require a few specific details: \n\n|  |  |\n|---|---|\n| Input Rule | N/A |\n| Paste Rule | [paste_rule] |\n| Toolbar Button | [icon] |\n| Keyboard Shortcut | [shortcut] |\n| Instrumentation | [event_name] |\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/workflow.html\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html --\u003e\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n### Available Tier\n\nThis feature, as with the content editor itself, is available on both SaaS and Self-managed **Free** tiers\n\n### What does success look like, and how can we measure that?\n\nAn event should be added to track creation of a new subscript text node through the UI. We aren't interested in tracking every instance of subscript text in existing content, but it would be great to know how often this extension is invoked through the editor, and whether it is done by using the toolbar, keyboard shortcut, or by typing directly into the editor. \n\n### What is the type of buyer?\n\n\u003c!-- What is the buyer persona for this feature? See https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/buyer-persona/\nIn which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#three-tiers --\u003e\n\n### Is this a cross-stage feature?\n\n\u003c!-- Communicate if this change will affect multiple Stage Groups or product areas. We recommend always start with the assumption that a feature request will have an impact into another Group. Loop in the most relevant PM and Product Designer from that Group to provide strategic support to help align the Group's broader plan and vision, as well as to avoid UX and technical debt. https://about.gitlab.com/handbook/product/#cross-stage-features --\u003e\n\n### Links / references\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2021-05-27T18:16:59.117Z","updated_at":"2022-07-04T18:15:54.801Z","closed_at":"2022-07-04T18:15:54.782Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","GitLab Free","devops::create","frontend","group::editor","section::dev","type::feature"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332075","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332075","notes":"https://gitlab.com/api/v4/projects/278964/issues/332075/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332075/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332075","relative":"#332075","full":"gitlab-org/gitlab#332075"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5438,"epic":{"id":209984,"iid":5438,"title":"GitLab Flavored Markdown extensions for Content Editor","url":"/groups/gitlab-org/-/epics/5438","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":87832574,"iid":332073,"project_id":278964,"title":"Update styling of yaml editor in Network Policy Editor","description":"The following discussion from !62344 should be addressed:\n\n- [ ] @annabeldunstone started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62344#note_583647107):  (+2 comments)\n\n    \u003e Can we fix the padding of the actual editor so that it fills the box?\n    \u003e \n    \u003e | Current | Proposed (ignore the spacing of the file header) |\n    \u003e | ------ | ------ |\n    \u003e | ![Screen_Shot_2021-05-24_at_9.17.26_AM](/uploads/848989f466a087b87e4787b93dbcd875/Screen_Shot_2021-05-24_at_9.17.26_AM.png) | ![Screen_Shot_2021-05-24_at_9.17.12_AM](/uploads/d2e3fe6043dad156d73f13fc3a518942/Screen_Shot_2021-05-24_at_9.17.12_AM.png) |","state":"closed","created_at":"2021-05-27T18:13:12.239Z","updated_at":"2021-09-18T07:03:21.375Z","closed_at":"2021-09-07T15:24:22.373Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","Deliverable","devops::govern","frontend","frontend-weight::2","group::security policies","section::sec","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332073","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332073","notes":"https://gitlab.com/api/v4/projects/278964/issues/332073/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332073/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332073","relative":"#332073","full":"gitlab-org/gitlab#332073"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87832483,"iid":332072,"project_id":278964,"title":"Follow-up from \"Redesign policy editor page\"","description":"@aturinske Thank you :smile: \n\nLooks great, I just have a few more tiny suggestions:\n\n-------------------------------------------------------\n\n- [x] 1. Can we make this top border `1px`?\n\n\u003cimg src=\"/uploads/7dde1981d999513522810207b2a60b9c/Screen_Shot_2021-05-26_at_8.54.05_AM.png\" width=\"300px\"\u003e\n\n-------------------------------------------------------\n\n- [x] 2. Border radius is getting cut off here:\n\n\u003cimg src=\"/uploads/51c12d89bedb7be3769507413989b8e1/Screen_Shot_2021-05-26_at_8.55.17_AM.png\" width=\"300px\"\u003e\n\n-------------------------------------------------------\n\n- [x] 3. `Add rule` and `Add action` have incorrect styling. Let's use the `plus` [icon](https://gitlab-org.gitlab.io/gitlab-svgs/?q=plus), with `4px` between the icon and `Add ...` text. \n\n| Design | Current MR |\n| ------ | ------ |\n| ![Screen_Shot_2021-05-26_at_8.56.44_AM](/uploads/2a345d09276e9b321ee969724066b951/Screen_Shot_2021-05-26_at_8.56.44_AM.png) | ![Screen_Shot_2021-05-26_at_9.01.12_AM](/uploads/4d1d086f4e02993617f1bed784cfdc4c/Screen_Shot_2021-05-26_at_9.01.12_AM.png) |\n\n\n-------------------------------------------------------\n\n- [x] 4. On smaller widths can we make the policy preview section full width?\n\n\n\u003cimg src=\"/uploads/18632c30befffc709b0f4f061eca6a9b/Screen_Shot_2021-05-26_at_8.55.43_AM.png\" width=\"600px\"\u003e","state":"closed","created_at":"2021-05-27T18:10:42.054Z","updated_at":"2021-09-18T07:03:21.418Z","closed_at":"2021-09-02T18:26:43.656Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","Deliverable","devops::govern","frontend","frontend-weight::3","group::security policies","section::sec","workflow::verification"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":201566,"username":"annabeldunstone","name":"Annabel Dunstone Gray","state":"active","avatar_url":"https://secure.gravatar.com/avatar/85c0203926134720f9a9aa8c6e264c78?s=80\u0026d=identicon","web_url":"https://gitlab.com/annabeldunstone"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332072","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332072","notes":"https://gitlab.com/api/v4/projects/278964/issues/332072/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332072/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332072","relative":"#332072","full":"gitlab-org/gitlab#332072"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5362,"epic":{"id":198770,"iid":5362,"title":"Allow Users to Edit yaml-mode Scan Execution Policies in the Policy UI","url":"/groups/gitlab-org/-/epics/5362","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87832179,"iid":332071,"project_id":278964,"title":"Edit Superscript text in the Content Editor","description":"## Problem to solve\n\nIn order to support the full [GitLab Flavored Markdown spec](https://docs.gitlab.com/ee/user/markdown.html#gitlab-flavored-markdown-gfm), the Content Editor must be support rendering and editing all the elements of the standard implementation .\n\nHere, we are focused on editing Superscript text.\n\n### Intended users\n\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n\n### User experience goal\n\nThe user should be able to create and edit Superscript text in the Content Editor.\n\n## Proposal\n\nCreate an extension for the Content Editor that supports editing Superscript text.\n\nAn icon should be displayed in the toolbar. The toolbar icon will apply or remove Superscript styling to any selected text and should reflect the state of the currently selected span of content. If the content is mixed (for example, the selected characters contain some bold and some regular text) then we should indicate the inactive state. \n\nNote, per the GFM spec: \n\n\u003eCommonMark and GitLab Flavored Markdown don’t support the Redcarpet superscript syntax ( x^2 ). Use the standard HTML syntax for superscripts and subscripts\n\n## Details\n\nExtensions to the Content Editor require a few specific details: \n\n|  |  |\n|---|---|\n| Input Rule | N/A |\n| Paste Rule | [paste_rule] |\n| Toolbar Button | [icon] |\n| Keyboard Shortcut | [shortcut] |\n| Instrumentation | [event_name] |\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/workflow.html\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html --\u003e\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n### Available Tier\n\nThis feature, as with the content editor itself, is available on both SaaS and Self-managed **Free** tiers\n\n### What does success look like, and how can we measure that?\n\nAn event should be added to track creation of a new superscript text node through the UI. We aren't interested in tracking every instance of superscript text in existing content, but it would be great to know how often this extension is invoked through the editor, and whether it is done by using the toolbar, keyboard shortcut, or by typing directly into the editor. \n\n### What is the type of buyer?\n\n\u003c!-- What is the buyer persona for this feature? See https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/buyer-persona/\nIn which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#three-tiers --\u003e\n\n### Is this a cross-stage feature?\n\n\u003c!-- Communicate if this change will affect multiple Stage Groups or product areas. We recommend always start with the assumption that a feature request will have an impact into another Group. Loop in the most relevant PM and Product Designer from that Group to provide strategic support to help align the Group's broader plan and vision, as well as to avoid UX and technical debt. https://about.gitlab.com/handbook/product/#cross-stage-features --\u003e\n\n### Links / references\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2021-05-27T18:01:59.648Z","updated_at":"2022-07-06T13:06:10.226Z","closed_at":"2022-07-06T13:06:10.208Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","GitLab Free","devops::create","frontend","group::editor","section::dev","type::feature"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332071","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332071","notes":"https://gitlab.com/api/v4/projects/278964/issues/332071/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332071/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332071","relative":"#332071","full":"gitlab-org/gitlab#332071"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5438,"epic":{"id":209984,"iid":5438,"title":"GitLab Flavored Markdown extensions for Content Editor","url":"/groups/gitlab-org/-/epics/5438","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":87831597,"iid":332069,"project_id":278964,"title":"GraphQL endpoint for CI usage historical data by month/project","description":"\n### Problem to solve \n\nWe need to add a way to provide data to ~frontend, via a GraphQL endpoint to display on the  `CI/CD Analytics` page CI minutes usage data by month and by the project in a given month.\n\n### Proposal \n\n#### **The GraphQL response for CI minutes usage:**\n\n\n\n```javascript\n// ciMinutesUsage.nodes\n\n[\n  {\n    \"month\": \"January\",\n    \"minutes\": 310,\n    \"projects\": [\n      { \"name\": \"Project-1\", \"minutes\": 100 },\n      { \"name\": \"Project-2\", \"minutes\": 120 },\n      { \"name\": \"Project-3\", \"minutes\": 90 },\n    ],\n  },\n  {\n    \"month\": \"February\",\n    \"minutes\": 310,\n    \"projects\": [\n      { \"name\": \"Project-1\", \"minutes\": 100 },\n      { \"name\": \"Project-2\", \"minutes\": 120 },\n      { \"name\": \"Project-3\", \"minutes\": 90 },\n    ],\n  },\n];\n```\n\n**The example GraphQL query**\n\n```graphql\nquery {\n  ciMinutesUsage {\n    nodes {\n      month\n      minutes\n      projects {\n        nodes {\n          name\n          minutes\n        }\n      }\n    }\n  }\n}\n```","state":"closed","created_at":"2021-05-27T17:44:12.977Z","updated_at":"2021-09-23T18:29:11.899Z","closed_at":"2021-07-30T18:29:42.106Z","closed_by":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"labels":["CI minutes","Category:Continuous Integration","Deliverable","GitLab Core","GitLab Free","Verify::P1","backend","devops::verify","group::pipeline execution","section::ops","type::feature","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"}],"author":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"type":"ISSUE","assignee":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"user_notes_count":33,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332069","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332069","notes":"https://gitlab.com/api/v4/projects/278964/issues/332069/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332069/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332069","relative":"#332069","full":"gitlab-org/gitlab#332069"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":87831127,"iid":332068,"project_id":278964,"title":"Use test objects to verify the LicenseType GraphQL type","description":"The following discussion from !62510 should be addressed:\n\n- [ ] @minac started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62510#note_586253726):  (+1 comment)\n\n    \u003e **suggestion (non-blocking):** I am putting this as a non-blocking suggestion as it's not a convention yet but this test does not really test if we are serializing the correct values.\n    \u003e \n    \u003e We should ideally test the results of our GraphQL types by resolving test objects. An example spec file using this approach can be seen here: https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/spec/graphql/types/scan_type_spec.rb#L13-41.","state":"closed","created_at":"2021-05-27T17:29:52.884Z","updated_at":"2021-10-28T13:56:28.721Z","closed_at":"2021-06-01T20:12:24.618Z","closed_by":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"labels":["[deprecated] Category:Provision","backend","devops::fulfillment","group::provision","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"}],"author":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"type":"ISSUE","assignee":{"id":4159190,"username":"tyleramos","name":"Tyler Amos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4159190/avatar.png","web_url":"https://gitlab.com/tyleramos"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332068","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332068","notes":"https://gitlab.com/api/v4/projects/278964/issues/332068/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332068/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332068","relative":"#332068","full":"gitlab-org/gitlab#332068"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87830741,"iid":332066,"project_id":278964,"title":"[BE] Bulk status change for findings in the pipeline security dashboard","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nRecently, with https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61536 we started using the `vulnerability_list.vue` component in the `Pipeline Security Dashboard`. This list is backed by GraphQL and was already used in the `Project`, `Group` and `Instance`. The bulk update works only for the vulnerabilities, we need to write a different query for the findings.\n\n## Steps to reproduce:\n\n1. Fork a repository (such as https://gitlab.com/gitlab-examples/security/security-reports/)\n2. Run the pipeline\n3. Enable the feature flag: `:pipeline_security_dashboard_graphql`\n4. Go to Project \u003e CI/CD \u003e Pipelines \u003e Your Pipeline \u003e Security Tab\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Implementation plan\n\n- [x] ~backend Create new mutation `vulnerabilityFindingDismiss`\n  - Similar structure to [ee/app/assets/javascripts/security_dashboard/graphql/mutations/vulnerability_dismiss.mutation.graphql](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_dashboard/graphql/mutations/vulnerability_dismiss.mutation.graphql) and [ee/app/graphql/mutations/vulnerabilities/dismiss.rb](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/graphql/mutations/vulnerabilities/dismiss.rb)\n  - Needs to use `VulnerabilityFeedback::CreateService` to create the dismissal feedback\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~3207279\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-05-27T17:20:23.016Z","updated_at":"2022-07-22T16:23:05.795Z","closed_at":"2022-01-12T14:48:09.954Z","closed_by":{"id":487608,"username":"Quintasan","name":"Michał Zając","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"labels":["Category:Vulnerability Management","SUS::FY22 Q1 - Incomplete","backend","backend-weight::2","devops::secure","documentation","group::threat insights","missed:14.1","missed:14.2","missed:14.3","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[],"author":{"id":4906978,"username":"lkerr","name":"Lindsay Kerr","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906978/avatar.png","web_url":"https://gitlab.com/lkerr"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332066","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":2,"blocking_issues_count":1,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332066","notes":"https://gitlab.com/api/v4/projects/278964/issues/332066/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332066/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332066","relative":"#332066","full":"gitlab-org/gitlab#332066"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4969,"epic":{"id":148197,"iid":4969,"title":"Convert the pipeline security tab to use GraphQL \u0026 shared UI components","url":"/groups/gitlab-org/-/epics/4969","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87830124,"iid":332063,"project_id":278964,"title":"Changing Releases page sort causes errors after paginating","description":"### Summary\n\nUsing the sort controls on the **Releases** pages after pagination leads to unexpected results and/or errors.\n\n### Steps to reproduce\n\n1. Navigate to https://staging.gitlab.com/nfriend/public-release-test/-/releases\n1. Click the **Next** button\n1. Once the page finished loading, change the sort from **Released date** to **Created date**\n\n**Issue \u003cspan\u003e#\u003c/span\u003e1:** The page shows an empty state with pagination controls\n\n4. Then, click the **Prev** button\n1. Refresh the page\n\n**Issue \u003cspan\u003e#\u003c/span\u003e2:** The page shows an error and doesn't load any releases\n\n### Output of checks\n\nThis bug happens on staging (but will soon happen on GitLab.com).\n\n### Additional information\n\nThis is related to https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62256, which fixed a different issue with this page's pagination.\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/62256 didn't _cause_ this bug, but it did make this bug more obvious. This is because this bug is related to the information embedded in the pagination cursors, and prior to https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62256, the pagination cursors didn't contain the correct information.\n\n### Possible fixes\n\nReset the before/after cursor when the sort is changed. This will place the user back on page 1 whenever they change the sort order.","state":"closed","created_at":"2021-05-27T17:00:00.704Z","updated_at":"2021-06-21T19:14:23.860Z","closed_at":"2021-06-21T18:05:07.237Z","closed_by":{"id":5622641,"username":"nicolewilliams","name":"Nicole Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5622641/avatar.png","web_url":"https://gitlab.com/nicolewilliams"},"labels":["Category:Release Orchestration","GraphQL","backend","cicd::active","devops::release","frontend","group::release","internal customer","priority::2","section::ops","severity::2","type::bug","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"}],"author":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"type":"ISSUE","assignee":{"id":493585,"username":"nfriend","name":"Nathan Friend","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd23f74a33fc7d8dfe081948696551a5?s=80\u0026d=identicon","web_url":"https://gitlab.com/nfriend"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332063","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332063","notes":"https://gitlab.com/api/v4/projects/278964/issues/332063/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332063/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332063","relative":"#332063","full":"gitlab-org/gitlab#332063"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87819285,"iid":332040,"project_id":278964,"title":"Handle missing gitlab-ci.yml files using compliance pipelines","description":"## Problem\n\nApplying a compliance framework label to projects with a missing `.gitlab-ci.yml` file will cause compliance pipelines to fail:\n\n\u003e [A customer] found that if the compliance pipeline is set to a project that does not have a .gitlab-ci.yml, it fails with a `file `.gitlab-ci.yml` does not exist!“` They have many projects that don’t have `.gitlab-ci.yml` but should undergo our SAST scanners for compliance. Is there a way to make that include dependent on whether a .gitlab-ci.yml exists?\n\n## Examples\n\n[Failed pipeline - missing file](https://gitlab.com/sam-s-test-group/expressexample/-/pipelines/310657974), delete the `.gitlab-ci.yml` file.\n![image](/uploads/8577166059f990ebb13ddea085ce4ee4/image.png)\n\n## Investigation\n\nIn [compliance-pipeline.gitlab-ci.yml](https://gitlab.com/sam-s-test-group/compliance-project/-/blob/master/compliance-pipeline.gitlab-ci.yml) there is an `include:` to look for this file, which may be causing the error when it's missing. \n\n```yml\ninclude:\n    - template: Security/SAST.gitlab-ci.yml\n    - project: '$CI_PROJECT_PATH'\n      file: '$CI_CONFIG_PATH'\n```\n\n## Implementation Plan/Investigation\n\n* [ ] GitLab CI cannot create pipelines when `.gitlab-ci.yml` does not exist in a project, **even if the project is subject to compliance framework forced includes.** This is expected!\n* [ ] However, in the case of projects that are subject to compliance framework `include:` blocks, we could **temporarily create an empty .gitlab-ci.yml file** which is then merged with the compliance configuration.\n    * This would silence the error saying that the CI config file doesn't exist and perform the compliance check too.\n* [ ] Update [documentation example](https://docs.gitlab.com/ee/user/project/settings/#compliance-pipeline-configuration) to leverage the approach to handle missing gitlab-ci.yml files.\n   * We expect users to copy \u0026 paste that section frequently, so updating the example helps save users some steps.\n\n## References\n[Slack discussion](https://gitlab.slack.com/archives/CN7C8029H/p1622119242098600)\n\ncc: @stkerr","state":"closed","created_at":"2021-05-27T13:51:48.121Z","updated_at":"2022-11-10T00:13:31.780Z","closed_at":"2021-12-20T12:46:16.185Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Category:Compliance Management","GitLab Ultimate","backend","customer","devops::manage","group::compliance","missed:14.6","priority::1","section::dev","severity::3","type::bug","workflow::in review"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":6193108,"username":"aregnery","name":"Austin Regnery","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6193108/avatar.png","web_url":"https://gitlab.com/aregnery"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":82,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332040","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332040","notes":"https://gitlab.com/api/v4/projects/278964/issues/332040/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332040/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332040","relative":"#332040","full":"gitlab-org/gitlab#332040"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"at_risk"},{"id":87812607,"iid":332030,"project_id":278964,"title":"SPIKE: Revisit  metrics definitions statuses","description":"Revisit metrics definitions statuses.\n\nAvailable statuses https://docs.gitlab.com/ee/development/usage_ping/metrics_dictionary.html#metric-statuses\n\n- `data_available`: Metric data is available and used in a Sisense dashboard.\n- `implemented`: Metric is implemented but data is not yet available. This is a temporary status for newly added metrics awaiting inclusion in a new release.\n- `not_used`: Metric is not used in any dashboard.\n- `deprecated`: Metric is deprecated and possibly planned to be removed.\n- `removed`: Metric was removed, but it may appear in Usage Ping payloads sent from instances running on older versions of GitLab.\n- `broken`:  Metric reports broken data (for example, -1 fallback), or does not report data at all. A metric marked as `broken` must also have the `repair_issue_url` attribute.\n\n## Success Criteria\n\nThis is a research issue to address the questions and concerns posed in [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/332030#note_588916475).\n\nThe deliverable for this issue will be \n1. [x] a recommendation whether we should keep this field, and if so, what statuses are valid to retain.\n1. [x] if there are statuses we want to retain, a proposal how we could track broken metrics and potentially automate it","state":"closed","created_at":"2021-05-27T12:12:35.529Z","updated_at":"2021-07-12T19:15:26.507Z","closed_at":"2021-06-17T14:53:12.122Z","closed_by":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"labels":["backend","devops::growth","group::product intelligence","section::growth","spike","workflow::ready for review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332030","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332030","notes":"https://gitlab.com/api/v4/projects/278964/issues/332030/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332030/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332030","relative":"#332030","full":"gitlab-org/gitlab#332030"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6086,"epic":{"id":278754,"iid":6086,"title":"Usage Metrics Hygiene Policy","url":"/groups/gitlab-org/-/epics/6086","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87811499,"iid":332028,"project_id":278964,"title":"Remove the `repository` check when authorizing package registry requests with a deploy token","description":"### Summary\n\nYou can use the Package Registry to publish and install packages in a variety of formats. You can authenticate with personal access, project access, job or deploy tokens. \n\n### Problem\n\n* Deploy tokens get access to packages through a [special condition](https://gitlab.com/gitlab-org/gitlab/-/blob/e7fe50276dbbe581a607b9c2989fd2822718056a/app/policies/project_policy.rb#L69) in the project policy.\n  * This works as expected\n* Now we have a [negative rule](https://gitlab.com/gitlab-org/gitlab/-/blob/e7fe50276dbbe581a607b9c2989fd2822718056a/app/policies/project_policy.rb#L317) that basically says if one of the below is true, all `packages` permissions are removed:\n  * The `packages` feature is disabled\n  * The `repository` feature is disabled\n* The ~bug lies when checking the `repository` feature. This check is mainly done by [verifying](https://gitlab.com/gitlab-org/gitlab/-/blob/e7fe50276dbbe581a607b9c2989fd2822718056a/app/policies/project_policy.rb#L166) if the user has access to the project feature.\n* Let's break down how this \"has the current user access to this project feature\" [function](https://gitlab.com/gitlab-org/gitlab/-/blob/e7fe50276dbbe581a607b9c2989fd2822718056a/app/policies/project_policy.rb#L721):\n  1. if the feature is currently `DISABLED`, well, we return `false`\n  1. if the feature is currently `PRIVATE`, we check that the current user has the proper minimum access level for the feature\n  1. all other cases (including feature is `ENABLED`), we return true\n* The problem is that when (2.) is evaluated against a DeployToken object, the ~backend thinks that it has no [access level at all](https://gitlab.com/gitlab-org/gitlab/-/blob/e7fe50276dbbe581a607b9c2989fd2822718056a/app/policies/project_policy.rb#L708).\n  * This case will reject the user from getting the `package` permissions.\n\nNow, here is the interesting part:\n\n* If I create a project with `public` visibility and then make it `private`, the `repository` feature is set to `PRIVATE`.\n  * We will end up in (2.) above and thus, we will hit the ~bug\n* If I create a project with a `private` visibility, the `repository` feature is set to `ENABLED`.\n  * We will end up in (3.) and the `package` permissions will be granted.\n\n### Proposal\n\nRemove the code that checks the `repository` feature when checking `package` permissions.\n\n#### Related issues\n\n- Deploy token epic: https://gitlab.com/groups/gitlab-org/-/epics/6192\n- Feature specific permissions change (this will decouple the repository permissions from the container registry, package registry and lfs: https://gitlab.com/gitlab-org/gitlab/-/issues/329253\n\n\n/cc @bufferoverflow @fh1ch @dlouzan @wwwjon @max-wittig\n\n:tools: with :heart: at Siemens","state":"closed","created_at":"2021-05-27T11:51:34.319Z","updated_at":"2021-08-18T07:05:31.790Z","closed_at":"2021-08-11T13:43:18.221Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Package Registry","Deliverable","GitLab Core","Package:P1","PyPI Repository","backend","devops::package","direction","group::package registry","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":1832709,"username":"ercan.ucan","name":"Ercan Ucan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1832709/avatar.png","web_url":"https://gitlab.com/ercan.ucan"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":15,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332028","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332028","notes":"https://gitlab.com/api/v4/projects/278964/issues/332028/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332028/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/329253"},"references":{"short":"#332028","relative":"#332028","full":"gitlab-org/gitlab#332028"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6192,"epic":{"id":289729,"iid":6192,"title":"Deploy token issues","url":"/groups/gitlab-org/-/epics/6192","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87810068,"iid":332025,"project_id":278964,"title":"implementation issue for template button","description":"### Release notes\nTemplates provide an easy way for you to get familiar with GitLab CI, we do have a large number of templates, however accessing them isn't intuitive, in this release we've added a way for you to navigate directly from the pipeline editor into our templating library, this way you can browse through the different templates GitLab support so you could easily copy-paste the most relevant one into your pipeline configuration\n\n### Problem\n\nCurrently the pipeline editor doesn't provide access to CI/CD templates. \n\n### The current experience\n\nThe current experience we have today in the web-ide and the single file editor has some drawbacks:\n\n1. Templates are hard to understand - it's practically impossible to know what each template is doing\n1. Unable to know when a new template is available\n1. Selecting the templates overrides your existing pipeline configuration\n\n## Proposal\n\n### What we learned?\n\nWe learned that most users would like to look at several templates and copy paste sections of them to their exiting pipeline configuration, so the current experience contradicts with the experience most users wants\n\n### What we can do?\n\n* Instead of going with the boring (and temporary) solution of adding a dropdown to the editor, (similar to the way it works today in the web-ide/single file editor), we can add a button that links to the [template library](https://gitlab.com/gitlab-org/gitlab-foss/tree/master/lib/gitlab/ci/templates) to be opened up in a separated window so users could view/browse and copy-paste section of the pipeline.\n* this functionality should work both for self managed and .com\n\n## Design\n\nSee the latest design attached below. The design discussions can be found on the previous design versions.\n\n:link: [Figma specs](https://www.figma.com/file/O1iQx5kEr3UK1cTYu1qFnH/%F0%9F%92%97Pipeline-Editor-Vision-Exploration-%F0%9F%92%97?node-id=8%3A5172)\n\n## What does success look like, and how can we measure that?\n\nSuccess Metrics - 10% user engagement with templates \n\n* How to measure - we already tracking the numbers of users that navigate to the pipeline editor, let's track the number of unique users that click the template button.","state":"closed","created_at":"2021-05-27T11:28:05.175Z","updated_at":"2021-07-18T07:08:23.469Z","closed_at":"2021-07-06T12:13:09.811Z","closed_by":{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"},"labels":["Category:Pipeline Authoring","Deliverable","auto updated","ci::templates","devops::verify","frontend","group::pipeline authoring","release post item::in review","section::ops","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":4509877,"username":"dhershkovitch","name":"Dov Hershkovitch","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7daa3113f0359f08a217fa800d9cc1d2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dhershkovitch"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332025","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332025","notes":"https://gitlab.com/api/v4/projects/278964/issues/332025/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332025/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332025","relative":"#332025","full":"gitlab-org/gitlab#332025"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87808067,"iid":332018,"project_id":278964,"title":"What's New page is not loading for Gitlab with relative URL","description":"### Summary\n\nThe What's new page is unable to load when gitlab is configured with a relative URL\n(external_url, https://docs.gitlab.com/omnibus/settings/configuration.html#configuring-a-relative-url-for-gitlab)\n\n### Steps to reproduce\n\n1. Click on the question mark icon on the top right\n2. Click \"What's new\"\n\n### What is the current *bug* behavior?\n\nThe layer displays, but the loading indicator displays forever.\n\n### What is the expected *correct* behavior?\n\nThe content of the what's new page should be displayed.\n\n### Relevant logs and/or screenshots\n\nGET https://example.com/-/whats_new?v=1234\n\nThe configured path /gitlab is missing.\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\nSystem information\nSystem:\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.7.2p137\nGem Version:    3.1.4\nBundler Version:2.1.4\nRake Version:   13.0.3\nRedis Version:  6.0.12\nGit Version:    2.31.1\nSidekiq Version:5.2.9\nGo Version:     unknown\n\nGitLab information\nVersion:        13.12.1\nRevision:       bec931306a7\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     PostgreSQL\nDB Version:     12.6\nURL:            https://example.com/gitlab\nHTTP Clone URL: https://example.com/gitlab/some-group/some-project.git\nSSH Clone URL:  git@example.com:some-group/some-project.git\nUsing LDAP:     yes\nUsing Omniauth: yes\nOmniauth Providers:\n\nGitLab Shell\nVersion:        13.18.0\nRepository storage paths:\n- default:      /var/opt/gitlab/git-data/repositories\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\nGit:            /opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2021-05-27T10:45:17.604Z","updated_at":"2022-07-18T09:01:19.932Z","closed_at":"2022-07-10T20:45:38.929Z","closed_by":{"id":4234774,"username":"pcalder","name":"Phil Calder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4234774/avatar.png","web_url":"https://gitlab.com/pcalder"},"labels":["devops::growth","group::acquisition","missed:15.1","priority::3","section::growth","severity::3","type::bug","workflow::in review"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":4029128,"username":"alexgit2k","name":"alexgit2k","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5cda583505d78efabd78fc517b2b785c?s=80\u0026d=identicon","web_url":"https://gitlab.com/alexgit2k"}],"author":{"id":4029128,"username":"alexgit2k","name":"alexgit2k","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5cda583505d78efabd78fc517b2b785c?s=80\u0026d=identicon","web_url":"https://gitlab.com/alexgit2k"},"type":"ISSUE","assignee":{"id":4029128,"username":"alexgit2k","name":"alexgit2k","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5cda583505d78efabd78fc517b2b785c?s=80\u0026d=identicon","web_url":"https://gitlab.com/alexgit2k"},"user_notes_count":19,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332018","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332018","notes":"https://gitlab.com/api/v4/projects/278964/issues/332018/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332018/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332018","relative":"#332018","full":"gitlab-org/gitlab#332018"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87808061,"iid":332017,"project_id":278964,"title":"Remove status checks from approval rules and update feature specs","description":"\u003e This is the ~frontend implementation issue\n\nProblem to solve\n---\nStatus checks [have been added](https://gitlab.com/gitlab-org/gitlab/-/issues/327638) to its own settings area rather than being a part of Merge request (MR) approval rules. We now need to remove the status checks functionality from MR approval rules, remove the status checks related feature specs, and add feature specs specific to the new status checks area.\n\nProposal\n---\n1. Remove status checks as an approval rule option.\n1. Remove status checks specific feature specs from MR approval rules\n1. Add new feature specs for the new status checks area\n\nDesign\n---\n\u003cdetails\u003e\u003csummary\u003eScreenshots\u003c/summary\u003e\n\n|:new: location|\n|---|\n|![Status_checks](/uploads/b6373405594efd08e22774df0ba89f25/Status_checks.png)|\n\n| Modal - :x:  | Modal - :white_check_mark: |\n| ------ | ------ |\n| ![Modal_-__failure](/uploads/6de32be8e6c294c08e6fe9173c8068e4/Modal_-__failure.png) | ![Modal_-_valid](/uploads/fe9816eca7057e36947979ba7fcc1a15/Modal_-_valid.png) |\n\n\n\n\u003c/details\u003e\n\nIs this a cross-stage feature?\n---\n:handshake: ~\"group::compliance\" ~\"group::source code\" ~\"group::code review\"\n\nImplementation\n---\n\nI think this will be a weight of :two: due to the number of lines this will touch:\n\n1. Undo the changes made to approvals in https://gitlab.com/gitlab-org/gitlab/-/issues/300973\n1. Update the feature specs and add new ones for status checks\n\nFollow-up: Look at moving similar code to a shared usage between approval rules and status checks","state":"closed","created_at":"2021-05-27T10:45:06.350Z","updated_at":"2021-10-28T13:56:31.255Z","closed_at":"2021-06-16T13:06:46.060Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","devops::manage","frontend","group::compliance","priority::1","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332017","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332017","notes":"https://gitlab.com/api/v4/projects/278964/issues/332017/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332017/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332017","relative":"#332017","full":"gitlab-org/gitlab#332017"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"at_risk"},{"id":87807415,"iid":332015,"project_id":278964,"title":"Refactor ExternalApprovalRules to ExternalStatusChecks","description":"### Proposal \n\nRefactor all instances of ExternalApprovalRule to ExternalStatusCheck. \n\n* [ ] Update database schema\n* [ ] Update API endpoints\n* [ ] Update documentation\n* [ ] Update services\n* [ ] Do a find \u0026 replace for `ExternalApprovalRule` and `external_approval_rule` to find any stragglers.\n\nMR: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62186","state":"closed","created_at":"2021-05-27T10:30:48.374Z","updated_at":"2021-06-15T16:50:38.320Z","closed_at":"2021-06-15T08:35:08.148Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["backend","devops::manage","group::compliance","priority::1","section::dev","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332015","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332015","notes":"https://gitlab.com/api/v4/projects/278964/issues/332015/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332015/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332015","relative":"#332015","full":"gitlab-org/gitlab#332015"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3869,"epic":{"id":79474,"iid":3869,"title":"Introduce capability to check external APIs for status in Merge Requests","url":"/groups/gitlab-org/-/epics/3869","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":"on_track"},{"id":87806760,"iid":332013,"project_id":278964,"title":"Arrow down-image is missing at edit merge-requests for Gitlab with relative URL","description":"### Summary\n\nWhen editing a merge-request the arrow down-image at choosing the target-branch is missing when gitlab is configured with a relative URL\n(external_url, https://docs.gitlab.com/omnibus/settings/configuration.html#configuring-a-relative-url-for-gitlab)\n\nProbably related to #356903.\n\n### Steps to reproduce\n\n1. Go to a merge request\n2. Click \"Edit\"-button\n3. Look at the right end of the target-branch-dropdown.\n\n### What is the current *bug* behavior?\n\nArrow down-image is missing.\n\n### What is the expected *correct* behavior?\n\nArrow down-image should be visible.\n\n### Relevant logs and/or screenshots\n\nGET https://example.com/assets/chevron-down-123456.png\n\nThe configured path /gitlab is missing.\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\nSystem information\nSystem:\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.7.2p137\nGem Version:    3.1.4\nBundler Version:2.1.4\nRake Version:   13.0.3\nRedis Version:  6.0.12\nGit Version:    2.31.1\nSidekiq Version:5.2.9\nGo Version:     unknown\n\nGitLab information\nVersion:        13.12.1\nRevision:       bec931306a7\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     PostgreSQL\nDB Version:     12.6\nURL:            https://example.com/gitlab\nHTTP Clone URL: https://example.com/gitlab/some-group/some-project.git\nSSH Clone URL:  git@example.com:some-group/some-project.git\nUsing LDAP:     yes\nUsing Omniauth: yes\nOmniauth Providers:\n\nGitLab Shell\nVersion:        13.18.0\nRepository storage paths:\n- default:      /var/opt/gitlab/git-data/repositories\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\nGit:            /opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2021-05-27T10:17:04.708Z","updated_at":"2022-10-12T18:43:11.153Z","closed_at":"2022-09-12T17:28:02.501Z","closed_by":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"labels":["Deliverable","SUS::Impacting","UX","devops::create","frontend","group::code review","missed-deliverable","missed:15.3","priority::3","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":4029128,"username":"alexgit2k","name":"alexgit2k","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5cda583505d78efabd78fc517b2b785c?s=80\u0026d=identicon","web_url":"https://gitlab.com/alexgit2k"},"type":"ISSUE","assignee":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332013","notes":"https://gitlab.com/api/v4/projects/278964/issues/332013/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332013/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332013","relative":"#332013","full":"gitlab-org/gitlab#332013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87806204,"iid":332012,"project_id":278964,"title":"Documentation: DAST Configuration UI Implementation","description":"This is a ~documentation issue for adding DAST Configuration related changes:\n\n### Feature changes\n\nEpic https://gitlab.com/groups/gitlab-org/-/epics/5981\n\n- User can enable / configure DAST configuration\n- User can generate code snippet by selecting scanner \u0026 site profile\n- Copy generated copy snippet and get redirected to `ci.yml` file directly in file editor\n\n- Document the `dast_configuration \u003e site_profile` and `dast_configuration \u003e scanner_profile` fields.","state":"closed","created_at":"2021-05-27T10:11:24.554Z","updated_at":"2021-07-15T09:07:04.877Z","closed_at":"2021-07-15T09:07:04.861Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Category:DAST","devops::secure","documentation","group::dynamic analysis","section::sec","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3658061,"username":"rdickenson","name":"Russell Dickenson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3658061/avatar.png","web_url":"https://gitlab.com/rdickenson"},{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":3658061,"username":"rdickenson","name":"Russell Dickenson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3658061/avatar.png","web_url":"https://gitlab.com/rdickenson"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-07-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332012","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332012","notes":"https://gitlab.com/api/v4/projects/278964/issues/332012/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332012/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332012","relative":"#332012","full":"gitlab-org/gitlab#332012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5981,"epic":{"id":269267,"iid":5981,"title":"DAST Configuration UI Implementation","url":"/groups/gitlab-org/-/epics/5981","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87798942,"iid":332001,"project_id":278964,"title":"Increase feature spec coverage for conditional text in Billing page header","description":"## Description\n\nWe should write more feature specs for the Call to Action text that appears just underneath the Billing page header:\n\n\u003cimg src=\"/uploads/eda5b2124b1d8a20f72bcd10a7ca8056/Screenshot_2021-05-27_at_11.25.49.png\" width=\"60%\" /\u003e\n\nThe conditional code that manages the display of this text is already very intricate, and it's not covered by feature specs. The code can be found in the following files:\n\n- `ee/app/views/shared/billings/_billing_plan_header.html.haml`\n- `ee/app/views/shared/billings/_trial_status.html.haml`","state":"closed","created_at":"2021-05-27T08:32:51.960Z","updated_at":"2022-04-28T11:44:27.485Z","closed_at":"2022-04-28T11:44:26.805Z","closed_by":{"id":4430316,"username":"rhardarson","name":"Ragnar Hardarson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4430316/avatar.png","web_url":"https://gitlab.com/rhardarson"},"labels":["Category:Purchase","devops::fulfillment","frontend","group::purchase","maintenance::refactor","section::fulfillment","won't do","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":4737352,"username":"astoicescu","name":"Andrei Stoicescu","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4737352/avatar.png","web_url":"https://gitlab.com/astoicescu"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/332001","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/332001","notes":"https://gitlab.com/api/v4/projects/278964/issues/332001/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/332001/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#332001","relative":"#332001","full":"gitlab-org/gitlab#332001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87793750,"iid":331993,"project_id":278964,"title":"Spike: Service Ping","description":"### Summary\n\nRename Usage Ping to Service Ping.\n\nAdd Service Ping categories `Operational`, `Optional`, `License`, `Standard`.\n \n\n### Requirements\n\n1. Rename Usage Ping to Service Ping\n   1. Changes are needed in app, code, docs\n1. Rename Seat Link to Cloud License https://gitlab.com/gitlab-org/fulfillment-meta/-/issues/227\n   1. Changes are needed in app, code, docs\n1. Service Ping metrics are categorized in `Operational`, `Optional`, `License`, `Standard`\n   1. Create categories in Metrics dictionary with the values `Operational`, `Optional`, `License`, `Standard` \n   1. Bulk update all current metrics to be set to `Optional` \n   1. Update applicable metrics to `License` value\n   1. Update applicable metrics to `Operational` value https://gitlab.com/gitlab-org/gitlab/-/issues/329999\n   1. Update applicable metrics to `Standard` \n  \n1. All Cloud Licensing events to become Service Ping (aka Usage Ping) events (License [Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/322708))\n1. Cloud Licensing picks up Service Ping (aka Usage Ping) events to send via it’s daily job, where:\n   1. For all customers: events categorized as `License` in metrics dictionary *(do we need an issue for this?)*\n   1. Indicated by a flag on the license: Operational events (Product Intelligence [Epic](https://gitlab.com/groups/gitlab-org/-/epics/5988))\n\n### Nomenclature\n\n* `Service Ping` **IS** the process of collecting usage data from self-managed instances for all categories.\n* `Service Ping` **IS NOT** the JSON payload generated by usage_data.rb\n* `Usage Ping`: Old name of the process for generating JSON payload by usage_data.rb. Renamed to Service Ping.\n* `JSON payload` generated by usage_data.rb consists of metrics from `Optional` category.\n* `Metric` is a value we have in JSON payload with a corresponding metric yaml definition. Each category from Service Ping consists of multiple metrics having corresponding metric yaml definition\n* `Metric` definition is a yaml file that contains information about a metric.\n* `Operational data`: required collected operational data.\n* `Optional data`: Data that is optional to collect. (From where we can enable/disable this?)\n* `License data`: Data related to licensing.\n* `Seat Link Data`: :question: JSON payload generated daily using Cloud License service, this is the old name\n* `Cloud License service`: Renamed from Seat Link \n* `Cloud Licensing` = :question: \n* `Cloud Licensing event` = :question: \n* `License data`: JSON payload generated with Cloud License service\n* `Standard data`: The standard set of identifiers are identifiers that should be included in all collecting services https://gitlab.com/gitlab-org/gitlab/-/issues/330815. At the moment of writing this we have `uuid`, `hostname`, `ZuoraSubscriptionId`(`license_subscription_id`), `License Key`(`license_md5`)\n \n## Proposal\n\n### Renaming\n\n1. Rename Usage Ping to Service ping. Epic: https://gitlab.com/groups/gitlab-org/-/epics/5990\n1. Rename Seat Link to Cloud License Issue: https://gitlab.com/gitlab-org/fulfillment-meta/-/issues/227\n\n### Service Ping \n\nDraft overview for the Service Ping\n\n```mermaid\ngraph TD\n    subgraph Service Ping\n    draft[Draft:]    \n    A[Collect data] --\u003e B[Operational Data]\n    A[Collect data] --\u003e C[Optional Data]\n    A[Collect data] --\u003e D[License Data]\n\n    B --\u003e |Daily/Weekly?|E[VersionsApp]\n    C --\u003e |Weekly|E[VersionsApp]\n    D --\u003e |Daily|F[CustomersDot]\n    end\n```\n\n- Add an `enum` field in metric definition to define the data type. one of `operational`, `optional`, `license`( :ballot_box_with_check: Create issue for this)\n\n\n### Requirements for each data type \n\n#### `Operational Data`\n\n1. Definition:\n\n2. Fields: The data categorized as `Operational` in Column B on [this sheet](https://docs.google.com/spreadsheets/d/1o2-H35SkJbYo9QGxSxgi9K94zKj028b_WQWfHCgTgsI/edit#gid=480783802)  (https://gitlab.com/gitlab-org/gitlab/-/issues/329999)\n\n3. Frequency: Weekly\n\n4. Collector: VersionApp\n\n5. Example of JSON payload\n\n6. Add service to build this data (Create and link issue for this :ballot_box_with_check:)\n\n```JSON\n```\n\n#### `Optional Data`\n\n1. Definition: JSON payload that consists of usage data collected from GitLab instances. Can be enabled/disabled\n\n2. Fields: TBD\n\n3. Frequency: Weekly\n\n4. Collector:  VersionApp\n\n5. Example of payload: https://gitlab.slack.com/archives/CL3A7GFPF/p1622445026154800\n\n6. Service to build and send this is [`GitlabUsagePingWorker`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/workers/gitlab_usage_ping_worker.rb)\n\n#### `License Data`\n\n1. Definition: JSON payload that consists of license data collected from GitLab instances...\n\n1. Fields: TBD\n\n1. Frequency: Daily\n\n1. Collector:  CustomersDot\n\n1. Example of JSON payload:\n\n   The current implementation has the following fields\n\n   ```ruby\n   {\n   :gitlab_version=\u003e\"14.0.0-pre\", \n   :timestamp=\u003e\"2021-05-31T11:40:25Z\", \n   :date=\u003e\"2021-05-31\", \n   :license_key=\u003enil, \n   :max_historical_user_count=\u003enil, \n   :active_users=\u003enil}\n   ```\n\n1. Implemented with [`SyncSeatLinkWorker`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/workers/sync_seat_link_worker.rb)\n\n\nProposal [MR](https://gitlab.com/gitlab-org/product-intelligence/-/merge_requests/12)\n\n## Conclusions\n\n- There is a new epic to handle [MVC Service Ping](https://gitlab.com/groups/gitlab-org/-/epics/6191)\n   \n   - This includes the rename from usage ping to service ping\n   - adding categories to metrics definitions\n   - filter service ping payload according to instance configuration before sending it to VersionsApp\n\n- The work related to the usage of instrumentation classes is in a separate [epic](https://gitlab.com/groups/gitlab-org/-/epics/5547) and could be worked on in parallel","state":"closed","created_at":"2021-05-27T07:09:38.270Z","updated_at":"2021-06-18T01:06:30.138Z","closed_at":"2021-06-17T13:08:50.535Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["backend","devops::growth","group::product intelligence","section::growth","spike","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-06-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331993","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331993","notes":"https://gitlab.com/api/v4/projects/278964/issues/331993/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331993/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331993","relative":"#331993","full":"gitlab-org/gitlab#331993"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87791335,"iid":331992,"project_id":278964,"title":"Cleanup timeout warning icon not displayed on the image repository list","description":"### Summary\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/276900, we decided to display the `expiration_policy_cleanup_status` for container images.\n\nI'm afraid we forgot about the page listing the container images.\n\nHere is an example:\n\n![Screenshot_2021-05-27_at_08.15.42](/uploads/1bc27b3a9091ebcbce2875f5cf323a3c/Screenshot_2021-05-27_at_08.15.42.png)\n\n* All the container images have the yellow warning icon\n* All the container images have the \"Cleanup timeout...\" explanation\n\nbut this is not correct because, if I check the cleanup status using the ~GraphQL API:\n\n![Screenshot_2021-05-27_at_08.15.35](/uploads/f1fb1d6723eade7e0781111101f297cc/Screenshot_2021-05-27_at_08.15.35.png)\n\nAll container images are `scheduled` and not `unfinished`. \n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/container_registry\n\n### What is the current *bug* behavior?\n\nThe icon on the container images list page for cleanup policies is not correct.\n\n### What is the expected *correct* behavior?\n\nThe icon on the container images list page for cleanup policies should reflect the cleanup status\n\n### Possible fixes\n\nWe could take this opportunity to throw there (the container images list page) all the statuses relevant for cleanups:\n\n* `cleanup_unscheduled`: No icon / No explanation\n* `cleanup_scheduled`: An hourglass? / `Cleanup will run soon`\n* `cleanup_ongoing`: A \"play\" icon / `Cleanup is ongoing`\n* `cleanup_unfinished`: A warning icon / `Cleanup timeout ...` (current explanation we have)\n\n### Proposal\n\nIn order to best articulate the cleanup status of individual image repositories inside the main container registry page, we will add a cleanup status metadata under the tag name. See the rough example below. The content and copy should be identical to previous clean-up policy statuses for consistency. \n\n| Rough concept |\n|---|\n|![Screen_Shot_2021-05-27_at_11.38.18_AM](/uploads/ecf85a1e95de54999125cd33723423f1/Screen_Shot_2021-05-27_at_11.38.18_AM.png)|","state":"closed","created_at":"2021-05-27T06:24:45.061Z","updated_at":"2021-07-26T17:47:31.444Z","closed_at":"2021-07-14T08:38:19.640Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Container Registry","Deliverable","Package:P1","UX","customer","devops::package","frontend","group::package registry","section::ops","type::bug","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":16,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331992","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331992","notes":"https://gitlab.com/api/v4/projects/278964/issues/331992/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331992/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331992","relative":"#331992","full":"gitlab-org/gitlab#331992"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87784634,"iid":331983,"project_id":278964,"title":"Crypto Abuse - Once a user validates a card we should make it easy to pickup where they left off","description":"Since we introduced the credit card requirement for new/trial accounts to run pipelines we’ve had a handful of users get stuck once they validated a card. \n\nProblem:\n\n1. Attempt to run a pipeline\n1. Prompted to provide a valid credit card\n1. Complete credit card validation\n1. Pipeline remains paused (but not blocked). Unclear you need to re-run. \n\nSlack thread for context: https://gitlab.slack.com/archives/C0201T71JCA/p1622077859230300\n\nPotential Solutions (most boring to least boring):\n\n1. Add some helper text on the verification confirmation to inform the user they need to re-run their blocked pipeline. \n1. Make a confirmation dialogue with a button that re-runs the pipeline they tried to kick off\n1. Do 2 automatically with some confirmation text “Thank you for validating your card, your pipeline is now running”","state":"closed","created_at":"2021-05-27T01:59:09.346Z","updated_at":"2021-06-04T20:42:47.733Z","closed_at":"2021-06-04T20:42:47.699Z","closed_by":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"labels":["Category:Purchase","customer","devops::fulfillment","group::purchase","pipeline abuse prevention","section::fulfillment","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"}],"author":{"id":5413970,"username":"justinfarris","name":"Justin Farris","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5413970/avatar.png","web_url":"https://gitlab.com/justinfarris"},"type":"ISSUE","assignee":{"id":447038,"username":"vitallium","name":"Vitaly Slobodin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/74b3243cfcfbfac1f022b78ab505e8d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/vitallium"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331983","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331983","notes":"https://gitlab.com/api/v4/projects/278964/issues/331983/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331983/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331983","relative":"#331983","full":"gitlab-org/gitlab#331983"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6011,"epic":{"id":271412,"iid":6011,"title":"Expand and implement alternative methods for validation","url":"/groups/gitlab-org/-/epics/6011","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87783599,"iid":331982,"project_id":278964,"title":"Stored XSS in custom emoji","description":"**[HackerOne report #1198517](https://hackerone.com/reports/1198517)** by `ooooooo_q` on 2021-05-15, assigned to @dcouture:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nI found Stored XSS with a feature of custom emoji.\n\nThis feature hasn't been rolled out yet and need to set feature flags in self management installation. ( https://gitlab.com/gitlab-org/gitlab/-/issues/231317 )\n\n\nThe problem is the code here.  \nhttps://gitlab.com/gitlab-org/gitlab/-/blob/v13.11.4-ee/lib/gitlab/emoji.rb#L43\n\n```ruby  \n    def emoji_image_tag(name, src)  \n      \"\u003cimg class='emoji' title=':#{name}:' alt=':#{name}:' src='#{src}' height='20' width='20' align='absmiddle' /\u003e\"  \n    end\n\n    ...\n\n    def custom_emoji_tag(name, image_source)  \n      data = {  \n        name: name  \n      }\n\n      ActionController::Base.helpers.content_tag('gl-emoji', title: name, data: data) do  \n        emoji_image_tag(name, image_source).html_safe  \n      end  \n    end  \n```\n\nSince the `src` value of `emoji_image_tag` is not escaped, it will be XSS.  \n(The value of `name` is not available for XSS as validation exists.)\n\n#####  Steps to reproduce\n\nThe following steps should to be reproduced in a self-managed installation of gitlab.\n\n 1. Set feature_flag\n\nsee https://docs.gitlab.com/ee/administration/feature_flags.html\n\n```  \n###  gitlab-rails console  \n--------------------------------------------------------------------------------  \n Ruby:         ruby 2.7.2p137 (2020-10-01 revision 5445e04352) [x86_64-linux]  \n GitLab:       13.11.3 (b321336e443) FOSS  \n GitLab Shell: 13.17.0  \n PostgreSQL:   12.6  \n--------------------------------------------------------------------------------  \nLoading production environment (Rails 6.0.3.6)  \nirb(main):001:0\u003e Feature.enable(:custom_emoji)  \n=\u003e true  \n```\n\n\n 2. Create group\n\nCreate a group to set the custom emoji. For example, `xss_target`.\n\n\n 3. Create custom emoji\n\nThe ability to create custom emoji only exists in graphql api.\n\nCreate by sending the following query from the graphiql page of `https://localhost/-/graphql-explorer`.\n\n```  \nmutation {  \n  createCustomEmoji(input:   \n    {  \n      groupPath: \"xss_target\",   \n      name:\"xssreplace\",  \n      url:\"http://aaa#'\u003e\u003cimg onerror=alert(location) src=.\u003e\"  \n    }) {  \n    customEmoji {  \n      id  \n      name  \n      url  \n    }  \n  }  \n}\n```\n\n![graphql.png](https://h1.sec.gitlab.net/a/9963bead-3e38-4b4c-87cb-5ed2e231c260/graphql.png)\n\n 4. Create project and file\n\nCreate a project to display custom emojis and create a `README.md` with the following content.\n\n```  \n:xssreplace:  \n```\n\n\n5. View rendering results in browser\n\nThe function of custom emoji replaces the `:xssreplace:` part to become Stored XSS.\n\n#####  Impact\n\nStored XSS is possible with gitlab with feature flags set.\n\n#####  Examples\n\nThere is no example because it works only with gitlab with feature flag set.\n\n#####  What is the current *bug* behavior?\n\nInsufficient escape of `src`.\n\n#####  What is the expected *correct* behavior?\n\nEscape the value of `src`.\n\n#####  Relevant logs and/or screenshots\n\n![custom_emoji_xss.png](https://h1.sec.gitlab.net/a/4dba3ea5-a6a2-415c-840c-d3ea534695ac/custom_emoji_xss.png)\n\n#####  Output of checks\n\nGitLab.com doesn't have a feature flag set so it doesn't affect.\n\n######  Results of GitLab environment info\n\n```  \n###  gitlab-rake gitlab:env:info\n\nSystem information  \nSystem:  \nCurrent User:\tgit  \nUsing RVM:\tno  \nRuby Version:\t2.7.2p137  \nGem Version:\t3.1.4  \nBundler Version:2.1.4  \nRake Version:\t13.0.3  \nRedis Version:\t6.0.12  \nGit Version:\t2.31.1  \nSidekiq Version:5.2.9  \nGo Version:\tunknown\n\nGitLab information  \nVersion:\t13.11.3  \nRevision:\tb321336e443  \nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails  \nDB Adapter:\tPostgreSQL  \nDB Version:\t12.6  \nURL:\t\thttps://gitlab.example.com  \nHTTP Clone URL:\thttps://gitlab.example.com/some-group/some-project.git  \nSSH Clone URL:\tgit@gitlab.example.com:some-group/some-project.git  \nUsing LDAP:\tno  \nUsing Omniauth:\tyes  \nOmniauth Providers:\n\nGitLab Shell  \nVersion:\t13.17.0  \nRepository storage paths:  \n- default: \t/var/opt/gitlab/git-data/repositories  \nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell  \nGit:\t\t/opt/gitlab/embedded/bin/git  \n```\n\n####  Impact\n\nStored XSS is possible with gitlab with feature flags set.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [custom_emoji_xss.png](https://h1.sec.gitlab.net/a/4dba3ea5-a6a2-415c-840c-d3ea534695ac/custom_emoji_xss.png)\n* [graphql.png](https://h1.sec.gitlab.net/a/9963bead-3e38-4b4c-87cb-5ed2e231c260/graphql.png)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2021-05-27T01:06:04.246Z","updated_at":"2022-07-19T08:27:13.832Z","closed_at":"2021-06-08T03:04:27.705Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["HackerOne","Weakness::CWE-79","backend","devops::secure","frontend","group::composition analysis","priority::2","section::dev","security","severity::2","type::bug","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-08-25","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331982","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331982","notes":"https://gitlab.com/api/v4/projects/278964/issues/331982/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331982/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331982","relative":"#331982","full":"gitlab-org/gitlab#331982"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87781651,"iid":331979,"project_id":278964,"title":"Make it easier to use Snowplow Micro in development","description":"Kind of a follow-up to [this discussion](https://gitlab.com/gitlab-org/product-intelligence/-/issues/266#note_585350452) in product-intelligence#266.\n\n## Problem\n\nThe [current workflow](https://docs.gitlab.com/ee/development/snowplow/#snowplow-micro) to make use of Snowplow Micro in development is fairly long (10 steps), a bit complicated, and requires you to alter several lines of code in the application codebase.\n\n## Solution\n\nWe can make it a bit simpler by including those altered lines of code directly in the codebase and introducing some sort of flag (an `ENV` variable, maybe?) which will make use of those lines of code only if we’re also in the development environment.","state":"closed","created_at":"2021-05-26T23:15:46.296Z","updated_at":"2022-03-16T11:42:33.335Z","closed_at":"2021-11-09T16:45:29.014Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["backend","devops::growth","group::product intelligence","maintenance::workflow","product intelligence","section::growth","type::maintenance","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":23,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331979","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331979","notes":"https://gitlab.com/api/v4/projects/278964/issues/331979/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331979/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331979","relative":"#331979","full":"gitlab-org/gitlab#331979"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6102,"epic":{"id":281125,"iid":6102,"title":"Snowplow development workflow improvements","url":"/groups/gitlab-org/-/epics/6102","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87770449,"iid":331959,"project_id":278964,"title":"New users shouldn't get a failed pipeline warning without having a gitlab-ci.yml file","description":"### Problem \n\nWith the recent change to require credit cards on file for new users that are running pipelines, we are triggering failed pipeline warnings for simple commits on projects that do not have auto-devops enabled or a gitlab-ci.yml file in the repository. \n\nTo recreate: \n1. Create a **new** free gitlab.com account \n1. Create a project and initialize with a readme \n1. Notice that you get a pipeline failure in the UI as well as receive an email for the pipeline failure. \n\nYou can see this on my own public project that I used for testing: https://gitlab.com/mkcitest/pipelinetest \n\nHere is a video I recorded as well: https://www.loom.com/share/66f09de0c8df49e88e20b00435a049a7\n\n### Expected behavior \n\nUsers without a gitlab-ci.yml file or auto-devops enabled should not see pipeline failure notifications. \n\n\n### Screenshots\n\nNotice the pipeline failure on `Update README.md` but that auto-devops is not enabled and there isn't a gitlab-ci.yml file in the repo. \n\n![image](/uploads/763894847597be06abf166dc5bf90065/image.png)\n\n\n![image](/uploads/0ab6f964d381da5c9dc46db7b65ec3a6/image.png)\n\n![image](/uploads/b422e6c26583aa63c2f60cb193ff9fe1/image.png)\n\n### Proposal\n\n1. Restrict credit card validation and message to only commits only associated with pipelines\n\nWe should move the credit card check lower in the chain of commands when creating a pipeline\n\n```\nSEQUENCE = [Gitlab::Ci::Pipeline::Chain::Build,\n                Gitlab::Ci::Pipeline::Chain::Build::Associations,\n                Gitlab::Ci::Pipeline::Chain::Validate::Abilities, # \u003c-- check is currently here\n                Gitlab::Ci::Pipeline::Chain::Validate::Repository,\n                Gitlab::Ci::Pipeline::Chain::Validate::SecurityOrchestrationPolicy,\n                Gitlab::Ci::Pipeline::Chain::Config::Content, # \u003c-- here we check for presence of YAML\n                Gitlab::Ci::Pipeline::Chain::Config::Process, # \u003c-- check could be moved anywhere from here\n                Gitlab::Ci::Pipeline::Chain::RemoveUnwantedChatJobs, \n                Gitlab::Ci::Pipeline::Chain::Skip,\n                Gitlab::Ci::Pipeline::Chain::SeedBlock,\n                Gitlab::Ci::Pipeline::Chain::EvaluateWorkflowRules,\n                Gitlab::Ci::Pipeline::Chain::Seed,\n                Gitlab::Ci::Pipeline::Chain::Limit::Size,\n                Gitlab::Ci::Pipeline::Chain::Limit::Deployments,\n                Gitlab::Ci::Pipeline::Chain::Validate::External,\n                Gitlab::Ci::Pipeline::Chain::Populate,\n                Gitlab::Ci::Pipeline::Chain::StopDryRun,\n                Gitlab::Ci::Pipeline::Chain::Create,\n                Gitlab::Ci::Pipeline::Chain::Limit::Activity,\n                Gitlab::Ci::Pipeline::Chain::Limit::JobActivity,\n                Gitlab::Ci::Pipeline::Chain::CancelPendingPipelines,\n                Gitlab::Ci::Pipeline::Chain::Metrics,\n                Gitlab::Ci::Pipeline::Chain::TemplateUsage,\n                Gitlab::Ci::Pipeline::Chain::Pipeline::Process].freeze\n```","state":"closed","created_at":"2021-05-26T18:55:10.947Z","updated_at":"2022-07-19T09:02:27.332Z","closed_at":"2021-06-16T20:08:36.285Z","closed_by":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"labels":["Category:Continuous Integration","Verify::P3","customer","devops::verify","group::pipeline execution","pipeline abuse prevention","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"}],"author":{"id":4068412,"username":"mkarampalas","name":"Michael Karampalas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b1427f54773954af4d75c5514504229b?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkarampalas"},"type":"ISSUE","assignee":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"user_notes_count":126,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331959","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331959","notes":"https://gitlab.com/api/v4/projects/278964/issues/331959/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331959/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331959","relative":"#331959","full":"gitlab-org/gitlab#331959"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87768298,"iid":331953,"project_id":278964,"title":"Add \"integrations_\" prefix to \"*_tracker_data\" tables","description":"Following https://gitlab.com/gitlab-org/gitlab/-/issues/201856, we should also rename related tables for the `*TrackerData` models and add an `integrations_` prefix:\n\n- `issue_tracker_data`\n- `jira_tracker_data`\n- `open_project_tracker_data`\n\nWe can use the new helpers and process described at https://docs.gitlab.com/ee/development/database/rename_database_tables.html.\n\nIn the `Integrations::BaseDataFields` concern we're [currently using `table_name` to determine the `inverse_of:` association name](https://gitlab.com/gitlab-org/gitlab/-/blob/22f9fdf4996582d06427b1d4cebaa1876f312983/app/models/concerns/integrations/base_data_fields.rb#L10), if we rename the tables we'll have to do that differently (maybe `self.name.split('::').last.underscore`).\n\nThis is a follow-up from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62605, but depending on our plans with https://gitlab.com/groups/gitlab-org/-/epics/3955 we might not want to do this at all if we end up removing these tables again anyway :wink:","state":"closed","created_at":"2021-05-26T18:00:06.978Z","updated_at":"2022-11-22T19:40:56.286Z","closed_at":"2022-09-28T16:11:44.871Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["Category:Integrations","backend","database","devops::manage","group::integrations","section::dev","type::maintenance","won't do","workflow::planning breakdown"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331953","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331953","notes":"https://gitlab.com/api/v4/projects/278964/issues/331953/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331953/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331953","relative":"#331953","full":"gitlab-org/gitlab#331953"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":87767362,"iid":331950,"project_id":278964,"title":"Remove the fallback to on-the-fly calculation of latest pipeline with security reports","description":"## Why are we doing this work\n\nBy #271408 we've started using a pre-set value for retrieving the latest pipeline with security reports instead of calculating the value by using the `ci_pipelines` table which was using expensive SQL queries. Since we had to run a migration to populate the values, we've implemented a fallback mechanism to use the previous logic to return the value if there isn't one set already. We should remove that fallback along with the `only_successful` flag as the flag is wrong anyway.\n\n## Implementation plan\n\n- [x] ~backend Remove the `only_successful` flag from the `latest_pipeline_with_security_reports` method\n- [x] ~backend Remove the fallback method `latest_not_ingested_security_pipeline` from the `latest_pipeline_with_security_reports` method.","state":"closed","created_at":"2021-05-26T17:35:55.291Z","updated_at":"2022-07-21T12:06:10.309Z","closed_at":"2022-07-14T23:06:01.117Z","closed_by":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"labels":["Category:Vulnerability Management","Deliverable","backend","bug::performance","devops::secure","good for new contributors","group::threat insights","missed-deliverable","missed:14.10","missed:14.4","missed:14.5","missed:14.6","missed:14.7","missed:14.8","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"}],"author":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"type":"ISSUE","assignee":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331950","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331950","notes":"https://gitlab.com/api/v4/projects/278964/issues/331950/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331950/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331950","relative":"#331950","full":"gitlab-org/gitlab#331950"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87762561,"iid":331931,"project_id":278964,"title":"Geo: Replicate Pages Deployments","description":"\u003c!--\n\nThis template is based on a model named `PagesDeployment`.\n\nTo adapt this template, find and replace the following tokens:\n\n- `PagesDeployment`\n- `Pages Deployment`\n- `pages_deployment`\n- `pagesDeployment`\n\nIf your Model's pluralized form is non-standard, i.e. it doesn't just end in `s`, find and replace the following tokens *first*:\n\n- `PagesDeployments`\n- `Pages Deployments`\n- `pages_deployments`\n- `pagesDeployments`\n\n--\u003e\n\n## Replicate Pages Deployments\n\nThis issue is for implementing Geo replication and verification of Pages Deployments.\n\nFor more background, see [Geo self-service framework](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/development/geo/framework.md).\n\nIn order to implement and test this feature, you need to first [set up Geo locally](https://gitlab.com/gitlab-org/gitlab-development-kit/blob/main/doc/howto/geo.md).\n\nThere are three main sections below. It is a good idea to structure your merge requests this way as well:\n\n1. Modify database schemas to prepare to add Geo support for Pages Deployments\n1. Implement Geo support of Pages Deployments behind a feature flag\n1. Release Geo support of Pages Deployments\n\nIt is also a good idea to first open a proof-of-concept merge request. It can be helpful for working out kinks and getting initial support and feedback from the Geo team. As an example, see the [Proof of Concept to replicate Pipeline Artifacts](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/56423).\n\nYou can look into the following examples of MRs for implementing replication/verification for a new blob type:\n- [Add db changes](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60935) and [add verification for MR diffs using SSF](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63309)\n- [Verify Terraform state versions](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/58800)\n\n### Modify database schemas to prepare to add Geo support for Pages Deployments\n\nYou might do this section in its own merge request, but it is not required.\n\n#### Add the registry table to track replication and verification state\n\nGeo secondary sites have a [Geo tracking database](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/development/geo.md#tracking-database) independent of the main database. It is used to track the replication and verification state of all replicables. Every Model has a corresponding \"registry\" table in the Geo tracking database.\n\n- [x] Create the migration file in `ee/db/geo/migrate`:\n\n  ```shell\n  bin/rails generate geo_migration CreatePagesDeploymentRegistry\n  ```\n\n- [x] Replace the contents of the migration file with the following. Note that we cannot add a foreign key constraint on `pages_deployment_id` because the `pages_deployments` table is in a different database. The application code must handle logic such as propagating deletions.\n\n  ```ruby\n  # frozen_string_literal: true\n\n  class CreatePagesDeploymentRegistry \u003c ActiveRecord::Migration[6.0]\n    include Gitlab::Database::MigrationHelpers\n\n    disable_ddl_transaction!\n\n    def up\n      unless table_exists?(:pages_deployment_registry)\n        ActiveRecord::Base.transaction do\n          create_table :pages_deployment_registry, id: :bigserial, force: :cascade do |t|\n            t.bigint :pages_deployment_id, null: false\n            t.datetime_with_timezone :created_at, null: false\n            t.datetime_with_timezone :last_synced_at\n            t.datetime_with_timezone :retry_at\n            t.datetime_with_timezone :verified_at\n            t.datetime_with_timezone :verification_started_at\n            t.datetime_with_timezone :verification_retry_at\n            t.integer :state, default: 0, null: false, limit: 2\n            t.integer :verification_state, default: 0, null: false, limit: 2\n            t.integer :retry_count, default: 0, limit: 2, null: false\n            t.integer :verification_retry_count, default: 0, limit: 2, null: false\n            t.boolean :checksum_mismatch, default: false, null: false\n            t.binary :verification_checksum\n            t.binary :verification_checksum_mismatched\n            t.string :verification_failure, limit: 255 # rubocop:disable Migration/PreventStrings see https://gitlab.com/gitlab-org/gitlab/-/issues/323806\n            t.string :last_sync_failure, limit: 255 # rubocop:disable Migration/PreventStrings see https://gitlab.com/gitlab-org/gitlab/-/issues/323806\n\n            t.index :pages_deployment_id, name: :index_pages_deployment_registry_on_pages_deployment_id, unique: true\n            t.index :retry_at\n            t.index :state\n            # To optimize performance of PagesDeploymentRegistry.verification_failed_batch\n            t.index :verification_retry_at, name:  :pages_deployment_registry_failed_verification, order: \"NULLS FIRST\",  where: \"((state = 2) AND (verification_state = 3))\"\n            # To optimize performance of PagesDeploymentRegistry.needs_verification_count\n            t.index :verification_state, name:  :pages_deployment_registry_needs_verification, where: \"((state = 2)  AND (verification_state = ANY (ARRAY[0, 3])))\"\n            # To optimize performance of PagesDeploymentRegistry.verification_pending_batch\n            t.index :verified_at, name: :pages_deployment_registry_pending_verification, order: \"NULLS FIRST\", where: \"((state = 2) AND (verification_state = 0))\"\n          end\n        end\n      end\n    end\n\n    def down\n      drop_table :pages_deployment_registry\n    end\n  end\n  ```\n\n- [ ] If deviating from the above example, then be sure to order columns according to [our guidelines](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/development/ordering_table_columns.md).\n- [x] Run Geo tracking database migrations:\n\n  ```shell\n  bin/rake geo:db:migrate\n  ```\n\n- [x] Be sure to commit the relevant changes in `ee/db/geo/schema.rb`\n\n### Add verification state fields on the Geo primary site\n\nThe Geo primary site needs to checksum every replicable in order for secondaries to verify their own checksums. To do this, Geo requires fields on the Model. There are two ways to add the necessary verification state fields. If the table is large and wide, then it may be a good idea to add verification state fields to a separate table (Option 2). Consult a database expert if needed.\n\n#### Add verification state fields to the model table (Option 1)\n\n- [x] Create the migration file in `db/migrate`:\n\n  ```shell\n  bin/rails generate migration AddVerificationStateToPagesDeployments\n  ```\n\n- [x] Replace the contents of the migration file with:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  class AddVerificationStateToPagesDeployments \u003c ActiveRecord::Migration[6.0]\n    def change\n      change_table(:pages_deployments) do |t|\n        t.integer :verification_state, default: 0, limit: 2, null: false\n        t.column :verification_started_at, :datetime_with_timezone\n        t.integer :verification_retry_count, limit: 2, null: false\n        t.column :verification_retry_at, :datetime_with_timezone\n        t.column :verified_at, :datetime_with_timezone\n        t.binary :verification_checksum, using: 'verification_checksum::bytea'\n\n        t.text :verification_failure # rubocop:disable Migration/AddLimitToTextColumns\n      end\n    end\n  end\n  ```\n\n- [ ] If deviating from the above example, then be sure to order columns according to [our guidelines](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/development/ordering_table_columns.md).\n- [ ] If `pages_deployments` is a high-traffic table, follow [the database documentation to use `with_lock_retries`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/development/migration_style_guide.md#when-to-use-the-helper-method)\n- [x] Adding a `text` column also [requires](../database/strings_and_the_text_data_type.md#add-a-text-column-to-an-existing-table) setting a limit. Create the migration file in `db/migrate`:\n\n  ```shell\n  bin/rails generate migration AddVerificationFailureLimitToPagesDeployments\n  ```\n\n- [x] Replace the contents of the migration file with:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  class AddVerificationFailureLimitToPagesDeployments \u003c ActiveRecord::Migration[6.0]\n    include Gitlab::Database::MigrationHelpers\n\n    disable_ddl_transaction!\n\n    CONSTRAINT_NAME = 'pages_deployment_verification_failure_text_limit'\n\n    def up\n      add_text_limit :pages_deployment, :verification_failure, 255, constraint_name: CONSTRAINT_NAME\n    end\n\n    def down\n      remove_check_constraint(:pages_deployment, CONSTRAINT_NAME)\n    end\n  end\n  ```\n\n- [x] Add indexes on verification fields to ensure verification can be performed efficiently. Some or all of these indexes can be omitted if the table is guaranteed to be small. Ask a database expert if you are considering omitting indexes. Create the migration file in `db/migrate`:\n\n  ```shell\n  bin/rails generate migration AddVerificationIndexesToPagesDeployments\n  ```\n\n- [x] Replace the contents of the migration file with:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  class AddVerificationIndexesToPagesDeployments \u003c ActiveRecord::Migration[6.0]\n    include Gitlab::Database::MigrationHelpers\n\n    VERIFICATION_STATE_INDEX_NAME = \"index_pages_deployments_on_verification_state\"\n    PENDING_VERIFICATION_INDEX_NAME = \"index_pages_deployments_pending_verification\"\n    FAILED_VERIFICATION_INDEX_NAME = \"index_pages_deployments_failed_verification\"\n    NEEDS_VERIFICATION_INDEX_NAME = \"index_pages_deployments_needs_verification\"\n\n    disable_ddl_transaction!\n\n    def up\n      add_concurrent_index :pages_deployments, :verification_state, name: VERIFICATION_STATE_INDEX_NAME\n      add_concurrent_index :pages_deployments, :verified_at, where: \"(verification_state = 0)\", order: { verified_at: 'ASC NULLS FIRST' }, name: PENDING_VERIFICATION_INDEX_NAME\n      add_concurrent_index :pages_deployments, :verification_retry_at, where: \"(verification_state = 3)\", order: { verification_retry_at: 'ASC NULLS FIRST' }, name: FAILED_VERIFICATION_INDEX_NAME\n      add_concurrent_index :pages_deployments, :verification_state, where: \"(verification_state = 0 OR verification_state = 3)\", name: NEEDS_VERIFICATION_INDEX_NAME\n    end\n\n    def down\n      remove_concurrent_index_by_name :pages_deployments, VERIFICATION_STATE_INDEX_NAME\n      remove_concurrent_index_by_name :pages_deployments, PENDING_VERIFICATION_INDEX_NAME\n      remove_concurrent_index_by_name :pages_deployments, FAILED_VERIFICATION_INDEX_NAME\n      remove_concurrent_index_by_name :pages_deployments, NEEDS_VERIFICATION_INDEX_NAME\n    end\n  end\n  ```\n\n- [x] Run database migrations:\n\n  ```shell\n  bin/rake db:migrate\n  ```\n\n- [x] Be sure to commit the relevant changes in `db/structure.sql`\n\n#### Add verification state fields to a separate table (Option 2)\n\n- [ ] Create the migration file in `db/migrate`:\n\n  ```shell\n  bin/rails generate migration CreatePagesDeploymentStates\n  ```\n\n- [ ] Replace the contents of the migration file with:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  class CreatePagesDeploymentStates \u003c ActiveRecord::Migration[6.0]\n    include Gitlab::Database::MigrationHelpers\n\n    VERIFICATION_STATE_INDEX_NAME = \"index_pages_deployment_states_on_verification_state\"\n    PENDING_VERIFICATION_INDEX_NAME = \"index_pages_deployment_states_pending_verification\"\n    FAILED_VERIFICATION_INDEX_NAME = \"index_pages_deployment_states_failed_verification\"\n    NEEDS_VERIFICATION_INDEX_NAME = \"index_pages_deployment_states_needs_verification\"\n\n    disable_ddl_transaction!\n\n    def up\n      unless table_exists?(:pages_deployment_states)\n        with_lock_retries do\n          create_table :pages_deployment_states, id: false do |t|\n            t.references :pages_deployment, primary_key: true, null: false, foreign_key: { on_delete: :cascade }\n            t.integer :verification_state, default: 0, limit: 2, null: false\n            t.column :verification_started_at, :datetime_with_timezone\n            t.datetime_with_timezone :verification_retry_at\n            t.datetime_with_timezone :verified_at\n            t.integer :verification_retry_count, limit: 2\n            t.binary :verification_checksum, using: 'verification_checksum::bytea'\n            t.text :verification_failure\n\n            t.index :verification_state, name: VERIFICATION_STATE_INDEX_NAME\n            t.index :verified_at, where: \"(verification_state = 0)\", order: { verified_at: 'ASC NULLS FIRST' }, name: PENDING_VERIFICATION_INDEX_NAME\n            t.index :verification_retry_at, where: \"(verification_state = 3)\", order: { verification_retry_at: 'ASC NULLS FIRST' }, name: FAILED_VERIFICATION_INDEX_NAME\n            t.index :verification_state, where: \"(verification_state = 0 OR verification_state = 3)\", name: NEEDS_VERIFICATION_INDEX_NAME\n          end\n        end\n      end\n\n      add_text_limit :pages_deployment_states, :verification_failure, 255\n    end\n\n    def down\n      drop_table :pages_deployment_states\n    end\n  end\n  ```\n\n- [ ] If deviating from the above example, then be sure to order columns according to [our guidelines](https://gitlab.com/gitlab-org/gitlab/-/blob/master/doc/development/ordering_table_columns.md).\n- [ ] Run database migrations:\n\n  ```shell\n  bin/rake db:migrate\n  ```\n\n- [ ] Be sure to commit the relevant changes in `db/structure.sql`\n\nThat's all of the required database changes.\n\n### Implement Geo support of Pages Deployments behind a feature flag\n\n#### Step 1. Implement replication and verification\n\n- [x] Include `Gitlab::Geo::ReplicableModel` in the `PagesDeployment` class, and specify the Replicator class `with_replicator Geo::PagesDeploymentReplicator`.\n\n  At this point the `PagesDeployment` class should look like this:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  class PagesDeployment \u003c ApplicationRecord\n    include ::Gitlab::Geo::ReplicableModel\n    include ::Gitlab::Geo::VerificationState\n\n    with_replicator Geo::PagesDeploymentReplicator\n\n    mount_uploader :file, PagesDeploymentUploader\n\n    # Override the `all` default if not all records can be replicated. For an\n    # example of an existing Model that needs to do this, see\n    # `EE::MergeRequestDiff`.\n    # scope :available_replicables, -\u003e { all }\n\n    # @param primary_key_in [Range, PagesDeployment] arg to pass to primary_key_in scope\n    # @return [ActiveRecord::Relation\u003cPagesDeployment\u003e] everything that should be synced to this node, restricted by primary key\n    def self.replicables_for_current_secondary(primary_key_in)\n      # This issue template does not help you write this method.\n      #\n      # This method is called only on Geo secondary sites. It is called when\n      # we want to know which records to replicate. This is not easy to automate\n      # because for example:\n      #\n      # * The \"selective sync\" feature allows admins to choose which namespaces #   to replicate, per secondary site. Most Models are scoped to a\n      #   namespace, but the nature of the relationship to a namespace varies\n      #   between Models.\n      # * The \"selective sync\" feature allows admins to choose which shards to\n      #   replicate, per secondary site. Repositories are associated with\n      #   shards. Most blob types are not, but Project Uploads are.\n      # * Remote stored replicables are not replicated, by default. But the\n      #   setting `sync_object_storage` enables replication of remote stored\n      #   replicables.\n      #\n      # Search the codebase for examples, and consult a Geo expert if needed.\n    end\n    ...\n  end\n  ```\n\n- [x] Implement `PagesDeployment.replicables_for_current_secondary` above.\n- [ ] Ensure `PagesDeployment.replicables_for_current_secondary` is well-tested. Search the codebase for `replicables_for_current_secondary` to find examples of parameterized table specs. You may need to add more `FactoryBot` traits.\n- [x] Create `ee/app/replicators/geo/pages_deployment_replicator.rb`. Implement the `#carrierwave_uploader` method which should return a `CarrierWave::Uploader`, and implement the class method `.model` to return the `PagesDeployment` class:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  module Geo\n    class PagesDeploymentReplicator \u003c Gitlab::Geo::Replicator\n      include ::Geo::BlobReplicatorStrategy\n      extend ::Gitlab::Utils::Override\n\n      def self.model\n        ::PagesDeployment\n      end\n\n      def carrierwave_uploader\n        model_record.file\n      end\n\n      # The feature flag follows the format `geo_#{replicable_name}_replication`,\n      # so here it would be `geo_pages_deployment_replication`\n      def self.replication_enabled_by_default?\n        false\n      end\n\n      override :verification_feature_flag_enabled?\n      def self.verification_feature_flag_enabled?\n        # We are adding verification at the same time as replication, so we\n        # don't need to toggle verification separately from replication. When\n        # the replication feature flag is off, then verification is also off\n        # (see `VerifiableReplicator.verification_enabled?`)\n        true\n      end\n\n    end\n  end\n  ```\n\n- [x] Generate the feature flag definition file by running the feature flag command and following the command prompts:\n\n  ```shell\n  bin/feature-flag --ee geo_pages_deployment_replication --type development --group 'group::geo'\n  ```\n\n- [x] Add this replicator class to the method `replicator_classes` in\n  `ee/lib/gitlab/geo.rb`:\n\n  ```ruby\n  REPLICATOR_CLASSES = [\n    ::Geo::PackageFileReplicator,\n    ::Geo::PagesDeploymentReplicator\n  ]\n  end\n  ```\n\n- [x] Create `ee/spec/replicators/geo/pages_deployment_replicator_spec.rb` and perform the necessary setup to define the `model_record` variable for the shared examples:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  require 'spec_helper'\n\n  RSpec.describe Geo::PagesDeploymentReplicator do\n    let(:model_record) { build(:pages_deployment) }\n\n    include_examples 'a blob replicator'\n    include_examples 'a verifiable replicator'\n  end\n  ```\n\n- [x] Create `ee/app/models/geo/pages_deployment_registry.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  class Geo::PagesDeploymentRegistry \u003c Geo::BaseRegistry\n    include ::Geo::ReplicableRegistry\n    include ::Geo::VerifiableRegistry\n\n    MODEL_CLASS = ::PagesDeployment\n    MODEL_FOREIGN_KEY = :pages_deployment_id\n\n    belongs_to :pages_deployment, class_name: 'PagesDeployment'\n  end\n  ```\n\n- [x] Update `REGISTRY_CLASSES` in `ee/app/workers/geo/secondary/registry_consistency_worker.rb`.\n- [x] Update `def model_class_factory_name` in `ee/spec/services/geo/registry_consistency_service_spec.rb`.\n- [x] Update `it 'creates missing registries for each registry class'` in `ee/spec/workers/geo/secondary/registry_consistency_worker_spec.rb`.\n- [x] Add `pages_deployment_registry` to `ActiveSupport::Inflector.inflections` in `config/initializers_before_autoloader/000_inflections.rb`.\n- [x] Create `ee/spec/factories/geo/pages_deployment_registry.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  FactoryBot.define do\n    factory :geo_pages_deployment_registry, class: 'Geo::PagesDeploymentRegistry' do\n      pages_deployment # This association should have data, like a file or repository\n      state { Geo::PagesDeploymentRegistry.state_value(:pending) }\n\n      trait :synced do\n        state { Geo::PagesDeploymentRegistry.state_value(:synced) }\n        last_synced_at { 5.days.ago }\n      end\n\n      trait :failed do\n        state { Geo::PagesDeploymentRegistry.state_value(:failed) }\n        last_synced_at { 1.day.ago }\n        retry_count { 2 }\n        last_sync_failure { 'Random error' }\n      end\n\n      trait :started do\n        state { Geo::PagesDeploymentRegistry.state_value(:started) }\n        last_synced_at { 1.day.ago }\n        retry_count { 0 }\n      end\n\n      trait :verification_succeeded do\n        verification_checksum { 'e079a831cab27bcda7d81cd9b48296d0c3dd92ef' }\n        verification_state { Geo::PagesDeploymentRegistry.verification_state_value(:verification_succeeded) }\n        verified_at { 5.days.ago }\n      end\n    end\n  end\n  ```\n\n- [x] Create `ee/spec/models/geo/pages_deployment_registry_spec.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  require 'spec_helper'\n\n  RSpec.describe Geo::PagesDeploymentRegistry, :geo, type: :model do\n    let_it_be(:registry) { create(:geo_pages_deployment_registry) }\n\n    specify 'factory is valid' do\n      expect(registry).to be_valid\n    end\n\n    include_examples 'a Geo framework registry'\n    include_examples 'a Geo verifiable registry'\n  end\n  ```\n\n- [x] Add the following to `spec/factories/pages_deployments.rb`:\n\n  ```ruby\n  trait(:verification_succeeded) do\n    with_file\n    verification_checksum { 'abc' }\n    verification_state { PagesDeployment.verification_state_value(:verification_succeeded) }\n  end\n\n  trait(:verification_failed) do\n    with_file\n    verification_failure { 'Could not calculate the checksum' }\n    verification_state { PagesDeployment.verification_state_value(:verification_failed) }\n  end\n  ```\n\n- [x] Make sure the factory also allows setting a `project` attribute. If the model does not have a direct relation to a project, you can use a `transient` attribute. Check out `spec/factories/merge_request_diffs.rb` for an example.\n\n##### If you added verification state fields to a separate table (option 2 above), then you need to make additional model and factory changes\n\nIf you did not add verification state fields to a separate table, `pages_deployment_states`, then skip to [Step 2. Implement metrics gathering](#step-2-implement-metrics-gathering).\n\nOtherwise, you can follow [the example of Merge Request Diffs](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63309).\n\n- [ ] Add a `Geo::PagesDeploymentState` model in `ee/app/models/ee/geo/pages_deployment_state.rb`:\n\n  ``` ruby\n  module Geo\n    class PagesDeploymentState \u003c ApplicationRecord\n      self.primary_key = :pages_deployment_id\n\n      belongs_to :pages_deployment, inverse_of: :pages_deployment_state\n    end\n  end\n  ```\n\n- [ ] Add a `factory` for `pages_deployment_state`, in `ee/spec/factories/geo/pages_deployment_states.rb`:\n\n  ``` ruby\n  # frozen_string_literal: true\n\n  FactoryBot.define do\n    factory :geo_pages_deployment_state, class: 'Geo::PagesDeploymentState' do\n      pages_deployment\n\n      trait(:checksummed) do\n        verification_checksum { 'abc' }\n      end\n\n      trait(:checksum_failure) do\n        verification_failure { 'Could not calculate the checksum' }\n      end\n    end\n  end\n  ```\n\n- [ ] Add the following lines to the `pages_deployment` model to accomplish some important tasks:\n  - Include the `::Gitlab::Geo::VerificationState` concern.\n  - Delegate verification related methods to the `pages_deployment_state` model.\n  - Override some scopes to use the `pages_deployment_states` table instead of the model table, for verification.\n  - Override some methods to use the `pages_deployment_states` table in verification related queries.\n\n  ```ruby\n  class PagesDeployment \u003c ApplicationRecord\n    ...\n    include ::Gitlab::Geo::VerificationState\n\n    has_one :pages_deployment_state, autosave: true, inverse_of: :pages_deployment, class_name: 'Geo::PagesDeploymentState'\n\n    delegate :verification_retry_at, :verification_retry_at=,\n             :verified_at, :verified_at=,\n             :verification_checksum, :verification_checksum=,\n             :verification_failure, :verification_failure=,\n             :verification_retry_count, :verification_retry_count=,\n             :verification_state=, :verification_state,\n             :verification_started_at=, :verification_started_at,\n             to: :pages_deployment_state\n    ...\n\n    scope :with_verification_state, -\u003e(state) { joins(:pages_deployment_state).where(pages_deployment_states: { verification_state: verification_state_value(state) }) }\n    scope :checksummed, -\u003e { joins(:pages_deployment_state).where.not(pages_deployment_states: { verification_checksum: nil } ) }\n    scope :not_checksummed, -\u003e { joins(:pages_deployment_state).where(pages_deployment_states: { verification_checksum: nil } ) }\n\n    ...\n\n    class_methods do\n      extend ::Gitlab::Utils::Override\n      ...\n      override :verification_state_table_name\n      def verification_state_table_name\n        'pages_deployment_states'\n      end\n\n      override :verification_state_model_key\n      def verification_state_model_key\n        'pages_deployment_id'\n      end\n\n      override :verification_arel_table\n      def verification_arel_table\n        PagesDeploymentState.arel_table\n      end\n    end\n    ...\n\n    def pages_deployment_state\n      super || build_pages_deployment_state\n    end\n\n    ...\n  end\n  ```\n\n#### Step 2. Implement metrics gathering\n\nMetrics are gathered by `Geo::MetricsUpdateWorker`, persisted in `GeoNodeStatus` for display in the UI, and sent to Prometheus:\n\n- [x] Add the following fields to Geo Node Status example responses in `doc/api/geo_nodes.md`:\n  - `pages_deployments_count`\n  - `pages_deployments_checksum_total_count`\n  - `pages_deployments_checksummed_count`\n  - `pages_deployments_checksum_failed_count`\n  - `pages_deployments_synced_count`\n  - `pages_deployments_failed_count`\n  - `pages_deployments_registry_count`\n  - `pages_deployments_verification_total_count`\n  - `pages_deployments_verified_count`\n  - `pages_deployments_verification_failed_count`\n  - `pages_deployments_synced_in_percentage`\n  - `pages_deployments_verified_in_percentage`\n- [x] Add the same fields to `GET /geo_nodes/status` example response in\n  `ee/spec/fixtures/api/schemas/public_api/v4/geo_node_status.json`.\n- [x] Add the following fields to the `Sidekiq metrics` table in `doc/administration/monitoring/prometheus/gitlab_metrics.md`:\n  - `geo_pages_deployments`\n  - `geo_pages_deployments_checksum_total`\n  - `geo_pages_deployments_checksummed`\n  - `geo_pages_deployments_checksum_failed`\n  - `geo_pages_deployments_synced`\n  - `geo_pages_deployments_failed`\n  - `geo_pages_deployments_registry`\n  - `geo_pages_deployments_verification_total`\n  - `geo_pages_deployments_verified`\n  - `geo_pages_deployments_verification_failed`\n- [x] Add the following to the parameterized table in the `context 'Replicator stats' do` block in `ee/spec/models/geo_node_status_spec.rb`:\n\n  ```ruby\n  Geo::PagesDeploymentReplicator | :pages_deployment | :geo_pages_deployment_registry\n  ```\n\nPages Deployment replication and verification metrics should now be available in the API, the `Admin \u003e Geo \u003e Nodes` view, and Prometheus.\n\n#### Step 3. Implement the GraphQL API\n\nThe GraphQL API is used by `Admin \u003e Geo \u003e Replication Details` views, and is directly queryable by administrators.\n\n- [x] Add a new field to `GeoNodeType` in `ee/app/graphql/types/geo/geo_node_type.rb`:\n\n  ```ruby\n  field :pages_deployment_registries, ::Types::Geo::PagesDeploymentRegistryType.connection_type,\n        null: true,\n        resolver: ::Resolvers::Geo::PagesDeploymentRegistriesResolver,\n        description: 'Find Pages Deployment registries on this Geo node',\n        feature_flag: :geo_pages_deployment_replication\n  ```\n\n- [x] Add the new `pages_deployment_registries` field name to the `expected_fields` array in `ee/spec/graphql/types/geo/geo_node_type_spec.rb`.\n- [x] Create `ee/app/graphql/resolvers/geo/pages_deployment_registries_resolver.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  module Resolvers\n    module Geo\n      class PagesDeploymentRegistriesResolver \u003c BaseResolver\n        type ::Types::Geo::GeoNodeType.connection_type, null: true\n\n        include RegistriesResolver\n      end\n    end\n  end\n  ```\n\n- [x] Create `ee/spec/graphql/resolvers/geo/pages_deployment_registries_resolver_spec.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  require 'spec_helper'\n\n  RSpec.describe Resolvers::Geo::PagesDeploymentRegistriesResolver do\n    it_behaves_like 'a Geo registries resolver', :geo_pages_deployment_registry\n  end\n  ```\n\n- [x] Create `ee/app/finders/geo/pages_deployment_registry_finder.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  module Geo\n    class PagesDeploymentRegistryFinder\n      include FrameworkRegistryFinder\n    end\n  end\n  ```\n\n- [x] Create `ee/spec/finders/geo/pages_deployment_registry_finder_spec.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  require 'spec_helper'\n\n  RSpec.describe Geo::PagesDeploymentRegistryFinder do\n    it_behaves_like 'a framework registry finder', :geo_pages_deployment_registry\n  end\n  ```\n\n- [x] Create `ee/app/graphql/types/geo/pages_deployment_registry_type.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  module Types\n    module Geo\n      # rubocop:disable Graphql/AuthorizeTypes because it is included\n      class PagesDeploymentRegistryType \u003c BaseObject\n        include ::Types::Geo::RegistryType\n\n        graphql_name 'PagesDeploymentRegistry'\n        description 'Represents the Geo replication and verification state of a pages_deployment'\n\n        field :pages_deployment_id, GraphQL::ID_TYPE, null: false, description: 'ID of the Pages Deployment'\n      end\n    end\n  end\n  ```\n\n- [x] Create `ee/spec/graphql/types/geo/pages_deployment_registry_type_spec.rb`:\n\n  ```ruby\n  # frozen_string_literal: true\n\n  require 'spec_helper'\n\n  RSpec.describe GitlabSchema.types['PagesDeploymentRegistry'] do\n    it_behaves_like 'a Geo registry type'\n\n    it 'has the expected fields (other than those included in RegistryType)' do\n      expected_fields = %i[pages_deployment_id]\n\n      expect(described_class).to have_graphql_fields(*expected_fields).at_least\n    end\n  end\n  ```\n\n- [x] Add integration tests for providing PagesDeployment registry data to the frontend via the GraphQL API, by duplicating and modifying the following shared examples in `ee/spec/requests/api/graphql/geo/registries_spec.rb`:\n\n  ```ruby\n  it_behaves_like 'gets registries for', {\n    field_name: 'pagesDeploymentRegistries',\n    registry_class_name: 'PagesDeploymentRegistry',\n    registry_factory: :geo_pages_deployment_registry,\n    registry_foreign_key_field_name: 'pagesDeploymentId'\n  }\n  ```\n\n- [ ] Update the GraphQL reference documentation:\n\n  ```shell\n  bundle exec rake gitlab:graphql:compile_docs\n  ```\n\nIndividual Pages Deployment replication and verification data should now be available via the GraphQL API.\n\n### Release Geo support of Pages Deployments\n\n- [ ] In the rollout issue you created when creating the feature flag, modify the Roll Out Steps:\n  - [ ] Cross out any steps related to testing on production GitLab.com, because Geo is not running on production GitLab.com at the moment.\n  - [ ] Add a step to `Test replication and verification of Pages Deployments on a non-GDK-deployment. For example, using GitLab Environment Toolkit`.\n  - [ ] Add a step to `Ping the Geo PM and EM to coordinate testing`. For example, you might add steps to generate Pages Deployments, and then a Geo engineer may take it from there.\n- [ ] In `ee/config/feature_flags/development/geo_pages_deployment_replication.yml`, set `default_enabled: true`\n\n- [ ] In `ee/app/replicators/geo/pages_deployment_replicator.rb`, delete the `self.replication_enabled_by_default?` method:\n\n  ```ruby\n  module Geo\n    class PagesDeploymentReplicator \u003c Gitlab::Geo::Replicator\n      ...\n      # REMOVE THIS LINE IF IT IS NO LONGER NEEDED\n      extend ::Gitlab::Utils::Override\n\n      ...\n      # REMOVE THIS METHOD\n      def self.replication_enabled_by_default?\n        false\n      end\n      # REMOVE THIS METHOD\n\n      ...\n    end\n  end\n  ```\n\n- [ ] In `ee/app/graphql/types/geo/geo_node_type.rb`, remove the `feature_flag` option for the released type:\n\n  ```ruby\n  field :pages_deployment_registries, ::Types::Geo::PagesDeploymentRegistryType.connection_type,\n        null: true,\n        resolver: ::Resolvers::Geo::PagesDeploymentRegistriesResolver,\n        description: 'Find Pages Deployment registries on this Geo node',\n        feature_flag: :geo_pages_deployment_replication # REMOVE THIS LINE\n  ```\n\n- [ ] Add a row for Pages Deployments to the `Data types` table in [Geo data types support](https://gitlab.com/gitlab-org/gitlab/blob/master/doc/administration/geo/replication/datatypes.md#data-types)\n- [ ] Add a row for Pages Deployments to the `Limitations on replication/verification` table in [Geo data types support](https://gitlab.com/gitlab-org/gitlab/blob/master/doc/administration/geo/replication/datatypes.md#limitations-on-replicationverification). If the row already exists, then update it to show that Replication and Verification is released in the current version.","state":"closed","created_at":"2021-05-26T15:52:02.227Z","updated_at":"2021-09-15T19:35:24.089Z","closed_at":"2021-08-31T19:04:34.030Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Category:Disaster Recovery","Category:Geo Replication","Enterprise Edition","GitLab Premium","customer","devops::systems","feature::addition","group::geo","missed:14.2","section::enablement","type::feature","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},{"id":4554077,"username":"nhxnguyen","name":"Nick Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554077/avatar.png","web_url":"https://gitlab.com/nhxnguyen"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331931","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":62,"completed_count":40},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"40 of 62 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331931","notes":"https://gitlab.com/api/v4/projects/278964/issues/331931/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331931/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331931","relative":"#331931","full":"gitlab-org/gitlab#331931"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":589,"epic":{"id":2262,"iid":589,"title":"Geo: Support GitLab Pages","url":"/groups/gitlab-org/-/epics/589","group_id":9970},"iteration":null,"health_status":null},{"id":87760092,"iid":331928,"project_id":278964,"title":"[SSH keys] Revert temporary \"warning\" language in expiration notification emails","description":"## Problem to solve\n\nIn %13.12 we modified SSH key expiration notification emails [warn of upcoming expiration enforcement](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62496): \"Expired SSH keys will not be usable in future versions of GitLab\".  This was intended to warn users prior to when [SSH key expiration became enforced by default](https://gitlab.com/gitlab-org/gitlab/-/issues/320970) starting in %14.0, and will be confusing after that.\n\n## Proposal\n\nIn the same milestone that [SSH key expiration becomes enforced by default](https://gitlab.com/gitlab-org/gitlab/-/issues/320970) (currently %14.0), the email language should change from \"Expired SSH keys will not be usable in future versions of GitLab.\" to \"Expired SSH keys are not usable.\"","state":"closed","created_at":"2021-05-26T15:13:37.824Z","updated_at":"2021-06-22T13:35:22.484Z","closed_at":"2021-06-22T13:35:22.470Z","closed_by":{"id":750946,"username":"dennis","name":"Dennis Tang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/750946/avatar.png","web_url":"https://gitlab.com/dennis"},"labels":["backend","devops::manage","feature::enhancement","group::compliance","priority::2","section::dev","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331928","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331928","notes":"https://gitlab.com/api/v4/projects/278964/issues/331928/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331928/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331928","relative":"#331928","full":"gitlab-org/gitlab#331928"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87759746,"iid":331927,"project_id":278964,"title":"[SSH keys] Revert temporary \"all records\" change to expiration notification emails","description":"## Problem to solve\n\nIn %13.12 we modified SSH key expiration notification emails to [consider all SSH keys](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62114), not just those expiring \"today\".  This will cause one large batch of emails to be sent, but is no longer necessary after that batch is sent.\n\n## Proposal\n\nAfter a reasonable period of time to allow for the email batch to be sent, the prior changes should be reverted:\n\n1. The worker should only consider keys expiring \"today\".\n1. The database indexes should be removed.\n  - `index_keys_on_expires_at_and_expiry_notification_undelivered`\n  - `idx_keys_expires_at_and_before_expiry_notification_undelivered`","state":"closed","created_at":"2021-05-26T15:08:23.566Z","updated_at":"2021-11-08T16:43:20.000Z","closed_at":"2021-11-08T11:05:35.569Z","closed_by":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"labels":["backend","devops::manage","group::compliance","maintenance::refactor","section::dev","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331927","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331927","notes":"https://gitlab.com/api/v4/projects/278964/issues/331927/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331927/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331927","relative":"#331927","full":"gitlab-org/gitlab#331927"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87753017,"iid":331918,"project_id":278964,"title":"Make `StuckCiJobWorker` use `ci_pending_builds` table","description":"## Description\n\nOnce `ci_pending_builds` table is fully rolled out we could use it to provide information for `StuckCiJobWorker` to improve performance.\n\n/cc @allison.browne","state":"closed","created_at":"2021-05-26T13:45:16.757Z","updated_at":"2023-01-10T15:52:41.233Z","closed_at":"2021-09-08T14:17:21.443Z","closed_by":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"labels":["Engineering Allocation","[deprecated] Accepting merge requests","ci::scaling","devops::verify","group::pipeline execution","pods::active","section::ops"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331918","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331918","notes":"https://gitlab.com/api/v4/projects/278964/issues/331918/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331918/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331918","relative":"#331918","full":"gitlab-org/gitlab#331918"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5909,"epic":{"id":261464,"iid":5909,"title":"Introduce additional database table to improve builds queuing mechanisms","url":"/groups/gitlab-org/-/epics/5909","group_id":9970,"human_readable_end_date":"Oct 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87743654,"iid":331901,"project_id":278964,"title":"Investigate performance timeouts of Repository Tree API on .com","description":"Monitoring on .com has detected that the Repository Tree API is regularly failing with timeouts (\u003e30s) ([link](https://log.gprd.gitlab.net/app/kibana#/discover?_a=(columns:!(json.method,json.status,json.controller,json.action,json.path,json.duration_s),filters:!((query:(match:(json.meta.caller_id.keyword:(query:'GET+%2Fapi%2F%3Aversion%2Fprojects%2F%3Aid%2Frepository%2Ftree',type:phrase)))),(query:(range:(json.duration_s:(gte:1))))),index:'7092c4e2-4eb5-46f2-8305-a7da2edad090',sort:!(!(json.duration_s,desc)))\u0026_g=(time:(from:'now-24h',to:'now')))).\n\nThis is curious as the endpoint in our own performance testing is typically very performant and returns around the 100ms mark (TTFB P90). Examining the calls in some detail shows that they are being called with an increased `per_page` count of 100 compared to the default of 20, in a consistent manner suggesting some form of automation or tool, but even testing with this change internally doesn't cause the problem.\n\nThis may be only a problem on .com specifically that only happens sporadically. Even manually testing the same calls that reported as timed out in the monitoring has the endpoint returning in normal times.\n\nIssue is to investigate what's happening here on .com to identify if it's a problem with the service or with the endpoint itself.","state":"closed","created_at":"2021-05-26T11:13:10.856Z","updated_at":"2022-09-28T14:56:46.988Z","closed_at":"2021-09-23T14:33:17.462Z","closed_by":{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"},"labels":["Category:Source Code Management","Deliverable","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","api","approaching-SLO","backend","backend-weight::2","bug::performance","customer","devops::create","group::source code","infradev","missed-SLO","missed:14.2","missed:14.3","needs investigation","priority::2","section::dev","severity::2","type::bug","workflow::in review"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"}],"author":{"id":3769272,"username":"grantyoung","name":"Grant Young","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3769272/avatar.png","web_url":"https://gitlab.com/grantyoung"},"type":"ISSUE","assignee":{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"},"user_notes_count":60,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331901","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331901","notes":"https://gitlab.com/api/v4/projects/278964/issues/331901/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331901/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331901","relative":"#331901","full":"gitlab-org/gitlab#331901"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6523,"epic":{"id":321041,"iid":6523,"title":"Engineering Allocation (Source Code BE): 02-AUG-2021","url":"/groups/gitlab-org/-/epics/6523","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87732738,"iid":331896,"project_id":278964,"title":"[Group Activity Analytics] All-numeric name causes `Failed to load group activity metrics. Please try again.`","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nOn self-managed instances (tested on `13.7` and `13.12.0-ee`) when creating a new group with a name that only consists of digits, the group gets created but the [group activity analytics section](https://docs.gitlab.com/ee/user/group/#group-activity-analytics) displays the following error: `Failed to load group activity metrics. Please try again`. So far, I haven't been able to replicate the behavior on SaaS yet but would expect it to happen there too due to [this code](https://gitlab.com/gitlab-org/gitlab/blob/e7e9c5bfe2e13387f1d37a121a0a21ad4a2183dd/lib/api/helpers.rb#L145-149).\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nOn a self-managed instance (e.g. latest version `13.12.0-ee`), do the following:\n\n- Log in to your GitLab instance \n- Click on the `+` sign at the top -\u003e `New group`\n- Enter group name `123789` and click `Create group`\n- Result: the group will be created, but a red banner will be displayed: `Failed to load group activity metrics. Please try again.`\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nI have not been able to reproduce the same behavior on GitLab.com so far.\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nOn self-managed instances: When a group that only contains digits in the group name is being created, the group is being created, but an error is being displayed: `Failed to load group activity metrics. Please try again.`. This error shows up every time the group is accessed (e.g. go to http://yourGitLabInstance.example.com/123789).\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nWhen creating a group with a name that only contains digits, the error message should not appear at the top and group analytics should be loaded for the correct group. Looking at [the code](https://gitlab.com/gitlab-org/gitlab/blob/e7e9c5bfe2e13387f1d37a121a0a21ad4a2183dd/lib/api/helpers.rb#L145-149), at the moment it seems that the identifier is treated as the group id if the group name only consists of digits (rather than the `full_path`), resulting in that group not to be found and then the group activity metrics not being found.\n\n### Relevant logs and/or screenshots\n\n![GroupCreationOnlyDigits](/uploads/0307f47f430da17f3536b7c11a50bf47/Screen_Shot_2021-05-26_at_10.29.08_AM.png)\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\nBrowser console errors for my GitLab instance:\n\n```\nGET http://sc.gitlab.example.com/api/v4/analytics/group_activity/issues_count?group_path=23598 404 (Not Found)\nGET http://sc.gitlab.example.com/api/v4/analytics/group_activity/merge_requests_count?group_path=23598 404 (Not Found)\nGET http://sc.gitlab.example.com/api/v4/analytics/group_activity/new_members_count?group_path=23598 404 (Not Found)\n```\n\nAnd from the rails logs when creating a group named `23598`:\n\n```\n==\u003e /var/log/gitlab/gitlab-rails/api_json.log \u003c==\n{\"time\":\"2021-05-26T08:18:03.969Z\",\"severity\":\"INFO\",\"duration_s\":0.01294,\"db_duration_s\":0.00138,\"view_duration_s\":0.01156,\"status\":404,\"method\":\"GET\",\"path\":\"/api/v4/analytics/group_activity/issues_count\",\"params\":[{\"key\":\"group_path\",\"value\":\"23598\"}],\"host\":\"sc.gitlab.example.com\",\"remote_ip\":\"192.168.1.36, 127.0.0.1, 127.0.0.1\",\"ua\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\",\"route\":\"/api/:version/analytics/group_activity/issues_count\",\"user_id\":1,\"username\":\"root\",\"queue_duration_s\":0.029222,\"redis_calls\":1,\"redis_duration_s\":0.000408,\"redis_read_bytes\":181,\"redis_write_bytes\":697,\"redis_shared_state_calls\":1,\"redis_shared_state_duration_s\":0.000408,\"redis_shared_state_read_bytes\":181,\"redis_shared_state_write_bytes\":697,\"db_count\":2,\"db_write_count\":0,\"db_cached_count\":0,\"cpu_s\":0.033414,\"mem_objects\":12526,\"mem_bytes\":486744,\"mem_mallocs\":2081,\"mem_total_bytes\":987784,\"correlation_id\":\"01F6KW12GPNMWJ8E6DKTVB0TZZ\",\"meta.user\":\"root\",\"meta.caller_id\":\"GET /api/:version/analytics/group_activity/issues_count\",\"meta.remote_ip\":\"192.168.1.36\",\"meta.feature_category\":\"planning_analytics\",\"meta.client_id\":\"user/1\"}\n\n==\u003e /var/log/gitlab/gitlab-workhorse/current \u003c==\n{\"content_type\":\"application/json\",\"correlation_id\":\"01F6KW12GPNMWJ8E6DKTVB0TZZ\",\"duration_ms\":44,\"host\":\"sc.gitlab.example.com\",\"level\":\"info\",\"method\":\"GET\",\"msg\":\"access\",\"proto\":\"HTTP/1.1\",\"referrer\":\"http://sc.gitlab.example.com/23598\",\"remote_addr\":\"127.0.0.1:0\",\"remote_ip\":\"127.0.0.1\",\"route\":\"^/api/\",\"status\":404,\"system\":\"http\",\"time\":\"2021-05-26T10:18:03+02:00\",\"ttfb_ms\":44,\"uri\":\"/api/v4/analytics/group_activity/issues_count?group_path=23598\",\"user_agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\",\"written_bytes\":33}\n\n==\u003e /var/log/gitlab/nginx/gitlab_access.log \u003c==\n127.0.0.1 - - [26/May/2021:10:18:03 +0200] \"GET /api/v4/analytics/group_activity/issues_count?group_path=23598 HTTP/1.0\" 404 33 \"http://sc.gitlab.example.com/23598\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" -\n\n==\u003e /var/log/gitlab/gitlab-rails/api_json.log \u003c==\n{\"time\":\"2021-05-26T08:18:03.976Z\",\"severity\":\"INFO\",\"duration_s\":0.01708,\"db_duration_s\":0.00158,\"view_duration_s\":0.0155,\"status\":404,\"method\":\"GET\",\"path\":\"/api/v4/analytics/group_activity/merge_requests_count\",\"params\":[{\"key\":\"group_path\",\"value\":\"23598\"}],\"host\":\"sc.gitlab.example.com\",\"remote_ip\":\"192.168.1.36, 127.0.0.1, 127.0.0.1\",\"ua\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\",\"route\":\"/api/:version/analytics/group_activity/merge_requests_count\",\"user_id\":1,\"username\":\"root\",\"queue_duration_s\":0.0313,\"redis_calls\":1,\"redis_duration_s\":0.000282,\"redis_read_bytes\":181,\"redis_write_bytes\":697,\"redis_shared_state_calls\":1,\"redis_shared_state_duration_s\":0.000282,\"redis_shared_state_read_bytes\":181,\"redis_shared_state_write_bytes\":697,\"db_count\":2,\"db_write_count\":0,\"db_cached_count\":0,\"cpu_s\":0.038994,\"mem_objects\":13471,\"mem_bytes\":1006864,\"mem_mallocs\":2570,\"mem_total_bytes\":1545704,\"correlation_id\":\"01F6KW12GQ466DQ83VAETMXMBM\",\"meta.user\":\"root\",\"meta.caller_id\":\"GET /api/:version/analytics/group_activity/merge_requests_count\",\"meta.remote_ip\":\"192.168.1.36\",\"meta.feature_category\":\"planning_analytics\",\"meta.client_id\":\"user/1\"}\n\n==\u003e /var/log/gitlab/gitlab-workhorse/current \u003c==\n{\"content_type\":\"application/json\",\"correlation_id\":\"01F6KW12GQ466DQ83VAETMXMBM\",\"duration_ms\":51,\"host\":\"sc.gitlab.example.com\",\"level\":\"info\",\"method\":\"GET\",\"msg\":\"access\",\"proto\":\"HTTP/1.1\",\"referrer\":\"http://sc.gitlab.example.com/23598\",\"remote_addr\":\"127.0.0.1:0\",\"remote_ip\":\"127.0.0.1\",\"route\":\"^/api/\",\"status\":404,\"system\":\"http\",\"time\":\"2021-05-26T10:18:03+02:00\",\"ttfb_ms\":51,\"uri\":\"/api/v4/analytics/group_activity/merge_requests_count?group_path=23598\",\"user_agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\",\"written_bytes\":33}\n\n==\u003e /var/log/gitlab/nginx/gitlab_access.log \u003c==\n127.0.0.1 - - [26/May/2021:10:18:03 +0200] \"GET /api/v4/analytics/group_activity/merge_requests_count?group_path=23598 HTTP/1.0\" 404 33 \"http://sc.gitlab.example.com/23598\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" -\n\n...\n\n==\u003e /var/log/gitlab/gitlab-rails/api_json.log \u003c==\n{\"time\":\"2021-05-26T08:18:04.092Z\",\"severity\":\"INFO\",\"duration_s\":0.0933,\"db_duration_s\":0.00276,\"view_duration_s\":0.09054,\"status\":404,\"method\":\"GET\",\"path\":\"/api/v4/analytics/group_activity/new_members_count\",\"params\":[{\"key\":\"group_path\",\"value\":\"23598\"}],\"host\":\"sc.gitlab.example.com\",\"remote_ip\":\"192.168.1.36, 127.0.0.1, 127.0.0.1\",\"ua\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\",\"route\":\"/api/:version/analytics/group_activity/new_members_count\",\"user_id\":1,\"username\":\"root\",\"queue_duration_s\":0.071848,\"redis_calls\":3,\"redis_duration_s\":0.002123,\"redis_read_bytes\":506,\"redis_write_bytes\":807,\"redis_cache_calls\":2,\"redis_cache_duration_s\":0.000857,\"redis_cache_read_bytes\":325,\"redis_cache_write_bytes\":111,\"redis_shared_state_calls\":1,\"redis_shared_state_duration_s\":0.001266,\"redis_shared_state_read_bytes\":181,\"redis_shared_state_write_bytes\":696,\"db_count\":3,\"db_write_count\":0,\"db_cached_count\":0,\"cpu_s\":0.136133,\"mem_objects\":79989,\"mem_bytes\":7473803,\"mem_mallocs\":17041,\"mem_total_bytes\":10673363,\"correlation_id\":\"01F6KW12GQ466DQ83VAG9QWF89\",\"meta.user\":\"root\",\"meta.caller_id\":\"GET /api/:version/analytics/group_activity/new_members_count\",\"meta.remote_ip\":\"192.168.1.36\",\"meta.feature_category\":\"planning_analytics\",\"meta.client_id\":\"user/1\"}\n\n==\u003e /var/log/gitlab/gitlab-workhorse/current \u003c==\n{\"content_type\":\"application/json\",\"correlation_id\":\"01F6KW12GQ466DQ83VAG9QWF89\",\"duration_ms\":167,\"host\":\"sc.gitlab.example.com\",\"level\":\"info\",\"method\":\"GET\",\"msg\":\"access\",\"proto\":\"HTTP/1.1\",\"referrer\":\"http://sc.gitlab.example.com/23598\",\"remote_addr\":\"127.0.0.1:0\",\"remote_ip\":\"127.0.0.1\",\"route\":\"^/api/\",\"status\":404,\"system\":\"http\",\"time\":\"2021-05-26T10:18:04+02:00\",\"ttfb_ms\":167,\"uri\":\"/api/v4/analytics/group_activity/new_members_count?group_path=23598\",\"user_agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\",\"written_bytes\":33}\n\n==\u003e /var/log/gitlab/nginx/gitlab_access.log \u003c==\n127.0.0.1 - - [26/May/2021:10:18:04 +0200] \"GET /api/v4/analytics/group_activity/new_members_count?group_path=23598 HTTP/1.0\" 404 33 \"http://sc.gitlab.example.com/23598\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36\" -\n```\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n```\nSystem information\nSystem:\t\tUbuntu 18.04\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.7.2p137\nGem Version:\t3.1.4\nBundler Version:2.1.4\nRake Version:\t13.0.3\nRedis Version:\t6.0.12\nGit Version:\t2.31.1\nSidekiq Version:5.2.9\nGo Version:\tunknown\n\nGitLab information\nVersion:\t13.12.0-ee\nRevision:\t12a3ec8fb4a\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t12.6\nURL:\t\thttp://sc.gitlab.example.com\nHTTP Clone URL:\thttp://sc.gitlab.example.com/some-group/some-project.git\nSSH Clone URL:\tgit@sc.gitlab.example.com:some-group/some-project.git\nElasticsearch:\tno\nGeo:\t\tno\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: saml\n\nGitLab Shell\nVersion:\t13.18.0\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\nGit:\t\t/opt/gitlab/embedded/bin/git\n```\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n```\nsabine@sabine-lenovo:~$ sudo gitlab-rake gitlab:check SANITIZE=true\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 13.18.0 ? ... OK (13.18.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nInternal API available: OK\nRedis available via internal API: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes (cluster/worker) ... 1/1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... skipped (no tmp uploads folder yet)\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ...\n2/1 ... yes\n6/2 ... yes\n21/3 ... yes\n21/4 ... yes\n21/5 ... yes\n21/6 ... yes\n21/7 ... yes\n21/8 ... yes\n21/9 ... yes\n21/10 ... yes\n21/11 ... yes\n21/12 ... yes\n21/13 ... yes\n21/14 ... yes\n21/15 ... yes\n21/16 ... yes\n21/17 ... yes\n21/18 ... yes\n21/19 ... yes\n21/20 ... yes\n21/21 ... yes\n21/22 ... yes\n21/23 ... yes\n21/24 ... yes\n21/25 ... yes\n21/26 ... yes\n21/27 ... yes\n21/28 ... yes\n21/29 ... yes\n21/30 ... yes\n21/31 ... yes\n21/32 ... yes\n21/33 ... yes\n21/34 ... yes\n21/35 ... yes\n21/36 ... yes\n21/37 ... yes\n21/38 ... yes\n21/39 ... yes\n21/40 ... yes\n21/41 ... yes\n21/42 ... yes\n21/43 ... yes\n21/44 ... yes\n21/45 ... yes\n21/46 ... yes\n21/47 ... yes\n21/48 ... yes\n21/49 ... yes\n21/50 ... yes\n21/51 ... yes\n21/52 ... yes\n21/53 ... yes\n21/54 ... yes\n21/55 ... yes\n21/56 ... yes\n21/57 ... yes\n21/58 ... yes\n21/59 ... yes\n21/60 ... yes\n21/61 ... yes\n21/62 ... yes\n21/63 ... yes\n21/64 ... yes\n21/65 ... yes\n21/66 ... yes\n21/67 ... yes\n21/68 ... yes\n21/69 ... yes\n21/70 ... yes\n21/71 ... yes\n21/72 ... yes\n21/73 ... yes\n21/74 ... yes\n21/75 ... yes\n21/76 ... yes\n21/77 ... yes\n21/78 ... yes\n21/79 ... yes\n21/80 ... yes\n21/81 ... yes\n21/82 ... yes\n21/83 ... yes\n21/84 ... yes\n21/85 ... yes\n21/86 ... yes\n21/87 ... yes\n21/88 ... yes\n21/89 ... yes\n21/90 ... yes\n21/91 ... yes\n21/92 ... yes\n21/93 ... yes\n21/94 ... yes\n21/95 ... yes\n21/96 ... yes\n21/97 ... yes\n21/98 ... yes\n21/99 ... yes\n21/100 ... yes\n21/101 ... yes\n21/102 ... yes\n21/103 ... yes\n21/104 ... yes\n21/105 ... yes\n21/106 ... yes\n21/107 ... yes\n21/108 ... yes\n21/109 ... yes\n21/110 ... yes\n21/111 ... yes\n21/112 ... yes\n21/113 ... yes\n21/114 ... yes\n21/115 ... yes\n21/116 ... yes\n21/117 ... yes\n21/118 ... yes\n21/119 ... yes\n21/120 ... yes\n21/121 ... yes\n21/122 ... yes\n21/123 ... yes\n21/124 ... yes\n21/125 ... yes\n21/126 ... yes\n21/127 ... yes\n21/128 ... yes\n21/129 ... yes\n21/130 ... yes\n21/131 ... yes\n21/132 ... yes\n21/133 ... yes\n21/134 ... yes\n21/135 ... yes\n21/136 ... yes\n21/137 ... yes\n21/138 ... yes\n21/139 ... yes\n21/140 ... yes\n21/141 ... yes\n21/142 ... yes\n21/143 ... yes\n21/144 ... yes\n21/145 ... yes\n21/146 ... yes\n21/147 ... yes\n21/148 ... yes\n21/149 ... yes\n21/150 ... yes\n21/151 ... yes\n21/152 ... yes\n21/153 ... yes\n21/154 ... yes\n21/155 ... yes\n21/156 ... yes\n21/157 ... yes\n21/158 ... yes\n21/159 ... yes\n21/160 ... yes\n21/161 ... yes\n21/162 ... yes\n21/163 ... yes\n21/164 ... yes\n21/165 ... yes\n21/166 ... yes\n21/167 ... yes\n21/168 ... yes\n21/169 ... yes\n21/170 ... yes\n21/171 ... yes\n21/172 ... yes\n21/173 ... yes\n21/174 ... yes\n21/175 ... yes\n21/176 ... yes\n21/177 ... yes\n21/178 ... yes\n21/179 ... yes\n21/180 ... yes\n21/181 ... yes\n21/182 ... yes\n21/183 ... yes\n21/184 ... yes\n21/185 ... yes\n21/186 ... yes\n21/187 ... yes\n21/188 ... yes\n21/189 ... yes\n21/190 ... yes\n21/191 ... yes\n21/192 ... yes\n21/193 ... yes\n21/194 ... yes\n21/195 ... yes\n21/196 ... yes\n21/197 ... yes\n21/198 ... yes\n21/199 ... yes\n21/200 ... yes\n21/201 ... yes\n21/202 ... yes\n21/203 ... yes\n21/204 ... yes\n21/205 ... yes\n21/206 ... yes\n21/207 ... yes\n21/208 ... yes\n21/209 ... yes\n21/210 ... yes\n21/211 ... yes\n21/212 ... yes\n21/213 ... yes\n21/214 ... yes\n21/215 ... yes\n21/216 ... yes\n21/217 ... yes\n21/218 ... yes\n21/219 ... yes\n21/220 ... yes\n21/221 ... yes\n21/222 ... yes\n21/223 ... yes\n21/224 ... yes\n21/225 ... yes\n21/226 ... yes\n21/227 ... yes\n21/228 ... yes\n21/229 ... yes\n21/230 ... yes\n21/231 ... yes\n21/232 ... yes\n21/233 ... yes\n21/234 ... yes\n21/235 ... yes\n21/236 ... yes\n21/237 ... yes\n21/238 ... yes\n21/239 ... yes\n21/240 ... yes\n21/241 ... yes\n21/242 ... yes\n21/243 ... yes\n21/244 ... yes\n21/245 ... yes\n21/246 ... yes\n21/247 ... yes\n21/248 ... yes\n21/249 ... yes\n21/250 ... yes\n21/251 ... yes\n21/252 ... yes\n21/253 ... yes\n21/254 ... yes\n21/255 ... yes\n21/256 ... yes\n21/257 ... yes\n21/258 ... yes\n21/259 ... yes\n21/260 ... yes\n21/261 ... yes\n21/262 ... yes\n21/263 ... yes\n21/264 ... yes\n21/265 ... yes\n21/266 ... yes\n21/267 ... yes\n21/268 ... yes\n21/269 ... yes\n21/270 ... yes\n21/271 ... yes\n21/272 ... yes\n21/273 ... yes\n21/274 ... yes\n21/275 ... yes\n21/276 ... yes\n21/277 ... yes\n21/278 ... yes\n21/279 ... yes\n21/280 ... yes\n21/281 ... yes\n21/282 ... yes\n21/283 ... yes\n21/284 ... yes\n21/285 ... yes\n21/286 ... yes\n21/287 ... yes\n21/288 ... yes\n21/289 ... yes\n21/290 ... yes\n21/291 ... yes\n21/292 ... yes\n21/293 ... yes\n21/294 ... yes\n21/295 ... yes\n21/296 ... yes\n21/297 ... yes\n21/298 ... yes\n21/299 ... yes\n21/300 ... yes\n21/301 ... yes\n21/302 ... yes\n21/303 ... yes\n21/304 ... yes\n21/305 ... yes\n21/306 ... yes\n21/307 ... yes\n21/308 ... yes\n21/309 ... yes\n21/310 ... yes\n21/311 ... yes\n21/312 ... yes\n21/313 ... yes\n21/314 ... yes\n21/315 ... yes\n21/316 ... yes\n21/317 ... yes\n21/318 ... yes\n21/319 ... yes\n21/320 ... yes\n21/321 ... yes\n21/322 ... yes\n21/323 ... yes\n21/324 ... yes\n21/325 ... yes\n21/326 ... yes\n21/327 ... yes\n21/328 ... yes\n21/329 ... yes\n21/330 ... yes\n21/331 ... yes\n21/332 ... yes\n21/333 ... yes\n21/334 ... yes\n21/335 ... yes\n21/336 ... yes\n21/337 ... yes\n21/338 ... yes\n21/339 ... yes\n21/340 ... yes\n21/341 ... yes\n21/342 ... yes\n21/343 ... yes\n21/344 ... yes\n21/345 ... yes\n21/346 ... yes\n21/347 ... yes\n21/348 ... yes\n21/349 ... yes\n21/350 ... yes\n21/351 ... yes\n21/352 ... yes\n21/353 ... yes\n21/354 ... yes\n21/355 ... yes\n21/356 ... yes\n21/357 ... yes\n21/358 ... yes\n21/359 ... yes\n21/360 ... yes\n21/361 ... yes\n21/362 ... yes\n21/363 ... yes\n21/364 ... yes\n21/365 ... yes\n21/366 ... yes\n21/367 ... yes\n21/368 ... yes\n21/369 ... yes\n21/370 ... yes\n21/371 ... yes\n21/372 ... yes\n21/373 ... yes\n21/374 ... yes\n21/375 ... yes\n21/376 ... yes\n21/377 ... yes\n21/378 ... yes\n21/379 ... yes\n21/380 ... yes\n21/381 ... yes\n21/382 ... yes\n21/383 ... yes\n21/384 ... yes\n21/385 ... yes\n21/386 ... yes\n21/387 ... yes\n21/388 ... yes\n21/389 ... yes\n21/390 ... yes\n21/391 ... yes\n21/392 ... yes\n21/393 ... yes\n21/394 ... yes\n21/395 ... yes\n21/396 ... yes\n21/397 ... yes\n21/398 ... yes\n21/399 ... yes\n21/400 ... yes\n21/401 ... yes\n21/402 ... yes\n21/403 ... yes\n21/404 ... yes\n21/405 ... yes\n21/406 ... yes\n21/407 ... yes\n21/408 ... yes\n21/409 ... yes\n21/410 ... yes\n21/411 ... yes\n21/412 ... yes\n21/413 ... yes\n21/414 ... yes\n21/415 ... yes\n21/416 ... yes\n21/417 ... yes\n21/418 ... yes\n21/419 ... yes\n21/420 ... yes\n21/421 ... yes\n21/422 ... yes\n21/423 ... yes\n21/424 ... yes\n21/425 ... yes\n21/426 ... yes\n21/427 ... yes\n21/428 ... yes\n21/429 ... yes\n21/430 ... yes\n21/431 ... yes\n21/432 ... yes\n21/433 ... yes\n21/434 ... yes\n21/435 ... yes\n21/436 ... yes\n21/437 ... yes\n21/438 ... yes\n21/439 ... yes\n21/440 ... yes\n21/441 ... yes\n21/442 ... yes\n21/443 ... yes\n21/444 ... yes\n21/445 ... yes\n21/446 ... yes\n21/447 ... yes\n21/448 ... yes\n21/449 ... yes\n21/450 ... yes\n21/451 ... yes\n21/452 ... yes\n21/453 ... yes\n21/454 ... yes\n21/455 ... yes\n21/456 ... yes\n21/457 ... yes\n21/458 ... yes\n21/459 ... yes\n21/460 ... yes\n21/461 ... yes\n21/462 ... yes\n21/463 ... yes\n21/464 ... yes\n21/465 ... yes\n21/466 ... yes\n21/467 ... yes\n21/468 ... yes\n21/469 ... yes\n21/470 ... yes\n21/471 ... yes\n21/472 ... yes\n21/473 ... yes\n21/474 ... yes\n21/475 ... yes\n21/476 ... yes\n21/477 ... yes\n21/478 ... yes\n21/479 ... yes\n21/480 ... yes\n21/481 ... yes\n21/482 ... yes\n21/483 ... yes\n21/484 ... yes\n21/485 ... yes\n21/486 ... yes\n21/487 ... yes\n21/488 ... yes\n21/489 ... yes\n21/490 ... yes\n21/491 ... yes\n21/492 ... yes\n21/493 ... yes\n21/494 ... yes\n21/495 ... yes\n21/496 ... yes\n21/497 ... yes\n21/498 ... yes\n21/499 ... yes\n21/500 ... yes\n21/501 ... yes\n21/502 ... yes\n21/503 ... yes\n21/504 ... yes\n21/505 ... yes\n21/506 ... yes\n21/507 ... yes\n21/508 ... yes\n21/509 ... yes\n21/510 ... yes\n21/511 ... yes\n21/512 ... yes\n21/513 ... yes\n21/514 ... yes\n21/515 ... yes\n21/516 ... yes\n21/517 ... yes\n21/518 ... yes\n21/519 ... yes\n21/520 ... yes\n21/521 ... yes\n21/522 ... yes\n21/523 ... yes\n21/524 ... yes\n21/525 ... yes\n21/526 ... yes\n21/527 ... yes\n21/528 ... yes\n21/529 ... yes\n21/530 ... yes\n21/531 ... yes\n21/532 ... yes\n21/533 ... yes\n21/534 ... yes\n21/535 ... yes\n21/536 ... yes\n21/537 ... yes\n21/538 ... yes\n21/539 ... yes\n21/540 ... yes\n21/541 ... yes\n21/542 ... yes\n21/543 ... yes\n21/544 ... yes\n21/545 ... yes\n21/546 ... yes\n21/547 ... yes\n21/548 ... yes\n21/549 ... yes\n21/550 ... yes\n21/551 ... yes\n21/552 ... yes\n21/553 ... yes\n21/554 ... yes\n21/555 ... yes\n21/556 ... yes\n21/557 ... yes\n21/558 ... yes\n21/559 ... yes\n21/560 ... yes\n21/561 ... yes\n21/562 ... yes\n21/563 ... yes\n21/564 ... yes\n21/565 ... yes\n21/566 ... yes\n21/567 ... yes\n21/568 ... yes\n21/569 ... yes\n21/570 ... yes\n21/571 ... yes\n21/572 ... yes\n21/573 ... yes\n21/574 ... yes\n21/575 ... yes\n21/576 ... yes\n21/577 ... yes\n21/578 ... yes\n21/579 ... yes\n21/580 ... yes\n21/581 ... yes\n21/582 ... yes\n21/583 ... yes\n21/584 ... yes\n21/585 ... yes\n21/586 ... yes\n21/587 ... yes\n21/588 ... yes\n21/589 ... yes\n21/590 ... yes\n21/591 ... yes\n21/592 ... yes\n21/593 ... yes\n21/594 ... yes\n21/595 ... yes\n21/596 ... yes\n21/597 ... yes\n21/598 ... yes\n21/599 ... yes\n21/600 ... yes\n21/601 ... yes\n21/602 ... yes\n21/603 ... yes\n21/604 ... yes\n21/605 ... yes\n21/606 ... yes\n21/607 ... yes\n21/608 ... yes\n21/609 ... yes\n21/610 ... yes\n21/611 ... yes\n21/612 ... yes\n21/613 ... yes\n21/614 ... yes\n21/615 ... yes\n21/616 ... yes\n21/617 ... yes\n21/618 ... yes\n21/619 ... yes\n21/620 ... yes\n21/621 ... yes\n21/622 ... yes\n21/623 ... yes\n21/624 ... yes\n21/625 ... yes\n21/626 ... yes\n21/627 ... yes\n21/628 ... yes\n21/629 ... yes\n21/630 ... yes\n21/631 ... yes\n21/632 ... yes\n21/633 ... yes\n21/634 ... yes\n21/635 ... yes\n21/636 ... yes\n21/637 ... yes\n21/638 ... yes\n21/639 ... yes\n21/640 ... yes\n21/641 ... yes\n21/642 ... yes\n21/643 ... yes\n21/644 ... yes\n21/645 ... yes\n21/646 ... yes\n21/647 ... yes\n21/648 ... yes\n21/649 ... yes\n21/650 ... yes\n21/651 ... yes\n21/652 ... yes\n21/653 ... yes\n21/654 ... yes\n21/655 ... yes\n21/656 ... yes\n21/657 ... yes\n21/658 ... yes\n21/659 ... yes\n21/660 ... yes\n21/661 ... yes\n21/662 ... yes\n21/663 ... yes\n21/664 ... yes\n21/665 ... yes\n21/666 ... yes\n21/667 ... yes\n21/668 ... yes\n21/669 ... yes\n21/670 ... yes\n21/671 ... yes\n21/672 ... yes\n21/673 ... yes\n21/674 ... yes\n21/675 ... yes\n21/676 ... yes\n21/677 ... yes\n21/678 ... yes\n21/679 ... yes\n21/680 ... yes\n21/681 ... yes\n21/682 ... yes\n21/683 ... yes\n21/684 ... yes\n21/685 ... yes\n21/686 ... yes\n21/687 ... yes\n21/688 ... yes\n21/689 ... yes\n21/690 ... yes\n21/691 ... yes\n21/692 ... yes\n21/693 ... yes\n21/694 ... yes\n21/695 ... yes\n21/696 ... yes\n21/697 ... yes\n21/698 ... yes\n21/699 ... yes\n21/700 ... yes\n21/701 ... yes\n21/702 ... yes\n21/703 ... yes\n21/704 ... yes\n21/705 ... yes\n21/706 ... yes\n21/707 ... yes\n21/708 ... yes\n21/709 ... yes\n21/710 ... yes\n21/711 ... yes\n21/712 ... yes\n21/713 ... yes\n21/714 ... yes\n21/715 ... yes\n21/716 ... yes\n21/717 ... yes\n21/718 ... yes\n21/719 ... yes\n21/720 ... yes\n21/721 ... yes\n21/722 ... yes\n21/723 ... yes\n21/724 ... yes\n21/725 ... yes\n21/726 ... yes\n21/727 ... yes\n21/728 ... yes\n21/729 ... yes\n21/730 ... yes\n21/731 ... yes\n21/732 ... yes\n21/733 ... yes\n21/734 ... yes\n21/735 ... yes\n21/736 ... yes\n21/737 ... yes\n21/738 ... yes\n21/739 ... yes\n21/740 ... yes\n21/741 ... yes\n21/742 ... yes\n21/743 ... yes\n21/744 ... yes\n21/745 ... yes\n21/746 ... yes\n21/747 ... yes\n21/748 ... yes\n21/749 ... yes\n21/750 ... yes\n21/751 ... yes\n21/752 ... yes\n21/753 ... yes\n21/754 ... yes\n21/755 ... yes\n21/756 ... yes\n21/757 ... yes\n21/758 ... yes\n21/759 ... yes\n21/760 ... yes\n21/761 ... yes\n21/762 ... yes\n21/763 ... yes\n21/764 ... yes\n21/765 ... yes\n21/766 ... yes\n21/767 ... yes\n21/768 ... yes\n21/769 ... yes\n21/770 ... yes\n21/771 ... yes\n21/772 ... yes\n21/773 ... yes\n21/774 ... yes\n21/775 ... yes\n21/776 ... yes\n21/777 ... yes\n21/778 ... yes\n21/779 ... yes\n21/780 ... yes\n21/781 ... yes\n21/782 ... yes\n21/783 ... yes\n21/784 ... yes\n21/785 ... yes\n21/786 ... yes\n21/787 ... yes\n21/788 ... yes\n21/789 ... yes\n21/790 ... yes\n21/791 ... yes\n21/792 ... yes\n21/793 ... yes\n21/794 ... yes\n21/795 ... yes\n21/796 ... yes\n21/797 ... yes\n21/798 ... yes\n21/799 ... yes\n21/800 ... yes\n21/801 ... yes\n21/802 ... yes\n21/803 ... yes\n21/804 ... yes\n21/805 ... yes\n21/806 ... yes\n21/807 ... yes\n21/808 ... yes\n21/809 ... yes\n21/810 ... yes\n21/811 ... yes\n21/812 ... yes\n21/813 ... yes\n21/814 ... yes\n21/815 ... yes\n21/816 ... yes\n21/817 ... yes\n21/818 ... yes\n21/819 ... yes\n21/820 ... yes\n21/821 ... yes\n21/822 ... yes\n21/823 ... yes\n21/824 ... yes\n21/825 ... yes\n21/826 ... yes\n21/827 ... yes\n21/828 ... yes\n21/829 ... yes\n21/830 ... yes\n21/831 ... yes\n21/832 ... yes\n21/833 ... yes\n21/834 ... yes\n21/835 ... yes\n21/836 ... yes\n21/837 ... yes\n21/838 ... yes\n21/839 ... yes\n21/840 ... yes\n21/841 ... yes\n21/842 ... yes\n21/843 ... yes\n21/844 ... yes\n21/845 ... yes\n21/846 ... yes\n21/847 ... yes\n21/848 ... yes\n21/849 ... yes\n21/850 ... yes\n21/851 ... yes\n21/852 ... yes\n21/853 ... yes\n21/854 ... yes\n21/855 ... yes\n21/856 ... yes\n21/857 ... yes\n21/858 ... yes\n21/859 ... yes\n21/860 ... yes\n21/861 ... yes\n21/862 ... yes\n21/863 ... yes\n21/864 ... yes\n21/865 ... yes\n21/866 ... yes\n21/867 ... yes\n21/868 ... yes\n21/869 ... yes\n21/870 ... yes\n21/871 ... yes\n21/872 ... yes\n21/873 ... yes\n21/874 ... yes\n21/875 ... yes\n21/876 ... yes\n21/877 ... yes\n21/878 ... yes\n21/879 ... yes\n21/880 ... yes\n21/881 ... yes\n21/882 ... yes\n21/883 ... yes\n21/884 ... yes\n21/885 ... yes\n21/886 ... yes\n21/887 ... yes\n21/888 ... yes\n21/889 ... yes\n21/890 ... yes\n21/891 ... yes\n21/892 ... yes\n21/893 ... yes\n21/894 ... yes\n21/895 ... yes\n21/896 ... yes\n21/897 ... yes\n21/898 ... yes\n21/899 ... yes\n21/900 ... yes\n21/901 ... yes\n21/902 ... yes\n21/903 ... yes\n21/904 ... yes\n21/905 ... yes\n21/906 ... yes\n21/907 ... yes\n21/908 ... yes\n21/909 ... yes\n21/910 ... yes\n21/911 ... yes\n21/912 ... yes\n21/913 ... yes\n21/914 ... yes\n21/915 ... yes\n21/916 ... yes\n21/917 ... yes\n21/918 ... yes\n21/919 ... yes\n21/920 ... yes\n21/921 ... yes\n21/922 ... yes\n21/923 ... yes\n21/924 ... yes\n21/925 ... yes\n21/926 ... yes\n21/927 ... yes\n21/928 ... yes\n21/929 ... yes\n21/930 ... yes\n21/931 ... yes\n21/932 ... yes\n21/933 ... yes\n21/934 ... yes\n21/935 ... yes\n21/936 ... yes\n21/937 ... yes\n21/938 ... yes\n21/939 ... yes\n21/940 ... yes\n21/941 ... yes\n21/942 ... yes\n21/943 ... yes\n21/944 ... yes\n21/945 ... yes\n21/946 ... yes\n21/947 ... yes\n21/948 ... yes\n21/949 ... yes\n21/950 ... yes\n21/951 ... yes\n21/952 ... yes\n21/953 ... yes\n21/954 ... yes\n21/955 ... yes\n21/956 ... yes\n21/957 ... yes\n21/958 ... yes\n21/959 ... yes\n21/960 ... yes\n21/961 ... yes\n21/962 ... yes\n21/963 ... yes\n21/964 ... yes\n21/965 ... yes\n21/966 ... yes\n21/967 ... yes\n21/968 ... yes\n21/969 ... yes\n21/970 ... yes\n21/971 ... yes\n21/972 ... yes\n21/973 ... yes\n21/974 ... yes\n21/975 ... yes\n21/976 ... yes\n21/977 ... yes\n21/978 ... yes\n21/979 ... yes\n21/980 ... yes\n21/981 ... yes\n21/982 ... yes\n21/983 ... yes\n21/984 ... yes\n21/985 ... yes\n21/986 ... yes\n21/987 ... yes\n21/988 ... yes\n21/989 ... yes\n21/990 ... yes\n21/991 ... yes\n21/992 ... yes\n21/993 ... yes\n21/994 ... yes\n21/995 ... yes\n21/996 ... yes\n21/997 ... yes\n21/998 ... yes\n21/999 ... yes\n21/1000 ... yes\n21/1001 ... yes\n21/1002 ... yes\n21/1003 ... yes\n17/1004 ... yes\n6/1005 ... yes\n17/1006 ... yes\n5/1007 ... yes\n5/1008 ... yes\n5/1009 ... yes\n17/1010 ... yes\n17/1011 ... yes\n17/1012 ... yes\n5/1013 ... yes\n21/1014 ... yes\n21/1015 ... yes\n17/1016 ... yes\n17/1017 ... yes\n5/1018 ... yes\n17/1019 ... yes\n17/1020 ... yes\n17/1021 ... yes\n1/1022 ... yes\nRedis version \u003e= 5.0.0? ... yes\nRuby version \u003e= 2.7.2 ? ... yes (2.7.2)\nGit version \u003e= 2.31.0 ? ... yes (2.31.1)\nGit user has default SSH configuration? ... yes\nActive users: ... 8\nIs authorized keys file accessible? ... yes\nGitLab configured to store new projects in hashed storage? ... yes\nAll projects are in hashed storage? ... yes\nElasticsearch version 7.x (6.4 - 6.x deprecated to be removed in 13.8)? ... skipped (elasticsearch is disabled)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n```\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nThe [Group Activity Analytics API endpoint](https://docs.gitlab.com/ee/api/group_activity_analytics.html#get-count-of-recently-created-merge-requests-for-group) at /api/v4/analytics/group_activity/merge_requests_count should always interpret the `group_path` param as a path, never as an ID.  More specifically, it should not rely on [API::Helpers#find_group(id)](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/api/helpers.rb) because that assumes a numeric string is an ID, whic is incorrect for numeric paths.  (That is called by [API::Analytics::GroupActivityAnalytics](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/api/analytics/group_activity_analytics.rb): `@group ||= find_group!(params[:group_path])`.)\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-05-26T08:26:21.886Z","updated_at":"2022-05-24T12:01:17.542Z","closed_at":"2022-04-22T08:33:19.791Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["Deliverable","Hackathon","backend","customer","devops::manage","good for new contributors","group::optimize","missed:14.10","priority::3","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":7539399,"username":"sabinecarpenter","name":"Sabine Carpenter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7539399/avatar.png","web_url":"https://gitlab.com/sabinecarpenter"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331896","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331896","notes":"https://gitlab.com/api/v4/projects/278964/issues/331896/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331896/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331896","relative":"#331896","full":"gitlab-org/gitlab#331896"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87716493,"iid":331875,"project_id":278964,"title":"Refactor Add To Do sidebar component to Vue+Apollo","description":"Currently, issue sidebar `Add a To Do` / `Mark as done` component is implemented with HAML and jQuery. In order to align all sidebar components to use the same stack, make them reusable and be ready for GraphQL subscription-based realtime updates, we need to refactor this component to use Vue + Apollo client stack.\n\nAs part of this issue we will be using this widget in epic boards sidebar.\n\n### Availability \u0026 Testing\n\nRun `package-and-qa` regression job","state":"closed","created_at":"2021-05-26T03:27:43.195Z","updated_at":"2021-07-19T23:57:14.288Z","closed_at":"2021-07-19T23:57:14.274Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["GraphQL","automation:ml","devops::plan","frontend","group::project management","section::dev","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331875","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331875","notes":"https://gitlab.com/api/v4/projects/278964/issues/331875/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331875/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331875","relative":"#331875","full":"gitlab-org/gitlab#331875"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5302,"epic":{"id":192912,"iid":5302,"title":"Refactor issue sidebar to Vue + Apollo client","url":"/groups/gitlab-org/-/epics/5302","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":87709578,"iid":331856,"project_id":278964,"title":"Runner exception display on error","description":"### Problem\n\nWhen an overrides file name is provided, but the file is missing, runner prints out a stack trace instead of simply providing an error message. This is ugly and makes it appear that something unexpected has occurred.\n\n```\n========================================================================\nTest missing overrides file\n========================================================================\n2021-05-25 21:26:21 [INF] API Runner: Detected we are not running from CI, will try and start job\n2021-05-25 21:26:21 [INF] API Runner: Loading operations from: /runner-integraton/assets/har/pseudo-headers.har\n2021-05-25 21:26:21 [INF] API Runner: * Skipping HTTP/2 pseudo-header ':method'\n2021-05-25 21:26:21 [INF] API Runner: Override refreshing from file path or URI: notafilexxyy.json\n2021-05-25 21:26:21 [ERR] API Runner: Override Set up has failed. Error : 'The file path: 'notafilexxyy.json' does not exist.'\nPeach.Web.Runner.Services.FileLoaderException: The file path: 'notafilexxyy.json' does not exist.\n   at Peach.Web.Runner.Services.FileLoader.LoadFilePath(String inputUrlOrFilePath) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/FileLoader.cs:line 100\n   at Peach.Web.Runner.Services.FileLoader.Load(String inputUrlOrFilePath) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/FileLoader.cs:line 33\n   at Peach.Web.Runner.Services.Overrides.LoadFromFile(String inputUrlOrFilePath) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/Overrides.cs:line 36\n   at Peach.Web.Runner.Services.Overrides.ReloadOverrides() in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/Overrides.cs:line 134\n   at Peach.Web.Runner.Services.Overrides.Setup(IApplicationOptions applicationOptions) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/Overrides.cs:line 121\n   at Peach.Web.Runner.Services.OperationRunner.Run(IReader reader, IApplicationOptions applicationOptions, ICommandOptions commandOptions) in /builds/gitlab-org/security-products/analyzers/api-fuzzing-src/web/Runner/Services/OperationRunner.cs:line 60\n* assert [[ 1 -eq 1 ]]\n```\n\n### Proposal\n\nDisplay an error message and exit the program, but do not display a stack trace or crash.\n\nTasks:\n\n1. [ ] Make code updates\n1. [ ] Verify test output is correct\n1. [ ] Publish new container","state":"closed","created_at":"2021-05-25T21:38:36.435Z","updated_at":"2021-09-16T17:01:13.705Z","closed_at":"2021-09-16T17:01:13.550Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","priority::4","section::sec","severity::4","type::bug","workflow::scheduling"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331856","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331856","notes":"https://gitlab.com/api/v4/projects/278964/issues/331856/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331856/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331856","relative":"#331856","full":"gitlab-org/gitlab#331856"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87702297,"iid":331838,"project_id":278964,"title":"Don't display the collapsed file global warning when the MR only has one file","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Context\n\nWhen rendering a MR with only one file and the setting \"Show whitespace changes\" disabled, it's common to display that single file collapsed if it's larger than the limits.\n\nWe are pursuing a fix to the underlying problem, but in the mean time... we're display two large warnings side by side.\n\n![Example](https://gitlab.com/gitlab-org/gitlab/uploads/9dc2825fb0c94035b8d99e5801238ef0/Screen_Shot_2021-03-29_at_5.04.16_PM.png)\n\n\n### Proposal \n\nIf MR only has one file, don't render the global warning. If the file happens to be collapsed (as in the scenario described above), one warning is enough.\n\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n\n\n--\u003e","state":"closed","created_at":"2021-05-25T18:15:50.607Z","updated_at":"2021-07-09T12:08:51.449Z","closed_at":"2021-07-09T12:08:51.435Z","closed_by":{"id":853414,"username":"andr3","name":"André Luís","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["Stretch","UX","devops::create","feature::enhancement","group::code review","missed:14.0","section::dev","type::feature"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},{"id":9011663,"username":"mgonzalez.btig","name":"Mauricio Gonzalez","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9011663/avatar.png","web_url":"https://gitlab.com/mgonzalez.btig"}],"author":{"id":853414,"username":"andr3","name":"André Luís","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"type":"ISSUE","assignee":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331838","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331838","notes":"https://gitlab.com/api/v4/projects/278964/issues/331838/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331838/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331838","relative":"#331838","full":"gitlab-org/gitlab#331838"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87698567,"iid":331832,"project_id":278964,"title":"Status code assertion shouldn't trigger when mutated and recorded status codes are the same","description":"### Problem\n\nWhen the recorded response is a 500 error, and the mutated response is a 500 error, don't trigger the status code assertion. Otherwise the resulting fault/vulnerability will be a false positive.\n\nThis bug results in false positives.\n\n### Proposal\n\nThe status code analyzer should check the recorded status code before triggering a fault.\n\nTasks:\n\n1. [x] Update the status code assertion to check the recorded status code before triggering.\n1. [x] Add a unit test for scanner\n1. [x] Update fault counts as needed in integration tests\n1. [x] Publish new container","state":"closed","created_at":"2021-05-25T16:39:01.025Z","updated_at":"2021-05-27T21:11:21.495Z","closed_at":"2021-05-27T21:11:21.478Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","priority::3","section::sec","severity::3","type::bug","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331832","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331832","notes":"https://gitlab.com/api/v4/projects/278964/issues/331832/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331832/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331832","relative":"#331832","full":"gitlab-org/gitlab#331832"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87697378,"iid":331825,"project_id":278964,"title":"[ENG] Record the ExperimentSubject for Highlight Paid Feature experiment","description":"Awaiting the merge of https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61914","state":"closed","created_at":"2021-05-25T16:17:39.629Z","updated_at":"2021-08-29T21:40:50.323Z","closed_at":"2021-08-18T22:18:51.682Z","closed_by":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"labels":["Category:Conversion Experiment","Deliverable","auto updated","devops::growth","group::acquisition","section::growth","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331825","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331825","notes":"https://gitlab.com/api/v4/projects/278964/issues/331825/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331825/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331825","relative":"#331825","full":"gitlab-org/gitlab#331825"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4723,"epic":{"id":135319,"iid":4723,"title":"[Engineering] Highlight paid features during active trial","url":"/groups/gitlab-org/-/epics/4723","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87697333,"iid":331824,"project_id":278964,"title":"[ENG] Ensure Snowplow events include gitlab_experiment context","description":"Need to add the `experiment` key to the `Tracking.mixin(…)` setup.","state":"closed","created_at":"2021-05-25T16:16:44.011Z","updated_at":"2021-06-11T23:30:07.538Z","closed_at":"2021-06-11T23:30:07.500Z","closed_by":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"labels":["Category:Conversion Experiment","DEPRECATED Growth-Deliverable","Deliverable","devops::growth","group::acquisition","growth experiment","section::growth"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331824","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331824","notes":"https://gitlab.com/api/v4/projects/278964/issues/331824/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331824/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331824","relative":"#331824","full":"gitlab-org/gitlab#331824"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4723,"epic":{"id":135319,"iid":4723,"title":"[Engineering] Highlight paid features during active trial","url":"/groups/gitlab-org/-/epics/4723","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87696357,"iid":331818,"project_id":278964,"title":"Update Secret Detection analyzers to make Community Contributions easier","description":"At a minimum, the CONTRIBUTING.md doc in most (if not all) of the public analyzers, should be updated to include info on how to open an Issue ([example](https://gitlab.com/gitlab-org/security-products/analyzers/license-finder/-/blob/main/CONTRIBUTING.md#issue-tracker)) and how to contribute code ([example](https://gitlab.com/gitlab-org/security-products/analyzers/mobsf/-/blob/master/CONTRIBUTING.md#contributer-resources)).\n\nIdeally, these sections would be as similar as possible.\n\n## Implementation plan\n\n* [x] Turn off issue board on projects in the feature category which are part of product.\n* [x] Update or Insert a `CONTRIBUTING.md` file at the root of each repository which are part of product.","state":"closed","created_at":"2021-05-25T15:59:59.554Z","updated_at":"2022-03-16T11:42:37.686Z","closed_at":"2021-05-27T17:49:57.713Z","closed_by":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"labels":["Category:Secret Detection","[deprecated] Accepting merge requests","backend","devops::secure","group::static analysis","maintenance::workflow","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331818","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331818","notes":"https://gitlab.com/api/v4/projects/278964/issues/331818/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331818/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331818","relative":"#331818","full":"gitlab-org/gitlab#331818"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6070,"epic":{"id":277402,"iid":6070,"title":"Update Secure Analyzer projects to make Community Contributions easier","url":"/groups/gitlab-org/-/epics/6070","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87696322,"iid":331817,"project_id":278964,"title":"Update SAST analyzers to make community contributions easier","description":"At a minimum, the CONTRIBUTING.md doc in most (if not all) of the public analyzers, should be updated to include info on how to open an Issue ([example](https://gitlab.com/gitlab-org/security-products/analyzers/license-finder/-/blob/main/CONTRIBUTING.md#issue-tracker)) and how to contribute code ([example](https://gitlab.com/gitlab-org/security-products/analyzers/mobsf/-/blob/master/CONTRIBUTING.md#contributer-resources)).\n\nIdeally, these sections would be as similar as possible.\n\n## Implementation plan\n\n* [x] Turn off issue board on projects in the feature category which are part of product.\n* [ ] Update or Insert a `CONTRIBUTING.md` file at the root of each repository which are part of product.\n\n### Analyzer Projects\n\n- [x] bandit\n- [x] brakeman\n- [x] eslint\n- [x] flawfinder\n- [x] gosec\n- [x] kubesec\n- [x] mobsf\n- [x] nodejs-scan\n- [x] phpcs-security-audit\n- [x] pmd-apex\n- [x] security-code-scan\n- [x] semgrep\n- [x] sobelow\n- [x] spotbugs\n\n### Shared projects\n\n- [x] command\n- [x] report\n- [x] ruleset\n\n### Post-analyzer projects\n\n- [x] ~~tracking-calculator~~","state":"closed","created_at":"2021-05-25T15:59:31.272Z","updated_at":"2022-03-16T11:42:38.283Z","closed_at":"2021-06-01T20:40:39.582Z","closed_by":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"labels":["Category:SAST","backend","devops::secure","group::static analysis","maintenance::workflow","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"}],"author":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"type":"ISSUE","assignee":{"id":3652047,"username":"twoodham","name":"Thomas Woodham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3652047/avatar.png","web_url":"https://gitlab.com/twoodham"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331817","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":20,"completed_count":19},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"19 of 20 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331817","notes":"https://gitlab.com/api/v4/projects/278964/issues/331817/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331817/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331817","relative":"#331817","full":"gitlab-org/gitlab#331817"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6070,"epic":{"id":277402,"iid":6070,"title":"Update Secure Analyzer projects to make Community Contributions easier","url":"/groups/gitlab-org/-/epics/6070","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87692087,"iid":331815,"project_id":278964,"title":"Fix batched_background_migrations in GitLab.com that use the old job_arguments format","description":"This is a follow-up to the discussion in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61321#note_581176221\n\nAs a summary:\n\nThe first two batched background migrations that we enqueued (for `events` and `push_event_payloads`) use the old format for the `job_arguments` column:\n\n```sql\n=\u003e select id, job_class_name, table_name, column_name, job_arguments from batched_background_migrations order by id asc;\n id |            job_class_name             |        table_name        | column_name |                                job_arguments                                 \n----+---------------------------------------+--------------------------+-------------+------------------------------------------------------------------------------\n  1 | CopyColumnUsingBackgroundMigrationJob | events                   | id          | [\"id\", \"id_convert_to_bigint\"]\n  2 | CopyColumnUsingBackgroundMigrationJob | push_event_payloads      | event_id    | [\"event_id\", \"event_id_convert_to_bigint\"]\n  3 | CopyColumnUsingBackgroundMigrationJob | ci_job_artifacts         | id          | [[\"id\", \"job_id\"], [\"id_convert_to_bigint\", \"job_id_convert_to_bigint\"]]\n  4 | CopyColumnUsingBackgroundMigrationJob | ci_sources_pipelines     | id          | [[\"source_job_id\"], [\"source_job_id_convert_to_bigint\"]]\n  5 | CopyColumnUsingBackgroundMigrationJob | ci_build_needs           | id          | [[\"build_id\"], [\"build_id_convert_to_bigint\"]]\n  6 | CopyColumnUsingBackgroundMigrationJob | ci_builds                | id          | [[\"id\", \"stage_id\"], [\"id_convert_to_bigint\", \"stage_id_convert_to_bigint\"]]\n  7 | CopyColumnUsingBackgroundMigrationJob | ci_builds_runner_session | id          | [[\"build_id\"], [\"build_id_convert_to_bigint\"]]\n 40 | CopyColumnUsingBackgroundMigrationJob | ci_build_trace_chunks    | id          | [[\"build_id\"], [\"build_id_convert_to_bigint\"]]\n 73 | CopyColumnUsingBackgroundMigrationJob | ci_build_trace_sections  | build_id    | [[\"build_id\"], [\"build_id_convert_to_bigint\"]]\n```\n\nCheck that they are an array of columns instead of an array of arrays (as it was later updated to support multiple column conversions).\n\nThis is not that much of an issue and self hosted instances will have this fixed.\n\nBut as we are going to release the helper and the migrations to finalize the conversions, it would be nice not to add exceptions for those two cases.\n\nThis issue has been created to discuss and decide on how we could fix this issue:\n1. One off Production (and staging) database change --\u003e just update the columns with an update query following the process for production changes\n1. Release a GitLab.com only migration to fix them\n1. Do nothing and make the helper aware of this case","state":"closed","created_at":"2021-05-25T15:23:09.861Z","updated_at":"2022-05-30T15:29:07.570Z","closed_at":"2021-06-18T17:09:38.854Z","closed_by":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"labels":["Category:Database","Engineering Allocation","devops::data_stores","group::database","section::enablement","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"}],"author":{"id":1982738,"username":"iroussos","name":"Yannis Roussos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1982738/avatar.png","web_url":"https://gitlab.com/iroussos"},"type":"ISSUE","assignee":{"id":3170776,"username":"krasio","name":"Krasimir Angelov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3170776/avatar.png","web_url":"https://gitlab.com/krasio"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331815","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331815","notes":"https://gitlab.com/api/v4/projects/278964/issues/331815/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331815/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331815","relative":"#331815","full":"gitlab-org/gitlab#331815"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5654,"epic":{"id":231455,"iid":5654,"title":"Improve background migrations for primary key conversions","url":"/groups/gitlab-org/-/epics/5654","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87683305,"iid":331805,"project_id":278964,"title":"Validate if an actual GIT repo is behind the URL when importing Repo by URL","description":"## Problem to solve\n\nPer [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/276953#note_581772677), [enforcing .git in the URL when importing](https://gitlab.com/gitlab-org/gitlab/-/issues/276953) impacted a customer in [internal ticket](https://gitlab.zendesk.com/agent/tickets/214015) who can no longer use Import from URL feature to import projects from xp-dev.com. It seems like there are platforms that don't necessarily expose URLs ending with .git.\n\n## Steps to reproduce\n1. Create an account at xp-dev.com (they have 30 days trial with no credit card information) - \u003e Create a test project \n1. Try importing that project to GitLab using Import by URL feature.\n1. Unable to find a way to get a URL ending with `.git`\n\n## Proposed solution\nA 3-step solution was proposed in [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/331641#note_583624896):\n1. Revert current MR (https://gitlab.com/gitlab-org/gitlab/-/issues/331803)\n2. Switch from \"error message\" to \"warning\" (https://gitlab.com/gitlab-org/gitlab/-/issues/331641)\n3. **Switch from \"dummy error message\" to making real backend-based validation \"if the supplied URL feels like GIT url\" (this issue)**\n\nThis issue implements step 3:\nImplement a backend-based validation of the URL to check if there is an actual git repo behind it. This check would prevent a wider range of errors - from \"typo in url\" to \"incorrect credentials\".\nIf the validation fails, the next action would be disabled, similar to the [original solution](https://gitlab.com/gitlab-org/gitlab/-/issues/276953#proposed-solution). We should also consider providing an ability to override this validation warning for cases when the git service is temporarily not reachable.","state":"closed","created_at":"2021-05-25T13:27:41.431Z","updated_at":"2021-11-04T20:48:09.164Z","closed_at":"2021-10-04T11:39:33.981Z","closed_by":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"labels":["Category:Importers","Importer:Git","Next Up","Observability","UX","backend","customer","devops::manage","estimation::completed","frontend","group::import","missed:14.3","section::dev","type::feature","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331805","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331805","notes":"https://gitlab.com/api/v4/projects/278964/issues/331805/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331805/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331805","relative":"#331805","full":"gitlab-org/gitlab#331805"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6618,"epic":{"id":332691,"iid":6618,"title":"Manage:Import Customer Escalations","url":"/groups/gitlab-org/-/epics/6618","group_id":9970,"human_readable_end_date":"Dec 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87682525,"iid":331803,"project_id":278964,"title":"Git Repo by URL Import no longer works if the repo doesn't end in .git - Revert the original feature","description":"## Problem to solve\n\nPer [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/276953#note_581772677), [enforcing .git in the URL when importing](https://gitlab.com/gitlab-org/gitlab/-/issues/276953) impacted a customer in [internal ticket](https://gitlab.zendesk.com/agent/tickets/214015) who can no longer use Import from URL feature to import projects from xp-dev.com. It seems like there are platforms that don't necessarily expose URLs ending with .git.\n\n## Steps to reproduce\n1. Create an account at xp-dev.com (they have 30 days trial with no credit card information) - \u003e Create a test project \n1. Try importing that project to GitLab using Import by URL feature.\n1. Unable to find a way to get a URL ending with `.git`\n\n## Proposed solution\nA 3-step solution was proposed in [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/331641#note_583624896):\n1. **Revert current MR (this issue)**\n2. Switch from \"error message\" to \"warning\" (https://gitlab.com/gitlab-org/gitlab/-/issues/331641)\n3. Switch from \"warning\" to a backend-based URL validation (https://gitlab.com/gitlab-org/gitlab/-/issues/331805) \n\nThis issue implements step 1. The [original feature](https://gitlab.com/gitlab-org/gitlab/-/issues/276953) should be reverted ASAP.","state":"closed","created_at":"2021-05-25T13:19:29.587Z","updated_at":"2021-08-30T17:27:44.005Z","closed_at":"2021-06-02T18:25:15.167Z","closed_by":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"labels":["Category:Importers","Importer:Git","Next Up","customer","devops::manage","estimation::completed","frontend","group::import","milestone::p1","section::dev","type::bug","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331803","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331803","notes":"https://gitlab.com/api/v4/projects/278964/issues/331803/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331803/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331803","relative":"#331803","full":"gitlab-org/gitlab#331803"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3128,"epic":{"id":44070,"iid":3128,"title":"Repo by URL Importer","url":"/groups/gitlab-org/-/epics/3128","group_id":9970,"human_readable_end_date":"Feb 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87676086,"iid":331795,"project_id":278964,"title":"Scanned URL count is total urls observed, but only unique URLs are printed (browser based scan)","description":"```\n2021-05-25 09:12:05,605 The following 128 URLs were scanned:\nGET http://test.sr.gitlab.support:8000/\nGET http://test.sr.gitlab.support:8000/2021/05/20/hello-world/\nGET http://test.sr.gitlab.support:8000/?s=\nGET http://test.sr.gitlab.support:8000/?s=browserker\nGET http://test.sr.gitlab.support:8000/category/uncategorized/\nGET http://test.sr.gitlab.support:8000/wp-comments-post.php\nGET http://test.sr.gitlab.support:8000/wp-content/themes/twentytwentyone/assets/css/print.css?ver=1.3\nGET http://test.sr.gitlab.support:8000/wp-content/themes/twentytwentyone/assets/js/responsive-embeds.js?ver=1.3\nGET http://test.sr.gitlab.support:8000/wp-content/themes/twentytwentyone/style.css?ver=1.3\nGET http://test.sr.gitlab.support:8000/wp-includes/css/dist/block-library/style.min.css?ver=5.7.2\nGET http://test.sr.gitlab.support:8000/wp-includes/css/dist/block-library/theme.min.css?ver=5.7.2\nGET http://test.sr.gitlab.support:8000/wp-includes/js/comment-reply.min.js?ver=5.7.2\nGET http://test.sr.gitlab.support:8000/wp-includes/js/wp-embed.min.js?ver=5.7.2\nGET http://test.sr.gitlab.support:8000/wp-includes/js/wp-emoji-release.min.js?ver=5.7.2\nPOST http://test.sr.gitlab.support:8000/wp-comments-post.php\n```\n\n### Problem to solve\n\nWhen running a browser based scan, Zap reports URLs scanned but only prints unique URLs which can lead to confusion.","state":"closed","created_at":"2021-05-25T12:08:53.483Z","updated_at":"2022-07-26T03:02:35.873Z","closed_at":"2022-07-26T03:02:35.710Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Category:DAST","GitLab Ultimate","[deprecated] Accepting merge requests","devops::secure","group::dynamic analysis","missed:14.0","missed:14.10","missed:14.2","missed:14.3","missed:14.4","missed:14.5","missed:14.6","missed:14.7","missed:14.8","missed:14.9","missed:15.0","missed:15.1","priority::3","section::sec","severity::3","type::bug","wontfix"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":5324454,"username":"idawson","name":"Isaac Dawson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5324454/avatar.png","web_url":"https://gitlab.com/idawson"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331795","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331795","notes":"https://gitlab.com/api/v4/projects/278964/issues/331795/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331795/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331795","relative":"#331795","full":"gitlab-org/gitlab#331795"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87662638,"iid":331785,"project_id":278964,"title":"Adding CI minutes consumption is not idempotent","description":"## Problem\n\nWhen a job finishes we calculate the CI minutes consumption and add it to the total consumption for the relative Namespace and Project.\n\nThis logic, however, runs synchronously as part of `BuildFinishedWorker`. Since this worker triggers a lot of logic, both inline and async [it can fail typically because of the inline logic](https://log.gprd.gitlab.net/goto/6720e31d6f6761ab1d08a750037f45da) causing the worker to rerun and re-add CI minutes to the namespace consumption.\n\n## Solution\n\nEnsure that all async job executions are done after the sync operations from `BuildFinishedWorker`\n\n```diff\ndiff --git a/ee/app/workers/ee/ci/build_finished_worker.rb b/ee/app/workers/ee/ci/build_finished_worker.rb\nindex 05679955b4a..33e93ffd82f 100644\n--- a/ee/app/workers/ee/ci/build_finished_worker.rb\n+++ b/ee/app/workers/ee/ci/build_finished_worker.rb\n@@ -4,6 +4,8 @@ module EE\n   module Ci\n     module BuildFinishedWorker\n       def process_build(build)\n+        super\n+\n         unless ::Feature.enabled?(:cancel_pipelines_prior_to_destroy, default_enabled: :yaml)\n           ::Ci::Minutes::UpdateBuildMinutesService.new(build.project, nil).execute(build)\n         end\n@@ -15,8 +17,6 @@ def process_build(build)\n         if ::Gitlab.com? \u0026\u0026 build.has_security_reports?\n           ::Security::TrackSecureScansWorker.perform_async(build.id)\n         end\n-\n-        super\n       end\n     end\n   end\n```\n\nEnsure we track the operation as done in Redis so that other attempts for the same build ID are not performed. \n\n1. [x] Introduce a new param `build_id` that triggers the idempotent logic - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/68861\n1. [x] Pass `build_id` to the worker - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/69994\n1. [x] Remove the default value `nil` for `build_id` param as per https://docs.gitlab.com/ee/development/sidekiq_style_guide.html#multi-step-deployment\n1. [x] Rollout feature flag [idempotent_ci_minutes_consumption](https://gitlab.com/gitlab-org/gitlab/-/issues/340517)","state":"closed","created_at":"2021-05-25T09:07:49.820Z","updated_at":"2021-10-12T11:35:06.815Z","closed_at":"2021-10-12T06:24:07.312Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["CI minutes","Category:Continuous Integration","approaching-SLO","backend","devops::verify","group::pipeline execution","missed-SLO","missed:14.2","missed:14.3","pipeline abuse prevention","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":41,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331785","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331785","notes":"https://gitlab.com/api/v4/projects/278964/issues/331785/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331785/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331785","relative":"#331785","full":"gitlab-org/gitlab#331785"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":87661807,"iid":331778,"project_id":278964,"title":"Follow-up from \"FE: Allow users to edit the status of a Jira issue on details page [RUN ALL RSPEC] [RUN AS-IF-FOSS]\"","description":"The following discussion from !60092 should be addressed:\n\n- [ ] @tomquirk started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60092#note_574494285):  (+2 comments)\n\n    \u003e **issue (non-blocking)**: I don't _love_ this, but I understand that this is the approach currently implemented in the Test Cases issuable.\n    \u003e \n    \u003e Here's a patch that exclusively uses Vue events and consolidates the sidebar-toggling logic to `issuable_sidebar_root.vue`: [toggle-sidebar-refactor.patch](/uploads/8fcfd08986d1b01bdc2e4073af0fe620/toggle-sidebar-refactor.patch).\n    \u003e \n    \u003e I think the changes in that patch are significant enough for a follow-up MR (which I'm happy to create :grinning:) - WDYT?","state":"closed","created_at":"2021-05-25T08:54:28.150Z","updated_at":"2022-11-22T19:41:04.963Z","closed_at":"2021-10-22T06:05:10.623Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["[deprecated] Accepting merge requests","automation:ml","devops::manage","frontend","group::integrations","maintenance::refactor","section::dev","type::maintenance","won't do"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331778","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331778","notes":"https://gitlab.com/api/v4/projects/278964/issues/331778/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331778/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331778","relative":"#331778","full":"gitlab-org/gitlab#331778"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6151,"epic":{"id":286305,"iid":6151,"title":"Change the status of a Jira issue","url":"/groups/gitlab-org/-/epics/6151","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87660109,"iid":331776,"project_id":278964,"title":"Make LoadBalancing logic work for multiple logical databases","description":"We currently have https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62092 . This disables load balancing. We need to be able to get all the logic of `LoadBalancing` for logical databases for CI and the main one.\n\nThis work will also lead us to extract and spin out several more issues around (for example):\n\n1. Logging/metrics","state":"closed","created_at":"2021-05-25T08:30:26.110Z","updated_at":"2022-05-31T12:22:56.735Z","closed_at":"2021-10-11T13:14:49.277Z","closed_by":{"id":209240,"username":"yorickpeterse","name":"Yorick Peterse","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/209240/avatar.png","web_url":"https://gitlab.com/yorickpeterse"},"labels":["Category:Pods","automation:ml","automation:ml wrong","devops::data_stores","group::pods","missed:14.2","missed:14.3","section::enablement"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":209240,"username":"yorickpeterse","name":"Yorick Peterse","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/209240/avatar.png","web_url":"https://gitlab.com/yorickpeterse"}],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":{"id":209240,"username":"yorickpeterse","name":"Yorick Peterse","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/209240/avatar.png","web_url":"https://gitlab.com/yorickpeterse"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331776","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331776","notes":"https://gitlab.com/api/v4/projects/278964/issues/331776/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331776/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331776","relative":"#331776","full":"gitlab-org/gitlab#331776"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5974,"epic":{"id":268361,"iid":5974,"title":"Generalise our Load Balancing usage to allow many databases","url":"/groups/gitlab-org/-/epics/5974","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87659600,"iid":331774,"project_id":278964,"title":"Fix new package settings page to not animate to close on page load","description":"Currently we have a small UX glitch where the settings page starts as open and then animate to closed:\n\nhttps://gitlab.com/gitlab-org/gitlab/uploads/f912575a3a985e901871ef779c9de3a7/Screen_Recording_2021-05-24_at_1.36.32_PM.mov","state":"closed","created_at":"2021-05-25T08:23:30.728Z","updated_at":"2021-12-13T20:28:47.641Z","closed_at":"2021-11-17T13:55:23.047Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Package Registry","Hacktoberfest","UX","UX debt","devops::package","frontend","frontend-weight::1","group::package registry","priority::3","section::ops","severity::4","type::bug","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331774","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331774","notes":"https://gitlab.com/api/v4/projects/278964/issues/331774/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331774/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331774","relative":"#331774","full":"gitlab-org/gitlab#331774"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87655193,"iid":331768,"project_id":278964,"title":"Package model: update_composer_cache callback not working properly","description":"### Summary\n\nThe callback access the [`composer_metadatum`](https://gitlab.com/gitlab-org/gitlab/-/blob/15448f95adf5f0a09d763d2f8192bcbb253fdc59/app/models/packages/package.rb#L305) but it can be `nil`.\n\nSee the kibana logs: https://log.gprd.gitlab.net/goto/77bb770990f47587012129c74b6c4dc1 (internal)\n\n### Details\n\nI think that because the callback is on an [`after_commit` callback](https://gitlab.com/gitlab-org/gitlab/-/blob/15448f95adf5f0a09d763d2f8192bcbb253fdc59/app/models/packages/package.rb#L305) that is specific for `#destroy`, this will not work reliably because by the time we access `composer_metadatum`, the `package` model has already been deleted and the delete has already been cascaded to `composer_metadatum` = there is no row = `nil` is returned. \n\n### Proposal\n\nRemove the `#update_composer_cache` method and its [corresponding callback](https://gitlab.com/gitlab-org/gitlab/-/blob/c8fc074b14892e3f60074353b6e23fa730ea1be6/app/models/packages/package.rb#L161) from the package model. This is safe because:\n\n1. This callback has never worked and has always resulted in this error.\n1. Based on the investigation in this [thread](https://gitlab.com/gitlab-org/gitlab/-/issues/331768#note_600867749), the cache files are not being used, so we do not need to worry about updating them upon composer package deletion.","state":"closed","created_at":"2021-05-25T07:18:33.109Z","updated_at":"2021-07-08T20:56:03.045Z","closed_at":"2021-06-24T18:41:25.235Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Package Registry","Composer Repository","backend","devops::package","group::package registry","ruby","section::ops","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331768","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331768","notes":"https://gitlab.com/api/v4/projects/278964/issues/331768/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331768/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331768","relative":"#331768","full":"gitlab-org/gitlab#331768"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87642281,"iid":331751,"project_id":278964,"title":"Use Browserker authentication for normal DAST/ZAP scans","description":"\n### Proposal \n\nDAST/ZAP and DAST/Browserker have similar implementations for authentication. This issue proposes to replace the DAST/ZAP Selenium authentication with the DAST/Browserker authentication to minimize the confusion experienced by customers using DAST.\n\n### Implementation details\n\n- [x] Orchestrate Browserker authentication from DAST when authentication settings are provided\n- [x] Ensure Browserker supports all the options for DAST/ZAP authentication\n- [x] Ensure users can always download the authentication report\n- [x] ~~There is a possibility that authentication would happen in Chrome and an Ajax Scan would happen in Firefox~~ Firefox will be removed in DAST 2.0.\n- [-] Throw an error if authentication runs on a ZAP scan and no cookie value is added to the ZAP server (nice to have)\n- [x] Promote Browserker authentication documentation to the normal DAST [authentication documentation](https://docs.gitlab.com/ee/user/application_security/dast/#authentication)\n  - Document limitations with DAST/Browserker can accept session storage, while DAST/ZAP does not. \n- [-] Ensure an on-demand scan works with Browserker authentication (covered by https://gitlab.com/gitlab-org/gitlab/-/issues/333646)\n- [x] DAST/Browserker can accept session storage, while DAST/ZAP does not. \n- [-] Remove the DAST Python authentication code (will be covered elsewhere)\n\n### References\n\nThis [slack thread](https://gitlab.slack.com/archives/CKWJP0ZS7/p1621818251022800?thread_ts=1621612708.022000\u0026cid=CKWJP0ZS7) shows some of the challenges related to supporting multiple authentication mechanisms.\n\nSummary:\n\n```\nIf you’re not doing a browser-based scan:\n[instructions]\n\nIf you are doing a browser-based scan:\n[instructions]\n```","state":"closed","created_at":"2021-05-24T22:42:07.984Z","updated_at":"2021-07-10T22:51:03.462Z","closed_at":"2021-06-16T00:06:59.674Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Category:DAST","GitLab Ultimate","dast::zap","devops::secure","documentation","group::dynamic analysis","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331751","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331751","notes":"https://gitlab.com/api/v4/projects/278964/issues/331751/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331751/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331751","relative":"#331751","full":"gitlab-org/gitlab#331751"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5602,"epic":{"id":226063,"iid":5602,"title":"Authentication improvements","url":"/groups/gitlab-org/-/epics/5602","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87640541,"iid":331749,"project_id":278964,"title":"Move targets out of api-fuzzing-src repo","description":"### Problem\n\nWe have targets in two places, the `api-fuzzing-src` repository, and also in the e2e tests as docker images. This can allow the source to get out of sync.\n\n### Proposal\n\nRemove targets from the `api-fuzzing-src` repository and move them into individual projects in the `api-security-targets` folder. Images should be published to their local registry. Modify `api-fuzzing-src` to use these images during testing.\n\nTasks:\n\n1. [x] Create and/or update repositories as `image-\u003cNAME\u003e`\n1. [x] Remove `web/SDK/targets` from the `api-fuzzing-src` repository.\n1. [x] Update build/test to use new docker images pulled from the registry\n1. [x] For the flask target project, include the publishing steps from the e2e image. Consider exporting and importing in new location.\n1. [x] For the e2e graphql image, this project can be removed or exported to become the basis of the new project\n1. [x] Update e2e tests to use new docker images pulled from the registry\n1. [x] Document where targets live in the `api-fuzzing-src` readme","state":"closed","created_at":"2021-05-24T21:31:40.004Z","updated_at":"2021-11-03T00:33:36.118Z","closed_at":"2021-11-03T00:33:36.102Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:Fuzz Testing","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","maintenance::refactor","section::sec","workflow::in review"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331749","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":7},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331749","notes":"https://gitlab.com/api/v4/projects/278964/issues/331749/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331749/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331749","relative":"#331749","full":"gitlab-org/gitlab#331749"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87636382,"iid":331738,"project_id":278964,"title":"Create documentation for the new Debian repository","description":"### Context\n\nThe GitLab Package Registry will soon support Debian packages! \n\n### Problem to solve\n\nIn order to help the GitLab Community use and adopt the product into their workflows, we need documentation that explains:\n\n- The prerequisites for using the product\n- Which version of GitLab includes the feature\n- How to authenticate to the package registry\n- Any naming conventions in place\n- How to publish Debian packages\n- How to install Debian packages\n- How to use the feature with GitLab CI/CD\n\n### Proposal\n\nAdd documentation to https://docs.gitlab.com/ee/user/packages that will help developers to understand how to use the GitLab Package Registry to publish, share and install Debian packages. \n\n#### Further details\n\nSome work has already been done on this front. Here are the items where we have some preliminary commits:\n\n* Doc :\n  * Initial \"Debian packages in the Package Registry\" documentation https://gitlab.com/gitlab-org/gitlab/-/merge_requests/50438/diffs?commit_id=450395f5bd5d4e9794c26eeb7e05705752f8a2c1\n  * Add doc for Debian distributions APIs https://gitlab.com/gitlab-org/gitlab/-/merge_requests/50438/diffs?commit_id=b91589ef83bc715685b87f1c3c6b1f537f093560\n* UI:\n  * Show additionnal Debian distribution metadata https://gitlab.com/gitlab-org/gitlab/-/merge_requests/50438/diffs?commit_id=5d2df27101579c28d6e7a4b738ae9bafe9efe01c (started in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60573)\n  * Add Debian package installation commands https://gitlab.com/gitlab-org/gitlab/-/merge_requests/50438/diffs?commit_id=b7ced465e2330a8bde3aacc9dd003309e98f6886\n  * Make package views know Debian packages https://gitlab.com/gitlab-org/gitlab/-/merge_requests/50438/diffs?commit_id=cded3f1945a81e0152277867fe74bdf3c77bfd86","state":"closed","created_at":"2021-05-24T19:18:54.396Z","updated_at":"2021-09-21T10:56:01.485Z","closed_at":"2021-07-02T20:01:53.259Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Package Registry","Debian Repository","Deliverable","Package:P1","backend","devops::package","documentation","group::package registry","ruby","section::ops","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331738","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331738","notes":"https://gitlab.com/api/v4/projects/278964/issues/331738/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331738/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331738","relative":"#331738","full":"gitlab-org/gitlab#331738"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6057,"epic":{"id":275797,"iid":6057,"title":"Make the Debian repository  generally available (GA)","url":"/groups/gitlab-org/-/epics/6057","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":87636135,"iid":331733,"project_id":278964,"title":"GithubImporter: Optimize Pull Request MergedBy Importer","description":"## Current State\n\nThe `Gitlab::GithubImport::Importer::PullRequestsMergedByImporter` is skipping already imported merge requests, after fetching them from the database. Although this avoids new network requests, this still fetches more data from our database than required to do the job.\n\n## Proposal\n\nUse the cached merge requests ids to fetch only merge requests that weren't yet imported","state":"closed","created_at":"2021-05-24T19:10:32.575Z","updated_at":"2021-11-04T20:48:09.037Z","closed_at":"2021-11-01T16:56:28.764Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["Category:Importers","Importer:GitHub","Next Up","Observability","backend","devops::manage","feature::enhancement","group::import","milestone::p3","missed:14.0","missed:14.1","missed:14.2","quad-planning::complete-action","section::dev","type::feature","workflow::in review"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331733","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331733","notes":"https://gitlab.com/api/v4/projects/278964/issues/331733/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331733/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331733","relative":"#331733","full":"gitlab-org/gitlab#331733"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6618,"epic":{"id":332691,"iid":6618,"title":"Manage:Import Customer Escalations","url":"/groups/gitlab-org/-/epics/6618","group_id":9970,"human_readable_end_date":"Dec 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87632472,"iid":331724,"project_id":278964,"title":"[BE] Extend GraphQL Ci::PipelineType to filter Security Report Findings based on State","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nThis is the ~2492649 work to be used by the UI as described in https://gitlab.com/gitlab-org/gitlab/-/issues/331401. The pipeline security tab looks MOSTLY the same as the project/group/Security Center vulnerability reports, but it is implemented using entirely different code/endpoints. One exception is that the \"hide dismissed\" toggle that exists today on the pipeline security tab will be displayed as a State dropdown (which is aligned with the other vulnerability reports). Currently, the only options available in the dropdown will be `Dismissed` \u0026 `Detected`, but over time that list may expand. \n\n## Relevant links\n\n- [Frontend Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/331401)\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation: Update GraphQL documentation\n- [ ] Testing: Add/update GraphQL specs for the new type\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n--\u003e\n\n  - [x] Add `state` argument in `ee/app/graphql/resolvers/pipeline_security_report_findings_resolver.rb` so that we can filter by `state` with GraphQL\n  - [x] Add the ability to filter by `state` in `ee/app/finders/security/pipeline_vulnerabilities_finder.rb` (note: there is a filter by `scope` in this file which just include findings with `dismissed` state or without `dismissed` state but we want here the filter which will filter by any state or array of states)","state":"closed","created_at":"2021-05-24T17:59:13.748Z","updated_at":"2021-07-06T19:41:12.994Z","closed_at":"2021-07-06T00:04:02.312Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Vulnerability Management","backend","devops::secure","feature::enhancement","group::threat insights","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"}],"author":{"id":4906978,"username":"lkerr","name":"Lindsay Kerr","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906978/avatar.png","web_url":"https://gitlab.com/lkerr"},"type":"ISSUE","assignee":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331724","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331724","notes":"https://gitlab.com/api/v4/projects/278964/issues/331724/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331724/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331724","relative":"#331724","full":"gitlab-org/gitlab#331724"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4969,"epic":{"id":148197,"iid":4969,"title":"Convert the pipeline security tab to use GraphQL \u0026 shared UI components","url":"/groups/gitlab-org/-/epics/4969","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87624054,"iid":331716,"project_id":278964,"title":"Simplify implementation of the show_plans? method","description":"## Description\n\nWhile implementing https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61142, we noticed the implementation for the method [show_plans?](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61142/diffs#87ac9b83bf7d7055fe1599d4003e4dd00db88f04_86_87) is not very readable. \n\n~~Also, the business logic behind it needs to be revalidated, so we're sure what we're doing there is correct. For example, we're not sure if it's correct that `namespace.ultimate_plan` can be `true` at the same time that `namespace.trial_active?` is also `true`.~~\n\nEdit: the strike-trhough part will be tackled with gitlab-org/gitlab#337520","state":"closed","created_at":"2021-05-24T15:25:42.478Z","updated_at":"2021-08-10T09:35:16.501Z","closed_at":"2021-08-10T09:35:16.488Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["Category:Purchase","devops::fulfillment","frontend","group::purchase","maintenance::refactor","onboarding","section::fulfillment","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":4737352,"username":"astoicescu","name":"Andrei Stoicescu","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4737352/avatar.png","web_url":"https://gitlab.com/astoicescu"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331716","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331716","notes":"https://gitlab.com/api/v4/projects/278964/issues/331716/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331716/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331716","relative":"#331716","full":"gitlab-org/gitlab#331716"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87622821,"iid":331715,"project_id":278964,"title":"Follow-up from \"Drop builds that don't match runners or have exceeded their quota\"","description":"The following discussions from !61475 should be addressed:\n\n- [ ] @fabiopitino started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61475#note_583677102): \n\n    \u003e should this be `builds.latest`? This doesn't make much difference now because the attributes used by the matchers and this is used only when the pipeline is created. But if this is used later (I think it could be used when enqueueing jobs) and there are retried builds, those will show up in `build_ids` attribute of the matcher.\n\n- [ ] @fabiopitino started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61475#note_583677108): \n\n    \u003e minor: we could reuse `available CI quota` shared examples here. We would only need to renamed it to describe what happens to the job.\n\n@mbobin","state":"closed","created_at":"2021-05-24T15:00:45.440Z","updated_at":"2021-10-28T13:56:33.183Z","closed_at":"2021-06-17T07:26:01.077Z","closed_by":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"labels":["Category:Continuous Integration","backend","devops::verify","group::pipeline execution","section::ops","type::maintenance","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331715","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331715","notes":"https://gitlab.com/api/v4/projects/278964/issues/331715/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331715/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331715","relative":"#331715","full":"gitlab-org/gitlab#331715"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87618467,"iid":331711,"project_id":278964,"title":"\"Connection failure\" in Web IDE web terminal when using Docker executor","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n## Update\n\nThis issue is related to https://gitlab.com/gitlab-org/gitlab-runner/-/issues/3605 and the Runner team will be the ones to implement changes to the docker executor and resolve this timeout.\n\n---\n\n### Summary\n\nWe recently set up the Interactive Web Terminal feature on our locally-hosted GitLab runners, which are running the latest version of the runner.\n\nI've verified that I can click the \"Debug\" button during a GitLab CI pipeline and open a terminal to the associated runtime environment.\n\nHowever, when I created a .gitlab-webide.yml file in one of my projects and tried to use that with the Web IDE, I get the message \"Connection failure\" in the web terminal window.\n\nBut if I open the project's GitLab CI pipelines page, I can see that my \"terminal\" job is running, and I can even connect to it if I click the \"Debug\" button. So it seems I simply can't connect using the Web IDE.\n\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\nOur .gitlab-webide.yml\n```\nterminal:\nimage: docker.mimsoftware.com/orion/containers/tox-test-container:2.1\ntags:\n- docker\nscript: sleep 1200\nservices:\n- docker:20.10-dind\n```\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-05-24T13:45:32.121Z","updated_at":"2022-04-22T06:39:00.105Z","closed_at":"2022-03-16T16:52:24.392Z","closed_by":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"labels":["Category:Web IDE","Deliverable","Eng-Consumer::Quality","Eng-Producer::Development","Engineering Allocation","approaching-SLO","backend","customer","devops::create","frontend","group::editor","missed-SLO","missed-deliverable","missed:14.8","priority::2","section::dev","severity::2","type::bug","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":6115756,"username":"joseph","name":"Joseph Wambua","state":"active","avatar_url":"https://secure.gravatar.com/avatar/97a2e7dc3273d27e993f35de226a0ed6?s=80\u0026d=identicon","web_url":"https://gitlab.com/joseph"},"type":"ISSUE","assignee":null,"user_notes_count":40,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331711","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331711","notes":"https://gitlab.com/api/v4/projects/278964/issues/331711/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331711/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331711","relative":"#331711","full":"gitlab-org/gitlab#331711"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6428,"epic":{"id":313875,"iid":6428,"title":"Web IDE | Bugs \u0026 performance improvements","url":"/groups/gitlab-org/-/epics/6428","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":87617281,"iid":331709,"project_id":278964,"title":"Remove `gitlab_subscription_future_renewal` feature flag","description":"\u003c!-- Title suggestion: [Feature flag] Remove FEATURE_FLAG_NAME --\u003e\n\n## Feature\n\nThe `:gitlab_subscription_future_renewal` feature flag was [previously added](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/56235) and has been [enabled on GitLab.com production](https://gitlab.com/gitlab-org/gitlab/-/issues/324157#note_575821963) for over a week, without incident.\n\nThis flag was introduced to ensure it could easily be toggled off if it impacted CustomersDot due to the increased traffic. This has not been the case and the timeframe it's been enabled for should be sufficient, so it can now be removed.\n\n## Owners\n\n- Group: ~\"group::utilization\"\n- Slack channel: `#g_utilization`\n- DRI: `@vij`\n- PM: `@amandarueda` \n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:gitlab_subscription_future_renewal` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete gitlab_subscription_future_renewal`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.\n\n### Availability \u0026 Testing\n\nRemoving a feature flag can be quite problematic for end-to-end or feature tests that may rely on the flag.  Please review any potential references to this flag in all testing levels.","state":"closed","created_at":"2021-05-24T13:21:38.117Z","updated_at":"2021-08-19T14:49:53.453Z","closed_at":"2021-07-28T12:48:55.416Z","closed_by":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"labels":["Community contribution","[deprecated] Category:Utilization","[deprecated] 🍎","backend","devops::fulfillment","feature flag","group::utilization","maintenance::refactor","quad-planning::complete-action","section::fulfillment","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},{"id":6265352,"username":"edith007","name":"Siddharth Asthana","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6265352/avatar.png","web_url":"https://gitlab.com/edith007"}],"author":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"type":"ISSUE","assignee":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331709","notes":"https://gitlab.com/api/v4/projects/278964/issues/331709/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331709/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331709","relative":"#331709","full":"gitlab-org/gitlab#331709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":87610230,"iid":331703,"project_id":278964,"title":"Multi-project pipeline stuck in running when triggering a pipeline that does not exists","description":"\n### Summary\n\nWhen triggering a pipeline that does not existing the pipeline stuck in running status\n\n### Steps to reproduce\n1. Create a pipeline\n2. Trigger multi project pipeline to a non exist pipeline\n3. See pipeline status stuck in running status\n\n### Example Project\n\nUse this minimal configuration\n\n```yaml\nsome_job: \n  script:\n    - echo \"0\"\n\nsome_trigger_job: \n  trigger:\n    project: some project\n```\n\n![image](/uploads/8732686740fddc78dac1b8c6af57d75f/image.png)\n\n### What is the current *bug* behavior?\n\nPipeline stays running\n\n### What is the expected *correct* behavior?\n\nIf the project does not exists we should fail the pipeline with an error message pipeline \u003cname\u003e does not exists\n\n\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-05-24T11:11:40.298Z","updated_at":"2021-11-01T10:08:16.533Z","closed_at":"2021-08-31T10:29:03.703Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","approaching-SLO","backend","candidate::14.3","devops::verify","group::pipeline authoring","missed-SLO","priority::2","section::ops","severity::2","type::bug","usability","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":4509877,"username":"dhershkovitch","name":"Dov Hershkovitch","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7daa3113f0359f08a217fa800d9cc1d2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dhershkovitch"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331703","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331703","notes":"https://gitlab.com/api/v4/projects/278964/issues/331703/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331703/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331703","relative":"#331703","full":"gitlab-org/gitlab#331703"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":87600476,"iid":331697,"project_id":278964,"title":"Add or refine Prometheus metrics for GraphQL","description":"## Description\n\nWe do have a bunch of Prometheus metrics that help us to observe how GraphQL performs. It is not clear however, if the metrics we have are enough or if we should change them.\n\n1. Cardinality of the existing metrics can be a significant problem.\n1. We might want to add more metrics\n\nRight now the metric `graphql_duration_seconds_count` has cardinality value of 89624. See `count(graphql_duration_seconds_count{env=\"gprd\"})` [in action](https://thanos-query.ops.gitlab.net/graph?g0.range_input=1h\u0026g0.max_source_resolution=0s\u0026g0.expr=count(graphql_duration_seconds_count%7Benv%3D%22gprd%22%7D)\u0026g0.tab=1). This is growing quickly, and we already do experience significant problems with `gitlab_sql_duration_seconds_count` that has cardinality value of around 150k.\n\n## Problem\n\nSome investigation needs to be done around existing metrics, to better understand if we should add new ones or refine existing ones.\n\nThe outcome might be addressing concerns over the high cardinality of `graphql_duration_seconds_count metric` that we know will cause problems soon, and making it possible to observe latency and requests rate for given GraphQL field / type / resolver using Prometheus.\n\nWe may want to add a counter that aggregates hits for every GraphQL type / field / resolver and a histogram that gets only recorded if we exceed some threshold, like 100ms, but in order to find the best solution some further investigation might be needed.\n\n## Solution proposal\n\nLet's create a new tracer using GraphQL Ruby's [tracing hooks](https://graphql-ruby.org/queries/tracing.html). \n\nUnlike the current [`generic_tracing.rb`](https://gitlab.com/gitlab-org/gitlab/blob/ffdc55c0feb4de231ad83870acf11c88da717705/lib/gitlab/graphql/generic_tracing.rb), we shouldn't inherit from [`GraphQL::Tracing::PlatformTracing`](https://graphql-ruby.org/api-doc/1.12.16/GraphQL/Tracing/PlatformTracing.html) since this class is part of the library's private API (according to the API docs).\n\nFor now, the new GraphQL tracer will just watch for two events (see [this tracer](https://sourcegraph.com/github.com/rmosolgo/graphql-ruby/-/blob/lib/graphql/tracing/platform_tracing.rb?L21) for more examples):\n\n1. `execute_field` which contains metadata about the current field being executed\n2. `execute_query` which contains metadata about a query being execute.\n\nThe new GraphQL tracer will write the duration of these events to two separate Prometheus metrics:\n\n1. `graphql_field_duration_seconds` which contains keys for the `feature_category`, `field_name`, `operation_name`.\n2. `graphql_query_duration_seconds` which contains keys for `feature_category`, `operation_name`.\n\n**Why split the `graphql_field_duration_seconds` and `graphql_query_duration_seconds`?**\n\nSince the fields could be executed in parallel, their duration won't add up to the total queries duration. Nevertheless, it's important to see the context of a certain field's execution, so we will include the `operation_name` here.\n\n**Why not use or build off of the existing tracer `generic_tracing.rb` or use the existing `graphql_duration_seconds`?** \n\nOver in [`generic_tracing.rb`](https://gitlab.test:3443/Commit451/lab-coat/-/issues/2), we've copied [`graphql-ruby` implementation](https://sourcegraph.com/github.com/rmosolgo/graphql-ruby/-/blob/lib/graphql/tracing/prometheus_tracing.rb) for [prometheus tracing](https://graphql-ruby.org/queries/tracing#prometheus). This creates a **massive** bucket for `:graphql_duration_seconds` which contains a very generic `key:` and `platform_key:`. If `key=\"execute_field\"` you can see a break down of every GraphQL key contained in `platform_key`\n\n\u003cdetails\u003e\n\n![Screen_Shot_2021-08-16_at_3.55.10_PM](/uploads/e65ef9f716b85a690ea9cdf9804c5248/Screen_Shot_2021-08-16_at_3.55.10_PM.png)\n\n\u003c/details\u003e\n\nBut, `key:` can also be \"execute_query\", \"analyze_query\", etc. This metric is currently being used as a single bucket to trace every event coming from GraphQL. This is likely adding to it's very high cardinality.\n\n**Does the `execute_query` event cover mutations as well?**\n\nI'm not sure, but the docs seem to suggest so. We'll need to verify this :eyes:\n\n/cc @reprazent @pslaughter @dsatcher","state":"closed","created_at":"2021-05-24T08:23:43.201Z","updated_at":"2022-11-22T19:41:09.103Z","closed_at":"2021-11-10T15:21:57.669Z","closed_by":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","GraphQL","automation:ml","backend","devops::manage","group::integrations","infradev","missed:14.2","missed:14.3","missed:14.4","priority::2","section::dev","severity::2","workflow::in review"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"user_notes_count":74,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-11-09","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331697","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":3,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331697","notes":"https://gitlab.com/api/v4/projects/278964/issues/331697/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331697/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331697","relative":"#331697","full":"gitlab-org/gitlab#331697"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5841,"epic":{"id":255818,"iid":5841,"title":"Grafana dashboard for GraphQL API","url":"/groups/gitlab-org/-/epics/5841","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":87592906,"iid":331689,"project_id":278964,"title":"Fix the spacing around the branch switcher in the pipeline editor","description":"## Problem\n\nThe branch switcher has inconsistent padding around it.\n\n![Image_2021-05-24_at_12.52.10_PM](/uploads/2a42f6233da2616221b2361bbb04e6b0/Image_2021-05-24_at_12.52.10_PM.png)\n\n## Proposal\n\n- Remove the padding on the left of the branch switcher to ensure it's flush with the rest of the content\n- Make the spacing on top and bottom of the branch switcher the same, equal to 8px","state":"closed","created_at":"2021-05-24T05:54:48.945Z","updated_at":"2021-05-31T10:05:36.574Z","closed_at":"2021-05-31T10:05:36.554Z","closed_by":{"id":4706959,"username":"nadia_sotnikova","name":"Nadia Sotnikova","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4706959/avatar.png","web_url":"https://gitlab.com/nadia_sotnikova"},"labels":["Category:Pipeline Authoring","UI polish","UX","Verify candidate","devops::verify","frontend","group::pipeline authoring","section::ops","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"}],"author":{"id":4706959,"username":"nadia_sotnikova","name":"Nadia Sotnikova","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4706959/avatar.png","web_url":"https://gitlab.com/nadia_sotnikova"},"type":"ISSUE","assignee":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/331689","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/331689","notes":"https://gitlab.com/api/v4/projects/278964/issues/331689/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/331689/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#331689","relative":"#331689","full":"gitlab-org/gitlab#331689"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5393,"epic":{"id":202656,"iid":5393,"title":"Pipeline Editor - Branch selector","url":"/groups/gitlab-org/-/epics/5393","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]