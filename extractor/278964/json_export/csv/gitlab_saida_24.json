[{"id":107381097,"iid":360795,"project_id":278964,"title":"Pipeline tabs migration - Security tab","description":"## Steps\n\n| Step  | Issue Link | MR link\n| ------ | ------ | ------ |\n| Introduce the base tab layout in Vue behind a disabled feature flag | https://gitlab.com/gitlab-org/gitlab/-/issues/230749 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80401 |\n| Support tab redirection  | None | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85183/ |\n| Add the Pipeline and Dag tabs content  | https://gitlab.com/gitlab-org/gitlab/-/issues/356198 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83418 |\n| Add the Jobs tab content  | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946 |  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946 |\n| Create new Vue component for Failed Jobs tab content | https://gitlab.com/gitlab-org/gitlab/-/issues/360656 | cell |\n| Add the Failed Jobs tab content  | https://gitlab.com/gitlab-org/gitlab/-/issues/360798 | |\n| Add the Tests tab content | https://gitlab.com/gitlab-org/gitlab/-/issues/360794 |cell |\n| Add the the Security tab content  | :point_left_tone1: you are here | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/87808 |\n| Add the the License tab content  | https://gitlab.com/gitlab-org/gitlab/-/issues/360796 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/91741 |\n| Add the the Code Quality tab content  | https://gitlab.com/gitlab-org/gitlab/-/issues/360797 | cell |\n| Feature flag rollout  | | https://gitlab.com/gitlab-org/gitlab/-/issues/353118 |\n\n## Description of the Vue app logic\n\nBehind the disabled feature flag `pipeline_tabs_vue`, we now have Vue tabs in the pipeline page instead of Haml. However given how big the work is, we have divided each tab content into its own issue and MR. This specific issue is to make **the security tab content** render inside the nre tab structure in Vue. To do so, here are some steps to consider:\n\n1. When the feature is turned on, in `app/views/projects/pipelines/show.html.haml` we now have the `js-pipeline-tabs` element which uses a helper to pass down all the dataset we might need to our single Vue app.\n1. We now have 2 helpers: one for CE (`app/helpers/projects/pipeline_helper.rb`) and one for EE (`ee/app/helpers/ee/projects/pipeline_helper.rb`). Each of them is passing data down to the Vue app through the dataset. If your tab is both in CE and EE, then your data should live in the CE helper. If your tab is unique to EE, then you can pass it down trough the EE helper.\n1. We then have the pipeline init bundle (`app/assets/javascripts/pipelines/pipeline_details_bundle.js`) which will check if the flag is on. If it is, then we only create one app instead of one per tab\n1. Then the data is passed down through the app init function in `app/assets/javascripts/pipelines/pipeline_tabs.js`. Make sure to pass your new dataset here to the app. We conditionally render with `ee_else_ce` the right Vue tabs component. The CE component has a slot in which the EE component can pass all the additional tabs. This mean that the EE component always has the CE tab and logic for free :raised_hands_tone1: \n1. Then in the CE tabs component (`app/assets/javascripts/pipelines/components/pipeline_tabs.vue`) all tabs are rendered except the `failed jobs` component which will need to change the in failed jobs MR (we only show it if there are failed jobs!)\n1. In the EE tab component (`ee/app/assets/javascripts/pipelines/components/pipeline_tabs.vue`) we have conditional on each tab which comes from the API permissions. Permissions should already work as is for all tabs\n\n## Work required\n\n1. Check the previous haml that we were using for the tab (`app/views/projects/pipelines/_with_tabs.html.haml` or `ee/app/views/projects/pipelines/_tabs_content.html.haml`. What data are we passing down to the app? Add the same data to the right `pipeline_helper.rb` (CE or EE)\n1. After adding the right data, we also need to update the helper specs (CE: `spec/helpers/projects/pipeline_helper_spec.rb`, EE: `ee/spec/helpers/ee/projects/pipeline_helper_spec.rb`). Note that if you are passing data through the EE helper, we need to expect it in the CE helper as well.\n1. In `app/assets/javascripts/pipelines/pipeline_tabs.js`, pass your dataset to the Vue App. For this migration, we aim to pass all the data as it used to be without any changes. We can come back later to see if there are too many properties how we can better optimize this.\n1. **TAB SPECIFIC INSTRUCTION** Add a badge to the tab if it applies, so either: Failed jobs count, Tests count, Licenses count. You can refer to the job MR as to how this can easily be done: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946\n1. Add the lazy property on the tab and make sure it still works as expected. This will ensure we only send the queries once the user click on a tab instead of loading them all at once.\n1. If the tab renders as expected and the badge is there, now it the time for specs!\n1. In `spec/frontend/pipelines/components/pipeline_tabs_spec.js` or/and `ee/spec/frontend/pipelines/components/pipeline_tabs_spec.js`, remove the stub for the tab content as it should no longer be necessary.\n1. **TAB SPECIFIC INSTRUCTION** If you have a count badge, add specs for it as needed. We should aim to use `it.each` in both the CE and EE version of the tabs spec (again, see the jobs tab MR for reference: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946/diffs?commit_id=eacc76eec5a5991dea2008ddbf1c66d49cc985d5)\n1. **FAILED TAB SPECIFIC** If it's the failed jobs tab, make sure to test the tab renders only conditionally if there are failed jobs.\n1. Lookout in the table below for the tab you are working on. For all the ones that are listed, make sure to enable the right tests by removing the `pipeline_tabs_vue` stub in the specs.\n\n| Spec Name | Line number | Tab content required |\n| ------ | ------ | ------ |\nee/spec/features/projects/pipelines/pipeline_spec.rb | 136 | Security |\n\n1. Once you have an MR, please add the link to the table here: https://gitlab.com/gitlab-org/gitlab/-/issues/230749\n\nMR for reference: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946/diffs?commit_id=eacc76eec5a5991dea2008ddbf1c66d49cc985d5\n\nFor any question, feel free to ping `@f_caplette`","state":"closed","created_at":"2022-04-28T11:04:48.335Z","updated_at":"2022-09-22T15:28:21.772Z","closed_at":"2022-07-20T14:33:41.120Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["devops::secure","frontend","group::threat insights","maintenance::refactor","missed:15.0","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360795","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360795","notes":"https://gitlab.com/api/v4/projects/278964/issues/360795/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360795/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360795","relative":"#360795","full":"gitlab-org/gitlab#360795"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107380827,"iid":360794,"project_id":278964,"title":"Pipeline tabs migration - Tests tab","description":"## Steps\n\n\n| Step  | Issue Link | MR link\n| ------ | ------ | ------ |\n| Introduce the base tab layout in Vue behind a disabled feature flag | https://gitlab.com/gitlab-org/gitlab/-/issues/230749 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80401 |\n| Support tab redirection  | None | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85183/ |\n| Add the Pipeline and Dag tabs content  | https://gitlab.com/gitlab-org/gitlab/-/issues/356198 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83418 |\n| Add the Jobs tab content  | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946 |  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946 |\n| Create new Vue component for Failed Jobs tab content | https://gitlab.com/gitlab-org/gitlab/-/issues/360656 | cell |\n| Add the Failed Jobs tab content  | https://gitlab.com/gitlab-org/gitlab/-/issues/360798 | |\n| Add the Tests tab content | :point_left_tone1: you are here |cell |\n| Add the the Security tab content  | https://gitlab.com/gitlab-org/gitlab/-/issues/360795 | cell |\n| Add the the License tab content  | https://gitlab.com/gitlab-org/gitlab/-/issues/360796 | cell |\n| Add the the Code Quality tab content  | https://gitlab.com/gitlab-org/gitlab/-/issues/360797 | cell |\n| Feature flag rollout  | | https://gitlab.com/gitlab-org/gitlab/-/issues/353118 |\n\n## Description of the Vue app logic\n\nBehind the disabled feature flag `pipeline_tabs_vue`, we now have Vue tabs in the pipeline page instead of Haml. However given how big the work is, we have divided each tab content into its own issue and MR. This specific issue is to make **the tests tab content** render inside the nre tab structure in Vue. To do so, here are some steps to consider:\n\n1. When the feature is turned on, in `app/views/projects/pipelines/show.html.haml` we now have the `js-pipeline-tabs` element which uses a helper to pass down all the dataset we might need to our single Vue app.\n1. We now have 2 helpers: one for CE (`app/helpers/projects/pipeline_helper.rb`) and one for EE (`ee/app/helpers/ee/projects/pipeline_helper.rb`). Each of them is passing data down to the Vue app through the dataset. If your tab is both in CE and EE, then your data should live in the CE helper. If your tab is unique to EE, then you can pass it down trough the EE helper.\n1. We then have the pipeline init bundle (`app/assets/javascripts/pipelines/pipeline_details_bundle.js`) which will check if the flag is on. If it is, then we only create one app instead of one per tab\n1. Then the data is passed down through the app init function in `app/assets/javascripts/pipelines/pipeline_tabs.js`. Make sure to pass your new dataset here to the app. We conditionally render with `ee_else_ce` the right Vue tabs component. The CE component has a slot in which the EE component can pass all the additional tabs. This mean that the EE component always has the CE tab and logic for free :raised_hands_tone1: \n1. Then in the CE tabs component (`app/assets/javascripts/pipelines/components/pipeline_tabs.vue`) all tabs are rendered except the `failed jobs` component which will need to change the in failed jobs MR (we only show it if there are failed jobs!)\n1. In the EE tab component (`ee/app/assets/javascripts/pipelines/components/pipeline_tabs.vue`) we have conditional on each tab which comes from the API permissions. Permissions should already work as is for all tabs\n\n## Work required\n\n1. Check the previous haml that we were using for the tab (`app/views/projects/pipelines/_with_tabs.html.haml` or `ee/app/views/projects/pipelines/_tabs_content.html.haml`. What data are we passing down to the app? Add the same data to the right `pipeline_helper.rb` (CE or EE)\n1. After adding the right data, we also need to update the helper specs (CE: `spec/helpers/projects/pipeline_helper_spec.rb`, EE: `ee/spec/helpers/ee/projects/pipeline_helper_spec.rb`). Note that if you are passing data through the EE helper, we need to expect it in the CE helper as well.\n1. In `app/assets/javascripts/pipelines/pipeline_tabs.js`, pass your dataset to the Vue App. For this migration, we aim to pass all the data as it used to be without any changes. We can come back later to see if there are too many properties how we can better optimize this.\n1. For the test tab, it seems we are still using VueX. We can create the store in `app/assets/javascripts/pipelines/pipeline_tabs.js` and pass it down the app. At some later point in the future, we can think of migrating this to graphQL to avoid having 2 different global store (Apollo and VueX)\n1. **TAB SPECIFIC INSTRUCTION** Add a badge to the tab if it applies, so either: Failed jobs count, Tests count, Licenses count. You can refer to the job MR as to how this can easily be done: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946\n1. Add the lazy property on the tab and make sure it still works as expected. This will ensure we only send the queries once the user click on a tab instead of loading them all at once.\n1. If the tab renders as expected and the badge is there, now it the time for specs!\n1. In `spec/frontend/pipelines/components/pipeline_tabs_spec.js` or/and `ee/spec/frontend/pipelines/components/pipeline_tabs_spec.js`, remove the stub for the tab content as it should no longer be necessary.\n1. **TAB SPECIFIC INSTRUCTION** If you have a count badge, add specs for it as needed. We should aim to use `it.each` in both the CE and EE version of the tabs spec (again, see the jobs tab MR for reference: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946/diffs?commit_id=eacc76eec5a5991dea2008ddbf1c66d49cc985d5)\n1. **FAILED TAB SPECIFIC** If it's the failed jobs tab, make sure to test the tab renders only conditionally if there are failed jobs.\n1. Lookout in the table below for the tab you are working on. For all the ones that are listed, make sure to enable the right tests by removing the `pipeline_tabs_vue` stub in the specs.\n\n| Spec Name | Line number | Tab content required |\n| ------ | ------ | ------ |\n| spec/features/projects/pipelines/pipeline_spec.rb | 393 | Tests |\n\n1. Once you have an MR, please add the link to the table here: https://gitlab.com/gitlab-org/gitlab/-/issues/230749\n\nMR for reference: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946/diffs?commit_id=eacc76eec5a5991dea2008ddbf1c66d49cc985d5\n\nFor any question, feel free to ping `@f_caplette`","state":"closed","created_at":"2022-04-28T10:58:21.584Z","updated_at":"2022-09-22T15:28:21.166Z","closed_at":"2022-07-29T17:39:43.466Z","closed_by":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"labels":["Category:Code Testing and Coverage","Verify::P1","devops::verify","frontend","group::pipeline insights","maintenance::refactor","priority::2","section::ops","type::maintenance","workflow::verification"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"}],"author":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"type":"ISSUE","assignee":{"id":3374280,"username":"mfluharty","name":"Miranda Fluharty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3374280/avatar.png","web_url":"https://gitlab.com/mfluharty"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360794","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360794","notes":"https://gitlab.com/api/v4/projects/278964/issues/360794/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360794/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360794","relative":"#360794","full":"gitlab-org/gitlab#360794"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107377517,"iid":360791,"project_id":278964,"title":"Custom SVG logo is not displayed correctly in some mail clients","description":"There is no validation against using SVG brand logo - uploaded via `Admin=\u003eSettings=\u003eNavigation Bar`. SVG looks fine on the website (supported by all browsers) but is not supported by some [mail clients](https://www.caniemail.com/features/image-svg/). \n\nThere are 3 approaches I can see now:\n\n1. Validate against using an SVG file\n2. Change logic to always use GitLab's logo in the email header\n3. Add a separate setting to customize the email header\n\nThe bottom image is PNG file where the top one is the custom brand logo - SVG.\n\n![Screenshot_2022-04-28_at_13.27.11](/uploads/a45c57e6df55bd3e7309f4f0fc5999e4/Screenshot_2022-04-28_at_13.27.11.png)","state":"closed","created_at":"2022-04-28T10:26:12.877Z","updated_at":"2022-11-22T18:43:25.763Z","closed_at":"2022-06-10T13:59:05.860Z","closed_by":{"id":11485645,"username":"thutterer","name":"Thomas Hutterer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11485645/avatar.png","web_url":"https://gitlab.com/thutterer"},"labels":["Category:Design System","Category:Navigation \u0026 Settings","Deliverable","backend","devops::manage","frontend","group::foundations","priority::4","section::dev","settings","severity::4","type::bug","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11485645,"username":"thutterer","name":"Thomas Hutterer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11485645/avatar.png","web_url":"https://gitlab.com/thutterer"}],"author":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"type":"ISSUE","assignee":{"id":11485645,"username":"thutterer","name":"Thomas Hutterer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11485645/avatar.png","web_url":"https://gitlab.com/thutterer"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360791","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360791","notes":"https://gitlab.com/api/v4/projects/278964/issues/360791/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360791/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360791","relative":"#360791","full":"gitlab-org/gitlab#360791"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107375873,"iid":360790,"project_id":278964,"title":"Refine long running migration thresholds in the Guard worker","description":"## :fire: Problem\n\nFrom ~\"gitlab.com\" [observations](https://dashboards.gitlab.net/d/registry-migration/registry-migration-detail?orgId=1\u0026viewPanel=127\u0026from=now-24h\u0026to=now), we know that the pre import step is heavier than the import step. The execution of the pre import step is bigger that the import step.\n\nThe Guard job is responsible to detect long running migrations on states `pre_importing`, `pre_import_done`, `importing`.\n\nThe problem is that we're using the same [threshold](https://gitlab.com/gitlab-org/gitlab/-/blob/e20b5db9aefd4716d1c0374e91b96bd122b1017c/app/workers/container_registry/migration/guard_worker.rb#L96) for all the states, which is `10.minutes` for now.\n\nWe saw a pre import that was executed in 11 minutes and the Guard caught the migration as long running and canceled it. :crying_cat_face: .\n\n## :fire_engine: Solution\n\nWe can't simply bump the threshold to a large value because we want to keep the `importing` duration as low as possible (that's when the image is in read only mode). So the solution is to split the threshold in 3:\n\n* One for `pre_importing`\n* One for `pre_import_done`\n* One for `importing`. This was should be as small as possible.\n\nBonus: put these thresholds as application settings so that we don't need MRs to update them.","state":"closed","created_at":"2022-04-28T10:15:26.041Z","updated_at":"2022-05-24T14:20:32.005Z","closed_at":"2022-05-24T14:20:31.963Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration Unplanned","Container Registry Migration::Phase 2","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360790","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360790","notes":"https://gitlab.com/api/v4/projects/278964/issues/360790/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360790/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360790","relative":"#360790","full":"gitlab-org/gitlab#360790"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107373194,"iid":360786,"project_id":278964,"title":"[Feature flag] Cleanup `usage_quotas_pipelines_vue`","description":"\u003c!-- Title suggestion: [Feature flag] Cleanup \u003cfeature-flag-name\u003e --\u003e\n\n## Summary\n\nThis issue is to cleanup the `\u003cusage_quotas_pipelines_vue\u003e` feature flag, after the feature flag has been enabled by default for an appropriate amount of time in production.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::utilization\" \n- Most appropriate slack channel to reach out to: `#g_utilization`\n- Best individual to reach out to: @sheldonled \n- PM: `@doniquesmit` \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What might happen if this goes wrong?\n\n\u003c!-- Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nWe need to monitor for any glitch or wrong information in the pipelines tab so we can disable the feature flag and go back to the previous UI implementation.\n\n### Cleaning up the feature flag\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.","state":"closed","created_at":"2022-04-28T10:00:10.319Z","updated_at":"2022-04-28T10:06:18.236Z","closed_at":"2022-04-28T10:04:46.521Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["Duplicate","feature flag","feature::addition","type::feature"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[],"author":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360786","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360786","notes":"https://gitlab.com/api/v4/projects/278964/issues/360786/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360786/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360786","relative":"#360786","full":"gitlab-org/gitlab#360786"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107373161,"iid":360785,"project_id":278964,"title":"[Feature flag] Enable Usage Quotas Pipelines in Vue","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n\u003c!--\nSet the main issue link: The main issue is the one that describes the problem to solve,\nthe one this feature flag is being added for. For example:\n\n[main-issue]: https://gitlab.com/gitlab-org/gitlab/-/issues/123456\n--\u003e\n\n[main-issue]: https://gitlab.com/gitlab-org/gitlab/-/issues/345373\n\n## Summary\n\nThis issue is to rollout [Usage Quotas Pipelines in Vue](https://gitlab.com/gitlab-org/gitlab/-/issues/345373) on production,\nthat is currently behind the `\u003cusage_quotas_pipelines_vue\u003e` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\nThis is a migration of the Pipelines tab in the Usage Quotas page from `HAML` to `Vue`.\n\n## Owners\n\n- Team: ~\"group::utilization\" \n- Most appropriate slack channel to reach out to: `#g_utilization`\n- Best individual to reach out to: @sheldonled \n- PM: `@csouthard` / `@omarfernandez2` \n\n## Stakeholders\n\nThis page seems to receive a lot of updates from ~\"group::pipeline execution\" so I'm adding them as Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nWe're changing the way we build the UI for the pipelines tab, no UI changes should be noticed by users.\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\nOnly controlled by `\u003cusage_quotas_pipelines_vue\u003e` feature flag.\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nWe need to monitor for any glitch or wrong information in the pipelines tab so we can disable the feature flag and go back to the previous UI implementation.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n- `/groups/\u003cgroup-name\u003e/-/usage_quotas#pipelines-quota-tab` \n- `/-/profile/usage_quotas#pipelines-quota-tab`\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set usage_quotas_pipelines_vue true --dev --staging --staging-ref`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com usage_quotas_pipelines_vue true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com usage_quotas_pipelines_vue true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e usage_quotas_pipelines_vue true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Set a milestone to the rollout issue to signal for enabling and removing the feature flag when it is stable.\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Leave a comment on [the feature issue][main-issue] announcing estimated time when this feature flag will be enabled on GitLab.com. \n- [x] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set usage_quotas_pipelines_vue \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set usage_quotas_pipelines_vue \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set usage_quotas_pipelines_vue true`\n- [x] Leave a comment on [the feature issue][main-issue] announcing that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it.\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [x] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [x] `/chatops run feature delete usage_quotas_pipelines_vue --dev --staging --staging-ref --production`\n- [x] Close [the feature issue][main-issue] to indicate the feature will be released in the current milestone.\n- [x] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [x] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [x] Set the title to \"[Feature flag] Cleanup `usage_quotas_pipelines_vue`\".\n    - [x] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [x] Link this rollout issue as a related issue.\n    - [x] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nTackled in https://gitlab.com/gitlab-org/gitlab/-/issues/360784\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set usage_quotas_pipelines_vue false\n```\n\n\u003c!-- A feature flag can also be used for rolling out a bug fix or a maintenance work.\nIn this scenario, labels must be related to it, for example; ~\"type::feature\", ~\"type::bug\" or ~\"type::maintenance\".\n\nPlease use /copy_metadata to copy the labels from the issue you're rolling out. --\u003e","state":"closed","created_at":"2022-04-28T09:59:59.617Z","updated_at":"2022-12-05T17:37:19.571Z","closed_at":"2022-11-24T17:57:57.119Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["[deprecated] Category:Utilization","devops::fulfillment","feature flag","feature::addition","frontend","group::utilization","missed:15.1","missed:15.2","missed:15.3","missed:15.4","quad-planning::complete-no-action","section::fulfillment","type::feature","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"}],"author":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"type":"ISSUE","assignee":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360785","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":37,"completed_count":31},"weight":1,"blocking_issues_count":1,"has_tasks":true,"task_status":"31 of 37 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360785","notes":"https://gitlab.com/api/v4/projects/278964/issues/360785/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360785/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360785","relative":"#360785","full":"gitlab-org/gitlab#360785"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7176,"epic":{"id":391477,"iid":7176,"title":"Create a common layout for Usage Quotas","url":"/groups/gitlab-org/-/epics/7176","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":107372951,"iid":360784,"project_id":278964,"title":"[Feature flag] Cleanup `usage_quotas_pipelines_vue`","description":"\u003c!-- Title suggestion: [Feature flag] Cleanup usage_quotas_pipelines_vue --\u003e\n\n## Summary\n\nThis issue is to cleanup the `\u003cusage_quotas_pipelines_vue\u003e` feature flag, after the feature flag has been enabled by default for an appropriate amount of time in production.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Implementation plan\n\nA Proof of Concept (PoC) of this cleanup was produced here https://gitlab.com/gitlab-org/gitlab/-/merge_requests/104710\n\nWe've broken down the PoC in 4 MRs:\n\n| Title | MR | Description |\n| ------ | ------ | ---- |\n| Remove usage_quotas_pipelines_vue feature flag | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/105487 | With this MR all the old JS/ruby code will never be executed because it's never being included. This gives us more piece to break down the JS removals in more MRs. We can remove the FF as well, at this point |\n| Remove remaining old ruby code for usage quotas - pipelines | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/105723 | This finishes the removal of all dead code on the ~backend |\n| Remove Group CI minutes usage old app | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/105795 | Removes the old ~frontend files for Group Usage Quotas |\n| Remove Profile CI minutes usage old app | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/105880 | Removes the old ~frontend files for Profile Usage Quotas. This finishes the removal of all dead code on the ~frontend  |\n\n## Owners\n\n- Team: ~\"group::utilization\" \n- Most appropriate slack channel to reach out to: `#g_utilization`\n- Best individual to reach out to: @sheldonled \n- PM: `@csouthard` / `@omarfernandez2` \n\n## Stakeholders\n\nThis page seems to receive a lot of updates from ~\"group::pipeline execution\" so I'm adding them as Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What might happen if this goes wrong?\n\n\u003c!-- Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nWe need to monitor for any glitch or wrong information in the pipelines tab on the Usage Quotas page\n\n### Cleaning up the feature flag\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `usage_quotas_pipelines_vue` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete usage_quotas_pipelines_vue --dev --staging --staging-ref --production`\n- [ ] Close this rollout issue.","state":"closed","created_at":"2022-04-28T09:58:44.249Z","updated_at":"2022-12-15T13:29:00.616Z","closed_at":"2022-12-15T08:28:50.681Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["[deprecated] Category:Utilization","devops::fulfillment","feature flag","feature::addition","frontend","group::utilization","missed:15.1","missed:15.2","missed:15.4","section::fulfillment","type::feature"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"}],"author":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"type":"ISSUE","assignee":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360784","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":9},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"9 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360784","notes":"https://gitlab.com/api/v4/projects/278964/issues/360784/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360784/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360784","relative":"#360784","full":"gitlab-org/gitlab#360784"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7176,"epic":{"id":391477,"iid":7176,"title":"Create a common layout for Usage Quotas","url":"/groups/gitlab-org/-/epics/7176","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":107368171,"iid":360774,"project_id":278964,"title":"Increase size of nav sidebar","description":"Increase size of nav sidebar to achieve a better visual balance and to better support languages like french or german which tend to have way longer words.\n\n#### Problem\n![french](/uploads/33dff30de7f55fcc02de7a6b523b7672/french.png)\\\n![french2](/uploads/02f095d5addf41243a2e6d2bcb6b8a83/french2.png)\\\n![german](/uploads/e5ea2814d0ad0573b66e50a87dde7080/german.png)\n\n#### Proposal\nIncrease nav sidebar width from `220px` to `260px`\n\n#### Design\n\n| Before | After |\n| ------ | ------ |\n| ![nav_sidebar_before](/uploads/ccd487c3e93f68932c470b7427085c2a/nav_sidebar_before.png) | ![nav_sidebar_after](/uploads/09fd9a69230566a11e86e34bbe926b6a/nav_sidebar_after.png) |","state":"closed","created_at":"2022-04-28T09:06:06.704Z","updated_at":"2022-06-20T08:11:41.057Z","closed_at":"2022-06-07T15:55:44.468Z","closed_by":{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"},"labels":["Category:Navigation \u0026 Settings","SUS::Impacting","UI polish","UX","devops::manage","feature::enhancement","frontend","group::compliance","section::dev","severity::4","type::feature","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"}],"author":{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"},"type":"ISSUE","assignee":{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360774","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360774","notes":"https://gitlab.com/api/v4/projects/278964/issues/360774/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360774/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360774","relative":"#360774","full":"gitlab-org/gitlab#360774"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107364539,"iid":360768,"project_id":278964,"title":"Only poll data for environments folder if it's open","description":"If you open https://gitlab.com/gitlab-org/gitlab/-/environments with the networks tab, you see that we constantly poll `review` and `review-docs`:\n\n\u003cdetails\u003e\u003csummary\u003eScreenshot\u003c/summary\u003e\n![Screenshot_2022-04-28_at_15.14.43](/uploads/0683ede97679bfc694f8a6c35033abdc/Screenshot_2022-04-28_at_15.14.43.png)\n\u003c/details\u003e\n\nThis creates [a lot of unnecessary load on the server](https://dashboards.gitlab.net/d/web-rails-controller/web-rails-controller?orgId=1\u0026var-PROMETHEUS_DS=Global\u0026var-environment=gprd\u0026var-stage=main\u0026var-controller=Projects::EnvironmentsController\u0026var-action=folder.json\u0026var-action=index.json\u0026var-action=index\u0026from=now-7d\u0026to=now):\n\n\u003cdetails\u003e\u003csummary\u003eGrafana screenshot\u003c/summary\u003e\n![Screenshot_2022-04-28_at_15.19.27](/uploads/7f797b18ced4640aa2c914abb2d119c2/Screenshot_2022-04-28_at_15.19.27.png)\n\u003c/details\u003e\n\nWe poll `folder.json` 2-7 times more often than `index.json`. This means that every user with the open `/environments` page:\n1. constantly requests environments updates\n2. constantly requests updates for every folder on the page(on average 2-7 folders per page)\n\nThis is very inefficient if user doesn't even open the folder, we constantly refreshing the data which isn't shown anywhere.\n\nIt accounts for `30-40` unnecessary `rps` on gitlab.com and also makes browser to do unnecessary work.\n\n### Proposal\n\nOnly request folder data when users open the folder, and then only refresh it while the folder is open.","state":"closed","created_at":"2022-04-28T08:27:17.881Z","updated_at":"2022-05-24T12:02:32.893Z","closed_at":"2022-05-20T14:34:07.484Z","closed_by":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"labels":["Category:Environment Management","bug::performance","devops::release","frontend","frontend-weight::1","group::release","missed:15.0","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"}],"author":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"type":"ISSUE","assignee":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360768","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360768","notes":"https://gitlab.com/api/v4/projects/278964/issues/360768/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360768/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360768","relative":"#360768","full":"gitlab-org/gitlab#360768"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107364338,"iid":360766,"project_id":278964,"title":"Create artifact report type for SBOM files","description":"## Why are we doing this work\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/350509+ added support for outputting `cyclonedx-\u003cpackage-type\u003e-\u003cpackage-manager\u003e.json`. These `cyclonedx-\u003cpackage-type\u003e-\u003cpackage-manager\u003e.json` files are output automatically when including the `Dependency-Scanning.gitlab-ci.yml` template, as implemented in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80693+.\n\nThe purpose of this issue is to create a new [Artifact report](https://docs.gitlab.com/ee/ci/yaml/artifacts_reports.html) for these CycloneDX SBOM files, using a structure similar to [artifacts:reports:coverage_report](https://docs.gitlab.com/ee/ci/yaml/artifacts_reports.html#artifactsreportscoverage_report), for example:\n\n```yaml\nartifacts:\n  reports:\n    sbom:\n      format: cyclonedx\n      paths:\n        - gl-sbom-*.cdx.json\n```\n\n## Relevant link\n\nThis is part of a wider epic to add SBOM ingestion: gitlab-org\u00268024 \n\n## Non-functional requirements\n\n- [ ] Documentation: tbd\n- [ ] Feature flag: tbd\n- [ ] Performance: tbd\n- [ ] Testing: tbd\n\n## Proposal\n\nAdd an `sbom` report type so that sbom artifacts can be saved to the database and [processed by a background worker](https://gitlab.com/gitlab-org/gitlab/-/issues/365661).\n\n### Implementation Plan\n\n- [x] (weight: 3) ~backend Update the following components to add an `sbom` report type\n  - [x] [Ci::JobArtifact](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/models/ci/job_artifact.rb)\n  - [x] [EE::Ci::JobArtifact](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/models/ee/ci/job_artifact.rb)\n  - [x] [EE::Ci::Build](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/models/ee/ci/build.rb)\n  - [x] [Gitlab::Ci::Config::Entry::Reports](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/config/entry/reports.rb)\n- [x] (weight: 3) update CI reports to add an `sbom:format` keyword (using [coverage_report:coverage_format MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/81378) as a guide)\n  - [x] (weight: 3) ~backend add `Gitlab::Ci::Config::Entry::Reports::Sbom` to https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/config/entry/reports specifying the `format` and `path` keys\n- [x] (weight: 2) ~documentation update report types documentation to add `sbom` https://docs.gitlab.com/ee/ci/yaml/artifacts_reports.html\n- [x] (weight: 2) ~backend update [json schema](https://docs.gitlab.com/ee/development/cicd/schema.html#json-schemas) to include validation for the new report type","state":"closed","created_at":"2022-04-28T08:24:43.469Z","updated_at":"2022-12-13T22:55:59.411Z","closed_at":"2022-08-16T14:54:26.208Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Enterprise Edition","GitLab Ultimate","Software Bill of Materials (SBoM)","WorkingGroup::ContinuousScanning","backend","devops::govern","feature::addition","group::security policies","missed:15.2","section::sec","type::feature","workflow::production"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":44,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360766","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":13,"completed_count":9},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"9 of 13 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360766","notes":"https://gitlab.com/api/v4/projects/278964/issues/360766/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360766/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360766","relative":"#360766","full":"gitlab-org/gitlab#360766"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8024,"epic":{"id":518303,"iid":8024,"title":"Ingest SBOM reports","url":"/groups/gitlab-org/-/epics/8024","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":107360455,"iid":360762,"project_id":278964,"title":"Update translations levels (June 2022)","description":"## Introduction\n\nWith the implementation of the feature to show the [translation coverage](https://gitlab.com/gitlab-org/gitlab/-/issues/328430) in the language selection dropdown, the translation levels need to be updated on a monthly cadence. \n\n## Proposal\n\nOnce the monthly merge of the new translations is complete, update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43) from Crowdin.\n\n## Documentation\n\n* https://docs.gitlab.com/ee/development/i18n/merging_translations.html#manually-update-the-translation-levels\n\n#### ToDo\n* [x] After cloning: update Title, set Milestone, Due date (15th), Related to previous month's issue.\n* [x] After the 1st of the month: assign to yourself, set ~2526320 \n* [x] Complete the [regular monthly merge](https://gitlab.com/groups/gitlab-org/-/epics/3571) of translations from Crowdin.\n* [x] Get the translation levels (% approved words) from [Crowdin](https://crowdin.com/project/gitlab-ee).\n* [x] Create an MR to update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43).\n* [x] Associate that MR to this issue.\n* [x] Complete the MR.\n* [x] When done, clone [this template issue](https://gitlab.com/gitlab-org/gitlab/-/issues/349815) for the next milestone.","state":"closed","created_at":"2022-04-28T07:28:55.723Z","updated_at":"2022-07-11T16:15:27.310Z","closed_at":"2022-05-11T05:24:36.064Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-06-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360762","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360762","notes":"https://gitlab.com/api/v4/projects/278964/issues/360762/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360762/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360762","relative":"#360762","full":"gitlab-org/gitlab#360762"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":107360263,"iid":360760,"project_id":278964,"title":"Merge i18n translations (June 2022)","description":"Merge the latest i18n translations from Crowdin on a monthly cadence.\n\nDocumentation available here: https://docs.gitlab.com/ee/development/i18n/merging_translations.html\n\n#### ToDo\n* [x] After cloning: update Title, set Milestone, Due date (15th), Related to previous month's issue.\n* [x] After the 1st of the month: assign to yourself, set ~\"workflow::in dev\" \n* [x] If needed, configure the [GitLab-Crowdin integration](https://docs.gitlab.com/ee/development/i18n/merging_translations.html#recreate-the-gitlab-integration-in-crowdin)\n* [x] Kick off a sync from [Crowdin](https://crowdin.com/project/gitlab-ee/apps/system/gitlab)\n* [x] Find the [MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026author_username=gitlab-crowdin-bot) created by @gitlab-crowdin-bot and associate it with this issue\n* [x] Complete the MR\n* [x] Update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L43) with the latest numbers. (Find the issue [here](https://gitlab.com/groups/gitlab-org/-/epics/3571))\n* [x] When done, clone [this template issue](https://gitlab.com/gitlab-org/gitlab/-/issues/339980) for the next milestone.","state":"closed","created_at":"2022-04-28T07:25:25.774Z","updated_at":"2022-06-21T12:03:11.392Z","closed_at":"2022-06-14T04:59:37.298Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-06-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360760","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360760","notes":"https://gitlab.com/api/v4/projects/278964/issues/360760/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360760/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360760","relative":"#360760","full":"gitlab-org/gitlab#360760"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":107352176,"iid":360752,"project_id":278964,"title":"[Feature flag] Cleanup repository push audit events","description":"\u003c!-- Title suggestion: [Feature flag] Cleanup \u003cfeature-flag-name\u003e --\u003e\n\n## Summary\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\nThis issue is to cleanup the `repository_push_audit_event` feature flag. We've deprecated this feature via https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85521 and now we need to clean the flags (if present) on different environments.\n\n## Owners\n\n- Team: ~\"group::compliance\" \n- Most appropriate slack channel to reach out to: `#g_manage_compliance`\n- Best individual to reach out to: @harsimarsandhu \n- PM: @stkerr \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What might happen if this goes wrong?\n\n\u003c!-- Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### Cleaning up the feature flag\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `repository_push_audit_event` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](https://gitlab.com/gitlab-org/gitlab/-/issues/337993) to indicate the feature will be removed in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete repository_push_audit_event --dev`\n    - [x] `/chatops run feature delete repository_push_audit_event --staging`\n    - [x] `/chatops run feature delete repository_push_audit_event`\n- [x] Close this issue.","state":"closed","created_at":"2022-04-28T03:29:58.553Z","updated_at":"2022-12-29T03:08:43.787Z","closed_at":"2022-05-02T08:42:35.736Z","closed_by":{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"},"labels":["backend","devops::govern","feature flag","group::compliance","maintenance::removal","section::sec","type::maintenance"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"}],"author":{"id":9821577,"username":"huzaifaiftikhar1","name":"Huzaifa Iftikhar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9821577/avatar.png","web_url":"https://gitlab.com/huzaifaiftikhar1"},"type":"ISSUE","assignee":{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360752","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":12},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"12 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360752","notes":"https://gitlab.com/api/v4/projects/278964/issues/360752/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360752/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360752","relative":"#360752","full":"gitlab-org/gitlab#360752"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107332565,"iid":360732,"project_id":278964,"title":"Update phase 2 import reconciliation to retry canceled imports","description":"## Problem\n\nWhen an import takes too long, the Guard will cancel it, then abort the import on the rails side. This causes the retry count for that import to increment. The Enqueuer should then retry the aborted import, allowing it to fail up to the limit (3 times) before skipping it.\n\nThe problem is, when we retry, we first check the status of the container repository on the registry. We see it is `canceled` and [skip the import without retrying again](https://gitlab.com/gitlab-org/gitlab/-/blob/5efa542262e1077f736e7101be48c984e59fa5a1/app/models/container_repository.rb#L329-332). \n\n## Solution\n\nWe should not skip until the retry limit has been exceeded.","state":"closed","created_at":"2022-04-27T21:15:12.941Z","updated_at":"2022-04-29T15:26:59.639Z","closed_at":"2022-04-29T15:26:59.615Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration Unplanned","Container Registry Migration::Phase 2","backend","devops::package","group::package registry","ruby","section::ops","type::bug","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360732","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360732","notes":"https://gitlab.com/api/v4/projects/278964/issues/360732/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360732/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360732","relative":"#360732","full":"gitlab-org/gitlab#360732"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107331489,"iid":360731,"project_id":278964,"title":"Update Enqueuer with \"no-limit\" tag capacity","description":"## Problem\n\nThe `EnqueuerWorker` checks the tag count using a limit defined in the `container_registry_import_max_tags_count` application setting. Once we finish migrating various amounts at lower limits we need a way to say \"all the rest\", or \"no limit\".\n\n## Solution\n\nUpdate the Enqueuer so when the setting is set to `0`, we do not check the tag count, thus allowing all repositories.","state":"closed","created_at":"2022-04-27T21:05:15.465Z","updated_at":"2022-04-29T15:26:20.563Z","closed_at":"2022-04-29T15:26:20.516Z","closed_by":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"labels":["Category:Container Registry","Container Registry Migration Unplanned","Container Registry Migration::Phase 2","backend","devops::package","feature::enhancement","group::package registry","ruby","section::ops","type::feature","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"type":"ISSUE","assignee":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360731","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360731","notes":"https://gitlab.com/api/v4/projects/278964/issues/360731/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360731/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360731","relative":"#360731","full":"gitlab-org/gitlab#360731"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107319509,"iid":360723,"project_id":278964,"title":"Geo: A few projects' repository files view never loads","description":"## Problem\n\nPostgres streaming replication requires both the primary and the read-replica to run on OSes with compatible C library locale data. Otherwise, the read-replica may return erroneous query results and other incorrect behavior.\n\nSee https://wiki.postgresql.org/wiki/Locale_data_changes for details.\n\n## Steps to reproduce\n\n1. Set up a GitLab site with the Postgres database running on a VM on Ubuntu 18.04\n1. Set up a Geo secondary site with the Postgres read-replica DB running on Ubuntu 18.10\n2. Have many projects with Git repositories\n3. Visit each project, and visit Repository \u003e Files\n4. Some projects' files view will spin forever, i.e. never load.\n   1. Because a GraphQL query response contains `project: null` even though the project clearly exists.\n   2. Because a SQL query doesn't return results\n   3. Because a PG index should be sorted differently on Ubuntu 18.10 vs 18.04\n\n## Proposal\n\n- [x] In https://docs.gitlab.com/ee/administration/geo/replication/troubleshooting.html: Document the problem, how to confirm it, and how to resolve it.\n- [x] In https://docs.gitlab.com/ee/administration/geo/ under Requirements: Specify that PG replicas must run on the same OS as the primary, due to this PG limitation. This is highly relevant because customers often use Geo to migrate to new infrastructure.\n- [x] In ~~https://docs.gitlab.com/omnibus/settings/database.html~~ `doc/install/requirements.md`: Add a small section to warn about this data corruption even without Geo.","state":"closed","created_at":"2022-04-27T19:55:57.846Z","updated_at":"2023-01-10T16:39:57.139Z","closed_at":"2023-01-04T20:19:29.893Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["SUS::Impacting","customer","devops::systems","documentation","group::geo","maintenance::usability","priority::3","section::enablement","severity::3","type::maintenance","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360723","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360723","notes":"https://gitlab.com/api/v4/projects/278964/issues/360723/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360723/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360723","relative":"#360723","full":"gitlab-org/gitlab#360723"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107316542,"iid":360719,"project_id":278964,"title":"Update training urls to use file type: Modal","description":"After the backend issue has been resolved \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346455, let's update the frontend to ensure we are passing the file type to the GraphQL query. The backend issue will ensure a file type is passed to our training providers so we get a more accurate training url response.\n\nPlease see this comment for more detail about the potential implementation plan \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/346455#note_879260956.\n\n\u003e We can pass the `location` object that contains the `file` which we can pass as the 3rd parameter (project id, identifiers, file). From there the backend can extract the file type from the file value and send that with the request. For instance `src/js/index.js` -\u003e `js`.\n\n| MR Modal | Vulnerability Details | Pipeline Modal |\n| ------ | ------ | ------ |\n|![2022-03-17_at_5.54_PM](/uploads/fd940e92874addd677bed766287b5a05/2022-03-17_at_5.54_PM.png)|![2022-03-17_at_5.55_PM](/uploads/db6518fcc348e2c8b707456cb311b4d4/2022-03-17_at_5.55_PM.png)|![2022-03-17_at_5.58_PM](/uploads/eb3d9fb234a56516fbbb7e7bc6e8894c/2022-03-17_at_5.58_PM.png)|\n\n## Issue Breakdown\n\n| Changes | Issue |\n| ------ | ------ |\n| Vulnerability Details | https://gitlab.com/gitlab-org/gitlab/-/issues/356285 |\n| MR and Pipeline Modal | This Issue |","state":"closed","created_at":"2022-04-27T18:43:53.254Z","updated_at":"2022-07-04T03:36:07.677Z","closed_at":"2022-06-28T11:28:04.335Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["devops::secure","feature::addition","frontend","group::threat insights","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360719","notes":"https://gitlab.com/api/v4/projects/278964/issues/360719/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360719/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360719","relative":"#360719","full":"gitlab-org/gitlab#360719"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107316409,"iid":360718,"project_id":278964,"title":"Support `OWASP` - Update to support other mapping key: Modal","description":"Once the backend issue has been resolved \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/349606 where other mapping keys are supported. We will need to update the frontend to ensure we are passing the proper identifiers to make the request and handle the updated response accordingly.\n\n\n| Changes | Issue |\n| ------ | ------ |\n| Vulnerability Details  | https://gitlab.com/gitlab-org/gitlab/-/issues/356287  |\n| Pipeline and MR modal | This Issue |","state":"closed","created_at":"2022-04-27T18:40:01.384Z","updated_at":"2022-09-05T03:23:13.110Z","closed_at":"2022-08-30T20:10:24.672Z","closed_by":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"labels":["[deprecated] Accepting merge requests","devops::secure","feature::addition","frontend","group::threat insights","missed:15.3","section::sec","type::feature"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360718","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360718","notes":"https://gitlab.com/api/v4/projects/278964/issues/360718/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360718/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360718","relative":"#360718","full":"gitlab-org/gitlab#360718"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7805,"epic":{"id":485503,"iid":7805,"title":"Security Training 2.0","url":"/groups/gitlab-org/-/epics/7805","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107310348,"iid":360709,"project_id":278964,"title":"Navbar search dropdown does not appear if user starts a search on page load","description":"### Summary\nWhen starting a search in the top navbar during/soon after page load, the dropdown which shows the scopes and autocomplete options does not appear unless the user focuses away from the search field and back again.\n\n### Steps to reproduce\n1. Reload a page where the topnav search bar is present\n2. Immediately focus/click into the search field (throttling network speed in inspector tools can make this more apparent)\n3. Notice – no dropdown appears :x: \n4. Start typing – still no dropdown :x: \n5. Focus away from search field and back again\n6. Now the dropdown appears :white_check_mark: \n\n\n### What is the current *bug* behavior?\nThe dropdown does not appear when immediately focusing/clicking into search field on page load.\n- Additionally, the shortcut icon is still visible while the search field is focused (and should not be), and the clear icon is not visible as the user types.\n- Focusing away from the search field and back again fixes the issue.\n\n### What is the expected *correct* behavior?\nThe dropdown should appear as well as provide autocomplete suggestions as they type. The shortcut icon should not be visible when the search field is in focus.\n\n### Relevant logs and/or screenshots\n![search-bug](/uploads/1409bf09a09a9495b5f9d318f37d999a/search-bug.gif)\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e","state":"closed","created_at":"2022-04-27T16:38:40.531Z","updated_at":"2022-09-21T12:08:25.837Z","closed_at":"2022-09-06T14:43:26.706Z","closed_by":{"id":4888751,"username":"changzhengliu","name":"Changzheng Liu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4888751/avatar.png","web_url":"https://gitlab.com/changzhengliu"},"labels":["Category:Global Search","Deliverable","SUS::Impacting","UX","devops::data_stores","frontend","group::global search","missed-deliverable","missed:15.3","section::enablement","severity::4","type::bug"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":10776513,"username":"tbulva","name":"Tomas Bulva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10776513/avatar.png","web_url":"https://gitlab.com/tbulva"}],"author":{"id":5041243,"username":"nickbrandt","name":"Nick Brandt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/96e3036898d44a8ad7063ba07cce0998?s=80\u0026d=identicon","web_url":"https://gitlab.com/nickbrandt"},"type":"ISSUE","assignee":{"id":10776513,"username":"tbulva","name":"Tomas Bulva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10776513/avatar.png","web_url":"https://gitlab.com/tbulva"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360709","notes":"https://gitlab.com/api/v4/projects/278964/issues/360709/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360709/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360709","relative":"#360709","full":"gitlab-org/gitlab#360709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7821,"epic":{"id":486667,"iid":7821,"title":"Improve Navbar UX to improve discoverability and usefulness of Global Search","url":"/groups/gitlab-org/-/epics/7821","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":107307930,"iid":360706,"project_id":278964,"title":"Geo Sites - Remove legacy redirects","description":"## What/Why\n\nOriginally introduced in %14.7 via this MR: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/78150\u003cbr /\u003e\nRedirects remaining from this effort are found here: https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/config/routes/admin.rb#L65-68\n\nBack in %\"14.7\" we renamed all UI routes in Geo from nodes =\u003e sites as part of a larger effort of [rebranding Nodes =\u003e Sites](https://gitlab.com/groups/gitlab-org/-/epics/5725).\n\nWe left the old nodes routes as redirects to sites to ensure any users wouldn't be surprised by the 404.  We are now heading towards our **first major release** since this change.  Now would be a great time to remove them.\n\n## Proposal\n\n1. Update any remaining references to the old routes from documentation\n2. Delete this code https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/config/routes/admin.rb#L65-68 and any associated tests.\n\ncc/ @geo-team","state":"closed","created_at":"2022-04-27T16:09:11.291Z","updated_at":"2022-12-29T03:08:44.370Z","closed_at":"2022-05-11T12:20:09.155Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["Geo Administration","backend","cleanup","devops::systems","group::geo","maintenance::removal","section::enablement","type::maintenance","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":4,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360706","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360706","notes":"https://gitlab.com/api/v4/projects/278964/issues/360706/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360706/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360706","relative":"#360706","full":"gitlab-org/gitlab#360706"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107307130,"iid":360705,"project_id":278964,"title":"Geo Replication - Remove legacy redirects","description":"## What/Why\n\nOriginally introduced in %13.0 via this MR: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/30890/\u003cbr /\u003e\nRedirects remaining from this effort are found here: https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/config/routes/admin.rb#L52-54\n\nBack in %13.0 we consolidated all Geo Replication routes from being hard-coded to being served via a route param rather than being hard-coded:\n\n```rb\nscope '/replication' do\n          get '/', to: 'nodes#index'\n          get '/:replicable_name_plural', to: 'replicables#index', as: 'site_replicables'\n        end\n```\n\nWe left the old routes as redirects to the new pattern.  We are now heading towards our **second major release** since this change.  Now would be a great time to remove them.\n\n## Proposal\n\n1. Update any remaining references to the old routes from documentation\n2. Delete this code https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/config/routes/admin.rb#L52-54 and any associated tests.\n\ncc/ @geo-team","state":"closed","created_at":"2022-04-27T16:05:15.013Z","updated_at":"2022-12-29T03:08:45.028Z","closed_at":"2022-05-11T12:20:42.394Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["Geo Administration","backend","cleanup","devops::systems","group::geo","maintenance::removal","section::enablement","type::maintenance","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":4,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360705","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360705","notes":"https://gitlab.com/api/v4/projects/278964/issues/360705/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360705/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360705","relative":"#360705","full":"gitlab-org/gitlab#360705"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107305938,"iid":360703,"project_id":278964,"title":"Create `gitlab_for_jira_app_saas_active` and `gitlab_for_jira_app_self_managed_active` metrics to track usage of GitLab for Jira App","description":"After exploring our [Jira related metrics](https://metrics.gitlab.com/?q=jira), it appears we don't currently have a metric tracking our GitLab For Jira App integration usage.\n\nWe'd like to explore our metrics and capture usage by GitLab SaaS and Gitlab Self-Managed users.\n\nOur PI Metrics today are based on https://metrics.gitlab.com/?q=redis_hll_counters.ecosystem.ecosystem_total_unique_counts_monthly. We need to ensure GitLab for Jira App usage is captured by that metric.\n\n### Availability \u0026 Testing (Provisional)\n\n* run `package-and-qa` on MR\n* It appears that coverage might be offered by https://gitlab.com/gitlab-org/gitlab/-/blob/master/spec/lib/gitlab/usage_data_counters/hll_redis_counter_spec.rb\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the Quality Engineering quad planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/quality-engineering/quad-planning --\u003e","state":"closed","created_at":"2022-04-27T15:44:01.747Z","updated_at":"2022-11-22T18:43:34.503Z","closed_at":"2022-09-29T11:23:38.204Z","closed_by":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"labels":["Integration::Jira","Stretch","auto updated","backend","devops::manage","group::integrations","missed:15.4","quad-planning::complete-action","section::dev","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"}],"author":{"id":10222550,"username":"g.hickman","name":"Grant Hickman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10222550/avatar.png","web_url":"https://gitlab.com/g.hickman"},"type":"ISSUE","assignee":{"id":11722161,"username":"bmarjanovic","name":"Bojan Marjanovic","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11722161/avatar.png","web_url":"https://gitlab.com/bmarjanovic"},"user_notes_count":8,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360703","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360703","notes":"https://gitlab.com/api/v4/projects/278964/issues/360703/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360703/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360703","relative":"#360703","full":"gitlab-org/gitlab#360703"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1522,"epic":{"id":8628,"iid":1522,"title":"Jira Integration","url":"/groups/gitlab-org/-/epics/1522","group_id":9970},"iteration":null,"health_status":null},{"id":107304499,"iid":360696,"project_id":278964,"title":"500 error when removing certificate-based Kubernetes clusters","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/3190282/?referrer=gitlab_plugin\n\n```\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  SQL statement \"UPDATE ONLY \"public\".\"deployments\" SET \"cluster_id\" = NULL WHERE $1 OPERATOR(pg_catalog.=) \"cluster_id\"\"\n\n  lib/gitlab/database/load_balancing/connection_proxy.rb:119:in `block in write_using_load_balancer'\n    connection.send(...)\n  lib/gitlab/database/load_balancing/load_balancer.rb:112:in `block in read_write'\n    yield connection\n  lib/gitlab/database/load_balancing/load_balancer.rb:179:in `retry_with_backoff'\n    return yield\n  lib/gitlab/database/load_balancing/load_balancer.rb:110:in `read_write'\n    retry_with_backoff do\n  lib/gitlab/database/load_balancing/connection_proxy.rb:118:in `write_using_load_balancer'\n    @load_balancer.read_write do |connection|\n...\n(210 additional frame(s) were not displayed)\n\nActiveRecord::QueryCanceled: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  SQL statement \"UPDATE ONLY \"public\".\"deployments\" SET \"cluster_id\" = NULL WHERE $1 OPERATOR(pg_catalog.=) \"cluster_id\"\"\n```\n\n### Summary\n\nWhen attempting to remove a certificate-based Kubernetes cluster, customers have reported 500 errors. After gaining permission to remove the cluster on the customers behalf, support was able to replicate this behavior via console. The issue appears to stem from the number of deployments being queried. Details can be found in the following internal escalations:\n\n* [Console Escalation #13380 (Internal)](https://gitlab.com/gitlab-com/support/internal-requests/-/issues/13380)\n* [Console Escalation #14237 (Internal)](https://gitlab.com/gitlab-com/support/internal-requests/-/issues/14237)\n\nAs we are deprecating this feature in GitLab 15.0, customers need to [migrate to the GitLab agent for Kubernetes](https://docs.gitlab.com/ee/user/infrastructure/clusters/migrate_to_gitlab_agent.html). This could be seen as a blocker while we near the release of GitLab 15.0.\n\n### Steps to reproduce\n\nAttempt to remove a cluster with a large number of deployments and observe the 500 error.\n\n### What is the current *bug* behavior?\n\nWhen attempting to remove a certificate-based Kubernetes cluster, customers have reported 500 errors.\n\n### What is the expected *correct* behavior?\n\nCustomers should be able to remove a certificate-based Kubernetes cluster without error.\n\n### Relevant logs and/or screenshots\n\n* [Sentry](https://sentry.gitlab.net/gitlab/gitlabcom/issues/3190282/?query=correlation_id%3A01G1G390GJAWA312CB2EJ59DB3)\n* [Kibana](https://log.gprd.gitlab.net/goto/00b6a860-c640-11ec-b73f-692cc1ae8214)\n\n\n\u003e **json.exception.class:**\nActiveRecord::QueryCanceled\n\n\u003e **json.exception.message:**\nPG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  SQL statement \"UPDATE ONLY \"public\".\"deployments\" SET \"cluster_id\" = NULL WHERE $1 OPERATOR(pg_catalog.=) \"cluster_id\"\"\n\n\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n## \"Workaround\"\n\nAs the certificate managed cluster feature is being deprecated in 15.0, and the inability to remove a cluster should not be a blocker for migration to KAS, the recommendation is to disable the cluster (instead of removing it) and keep going with the migration.\n\n## Proposal\n\nUpdate the two places where cluster records are destroyed (`Clusters::DestroyService` and `Clusters::Cleanup::ServiceAccountService`) to first update/delete associated `deployments` and `deployment_clusters` in batches, instead of relying on cascading foreign keys.","state":"closed","created_at":"2022-04-27T15:23:05.119Z","updated_at":"2022-06-10T03:49:02.737Z","closed_at":"2022-06-10T03:49:02.716Z","closed_by":{"id":3167938,"username":"tigerwnz","name":"Tiger Watson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/eb2c062f746fe8a57d693ee307942aa5?s=80\u0026d=identicon","web_url":"https://gitlab.com/tigerwnz"},"labels":["customer","devops::configure","group::configure","priority::2","reproduced on GitLab.com","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":3167938,"username":"tigerwnz","name":"Tiger Watson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/eb2c062f746fe8a57d693ee307942aa5?s=80\u0026d=identicon","web_url":"https://gitlab.com/tigerwnz"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":3167938,"username":"tigerwnz","name":"Tiger Watson","state":"active","avatar_url":"https://secure.gravatar.com/avatar/eb2c062f746fe8a57d693ee307942aa5?s=80\u0026d=identicon","web_url":"https://gitlab.com/tigerwnz"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360696","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360696","notes":"https://gitlab.com/api/v4/projects/278964/issues/360696/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360696/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360696","relative":"#360696","full":"gitlab-org/gitlab#360696"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":115,"epic":{"id":187,"iid":115,"title":"Category Epic: Kubernetes Management","url":"/groups/gitlab-org/-/epics/115","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":107300520,"iid":360691,"project_id":278964,"title":"Refactor On-demand scans page to use `ConfigurationPageLayout` component","description":"This issue is a following task after [#354879](https://gitlab.com/gitlab-org/gitlab/-/issues/354879).\n\n`ee/app/assets/javascripts/on_demand_scans_form/components/on_demand_scans_form.vue`\n`app/assets/javascripts/security_configuration/components/app.vue`\n\nusing same section-layout component as two columns layout\n\nit can be refactored to ConfigurationPageLayout\n\nas suggested [here](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84906#note_922987950) \n\nHere is suggested [patch](https://gitlab.com/gitlab-org/gitlab/uploads/07fceab8cafd80ba75d4f31fe6e781b8/layout.patch)\n\nAddress [this comment](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84906#note_926335459) in this issue.","state":"closed","created_at":"2022-04-27T14:51:52.587Z","updated_at":"2022-05-16T03:23:23.046Z","closed_at":"2022-05-11T05:32:12.768Z","closed_by":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"labels":["Category:DAST","devops::secure","frontend","group::dynamic analysis","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"}],"author":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"type":"ISSUE","assignee":{"id":4019091,"username":"djadmin","name":"Dheeraj Joshi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/57dccb416bfcfac947a69c53c5585128?s=80\u0026d=identicon","web_url":"https://gitlab.com/djadmin"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360691","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360691","notes":"https://gitlab.com/api/v4/projects/278964/issues/360691/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360691/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360691","relative":"#360691","full":"gitlab-org/gitlab#360691"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7631,"epic":{"id":451408,"iid":7631,"title":"On-demand DAST configuration improvements","url":"/groups/gitlab-org/-/epics/7631","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107296713,"iid":360685,"project_id":278964,"title":"Combine all exported parts of project in one tarball before serving it to the exporter user","description":"Once all partial exports are complete as part of https://gitlab.com/gitlab-org/gitlab/-/issues/360684 we need to be able to combine all the partially exported types of data into one tarball before serving it back to the user.\n\n### Diagram\n\n```mermaid\nsequenceDiagram\n    autonumber\n\n    participant export_service as Projects#58;#58;ImportExport#58;#58;ExportService\n    participant relations_worker as Projects#58;#58;ImportExport#58;#58;RelationExportWorker\n    participant tracker as Project#58;#58;ImportExport#58;#58;TrackExportRelationsWorker\n    participant export_worker as ProjectExportWorker\n    participant export_service as Projects#58;#58;ImportExport#58;#58;ExportService\n    participant after_export_worker as Projects#58;#58;ImportExport#58;#58;AfterExportWorker\n\n    par Generate relations in parallel\n        export_service-\u003e\u003erelations_worker: Enqueue worker to generate relation A\n        export_service-\u003e\u003erelations_worker: Enqueue worker to generate relation B\n        export_service-\u003e\u003erelations_worker: Enqueue worker to generate relation C\n        export_service-\u003e\u003erelations_worker: ...\n    end\n\n    export_service-\u003e\u003etracker: Enqueues TrackerExportRelationsWorker\n    loop\n        tracker-\u003e\u003etracker: Monitor if all relations were generated. \u003cbr /\u003eKeep re-enqueing itself until all relations are generated.\u003cbr /\u003eNotify user in case of an error occurs\n    end\n \n    tracker-\u003e\u003eexport_worker: Enqueue worker \n    Note right of export_worker: Download exported relations\u003cbr /\u003eand create tarball\n    export_worker-\u003e\u003eafter_export_worker: Enqueue worker \n    Note right of after_export_worker: Send the file to S3, email user, etc\n```\n\n\n### Technical details\n\nIn this issue, we will implement the code needed for step 8 of the diagram above: download, decompress, and combine all partial export relations into a single tarball with the same structure as the export file currently generated.\n\nAfter creating the final tarball, we will upload it to the object store similarly to how it is done in ProjectExportWorker.","state":"closed","created_at":"2022-04-27T14:12:55.601Z","updated_at":"2022-12-21T12:04:10.264Z","closed_at":"2022-12-02T10:29:09.925Z","closed_by":{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"},"labels":["Category:Importers","Deliverable","Error Budget Improvement","Importer:Project Export/Import","Next Up","backend","devops::manage","group::import","quad-planning::complete-no-action","section::dev","type::maintenance"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360685","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360685","notes":"https://gitlab.com/api/v4/projects/278964/issues/360685/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360685/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360685","relative":"#360685","full":"gitlab-org/gitlab#360685"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7940,"epic":{"id":508328,"iid":7940,"title":"Parallelize ProjectExportWorker to improve its execution time","url":"/groups/gitlab-org/-/epics/7940","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107296678,"iid":360684,"project_id":278964,"title":"Perform top level relations exports in separate sidekiq jobs","description":"Depends on https://gitlab.com/gitlab-org/gitlab/-/issues/360683\n\nProjectExportWorker is now executed as part of 1 Sidekiq job as one export process.\n\nIn order to parallelize the export process, we need to export relations in separate Sidekiq jobs.\n\nThe current export service has a list of [exporters](https://gitlab.com/gitlab-org/gitlab/blob/e826f677b9a4975786bbe862946cea88e0c5472f/app/services/projects/import_export/export_service.rb#L26-31) that we need to now execute as part of separate Sidekiq jobs.\n\n### Diagram \n\nIn this issue, we're going to implement the second column of the diagram that is to export each component of the project in a separated job\n\n```mermaid\nsequenceDiagram\n    autonumber\n\n    participant export_service as Projects#58;#58;ImportExport#58;#58;ExportService\n    participant relations_worker as Projects#58;#58;ImportExport#58;#58;RelationExportWorker\n    participant tracker as Project#58;#58;ImportExport#58;#58;TrackExportRelationsWorker\n    participant export_worker as ProjectExportWorker\n    participant export_service as Projects#58;#58;ImportExport#58;#58;ExportService\n    participant after_export_worker as Projects#58;#58;ImportExport#58;#58;AfterExportWorker\n\n    par Generate relations in parallel\n        export_service-\u003e\u003erelations_worker: Enqueue worker to generate relation A\n        export_service-\u003e\u003erelations_worker: Enqueue worker to generate relation B\n        export_service-\u003e\u003erelations_worker: Enqueue worker to generate relation C\n        export_service-\u003e\u003erelations_worker: ...\n    end\n\n    export_service-\u003e\u003etracker: Enqueues TrackerExportRelationsWorker\n    loop\n        tracker-\u003e\u003etracker: Monitor if all relations were generated. \u003cbr /\u003eKeep reenqueing itself until all relations are generarated.\u003cbr /\u003eNotify user in case of an error occurs\n    end\n \n    tracker-\u003e\u003eexport_worker: Enqueue worker \n    Note right of export_worker: Download exported relations\u003cbr /\u003eand create tarball\n    export_worker-\u003e\u003eafter_export_worker: Enqueue worker \n    Note right of after_export_worker: Send file to S3, email user, etc\n```","state":"closed","created_at":"2022-04-27T14:12:18.212Z","updated_at":"2022-11-02T22:06:59.075Z","closed_at":"2022-07-26T10:46:52.807Z","closed_by":{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"},"labels":["Category:Importers","Error Budget Improvement","Importer:Project Export/Import","Next Up","backend","devops::manage","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360684","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360684","notes":"https://gitlab.com/api/v4/projects/278964/issues/360684/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360684/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360684","relative":"#360684","full":"gitlab-org/gitlab#360684"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7940,"epic":{"id":508328,"iid":7940,"title":"Parallelize ProjectExportWorker to improve its execution time","url":"/groups/gitlab-org/-/epics/7940","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107296608,"iid":360683,"project_id":278964,"title":"Add/reuse models to export top level project relations during Project Export","description":"ProjectExportWorker is now executed as part of 1 Sidekiq job as one export process. \n\nIn order to parallelize the export projcess we need to export relations in separate sidekiq jobs. For that, we need to be able to:\n\n1. Track individual partial exports state \n2. Upload partial exports in object storage\n3. Download partial exports from object storage, combine them in one tarball and upload back to object storage in order to keep the end result the same - a single `.tar.gz` file\n\nIn order to accomplish that, we need to create new (or reuse existing/inherit from `BulkImports::Export` model, since we do similar partial exports there) partial project export model to keep track of state and upload it to object storage when finished.","state":"closed","created_at":"2022-04-27T14:10:45.574Z","updated_at":"2022-08-30T09:50:06.214Z","closed_at":"2022-07-04T08:36:06.348Z","closed_by":{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"},"labels":["Category:Importers","Error Budget Improvement","Importer:Project Export/Import","Next Up","backend","devops::manage","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":11165152,"username":"rodrigo.tomonari","name":"Rodrigo Tomonari","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11165152/avatar.png","web_url":"https://gitlab.com/rodrigo.tomonari"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360683","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360683","notes":"https://gitlab.com/api/v4/projects/278964/issues/360683/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360683/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360683","relative":"#360683","full":"gitlab-org/gitlab#360683"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7940,"epic":{"id":508328,"iid":7940,"title":"Parallelize ProjectExportWorker to improve its execution time","url":"/groups/gitlab-org/-/epics/7940","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107294183,"iid":360681,"project_id":278964,"title":"Allow Slack app to be reinstalled","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nFollow-up from https://gitlab.com/gitlab-org/gitlab/-/issues/355998#note_921302547\n\nFor the GBP update users will need to reinstall the app, so we need to provide a button to do that from the integration form in GitLab.\n\nCurrently we only show the `Add to Slack` button when the app isn't installed yet:\n\n![image](/uploads/7f107a75d81a8766c51c1d2b5bd89f6a/image.png)\n\nAfter installing the form looks like this:\n\n![image](/uploads/4d02d145b2c56d8546971cba6f8c51b3/image.png)\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\n~frontend:\n\n- Add a button `Reinstall Slack app` on the integration form, which is shown when the project alias already exists.\n  - We could use the button generator from https://api.slack.com/docs/slack-button#using-the-slack-button__add-the-slack-button, which produces some HTML/SVG where we can customize the text (the current `Add to Slack` PNG button could be replaced by this too).\n  - We could add some help text to explain when this would be necessary (or add it to our docs and link them here).\n\n~backend:\n\n- Check for an existing `SlackIntegration` record at https://gitlab.com/gitlab-org/gitlab/blob/67377043d28e0e53495452cc2d72ff78920d1b07/ee/app/services/projects/slack_application_install_service.rb#L37 and update it instead of creating a new one.\n- We could also start storing the `bot_user_id` and `access_token` in the `SlackIntegration` record, although we don't use them yet.","state":"closed","created_at":"2022-04-27T13:45:31.068Z","updated_at":"2022-11-22T18:43:38.740Z","closed_at":"2022-05-06T15:44:14.849Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Integrations","Integration::Slack","backend","devops::manage","feature::addition","frontend","group::integrations","section::dev","type::feature","workflow::verification"],"milestone":null,"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360681","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360681","notes":"https://gitlab.com/api/v4/projects/278964/issues/360681/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360681/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360681","relative":"#360681","full":"gitlab-org/gitlab#360681"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7729,"epic":{"id":469302,"iid":7729,"title":"Migrate Slack App from Classic App to Granular Bot Permissions App","url":"/groups/gitlab-org/-/epics/7729","group_id":9970,"human_readable_end_date":"Jul 31, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107291942,"iid":360678,"project_id":278964,"title":"VersionApp: Permanently remove/replace known sensitive strings with environment variable to improve distribution efficiency","description":"Follow up from https://gitlab.com/gitlab-services/version-gitlab-com/-/merge_requests/682 gitlab-services/version-gitlab-com!685 (comment 928507862)\n\nWe are doing the same for CustomerDot https://gitlab.com/gitlab-org/customers-gitlab-com/-/issues/4188\n\n### Problem\n\nThe distribution of VersionApp to the JiHu Team can be cumbersome, time consuming, and has the potential to be error prone.\n\n### Proposal\n\n**Suggestion:** Permanently remove/replace known sensitive strings with environment variables  \n**Estimated Impact:** `high` - reduced time in MR generation, tediousness and peer review time/effort  \n**Estimated Effort**: `low` - collaboration with infradev/foundations for new env vars maybe necessary\n\n### Result\n\nFewer hard coded secrets.\n\n### Next steps (if any)\n\n### How will we measure success?\n\nWe will have to sanitize fewer strings throughout the repository.\n\n### Testing\nUpdate related unit tests.","state":"closed","created_at":"2022-04-27T13:09:39.469Z","updated_at":"2022-06-22T21:36:13.970Z","closed_at":"2022-06-03T11:36:17.810Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["VersionApp","backend","devops::growth","group::product intelligence","maintenance::pipelines","quad-planning::complete-action","section::growth","type::maintenance","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":11217480,"username":"tvellishetty","name":"Tarun Vellishetty","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11217480/avatar.png","web_url":"https://gitlab.com/tvellishetty"},"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360678","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360678","notes":"https://gitlab.com/api/v4/projects/278964/issues/360678/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360678/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360678","relative":"#360678","full":"gitlab-org/gitlab#360678"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5993,"epic":{"id":269876,"iid":5993,"title":"Change Version App to be public","url":"/groups/gitlab-org/-/epics/5993","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e532\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":107291369,"iid":360675,"project_id":278964,"title":"[Feature flag] Rollout of `prerecord_service_ping_data`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/issues/354139) on production,\nthat is currently behind the `prerecord_service_ping_data` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::product intelligence\" \n- Most appropriate slack channel to reach out to: `#g_product_intelligence`\n- Best individual to reach out to: `@mikolaj_wawrzyniak`\n- PM: `@alinamihaila` \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nServicePing payload will be collected and persisted into DB before being reported to VersionsApp. ServicePing payload is going to be collected and persisted regardless of ServicePing reporting configuration setting. Setting will still control if any data is reported from instance. This separation would enable instance admin to preview service ping payload even if no data is reported.\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```\n\n## Testing\n\nEnsure QA pipelines are passing","state":"closed","created_at":"2022-04-27T13:00:24.117Z","updated_at":"2022-07-12T11:29:35.433Z","closed_at":"2022-07-12T11:29:35.418Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["Category:Service Ping","PI System Reliability and Monitoring","auto updated","backend","devops::analytics","feature flag","feature::addition","group::product intelligence","quad-planning::complete-action","section::analytics","type::feature","workflow::ready for development"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360675","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":50,"completed_count":9},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"9 of 50 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360675","notes":"https://gitlab.com/api/v4/projects/278964/issues/360675/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360675/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360675","relative":"#360675","full":"gitlab-org/gitlab#360675"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107289989,"iid":360672,"project_id":278964,"title":"Backend: Add cached denormalized count of jobs - GraphQL","description":"### Problem\n\nThe example query below blows up with an `Internal Server Error`.\n\nThis is due to the count field on the CiJobConnection type. That field works fine for projects with low job records but when they are larger the query blows up with an Internal server error.\n\nThis prevents rollout of the new jobs table filtered search. #327500+ \n\n```\n{\n  project(fullPath: \"gitlab-org/gitlab\") {\n    jobs {\n      count\n    }\n  }\n}\n```\n\n### Potential Solution \n\nSuggestion from @alexkalderimis in the `#f_graphql` channel for a solution.\n\nWe probably need a cached denormalized count of jobs (like we have for some other records), if throwing indices at the problem does not solve things. For example we do this with the open MR count on projects\n\nOr add a limited count field: https://gitlab.com/gitlab-org/gitlab/-/issues/360672#note_941308255","state":"closed","created_at":"2022-04-27T12:38:56.244Z","updated_at":"2022-06-30T15:45:04.194Z","closed_at":"2022-06-17T12:26:56.662Z","closed_by":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"labels":["Category:Continuous Integration","GraphQL","Stretch","Verify::P2","backend","bug::performance","devops::verify","group::pipeline execution","missed-SLO","priority::1","section::ops","severity::1","type::bug","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"}],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360672","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360672","notes":"https://gitlab.com/api/v4/projects/278964/issues/360672/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360672/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360672","relative":"#360672","full":"gitlab-org/gitlab#360672"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107288623,"iid":360669,"project_id":278964,"title":"Remove falback from ServicePing::SubmitService","description":"## Background\n\nAt https://gitlab.com/gitlab-org/gitlab/-/commit/8406a84441ee33bc8e61d3f339c24a8fdc25a7bb there was a fallback added to \nhttps://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/service_ping/submit_service.rb Feature that it was covering is already released for couple of milestones and does not report issues. \n\n## Goal\n\nRemove second attempt to collect service ping data on error in `rescue` section of `SubmitService` https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/service_ping/submit_service.rb#L37","state":"closed","created_at":"2022-04-27T12:16:04.446Z","updated_at":"2023-01-10T08:31:08.293Z","closed_at":"2023-01-10T08:31:08.208Z","closed_by":{"id":13249573,"username":"j_lar","name":"Jonas Larsen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/13249573/avatar.png","web_url":"https://gitlab.com/j_lar"},"labels":["backend","devops::analytics","group::product intelligence","product intelligence::onboarding issue","section::analytics","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":13249573,"username":"j_lar","name":"Jonas Larsen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/13249573/avatar.png","web_url":"https://gitlab.com/j_lar"}],"author":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"type":"ISSUE","assignee":{"id":13249573,"username":"j_lar","name":"Jonas Larsen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/13249573/avatar.png","web_url":"https://gitlab.com/j_lar"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360669","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360669","notes":"https://gitlab.com/api/v4/projects/278964/issues/360669/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360669/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360669","relative":"#360669","full":"gitlab-org/gitlab#360669"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107285736,"iid":360663,"project_id":278964,"title":"[Feature flag] Enable omit_epic_subscribed","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout https://gitlab.com/gitlab-org/gitlab/-/issues/357986+ on production,\nthat is currently behind the `omit_epic_subscribed` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::product planning\" \n- Most appropriate slack channel to reach out to: `#g_product_planning`\n- Best individual to reach out to: @johnhope\n- PM: @mushakov\n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nPage-load times on Epic detail page reduce by up to 150ms with no impact on the user experience.\n\n### When is the feature viable?\n\nWhen no user impact is observed in production.\n\n### What might happen if this goes wrong?\n\nMalfunction of the Notifications (subscribed) component in the epic sidebar.\n\n### What can we monitor to detect problems with this?\n\nEnable for a single group and check impact.\n\n### What can we check for monitoring production after rollouts?\n\nThere would be no impact in logs, must be observed in the UI.\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [x] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [x] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [x] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [x] Create a merge request with the following changes. Ask for review and merge it.\n    - [x] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2022-04-27T11:18:44.654Z","updated_at":"2022-06-20T10:01:11.540Z","closed_at":"2022-06-20T10:01:11.516Z","closed_by":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"labels":["Stretch","backend","devops::plan","feature flag","feature::addition","group::product planning","section::dev","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"}],"author":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"type":"ISSUE","assignee":{"id":4418630,"username":"johnhope","name":"John Hope","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4418630/avatar.png","web_url":"https://gitlab.com/johnhope"},"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360663","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":50,"completed_count":18},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"18 of 50 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360663","notes":"https://gitlab.com/api/v4/projects/278964/issues/360663/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360663/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360663","relative":"#360663","full":"gitlab-org/gitlab#360663"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107284236,"iid":360659,"project_id":278964,"title":"Force password resets for users with bcrypt login passwords","description":"After the introducing a new SHA512 devise encryptor in https://gitlab.com/gitlab-org/gitlab/-/issues/360658, we need a transitional period during which login passwords are seemlessly updated during login. However, we need to make sure that even inactive user's passwords are updated: we need force password resets for users still having passwords hashed using `bcrypt`.","state":"closed","created_at":"2022-04-27T10:45:55.961Z","updated_at":"2022-07-27T21:15:02.019Z","closed_at":"2022-07-27T09:31:54.369Z","closed_by":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"labels":["Category:Authentication and Authorization","FIPS","FIPS Follow-up","auto updated","devops::manage","group::authentication and authorization","section::dev","type::feature","wontfix","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"type":"ISSUE","assignee":null,"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360659","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360659","notes":"https://gitlab.com/api/v4/projects/278964/issues/360659/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360659/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360659","relative":"#360659","full":"gitlab-org/gitlab#360659"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7584,"epic":{"id":447398,"iid":7584,"title":"FIPS Follow-up Items","url":"/groups/gitlab-org/-/epics/7584","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107283906,"iid":360658,"project_id":278964,"title":"Introduce new PBKDF2 SHA512 devise encryptor","description":"Use PBKDF2 using SHA512. SHA512 by itself is supported by [`devise-encryptable` gem](https://github.com/heartcombo/devise-encryptable), but it also doesn't use the standard hash format that embeds the hash type, salt, and stretches. \n\nWe will implement our own support for PBKDF2 using SHA512 based on `devise-encryptable` and using the hashing format `$pbkdf2-sha512$\u003cnum rounds\u003e$\u003csalt\u003e$\u003chash\u003e`. We can certainly attempt to contribute the changes upstream.\n\nThe advantages include not needing to add a second column and the ability to change the default stretches later without breaking existing passwords. \n\n## Original description\n\nIn order use a FIPS approved algorithms for hashing login passwords, we need to replace the currently used `brcypt` [devise encryptor](https://github.com/heartcombo/devise-encryptable/tree/main/lib/devise/encryptable/encryptors) and update the password to be [stored using  `SHA512`](https://github.com/heartcombo/devise/blob/8593801130f2df94a50863b5db535c272b00efe1/lib/generators/templates/devise.rb#L233-L241).\n\nIn order to seamlessly change the hashing algorithm during login:\n1. introduce a DB new column to store encryptor type (currently `brcypt`)\n1. during successful login:\n   * if encryptor type is `bcrypt`, update the password to store as `SHA512`\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\n\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n**What risks does this change pose to our availability?**\n\nAny mishap could cause the users to be locked out of the application. \n\n**What additional test coverage or changes to tests will be needed?**\n\n* Run `package-and-qa` job on the MR to ensure end-to-end tests are fine.\n* Perform manual testing on Staging environment by logging in and logging out and then re-logging in.","state":"closed","created_at":"2022-04-27T10:40:16.992Z","updated_at":"2022-07-25T16:00:02.185Z","closed_at":"2022-07-15T16:16:27.805Z","closed_by":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"labels":["Category:Authentication and Authorization","Deliverable","FIPS","FY23::Q2","auto updated","candidate::15.1","devops::manage","group::authentication and authorization","quad-planning::complete-action","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"}],"author":{"id":1315784,"username":"ifarkas","name":"Imre Farkas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b4dcfa5185b8513751b447d76b069bf6?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifarkas"},"type":"ISSUE","assignee":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"user_notes_count":26,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360658","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360658","notes":"https://gitlab.com/api/v4/projects/278964/issues/360658/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360658/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360658","relative":"#360658","full":"gitlab-org/gitlab#360658"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7939,"epic":{"id":508022,"iid":7939,"title":"Password hashing uses bcrypt","url":"/groups/gitlab-org/-/epics/7939","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107282319,"iid":360656,"project_id":278964,"title":"Migrate pipeline failed jobs to Vue","description":"## Summary\n\nThe content of the failed jobs tab is all in haml and we want to migrate it to Vue. This is behind a disabled feature_flag `failed_jobs_tab_vue` and is a necessary step for a larger migration: https://gitlab.com/gitlab-org/gitlab/-/issues/230749\n\n## Improvements\n\nHaving this in Vue will allow us two things:\n1. Allow the larger migration of all the pipeline tabs, which will reduce the load time of hte pipeline page since each tab will be lazy loaded\n2. In time, we can use graphQL in the tab and use polling and shared cache so that we can keep the tab up to date.\n\n## Risks\n\nIf it breaks, the failed jobs tab would no longer render.\n\n## Involved components\n\n`app/views/projects/pipelines/_with_tabs.html.haml`","state":"closed","created_at":"2022-04-27T10:13:18.109Z","updated_at":"2022-06-01T14:36:57.791Z","closed_at":"2022-06-01T14:36:57.770Z","closed_by":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"labels":["Category:Continuous Integration","devops::verify","frontend","group::pipeline execution","maintenance::refactor","missed:15.0","section::ops","type::maintenance","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360656","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360656","notes":"https://gitlab.com/api/v4/projects/278964/issues/360656/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360656/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360656","relative":"#360656","full":"gitlab-org/gitlab#360656"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107278568,"iid":360652,"project_id":278964,"title":"Delete tags service: avoid pre importing, pre import done and importing image repositories","description":"## :fire: Problem\n\nIn https://gitlab.com/gitlab-org/gitlab/-/merge_requests/79660, we updated the delete tags service to stop on repositories that are `importing`.\n\nDuring the migration, on production, we observed the following:\n* `pre import` starts\n* tags is deleted\n* `pre import` ends and `import` starts\n* `import` failed because of deleted tags -\u003e migration aborted\n* migration retried `pre_import` starts\n* this time around, both steps succeeds\n\nThe main problem is that removing a tag during the `pre_import` step will make the `import` step fail.\n\nTags removal are done in 2 ways:\n1. Automated: cleanup policies.\n1. Manual: users using the UI.\n\n(1.) can have a negative impact on the migration = it can make several `pre_import`s fail and the image repo is then skipped = wasted resources and a migration that could succeed is now skipped = efficiency :chart_with_downwards_trend: \n\n## :fire_engine: Solution\n\n* Update the delete tags service to reject tags removal when:\n    * image repo is `importing` _or_\n    * image repo is `pre importing` + the service is called by a cleanup policy _or_\n    * image repo is `pre import done` + the service is called by a cleanup policy\n\nNotice that we accept manual tags removal during `pre importing` and `pre import done`. This is to adhere to a strong migration requirement: user write operations should be not allowed _only_ when `importing`.","state":"closed","created_at":"2022-04-27T09:15:29.350Z","updated_at":"2022-04-28T15:50:59.749Z","closed_at":"2022-04-28T15:50:59.731Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","Container Registry Migration","Container Registry Migration Unplanned","Container Registry Migration::Phase 2","backend","devops::package","group::package registry","package:active","ruby","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360652","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360652","notes":"https://gitlab.com/api/v4/projects/278964/issues/360652/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360652/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360652","relative":"#360652","full":"gitlab-org/gitlab#360652"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7316,"epic":{"id":408066,"iid":7316,"title":"Drive the Container Registry migration Phase 2 from Rails","url":"/groups/gitlab-org/-/epics/7316","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107278436,"iid":360651,"project_id":278964,"title":"\"Someone edited the page the same time you did\" even though I know I'm the only one editing it","description":"### Summary\n\nAfter importing a project from another instance, when I attempt to edit its\nwiki, GitLab claims someone edited the page at the same time I did, but it's\nnot the case. It prevents me from saving my changes.\n\n### Steps to reproduce\n\nUnfortunately it doesn't happen with all projects and I don't know why it does with some projects\nand not other ones:\n\n1. Import a project from another instance.\n1. Open the wiki.\n1. Press the _Edit_ (pencil) button.\n1. Edit contents.\n1. Click the _Save changes_ button.\n\n### Example Project\n\nhttps://gitlab.com/jeromebelleman/foo\n\n### What is the current *bug* behavior?\n\nAfter importing a project from another instance,\nediting its wiki and clicking the _Save changes_ button doesn't actually\nsave, but leaves the user in the editing page and causes this message to appear\ninstead:\n\n\u003e Someone edited the page the same time you did. Please check out the page and make sure your changes will not unintentionally remove theirs.\n\nThis happens even when I know I'm the only one editing.\n\n### What is the expected *correct* behavior?\n\nEditing a wiki page and clicking the _Save changes_ button should save without further ado.\n\n### Relevant logs and/or screenshots\n\n\n\n\n### Output of checks\n\nThis bug happens with GitLab.com as well as the GitLab 14.9 instance we host.\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\nSystem information\nSystem:\t\tUbuntu 18.04\nProxy:\t\tno\nCurrent User:\tgit\nUsing RVM:\tno\nRuby Version:\t2.7.5p203\nGem Version:\t3.1.4\nBundler Version:2.2.33\nRake Version:\t13.0.6\nRedis Version:\t6.2.6\nSidekiq Version:6.4.0\nGo Version:\tunknown\n\nGitLab information\nVersion:\t14.9.2-ee\nRevision:\t3034418fb31\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:\tPostgreSQL\nDB Version:\t12.7\nElasticsearch:\tno\nGeo:\t\tno\nUsing LDAP:\tno\nUsing Omniauth:\tyes\nOmniauth Providers: jwt, openid_connect\n\nGitLab Shell\nVersion:\t13.24.0\nRepository storage paths:\n- default: \t/var/opt/gitlab/git-data/repositories\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 13.24.0 ? ... OK (13.24.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nInternal API available: OK\nRedis available via internal API: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes (cluster/worker) ... 1/1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nSystemd unit files or init script exist? ... skipped (omnibus-gitlab has neither init script nor systemd units)\nSystemd unit files or init script up-to-date? ... skipped (omnibus-gitlab has neither init script nor systemd units)\nProjects have namespace: ... \n2/1 ... yes\n1/2 ... yes\n7/43 ... yes\n11/54 ... yes\n7/55 ... yes\n7/56 ... yes\n8/58 ... yes\n8/59 ... yes\n11/61 ... yes\n11/62 ... yes\n11/63 ... yes\n7/67 ... yes\n7/68 ... yes\n7/69 ... yes\n7/70 ... yes\n7/71 ... yes\n7/72 ... yes\n7/73 ... yes\n7/74 ... yes\n11/75 ... yes\n16/76 ... yes\n16/80 ... yes\n16/81 ... yes\n16/82 ... yes\n8/83 ... yes\n11/84 ... yes\n7/85 ... yes\n16/86 ... yes\n16/87 ... yes\n11/88 ... yes\n11/89 ... yes\n11/90 ... yes\n11/91 ... yes\n11/92 ... yes\n11/93 ... yes\n11/94 ... yes\n15/96 ... yes\n11/97 ... yes\n36/102 ... yes\n36/103 ... yes\n14/104 ... yes\n36/105 ... yes\n11/109 ... yes\n11/111 ... yes\n36/112 ... yes\n36/113 ... yes\n36/114 ... yes\n36/115 ... yes\n36/116 ... yes\n36/117 ... yes\n36/118 ... yes\n36/119 ... yes\n36/120 ... yes\n36/122 ... yes\n36/123 ... yes\n36/127 ... yes\n11/128 ... yes\n36/129 ... yes\n36/130 ... yes\n36/131 ... yes\n36/132 ... yes\n36/133 ... yes\n36/134 ... yes\n36/135 ... yes\n36/136 ... yes\n36/137 ... yes\n36/139 ... yes\n36/140 ... yes\n36/141 ... yes\n36/142 ... yes\n36/143 ... yes\n36/144 ... yes\n36/146 ... yes\n36/147 ... yes\n36/148 ... yes\n36/149 ... yes\n36/150 ... yes\n36/151 ... yes\n36/152 ... yes\n36/153 ... yes\n36/154 ... yes\n36/155 ... yes\n36/156 ... yes\n36/157 ... yes\n36/158 ... yes\n36/159 ... yes\n36/160 ... yes\n36/161 ... yes\n36/162 ... yes\n36/163 ... yes\n36/164 ... yes\n36/165 ... yes\n36/166 ... yes\n36/167 ... yes\n36/168 ... yes\n36/169 ... yes\n36/170 ... yes\n36/171 ... yes\n36/172 ... yes\n36/173 ... yes\n8/177 ... yes\n12/178 ... yes\n7/179 ... yes\n11/180 ... yes\n151/181 ... yes\n8/182 ... yes\n11/183 ... yes\nRedis version \u003e= 5.0.0? ... yes\nRuby version \u003e= 2.7.2 ? ... yes (2.7.5)\nGit user has default SSH configuration? ... yes\nActive users: ... 30\nIs authorized keys file accessible? ... yes\nGitLab configured to store new projects in hashed storage? ... yes\nAll projects are in hashed storage? ... yes\nElasticsearch version 7.x (6.4 - 6.x deprecated to be removed in 13.8)? ... skipped (elasticsearch is disabled)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2022-04-27T09:13:24.260Z","updated_at":"2022-11-04T14:12:18.947Z","closed_at":"2022-10-07T09:59:11.551Z","closed_by":{"id":7815314,"username":"qmnguyen0711","name":"Quang-Minh Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7815314/avatar.png","web_url":"https://gitlab.com/qmnguyen0711"},"labels":["Category:Wiki","approaching-SLO","backend","customer","devops::create","good for new contributors","group::editor","missed-SLO","priority::2","reproduced on GitLab.com","section::dev","severity::2","type::bug","workflow::problem validation"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":7815314,"username":"qmnguyen0711","name":"Quang-Minh Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7815314/avatar.png","web_url":"https://gitlab.com/qmnguyen0711"}],"author":{"id":1450266,"username":"jeromebelleman","name":"Jérôme Belleman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1450266/avatar.png","web_url":"https://gitlab.com/jeromebelleman"},"type":"ISSUE","assignee":{"id":7815314,"username":"qmnguyen0711","name":"Quang-Minh Nguyen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7815314/avatar.png","web_url":"https://gitlab.com/qmnguyen0711"},"user_notes_count":45,"merge_requests_count":0,"upvotes":7,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360651","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360651","notes":"https://gitlab.com/api/v4/projects/278964/issues/360651/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360651/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360651","relative":"#360651","full":"gitlab-org/gitlab#360651"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107277893,"iid":360649,"project_id":278964,"title":"Spike to learn about Flux's approach","description":"## Scope\n\nThis issue is part of a bigger development effort described in detail by its epic. The scope of this issue is to learn \n\n- How Flux's Helm and Kustomize controllers work.\n- What Helm and Kustomize features do they support and don't support.\n- Figure out if we can re-use their tools or technical approaches.\n\n## Questions to answer\n\n- How do they support \"advanced\" Helm features, like hooks?\n- How do they support Kustomize functions?\n- How do they chain Helm and Kustomize?\n- What is their technology approach, do they call out to binaries or integrate at the SDK level?\n- What should we learn from them?\n- Is there any codebase we could share with them?\n\n## Actions\n\n\u003c!-- Likely in the form of checkboxed elements --\u003e\n\n- [ ] TODO","state":"closed","created_at":"2022-04-27T09:03:10.898Z","updated_at":"2022-08-16T23:31:07.397Z","closed_at":"2022-08-04T14:53:04.981Z","closed_by":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"labels":["Deliverable","configure::backlog","devops::configure","group::configure","missed-deliverable","missed:15.2","section::ops","type::feature","workflow::ready for development"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360649","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360649","notes":"https://gitlab.com/api/v4/projects/278964/issues/360649/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360649/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360649","relative":"#360649","full":"gitlab-org/gitlab#360649"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7938,"epic":{"id":507942,"iid":7938,"title":"Support of templating tools (kustomize, kpt, helm)","url":"/groups/gitlab-org/-/epics/7938","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107266087,"iid":360639,"project_id":278964,"title":"Close issues in PostMergeService asynchronously","description":"## Summary\n\nIt was found out that closing issues can timeout for some reason and will cause the `PostMergeService` to fail. This results for the rest of operations needed to be done in `PostMergeService` to not be executed.\n\n## Proposed solution\n\nMake the process of closing issues asynchronous (via Sidekiq). This way, if it times out, it'll not fail the entire service and can be retried.","state":"closed","created_at":"2022-04-27T06:54:32.533Z","updated_at":"2022-05-24T12:00:22.912Z","closed_at":"2022-05-16T05:15:04.094Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Deliverable","backend","devops::create","group::code review","section::dev","type::bug"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360639","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360639","notes":"https://gitlab.com/api/v4/projects/278964/issues/360639/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360639/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360639","relative":"#360639","full":"gitlab-org/gitlab#360639"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7937,"epic":{"id":507836,"iid":7937,"title":"PostMergeService activities can be interrupted and left in incomplete state","url":"/groups/gitlab-org/-/epics/7937","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107262075,"iid":360632,"project_id":278964,"title":"Fix license compliance pipeline tab to work with approval_status migration","description":"This test fails with feature flag on:\n\nqa/specs/features/ee/browser_ui/13_secure/license_compliance_spec.rb:97\n\nOn the pipeline tab the new approval statuses aren't parsed by the UI correctly.\n\n## Problem:\n\nIt only shows uncategorized licenses in the single pipeline view\n\n![fd78ce0d76400116](/uploads/b506133372b3f2a95df44656ce934cc0/fd78ce0d76400116.png)\n\n## Expected:\n\nLicenses are shown in the right categories\n\n\n## Implementation Plan:\n\n- Push frontend feature flag from pipelines controller.","state":"closed","created_at":"2022-04-27T05:26:33.706Z","updated_at":"2022-05-19T05:30:48.774Z","closed_at":"2022-05-02T22:12:55.799Z","closed_by":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"labels":["Enterprise Edition","QA","Quality","devops::secure","failure::broken-test","found:canary.staging.gitlab.com","found:staging.gitlab.com","frontend","group::composition analysis","section::sec","test","won't do","wontfix","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"}],"author":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"type":"ISSUE","assignee":{"id":3252080,"username":"farias-gl","name":"Fernando.A","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3252080/avatar.png","web_url":"https://gitlab.com/farias-gl"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360632","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360632","notes":"https://gitlab.com/api/v4/projects/278964/issues/360632/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360632/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360632","relative":"#360632","full":"gitlab-org/gitlab#360632"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7393,"epic":{"id":421331,"iid":7393,"title":"License Compliance terminology migration","url":"/groups/gitlab-org/-/epics/7393","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107261316,"iid":360628,"project_id":278964,"title":"GitlabSubscriptionHistory Backwards compatibility across updates","description":"### Summary\n\nThis is a pitfall to cause production issues: adding columns into `GitlabSubscription` would cause errors on production, when migration is run on canary.\n\nThis is because production `GitlabSubscription` model will log its history into the `GitlabSubscriptionHistory` table. After the migration is run, `GitlabSubscription` will get to know the new column, and attempts to log that new column, but `GitlabSubscriptionHistory` does not have such a column, causing the record creation to err. \n\n### Possible fixes\n\n- Have an allowlist of attributes to log to `GitlabSubscriptionHistory`\n- Always add columns to both `GitlabSubscription` and `GitlabSubscriptionHistory`, enforced by Rubocop\n    - This may not be desirable because we may want to ignore a new column\n- Have a `GitlabSubscriptionHistory` class method to handle this logging, dynamically filtering out attributes which itself does not have\n- Maybe we can replace this with `paper_trail`?\n- Replace the callback [with a database trigger](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/6923#note_925790230)","state":"closed","created_at":"2022-04-27T04:58:52.132Z","updated_at":"2022-06-14T08:46:59.630Z","closed_at":"2022-06-14T03:56:33.638Z","closed_by":{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"},"labels":["Category:Purchase","backend","devops::fulfillment","group::purchase","section::fulfillment","type::maintenance","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"}],"author":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"type":"ISSUE","assignee":{"id":4981524,"username":"jhyson","name":"Josianne Hyson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4981524/avatar.png","web_url":"https://gitlab.com/jhyson"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360628","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360628","notes":"https://gitlab.com/api/v4/projects/278964/issues/360628/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360628/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360628","relative":"#360628","full":"gitlab-org/gitlab#360628"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107260522,"iid":360624,"project_id":278964,"title":"Gitlab::Ci::MaskSecret `mask!` expects string for `gsub!`, gets array instead","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\nIn certain circumstances during pipeline creation, when masked variables are being processed, the `Gitlab::Ci::MaskSecret` `mask!` method expects to call `gsub!` on a string, when it can sometimes be an array.\n\nBecause this is not handled, a `500` error is returned. In this case, the user sees their pipeline does not start. The job says stays stuck in `Created` state:\n\n```\nThis job has not been triggered yet\nThis job depends on upstream jobs that need to succeed in order for this job to be triggered\n```\n\nI was able to reproduce the **behaviour** on SaaS (ie the job does not start, stays in `Created` state) by reproducing the customer's project hierarchy and general CI/CD yaml structure. When I added a masked variable to the top-level group that was **not** protected, the behaviour was reproduced. However, I was not able to see the same error the customer received:\n\n```\njson.exception.message: undefined method `gsub!' for #\u003cArray:0x00007fa0282b4ec0\u003e\n```\n\nI was not able to reproduce this behaviour without emulating the basic structure of the customer's yaml files, with multiple includes at several levels.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\nReproduce:\n\n1. Define a CI config with a project/file include. Define the project as an array:\n\n````yaml\ninclude:\n  - project: [\"furkanayhan/many-includes\"]\n    file: a.yml\n    ref: master\n\ntest:\n  script: echo hello\n````\n\n2. Have a masked variable with the included project name\n\n![image](/uploads/738f5a4b1cb0cf484609bcd32ae0ab6c/image.png)\n\n\n### Implementation Table\n\n\u003c!--\n_NOTE: If the issue is not part of an epic, the implementation table can be removed. If it is part of an epic, make sure that the implementation table below mirrors the corresponding epic's implementation table content._\n--\u003e\n\n\n| Group | Issue Link |\n| ------ | ------ |\n| ~backend | :point_left: You are here |\n| ~backend | https://gitlab.com/gitlab-org/gitlab/-/issues/365975+ |\n\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nApproximation of the customer's yaml structure, where behaviour was reproduced. Please see as documented in the GitLab ticket ([internal](https://gitlab.zendesk.com/agent/tickets/282851)).\n\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\nPipeline job for first stage does not start, remains at `Created` stage.\n\n![image](/uploads/8ff62dd058a2359901c4fc3c9b8ad1c9/image.png)\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\nPipeline job would start.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\nhttps://sentry.gitlab.net/gitlab/gitlabcom/issues/3266251/?query=is%3Aunresolved%20correlation_id%3A01G1J8H2DTSAD7Y0J1908S7CXC\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nWe should not allow defining `project` as an array","state":"closed","created_at":"2022-04-27T04:31:21.767Z","updated_at":"2022-07-04T15:09:53.870Z","closed_at":"2022-07-01T09:48:50.367Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["Category:Continuous Integration","Category:Pipeline Authoring","Gold","customer","devops::verify","group::pipeline authoring","priority::3","regression","regression:15.1","section::ops","severity::3","type::bug","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"}],"author":{"id":10051007,"username":"tmike","name":"Michael Trainor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10051007/avatar.png","web_url":"https://gitlab.com/tmike"},"type":"ISSUE","assignee":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"user_notes_count":37,"merge_requests_count":0,"upvotes":1,"downvotes":1,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360624","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360624","notes":"https://gitlab.com/api/v4/projects/278964/issues/360624/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360624/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360624","relative":"#360624","full":"gitlab-org/gitlab#360624"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":54829,"iid":70,"sequence":19,"group_id":9970,"title":null,"description":"Target milestone `15.2`","state":3,"created_at":"2022-05-01T00:05:30.620Z","updated_at":"2022-07-11T00:05:02.227Z","start_date":"2022-06-27","due_date":"2022-07-10","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/54829"},"health_status":null},{"id":107254493,"iid":360620,"project_id":278964,"title":"Remove unnecessary single quotes from doc examples","description":"### Proposal\n\nI recently had [a discussion](https://gitlab.com/gitlab-org/security-products/ci-templates/-/merge_requests/303#note_919323523) about the inclusion of single quotation marks in a template and whether they were necessary. In the discussion, the [job control docs](https://gitlab.com/gitlab-org/gitlab/-/blob/681db1577821d9ed4612d2d060a3413aa4ea883b/doc/ci/jobs/job_control.md) were referenced as using single quotation marks in the examples, however, it looks like there's not much consistency in the docs, [sometimes single quotes are used](https://gitlab.com/gitlab-org/gitlab/-/blob/681db1577821d9ed4612d2d060a3413aa4ea883b/doc/ci/jobs/job_control.md#L43) and [sometimes they aren't](https://gitlab.com/gitlab-org/gitlab/-/blob/681db1577821d9ed4612d2d060a3413aa4ea883b/doc/ci/jobs/job_control.md#L99). \n\nThe purpose of this issue is to update the docs and remove these unnecessary single quotes, in order to provide consistent code examples.\n\n### Further details\n\nPlease see [this dicsussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85668#note_920475925) for more details on which files need to be changed.\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2022-04-27T01:55:54.944Z","updated_at":"2022-05-09T14:26:32.504Z","closed_at":"2022-04-27T07:09:24.541Z","closed_by":{"id":4155490,"username":"marcel.amirault","name":"Marcel Amirault","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155490/avatar.png","web_url":"https://gitlab.com/marcel.amirault"},"labels":["Technical Writing","backend","devops::secure","docs::improvement","documentation","group::composition analysis","maintenance::refactor","section::sec","type::maintenance"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},{"id":4155490,"username":"marcel.amirault","name":"Marcel Amirault","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155490/avatar.png","web_url":"https://gitlab.com/marcel.amirault"}],"author":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"type":"ISSUE","assignee":{"id":1674572,"username":"adamcohen","name":"Adam Cohen","state":"active","avatar_url":"https://secure.gravatar.com/avatar/68fe8da9d9dfc88d0d150808cd364825?s=80\u0026d=identicon","web_url":"https://gitlab.com/adamcohen"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360620","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360620","notes":"https://gitlab.com/api/v4/projects/278964/issues/360620/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360620/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360620","relative":"#360620","full":"gitlab-org/gitlab#360620"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107254058,"iid":360619,"project_id":278964,"title":"[Resource group API] Get all resource groups in a project","description":"## Problem\n\nUsers have no idea how many [resource groups](https://docs.gitlab.com/ee/ci/resource_groups/) exist in a project.\nThis causes a usability issue, like https://gitlab.slack.com/archives/CBZGR90A2/p1650997207284899?thread_ts=1650990734.035509\u0026cid=CBZGR90A2 (internal).\n\n## Proposal\n\nAdd [`GET /projects/:id/resource_groups` endpoint](https://docs.gitlab.com/ee/api/resource_groups.html) to return all resource groups in a project. Pagination should be supported.","state":"closed","created_at":"2022-04-27T01:36:05.240Z","updated_at":"2022-05-03T14:46:49.688Z","closed_at":"2022-05-03T14:46:49.659Z","closed_by":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"labels":["Category:Continuous Delivery","Next Up","Release::P2","auto updated","devops::release","feature::enhancement","group::release","section::ops","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":9396342,"username":"acook.gitlab","name":"Allen Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9396342/avatar.png","web_url":"https://gitlab.com/acook.gitlab"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360619","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360619","notes":"https://gitlab.com/api/v4/projects/278964/issues/360619/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360619/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360619","relative":"#360619","full":"gitlab-org/gitlab#360619"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107244302,"iid":360584,"project_id":278964,"title":"[VSA] API extension for applying filters to the chart of \"Type of Work\"","description":"### Problem to solve\n\nThe API endpoints for the [Type of work](https://docs.gitlab.com/ee/user/group/value_stream_analytics/#type-of-work---tasks-by-type-chart) chart [doesn't support](https://gitlab.com/gitlab-org/gitlab/-/issues/258680#note_909491110) Milestone, Author and Assignees.\n\nRelated to https://gitlab.com/gitlab-org/gitlab/-/issues/258680#problem-to-solve+ \n\n### Proposal\n\n~backend work to apply all the filters from the `filter bar` to the `Type of work` chart. \n\n1. Labels - already supported by the API endpoint, but not on the `Type of work` chart. \n2. Milestone\n3. Author\n4. Assignees\n\n*`date_range` filter already applies to type of work.","state":"closed","created_at":"2022-04-26T20:51:08.597Z","updated_at":"2022-06-21T12:02:48.054Z","closed_at":"2022-05-25T10:10:07.469Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["Deliverable","backend","devops::manage","feature::addition","group::optimize","priority::2","section::dev","type::feature","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":10879254,"username":"hsnir1","name":"Haim Snir","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10879254/avatar.png","web_url":"https://gitlab.com/hsnir1"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":3,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360584","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360584","notes":"https://gitlab.com/api/v4/projects/278964/issues/360584/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360584/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360584","relative":"#360584","full":"gitlab-org/gitlab#360584"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107242112,"iid":360578,"project_id":278964,"title":"Error budgets exceeded for Create: Source Code","description":"The error budget allowance for ~\"group::source code\" has been exceeded.\n\n![Screenshot_2022-04-26_at_21.49.52](/uploads/6fa60f9aacad7b3ef48652f5a3b5e7e8/Screenshot_2022-04-26_at_21.49.52.jpg)\n\nAfter a preliminary [investigation of what is causing Apdex overrun](https://log.gprd.gitlab.net/app/visualize#/create?type=table\u0026indexPattern=7092c4e2-4eb5-46f2-8305-a7da2edad090\u0026_a=h@3f33efc\u0026_g=(time:(from:'now-7d',to:'now'))), it seems it is well-known controllers that have had extensive tuning in the past.\n\n- Repositories::GitHttpController#info_refs\n- POST /api/:version/internal/allowed\n- Repositories::GitHttpController#git_upload_pack\n\n**References**\n\n- [Kibana](https://log.gprd.gitlab.net/goto/d9d30410-db7e-11ec-a125-c377a8daf518)\n- [Another Kibana](https://log.gprd.gitlab.net/goto/3276bfb0-db81-11ec-aade-19e9974a7229)\n- [Error budgets](https://dashboards.gitlab.net/d/product-create_error_budget/product-error-budgets-create?orgId=1\u0026from=now-7d\u0026to=now)\n- https://gitlab.com/gitlab-com/runbooks/-/merge_requests/4544+\n\n![Screenshot_2022-04-26_at_21.35.00](/uploads/68dee6808bf2c9b846bc28a7d72708d3/Screenshot_2022-04-26_at_21.35.00.jpg)\n\nThis issue is a ~spike to confirm the root cause of the budget overrun and plan possible improvements.","state":"closed","created_at":"2022-04-26T19:42:56.731Z","updated_at":"2022-11-25T16:02:55.584Z","closed_at":"2022-09-09T10:18:45.701Z","closed_by":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"labels":["Category:Source Code Management","Error Budget Improvement","auto updated","backend","devops::create","group::source code","missed-deliverable","missed:15.1","priority::2","section::dev","severity::2","spike","type::maintenance","workflow::blocked"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[],"author":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"type":"ISSUE","assignee":null,"user_notes_count":55,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360578","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360578","notes":"https://gitlab.com/api/v4/projects/278964/issues/360578/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360578/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360578","relative":"#360578","full":"gitlab-org/gitlab#360578"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107237464,"iid":360567,"project_id":278964,"title":"Add project releases evidences to Import/Export \u0026 GitLab Migration","description":"Related to https://gitlab.com/gitlab-org/gitlab/-/issues/339422\n\n## Release Notes \n\nWe continue to add support for more metadata to GitLab migration. In GitLab 15.1, we’ve added releases evidences to Import/Export \u0026 GitLab Migration. This metadata will help you migrate more of the data without needing to manually copy over releases evidences.\n\n\nProject Import/Export \u0026 GitLab Migration importers migrate project releases. However, they do not contain evidence information. \n\nWe should include this information whem migrating projects. \n\n### Proposed solution\n\n1. MR 1 - add `evidences` to `import_export.yml` (similar to releases milestone MR https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85598)\n2. Add `ReleaseEvidencesPipeline` to GitLab Migration (similar to https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85608)\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-26T17:22:42.117Z","updated_at":"2022-06-14T10:57:15.140Z","closed_at":"2022-06-14T10:57:15.117Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:GitLab Migration","Importer:Project Export/Import","Next Up","backend","devops::manage","direction","estimation::completed","group::import","quad-planning::complete-action","release post item::in review","section::dev","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360567","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360567","notes":"https://gitlab.com/api/v4/projects/278964/issues/360567/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360567/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360567","relative":"#360567","full":"gitlab-org/gitlab#360567"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6681,"epic":{"id":342210,"iid":6681,"title":"GitLab Migration - Migrate Projects MVC","url":"/groups/gitlab-org/-/epics/6681","group_id":9970,"human_readable_end_date":"Dec 7, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107232350,"iid":360558,"project_id":278964,"title":"Remove active scope call from Schedulable","description":"## :fire: Problem\n\nThe `Schedulable` concern has a flaw: it relies on an [`active` scope](https://gitlab.com/gitlab-org/gitlab/-/blob/661dcab8977a4f449c7fd7398e5a610ec74a04bd/app/models/concerns/schedulable.rb#L7) that is defined by the concern = models using the concern are _required_ to have an `active` scope. We not always have that.\n\nThis forces us to redefine the `runnable_schedules` scope. [Example](https://gitlab.com/gitlab-org/gitlab/-/blob/81998d5859c78f99b98711aa9a2d0180e3ff40e9/ee/app/models/security/orchestration_policy_rule_schedule.rb#L21).\n\n## :fire_engine: Solution\n\n* Remove the `active` call from `Schedulable`.\n* Update all the `runnable_schedules` to `active.runnable_schedules`","state":"closed","created_at":"2022-04-26T15:34:24.994Z","updated_at":"2022-05-24T09:42:39.071Z","closed_at":"2022-05-24T09:42:39.053Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["[deprecated] Accepting merge requests","backend","ruby","type::maintenance"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360558","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360558","notes":"https://gitlab.com/api/v4/projects/278964/issues/360558/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360558/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360558","relative":"#360558","full":"gitlab-org/gitlab#360558"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107226150,"iid":360544,"project_id":278964,"title":"Pipeline tabs migration - Jobs","description":"## Steps\n\n\n| Step  | Issue Link | MR link\n| ------ | ------ | ------ |\n| Introduce the base tab layout in Vue behind a disabled feature flag | https://gitlab.com/gitlab-org/gitlab/-/issues/230749 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80401 |\n| Support tab redirection  | None | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85183/ |\n| Add the Pipeline and Dag tabs content  | https://gitlab.com/gitlab-org/gitlab/-/issues/356198 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/83418 |\n| Add the Jobs tab content  | :point_left_tone1: you are here |  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85946 |\n| Create new Vue component for Failed Jobs tab content | https://gitlab.com/gitlab-org/gitlab/-/issues/360656 | cell |\n| Add the Failed Jobs tab content  | cell | |\n| Add the Tests tab content |  |cell |\n| Add the the Security tab content  | | cell |\n| Add the the License tab content  | | cell |\n| Add the the Code Quality tab content  | | cell |\n| Feature flag rollout  | | https://gitlab.com/gitlab-org/gitlab/-/issues/353118 |\n\n## Description of the Vue app logic\n\nBehind the disabled feature flag `pipeline_tabs_vue`, we now have Vue tabs in the pipeline page instead of Haml. However given how big the work is, we have divided each tab content into its own issue and MR. This specific issue is to migrate **the jobs and failed jobs tab content** to Vue. To do so, here are some steps to consider:\n\n1. When the feature is turned on, in `app/views/projects/pipelines/show.html.haml` we now have the `js-pipeline-tabs` element which uses a helper to pass down all the dataset we might need to our single Vue app.\n1. We now have 2 helpers: one for CE (`app/helpers/projects/pipeline_helper.rb`) and one for EE (`ee/app/helpers/ee/projects/pipeline_helper.rb`). Each of them is passing data down to the Vue app through the dataset. If your tab is both in CE and EE, then your data should live in the CE helper. If your tab is unique to EE, then you can pass it down trough the EE helper.\n1. We then have the pipeline init bundle (`app/assets/javascripts/pipelines/pipeline_details_bundle.js`) which will check if the flag is on. If it is, then we only create one app instead of one per tab\n1. Then the data is passed down through the app init function in `app/assets/javascripts/pipelines/pipeline_tabs.js`. Make sure to pass your new dataset here to the app. We conditionally render with `ee_else_ce` the right Vue tabs component. The CE component has a slot in which the EE component can pass all the additional tabs. This mean that the EE component always has the CE tab and logic for free :raised_hands_tone1: \n1. Then in the CE tabs component (`app/assets/javascripts/pipelines/components/pipeline_tabs.vue`) all tabs are rendered except the `failed jobs` component which will need to change the in failed jobs MR (we only show it if there are failed jobs!)\n1. In the EE tab component (`ee/app/assets/javascripts/pipelines/components/pipeline_tabs.vue`) we have conditional on each tab which comes from the API permissions. Permissions should already work as is for all tabs\n\n## Work required\n\n1. Check the previous haml that we were using for the tab (`app/views/projects/pipelines/_with_tabs.html.haml` or `ee/app/views/projects/pipelines/_tabs_content.html.haml`. What data are we passing down to the app? Add the same data to the right `pipeline_helper.rb` (CE or EE)\n1. After adding the right data, we also need to update the helper specs (CE: `spec/helpers/projects/pipeline_helper_spec.rb`, EE: `ee/spec/helpers/ee/projects/pipeline_helper_spec.rb`)\n1. In `app/assets/javascripts/pipelines/pipeline_tabs.js`, pass your dataset to the Vue App. \n1. **TAB SPECIFIC INSTRUCTION** Add a badge to the tab if it applies (Failed jobs count, Tests count, etc)\n1. If the tab renders as expected, now it the time for specs!\n1. In `spec/frontend/pipelines/components/pipeline_tabs_spec.js` or/and `ee/spec/frontend/pipelines/components/pipeline_tabs_spec.js`, remove the stub for the tab content as it should no longer be necessary.\n1. **TAB SPECIFIC INSTRUCTION** If you have a count badge, add specs for it as needed\n1. **TAB SPECIFIC INSTRUCTION** If it's the failed jobs tab, make sure to test the tab renders only conditionally\n1. Lookout in the table below for the tab you are working on. For all the ones that are listed, make sure to enable the right tests.\n\n| Spec Name | Line number | Tab content required |\n| ------ | ------ | ------ |\n| ee/spec/features/projects/pipelines/pipeline_spec.rb | 18 | Pipeline |\n| spec/features/projects/pipelines/pipeline_spec.rb | 18 | Pipeline |\n| spec/features/projects/pipelines/pipeline_spec.rb | 1158 | Needs |\n| spec/features/projects/pipelines/pipelines_spec.rb | 626 | Pipelines |\n\n1. Once you have an MR, please add the link to the table here: https://gitlab.com/gitlab-org/gitlab/-/issues/230749","state":"closed","created_at":"2022-04-26T14:15:36.664Z","updated_at":"2022-05-30T14:45:23.742Z","closed_at":"2022-05-30T14:45:23.728Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["Category:Pipeline Authoring","devops::verify","frontend","group::pipeline authoring","maintenance::refactor","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360544","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360544","notes":"https://gitlab.com/api/v4/projects/278964/issues/360544/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360544/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360544","relative":"#360544","full":"gitlab-org/gitlab#360544"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":52750,"iid":66,"sequence":17,"group_id":9970,"title":null,"description":"Target milestone `15.1`","state":3,"created_at":"2022-04-03T00:05:01.955Z","updated_at":"2022-06-13T00:05:02.360Z","start_date":"2022-05-30","due_date":"2022-06-12","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/52750"},"health_status":null},{"id":107224293,"iid":360540,"project_id":278964,"title":"XSS in ZenTao integration affecting self hosted instances without strict CSP","description":"**[HackerOne report #1542510](https://hackerone.com/reports/1542510)** by `joaxcar` on 2022-04-16, assigned to @ngeorge1:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nThe ZenTao issue integration (premium feature) is susceptible to an XSS attack by delivering modified API responses to GitLab.\n\nThis is related and similar to my report https://hackerone.com/reports/1533976 but this time affecting the ZenTao integration.\n\nA user can create a project and configure ZenTao to be used as an external issue tracker. [ducumentation](https://docs.gitlab.com/ee/user/project/integrations/zentao.html). If this is done on a `premium` instance the integration will add an `issue list` to the project displaying ZenTao issues, and clicking one of these issues will display issue details for a single ZenTao issue. The URL for a single issue looks like\n\nhttps://gitlab.example.com/GROUP/PROJECT/-/integrations/zentao/issues/story-1\n\nVisiting this page will trigger the GitLab backend to make an API request to the configured ZenTao instance like this\n\nhttps://zentao.example.net/api.php/v1/issues/story-1\n\nand the response from such a request looks like\n\n```json  \n{\n    \"issue\": {  \n        \"id\": \"story-1\",  \n        \"title\": \"story\",  \n        \"labels\": [ ],  \n        \"pri\": 3,  \n        \"openedDate\": \"2021-08-10T08:25:18Z\",  \n        \"openedBy\": {  \n            \"id\": 1,  \n            \"account\": \"admin\",  \n            \"realname\": \"admin\",  \n            \"avatar\": \"https://www.gravatar.com/avatar/21232f297a57a5a743894a0e4a801fc3?d=identicon\u0026s=80\",  \n            \"url\": \"https://jihudemo.zentao.net/index.php?m=user\u0026f=profile\u0026userID=1\"  \n        },  \n        \"lastEditedDate\": \"2021-08-10T08:25:18Z\",  \n        \"lastEditedBy\": \"admin\",  \n        \"status\": \"opened\",  \n        \"url\": \"https://jihudemo.zentao.net/index.php?m=story\u0026f=view\u0026storyID=32\",  \n        \"desc\": \"\",  \n        \"assignedTo\": [],  \n        \"comments\": [ ]  \n    }  \n}\n```  \n This response is serialized by [ee/app/serializers/integrations/zentao_serializers/issue_entity.rb](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/serializers/integrations/zentao_serializers/issue_entity.rb)\n\nThe interesting part of this file is\n\n```ruby  \n     expose :web_url do |item|  \n        item['url']  \n      end  \n```\n\nand also \n\n```ruby  \n      expose :id do |item|  \n        sanitize(item['id'])  \n      end  \n```\n\nThe `:web_url` does not check for correctness of the URL and can thus be given a JavaScript URL such as `javascript:alert(document.domain)`. The `:id` is sanitized by ruby sanitizer, but is not HTML encoded. This will open up a \"safe\" HTML injection, which we can use to make the attack easier to pull of.\n\nWhen viewing a ZenTao issue details page the `:web_url` and `:id` is used to create the last part of the breadcrumb links. By adding this to our API response\n\n```json  \n{\n   \"id\": \"\u003cimg src=# height=10000 width=10000\u003e\",  \n   \"url\": \"javascript:alert(document.domain)\"  \n}\n```\n\nThe details page will now display a giant image that on click will trigger the XSS.\n\nHere I use an image tag just to prove that the injection. The `:id` HTML injection can be customized to have the victim more prone to clicking the link.\n\nInfected page:  \n![link.jpg](https://h1.sec.gitlab.net/a/ee739ff1-f62f-49a6-bcce-6f6d2f6aa655/link.jpg)\n\nPopup:  \n![popup.jpg](https://h1.sec.gitlab.net/a/8db1395f-2e5d-4126-a687-c084dbf90c61/popup.jpg)\n\n#####  Steps to reproduce\n\nUsing my hosted server (see example further down for self hosting the attack):  \n1. Log in with a user on a self hosted GitLab instance with premium subscription (call the user `user1`)  \n2. Create a new project, call it `project1`  \n3. Go to https://gitlab.example.com/user1/project1/-/integrations/zentao/edit  \n4. Fill in the form. Put `https://joaxcar.com` in the server field. Leave the API field empty, add anything in the username and password.  \n5. Go to  \nhttps://gitlab.example.com/user1/project1/-/integrations/zentao/issues/story-1  \n6. Click the big white square  \n7. XSS triggered\n\nTo self host the API make sure to host a server that will deliver this payload with a `application/json` response to calls to `/api.php/v1/issues/story-1`\n\npayload  \n```json  \n{\n    \"issue\": {  \n        \"id\": \"\u003cimg src=# height=10000 width=10000\u003e\",  \n        \"title\": \"Attack\",  \n        \"labels\": [],  \n        \"pri\": 3,  \n        \"openedDate\": \"2021-08-10T08:25:18Z\",  \n        \"openedBy\": {  \n            \"id\": 1,  \n            \"account\": \"asd\",  \n            \"realname\": \"admin\",  \n            \"avatar\": \"https://www.gravatar.com/avatar/21232f297a57a5a743894a0e4a801fc3?d=identicon\u0026s=80\",  \n            \"url\": \"https://example.com\"  \n        },  \n        \"lastEditedDate\": \"2021-08-10T08:25:18Z\",  \n        \"lastEditedBy\": \"asd\",  \n        \"status\": \"asd\",  \n        \"url\": \"javascript:alert(document.domain)\",  \n        \"desc\": \"description\",  \n        \"assignedTo\": [],  \n        \"comments\": []  \n    }  \n}\n```\n\n#####  Impact\n\nFull XSS on self hosted GitLab instances. A victim needs to visit the infected page and made to click a special link (can be made easy to click)\n\n#####  What is the current *bug* behavior?\n\nZenTao issue URLs are not sanitized\n\n#####  What is the expected *correct* behavior?\n\nJavasript URLs should be filtered\n\n#####  CSP  \nThis attack does not work on GitLab.com as the CSP rules block any JavaScript URL. I don't know of any bypass to this. But it does affect self-hosted instances that have not configured CSP. I calculated my CVSS score as per attacking a self-hosted instance. GitLab team can modify this according to your current treatment of these issues!\n\n#####  Ruby sanitation  \nThe ZenTao issues uses a lot of `ruby sanatize` sanitization. This is strict enough to prevent any serious code injection but still allows for some HTML tags to be included where they are supposed not to be. Like in ID in this issue.\n\nBest regards  \nJohan\n\n####  Impact\n\nFull XSS on self hosted GitLab instances. A victim needs to visit the infected page and made to click a special link (can be made easy to click)\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [popup.jpg](https://h1.sec.gitlab.net/a/8db1395f-2e5d-4126-a687-c084dbf90c61/popup.jpg)\n* [link.jpg](https://h1.sec.gitlab.net/a/ee739ff1-f62f-49a6-bcce-6f6d2f6aa655/link.jpg)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-04-26T13:54:33.576Z","updated_at":"2022-11-22T18:43:43.510Z","closed_at":"2022-06-30T19:49:20.572Z","closed_by":{"id":5791466,"username":"ngeorge1","name":"Nikhil George","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5791466/avatar.png","web_url":"https://gitlab.com/ngeorge1"},"labels":["Deliverable","HackerOne","Integration::ZenTao","Weakness::CWE-79","approaching-SLO","backend","bug::vulnerability","devops::manage","group::integrations","keep confidential","missed-SLO","priority::2","section::dev","security","severity::2","type::bug","workflow::awaiting security release"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":47,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-05-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360540","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360540","notes":"https://gitlab.com/api/v4/projects/278964/issues/360540/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360540/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360540","relative":"#360540","full":"gitlab-org/gitlab#360540"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":107222205,"iid":360536,"project_id":278964,"title":"Eng: Update parent level group creation page making it clear the user is creating a totally new account in GitLab","description":"# Problem\n \nGitLab currently makes it extremely easy to make a net new parent group within GitLab which operates as an entirely separate account. While this is likely valuable to some users we believe that it is not likely understood by many users and incorrectly leads them to creating separate accounts when they meant to create additional subgroups within their initial parent group. This is supported by customer feedback https://gitlab.com/groups/gitlab-org/-/epics/7662#customer-interview-feedback and customer conversion data https://gitlab.com/groups/gitlab-org/-/epics/7662#conversion-data\n \n# Solution \n \nUpdate the design to the parent-level group creation page to make it clear what the user is about to create. We'll use a notification at the top of the parent-level group creation page to educate the user about what paths they have at their disposal. \n\nPrimary CTA: \"Learn more about subgroups\"\nDismiss: clicks \"X\" in the upper right hand corner of the notification\n\n**Old Designs:** If a user tries to create a new top-level group we show them an info alert with the content as specified in the design:\n\n[:triangular_ruler: Specs in Figma](https://www.figma.com/file/jg8XJJSIKAiFgDjeWNl1si/Update-parent-level-group-creation-page?node-id=13%3A3385)\n\n![Screen_Shot_2022-04-26_at_9.28.40_AM](/uploads/d33a1df3e8b9fb7f02da1aa3c6ab2c60/Screen_Shot_2022-04-26_at_9.28.40_AM.png)\n\n(https://gitlab.com/gitlab-org/gitlab/-/issues/354533/designs/Top-level-groups-MVC.jpg)\n\n# Specifics\n\n1. We always show the alert for top-level group creation, the alert is dismissible and won't be shown again once dismissed\n2. The alert does not show for the sub-group creation page","state":"closed","created_at":"2022-04-26T13:28:42.433Z","updated_at":"2022-09-28T05:36:31.646Z","closed_at":"2022-09-23T15:26:38.946Z","closed_by":{"id":11697411,"username":"jmontal","name":"Jay Montal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11697411/avatar.png","web_url":"https://gitlab.com/jmontal"},"labels":["Next Up","devops::growth","group::acquisition","missed:15.4","section::growth","type::feature"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11697411,"username":"jmontal","name":"Jay Montal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11697411/avatar.png","web_url":"https://gitlab.com/jmontal"}],"author":{"id":9347704,"username":"gdoud","name":"Gayle Doud","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9347704/avatar.png","web_url":"https://gitlab.com/gdoud"},"type":"ISSUE","assignee":{"id":11697411,"username":"jmontal","name":"Jay Montal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11697411/avatar.png","web_url":"https://gitlab.com/jmontal"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360536","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360536","notes":"https://gitlab.com/api/v4/projects/278964/issues/360536/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360536/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360536","relative":"#360536","full":"gitlab-org/gitlab#360536"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7662,"epic":{"id":456355,"iid":7662,"title":"Optimizing SaaS Top-Level Group Flows for Conversion","url":"/groups/gitlab-org/-/epics/7662","group_id":9970,"human_readable_end_date":"Apr 19, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107213184,"iid":360517,"project_id":278964,"title":"Feature::InvalidFeatureFlagError/api/v4/usage_data/increment_counter","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/3170412/?query=is%3Aunresolved%20usage_data\n\n```\nFeature::InvalidFeatureFlagError/api/v4/usage_data/increment_counter\nerror\nThe feature flag YAML definition for 'usage_data_diff_searches' does not exist\n```\nThe feature flag was removed with https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84320\n\nThis feature flag is checked for [ordinary redis counter API](https://docs.gitlab.com/ee/development/service_ping/implement.html#usagedata-api-tracking)","state":"closed","created_at":"2022-04-26T11:36:20.797Z","updated_at":"2022-12-09T11:04:37.271Z","closed_at":"2022-05-06T20:21:09.672Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["auto updated","devops::create","group::code review","section::dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360517","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360517","notes":"https://gitlab.com/api/v4/projects/278964/issues/360517/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360517/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360517","relative":"#360517","full":"gitlab-org/gitlab#360517"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107211103,"iid":360514,"project_id":278964,"title":"Add last 2 DORA metrics to time_summary VSA endpoint","description":"## Summary\n\nIn order to display \"Time to Restore Service\" and \"Change Failure Rate\" metric we need to return them as part of regular [time_summary](https://gitlab.com/groups/gitlab-org/-/analytics/value_stream_analytics/time_summary?created_after=2022-03-16\u0026created_before=2022-04-14) response.\n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/355304#note_912474381 for more details\n\n## Proposal\n\nAdd \"Time to Restore Service\" and \"Change Failure Rate\" metrics to `time_summary` response similar to what we have for \"Lead Time for Changes\"","state":"closed","created_at":"2022-04-26T11:17:50.558Z","updated_at":"2022-05-24T12:01:16.125Z","closed_at":"2022-05-12T10:53:19.714Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["Category:Value Stream Management","Deliverable","backend","devops::manage","feature","group::optimize","priority::2","section::dev","type::feature","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360514","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360514","notes":"https://gitlab.com/api/v4/projects/278964/issues/360514/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360514/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360514","relative":"#360514","full":"gitlab-org/gitlab#360514"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107210769,"iid":360513,"project_id":278964,"title":"Parallelize ProjectExportWorker to improve its execution time","description":"As seen in https://gitlab.com/gitlab-org/gitlab/-/issues/356754 \u0026 https://gitlab.com/gitlab-org/manage/import/support/-/issues/10 `ProjectExportWorker` has high execution times when exporting big projects. \n\nParallelize project export process in order to improve the execution time as well as error budgets, since this worker often contributes to ~\"group::import\"'s error budgets, since worker execution time is often over 5 minutes mark.\n\nWe already do a more granular 'relations export' as part of [`BulkImports::RelationExportService`](https://gitlab.com/gitlab-org/gitlab/blob/e826f677b9a4975786bbe862946cea88e0c5472f/app/services/bulk_imports/relation_export_service.rb#L4-4), we can implement something similar for `ProjectExportWorker`.\n\n### Implementation suggestions\n\n1. Perform exporters defined in [export service](https://gitlab.com/gitlab-org/gitlab/blob/e826f677b9a4975786bbe862946cea88e0c5472f/app/services/projects/import_export/export_service.rb#L26-31) in seperate sidekiq jobs\n1. Keep track of export state per relation (something similar to what we do in `BulkImports::RelationExportService`)\n1. Store each exported relation in object storage\n1. Have some sort of a 'final export step' where all exported parts are downloaded from object storage to be combined in one tarball and uploaded back to object storage","state":"closed","created_at":"2022-04-26T11:12:48.544Z","updated_at":"2022-04-27T14:08:39.297Z","closed_at":"2022-04-27T14:08:33.372Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Error Budget Improvement","Importer:Project Export/Import","Next Up","auto updated","devops::manage","group::import","section::dev","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360513","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360513","notes":"https://gitlab.com/api/v4/projects/278964/issues/360513/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360513/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360513","relative":"#360513","full":"gitlab-org/gitlab#360513"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2297,"epic":{"id":15851,"iid":2297,"title":"Project Import/Export Technical Improvements","url":"/groups/gitlab-org/-/epics/2297","group_id":9970},"iteration":null,"health_status":null},{"id":107209775,"iid":360510,"project_id":278964,"title":"BulkImports::PipelineWorker often fails with NetworkError 'execution expired'","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhile testing GitLab Migration (https://docs.gitlab.com/ee/user/group/import/) on .com and migrating [this group](https://gitlab.com/georgekoltsov-group) to [another group](https://gitlab.com/georgekoltsov-bulk-import-group) on .com I noticed while the migration succeeds, each run there are import pipelines (that are responsible for migrating the data over) fail with `NetworkError` 'execution expired'. \n\nExample: \n\n```\n[#\u003cBulkImports::Failure:0x00007f9f78a47bc0\n  id: 10149,\n  bulk_import_entity_id: 10381,\n  created_at: Tue, 26 Apr 2022 10:29:31.402612000 UTC +00:00,\n  pipeline_class: \"BulkImports::Common::Pipelines::BadgesPipeline\",\n  exception_class: \"BulkImports::NetworkError\",\n  exception_message: \"execution expired\",\n  correlation_id_value: \"dce8fbb576e302200ab7bb277ebdb21c\",\n  pipeline_step: \"extractor\"\u003e,\n #\u003cBulkImports::Failure:0x00007f9f78985cf0\n  id: 10148,\n  bulk_import_entity_id: 10387,\n  created_at: Tue, 26 Apr 2022 10:29:31.233230000 UTC +00:00,\n  pipeline_class: \"BulkImports::Groups::Pipelines::SubgroupEntitiesPipeline\",\n  exception_class: \"BulkImports::NetworkError\",\n  exception_message: \"execution expired\",\n  correlation_id_value: \"ae940429bff2af5920028d5772034b6e\",\n  pipeline_step: \"extractor\"\u003e,\n #\u003cBulkImports::Failure:0x00007f9f788f51a0\n  id: 10154,\n  bulk_import_entity_id: 10391,\n  created_at: Tue, 26 Apr 2022 10:29:43.562074000 UTC +00:00,\n  pipeline_class: \"BulkImports::Common::Pipelines::MembersPipeline\",\n  exception_class: \"BulkImports::NetworkError\",\n  exception_message: \"execution expired\",\n  correlation_id_value: \"ae940429bff2af5920028d5772034b6e\",\n  pipeline_step: \"extractor\"\u003e,\n #\u003cBulkImports::Failure:0x00007f9f788d6e80\n  id: 10155,\n  bulk_import_entity_id: 10392,\n  created_at: Tue, 26 Apr 2022 10:29:45.622423000 UTC +00:00,\n  pipeline_class: \"BulkImports::Projects::Pipelines::CiPipelinesPipeline\",\n  exception_class: \"BulkImports::NetworkError\",\n  exception_message: \"execution expired\",\n  correlation_id_value: \"ae940429bff2af5920028d5772034b6e\",\n  pipeline_step: \"extractor\"\u003e,\n #\u003cBulkImports::Failure:0x00007f9f78845250\n  id: 10159,\n  bulk_import_entity_id: 10397,\n  created_at: Tue, 26 Apr 2022 10:30:16.262376000 UTC +00:00,\n  pipeline_class:\n   \"BulkImports::Projects::Pipelines::ContainerExpirationPolicyPipeline\",\n  exception_class: \"BulkImports::NetworkError\",\n  exception_message: \"execution expired\",\n  correlation_id_value: \"dd2c90bb4b9deb5e233a0865a6c523bf\",\n  pipeline_step: \"extractor\"\u003e]\n``` \n\nBecause of these network errors some of the data is not carried over. \n\n\n### Example Group to investigate\n\nhttps://gitlab.com/georgekoltsov-bulk-import-group\n\n### What is the current *bug* behavior?\n\nNetwork 'execution expired' error while gitlab migration is running. \n\n### What is the expected *correct* behavior?\n\nThere shouldn't be as frequent and consistent network 'execution expired' errors. Some are inevitable, but not this many. It's consistently happenning during each run. \n\n### Relevant logs and/or screenshots\n\n![image](/uploads/de80a0a9148154798e925c5adadf21db/image.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com \n\n### Possible fixes\n\n- Add retry logic (we already have retry logic present, which does not look like it kicks in?) for failing pipelines in order to increase pipeline success rate\n- Understand why execution expired is happening. Is it due to .com request queue latency? What is current network request timeout value? Should it be bumped?","state":"closed","created_at":"2022-04-26T10:55:04.166Z","updated_at":"2022-10-17T10:56:51.695Z","closed_at":"2022-10-17T10:56:51.668Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:GitLab Migration","Next Up","backend","customer","devops::manage","group::import","priority::3","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360510","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360510","notes":"https://gitlab.com/api/v4/projects/278964/issues/360510/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360510/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360510","relative":"#360510","full":"gitlab-org/gitlab#360510"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6629,"epic":{"id":335099,"iid":6629,"title":"🐞 GitLab Migration bugs","url":"/groups/gitlab-org/-/epics/6629","group_id":9970},"iteration":null,"health_status":null},{"id":107195859,"iid":360497,"project_id":278964,"title":"Frontend: add tooltip on the downstream pipeline action button","description":"### Problem\n\non https://gitlab.com/gitlab-org/gitlab/-/issues/354974 we've added an action button to the DSP, however, the button is missing a tooltip on hover, when you hover over the button you see the DSP name instead of the action\n\n\n\n|DSP|job pill|\n|--|---|\n|![image](/uploads/5ca60082872cc9a1fc27f1eef88d33db/image.png)|![image](/uploads/ef9fb5adbc46752ecd6a46245ff60dab/image.png) ![image](/uploads/380425cf3992a2bd08c930bbb1a9a690/image.png)|\n\n### Solution\nWe should add the retry/cancel tooltip similar to the way we have on the normal job pills","state":"closed","created_at":"2022-04-26T07:37:17.451Z","updated_at":"2022-05-17T17:25:35.821Z","closed_at":"2022-05-17T17:25:35.808Z","closed_by":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"labels":["Category:Pipeline Authoring","SUS::Impacting","UI polish","UX debt","auto updated","devops::verify","frontend","group::pipeline authoring","section::ops","severity::4"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":4509877,"username":"dhershkovitch","name":"Dov Hershkovitch","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7daa3113f0359f08a217fa800d9cc1d2?s=80\u0026d=identicon","web_url":"https://gitlab.com/dhershkovitch"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360497","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360497","notes":"https://gitlab.com/api/v4/projects/278964/issues/360497/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360497/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360497","relative":"#360497","full":"gitlab-org/gitlab#360497"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6947,"epic":{"id":373378,"iid":6947,"title":"Triggering and retrying trigger jobs and downstream pipelines","url":"/groups/gitlab-org/-/epics/6947","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":{"id":50314,"iid":63,"sequence":16,"group_id":9970,"title":"Iteration 16","description":"Target milestone `15.1`","state":3,"created_at":"2022-03-06T00:05:02.043Z","updated_at":"2022-05-30T00:05:02.370Z","start_date":"2022-05-16","due_date":"2022-05-29","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/50314"},"health_status":null},{"id":107190840,"iid":360494,"project_id":278964,"title":"[Feature flag] Release of `use_api_for_payment_validation`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to release [`ZuoraSimple` Component](https://gitlab.com/gitlab-org/gitlab/-/issues/357156) on production, on production, by removing the `use_api_for_payment_validation` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::purchase\" \n- Most appropriate slack channel to reach out to: `#g_purchase`\n- Best individual to reach out to: @snachnolkar (or @agulina)\n- PM: @tgolubeva \n\n## Stakeholders\n\n## Expectations\n\n### What are we expecting to happen?\n\nWhen the feature is rolled out, a new HPM will be used for the payment method validation.\n\n### When is the feature viable?\n\nNo settings in the application are needed. All settings from external applications (e.g. CustomersDot, Zuora) are already in place.\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\nIf something goes wrong, the payment form won't show in the pop-up to validate the payment method. This will make it impossible for free users to validate themselves and run the free pipelines.\n\n### What can we monitor to detect problems with this?\n\n\n\n### What can we check for monitoring production after rollouts?\n\n\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `use_api_for_payment_validation` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete use_api_for_payment_validation --dev`\n    - [ ] `/chatops run feature delete use_api_for_payment_validation --staging`\n    - [ ] `/chatops run feature delete use_api_for_payment_validation`\n- [ ] Close this rollout issue.","state":"closed","created_at":"2022-04-26T05:58:43.652Z","updated_at":"2023-01-12T07:00:56.042Z","closed_at":"2023-01-12T07:00:56.013Z","closed_by":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"labels":["ARM::Consider for 15.8","Category:Purchase","[deprecated] Accepting merge requests","devops::fulfillment","feature flag","feature::addition","frontend","group::purchase","section::fulfillment","type::feature"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"}],"author":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"type":"ISSUE","assignee":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360494","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360494","notes":"https://gitlab.com/api/v4/projects/278964/issues/360494/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360494/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360494","relative":"#360494","full":"gitlab-org/gitlab#360494"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107186768,"iid":360487,"project_id":278964,"title":"Cascade package forward settings from admin area to group","description":"### Problem to solve\n\nUsers want to be able to have more control over their package forwarding settings, especially when the settings occur at different levels (instance, namespace, project). There should be rules about how settings are inherited and overwritten, and how changes can cascade down.\n\nCurrently, we have instance-level settings to turn on and off package forwarding for PyPI and npm, and soon to include [maven](https://gitlab.com/gitlab-org/gitlab/-/issues/233022).\n\n* Forwarding means when a package is not found in the GitLab package registry that the package is requested from an external public registry\n* This feature is enabled by default, meaning it is currently not possible to disable it if you're a SaaS customer\n* Some customers would not like this feature to be turned on because pulling from a public registry can introduce unexpected problems (the package is not frozen in time, it can change)\n* Some customers would not like this feature to be turned on because pulling from a public registry can expose them to security problems\n\n### Proposal and logic \n\n[Figma](https://www.figma.com/file/OCEP1esclZnGKZ26fC0PjJ/Package-settings?node-id=414%3A140242)\n\nSee designs below :arrow_down: \n* Add UI copy on admin package forward settings to explain that the setting can be overridden at the group level\n* Surface the setting at the group level. The group setting will show what has been set at the admin level. \n* Surface the setting at the sub-group level, the sub-group will show was has been set at the parent group level.\n* When the setting is overridden, it will never follow the parent setting again\n* If a setting has not been overridden, it will follow the parent setting\n* User namespace will adhere to admin settings\n\n\nExample:\n1. Admin setting is allow forwarding\n- Admin setting: :white_check_mark: \n- All groups: :white_check_mark: \n1. Admin setting is changed do not allow forwarding \n- Admin setting: :no_entry:  \n- All groups: :no_entry: \n2. Group A overrides setting to allow forwarding. Group A has a subgroup, sub-group A \n- Admin setting: :no_entry: \n- Group A: :white_check_mark: \n- Group A/sub-group A: :white_check_mark: \n- All other groups: :no_entry: \n3. Admin setting is changed to allow forwarding\n- Admin setting: :white_check_mark: \n- Group A: :white_check_mark: \n- Group A/sub-group A: :white_check_mark: \n- All other groups: :white_check_mark:\n4. Admin setting is changed do not allow forwarding \n- Admin setting: :no_entry: \n- Group A: :white_check_mark: \n- Group A/sub-group A: :white_check_mark: \n- All other groups: :no_entry:\n\n\n### Implementation plan\n\n**Blocked by #360267**\n\n1. Add additional form fields, sub-header \u0026 description to [_ee_package_registry.haml](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/views/admin/application_settings/_ee_package_registry.haml) file. Dependent on additional ~backend fields for \"maven\" support \u0026 supporting update on the field. Maven field added here https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85299+\n1. Add Package forwarding section to group settings\n   1. Render form fields (checkboxes). \n   1. Render \"Save changes\" button \u0026 handle action.\n1. Add ~GraphQL query to get/update settings","state":"closed","created_at":"2022-04-26T03:10:04.723Z","updated_at":"2023-01-04T05:15:24.715Z","closed_at":"2022-11-28T21:29:06.168Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Package Registry","Deliverable","Package:P1","Track Health Status","UX","backend","devops::package","feature::addition","frontend","frontend-weight::2","group::package registry","section::ops","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11214192,"username":"rchanila","name":"Rahul Chanila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11214192/avatar.png","web_url":"https://gitlab.com/rchanila"}],"author":{"id":9608331,"username":"katiemacoy","name":"Katie Macoy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9608331/avatar.png","web_url":"https://gitlab.com/katiemacoy"},"type":"ISSUE","assignee":{"id":11214192,"username":"rchanila","name":"Rahul Chanila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11214192/avatar.png","web_url":"https://gitlab.com/rchanila"},"user_notes_count":79,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360487","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360487","notes":"https://gitlab.com/api/v4/projects/278964/issues/360487/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360487/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360487","relative":"#360487","full":"gitlab-org/gitlab#360487"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8067,"epic":{"id":522623,"iid":8067,"title":"Cascade package forward settings from admin area to group","url":"/groups/gitlab-org/-/epics/8067","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107181230,"iid":360478,"project_id":278964,"title":"Change vulnerabilityFindingDismiss mutation to accept uuid argument","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nWe need to be able to dismiss pipeline findings. There is a mutation `vulnerabilityFindingDismiss`, but this does not work for pipelines. The only ID available to security findings is the UUID. We need to accept the UUID of a finding to dismiss the vulnerability finding and/or the security finding. We also need to deprecate the use of `id` as a parameter. However, that deprecation should come in a separate issue.\n\n## Relevant links\n\nN/A\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation: Update GraphQL docs\n- [ ] Testing: Add relevant tests\n\n\n## Implementation plan\n\n- [ ] ~backend Add `uuid` as an input for the `vulnerabilityFindingDismiss` mutation\n- [ ] ~backend Remove the requirement on `id` as an input\n- [ ] ~backend Add check to make sure at least `id` or `uuid` is present\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\n## Verification steps\n\n1. Run a pipeline on the main branch of a test project\n1. Get the UUID of a finding via GraphQL\n   ```\n   query {\n     project(fullPath:\"jschafer/security-reports\") {\n       pipelines(first:1) {\n         nodes {\n           securityReportFindings(first:1) {\n             nodes {\n               uuid\n             }\n           }\n         }\n       }\n     }\n   }\n   ```\n1. Dismiss the finding via GraphQL\n   ```\n   mutation {\n     vulnerabilityFindingDismiss(input:{uuid:\"\u003cuuid\u003e\"}){\n       finding {\n         title\n       }\n     }\n   }\n   ```\n1. GraphQL should return with the title of the security finding\n1. The Security tab on the pipeline should show the security finding as dismissed.","state":"closed","created_at":"2022-04-26T00:09:31.342Z","updated_at":"2022-08-03T16:51:53.992Z","closed_at":"2022-07-14T13:51:26.036Z","closed_by":{"id":487608,"username":"Quintasan","name":"Michał Zając","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"labels":["backend","devops::secure","group::threat insights","maintenance::refactor","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":487608,"username":"Quintasan","name":"Michał Zając","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"}],"author":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"type":"ISSUE","assignee":{"id":487608,"username":"Quintasan","name":"Michał Zając","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360478","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":0},"weight":3,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360478","notes":"https://gitlab.com/api/v4/projects/278964/issues/360478/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360478/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360478","relative":"#360478","full":"gitlab-org/gitlab#360478"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8479,"epic":{"id":575444,"iid":8479,"title":"Pipeline Security Tab GraphQL migration: implement modal actions","url":"/groups/gitlab-org/-/epics/8479","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107168779,"iid":360458,"project_id":278964,"title":"[Feature flag] Rollout of `optimized_project_and_group_activity_queries `","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the optimized group and project activity queries](https://gitlab.com/gitlab-org/gitlab/-/issues/355831) on production,\nthat is currently behind the `optimized_project_and_group_activity_queries` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: Workspace\n- Most appropriate slack channel to reach out to: `#g_manage_workspace`\n- Best individual to reach out to: @abdwdd \n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nDecreased query times for [groups](https://gitlab.com/groups/gitlab-org/-/activity) and [projects](https://gitlab.com/gitlab-org/gitlab/activity) activities.\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\nAfter verifying performance improvement.\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nMore query timeouts for group activities.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n\n### What can we check for monitoring production after rollouts?\n\nCount of 500 errors on project and group activity pages: https://log.gprd.gitlab.net/app/dashboards#/view/b50cd270-c4d4-11ec-b73f-692cc1ae8214?_g=(filters%3A!()%2CrefreshInterval%3A(pause%3A!t%2Cvalue%3A0)%2Ctime%3A(from%3Anow-7d%2Cto%3Anow))\n\nPercentile duration of the endpoints should also decrease: https://log.gprd.gitlab.net/app/visualize#/edit/474fdd60-b127-11ec-afaf-2bca15dfbf33?_g=(filters%3A!()%2CrefreshInterval%3A(pause%3A!t%2Cvalue%3A0)%2Ctime%3A(from%3Anow-7d%2Cto%3Anow))\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev`\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab-foss \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --project=gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org \u003cfeature-flag-name\u003e true`\n    - [ ] `/chatops run feature set --group=gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2022-04-25T20:26:18.360Z","updated_at":"2022-11-16T01:16:28.951Z","closed_at":"2022-11-16T01:16:28.894Z","closed_by":{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"},"labels":["backend","bug::performance","devops::manage","feature flag","group::organization","missed:15.0","missed:15.1","missed:15.2","missed:15.3","missed:15.4","missed:15.5","section::dev","type::bug","workflow::ready for development"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"}],"author":{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"},"type":"ISSUE","assignee":{"id":10327656,"username":"abdwdd","name":"Abdul Wadood","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10327656/avatar.png","web_url":"https://gitlab.com/abdwdd"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360458","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":50,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 50 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360458","notes":"https://gitlab.com/api/v4/projects/278964/issues/360458/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360458/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360458","relative":"#360458","full":"gitlab-org/gitlab#360458"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107156372,"iid":360440,"project_id":278964,"title":"Post-incident review solution validation","description":"\u003c!--Please answer the below questions to the best of your ability.--\u003e\n\n#### What's this issue all about? (Background and context)\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/360439, we identified an approach for a first iteration of post-incident reviews. We want to verify that our approach is valid and usable for people using incidents. \n\n#### What hypotheses and/or assumptions do you have?\n\nThat what we're proposing is a reasonable way to introduce post-incident reviews to GitLab.\n\n#### What questions are you trying to answer?\n\n_General questions_\n\n* Does the general workflow make sense?\n* Does this approach add value to the product?\n* Are the ways we're surfacing the post-incident reviews to people useful (or just annoying)?\n* Are there things we could do that could make this better (ex ways to automate the population of the review issue)?\n\n_Specific questions_\n\n* Does it make sense to add a link to the timeline to the post-incident review issue?\n* Does it make sense to mention or assign to participants/assignees automatically?\n* How would people expect to interact with the action items list? What do they think they could do from the action items list (create a new issue, to-do item, task, or something else)?\n\n#### What research methodology do you intend to use?\n\nUnmoderated testing sessions with at least 5 external participants.\n\n#### What persona, persona segment, or customer type experiences the problem most acutely?\n\n[Ingrid, Infrastructure Operator](https://about.gitlab.com/handbook/product/personas/#ingrid-infrastructure-operator)\n\n#### What business decisions will be made based on this information?\n\nWhether to proceed with the MVC proposal for post-incident reviews.\n\n#### What, if any, relevant prior research already exists?\n\nProblem validation conducted as part of https://gitlab.com/gitlab-org/ux-research/-/issues/1925+\n\n#### Who will be leading the research?\n\nAmelia\n\n#### What timescales do you have in mind for the research?\n\nTo be completed in 15.7\n\n#### Relevant links (problem validation issue, design issue, script, prototype, notes, etc.)\n\n- Design issue --\u003e https://gitlab.com/gitlab-org/gitlab/-/issues/360439+\n- Problem validation issue --\u003e https://gitlab.com/gitlab-org/ux-research/-/issues/1925+\n\n#### TODO Checklist\n- [x] Decide on approach\n- [ ] Create Dovetail project\n- [ ] Create testing script\n- [ ] Run sessions\n- [ ] Analyze results\n- [ ] Add insights to Dovetail","state":"closed","created_at":"2022-04-25T18:30:36.482Z","updated_at":"2022-11-22T17:18:50.889Z","closed_at":"2022-11-16T16:06:12.413Z","closed_by":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"labels":["Category:Incident Management","UX","UX research","UX solution validation","devops::monitor","feature::addition","group::respond","section::ops","type::feature","workflow::solution validation"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"}],"author":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"type":"ISSUE","assignee":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360440","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":1},"weight":10,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360440","notes":"https://gitlab.com/api/v4/projects/278964/issues/360440/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360440/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360440","relative":"#360440","full":"gitlab-org/gitlab#360440"},"severity":"UNKNOWN","moved_to_id":118853531,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107149556,"iid":360411,"project_id":278964,"title":"Show a warning on the projects with a certificate-based cluster","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Release notes\n\nWith the ongoing deprecation of the certificate-based cluster connections, we want to ensure that all affected users are aware of the coming changes. For this reason, we added a notification banner on top of every project with certificate-based clusters attached. The banner is visible only for project maintainers and owners and is enabled only on GitLab SaaS.\n\n### Proposal\n\nFollowing https://gitlab.com/gitlab-org/gitlab/-/issues/360407+\n\nWe want to show a warning on the project homepage\n\n- if the project has a project- or group-level certificate-based cluster attached\n- the user has at least project Maintainer role\n- it's not dismissable\n\nCopy for free namespaces:\n\n\u003e The certificate-based Kubernetes integration has been deprecated and will be turned off at the end of November 2022. Please [migrate to the GitLab agent for Kubernetes](https://docs.gitlab.com/ee/user/infrastructure/clusters/migrate_to_gitlab_agent.html).\n\nCopy for paying namespaces:\n\n\u003e The certificate-based Kubernetes integration has been deprecated and will be turned off at the end of November 2022. Please [migrate to the GitLab agent for Kubernetes](https://docs.gitlab.com/ee/user/infrastructure/clusters/migrate_to_gitlab_agent.html) or reach out to GitLab support.","state":"closed","created_at":"2022-04-25T15:57:22.572Z","updated_at":"2022-06-21T12:04:54.142Z","closed_at":"2022-06-13T22:09:46.196Z","closed_by":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"labels":["Category:Kubernetes Management","Deliverable","GitLab Free","devops::configure","frontend","frontend-weight::1","group::configure","release post item::in review","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":9094263,"username":"anna_vovchenko","name":"Anna Vovchenko","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9094263/avatar.png","web_url":"https://gitlab.com/anna_vovchenko"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360411","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360411","notes":"https://gitlab.com/api/v4/projects/278964/issues/360411/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360411/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360411","relative":"#360411","full":"gitlab-org/gitlab#360411"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7911,"epic":{"id":500079,"iid":7911,"title":"Migrate clusters to agent-based setups","url":"/groups/gitlab-org/-/epics/7911","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":107149517,"iid":360409,"project_id":278964,"title":"Enable the certificate-based clusters feature for the 4410 namespaces with a cluster","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal\n\nFollowing https://gitlab.com/gitlab-org/gitlab/-/issues/360407+\n\nEnable the feature flag for the 4410 namespaces identified in https://gitlab.com/gitlab-data/product-analytics/-/issues/299#note_872517366\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n--\u003e\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2022-04-25T15:56:54.999Z","updated_at":"2022-07-05T19:19:53.682Z","closed_at":"2022-05-24T19:11:02.222Z","closed_by":{"id":683729,"username":"Alexand","name":"João Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"labels":["Category:Kubernetes Management","Deliverable","GitLab Free","devops::configure","group::configure","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":683729,"username":"Alexand","name":"João Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"}],"author":{"id":4545061,"username":"nagyv-gitlab","name":"Viktor Nagy (GitLab)","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fb255c1e9c228b9356af165939b3ac9b?s=80\u0026d=identicon","web_url":"https://gitlab.com/nagyv-gitlab"},"type":"ISSUE","assignee":{"id":683729,"username":"Alexand","name":"João Alexandre Cunha","state":"active","avatar_url":"https://secure.gravatar.com/avatar/fbf9eb0e06338db271e1ce6722c32cc0?s=80\u0026d=identicon","web_url":"https://gitlab.com/Alexand"},"user_notes_count":27,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360409","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360409","notes":"https://gitlab.com/api/v4/projects/278964/issues/360409/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360409/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360409","relative":"#360409","full":"gitlab-org/gitlab#360409"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7911,"epic":{"id":500079,"iid":7911,"title":"Migrate clusters to agent-based setups","url":"/groups/gitlab-org/-/epics/7911","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":107143823,"iid":360375,"project_id":278964,"title":"Script that recalculates project's total build artifacts size does not factor in effects of artifact deletion","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nAfter attempting to run the rake task from https://gitlab.com/gitlab-org/gitlab/-/issues/238536 on .com twice (ref https://gitlab.com/gitlab-com/gl-infra/production/-/issues/6631#note_909726250), we still have a lot of projects with inaccurate stats based on https://app.periscopedata.com/app/gitlab/983187/CI-Build-Artifact-Size-Analysis.\n\n@alberts-gitlab brought up one bug that could play a big factor on the inaccurate stats:\n\nWe don't completely factor in the effects of when artifacts are deleted:\n\n\u003e During the refresh, if one artifact is deleted, it will decrement the counter. But the baseline accumulation will not include that artifact.\n\u003e\n\u003e So say we have 11 artifacts, 1Mb each, and batch size of 10.\n\u003e\n\u003e We start with counter at 0 after clearing it. As we sum the first 10, the 11th artifact is deleted. This means we have 10Mb accumulated, with -1 Mb in the counter. The Sum ends at the 10th artifact, because there is no more 11th artifact.\n\u003e\n\u003e Then the counter is flushed, leaving 9Mb in total instead of the expected 10Mb.\n\nWith the ongoing https://gitlab.com/gitlab-org/gitlab/-/issues/356224, this bug may have played a huge factor with the inaccurate recalculated stats.\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e\nTBD","state":"closed","created_at":"2022-04-25T14:33:10.444Z","updated_at":"2022-09-16T16:59:59.776Z","closed_at":"2022-06-14T15:16:06.298Z","closed_by":{"id":1758950,"username":"iamricecake","name":"Erick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1758950/avatar.png","web_url":"https://gitlab.com/iamricecake"},"labels":["CI artifacts","Category:Build Artifacts","Verify::P1","backend","devops::verify","group::pipeline insights","missed:15.0","priority::1","section::ops","severity::2","type::bug","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":1758950,"username":"iamricecake","name":"Erick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1758950/avatar.png","web_url":"https://gitlab.com/iamricecake"}],"author":{"id":1758950,"username":"iamricecake","name":"Erick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1758950/avatar.png","web_url":"https://gitlab.com/iamricecake"},"type":"ISSUE","assignee":{"id":1758950,"username":"iamricecake","name":"Erick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1758950/avatar.png","web_url":"https://gitlab.com/iamricecake"},"user_notes_count":43,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360375","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360375","notes":"https://gitlab.com/api/v4/projects/278964/issues/360375/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360375/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360375","relative":"#360375","full":"gitlab-org/gitlab#360375"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":107143214,"iid":360372,"project_id":278964,"title":"IDOR in Zentao integration leaks details of issues from a users other \"products\"","description":"**[HackerOne report #1542834](https://hackerone.com/reports/1542834)** by `joaxcar` on 2022-04-16, assigned to @ngeorge1:\n\n[Report](#report) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n####  Summary\n\nMaintainers of projects with a premium subscription have the option to enable \"Zentao product integration\" ([documentation](https://docs.gitlab.com/ee/user/project/integrations/zentao.html)).\n\nThis enables users with access to the project to view a list of `product` issues synced from a connected Zentao `product` by visiting https://gitlab.com/GROUPNAME/PROJECTNAME/-/integrations/zentao/issues . \n\nAnd issue details by visiting https://gitlab.com/GROUPNAME/PROJECTNAME/-/integrations/zentao/issues/ISSUE-KEY\n\nWhen configuring this feature, the maintainer is made to enter a `product ID`  \n\u003e ZenTao Product ID: To display issues from a single ZenTao product in a given GitLab project. The Product ID can be found in the ZenTao product page under Settings \u003e Overview.\n\nThis is to connect the current `GitLab project` with the target `Zentao product`\n\nThe way GitLab handles this functionality is by requesting the maintainer to enter two things other than the project key\n\n1. Zentao instance URL  \n2. Zentao API key\n\nWhen a user visits the  `/-/integrations/zentao/issues` page the GitLab backend makes a request towards Zentao like so\n\n```  \nhttps://username.zentao.net/api.php/v1/products/3/issues  \n```\n\nWhich returns a list of all issues related to `product` with ID 3.\n\nWhen clicking on one of these issues in the UI the user is redirected to `/-/integrations/zentao/issues/issue-1` and the backend will make a request like so  \n```  \nhttps://jihudemo.zentao.net/api.php/v1/issues/issue-1  \n```  \nThis request does not contain any check as to which `product` this issue is related. So by enumerating issue titles such as `task-ID`, `bug-ID`, `story-ID` and so on an attacker can enumerate all issues from all `products` the maintainer controls in its Zentao instance.\n\n####  A small discussion on CVSS\n\nI am not completely sure on how this is intended to work, and Zentao's English documentation is a bit sparse. But from what I have gathered in the GitLab documentation, and issues surrounding this, the intention is to connect ONE  GitLab project with ONE Zentao `product`.\n\nSo any issues not related to this given `product` should not be accessible to other users.\n\nMy understanding of Zentao is that the user can organize issues in `products`, but all issues share names with incrementing values. So two `products` with two `bug` issues will create the four `bug` IDs  \n```  \nbug-1  \nbug-2  \nbug-3  \nbug-4  \n```\n\nThis is the same for issue types of `task` and `story`. This makes it extremely easy to enumerate these issues. Hence, the complexity scoring of `Low`.\n\nThere is also no restriction for this feature being used as the issue tracker for a `public` project. If this is done, the attacker can perform the attack unauthenticated.\n\nI will report this with a CVSS which is the \"highest possible impact\" as nothing I have described above is outside \"normal workflow\". But as usual I understand that the scoring can be subject to change :)\n\n####  Steps to reproduce  \nI will use the test account that is used in GitLab issues regarding Zentao. `Zentao demo account` from https://gitlab.com/gitlab-org/gitlab/-/issues/338178\n\n\u003e Zentao Web URL: https://jihudemo.zentao.net  \n\u003e Zentao API token: a70fe861f1e60a3bfd857133798f2f1f  \n\u003e Zentao Product ID: 4\n\n\n1. Create a user to use as the victim  \n2. Create a new public project (with minimum premium access to GitLab)  \n3. In the project page go to   \nhttps://gitlab.com/GROUPNAME/PROJECTNAME/-/integrations/zentao/edit  \n4. Fill in the test credentials from above (use product ID 4 as this one only contains one issue)  \n5. Click save  \n6. Log out  \n7. Go to   \nhttps://gitlab.com/GROUPNAME/PROJECTNAME/-/integrations/zentao/issues  \n8. The page will list all issues related to the Product. In this case ONE bug issue  \n9. Click the issue (bug-8) and you will go to  \nhttps://gitlab.com/GROUPNAME/PROJECTNAME/-/integrations/zentao/issues/bug-8  \n10. Now change `bug-8` to `bug-1`  \n11. Details of another `product` is shown  \n12. Start enumerating\n\n####  Impact  \nZentao integration leaks a user's ALL issues from ALL `products` even if the documentation states that it will show issues from ONE `product`\n\n####  Examples\n\nVisit my public project at\n\nhttps://gitlab.com/ultimate_joaxcar_2/kk/-/integrations/zentao/issues\n\nThis is accessible as an unauthenticated user.\n\nTry to enumerate issues with names such as `bug-1`, `task-1` and `story-1`\n\n####  What is the current *bug* behavior?\n\nGitLab uses Zentao issue key directly from attacker supplied URL without matching it to the configured product key.\n\n####  What is the expected *correct* behavior?\n\nA project should only fetch keys that match the configured key base\n\n####  Output of checks\n\nThis bug happens on GitLab.com\n\n####  Impact\n\nZentao integration leaks a user's ALL issues from ALL `products` even if the documentation states that it will show issues from ONE `product`\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-04-25T14:27:05.770Z","updated_at":"2022-11-22T18:43:48.486Z","closed_at":"2022-08-25T00:52:11.099Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Deliverable","HackerOne","Integration::ZenTao","Weakness::CWE-639","backend","bug::vulnerability","devops::manage","group::integrations","missed-deliverable","missed:15.2","missed:15.3","priority::3","section::dev","security","severity::3","type::bug","workflow::awaiting security release"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":46,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-06-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360372","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360372","notes":"https://gitlab.com/api/v4/projects/278964/issues/360372/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360372/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360372","relative":"#360372","full":"gitlab-org/gitlab#360372"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107143105,"iid":360371,"project_id":278964,"title":"UX: Add Container Registry storage to Usage Quotas","description":"UX issue for https://gitlab.com/gitlab-org/gitlab/-/issues/356187\n\n### UX notes:\n\n1. when container registry feature is enabled, display container registry storage type (even if storage used is 0)\n2. when container registry feature is not enabled, hide container registry storage type","state":"closed","created_at":"2022-04-25T14:25:23.180Z","updated_at":"2022-05-31T21:46:09.357Z","closed_at":"2022-04-29T20:11:55.813Z","closed_by":{"id":5058729,"username":"mnearents","name":"Matthew Nearents","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5058729/avatar.png","web_url":"https://gitlab.com/mnearents"},"labels":["UX","[deprecated] Accepting merge requests","[deprecated] Category:Utilization","auto updated","devops::fulfillment","group::utilization","section::fulfillment","type::feature"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[],"author":{"id":4665308,"username":"doniquesmit","name":"Donique Smit","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c5737881c65a3063443d7692dfe04f4a?s=80\u0026d=identicon","web_url":"https://gitlab.com/doniquesmit"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360371","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360371","notes":"https://gitlab.com/api/v4/projects/278964/issues/360371/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360371/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360371","relative":"#360371","full":"gitlab-org/gitlab#360371"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107139643,"iid":360342,"project_id":278964,"title":"Test against Ruby 3 by default on CI, and Ruby 2 in the 2-hourly scheduled pipelines","description":"As discussed in https://gitlab.com/gitlab-org/gitlab/-/issues/340298#note_876674343, to support the deployment of Ruby 3 to GitLab.com,\nwe should default to using Ruby 3 on the CI, and using Ruby 2 for back-compatibility in the 2-hourly scheduled pipelines.\n\n## Rough approximation of additional CI costs\n\nAdditional cost of running Ruby 2 jobs on 2-hourly scheduled pipelines:\n\n- We have 94 RSpec jobs\n- RSpec jobs average duration is approximately 25 minutes\n- Cost per hour of runner VM: $0.095\n- Total additional hours per pipeline: `25 * 94 / 60 = 39.1`\n- Total additional cost per pipeline: `39.1 * $0.095 = $3.7`\n- We have 12 2-hourly scheduled pipelines per day\n- Total additional cost per day: `$3.7 * 12 = $44.4`\n- Running these duplicated tests for a year (e.g. until 16.x is released) would result in an additional: `$44.4 * 365 = $16,206`.","state":"closed","created_at":"2022-04-25T13:31:21.639Z","updated_at":"2022-04-27T14:10:37.237Z","closed_at":"2022-04-27T14:10:36.830Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","[deprecated] Accepting merge requests","ep::pipeline","maintenance::pipelines","type::maintenance"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[],"author":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360342","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360342","notes":"https://gitlab.com/api/v4/projects/278964/issues/360342/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360342/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/340298"},"references":{"short":"#360342","relative":"#360342","full":"gitlab-org/gitlab#360342"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107133830,"iid":360336,"project_id":278964,"title":"Clean up background migration BackfillIntegrationsEnableSslVerification","description":"## Summary\n\n\u003c!--\nPlease briefly describe what part of the code base needs to be refactored.\n--\u003e\n\nClean up the background migration from https://gitlab.com/gitlab-org/gitlab/-/issues/349697 / https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80302, as described on https://docs.gitlab.com/ee/development/database/background_migrations.html#cleaning-up\n\n## Improvements\n\n\u003c!--\nExplain the benefits of refactoring this code.\nSee also https://about.gitlab.com/handbook/values/index.html#say-why-not-just-what\n--\u003e\n\n- Finalize migration\n- Drop temporary index added in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/80302\n\n### Availability \u0026 Testing\n\nSuggestion: run `package-and-qa`\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e","state":"closed","created_at":"2022-04-25T12:01:50.088Z","updated_at":"2022-11-22T18:43:49.166Z","closed_at":"2022-06-01T13:11:11.313Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Integrations","Deliverable","backend","database","devops::manage","group::integrations","quad-planning::complete-action","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360336","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360336","notes":"https://gitlab.com/api/v4/projects/278964/issues/360336/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360336/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360336","relative":"#360336","full":"gitlab-org/gitlab#360336"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107112991,"iid":360318,"project_id":278964,"title":"Add feature tests for Zuora Simple Component integration","description":"The following discussion from !84342 should be addressed:\n\n- [ ] @mkaeppler started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84342#note_916175321):  (+3 comments)\n\n    \u003e A few questions about this:\n    \u003e \n    \u003e - This seems to be dealing with the Zuora integration. Is this specific to pipelines, or should this live in a shared concern instead that we can include in controllers? As a reader, it surprises me to see this here since on the surface it does not seem to have anything to do with how pipelines are served.","state":"closed","created_at":"2022-04-25T06:29:29.925Z","updated_at":"2022-06-03T10:19:03.073Z","closed_at":"2022-06-03T10:19:02.240Z","closed_by":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"labels":["Category:Purchase","Unplanned","backend","devops::fulfillment","group::purchase","missed:15.0","section::fulfillment","type::maintenance","workflow::production"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"}],"author":{"id":4713264,"username":"mkaeppler","name":"Matthias Käppler","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4713264/avatar.png","web_url":"https://gitlab.com/mkaeppler"},"type":"ISSUE","assignee":{"id":6348276,"username":"agulina","name":"Angelo Gulina","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b28693a558066993ea93b7272208d285?s=80\u0026d=identicon","web_url":"https://gitlab.com/agulina"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360318","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360318","notes":"https://gitlab.com/api/v4/projects/278964/issues/360318/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360318/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360318","relative":"#360318","full":"gitlab-org/gitlab#360318"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107038979,"iid":360273,"project_id":278964,"title":"Backend: Set low urgency as Apdex targets for remaining PE endpoints","description":"# Context\n\nWe need to set custom Apdex targets for Rails controller and REST API endpoints as part of the initiative to improve ~SaaS reliability: https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/1451. In https://gitlab.com/gitlab-org/gitlab/-/issues/344667, we set custom Apdex targets for CI jobs endpoints as a ~\"FY22::Q4\" ~OKR, and this issue covers the remaining ~\"group::pipeline execution\" endpoints.\n\nThe default SLI is 1 second. For now, this issue will set all the remaining endpoints for ~\"group::pipeline execution\" to `low` urgency (5 seconds) so that ~\"group::pipeline execution\" can opt-in to the new target durations that are further discussed in https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/1451.  In a future iteration, the team will review and adjust endpoints to more appropriate urgency levels in https://gitlab.com/gitlab-org/gitlab/-/issues/348554.\n\n# Technical details\n\nInstructions on setting custom Apdex targets: https://docs.gitlab.com/ee/development/application_slis/rails_request_apdex.html#how-to-adjust-the-urgency\n\n## Implementation table\n\n| Description | Link |  Milestone | Timeframe |\n| ------ | ------ | ------ | ------ |\n| Assign custom Apdex targets for CI jobs endpoints | https://gitlab.com/gitlab-org/gitlab/-/issues/344667 | %\"14.9\" | ~\"FY22::Q4\" |\n| **Set low urgency as Apdex targets for remaining PE endpoints** | :point_left: You are here | %\"15.0\"  | ~\"FY23::Q2\"  |\n| Remove ignored_components from PE error budget | https://gitlab.com/gitlab-org/gitlab/-/issues/348552 | %\"15.0\"  | ~\"FY23::Q2\"  |\n| Introduce Keyset pagination for `GET /api/:version/projects/:id/jobs` API endpoint | https://gitlab.com/gitlab-org/gitlab/-/issues/362172 | %\"15.5\" | ~\"FY23::Q3\" |\n| Backend: Improve performance of GraphqlController#execute | https://gitlab.com/gitlab-org/gitlab/-/issues/361377 | TBD | ~\"FY23::Q3\" |\n| Backend: Improve performance of PATCH /api/:version/jobs/:id/trace | https://gitlab.com/gitlab-org/gitlab/-/issues/353802 | TBD | ~\"FY23::Q3\" |\n| Assign custom Apdex targets for remaining PE endpoints | https://gitlab.com/gitlab-org/gitlab/-/issues/348554 | TBD | ~\"FY23::Q3\" |","state":"closed","created_at":"2022-04-22T15:47:57.502Z","updated_at":"2022-09-01T18:09:12.622Z","closed_at":"2022-05-04T19:23:34.919Z","closed_by":{"id":4626651,"username":"allison.browne","name":"Allison Browne","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4bc33904c3bd3f2dce3db4e5af4ad1ae?s=80\u0026d=identicon","web_url":"https://gitlab.com/allison.browne"},"labels":["Category:Continuous Integration","Deliverable","FY23::Q2","OKR","Verify::P3","[deprecated] Accepting merge requests","backend","devops::verify","group::pipeline execution","section::ops","type::maintenance","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[],"author":{"id":9468400,"username":"marknuzzo","name":"Mark Nuzzo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9468400/avatar.png","web_url":"https://gitlab.com/marknuzzo"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360273","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360273","notes":"https://gitlab.com/api/v4/projects/278964/issues/360273/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360273/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360273","relative":"#360273","full":"gitlab-org/gitlab#360273"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7968,"epic":{"id":511907,"iid":7968,"title":"Investigate PE error budget","url":"/groups/gitlab-org/-/epics/7968","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":107035710,"iid":360267,"project_id":278964,"title":"Cascading namespace settings for package forwarding","description":"\u003c!-- This issue template can be used as a great starting point for feature requests. The section \"Release notes\" can be used as a summary of the feature and is also required if you want to have your release post blog MR auto generated using the release post item generator:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator. The remaining sections are the backbone for every feature in GitLab.\n\nThe goal of this template is brevity for quick/smaller iterations. For a more thorough list of considerations for larger features or feature sets, you can leverage the detailed [feature proposal](https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md). --\u003e\n\n### Release notes\n\n\u003c!-- What is the problem and solution you're proposing? This content sets the overall vision for the feature and serves as the release notes that will populate in various places, including the [release post blog](https://about.gitlab.com/releases/categories/releases/) and [Gitlab project releases](https://gitlab.com/gitlab-org/gitlab/-/releases). \" --\u003e\n\n### Problem to solve\n\nUsers want to be able to have more control over their package forwarding settings, especially when the settings occur at different levels (instance, namespace, project). There should be rules about how settings are inherited and overwritten, and how changes can cascade down.\n\n### Proposal\n\nCurrently, we have instance-level settings to turn on and off package forwarding for PyPI and NPM, and soon to include [maven](https://gitlab.com/gitlab-org/gitlab/-/issues/233022). \n\nHere, we should implement namespace-level settings, starting with Maven with logic around cascading.\n\nThese settings should be accessible by maintainers and higher. \n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Ingrid (Infrastructure Operator)](https://about.gitlab.com/handbook/product/personas/#ingrid-infrastructure-operator)\n* [Dakota (Application Development Director)](https://about.gitlab.com/handbook/product/personas/#dakota-application-development-director)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\n### Feature Usage Metrics\n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n### Implementation notes\n\nFor the backend, we are starting with the maven package forwarding setting. This setting will likely live in `namespace_package_settings` or something similar. We need to:\n\n1. Add the new setting column and model\n1. Expose the new fields to existing `group` query API and\n1. a mutation to update package forward settings\n1. Add logic to traverse the parent namespaces when the direct namespace setting is not set. This logic should optimally live in a shared concern or module that can be reused by other package settings in the future.\n1. Once the setting and logic exists, https://gitlab.com/gitlab-org/gitlab/-/issues/233022 will be unblocked.\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2022-04-22T14:40:32.121Z","updated_at":"2022-11-14T21:30:48.047Z","closed_at":"2022-10-21T08:44:12.768Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Package Registry","Deliverable","GitLab Free","GitLab Premium","Package:P1","backend","devops::package","direction","documentation","feature::addition","group::package registry","missed-deliverable","missed:15.5","rails","section::ops","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"}],"author":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":49,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360267","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360267","notes":"https://gitlab.com/api/v4/projects/278964/issues/360267/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360267/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360267","relative":"#360267","full":"gitlab-org/gitlab#360267"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8067,"epic":{"id":522623,"iid":8067,"title":"Cascade package forward settings from admin area to group","url":"/groups/gitlab-org/-/epics/8067","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":107018389,"iid":360248,"project_id":278964,"title":"Remove vulnerability_report_pagination feature flag","description":"\u003c!-- Title suggestion: [Feature flag] Cleanup \u003cfeature-flag-name\u003e --\u003e\n\n## Summary\n\nThis issue is to cleanup the `vulnerability_report_pagination` feature flag, after the feature flag has been enabled by default for an appropriate amount of time in production.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::threat insights\" \n- Most appropriate slack channel to reach out to: `#g_secure_threat_insights`\n- Best individual to reach out to: @dftian \n- PM: @nmccorrison \n\n## Expectations\n\n### What might happen if this goes wrong?\n\nThe vulnerability report may not load and show the vulnerabilities.\n\n\u003c!-- Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### Cleaning up the feature flag\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `vulnerability_report_pagination` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e --staging`\n    - [x] `/chatops run feature delete \u003cfeature-flag-name\u003e`\n- [x] Close this rollout issue.","state":"closed","created_at":"2022-04-22T09:03:37.285Z","updated_at":"2022-05-30T14:28:01.660Z","closed_at":"2022-05-26T08:31:28.753Z","closed_by":{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"},"labels":["Category:Vulnerability Management","devops::secure","feature flag","feature::addition","group::threat insights","missed:15.0","section::sec","type::feature","workflow::verification"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"}],"author":{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"},"type":"ISSUE","assignee":{"id":4907528,"username":"dftian","name":"Daniel Tian","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5d7186a64c42708833291afd7749c7b5?s=80\u0026d=identicon","web_url":"https://gitlab.com/dftian"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360248","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":12},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"12 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360248","notes":"https://gitlab.com/api/v4/projects/278964/issues/360248/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360248/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360248","relative":"#360248","full":"gitlab-org/gitlab#360248"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":107008259,"iid":360235,"project_id":278964,"title":"Duplicated text in Title on New work item page","description":"To reproduce:\n\n1. Load Create work item page http://gdk.test:3000/grandchld/aaf/-/work_items/new\n2. Click in Title field\n3. Start typing\n\nAlso related -- https://gitlab.com/gitlab-org/gitlab/-/issues/360834","state":"closed","created_at":"2022-04-22T05:42:56.831Z","updated_at":"2022-05-13T14:05:31.029Z","closed_at":"2022-05-04T04:12:59.867Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Category:Team Planning","devops::plan","frontend","group::project management","priority::2","section::dev","severity::3","type::bug","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"}],"author":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"type":"ISSUE","assignee":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360235","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360235","notes":"https://gitlab.com/api/v4/projects/278964/issues/360235/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360235/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360235","relative":"#360235","full":"gitlab-org/gitlab#360235"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7083,"epic":{"id":381451,"iid":7083,"title":"🚀   Open Tasks in Issues to view and manage Title","url":"/groups/gitlab-org/-/epics/7083","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106992219,"iid":360211,"project_id":278964,"title":"Some package stage endpoints are miscategorized","description":"## :fire: Problem\n\nIn https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85550 we noticed there are some container registry and dependency proxy endpoints that are categorized as `feature_category :package_registry`. This may be effecting each category's metrics.\n\nThese include:\n\n- [x] `app/controllers/groups/registry/repositories_controller.rb`\n- [x] `app/controllers/groups/dependency_proxies_controller.rb`\n- [x] `lib/api/container_registry_event.rb`\n- [x] `lib/api/group_container_repositories.rb`\n- [x] `lib/api/group_container_repositories.rb`\n\n## :fire_engine: Solution\n\nUpdate the endpoints to `feature_category :container_registry`. We need to be sure we understand if this will cause any problems or unexpected side-effects in our metrics before making the update.","state":"closed","created_at":"2022-04-21T19:40:02.562Z","updated_at":"2022-04-26T23:56:26.685Z","closed_at":"2022-04-26T23:56:26.667Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Container Registry","Category:Dependency Proxy","Category:Package Registry","backend","devops::package","group::package registry","maintenance::workflow","ruby","section::ops","type::maintenance","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"}],"author":{"id":4059254,"username":"sabrams","name":"Steve Abrams","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cac831f7b515c191dfba32c54f01c375?s=80\u0026d=identicon","web_url":"https://gitlab.com/sabrams"},"type":"ISSUE","assignee":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360211","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360211","notes":"https://gitlab.com/api/v4/projects/278964/issues/360211/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360211/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360211","relative":"#360211","full":"gitlab-org/gitlab#360211"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106974408,"iid":360168,"project_id":278964,"title":"Investigate and fix flaky VSA spec in `filters_and_data_spec.rb`","description":"Some of the VSA integration tests are randomly failing at specific times. To avoid development disruption, we've decided to quarantine these test cases and create a follow-up issue.\n\nRelated broken master issue: https://gitlab.com/gitlab-org/gitlab/-/issues/356743\n\nThe flakiness is quite difficult to reproduce, a few ideas:\n\n- Set a different timezone when running the tests, for example: `TZ='Asia/Shanghai'; export TZ`\n- Set a different time when running the tests\n- Rewrite the test case to use explicit dates: create records on a fixed date and use the date range filter in VSA\n\nUPDATE: \n\nSo far I wasn't able to reproduce the bug, and the actual feature changed over time when spec was quarantined. So I've updated the spec and removed it from quarantine so we can get fresh data if it still fails.\n\nIF THERE WILL BE NEW OCCURRENCES PLEASE POST A LINK TO FAILED JOB. Then return the context `'with value streams'` back to quarantine please.","state":"closed","created_at":"2022-04-21T14:05:38.874Z","updated_at":"2022-07-18T10:09:53.389Z","closed_at":"2022-07-18T10:09:53.307Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["Stretch","auto updated","backend","devops::manage","group::optimize","missed:15.1","priority::2","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360168","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360168","notes":"https://gitlab.com/api/v4/projects/278964/issues/360168/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360168/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360168","relative":"#360168","full":"gitlab-org/gitlab#360168"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106970702,"iid":360163,"project_id":278964,"title":"Regression error in calculate reactive cache of Environment model","description":"We merged https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85105/diffs to fix https://gitlab.com/gitlab-org/gitlab/-/issues/350729 .\n\nBut [`error.error_code`](https://gitlab.com/gitlab-org/gitlab/-/blob/88256e2a70ee6cafea8b89ca24b701dfac3465bf/app/models/clusters/platforms/kubernetes.rb#L325) is not available for `Gitlab::UrlBlocker::BlockedUrlError`.\n\nErrors noticed in logs: https://log.gprd.gitlab.net/goto/afd212b0-c174-11ec-afaf-2bca15dfbf33\n\n##### Proposal:\n\nEscape the unavailable error method with `try`.\n\n```ruby\nerror.try(:error_code)\n```","state":"closed","created_at":"2022-04-21T13:11:34.720Z","updated_at":"2022-04-28T16:27:09.443Z","closed_at":"2022-04-28T16:27:09.405Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["Category:Environment Management","devops::release","group::release","priority::3","regression","regression:14.10","section::ops","severity::3","type::bug","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360163","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360163","notes":"https://gitlab.com/api/v4/projects/278964/issues/360163/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360163/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360163","relative":"#360163","full":"gitlab-org/gitlab#360163"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106970539,"iid":360162,"project_id":278964,"title":"Create new label button: fix focus","description":"## What does this MR do and why?\n\nFix focus outline.\n\n## Screenshots or screen recordings \n\n| Before | After |\n| ------ | ------ |\n| ![before](/uploads/d7b94a0fb719498dcfdb9237df208e8a/before.png) | ![after](/uploads/8488b78d9a7630fc0a334a4ecc18ddef/after.png) |\n\n## How to set up and validate locally \n1. navigate to an issue/MR\n2. in the sidebar, edit `Labels`\n3. Click on `Create project label`\n4. Fill in the label and choose a color\n\n## MR acceptance checklist\n\nThis checklist encourages us to confirm any changes have been analyzed to reduce risks in quality, performance, reliability, security, and maintainability. \n\n* [x] I have evaluated the [MR acceptance checklist](https://docs.gitlab.com/ee/development/code_review.html#acceptance-checklist) for this MR.","state":"closed","created_at":"2022-04-21T13:08:21.743Z","updated_at":"2022-05-25T14:43:49.473Z","closed_at":"2022-05-24T09:07:05.785Z","closed_by":{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"},"labels":["SUS::Impacting","UI polish","auto updated","devops::manage","group::compliance","priority::4","section::dev","severity::4"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"}],"author":{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"},"type":"ISSUE","assignee":{"id":10822627,"username":"seggenberger","name":"Sascha Eggenberger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822627/avatar.png","web_url":"https://gitlab.com/seggenberger"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360162","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360162","notes":"https://gitlab.com/api/v4/projects/278964/issues/360162/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360162/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360162","relative":"#360162","full":"gitlab-org/gitlab#360162"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106965484,"iid":360149,"project_id":278964,"title":"Make GroupDeployKeys fingerprint nullable","description":"### Problem\n\nFIPS-enforcing environments don't support MD5 algorithm. Our plan is to deprecate MD5 fingerprints in the future.\n\nTable `group_deploy_keys` [was created from table ](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/30886)`keys`. But there is a difference between them. `group_deploy_keys` requires MD5 fingerprint value presence but `keys` table does not.\n\n### Proposal\n\nAdd support for NULL values to `fingerprint` field from \\`group_deploy_keys. It should not have any effect at the moment but will simplify future steps of MD5 deprecation process.","state":"closed","created_at":"2022-04-21T11:40:10.976Z","updated_at":"2022-04-25T09:11:05.683Z","closed_at":"2022-04-25T09:11:05.658Z","closed_by":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"labels":["Category:Source Code Management","FIPS","backend","devops::create","group::source code","section::dev","type::feature","workflow::in review"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360149","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360149","notes":"https://gitlab.com/api/v4/projects/278964/issues/360149/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360149/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360149","relative":"#360149","full":"gitlab-org/gitlab#360149"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6476,"epic":{"id":316337,"iid":6476,"title":"Source Code BE FIPS Compliance","url":"/groups/gitlab-org/-/epics/6476","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106964876,"iid":360148,"project_id":278964,"title":"PoC for understanding uniqueness constraints across partitions","description":"## Description\n\n\nFor `ci_builds` we have a 1 unique index that prevent inserting jobs with duplicate tokens:\n\n```\n    \"index_ci_builds_on_token_encrypted\" UNIQUE, btree (token_encrypted) WHERE token_encrypted IS NOT NULL\n```\n\nWe need to understand how these indexes would work with multiple partitions because we use the token to uniquely identify a job.\n\n### Unique constraints identified\n\n| table | unique index | need to be fix for partitioning |\n| ------ | ------ | ----- |\n| `ci_builds` | `index_ci_builds_on_token_encrypted` | :white_check_mark: |\n| `ci_builds_metadata` | `index_ci_builds_metadata_on_build_id` | :x:  |\n| `ci_job_artifacts` | `index_ci_job_artifacts_on_job_id_and_file_type` | :x: |\n| `ci_pipeline_variables` | `index_ci_pipeline_variables_on_pipeline_id_and_key` | :x: |\n| `ci_stages` | `index_ci_stages_on_pipeline_id_and_name` | :x: |\n\n\n## Objectives\n\nCheck if inserting resources scans all partitions and how it's affecting the performance.","state":"closed","created_at":"2022-04-21T11:28:31.009Z","updated_at":"2023-01-10T15:52:51.073Z","closed_at":"2022-08-25T13:19:49.120Z","closed_by":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"labels":["CI data partitioning","FY23::Q3","OKR","backend","ci::scaling","devops::verify","group::pipeline execution","missed:15.3","section::ops","type::maintenance","workflow::ready for development"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":21,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360148","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360148","notes":"https://gitlab.com/api/v4/projects/278964/issues/360148/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360148/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360148","relative":"#360148","full":"gitlab-org/gitlab#360148"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5417,"epic":{"id":206291,"iid":5417,"title":"Partition CI/CD pipelines data","url":"/groups/gitlab-org/-/epics/5417","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":106947016,"iid":360111,"project_id":278964,"title":"Frontend: Add a feature discovery popover to the pipeline editor file tree when a CI file in the project exists","description":"## Problem\n\nIn https://gitlab.com/groups/gitlab-org/-/epics/7064 we're adding a pipeline editor file tree MVC feature. The file tree will be collapsed by default, and we need to add a prompt to surface it to the users who have a CI file already.\n\n## Proposal\n\nWhen a project has a .gitlab-ci.yml file, when the file tree feature is released show a **permanently dismissable** feature discovery popover to promote the new feature. When the user navigates to the pipeline editor page after the feature release and they have a .gitlab-ci.yml file already (an indicator they're not as concerned with CI onboarding), we'll show the popover. The popover can be dismissed by clicking on \"Got it\" button, or by clicking/ focusing outside of the popover.\n\nFor detailed guidelines on the popover component usage see [Pajamas: Popover.](https://design.gitlab.com/components/popover)\n\nFor more context on the implementation see [this thread.](https://gitlab.com/gitlab-org/gitlab/-/issues/339469/designs/design_1648699519279.png)\n\n|  | \n| ------ | \n| ![image](/uploads/1b4d711e5641884732a73727b938d6f4/image.png) |\n\n## Implementation\n\nThe breakdown for this feature is as follows:\n\n| Work Type | Description | Issue Link |\n| ------ | ------ |  ------ |\n| ~backend | Expose includes link |  https://gitlab.com/gitlab-org/gitlab/-/issues/344937 |\n| ~frontend  | Change the pipeline editor fixed layout to full-width | https://gitlab.com/gitlab-org/gitlab/-/issues/346331 |\n| ~frontend  | Introduce the feature flag and the empty drawer.** | https://gitlab.com/gitlab-org/gitlab/-/issues/350721 |\n| ~frontend  | Pass down the content to the drawer and format it properly | https://gitlab.com/gitlab-org/gitlab/-/issues/350722  |\n| ~frontend  | Remember the open/closed state in local storage | https://gitlab.com/gitlab-org/gitlab/-/issues/350723 |\n| ~frontend | **Add feature discovery popover** | :point_left: You are here |\n| ~frontend  | Roll out feature flag | https://gitlab.com/gitlab-org/gitlab/-/issues/357219 |\n| ~backend | Backend: Add toggle flag to UserCalloutFeatureNameEnum to allow for popover dismissal | https://gitlab.com/gitlab-org/gitlab/-/issues/365347 | \n| ~frontend | Store the pipeline editor popovers state in the database | https://gitlab.com/gitlab-org/gitlab/-/issues/360635 |\n| ~backend | Add messaging when files can't be fetched due to invalid CI configuration | https://gitlab.com/gitlab-org/gitlab/-/issues/360431 |","state":"closed","created_at":"2022-04-21T06:08:00.449Z","updated_at":"2022-06-15T14:09:37.775Z","closed_at":"2022-05-16T03:31:51.895Z","closed_by":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"labels":["Category:Pipeline Authoring","UX","auto updated","devops::verify","feature::enhancement","frontend","group::pipeline authoring","section::ops","type::feature","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"}],"author":{"id":4706959,"username":"nadia_sotnikova","name":"Nadia Sotnikova","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4706959/avatar.png","web_url":"https://gitlab.com/nadia_sotnikova"},"type":"ISSUE","assignee":{"id":7598233,"username":"mgandres","name":"Mireya Andres","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c96bce45a06f2dd722144db3f52456bf?s=80\u0026d=identicon","web_url":"https://gitlab.com/mgandres"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360111","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360111","notes":"https://gitlab.com/api/v4/projects/278964/issues/360111/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360111/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360111","relative":"#360111","full":"gitlab-org/gitlab#360111"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7064,"epic":{"id":380739,"iid":7064,"title":"Add `include:` file links to the pipeline editor","url":"/groups/gitlab-org/-/epics/7064","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":{"id":50314,"iid":63,"sequence":16,"group_id":9970,"title":"Iteration 16","description":"Target milestone `15.1`","state":3,"created_at":"2022-03-06T00:05:02.043Z","updated_at":"2022-05-30T00:05:02.370Z","start_date":"2022-05-16","due_date":"2022-05-29","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/50314"},"health_status":null},{"id":106939673,"iid":360026,"project_id":278964,"title":"Bump major version of Container Scanning analyzer","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nAll the [pinned analyzer versions have been deprecated](https://docs.gitlab.com/ee/update/deprecations#secure-and-protect-analyzer-major-version-update).\n\nThis means we need to:\n1. bump the major version on the CS analyzer in %15.0.\n1. maintain a pipeline for the current major version for at least 2 years to:\n   1. Keep updating the advisory database in the images; and\n   1. Be able to release updates should we need to backport fixes\n\n~~In scope for this issue are items 1 and 1.1 above. Item 1.2 can be done when and if we need to backport anything to the previous version.~~ Ended-up doing all items, so this ended-up being more like a weight:3 instead of the original 2.\n\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\nAs per the [notice](https://docs.gitlab.com/ee/update/deprecations#secure-and-protect-analyzer-major-version-update):\n\n\u003e Users of GitLab 12.0-14.10 will continue to experience analyzer updates as normal until the release of GitLab 15.0, following which all newly fixed bugs and newly released features in the new major versions of the analyzers will not be available in the deprecated versions because we do not backport bugs and new features as per our maintenance policy. \n\u003e\n\u003e As required security patches will be backported within the latest 3 minor releases. \n\nAlso, per our [statement of support](https://about.gitlab.com/support/statement-of-support/#version-support):\n\n\u003e Unless otherwise specified in your support contract, we support the current major version and previous two major versions only\n\n\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n  - [x] Image versions and examples in https://docs.gitlab.com/ee/user/application_security/container_scanning/\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\n- [x] Bump the analyzer version to `5.0.0`.\n- [x] Update the [CI template](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml) to use `CS_ANALYZER_IMAGE: registry.gitlab.com/security-products/container-scanning:5`\n- [x] Create a `v4.x` branch with the same protections as the default branch. This will be used in the future when we need to backport changes to v4.\n- [x] Add or update the schedule that triggers DB updates to include all major versions listed in `TRIGGER_DB_UPDATE_FOR_MAJOR_VERSIONS`.\n\n\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\n## Verification steps\n\u003c!--\nAdd verification steps to help GitLab team members test the implementation. This is particularly useful\nduring the MR review and the ~\"workflow::verification\" step. You may not know exactly what the\nverification steps should be during issue refinement, so you can always come back later to add\nthem.\n\n1. Check-out the corresponding branch\n1. ...\n1. Profit!\n--\u003e","state":"closed","created_at":"2022-04-21T01:09:49.179Z","updated_at":"2022-05-23T11:42:16.809Z","closed_at":"2022-05-17T04:11:24.517Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Container Scanning","automation:ml","automation:ml wrong","backend","devops::secure","group::security policies","section::sec","type::feature","workflow::verification"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360026","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":5},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360026","notes":"https://gitlab.com/api/v4/projects/278964/issues/360026/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360026/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360026","relative":"#360026","full":"gitlab-org/gitlab#360026"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106937298,"iid":360011,"project_id":278964,"title":"Eng: Enable Invite modal to handle multiple errors at once","description":"## Context \n\nAs a follow-on to the [release of the invite modal to SaaS and SM in 14.8](https://gitlab.com/gitlab-org/gitlab/-/issues/247208#note_826827946), we have a series of UX-related updates pertaining to how the modal handles error messaging and in particular, multiple error messages at once. This issue will include the development work to resolve the handling of multiple error messages at once in the invite modal.\n\n## Problems \n\n1) The current invite modal can't handle multiple error messages at once. Single or multiple emails added may trigger multiple errors and we need to clearly communicate what infractions are causing each error for each email. \n2) The current error message to inform the inviter that the member has already been added needs improvement. See https://gitlab.com/gitlab-org/gitlab/-/issues/334280#note_706373370 for context\n\n\n## Proposed Solution\n\n- Add in an alert that explains what went wrong with the errored emails, as well as change the colours of the user pills to show which succeeded and which did not. \n- This alert supersedes all other alerts.\n\n| Error Message | Error Message Expanded |\n| ------ | ------ |\n| ![Screen_Shot_2022-04-13_at_2.06.56_PM](/uploads/455b23e7b217c24548c84dfa4d4b49f4/Screen_Shot_2022-04-13_at_2.06.56_PM.png) | ![Screen_Shot_2022-04-13_at_2.07.07_PM](/uploads/1b2bab183679d4addb84e233c83b1fd6/Screen_Shot_2022-04-13_at_2.07.07_PM.png) |\n\n#### [Design File](https://www.figma.com/file/9i4TvqFygXOBJf8QGOBaoN/UX%3A-Enable-Invite-modal-to-handle-multiple-errors-at-once?node-id=14%3A14729)","state":"closed","created_at":"2022-04-20T22:51:22.185Z","updated_at":"2022-08-15T18:57:20.723Z","closed_at":"2022-08-15T18:57:20.673Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["devops::growth","group::acquisition","section::growth","type::feature","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":9347704,"username":"gdoud","name":"Gayle Doud","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9347704/avatar.png","web_url":"https://gitlab.com/gdoud"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360011","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360011","notes":"https://gitlab.com/api/v4/projects/278964/issues/360011/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360011/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360011","relative":"#360011","full":"gitlab-org/gitlab#360011"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106937109,"iid":360010,"project_id":278964,"title":"Gitlab::Git::Conflict::Parser::UnmergeableFile: Gitlab::Git::Conflict::Parser::UnmergeableFile","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/3268768/?referrer=gitlab_plugin\n\n```\nGitlab::Git::Conflict::Parser::UnmergeableFile: Gitlab::Git::Conflict::Parser::UnmergeableFile\n  lib/gitlab/git/conflict/parser.rb:78:in `validate_text!'\n    raise UnmergeableFile if text.length \u003e 200.kilobytes\n  lib/gitlab/git/conflict/parser.rb:18:in `parse'\n    validate_text!(text)\n  lib/gitlab/git/conflict/file.rb:28:in `lines'\n    @lines = Gitlab::Git::Conflict::Parser.parse(content,\n  lib/gitlab/conflict/file.rb:37:in `lines'\n    @lines = raw.lines.nil? ? nil : map_raw_lines(raw.lines)\n  lib/gitlab/conflict/file.rb:96:in `sections'\n    chunked_lines = lines.chunk { |line| line.type.nil? }.to_a\n...\n(201 additional frame(s) were not displayed)\n```","state":"closed","created_at":"2022-04-20T22:39:32.469Z","updated_at":"2022-08-10T16:23:33.885Z","closed_at":"2022-06-02T01:50:25.206Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Deliverable","backend","devops::create","direction","group::code review","priority::2","section::dev","severity::3","type::bug"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360010","notes":"https://gitlab.com/api/v4/projects/278964/issues/360010/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360010/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360010","relative":"#360010","full":"gitlab-org/gitlab#360010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4893,"epic":{"id":142729,"iid":4893,"title":"Merge conflicts in diffs","url":"/groups/gitlab-org/-/epics/4893","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":106935701,"iid":360008,"project_id":278964,"title":"API Support for Immediate Group Deletion","description":"## Release Notes\n\nTBD\n\n## Problem to Solve\n\nUsers can mark an individual group for immediate deletion via group settings in the UI, but this option is currently not supported via API.\n\nOne use case that this poses a problem for is for QA tests and test data cleanup. Our cleanup scripts currently make use of `DELETE /groups/:id`, but this only “soft” deletes a group and marks it pending for deletion. \n\nWe are then left with large amounts of groups still left over and affecting the performance of our test suite (for example, see `gitlab-qa-sandbox-group` in production, which now has over 6,000 subgroups).  \n- This can cause instability and intermittent failures due to query timeouts, such as https://gitlab.com/gitlab-org/gitlab/-/issues/358213+. \n- It is also not a realistic representation of a group hierarchy size we would find for our customers in production (see this [comment](https://gitlab.com/gitlab-org/gitlab/-/issues/27758#note_876304183) as an example of what the distribution of hierarchy sizes in production looks like).\n\nThere have been efforts in the past to create a Sidekiq cron job for immediately deleting QA groups, but that had its own risks involved and ultimately had to be [reverted](https://gitlab.com/gitlab-org/quality/team-tasks/-/issues/1208#note_895848313).\n\n## Proposal\n\nSupport the option to immediately remove a subgroup via API\n- Please add this feature behind a feature flag\n- Pass an optional parameter to `DELETE /groups/:id`, such as `permanently_remove`, that when set to `true`, will remove the subgroup immediately only if already previously marked for deletion\n  - This parameter should be coupled with an additional, required parameter `full_path` that accepts the subgroup's full path (which includes its parent group(s), ex: `parent-group/subgroup`), similar to the confirmation that is required on the UI.\n- Request should fail if user authorized has a role lower than Owner\n- Only subgroups should be allowed to be permanently deleted with this feature. Top-level groups should continue to only be immediately deleted via the UI due to their significance, as they often represent an entire instance for our enterprise customers\n\n(See https://docs.gitlab.com/ee/user/group/#remove-a-group-immediately)\n\n## Notes\n- Feature flag:\n  - Name: immediate_delete_subgroup_api\n  - Default value: false\n  - Will be enabled on top level group.\n  - Introduced in MR: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/92508\n\n#### Tier\n\n~\"GitLab Premium\"","state":"closed","created_at":"2022-04-20T21:45:19.652Z","updated_at":"2022-11-03T20:23:37.032Z","closed_at":"2022-09-20T12:13:07.530Z","closed_by":{"id":11648098,"username":"hraghuvanshi","name":"Hitesh Raghuvanshi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648098/avatar.png","web_url":"https://gitlab.com/hraghuvanshi"},"labels":["Category:User Management","Deliverable","GitLab Premium","UX","backend","devops::manage","documentation","feature::addition","group::organization","onboarding","quad-planning::complete-action","release post item::in review","section::dev","type::feature","workflow::verification"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":11648098,"username":"hraghuvanshi","name":"Hitesh Raghuvanshi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648098/avatar.png","web_url":"https://gitlab.com/hraghuvanshi"}],"author":{"id":10375381,"username":"vburton","name":"Valerie Burton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10375381/avatar.png","web_url":"https://gitlab.com/vburton"},"type":"ISSUE","assignee":{"id":11648098,"username":"hraghuvanshi","name":"Hitesh Raghuvanshi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648098/avatar.png","web_url":"https://gitlab.com/hraghuvanshi"},"user_notes_count":71,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360008","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360008","notes":"https://gitlab.com/api/v4/projects/278964/issues/360008/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360008/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360008","relative":"#360008","full":"gitlab-org/gitlab#360008"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106934381,"iid":360006,"project_id":278964,"title":"Fix mixed button classes","description":"The \"Create confidential merge request\" button has both the `btn-confirm` and `btn-warning` resulting in a blue button with orange border. Only `btn-confirm` should be used so that the entire button is blue. `btn-warning` has been deprecated.\n\n![CleanShot_2022-04-20_at_12.57.41_2x](/uploads/4126fc61b6bc22b98d44768d1c18148f/CleanShot_2022-04-20_at_12.57.41_2x.png)\n\n| **Before** | **After** |\n| ------ | ------ |\n| ![CleanShot_2022-04-20_at_12.57.00](/uploads/a3a252748b54182c6390eabebcdd8ba8/CleanShot_2022-04-20_at_12.57.00.gif) | - |","state":"closed","created_at":"2022-04-20T21:01:43.978Z","updated_at":"2022-11-22T18:44:05.644Z","closed_at":"2022-08-04T12:50:12.987Z","closed_by":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"labels":["Category:Design System","SUS::Impacting","UI polish","auto updated","component:button","devops::manage","group::foundations","missed:15.0","missed:15.1","section::dev","severity::4"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"}],"author":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"type":"ISSUE","assignee":{"id":4017299,"username":"jeldergl","name":"Jeremy Elder","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017299/avatar.png","web_url":"https://gitlab.com/jeldergl"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/360006","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/360006","notes":"https://gitlab.com/api/v4/projects/278964/issues/360006/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/360006/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#360006","relative":"#360006","full":"gitlab-org/gitlab#360006"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106924378,"iid":359989,"project_id":278964,"title":"Hide secret tokens in webhook settings form","description":"## Background\n\nFollow-up from https://gitlab.com/gitlab-org/gitlab/-/issues/336154#note_916513332\n\n\u003e We have a `url` and `token` field there, which are encrypted in the DB but shown as clear-text fields in the UI.\n\n![image](/uploads/9ac6903d008b9e55fa812794f0763005/image.png)\n\n## Proposal\n\nUse `type=\"password\"` for the `Secret token` field input. We also have to make sure that the values are not exposed to the ~frontend, and blank values are correctly handled by the ~backend (keeping the current value).\n\nWe also might need some additional UX (alternative labels/help texts, dummy placeholder) like we have on the integration forms, \n\nThe URL is also shown in other places (e.g. the list of webhooks), so it would be trickier to hide that. Also see https://gitlab.com/gitlab-org/gitlab/-/issues/218389 for that.\n\n### Availability \u0026 Testing\n\nSuggestions:\n* Run `package-and-qa` on the MR\n* Add feature test around WebHook secrets\n  * Secret field should be a type=\"password\"\n  * `document.querySelector(\u003csecretfield\u003e).value` should not contain secret\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the Quality Engineering quad planning and test planning processes and reach out to your counterpart Software Engineer in Test for assistance. \nQuad Planning: https://about.gitlab.com/handbook/engineering/quality/quality-engineering/quad-planning \nTest Planning: https://about.gitlab.com/handbook/engineering/quality/quality-engineering/test-engineering/#test-planning --\u003e","state":"closed","created_at":"2022-04-20T16:53:45.064Z","updated_at":"2022-11-30T18:37:57.785Z","closed_at":"2022-10-31T15:46:12.208Z","closed_by":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"labels":["Category:Integrations","Category:Webhooks","Stretch","devops::manage","feature::enhancement","frontend","group::integrations","quad-planning::complete-action","section::dev","security","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":4704683,"username":"justin_ho","name":"Justin Ho Tuan Duong","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4704683/avatar.png","web_url":"https://gitlab.com/justin_ho"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359989","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359989","notes":"https://gitlab.com/api/v4/projects/278964/issues/359989/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359989/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359989","relative":"#359989","full":"gitlab-org/gitlab#359989"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7970,"epic":{"id":512048,"iid":7970,"title":"Encrypt and mask sensitive data in webhook URLs","url":"/groups/gitlab-org/-/epics/7970","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106919250,"iid":359975,"project_id":278964,"title":"Geo: Update the help icon for a consistency","description":"## Problems to solve\n\nWhile talking to @zcuddy, Zack pointed out inconsistencies in the help icon in Geo UI.\n\nCurrently, we are using the filled icon. We need to update it with the `$blue-600` color with the lined version.\n\n## Reference\n\nhttps://design.gitlab.com/usability/helping-users#help-icon","state":"closed","created_at":"2022-04-20T15:13:49.063Z","updated_at":"2022-05-03T15:57:37.346Z","closed_at":"2022-05-02T13:38:11.964Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["SUS::Impacting","UI polish","UX","auto updated","devops::systems","frontend","group::geo","maintenance::usability","section::enablement","severity::4","type::maintenance","workflow::in review"],"milestone":null,"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4903414,"username":"sunjungp","name":"Sunjung Park","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a2c072c26031ffd81b676b43eeb7b781?s=80\u0026d=identicon","web_url":"https://gitlab.com/sunjungp"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359975","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359975","notes":"https://gitlab.com/api/v4/projects/278964/issues/359975/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359975/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359975","relative":"#359975","full":"gitlab-org/gitlab#359975"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6042,"epic":{"id":274361,"iid":6042,"title":"Geo Status Page Improvements","url":"/groups/gitlab-org/-/epics/6042","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106914197,"iid":359972,"project_id":278964,"title":"SPIKE: Cache group domains on Pages Internal API","description":"## Problem \n\nCache group domains, the cache key would be just a group domain name, and we would invalidate it on:\n\n1. any project path changes within a group (adding new projects, removing them, archiving, moving, renaming, creating/removing/renaming subgroups...).\n1. any deployment event.\n\nWe actually used to do that before we introduced the new architecture. We stored pages on disk using project path, and every time that path was changing we moved directory on disk\n\nWe can try to restore some fo this code. See https://gitlab.com/groups/gitlab-org/-/epics/1316, https://gitlab.com/groups/gitlab-org/-/epics/4851, e.g https://gitlab.com/gitlab-org/gitlab/-/merge_requests/53363/diffs,\n\nWe had class called `Gitlab::PagesTransfer`, so we can take a year or two old code, see where this class(+deploy/remove pages workers) were used, and invalidate cache in these places.\n\nBut this is would not be super easy. I would also:\n\n1. guard this with feature flags\n1. use https://docs.gitlab.com/ee/development/event_store.html instead of injecting code directly into related services.\n\nBased on: https://gitlab.com/gitlab-org/gitlab/-/issues/357199#note_912199225","state":"closed","created_at":"2022-04-20T14:14:34.003Z","updated_at":"2022-06-23T11:25:24.597Z","closed_at":"2022-05-31T13:50:56.556Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Pages","Error Budget Improvement","auto updated","backend","devops::create","group::editor","missed:15.0","quad-planning::complete-no-action","section::dev","spike","type::maintenance","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359972","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359972","notes":"https://gitlab.com/api/v4/projects/278964/issues/359972/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359972/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359972","relative":"#359972","full":"gitlab-org/gitlab#359972"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7920,"epic":{"id":503228,"iid":7920,"title":"Pages Internal API Caching","url":"/groups/gitlab-org/-/epics/7920","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":106886047,"iid":359945,"project_id":278964,"title":"Fix broken GraphQL sorting when search is present","description":"### Problem\n\nDue to the custom `CASE` ordering, `search` and pagination crashes after the first page for Member/User related GraphQL queries.\n\nFor example, this works:\n\n```graphql\n{\n  group(fullPath:\"gitlab-org\") {\n    groupMembers(search: \"in\", first: 5){\n      nodes {\n        id\n        user {\n          name\n        }\n      }\n      pageInfo {\n        hasNextPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n}\n```\n\nCopy the `endCursor` and run a query for the second page:\n\n```graphql\n{\n  group(fullPath:\"gitlab-org\") {\n    groupMembers(search: \"in\", first: 5, after: \"eyJpZCI6IjU2NTc5NDAwIiwibmFtZSI6IiJ9\"){\n      nodes {\n        id\n        user {\n          name\n        }\n      }\n      pageInfo {\n        hasNextPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n}\n```\n\nAs the response, we get the following:\n\n```json\n{\n  \"errors\": [\n    {\n      \"message\": \"Internal server error\"\n    }\n  ]\n}\n```\n\n### Fix\n\nThe query uses the old GraphQL keyset pagination code, which does not work well for joined (`users` is joined) relations and multi-column sorting. Migration to the new keyset pagination library would solve the problem.\n\nHow: Turn the `ORDER BY` query generation in the [`User` model](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/models/user.rb#L666) to be compatible with the new keyset pagination library.\n\nA few examples:\n\n- https://docs.gitlab.com/ee/development/database/keyset_pagination.html#complex-order-configuration\n- https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/models/ee/vulnerability.rb#L294","state":"closed","created_at":"2022-04-20T07:58:24.887Z","updated_at":"2022-07-15T07:32:50.008Z","closed_at":"2022-07-15T07:32:49.969Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Category:API","GraphQL","bug::availability","devops::manage","group::optimize","section::dev","type::bug","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359945","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359945","notes":"https://gitlab.com/api/v4/projects/278964/issues/359945/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359945/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359945","relative":"#359945","full":"gitlab-org/gitlab#359945"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106883754,"iid":359942,"project_id":278964,"title":"Remove enforce_pat/ssh_expiration from application_settings table","description":"## Overview\n\nAs part of the process of removing the ability to [unenforce PAT expiration](https://gitlab.com/gitlab-org/gitlab/-/issues/351962) we need to drop the `enforce_pat_expiration` column from the `application_settings` table.\n\nWe should also drop the column for `enforce_ssh_expiration` too.\n\n## Proposal\n\n* The column will be ignored in %15.0 in [this MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85399). \n* In %15.1, we need to drop the column as per the process in the [migration style guide](https://docs.gitlab.com/ee/development/database/avoiding_downtime_in_migrations.html#step-3-removing-the-ignore-rule-release-m2).","state":"closed","created_at":"2022-04-20T07:28:16.954Z","updated_at":"2022-12-06T02:25:53.806Z","closed_at":"2022-07-26T07:20:14.783Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["backend","database","devops::manage","group::compliance","missed:15.1","priority::3","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359942","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359942","notes":"https://gitlab.com/api/v4/projects/278964/issues/359942/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359942/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359942","relative":"#359942","full":"gitlab-org/gitlab#359942"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":106872672,"iid":359925,"project_id":278964,"title":"Git.version metric value generated inconsistently which causes bug in Version app","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\n### Steps to reproduce\n\n```ruby\n[16] pry(main)\u003e payload = Gitlab::Usage::ServicePingReport.for(output: :all_metrics_values)\n[17] pry(main)\u003e payload[:git].to_json\n=\u003e \"{\\\"version\\\":{\\\"major\\\":2,\\\"minor\\\":35,\\\"patch\\\":1}}\"\n[18] pry(main)\u003e Gitlab::Json.pretty_generate(payload[:git])\n=\u003e \"{\\n  \\\"version\\\": \\\"2.35.1\\\"\\n}\"\n```\n\n`git.version` metric can be a string or an object, depending on the way ServicePing was generated.\n\nGenerated using SubmitService https://gitlab.com/gitlab-org/gitlab/blob/master/app/services/service_ping/submit_service.rb#L66\n\nGenerated using Pretty json\nhttps://gitlab.com/gitlab-org/gitlab/blob/master/lib/tasks/gitlab/usage_data.rake#L12\n\nVersion app cannot properly parse the metric with string value, raises `NoMethod: fetch for string` exception.\n\n\n\n### Possible fixes\n\nMake sure we always generate object by calling `.to_json` method","state":"closed","created_at":"2022-04-20T02:02:36.460Z","updated_at":"2022-07-20T23:13:52.822Z","closed_at":"2022-07-20T23:13:52.806Z","closed_by":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"labels":["automation:ml","backend","devops::analytics","group::product intelligence","priority::3","product intelligence","section::analytics","severity::3","type::bug","workflow::in review"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"}],"author":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"type":"ISSUE","assignee":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359925","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359925","notes":"https://gitlab.com/api/v4/projects/278964/issues/359925/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359925/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359925","relative":"#359925","full":"gitlab-org/gitlab#359925"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106866110,"iid":359918,"project_id":278964,"title":"Optimize N+1 queries for environment detail page","description":"The following discussion from !85414 should be addressed:\n\n- [ ] @ali-gitlab started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85414#note_917389787): \n\n    \u003e Looks like the environment detail page has an N+1 query problem (screenshot from my GDK):\n    \u003e \n    \u003e ![Screen_Shot_2022-04-19_at_5.58.03_PM](/uploads/4b785cfc878183dac1c0dbea069c3cd4/Screen_Shot_2022-04-19_at_5.58.03_PM.png)\n    \u003e \n    \u003e A live example can be found here: https://gitlab.com/gitlab-org/gitlab/-/environments/6444461.\n    \u003e ![Screen_Shot_2022-05-06_at_2.34.27_PM](/uploads/c0e6c293412863106557ba16ea7dd3e3/Screen_Shot_2022-05-06_at_2.34.27_PM.png)","state":"closed","created_at":"2022-04-19T22:00:50.017Z","updated_at":"2022-06-03T16:11:03.578Z","closed_at":"2022-06-03T16:11:03.557Z","closed_by":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"labels":["Category:Environment Management","Next Up","Release::P2","devops::release","group::release","missed:15.0","section::ops","type::maintenance","workflow::in review"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"}],"author":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"type":"ISSUE","assignee":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"user_notes_count":11,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359918","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359918","notes":"https://gitlab.com/api/v4/projects/278964/issues/359918/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359918/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359918","relative":"#359918","full":"gitlab-org/gitlab#359918"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106865866,"iid":359916,"project_id":278964,"title":"Design: Solution validation for capturing incident timestamps","description":"\u003c!--Please answer the below questions to the best of your ability.--\u003e\n\n#### What's this issue all about? (Background and context)\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/336026, we came up with some initial designs for capturing incident timestamps. Do these designs help people quickly and accurately capture incident timestamps?\n\n#### What hypotheses and/or assumptions do you have?\n\nThat we have a rough approach that makes sense for people.\n\n#### What questions are you trying to answer?\n\n- Do these designs work for people? \n- Are there improvements we can make to improve usability? \n- Do people need to add text to timestamps? \n- Do event types need to be changed? (From one to the other)\n- Can a timestamp be multiple things? For instance, can a single timestamp be both impact start and incident start? Or, would people just make separate events, one for each?\n- Should the event type options be displayed within a dropdown or as radio buttons?\n- Do the icons being used for timestamps make sense?\n\n#### What research methodology do you intend to use?\n\n\u003c!-- What needs to be answered to move work forward? If you have a completed Opportunity Canvas include a link.--\u003e\n\n5 in-person interviews\n\n#### What persona, persona segment, or customer type experiences the problem most acutely?\n\nGitLab SREs\n\n#### What business decisions will be made based on this information?\n\nIf updates need to be made to the designs.\n\n#### Who will be leading the research?\n\nAmelia\n\n#### What timescales do you have in mind for the research?\n\nTo be completed in 15.1\n\n#### Relevant links (problem validation issue, design issue, script, prototype, notes, etc.)\n\n\u003c!-- #### TODO Checklist\n Consider adding a checklist in order to keep track of what stage the research is up to. Some possible checklist templates are here:\n https://about.gitlab.com/handbook/engineering/ux/ux-research-training/templates-resources-for-research-studies/#checklists\n --\u003e\n\n- [Design issue](https://gitlab.com/gitlab-org/gitlab/-/issues/336026)\n- [Figma file](https://gitlab.com/gitlab-org/gitlab/-/issues/336026)\n- [Testing script](https://docs.google.com/document/d/1M1tKG2t06SNegnYDnS5sux39OAQ2K4YyGOwErvoDEao/edit?usp=sharing)\n- [Dovetail project](https://dovetailapp.com/projects/4mls5AwnNf9aQ8JKAaq90V/readme)\n- [Testing notes](https://docs.google.com/spreadsheets/d/1atXXj3V-8RhpYp0n7SG0-1oWUA4o7jM6N3e6oBatUXg/edit?usp=sharing)\n- [Prototype](https://www.figma.com/file/3k2HPBkWJPTTM90BAOe2cm/Capture-incident-timestamps-gitlab-com%26336026?node-id=1808%3A26545)","state":"closed","created_at":"2022-04-19T21:53:03.883Z","updated_at":"2022-06-23T21:19:25.573Z","closed_at":"2022-06-02T18:17:40.392Z","closed_by":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"labels":["Category:Incident Management","UX","devops::monitor","feature::addition","group::respond","section::ops","type::feature","workflow::solution validation"],"milestone":{"id":2453022,"iid":73,"group_id":9970,"title":"15.1","description":"","state":"active","created_at":"2022-02-03T22:23:29.335Z","updated_at":"2022-02-03T22:23:29.335Z","due_date":"2022-06-17","start_date":"2022-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/73"},"assignees":[{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"}],"author":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"type":"ISSUE","assignee":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359916","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":7,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359916","notes":"https://gitlab.com/api/v4/projects/278964/issues/359916/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359916/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359916","relative":"#359916","full":"gitlab-org/gitlab#359916"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106861383,"iid":359910,"project_id":278964,"title":"Maintainer can change the visibility of Project and Group","description":"**[HackerOne report #1536559](https://hackerone.com/reports/1536559)** by `suruli` on 2022-04-10, assigned to `GitLab Team`:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\nHi,   According to gitlab docs, api and web_ui, a maintainer of a project is restricted from changing its visibility. The check for user permission is done after making sure the new_visibility is different from current_visibilty level of the project.\n\n```  \n###  gitlab-development-kit/gitlab/app/services/concerns/update_visibility_level.rb\n\ndef valid_visibility_level_change?(target, new_visibility)  \n    return true unless new_visibility\n\n    new_visibility_level = Gitlab::VisibilityLevel.level_value(new_visibility)  \n      \n    if new_visibility_level != target.visibility_level_value   #target.visibility_level_value is 0 for private projects and groups  \n      unless can?(current_user, :change_visibility_level, target) \u0026\u0026  \n          Gitlab::VisibilityLevel.allowed_for?(current_user, new_visibility_level)\n\n        deny_visibility_level(target, new_visibility_level)  \n        return false  \n      end  \n    end\n\n    true  \n end  \n```  \n```  \n###  gitlab-development-kit/gitlab/lib/gitlab/visibility_level.rb\n\nPRIVATE  = 0 unless const_defined?(:PRIVATE)  \nINTERNAL = 10 unless const_defined?(:INTERNAL)  \nPUBLIC   = 20 unless const_defined?(:PUBLIC)\n\n def string_options  \n        {  \n          'private'  =\u003e PRIVATE,  \n          'internal' =\u003e INTERNAL,  \n          'public'   =\u003e PUBLIC  \n        }  \nend\n\ndef level_value(level)  \n        return level.to_i if level.to_i.to_s == level.to_s \u0026\u0026 string_options.key(level.to_i)\n\n        string_options[level] || PRIVATE  \n end  \n```  \n  The `level_value` method returns 0 (the value of PRIVATE) for any input except `10, 20, 'internal', 'public'`.  For a private project or group, passing the new_visibility as `20r` to the method `level_value` will return 0 that bypasses the check for user permission and then `'20r'.to_i` is  20 (PUBLIC) will be assigned as project visibility.\n\n#####  Requirements:  \n1. Two gitlab accounts (Eg, victim_account and attacker_account).  \n2. Burp or similar.\n\nSteps to reproduce  \n===  \n#####  Victim:  \n1. Login to victim_account and goto `New project`\u003e`Create blank project`  \n2. Give any `Project name`. Make sure `Project URL` has  victim's username and click `Create project`\n\n![new_project_form.png](https://h1.sec.gitlab.net/a/926a5c09-776b-4fc2-ab8a-023e243fca08/new_project_form.png)\n\n3. Visit the created project and goto `Project Information`\u003e`Members` from the side menu. Click `invite members`.  \n4. Enter the attacker_account's username or email address. Select the role `Maintainer` and click `Invite`.\n\n![invite_attacker.png](https://h1.sec.gitlab.net/a/f3737540-a43b-49a5-a3e3-97d92e080dc7/invite_attacker.png)\n\n#####  Attacker:\n\n5. Visit the victim's project from attacker_account.  \n6. Goto `Settings`\u003e`General` from side menu.  \n7. Expand `Visibility, project features, permissions` section.  \n8. Turn the Burp intercept on and click `Save changes` at the bottom of  that section.  \n![save_changes.png](https://h1.sec.gitlab.net/a/ec5ac0f6-6e56-4f3e-a515-5cb9f31fef38/save_changes.png)\n\nExample Request  \n```  \nPOST /victim-namespace/victim-project-slug HTTP/2  \n.\n.  \n.\n.  \n.\n-----------------------------31179005449602053611562110226  \nContent-Disposition: form-data; name=\"_method\"\n\npatch  \n-----------------------------31179005449602053611562110226  \nContent-Disposition: form-data; name=\"update_section\"\n\njs-shared-permissions  \n-----------------------------31179005449602053611562110226  \nContent-Disposition: form-data; name=\"project[request_access_enabled]\"\n\ntrue  \n-----------------------------31179005449602053611562110226  \nContent-Disposition: form-data; name=\"project[project_feature_attributes][issues_access_level]\"\n\n20  \n-----------------------------31179005449602053611562110226  \n.\n.  \n.\n-----------------------------31179005449602053611562110226--  \n```  \n9. Add the following value to the request along with the form boundary and `Send` the request.  \n```  \nContent-Disposition: form-data; name=\"project[visibility_level]\"\n\n20r  \n```  \nOther visibility levels can also be set by replacing the value `20r` with following values.\n\n#####  current visibility \u003e input \u003e resulting visibility  \nprivate\u003e`20r`\u003epublic  \nprivate\u003e`10r`\u003einternal  \npublic \u003e `public` \u003e private  \ninternal \u003e `internal` \u003e private\n\n10. Refresh the page to see the change of `Project visibility `.\n\nThe same steps can be repeated for Groups as well.\n\n#####  What is the current *bug* behavior?\n\nuser permission is checked after the check for inequality of new and current visibility level.\n\n#####  What is the expected *correct* behavior?\n\nuser permission should be checked before the check for inequality.\n\nInstalled fresh gitlab instance from https://about.gitlab.com/install/#ubuntu on the date of the report.\n\n####  Impact\n\nA Maintainer can change:  \nVisibility of  Projects and Groups  in Self-managed Gitlab instance.  \nVisibility of Projects in  gitlab.com.\n\n## Attachments\n\n**Warning:** Attachments received through HackerOne, please exercise caution!\n\n* [new_project_form.png](https://h1.sec.gitlab.net/a/926a5c09-776b-4fc2-ab8a-023e243fca08/new_project_form.png)\n* [invite_attacker.png](https://h1.sec.gitlab.net/a/f3737540-a43b-49a5-a3e3-97d92e080dc7/invite_attacker.png)\n* [save_changes.png](https://h1.sec.gitlab.net/a/ec5ac0f6-6e56-4f3e-a515-5cb9f31fef38/save_changes.png)\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2022-04-19T20:47:30.838Z","updated_at":"2022-08-29T05:31:45.424Z","closed_at":"2022-07-29T07:54:42.309Z","closed_by":{"id":9043659,"username":"rshambhuni","name":"Rohit Shambhuni","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9043659/avatar.png","web_url":"https://gitlab.com/rshambhuni"},"labels":["Category:Authentication and Authorization","Deliverable","HackerOne","Weakness::CWE-284","backend","bug::vulnerability","devops::manage","group::authentication and authorization","priority::3","section::dev","security","severity::3","type::bug","workflow::awaiting security release"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":9717295,"username":"bdenkovych","name":"Bogdan Denkovych","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717295/avatar.png","web_url":"https://gitlab.com/bdenkovych"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":9717295,"username":"bdenkovych","name":"Bogdan Denkovych","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717295/avatar.png","web_url":"https://gitlab.com/bdenkovych"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-06-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359910","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359910","notes":"https://gitlab.com/api/v4/projects/278964/issues/359910/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359910/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359910","relative":"#359910","full":"gitlab-org/gitlab#359910"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106851085,"iid":359892,"project_id":278964,"title":"SPIKE: staged disclosure in the Registration flow","description":"Let's evaluate the current registration flow and see what backend requirements there are.\n\nSpiking on:\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/352378","state":"closed","created_at":"2022-04-19T17:06:52.961Z","updated_at":"2022-06-30T15:22:52.668Z","closed_at":"2022-05-02T16:59:25.142Z","closed_by":{"id":4303974,"username":"jejacks0n1","name":"Jeremy Jackson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303974/avatar.png","web_url":"https://gitlab.com/jejacks0n1"},"labels":["auto updated","devops::growth","group::adoption DEPRECATED","section::growth","workflow::in dev"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},{"id":4303974,"username":"jejacks0n1","name":"Jeremy Jackson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303974/avatar.png","web_url":"https://gitlab.com/jejacks0n1"}],"author":{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},"type":"ISSUE","assignee":{"id":2709171,"username":"jayswain","name":"Jay","state":"active","avatar_url":"https://secure.gravatar.com/avatar/9425e277e593759683640b83676c911c?s=80\u0026d=identicon","web_url":"https://gitlab.com/jayswain"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359892","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359892","notes":"https://gitlab.com/api/v4/projects/278964/issues/359892/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359892/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359892","relative":"#359892","full":"gitlab-org/gitlab#359892"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":106848349,"iid":359890,"project_id":278964,"title":"Add tooltip to shortcut element in navbar search field","description":"### Problem to solve\nThis is a follow-up to https://gitlab.com/gitlab-org/gitlab/-/issues/342427 / https://gitlab.com/gitlab-org/gitlab/-/merge_requests/84085 where we added a shortcut keyboard element (`kbd`) to the navbar search field to increase the visibility of the shortcut.\n\nSome users may not understand what this element is in the search field and why it is there.\n\n### Proposal\nInclude a tooltip with the shortcut element to explain what this is how they can use the shortcut.","state":"closed","created_at":"2022-04-19T16:19:37.530Z","updated_at":"2022-07-21T12:07:31.142Z","closed_at":"2022-07-19T16:27:42.023Z","closed_by":{"id":5041243,"username":"nickbrandt","name":"Nick Brandt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/96e3036898d44a8ad7063ba07cce0998?s=80\u0026d=identicon","web_url":"https://gitlab.com/nickbrandt"},"labels":["Category:Global Search","Deliverable","UX","devops::data_stores","feature::enhancement","frontend","group::global search","section::enablement","type::feature","workflow::production"],"milestone":{"id":2453024,"iid":74,"group_id":9970,"title":"15.2","description":"","state":"active","created_at":"2022-02-03T22:24:46.818Z","updated_at":"2022-02-03T22:26:32.010Z","due_date":"2022-07-17","start_date":"2022-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/74"},"assignees":[{"id":10776513,"username":"tbulva","name":"Tomas Bulva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10776513/avatar.png","web_url":"https://gitlab.com/tbulva"}],"author":{"id":5041243,"username":"nickbrandt","name":"Nick Brandt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/96e3036898d44a8ad7063ba07cce0998?s=80\u0026d=identicon","web_url":"https://gitlab.com/nickbrandt"},"type":"ISSUE","assignee":{"id":10776513,"username":"tbulva","name":"Tomas Bulva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10776513/avatar.png","web_url":"https://gitlab.com/tbulva"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359890","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359890","notes":"https://gitlab.com/api/v4/projects/278964/issues/359890/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359890/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359890","relative":"#359890","full":"gitlab-org/gitlab#359890"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7821,"epic":{"id":486667,"iid":7821,"title":"Improve Navbar UX to improve discoverability and usefulness of Global Search","url":"/groups/gitlab-org/-/epics/7821","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":106843203,"iid":359887,"project_id":278964,"title":"FE: Create scans action component","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n- Users want to create an action to run a particular scan\n\n## Relevant links\n| Scan Type | Screenshot |\n| - | - |\n| DAST | ![image](/uploads/43f57f1485fe702c406b5f7a775b04e0/image.png) |\n| All other scans | ![image](/uploads/aa24e9b669482823f4e65e0e12965d23/image.png) |\n\n## Non-functional requirements\n- [ ] Feature flag:\n- [ ] Testing:\n\n## Implementation plan\n- [x] ~frontend create scan action component on both the project and group levels (for more context look at the [`action` schema docs](https://docs.gitlab.com/ee/user/application_security/policies/scan-execution-policies.html#scan-action-type))\n  - look at [`scan_result_policy_editor.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/scan_result_policy_editor.vue) for examples on using the [`policy_editor_layout.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/policy_editor_layout.vue) `actions` slot and do something similar in [`scan_execution_policy_editor.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_execution_policy/scan_execution_policy_editor.vue) by creating a scan execution [`policy_action_builder.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/policy_action_builder.vue) component\n  - look at the files in the [`scan_result_policy/lib`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/lib/) directory on how to convert to/from yaml (e.g. `to_yaml.js`, `from_yaml.js`, `humanize.js`, and `actions.js`) and follow that pattern in the [`scan_execution_policy/lib`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_execution_policy/lib/) directory\n  - for DAST scans, add additional input boxes for scan/site profiles allowing for comma-separated lists (similar to [branches](https://gitlab.com/groups/gitlab-org/-/epics/5363#note_894764465))\n- [x] ~frontend if the ~backend hasn't created a list of available scans (see [this conversation](https://gitlab.com/groups/gitlab-org/-/epics/5363#note_916015673) and https://gitlab.com/gitlab-org/gitlab/-/issues/365579+), temporarily create your own\n- [x] ~frontend ensure the policy_drawer continues to display the humanized policy correctly\n- [ ] ~frontend disable rule mode for unsupported actions\n\n## Verification steps\n1. Upload a ~\"GitLab Ultimate\" license\n1. Turn on the `:scan_execution_rule_mode` feature flag\n1. Navigate to a project =\u003e `Security \u0026 Compliance` =\u003e `Policies` =\u003e `New policy` =\u003e `Scan Execution Policy`\n1. Verify rule mode scans action works\n1. Navigate to a group =\u003e `Security \u0026 Compliance` =\u003e `Policies` =\u003e `New policy` =\u003e `Scan Execution Policy`\n1. Verify rule mode scans action works","state":"closed","created_at":"2022-04-19T15:46:05.382Z","updated_at":"2022-09-19T03:27:59.757Z","closed_at":"2022-09-15T19:04:38.331Z","closed_by":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"labels":["Category:Security Policy Management","devops::govern","frontend","frontend-weight::3","group::security policies","missed:15.3","section::sec","type::feature","workflow::verification"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":3},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359887","notes":"https://gitlab.com/api/v4/projects/278964/issues/359887/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359887/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359887","relative":"#359887","full":"gitlab-org/gitlab#359887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5363,"epic":{"id":198785,"iid":5363,"title":"Allow Users to Edit Rule-mode Scan Execution Policies in the Policy UI","url":"/groups/gitlab-org/-/epics/5363","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106843159,"iid":359886,"project_id":278964,"title":"FE: Create schedule branch rule component","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n- Users want to create rules that are based off of a schedule \n\n## Relevant links\n![image](/uploads/77f0b787ed284c3c6d4dc3b9fd212ec7/image.png)\n\n## Non-functional requirements\n- [ ] Feature flag:\n- [ ] Testing:\n\n## Implementation plan\n- [ ] ~frontend create schedule rule mode on both the project and group levels  (for more context look at the [`schedule` schema docs](https://docs.gitlab.com/ee/user/application_security/policies/scan-execution-policies.html#schedule-rule-type))\n  - look at [`scan_result_policy_editor.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/scan_result_policy_editor.vue) for examples on using the [`policy_editor_layout.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/policy_editor_layout.vue) `rule` slot and do something similar in [`scan_execution_policy_editor.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_execution_policy/scan_execution_policy_editor.vue) by creating a scan execution [`policy_rule_builder.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/296167800f411c15756b03d2ce3e7430cf0dfe67/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/policy_rule_builder.vue) component\n  - look at the files in the [`scan_result_policy/lib`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/lib/) directory on how to convert to/from yaml (e.g. `to_yaml.js`, `from_yaml.js`, `humanize.js`, and `rules.js`) and follow that pattern in the [`scan_execution_policy/lib`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_execution_policy/lib/) directory\n  - rule dropdown\n    - there are two options for rules:\n      1. `A pipeline is run` (handled by https://gitlab.com/gitlab-org/gitlab/-/issues/359885+)\n      1. `Schedule` (handled by this issue)\n    - for this issue, only focus on `2`, but feel free to make it a drop down\n  - branch dropdown\n    - there are two options for the dropdown in the above image that has `branch` selected\n      1. `branch` (handled by this issue)\n      1. `agent` (handled by https://gitlab.com/gitlab-org/gitlab/-/issues/367278+)\n    - for this issue, only focus on `1`, but feel free to make it a drop down\n  - branches dropdown\n    - per https://gitlab.com/groups/gitlab-org/-/epics/5363#note_894764465, give the user an input box instead for the user to type comma-delimited branches\n  - CRON dropdowns\n    - per https://gitlab.com/groups/gitlab-org/-/epics/5363#note_894814030, limit users to only specific schedules, allowing a user to use `yaml` mode to do anything more complicated\n- [ ] ~frontend ensure the policy_drawer continues to display the humanized policy correctly\n\n## Verification steps\n1. Upload a ~\"GitLab Ultimate\" license\n1. Turn on the `:scan_execution_rule_mode` feature flag\n1. Navigate to a project =\u003e `Security \u0026 Compliance` =\u003e `Policies` =\u003e `New policy` =\u003e `Scan Execution Policy`\n1. Verify rule mode schedule rule works\n1. Navigate to a group =\u003e `Security \u0026 Compliance` =\u003e `Policies` =\u003e `New policy` =\u003e `Scan Execution Policy`\n1. Verify rule mode schedule rule works","state":"closed","created_at":"2022-04-19T15:45:40.226Z","updated_at":"2022-09-16T17:31:49.938Z","closed_at":"2022-09-06T11:59:09.426Z","closed_by":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"labels":["Category:Security Policy Management","devops::govern","frontend","frontend-weight::5","group::security policies","section::sec","type::feature","workflow::refinement"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359886","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359886","notes":"https://gitlab.com/api/v4/projects/278964/issues/359886/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359886/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359886","relative":"#359886","full":"gitlab-org/gitlab#359886"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5363,"epic":{"id":198785,"iid":5363,"title":"Allow Users to Edit Rule-mode Scan Execution Policies in the Policy UI","url":"/groups/gitlab-org/-/epics/5363","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":106843128,"iid":359885,"project_id":278964,"title":"FE: Create pipeline rule component","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n- Users want to use a Rule mode to create a scan execution policy because yaml can be hard to parse\n\n## Relevant links\n![image](/uploads/5554c588dfc361016917c1882abbe762/image.png)\n\n## Non-functional requirements\n- [ ] Feature flag:\n- [ ] Testing:\n\n## Implementation plan\n- [ ] ~frontend create `pipeline` rule mode on both the project and group levels (for more context, read the [`pipeline` schema docs](https://docs.gitlab.com/ee/user/application_security/policies/scan-execution-policies.html#pipeline-rule-type))\n  - look at [`scan_result_policy_editor.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/scan_result_policy_editor.vue) for examples on using the [`policy_editor_layout.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/policy_editor_layout.vue) `rule` slot and do something similar in [`scan_execution_policy_editor.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_execution_policy/scan_execution_policy_editor.vue) by creating a scan execution [`policy_rule_builder.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/296167800f411c15756b03d2ce3e7430cf0dfe67/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/policy_rule_builder.vue) component\n  - look at the files in the [`scan_result_policy/lib`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_result_policy/lib/) directory on how to convert to/from yaml (e.g. `to_yaml.js`, `from_yaml.js`, `humanize.js`, and `rules.js`) and follow that pattern in the [`scan_execution_policy/lib`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/security_orchestration/components/policy_editor/scan_execution_policy/lib/) directory\n  - rule dropdown\n    - there are two options for rules: \n      1. `A pipeline is run` (handled by this issue)\n      2. `Schedule` (handled by https://gitlab.com/gitlab-org/gitlab/-/issues/359886+)\n    - for this issue, only focus on `1`, but feel free to make it a drop down\n  - branches dropdown\n    - per https://gitlab.com/groups/gitlab-org/-/epics/5363#note_894764465, give the user an input box instead for the user to type comma-delimited branches\n- [ ] ~frontend ensure the policy_drawer continues to display the humanized policy correctly\n\n## Verification steps\n1. Upload a ~\"GitLab Ultimate\" license \n1. Turn on the `:scan_execution_rule_mode` feature flag\n1. Navigate to a project =\u003e `Security \u0026 Compliance` =\u003e `Policies` =\u003e `New policy` =\u003e `Scan Execution Policy`\n1. Verify rule mode branches rule works\n1. Navigate to a group =\u003e `Security \u0026 Compliance` =\u003e `Policies` =\u003e `New policy` =\u003e `Scan Execution Policy`\n1. Verify rule mode branches rule works","state":"closed","created_at":"2022-04-19T15:45:24.808Z","updated_at":"2022-09-17T15:13:02.167Z","closed_at":"2022-07-28T11:04:41.831Z","closed_by":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"labels":["devops::govern","frontend","frontend-weight::3","group::security policies","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"}],"author":{"id":5537154,"username":"aturinske","name":"Alexander Turinske","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5537154/avatar.png","web_url":"https://gitlab.com/aturinske"},"type":"ISSUE","assignee":{"id":10762712,"username":"arfedoro","name":"Artur Fedorov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10762712/avatar.png","web_url":"https://gitlab.com/arfedoro"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/359885","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/359885","notes":"https://gitlab.com/api/v4/projects/278964/issues/359885/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/359885/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#359885","relative":"#359885","full":"gitlab-org/gitlab#359885"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5363,"epic":{"id":198785,"iid":5363,"title":"Allow Users to Edit Rule-mode Scan Execution Policies in the Policy UI","url":"/groups/gitlab-org/-/epics/5363","group_id":9970,"human_readable_end_date":"Dec 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]