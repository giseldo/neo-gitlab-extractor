[{"id":115465085,"iid":374718,"project_id":278964,"title":"Geo performance optimization for a Model to check if it is verifiable","description":"From https://gitlab.com/gitlab-com/gl-infra/production/-/issues/7756#note_1105910027:\n\n\u003e But the bug is that this should work if Geo is enabled on GitLab.com scale. If I remember correctly, I thought this query would generally be efficient. But IIUC this is happening because object storage is enabled but there are a few rare local files (perhaps because they failed to migrate to object storage, or because background upload is being used or something like that). We could optimize this by \"duplicating\" the logic for \"what is verifiable\" so that the model can perform this check without hitting the DB at all. I think that's how we had it originally. The only downside is then we need to keep that logic in-sync for all models. I'll open an issue to discuss this.","state":"closed","created_at":"2022-09-21T00:52:03.490Z","updated_at":"2022-09-23T21:56:30.204Z","closed_at":"2022-09-23T21:56:30.193Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["bug::performance","devops::systems","group::geo","priority::4","section::enablement","severity::4","type::bug"],"milestone":null,"assignees":[],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374718","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374718","notes":"https://gitlab.com/api/v4/projects/278964/issues/374718/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374718/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374718","relative":"#374718","full":"gitlab-org/gitlab#374718"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115459276,"iid":374715,"project_id":278964,"title":"GraphQL Schema doesn't support a GraphQL endpoind of / (slash)","description":"### Problem\n\nDuring testing of the GraphQL Schema support in API Security, it was found that an error occured when trying to test GraphQL endpoints that don't contain a path (`/`). A unit test exists that reproduces the issue `GraphQlIntegrationTests.GraphQlPathOfSlash`. Currently the test is marked as ignored until this bug is fixed.\n\nCustomer impact: Unable to test GraphQL endpoints that have no path.\n\nWorkaround: Configure test instance to have a path.","state":"closed","created_at":"2022-09-21T00:07:22.180Z","updated_at":"2022-10-24T17:33:22.108Z","closed_at":"2022-10-06T19:31:23.256Z","closed_by":{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","group::dynamic analysis","priority::3","section::sec","severity::3","type::bug","workflow::scheduling"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374715","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374715","notes":"https://gitlab.com/api/v4/projects/278964/issues/374715/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374715/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374715","relative":"#374715","full":"gitlab-org/gitlab#374715"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115456374,"iid":374711,"project_id":278964,"title":"Rename work item's `verification_status` to `status`","description":"See https://gitlab.com/gitlab-org/plan/-/issues/700#note_1108053208\n\nWe'll need to deprecate the `:verification_status` field in `ee/app/graphql/types/work_items/widgets/verification_status_type.rb`.","state":"closed","created_at":"2022-09-20T22:06:04.919Z","updated_at":"2022-09-28T21:48:30.230Z","closed_at":"2022-09-28T20:57:15.461Z","closed_by":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"labels":["GraphQL","devops::plan","group::certify","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374711","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374711","notes":"https://gitlab.com/api/v4/projects/278964/issues/374711/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374711/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374711","relative":"#374711","full":"gitlab-org/gitlab#374711"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115454914,"iid":374708,"project_id":278964,"title":"SCM metrics to be instrumented to support our customers and GitLab TAMs in understand product adoption phase 1","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal\n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal%20-%20detailed.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n--\u003e\n\nAdd additional metrics to better support our sales team [in understanding product adoption by individual customers](https://gitlab.com/groups/gitlab-com/-/epics/1411#note_1016875677) to help them drive the discussion with their customers.\n\nThis issue is about the following metrics that the sales team considers their first priority in a [longer list of metrics that they are looking for](https://docs.google.com/spreadsheets/d/1lhzy2A-35gkPb0E5YXEj1a2mv88mB1bkCZV_FSIHmxs/edit#gid=1901385923). \n\n| Metric name |  What question will this address? |\n|-------------------------------------------------|----------------------------------|\n| usage_activity_by_stage.create.amount_binary_files                      | It shows how many binary files are being stored.                                                                    |\n| usage_activity_by_stage.create.amount_binary_files_bigger_10mb          | It shows how many big binary files are being stored.                                                                |\n| usage_activity_by_stage.create.amount_binary_files_amounts_of_updates   | It shows how often a single binary file is updated to understand if it becomes a problem in terms of sizing or not. |\n\n#### Related links\n* originated from [SCM Use Case: Review, align on, and schedule list of metrics to be instrumented to support our customers and GitLab in understand product adoption](https://gitlab.com/gitlab-com/sales-team/field-operations/customer-success-operations/-/issues/475)\n* supports https://gitlab.com/groups/gitlab-com/-/epics/1411+\n* how previous metrics have been implemented: https://gitlab.com/groups/gitlab-com/-/epics/1411#note_1034319013 \n\n\n\n\u003c!-- Label reminders\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2022-09-20T21:26:50.753Z","updated_at":"2022-12-22T17:50:36.816Z","closed_at":"2022-10-31T16:24:38.333Z","closed_by":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"labels":["Category:Source Code Management","Deliverable","backend","devops::create","feature::addition","group::source code","section::dev","type::feature","workflow::blocked"],"milestone":null,"assignees":[],"author":{"id":10822493,"username":"tlinz","name":"Torsten Linz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822493/avatar.png","web_url":"https://gitlab.com/tlinz"},"type":"ISSUE","assignee":null,"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374708","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374708","notes":"https://gitlab.com/api/v4/projects/278964/issues/374708/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374708/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374708","relative":"#374708","full":"gitlab-org/gitlab#374708"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115451002,"iid":374701,"project_id":278964,"title":"Geo: Ensure performance of finding locally verifiable items","description":"From https://gitlab.com/gitlab-com/gl-infra/production/-/issues/7756#note_1104414924:\n\n\u003e\u003e\u003e\nOn my local instance, I added the following to `/opt/gitlab/embedded/service/gitlab-rails/config/initializers/log_query.rb`\n\n```ruby\nActiveSupport::Notifications.subscribe(\"sql.active_record\") do |_, _, _, _, details|\n  if details[:sql] =~ /SELECT 1 AS one FROM \"ci_job_artifacts\" WHERE \"ci_job_artifacts\".\"file_store\" = 1/\n    Rails.logger.info(\"*** Query is #{details[:sql]}\")\n    Rails.logger.info(caller.join(\"\\n\"))\n    Rails.logger.info(\"*\" * 50)\n  end\nend\n```\n\nThen I ran a CI job and got this hit:\n\n```ruby\n/opt/gitlab/embedded/service/gitlab-rails/ee/app/models/concerns/geo/verifiable_model.rb:19:in `save_verification_details'\n/opt/gitlab/embedded/service/gitlab-rails/ee/app/models/ee/ci/job_artifact.rb:129:in `file_stored_in_transaction_hooks'\n/opt/gitlab/embedded/service/gitlab-rails/app/models/ci/job_artifact.rb:359:in `store_file_in_transaction!'\n```\n\nIt seems this is coming from Geo:\n\n```ruby\nirb(main):003:0\u003e artifact = Ci::JobArtifact.last\n=\u003e #\u003cCi::JobArtifact project_id: 14, file_type: \"trace\", size: 2176, created_at: \"2022-09-18 04:39:37.078066000 +0000\", \u003csnip\u003e\nirb(main):004:0\u003e artifact.class.verifiables.primary_key_in(artifact).exists?\nD, [2022-09-18T04:54:37.659788 #4123838] DEBUG -- :   Ci::JobArtifact Exists? (1.0ms)  /*application:console,db_config_name:main*/ SELECT 1 AS one FROM \"ci_job_artifacts\" WHERE \"ci_job_artifacts\".\"file_store\" = 1 AND \"ci_job_artifacts\".\"id\" = 6192 LIMIT 1\n```\n\nGeo attempts to replicate any **local** files: https://gitlab.com/gitlab-org/gitlab/-/blob/7359d23f4e078479969c872924150219c6f1665f/ee/app/models/concerns/geo/replicable_model.rb#L35\n\n```ruby\n      scope :verifiables, -\u003e { self.respond_to?(:with_files_stored_locally) ? available_replicables.with_files_stored_locally : available_replicables }\n```\n\n@mkozono Can we disable `save_verification_details` if Geo is not enabled? Or disable this query since we know object storage is enabled?\n\u003e\u003e\u003e","state":"closed","created_at":"2022-09-20T20:00:21.868Z","updated_at":"2022-09-27T19:32:16.756Z","closed_at":"2022-09-27T19:32:02.872Z","closed_by":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"labels":["bug::performance","devops::systems","group::geo","priority::4","section::enablement","severity::4","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374701","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374701","notes":"https://gitlab.com/api/v4/projects/278964/issues/374701/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374701/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374701","relative":"#374701","full":"gitlab-org/gitlab#374701"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115441245,"iid":374690,"project_id":278964,"title":"Reduce XML external entity vulnerability false positives","description":"### Problem\n\nGraphQL support in API Security was recently improved. During testing against the `image-target-graphql`, it was noticed that several false positive XML External Entity vulnerabilities were generated. Two of the regex's used to identify when an XXE vulnerability has occurred look for the filename of a local file the check will try and include. This has the side affect of matching on non-generic error messages, resulting in false positives.\n\nRegEx: `/etc/passwd`\n\nPipeline Job: https://gitlab.com/gitlab-org/security-products/tests/api-fuzzing-e2e/dast-generic/-/jobs/3042676030\n\nRequest:\n```json\n\"method\": \"POST\",\n\"url\": \"http://target:7779/graphql\",\n\"body\": \"{\\\"query\\\":\\\"query allThings {allThings(before: \\\\\\\"\u003c?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"utf-8\\\\\\\"?\u003e\u003c!DOCTYPE foo [  \u003c!ELEMENT foo ANY \u003e  \u003c!ENTITY xmlxxe SYSTEM \\\\\\\"file:///etc/passwd\\\\\\\"\u003e]\u003e\u003cfoo\u003e\u0026xmlxxe;\u003c/foo\u003e\\\\\\\", after: \\\\\\\"hello\\\\\\\", first: 42, last: 42) {pageInfo {hasNextPage}}}\\\",\\\"variables\\\":null}\"\n```\n\nResponse:\n\n```json\n\"reason_phrase\": \"BAD REQUEST\",\n\"status_code\": 400,\n\"body\": \"{\\\"errors\\\":[{\\\"message\\\":\\\"Syntax Error GraphQL (1:52) Expected Name, found Float \\\\\\\"1.0\\\\\\\"\\\\n\\\\n1: query allThings {allThings(before: \\\\\\\"\u003c?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"utf-8\\\\\\\"?\u003e\u003c!DOCTYPE foo [  \u003c!ELEMENT foo ANY \u003e  \u003c!ENTITY xmlxxe SYSTEM \\\\\\\"file:///etc/passwd\\\\\\\"\u003e]\u003e\u003cfoo\u003e\u0026xmlxxe;\u003c/foo\u003e\\\\\\\", after: \\\\\\\"hello\\\\\\\", first: 42, last: 42) {pageInfo {hasNextPage}}}\\\\n                                                      ^\\\\n\\\",\\\"locations\\\":[{\\\"line\\\":1,\\\"column\\\":52}]}]}\"\n```\n\n### Proposal\n\nRemove two entries in the `ResponseAnalaysisAssertion` and `LogAnalysisAssertion` assertions that look for filenames.\n\n_First Entry to Remove_\n\n```csharp\nnew ResponseAnalysisAssertionConfigEntry\n{\n\tCategory = \"XML external entity (XXE) injection\",\n\tDescription = \"reference to /etc/passwd file path\",\n\tRegex = @\"/etc/passwd\"\n},\n```\n\n_Second Entry to Remove_\n\n```csharp\nnew ResponseAnalysisAssertionConfigEntry\n{\n\tCategory = \"XML external entity (XXE) injection\",\n\tDescription = \"reference to Windows/System.ini file path\",\n\tRegex = @\"[CcDd]:[/\\\\][Ww]indows[/\\\\][Ss]ystem\\.ini\"\n},\n```\n\n### Tasks\n\n1. [x] Remove the two entries\n   1. [x] `ResponseAnalysisAssertion`\n   1. [x] `LogAnalysisAssertion`\n1. [x] Add a csharp test to validate change\n1. [ ] Update vulnerability counts and CVEs for the GraphQL Schema end-to-end test, verify false positives are no longer reported\n1. [x] Verify all tests are passing\n1. [x] Publish new container with fix","state":"closed","created_at":"2022-09-20T16:52:27.233Z","updated_at":"2022-10-17T03:22:37.509Z","closed_at":"2022-10-11T20:23:38.522Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:API Security","GitLab Ultimate","backend","devops::secure","feature::enhancement","group::dynamic analysis","section::sec","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"}],"author":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374690","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":7,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 7 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374690","notes":"https://gitlab.com/api/v4/projects/278964/issues/374690/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374690/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374690","relative":"#374690","full":"gitlab-org/gitlab#374690"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115436437,"iid":374685,"project_id":278964,"title":"Clean up after migrating redis counters to metrics classes","description":"After all Redis metrics have been moved to instrumentations classes, we can change [UsageDataCounters](https://gitlab.com/gitlab-org/gitlab/blob/47020cce8d079aef6060ed9dc28654c408435cbe/lib/gitlab/usage_data_counters.rb#L4) class to get rid of the `unmigrated_counters` method and remove its usage in [UsageData](https://gitlab.com/gitlab-org/gitlab/blob/47020cce8d079aef6060ed9dc28654c408435cbe/lib/gitlab/usage_data.rb#L270) class.","state":"closed","created_at":"2022-09-20T15:27:19.329Z","updated_at":"2022-10-25T07:48:02.750Z","closed_at":"2022-10-25T07:48:02.486Z","closed_by":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["backend","devops::analytics","group::product intelligence","maintenance::refactor","section::analytics","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374685","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374685","notes":"https://gitlab.com/api/v4/projects/278964/issues/374685/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374685/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374685","relative":"#374685","full":"gitlab-org/gitlab#374685"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115418732,"iid":374616,"project_id":278964,"title":"Backend: Change raw default for ci-variables tables","description":"## Summary\n\nIn !88554, we added `raw` attributes to all ci-variables tables with default `true`. However, it has to be `false` because currently when you add a project/group variable or a YAML variable, their default `raw` value is `false`.\n\nWe did not break anything with !88554 because \"thankfully\" we ignore `raw` value when converting these variables with [`to_runner_variable` in `app/models/concerns/ci/has_variable.rb`](https://gitlab.com/gitlab-org/gitlab/-/blob/8e69c36117b9813a36bbc88ef6e079185274a268/app/models/concerns/ci/has_variable.rb#L33-45).\n\n## Proposal\n\n| Step | MR |\n| ------ | ------ |\n| 1. Remove and add the `raw` attribute again | !98527 |\n| 2. Fix `ci_job_variables.raw` (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98527#note_1126894456) | !100705 |\n| 3. (Optional) Change the logic of `to_runner_variable` to support `raw`. | !100020 |","state":"closed","created_at":"2022-09-20T12:42:35.263Z","updated_at":"2022-10-17T07:26:57.437Z","closed_at":"2022-10-17T07:26:57.416Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","backend","bug::functional","database","devops::verify","group::pipeline authoring","priority::2","section::ops","severity::2","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374616","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374616","notes":"https://gitlab.com/api/v4/projects/278964/issues/374616/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374616/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374616","relative":"#374616","full":"gitlab-org/gitlab#374616"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":72239,"iid":86,"sequence":27,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-07-25T00:05:01.895Z","updated_at":"2022-10-31T00:05:02.250Z","start_date":"2022-10-17","due_date":"2022-10-30","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/72239"},"health_status":"on_track"},{"id":115415068,"iid":374608,"project_id":278964,"title":"[MVC] - Create To-Dos for group owners on request access","description":"## Release Notes\n\nPreviously, access requests to a group appeared only in the Access requests tab in the Group members section. Now, access requests also appear in the group owner's To-Do list. As a group owner, having access requests added directly to your To-Do List can help you manage your tasks more efficiently and add members quicker.\n\n## Problem Statement\n\n1. We need to send To-Do notifications to group owners when someone raises access request for the group. Refer https://gitlab.com/groups/gitlab-org/-/epics/8766#problem for more details.\n2. This issue represents one of the sub tasks of the solution for the feature.\n3. Here we need to create To-Dos for the 10 most recently active owners of the group for which an access request is raised by some user.\n4. The To-Do will have following content ![image](/uploads/4f3acbcb37e89d0461337efa61cdabe1/image.png)\n5. The link will take the user to access_requests tab and it will be something like `https://gitlab.com/groups/\u003cgroup_name\u003e/-/group_members?tab=access_requests`\n6. Refer https://gitlab.com/gitlab-org/gitlab-foss/-/merge_requests/32141 for sending emails to 10 users when access request is raised.\n\n### Availability and Testing\n- E2E tests will be added to support this feature in https://gitlab.com/gitlab-org/gitlab/-/issues/377544+","state":"closed","created_at":"2022-09-20T12:03:25.750Z","updated_at":"2023-01-06T19:09:28.223Z","closed_at":"2022-12-20T14:35:41.090Z","closed_by":{"id":11648098,"username":"hraghuvanshi","name":"Hitesh Raghuvanshi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648098/avatar.png","web_url":"https://gitlab.com/hraghuvanshi"},"labels":["Deliverable","GitLab Free","backend","devops::manage","documentation","feature::addition","group::organization","milestone::p1","missed-deliverable","missed:15.6","quad-planning::complete-action","release post item::in review","section::dev","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11648098,"username":"hraghuvanshi","name":"Hitesh Raghuvanshi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648098/avatar.png","web_url":"https://gitlab.com/hraghuvanshi"}],"author":{"id":11648098,"username":"hraghuvanshi","name":"Hitesh Raghuvanshi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648098/avatar.png","web_url":"https://gitlab.com/hraghuvanshi"},"type":"ISSUE","assignee":{"id":11648098,"username":"hraghuvanshi","name":"Hitesh Raghuvanshi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11648098/avatar.png","web_url":"https://gitlab.com/hraghuvanshi"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374608","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374608","notes":"https://gitlab.com/api/v4/projects/278964/issues/374608/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374608/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374608","relative":"#374608","full":"gitlab-org/gitlab#374608"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8766,"epic":{"id":603834,"iid":8766,"title":"Notifications for group owners when someone applies to become a group or project member","url":"/groups/gitlab-org/-/epics/8766","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115396433,"iid":374601,"project_id":278964,"title":"Migrate `epics_deepest_relationship_level` to instrumentation class","description":"The [`epics_deepest_relationship_level`](https://gitlab.com/gitlab-org/gitlab/-/issues/374591) metric as it's currently instrumented is not hardened and is at risk of causing the service ping report generation to fail entirely.\n\n\n## Proposal\n\nMove the broken `epics_deepest_relationship_level` metric to instrumentation class in order to provide error handling which will allow the metric collection to fail without impacting the entire service ping generation.","state":"closed","created_at":"2022-09-20T09:36:13.129Z","updated_at":"2022-09-23T05:49:33.006Z","closed_at":"2022-09-23T05:49:32.744Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["Service Ping","Unplanned","backend","devops::analytics","group::product intelligence","priority::1","section::analytics","severity::1","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":750946,"username":"dennis","name":"Dennis Tang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/750946/avatar.png","web_url":"https://gitlab.com/dennis"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374601","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374601","notes":"https://gitlab.com/api/v4/projects/278964/issues/374601/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374601/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374601","relative":"#374601","full":"gitlab-org/gitlab#374601"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115388513,"iid":374595,"project_id":278964,"title":"Migrate MergeRequestWidgetExtensionCounter to use a Metric Instrumentation class","description":"As a part of https://gitlab.com/gitlab-org/gitlab/-/issues/339445, we want to move the MergeRequestWidgetExtensionCounter from `UsageDataCounters` to use basic RedisMetric class, defined with metrics yaml file parameters. This will require moving this class from [`COUNTERS`](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/usage_data_counters.rb#L5) to `COUNTERS_MIGRATED_TO_INSTRUMENTATION_CLASSES` const in the UsageDataCounters class.","state":"closed","created_at":"2022-09-20T07:56:24.410Z","updated_at":"2022-10-19T14:05:03.309Z","closed_at":"2022-10-19T14:05:03.279Z","closed_by":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"labels":["backend","devops::analytics","group::product intelligence","maintenance::refactor","section::analytics","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"}],"author":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"type":"ISSUE","assignee":{"id":8013274,"username":"pskorupa","name":"Piotr Skorupa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8013274/avatar.png","web_url":"https://gitlab.com/pskorupa"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374595","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374595","notes":"https://gitlab.com/api/v4/projects/278964/issues/374595/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374595/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374595","relative":"#374595","full":"gitlab-org/gitlab#374595"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115388459,"iid":374593,"project_id":278964,"title":"Migrate SearchCounter and KubernetesAgentCounter to use a Metric Instrumentation class","description":"As a part of https://gitlab.com/gitlab-org/gitlab/-/issues/339445, we want to move the SearchCounter and KubernetesAgentCounter from `UsageDataCounters` to use basic RedisMetric class, defined with metrics yaml file parameters. This will require moving these classes from [`COUNTERS`](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/usage_data_counters.rb#L5) to `COUNTERS_MIGRATED_TO_INSTRUMENTATION_CLASSES` const in the UsageDataCounters class.","state":"closed","created_at":"2022-09-20T07:55:33.567Z","updated_at":"2022-09-23T08:14:14.203Z","closed_at":"2022-09-23T08:14:14.182Z","closed_by":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["Unplanned","backend","devops::analytics","group::product intelligence","maintenance::refactor","section::analytics","type::maintenance","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374593","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374593","notes":"https://gitlab.com/api/v4/projects/278964/issues/374593/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374593/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374593","relative":"#374593","full":"gitlab-org/gitlab#374593"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115388398,"iid":374592,"project_id":278964,"title":"Migrate NoteCounter to use a Metric Instrumentation class","description":"As a part of https://gitlab.com/gitlab-org/gitlab/-/issues/339445, we want to move the NoteCounter from `UsageDataCounters` to use basic RedisMetric class, defined with metrics yaml file parameters. This will require moving this class from [`COUNTERS`](https://gitlab.com/gitlab-org/gitlab/blob/master/lib/gitlab/usage_data_counters.rb#L5) to `COUNTERS_MIGRATED_TO_INSTRUMENTATION_CLASSES` const in the UsageDataCounters class.","state":"closed","created_at":"2022-09-20T07:54:34.238Z","updated_at":"2022-09-29T10:00:56.916Z","closed_at":"2022-09-29T10:00:56.884Z","closed_by":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["backend","devops::analytics","group::product intelligence","maintenance::refactor","section::analytics","type::maintenance","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374592","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374592","notes":"https://gitlab.com/api/v4/projects/278964/issues/374592/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374592/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374592","relative":"#374592","full":"gitlab-org/gitlab#374592"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115388223,"iid":374591,"project_id":278964,"title":"2022-09-19 Service Ping failed due to single non-hardened metric","description":"In an attempt to generate the service ping report for the week of 2022-09-19, the team encountered an issue with a single non-hardened metric having performance issues and blocking the report from being generated.\n\n@mikolaj_wawrzyniak investigated and had this to report:\n\n\u003e Service Ping payload launched yesterday failed to send payload. Following output was returned in console:\n\n```\n[ gprd ] production\u003e [start_at = Time.now.to_i, resp = GitlabServicePingWorker.n\new.perform('triggered_from_cron'=\u003efalse), end_at = Time.now.to_i]\nSending event c2cd070259234ae9be49f736c802ae70 to Sentry\nSending event f64f2f938df14b8abcfebced0fbdefa7 to Sentry\nSending event 949398a2a6b143399266346b0ae9e165 to Sentry\nSending event 10b1d6aa2e3e47ccad02c1898ed61e73 to Sentry\nSending event 2d5e5d48e1d242e6b8ef4279e66c3a0f to Sentry\nSending event e25e202426134b59aea00134699b03d1 to Sentry\nSending event 5be379109a46449da5fc8fe9b274f4d1 to Sentry\nTraceback (most recent call last):\n        7: from (irb):1\n        6: from (irb):2:in `rescue in irb_binding'\n        5: from app/workers/gitlab_service_ping_worker.rb:31:in `perform'\n        4: from lib/gitlab/exclusive_lease_helpers.rb:38:in `in_lock'\n        3: from app/workers/gitlab_service_ping_worker.rb:35:in `block in perform'\n        2: from app/services/service_ping/submit_service.rb:24:in `execute'\n        1: from app/services/service_ping/submit_service.rb:73:in `submit_usage_data_payload'\nServicePing::SubmitService::SubmissionError (Usage data payload is blank)\n```\n\n\u003e Upon inspecting last event send to sentry I got https://sentry.gitlab.net/gitlab/gitlabcom/issues/3453558/events/112934744/?environment=gprd which pointed to https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/utils/usage_data.rb#L297 From that method it can be noticed that there is no db layer error handling, which is present for every other database metric. So in situation that this metric reaches timeout it can fail whole Service Ping report.\n\n## Steps to remediate\n\n1. Hot patch code to skip this metric and retry payload -\u003e short term, one time only solution\n1. Move broken metric to instrumentation class to provide error handling -\u003e stable approach https://gitlab.com/gitlab-org/gitlab/-/issues/374601","state":"closed","created_at":"2022-09-20T07:52:05.219Z","updated_at":"2022-11-02T02:19:28.973Z","closed_at":"2022-09-21T07:56:14.157Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["Service Ping","Unplanned","backend","devops::analytics","group::product intelligence","priority::1","section::analytics","severity::1","type::bug","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":750946,"username":"dennis","name":"Dennis Tang","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/750946/avatar.png","web_url":"https://gitlab.com/dennis"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374591","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374591","notes":"https://gitlab.com/api/v4/projects/278964/issues/374591/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374591/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374591","relative":"#374591","full":"gitlab-org/gitlab#374591"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115372441,"iid":374584,"project_id":278964,"title":"Remove Tasks introduction message","description":"## Summary\n\nThe one-time \"Introduction to Tasks\" message was created to be a short-lived explainer for new functionality. As this is no longer new, this message can be removed to avoid it showing up when not helpful.","state":"closed","created_at":"2022-09-20T03:57:49.239Z","updated_at":"2022-12-29T03:01:26.850Z","closed_at":"2022-12-06T19:28:35.407Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Deliverable","UX","devops::plan","frontend","group::project management","maintenance::removal","missed-deliverable","missed:15.6","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"}],"author":{"id":11392688,"username":"nickleonard","name":"Nick Leonard","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11392688/avatar.png","web_url":"https://gitlab.com/nickleonard"},"type":"ISSUE","assignee":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374584","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374584","notes":"https://gitlab.com/api/v4/projects/278964/issues/374584/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374584/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374584","relative":"#374584","full":"gitlab-org/gitlab#374584"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115364086,"iid":374579,"project_id":278964,"title":"Error 500 with new group SAML logins when attempting to persist terms of service","description":"Starting 2022-09-19 05:00, there appears to be an uptick of `ActiveRecord::NotNullViolation` errors inserting into the `term_agreements` table:\n\n```\nINSERT INTO \"term_agreements\" (\"term_id\", \"accepted\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"\n```\n\nNote that `user_id` is omitted in the INSERT. \n\nIt appears this may have been caused by https://gitlab.com/gitlab-org/gitlab/-/merge_requests/85871. When a new user logs in via SAML, `build_new_user` has not actually persisted the user ID to the database. `user.id` is NULL.\n\nhttps://log.gprd.gitlab.net/goto/cd976a00-3868-11ed-8656-f5f2137823ba shows:\n\n```json\n  \"exception.backtrace\": [\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:120:in `block in write_using_load_balancer'\",\n        \"lib/gitlab/database/load_balancing/load_balancer.rb:115:in `block in read_write'\",\n        \"lib/gitlab/database/load_balancing/load_balancer.rb:191:in `retry_with_backoff'\",\n        \"lib/gitlab/database/load_balancing/load_balancer.rb:111:in `read_write'\",\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:119:in `write_using_load_balancer'\",\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:61:in `block (2 levels) in \u003cclass:ConnectionProxy\u003e'\",\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:120:in `block in write_using_load_balancer'\",\n        \"lib/gitlab/database/load_balancing/load_balancer.rb:115:in `block in read_write'\",\n        \"lib/gitlab/database/load_balancing/load_balancer.rb:191:in `retry_with_backoff'\",\n        \"lib/gitlab/database/load_balancing/load_balancer.rb:111:in `read_write'\",\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:119:in `write_using_load_balancer'\",\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:71:in `transaction'\",\n        \"app/services/users/respond_to_terms_service.rb:15:in `execute'\",\n        \"lib/gitlab/auth/o_auth/user.rb:257:in `persist_accepted_terms_if_required'\",\n        \"lib/gitlab/auth/o_auth/user.rb:222:in `build_new_user'\",\n        \"ee/lib/gitlab/auth/group_saml/user.rb:62:in `build_new_user'\",\n        \"ee/lib/gitlab/auth/group_saml/user.rb:42:in `block in gl_user'\",\n        \"lib/gitlab/utils/strong_memoize.rb:44:in `strong_memoize'\",\n        \"ee/lib/gitlab/auth/group_saml/user.rb:41:in `gl_user'\",\n        \"lib/gitlab/auth/o_auth/user.rb:34:in `persisted?'\",\n        \"lib/gitlab/auth/o_auth/user.rb:38:in `new?'\",\n        \"app/controllers/omniauth_callbacks_controller.rb:163:in `sign_in_user_flow'\",\n        \"app/controllers/omniauth_callbacks_controller.rb:131:in `omniauth_flow'\",\n        \"ee/app/controllers/groups/omniauth_callbacks_controller.rb:18:in `group_saml'\",\n```\n\n![image](/uploads/906cdd6320403a80aac6a153f391aad4/image.png)\n\nZD: https://gitlab.zendesk.com/agent/tickets/327275","state":"closed","created_at":"2022-09-19T22:18:58.285Z","updated_at":"2022-10-27T07:38:26.741Z","closed_at":"2022-10-27T07:38:26.721Z","closed_by":{"id":10761376,"username":"hmehra","name":"Hinam Mehra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10761376/avatar.png","web_url":"https://gitlab.com/hmehra"},"labels":["devops::anti-abuse","group::anti-abuse","missed:15.5","priority::1","section::data-science","severity::2","type::bug"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10761376,"username":"hmehra","name":"Hinam Mehra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10761376/avatar.png","web_url":"https://gitlab.com/hmehra"}],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":{"id":10761376,"username":"hmehra","name":"Hinam Mehra","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10761376/avatar.png","web_url":"https://gitlab.com/hmehra"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374579","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374579","notes":"https://gitlab.com/api/v4/projects/278964/issues/374579/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374579/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374579","relative":"#374579","full":"gitlab-org/gitlab#374579"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115354128,"iid":374558,"project_id":278964,"title":"Drop the `fingerprint` column from `sbom_sources`","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nWe recently determined that the fingerprint column on sbom_sources is unnecessary (https://gitlab.com/gitlab-org/gitlab/-/issues/369915#note_1082969858).\nThe column was ignored in %\"15.5\" with https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97989.\nPer [the process for removing a column](https://docs.gitlab.com/ee/development/database/avoiding_downtime_in_migrations.html#dropping-columns)\nthe next step is to drop it from the table in %\"15.6\".\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated.\nThe plan can also call-out responsibilities for other team members or teams and\ncan be split into smaller MRs to simplify the code review process.\n\ne.g.:\n\n- MR 1: Part 1\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n- MR 2: Part 2\n- [ ] ~backend Step 1\n- [ ] ~backend Step 2\n- MR 3: Part 3\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n\n--\u003e\n\nWrite a schema migration to remove the `fingerprint` column from `sbom_sources`.\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2022-09-19T18:07:08.528Z","updated_at":"2022-11-07T09:23:49.616Z","closed_at":"2022-11-07T09:23:49.588Z","closed_by":{"id":11164960,"username":"ghavenga","name":"Gregory Havenga","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11164960/avatar.png","web_url":"https://gitlab.com/ghavenga"},"labels":["Category:Vulnerability Management","Threat Insights::Tangerine","backend","devops::govern","group::threat insights","maintenance::refactor","quad-planning::complete-no-action","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11164960,"username":"ghavenga","name":"Gregory Havenga","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11164960/avatar.png","web_url":"https://gitlab.com/ghavenga"}],"author":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"type":"ISSUE","assignee":{"id":11164960,"username":"ghavenga","name":"Gregory Havenga","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11164960/avatar.png","web_url":"https://gitlab.com/ghavenga"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374558","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374558","notes":"https://gitlab.com/api/v4/projects/278964/issues/374558/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374558/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374558","relative":"#374558","full":"gitlab-org/gitlab#374558"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115346476,"iid":374545,"project_id":278964,"title":"Invalidate gitlab-pages internal api cache with 'Application settings updated' event","description":"### Context\n\nFor `GET /api/internal/pages?host=HOST`. This is the API endpoint that gets called by GitLab pages when a request comes in and we haven't cached in gitlab-pages what needs to be served for this. Given that the satisfiedThreshold for writing headers for a response is 0.5s, ideally, this would be even faster than the threshold set for web-pages. We think 0.5s for serving a static page is an acceptable target. Since this information generally does not change a lot, we could add a cache for the JSON response of this endpoint to help the metrics. The cache introduced in https://gitlab.com/gitlab-org/gitlab/-/issues/363867, needs to be invalidated in some application events (https://gitlab.com/groups/gitlab-org/-/epics/7920#events-that-invalidate-the-cache).\n\n### What is this issue\n\nThis issue is introduce the cache invalidation for the *Application settings updated* event.\n\nUse the application settings as part of the cache key, something like:\n```ruby\ndef cache_key\n  settings = sha(ApplicationSetting.attributes.values_at(:force_access_control).join)\n  \"pages_domain_for_#{type}_#{id}_v#{settings}\" # type might be \"project\" or \"namespace\"\nend\n```","state":"closed","created_at":"2022-09-19T16:21:27.026Z","updated_at":"2022-10-03T12:42:20.665Z","closed_at":"2022-10-03T12:42:20.632Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Pages","Error Budget Improvement","backend","devops::create","group::editor","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374545","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374545","notes":"https://gitlab.com/api/v4/projects/278964/issues/374545/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374545/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374545","relative":"#374545","full":"gitlab-org/gitlab#374545"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7920,"epic":{"id":503228,"iid":7920,"title":"Pages Internal API Caching","url":"/groups/gitlab-org/-/epics/7920","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115346363,"iid":374543,"project_id":278964,"title":"Invalidate gitlab-pages internal api cache with 'Project settings updated' event","description":"### Context\n\nFor `GET /api/internal/pages?host=HOST`. This is the API endpoint that gets called by GitLab pages when a request comes in and we haven't cached in gitlab-pages what needs to be served for this.\nGiven that the satisfiedThreshold for writing headers for a response is 0.5s, ideally, this would be even faster than the threshold set for web-pages. We think 0.5s for serving a static page is an acceptable target.\nSince this information generally does not change a lot, we could add a cache for the JSON response of this endpoint to help the metrics.\nThe cache introduced in https://gitlab.com/gitlab-org/gitlab/-/issues/363867, needs to be invalidated in some application events (https://gitlab.com/groups/gitlab-org/-/epics/7920#events-that-invalidate-the-cache).\n\n### What is this issue\n\nThis issue is introduce the cache invalidation for the *Project settings updated* event.\n\n#### What project settings invalidates the cache?\n\n- `project.visibility`\n- `project.pages_access_level`\n- `project.pages_https_only`","state":"closed","created_at":"2022-09-19T16:21:09.916Z","updated_at":"2022-10-05T21:53:50.561Z","closed_at":"2022-10-04T14:30:28.705Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Pages","Error Budget Improvement","backend","devops::create","group::editor","section::dev","type::feature","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374543","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374543","notes":"https://gitlab.com/api/v4/projects/278964/issues/374543/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374543/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374543","relative":"#374543","full":"gitlab-org/gitlab#374543"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7920,"epic":{"id":503228,"iid":7920,"title":"Pages Internal API Caching","url":"/groups/gitlab-org/-/epics/7920","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115346308,"iid":374542,"project_id":278964,"title":"Invalidate gitlab-pages internal api cache with 'Pages domain deleted' event","description":"### Context\n\nFor `GET /api/internal/pages?host=HOST`. This is the API endpoint that gets called by GitLab pages when a request comes in and we haven't cached in gitlab-pages what needs to be served for this.\nGiven that the satisfiedThreshold for writing headers for a response is 0.5s, ideally, this would be even faster than the threshold set for web-pages. We think 0.5s for serving a static page is an acceptable target.\nSince this information generally does not change a lot, we could add a cache for the JSON response of this endpoint to help the metrics.\nThe cache introduced in https://gitlab.com/gitlab-org/gitlab/-/issues/363867, needs to be invalidated in some application events (https://gitlab.com/groups/gitlab-org/-/epics/7920#events-that-invalidate-the-cache).\n\n### What is this issue\n\nThis issue is introduce the cache invalidation for the *Pages domain deleted* event.\n\nTo invalidate the cache the event must contain at least:\n- the project id\n- project namespace id\n- project root namespace id","state":"closed","created_at":"2022-09-19T16:20:51.310Z","updated_at":"2022-09-29T14:54:01.310Z","closed_at":"2022-09-29T14:54:01.291Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Pages","Error Budget Improvement","backend","devops::create","group::editor","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374542","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374542","notes":"https://gitlab.com/api/v4/projects/278964/issues/374542/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374542/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374542","relative":"#374542","full":"gitlab-org/gitlab#374542"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7920,"epic":{"id":503228,"iid":7920,"title":"Pages Internal API Caching","url":"/groups/gitlab-org/-/epics/7920","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115346260,"iid":374541,"project_id":278964,"title":"Invalidate gitlab-pages internal api cache with 'Pages domain updated' event","description":"### Context\n\nFor `GET /api/internal/pages?host=HOST`. This is the API endpoint that gets called by GitLab pages when a request comes in and we haven't cached in gitlab-pages what needs to be served for this.\nGiven that the satisfiedThreshold for writing headers for a response is 0.5s, ideally, this would be even faster than the threshold set for web-pages. We think 0.5s for serving a static page is an acceptable target.\nSince this information generally does not change a lot, we could add a cache for the JSON response of this endpoint to help the metrics.\nThe cache introduced in https://gitlab.com/gitlab-org/gitlab/-/issues/363867, needs to be invalidated in some application events (https://gitlab.com/groups/gitlab-org/-/epics/7920#events-that-invalidate-the-cache).\n\n### What is this issue\n\nThis issue is introduce the cache invalidation for the *Pages domain updated* event.\n\nTo invalidate the cache the event must contain at least:\n- the project id\n- project namespace id\n- project root namespace id","state":"closed","created_at":"2022-09-19T16:20:35.439Z","updated_at":"2022-10-03T12:41:46.007Z","closed_at":"2022-10-03T12:41:45.977Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Pages","Error Budget Improvement","backend","devops::create","group::editor","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374541","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374541","notes":"https://gitlab.com/api/v4/projects/278964/issues/374541/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374541/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374541","relative":"#374541","full":"gitlab-org/gitlab#374541"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7920,"epic":{"id":503228,"iid":7920,"title":"Pages Internal API Caching","url":"/groups/gitlab-org/-/epics/7920","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115338876,"iid":374529,"project_id":278964,"title":"Update checkboxes layout in the merge request merge widget","description":"This is a follow-up from the https://gitlab.com/gitlab-org/gitlab/-/issues/368039+\n\n## Changes to be made\n\n1. On `768px +` breakpoints, the checkboxes are **inline** and all items have `16px` spacing between them.\n1. On `\u003c768px` breakpoints, the checkboxes are **stacked** and all items have `8px` spacing between them.\n\n**[:frame_photo: Design specs in Figma](https://www.figma.com/file/omvNuR8nn90V8hjVN78OQO/Adapt-MR-merge-widget-to-framework-%23347128?node-id=845%3A1298)**\n\n![Mockups](https://gitlab.com/groups/gitlab-org/-/uploads/18b1677eb9075feefc0c80c53801874a/image.png)","state":"closed","created_at":"2022-09-19T14:35:59.762Z","updated_at":"2022-11-21T12:01:45.624Z","closed_at":"2022-10-26T09:18:46.151Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","SUS::Impacting","UI polish","UX","devops::create","frontend","group::code review","maintenance::usability","merge request widget","section::dev","severity::3","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":10539680,"username":"slashmanov","name":"Stanislav Lashmanov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10539680/avatar.png","web_url":"https://gitlab.com/slashmanov"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374529","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374529","notes":"https://gitlab.com/api/v4/projects/278964/issues/374529/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374529/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374529","relative":"#374529","full":"gitlab-org/gitlab#374529"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7340,"epic":{"id":414918,"iid":7340,"title":"Adapt MR merge widget to new framework","url":"/groups/gitlab-org/-/epics/7340","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115338610,"iid":374528,"project_id":278964,"title":"Visually decouple merge request report widgets from the merge request merge widget","description":"This is a follow-up from [the discussion](https://gitlab.com/gitlab-org/gitlab/-/issues/368039#note_1092025810):\n\n\u003e Visually decouples ~\"Merge Request Report Widgets\" from the ~\"merge request widget\".\n\n**[:frame_photo: Design specs in Figma](https://www.figma.com/file/omvNuR8nn90V8hjVN78OQO/Adapt-MR-merge-widget-to-framework-%23347128?node-id=845%3A1298)**\n\n| Before | After |\n| ------ | ------ |\n| ![image](/uploads/38c96f2515eee9d1ca9ad8e730bb07fb/image.png) | ![image](/uploads/2b1174e2c1c7d0e506f3b0242eb1e00a/image.png) |","state":"closed","created_at":"2022-09-19T14:31:01.971Z","updated_at":"2022-11-21T12:01:45.687Z","closed_at":"2022-11-08T09:49:19.040Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","Merge Request Report Widgets","SUS::Impacting","UI polish","UX","devops::create","frontend","group::code review","maintenance::usability","merge request widget","section::dev","severity::4","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":10539680,"username":"slashmanov","name":"Stanislav Lashmanov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10539680/avatar.png","web_url":"https://gitlab.com/slashmanov"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374528","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374528","notes":"https://gitlab.com/api/v4/projects/278964/issues/374528/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374528/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374528","relative":"#374528","full":"gitlab-org/gitlab#374528"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7340,"epic":{"id":414918,"iid":7340,"title":"Adapt MR merge widget to new framework","url":"/groups/gitlab-org/-/epics/7340","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115338601,"iid":374527,"project_id":278964,"title":"Background migration for internal column on notes","description":"Sync all data from `confidential` on notes to `internal`.","state":"closed","created_at":"2022-09-19T14:30:53.531Z","updated_at":"2022-11-10T14:23:01.068Z","closed_at":"2022-10-03T08:21:32.934Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["Deliverable","backend","devops::plan","group::product planning","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374527","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374527","notes":"https://gitlab.com/api/v4/projects/278964/issues/374527/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374527/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374527","relative":"#374527","full":"gitlab-org/gitlab#374527"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8390,"epic":{"id":567440,"iid":8390,"title":"Internal Notes: Technical debt cleanup","url":"/groups/gitlab-org/-/epics/8390","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":115334818,"iid":374523,"project_id":278964,"title":"Deprecated and remove the custom monaco editor webpack plugin wrapper (/plugins/monaco_webpack.js)","description":"With the upgrade of both `monaco-yaml` and `monaco-editor-webpack-plugin`, we do not need to have a special plugin wrapper around monaco-yaml's worker for webpack: `monaco-yaml` now plays nicely with `monaco-editor-webpack-plugin`","state":"closed","created_at":"2022-09-19T13:48:48.283Z","updated_at":"2022-09-21T08:31:34.527Z","closed_at":"2022-09-21T08:31:34.500Z","closed_by":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"labels":["Development Department","devops::create","feature","group::editor","section::dev","type::feature"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"}],"author":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"type":"ISSUE","assignee":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374523","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374523","notes":"https://gitlab.com/api/v4/projects/278964/issues/374523/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374523/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374523","relative":"#374523","full":"gitlab-org/gitlab#374523"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115323762,"iid":374506,"project_id":278964,"title":"[MR Widget V2]: Security Reports widget fails when tools are not configured","description":"## Summary \n\nAs shown in the image, when the tools are not configured, the API returns a 400 request and this causes our Scanners to display an error message. \n\n![unconfigured-tools](/uploads/2ce711cf9c3ee39eb411c4c5d868f7ec/unconfigured-tools.png)\n\nWe should ignore these errors and treat only configured tools. Alternatively, if we the ~frontend has information on which tools are enabled, we can make a call to the API only for the enabled tools.\n\n## More context\n\nThe `mr` object has an `enabledReports` property which looks like:\n\n![image](/uploads/b9a1e380b8b513e9e5c0b60bfc8bc4e0/image.png)\n\nUse this object to detect which calls to make. If no report is enabled, we simply do not show the security reports widget.\n\n## Verification steps\n\n- [ ] Go to https://gitlab.com/savasvedova/security-reports-v2/-/merge_requests/1\n- [ ] The widget container should have all `enabledReports` set to `false` (see screenshot below)\n- [ ] Open the network tab\n- [ ] Filter by following keywords: `sast`, `dast`, `coverage`, `api_fuzzing`, `secret`, `container`, `dependency`. There should be no network requests. \n\n![image](/uploads/fbf058c26c8b3ba85e738068b080b62e/image.png)\n\n**Note** The `Security scanning detected no new potential vulnerabilities` message is misleading, it will be fixed in a separate issue.","state":"closed","created_at":"2022-09-19T11:41:45.445Z","updated_at":"2022-12-13T14:43:58.094Z","closed_at":"2022-12-13T14:43:58.007Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["Category:Vulnerability Management","Threat Insights::Navy","auto updated","devops::govern","frontend","group::threat insights","merge request widget","missed:15.5","quad-planning::complete-no-action","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"}],"author":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"type":"ISSUE","assignee":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374506","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374506","notes":"https://gitlab.com/api/v4/projects/278964/issues/374506/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374506/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374506","relative":"#374506","full":"gitlab-org/gitlab#374506"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8353,"epic":{"id":564248,"iid":8353,"title":"[MR Widget] V2","url":"/groups/gitlab-org/-/epics/8353","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":"on_track"},{"id":115319724,"iid":374504,"project_id":278964,"title":"[MR Widget V2]: Fix icon alignment","description":"## Summary\n\nDue to a recent change in the others parts of the code, the MR Widget now displays the icon misaligned.\n\n**Current version:**\n\n![image](/uploads/88ceae0fa0c35a7240d25fbda7ecbb91/image.png)\n\n**Expected:**\n\n![image](/uploads/6468f5217c2d7cb81495b29505de9f6f/image.png)","state":"closed","created_at":"2022-09-19T10:51:32.180Z","updated_at":"2022-09-20T08:00:41.601Z","closed_at":"2022-09-20T08:00:41.572Z","closed_by":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"labels":["Category:Vulnerability Management","auto updated","devops::govern","frontend","group::threat insights","merge request widget","section::sec","type::maintenance","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"}],"author":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"type":"ISSUE","assignee":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374504","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374504","notes":"https://gitlab.com/api/v4/projects/278964/issues/374504/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374504/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374504","relative":"#374504","full":"gitlab-org/gitlab#374504"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8353,"epic":{"id":564248,"iid":8353,"title":"[MR Widget] V2","url":"/groups/gitlab-org/-/epics/8353","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115304979,"iid":374303,"project_id":278964,"title":"Frontend - Deployment target overflow the page in mobile version","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nOn merge request if the deployment target text is too long it overflow the page.\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n### Steps to reproduce\n\nCreate a merge request with a deployment target on a `review` environment.\nDisplay the merge request on mobile.\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n### What is the current *bug* behavior?\n\nIf too long, it overflow the page;\n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\nThe container of the text should be hidden if it overflow his container.\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n![Screenshot_20220916_145819_org.adblockplus.browser](/uploads/a6abd053b067cf54ab0a30d1f9722d42/Screenshot_20220916_145819_org.adblockplus.browser.jpg)\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Possible fixes\n\nThe container of the text should have the propriety `overflow hidden` or something similar.\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-09-19T07:30:30.667Z","updated_at":"2022-10-25T12:35:31.308Z","closed_at":"2022-10-25T09:51:56.519Z","closed_by":{"id":12455340,"username":"andrei.zubov","name":"Andrei Zubov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12455340/avatar.png","web_url":"https://gitlab.com/andrei.zubov"},"labels":["Category:Environment Management","Next Up","automation:ml","devops::release","group::release","missed:15.5","priority::4","section::ops","severity::4","type::bug","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":12455340,"username":"andrei.zubov","name":"Andrei Zubov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12455340/avatar.png","web_url":"https://gitlab.com/andrei.zubov"}],"author":{"id":8380117,"username":"Totara-thib","name":"Thibaud-Vdb","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8380117/avatar.png","web_url":"https://gitlab.com/Totara-thib"},"type":"ISSUE","assignee":{"id":12455340,"username":"andrei.zubov","name":"Andrei Zubov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12455340/avatar.png","web_url":"https://gitlab.com/andrei.zubov"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374303","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374303","notes":"https://gitlab.com/api/v4/projects/278964/issues/374303/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374303/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374303","relative":"#374303","full":"gitlab-org/gitlab#374303"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115242444,"iid":374139,"project_id":278964,"title":"Add notifications to Slack App integration - App Home Update","description":"## Description\n\nNow that we have an App Home in the GitLab Slack app, we can now communicate to users changes to our Slack App. Let's work on the content we'll share in the App Home for `Adding notifications to the Slack app`. A few things to consider:\n\n- ~~Features~~\n- ~~Benefits~~\n- ~~Uses~~\n- Deprecations\n- Migrations\n- Any action required by the user\n- Any opportunities to encourage adoption (e.g. try it now type features)\n\nThe most likely MVC here is:\n\nAdd a gif showcasing how the notifications work in the app, which aligns with our existing content with examples of slash commands.\n\n_Note: Since we updated the \"About\" tab in https://gitlab.com/gitlab-org/gitlab/-/issues/381112, it would be redundant to mention Features, Benefits, Use._\n\n## Technical Proposal\n\nWe update [`Slack::BlockKit::AppHomeOpened`](https://gitlab.com/gitlab-org/gitlab/-/blob/fc4c44db9f484467a9af9eda0e54999c9bf5c2c6/ee/lib/slack/block_kit/app_home_opened.rb) to generate the new Block Kit JSON according to the designs.\n\nWe can put the changes to the App Home behind the same feature flag toggle as we use for https://gitlab.com/gitlab-org/gitlab/-/issues/373321. This will mean when the flag is toggled on, the feature will go live in both GitLab.com and the App Home.\n\nNote that changes to the App Home do not need a release of the Slack app.\n\n## Visual design proposal\nSee design management for mockups.\n\n### Design source\n:computer: [Block kit](https://app.slack.com/block-kit-builder/T0187G888CD#%7B%22type%22:%22home%22,%22blocks%22:%5B%7B%22type%22:%22header%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22:sparkles:%20%20Welcome%20to%20GitLab%20for%20Slack!%22%7D%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22mrkdwn%22,%22text%22:%22GitLab%20for%20Slack%20now%20supports%20channel-based%20notifications.%20Let%20your%20team%20know%20when%20new%20issues%20are%20created%20or%20new%20CI/CD%20jobs%20are%20run.%20%3Chttps://docs.gitlab.com/ee/user/project/integrations/gitlab_slack_application.html%7CLearn%20more%3E.%22,%22verbatim%22:false%7D%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22mrkdwn%22,%22text%22:%22*Channel%20notifications*%20%22%7D%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22mrkdwn%22,%22text%22:%22To%20start%20using%20notifications,%20%3Chttps://docs.gitlab.com/ee/user/project/integrations/gitlab_slack_application.html#configuration%7Cenable%20the%20Slack%20integration%3E%20in%20your%20project%20settings.%22,%22verbatim%22:false%7D%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22mrkdwn%22,%22text%22:%22*Slash%20commands*%20%22%7D%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22mrkdwn%22,%22text%22:%22Control%20GitLab%20from%20Slack%20with%20%3Chttps://docs.gitlab.com/ee/user/project/integrations/gitlab_slack_application.html#usage%7Cslash%20commands%3E.%20%5Cn%20%20For%20a%20list%20of%20available%20commands,%20enter%20%60/gitlab%20help%60.%20%5Cn%5Cn%20To%20start%20using%20slash%20commands,%20connect%20your%20GitLab%20account.%22,%22verbatim%22:false%7D%7D,%7B%22type%22:%22actions%22,%22elements%22:%5B%7B%22type%22:%22button%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22Connect%20your%20GitLab%20account%22,%22emoji%22:true%7D,%22style%22:%22primary%22,%22value%22:%22click_me_123%22,%22action_id%22:%22actionId-0%22%7D%5D%7D%5D%7D)","state":"closed","created_at":"2022-09-16T20:58:48.732Z","updated_at":"2022-12-20T18:37:52.743Z","closed_at":"2022-12-20T18:37:52.657Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Integrations","Deliverable","SUS::Impacting","Technical Writing","UI text","automation:ux-missing-labels","backend","backend-weight::1","devops::manage","group::integrations","section::dev","type::feature","workflow::verification"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":10222550,"username":"g.hickman","name":"Grant Hickman","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10222550/avatar.png","web_url":"https://gitlab.com/g.hickman"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":26,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374139","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374139","notes":"https://gitlab.com/api/v4/projects/278964/issues/374139/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374139/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374139","relative":"#374139","full":"gitlab-org/gitlab#374139"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8670,"epic":{"id":595009,"iid":8670,"title":"Extend Slack app to support notifications","url":"/groups/gitlab-org/-/epics/8670","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115193010,"iid":374082,"project_id":278964,"title":"Repository import still allows to import 40 hexadecimal branches","description":"Related to previously closed issue https://gitlab.com/gitlab-org/gitlab/-/issues/361179\n\nAs flagged by @proglottis in https://gitlab.com/gitlab-org/security/gitlab/-/issues/714#note_1092057356 it's still possible to perform repository import and have 40 hexadecimal branch imported. \n\nWhen using import by URL the `after_import` method is still called, `remove_prohibited_branches` returns early because [`exists?`](https://gitlab.com/gitlab-org/gitlab/blob/master/app/models/repository.rb#L1178-1178) returns false, which looks like a cached value which should be true at this point. \n\n### Potential solution \n\nPerhaps these 2 method calls are in a wrong order: \n\n```\ndef after_import\n    repository.remove_prohibited_branches\n    repository.expire_content_cache\n...\n```","state":"closed","created_at":"2022-09-16T09:22:32.558Z","updated_at":"2023-01-08T20:09:51.948Z","closed_at":"2022-12-01T04:26:01.649Z","closed_by":{"id":9820844,"username":"nmalcolm","name":"Nick Malcolm","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9820844/avatar.png","web_url":"https://gitlab.com/nmalcolm"},"labels":["Category:Importers","Deliverable","backend","bug::vulnerability","devops::manage","group::import","priority::2","section::dev","security","severity::3","type::bug","workflow::awaiting security release"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-11-26","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374082","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374082","notes":"https://gitlab.com/api/v4/projects/278964/issues/374082/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374082/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374082","relative":"#374082","full":"gitlab-org/gitlab#374082"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115187782,"iid":374073,"project_id":278964,"title":"[Feature flag] Rollout of `container_registry_tags_list_default_page_size`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout MR 1 of [the issue](https://gitlab.com/gitlab-org/gitlab/-/issues/359277) on production,\nthat is currently behind the `container_registry_tags_list_default_page_size` feature flag.\n\nThere is currently a data migration happening for container repositories on ~\"gitlab.com\". As such, a given container repository can be either waiting to be migrated or migrated.\n\nThe Container Registry API endpoint that returns the list of tags associated with a given container repository doesn't behave consistently:\n1. On a non migrated container repository, pagination parameters are ignored and _all_ tags are returned.\n1. On a migrated container repository, pagination works and the default values are applied. The default page size is `100`.\n\n(2.) is an issue as for migrated container repositories, the ~rails backend will get only the first `100` tags. This leads to a confusing ~UX and impacts other features such as cleanup policies for container repositories.\n\nTo quickly address the situation, we are \"forcing\" a default page size of `10 000`. This should [cover](https://gitlab.com/gitlab-org/container-registry/-/issues/384#note_583896356) `99.99%` of the container repositories on ~\"gitlab.com\".\n\nGiven that migrated repositories involves a ~database query, asking for a page size of `10 000` tags can bring some surprises.\n\nThis ~\"feature flag\" controls if we force the `10 000` page size or not.\n\n## Owners\n\n- Team: Package\n- Most appropriate slack channel to reach out to: `#s_package`\n- Best individual to reach out to: @10io\n- PM: @trizzi \n- EM: @michelletorres \n\n## Stakeholders\n\nn / a\n\n## Expectations\n\n### What are we expecting to happen?\n\nThe max amount of tags returned for container repositories is bumped to `10 000`, up from `100`.\n\n### When is the feature viable?\n\nWhen it's fully enabled and there are no issues on the container registry side.\n\n### What might happen if this goes wrong?\n\nContainer Registry could have issues fulfilling the tags API request due to the `10 000` page size requested.\n\n### What can we monitor to detect problems with this?\n\nP95 execution time of the tags list endpoint (scoped to calls made by ~rails) : https://log.gprd.gitlab.net/goto/05be4170-39b2-11ed-b86b-d963a1a6788e.\n\nStatus codes distribution on the tags list endpoint (scoped to calls made by ~rails): https://log.gprd.gitlab.net/goto/0c4bd920-39b3-11ed-b86b-d963a1a6788e\n\n### What can we check for monitoring production after rollouts?\n\nStatus codes distribution on the tags list endpoint (scoped to calls made by ~rails): https://log.gprd.gitlab.net/goto/0c4bd920-39b3-11ed-b86b-d963a1a6788e\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set container_registry_tags_list_default_page_size true --dev --staging --staging-ref`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com container_registry_tags_list_default_page_size true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com container_registry_tags_list_default_page_size true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e container_registry_tags_list_default_page_size true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [x] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [x] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set container_registry_tags_list_default_page_size \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [x] `/chatops run feature set container_registry_tags_list_default_page_size 25 --random`\n    - [x] `/chatops run feature set container_registry_tags_list_default_page_size 50 --random`\n    - [x] `/chatops run feature set container_registry_tags_list_default_page_size 75 --random`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set container_registry_tags_list_default_page_size true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete container_registry_tags_list_default_page_size --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `container_registry_tags_list_default_page_size`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `container_registry_tags_list_default_page_size` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete container_registry_tags_list_default_page_size --dev --staging --staging-ref --production`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set container_registry_tags_list_default_page_size false\n```","state":"closed","created_at":"2022-09-16T08:09:42.117Z","updated_at":"2022-11-08T23:57:23.119Z","closed_at":"2022-10-05T16:26:14.014Z","closed_by":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"labels":["Category:Container Registry","automation:ml","automation:ml wrong","devops::package","feature flag","feature::addition","group::container registry","package:active","section::ops","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"}],"author":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"type":"ISSUE","assignee":{"id":3983112,"username":"10io","name":"David Fernandez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c42a43361e29bf7ed36cf8e54cb54bb?s=80\u0026d=identicon","web_url":"https://gitlab.com/10io"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374073","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":48,"completed_count":20},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"20 of 48 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374073","notes":"https://gitlab.com/api/v4/projects/278964/issues/374073/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374073/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374073","relative":"#374073","full":"gitlab-org/gitlab#374073"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115165391,"iid":374027,"project_id":278964,"title":"Invalidate gitlab-pages internal api cache with 'Pages domain created' event","description":"# Context\n\nFor `GET /api/internal/pages?host=HOST`. This is the API endpoint that gets called by GitLab pages when a request comes in and we haven't cached in gitlab-pages what needs to be served for this.\n\nGiven that the `satisfiedThreshold` for writing headers for a response is 0.5s, ideally, this would be even faster than the threshold set for `web-pages`. We think 0.5s for serving a static page is an acceptable target.\n\nSince this information generally does not change a lot, we could add a cache for the JSON response of this endpoint to help the metrics.\n\nThe cache introduced in https://gitlab.com/gitlab-org/gitlab/-/issues/363867, needs to be invalidated in some application events (https://gitlab.com/groups/gitlab-org/-/epics/7920#events-that-invalidate-the-cache).\n\n## What is this issue\n\nThis issue is introduce the cache invalidation for the *Pages domain created* event.\n\nTo invalidate the cache the event must contain at least:\n- the project id\n- project namespace id\n- project root namespace id","state":"closed","created_at":"2022-09-15T19:52:34.348Z","updated_at":"2022-10-04T18:17:58.539Z","closed_at":"2022-10-04T18:17:58.517Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Pages","Error Budget Improvement","backend","devops::create","group::editor","missed:15.4","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374027","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374027","notes":"https://gitlab.com/api/v4/projects/278964/issues/374027/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374027/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374027","relative":"#374027","full":"gitlab-org/gitlab#374027"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7920,"epic":{"id":503228,"iid":7920,"title":"Pages Internal API Caching","url":"/groups/gitlab-org/-/epics/7920","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115164868,"iid":374025,"project_id":278964,"title":"Add tracking for individual filter tabs in pipeline list view","description":"## Problem\nWe have started to track the overall number of clicks on the filtered tabs on the pipeline list views but it isn't telling the story around which one is useful for users. To understand that we'd need to get data  on the number of clicks for those individual tabs.\n\n## Structured Snowplow events to track\n\n* Category: The page or backend area of the application. Unless infeasible, please use the Rails page attribute by default in the frontend, and namespace + classname on the backend. If you're not sure what it is, work with your engineering manager to figure it out.\n* Action: A string that is used to define the user action. The first word should always describe the action or aspect: clicks should be `click`, activations should be `activate`, creations should be `create`, etc. Use underscores to describe what was acted on; for example, activating a form field would be `activate_form_input`. An interface action like clicking on a dropdown would be `click_dropdown`, while a behavior like creating a project record from the backend would be `create_project`\n* Label: Optional. The specific element, or object that's being acted on. This is either the label of the element (e.g. a tab labeled 'Create from template' may be `create_from_template`) or a unique identifier if no text is available (e.g. closing the Groups dropdown in the top navbar might be `groups_dropdown_close`), or it could be the name or title attribute of a record being created.\n* Property: Optional. Any additional property of the element, or object being acted on.\n* Value: Optional, numeric. Describes a numeric value (decimal) directly related to the event. This could be the value of an input (e.g. `10` when clicking `internal` visibility)\n\n| Label | Action | Property | Image |\n| ------ | ------ | ------ | ------ |\n| `pipelines_filter_tabs` | `click_filter_tabs` | `all` | ![Frame_1](/uploads/5902e302d375018e57c973e08a3042f6/Frame_1.png) |\n| `pipelines_filter_tabs` | `click_filter_tabs` | `finished` | ![Frame_2](/uploads/bfc380be6a6496a76b9bc712cfbdce05/Frame_2.png) |\n| `pipelines_filter_tabs` | `click_filter_tabs` | `branches` | ![Frame_3](/uploads/46fb303f24e5cdff5f637cd1ca3c1af9/Frame_3.png) |\n| `pipelines_filter_tabs` | `click_filter_tabs` | `tags` | ![Frame_4](/uploads/c45981e20bf22a96cef5cc2a90fc5dba/Frame_4.png) |\n\n## Snowplow event tracking checklist\n* [ ] Engineering complete work and deploy changes to GitLab SaaS\n* [ ] Verify the new Snowplow events are listed in the [Snowplow Event Exploration](https://app.periscopedata.com/app/gitlab/539181/Snowplow-Event-Exploration---last-30-days) dashboard\n* [ ] Create chart(s) to track your event(s) in the relevant dashboard\n  * [ ] Use the [Chart Snowplow Actions](https://app.periscopedata.com/app/gitlab/snippet/Chart-Snowplow-Actions/5546da87ae2c4a3fbc98415c88b3eedd/edit) SQL snippet to quickly visualize usage. See [example](https://app.periscopedata.com/app/gitlab/737489/Health-Group-Dashboard?widget=9797112\u0026udv=0)\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2022-09-15T19:41:52.008Z","updated_at":"2022-09-30T18:11:53.997Z","closed_at":"2022-09-23T17:40:49.239Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","devops::verify","feature::enhancement","frontend","group::pipeline execution","section::ops","snowplow tracking events","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":6115425,"username":"v_mishra","name":"Veethika M","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f09a3a0badac17a57e28b4e18a45c1c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/v_mishra"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374025","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374025","notes":"https://gitlab.com/api/v4/projects/278964/issues/374025/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374025/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374025","relative":"#374025","full":"gitlab-org/gitlab#374025"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115162291,"iid":374019,"project_id":278964,"title":"Partitioning Tooling: Add helper to update foreign keys referencing zero partitions","description":"When we created the [zero partition helper](), we added functionality to re-attach foreign keys on the updated table, but we didn't update foreign keys that reference the original child table. See [comment](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96815#note_1101396901).\n\n## Deliverable\n- [x] A helper is added to update foreign key references\n- [x] Update [zero partition helper documentation](https://docs.gitlab.com/ee/development/database/table_partitioning.html#step-5---enforce-foreign-key-constraint)","state":"closed","created_at":"2022-09-15T18:29:14.342Z","updated_at":"2022-11-08T01:14:55.301Z","closed_at":"2022-10-28T12:12:25.128Z","closed_by":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"labels":["Category:Database","database::active","devops::data_stores","group::database","missed:15.5","section::enablement","type::feature","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":480097,"username":"alexives","name":"Alex Ives","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480097/avatar.png","web_url":"https://gitlab.com/alexives"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374019","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374019","notes":"https://gitlab.com/api/v4/projects/278964/issues/374019/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374019/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374019","relative":"#374019","full":"gitlab-org/gitlab#374019"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8476,"epic":{"id":575271,"iid":8476,"title":"Add tools to support ci partitioning","url":"/groups/gitlab-org/-/epics/8476","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115161216,"iid":374014,"project_id":278964,"title":"Migrate away from select2 in app/assets/javascripts/issuable/issuable_form.js","description":"The [`IssuableForm#initTargetBranchDropdown`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/assets/javascripts/issuable/issuable_form.js#L218-259) method seems to be initializing `select2` instances on `.js-target-branch-select` selectors. However, we don't seem to be rendering `.js-target-branch-select` anywhere in the codebase, so we might be able to get rid of this method altogether.\n\nInternally, the method leverages the [`AutoWidthDropdownSelect`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/assets/javascripts/issuable/auto_width_dropdown_select.js) class which would likely become unused if the method was removed. We should consider deleting `app/assets/javascripts/issuable/auto_width_dropdown_select.js` as well.\n\n# Implementation plan\n\n- [ ] Remove the method after having confirmed that it's not used anymore.\n- [ ] Delete `app/assets/javascripts/issuable/auto_width_dropdown_select.js` if it isn't used anymore.","state":"closed","created_at":"2022-09-15T18:00:18.444Z","updated_at":"2022-11-22T18:27:39.822Z","closed_at":"2022-10-21T17:28:44.665Z","closed_by":{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"},"labels":["devops::manage","frontend","group::foundations","maintenance::refactor","section::dev","type::maintenance","workflow::in review"],"milestone":null,"assignees":[{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":1125848,"username":"samdbeckham","name":"Sam Beckham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1125848/avatar.png","web_url":"https://gitlab.com/samdbeckham"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374014","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374014","notes":"https://gitlab.com/api/v4/projects/278964/issues/374014/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374014/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374014","relative":"#374014","full":"gitlab-org/gitlab#374014"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8738,"epic":{"id":601571,"iid":8738,"title":"Remove select2 implementations","url":"/groups/gitlab-org/-/epics/8738","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115160944,"iid":374013,"project_id":278964,"title":"Remove unused SelectsHelper#namespace_select_tag method","description":"The [`SelectsHelper#namespace_select_tag`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/helpers/selects_helper.rb#L42-45) method seems to be unused and should be removed.\n\n# Implementation plan\n\n- [x] Remove the method after having confirmed that it is unused.","state":"closed","created_at":"2022-09-15T17:51:46.655Z","updated_at":"2022-11-22T18:27:40.447Z","closed_at":"2022-09-30T10:13:40.101Z","closed_by":{"id":181229,"username":"leipert","name":"Lukas 'Eipi' Eipert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/19a1f1260fa70323f35bc508927921a2?s=80\u0026d=identicon","web_url":"https://gitlab.com/leipert"},"labels":["backend","devops::manage","group::foundations","maintenance::refactor","section::dev","type::maintenance","workflow::ready for development"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":11222623,"username":"sarahgerman","name":"Sarah German","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2038e1801cefeeed3de4d694f87aadcd?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahgerman"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":11222623,"username":"sarahgerman","name":"Sarah German","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2038e1801cefeeed3de4d694f87aadcd?s=80\u0026d=identicon","web_url":"https://gitlab.com/sarahgerman"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374013","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374013","notes":"https://gitlab.com/api/v4/projects/278964/issues/374013/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374013/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374013","relative":"#374013","full":"gitlab-org/gitlab#374013"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8738,"epic":{"id":601571,"iid":8738,"title":"Remove select2 implementations","url":"/groups/gitlab-org/-/epics/8738","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115160499,"iid":374012,"project_id":278964,"title":"Remove select2-related code from app/assets/javascripts/users_select/index.js","description":"Once the migrations from https://gitlab.com/groups/gitlab-org/-/epics/8752 are completed, we should get rid of any leftover select2-related code from [`app/assets/javascripts/users_select/index.js`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/assets/javascripts/users_select/index.js).\n\nWe might also be able to get rid of the [`SelectsHelper#users_select_tag`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/helpers/selects_helper.rb#L4-26) method, unless it is still being used in the new implementations.","state":"closed","created_at":"2022-09-15T17:45:51.052Z","updated_at":"2022-11-22T18:27:41.071Z","closed_at":"2022-10-27T13:17:54.164Z","closed_by":{"id":181229,"username":"leipert","name":"Lukas 'Eipi' Eipert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/19a1f1260fa70323f35bc508927921a2?s=80\u0026d=identicon","web_url":"https://gitlab.com/leipert"},"labels":["devops::manage","frontend","group::foundations","maintenance::refactor","meta","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":181229,"username":"leipert","name":"Lukas 'Eipi' Eipert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/19a1f1260fa70323f35bc508927921a2?s=80\u0026d=identicon","web_url":"https://gitlab.com/leipert"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":181229,"username":"leipert","name":"Lukas 'Eipi' Eipert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/19a1f1260fa70323f35bc508927921a2?s=80\u0026d=identicon","web_url":"https://gitlab.com/leipert"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374012","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374012","notes":"https://gitlab.com/api/v4/projects/278964/issues/374012/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374012/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374012","relative":"#374012","full":"gitlab-org/gitlab#374012"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8752,"epic":{"id":602462,"iid":8752,"title":"Migrate ajax-users-select away from select2","url":"/groups/gitlab-org/-/epics/8752","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115159823,"iid":374010,"project_id":278964,"title":"Migrate app/assets/javascripts/groups_select.js away from select2","description":"The [`app/assets/javascripts/groups_select.js`](https://gitlab.com/gitlab-org/gitlab/-/blob/8ddcc25def3eaf7c5423974146bc62d5e062dcd6/app/assets/javascripts/groups_select.js) script initializes `select2` instances on all `.ajax-groups-select` selectors. The selector is being applied by the [`SelectsHelper#groups_select_tag`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/helpers/selects_helper.rb#L28-40) method which we currently call in two views:\n\n| View | Preview |\n| ------ | ------ |\n| [`ee/app/views/admin/application_settings/_custom_templates_form.html.haml#21`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/ee/app/views/admin/application_settings/_custom_templates_form.html.haml#L21) | ![ee_app_views_admin_application_settings__custom_templates_form.html.haml](/uploads/16724890571ac7898a59d2f0ab2820a2/ee_app_views_admin_application_settings__custom_templates_form.html.haml.png) |\n| [`ee/app/views/groups/_custom_project_templates_setting.html.haml#21`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/ee/app/views/groups/_custom_project_templates_setting.html.haml#L21) | ![ee_app_views_groups__custom_project_templates_setting.html.haml](/uploads/a0cc3539dc9dbfcc4e133d86f81f6ffb/ee_app_views_groups__custom_project_templates_setting.html.haml.png) |\n\nAs part of this issue, we would like to migrate these selectors away from `select2`.\n\nIn both cases, we are rendering groups selectors with async filtering capability where a single selection is supported.\n\nIt would be great to keep both selectors consolidated into a single implementation if possible.\nThere currently exist two Vue group selector implementations:\n* [`ee/app/assets/javascripts/boards/components/group_select.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/ee/app/assets/javascripts/boards/components/group_select.vue)\n* [`app/assets/javascripts/invite_members/components/group_select.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/assets/javascripts/invite_members/components/group_select.vue)\n\nThey both seem to support the features we need for this migration. It would be great to look into them to confirm, and move them to the `vue_shared` directory so they can be easily reused.\n\n## Implementation plan\n- [x] Create the `vue_group_select` feature flag.\n- [x] Migrate to a shared group selector component.\n- [x] Leverage infinite scrolling once `GlCollapsibleListbox` supports it.\n- [x] Remove the `vue_group_select` feature flag (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/107847).\n- [x] The following tasks are covered in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/108323:\n  - [x] Replace the current mount point with a `.js-vue-group-select` for the Vue app: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98597#note_1166269406.\n  - [x] Move the label to the Vue app, wrap everything within a `GlFormGroup`, confirm all works in terms of a11y: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98597#note_1166269400.\n  - [x] Cleanup `app/helpers/selects_helper.rb`. We might be able to get rid of `SelectsHelper#groups_select_tag` unless the new implementation relies on it.","state":"closed","created_at":"2022-09-15T17:29:39.844Z","updated_at":"2023-01-12T13:46:35.552Z","closed_at":"2023-01-12T13:46:35.504Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["OKR","UX","component:dropdown","devops::manage","dropdown::listbox","frontend","group::foundations","maintenance::refactor","missed:15.6","missed:15.7","section::dev","type::maintenance"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/374010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":3,"blocking_issues_count":1,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/374010","notes":"https://gitlab.com/api/v4/projects/278964/issues/374010/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/374010/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#374010","relative":"#374010","full":"gitlab-org/gitlab#374010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8738,"epic":{"id":601571,"iid":8738,"title":"Remove select2 implementations","url":"/groups/gitlab-org/-/epics/8738","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115148181,"iid":373999,"project_id":278964,"title":"Add API endpoint to view details of the provided token","description":"Recently there has been added a new endpoint to delete a token provided in the header of the request https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/api/personal_access_tokens/self_revocation.rb\n\nSimilarly, add `GET /personal_access_token/self` to view provided token details. It's particularly useful in ~\"group::import\" which can be used in GitLab Migration feature, where we need to check and see provided token scopes. Such endpoint allows us to bounce off some of the import attempts early, without failing mid migration (if provided token doesn't have sufficient scope).","state":"closed","created_at":"2022-09-15T14:59:20.704Z","updated_at":"2022-11-14T23:23:11.532Z","closed_at":"2022-09-22T11:43:37.332Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Category:Importers","Importer:GitLab Migration","Next Up","backend","devops::manage","group::import","section::dev","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373999","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373999","notes":"https://gitlab.com/api/v4/projects/278964/issues/373999/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373999/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373999","relative":"#373999","full":"gitlab-org/gitlab#373999"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8984,"epic":{"id":623970,"iid":8984,"title":"GitLab Migration - Transparency towards the user","url":"/groups/gitlab-org/-/epics/8984","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":115139321,"iid":373991,"project_id":278964,"title":"DRAFT: \"Play\" button in Environment index page should point the last CREATED deployment instead of last SUCCESS deployment.","description":"## Problem\n\nIn [the previous iteration](https://gitlab.com/gitlab-org/gitlab/-/issues/356420), we changed the **play button** behavior in the Environment index page, however, this button currently points last **SUCCESS** deployment instead of the last **CREATED** deployment, hence it's actually pointing the same deployment job with the current deployment.\n\nThis play button should point the latest deployment job to the environment, such as the latest manual deployment that hasn't been executed.\n\n## Proposal\n\nThe manual actions displayed is driven by [`actions()`](https://gitlab.com/gitlab-org/gitlab/blob/9b1ee802eb74b2b39d19102b4feb2d238588b447/app/assets/javascripts/environments/components/new_environment_item.vue#L112-112) in `new_environment_item.vue` which reads them from the environments `lastDeployment` property\n\n`last_created_deployment` needs to be exposed to the UI (or at least, it's `manual_actions`) then those actions used instead","state":"closed","created_at":"2022-09-15T13:44:47.892Z","updated_at":"2022-10-24T21:20:10.697Z","closed_at":"2022-09-27T05:10:39.930Z","closed_by":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"labels":["Category:Environment Management","bug::functional","devops::release","group::release","priority::2","section::ops","severity::2","type::bug","workflow::in dev"],"milestone":null,"assignees":[],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373991","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373991","notes":"https://gitlab.com/api/v4/projects/278964/issues/373991/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373991/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/375235"},"references":{"short":"#373991","relative":"#373991","full":"gitlab-org/gitlab#373991"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9088,"epic":{"id":633331,"iid":9088,"title":"Improve UX of promoting deployments on the Environment index page","url":"/groups/gitlab-org/-/epics/9088","group_id":9970},"iteration":null,"health_status":null},{"id":115129844,"iid":373980,"project_id":278964,"title":"[Feature flag] Cleanup escape_gitaly_refs feature flag","description":"\u003c!-- Title suggestion: [Feature flag] Cleanup escape_gitaly_refs --\u003e\n\n## Summary\n\nThis issue is to cleanup the `escape_gitaly_refs` feature flag, after the feature flag has been enabled by default for an appropriate amount of time in production.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\nRollout issue: https://gitlab.com/gitlab-org/gitlab/-/issues/366437\n\n## Owners\n\n* Team: ~\"group::source code\"\n* Most appropriate slack channel to reach out to: `#g_create_source-code-be`\n* Best individual to reach out to: @jwoodwardgl\n- PM: @sean_carroll\n\n## Expectations\n\n### What might happen if this goes wrong?\n\n\u003c!-- Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### Cleaning up the feature flag\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `escape_gitaly_refs` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status e32f65aa72e37a530266f38cfd4972fb53042585` [MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/91058/)\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete escape_gitaly_refs --dev`\n    - [ ] `/chatops run feature delete escape_gitaly_refs --staging`\n    - [ ] `/chatops run feature delete escape_gitaly_refs`\n- [ ] Close this rollout issue.","state":"closed","created_at":"2022-09-15T12:23:25.926Z","updated_at":"2022-10-21T12:01:12.845Z","closed_at":"2022-10-03T07:45:23.414Z","closed_by":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"labels":["Category:Source Code Management","Deliverable","backend","devops::create","feature flag","feature::addition","group::source code","quad-planning::complete-no-action","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"}],"author":{"id":11390638,"username":"jwoodwardgl","name":"Joe Woodward","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11390638/avatar.png","web_url":"https://gitlab.com/jwoodwardgl"},"type":"ISSUE","assignee":{"id":2167502,"username":"robotmay_gitlab","name":"Robert May","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2167502/avatar.png","web_url":"https://gitlab.com/robotmay_gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373980","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373980","notes":"https://gitlab.com/api/v4/projects/278964/issues/373980/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373980/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373980","relative":"#373980","full":"gitlab-org/gitlab#373980"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115127898,"iid":373977,"project_id":278964,"title":"Do not nullify epic references on group transfer","description":"Currently when a group is transferred, we nullify invalid epic parent references (Epic.nullify_lost_group_parents). This should be disabled/removed once cross-group referencing is allowed.","state":"closed","created_at":"2022-09-15T11:51:56.114Z","updated_at":"2022-11-28T10:20:09.483Z","closed_at":"2022-11-28T10:20:09.428Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Track Health Status","backend","devops::plan","group::product planning","section::dev","type::feature","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373977","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373977","notes":"https://gitlab.com/api/v4/projects/278964/issues/373977/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373977/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373977","relative":"#373977","full":"gitlab-org/gitlab#373977"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":115118278,"iid":373949,"project_id":278964,"title":"Add event type information for audit events using Auditor.audit in `Group Merge Request Settings`","description":"\n### Problem to solve\n\nSome audit events are named `audit_operation`. This isn't a descriptive name and makes it difficult to differentiated from other events.\n\nAdditional context is available in this [epic](https://gitlab.com/groups/gitlab-org/-/epics/8497) and in the parent [epic](https://gitlab.com/groups/gitlab-org/-/epics/8571).\n\n### Proposal\n\nAdd a meaningful `name` for the following events and actions that can be used to differentiate them from other events:\n\n| Event | Action | Location | \n| ------ | ------ | ------ |\n| `allow_author_approval` | `Update` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/audit/group_merge_request_approval_setting_changes_auditor.rb) |\n| `allow_committer_approval` | `Update` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/audit/group_merge_request_approval_setting_changes_auditor.rb) |\n| `allow_overrides_to_approver_list_per_merge_request` | `Update` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/audit/group_merge_request_approval_setting_changes_auditor.rb) |\n| `retain_approvals_on_push` | `Update` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/audit/group_merge_request_approval_setting_changes_auditor.rb) |\n| `require_password_to_approve` | `Update` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/audit/group_merge_request_approval_setting_changes_auditor.rb) |\n\n\nNaming should follow the `noun_verb` format and use the past tense. For example `ci_variable_created`.\n\nFor events created with `audit_changes` we can pass the event name using the `event_type` argument.\n\n```rb\naudit_changes(:email, as: 'email address', event_type: 'email_address_added')\n```\n\nConsider [this MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/92074) as an example of how to do this.\n\n### Implementation plan\n\n1. Add an meaningful event `name` for the events in the `Group Merge Request Settings` model listed in the proposal.\n   - The name should follow the `noun_verb` format.\n1. Update the associated specs.\n\n## Notes\n\n- [For instructions on how to setup your development environment.](https://about.gitlab.com/community/contribute/development/#setup-the-development-enviroment)\n- For any questions regarding audit events reach out to a member of the [compliance group](https://about.gitlab.com/handbook/engineering/development/dev/manage/compliance/#group-members).","state":"closed","created_at":"2022-09-15T10:12:48.996Z","updated_at":"2022-12-06T02:26:32.607Z","closed_at":"2022-11-07T18:06:09.913Z","closed_by":{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"},"labels":["Category:Audit Events","GitLab Ultimate","Hacktoberfest","Next Up","backend","devops::govern","group::compliance","priority::3","section::sec","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"}],"author":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"type":"ISSUE","assignee":{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373949","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373949","notes":"https://gitlab.com/api/v4/projects/278964/issues/373949/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373949/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373949","relative":"#373949","full":"gitlab-org/gitlab#373949"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8571,"epic":{"id":582806,"iid":8571,"title":"Add event type information for all audit events using Gitlab::Audit::Auditor.audit","url":"/groups/gitlab-org/-/epics/8571","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115118275,"iid":373946,"project_id":278964,"title":"Add event type information for audit events using Auditor.audit in `ComplianceManagement::Frameworks`","description":"\n### Problem to solve\n\nSome audit events are named `audit_operation`. This isn't a descriptive name and makes it difficult to differentiated from other events.\n\nAdditional context is available in this [epic](https://gitlab.com/groups/gitlab-org/-/epics/8497) and in the parent [epic](https://gitlab.com/groups/gitlab-org/-/epics/8571).\n\n### Proposal\n\nAdd a meaningful `name` for the following events and actions that can be used to differentiate them from other events:\n\n| Event | Action | Location | \n| ------ | ------ | ------ |\n| `Created compliance management framework` | `Create` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/services/compliance_management/frameworks/create_service.rb) |\n| `Updated compliance management framework` | `Update` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/services/compliance_management/frameworks/update_service.rb) |\n| `Deleted compliance management framework` | `Delete` | [file](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/services/compliance_management/frameworks/destroy_service.rb) |\n\n\nNaming should follow the `noun_verb` format and use the past tense. For example `ci_variable_created`.\n\nFor events created with `audit_changes` we can pass the event name using the `event_type` argument.\n\n```rb\naudit_changes(:email, as: 'email address', event_type: 'email_address_added')\n```\n\nConsider [this MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/92074) as an example of how to do this.\n\n### Implementation plan\n\n1. Add an meaningful event `name` for the events in the `ComplianceManagement::Frameworks` model listed in the proposal.\n   - The name should follow the `noun_verb` format.\n1. Update the associated specs.\n\n## Notes\n\n- [For instructions on how to setup your development environment.](https://about.gitlab.com/community/contribute/development/#setup-the-development-enviroment)\n- For any questions regarding audit events reach out to a member of the [compliance group](https://about.gitlab.com/handbook/engineering/development/dev/manage/compliance/#group-members).","state":"closed","created_at":"2022-09-15T10:12:47.549Z","updated_at":"2022-12-06T07:58:15.205Z","closed_at":"2022-11-30T19:42:31.820Z","closed_by":{"id":12187344,"username":"nrosandich","name":"Nathan Rosandich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12187344/avatar.png","web_url":"https://gitlab.com/nrosandich"},"labels":["Category:Audit Events","GitLab Ultimate","Hacktoberfest","Next Up","backend","devops::govern","group::compliance","missed:15.6","priority::3","section::sec","type::feature","workflow::ready for development"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"}],"author":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"type":"ISSUE","assignee":{"id":10467142,"username":"harsimarsandhu","name":"Harsimar Sandhu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10467142/avatar.png","web_url":"https://gitlab.com/harsimarsandhu"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373946","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373946","notes":"https://gitlab.com/api/v4/projects/278964/issues/373946/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373946/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373946","relative":"#373946","full":"gitlab-org/gitlab#373946"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8571,"epic":{"id":582806,"iid":8571,"title":"Add event type information for all audit events using Gitlab::Audit::Auditor.audit","url":"/groups/gitlab-org/-/epics/8571","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115103771,"iid":373928,"project_id":278964,"title":"Free users with service ping data sharing enabled can't update their group IP allowlist using API","description":"With https://gitlab.com/gitlab-org/gitlab/-/issues/364630 , we're solving a bug preventing users from updating groups' IP restriction ranges using GitLab's GUI. However, we also seem to have a similar bug in Gitlab's [API](https://docs.gitlab.com/ee/api/groups.html#update-group), as presented [here](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97768#note_1101245383). We will need to make sure that free users with service ping registration features are able to update their group IP restriction lists using our API.","state":"closed","created_at":"2022-09-15T07:58:50.604Z","updated_at":"2022-12-06T11:03:29.217Z","closed_at":"2022-12-06T11:03:29.182Z","closed_by":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"labels":["[deprecated] Accepting merge requests","backend","bug::functional","devops::analytics","group::product intelligence","priority::3","section::analytics","severity::3","type::bug","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"}],"author":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"type":"ISSUE","assignee":{"id":1863977,"username":"michold","name":"Michał Wielich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1863977/avatar.png","web_url":"https://gitlab.com/michold"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373928","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373928","notes":"https://gitlab.com/api/v4/projects/278964/issues/373928/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373928/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373928","relative":"#373928","full":"gitlab-org/gitlab#373928"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115102516,"iid":373924,"project_id":278964,"title":"API Fuzzing scanner appears to no longer be honoring FUZZAPI_OPENAPI_RELAXED_VALIDATION","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nA SaaS customer ([ZD internal link](https://gitlab.zendesk.com/agent/tickets/326082)) has reported that sometime in the last month the API Fuzzing scanner has started reporting schema validation errors despite the `FUZZAPI_OPENAPI_RELAXED_VALIDATION` variable being set, and without any changes having been made to the input OpenAPI schema configuration file.\n\nThe most recent successful job ran using version `2.0.42` of the scanner. The next failed job ran using version `2.0.54` of the scanner.\n\nI have performed limited testing and it seems that the current version `2.0.54` is not suppressing schema errors that earlier versions were.\n\nThe following output is produced when the `FUZZAPI_OPENAPI_RELAXED_VALIDATION` variable is not set:\n\n\u003cdetails\u003e\n\u003cpre\u003e\n\n07:25:39 [INF] API Security: Gitlab API Security\n07:25:39 [INF] API Security: -------------------\n07:25:39 [INF] API Security: \n07:25:39 [INF] API Security: version: 2.0.54\n07:25:39 [INF] API Security: api: http://127.0.0.1:5000\n07:25:39 [INF] API Security: config: /peach/configs/gitlab-api-fuzzing-config.yml\n07:25:39 [INF] API Security: openapi: openapi.json\n07:25:39 [INF] API Security: profile: Quick-10\n07:25:39 [INF] API Security: project: test/test\n07:25:39 [INF] API Security: security report: gl-api-fuzzing-report.json\n07:25:39 [INF] API Security: security report asset path: gl-assets\n07:25:39 [INF] API Security: ci_project_url: None\n07:25:39 [INF] API Security: ci_job_id: None\n07:25:39 [INF] API Security: service_start_timeout: 300\n07:25:39 [INF] API Security: target_url: http://example.com\n07:25:39 [INF] API Security: timeout: 30\n07:25:39 [INF] API Security: verbose: False\n07:25:39 [INF] API Security: \n07:25:39 [INF] API Security: Waiting for API Security (http://127.0.0.1:5000) to become available...\n07:25:39 [INF] API Security: Backing off 0.9 seconds afters 1 tries\n07:25:39 [INF] API Security: Backing off 1.1 seconds afters 2 tries\n07:25:42 [ERR] API Security: \n07:25:42 [ERR] API Security: An error occurred using the OpenAPI document.\n07:25:42 [ERR] API Security: . This error must be corrected to continue.\n07:25:42 [ERR] API Security: . See the troubleshooting section of the documentation for\n07:25:42 [ERR] API Security: . additional information about how to correct OpenApi document\n07:25:42 [ERR] API Security: . usage errors.\n07:25:42 [ERR] API Security: . \n07:25:42 [ERR] API Security: .\n07:25:42 [ERR] API Security: . Error, OpenAPI document contains schema errors.\n07:25:42 [ERR] API Security: .\n07:25:42 [ERR] API Security: . Setting the variable FUZZAPI_OPENAPI_RELAXED_VALIDATION will enable relaxed validation of the OpenAPI document.\n07:25:42 [ERR] API Security: . Relaxed validation performs a less strict document validation. Relaxed validation should only be enabled\n07:25:42 [ERR] API Security: . After reviewing the validation errors below and determining they are false positives.\n07:25:42 [ERR] API Security: .\n07:25:42 [ERR] API Security: . Schema errors: \n07:25:42 [ERR] API Security: .  + Showing up to 5 of 173 schema errors.\n07:25:42 [ERR] API Security: .    To see all schema errors, check out the artifact file: gl-api-security-worker-entry.log.\n07:25:42 [ERR] API Security: .    In the right panel, click on Download to download all artifacts, or Browse and select \n07:25:42 [ERR] API Security: .    the gl-api-security-worker-entry.log file. \n07:25:42 [ERR] API Security: .  + YAML was converted to JSON and stored in artifact: 'gl-openapi.json'. Schema errors refer to the JSON OpenAPI equivalent.\n07:25:42 [ERR] API Security: .\n07:25:42 [ERR] API Security: . - JSON is valid against no schemas from 'oneOf'. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1]. Line: 73, Pos: 11.\n07:25:42 [ERR] API Security: .   - JSON is valid against no schemas from 'oneOf'. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1].schema. Line: 77, Pos: 23.\n07:25:42 [ERR] API Security: .     - Invalid type. Expected Boolean but got Number. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1].schema.exclusiveMinimum. Line: 81, Pos: 37.\n07:25:42 [ERR] API Security: .     - Required properties are missing from object: $ref. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1].schema. Line: 77, Pos: 23.\n07:25:42 [ERR] API Security: .   - Required properties are missing from object: $ref. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1]. Line: 73, Pos: 11.\n07:25:42 [ERR] API Security: .\n07:25:42 [ERR] API Security: Analyzer has failed due to an invalid OpenAPI document.\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n\nand when it is set:\n\n\u003cdetails\u003e\n\u003cpre\u003e\n\n07:35:14 [INF] API Security: Gitlab API Security\n07:35:14 [INF] API Security: -------------------\n07:35:14 [INF] API Security: \n07:35:14 [INF] API Security: version: 2.0.54\n07:35:14 [INF] API Security: api: http://127.0.0.1:5000\n07:35:14 [INF] API Security: config: /peach/configs/gitlab-api-fuzzing-config.yml\n07:35:14 [INF] API Security: openapi: openapi.json\n07:35:14 [INF] API Security: openapi_relaxed_validation: Enabled\n07:35:14 [INF] API Security: profile: Quick-10\n07:35:14 [INF] API Security: project: test/test\n07:35:14 [INF] API Security: security report: gl-api-fuzzing-report.json\n07:35:14 [INF] API Security: security report asset path: gl-assets\n07:35:14 [INF] API Security: ci_project_url: None\n07:35:14 [INF] API Security: ci_job_id: None\n07:35:14 [INF] API Security: service_start_timeout: 300\n07:35:14 [INF] API Security: target_url: http://example.com\n07:35:14 [INF] API Security: timeout: 30\n07:35:14 [INF] API Security: verbose: False\n07:35:14 [INF] API Security: \n07:35:14 [INF] API Security: Waiting for API Security (http://127.0.0.1:5000) to become available...\n07:35:14 [INF] API Security: Backing off 0.9 seconds afters 1 tries\n07:35:15 [INF] API Security: Backing off 0.4 seconds afters 2 tries\n07:35:17 [ERR] API Security: \n07:35:17 [ERR] API Security: An error occurred using the OpenAPI document.\n07:35:17 [ERR] API Security: . This error must be corrected to continue.\n07:35:17 [ERR] API Security: . See the troubleshooting section of the documentation for\n07:35:17 [ERR] API Security: . additional information about how to correct OpenApi document\n07:35:17 [ERR] API Security: . usage errors.\n07:35:17 [ERR] API Security: . \n07:35:17 [ERR] API Security: .\n07:35:17 [ERR] API Security: . Error, OpenAPI document contains schema errors.\n07:35:17 [ERR] API Security: .\n07:35:17 [ERR] API Security: . Schema errors: \n07:35:17 [ERR] API Security: .  + Showing up to 5 of 173 schema errors.\n07:35:17 [ERR] API Security: .    To see all schema errors, check out the artifact file: gl-api-security-worker-entry.log.\n07:35:17 [ERR] API Security: .    In the right panel, click on Download to download all artifacts, or Browse and select \n07:35:17 [ERR] API Security: .    the gl-api-security-worker-entry.log file. \n07:35:17 [ERR] API Security: .  + YAML was converted to JSON and stored in artifact: 'gl-openapi.json'. Schema errors refer to the JSON OpenAPI equivalent.\n07:35:17 [ERR] API Security: .\n07:35:17 [ERR] API Security: . - JSON is valid against no schemas from 'oneOf'. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1]. Line: 73, Pos: 11.\n07:35:17 [ERR] API Security: .   - JSON is valid against no schemas from 'oneOf'. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1].schema. Line: 77, Pos: 23.\n07:35:17 [ERR] API Security: .     - Invalid type. Expected Boolean but got Number. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1].schema.exclusiveMinimum. Line: 81, Pos: 37.\n07:35:17 [ERR] API Security: .     - Required properties are missing from object: $ref. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1].schema. Line: 77, Pos: 23.\n07:35:17 [ERR] API Security: .   - Required properties are missing from object: $ref. In: paths['/ad-group-audience/extract/{customer_id}'].post.parameters[1]. Line: 73, Pos: 11.\n07:35:17 [ERR] API Security: .\n07:35:17 [ERR] API Security: Analyzer has failed due to an invalid OpenAPI document.\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\nI suspect MR [Move validation for API Scan Options from worker-entry to scanner](https://gitlab.com/gitlab-org/security-products/analyzers/api-fuzzing-src/-/merge_requests/678) may be responsible for the change in behavior.","state":"closed","created_at":"2022-09-15T07:39:33.673Z","updated_at":"2022-10-13T14:04:23.247Z","closed_at":"2022-09-30T17:50:23.179Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:Fuzz Testing","automation:ml","automation:ml wrong","customer","devops::secure","group::dynamic analysis","priority::2","section::sec","severity::3","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"},{"id":7488329,"username":"herbmadrigal","name":"Herber Madrigal","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/7488329/avatar.png","web_url":"https://gitlab.com/herbmadrigal"}],"author":{"id":8103099,"username":"jfarmiloe","name":"Justin Farmiloe","state":"active","avatar_url":"https://secure.gravatar.com/avatar/026e1a7c4797d78ad2de352d92a4c51d?s=80\u0026d=identicon","web_url":"https://gitlab.com/jfarmiloe"},"type":"ISSUE","assignee":{"id":1523140,"username":"DavidNelsonGL","name":"David Nelson","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1523140/avatar.png","web_url":"https://gitlab.com/DavidNelsonGL"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373924","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373924","notes":"https://gitlab.com/api/v4/projects/278964/issues/373924/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373924/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373924","relative":"#373924","full":"gitlab-org/gitlab#373924"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115099327,"iid":373922,"project_id":278964,"title":"Follow-up from \"Cleanup attention request related system notes\"","description":"We need to remove the temporary index `tmp_index_system_note_metadata_on_attention_request_actions` which was introduced in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97753","state":"closed","created_at":"2022-09-15T06:52:00.174Z","updated_at":"2022-12-29T03:01:27.445Z","closed_at":"2022-09-28T07:53:03.485Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["Deliverable","backend","devops::create","group::code review","maintenance::removal","quad-planning::complete-no-action","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373922","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373922","notes":"https://gitlab.com/api/v4/projects/278964/issues/373922/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373922/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373922","relative":"#373922","full":"gitlab-org/gitlab#373922"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115091294,"iid":373910,"project_id":278964,"title":"Status icon is not displayed when the status text is empty","description":"It seems wrong that we don't display status icon when status text is not provided. I think this might be a mistake.\n\n## With status text\n\n![Screen_Shot_2022-09-15_at_8.06.45_am](/uploads/579b847074dc8c86084d0551a55dd4ac/Screen_Shot_2022-09-15_at_8.06.45_am.png)\n\n## Without status text\n\n![Screen_Shot_2022-09-15_at_8.04.47_am](/uploads/bd15133b91b51be8bace56aab8367cac/Screen_Shot_2022-09-15_at_8.04.47_am.png)","state":"closed","created_at":"2022-09-15T02:23:18.487Z","updated_at":"2022-10-13T14:04:57.093Z","closed_at":"2022-09-23T21:03:01.583Z","closed_by":{"id":5413811,"username":"peterhegman","name":"Peter Hegman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/459d8635e9ab17a052c00ead1d7bf1e6?s=80\u0026d=identicon","web_url":"https://gitlab.com/peterhegman"},"labels":["SUS::Impacting","UX","[deprecated] Accepting merge requests","bug::ux","devops::manage","frontend","group::organization","section::dev","severity::3","type::bug","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[],"author":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373910","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373910","notes":"https://gitlab.com/api/v4/projects/278964/issues/373910/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373910/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373910","relative":"#373910","full":"gitlab-org/gitlab#373910"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":270,"epic":{"id":560,"iid":270,"title":"User status messages","url":"/groups/gitlab-org/-/epics/270","group_id":9970,"human_readable_end_date":"Feb 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115091054,"iid":373908,"project_id":278964,"title":"Validate environment_id foreign key on deployments table","description":"# Summary\n\nThe foreign key for `environment_id` on the `deployments` table is currently `NOT VALID` (https://gitlab.com/gitlab-org/gitlab/-/blob/master/db/structure.sql#L32250):\n\n```sql\nALTER TABLE ONLY deployments\n    ADD CONSTRAINT fk_009fd21147 FOREIGN KEY (environment_id) REFERENCES environments(id) ON DELETE CASCADE NOT VALID;\n```\n\nThis foreign key  was [introduced](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/64585) last year, and we could not validate it right away due to orphaned deployments. Orphaned rows have been [cleaned up](https://gitlab.com/gitlab-org/gitlab/-/issues/335071), so we should be okay to validate the foreign key now.\n\n# Implementation\n\n```ruby\nvalidate_foreign_key :deployments, :environment_id\n```\n\nThe validation may need to be run in a background migration as it will probably take long to run. See https://docs.gitlab.com/ee/development/database/add_foreign_key_to_existing_column.html#validate-the-foreign-key for docs on foreign key validation.","state":"closed","created_at":"2022-09-15T02:14:56.626Z","updated_at":"2022-11-10T20:46:28.431Z","closed_at":"2022-11-10T20:46:28.364Z","closed_by":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"labels":["Category:Environment Management","Release::P1","backend","devops::release","group::release","section::ops","type::maintenance","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"}],"author":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"type":"ISSUE","assignee":{"id":4373269,"username":"ali-gitlab","name":"Alishan Ladhani","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4373269/avatar.png","web_url":"https://gitlab.com/ali-gitlab"},"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373908","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373908","notes":"https://gitlab.com/api/v4/projects/278964/issues/373908/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373908/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373908","relative":"#373908","full":"gitlab-org/gitlab#373908"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115088040,"iid":373902,"project_id":278964,"title":"[markdown] attach indent/outdent keys to toolbar buttons for cross platform support","description":"At the moment we're capturing keystrokes to support indent `cmd+]` and outdent `cmd+[`.  However this only reliably works on macOS. To be properly cross platform, we need to handle the `ctrl` key equivalent.\n\nAdding as toolbar buttons will handle this platform shift transparently due to the use of the `mousetrap` library.","state":"closed","created_at":"2022-09-14T23:34:22.160Z","updated_at":"2022-10-21T12:00:47.009Z","closed_at":"2022-09-27T15:57:04.668Z","closed_by":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"labels":["Deliverable","devops::plan","feature::enhancement","group::project management","markdown","section::dev","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373902","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373902","notes":"https://gitlab.com/api/v4/projects/278964/issues/373902/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373902/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373902","relative":"#373902","full":"gitlab-org/gitlab#373902"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115070251,"iid":373878,"project_id":278964,"title":"ActiveRecord::StatementInvalid: PG::InvalidColumnReference: ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in sele...","description":"https://sentry.gitlab.net/gitlab/gitlabcom/issues/3436970/?referrer=gitlab_plugin\n\n```\nPG::InvalidColumnReference: ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list\nLINE 13: ....id)) AND \"projects\".\"archived\" = FALSE) ORDER BY LOWER(\"mer...\n                                                              ^\n\n  lib/gitlab/database/load_balancing/connection_proxy.rb:104:in `block in read_using_load_balancer'\n    connection.send(...)\n  lib/gitlab/database/load_balancing/load_balancer.rb:55:in `read'\n    return yield connection\n  lib/gitlab/database/load_balancing/connection_proxy.rb:103:in `read_using_load_balancer'\n    @load_balancer.read do |connection|\n  lib/gitlab/database/load_balancing/connection_proxy.rb:48:in `select_all'\n    read_using_load_balancer(:select_all, arel, name, binds)\n  lib/gitlab/issuable_metadata.rb:67:in `map'\n    issuable_collection.map(\u0026:id)\n...\n(193 additional frame(s) were not displayed)\n\nActiveRecord::StatementInvalid: PG::InvalidColumnReference: ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list\nLINE 13: ....id)) AND \"projects\".\"archived\" = FALSE) ORDER BY LOWER(\"mer...\n                                                              ^\n```\n\nSample query: https://gitlab.com/dashboard/merge_requests?approver_usernames[]=stanhu\u0026assignee_username=stanhu\u0026release_tag=Any\u0026scope=all\u0026state=closed\n\nResulting SQL:\n\n```sql\n/*application:web,correlation_id:01GC9VGHFXXYWA5GEAYFFS61PX,endpoint_id:DashboardController#merge_requests,db_config_name:main_replica*/ SELECT DISTINCT \"merge_requests\".* FROM \"merge_requests\" INNER JOIN \"projects\" ON \"projects\".\"id\" = \"merge_requests\".\"target_project_id\" LEFT JOIN project_features ON projects.id = project_features.project_id JOIN milestone_releases ON merge_requests.milestone_id = milestone_releases.milestone_id\n             JOIN releases ON milestone_releases.release_id = releases.id WHERE (EXISTS (SELECT $1 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $2 AND (project_authorizations.project_id = projects.id) AND (project_authorizations.access_level \u003e= $3)) OR projects.visibility_level IN ($4,$5)) AND (\"project_features\".\"merge_requests_access_level\" IS NULL OR \"project_features\".\"merge_requests_access_level\" IN ($6,$7) OR (\"project_features\".\"merge_requests_access_level\" = $8 AND EXISTS (SELECT $9 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $10 AND (project_authorizations.project_id = project_features.project_id) AND (project_authorizations.access_level \u003e= $11)))) AND (\"merge_requests\".\"state_id\" IN ($12)) AND EXISTS (SELECT \"merge_request_assignees\".\"id\", \"merge_request_assignees\".\"user_id\", \"merge_request_assignees\".\"merge_request_id\", \"merge_request_assignees\".\"created_at\" FROM \"merge_request_assignees\" WHERE \"merge_request_assignees\".\"user_id\" = $13 AND (merge_request_id = merge_requests.id)) AND \"projects\".\"archived\" = $14 AND \"merge_requests\".\"id\" IN (SELECT DISTINCT \"merge_requests\".\"id\" FROM ((SELECT DISTINCT \"merge_requests\".* FROM \"merge_requests\" INNER JOIN \"projects\" ON \"projects\".\"id\" = \"merge_requests\".\"target_project_id\" INNER JOIN \"approval_merge_request_rules\" ON \"approval_merge_request_rules\".\"merge_request_id\" = \"merge_requests\".\"id\" INNER JOIN \"approval_merge_request_rules_users\" ON \"approval_merge_request_rules_users\".\"approval_merge_request_rule_id\" = \"approval_merge_request_rules\".\"id\" INNER JOIN \"users\" ON \"users\".\"id\" = \"approval_merge_request_rules_users\".\"user_id\" LEFT JOIN project_features ON projects.id = project_features.project_id JOIN milestone_releases ON merge_requests.milestone_id = milestone_releases.milestone_id\n             JOIN releases ON milestone_releases.release_id = releases.id WHERE (EXISTS (SELECT $15 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $16 AND (project_authorizations.project_id = projects.id) AND (project_authorizations.access_level \u003e= $17)) OR projects.visibility_level IN ($18,$19)) AND (\"project_features\".\"merge_requests_access_level\" IS NULL OR \"project_features\".\"merge_requests_access_level\" IN ($20,$21) OR (\"project_features\".\"merge_requests_access_level\" = $22 AND EXISTS (SELECT $23 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $24 AND (project_authorizations.project_id = project_features.project_id) AND (project_authorizations.access_level \u003e= $25)))) AND (\"merge_requests\".\"state_id\" IN ($26)) AND EXISTS (SELECT \"merge_request_assignees\".\"id\", \"merge_request_assignees\".\"user_id\", \"merge_request_assignees\".\"merge_request_id\", \"merge_request_assignees\".\"created_at\" FROM \"merge_request_assignees\" WHERE \"merge_request_assignees\".\"user_id\" = $27 AND (merge_request_id = merge_requests.id)) AND \"projects\".\"archived\" = $28 AND \"users\".\"username\" = $29 GROUP BY \"merge_requests\".\"id\" HAVING (COUNT(users.id) = $30))\nUNION\n(SELECT DISTINCT \"merge_requests\".* FROM \"merge_requests\" INNER JOIN \"projects\" ON \"projects\".\"id\" = \"merge_requests\".\"target_project_id\" INNER JOIN \"approval_merge_request_rules\" ON \"approval_merge_request_rules\".\"merge_request_id\" = \"merge_requests\".\"id\" INNER JOIN \"approval_merge_request_rules_groups\" ON \"approval_merge_request_rules_groups\".\"approval_merge_request_rule_id\" = \"approval_merge_request_rules\".\"id\" INNER JOIN \"namespaces\" ON \"namespaces\".\"id\" = \"approval_merge_request_rules_groups\".\"group_id\" AND \"namespaces\".\"type\" = $31 INNER JOIN \"members\" ON \"members\".\"source_type\" = $32 AND \"members\".\"requested_at\" IS NULL AND \"members\".\"access_level\" != $33 AND \"members\".\"source_id\" = \"namespaces\".\"id\" AND \"members\".\"type\" = $34 INNER JOIN \"users\" ON \"users\".\"id\" = \"members\".\"user_id\" LEFT JOIN project_features ON projects.id = project_features.project_id JOIN milestone_releases ON merge_requests.milestone_id = milestone_releases.milestone_id\n             JOIN releases ON milestone_releases.release_id = releases.id WHERE (EXISTS (SELECT $35 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $36 AND (project_authorizations.project_id = projects.id) AND (project_authorizations.access_level \u003e= $37)) OR projects.visibility_level IN ($38,$39)) AND (\"project_features\".\"merge_requests_access_level\" IS NULL OR \"project_features\".\"merge_requests_access_level\" IN ($40,$41) OR (\"project_features\".\"merge_requests_access_level\" = $42 AND EXISTS (SELECT $43 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $44 AND (project_authorizations.project_id = project_features.project_id) AND (project_authorizations.access_level \u003e= $45)))) AND (\"merge_requests\".\"state_id\" IN ($46)) AND EXISTS (SELECT \"merge_request_assignees\".\"id\", \"merge_request_assignees\".\"user_id\", \"merge_request_assignees\".\"merge_request_id\", \"merge_request_assignees\".\"created_at\" FROM \"merge_request_assignees\" WHERE \"merge_request_assignees\".\"user_id\" = $47 AND (merge_request_id = merge_requests.id)) AND \"projects\".\"archived\" = $48 AND \"users\".\"username\" = $49 GROUP BY \"merge_requests\".\"id\" HAVING (COUNT(users.id) = $50))\nUNION\n(SELECT DISTINCT \"merge_requests\".* FROM \"merge_requests\" INNER JOIN \"projects\" ON \"projects\".\"id\" = \"merge_requests\".\"target_project_id\" INNER JOIN \"approval_project_rules\" ON \"approval_project_rules\".\"project_id\" = \"projects\".\"id\" INNER JOIN \"approval_project_rules_users\" ON \"approval_project_rules_users\".\"approval_project_rule_id\" = \"approval_project_rules\".\"id\" INNER JOIN \"users\" ON \"users\".\"id\" = \"approval_project_rules_users\".\"user_id\" LEFT OUTER JOIN \"approval_merge_request_rules\" ON \"approval_merge_request_rules\".\"merge_request_id\" = \"merge_requests\".\"id\" LEFT JOIN project_features ON projects.id = project_features.project_id JOIN milestone_releases ON merge_requests.milestone_id = milestone_releases.milestone_id\n             JOIN releases ON milestone_releases.release_id = releases.id WHERE (EXISTS (SELECT $51 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $52 AND (project_authorizations.project_id = projects.id) AND (project_authorizations.access_level \u003e= $53)) OR projects.visibility_level IN ($54,$55)) AND (\"project_features\".\"merge_requests_access_level\" IS NULL OR \"project_features\".\"merge_requests_access_level\" IN ($56,$57) OR (\"project_features\".\"merge_requests_access_level\" = $58 AND EXISTS (SELECT $59 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $60 AND (project_authorizations.project_id = project_features.project_id) AND (project_authorizations.access_level \u003e= $61)))) AND (\"merge_requests\".\"state_id\" IN ($62)) AND EXISTS (SELECT \"merge_request_assignees\".\"id\", \"merge_request_assignees\".\"user_id\", \"merge_request_assignees\".\"merge_request_id\", \"merge_request_assignees\".\"created_at\" FROM \"merge_request_assignees\" WHERE \"merge_request_assignees\".\"user_id\" = $63 AND (merge_request_id = merge_requests.id)) AND \"projects\".\"archived\" = $64 AND \"approval_merge_request_rules\".\"id\" IS NULL AND \"users\".\"username\" = $65 GROUP BY \"merge_requests\".\"id\" HAVING (COUNT(users.id) = $66))\nUNION\n(SELECT DISTINCT \"merge_requests\".* FROM \"merge_requests\" INNER JOIN \"projects\" ON \"projects\".\"id\" = \"merge_requests\".\"target_project_id\" INNER JOIN \"approval_project_rules\" ON \"approval_project_rules\".\"project_id\" = \"projects\".\"id\" INNER JOIN \"approval_project_rules_groups\" ON \"approval_project_rules_groups\".\"approval_project_rule_id\" = \"approval_project_rules\".\"id\" INNER JOIN \"namespaces\" ON \"namespaces\".\"id\" = \"approval_project_rules_groups\".\"group_id\" AND \"namespaces\".\"type\" = $67 INNER JOIN \"members\" ON \"members\".\"source_type\" = $68 AND \"members\".\"requested_at\" IS NULL AND \"members\".\"access_level\" != $69 AND \"members\".\"source_id\" = \"namespaces\".\"id\" AND \"members\".\"type\" = $70 INNER JOIN \"users\" ON \"users\".\"id\" = \"members\".\"user_id\" LEFT OUTER JOIN \"approval_merge_request_rules\" ON \"approval_merge_request_rules\".\"merge_request_id\" = \"merge_requests\".\"id\" LEFT JOIN project_features ON projects.id = project_features.project_id JOIN milestone_releases ON merge_requests.milestone_id = milestone_releases.milestone_id\n             JOIN releases ON milestone_releases.release_id = releases.id WHERE (EXISTS (SELECT $71 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $72 AND (project_authorizations.project_id = projects.id) AND (project_authorizations.access_level \u003e= $73)) OR projects.visibility_level IN ($74,$75)) AND (\"project_features\".\"merge_requests_access_level\" IS NULL OR \"project_features\".\"merge_requests_access_level\" IN ($76,$77) OR (\"project_features\".\"merge_requests_access_level\" = $78 AND EXISTS (SELECT $79 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $80 AND (project_authorizations.project_id = project_features.project_id) AND (project_authorizations.access_level \u003e= $81)))) AND (\"merge_requests\".\"state_id\" IN ($82)) AND EXISTS (SELECT \"merge_request_assignees\".\"id\", \"merge_request_assignees\".\"user_id\", \"merge_request_assignees\".\"merge_request_id\", \"merge_request_assignees\".\"created_at\" FROM \"merge_request_assignees\" WHERE \"merge_request_assignees\".\"user_id\" = $83 AND (merge_request_id = merge_requests.id)) AND \"projects\".\"archived\" = $84 AND \"approval_merge_request_rules\".\"id\" IS NULL AND \"users\".\"username\" = $85 GROUP BY \"merge_requests\".\"id\" HAVING (COUNT(users.id) = $86))) merge_requests INNER JOIN \"projects\" ON \"projects\".\"id\" = \"merge_requests\".\"target_project_id\" LEFT JOIN project_features ON projects.id = project_features.project_id JOIN milestone_releases ON merge_requests.milestone_id = milestone_releases.milestone_id\n             JOIN releases ON milestone_releases.release_id = releases.id WHERE (EXISTS (SELECT $87 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $88 AND (project_authorizations.project_id = projects.id) AND (project_authorizations.access_level \u003e= $89)) OR projects.visibility_level IN ($90,$91)) AND (\"project_features\".\"merge_requests_access_level\" IS NULL OR \"project_features\".\"merge_requests_access_level\" IN ($92,$93) OR (\"project_features\".\"merge_requests_access_level\" = $94 AND EXISTS (SELECT $95 FROM \"project_authorizations\" WHERE \"project_authorizations\".\"user_id\" = $96 AND (project_authorizations.project_id = project_features.project_id) AND (project_authorizations.access_level \u003e= $97)))) AND (\"merge_requests\".\"state_id\" IN ($98)) AND EXISTS (SELECT \"merge_request_assignees\".\"id\", \"merge_request_assignees\".\"user_id\", \"merge_request_assignees\".\"merge_request_id\", \"merge_request_assignees\".\"created_at\" FROM \"merge_request_assignees\" WHERE \"merge_request_assignees\".\"user_id\" = $99 AND (merge_request_id = merge_requests.id)) AND \"projects\".\"archived\" = $100) ORDER BY LOWER(\"merge_requests\".\"title\") ASC, \"merge_requests\".\"id\" DESC LIMIT $102 OFFSET $101\n```\n\n```\nPG::InvalidColumnReference: ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list\nLINE 13: ....id)) AND \"projects\".\"archived\" = FALSE) ORDER BY LOWER(\"mer...\n                                                              ^\n\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/postgresql_adapter.rb:672:in `exec_params'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/postgresql_adapter.rb:672:in `block (2 levels) in exec_no_cache'\n  from activesupport (6.1.6.1) lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'\n  from activesupport (6.1.6.1) lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/postgresql_adapter.rb:671:in `block in exec_no_cache'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract_adapter.rb:696:in `block (2 levels) in log'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract_adapter.rb:695:in `block in log'\n  from activesupport (6.1.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract_adapter.rb:687:in `log'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/postgresql_adapter.rb:670:in `exec_no_cache'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/postgresql_adapter.rb:649:in `execute_and_clear'\n  from marginalia (1.10.0) lib/marginalia.rb:95:in `execute_and_clear_with_marginalia'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/postgresql/database_statements.rb:55:in `exec_query'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract/database_statements.rb:532:in `select'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract/database_statements.rb:69:in `select_all'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `block in select_all'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract/query_cache.rb:118:in `block in cache_sql'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'\n  from activesupport (6.1.6.1) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract/query_cache.rb:109:in `cache_sql'\n  from activerecord (6.1.6.1) lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `select_all'\n  from lib/gitlab/database/load_balancing/connection_proxy.rb:104:in `block in read_using_load_balancer'\n  from lib/gitlab/database/load_balancing/load_balancer.rb:55:in `read'\n  from lib/gitlab/database/load_balancing/connection_proxy.rb:103:in `read_using_load_balancer'\n  from lib/gitlab/database/load_balancing/connection_proxy.rb:48:in `select_all'\n  from activerecord (6.1.6.1) lib/active_record/querying.rb:47:in `find_by_sql'\n  from activerecord (6.1.6.1) lib/active_record/relation.rb:843:in `block in exec_queries'\n  from activerecord (6.1.6.1) lib/active_record/relation.rb:861:in `skip_query_cache_if_necessary'\n  from activerecord (6.1.6.1) lib/active_record/relation.rb:828:in `exec_queries'\n  from activerecord (6.1.6.1) lib/active_record/relation.rb:631:in `load'\n  from activerecord (6.1.6.1) lib/active_record/relation.rb:249:in `records'\n  from activerecord (6.1.6.1) lib/active_record/relation/delegation.rb:88:in `each'\n  from lib/gitlab/issuable_metadata.rb:67:in `map'\n  from lib/gitlab/issuable_metadata.rb:67:in `block in issuable_ids'\n  from lib/gitlab/utils/strong_memoize.rb:44:in `strong_memoize'\n  from lib/gitlab/issuable_metadata.rb:62:in `issuable_ids'\n  from lib/gitlab/issuable_metadata.rb:28:in `data'\n  from app/controllers/concerns/issuable_collections_action.rb:29:in `merge_requests'\n```","state":"closed","created_at":"2022-09-14T18:29:18.783Z","updated_at":"2022-12-21T12:02:37.243Z","closed_at":"2022-12-08T23:46:50.158Z","closed_by":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"labels":["Deliverable","Track Health Status","[deprecated] Accepting merge requests","approaching-SLO","backend","database","devops::create","group::code review","missed-SLO","priority::2","section::dev","severity::2","type::bug","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"}],"author":{"id":402401,"username":"jobbot","name":"Bot","state":"active","avatar_url":"https://secure.gravatar.com/avatar/aaa6738f1ebf25404010884af511b0e7?s=80\u0026d=identicon","web_url":"https://gitlab.com/jobbot"},"type":"ISSUE","assignee":{"id":4901936,"username":"dskim_gitlab","name":"Sincheol (David) Kim","state":"active","avatar_url":"https://secure.gravatar.com/avatar/84a984a56c54d1d31338678421cecc32?s=80\u0026d=identicon","web_url":"https://gitlab.com/dskim_gitlab"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373878","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373878","notes":"https://gitlab.com/api/v4/projects/278964/issues/373878/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373878/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373878","relative":"#373878","full":"gitlab-org/gitlab#373878"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115069445,"iid":373862,"project_id":278964,"title":"At group level, an empty merge request search result view does not include the buttons, search bar, etc.","description":"### Summary\n\nIf you search for merge requests and there are no results, the search infrastructure isn't rendered on the page.\n\nIt states \"Sorry, your filter produced no results\" and \"To widen your search, change or remove filters above\" but the filters are gone.\n\n### Steps to reproduce\n\n[Search for an author with no MRs in gitlab.org](https://gitlab.com/groups/gitlab-org/-/merge_requests)\n\n![image](/uploads/40f45c1ea0b82eb28dc486b7f3fa10ab/image.png)\n\nAlso:\n\n- Assignee with no results\n- Target branch with no results\n\nResult is the same for all three.\n\n### Example Project\n\nhttps://gitlab.com/groups/gitlab-org\n\n### What is the current *bug* behavior?\n\nAs of https://gitlab.com/gitlab-org/gitlab/-/issues/328848, the search bar is there but the tabs and buttons are missing.\n\n### What is the expected *correct* behavior?\n\nThese components are rendered\n\n![image](/uploads/74bad114c3f1f6707e4beadc0068253e/image.png)\n\nContrast, issues:\n\n![image](/uploads/baa9f2e3ed0e3d8580a16eba93d211a7/image.png)\n\n### Relevant logs and/or screenshots\n\nsee above\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n13.12.0-pre a465030182014b17cf72e9fafde761b44c5c5589\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-09-14T18:06:46.124Z","updated_at":"2022-10-21T12:01:34.417Z","closed_at":"2022-10-06T05:40:05.405Z","closed_by":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"labels":["Deliverable","SUS::Impacting","UX","backend","devops::create","group::code review","priority::3","section::dev","severity::3","type::bug","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"}],"author":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"type":"ISSUE","assignee":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373862","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373862","notes":"https://gitlab.com/api/v4/projects/278964/issues/373862/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373862/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373862","relative":"#373862","full":"gitlab-org/gitlab#373862"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115062846,"iid":373850,"project_id":278964,"title":"Allow to search environments within folders","description":"### Release notes\n\nWith this release, we are adding improved support for searching for environments within folders. Previously, you needed to write out the complete name to find this type of folder. Now, the search allows you to more easily find folders even if they are nested.\n\n### Background and proposal\n\nStarted from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97834#note_1099458438\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/10754+ we inroduced the environments search. But it only works for foldered environments if you search with the folder name\n\n![image](/uploads/9f9b238f5e00f1b89dfd57cc3c99ac00/image.png)\n\n(it would work if we searched for `review/gitaly`)\n\nTo make it work we can add the index on `remove_prefix(name, environment_type)`, and add `or`(UNION) clause to the `for_names_like` query.\n\nThat would actually be helpful in more places:\n1. autocomplete when adding protected environment\n2. autocomplete when editing feature flag\n\n(note that it may be costly from the performance standpoint)","state":"closed","created_at":"2022-09-14T15:55:17.568Z","updated_at":"2022-12-21T12:05:44.166Z","closed_at":"2022-12-01T15:18:09.569Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["Category:Environment Management","Deliverable","GitLab Free","Next Up","Release::P1","devops::release","documentation","feature::enhancement","group::release","release post item::in review","section::ops","type::feature","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373850","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373850","notes":"https://gitlab.com/api/v4/projects/278964/issues/373850/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373850/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373850","relative":"#373850","full":"gitlab-org/gitlab#373850"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8467,"epic":{"id":574541,"iid":8467,"title":"Environment Search","url":"/groups/gitlab-org/-/epics/8467","group_id":9970,"human_readable_end_date":"Sep 30, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":115061102,"iid":373843,"project_id":278964,"title":"Migrate away from select2 in User Settings","description":"We currently render several `select2` instances in **User Settings**:\n\n| Setting                                    | Preview                                                                                                                                                                                     |\n| ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **Preferences \u003e Layout width**             | \u003cimg src=\"/uploads/796f1173c7750724c0aa5aa6f4f4992e/User_Settings___Preferences___Layout_width.png\" alt=\"User_Settings___Preferences___Layout_width\" width=\"500\" /\u003e                         |\n| **Preferences \u003e Dashboard**                | \u003cimg src=\"/uploads/c57205e780c9675ce12abe8b8f6cc525/User_Settings___Preferences___Dashboard.png\" alt=\"User_Settings___Preferences___Dashboard\" width=\"500\" /\u003e                               |\n| **Preferences \u003e Project overview content** | \u003cimg src=\"/uploads/5dbd4c61a84cc2e46dceaf3aeb1b091a/User_Settings___Preferences___Project_overview_content.png\" alt=\"User_Settings___Preferences___Project_overview_content\" width=\"500\" /\u003e |\n| **Preferences \u003e Group overview content**   | \u003cimg src=\"/uploads/9feedd68eeaae521267d408168f2a785/User_Settings___Preferences___Group_overview_content.png\" alt=\"User_Settings___Preferences___Group_overview_content\" width=\"500\" /\u003e     |\n| **Preferences \u003e Language**                 | \u003cimg src=\"/uploads/e1fbd2c2a1d87e71ca6933c5632923d1/User_Settings___Preferences___Language.png\" alt=\"User_Settings___Preferences___Language\" width=\"500\" /\u003e                                 |\n| **Preferences \u003e First day of the week**    | \u003cimg src=\"/uploads/041e64dd9418d28bb77f0fae5ee74704/User_Settings___Preferences___First_day_of_the_week.png\" alt=\"User_Settings___Preferences___First_day_of_the_week\" width=\"500\" /\u003e       |\n| **Notifications \u003e Groups**                 | \u003cimg src=\"/uploads/08f5a40e6f4dd222899e7e24eb421816/User_Settings___Notifications___Groups.png\" alt=\"User_Settings___Notifications___Groups\" width=\"500\" /\u003e                                 |\n| **Notifications \u003e Notification Email**     | \u003cimg src=\"/uploads/c42dac7e136dc6fd40044f4925547a85/User_Settings___Notifications___Notification_Email.png\" alt=\"User_Settings___Notifications___Notification_Email\" width=\"500\" /\u003e         |\n\nThose are all single-selects. The **Dashboard** and **Language** selects happen to have client-side filtering enabled because they contain at least 10 options.\n\nAs part of this issue, we would like to replace all those `select2` instances with simple Pajamas-compliant `select` elements when possible. Some instances should be migrated to `GlListbox` to preserve client-side filtering or adhere to Pajamas guidelines.\n\n## Implementation plan\n\nConsider using [`app/assets/javascripts/vue_shared/components/listbox_input/listbox_input.vue`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/assets/javascripts/vue_shared/components/listbox_input/listbox_input.vue) for the most complex instances listed below.\n\n- [x] [`app/views/profiles/preferences/show.html.haml`](https://gitlab.com/gitlab-org/gitlab/-/blob/8a04153a50e4908af4f9023dc3ae7fdffb26a72e/app/views/profiles/preferences/show.html.haml)\n  - [x] Replace `.select2` with `.gl-form-select.custom-select` in **Preferences \u003e Layout width** field.\n  - [x] Replace `.select2` with `GlListbox` in **Preferences \u003e Dashboard** field.\n  - [x] Replace `.select2` with `.gl-form-select.custom-select` in **Preferences \u003e Project overview content** field.\n  - [x] Replace `.select2` with `GlListbox` in **Preferences \u003e Language** field.\n  - [x] Replace `.select2` with `.gl-form-select.custom-select` in **Preferences \u003e First day of the week** field.\n- [x] [`ee/app/views/profiles/preferences/_group_overview_selector.html.haml`](https://gitlab.com/gitlab-org/gitlab/-/blob/72af89939c49072547b905349f7c8d969834cec7/ee/app/views/profiles/preferences/_group_overview_selector.html.haml)\n  - [x] Replace `.select2` with `.gl-form-select.custom-select` in **Preferences \u003e Group overview content** field.\n- [x] [`app/views/profiles/notifications/_group_settings.html.haml`](https://gitlab.com/gitlab-org/gitlab/-/blob/d32f2cbe079280c514ff3684f9fd5246c17cc797/app/views/profiles/notifications/_group_settings.html.haml)\n  - [x] Replace `.select2` with `GlListbox` in **Notifications \u003e Groups** field.\n- [x] [`app/views/profiles/notifications/_email_settings.html.haml`](https://gitlab.com/gitlab-org/gitlab/-/blob/d32f2cbe079280c514ff3684f9fd5246c17cc797/app/views/profiles/notifications/_email_settings.html.haml)\n  - [x] Replace `.select2` with `GlListbox` in **Notifications \u003e Notification Email** field.\n    - [x] **Note:** An event listener is bound to this input in [`app/assets/javascripts/profile/profile.js#46`](https://gitlab.com/gitlab-org/gitlab/-/blob/a8c294f8cf73c0cff98e0c677882e5e1bb574970/app/assets/javascripts/profile/profile.js#L46). This should be backported if it is needed, or removed otherwise.","state":"closed","created_at":"2022-09-14T15:26:47.248Z","updated_at":"2023-01-10T17:51:46.104Z","closed_at":"2023-01-10T17:51:31.861Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["OKR","component:dropdown","component:form","devops::manage","frontend","group::organization","maintenance::refactor","section::dev","type::maintenance","user settings","workflow::verification"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373843","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":13,"completed_count":13},"weight":5,"blocking_issues_count":1,"has_tasks":true,"task_status":"13 of 13 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373843","notes":"https://gitlab.com/api/v4/projects/278964/issues/373843/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373843/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373843","relative":"#373843","full":"gitlab-org/gitlab#373843"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8739,"epic":{"id":601572,"iid":8739,"title":"Migrate select2 behavior to alternative solutions","url":"/groups/gitlab-org/-/epics/8739","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":115056964,"iid":373839,"project_id":278964,"title":"Use inline error when adding existing item to linked items","description":"## Summary\n\nCurrently when adding an item that already exists to Linked Items, a page-level error is shown. In the Epic Tree, this same scenario results in an inline validation error, which more directly connects the output of the action to the input. \n\n| Linked Items | Epic Child | \n| ---- | ---- |\n| ![image](/uploads/2a193c5ca34dd96efffeeccf49e453e1/image.png) | ![image](/uploads/73dd32afc4cb0786a05dcc580cfaaff6/image.png) | \n\n**Proposal**\n\nUse the same inline [validation](https://design.gitlab.com/components/form#validation) pattern within Linked Items, replacing the page level error.\n\nThis should apply to `Linked items` on Issues, `Linked epics` on Epics, and `Linked incidents` or issues on Incidents.","state":"closed","created_at":"2022-09-14T14:37:08.112Z","updated_at":"2022-10-31T23:49:51.841Z","closed_at":"2022-10-31T23:49:51.791Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["devops::plan","feature::enhancement","frontend","group::product planning","issues","section::dev","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":11392688,"username":"nickleonard","name":"Nick Leonard","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11392688/avatar.png","web_url":"https://gitlab.com/nickleonard"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373839","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373839","notes":"https://gitlab.com/api/v4/projects/278964/issues/373839/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373839/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373839","relative":"#373839","full":"gitlab-org/gitlab#373839"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115055088,"iid":373836,"project_id":278964,"title":"Add view and submission events to /welcome pages","description":"The purpose of this issue is to add structured events to `users/sign_up/welcome` for both free and trial registration flows. This will allow us to build funnels and understand how many get to this step.\n\n![Screen_Shot_2022-11-10_at_11.29.10_AM](/uploads/9e242d46c59be563fc46fbf1dec711f2/Screen_Shot_2022-11-10_at_11.29.10_AM.png)\n \nTracking to be added: \n \n# Structured events to be added:\n \nNotes (reference for this issue, not an actual snowplow event property) | category | action | label |  Additional context to capture | \n| -------- | -------- | ----- | ----- | ----- | \n| Event fires when the page loads. | default from page fired on | `render` | `free_registration` or `trial_registration` or `invite_registration` | `GitLab User ID` | \n| User clicks continue on the company page | default from page fired on  |  `click_continue` | `free_registration` or `trial_registration` or `invite_registration` | `GitLab User ID`  |\n \n# Self-describing event tracking to be added:\n* Form change tracking\n  * NOTE: form change tracking is already enabled on this page, in this issue we only need to specifically add the `GitLab_user_ID` to the form tracking.","state":"closed","created_at":"2022-09-14T14:13:03.569Z","updated_at":"2023-01-03T20:52:44.291Z","closed_at":"2022-12-16T07:23:24.851Z","closed_by":{"id":10216431,"username":"syarynovskyi","name":"Serhii Yarynovskyi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10216431/avatar.png","web_url":"https://gitlab.com/syarynovskyi"},"labels":["Next Up","devops::growth","group::acquisition","missed:15.5","missed:15.6","section::growth","type::feature","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":10216431,"username":"syarynovskyi","name":"Serhii Yarynovskyi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10216431/avatar.png","web_url":"https://gitlab.com/syarynovskyi"}],"author":{"id":4413992,"username":"s_awezec","name":"Sam Awezec","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4413992/avatar.png","web_url":"https://gitlab.com/s_awezec"},"type":"ISSUE","assignee":{"id":10216431,"username":"syarynovskyi","name":"Serhii Yarynovskyi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10216431/avatar.png","web_url":"https://gitlab.com/syarynovskyi"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373836","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373836","notes":"https://gitlab.com/api/v4/projects/278964/issues/373836/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373836/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373836","relative":"#373836","full":"gitlab-org/gitlab#373836"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9093,"epic":{"id":635958,"iid":9093,"title":"Adding tracking to SaaS signup","url":"/groups/gitlab-org/-/epics/9093","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":115041433,"iid":373830,"project_id":278964,"title":"Add aggregated metrics information to metrics YAML definitions","description":"\n## Background \n\nBecause Redis [metric aggregation feature](https://docs.gitlab.com/ee/development/service_ping/implement.html#aggregated-metrics) was created before `merics yml definitions` and this caused legacy duplication and distribution of information. Event can be aggregated into metric with 3 of following ways:\n\n1. Total metrics - already [deprecated feature](https://docs.gitlab.com/ee/development/service_ping/implement.html#known-events-are-added-automatically-in-service-data-payload), yet still used by [some older metrics](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/usage_data_counters/hll_redis_counter.rb#L21)\n1. Aggregated metrics - via yaml config files at https://gitlab.com/gitlab-org/gitlab/-/tree/master/config/metrics/aggregates and https://gitlab.com/gitlab-org/gitlab/-/tree/master/ee/config/metrics/aggregates\n1. Metric yaml deifnition - via `option.events`\n\nThis makes create confusing experience for developers, and makes it harder to utilize aggregation information for any downstream systems as discussed at https://gitlab.com/gitlab-org/gitlab/-/issues/370462#note_1067324388\n\n## Goal\n\nAdd support to mirror all information from aggregated metrics configuration into metrics YAML definition\n\n\nThis issue was extracted from https://gitlab.com/gitlab-org/gitlab/-/issues/370963 that covers broader effort to unify redis metrics definitions","state":"closed","created_at":"2022-09-14T12:17:46.462Z","updated_at":"2022-10-24T08:19:33.684Z","closed_at":"2022-10-24T08:19:33.651Z","closed_by":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"labels":["backend","devops::analytics","feature::enhancement","group::product intelligence","missed:15.4","missed:15.5","section::analytics","type::feature","workflow::in dev"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"}],"author":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"type":"ISSUE","assignee":{"id":4807002,"username":"mikolaj_wawrzyniak","name":"Mikołaj Wawrzyniak","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4807002/avatar.png","web_url":"https://gitlab.com/mikolaj_wawrzyniak"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373830","notes":"https://gitlab.com/api/v4/projects/278964/issues/373830/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373830/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373830","relative":"#373830","full":"gitlab-org/gitlab#373830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115033644,"iid":373821,"project_id":278964,"title":"Add internal column to notes table","description":"As part of https://gitlab.com/gitlab-org/gitlab/-/issues/363801+ we need to a migration to change column name to `internal`.\n\nThis issue is for tracking purposes as the main issue is https://gitlab.com/gitlab-org/gitlab/-/issues/367923\n\nRelated MR: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97253 where we added the `internal` column, the related index and write to `internal` for all new internal notes.","state":"closed","created_at":"2022-09-14T10:21:35.899Z","updated_at":"2022-11-10T14:23:28.409Z","closed_at":"2022-09-14T10:21:47.083Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["devops::plan","group::product planning","maintenance::refactor","section::dev","type::maintenance"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"}],"author":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"type":"ISSUE","assignee":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373821","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373821","notes":"https://gitlab.com/api/v4/projects/278964/issues/373821/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373821/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373821","relative":"#373821","full":"gitlab-org/gitlab#373821"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8390,"epic":{"id":567440,"iid":8390,"title":"Internal Notes: Technical debt cleanup","url":"/groups/gitlab-org/-/epics/8390","group_id":9970,"human_readable_end_date":"May 17, 2023","human_readable_timestamp":"\u003cstrong\u003e4\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":115033314,"iid":373819,"project_id":278964,"title":"Fix potential security issues in webhook payloads","description":"## Report\n\n#####  Summary\n\nGitLab introduced a new group Webhook event for premium users in version 13.7 ([documentation](https://about.gitlab.com/releases/2021/10/28/security-release-gitlab-14-4-1-released/#webhook-data-exposes-assignee's-private-email-address)). This webhook sends information to a configured URL whenever a user is added or removed from the group. The requests made to the URL contains the added user's primary (hidden) email address.\n\nDuring the review process of bug fix for the [issue #364266](https://gitlab.com/gitlab-org/gitlab/-/issues/364266), a suspicion arose regarding a similar security leak in other related areas (webhook events). This issue is created as a follow up based on the [review comment](https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2774#note_1098500380) to investigate and address the security flaw.\n\nAs part of this issue, we need to:\n1. Investigate webhooks that might be leaking private emails\n2. Redact private email as it is done in [this issue](https://gitlab.com/gitlab-org/security/gitlab/-/merge_requests/2774).","state":"closed","created_at":"2022-09-14T10:17:03.988Z","updated_at":"2023-01-03T04:46:31.197Z","closed_at":"2022-12-01T06:25:40.582Z","closed_by":{"id":9043659,"username":"rshambhuni","name":"Rohit Shambhuni","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9043659/avatar.png","web_url":"https://gitlab.com/rshambhuni"},"labels":["Deliverable","backend","bug::vulnerability","devops::manage","group::organization","milestone::p1","priority::3","release post item","section::dev","security","severity::3","type::bug","workflow::in review"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11991798,"username":"khanmansoor","name":"Mansoor Khan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11991798/avatar.png","web_url":"https://gitlab.com/khanmansoor"}],"author":{"id":11991798,"username":"khanmansoor","name":"Mansoor Khan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11991798/avatar.png","web_url":"https://gitlab.com/khanmansoor"},"type":"ISSUE","assignee":{"id":11991798,"username":"khanmansoor","name":"Mansoor Khan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11991798/avatar.png","web_url":"https://gitlab.com/khanmansoor"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-12-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373819","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373819","notes":"https://gitlab.com/api/v4/projects/278964/issues/373819/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373819/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373819","relative":"#373819","full":"gitlab-org/gitlab#373819"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115018803,"iid":373792,"project_id":278964,"title":"[Feature flag] Rollout of `graphql_keyset_pagination_without_next_page_query`","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout the FF `graphql_keyset_pagination_without_next_page_query` on production.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: Manage::Optimize\n- Most appropriate slack channel to reach out to: `#g_manage_optimize`\n- Best individual to reach out to: ahegyi\n\n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nSlightly increased performance of all GraphQL calls.\n\n### When is the feature viable?\n\nWhen the enabled feature flag does not cause slower GraphQL response times.\n\n### What might happen if this goes wrong?\n\nWrong results are given when requesting the next pages. (Unlikely)\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev --staging --staging-ref`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2022-09-14T07:20:36.609Z","updated_at":"2022-12-06T18:32:03.689Z","closed_at":"2022-11-22T08:49:37.967Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Category:DevOps Reports","automation:ml","automation:ml wrong","devops::plan","feature flag","feature::addition","group::optimize","missed:15.6","priority::3","section::dev","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373792","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":46,"completed_count":5},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 46 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373792","notes":"https://gitlab.com/api/v4/projects/278964/issues/373792/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373792/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373792","relative":"#373792","full":"gitlab-org/gitlab#373792"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":115012433,"iid":373781,"project_id":278964,"title":"Reduce sbom_occurrences table growth","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nCurrently, we are essentially using `sbom_occurrences` as an append-only log and this doesn't scale.\nWhen enabling the `cyclonedx_sbom_ingestion` feature flag, we saw approximately 1 million `sbom_occurrences` created per hour. This is because we're storing all the occurrences created in each pipeline. We should abandon the append-only log approach. \n\nInstead, we should add columns tracking when the dependency appeared. For example:\n\n| column | type | description |\n| ------ | ---- | ----------- |\n| latest_default_branch_pipeline_id | bigint | Latest pipeline on the default branch where this dependency appeared |\n| present_on_default_branch | bool | True if this dependency is currently present on the default branch |\n\nThis allows us to fullfil the current project requirements, which is to provide the same functionality as the existing dependency list. The dependencies which appear in the list will be the ones that have `present_on_default_branch = true` and the `latest_default_branch_pipeline_id` can be used to show the last successful scan. In the future, it we would like to show dependencies on other branches, we will need to come up with a different solution for that. \n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n  - [ ] Normalising will increase the amount of joins we have to do. Test the potential impact.\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated.\nThe plan can also call-out responsibilities for other team members or teams and\ncan be split into smaller MRs to simplify the code review process.\n\ne.g.:\n\n- MR 1: Part 1\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n- MR 2: Part 2\n- [ ] ~backend Step 1\n- [ ] ~backend Step 2\n- MR 3: Part 3\n- [ ] ~frontend Step 1\n- [ ] ~frontend Step 2\n\n--\u003e\n\n1. Write database migrations to:\n   1. Delete all existing rows from `sbom_occurrences` (DB lab says this would take around 7 seconds)\n   2. Remove `index_sbom_occurrences_on_ingestion_attributes`\n   3. Create a new unique index on `%i[project_id component_id component_version_id source_id]`\n2. Update the ingestion tasks:\n   1. Update the ingestion pipeline so that `Sbom::Ingestion::IngestReportsService` receives a list of all the `sbom_occurrence` ids (`ingested_ids`) that were present in the ingested reports.\n   2. Pass the `ingested_ids` to a new service `Sbom::Ingestion::PostIngestionService`\n4. Have the `PostIngestionService` iterate through all the occurrences in the given project.\n5. Delete the records which aren't present in `ingested_ids` in batches of 100.\n6. Update the `pipeline_id` and `commit_sha` of the already-existing records to that of the current pipeline\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e\n\n## Verification steps\n\u003c!--\nAdd verification steps to help GitLab team members test the implementation. This is particularly useful\nduring the MR review and the ~\"workflow::verification\" step. You may not know exactly what the\nverification steps should be during issue refinement, so you can always come back later to add\nthem.\n\n1. Check-out the corresponding branch\n1. ...\n1. Profit!\n--\u003e\n\n\u003c!-- start-discoto-summary --\u003e\n## Auto-Summary :robot:\n\n\n\u003cdetails\u003e\n\u003csummary\u003eDiscoto Usage\u003c/summary\u003e\n\n---\n\n\u003e **Points**\n\u003e\n\u003e Discussion points are declared by headings, list items, and single\n\u003e lines that start with the text (case-insensitive) `point:`. For\n\u003e example, the following are all valid points:\n\u003e\n\u003e * `#### POINT: This is a point`\n\u003e * `* point: This is a point`\n\u003e * `+ Point: This is a point`\n\u003e * `- pOINT: This is a point`\n\u003e * `point: This is a **point**`\n\u003e\n\u003e Note that any markdown used in the point text will also be propagated\n\u003e into the topic summaries.\n\u003e\n\u003e **Topics**\n\u003e\n\u003e Topics can be stand-alone and contained within an issuable (epic,\n\u003e issue, MR), or can be inline.\n\u003e\n\u003e Inline topics are defined by creating a new thread (discussion)\n\u003e where the first line of the first comment is a heading that starts\n\u003e with (case-insensitive) `topic:`. For example, the following are all\n\u003e valid topics:\n\u003e\n\u003e * `# Topic: Inline discussion topic 1`\n\u003e * `## TOPIC: **{+A Green, bolded topic+}**`\n\u003e * `### tOpIc: Another topic`\n\u003e\n\u003e **Quick Actions**\n\u003e\n\u003e | Action                        | Description                                             |\n\u003e |-------------------------------|---------------------------------------------------------|\n\u003e | `/discuss sub-topic TITLE`    | Create an issue for a sub-topic. Does not work in epics |\n\u003e | `/discuss link ISSUABLE-LINK` | Link an issuable as a child of this discussion          |\n\u003e\n\n---\n\n\u003c/details\u003e\n\nLast updated by [this job](https://gitlab.com/gitlab-org/secure/pocs/discoto-runner/-/jobs/3432011634)\n\n\n* **TOPIC** Ignored columns https://gitlab.com/gitlab-org/gitlab/-/issues/373781#note_1198216147\n* **TOPIC** Partitioning https://gitlab.com/gitlab-org/gitlab/-/issues/373781#note_1198227876\n* **TOPIC** Delete https://gitlab.com/gitlab-org/gitlab/-/issues/373781#note_1198240485\n* **TOPIC** Indexes https://gitlab.com/gitlab-org/gitlab/-/issues/373781#note_1198252592\n\u003c!-- end-discoto-summary --\u003e\n\n\n\n\u003c!-- start-discoto-topic-settings --\u003e\u003cdetails\u003e\n\u003csummary\u003eDiscoto Settings\u003c/summary\u003e\n\n\u003cbr/\u003e\n\n```yaml\n---\nsummary:\n  max_items: -1\n  sort_by: created\n  sort_direction: ascending\n\n```\n\nSee the [settings schema](https://gitlab.com/gitlab-org/secure/pocs/discussion-automation#settings-schema) for details.\n\n\u003c/details\u003e\n\u003c!-- end-discoto-topic-settings --\u003e","state":"closed","created_at":"2022-09-14T04:49:05.666Z","updated_at":"2023-01-06T10:57:38.213Z","closed_at":"2022-12-29T06:32:58.654Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Threat Insights::Tangerine","devops::govern","discoto","group::threat insights","maintenance::performance","missed:15.7","section::sec","type::maintenance","workflow::production"],"milestone":{"id":2745648,"iid":83,"group_id":9970,"title":"15.8","description":"","state":"active","created_at":"2022-08-22T16:57:34.875Z","updated_at":"2022-08-22T16:57:34.875Z","due_date":"2023-01-17","start_date":"2022-12-18","expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/83"},"assignees":[{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":8953999,"username":"bwill","name":"Brian Williams","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8953999/avatar.png","web_url":"https://gitlab.com/bwill"},"user_notes_count":32,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373781","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":0},"weight":5,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373781","notes":"https://gitlab.com/api/v4/projects/278964/issues/373781/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373781/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373781","relative":"#373781","full":"gitlab-org/gitlab#373781"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8024,"epic":{"id":518303,"iid":8024,"title":"Ingest SBOM reports","url":"/groups/gitlab-org/-/epics/8024","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":114995839,"iid":373756,"project_id":278964,"title":"Follow-up from \"Add styling to closed and merged MR states\" (add underline on username link)","description":"The following discussion from !97337 should be addressed:\n\n- [ ] @gdoyle started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97337#note_1096966637):  (+1 comment)\n\n\u003e Another thing I noticed is that the design specs included an underline underneath the username. Did you want to make that styling change in this MR as well?\n\u003e \n\u003e ![Screen_Shot_2022-09-12_at_9.43.22_AM](https://gitlab.com/gitlab-org/gitlab/uploads/36f063a4102322aa67b3f96494fd8e99/Screen_Shot_2022-09-12_at_9.43.22_AM.png)","state":"closed","created_at":"2022-09-13T20:30:03.609Z","updated_at":"2022-12-21T12:02:37.298Z","closed_at":"2022-11-29T10:42:39.996Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","SUS::Impacting","UI polish","UX debt","[deprecated] Accepting merge requests","devops::create","frontend","group::code review","maintenance::usability","merge request widget","missed-deliverable","missed:15.5","section::dev","severity::4","type::maintenance","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":9302527,"username":"gdoyle","name":"Gina Doyle","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9302527/avatar.png","web_url":"https://gitlab.com/gdoyle"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373756","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373756","notes":"https://gitlab.com/api/v4/projects/278964/issues/373756/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373756/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373756","relative":"#373756","full":"gitlab-org/gitlab#373756"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7340,"epic":{"id":414918,"iid":7340,"title":"Adapt MR merge widget to new framework","url":"/groups/gitlab-org/-/epics/7340","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":114995761,"iid":373755,"project_id":278964,"title":"Follow-up from \"Add styling to closed and merged MR states\" (update description background to white)","description":"The following discussion from !97337 should be addressed:\n\n- [ ] @gdoyle started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97337#note_1096950012):  (+3 comments)\n\n    \u003e ## Details background color\n    \u003e \n    \u003e **:question: Question:** @slashmanov Did you want to update the MR widget details background to be white in this MR? I was re-reading https://gitlab.com/gitlab-org/gitlab/-/issues/368039#note_1092025810 and wasn't sure if that should be included in your first point:\n    \u003e \n    \u003e \u003e 1. Adds styling to `merged` and `closed` state (this issue);\n    \u003e \n    \u003e Currently, the bg is still gray.\n    \u003e \n    \u003e ![Screen_Shot_2022-09-12_at_9.31.31_AM](/uploads/5c129e3e52926aa704ca23437b569480/Screen_Shot_2022-09-12_at_9.31.31_AM.png)\n    \u003e \n    \u003e cc: @pedroms","state":"closed","created_at":"2022-09-13T20:27:43.973Z","updated_at":"2022-12-21T12:02:37.347Z","closed_at":"2022-11-29T10:42:38.579Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","SUS::Impacting","UI polish","UX debt","[deprecated] Accepting merge requests","devops::create","frontend","group::code review","maintenance::usability","merge request widget","missed-deliverable","missed:15.5","section::dev","severity::4","type::maintenance","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":9302527,"username":"gdoyle","name":"Gina Doyle","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9302527/avatar.png","web_url":"https://gitlab.com/gdoyle"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373755","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373755","notes":"https://gitlab.com/api/v4/projects/278964/issues/373755/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373755/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373755","relative":"#373755","full":"gitlab-org/gitlab#373755"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7340,"epic":{"id":414918,"iid":7340,"title":"Adapt MR merge widget to new framework","url":"/groups/gitlab-org/-/epics/7340","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":114995564,"iid":373753,"project_id":278964,"title":"Follow-up from \"Add styling to closed and merged MR states\" (do not show expand/collapse button on widget when there are no details to show)","description":"The following discussion from !97337 should be addressed:\n\n- [ ] @gdoyle started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97337#note_1096953057):  (+1 comment)\n\n    \u003e ## Responsive state of merged widget\n    \u003e \n    \u003e @slashmanov I noticed that if the merged widget doesn't have any details attached to it, the expand/collapse button still appears. I'm not seeing that in production today, but am not 100% sure if it came from this change. If not, we can make a follow-up issue for it.\n    \u003e \n    \u003e ![Screen_Shot_2022-09-12_at_9.27.08_AM](/uploads/dde319b03e8459f713d20358fcd704ff/Screen_Shot_2022-09-12_at_9.27.08_AM.png)","state":"closed","created_at":"2022-09-13T20:24:21.250Z","updated_at":"2022-12-21T12:02:37.393Z","closed_at":"2022-11-25T10:32:50.249Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","SUS::Impacting","UX","[deprecated] Accepting merge requests","bug::ux","devops::create","frontend","group::code review","merge request widget","missed-deliverable","missed:15.5","section::dev","severity::3","type::bug"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":9302527,"username":"gdoyle","name":"Gina Doyle","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9302527/avatar.png","web_url":"https://gitlab.com/gdoyle"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373753","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373753","notes":"https://gitlab.com/api/v4/projects/278964/issues/373753/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373753/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373753","relative":"#373753","full":"gitlab-org/gitlab#373753"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7340,"epic":{"id":414918,"iid":7340,"title":"Adapt MR merge widget to new framework","url":"/groups/gitlab-org/-/epics/7340","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":114970014,"iid":373719,"project_id":278964,"title":"[Feature flag] Enable ci_limit_complete_hierarchy_size","description":"## Summary\n\nThis issue is to rollout [restriction of pipeline tree size](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/95857) on production,\nthat is currently behind the `ci_limit_complete_hierarchy_size` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::pipeline execution\" \n- Most appropriate slack channel to reach out to: `#g_pipeline_execution`\n- Best individual to reach out to: @drew\n- PM: @jheimbuck_gl \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\n### When is the feature viable?\n\n\u003c!-- What are the settings we need to configure in order to have this feature viable? --\u003e\n\n\u003c!-- \nExample below:\n \n1. Enable service ping collection\n   `ApplicationSetting.first.update(usage_ping_enabled: true)`\n--\u003e\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n_Consider mentioning checks for 5xx errors or other anomalies like an increase in redirects \n(302 HTTP response status)_\n\n### What can we check for monitoring production after rollouts?\n\n_Consider adding links to check for Sentry errors, Production logs for 5xx, 302s, etc._\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true --dev --staging --staging-ref`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `\u003cfeature-flag-name\u003e` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set \u003cfeature-flag-name\u003e false\n```","state":"closed","created_at":"2022-09-13T15:14:14.469Z","updated_at":"2023-01-01T08:01:27.785Z","closed_at":"2022-10-21T21:00:16.042Z","closed_by":{"id":730684,"username":"drew","name":"drew stachon","state":"active","avatar_url":"https://secure.gravatar.com/avatar/59b7f2c95acd4a085d964f745ead6bdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/drew"},"labels":["Application Limits","Category:Continuous Integration","Deliverable","Track Health Status","[deprecated] Accepting merge requests","devops::verify","feature flag","feature::addition","group::pipeline execution","section::ops","type::feature"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":730684,"username":"drew","name":"drew stachon","state":"active","avatar_url":"https://secure.gravatar.com/avatar/59b7f2c95acd4a085d964f745ead6bdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/drew"}],"author":{"id":730684,"username":"drew","name":"drew stachon","state":"active","avatar_url":"https://secure.gravatar.com/avatar/59b7f2c95acd4a085d964f745ead6bdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/drew"},"type":"ISSUE","assignee":{"id":730684,"username":"drew","name":"drew stachon","state":"active","avatar_url":"https://secure.gravatar.com/avatar/59b7f2c95acd4a085d964f745ead6bdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/drew"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":46,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 46 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373719","notes":"https://gitlab.com/api/v4/projects/278964/issues/373719/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373719/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/375277"},"references":{"short":"#373719","relative":"#373719","full":"gitlab-org/gitlab#373719"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114965296,"iid":373715,"project_id":278964,"title":"Define a CI Component in the blueprint","description":"The following discussion from !93574 should be addressed:\n\n- [ ] @grzesiek started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/93574#note_1098999881): \n\n    \u003e We should define what a \"component\" is, before we move forward with MVC.\n\nFrom the blueprint the Characteristics of a component are:\n\nFor best experience with any systems made of components it's fundamental that components are single purpose,\nisolated, reusable and resolvable.\n\n- **Single purpose**: a component must focus on a single goal and the scope be as small as possible.\n- **Isolation**: when a component is used in a pipeline, its implementation details should not leak outside the\n  component itself and into the main pipeline.\n- **Reusability:** a component is designed to be used in different pipelines.\n  Depending on the assumptions it's built on a component can be more or less generic.\n  Generic components are more reusable but may require more customization.\n- **Resolvable:** When a component depends on another component, this dependency needs to be explicit and trackable. Hidden dependencies can lead to myriads of problems.\n\nOther aspects to document:\n- define inputs/outputs of a component.\n- 1 component per project or multiple components per project?\n- where should the component metadata and content be defined? Can the component references internal files (e.g. scripts)?\n- How to use components and how to reference them\n    - path from Catalog + version\n    - path from Catalog + sha\n    - local components\n- Can the metadata and content be validated using static schema validation such as JSON validator?\n\n/cc @fabiopitino","state":"closed","created_at":"2022-09-13T14:45:10.485Z","updated_at":"2022-12-19T21:57:18.407Z","closed_at":"2022-11-17T14:42:35.583Z","closed_by":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"labels":["Architecture Evolution Blueprint","Category:Pipeline Authoring","devops::verify","group::pipeline authoring","section::ops","type::ignore","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"user_notes_count":22,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373715","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373715","notes":"https://gitlab.com/api/v4/projects/278964/issues/373715/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373715/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373715","relative":"#373715","full":"gitlab-org/gitlab#373715"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9408,"epic":{"id":673436,"iid":9408,"title":"CI Components - Phase 2 - Requirements","url":"/groups/gitlab-org/-/epics/9408","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":114964891,"iid":373712,"project_id":278964,"title":"Determine how and where to count lines of code per language efficiently","description":"## Background\n\nThis is to support a business decision regarding https://gitlab.com/groups/gitlab-org/-/epics/8589+. We are still gathering data to understand if we should do this at all. This ~spike is one input: We need to understand how complex it would be to enable the following use cases and if there are critical operational costs that we should be aware of. Please, note **there is a lot of context also in https://gitlab.com/gitlab-org/gitlab/-/issues/371465+, which is likely helpful when working on this spike**.\n\nWe will have the following engineering efforts:\n* UX design\n* Frontend work\n* Backend work\n\n@tlinz: I dare to assume that we can simply estimate the effort for UX design and frontend work with a SWAG. The backend work is likely more complex, which is why we do this ~spike. For instance, we need to understand if we do this in Gitaly or in Rails and what this implies. \n\n## Use cases\n\nNote: the following use cases might still change somewhat as we mature the https://gitlab.com/gitlab-org/gitlab/-/issues/371038+ \n\n[Sasha (Software Developer)](https://about.gitlab.com/handbook/product/personas/#sasha-software-developer), [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/product/personas/#priyanka-platform-engineer), [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/product/personas/#simone-software-engineer-in-test) have the following problem:\n- I want to know **how much I and others have contributed to a project** so that I can compare my contribution to that of others and feel good about it.\n- I want to see how my and others' **contributions to a project have changed over time** so that I can compare my contribution to that of others and feel good about my persistence. \n   - lines added and removed\n   - chart over time\n- I want to see **to which projects I have contributed** and **how much in which language** so that I can easily prove to potential employers that I have experience in writing code in certain languages. \n- I want to know the total lines of code and change of lines of code over time (and language) in a group, project, directory (or file), so that I can get a sense of the health of a module or I can get a sense of a repo as such, e.g. by\n   - comparing the size of the directory containing the tests with the directory containing the application code; or \n   - seeing if a module (i.e. typically in a directory) becomes too large so that it would make sense to break it up; or\n   - seeing the language distribution of a project or module, gives me a quick understanding if I can or cannot contribute given my language skills. \n\n[Sam (Security Analyst)](https://about.gitlab.com/handbook/product/personas/#sam-security-analyst), [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/product/personas/#delaney-development-team-lead), [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/product/personas/#cameron-compliance-manager) [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/product/personas/#sidney-systems-administrator) have these problems:\n- I need to know **which languages are used** to what extent **in a project** or **group** so that I can assess risks, make tooling decisions, make hiring decisions, and confirm compliance with company rules.\n\nNon-functional requirements: these metrics are not needed in real-time. A daily update is probably sufficient. \n\n## Scope \n\nThis a research ~spike with ~\"backend-weight::2\" \n\n## Goal\n\nDetermine if we can accurately and performantly count lines of code in either:\n\n- Gitaly\n- Rails\n\nPlease create follow-up issues to develop the line-counting function and if possible apply a weight.\n\nPlease, consider the implications on operational cost when designing the solution. At least some of the functions are likely to going to be free.","state":"closed","created_at":"2022-09-13T14:41:33.661Z","updated_at":"2022-12-02T13:33:20.567Z","closed_at":"2022-10-06T07:31:45.220Z","closed_by":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"labels":["Category:Source Code Management","Deliverable","backend","devops::create","group::source code","quad-planning::complete-no-action","section::dev","spike","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"}],"author":{"id":10822493,"username":"tlinz","name":"Torsten Linz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/10822493/avatar.png","web_url":"https://gitlab.com/tlinz"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373712","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373712","notes":"https://gitlab.com/api/v4/projects/278964/issues/373712/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373712/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373712","relative":"#373712","full":"gitlab-org/gitlab#373712"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8589,"epic":{"id":584663,"iid":8589,"title":"Report number of lines per language in repository charts","url":"/groups/gitlab-org/-/epics/8589","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114963699,"iid":373711,"project_id":278964,"title":"Redact ancestor epics in sidebar","description":"Once https://gitlab.com/gitlab-org/gitlab/-/issues/373708+ has been implemented the ancestors that are inaccessible to the user would be hidden from the list by default.\n\nIn order to accurately display the ancestor's structure, we want to display all items and redact the ones with no access instead. \n\nSee https://gitlab.com/gitlab-org/gitlab/-/issues/372236/designs/Epic_ancestors_view.png for design.\n\n## Docs Support\n\nFor issues requiring an update to GitLab docs, please note that this is part of the definition of done for this issue. Please create a separate MR for the docs update related to the MR for the actual change to ensure code reviews are not blocked by TW reviews.\n\n- [ ] This issue requires an update to GitLab docs\n- [x] This issue does not require an update to GitLab docs","state":"closed","created_at":"2022-09-13T14:28:00.715Z","updated_at":"2022-11-25T05:50:35.612Z","closed_at":"2022-11-25T05:50:35.590Z","closed_by":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"labels":["Track Health Status","UX","backend","devops::plan","epics","frontend","group::product planning","section::dev","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373711","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373711","notes":"https://gitlab.com/api/v4/projects/278964/issues/373711/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373711/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373711","relative":"#373711","full":"gitlab-org/gitlab#373711"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":114962795,"iid":373709,"project_id":278964,"title":"Allow listing child epics from different group hierarchies","description":"## Summary\n\nSimilarly to https://gitlab.com/gitlab-org/gitlab/-/issues/373708, In order to list child epics from different group hierarchies, we new a new finder that allows groups outside the parent's hierarchy.\n\nWe can create a new finder that inherits from `EpicsFinder` (to maintain filtering) but instead of requiring the `group_id` param, it would require `parent_id`. \n\nAlthough the permission checks should match, the collection of groups to be checked would be defined by the children's group instead of the parent epic's hierarchy.\n\nTo query these children in GraphQL we can create a new resolver (similar to [`EpicAncestorsResolver`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/graphql/resolvers/epic_ancestors_resolver.rb)) and use the new finder behind a FF.\n\nSee [POC](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96884) for more details.\n\n**Note**: This issue is scoped to adding the finder and updating GraphQL endpoint.","state":"closed","created_at":"2022-09-13T14:17:46.450Z","updated_at":"2022-12-06T18:32:00.723Z","closed_at":"2022-11-15T11:50:02.859Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Deliverable","Track Health Status","backend","devops::plan","documentation","epics","group::product planning","missed-deliverable","missed:15.5","section::dev","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373709","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373709","notes":"https://gitlab.com/api/v4/projects/278964/issues/373709/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373709/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373709","relative":"#373709","full":"gitlab-org/gitlab#373709"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":114961755,"iid":373708,"project_id":278964,"title":"Allow listing ancestor epics from different group hierarchies","description":"When allowing children epics from different group hierarchies we in\n\nIn order to list ancestor epics from different group hierarchies, we need to change the way we use [`EpicsFinder`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/finders/epics_finder.rb) to allow groups outside the parent's hierarchy.\n\nWe can create a new finder that inherits from `EpicsFinder` (to maintain filtering) but doesn't require `group_id`. \n\nAlthough the permission checks should match, the collection of groups to be checked would be defined by the children's group instead of the parent's hierarchy.\n\nThis new finder is then used to query ancestors in [`EpicAncestorsResolver`](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/graphql/resolvers/epic_ancestors_resolver.rb) behind a FF.\n\nSee [POC](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96884) for more details.","state":"closed","created_at":"2022-09-13T14:05:04.071Z","updated_at":"2022-12-06T18:32:00.769Z","closed_at":"2022-11-11T14:08:26.436Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Deliverable","Track Health Status","backend","devops::plan","epics","group::product planning","missed-deliverable","missed:15.5","section::dev","type::feature","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373708","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373708","notes":"https://gitlab.com/api/v4/projects/278964/issues/373708/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373708/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373708","relative":"#373708","full":"gitlab-org/gitlab#373708"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":114960527,"iid":373705,"project_id":278964,"title":"Configurable list of things 'to be imported' that can be adjusted by the user (API)","description":"### Problem to solve\n\nImporting all supported relations during project import from GitHub [may take a long time](https://gitlab.com/gitlab-org/gitlab/-/issues/365977#note_1064687080). Some users might not want to import all of them to speed up the import process.\n\n### Proposed solution\n\nRelations that take a considerable amount of time to be imported could be chosen by the user to be included in the import, but by default they would be excluded.\n\nCreate a pop-up/modal form that will be triggered by clicking on the `Import` button.\n\n### Technical details (to be updated)\n\nCurrently, there are three feature flags that should be converted as checkboxes on UI and as params in API.\n\n- [single_endpoint_issue_events_import](https://gitlab.com/gitlab-org/gitlab/-/issues/365977)\n- [single_endpoint_notes_import](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/67150)\n- [attachments_import](https://gitlab.com/gitlab-org/gitlab/-/issues/371926)\n\nWe need to decide where this options will be set \u0026 stored during the import and just check it in places where we currently verifying feature flag state.\n\n**From the interfaces side:**\n\nWe have `POST /import/github` which consumes next params:\n\n* repo_id (number)\n* new_name (string)\n* target_namespace (string)\n\nProposal is to add one more param\n\n* optional_steps (object) `{ \"single_endpoint_notes_import\": true, ... }`\n\nFrontend side will receive list of `optional_steps` via HAML data attribute from some diff in format:\n\n```json\n{\n  \"name\": \"single_endpoint_notes_import\",\n  \"label\": \"Thorough notes import\",\n  \"details\": \"Optional extra explanation\"\n},\n...\n```","state":"closed","created_at":"2022-09-13T13:46:55.537Z","updated_at":"2022-10-21T12:02:40.650Z","closed_at":"2022-10-17T11:33:54.498Z","closed_by":{"id":2277639,"username":"knockfog-ext","name":"Rostyslav Safonov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2277639/avatar.png","web_url":"https://gitlab.com/knockfog-ext"},"labels":["Category:Importers","Deliverable","Importer:GitHub","Next Up","SoftServe::Import","backend","devops::manage","group::import","section::dev","type::feature","workflow::production"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":2277639,"username":"knockfog-ext","name":"Rostyslav Safonov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2277639/avatar.png","web_url":"https://gitlab.com/knockfog-ext"}],"author":{"id":2277639,"username":"knockfog-ext","name":"Rostyslav Safonov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2277639/avatar.png","web_url":"https://gitlab.com/knockfog-ext"},"type":"ISSUE","assignee":{"id":2277639,"username":"knockfog-ext","name":"Rostyslav Safonov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2277639/avatar.png","web_url":"https://gitlab.com/knockfog-ext"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373705","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373705","notes":"https://gitlab.com/api/v4/projects/278964/issues/373705/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373705/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373705","relative":"#373705","full":"gitlab-org/gitlab#373705"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114960493,"iid":373704,"project_id":278964,"title":"Allow adding child epics from different group hierarchies","description":"In order to allow child epics from different group hierarchies, we need to update the model validation that checks if the parent epic belongs to the same hierarchy.\n\nThese changes need to be behind a new FF.","state":"closed","created_at":"2022-09-13T13:46:28.158Z","updated_at":"2022-10-14T13:16:39.756Z","closed_at":"2022-10-14T13:16:39.696Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["backend","devops::plan","epics","group::product planning","section::dev","type::feature","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373704","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373704","notes":"https://gitlab.com/api/v4/projects/278964/issues/373704/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373704/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373704","relative":"#373704","full":"gitlab-org/gitlab#373704"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":114956120,"iid":373700,"project_id":278964,"title":"Add a limit on number of child epics per epic","description":"In preparation to [allow epics to have children epics from different group hierarchies](https://gitlab.com/groups/gitlab-org/-/epics/8502), we want to add a limit to the number of children can be added to an epic.\n\nThe goal of the limit would be to prevent performance degradation in epics with a large number of children (we execute permissions check for each child epic group which can be costly).\n\nThe limit value still needs to be determined but initially, we considered `100` as a safe start.","state":"closed","created_at":"2022-09-13T13:18:00.615Z","updated_at":"2022-11-07T12:13:48.571Z","closed_at":"2022-09-30T11:38:46.479Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Stretch","backend","devops::plan","epics","frontend","group::product planning","section::dev","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373700","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373700","notes":"https://gitlab.com/api/v4/projects/278964/issues/373700/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373700/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373700","relative":"#373700","full":"gitlab-org/gitlab#373700"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8502,"epic":{"id":577585,"iid":8502,"title":"Epics can have child epics from different group hierarchies","url":"/groups/gitlab-org/-/epics/8502","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":114931150,"iid":373523,"project_id":278964,"title":"Fix the MR creation error when generating VSA fixures","description":"### What\n\nWhen running the VSA fixtures in the development environment, the script sometimes fails when an existing project id is given:https://gitlab.com/gitlab-org/gitlab/-/issues/372761#note_1090925458\n\nReason: The `merge_request` Factory uses the `stub_method` call which is only available in test environment. Failure happens here: https://gitlab.com/gitlab-org/gitlab/-/blob/master/db/fixtures/development/17_cycle_analytics.rb#L89\n\n### Fix\n\nTry to use the MergeRequest create service when creating merge requests. We might need to do extra calls for creating branches and commits.","state":"closed","created_at":"2022-09-13T09:01:06.832Z","updated_at":"2022-12-20T17:54:32.780Z","closed_at":"2022-12-20T17:54:32.725Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Category:DevOps Reports","[deprecated] Accepting merge requests","backend","devops::plan","group::optimize","maintenance::refactor","missed:15.5","missed:15.6","priority::3","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373523","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373523","notes":"https://gitlab.com/api/v4/projects/278964/issues/373523/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373523/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373523","relative":"#373523","full":"gitlab-org/gitlab#373523"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114926424,"iid":373498,"project_id":278964,"title":"[Feature flag] Cleanup extract_mr_diff_deletions","description":"\u003c!-- Title suggestion:  --\u003e\n\n## Summary\n\nThis issue is to cleanup the `extract_mr_diff_deletions` feature flag, after the feature flag has been enabled by default for an appropriate amount of time in production.\n\n* Previous FF issue: https://gitlab.com/gitlab-org/gitlab/-/issues/372060\n* Merge request: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96455\n\n\n## Owners\n\n* Team: ~\"group::source code\"\n* Most appropriate slack channel to reach out to: `#g_create_source-code-be`\n* Best individual to reach out to: @vyaklushin\n\n### What are we expecting to happen?\n\nProjects that had problems with deletion will be processed successfully.\n\n\n### What might happen if this goes wrong?\n\nProjects scheduled for a deletion are not deleted.\n\n### What can we monitor to detect problems with this?\n\n* https://log.gprd.gitlab.net/goto/6a755f20-2dde-11ed-8656-f5f2137823ba (Production)\n* https://log.gprd.gitlab.net/goto/b60139f0-2e92-11ed-b86b-d963a1a6788e (Production successful removal)\n* https://nonprod-log.gitlab.net/goto/b636fcc0-2dde-11ed-af31-918941b0065a (Staging)\n\n\n### Cleaning up the feature flag\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `extract_mr_diff_deletions` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-cleanup-mr\u003e`\n- [x] Close [the feature issue](https://gitlab.com/gitlab-org/gitlab/-/issues/352511) to indicate the feature will be released in the current milestone.\n- [x] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete extract_mr_diff_deletions --dev`\n    - [x] `/chatops run feature delete extract_mr_diff_deletions --staging`\n    - [x] `/chatops run feature delete extract_mr_diff_deletions`\n- [x] Close this rollout issue.","state":"closed","created_at":"2022-09-13T08:24:20.958Z","updated_at":"2022-10-21T12:01:13.548Z","closed_at":"2022-09-27T11:39:30.919Z","closed_by":{"id":12517375,"username":"ghinfey","name":"Gavin Hinfey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12517375/avatar.png","web_url":"https://gitlab.com/ghinfey"},"labels":["Deliverable","backend","devops::create","feature flag","feature::addition","group::source code","quad-planning::complete-no-action","section::dev","type::feature","workflow::ready for development"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":12517375,"username":"ghinfey","name":"Gavin Hinfey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12517375/avatar.png","web_url":"https://gitlab.com/ghinfey"}],"author":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"type":"ISSUE","assignee":{"id":12517375,"username":"ghinfey","name":"Gavin Hinfey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12517375/avatar.png","web_url":"https://gitlab.com/ghinfey"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373498","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":12},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"12 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373498","notes":"https://gitlab.com/api/v4/projects/278964/issues/373498/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373498/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373498","relative":"#373498","full":"gitlab-org/gitlab#373498"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114906724,"iid":373323,"project_id":278964,"title":"Internationalize error messages in Release services","description":"The following discussion from !96586 should be addressed:\n\n- [ ] @tbulva started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96586#note_1096668807):  (+2 comments)\n\n    \u003e Question (non-blocking): I might be wrong but it seems to me like you are surfacing this error, and possibly the others here, on the front end. Shouldn't these be also internationalized?\n\n## Proposal\n\n[Internationalize](https://docs.gitlab.com/ee/development/i18n/externalization.html) the error messages in https://gitlab.com/gitlab-org/gitlab/-/tree/master/app/services/releases.\n\nFor example:\n\n```diff\ndiff --git a/app/services/releases/create_service.rb b/app/services/releases/create_service.rb\nindex 2588d2187a50..dd626262f6e7 100644\n--- a/app/services/releases/create_service.rb\n+++ b/app/services/releases/create_service.rb\n@@ -3,8 +3,8 @@\n module Releases\n   class CreateService \u003c Releases::BaseService\n     def execute\n-      return error('Access Denied', 403) unless allowed?\n-      return error('Release already exists', 409) if release\n+      return error(_('Access Denied'), 403) unless allowed?\n+      return error(_('Release already exists'), 409) if release\n       return error(\"Milestone(s) not found: #{inexistent_milestones.join(', ')}\", 400) if inexistent_milestones.any?\n \n       # should be found before the creation of new tag\n```\n\n- [x] 4 error messages in `Releases::CreateService`\n- [x] 2 error messages in `Releases::DestroyService`\n- [x] 5 error messages in `Releases::UpdateService`","state":"closed","created_at":"2022-09-13T00:54:15.697Z","updated_at":"2022-11-21T12:04:41.432Z","closed_at":"2022-10-18T10:23:09.331Z","closed_by":{"id":11334402,"username":"ahmed.hemdan","name":"Ahmed Hemdan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11334402/avatar.png","web_url":"https://gitlab.com/ahmed.hemdan"},"labels":["Category:Release Orchestration","Deliverable","Release::P1","backend","devops::release","feature::enhancement","group::release","section::ops","type::feature"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":11334402,"username":"ahmed.hemdan","name":"Ahmed Hemdan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11334402/avatar.png","web_url":"https://gitlab.com/ahmed.hemdan"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":11334402,"username":"ahmed.hemdan","name":"Ahmed Hemdan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11334402/avatar.png","web_url":"https://gitlab.com/ahmed.hemdan"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373323","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373323","notes":"https://gitlab.com/api/v4/projects/278964/issues/373323/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373323/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373323","relative":"#373323","full":"gitlab-org/gitlab#373323"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114905748,"iid":373321,"project_id":278964,"title":"Add notifications to Slack App integration - Part 2","description":"## About\n\nThis issue is part of the epic https://gitlab.com/groups/gitlab-org/-/epics/8670. See that epic for more context.\n\nThis issue is the next iteration of https://gitlab.com/gitlab-org/gitlab/-/issues/372410. See that issue for more context.\n\nIn https://gitlab.com/gitlab-org/gitlab/-/issues/372410 the posting of notifications to Slack was a no-op. This issue will implement the posting of notifications to Slack and release a new version of the Slack App.\n\n## Proposal\n\nThe `Integrations::GitlabSlackApplication` model will post to Slack using the [`slack_installation` association](https://gitlab.com/gitlab-org/gitlab/-/blob/50e04a8875413e5c48578e4431fb9ab60a3bcccc/ee/app/models/integrations/gitlab_slack_application.rb#L7)'s `bot_access_token` to the using the [Slack API `chat.postMessage` method](https://api.slack.com/methods/chat.postMessage). This can be done by defining a `#notify` method that [uses `Slack::Api.post`](https://gitlab.com/gitlab-org/gitlab/-/blob/fc4c44db9f484467a9af9eda0e54999c9bf5c2c6/ee/lib/slack/api.rb), handling the `ArgumentError` that method can throw. \n\nThe `chat.postMesage` API method would need the `chat:write` bot [scope to be added](https://gitlab.com/gitlab-org/manage/integrations/team/-/blob/main/integrations/slack.md#slack-web-api-permissions) to our GitLab Slack App in order to have permission to do this.\n\nWe should be able to post the same `attachments` and `text` params that `Integrations::Slack` (the legacy Slack Notifications integration) posts currently ([see the `Integrations::ChatMessage` classes](https://gitlab.com/gitlab-org/gitlab/-/tree/master/app/models/integrations/chat_message) and https://gitlab.com/gitlab-org/gitlab/-/issues/373321#note_1102940470) to [`chat.postMessage`](https://api.slack.com/methods/chat.postMessage), which means we can re-use the existing `Integrations::ChatMessage` classes. \n\nWe will release a new version of the GitLab Slack App in order to release the new `chat:write` bot scope. See our [Slack dev guide](https://gitlab.com/gitlab-org/manage/integrations/team/-/blob/main/integrations/slack.md#publish-changes-to-the-gitlab-slack-app).\n\nThe change should be behind the same feature flag as was used in https://gitlab.com/gitlab-org/gitlab/-/issues/372410.\n\n\n### Documentation\n\nWe would update the ~documentation of the [Slack Application](https://docs.gitlab.com/ee/user/project/integrations/gitlab_slack_application.html) page.\n\nIf needed, keep our [Slack development guide](https://gitlab.com/gitlab-org/manage/integrations/team/-/blob/main/integrations/slack.md#publish-changes-to-the-gitlab-slack-app) information up to date.","state":"closed","created_at":"2022-09-13T00:01:12.146Z","updated_at":"2022-12-21T12:10:27.212Z","closed_at":"2022-12-01T03:46:55.200Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Integrations","Deliverable","Integration::Slack","SUS::Impacting","Technical Writing","UI text","backend","devops::manage","docs::feature","documentation","feature::enhancement","group::integrations","missed-deliverable","missed:15.6","section::dev","severity::4","type::feature","workflow::in review"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":79,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373321","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":6,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373321","notes":"https://gitlab.com/api/v4/projects/278964/issues/373321/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373321/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373321","relative":"#373321","full":"gitlab-org/gitlab#373321"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8670,"epic":{"id":595009,"iid":8670,"title":"Extend Slack app to support notifications","url":"/groups/gitlab-org/-/epics/8670","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":114905580,"iid":373320,"project_id":278964,"title":"Geo: File synchronization concurrency limit actually limits jobs by half of the setting","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"type::bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=type::bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nIf you set `File synchronization concurrency limit` to X, then concurrent Sidekiq jobs which sync \"files\" are limited to X/2.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n1. For a Geo secondary site, set `File synchronization concurrency limit` to 4.\n1. Make Geo resync many files. In Rails console in a Puma/Sidekiq/Geo Log Cursor node in the secondary site:\n   ```ruby\n   registry_entries = Geo::UploadRegistry.synced.limit(50)\n   registry_entries.each { |r| r.pending! }\n   ```\n1. Look at Sidekiq logs.\n\nYou should see that `Geo::EventWorker` jobs with args `{ 'upload', :created, model_record_id: XXXX }` are only scheduled such that 2 are running at any time.\n\n(Note: It may go above that if new uploads are being added during the observed time... This is a separate problem with our concurrency limiting).\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n`Geo::EventWorker` jobs with args `{ 'upload', :created, model_record_id: XXXX }` are only scheduled such that a maximum of `File synchronization concurrency limit`/2 are running at any time.\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n`Geo::EventWorker` jobs with args `{ 'upload', :created, model_record_id: XXXX }` are only scheduled such that a maximum of `File synchronization concurrency limit` are running at any time.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2022-09-12T23:52:24.035Z","updated_at":"2022-09-20T21:37:28.898Z","closed_at":"2022-09-20T15:49:27.125Z","closed_by":{"id":11488451,"username":"juan-silva","name":"Juan Silva","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11488451/avatar.png","web_url":"https://gitlab.com/juan-silva"},"labels":["backend","bug::functional","devops::systems","group::geo","priority::4","section::enablement","severity::4","type::bug","workflow::in review"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373320","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373320","notes":"https://gitlab.com/api/v4/projects/278964/issues/373320/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373320/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373320","relative":"#373320","full":"gitlab-org/gitlab#373320"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114895478,"iid":373303,"project_id":278964,"title":"Geo: Segregate container repositories from Git repositories","description":"The following discussion from !93690 should be addressed:\n\n- [ ] @mkozono started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/93690#note_1095688178): \n\n    \u003e thought (non-blocking): As mentioned somewhere before, it'd be better if we could keep container repositories separate from Git repositories as they are fundamentally different data types. I know this is old code but unfortunately we have to duplicate it into `ContainerRepositoryReplicator` (or deviate).\n    \u003e \n    \u003e I tried this locally to see if it breaks anything:\n    \u003e \n    \u003e ```suggestion:-1+0\n    \u003e           data_type: 'container_repository',\n    \u003e           data_type_title: _('Container repository'),\n    \u003e ```\n    \u003e \n    \u003e I am pretty sure this only affects the frontend, and when I looked at `Admin \u003e Geo \u003e Sites`, it seemed ok:\n    \u003e \n    \u003e ![image](/uploads/3f735660bf450957fb9afdb41f8d04fe/image.png)\n    \u003e \n    \u003e But poking through the code it looks like these helper values are used to produce this as well:\n    \u003e \n    \u003e ![image](/uploads/970eb0be834a5a7533fd2ad03a4b20f1/image.png)\n    \u003e \n    \u003e So IIUC, applying the suggestion above would mean that the aggregate percentages wouldn't include Container repository numbers at all. We'd have to do at least a little bit of frontend work to add a line item for Container Repository here.\n    \u003e \n    \u003e I'll just open a follow up issue.\n    \u003e \n    \u003e cc @zcuddy","state":"closed","created_at":"2022-09-12T19:46:36.247Z","updated_at":"2023-01-03T18:56:58.978Z","closed_at":"2022-09-28T19:36:16.300Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["SUS::Impacting","backend","bug::ux","devops::systems","frontend","group::geo","priority::4","section::enablement","severity::4","type::bug","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373303","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373303","notes":"https://gitlab.com/api/v4/projects/278964/issues/373303/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373303/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373303","relative":"#373303","full":"gitlab-org/gitlab#373303"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6506,"epic":{"id":318726,"iid":6506,"title":"Geo: Move container registry to self-service framework","url":"/groups/gitlab-org/-/epics/6506","group_id":9970,"human_readable_end_date":"Sep 16, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114885222,"iid":373288,"project_id":278964,"title":"Follow-up from \"Remove free user cap awaiting user logic\"","description":"The following discussion from !96582 should be addressed:\n\n- [ ] @mattkasa started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96582#note_1095301409):  (+4 comments)\n\n    \u003e **question:** This index was used in the last week, would it be safer to leave it until the code using it is removed, then ensure nothing else was using it, then remove it? Or can we be sure right now that these queries are the only queries using it?","state":"closed","created_at":"2022-09-12T17:47:03.292Z","updated_at":"2022-09-29T01:01:13.336Z","closed_at":"2022-09-29T01:01:13.292Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["devops::growth","group::acquisition","maintenance::refactor","section::growth","type::maintenance","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373288","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373288","notes":"https://gitlab.com/api/v4/projects/278964/issues/373288/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373288/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373288","relative":"#373288","full":"gitlab-org/gitlab#373288"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114881904,"iid":373285,"project_id":278964,"title":"Fix N+1 queries for epic label_links","description":"\nWhen querying subepics of an epic with GraphQL, we get N+1s queries if the field `labels` is present.\n\n\u003cdetails\u003e\u003csummary\u003eClick to expand example query\u003c/summary\u003e\n\n```graphql\nquery getChildren {\n  group(fullPath: \"gitlab-org\") {\n    epic(iid: \"6\") {\n      children {\n        edges {\n          node {\n            title\n            }\n            labels {\n              edges {\n                node {\n                  title          \n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n\u003c/details\u003e\n\n### Screenshot\n\n![Screenshot_2022-09-12_at_18.44.08](/uploads/f37012953d7df47a60e4bdc7b745840e/Screenshot_2022-09-12_at_18.44.08.png)","state":"closed","created_at":"2022-09-12T16:52:37.251Z","updated_at":"2022-10-21T12:00:47.081Z","closed_at":"2022-10-11T09:39:30.241Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Deliverable","GraphQL","backend","devops::plan","group::product planning","maintenance::performance","section::dev","type::maintenance","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373285","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373285","notes":"https://gitlab.com/api/v4/projects/278964/issues/373285/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373285/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373285","relative":"#373285","full":"gitlab-org/gitlab#373285"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":114878452,"iid":373274,"project_id":278964,"title":"Update the security_training_promo_banner.vue to use the shared security_training_promo.vue component","description":"Update the `security_training_promo_banner.vue` to use the shared `security_training_promo.vue` component. (And update related specs)\n\n```shell\n# security_training_promo_banner.vue\n# High level pseudo code\n\u003csecurity-training-promo\u003e\n  \u003cgl-banner\u003evulnerability page training promo banner UI\u003c/gl-banner\u003e\n\u003c/security-training-promo\u003e\n```\n\nPlease see this implementation plan for details \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/373025#implementaion-plan","state":"closed","created_at":"2022-09-12T15:53:49.775Z","updated_at":"2022-11-21T13:40:04.004Z","closed_at":"2022-11-15T08:28:20.158Z","closed_by":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"labels":["Threat Insights::Navy","devops::govern","frontend","group::threat insights","maintenance::refactor","missed:15.4","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":5535246,"username":"svedova","name":"Savas Vedova","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535246/avatar.png","web_url":"https://gitlab.com/svedova"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373274","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373274","notes":"https://gitlab.com/api/v4/projects/278964/issues/373274/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373274/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373274","relative":"#373274","full":"gitlab-org/gitlab#373274"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9040,"epic":{"id":628839,"iid":9040,"title":"Security Training - Follow up and lower priority items","url":"/groups/gitlab-org/-/epics/9040","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114878401,"iid":373272,"project_id":278964,"title":"Create a shared security_training_promo.vue component","description":"Create a shared `security_training_promo.vue` component\n\n```diff\n+ ee/app/assets/javascripts/vue_shared/security_reports/components/security_training_promo.vue\n```\n\nPlease see this implementation plan for details \u003e https://gitlab.com/gitlab-org/gitlab/-/issues/373025#implementaion-plan","state":"closed","created_at":"2022-09-12T15:53:17.637Z","updated_at":"2022-11-21T13:34:45.350Z","closed_at":"2022-11-16T15:45:25.314Z","closed_by":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"labels":["Threat Insights::Navy","devops::govern","frontend","group::threat insights","maintenance::refactor","missed:15.4","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"}],"author":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"type":"ISSUE","assignee":{"id":4155411,"username":"dpisek","name":"David Pisek","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155411/avatar.png","web_url":"https://gitlab.com/dpisek"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373272","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373272","notes":"https://gitlab.com/api/v4/projects/278964/issues/373272/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373272/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373272","relative":"#373272","full":"gitlab-org/gitlab#373272"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":9040,"epic":{"id":628839,"iid":9040,"title":"Security Training - Follow up and lower priority items","url":"/groups/gitlab-org/-/epics/9040","group_id":9970,"human_readable_end_date":"Nov 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":114878111,"iid":373271,"project_id":278964,"title":"[Feature flag] Enable applying a trial in background for registration","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Summary\n\nThis issue is to rollout [the feature](https://gitlab.com/gitlab-org/gitlab/-/issues/373270) on production,\nthat is currently behind the `registration_trial_in_background` feature flag.\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n## Owners\n\n- Team: ~\"group::acquisition\" \n- Most appropriate slack channel to reach out to: `#g_acquisition`\n- Best individual to reach out to: @dstull\n- PM: @s_awezec \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\nTrial is applied successfully during registration. Signed up user should be able to go to the namespaces billing page and see ultimate trial applied.\n\n### When is the feature viable?\n\nDuring registration for trials\n\n### What might happen if this goes wrong?\n\nTrials will not apply during registration\n\n### What can we monitor to detect problems with this?\n\nLook for errors in [logs](https://log.gprd.gitlab.net/app/discover#/?_a=(columns:!(json.meta.caller_id,json.correlation_id,json.exception.class,json.error_class,json.job_status,json.message,json.params.trial_user,json.params.uid,json.retry_count),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.class,negate:!f,params:(query:'GitlabSubscriptions::Trials::ApplyTrialWorker'),type:phrase),query:(match_phrase:(json.class:'GitlabSubscriptions::Trials::ApplyTrialWorker')))),index:AWNABDRwNDuQHTm2tH6l,interval:auto,query:(language:kuery,query:''),sort:!(!(json.time,desc)))\u0026_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-24h%2Fh,to:now)))\n\n\n### What can we check for monitoring production after rollouts?\n\n[logs](https://log.gprd.gitlab.net/app/discover#/?_a=(columns:!(json.meta.caller_id,json.correlation_id,json.exception.class,json.error_class,json.job_status,json.message,json.params.trial_user,json.params.uid,json.retry_count),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.class,negate:!f,params:(query:'GitlabSubscriptions::Trials::ApplyTrialWorker'),type:phrase),query:(match_phrase:(json.class:'GitlabSubscriptions::Trials::ApplyTrialWorker')))),index:AWNABDRwNDuQHTm2tH6l,interval:auto,query:(language:kuery,query:''),sort:!(!(json.time,desc)))\u0026_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-24h%2Fh,to:now))) for errors\n\n[logs](https://log.gprd.gitlab.net/app/discover#/?_a=(columns:!(json.meta.caller_id,json.correlation_id,json.exception.class,json.error_class,json.job_status,json.message,json.params.trial_user,json.params.uid,json.retry_count),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.class,negate:!f,params:(query:'GitlabSubscriptions::Trials::ApplyTrialWorker'),type:phrase),query:(match_phrase:(json.class:'GitlabSubscriptions::Trials::ApplyTrialWorker'))),('$state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.job_status,negate:!f,params:(query:done),type:phrase),query:(match_phrase:(json.job_status:done)))),index:AWNABDRwNDuQHTm2tH6l,interval:auto,query:(language:kuery,query:''),sort:!(!(json.time,desc)))\u0026_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-1h,to:now))) for success\n\nmaster [logs](https://log.gprd.gitlab.net/app/discover#/?_a=(columns:!(json.error_class,json.job_status,json.retry_count,json.failed_at),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.class,negate:!f,params:(query:'GitlabSubscriptions::Trials::ApplyTrialWorker'),type:phrase),query:(match_phrase:(json.class:'GitlabSubscriptions::Trials::ApplyTrialWorker')))),index:AWNABDRwNDuQHTm2tH6l,interval:auto,query:(language:kuery,query:''),sort:!(!(json.time,desc)))\u0026_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-1h,to:now))) for all\n- in here we want to see no `json.failed_at` times that are greater than 2022-09-20\n\nSisense for trials\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set registration_trial_in_background true --dev --staging --staging-ref`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com \u003cfeature-flag-name\u003e true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e \u003cfeature-flag-name\u003e true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_acquisition`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [ ] `/chatops run feature set \u003cfeature-flag-name\u003e true`\n- [ ] Announce on [the feature issue](https://gitlab.com/gitlab-org/gitlab/-/issues/373270) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete \u003cfeature-flag-name\u003e --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `\u003cfeature-flag-name\u003e`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `registration_trial_in_background` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [x] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete registration_trial_in_background --dev --staging --staging-ref --production`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set registration_trial_in_background false\n```","state":"closed","created_at":"2022-09-12T15:49:21.216Z","updated_at":"2022-10-04T13:36:03.790Z","closed_at":"2022-10-04T13:36:03.736Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["devops::growth","feature flag","feature::addition","group::acquisition","section::growth","type::feature","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373271","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":46,"completed_count":13},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"13 of 46 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373271","notes":"https://gitlab.com/api/v4/projects/278964/issues/373271/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373271/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373271","relative":"#373271","full":"gitlab-org/gitlab#373271"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114877441,"iid":373270,"project_id":278964,"title":"Mitigate possible rollout issues with apply trial worker","description":"applying trials in background is failing as seen in [logs](https://log.gprd.gitlab.net/app/discover#/?_a=(columns:!(json.meta.caller_id,json.correlation_id,json.exception.class,json.error_class,json.job_status,json.message,json.params.trial_user,json.params.uid),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:AWNABDRwNDuQHTm2tH6l,key:json.class,negate:!f,params:(query:'GitlabSubscriptions::Trials::ApplyTrialWorker'),type:phrase),query:(match_phrase:(json.class:'GitlabSubscriptions::Trials::ApplyTrialWorker')))),index:AWNABDRwNDuQHTm2tH6l,interval:auto,query:(language:kuery,query:''),sort:!(!(json.time,desc)))\u0026_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-1h,to:now)))\n\n# Solution\n\nintroduce a feature flag that will enable the previous code as seen in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/96807 to be applied\n\nsee tasks","state":"closed","created_at":"2022-09-12T15:43:55.976Z","updated_at":"2022-09-22T13:06:29.269Z","closed_at":"2022-09-22T13:06:29.198Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["Next Up","bug::availability","devops::growth","group::acquisition","priority::2","section::growth","severity::3","type::bug","workflow::in review"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373270","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373270","notes":"https://gitlab.com/api/v4/projects/278964/issues/373270/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373270/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373270","relative":"#373270","full":"gitlab-org/gitlab#373270"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114865552,"iid":373258,"project_id":278964,"title":"Followup: add tests for MR assignees/reviewers/approvers to GitLab Migration","description":"In https://gitlab.com/gitlab-org/gitlab/-/issues/339520 we added support for MR assignees/approvers/reviews to GitLab Migration \u0026 Import/Export. However, we missed adding tests to GitLab Migration for newly added relations. Tests were added for Import/Export, but not GitLab Migration. \n\nUpdate [BulkImports::Projects::Pipelines::MergeRequestsPipeline](https://gitlab.com/gitlab-org/gitlab/blob/master/spec/lib/bulk_imports/projects/pipelines/merge_requests_pipeline_spec.rb#L5-5) to cover newly added relations.","state":"closed","created_at":"2022-09-12T13:39:45.436Z","updated_at":"2022-09-19T13:19:47.516Z","closed_at":"2022-09-19T13:19:47.491Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Importer:GitLab Migration","Next Up","devops::manage","group::import","section::dev","type::maintenance","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373258","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373258","notes":"https://gitlab.com/api/v4/projects/278964/issues/373258/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373258/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373258","relative":"#373258","full":"gitlab-org/gitlab#373258"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114863696,"iid":373256,"project_id":278964,"title":"Run model validations when importing from GitHub","description":"### Problem\n\nOur GitHub Importer bulk inserts data fetched from GitHub skipping ActiveRecord validations and callbacks.\n\nWhile it boosts importer's performance, it can cause unexpected behaviour. \n\n### Proposed solution\n\nWe should still run model validations and filter out any records that are invalid.","state":"closed","created_at":"2022-09-12T13:17:40.243Z","updated_at":"2022-12-21T12:04:10.037Z","closed_at":"2022-12-12T12:49:17.395Z","closed_by":{"id":11982352,"username":"krisberry-ext","name":"Kristina Doskich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11982352/avatar.png","web_url":"https://gitlab.com/krisberry-ext"},"labels":["Category:Importers","Deliverable","Importer:GitHub","SoftServe::Import","backend","devops::manage","feature::enhancement","group::import","section::dev","security","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":11982352,"username":"krisberry-ext","name":"Kristina Doskich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11982352/avatar.png","web_url":"https://gitlab.com/krisberry-ext"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":11982352,"username":"krisberry-ext","name":"Kristina Doskich","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11982352/avatar.png","web_url":"https://gitlab.com/krisberry-ext"},"user_notes_count":13,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373256","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373256","notes":"https://gitlab.com/api/v4/projects/278964/issues/373256/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373256/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373256","relative":"#373256","full":"gitlab-org/gitlab#373256"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114861788,"iid":373253,"project_id":278964,"title":"\"Related feature flags\" widget contains link to non-existent detail view of feature flag","description":"## Problem\n\nOn the \"Related feature flags\" widget for an issue, the title of the feature flag is a link. However, as there does not seem to even be detail view for feature flags (that's my assumption based on the fact that even at `Deployments -\u003e Feature flags`, there is no link to a detail view), that link always leads to a 404 page.\n\n![image](/uploads/e8dda9377f65efdca3b78f2e198c627a/image.png)\n\n## Proposal\n\nAs MVC, we should probably make that item a text, and not a link. That would solve the most immediate problem.\n\nFor the long-term however, I think we need to understand why feature flags don't have a detail view, and if that is correct and expected. Looking at the feature flags lists, it seems to me like we have tried to cram everything into that list to avoid having to build a detail view, but this already breaks down because e.g. \"Linked items\" are only visible in the \"Edit\" view and the description gets cut off very early, so these aspects are only visible on the \"Edit\" view, which is a problem.\n\n| List | Edit |\n| ------ | ------ |\n| ![image](/uploads/ce56688fbfd76385d1c130dcee448060/image.png) | ![image](/uploads/57c070f2241c2f9e4313fb11dfa80242/image.png) |","state":"closed","created_at":"2022-09-12T12:54:19.585Z","updated_at":"2022-09-21T07:58:19.953Z","closed_at":"2022-09-16T18:10:03.515Z","closed_by":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"labels":["SUS::Impacting","UX","bug::ux","devops::release","group::release","priority::1","section::ops","severity::1","type::bug","workflow::production"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"}],"author":{"id":3688647,"username":"mvanremmerden","name":"Marcel van Remmerden","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4f46ed49b87eab9e74f20e0e25b36d0f?s=80\u0026d=identicon","web_url":"https://gitlab.com/mvanremmerden"},"type":"ISSUE","assignee":{"id":262533,"username":"afontaine","name":"Andrew Fontaine","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/262533/avatar.png","web_url":"https://gitlab.com/afontaine"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2022-10-13","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373253","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373253","notes":"https://gitlab.com/api/v4/projects/278964/issues/373253/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373253/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373253","relative":"#373253","full":"gitlab-org/gitlab#373253"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114849464,"iid":373245,"project_id":278964,"title":"Improve VSA edit modal action buttons responsiveness","description":"## Summary\n\nWe can improve the responsive layout for the VSA edit/create form. For mobile screens:\n- The action buttons should be full width\n- The order of the buttons should be reversed (in order top to bottom: Create / Edit action -\u003e Add another stage -\u003e Cancel)\n\n## Background\n\n\u003e Yes I agree, at the point the buttons start wrapping onto multiple lines full width is probably best. But I think we'd also want the order to be reversed so the primary action is on top.\n\u003e \n\u003e I think we'll need a Pajamas issue to document that also.\n\u003e \n\u003e Update: Here is the relevant issue https://gitlab.com/gitlab-org/gitlab-services/design.gitlab.com/-/issues/738\n\n## Link to thread\n\nThe following discussion from !97387 should be addressed:\n\n- [ ] @ekigbo started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97387#note_1093950104):  (+6 comments)\n\n    \u003e Hi @katiemacoy are you free to ~UX review this MR?","state":"closed","created_at":"2022-09-12T10:37:01.492Z","updated_at":"2022-11-23T18:47:11.808Z","closed_at":"2022-11-23T18:47:11.781Z","closed_by":{"id":12352378,"username":"apennells","name":"Alex Pennells","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12352378/avatar.png","web_url":"https://gitlab.com/apennells"},"labels":["Category:DevOps Reports","Category:Value Stream Management","SUS::Impacting","UI polish","devops::plan","frontend","group::optimize","maintenance::refactor","mobile layout","responsive","section::dev","severity::4","type::maintenance","workflow::verification"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373245","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373245","notes":"https://gitlab.com/api/v4/projects/278964/issues/373245/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373245/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373245","relative":"#373245","full":"gitlab-org/gitlab#373245"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114827198,"iid":373229,"project_id":278964,"title":"Remove unnecessary guard clause in `Environment.auto_stop_in=`","description":"## Problem\n\nOriginally discussed in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97425#note_1096198537.\n\nIt looks like we're having an unnecessary guard clause in the `Environment.auto_stop_in=`. We should always renew the value when a valid parameter is passed.\n\n## Proposal\n\n```diff\ndiff --git a/app/models/environment.rb b/app/models/environment.rb\nindex 4aab4ab8170c..1a92621aa21f 100644\n--- a/app/models/environment.rb\n+++ b/app/models/environment.rb\n@@ -432,7 +432,6 @@ def auto_stop_in=(value)\n     return unless value\n \n     parser = ::Gitlab::Ci::Build::DurationParser.new(value)\n-    return if parser.seconds_from_now.nil?\n \n     self.auto_stop_at = parser.seconds_from_now\n   end\n```","state":"closed","created_at":"2022-09-12T05:10:02.427Z","updated_at":"2022-10-17T14:50:17.117Z","closed_at":"2022-10-17T14:50:17.064Z","closed_by":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"labels":["Category:Environment Management","devops::release","group::release","section::ops","type::maintenance","workflow::verification"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"}],"author":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"type":"ISSUE","assignee":{"id":9253328,"username":"bala.kumar","name":"Bala Kumar","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9253328/avatar.png","web_url":"https://gitlab.com/bala.kumar"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373229","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373229","notes":"https://gitlab.com/api/v4/projects/278964/issues/373229/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373229/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373229","relative":"#373229","full":"gitlab-org/gitlab#373229"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114944737,"iid":373648,"project_id":278964,"title":"Jira ImportIssueWorker should not write unused key into redis-cache","description":"### Background\n\nThere are ongoing discussions on handling application logic changes to prepare for zonal sidekiq (https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/973). Only 1 sidekiq worker contains application-side limiting logic which checks sidekiq queue length to decide if a pause needs to be triggered. \n\nThe context for this pause-logic can be found in (high volume of `cache:gitlab:jira-import*` keys found) https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/419#note_381941081 and (proposal to add application limits for jira imports) https://gitlab.com/gitlab-org/gitlab/-/issues/244859.\n\n### Issue\n\nThe question to answer is: **Could `ImportIssueWorker` stop writing the items-mapper key into redis-cache?**\n\nThe cache key is `cache:gitlab:jira-import/items-mapper/NUM/issues/NUM` (written by https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/workers/gitlab/jira_import/import_issue_worker.rb#L19). \n\nThe cache key `cache:gitlab:jira-import/items-mapper/NUM/issues/NUM` in redis-cache contributes to a large volume of keys when large jira projects are imported. However, these keys are not used anywhere else in the application (noted in MR discussion: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/27229#note_311307225 and verified with @acroitor) nor is it cleaned up immediately after a finished import (its removed via 24h TTL).\n\nApplication limits were imposed by using sidekiq queue length as a measure (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/93577) to prevent such spikes. However, such spikes can be avoided altogether if this key is removed.\n\nDoing so will benefit zonal sidekiq efforts in getting application logic ready for zonal sidekiq adoption. We can safely use an alternative measure to perform application-side limiting that does not depend on sidekiq queue length.\n\ncc @alejandro @smcgivern @reprazent","state":"closed","created_at":"2022-09-12T02:44:27.886Z","updated_at":"2022-09-23T08:41:58.412Z","closed_at":"2022-09-15T07:11:18.451Z","closed_by":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"labels":["devops::plan","group::project management","section::dev"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},{"id":12242356,"username":"schin1","name":"Sylvester Chin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12242356/avatar.png","web_url":"https://gitlab.com/schin1"}],"author":{"id":12242356,"username":"schin1","name":"Sylvester Chin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/12242356/avatar.png","web_url":"https://gitlab.com/schin1"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":8,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373648","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373648","notes":"https://gitlab.com/api/v4/projects/278964/issues/373648/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373648/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373648","relative":"#373648","full":"gitlab-org/gitlab#373648"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114800149,"iid":373220,"project_id":278964,"title":"Certificate problems with multiple pages to the same repo","description":"I point many different web addresses at the same gitlab repo (about.summerhays.net and blank.summerhays.net for instance), but there seems to be a bug in how the certificate is being created. Now I get certificate warnings for all but one of them. But this is a new bug, as I've been doing this on Gitlab for years.\n\nHere's the error:\nThe certificate is only valid for about.summerhays.net.\n \nError code: SSL_ERROR_BAD_CERT_DOMAIN\n\nPS maybe the same bug reported [here](https://forum.gitlab.com/t/gitlab-pages-letsencrypt-error-warning-potential-security-risk-ahead/74797)\n\nTag: pages, LetsEncrypt","state":"closed","created_at":"2022-09-11T10:24:24.362Z","updated_at":"2022-12-16T15:32:11.234Z","closed_at":"2022-09-15T13:08:41.907Z","closed_by":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"labels":["Category:Pages","customer","devops::create","group::editor","section::dev","type::bug"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"}],"author":{"id":6596523,"username":"summerhays","name":"Summerhays","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a89d85db20b562eddc4e4854d15e384f?s=80\u0026d=identicon","web_url":"https://gitlab.com/summerhays"},"type":"ISSUE","assignee":{"id":696751,"username":"kassio","name":"Kassio Borges","state":"active","avatar_url":"https://secure.gravatar.com/avatar/be7919dfa5d1e8b8826bf51bfc747055?s=80\u0026d=identicon","web_url":"https://gitlab.com/kassio"},"user_notes_count":14,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373220","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373220","notes":"https://gitlab.com/api/v4/projects/278964/issues/373220/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373220/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373220","relative":"#373220","full":"gitlab-org/gitlab#373220"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114769352,"iid":373204,"project_id":278964,"title":"Three edge cases of jobs being added to pipelines incorrectly","description":"## Issue\n\nWhile looking at this pipeline, I found two edge cases for pipeline misconfiguration: https://gitlab.com/gitlab-org/gitlab/-/pipelines/635858009\n\n- The 4 dependency scanner jobs added in https://gitlab.com/gitlab-org/gitlab/-/merge_requests/86791/diffs\n\n  These jobs are set with a simple `if: '$CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH'`, but if a contributor works from their fork's default branch, like in this contributor's MR, these jobs will be added to pipelines for their MRs (when triggered by a maintainer before merge). This is tricky to handle, and I'm not sure what to suggest.\n\n- The `build-components` job. I noticed this before, but forgot to raise an issue. This seems to be added to all docs pipelines as a manual job. For example: https://gitlab.com/gitlab-org/gitlab/-/pipelines/635880894\n\n  It's being added as a manual job, so the key config is:\n\n  ```yaml\n  .if-dot-com-gitlab-org-merge-request: \u0026if-dot-com-gitlab-org-merge-request\n    if: '$CI_SERVER_HOST == \"gitlab.com\" \u0026\u0026 $CI_PROJECT_NAMESPACE == \"gitlab-org\" \u0026\u0026 $CI_MERGE_REQUEST_IID'\n\n  .rails:rules:build-components:\n    rules:\n      - \u003c\u003c: *if-dot-com-ee-schedule\n      - \u003c\u003c: *if-dot-com-gitlab-org-default-branch\n        changes:\n          - \"workhorse/**/*\"\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        when: manual\n        allow_failure: true\n  ```\n\n  Those three checks all validate to `true` in docs pipelines, so it seems like we need to add a `changes` line there, to add it to appropriate code MRs only?\n\n- `review-cleanup`: There is no code review app, so this should not be present.\n\n  This job uses these rules:\n\n  ```yaml\n  review-cleanup:\n    extends:\n      - .review:rules:review-cleanup\n\n  .review:rules:review-cleanup:\n    rules:\n      - \u003c\u003c: *if-not-ee\n        when: never\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        when: manual\n        allow_failure: true\n      - \u003c\u003c: *if-dot-com-gitlab-org-schedule\n        allow_failure: true\n  ```\n\n  But, `start-review-app-pipeline:` uses different rules. Shouldn't cleanup be using identical rules as this? Otherwise we could have a cleanup job without a review app to clean up?\n\n  ```yaml\n  start-review-app-pipeline:\n    extends:\n      - .review:rules:start-review-app-pipeline\n  \n  .review:rules:start-review-app-pipeline:\n    rules:\n      - \u003c\u003c: *if-not-ee\n        when: never\n      - \u003c\u003c: *if-merge-request-labels-pipeline-revert\n        when: never\n      - \u003c\u003c: *if-merge-request-labels-run-review-app\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        changes: *ci-review-patterns\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        changes: *frontend-build-patterns\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        changes: *controllers-patterns\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        changes: *models-patterns\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        changes: *lib-gitlab-patterns\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        changes: *qa-patterns\n      - \u003c\u003c: *if-dot-com-gitlab-org-merge-request\n        changes: *code-patterns\n        when: manual\n        allow_failure: true\n      - \u003c\u003c: *if-dot-com-gitlab-org-schedule\n        allow_failure: true\n        variables:\n          KNAPSACK_GENERATE_REPORT: \"true\"\n  ```","state":"closed","created_at":"2022-09-10T02:40:38.879Z","updated_at":"2022-09-28T08:35:20.560Z","closed_at":"2022-09-19T10:21:59.596Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","Technical Writing","maintenance::pipelines","priority::3","type::maintenance"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":4155490,"username":"marcel.amirault","name":"Marcel Amirault","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4155490/avatar.png","web_url":"https://gitlab.com/marcel.amirault"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373204","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373204","notes":"https://gitlab.com/api/v4/projects/278964/issues/373204/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373204/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373204","relative":"#373204","full":"gitlab-org/gitlab#373204"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114762501,"iid":373194,"project_id":278964,"title":"Enhance feature specs around registration for readability","description":"Ideally we'd like to be able to document the registration flow through feature/system tests a bit.  This has the advantage over traditional documentation as it is less likely to atrophy and drift from the code since it depends on the code.\n\n# Goal\n\nGet the various SaaS registration flows tested and have the tests organized/written in such a way that they maybe easily readable and followed as documentation.  We'll aim for non-engineering readability of these tests as documentation, but likely land somewhere short of that initially.\n\n# Before state of the registration flow\n\nReadability is poor with developers likely being the only ones able to parse, and even then it wouldn't be a quick parsing to relate the information.\n\n### Example\n\n```ruby\ndescribe \"using the standard flow\" do\n  let(:service_with_success) do\n    instance_double(GitlabSubscriptions::CreateTrialOrLeadService, execute: ServiceResponse.success)\n  end\n\n  let_it_be(:user) { create(:user, name: 'Onboarding User') }\n\n  before do\n    stub_feature_flags(\n      # This is a feature flag to update the single-sign on registration flow\n      # to match the standard registration flow\n      update_oauth_registration_flow: true,\n\n      arkose_labs_signup_challenge: false\n    )\n\n    stub_application_setting(\n      # Saas doesn't require admin approval.\n      require_admin_approval_after_user_signup: false\n    )\n\n    stub_omniauth_setting(\n      # users can sign up on saas freely.\n      block_auto_created_users: false\n    )\n\n    # The groups_and_projects_controller (on `click_on 'Create project'`) is over\n    # the query limit threshold, so we have to adjust it.\n    # https://gitlab.com/gitlab-org/gitlab/-/issues/338737\n    allow(Gitlab::QueryLimiting::Transaction).to receive(:threshold).and_return(136)\n\n    sign_in user\n    visit users_sign_up_welcome_path\n  end\n\n  shared_examples 'signs me up for email updates' do\n    it { expect(user.reload).to be_email_opted_in }\n  end\n\n  shared_examples 'creates new group and project' do\n    it 'creates the project and reaches the onboarding', :sidekiq_inline do\n      fill_in 'group_name', with: 'Test Group'\n      fill_in 'blank_project_name', with: 'Test Project'\n\n      service_instance = instance_double(GitlabSubscriptions::Trials::ApplyTrialService)\n      allow(GitlabSubscriptions::Trials::ApplyTrialService).to receive(:new).and_return(service_instance)\n\n      expect(service_instance).to receive(:execute).and_return(ServiceResponse.success)\n\n      expect(GitlabSubscriptions::Trials::ApplyTrialWorker)\n        .to receive(:perform_async).with(\n          user.id,\n          hash_including(\n            namespace_id: anything,\n            gitlab_com_trial: true,\n            sync_to_gl: true\n          )\n        ).and_call_original\n\n      click_on 'Create project'\n\n      expect(page).to have_content 'Get started with GitLab'\n\n      click_on \"Ok, let's go\"\n\n      expect(page).to have_content('Learn GitLab')\n      expect(page).to have_content('GitLab is better with colleagues!')\n    end\n  end\n\n  it \"presents the initial welcome step\" do\n    expect(page).to have_content('Welcome to GitLab, Onboarding!')\n\n    fill_in_welcome_form\n  end\n\n  context \"for my company\" do\n    before do\n      fill_in_welcome_form\n      choose 'My company or team'\n    end\n\n    context \"wanting to create a project\" do\n      before do\n        choose 'Create a new project'\n        click_on 'Continue'\n      end\n\n      it \"prompts for details about my company\" do\n        expect(page).to have_content 'About your company'\n\n        fill_in_company_form\n      end\n\n      context \"and opting into a trial\" do\n        before do\n          fill_in_company_form\n          click_button class: 'gl-toggle'\n\n          expect(GitlabSubscriptions::CreateTrialOrLeadService).to receive(:new).with(\n            user: user,\n            params: company_params_trial_true\n          ).and_return(service_with_success)\n\n          click_on 'Continue'\n        end\n\n        it_behaves_like 'creates new group and project'\n      end\n    end\n  end\nend\n```\n\n# After state of registration flow\n\nReadability has improved.  We've leveraged helper methods over `let`, `before`, `shared_examples`, etc and tested the entire flow e2e in one example. \n\n### Example\n\n```ruby\n  context 'when opting into a trial' do\n    it 'registers the user and creates a group and project reaching onboarding', :sidekiq_inline do\n      user_signs_up(glm_params)\n\n      expect_to_see_account_confirmation_page\n\n      confirm_account\n\n      user_signs_in\n\n      expect_to_see_welcome_form\n\n      fills_in_welcome_form\n      click_on 'Continue'\n\n      expect_to_be_see_company_form\n\n      fill_in_company_form\n      toggle_trial\n      click_on 'Continue'\n\n      expect_to_see_group_and_project_creation_form\n\n      fills_in_group_and_project_creation_form\n      expect_to_apply_trial\n      click_on 'Create project'\n\n      expect_to_be_in_continuous_onboarding\n\n      click_on 'Ok, let\\'s go'\n\n      expect_to_be_in_learn_gitlab\n    end\n  end\n```\n\n\n# Implementation plan\n\nSee tasks","state":"closed","created_at":"2022-09-09T20:39:35.872Z","updated_at":"2022-11-08T19:17:08.257Z","closed_at":"2022-11-08T19:17:08.227Z","closed_by":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"labels":["Next Up","devops::growth","group::acquisition","maintenance::refactor","section::growth","type::maintenance","workflow::in dev"],"milestone":null,"assignees":[{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"}],"author":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"type":"ISSUE","assignee":{"id":3841241,"username":"dstull","name":"Doug Stull","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c2d7b8532bca28f593b193b012841a40?s=80\u0026d=identicon","web_url":"https://gitlab.com/dstull"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373194","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373194","notes":"https://gitlab.com/api/v4/projects/278964/issues/373194/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373194/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373194","relative":"#373194","full":"gitlab-org/gitlab#373194"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8617,"epic":{"id":587358,"iid":8617,"title":"Q3 FY23 - Registration flow cleanup","url":"/groups/gitlab-org/-/epics/8617","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":114761612,"iid":373190,"project_id":278964,"title":"Database statement timeout loading merged branches in www-gitlab-com","description":"When @vshumilo loaded https://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests with `Merged date` sort order, she saw a 500 error. https://log.gprd.gitlab.net/goto/df54a310-307b-11ed-b86b-d963a1a6788e shows there is a database statement timeout:\n\n```\n/*application:web,correlation_id:01GCHT4NFJDPX31K07Z4D3QEH2,endpoint_id:Projects::MergeRequestsController#index,db_config_name:main_replica*/ SELECT \"merge_requests\".*, \"merge_request_metrics\".\"latest_closed_at\" AS merge_request_metrics_latest_closed_at, \"merge_request_metrics\".\"id\" AS merge_request_metrics_id FROM \"merge_requests\" INNER JOIN \"merge_request_metrics\" ON \"merge_request_metrics\".\"merge_request_id\" = \"merge_requests\".\"id\" WHERE (\"merge_requests\".\"state_id\" IN ($1)) AND \"merge_request_metrics\".\"target_project_id\" = $2 ORDER BY \"merge_request_metrics\".\"latest_closed_at\" ASC NULLS LAST, \"merge_request_metrics\".\"id\" DESC LIMIT $4 OFFSET $3\n```\n\nThis query has to do an inner join of all `merge_request_metrics` and `merge_requests`, and then return the first 20. This is likely too expensive of a query.\n\nThe backtrace is:\n\n```json\n   \"exception.backtrace\": [\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:104:in `block in read_using_load_balancer'\",\n        \"lib/gitlab/database/load_balancing/load_balancer.rb:55:in `read'\",\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:103:in `read_using_load_balancer'\",\n        \"lib/gitlab/database/load_balancing/connection_proxy.rb:48:in `select_all'\",\n        \"lib/gitlab/issuable_metadata.rb:67:in `map'\",\n        \"lib/gitlab/issuable_metadata.rb:67:in `block in issuable_ids'\",\n        \"lib/gitlab/utils/strong_memoize.rb:44:in `strong_memoize'\",\n        \"lib/gitlab/issuable_metadata.rb:62:in `issuable_ids'\",\n        \"lib/gitlab/issuable_metadata.rb:28:in `data'\",\n        \"app/controllers/concerns/issuable_collections.rb:54:in `set_pagination'\",\n        \"app/controllers/concerns/issuable_collections.rb:27:in `set_issuables_index'\",\n        \"ee/lib/gitlab/ip_address_state.rb:10:in `with'\",\n        \"ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'\",\n        \"app/controllers/application_controller.rb:531:in `set_current_admin'\",\n        \"lib/gitlab/session.rb:11:in `with_session'\",\n```\n\nNote that even this query takes a full second:\n\n```sql\ngitlabhq_production=# explain (analyze, buffers) select * from merge_request_metrics where target_project_id = 7764 ORDER BY merged_at DESC LIMIT 20;\n                                                                                           QUERY PLAN\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n Limit  (cost=0.57..2017.34 rows=20 width=140) (actual time=501.330..1046.771 rows=20 loops=1)\n   Buffers: shared hit=143 read=1351 dirtied=1018\n   I/O Timings: read=655.764\n   -\u003e  Index Scan Backward using index_merge_request_metrics_on_merged_at on merge_request_metrics  (cost=0.57..9778286.96 rows=96970 width=140) (actual time=501.328..1046.743 rows=20 loops=1)\n         Filter: (target_project_id = 7764)\n         Rows Removed by Filter: 10922\n         Buffers: shared hit=143 read=1351 dirtied=1018\n         I/O Timings: read=655.764\n Planning Time: 71.667 ms\n Execution Time: 1046.831 ms\n(10 rows)\n```\n\nThis isn't great, and we might be able to speed it up with an index on `merged_at` and `target_project_id`. Then we can do the JOIN with the `merge_requests`.","state":"closed","created_at":"2022-09-09T20:18:52.202Z","updated_at":"2022-10-27T02:16:56.003Z","closed_at":"2022-10-27T02:16:55.771Z","closed_by":{"id":11809982,"username":"jay_mccure","name":"Jay McCure","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11809982/avatar.png","web_url":"https://gitlab.com/jay_mccure"},"labels":["Category:Code Review Workflow","[deprecated] Accepting merge requests","approaching-SLO","backend","bug::performance","devops::create","group::code review","priority::3","section::dev","severity::2","type::bug"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[],"author":{"id":64248,"username":"stanhu","name":"Stan Hu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/64248/stanhu.jpg","web_url":"https://gitlab.com/stanhu"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373190","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373190","notes":"https://gitlab.com/api/v4/projects/278964/issues/373190/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373190/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/232999"},"references":{"short":"#373190","relative":"#373190","full":"gitlab-org/gitlab#373190"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114755360,"iid":373177,"project_id":278964,"title":"Do not modify security reports when parsing","description":"## Problem\n\nWhen working on https://gitlab.com/gitlab-org/gitlab/-/merge_requests/95540+ I left the following comment in the specs\n\n```ruby\n# This spec is KIND OF MAGIC\n# sast_deprecated trait uses spec/fixtures/security_reports/deprecated/gl-sast-report.json\n# if you take a look at it then it does not conform to the schema at all, yet it somehow passes.\n# The reason for this is because lib/gitlab/ci/parsers/security/sast.rb\n# includes lib/gitlab/ci/parsers/security/concerns/deprecated_syntax.rb\n# which modifies the report data in place and puts the version there\n```\n\nOverall I don't think the parser should do *anything* with the security report being parsed at all but this is, of course, open to debate.\n\n## Implementation plan\n\n1. Remove `lib/gitlab/ci/parsers/security/concerns/deprecated_syntax.rb`\n2. Adjust all the parsers inheriting this module and remove the `DEPRECATED_REPORT_VERSION` constants","state":"closed","created_at":"2022-09-09T17:45:46.696Z","updated_at":"2022-10-17T08:55:53.058Z","closed_at":"2022-10-17T08:55:53.039Z","closed_by":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"labels":["backend","devops::govern","group::threat insights","maintenance::refactor","section::sec","type::maintenance","workflow::in dev"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"}],"author":{"id":487608,"username":"Quintasan","name":"Michał Zając","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/487608/avatar.png","web_url":"https://gitlab.com/Quintasan"},"type":"ISSUE","assignee":{"id":5721376,"username":"minac","name":"Mehmet Emin INAC","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d8bdee790902422e3554e411a173c7c0?s=80\u0026d=identicon","web_url":"https://gitlab.com/minac"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373177","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373177","notes":"https://gitlab.com/api/v4/projects/278964/issues/373177/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373177/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373177","relative":"#373177","full":"gitlab-org/gitlab#373177"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114752922,"iid":373173,"project_id":278964,"title":"Optimize suggested reviewers machine learning inference calls","description":"1. ~~Build a service~~\n2. ~~A background sidekiq job to fetch and cache suggested reviewers for each MR~~\n3. ~~Cache the services and  Prevent N+1 queries in the graphql~~\n3. Trigger the background services whenever an MR changes","state":"closed","created_at":"2022-09-09T16:42:11.229Z","updated_at":"2022-10-27T05:48:17.951Z","closed_at":"2022-09-29T12:07:39.588Z","closed_by":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"labels":["devops::modelops","feature::enhancement","group::ai assisted","section::data-science","type::feature"],"milestone":{"id":2453027,"iid":77,"group_id":9970,"title":"15.5","description":"","state":"active","created_at":"2022-02-03T22:29:56.909Z","updated_at":"2022-02-03T22:29:56.909Z","due_date":"2022-10-17","start_date":"2022-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/77"},"assignees":[{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"}],"author":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"type":"ISSUE","assignee":{"id":4409816,"username":"a_akgun","name":"Alper Akgun","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4409816/avatar.png","web_url":"https://gitlab.com/a_akgun"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373173","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373173","notes":"https://gitlab.com/api/v4/projects/278964/issues/373173/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373173/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373173","relative":"#373173","full":"gitlab-org/gitlab#373173"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114748463,"iid":373163,"project_id":278964,"title":"Update DB schema to store data imported from the License DB","description":"## Problem to solve\n\nLicense data imported from the [License Database](https://gitlab.com/groups/gitlab-org/-/epics/8492) must be directly available to the Rails backend, so that it can use it to perform License Scanning as soon as CycloneDX SBOMs are ingested.\n\n## Proposal\n\nCreate a relation table `sbom_component_version_licenses` between `sbom_component_versions` and `software_licenses` to store license data imported from the License DB, and track licenses under which component versions have been published.\n\nSince a component version can't have the same license multiple times, there's a unique index on `(sbom_component_versions.id, software_licenses.id)`, and it's used as a primary composite key; this avoids having an `id` column, and saves space.\n\nIt's assumed that license data imported from the License DB is immutable, and we can avoid the `updated_at` column to save space. The `created_at` column can be used to know when specific license data was added to the primary DB.\n\nThe proposed schema supports composite licenses, but it does not support SPDX licenses expression. In particular, it can't make the distinction between a conjunctive set and a disjunctive set.\n\nThe following is the SQL code corresponding to the proposal:\n\n```sql\nCREATE TABLE sbom_component_version_licenses (\n    component_version_id bigint REFERENCES sbom_component_version_licenses(id) ON DELETE CASCADE,\n    software_license_id integer REFERENCES software_licenses(id) ON DELETE CASCADE,\n    created_at timestamp with time zone NOT NULL,\n    PRIMARY KEY (component_version_id, software_license_id)\n)\n```\n\n(Adding a primary key will automatically create a unique B-tree index on the column or group of columns listed in the primary key, and will force the column(s) to be marked NOT NULL.)\n\nThe expected size for a DB record is 8 + 4 + = 16 bytes.\n\n\u003c/details\u003e\n\n## Proposal 2 (accepted)\n\nCreate a set of tables representing metadata from public package registries. It'll be imported from the external database service and be read only from the monolith-side components which can then conduct queries against these `pm_` tables on fields like package names and versions.\n\n```sql\nCREATE TABLE pm_packages (\n    id bigint NOT NULL,\n    purl_type smallint NOT NULL,\n    name text NOT NULL,\n    CONSTRAINT check_packages_name_max_length CHECK ((char_length(name) \u003c= 255))\n);\n\nCREATE TABLE pm_package_versions (  \n    id bigint NOT NULL,                                                                                 \n    package_id bigint NOT NULL REFERENCES pm.packages(id) ON DELETE CASCADE,                                                                       \n    version text NOT NULL,                                                                                            \n    CONSTRAINT check_package_versions_version_max_length CHECK ((char_length(version) \u003c= 255))                               \n); \n\nCREATE TABLE pm_licenses (\n    id integer NOT NULL,\n    spdx_identifier character varying(255) NOT NULL\n);\n\nCREATE TABLE pm_package_version_licenses (\n    package_version_id bigint REFERENCES pm.package_versions(id) ON DELETE CASCADE,\n    license_id integer REFERENCES pm.licenses(id) ON DELETE CASCADE,\n    created_at timestamp with time zone NOT NULL,\n    PRIMARY KEY (component_version_id, software_license_id)\n)\n```\n\n## Implementation plan\n\nUsing proposal 2.\n\n- [ ] Create migrations\n- [ ] Create models and specs for their validation\n- [ ] Use separate schema alias\n- [ ] Test partitions with this schema by\n  - Analyze common select queries and index stats with and without partitions and discuss in MR","state":"closed","created_at":"2022-09-09T15:15:10.640Z","updated_at":"2022-12-21T12:08:38.244Z","closed_at":"2022-11-21T17:13:29.064Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:License Compliance","Deliverable","GitLab Ultimate","backend","database","devops::secure","feature::addition","group::composition analysis","missed-deliverable","missed:15.5","missed:15.6","quad-planning::complete-no-action","section::sec","type::feature","workflow::production"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":1958785,"username":"fcatteau","name":"Fabien Catteau","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1958785/avatar.png","web_url":"https://gitlab.com/fcatteau"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":43,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373163","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":1,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373163","notes":"https://gitlab.com/api/v4/projects/278964/issues/373163/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373163/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373163","relative":"#373163","full":"gitlab-org/gitlab#373163"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8072,"epic":{"id":523613,"iid":8072,"title":"Replace license-finder","url":"/groups/gitlab-org/-/epics/8072","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":"on_track"},{"id":114746659,"iid":373158,"project_id":278964,"title":"Fix permissions checked for \"Add\" button in epics tree","description":"When vising an epic the epic tree won't show the `Add` button when the user has sufficient permissions to read the epic.\n\nTo add an issue the user needs to be able to [read the epic](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/api/epic_issues.rb#L92) and [admin the issue](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/api/epic_issues.rb#L94) but to display the button we are checking if the user can [admin the epic](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/related_items_tree/components/related_items_tree_header.vue#L148) and thus not showing for users with access.\n\nNote that we check different permissions for [adding child epics](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/lib/api/epic_links.rb#L61-62), so we could hide the epics part of the menu if those permissions are not met.\n\n## Screenshots\n\n| Guest user | Reporter user |\n| ------ | ------ |\n| ![Screenshot_2022-09-09_at_16.08.51](/uploads/f81e24bb6b0d6e9cad09930834b58743/Screenshot_2022-09-09_at_16.08.51.png) | ![Screenshot_2022-09-09_at_16.09.29](/uploads/43c6c47fe17fc2900a6bbf5db36fe324/Screenshot_2022-09-09_at_16.09.29.png) |\n\n\n## Expected behavior\n\n- If the user can read the epic they can see the `Add` button that expands the menu and display the `Issue` options\n- If the user can admin the epic and `subepics` feature is available display `Epic` options in the menu","state":"closed","created_at":"2022-09-09T14:48:32.209Z","updated_at":"2022-11-09T15:29:54.962Z","closed_at":"2022-09-29T07:22:03.406Z","closed_by":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"labels":["bug::functional","devops::plan","frontend","group::product planning","section::dev","severity::3","type::bug","workflow::verification"],"milestone":{"id":2453026,"iid":76,"group_id":9970,"title":"15.4","description":"[GitLab 15.4 Release](https://gitlab.com/gitlab-org/gitlab/-/releases/v15.4.0-ee)","state":"active","created_at":"2022-02-03T22:29:22.015Z","updated_at":"2022-09-29T02:21:26.561Z","due_date":"2022-09-17","start_date":"2022-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/76"},"assignees":[{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373158","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373158","notes":"https://gitlab.com/api/v4/projects/278964/issues/373158/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373158/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373158","relative":"#373158","full":"gitlab-org/gitlab#373158"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":114740876,"iid":373148,"project_id":278964,"title":"[Feature flag] Rollout of ci_requeue_with_dag_object_hierarchy","description":"## Summary\n\nThis issue is to roll out [the bug fix](https://gitlab.com/gitlab-org/gitlab/-/issues/358110) on production,\nthat is currently behind the `ci_requeue_with_dag_object_hierarchy` feature flag.\n\n- Bug issue: https://gitlab.com/gitlab-org/gitlab/-/issues/358110\n- Introduced in: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/97156\n- Fixed in: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/98315\n\n## Owners\n\n- Team: ~\"group::pipeline authoring\" \n- Most appropriate slack channel to reach out to: `#g_pipeline-authoring`\n- Best individual to reach out to: @furkanayhan \n- PM: `@dhershkovitch`\n\n## Stakeholders\n\n~\"group::pipeline execution\" \n\n## Expectations\n\n### What are we expecting to happen?\n\nWe expect that the retry or play mechanism will continue to work as of now. Of course with fixing the problem in #358110.\n\n### What might happen if this goes wrong?\n\nIf something goes wrong:\n- When retrying a failed job or playing a manual job, the subsequent jobs may have unexpected status.\n- When retrying a failed job or playing a manual job, the assignment of subsequent job statuses may take longer.\n\n### What can we monitor to detect problems with this?\n\nWe should not see an increase of 500 statuses...\n\n* `Projects::JobsController#retry` =\u003e https://log.gprd.gitlab.net/goto/b6ff8889b6f9ce43b3923e1057cd82e5\n* `Projects::JobsController#play` =\u003e https://log.gprd.gitlab.net/goto/ae7e1c66c95871772c3f02fe9ef8fbe3\n* `Ci::RetryPipelineWorker` =\u003e https://log.gprd.gitlab.net/goto/a6e5373a1fa3fc9f72693193efc123f2\n\nWe should not see an increase of durations...\n\n* `Projects::JobsController#retry` =\u003e https://log.gprd.gitlab.net/goto/3a1cd21b4c160cdee996698667fe90bc\n* `Projects::JobsController#play` =\u003e https://log.gprd.gitlab.net/goto/d301fdd0-34ed-11ed-b86b-d963a1a6788e\n* `Ci::RetryPipelineWorker` =\u003e https://log.gprd.gitlab.net/goto/ceb80d3db9d3adb7323d84dc7f58e808\n\n1. [API 5xx errors from the loadbalancer](https://thanos.gitlab.net/graph?g0.expr=sum%20by%20(backend)%20(rate(haproxy_backend_http_responses_total%7Bbackend%3D~%22https_git%7Capi%7Cci_gateway_catch_all%22%2Ccode%3D%225xx%22%2Ctype%3D%22ci%22%7D%5B1h%5D))\u0026g0.tab=0\u0026g0.stacked=0\u0026g0.range_input=2h\u0026g0.max_source_resolution=0s\u0026g0.deduplicate=1\u0026g0.partial_response=0\u0026g0.store_matches=%5B%5D)\n1. [Any 500 errors that the GitLab Runners managed by us might see](https://thanos.gitlab.net/graph?g0.expr=sum%20by(status%2C%20instance)%20(%0A%20%20increase(%0A%20%20%20%20gitlab_runner_api_request_statuses_total%7Benvironment%3D~%22gprd%22%2Cstage%3D~%22main%22%2Cinstance%3D~%22dev.macos-dev.runners-manager.gitlab.com.*%7Cprod-01.macos-canary.runners-manager.gitlab.com.*%7Cprod-01.macos-dev.runners-manager.gitlab.com.*%7Cprod-01.macos-shared.runners-manager.gitlab.com.*%7Cprod-02.macos-canary.runners-manager.gitlab.com.*%7Cprod-02.macos-dev.runners-manager.gitlab.com.*%7Cprod-02.macos-shared.runners-manager.gitlab.com.*%7Crunners-manager-private-green-1.c.gitlab-ci-155816.internal.*%7Crunners-manager-private-green-2.c.gitlab-ci-155816.internal.*%7Crunners-manager-private-green-3.c.gitlab-ci-155816.internal.*%7Crunners-manager-private-green-4.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-large-amd64-blue-1.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-large-amd64-blue-2.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-large-amd64-blue-3.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-large-amd64-blue-4.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-large-amd64-blue-5.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-medium-amd64-blue-1.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-medium-amd64-blue-2.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-medium-amd64-blue-3.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-medium-amd64-blue-4.c.gitlab-ci-155816.internal.*%7Crunners-manager-saas-linux-medium-amd64-blue-5.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-gitlab-org-blue-1.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-gitlab-org-blue-2.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-gitlab-org-blue-3.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-gitlab-org-blue-4.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-green-1.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-green-2.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-green-3.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-green-4.c.gitlab-ci-155816.internal.*%7Crunners-manager-shared-green-5.c.gitlab-ci-155816.internal.*%7Cwindows-shared-runners-manager-1.gitlab.com.*%7Cwindows-shared-runners-manager-2.gitlab.com.*%22%2Cendpoint%3D%22update_job%22%2Cstatus%3D~%225..%22%7D%5B5m%5D%0A%20%20)%0A)%0A\u0026g0.tab=0\u0026g0.stacked=0\u0026g0.range_input=2h\u0026g0.max_source_resolution=0s\u0026g0.deduplicate=1\u0026g0.partial_response=0\u0026g0.store_matches=%5B%5D)\n1. [Loadbalancer SLI error ratio](https://dashboards.gitlab.net/d/ci-runners-main/ci-runners-overview?orgId=1\u0026viewPanel=3255520955\u0026from=now-3h\u0026to=now)\n1. [API Error rate](https://dashboards.gitlab.net/d/stage-groups-pipeline_execution/stage-groups-pipeline-execution-group-dashboard?orgId=1\u0026from=now-3h\u0026to=now\u0026viewPanel=25)\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [ ] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set ci_requeue_with_dag_object_hierarchy true --dev --staging --staging-ref`\n- [ ] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n      The best environment to validate the feature in is [staging-canary](https://about.gitlab.com/handbook/engineering/infrastructure/environments/#staging-canary)\n      as this is the first environment deployed to. Note you will need to make sure you are configured to use canary as outlined [here](https://about.gitlab.com/handbook/engineering/infrastructure/environments/canary-stage/)\n      when accessing the staging environment in order to make sure you are testing appropriately.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab,gitlab-org/gitlab-foss,gitlab-com/www-gitlab-com ci_requeue_with_dag_object_hierarchy true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --group=gitlab-org,gitlab-com ci_requeue_with_dag_object_hierarchy true`\n- If you're using [user-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [ ] `/chatops run feature set --user=\u003cyour-username\u003e ci_requeue_with_dag_object_hierarchy true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  Cross link the issue here if it does.\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com. \n- [ ] Ensure that any breaking changes have been announced following the [release post process](https://about.gitlab.com/handbook/marketing/blog/release-posts/#deprecations-removals-and-breaking-changes) to ensure GitLab customers are aware.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [ ] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set ci_requeue_with_dag_object_hierarchy \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [ ] `/chatops run feature set ci_requeue_with_dag_object_hierarchy \u003crollout-percentage\u003e --random`\n  - Enable the feature globally on production environment.\n    - [x] `/chatops run feature set ci_requeue_with_dag_object_hierarchy true`\n- [ ] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [ ] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Consider cleaning up the feature flag from all environments by running these chatops command in `#production` channel. Otherwise these settings may override the default enabled.\n    - [ ] `/chatops run feature delete ci_requeue_with_dag_object_hierarchy --dev --staging --staging-ref --production`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `ci_requeue_with_dag_object_hierarchy`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [ ] Create a merge request to remove `ci_requeue_with_dag_object_hierarchy` feature flag. Ask for review and merge it.\n    - [ ] Remove all references to the feature flag from the codebase.\n    - [ ] Remove the YAML definitions for the feature from the repository.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the cleanup MR has been included in the release package.\n      If the merge request was deployed before [the monthly release was tagged](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run release check \u003cmerge-request-url\u003e \u003cmilestone\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] If not already done, clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [ ] `/chatops run feature delete ci_requeue_with_dag_object_hierarchy --dev --staging --staging-ref --production`\n- [ ] Close this rollout issue.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set ci_requeue_with_dag_object_hierarchy false\n```","state":"closed","created_at":"2022-09-09T13:22:57.090Z","updated_at":"2022-10-27T18:31:16.515Z","closed_at":"2022-10-26T19:58:23.787Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Pipeline Authoring","backend","bug::functional","devops::verify","feature flag","group::pipeline authoring","section::ops","severity::3","type::bug","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/373148","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":46,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 46 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/373148","notes":"https://gitlab.com/api/v4/projects/278964/issues/373148/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/373148/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#373148","relative":"#373148","full":"gitlab-org/gitlab#373148"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":{"id":72239,"iid":86,"sequence":27,"group_id":9970,"title":null,"description":null,"state":3,"created_at":"2022-07-25T00:05:01.895Z","updated_at":"2022-10-31T00:05:02.250Z","start_date":"2022-10-17","due_date":"2022-10-30","web_url":"https://gitlab.com/groups/gitlab-org/-/iterations/72239"},"health_status":"on_track"}]