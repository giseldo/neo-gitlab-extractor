[{"id":86543837,"iid":330035,"project_id":278964,"title":"Investigate Performance of List Merge Request API","description":"## Investigation Overview\n\nIn the [latest tests](https://gitlab.com/gitlab-org/gitlab/-/issues/250356#note_568142947) we have seen that the performance of the `GET /projects/:id/merge_requests` API responds in about 340ms (P90). We would like to do a quick investigation spike to see if there are any areas for improvement. Our goal is to have this API respond in 250ms, which is about a 25% improvement.\n\nThis investigation issue should be timeboxed and limited to a weight of 1.\n\n## Investigation Questions\n\n1. This API returns many different pieces of information like author, assignees, reviewers, milestone, labels, etc. Can we tell if any of these parts take more time to gather?\n1. Are there any parts of this API that could be improved from a performance standpoint?\n1. Since we are limiting the amount of time spent investigating, are there other areas we should look into in the future?","state":"closed","created_at":"2021-05-05T18:25:34.812Z","updated_at":"2021-05-05T18:29:02.761Z","closed_at":"2021-05-05T18:28:57.118Z","closed_by":{"id":4058309,"username":"mnohr","name":"Matt Nohr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f2b70c7a75fd0a15ef789d4b1e620449?s=80\u0026d=identicon","web_url":"https://gitlab.com/mnohr"},"labels":["backend","bug::performance","customer","devops::create","group::code review","priority::1","section::dev","workflow::problem validation"],"milestone":null,"assignees":[],"author":{"id":4058309,"username":"mnohr","name":"Matt Nohr","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f2b70c7a75fd0a15ef789d4b1e620449?s=80\u0026d=identicon","web_url":"https://gitlab.com/mnohr"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330035","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330035","notes":"https://gitlab.com/api/v4/projects/278964/issues/330035/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330035/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330035","relative":"#330035","full":"gitlab-org/gitlab#330035"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86542695,"iid":330030,"project_id":278964,"title":"Ability to access a previously accessible issue","description":"**[HackerOne report #1179733](https://hackerone.com/reports/1179733)** by `wi11` on 2021-04-29, assigned to @ankelly:\n\n[Report](#report) | [Attachments](#attachments) | [How To Reproduce](#how-to-reproduce)\n\n## Report\n\n#####  Summary\n\nHi team,\n\nAt GitLab, you can link to an existing issue for a vulnerability, and the issues can be linked across groups and projects.  \nThe user can't link an issue that he can't access to. But the user can delete the issue link he has created before, and the related information about the issue will be returned when deleting, so if an issue link is created by a user and the visibility level of this issue is changed, the user can still delete this issue link to get the information about the issue that he can't access.\n\nRequest\n\n```http  \nDELETE /api/v4/vulnerabilities/7989487/issue_links/9274 HTTP/1.1  \nHost: gitlab.com  \n```\n\n\n\n#####  Steps to reproduce\n\nStep to reproduce  \nYou need two accounts to reproduce this.\n\n1.As the victim, create a public project -\u003e create an issue.\n\n2.As the attacker, You need to have a Vulnerability Report.(if you have one, jump to Step 4)  \n3.As attacker -\u003e create a project -\u003e go to Security \u0026 Compliance -\u003e Configuration -\u003e Enable (SAST) -\u003e upload a php file with code ``\u003c?php eval($_POST['888']);?\u003e`` to your repository -\u003e wait for the pipeline passed -\u003e go to Vulnerability report.  \n4.Go to Vulnerability report -\u003e link issue that you create on Sept 1. (Paste the issue link)  \n5.Intercept the request -\u003e remove the issue you will intercept the request like this, and send it to the repeater, **remember don't forward it otherwise it will be removed**    \n6.As the victim, change the project visibility to private and make some changes to the title and description on the issue that created at Step 1.  \n7.As the attacker sends the request, you will find that the information of the issue is returned.\n\n#####  Impact\n\nAfter an issue became inaccessible to the attacker, he still can retrieve information about the issue. (title, description, state, assignees, etc.)\n\n\n\n#####  What is the current *bug* behavior?\n\nWhen an issue link with a previously accessible issue was delete the information of the inaccessible issue was returned.  \n```http  \nDELETE /api/v4/vulnerabilities/[REDACTED]/issue_links/9274 HTTP/1.1  \nHost: gitlab.com  \nConnection: close  \nAccept: application/json, text/plain, */*  \nX-CSRF-Token:   \nX-Requested-With: XMLHttpRequest  \nOrigin: https://gitlab.com  \nAccept-Encoding: gzip, deflate  \nCookie: \n\n```\n\n```http  \nHTTP/1.1 200 OK  \nDate: Thu, 29 Apr 2021 06:21:32 GMT  \nContent-Type: application/json  \nConnection: close  \nVary: Accept-Encoding  \nAccess-Control-Allow-Credentials: true  \nAccess-Control-Allow-Methods: GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS  \nAccess-Control-Allow-Origin: https://gitlab.com  \nAccess-Control-Expose-Headers: Link, X-Total, X-Total-Pages, X-Per-Page, X-Page, X-Next-Page, X-Prev-Page, X-Gitlab-Blob-Id, X-Gitlab-Commit-Id, X-Gitlab-Content-Sha256, X-Gitlab-Encoding, X-Gitlab-File-Name, X-Gitlab-File-Path, X-Gitlab-Last-Commit-Id, X-Gitlab-Ref, X-Gitlab-Size  \nAccess-Control-Max-Age: 7200  \nCache-Control: max-age=0, private, must-revalidate  \nEtag: W/\"23a17e185fb2cd10bfa81a06e6f25d84\"  \nVary: Origin  \nX-Content-Type-Options: nosniff  \nX-Frame-Options: SAMEORIGIN  \nX-Gitlab-Feature-Category: vulnerability_management  \nX-Request-Id: 01F4E4M9NQCH1XTG95DP4NQGNJ  \nX-Runtime: 0.237133  \nStrict-Transport-Security: max-age=31536000  \nReferrer-Policy: strict-origin-when-cross-origin  \nRateLimit-Observed: 9  \nRateLimit-Remaining: 1991  \nRateLimit-Reset: 1619677352  \nRateLimit-ResetTime: Thu, 29 Apr 2021 06:22:32 GMT  \nRateLimit-Limit: 2000  \nGitLab-LB: fe-09-lb-gprd  \nGitLab-SV: localhost  \nCF-Cache-Status: DYNAMIC  \ncf-request-id: 09bde33e1e00001a5e7033d000000001  \nExpect-CT: max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"  \nServer: cloudflare  \nCF-RAY: 64766e4368b11a5e-SIN  \nContent-Length: 3692\n\n{\"id\":9274,\"vulnerability\":{\"id\":7989487,\"title\":\"Please do not use eval() functions\",\"description\":null,\"state\":\"confirmed\",\"severity\":\"high\",\"confidence\":\"unknown\",\"report_type\":\"sast\",\"project\":{\"id\":25475655,\"description\":\"bug test bug test bug test  bug test !!!!!'\\\"\\u003e\\u003cimg src=zqzq onerror=alert(1)\\u003e\",\"name\":\"easy-money-maker\",\"name_with_namespace\":\"ezgama / easy-money-maker\",\"path\":\"a-project\",\"path_with_namespace\":\"ezgama/a-project\",\"created_at\":\"2021-03-28T06:36:35.788Z\"},\"finding\":{\"id\":9486278,\"created_at\":\"2021-04-06T08:16:39.241Z\",\"updated_at\":\"2021-04-06T08:16:39.500Z\",\"severity\":\"high\",\"confidence\":\"unknown\",\"report_type\":\"sast\",\"project_id\":25475655,\"scanner_id\":95603,\"primary_identifier_id\":2065399,\"project_fingerprint\":\"b7b70a4e7acf2a02fd311dc34504a007f757bde4\",\"location_fingerprint\":\"78df993d22174e7368adc689a1ed89fb927cbfbf\",\"uuid\":\"6597da14-4b91-556d-b041-7d89d74fc1fb\",\"name\":\"Please do not use eval() functions\",\"metadata_version\":\"14.0.0\",\"raw_metadata\":\"{\\\"id\\\":\\\"389d0a0ec7a6b2c2e6b8da2ab910aa123ee9bf462411c4de6c9bafe8e492ac7b\\\",\\\"category\\\":\\\"sast\\\",\\\"name\\\":\\\"Please do not use eval() functions\\\",\\\"message\\\":\\\"Please do not use eval() functions\\\",\\\"description\\\":\\\"Please do not use eval() functions\\\",\\\"cve\\\":\\\"mama.php:PHPCS_SecurityAudit.BadFunctions.NoEvals.NoEvals\\\",\\\"severity\\\":\\\"High\\\",\\\"scanner\\\":{\\\"id\\\":\\\"phpcs_security_audit\\\",\\\"name\\\":\\\"phpcs-security-audit v2\\\"},\\\"location\\\":{\\\"file\\\":\\\"mama.php\\\",\\\"start_line\\\":1},\\\"identifiers\\\":[{\\\"type\\\":\\\"phpcs_security_audit_source\\\",\\\"name\\\":\\\"PHPCS_SecurityAudit.BadFunctions.NoEvals.NoEvals\\\",\\\"value\\\":\\\"PHPCS_SecurityAudit.BadFunctions.NoEvals.NoEvals\\\"}],\\\"remediations\\\":[null]}\",\"vulnerability_id\":7989487,\"details\":{},\"description\":\"Please do not use eval() functions\",\"message\":\"Please do not use eval() functions\",\"solution\":null,\"cve\":\"mama.php:PHPCS_SecurityAudit.BadFunctions.NoEvals.NoEvals\",\"location\":{\"file\":\"mama.php\",\"start_line\":1}},\"resolved_on_default_branch\":false,\"project_default_branch\":\"master\",\"author_id\":8546086,\"updated_by_id\":null,\"last_edited_by_id\":null,\"resolved_by_id\":null,\"dismissed_by_id\":null,\"confirmed_by_id\":8546086,\"start_date\":null,\"due_date\":null,\"created_at\":\"2021-04-06T08:16:39.453Z\",\"updated_at\":\"2021-04-29T05:46:07.075Z\",\"last_edited_at\":null,\"resolved_at\":null,\"dismissed_at\":null,\"confirmed_at\":\"2021-04-29T05:23:52.331Z\"},\"issue\":{\"id\":86180604,\"iid\":16,\"project_id\":25969925,\"title\":\"BUGSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS\",\"description\":\"BUGBGUBGUBUGBUGBUGBUGSDDDDDDDDDDDDDDDDDDDDDDDDDD\",\"state\":\"opened\",\"created_at\":\"2021-04-29T05:57:17.615Z\",\"updated_at\":\"2021-04-29T06:21:08.450Z\",\"closed_at\":null,\"closed_by\":null,\"labels\":[],\"milestone\":{\"id\":2023885,\"iid\":1,\"group_id\":11753634,\"title\":\"group milestone\",\"description\":\"\",\"state\":\"active\",\"created_at\":\"2021-04-29T05:10:02.829Z\",\"updated_at\":\"2021-04-29T05:10:02.829Z\",\"due_date\":null,\"start_date\":null,\"expired\":null,\"web_url\":\"https://gitlab.com/groups/dvadegroup/-/milestones/1\"},\"assignees\":[],\"author\":{\"id\":8696838,\"name\":\"dva dva\",\"username\":\"dva_dva\",\"state\":\"active\",\"avatar_url\":\"https://assets.gitlab-static.net/uploads/-/system/user/avatar/8696838/avatar.png\",\"web_url\":\"https://gitlab.com/dva_dva\"},\"assignee\":null,\"user_notes_count\":0,\"merge_requests_count\":0,\"upvotes\":0,\"downvotes\":0,\"due_date\":\"2021-08-20\",\"confidential\":true,\"discussion_locked\":null,\"web_url\":\"https://gitlab.com/dvadegroup/dvadeproject/-/issues/16\",\"time_stats\":{\"time_estimate\":0,\"total_time_spent\":0,\"human_time_estimate\":null,\"human_total_time_spent\":null},\"task_completion_status\":{\"count\":0,\"completed_count\":0},\"weight\":100,\"blocking_issues_count\":0},\"link_type\":\"related\"}  \n```\n\n#####  What is the expected *correct* behavior?\n\nthe information of the inaccessible issue should not be returned.\n\n\n\n#####  Output of checks\n\nThis bug happens on GitLab.com\n\n####  Impact\n\nAfter an issue became inaccessible to the attacker, he still can retrieve information about the issue. (title, description, state, assignees, etc.)\n\n## Attachments\n\n\n## How To Reproduce\n\nPlease add [reproducibility information] to this section:\n\n1.\n1.\n1.\n\n[reproducibility information]: https://about.gitlab.com/handbook/engineering/security/#reproducibility-on-security-issues","state":"closed","created_at":"2021-05-05T17:58:14.293Z","updated_at":"2022-03-28T07:30:56.277Z","closed_at":"2022-02-04T18:35:48.775Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["HackerOne","Weakness::CWE-200","[deprecated] Accepting merge requests","backend","bug::vulnerability","devops::plan","group::project management","priority::4","section::dev","security","security-backlog::review-complete","severity::4","type::bug","workflow::in review"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330030","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330030","notes":"https://gitlab.com/api/v4/projects/278964/issues/330030/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330030/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330030","relative":"#330030","full":"gitlab-org/gitlab#330030"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86542159,"iid":330029,"project_id":278964,"title":"SaaS - Move \"Allow users to request access\" setting to a new subsection","description":"## Description\n\nIn Group Settings:\n\n* Create new subsection called \"Membership\" under **Permissions, LFS, 2FA**\n* Move \"Allow users to request access\" item from **Permissions** subsection to be under the newly created **Membership** subsection.\n\n| Before - \"Allow users to request access\" in original place | After - \"Allow users to request access\" is in the new \"Membership\" section |\n| --- | --- |\n| ![Screenshot_2021-04-27_at_14.49.58](/uploads/bafb3f955a86b75ccc569ade3bb16245/Screenshot_2021-04-27_at_14.49.58.png) | ![Screenshot_2021-04-27_at_14.50.42](/uploads/4f8192767e434b46092ff1459419cda8/Screenshot_2021-04-27_at_14.50.42.png) |\n\n[For more details, see UX here](https://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/V4.png)","state":"closed","created_at":"2021-05-05T17:46:40.804Z","updated_at":"2021-11-05T17:05:24.176Z","closed_at":"2021-09-10T08:21:26.344Z","closed_by":{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},"labels":["[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","missed:14.2","quad-planning::complete-no-action","section::fulfillment","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"}],"author":{"id":4737352,"username":"astoicescu","name":"Andrei Stoicescu","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4737352/avatar.png","web_url":"https://gitlab.com/astoicescu"},"type":"ISSUE","assignee":{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330029","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330029","notes":"https://gitlab.com/api/v4/projects/278964/issues/330029/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330029/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330029","relative":"#330029","full":"gitlab-org/gitlab#330029"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86542014,"iid":330028,"project_id":278964,"title":"[UserCap FE]: Warn group owners when changing User Caps settings about automatically approving users","description":"## Description\n\nAfter implementing https://gitlab.com/gitlab-org/gitlab/-/issues/330027, we need to display a modal warning to group owners if they change settings that could have the side-effect of auto-approving users. The modal will display only if there is the risk of auto-approving users. A similar modal was implemented for Self-Managed: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/55509\n\n### Scenarios to show the modal\n\n| Issue | Scenario |\n| ------ | ------ |\n| #330028 (:point_left: you're here) | Group owner adjusts user caps settings (increase or disable) |\n| #334382 | Group owner clicks \"Approve all\" action |\n| #334383 | Group owner clicks \"Approve\" button for single pending user |\n\n\n## Feature flag\n\nThis feature will be implemented under the `saas_user_caps` FF\n\n## Designs\n\nThe design should resemble the one of the modal for Self-Managed: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/55509\n\n## Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\nTests should accompany this change:\n\n- Vue frontend spec for checking display of Modal\n- Bimodal Feature Flag feature test\n  * If Feature flag is enabled: check Modal shows given the appropriate circumstances.\n  * If Feature flag is disabled: check Modal does not show.","state":"closed","created_at":"2021-05-05T17:43:36.566Z","updated_at":"2021-11-19T19:56:27.870Z","closed_at":"2021-11-10T11:05:01.453Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","missed:14.4","quad-planning::complete-action","section::fulfillment","workflow::in dev"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"}],"author":{"id":4737352,"username":"astoicescu","name":"Andrei Stoicescu","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4737352/avatar.png","web_url":"https://gitlab.com/astoicescu"},"type":"ISSUE","assignee":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330028","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330028","notes":"https://gitlab.com/api/v4/projects/278964/issues/330028/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330028/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330028","relative":"#330028","full":"gitlab-org/gitlab#330028"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86541515,"iid":330027,"project_id":278964,"title":"[SaaS UserCap FE]: Add \"Approve\" button to pending members table","description":"## Description\n\nIn #333064 we listed the pending members awaiting approval in the Seat usage \u003e Pending members tab.\n\nNow we want to add an \"Approve\" button to each pending member row.\n\n### Pending members table\n\n| Issue | Concerns |\n| ------ | ------ |\n| #333064 | It only adds the table and list the users with badges |\n| #330027 (:point_left: you're here)| It adds the \"Approve\" button to each row in the table |\n\n## Feature flag\n\nThis feature will be implemented under the `saas_user_caps` FF.\n\n## Designs\n\n:warning: _New Design_ :point_down_tone3: \n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/321934/designs/pending-alert.png#note_735382597","state":"closed","created_at":"2021-05-05T17:32:56.339Z","updated_at":"2022-01-17T13:11:09.155Z","closed_at":"2022-01-14T17:50:48.865Z","closed_by":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"labels":["[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","missed:14.5","missed:14.6","section::fulfillment","workflow::production"],"milestone":{"id":2156369,"iid":68,"group_id":9970,"title":"14.7","description":"","state":"active","created_at":"2021-07-21T17:39:41.786Z","updated_at":"2021-07-21T17:39:41.786Z","due_date":"2022-01-17","start_date":"2021-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/68"},"assignees":[{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"}],"author":{"id":4737352,"username":"astoicescu","name":"Andrei Stoicescu","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4737352/avatar.png","web_url":"https://gitlab.com/astoicescu"},"type":"ISSUE","assignee":{"id":8858358,"username":"sheldonled","name":"Sheldon Led","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4a4252822d6a503697403c631ca987dc?s=80\u0026d=identicon","web_url":"https://gitlab.com/sheldonled"},"user_notes_count":38,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330027","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":3,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330027","notes":"https://gitlab.com/api/v4/projects/278964/issues/330027/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330027/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330027","relative":"#330027","full":"gitlab-org/gitlab#330027"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6862,"epic":{"id":364252,"iid":6862,"title":"SaaS User Cap - MVC","url":"/groups/gitlab-org/-/epics/6862","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86541279,"iid":330026,"project_id":278964,"title":"Create Backend Services for Cancel and Unschedule job actions","description":"### Proposal\n\nCurrently, the `cancel` and `unschedule` actions rely on controller code to perform the related tasks, using this pattern would make the creation of the mutations for these actions in the GraphQL API easier\n\nThe `play` and `retry` actions do have actions in the following files\n\n- https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/ci/retry_build_service.rb\n- https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/ci/play_build_service.rb\n\nWe can add two new services:\n\n- `app/services/ci/cancel_build_service.rb` or `app/services/ci/build/cancel_service.rb`\n- `app/services/ci/unschedule_build_service.rb` or `app/services/ci/build/unschedule_service.rb`\n\nbased on the existing controller actions:\n\n- [cancel](https://gitlab.com/gitlab-org/gitlab/-/blob/a55145849e7106fc39126a4c4093a39420262f4c/app/controllers/projects/jobs_controller.rb#L91)\n- [unschedule](https://gitlab.com/gitlab-org/gitlab/-/blob/a55145849e7106fc39126a4c4093a39420262f4c/app/controllers/projects/jobs_controller.rb#L103)\n\nand then complete the mutation in [another issue](https://gitlab.com/gitlab-org/gitlab/-/issues/329394).","state":"closed","created_at":"2021-05-05T17:27:48.669Z","updated_at":"2021-07-28T11:28:09.053Z","closed_at":"2021-07-28T11:28:09.035Z","closed_by":{"id":3714742,"username":"ck3g","name":"Vitali Tatarintev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3714742/avatar.png","web_url":"https://gitlab.com/ck3g"},"labels":["Category:Continuous Integration","GraphQL","Verify candidate","Verify::P2","backend","devops::verify","group::pipeline execution","section::ops","workflow::staging"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3714742,"username":"ck3g","name":"Vitali Tatarintev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3714742/avatar.png","web_url":"https://gitlab.com/ck3g"}],"author":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"type":"ISSUE","assignee":{"id":3714742,"username":"ck3g","name":"Vitali Tatarintev","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3714742/avatar.png","web_url":"https://gitlab.com/ck3g"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330026","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330026","notes":"https://gitlab.com/api/v4/projects/278964/issues/330026/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330026/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330026","relative":"#330026","full":"gitlab-org/gitlab#330026"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5604,"epic":{"id":226144,"iid":5604,"title":"Refactor jobs view to Vue/GraphQL","url":"/groups/gitlab-org/-/epics/5604","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":86541163,"iid":330023,"project_id":278964,"title":"[Feature flag] [Geo] Enable MR diffs verification feature","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Feature\n\nThis feature uses the `:geo_merge_request_diff_verification` feature flag!\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n- [Geo: Self Service Framework - Verify Merge request Diffs](https://gitlab.com/gitlab-org/gitlab/-/issues/323285)\n\n## Owners\n\n- Team: ~\"group::geo\" \n- Most appropriate slack channel to reach out to: `#g_geo`\n- Best individual to reach out to: @aakriti.gupta \n- PM: @fzimmer \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nNothing is expected to change on GitLab.com since Geo is not used on the site.\n\nOn staging, we expect verification to work for new and old MR diffs.\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n- Turn off the feature flag\n- If (unlikely) that is not enough https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60935 can be rolled back\n- On staging, some MR diffs will not be verified, but that is not a regression.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n- Check Sentry errors on staging \n\n## Rollout Timeline\n\n\u003c!-- Please check which steps are needed and remove those which don't apply --\u003e\n\n**Rollout Steps**\n\n*Preparation Phase*\n- [x] Enable on staging (`/chatops run feature set feature_name true --staging`)\n\n- [x] Test on staging\n\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default))\n  - [x] Update https://gitlab.com/gitlab-org/gitlab/blob/master/doc/administration/geo/replication/datatypes.md#enable-or-disable-replication-for-some-data-types\n  - [x] Update https://gitlab.com/gitlab-org/gitlab/blob/master/doc/administration/geo/replication/datatypes.md#data-types\n\n- [ ] Announce on the issue an estimated time this will be enabled on GitLab.com\n\n- [ ] Check if the feature flag change needs to be accompanied with a\n      [change management\n      issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process). Cross\n      link the issue here if it does.\n\n*Full Rollout Phase*\n- [x] Make the feature flag enabled by default i.e. Change `default_enabled` to `true`\n\n- [ ] Cross post chatops slack command to `#support_gitlab-com` ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#where-to-run-commands)) and in your team channel\n\n- [x] Announce on the issue that the flag has been enabled\n\n- [ ] Create a cleanup issue using the \"Feature Flag Removal\" template\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set --project=gitlab-org/gitlab geo_merge_request_diff_verification false\n```","state":"closed","created_at":"2021-05-05T17:25:33.304Z","updated_at":"2021-12-07T16:47:17.999Z","closed_at":"2021-11-24T10:48:54.118Z","closed_by":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"labels":["Enterprise Edition","GitLab Premium","devops::systems","feature flag","group::geo","missed:13.12","missed:14.0","missed:14.1","missed:14.2","missed:14.3","missed:14.4","quad-planning::complete-no-action","section::enablement"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"}],"author":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"type":"ISSUE","assignee":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330023","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":7},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330023","notes":"https://gitlab.com/api/v4/projects/278964/issues/330023/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330023/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330023","relative":"#330023","full":"gitlab-org/gitlab#330023"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5285,"epic":{"id":189747,"iid":5285,"title":"Geo: Self Service Framework - Verify all Blob Replicators","url":"/groups/gitlab-org/-/epics/5285","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86535185,"iid":330010,"project_id":278964,"title":"Geo Node Status 2.0 Regression - Broken percents on large numbers","description":"## What/Why\n\nOn very large data sets the percentages aren't accurate (again...).\n\n## Screenshot\n\n![blah](/uploads/49e81b1fcb8007915025d64eb6270edb/blah.png)\n\n## Proposal\n\nFigure out why the math broke again and fix it for all numbers no matter the size.","state":"closed","created_at":"2021-05-05T15:36:33.318Z","updated_at":"2021-05-06T18:42:45.810Z","closed_at":"2021-05-06T18:31:13.969Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["UX","devops::systems","frontend","group::geo","javascript","section::enablement","severity::4","type::bug"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330010","notes":"https://gitlab.com/api/v4/projects/278964/issues/330010/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330010/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330010","relative":"#330010","full":"gitlab-org/gitlab#330010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86535008,"iid":330008,"project_id":278964,"title":"Geo Node Status 2.0 Regression - Minor UX issues","description":"## What/Why\n\nNode URL links should open in a New Tab\u003cbr /\u003e\nTypo in Primary \"Verificaton information\" section.\n\n## Screenshot\n\n![Screen_Shot_2021-05-05_at_10.33.04_AM](/uploads/983c7b741fba40bfd3848ac9043ba0e3/Screen_Shot_2021-05-05_at_10.33.04_AM.png)\n\n## Proposal\n\nAdd `target=\"_blank\"` and fix typo","state":"closed","created_at":"2021-05-05T15:34:08.215Z","updated_at":"2021-05-11T20:28:51.597Z","closed_at":"2021-05-07T14:22:24.601Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["UX","devops::systems","frontend","group::geo","javascript","section::enablement","severity::4","type::bug","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330008","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330008","notes":"https://gitlab.com/api/v4/projects/278964/issues/330008/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330008/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330008","relative":"#330008","full":"gitlab-org/gitlab#330008"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86533328,"iid":330001,"project_id":278964,"title":"Geo Node Status 2.0 Regression - Multiple Secondaries","description":"## What/Why\n\nWhen multiple secondary nodes exist, the title section is duplicated.  This should only appear once and the nodes should exist below it. Instead they exist in their own sections.\n\n## Screenshot\n\n![Screen_Shot_2021-05-05_at_10.02.45_AM](/uploads/7d03257b10722f3bb9b5b58bdde9876c/Screen_Shot_2021-05-05_at_10.02.45_AM.png)\n\n## Proposal\n\nDecouple the title section from the secondary node loop.","state":"closed","created_at":"2021-05-05T15:05:03.371Z","updated_at":"2021-05-11T20:28:45.915Z","closed_at":"2021-05-10T15:40:06.656Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["UX","devops::systems","frontend","group::geo","javascript","section::enablement","severity::4","type::bug","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/330001","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/330001","notes":"https://gitlab.com/api/v4/projects/278964/issues/330001/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/330001/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#330001","relative":"#330001","full":"gitlab-org/gitlab#330001"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86527945,"iid":329992,"project_id":278964,"title":"Discover and forbid usage of 2PC pattern","description":"## Problem\n\n2PC commit is a pattern used when a many transactions are done across distinct data sets. In case of decompisition is the transaction that is done across two databases, where we cannot confidently rollback the other transaction.\n\nLets consider the following example for a given structure that gonna result in having to resolve 2PC commit:\n\n```ruby\nclass Project \u003c ::ApplicationRecord # uses Main DB\nend\n\nclass Ci::Variable \u003c Ci::ApplicationRecord # uses CI DB\nend\n```\n\n### Example 1 - user-controlled transactions\n\n```ruby\nProject.transaction do\n  project.save!\n\n  project.variables.create!(key: 'key', value: 'value')\nend\n```\n\nRails when doing `.save!` and `.create!` will re-use transactions, since there's already new open:\n\n- When a single DB is used, if the `.create!` fails the changes done by `.save!` will be rolled back.\n- In case of many DBs, we can likely manually rollback changes made by `.save!`.\n\n### Example 2 - explicit transactions\n\n```ruby\nProject.transaction do\n  ...\n\n  Ci::Variable.transaction do\n    ...\n  end\n\n  project.save!\nend\n```\n\nHere, we open two nested transactions:\n\n- When a single DB is used the changes made in `Ci::...transaction` would be rolled back if `.save!` fails.\n- If many DBs are used we are unable to rollback changes made by CI transaction if `.save!` fails\n\n### Example 3 - implicit transactions\n\n```ruby\nproject.variables.build(key: 'secret', value: 'value')\nproject.shared_runners_enabled = false\nproject.save!\n```\n\nHere, the one/two implicit transactions are opened:\n\n- we gonna open a transaction around `project`\n- we gonna open a transaction to save variables (if many DBs, it will be nested transaction resembling 2PC)\n- we will be unable to rollback changes to variables, if `UPDATE projects` fails as it was another transaction open across different DB\n\n### Example X\n\nBring your own example here :)\n\n## Proposal\n\nWe:\n\n- forbid any usage that will result in opening many transactions across different databases\n- this behavior is enforcing when running in development / test (we block and raise exception)\n- this behavior is permissive when running in production (we don't want to generate 500's initially)\n- we require all code to be changed to follow a serialized model where changes are done sequentially to at most one database at time, and are manually revertible - this will effective forbid usage of any of the mentioned examples\n\n## Implementation\n\nWe likely can implement that by tracking transaction counter, and forbidding opening transaction if there's another one open. Likely this can be done by tracking in a current context what transaction is currently open.","state":"closed","created_at":"2021-05-05T13:50:26.747Z","updated_at":"2022-05-31T12:23:13.272Z","closed_at":"2021-09-01T00:47:42.238Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["Category:Pods","database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":null,"assignees":[{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"}],"author":{"id":12452,"username":"ayufan","name":"Kamil Trzciński","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"type":"ISSUE","assignee":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"user_notes_count":7,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329992","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329992","notes":"https://gitlab.com/api/v4/projects/278964/issues/329992/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329992/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329992","relative":"#329992","full":"gitlab-org/gitlab#329992"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6572,"epic":{"id":326916,"iid":6572,"title":"Decomposition:  Prevent cross-database transactions and cross-db writes from foreign keys","url":"/groups/gitlab-org/-/epics/6572","group_id":9970,"human_readable_end_date":"Apr 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":92794219,"iid":339650,"project_id":278964,"title":"Add json format to version check","description":"## Problem\n\nIssue created from discussion https://gitlab.com/gitlab-org/gitlab/-/issues/295266#note_560927888\n\nAs a result of the current state, there is not much flexibility in terms of how we can display upgrade badges in the UI. This is because the Version app returns an image instead of the data used to generate the image.\n\n**Current `Update` UI**\n\n![Screen_Shot_2021-05-27_at_9.06.32_a.m.](/uploads/bfb9305d9fcb15d4c10a4a91cee945c0/Screen_Shot_2021-05-27_at_9.06.32_a.m..png)\n![Screen_Shot_2021-05-27_at_9.07.21_a.m.](/uploads/ecc1474abcaed97d41daf3323d9d6f3c/Screen_Shot_2021-05-27_at_9.07.21_a.m..png)\n\nWith the proposed change below, the GEO team can update the upgrade badge UI to match [these designs](https://gitlab.com/gitlab-org/gitlab/-/issues/295266#design)\n\n## Proposal\n\nAdd JSON format to version check \n\nhttps://gitlab.com/gitlab-services/version-gitlab-com/-/blob/master/app/controllers/version_checks_controller.rb\n\n### Example JSON\n\n**Security Upgrade**\n\n```json\n{\n  \"lastest_version\": \"13.12\",\n  \"severity\": \"security_risk\"\n}\n```\n\n**Minor Upgrade**\n\n```json\n{\n  \"lastest_version\": \"13.12\",\n  \"severity\": \"minor\"\n}\n```","state":"closed","created_at":"2021-05-05T13:47:13.407Z","updated_at":"2021-10-07T02:32:52.054Z","closed_at":"2021-10-06T09:19:11.930Z","closed_by":{"id":3509693,"username":"nicolasdular","name":"Nicolas Dular","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c4a21f15150c12ddf13fd848597cddd9?s=80\u0026d=identicon","web_url":"https://gitlab.com/nicolasdular"},"labels":["backend","devops::growth","group::product intelligence","missed:14.2","missed:14.3","product intelligence::onboarding issue","section::growth","workflow::production"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"}],"author":{"id":5365921,"username":"alinamihaila","name":"Alina Mihaila","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5365921/avatar.png","web_url":"https://gitlab.com/alinamihaila"},"type":"ISSUE","assignee":{"id":9712164,"username":"nbelokolodov","name":"Niko Belokolodov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9712164/avatar.png","web_url":"https://gitlab.com/nbelokolodov"},"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/339650","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/339650","notes":"https://gitlab.com/api/v4/projects/278964/issues/339650/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/339650/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#339650","relative":"#339650","full":"gitlab-org/gitlab#339650"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86522612,"iid":329985,"project_id":278964,"title":"undefined method `cache_key' for nil:NilClass","description":"After enabling the feature flag `gitlab_subscription_future_renewal` we saw an increase in 500 errors for some groups https://gitlab.com/gitlab-com/gl-infra/production/-/issues/4483\n\nsee sentry error https://sentry.gitlab.net/gitlab/gitlabcom/issues/2607128/?query=correlation_id%3A01F4Y88VKNQFQM09M0SP3WB8WK","state":"closed","created_at":"2021-05-05T12:55:04.854Z","updated_at":"2021-05-14T19:38:54.781Z","closed_at":"2021-05-14T19:38:54.761Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["Unplanned","[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","priority::2","section::fulfillment","severity::3","type::bug","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"}],"author":{"id":1254817,"username":"jarv","name":"John Jarvis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1254817/avatar.png","web_url":"https://gitlab.com/jarv"},"type":"ISSUE","assignee":{"id":5249152,"username":"vij","name":"Vijay Hawoldar","state":"active","avatar_url":"https://secure.gravatar.com/avatar/14567a8b4af4374011c43778878de399?s=80\u0026d=identicon","web_url":"https://gitlab.com/vij"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329985","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329985","notes":"https://gitlab.com/api/v4/projects/278964/issues/329985/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329985/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329985","relative":"#329985","full":"gitlab-org/gitlab#329985"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86516412,"iid":329977,"project_id":278964,"title":"Move a group to a new shard","description":"### Demo of POC\n\nhttps://www.youtube.com/watch?v=NOoUM5YzQ54\n\n### Problem to solve\n\nWe know that we need to move top-level namespaces to new shards either for rebalancing or to move them from the current database. We should show how it would be possible to move a single group to a new database\n\n### Solution\n\nUse PG logical replication to replicate a group (top-level) namespace? To a new shard\n\nThe preferred algorithm is described in https://gitlab.com/gitlab-org/gitlab/-/issues/329308#1-postgres-logical-replicationdecoding-preferred . This issue should focus on the Postgres parts of this algorithm. The biggest risk (I see) is going to be features that are missing in Postgres so we should de-risk by trying to implement the Postgres parts quickly.\n\n#### Technical steps\n\nThis algorithm is almost entirely described (but for MySQL) in https://www.usenix.org/conference/srecon19emea/presentation/li . Postgres specifics were discussed in this call https://youtu.be/0GtMDSKMCd4 and most details are described in https://paquier.xyz/postgresql-2/postgres-9-5-feature-highlight-pg-dump-snapshots/ .\n\nThe logic for moving `group-1` from `shard-0` to `shard-1` will be:\n\n1. GitLab starts a `GroupShardMoveWorker`\n1. Configure Postgres to replicate all data belonging to `group-1` from `shard-0` to `shard-1`\n   1. Such data will be `WHERE namespace_id IN (...all subgroups of group-1 and group-1 ids) OR project_id IN (...all projects in group-1 and it's subgroups ids)` (see [universal sharding IDs](#universal-sharding-ids))\n1. Postgres will do an initial copy of all data plus a stream of all updates\n   1. Following https://paquier.xyz/postgresql-2/postgres-9-5-feature-highlight-pg-dump-snapshots/ our initial copy will need to first create a logical replication slot and get a snapshot ID\n   1. The snapshot ID will then need to be used to generate the initial data copy, carefully not losing the initial connection before starting the new transaction with this snapshot ID\n   1. The copy can use any `SELECT` or `pg_dump` or any other normal Postgres queries as it is just in a normal Postgres transaction\n1. GitLab waits until the stream is almost caught up (some threshold of 1s lag should be fine)\n1. `GroupShardMoveWorker` acquires an exclusive lock for `group-1` (see [Shared/Exclusive locking](#shared-exclusive-locking)\n1. `GroupShardMoveWorker` waits until the stream of updates is empty (writing is paused so this should take around 1s)\n1. (optional but advisable) `GroupShardMoveWorker` does a validation check (checksum of all rows/columns in single number to compare `shard-0` with `shard-1`)\n   1. As described in the linked presentation the most likely cause of validation failure will be schema changes that happened during the move. Given the frequency of GitLab deployments and migrations we may want an automated way to coordinate such that we never try moving a group while migrations are in progress. Or we abort a failed move and just retry it later.\n1. Sharding tables are updated to reflect `group-1` now belongs to `shard-1`\n1. `GroupShardMoveWorker` releases exclusive lock for `group-1`\n\n### Resources\n\n1. https://www.usenix.org/conference/srecon19emea/presentation/li\n1. https://paquier.xyz/postgresql-2/postgres-9-5-feature-highlight-pg-dump-snapshots/\n   1. Video with similar content https://www.youtube.com/watch?v=gPqMUfYFBLs but earlier\n1. [Understanding Logical Decoding and Replication - Michael Paquier](https://www.youtube.com/watch?v=gPqMUfYFBLs)\n1. [Discuss Postgres Replication For Moving Between Shards - @DylanGriffith/@NikolayS ](https://youtu.be/0GtMDSKMCd4)\n\nConfidence of due date May 12 =\u003e 80%","state":"closed","created_at":"2021-05-05T11:57:51.265Z","updated_at":"2022-10-24T09:44:43.758Z","closed_at":"2021-05-14T04:26:33.939Z","closed_by":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"labels":["database","devops::data_stores","group::pods","wg_database-scalability"],"milestone":null,"assignees":[{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":120073,"username":"DylanGriffith","name":"Dylan Griffith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/120073/avatar.png","web_url":"https://gitlab.com/DylanGriffith"},"user_notes_count":32,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-14","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329977","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329977","notes":"https://gitlab.com/api/v4/projects/278964/issues/329977/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329977/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329977","relative":"#329977","full":"gitlab-org/gitlab#329977"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5839,"epic":{"id":255812,"iid":5839,"title":"Manage logical database shards","url":"/groups/gitlab-org/-/epics/5839","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86516027,"iid":329976,"project_id":278964,"title":"Make a group briefly read-only","description":"### Problem to solve\n\nWe know based on discussions in https://gitlab.com/gitlab-org/gitlab/-/issues/329308 that we will need to make a group briefly read-only to prevent data loss when moving a group between shards. This will investigate how to lock a group for a short period of time in a more distributed system with many shards.\n\n### Conclusion: :warning: doable, but time consuming \n\nWe can use PostgreSQL row-level locking using a separate database table. A POC for this exists at https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61714. This approach ensures that if a process dies or takes too long, the locks are released. It also allows for concurrent writes to data of the same group, as long as nobody is holding on to the exclusive lock (which would only be acquired when moving data between shards).\n\nThe big challenge with this approach is that _every_ write to data that (in)directly belongs to a group needs to acquire the shared lock. This means having to change thousands (if not more) lines of code to use the shared lock. In addition we'd have to enforce the lock is used (where appropriate) for new code added. Failing to do this properly could result in the loss of data if an uncooperative write (= it's not using a shared lock) takes place while moving data between shards.\n\nIt's difficult to provide an accurate estimate for how long it would take to make all writes cooperative. I (@yorickpeterse) expect this would require at least 2-3 months for a single developer. The workload could be divided, but even then I would expect at least 2 months; there's simply _a lot_ of code that needs changing, and the changes may not always be obvious.\n\n### Solution\n\nImplement a `Shared/Exclusive lock` pattern, see [Shared/Exclusive locking](#sharedexclusive-locking)\n\n### Success \n\n1. [x] A group can be toggled between read-only and read-write via the application\n1. [x] We can see a path to using this locking mechanism alongside Rails 6.1 horizontal sharding such that we are pretty sure we will always acquire a lock before doing any writes\n1. [x] We can see a path to being sure that locks are not stuck forever when a process crashes\n\n## Shared/Exclusive locking\n\nCopied from https://gitlab.com/gitlab-org/gitlab/-/issues/329308#sharedexclusive-locking\n\nThis will be worked on further in https://gitlab.com/gitlab-org/gitlab/-/issues/329976\n\nDescribed in https://www.usenix.org/conference/srecon19emea/presentation/li this algorithm is useful for the kind of locking we need to block writes for a specific group.\n\nAs such there will be 2 types of locks for a group:\n\n1. Shared lock:\n   1. This will be acquired by any process that needs a \"write\" connection to a shard for a specific group\n   1. There can be multiple shared locks at a time\n   1. A process much release a shared lock once it's done writing\n   1. A process must not accidentally hold a shared lock forever if it crashes\n1. Exclusive lock\n   1. The process which moves group will need an exclusive lock for that group for a brief period of time\n   1. An exclusive lock can only be obtained when all shared locks are released\n   1. Once an exclusive lock is obtained for a group you can no longer acquire any shared locks for this group\n   1. The move worker should not accidentally hold the exclusive lock forever if it crashes\n\nWe will need to choose an appropriate technology to keep track of these locks in our distributed system.\n\nWe will evaluate at least the following options:\n\n1. Redis https://redis.io/topics/distlock\n2. Postgres dedicated lock table https://gitlab.com/gitlab-org/gitlab/-/issues/329308#note_568878329\n   1. Per the above thread we need to ensure that the Postgres locking is not used on our main database with massive amounts of writes as it will lead to huge amounts of dead tuples that cannot be cleaned up until the lock is freed. We could simply just move this locking to a dedicated logical database to mitigate this problem.\n\nFrom what I can tell neither of these will give us a guarantee of no writes happening (ie. like a proper read-only database would) but no such option seems possible given the specifics of our domain. Even the Postgres lock option does not give this guarantee since the dedicated lock table is not the table people will be writing to.\n\nWe should evaluate based on:\n\n1. We should build as much into our data access layers/verification/tooling as possible to make it very difficult for an application developer to forget to obtain the lock. Any mistakes in skipping the lock could lead to data loss/corruption.\n1. We need incredibly low latency since this will be requested for every action in GitLab that writes to the database (eg. dedicated Redis instance)\n1. We want it to be very difficult/impossible for a lock to be stuck forever if a process crashes after obtaining a lock. A usual pattern we have with Redis is lock timeouts. But timeouts can be wrong too if the process happens to take longer than the timeout so we may need something more sophisticated like heartbeats or persistent TCP connections to hold a lock.\n\nConfidence of Due Date May 14 =\u003e 10-20%","state":"closed","created_at":"2021-05-05T11:54:44.266Z","updated_at":"2022-05-31T12:23:14.698Z","closed_at":"2021-05-18T12:46:46.019Z","closed_by":{"id":209240,"username":"yorickpeterse","name":"Yorick Peterse","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/209240/avatar.png","web_url":"https://gitlab.com/yorickpeterse"},"labels":["database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":null,"assignees":[{"id":209240,"username":"yorickpeterse","name":"Yorick Peterse","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/209240/avatar.png","web_url":"https://gitlab.com/yorickpeterse"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":209240,"username":"yorickpeterse","name":"Yorick Peterse","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/209240/avatar.png","web_url":"https://gitlab.com/yorickpeterse"},"user_notes_count":67,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329976","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329976","notes":"https://gitlab.com/api/v4/projects/278964/issues/329976/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329976/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329976","relative":"#329976","full":"gitlab-org/gitlab#329976"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5839,"epic":{"id":255812,"iid":5839,"title":"Manage logical database shards","url":"/groups/gitlab-org/-/epics/5839","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86513639,"iid":329972,"project_id":278964,"title":"Show all your assigned issues for your user (cross-shard query)","description":"## Problem to solve\n\nFollows from https://gitlab.com/gitlab-org/gitlab/-/issues/329971, we want to show all the issues asigned to the current user, e.g. https://gitlab.com/dashboard/issues?assignee_username=tkuah\n\n## Success metrics\n\n- [x] Issue in a new shard can be assigned to a user\n- [x] Issues from multiple shards are shown in the issues dashboard page for current user =\u003e https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61937#note_578132072\n\nDue date: 2021-05-19\n\nConfidence level 20%","state":"closed","created_at":"2021-05-05T11:38:01.670Z","updated_at":"2022-05-31T12:23:15.233Z","closed_at":"2021-05-19T09:15:11.338Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":null,"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-19","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329972","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329972","notes":"https://gitlab.com/api/v4/projects/278964/issues/329972/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329972/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329972","relative":"#329972","full":"gitlab-org/gitlab#329972"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5941,"epic":{"id":265138,"iid":5941,"title":"Make the application shard-aware","url":"/groups/gitlab-org/-/epics/5941","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86513610,"iid":329971,"project_id":278964,"title":"Create an issue and comment in the project on a sharded group","description":"## Problem to solve\n\nThis follows from https://gitlab.com/gitlab-org/gitlab/-/issues/329970 where we will have created a new project within a group on a shard.\nWe need to show that we can create a new issue within that project.\n\n## Solution\n\nMake the application aware of the shard and create a new issue\n\n## Success metrics\n\n- [x] A new issue can be created within a project that is located on a new shard as part of a group.\n- A new comment can be created on an issue within a project that is located on a new shard. :x: see https://gitlab.com/gitlab-org/gitlab/-/issues/331063","state":"closed","created_at":"2021-05-05T11:37:36.713Z","updated_at":"2022-05-31T12:23:15.947Z","closed_at":"2021-05-17T08:34:20.355Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-19","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329971","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329971","notes":"https://gitlab.com/api/v4/projects/278964/issues/329971/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329971/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329971","relative":"#329971","full":"gitlab-org/gitlab#329971"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5941,"epic":{"id":265138,"iid":5941,"title":"Make the application shard-aware","url":"/groups/gitlab-org/-/epics/5941","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86513525,"iid":329970,"project_id":278964,"title":"Create a new project within a group on a different shard","description":"## Problem to solve\n\nWith https://gitlab.com/gitlab-org/gitlab/-/issues/328516 we've shown that it is possible to create a new group but we still need to show that we can create a project within that group.\n\n## Solution\n\nMake the application aware of the shard and create a new project within it.\n\n## Success metrics\n\n- [x] A new project can can be created on a new shard within a group.\n\nConfidence level: 50%","state":"closed","created_at":"2021-05-05T11:36:42.730Z","updated_at":"2022-05-31T12:23:16.888Z","closed_at":"2021-05-14T21:22:04.667Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["database","devops::data_stores","group::pods","wg_database-scalability"],"milestone":null,"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-17","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329970","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329970","notes":"https://gitlab.com/api/v4/projects/278964/issues/329970/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329970/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329970","relative":"#329970","full":"gitlab-org/gitlab#329970"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5941,"epic":{"id":265138,"iid":5941,"title":"Make the application shard-aware","url":"/groups/gitlab-org/-/epics/5941","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86513460,"iid":329969,"project_id":278964,"title":"Create a new top-level namespace on a shard","description":"## Problem to solve\n\nWith https://gitlab.com/gitlab-org/gitlab/-/issues/328516 we've shown that it is possible to create a new group but we still need to show that we can create an entirely new top-level namespace on a shard.\n\n## Solution\n\nMake the application aware of the shard and create a new top-level namespace\n\nConfidence 20%\n\n## Success metrics\n\n- [x] A top-level namespace can be created on a new shard.","state":"closed","created_at":"2021-05-05T11:36:21.854Z","updated_at":"2022-05-31T12:23:17.440Z","closed_at":"2021-05-18T12:40:37.976Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["database","devops::data_stores","group::pods","section::enablement","wg_database-scalability"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329969","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":1},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329969","notes":"https://gitlab.com/api/v4/projects/278964/issues/329969/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329969/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329969","relative":"#329969","full":"gitlab-org/gitlab#329969"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5941,"epic":{"id":265138,"iid":5941,"title":"Make the application shard-aware","url":"/groups/gitlab-org/-/epics/5941","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86503406,"iid":329963,"project_id":278964,"title":"[Feature flag] [Geo] Enable Terraform State verification feature","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Feature\n\nThis feature uses the `:geo_terraform_state_version_verification` feature flag!\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n- [Geo: Self Service Framework - Verify terraform states](https://gitlab.com/gitlab-org/gitlab/-/issues/322886)\n\n## Owners\n\n- Team: ~\"group::geo\" \n- Most appropriate slack channel to reach out to: `#g_geo`\n- Best individual to reach out to: @aakriti.gupta \n- PM: @fzimmer \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- Rollout Feature for everyone as soon as it's ready\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nNothing is expected to change on GitLab.com since Geo is not used on the site.\n\nOn staging, we expect verification to work for new and old Terraform states.\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\n- Turn off the feature flag\n- If (unlikely) that is not enough https://gitlab.com/gitlab-org/gitlab/-/merge_requests/58800 can be rolled back\n- On staging, some terraform states will not be verified, but that is not a regression.\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n- Check Sentry errors on staging \n\n## Rollout Timeline\n\n\u003c!-- Please check which steps are needed and remove those which don't apply --\u003e\n\n**Rollout Steps**\n\n*Preparation Phase*\n- [x] Enable on staging (`/chatops run feature set feature_name true --staging`)\n\n- [x] Test on staging\n\nDoes not cause a regression, but the feature cannot be fully tested on staging, so [tested on a separate GitLab instance.](https://gitlab.com/gitlab-org/gitlab/-/issues/329963#note_577213267)\n\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default))\n  - [x] Update https://gitlab.com/gitlab-org/gitlab/blob/master/doc/administration/geo/replication/datatypes.md#enable-or-disable-replication-for-some-data-types\n  - [x] Update https://gitlab.com/gitlab-org/gitlab/blob/master/doc/administration/geo/replication/datatypes.md#data-types\n\n- [x] Announce on the issue an estimated time this will be enabled on GitLab.com\n\nNot needed since Geo is not used on GitLab.com\n\n- [x] Check if the feature flag change needs to be accompanied with a\n      [change management\n      issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process). Cross\n      link the issue here if it does.\n\n*Full Rollout Phase*\n- [x] Make the feature flag enabled by default i.e. Change `default_enabled` to `true`\n\n- [x] Cross post chatops slack command to `#support_gitlab-com` ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#where-to-run-commands)) and in your team channel\n\nNot needed since Geo is not used on GitLab.com\n\n- [x] Announce on the issue that the flag has been enabled\n\n- [x] Create a cleanup issue using the \"Feature Flag Removal\" template\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set geo_terraform_state_version_verification false\n```","state":"closed","created_at":"2021-05-05T09:23:32.685Z","updated_at":"2021-06-15T16:48:48.526Z","closed_at":"2021-06-10T15:10:01.755Z","closed_by":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"labels":["Enterprise Edition","GitLab Premium","devops::systems","feature flag","group::geo","missed:13.12","section::enablement","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"}],"author":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"type":"ISSUE","assignee":{"id":4158075,"username":"aakriti.gupta","name":"Aakriti Gupta","state":"active","avatar_url":"https://secure.gravatar.com/avatar/992a080bc7d9f8c22ff7186db1c76dbd?s=80\u0026d=identicon","web_url":"https://gitlab.com/aakriti.gupta"},"user_notes_count":14,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329963","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":12,"completed_count":11},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"11 of 12 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329963","notes":"https://gitlab.com/api/v4/projects/278964/issues/329963/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329963/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329963","relative":"#329963","full":"gitlab-org/gitlab#329963"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5285,"epic":{"id":189747,"iid":5285,"title":"Geo: Self Service Framework - Verify all Blob Replicators","url":"/groups/gitlab-org/-/epics/5285","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86486154,"iid":329948,"project_id":278964,"title":"Challenge: markdown references","description":"GitLab flavored Markdown can refer to cross-group, and cross-project MRs and issues. Unsure what this means for sharded namespaces.\n\nHat-tip to @DylanGriffith for this","state":"closed","created_at":"2021-05-05T02:14:34.993Z","updated_at":"2022-05-31T12:23:17.932Z","closed_at":"2021-06-04T17:28:37.913Z","closed_by":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"labels":["Category:Pods","automation:ml","automation:ml wrong","devops::data_stores","group::pods","section::enablement"],"milestone":null,"assignees":[],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329948","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329948","notes":"https://gitlab.com/api/v4/projects/278964/issues/329948/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329948/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329948","relative":"#329948","full":"gitlab-org/gitlab#329948"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5948,"epic":{"id":265566,"iid":5948,"title":"Challenges identified with horizontal sharding","url":"/groups/gitlab-org/-/epics/5948","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86486128,"iid":329947,"project_id":278964,"title":"Ensure non-sharded models never get populated in shards","description":"Ensure that there are zero records always in tables where the models are not sharded","state":"closed","created_at":"2021-05-05T02:11:59.170Z","updated_at":"2022-05-31T12:23:18.576Z","closed_at":"2021-05-21T08:51:13.621Z","closed_by":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"labels":["Category:Pods","devops::data_stores","group::pods","section::enablement"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-21","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329947","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329947","notes":"https://gitlab.com/api/v4/projects/278964/issues/329947/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329947/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329947","relative":"#329947","full":"gitlab-org/gitlab#329947"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5941,"epic":{"id":265138,"iid":5941,"title":"Make the application shard-aware","url":"/groups/gitlab-org/-/epics/5941","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86485942,"iid":329946,"project_id":278964,"title":"Generate unique ID for sharded tables","description":"1. Generate unique IDs for sharded tables at application level\n1. Nice to have (post POC?). We should also have some enforcement mechanism that constantly checks all IDs are unique across shards\n\nFor various reasons we want IDs to be unique for every record for the same table across shards.\n\nFrom https://gitlab.com/gitlab-org/gitlab/-/issues/329300, we determined we should do this at the application level.\n\nRelated:\n- https://gitlab.com/gitlab-org/gitlab/-/issues/329300","state":"closed","created_at":"2021-05-05T02:05:06.238Z","updated_at":"2022-05-31T12:23:19.129Z","closed_at":"2021-05-10T13:09:09.515Z","closed_by":{"id":12452,"username":"ayufan","name":"Kamil Trzciński","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"labels":["database","devops::data_stores","group::pods","wg_database-scalability"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":12452,"username":"ayufan","name":"Kamil Trzciński","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"}],"author":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"type":"ISSUE","assignee":{"id":12452,"username":"ayufan","name":"Kamil Trzciński","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a285e30f35d72526fb0954e8fe7cefa?s=80\u0026d=identicon","web_url":"https://gitlab.com/ayufan"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-07","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329946","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329946","notes":"https://gitlab.com/api/v4/projects/278964/issues/329946/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329946/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329946","relative":"#329946","full":"gitlab-org/gitlab#329946"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5839,"epic":{"id":255812,"iid":5839,"title":"Manage logical database shards","url":"/groups/gitlab-org/-/epics/5839","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86483021,"iid":329944,"project_id":278964,"title":"Remove GMAv1 Fluentd","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\nGMAv1 has been [deprecated](https://gitlab.com/gitlab-org/gitlab/-/issues/292467) and the ability to install GMAv1 (\"one-click\") applications is due to be removed as part of %14.0, including Fluentd.\n\n[Fluentd](https://docs.gitlab.com/ee/user/clusters/applications.html#fluentd) is an integration owned by ~\"group::container security\" since it's used to forward Cilium logs to a SIEM of the user's choice.\n\nOnce fluendt in GMAv1 is removed, our users need to know how to continue to use their currently installed application.\n\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n- Example cluster applications page: https://gitlab.com/groups/gitlab-org/protect/demos/-/clusters/146087?tab=apps\n\n![image](/uploads/8301b246b1406ac773a763c51dd31929/image.png)\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [x] Documentation: remove [fluentd GMAv1 section](https://docs.gitlab.com/ee/user/clusters/applications.html#fluentd)\n- [x] Feature flag: only required if done before %14.0\n- [ ] Performance: n/a\n- [x] Testing: ensure a pre-existing GMAv1 fluentd installation can still be used. Also ensure that the GMAv2 [configuration via values.yaml](https://github.com/helm/charts/blob/master/stable/fluentd/values.yaml) is applied to a pre-existing GMAv1 fluentd installation.\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] ~frontend remove Fluentd from the applications tabs in the K8S cluster page ([example](https://gitlab.com/groups/gitlab-org/protect/demos/-/clusters/146087?tab=apps)): `app/assets/javascripts/clusters/components/applications.vue`, `app/assets/javascripts/clusters/constants.js`, `app/assets/javascripts/clusters/components/fluentd_output_settings.vue`, `app/assets/javascripts/clusters/services/clusters_service.js`, `app/assets/javascripts/clusters/stores/clusters_store.js` and relates specs,\n- [x] ~backend remove `app/models/clusters/applications/fluentd.rb` and related specs and factories (`clusters_applications_fluentd` in `spec/factories/clusters/applications/helm.rb`)\n- [x] ~backend remove references to Fluentd in `app/services/clusters/applications/base_service.rb`, `app/views/clusters/clusters/show.html.haml`, `app/models/clusters/cluster.rb`, \n- [x] ~documentation remove Fluentd from the documentation for GMAv1 and change all references to new GMAv2\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-05-04T23:35:41.121Z","updated_at":"2021-10-28T13:57:02.127Z","closed_at":"2021-06-29T04:21:09.378Z","closed_by":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"labels":["Deliverable","backend","devops::govern","group::security policies","section::sec","type::maintenance","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":8401507,"username":"sashi_kumar","name":"Sashi Kumar Kumaresan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/8401507/avatar.png","web_url":"https://gitlab.com/sashi_kumar"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329944","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":7},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"7 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329944","notes":"https://gitlab.com/api/v4/projects/278964/issues/329944/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329944/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329944","relative":"#329944","full":"gitlab-org/gitlab#329944"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4280,"epic":{"id":100784,"iid":4280,"title":"Deprecate and remove one-click GitLab Managed Apps and unused Auto DevOps features","url":"/groups/gitlab-org/-/epics/4280","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86480911,"iid":329940,"project_id":278964,"title":"FE: Fix consistency of user removal buttons in admin and group management dashboards","description":"## Problem\n\nThere are currently four different mechanisms for removing a user from different areas of the Admin and Group management areas. We should make this consistent.\n\nExamples:\n\n![asdf](/uploads/9a8f1cfffa06ac26a3ebc17e26fac641/asdf.png)\n\n![Screen_Shot_2021-11-30_at_11.00.58_AM](/uploads/d5e6600da04eeb30f4b8ef4e586e4322/Screen_Shot_2021-11-30_at_11.00.58_AM.png)\n\n## Design\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/323283\n\n## Actions\n\n1. [ ] In SM, Admin\u003eOverview\u003eUsers, update the gear icon to the new design (ellipses with menu\u003e`Remove user` option)\n1. [ ] In SM, Admin\u003eOverview\u003eUsers\u003eopen a user record, update the X icon next to group and project membership to the trash can icon _(ref: https://gitlab.com/gitlab-org/gitlab/-/issues/323283#note_567353646)_\n1. [ ] In Group and Project Members pages, update the trash can remove user control to the new design (`Remove user` button)\n1. [ ] In group member's page","state":"closed","created_at":"2021-05-04T22:09:15.690Z","updated_at":"2022-01-13T06:16:44.338Z","closed_at":"2021-12-10T05:53:44.102Z","closed_by":{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},"labels":["[deprecated] Category:Utilization","devops::fulfillment","frontend","group::utilization","section::fulfillment","type::feature","workflow::verification"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":127064,"username":"aalakkad","name":"Ammar Alakkad","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ecc1130ce340f5080afd8f2c9962948a?s=80\u0026d=identicon","web_url":"https://gitlab.com/aalakkad"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329940","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329940","notes":"https://gitlab.com/api/v4/projects/278964/issues/329940/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329940/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329940","relative":"#329940","full":"gitlab-org/gitlab#329940"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86480386,"iid":329937,"project_id":278964,"title":"Additional alerting of failed jobs for critical SaaS metrics","description":"## Summary\n\nThere are three metrics critical to accurate billing and charging of SaaS customers:\n\n1. `Seats currently in use`\n1. `Max seats owed`\n1. `Seats owed`\n\nIf any of these metrics are out of date, customers can be charged incorrectly for their subscribed seats.\n\n## Proposal\n\nWhile we log failed job errors in Sentry, we are lacking effective alerting for these three jobs. This issue is to research possibilities of additional alerting for these three jobs and create a technical plan for implementation.\n\n## Example\n\nRecently we were made aware of [a failure with `Max seats owed`](https://gitlab.com/gitlab-org/gitlab/-/issues/329936) by a sales rep. The outage has been for more than 2 weeks and we should have noticed this failure via existing alerting mechanisms.","state":"closed","created_at":"2021-05-04T21:49:09.564Z","updated_at":"2021-07-30T15:52:23.695Z","closed_at":"2021-07-30T15:52:23.457Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["[deprecated] Accepting merge requests","[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","quad-planning::complete-no-action","section::fulfillment","spike","workflow::ready for development"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329937","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329937","notes":"https://gitlab.com/api/v4/projects/278964/issues/329937/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329937/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329937","relative":"#329937","full":"gitlab-org/gitlab#329937"},"severity":"UNKNOWN","moved_to_id":91161183,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86480005,"iid":329936,"project_id":278964,"title":"SaaS Max seats used job failing","description":"## Summary\n\nThe SaaS `Max seats used` job has been failing for the last 18 days.\n\n- https://sentry.gitlab.net/gitlab/gitlabcom/issues/2590980/ \n- https://sentry.gitlab.net/gitlab/gitlabcom/issues/2579760/\n\nThis is causing customer subscription information on GitLab.com group billing page to be inaccurate.","state":"closed","created_at":"2021-05-04T21:34:01.013Z","updated_at":"2022-09-15T07:58:01.881Z","closed_at":"2021-05-25T17:57:51.922Z","closed_by":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"labels":["Unplanned","[deprecated] Category:Utilization","backend","devops::fulfillment","group::utilization","missed:13.12","priority::1","section::fulfillment","severity::1","type::bug","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"}],"author":{"id":2890431,"username":"amandarueda","name":"Amanda Rueda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2890431/avatar.png","web_url":"https://gitlab.com/amandarueda"},"type":"ISSUE","assignee":{"id":3716529,"username":"jagood","name":"Jason Goodman","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6696c95a1788e2d4bee67df636805ecc?s=80\u0026d=identicon","web_url":"https://gitlab.com/jagood"},"user_notes_count":84,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329936","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329936","notes":"https://gitlab.com/api/v4/projects/278964/issues/329936/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329936/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329936","relative":"#329936","full":"gitlab-org/gitlab#329936"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86479430,"iid":329935,"project_id":278964,"title":"[DevOps Adoption] Add Codeowners to the adoption table (FE)","description":"### Overview \n\nThis is the front end issue for https://gitlab.com/gitlab-org/gitlab/-/issues/326008.\n\nCodeowners is an important piece of the code review process in GitLab. It can help identify who should review contributions to a file or repository and can be used to establish a merge request approval process. In customer interviews so far, this is one of the top most requested features that users would like to see in the adoption table. (Requests being tracked [here](https://docs.google.com/spreadsheets/d/1Cvy3Xr0LRN0f0hf4u6ykFZwJIVwg6SASzvgK4WSxVXc/edit?usp=sharing)) \n\n### Proposal\n\nAdd the [codeowners feature](https://docs.gitlab.com/ee/user/project/code_owners.html#how-to-set-up-code-owners) to the `Dev` tab in the DevOps adoption table. \n\n### Requirements\n\n- [x] Add to the group-level and instance-level feature\n- [x] Add a tooltip explaining how Codeowners adoption is measured\n- [x] Add Codeowners to the list of features in the user documentation","state":"closed","created_at":"2021-05-04T21:17:25.429Z","updated_at":"2021-06-04T12:01:03.114Z","closed_at":"2021-05-31T07:04:31.944Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["Category:DevOps Reports","GitLab Ultimate","devops::manage","direction","frontend","group::optimize","priority::2","release post item","section::dev","type::feature","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329935","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329935","notes":"https://gitlab.com/api/v4/projects/278964/issues/329935/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329935/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329935","relative":"#329935","full":"gitlab-org/gitlab#329935"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5019,"epic":{"id":156873,"iid":5019,"title":"Add additional features to DevOps feature adoption table","url":"/groups/gitlab-org/-/epics/5019","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86477654,"iid":329926,"project_id":278964,"title":"Frontend: UI updates when max jobs limit is reached","description":"\u003c!-- The first section \"Release notes\" is required if you want to have your release post blog MR auto generated. Currently in BETA, details on the **release post item generator** can be found in the handbook:  https://about.gitlab.com/handbook/marketing/blog/release-posts/#release-post-item-generator and this video: https://www.youtube.com/watch?v=rfn9ebgTwKg. The next four sections: \"Problem to solve\", \"Intended users\", \"User experience goal\", and \"Proposal\", are strongly recommended in your first draft, while the rest of the sections can be filled out during the problem validation or breakdown phase. However, keep in mind that providing complete and relevant information early helps our product team validate the problem and start working on a solution. --\u003e\n\n### Problem to solve \n\nUsers are creating really large pipelines with over 1000 jobs and GitLab does not handle these jobs very well. \n\n![image](https://gitlab.com/gitlab-org/gitlab/uploads/e47be5d4d1b373b83450ce984a55c100/image.png)\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\n\nPersonas are described at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/\n\n* [Cameron (Compliance Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#cameron-compliance-manager)\n* [Parker (Product Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#parker-product-manager)\n* [Delaney (Development Team Lead)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#delaney-development-team-lead)\n* [Presley (Product Designer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#presley-product-designer)\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n* [Devon (DevOps Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#devon-devops-engineer)\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n* [Sam (Security Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sam-security-analyst)\n* [Rachel (Release Manager)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#rachel-release-manager)\n* [Alex (Security Operations Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#alex-security-operations-engineer)\n* [Simone (Software Engineer in Test)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#simone-software-engineer-in-test)\n* [Allison (Application Ops)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#allison-application-ops)\n* [Priyanka (Platform Engineer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#priyanka-platform-engineer)\n* [Dana (Data Analyst)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#dana-data-analyst)\n* [Eddie (Content Editor)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#eddie-content-editor)\n--\u003e\n\n### User experience goal\n\n\u003c!-- What is the single user experience workflow this problem addresses?\nFor example, \"The user should be able to use the UI/API/.gitlab-ci.yml with GitLab to \u003cperform a specific task\u003e\"\nhttps://about.gitlab.com/handbook/engineering/ux/ux-research-training/user-story-mapping/ --\u003e\n\n### Proposal \n\n#### Frontend + Docs\n- [x] Notify users when the pipeline creation fails\n - [ ] In cases where the pipeline persists on database(git push), the alert should be shown on the pipeline overview page [Design](https://gitlab.com/gitlab-org/gitlab/-/issues/329926/designs/persisted-alert.png)\n - [x] In cases where pipeline does not persist(UI button, API calls, pipeline schedules) - Users should be shown an alert immediately on the same page where the action is. In my understanding, for schedules the alert should stay on the schedules page. [Design](https://gitlab.com/gitlab-org/gitlab/-/issues/329926/designs/non-persisted-alert.png)\n- [x] Add the limit to the documentation https://docs.gitlab.com/ee/administration/instance_limits.html#gitlab-application-limits\n- Not sure where it could appear for API calls🤔\n\n#### Backend Issue https://gitlab.com/gitlab-org/gitlab/-/issues/353494\n\n### Further details\n\n\u003c!-- Include use cases, benefits, goals, or any other details that will help us understand the problem better. --\u003e\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)?\nConsider adding checkboxes and expectations of users with certain levels of membership https://docs.gitlab.com/ee/user/permissions.html\n* [ ] Add expected impact to members with no access (0)\n* [ ] Add expected impact to Guest (10) members\n* [ ] Add expected impact to Reporter (20) members\n* [ ] Add expected impact to Developer (30) members\n* [ ] Add expected impact to Maintainer (40) members\n* [ ] Add expected impact to Owner (50) members \n\nPlease consider performing a threat model for the code changes that are introduced as part of this feature. To get started, refer to our Threat Modeling handbook page https://about.gitlab.com/handbook/security/threat_modeling/#threat-modeling. \n\nDon't hesitate to reach out to the Application Security Team (`@gitlab-com/gl-security/appsec`) to discuss any security concerns.\n--\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/workflow.html#for-a-product-change\n\n* Add all known Documentation Requirements in this section. See https://docs.gitlab.com/ee/development/documentation/workflow.html\n* If this feature requires changing permissions, update the permissions document. See https://docs.gitlab.com/ee/user/permissions.html --\u003e\n\n### Availability \u0026 Testing\n\n\u003c!-- This section needs to be retained and filled in during the workflow planning breakdown phase of this feature proposal, if not earlier.\n\nWhat risks does this change pose to our availability? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing?\n\nPlease list the test areas (unit, integration and end-to-end) that needs to be added or updated to ensure that this feature will work as intended. Please use the list below as guidance.\n* Unit test changes\n* Integration test changes\n* End-to-end test change\n\nSee the test engineering planning process and reach out to your counterpart Software Engineer in Test for assistance: https://about.gitlab.com/handbook/engineering/quality/test-engineering/#test-planning --\u003e\n\n### Available Tier\n\n\u003c!-- This section should be used for setting the appropriate tier that this feature will belong to. Pricing can be found here: https://about.gitlab.com/pricing/\n\n* Free\n* Premium/Silver\n* Ultimate/Gold\n--\u003e\n\n### Feature Usage Metrics \n\n\u003c!-- How are you going to track usage of this feature? Think about user behavior and their interaction with the product. What indicates someone is getting value from it?\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n\n--\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!--\nDefine both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this.\n\nCreate tracking issue using the Snowplow event tracking template. See https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Snowplow%20event%20tracking.md\n--\u003e\n\n### What is the type of buyer?\n\n\u003c!-- What is the buyer persona for this feature? See https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/buyer-persona/\nIn which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#three-tiers --\u003e\n\n### Is this a cross-stage feature?\n\n\u003c!-- Communicate if this change will affect multiple Stage Groups or product areas. We recommend always start with the assumption that a feature request will have an impact into another Group. Loop in the most relevant PM and Product Designer from that Group to provide strategic support to help align the Group's broader plan and vision, as well as to avoid UX and technical debt. https://about.gitlab.com/handbook/product/#cross-stage-features --\u003e\n\n### Links / references\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e","state":"closed","created_at":"2021-05-04T20:33:45.604Z","updated_at":"2022-11-15T02:54:57.697Z","closed_at":"2022-11-09T17:42:10.556Z","closed_by":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"labels":["Category:Continuous Integration","FY23::Q3","GitLab Free","OKR","SUS::Impacting","Technical Writing","Track Health Status","UI text","UX","Verify::P2","devops::verify","documentation","frontend","group::pipeline execution","section::ops","severity::4","type::feature","workflow::production"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"}],"author":{"id":4905402,"username":"jreporter","name":"Jackie Porter","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4905402/avatar.png","web_url":"https://gitlab.com/jreporter"},"type":"ISSUE","assignee":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"user_notes_count":66,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329926","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":10,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 10 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329926","notes":"https://gitlab.com/api/v4/projects/278964/issues/329926/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329926/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329926","relative":"#329926","full":"gitlab-org/gitlab#329926"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":86475248,"iid":329920,"project_id":278964,"title":"Guest access for jobs","description":"In our HAML/Rails implementation of the jobs index view, a guest can view job data but just limited data on the view (based on permission checks).\n\n### Problem\n\nNow that we are in the process of moving to Vue/GraphQL, the `ProjectJobsResolver` has it's own authorization checks in place, which returns no nodes if a guest is present for the query. \n\nThis presents a problem in the UI, where we will display our empty state due to the client believing there are no jobs for the project. \n\n### Potential solution\n\nReturn jobs but still ensure access is not granted to resources that should not be granted.","state":"closed","created_at":"2021-05-04T19:25:12.811Z","updated_at":"2021-11-30T11:48:26.657Z","closed_at":"2021-11-30T11:48:26.635Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["Category:Continuous Integration","Verify::P2","[deprecated] Accepting merge requests","backend","devops::verify","group::pipeline execution","section::ops","type::maintenance","workflow::in review"],"milestone":{"id":2114820,"iid":67,"group_id":9970,"title":"14.6","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T05:00:52.094Z","updated_at":"2022-04-21T07:26:38.271Z","due_date":"2021-12-17","start_date":"2021-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/67"},"assignees":[],"author":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"type":"ISSUE","assignee":null,"user_notes_count":25,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329920","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329920","notes":"https://gitlab.com/api/v4/projects/278964/issues/329920/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329920/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329920","relative":"#329920","full":"gitlab-org/gitlab#329920"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5604,"epic":{"id":226144,"iid":5604,"title":"Refactor jobs view to Vue/GraphQL","url":"/groups/gitlab-org/-/epics/5604","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":86469428,"iid":329901,"project_id":278964,"title":"Project deletion failing due to SQL timeout on head_pipeline_id nil updation","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nRecently a customer [reported](https://gitlab.com/gitlab-org/gitlab/-/issues/295201#note_566911294) while deleting a project, the repository was deleted, however the project deletion failed. Logs indicate SQL timeout occurred when trying to update `head_pipeline_id` to `nil`.\n\n```\nDeletion failed on \u003cproject\u003e with the following message: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  SQL statement \"UPDATE ONLY \"public\".\"merge_requests\" SET \"head_pipeline_id\" = NULL WHERE $1 OPERATOR(pg_catalog.=) \"head_pipeline_id\"\"\n```\n\n`merge_requests` table has a `on_delete: :nullify` FK constraint. \n\n![Screen_Shot_2021-05-04_at_12.14.37_PM](/uploads/4f1e3f72efb958b44a3319e848df7745/Screen_Shot_2021-05-04_at_12.14.37_PM.png)\n\nThe timeout could be occurring when trying to set `head_pipeline_id` to `nil` for `merge_requests` whose associated `ci_pipelines` are being deleted.\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\nCustomer project affected details in [ZD ticket](https://gitlab.zendesk.com/agent/tickets/210446) (internal only)\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\nProject deletion fails, requiring the customer to contact Support to delete the project manually.\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\nProject deletion should be seamless, without resulting in SQL timeout when `head_pipeline_id` is being deleted.\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\nhttps://log.gprd.gitlab.net/app/discover#/?_g=h@e75a605\u0026_a=h@764cc63 (internal)\n\n```\nDeletion failed on \u003cproject\u003e with the following message: PG::QueryCanceled: ERROR:  canceling statement due to statement timeout\nCONTEXT:  SQL statement \"UPDATE ONLY \"public\".\"merge_requests\" SET \"head_pipeline_id\" = NULL WHERE $1 OPERATOR(pg_catalog.=) \"head_pipeline_id\"\"\n```\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nImplement loose foreign keys to delete the associated record async to avoid timeouts.","state":"closed","created_at":"2021-05-04T17:04:56.431Z","updated_at":"2022-02-04T14:45:16.271Z","closed_at":"2022-02-04T14:45:16.253Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["approaching-SLO","backend","customer","devops::manage","group::compliance","missed-SLO","priority::2","section::dev","severity::2","type::bug","workflow::blocked"],"milestone":null,"assignees":[],"author":{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"},"type":"ISSUE","assignee":null,"user_notes_count":26,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329901","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329901","notes":"https://gitlab.com/api/v4/projects/278964/issues/329901/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329901/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329901","relative":"#329901","full":"gitlab-org/gitlab#329901"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5936,"epic":{"id":264716,"iid":5936,"title":"Bugs with deletion of projects","url":"/groups/gitlab-org/-/epics/5936","group_id":9970,"human_readable_end_date":"Jan 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86468798,"iid":329897,"project_id":278964,"title":"Track compliance pipeline configuration usage","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal \n\n\u003c!-- Use this section to explain the feature and how it will work. It can be helpful to add technical details, design proposals, and links to related epics or issues. --\u003e\n\n\u003c!-- Consider adding related issues and epics to this issue. You can also reference the Feature Proposal Template (https://gitlab.com/gitlab-org/gitlab/-/blob/master/.gitlab/issue_templates/Feature%20proposal.md) for additional details to consider adding to this issue. Additionally, as a data oriented organization, when your feature exits planning breakdown, consider adding the `What does success look like, and how can we measure that?` section.\n\n--\u003e\n\nCompliance pipeline configuration was released to customers in 13.11. It will be helpful to see the adaptation of this feature over time.\n\nWe can obtain this metric by counting the number of compliance framework that has `compliance_pipeline_configuration` set.\n\n## Implementation\n\n- Add new metric in `usage_data.rb` for `i_compliance_pipeline_configuration` to account for compliance pipeline configuration addition in an instance: `count(::ComplianceManagement::Framework.where.not(pipeline_configuration_full_path: nil))`","state":"closed","created_at":"2021-05-04T16:52:50.360Z","updated_at":"2022-12-05T09:27:14.358Z","closed_at":"2021-06-29T18:28:40.073Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["GitLab Ultimate","backend","devops::manage","group::compliance","priority::3","product intelligence","section::dev","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":4014344,"username":"aishbuilds","name":"Aishwarya Subramanian","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4014344/avatar.png","web_url":"https://gitlab.com/aishbuilds"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329897","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329897","notes":"https://gitlab.com/api/v4/projects/278964/issues/329897/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329897/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329897","relative":"#329897","full":"gitlab-org/gitlab#329897"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3156,"epic":{"id":45158,"iid":3156,"title":"Allow group owners to define compliance pipeline configurations at the group level","url":"/groups/gitlab-org/-/epics/3156","group_id":9970,"human_readable_end_date":"Aug 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86465134,"iid":329889,"project_id":278964,"title":"Track total number of suggestions and applied suggestions","description":"## Problem to Solve\n\nThere is a significant user discrepancy between the number of people who create a suggestion and the number of people who apply a suggestion. Further data is needed to identify why this gap may exist.\n\n![Screen_Shot_2021-05-03_at_11.26.07_AM](/uploads/6a4a59c6f1937d0262364e8fd74aa8fe/Screen_Shot_2021-05-03_at_11.26.07_AM.png)\n\n### Additional Details\n\nSome quotes about why suggestions might not be applied:\n\n1. I often write suggestions I know are not going to be applied, because they need more changes related to them. But they are a good way of communicating what I want the code to look like afterwards.\n1. I only accept suggestions if there are no other changes.\n\nThese seem like reasonable considerations for why applying a suggestion might not make sense.\n\n## Proposal\n\nIn order to further understand this gap, it would be helpful to have two additional metrics available:\n\n1. Total number of Suggestions\n1. Number of APPLIED Suggestions\n\nWith this we'd be able to further understand if this user gap is expected (i.e. most suggestions are actually applied) or if there are additional items we need to understand why suggestions aren't applied.","state":"closed","created_at":"2021-05-04T15:55:21.591Z","updated_at":"2021-09-18T07:00:59.425Z","closed_at":"2021-08-23T13:43:30.262Z","closed_by":{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"},"labels":["Deliverable","backend","backend-weight::2","devops::create","group::code review","instrumentation","quad-planning::complete-no-action","section::dev","workflow::in review"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":5918904,"username":"marc_shaw","name":"Marc Shaw","state":"active","avatar_url":"https://secure.gravatar.com/avatar/78c946cb19e40815a2b5d97cefecec6a?s=80\u0026d=identicon","web_url":"https://gitlab.com/marc_shaw"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329889","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329889","notes":"https://gitlab.com/api/v4/projects/278964/issues/329889/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329889/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329889","relative":"#329889","full":"gitlab-org/gitlab#329889"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4948,"epic":{"id":147168,"iid":4948,"title":"The Great Code Review Instrumentation Epic","url":"/groups/gitlab-org/-/epics/4948","group_id":9970,"human_readable_end_date":"Sep 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86463164,"iid":329888,"project_id":278964,"title":"Weird border on Pipelines in Dark theme mode","description":"### Summary\n\nWeird border exist in Job list in a stage on Pipelines in Dark theme mode.\n\n### Steps to reproduce\n\nSee https://gitlab.com/gitlab-org/gitlab/-/pipelines in the Dark theme mode.\n\n### Example Project\n\nThis bug is independent from a specific project.\n\n### What is the current *bug* behavior?\n\nA short white border appears on top of Job list in a stage on Pipelines page ONLY in Dark theme mode.\n\n![pipelines](/uploads/8ad924a331e5d82e9662367a13969c8d/pipelines.png)\n\nThis code was introduced in gitlab-org/gitlab-foss!8097 (%8.15), but still not sure if that rule was necessary even at that time.\n\n### What is the expected *correct* behavior?\n\nAny weird border does not appear on top of Job list in a stage on Pipelines page even in Dark theme mode.\n\n### Relevant logs and/or screenshots\n\n![pipelines](/uploads/8ad924a331e5d82e9662367a13969c8d/pipelines.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com (13.12-pre)\n\n### Possible fixes\n\nFix it.\n\nA part of \u00262902","state":"closed","created_at":"2021-05-04T15:41:18.719Z","updated_at":"2021-05-30T02:00:45.994Z","closed_at":"2021-05-07T04:59:19.096Z","closed_by":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"labels":["CSS cleanup","CSS refactor","Community contribution","UI polish","darkmode","frontend","maintenance::refactor","type::bug","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"}],"author":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"type":"ISSUE","assignee":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329888","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329888","notes":"https://gitlab.com/api/v4/projects/278964/issues/329888/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329888/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329888","relative":"#329888","full":"gitlab-org/gitlab#329888"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2902,"epic":{"id":32725,"iid":2902,"title":"Dark mode","url":"/groups/gitlab-org/-/epics/2902","group_id":9970,"human_readable_end_date":"Oct 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86463110,"iid":329887,"project_id":278964,"title":"Merge i18n translations (June 2021)","description":"Merge the latest i18n translations from Crowdin on a monthly cadence.\n\nDocumentation available here: https://docs.gitlab.com/ee/development/i18n/merging_translations.html\n\n#### ToDo\n* [x] If needed, configure the [GitLab-Crowdin integration](https://docs.gitlab.com/ee/development/i18n/merging_translations.html#recreate-the-gitlab-integration-in-crowdin)\n* [x] Kick off an import from [Crowdin](https://crowdin.com/project/gitlab-ee/settings#integration-gitlab) (after June 1)\n* [x] Find the [MR](https://gitlab.com/gitlab-org/gitlab/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=opened\u0026author_username=gitlab-crowdin-bot) created by @gitlab-crowdin-bot and associate it with this issue\n* [x] Complete the MR\n* [x] Update the translation levels [data](https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/i18n.rb#L40) with the latest numbers. https://gitlab.com/gitlab-org/gitlab/-/issues/330637\n* [x] When done, clone this issue for the next milestone.","state":"closed","created_at":"2021-05-04T15:40:21.946Z","updated_at":"2022-03-28T19:16:58.017Z","closed_at":"2021-06-04T23:33:53.226Z","closed_by":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"labels":["Category:Internationalization","Deliverable","Next Up","backend","devops::manage","estimation::completed","group::import","milestone::p2","section::dev","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"}],"author":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"type":"ISSUE","assignee":{"id":5247073,"username":"hdelalic","name":"Haris Delalić","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5247073/avatar.png","web_url":"https://gitlab.com/hdelalic"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-06-15","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329887","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329887","notes":"https://gitlab.com/api/v4/projects/278964/issues/329887/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329887/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329887","relative":"#329887","full":"gitlab-org/gitlab#329887"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3571,"epic":{"id":67045,"iid":3571,"title":"Regular i18n translation merges","url":"/groups/gitlab-org/-/epics/3571","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e1033\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":86462672,"iid":329886,"project_id":278964,"title":"[Feature flag] Remove sec_secret_detection_ui_enable","description":"## Feature\n\nThe `:sec_secret_detection_ui_enable` feature flag was previously [enabled by default](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/58687) and should be removed.\n\n## Owners\n\n- Group: ~\"group::static analysis\" \n- Slack channel: `#g_secure-static-analysis`\n- DRI: @pgascouvaillancourt \n- PM: @tmccaslin\n\n**Removal**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n- [x] Remove `:sec_secret_detection_ui_enable` feature flag\n    - [x] Remove all references to the feature flag from the codebase\n    - [x] Remove the YAML definitions for the feature from the repository\n    - [x] Create a Changelog Entry\n\n- [x] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete some_feature`.\n\n- [x] Close this issue after the feature flag is removed from the codebase.","state":"closed","created_at":"2021-05-04T15:32:36.417Z","updated_at":"2021-07-18T07:09:33.128Z","closed_at":"2021-07-02T11:20:38.826Z","closed_by":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"labels":["Category:SAST","Deliverable","devops::secure","feature flag","group::static analysis","maintenance::refactor","missed-deliverable","missed:14.0","section::sec","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"}],"author":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"type":"ISSUE","assignee":{"id":3732265,"username":"pgascouvaillancourt","name":"Paul Gascou-Vaillancourt","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7a190c0b1ff5772c9230b4d9a38ac608?s=80\u0026d=identicon","web_url":"https://gitlab.com/pgascouvaillancourt"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329886","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329886","notes":"https://gitlab.com/api/v4/projects/278964/issues/329886/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329886/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329886","relative":"#329886","full":"gitlab-org/gitlab#329886"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4496,"epic":{"id":117590,"iid":4496,"title":"Configuration Button for Secret Detection","url":"/groups/gitlab-org/-/epics/4496","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86461448,"iid":329882,"project_id":278964,"title":"Consider moving environment variables that aren't confidential and not meant to change to the CI config directly","description":"We currently have a number of [environment variables](https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd) which are:\n\n- static: their value isn't meant to be changed dynamically via project variables\n- not confidential: their value can be exposed publicly in our CI config\n\nWe should aim to move those variables directly in our CI config to limit the number of variables defined at the project level.\n\n## After-merge todos\n\n- [x] Remove `ALTERNATIVE_SOURCES` (unused?) from https://dev.gitlab.org/gitlab/gitlab-ee/-/settings/ci_cd\n- Remove `BUILD_ASSETS_IMAGE` from\n   - [x] https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - [x] https://dev.gitlab.org/gitlab/gitlab-ee/-/settings/ci_cd\n   - [x] https://gitlab.com/gitlab-org/security/gitlab/-/settings/ci_cd\n- [x] Remove `BUILD_BUNDLED_GEMS_IMAGE` (unused?) from https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n- Remove `BUILD_TRIGGER_TOKEN` (unused?) from\n   - [x] https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - [x] https://gitlab.com/gitlab-org/security/gitlab/-/settings/ci_cd\n   - `scripts/trigger-build` now uses `CI_JOB_TOKEN` exclusively.\n- [x] Remove `DISABLE_FULL_REPO_CACHING` from https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - The variable has been replaced by `DISABLE_SHALLOW_REPO_CACHING` to re-enable full clone caching. The default will be to not do a full clone unless `DISABLE_SHALLOW_REPO_CACHING` is set.\n- [x] Remove `CI_PRE_CLONE_SCRIPT_DISABLED` (unused) from https://dev.gitlab.org/gitlab/gitlab-ee/-/settings/ci_cd\n- [x] Remove `DOCS_GITLAB_REPO_SUFFIX` from https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n- Remove `ENABLE_SHALLOW_REPO_CACHING` from\n   - [x] https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - [x] https://gitlab.com/gitlab-org/security/gitlab/-/settings/ci_cd\n   - The variable has been replaced by `DISABLE_SHALLOW_REPO_CACHING` to disable shallow clone caching. The default will be to do a shallow clone unless `DISABLE_SHALLOW_REPO_CACHING` is set.\n- Remove `REVIEW_APPS_DOMAIN` from\n   - [x] https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - [x] https://gitlab.com/gitlab-org/security/gitlab/-/settings/ci_cd\n- Remove `DOCS_REVIEW_APPS_DOMAIN` from\n   - [x] https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - [-] https://gitlab.com/gitlab-org/security/gitlab/-/settings/ci_cd (not there)\n- Remove `REVIEW_APPS_EE_LICENSE` from\n   - [x] https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - [x] https://gitlab.com/gitlab-org/security/gitlab/-/settings/ci_cd\n   - The variable has been replaced by the `REVIEW_APPS_EE_LICENSE_FILE` file variable, scoped to the `review/*` environment\n- [x] Remove `RSPEC_FAIL_FAST_ENABLED` from https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n- Remove `REVIEW_APPS_BUILD_TRIGGER_TOKEN` from\n   - [x] https://gitlab.com/gitlab-org/gitlab/-/settings/ci_cd\n   - [x] https://gitlab.com/gitlab-org/security/gitlab/-/settings/ci_cd","state":"closed","created_at":"2021-05-04T15:10:43.402Z","updated_at":"2022-03-16T11:43:14.583Z","closed_at":"2021-05-17T12:39:21.099Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","maintenance::pipelines","type::maintenance","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329882","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":20,"completed_count":20},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"20 of 20 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329882","notes":"https://gitlab.com/api/v4/projects/278964/issues/329882/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329882/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329882","relative":"#329882","full":"gitlab-org/gitlab#329882"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86458986,"iid":329870,"project_id":278964,"title":"Get rid of the `scripts/sync-reports` file and associated env variables","description":"We don't use the `scripts/sync-reports` file anymore (we use artifacts instead).\n\nWe should get rid of it and its associated env variables (`AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`).","state":"closed","created_at":"2021-05-04T14:34:47.741Z","updated_at":"2022-03-16T11:43:16.630Z","closed_at":"2021-05-05T11:02:19.343Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Engineering Productivity","maintenance::pipelines","maintenance::refactor","type::maintenance"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329870","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329870","notes":"https://gitlab.com/api/v4/projects/278964/issues/329870/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329870/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329870","relative":"#329870","full":"gitlab-org/gitlab#329870"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86455701,"iid":329864,"project_id":278964,"title":"Import group epics using ndjson","description":"With https://gitlab.com/gitlab-org/gitlab/-/issues/328216 it is now possible to export single top level relations for a group, which allows us to import epics using exported ndjson file which includes all of it's relations. \n\n## Proposed solution\n1. At some point before running import pipeline we need to request export of relations\n1. Create new ETL pipeline, similar to existing `EpicsPipeline` that is going to be handling incoming ndjson epics data. There are going to be a few key differences:\n   - Check and see if epics relation is available to download. Reenqueue pipeline worker if export is not yet available. Set expiration on import to be failed if export did not become available after X amount of time\n   - Download and decompress exported relation. Could potentially be a `before_run` action for the pipeline worker? \n   - Extractor can be a simple file reader that yields one line at a time \n   - Each line needs to be processed by doing something similar to what we do in Import - go through all of the relations within a hash and convert them into objects (see POC here https://gitlab.com/gitlab-org/gitlab/-/merge_requests/58404/diffs#e494a76de99bb48e3585785970290d184fccb14c_0_43)","state":"closed","created_at":"2021-05-04T13:45:19.981Z","updated_at":"2022-11-08T07:49:19.412Z","closed_at":"2021-05-31T14:40:47.372Z","closed_by":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"labels":["Importer:GitLab Migration","Next Up","backend","devops::manage","estimation::completed","group::import","section::dev","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"}],"author":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"type":"ISSUE","assignee":{"id":674121,"username":"georgekoltsov","name":"George Koltsov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/674121/avatar.png","web_url":"https://gitlab.com/georgekoltsov"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329864","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329864","notes":"https://gitlab.com/api/v4/projects/278964/issues/329864/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329864/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329864","relative":"#329864","full":"gitlab-org/gitlab#329864"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5769,"epic":{"id":250839,"iid":5769,"title":"Use ndjson to migrate complex relations","url":"/groups/gitlab-org/-/epics/5769","group_id":9970,"human_readable_end_date":"Nov 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86443765,"iid":329854,"project_id":278964,"title":"Move common table util to utility file","description":"The following discussion from !60398 should be addressed:\n\n- [ ] @jiaan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60398#note_565960979):  (+1 comment)\n\n    \u003e **Suggestion (non-blocking):** This seems to be a common constant \u0026 function across our files, WDYT about creating a shared utility `table.js` for this? If you agree, but feel like it's beyond this MR's scope then I'd suggest we do it as a follow-up issue.","state":"closed","created_at":"2021-05-04T10:22:05.829Z","updated_at":"2021-10-28T13:57:03.555Z","closed_at":"2021-05-24T09:34:28.837Z","closed_by":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"labels":["devops::manage","frontend","group::compliance","priority::4","section::dev","type::maintenance","workflow::ready for development"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329854","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329854","notes":"https://gitlab.com/api/v4/projects/278964/issues/329854/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329854/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329854","relative":"#329854","full":"gitlab-org/gitlab#329854"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86443593,"iid":329853,"project_id":278964,"title":"Update the status checks feature flag so it doesn't reference approval gates","description":"The following discussion from !60398 should be addressed:\n\n- [ ] @jiaan started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60398#note_565961006):  (+1 comment)\n\n    \u003e **Question:** I'm wondering if we should also rename this feature flag while we're still in dev? :thinking:\n\n- [ ] Once updated, remove the old feature flag from dev/staging environments\n\n~\"feature flag\" `:ff_compliance_approval_gates`\n\nInstance locations:\n\n- [ ] `ee/app/views/projects/_merge_request_settings.html.haml`\n- [ ] `ee/spec/views/projects/edit.html.haml_spec.rb`\n- [ ] `ee/config/feature_flags/development/ff_compliance_approval_gates.yml`\n- [ ] `doc/api/status_checks.md`\n- [ ] `doc/user/project/merge_requests/status_checks.md`\n- [ ] `ee/lib/api/status_checks.rb`\n- [ ] `ee/spec/requests/api/status_checks_spec.rb`","state":"closed","created_at":"2021-05-04T10:18:01.632Z","updated_at":"2021-10-28T13:57:04.026Z","closed_at":"2021-06-23T10:18:39.933Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Category:Compliance Management","Enterprise Edition","GitLab Ultimate","backend","devops::manage","feature flag","group::compliance","section::dev","type::maintenance","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"type":"ISSUE","assignee":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329853","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":9,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 9 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329853","notes":"https://gitlab.com/api/v4/projects/278964/issues/329853/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329853/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329853","relative":"#329853","full":"gitlab-org/gitlab#329853"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5968,"epic":{"id":268001,"iid":5968,"title":"[Backend] External Status Checks","url":"/groups/gitlab-org/-/epics/5968","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86438552,"iid":329849,"project_id":278964,"title":"[Feature flag] Enable `web_hooks_disable_failed`","description":"## Feature\n\nThis feature uses the `:web_hooks_disable_failed` feature flag!\n\nThis feature enables us to detect repeated failures and pro-actively disable\nfailing web-hooks.\n\n- See: https://gitlab.com/gitlab-org/gitlab/-/issues/329213\n\nWe do not expect this to be enabled until UI elements are in place.\n\n## Owners\n\n- Team: ~\"group::integrations\"  \n- Most appropriate slack channel to reach out to: `#g_ecosystem_be`\n- Best individual to reach out to: @alexkalderimis \n- PM: @g.hickman   \n- EM: @arturoherrero \n\n## The Rollout Plan\n\n- Partial Rollout on GitLab.com with beta groups\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n**Beta Groups/Projects:**\n\n- `gitlab-org/gitlab` project\n- `gitlab-org`/`gitlab-com` groups\n\n## Expectations\n\n### What are we expecting to happen?\n\nWe expect that webhooks that fail will be disabled. Ones that fail with 5xx errors will come back after\na cooldown period and users will notice little disruption. Ones that fail with 4xx errors will be\ndisabled and will need to be re-enabled. There may be users who are unhappy about this.\n\n### What might happen if this goes wrong?\n\nUsers workflows could break, webhooks could get disabled and they might not know what to do.\n\nIn the worst case, they won't be able to re-enable them, even when the webhook server is working.\n\nIf there are any problems we should disable this feature flag, \nwhich will re-enable all webhooks.\n\n```ruby\nFeature.disable(:web_hooks_disable_failed)\n```\n\n### What can we monitor to detect problems with this?\n\nWe should monitor the `Projects::HooksController` and `TestHooks::ProjectService`. Failures to\nre-enable hooks will be seen here as errors. Sentry should help here.\n\n\n## Rollout Steps\n\n### Rollout on non-production environments\n\n**Initial Rollout**\n\n*Preparation Phase*\n- [x] Enable on staging (`/chatops run feature set web_hooks_disable_failed true --staging`)\n\n- [x] Test on staging\n\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default))\n\n- [x] Announce on the issue an estimated time this will be enabled on GitLab.com\n\n- [x] Check if the feature flag change needs to be accompagnied with a\n      [change management\n      issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process). Cross\n      link the issue here if it does.\n\n\n\n- Ensure that the feature MRs have been deployed to non-production environments.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- [x] Enable the feature globally on non-production environments.\n    - [x] `/chatops run feature set web_hooks_disable_failed true --dev`\n    - [x] `/chatops run feature set web_hooks_disable_failed true --staging`\n- [x] Verify that the feature works as expected. Posting the QA result in this issue is preferable.\n\n### Specific rollout on production\n\n- Ensure that the feature MRs have been deployed to both production and canary.\n    - [x] `/chatops run auto_deploy status \u003cmerge-commit-of-your-feature\u003e`\n- If you're using [project-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab web_hooks_disable_failed true`\n    - [x] `/chatops run feature set --project=gitlab-org/gitlab-foss web_hooks_disable_failed true`\n    - [x] `/chatops run feature set --project=gitlab-com/www-gitlab-com web_hooks_disable_failed true`\n- If you're using [group-actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), you must enable the feature on these entries:\n    - [x] `/chatops run feature set --group=gitlab-org web_hooks_disable_failed true`\n    - [x] `/chatops run feature set --group=gitlab-com web_hooks_disable_failed true`\n- [ ] Verify that the feature works on the specific entries. Posting the QA result in this issue is preferable.\n\n### Preparation before global rollout\n\n- [x] Check if the feature flag change needs to be accompanied with a\n  [change management issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process).\n  See: https://gitlab.com/gitlab-com/gl-infra/production/-/issues/6448\n- [ ] Ensure that you or a representative in development can be available for at least 2 hours after feature flag updates in production.\n  If a different developer will be covering, or an exception is needed, please inform the oncall SRE by using the `@sre-oncall` Slack alias.\n- [ ] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default)).\n- [ ] Announce on [the feature issue](ISSUE LINK) an estimated time this will be enabled on GitLab.com.\n- [ ] Notify `#support_gitlab-com` and your team channel ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#communicate-the-change)).\n\n### Global rollout on production\n\nFor visibility, all `/chatops` commands that target production should be executed in the `#production` slack channel and cross-posted (with the command results) to the responsible team's slack channel (`#g_TEAM_NAME`).\n\n- [x] [Incrementally roll out](https://docs.gitlab.com/ee/development/feature_flags/controls.html#process) the feature.\n  - If the feature flag in code has [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform **actor-based** rollout.\n    - [x] `/chatops run feature set web_hooks_disable_failed \u003crollout-percentage\u003e --actors`\n  - If the feature flag in code does **NOT** have [an actor](https://docs.gitlab.com/ee/development/feature_flags/#feature-actors), perform time-based rollout (**random** rollout).\n    - [x] `/chatops run feature set web_hooks_disable_failed \u003crollout-percentage\u003e`\n  - Enable the feature globally on production environment.\n    - [x] **Important: First ensure previously affected customer's hooks are made exempt https://gitlab.com/gitlab-org/gitlab/-/issues/329849#note_1109721299**. \n    - [x] `/chatops run feature set web_hooks_disable_failed true`\n- [x] Announce on [the feature issue](ISSUE LINK) that the feature has been globally enabled.\n- [x] Wait for [at least one day for the verification term](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release).\n\n### (Optional) Release the feature with the feature flag\n\nIf you're still unsure whether the feature is [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release)\nbut want to release it in the current milestone, you can change the default state of the feature flag to be enabled.\nTo do so, follow these steps:\n\n- [ ] Create a merge request with the following changes. Ask for review and merge it.\n    - [ ] Set the `default_enabled` attribute in [the feature flag definition](https://docs.gitlab.com/ee/development/feature_flags/#feature-flag-definition-and-validation) to `true`.\n    - [ ] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [ ] Ensure that the default-enabling MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status \u003cmerge-commit-of-default-enabling-mr\u003e`\n- [ ] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Set the next milestone to this rollout issue for scheduling [the flag removal](#release-the-feature).\n- [ ] (Optional) You can [create a separate issue](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) for scheduling the steps below to [Release the feature](#release-the-feature).\n    - [ ] Set the title to \"[Feature flag] Cleanup `web_hooks_disable_failed`\".\n    - [ ] Execute the `/copy_metadata \u003cthis-rollout-issue-link\u003e` quick action to copy the labels from this rollout issue.\n    - [ ] Link this rollout issue as a related issue.\n    - [ ] Close this rollout issue.\n\n**WARNING:** This approach has the downside that it makes it difficult for us to\n[clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) the flag.\nFor example, on-premise users could disable the feature on their GitLab instance. But when you\nremove the flag at some point, they suddenly see the feature as enabled and they can't roll it back\nto the previous behavior. To avoid this potential breaking change, use this approach only for urgent\nmatters.\n\n### Release the feature\n\nAfter the feature has been [deemed stable](https://about.gitlab.com/handbook/product-development-flow/feature-flag-lifecycle/#including-a-feature-behind-feature-flag-in-the-final-release),\nthe [clean up](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up)\nshould be done as soon as possible to permanently enable the feature and reduce complexity in the\ncodebase.\n\nYou can either [create a follow-up issue for Feature Flag Cleanup](https://gitlab.com/gitlab-org/gitlab/-/issues/new?issuable_template=Feature%20Flag%20Cleanup) or use the checklist below in this same issue.\n\n\u003c!-- The checklist here is to help stakeholders keep track of the feature flag status --\u003e\n- [x] Create a merge request to remove `web_hooks_disable_failed` feature flag. Ask for review and merge it.\n    - [x] Remove all references to the feature flag from the codebase.\n    - [x] Remove the YAML definitions for the feature from the repository.\n    - [x] Create [a changelog entry](https://docs.gitlab.com/ee/development/feature_flags/#changelog).\n- [x] Ensure that the cleanup MR has been deployed to both production and canary.\n      If the merge request was deployed before [the code cutoff](https://about.gitlab.com/handbook/engineering/releases/#self-managed-releases-1),\n      the feature can be officially announced in a release blog post.\n    - [ ] `/chatops run auto_deploy status 77adcd5a0768381d398ae96ac05bb58cf4465e9a`\n- [x] Close [the feature issue](ISSUE LINK) to indicate the feature will be released in the current milestone.\n- [ ] Clean up the feature flag from all environments by running these chatops command in `#production` channel:\n    - [x] `/chatops run feature delete web_hooks_disable_failed --dev`\n    - [x] `/chatops run feature delete web_hooks_disable_failed --staging`\n    - [x] `/chatops run feature delete web_hooks_disable_failed`\n- [x] Close this rollout issue.\n\n## Rollback Steps\n\n- [x] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set web_hooks_disable_failed false\n```","state":"closed","created_at":"2021-05-04T09:06:44.688Z","updated_at":"2022-12-21T12:10:27.858Z","closed_at":"2022-11-23T14:41:33.923Z","closed_by":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"labels":["Category:Integrations","Category:Webhooks","Deliverable","backend","devops::manage","feature flag","group::integrations","missed-deliverable","missed:14.0","missed:14.1","missed:14.10","missed:14.8","missed:14.9","missed:15.2","missed:15.3","missed:15.4","missed:15.5","missed:15.6","reliability","section::dev","type::feature","workflow::verification"],"milestone":{"id":2717597,"iid":82,"group_id":9970,"title":"15.7","description":"","state":"active","created_at":"2022-07-29T14:48:31.199Z","updated_at":"2022-07-29T14:48:31.199Z","due_date":"2022-12-17","start_date":"2022-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/82"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":52,"merge_requests_count":0,"upvotes":1,"downvotes":2,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329849","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":54,"completed_count":34},"weight":1,"blocking_issues_count":1,"has_tasks":true,"task_status":"34 of 54 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329849","notes":"https://gitlab.com/api/v4/projects/278964/issues/329849/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329849/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329849","relative":"#329849","full":"gitlab-org/gitlab#329849"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":8083,"epic":{"id":524600,"iid":8083,"title":"Improve the reliability of webhooks: Auto-disable Failing Webhooks","url":"/groups/gitlab-org/-/epics/8083","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86420292,"iid":329840,"project_id":278964,"title":"Keep track of eslint version update in package.json","description":"Besides updating [docker-file](https://gitlab.com/gitlab-org/security-products/analyzers/eslint/-/blob/master/Dockerfile#L1), we need to update the eslint version in [package.json](https://gitlab.com/gitlab-org/security-products/analyzers/eslint/-/blob/e36aa366995377963520f6d8b36d1bb79640b64e/package.json#L25)","state":"closed","created_at":"2021-05-04T03:38:56.010Z","updated_at":"2021-10-28T13:57:04.435Z","closed_at":"2021-05-04T15:30:13.178Z","closed_by":{"id":5427309,"username":"ssarka","name":"Saikat Sarkar","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/097feebc1eb82b858a9046fe9b6d9176?s=80\u0026d=identicon","web_url":"https://gitlab.com/ssarka"},"labels":["Category:SAST","backend","devops::secure","group::static analysis","type::maintenance","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":5427309,"username":"ssarka","name":"Saikat Sarkar","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/097feebc1eb82b858a9046fe9b6d9176?s=80\u0026d=identicon","web_url":"https://gitlab.com/ssarka"}],"author":{"id":5427309,"username":"ssarka","name":"Saikat Sarkar","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/097feebc1eb82b858a9046fe9b6d9176?s=80\u0026d=identicon","web_url":"https://gitlab.com/ssarka"},"type":"ISSUE","assignee":{"id":5427309,"username":"ssarka","name":"Saikat Sarkar","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/097feebc1eb82b858a9046fe9b6d9176?s=80\u0026d=identicon","web_url":"https://gitlab.com/ssarka"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329840","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329840","notes":"https://gitlab.com/api/v4/projects/278964/issues/329840/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329840/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329840","relative":"#329840","full":"gitlab-org/gitlab#329840"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86416806,"iid":329834,"project_id":278964,"title":"Remove references to GitLab Managed Applications from Protect documentation","description":"\n### Problem to solve\n\nAs described in https://gitlab.com/groups/gitlab-org/-/epics/4280, GMAv1 (i.e. \"one click install\") has ben deprecated and is in the process of being removed. The GMAv2 approach, also known as CI/CD or \"cluster management project\", is still supported but we need to update the documentation to adhere to the guideline below:\n\n\u003e @nagyv-gitlab: we’ll change the nomenclature here from GitLab Managed Apps to Cluster Management Project., as these are not managed apps.\n\nThe following documentation pages need to be updated:\n1. https://docs.gitlab.com/ee/user/project/clusters/protect/container_network_security/quick_start_guide.html\n1. https://docs.gitlab.com/ee/user/clusters/applications.html\n1. https://docs.gitlab.com/ee/user/project/clusters/protect/container_host_security/quick_start_guide.html\n\n\u003c!-- Include the following detail as necessary:\n* What product or feature(s) affected?\n* What docs or doc section affected? Include links or paths.\n* Is there a problem with a specific document, or a feature/process that's not addressed sufficiently in docs?\n* Any other ideas or requests?\n--\u003e\n\n### Further details\n\nSee parent epic.\n\n### Proposal\n#### Cluster applications\n\nhttps://docs.gitlab.com/ee/user/clusters/applications.html\n\nModify where it says:\n\n\u003e Support for installing the X managed application is provided by the GitLab Container Security group …\n\nTo say:\n\n\u003e The Container Security group provides GitLab integration support for X …\n\n\nConfirm removal of: https://docs.gitlab.com/ee/user/clusters/applications.html#fluentd (everything under https://docs.gitlab.com/ee/user/clusters/applications.html#install-with-one-click is being removed; see TBD).\n\n\n#### Quick-start guide\n\nhttps://docs.gitlab.com/ee/user/project/clusters/protect/container_network_security/quick_start_guide.html\n\nRemove references to \"GMAv1\" and \"GMAv2\" (e.g.: \"Install the Ingress node via CI/CD (GMAv2)\")\n\nRemove section: https://docs.gitlab.com/ee/user/project/clusters/protect/container_network_security/quick_start_guide.html#using-gmav1-with-gmav2\n\n\n\u003c!-- Further specifics for how can we solve the problem. --\u003e\n\n### Who can address the issue\n\n\u003c!-- What if any special expertise is required to resolve this issue? --\u003e\n\n### Other links/references\n\n\u003c!-- E.g. related GitLab issues/MRs --\u003e\n\n/cc @nagyv-gitlab @sam.white @ngaskill","state":"closed","created_at":"2021-05-04T00:25:48.300Z","updated_at":"2021-06-18T07:09:55.800Z","closed_at":"2021-06-02T06:20:51.003Z","closed_by":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"labels":["Deliverable","Technical Writing","backend","cross-group","documentation","group::security policies","section::sec","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"}],"author":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"type":"ISSUE","assignee":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329834","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329834","notes":"https://gitlab.com/api/v4/projects/278964/issues/329834/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329834/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329834","relative":"#329834","full":"gitlab-org/gitlab#329834"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4280,"epic":{"id":100784,"iid":4280,"title":"Deprecate and remove one-click GitLab Managed Apps and unused Auto DevOps features","url":"/groups/gitlab-org/-/epics/4280","group_id":9970,"human_readable_end_date":"Jul 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86414676,"iid":329827,"project_id":278964,"title":"Geo Node Status 2.0 Regression - Secondary verification popover missing","description":"## Problem\n\n### Before\n\n![image](/uploads/b44bbab816d10c3c17669ed821cca717/image.png)\n\n### After\n\nWhen mousing over the progress bar, there is no popover:\n\n![image](/uploads/7d957028331469f8c02c8c58d0d56c85/image.png)","state":"closed","created_at":"2021-05-03T22:44:07.971Z","updated_at":"2021-05-11T20:28:41.058Z","closed_at":"2021-05-10T16:09:07.328Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["Enterprise Edition","GitLab Premium","UX","devops::systems","frontend","group::geo","section::enablement","severity::4","type::bug","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329827","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329827","notes":"https://gitlab.com/api/v4/projects/278964/issues/329827/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329827/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329827","relative":"#329827","full":"gitlab-org/gitlab#329827"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86409603,"iid":329818,"project_id":278964,"title":"Geo Node Status 2.0 Regression - Incorrect Data Types","description":"## What/Why\n\nThe Data Types are not correct for certain SSF Components.  This is because we do not currently have accurate data coming from the SSF helper.  When we loop through the available SSF Replicables we hard code \"File\".  This should be replaced with Class data/method.  https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/helpers/ee/geo_helper.rb#L226-227\n\n@mkozono we talked about this a few months ago and I can't remember if we came to the conclusion of how we would access this data on each replicable.\n\n## Screenshot\n\n\u003cimg src=\"/uploads/cc62dba652c268fca9579d205db83bcd/Screen_Shot_2021-05-03_at_3.34.40_PM.png\" height=\"600px\"\u003e\u003c/img\u003e\n\n## Proposal\n\nCreate a method/data on the `replicator_class` to provide information on its data type.","state":"closed","created_at":"2021-05-03T20:38:41.104Z","updated_at":"2021-05-18T21:05:14.103Z","closed_at":"2021-05-12T19:06:38.252Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["UX","backend","devops::systems","found:staging.gitlab.com","group::geo","section::enablement","severity::4","type::bug","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329818","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329818","notes":"https://gitlab.com/api/v4/projects/278964/issues/329818/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329818/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329818","relative":"#329818","full":"gitlab-org/gitlab#329818"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86409148,"iid":329817,"project_id":278964,"title":"Geo Node Status 2.0 Regression - Timezone Issues","description":"## What/Why\n\nA few locations in the UI we show how long ago an event happened.  We convert the millisecond date to a readable date.  From there we pass it to the `timeago` helper to render how long ago it happened.  In the old UI it handled Timezones correctly when judging how long it had been. In the new UI, however, it doesn't appear to be handling this correctly and thus the timezone difference causes the time to be greatly skewed.\n\n## Screenshot\n\n| Old UI | New UI |\n| ------ | ------ |\n| ![Screen_Shot_2021-05-03_at_3.13.22_PM](/uploads/8976a0258e54c9f1c643aa85c923ad98/Screen_Shot_2021-05-03_at_3.13.22_PM.png) | ![Screen_Shot_2021-05-03_at_3.13.12_PM](/uploads/aeed1663e3215901991394d5087da887/Screen_Shot_2021-05-03_at_3.13.12_PM.png) |\n\n## Proposal\n\nProperly handle the date object to always be in UTC so we don't run into confusion like this.","state":"closed","created_at":"2021-05-03T20:24:49.259Z","updated_at":"2021-05-18T21:05:08.572Z","closed_at":"2021-05-13T13:59:46.514Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["UX","devops::systems","found:staging.gitlab.com","frontend","group::geo","javascript","section::enablement","severity::4","type::bug","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329817","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329817","notes":"https://gitlab.com/api/v4/projects/278964/issues/329817/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329817/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329817","relative":"#329817","full":"gitlab-org/gitlab#329817"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86401556,"iid":329805,"project_id":278964,"title":"Ensure gemnasium-gradle-plugin supports Gradle 7.0","description":"Release Note\nhttps://gitlab.com/gitlab-com/www-gitlab-com/-/merge_requests/85828\n\n### Problem to solve \n\nThe `gemnasium-gradle-plugin` used by Dependency Scanning does not currently support gradle 7 and ought to be enabled to do so.\n\n### Intended users\n\n* [Sasha (Software Developer)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)\n\n### Proposal\n\nWhen analyzing a gradle 7.0 the `Dependency Scanning` throws an error because of more stringent language requirements around getter and setters: `Type 'DumpDependenciesTask': field 'TASK_NAME' without corresponding getter has been annotated with @Internal. This behaviour has been deprecated and is scheduled to be removed in Gradle 7.0.`\n\nThe plugin needs to be updated.\n\n### Implementation plan\n\n- [x] update [gemnasium-gradle-plugin](https://gitlab.com/gitlab-org/security-products/analyzers/gemnasium-gradle-plugin) to add a getter method for accessing the `TASK_NAME` member\n- [x] release new version of plugin","state":"closed","created_at":"2021-05-03T17:18:30.140Z","updated_at":"2021-07-18T07:09:20.488Z","closed_at":"2021-07-12T16:26:24.289Z","closed_by":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","devops::secure","documentation","group::composition analysis","missed-SLO","priority::2","section::sec","severity::2","type::bug","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"}],"author":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"type":"ISSUE","assignee":{"id":4668304,"username":"ifrenkel","name":"Igor Frenkel","state":"active","avatar_url":"https://secure.gravatar.com/avatar/a73e8113c53ac25297ce751e59bbb1d3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ifrenkel"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329805","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329805","notes":"https://gitlab.com/api/v4/projects/278964/issues/329805/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329805/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329805","relative":"#329805","full":"gitlab-org/gitlab#329805"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":86397687,"iid":329798,"project_id":278964,"title":"Lazy load pipeline artifacts on pipelines table and remove artifacts from endpoint","description":"### Proposal \n\nThis is a follow up to https://gitlab.com/gitlab-org/gitlab/-/issues/324003, where we are now lazy loading the list of artifacts when the user clicks on the dropdown on the project pipelines index page. That change was intended to improve performance, but the endpoint is still having to query the artifacts in order to determine whether to show the dropdown initially or not.\n\nThe proposal for this issue is to always show the dropdown, regardless of whether or not the pipeline has any artifacts. That way we can remove the artifacts query from the main request.\n\nWe need to also make sure that other areas of the code that also use this endpoint are not relying on there being artifacts included.\n\n### TODO\n\n- [x] ~backend Remove `downloadable_artifacts` from PipelineSerializer#preloaded_relations\n- [x] ~frontend Add kebab button to every pipeline row and query for pipeline artifacts on click, without any advance knowledge of presence (remove has_downloadable artifacts handling) (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60950)\n- [x] ~frontend fix the pages that are not properly lazy loading the artifacts dropdown (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61045)\n- [x] ~frontend lazy load the artifacts in the MR pipeline widget (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61055)\n- [x] ~backend Remove `has_downloadable_artifacts` attribute (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60950)","state":"closed","created_at":"2021-05-03T15:56:08.747Z","updated_at":"2021-11-04T20:30:46.116Z","closed_at":"2021-05-13T14:58:05.157Z","closed_by":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"labels":["GitLab Core","backend","devops::verify","feature::enhancement","follow-up","frontend","group::pipeline insights","section::ops","type::feature","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"type":"ISSUE","assignee":{"id":3029776,"username":"shampton","name":"Scott Hampton","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3029776/avatar.png","web_url":"https://gitlab.com/shampton"},"user_notes_count":21,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329798","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329798","notes":"https://gitlab.com/api/v4/projects/278964/issues/329798/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329798/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329798","relative":"#329798","full":"gitlab-org/gitlab#329798"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":86395863,"iid":329792,"project_id":278964,"title":"Geo Node Status 2.0 Regression - No Node Data","description":"## What/Why\n\nWhen a node is first added and there is not information available (bad URL, no replication data, node isn't up). Geo isn't able to provide any information.  This results in some strange behavior and console errors around some of the props.  We should handle this better.\n\n## Screenshot\n\n| | UI | Console\n| ------ | ------ | ------ |\n| Bad State | ![Screen_Shot_2021-05-03_at_10.20.23_AM](/uploads/bf101974b9d94ec9659ed5f4de6328c1/Screen_Shot_2021-05-03_at_10.20.23_AM.png) | ![Screen_Shot_2021-05-03_at_10.21.24_AM](/uploads/0538d78f8a97def9ec29340935b23750/Screen_Shot_2021-05-03_at_10.21.24_AM.png) |\n\n## Proposal\n\nCreate some better error states for the UI elements to properly handle missing data as well as show placeholder information rather than empty states or things like `0 ()`","state":"closed","created_at":"2021-05-03T15:23:01.529Z","updated_at":"2021-05-11T20:28:35.518Z","closed_at":"2021-05-07T16:31:07.610Z","closed_by":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"labels":["UX","devops::systems","frontend","group::geo","javascript","section::enablement","severity::4","type::bug","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"}],"author":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"type":"ISSUE","assignee":{"id":4748809,"username":"zcuddy","name":"Zack Cuddy","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4748809/avatar.png","web_url":"https://gitlab.com/zcuddy"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329792","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329792","notes":"https://gitlab.com/api/v4/projects/278964/issues/329792/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329792/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329792","relative":"#329792","full":"gitlab-org/gitlab#329792"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":4712,"epic":{"id":135048,"iid":4712,"title":"Geo: Implement the new design of the Geo node page","url":"/groups/gitlab-org/-/epics/4712","group_id":9970,"human_readable_end_date":"Jun 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86391446,"iid":329788,"project_id":278964,"title":"Use BulkInsertService in AppSec::Dast::ScannerProfiles::UpdateAuditEventWorker","description":"# Context\n\nThe following discussion from !60287 should be addressed:\n\n- [ ] @philipcunningham started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60287#note_564362423):  (+3 comments)\n\n    \u003e are we able to leverage [`BulkInsertService`](https://gitlab.com/gitlab-org/gitlab/-/blob/04be8d17c88ae4181a9caf63a2d5c5af6f375f2f/ee/app/services/ee/audit_events/bulk_insert_service.rb) here?\n\n# Solution\n\nUse `BulkInsertService` to insert all of the audit events simultaneously in `AppSec::Dast::ScannerProfiles::UpdateAuditEventWorker`","state":"closed","created_at":"2021-05-03T14:09:52.460Z","updated_at":"2021-10-28T13:57:04.875Z","closed_at":"2021-05-24T08:41:50.797Z","closed_by":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"labels":["Category:Audit Events","Category:DAST","backend","devops::secure","group::dynamic analysis","section::sec","type::maintenance","workflow::scheduling"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[],"author":{"id":4059128,"username":"avielle","name":"Avielle Wolfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4059128/avatar.png","web_url":"https://gitlab.com/avielle"},"type":"ISSUE","assignee":null,"user_notes_count":1,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329788","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329788","notes":"https://gitlab.com/api/v4/projects/278964/issues/329788/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329788/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329788","relative":"#329788","full":"gitlab-org/gitlab#329788"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3323,"epic":{"id":54112,"iid":3323,"title":"DAST: UI configuration","url":"/groups/gitlab-org/-/epics/3323","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86391249,"iid":329787,"project_id":278964,"title":"Frontend: Show Pipeline tab on MR if no pipeline ever ran","description":"If a project has merge request pipelines configured, but for some reason no merge request pipeline was started. There is no manual way to create a new Merge Request pipeline, therefore the MR cannot be merged. This happened on a recent community contribution (https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60168). One can also not start a pipeline via the normal `\u003cproject\u003e/-/pipelines/new` interface because that only triggers branch pipelines.\n\nIn this specific case there is likely an edge case because of forks.\n\n---\n\nWorkaround: Issuing a manual POST request to: `https://gitlab.com/api/v4/projects/\u003cid\u003e/merge_requests/\u003ciid\u003e/pipelines`:\n\n```bash\ncurl --header \"PRIVATE-TOKEN: \u003cAPI_TOKEN\u003e\" -X POST --data-raw='' \\\n  'https://gitlab.com/api/v4/projects/\u003cid\u003e/merge_requests/\u003ciid\u003e/pipelines'\n```\n\nScreenshot of the MR interface below, notably missing the `Pipelines tab`. So even if https://gitlab.com/gitlab-org/gitlab/-/issues/326541 were solved, there would be no way to run a pipeline in an MR where no pipeline ran before.\n\n![Screenshot_2021-05-03_at_16.05.14](/uploads/6020d155081875821c15a34df4f060f2/Screenshot_2021-05-03_at_16.05.14.png)\n\n\n## Proposal(Updated)\n```\nGiven merge request pipelines are enabled for a project\nAnd No Pipeline ran\nWhen I am on the Merge Request Page\nThen I see the pipelines tab with 0 run pipelines\nAnd I can click the tab\nAnd I see an empty state where I can \"Run a pipeline\"\n```\n\n- When pipelines are enabled for a project always show the tab on the MR page\n- Don't show the `Run pipeline` button in the following cases:\n   * when no pipeline exists for the project. In this case we go ahead with the current banner for creating a pipeline.\n   * when pipeline is not configured to run on the branch in use. We should surface a warning making a mention of that","state":"closed","created_at":"2021-05-03T14:06:07.115Z","updated_at":"2022-08-24T20:21:51.297Z","closed_at":"2022-07-29T18:07:58.606Z","closed_by":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"labels":["Category:Continuous Integration","FY23::Q3","OKR","SUS::Impacting","UX","Verify::P3","customer","devops::verify","frontend","group::pipeline execution","internal customer","priority::3","section::ops","severity::3","type::bug","workflow::production"],"milestone":{"id":2453025,"iid":75,"group_id":9970,"title":"15.3","description":"","state":"active","created_at":"2022-02-03T22:28:50.229Z","updated_at":"2022-02-03T22:28:50.229Z","due_date":"2022-08-17","start_date":"2022-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/75"},"assignees":[{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"}],"author":{"id":181229,"username":"leipert","name":"Lukas 'Eipi' Eipert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/19a1f1260fa70323f35bc508927921a2?s=80\u0026d=identicon","web_url":"https://gitlab.com/leipert"},"type":"ISSUE","assignee":{"id":4477803,"username":"pburdette","name":"Payton Burdette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4477803/avatar.png","web_url":"https://gitlab.com/pburdette"},"user_notes_count":74,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329787","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329787","notes":"https://gitlab.com/api/v4/projects/278964/issues/329787/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329787/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329787","relative":"#329787","full":"gitlab-org/gitlab#329787"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86388892,"iid":329783,"project_id":278964,"title":"Expose `canMerge` permission for `projectMembers` in GraphQL API","description":"Currently, it's possible to check `canMerge` permission on merge request assignees and reviewers. However, the current assignee dropdown (using REST API) displays an icon for all the project members who cannot merge (see the screenshot).\n\n![Screenshot_2021-05-03_at_15.24.30](/uploads/08ce59a1c862fce5458c2009cce5d791/Screenshot_2021-05-03_at_15.24.30.png)\n\nTo match this UX when using GraphQL API, we need to expose `canMerge` permission for all `projectMembers` that belong to the MR's parent `project`","state":"closed","created_at":"2021-05-03T13:25:56.494Z","updated_at":"2022-02-18T07:01:13.215Z","closed_at":"2022-01-28T20:35:12.263Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Deliverable","GraphQL","backend","devops::create","frontend","group::code review","missed-deliverable","missed:14.6","missed:14.7","section::dev","workflow::in review"],"milestone":{"id":2161849,"iid":70,"group_id":9970,"title":"14.8","description":"","state":"active","created_at":"2021-07-26T16:51:47.677Z","updated_at":"2021-07-26T16:51:47.677Z","due_date":"2022-02-17","start_date":"2022-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/70"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329783","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329783","notes":"https://gitlab.com/api/v4/projects/278964/issues/329783/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329783/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329783","relative":"#329783","full":"gitlab-org/gitlab#329783"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86378049,"iid":329768,"project_id":278964,"title":"Add Hidden menu to project sidebar refactor","description":"In `app/views/layouts/nav/sidebar/_project_menus.html.haml` there are several menus hidden that we user for some quick actions.\n\nWe need to migrated those to the new refactor.","state":"closed","created_at":"2021-05-03T10:04:49.078Z","updated_at":"2021-05-10T15:53:51.104Z","closed_at":"2021-05-10T15:53:50.916Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Category:Navigation \u0026 Settings","backend","devops::create","group::editor","section::dev"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329768","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329768","notes":"https://gitlab.com/api/v4/projects/278964/issues/329768/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329768/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329768","relative":"#329768","full":"gitlab-org/gitlab#329768"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5695,"epic":{"id":239682,"iid":5695,"title":"Project sidebar code refactor","url":"/groups/gitlab-org/-/epics/5695","group_id":9970,"human_readable_end_date":"May 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86376639,"iid":329765,"project_id":278964,"title":"Move information about the fair scheduling to `ci_running_builds`","description":"## Description\n\n[The big queuing SQL query](https://gitlab.com/groups/gitlab-org/-/epics/5909#note_565828942) looks for information about the amount of builds running for a given project to calculate \"fair scheduling\" data.\n\nWe can denormalize this information and store in `ci_running_builds` to accelerate the big query.\n\n## Proposal\n\nCreate `ci_running_builds` table with `id, project_id, build_id, runner_id, runner_type`. Insert a new row into that table if it got picked by a shared runner. Remove the row when a build transitions from `running` status to a different state.","state":"closed","created_at":"2021-05-03T09:41:55.606Z","updated_at":"2021-06-16T10:17:45.546Z","closed_at":"2021-06-16T10:17:45.528Z","closed_by":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"labels":["Category:Continuous Integration","Engineering Allocation","devops::verify","group::pipeline execution","section::ops","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-07-19","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329765","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329765","notes":"https://gitlab.com/api/v4/projects/278964/issues/329765/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329765/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329765","relative":"#329765","full":"gitlab-org/gitlab#329765"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5909,"epic":{"id":261464,"iid":5909,"title":"Introduce additional database table to improve builds queuing mechanisms","url":"/groups/gitlab-org/-/epics/5909","group_id":9970,"human_readable_end_date":"Oct 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86376526,"iid":329764,"project_id":278964,"title":"Create a separate table for pending builds","description":"## Description\n\nAs a first step in the `ci_pending_builds` story, we need to create a new, small table with that name.\n\n1. Create a new table with `project_id` and `build_id` (Int8) columns\n1. Create row in that table whenever a build transitions to `pending` state\n1. Remove row from that table whenever a build transitions from `pending` state to a different one\n1. Enable this change incrementally in the production environment to see the impact it might have on the transactions duration.\n\nDescoped items, moved to the next iteration: https://gitlab.com/gitlab-org/gitlab/-/issues/331417\n\n1. Select builds from that table, join with `ci_builds` table\n1. Backfill this table during a post deployment migration\n1. Enable this mechanism on production using feature flag toggle.\n\nConfidence: 99%","state":"closed","created_at":"2021-05-03T09:40:04.037Z","updated_at":"2021-06-08T08:54:58.155Z","closed_at":"2021-05-26T12:49:29.101Z","closed_by":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"labels":["Category:Continuous Integration","Engineering Allocation","devops::verify","group::pipeline execution","section::ops","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-27","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329764","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329764","notes":"https://gitlab.com/api/v4/projects/278964/issues/329764/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329764/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329764","relative":"#329764","full":"gitlab-org/gitlab#329764"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5909,"epic":{"id":261464,"iid":5909,"title":"Introduce additional database table to improve builds queuing mechanisms","url":"/groups/gitlab-org/-/epics/5909","group_id":9970,"human_readable_end_date":"Oct 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86376442,"iid":329763,"project_id":278964,"title":"Move information about CI minutes available to `ci_pending_builds`","description":"## Description\n\n[The big queuing SQL query](https://gitlab.com/groups/gitlab-org/-/epics/5909#note_565828942) looks for information about the amount of available CI minutes for a given context to decide if a build can be picked by shared runners.\n\nWe can denormalize this information and store in `ci_pending_builds` to accelerate the big query.\n\n## Proposal\n\nCheck if CI minutes are over the quota and store this information in `ci_pending_builds.minutes_exceeded`. Drop a build after an hour if there are no specific runners that can process such build (this is already done by `StuckCiJobsWorker`).\n\nRecalculate `minutes_exceeded` for pending builds when someone purchases minutes.\n\n### Implementation Plan \n\n1. Introduce new columns to `ci_pending_builds`:\n  - [x] `:minutes_exceeded, :boolean, null: false, default: false`\n  - [x] `:namespace_id, :bigint, null: false`\n2. Create new service to update `Ci:Quota \u0026 minutes_exceeded`\n  - [x] with [current codepath](https://gitlab.com/gitlab-org/gitlab/blob/6bf50afb64ef0738764521119c65c8832bc6db2f/ee/lib/ee/api/namespaces.rb#L33) \u0026 [2](https://gitlab.com/gitlab-org/gitlab/-/blob/2aa4fa13e7e64d3efa1d45dc9f41e5a4d8490e83/ee/app/services/clear_namespace_shared_runners_minutes_service.rb#L14)\n  - [x] with [future codepath](https://gitlab.com/gitlab-org/gitlab/blob/6bf50afb64ef0738764521119c65c8832bc6db2f/ee/app/services/ci/minutes/additional_packs/create_service.rb#L1)\n  - [x] Follow up and kick off new service to refresh ci minutes cache in [Ci::Minutes::AdditionaPacks::ChangeNamespaceService](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/services/ci/minutes/additional_packs/change_namespace_service.rb)\n3. [x] Verify we drop a build after an hour if there are no specific runners that can process it","state":"closed","created_at":"2021-05-03T09:39:03.147Z","updated_at":"2021-08-31T20:56:24.611Z","closed_at":"2021-08-31T20:56:24.581Z","closed_by":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"labels":["Category:Continuous Integration","Engineering Allocation","FY22::Q3","SaaS","Verify::P2","ci-decomposition","devops::verify","group::pipeline execution","missed:14.1","missed:14.2","pods::active","reliability","section::ops","workflow::in dev"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":24,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329763","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":6},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"6 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329763","notes":"https://gitlab.com/api/v4/projects/278964/issues/329763/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329763/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329763","relative":"#329763","full":"gitlab-org/gitlab#329763"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6588,"epic":{"id":328775,"iid":6588,"title":"Engineering Allocation: Improve SaaS Reliability in the Verify stage","url":"/groups/gitlab-org/-/epics/6588","group_id":9970,"human_readable_end_date":"Apr 8, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86376419,"iid":329762,"project_id":278964,"title":"Move information about using shared runners to `ci_pending_builds`","description":"## Description\n\n[The big queuing SQL query](https://gitlab.com/groups/gitlab-org/-/epics/5909#note_565828942) looks for information about if a build can be picked by shared runners, depending on whether the shared runners are enabled for its context or not, and other reasons.\n\nWe can denormalize this information and store in `ci_pending_builds` to accelerate the big query.","state":"closed","created_at":"2021-05-03T09:38:38.364Z","updated_at":"2021-08-31T20:58:48.429Z","closed_at":"2021-08-31T20:58:48.404Z","closed_by":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"labels":["Category:Continuous Integration","Engineering Allocation","FY22::Q3","SaaS","Verify::P2","ci-decomposition","devops::verify","group::pipeline execution","missed:14.1","missed:14.2","pods::active","reliability","section::ops","workflow::in dev"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"}],"author":{"id":263716,"username":"grzesiek","name":"Grzegorz Bizon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/263716/avatar.jpeg","web_url":"https://gitlab.com/grzesiek"},"type":"ISSUE","assignee":{"id":5251734,"username":"morefice","name":"Max Orefice","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0a910912e24727d7eef579cd047f7651?s=80\u0026d=identicon","web_url":"https://gitlab.com/morefice"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-07-19","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329762","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329762","notes":"https://gitlab.com/api/v4/projects/278964/issues/329762/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329762/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329762","relative":"#329762","full":"gitlab-org/gitlab#329762"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6588,"epic":{"id":328775,"iid":6588,"title":"Engineering Allocation: Improve SaaS Reliability in the Verify stage","url":"/groups/gitlab-org/-/epics/6588","group_id":9970,"human_readable_end_date":"Apr 8, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86374522,"iid":329759,"project_id":278964,"title":"Remove service instance variable from integrations contollers","description":"The following discussion from !60649 should be addressed:\n\n- [ ] @seanarnold started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60649#note_565518362): \n\n    \u003e It'd be nice to create a follow-up issue for this if one doesn't already exist","state":"closed","created_at":"2021-05-03T09:05:49.270Z","updated_at":"2022-11-22T19:42:21.663Z","closed_at":"2021-06-01T07:29:10.963Z","closed_by":{"id":1315742,"username":"arturoherrero","name":"Arturo Herrero","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1315742/avatar.png","web_url":"https://gitlab.com/arturoherrero"},"labels":["[deprecated] Accepting merge requests","automation:ml","automation:ml wrong","backend","devops::manage","group::ecosystem [DEPRECATED]","maintenance::refactor","section::dev","type::maintenance"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[],"author":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329759","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329759","notes":"https://gitlab.com/api/v4/projects/278964/issues/329759/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329759/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329759","relative":"#329759","full":"gitlab-org/gitlab#329759"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2504,"epic":{"id":18352,"iid":2504,"title":"Rename \"Services\" to \"Integrations\"","url":"/groups/gitlab-org/-/epics/2504","group_id":9970},"iteration":null,"health_status":null},{"id":86372954,"iid":329758,"project_id":278964,"title":"When creating a duplicate fork an unclear error message is displayed.","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\nWhen a project is attempted to be re-forked with the same name, an unclear error message is displayed.\n\nThis issue was part of the [2021-05-03 In some scenarios users receive errors for forking projects](https://gitlab.com/gitlab-com/gl-infra/production/-/issues/4452) production incident.\n\nThe `fork_project_form` feature flag was disabled in production, and then the behaviour is the project cannot be re-forked, and it is not possible to specify a new fork name. Attempting to re-fork takes the user to the existing fork.\n\n\n### Steps to reproduce\n\n- Fork a project into a user namespace, eg: https://gitlab.com/gitlab-com/runbooks\n- Fork the project a second time, error message is displayed but it is not clear what the error is\n- It is possible to fork the project with a new name\n\n\n### Example Project\n\nhttps://gitlab.com/sean_carroll/runbooks-new-2\n\n\n### What is the current *bug* behavior?\n\nUnclear error `409`. Please see screenshots below.\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n![Screenshot_2021-05-03_at_09.46.27](/uploads/77b89d196a13233bd0ad50cc55ad6eae/Screenshot_2021-05-03_at_09.46.27.png)\n\n![Screenshot_2021-05-03_at_09.25.11](/uploads/2c4f6ddcda150ad0a1a1575f85636a82/Screenshot_2021-05-03_at_09.25.11.png)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-05-03T08:43:05.936Z","updated_at":"2021-06-18T07:06:53.633Z","closed_at":"2021-06-02T06:46:19.165Z","closed_by":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"labels":["Category:Source Code Management","Deliverable","corrective action","devops::create","frontend","group::source code","priority::2","section::dev","severity::2","type::bug"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"}],"author":{"id":4391348,"username":"sean_carroll","name":"Sean Carroll","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4391348/avatar.png","web_url":"https://gitlab.com/sean_carroll"},"type":"ISSUE","assignee":{"id":2819375,"username":"jerasmus","name":"Jacques Erasmus","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2819375/avatar.png","web_url":"https://gitlab.com/jerasmus"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329758","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329758","notes":"https://gitlab.com/api/v4/projects/278964/issues/329758/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329758/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329758","relative":"#329758","full":"gitlab-org/gitlab#329758"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86365946,"iid":329752,"project_id":278964,"title":"Use push method on Audit::EventQueue in Auditable module","description":"The following discussion from !60591 should be addressed:\n\n- [ ] @rspeicher started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60591#note_565018178):  (+1 comment)\n\n    \u003e Semi-unrelated, but why does `push_audit_event` use `current \u003c\u003c event` rather than [`push(event)`](https://gitlab.com/gitlab-org/gitlab/blob/7d5249856cba50d72c48d8c617da965693871f1c/ee/lib/gitlab/audit/event_queue.rb#L16-18)?","state":"closed","created_at":"2021-05-03T06:52:50.074Z","updated_at":"2021-10-28T13:57:06.535Z","closed_at":"2021-05-06T08:08:17.966Z","closed_by":{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"},"labels":["backend","devops::manage","group::compliance","section::dev","type::maintenance"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"}],"author":{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"},"type":"ISSUE","assignee":{"id":398752,"username":"tancnle","name":"Tan Le","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/398752/avatar.png","web_url":"https://gitlab.com/tancnle"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329752","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329752","notes":"https://gitlab.com/api/v4/projects/278964/issues/329752/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329752/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329752","relative":"#329752","full":"gitlab-org/gitlab#329752"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86361806,"iid":329751,"project_id":278964,"title":"Cannot create forks. No namespace to select","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nI'm not able to create forks. No options appear in the required namespace field\n\n### Steps to reproduce\n\n1. Click the button to create a new fork of a project, e.g.: https://gitlab.com/gitlab-org/gitlab/-/forks/new\n1. Try to select a namespace\n\n### Example Project\n\nhttps://gitlab.com/gitlab-org/gitlab/-/forks/new\n\n### What is the current *bug* behavior?\n\nNo namespaces appear\n\n### What is the expected *correct* behavior?\n\nValid namespaces listed, including the current user's namespace.\n\n### Relevant logs and/or screenshots\n\n![fork](/uploads/41c61c0b23435457c5989fbb261a2d9e/fork.gif)\n\nThe browser console shows:\n\n```\nnew.json:1 Failed to load resource: the server responded with a status of 500 ()\ncreateError.js:16 Uncaught (in promise) Error: Request failed with status code 500\n    at t.exports (createError.js:16)\n    at t.exports (settle.js:17)\n    at XMLHttpRequest.p.onreadystatechange (xhr.js:69)\n    at XMLHttpRequest.r (helpers.js:72)\nt.exports @ createError.js:16\nt.exports @ settle.js:17\np.onreadystatechange @ xhr.js:69\nr @ helpers.js:72\n```\n\n[Kibana logs show `Rack::Timeout::RequestTimeoutException`](https://log.gprd.gitlab.net/app/discover#/doc/7092c4e2-4eb5-46f2-8305-a7da2edad090/pubsub-rails-inf-gprd-004933?id=04yjMHkBE8luX0WLNpGv) (internal)\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2021-05-03T04:59:45.319Z","updated_at":"2021-11-19T13:10:23.165Z","closed_at":"2021-06-10T11:42:41.303Z","closed_by":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"labels":["Category:Source Code Management","Deliverable","backend","corrective action","devops::create","forking","frontend","frontend-weight::1","group::source code","priority::2","section::dev","severity::2","type::bug","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":655908,"username":"mlapierre","name":"Mark Lapierre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/655908/avatar.png","web_url":"https://gitlab.com/mlapierre"},"type":"ISSUE","assignee":{"id":421631,"username":"vyaklushin","name":"Vasilii Iakliushin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/421631/avatar.png","web_url":"https://gitlab.com/vyaklushin"},"user_notes_count":34,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329751","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329751","notes":"https://gitlab.com/api/v4/projects/278964/issues/329751/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329751/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329751","relative":"#329751","full":"gitlab-org/gitlab#329751"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1421,"epic":{"id":8068,"iid":1421,"title":"⑂ Forking Improvements","url":"/groups/gitlab-org/-/epics/1421","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":86358091,"iid":329747,"project_id":278964,"title":"Group SAML SSO redirect to group page broken if user has 2FA enabled","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nIf a user signs into GitLab via their Group SAML SSO page, they are redirected to their identity provider for authentication. Once authentication is completed, the user is then redirected to their group page.\n\nIf a user has GitLab 2FA enabled, they are redirected to the Two Factor authentication page first. Once they have completed the challenge, the user is then redirected back to `https://gitlab.com` and not their group page `https://gitlab.com/group`.\n\n### Steps to reproduce\n\n1. On GitLab.com, navigate to the SAML SSO page for a group. Click the **Sign in with Single Sign-On** button.\n1. Log into your identity provider with a GitLab user that has GitLab 2FA enabled. Once you are logged into the IDP, you should be redirected to the **Two Factor authentication** page in GitLab.\n1. Complete the 2FA challenge. Afterwards, GitLab will redirect the user to `https://gitlab.com` and not `https://gitlab.com/group`.\n\n### Example Group\n\nTested with `https://gitlab.com/anton-saml`\n\n### What is the current *bug* behavior?\n\nUsers with 2FA enabled are redirected to `https://gitlab.com` if they have logged in via the GitLab Group SAML SSO page.\n\n### What is the expected *correct* behavior?\n\nUsers with 2FA enabled should be redirected to their group page `https://gitlab.com/group` if they have logged in via the GitLab Group SAML SSO page.\n\n### Relevant logs and/or screenshots\n\n\nSee the following videos below for logging into the `anton-saml` group. .\n\n**When 2FA is not enabled (expected behaviour):**\n\n![expected-behaviour](/uploads/da46427d2cdaceec8c07991f50580dd2/expected-behaviour.mov)\n\n**When 2FA is enabled (broken redirect):**\n\n![2fa-enabled-redirect-broken](/uploads/5607cd8a3c924df9ee077965cd96d42a/2fa-enabled-redirect-broken.mov)\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-05-03T02:04:49.647Z","updated_at":"2022-07-11T03:03:15.168Z","closed_at":"2022-07-11T03:03:15.159Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["2FA","auto closed","devops::manage","group::authentication and authorization","reproduced on GitLab.com","saml","section::dev","severity::4","stale","type::bug","vintage","workflow::ready for development"],"milestone":null,"assignees":[],"author":{"id":4262215,"username":"anton","name":"Anton Smith","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4262215/avatar.png","web_url":"https://gitlab.com/anton"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329747","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329747","notes":"https://gitlab.com/api/v4/projects/278964/issues/329747/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329747/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329747","relative":"#329747","full":"gitlab-org/gitlab#329747"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86342487,"iid":329734,"project_id":278964,"title":"UI inconsistency on status-box in issuable headers on mobile","description":"### Summary\n\nUI inconsistency on status-box in issuable headers between on mobile and on PC.\n\n### What is the current *bug* behavior?\n\n![status-box-mobile-as-is](/uploads/f82ba9d3c9e90b2884a66365279f9e23/status-box-mobile-as-is.png)\n\n### What is the expected *correct* behavior?\n\n![status-box-mobile-to-be](/uploads/143567c995bd6c1460f34836c5b2e66e/status-box-mobile-to-be.png)\n\ncf. ![status-box-pc](/uploads/bc654ebed7f4168edc9e15797cb4e89c/status-box-pc.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com (13.12-pre)\n\n### Possible fixes\n\nJust fix it.\n\n### Ref.\n\n- !44730\n- gitlab-org/gitlab-foss!19832","state":"closed","created_at":"2021-05-02T12:45:21.002Z","updated_at":"2021-05-18T03:05:16.266Z","closed_at":"2021-05-10T03:28:04.829Z","closed_by":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"labels":["CSS cleanup","CSS refactor","Community contribution","UI polish","frontend","maintenance::refactor","type::bug","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"}],"author":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"type":"ISSUE","assignee":{"id":100770,"username":"tnir","name":"Takuya Noguchi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/100770/canstock6553672_288.png","web_url":"https://gitlab.com/tnir"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-05","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329734","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329734","notes":"https://gitlab.com/api/v4/projects/278964/issues/329734/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329734/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329734","relative":"#329734","full":"gitlab-org/gitlab#329734"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86328958,"iid":329728,"project_id":278964,"title":"CI/CD settings on gitlab.com free plan still references 2000 minutes","description":"### Summary\n\nWhen looking at the CI/CD settings of a project on gitlab.com, the shared runner settings still mention 2000 minutes instead of 400:\n\n\n### Steps to reproduce\n\n* Navigate to CI/CD settings while on a free plan.\n* Observe the copy under the shared runners settings.\n* ???\n* Profit.\n\n### What is the current *bug* behavior?\n\nThe settings say you get 2000 free minutes.\n\n### What is the expected *correct* behavior?\n\nThe settings should say that you get 400 free minutes.\n\n### Relevant logs and/or screenshots\n\n![Screenshot_2021-05-01_at_10.10.40_PM](/uploads/b7bf73224dbdb94238158476fafeb95d/Screenshot_2021-05-01_at_10.10.40_PM.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n### Proposal \n\n![image](/uploads/c14fdc422d953b6aea614b9d12af9d8b/image.png)","state":"closed","created_at":"2021-05-01T20:18:12.899Z","updated_at":"2021-06-18T11:58:37.464Z","closed_at":"2021-05-20T18:25:45.428Z","closed_by":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"labels":["CI minutes","Category:Continuous Integration","UX","devops::verify","frontend","group::pipeline execution","priority::3","section::ops","severity::3","type::bug","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"}],"author":{"id":2396919,"username":"rsheasby","name":"Ryan David Sheasby","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2396919/avatar.png","web_url":"https://gitlab.com/rsheasby"},"type":"ISSUE","assignee":{"id":829774,"username":"jivanvl","name":"Jose Ivan Vargas","state":"active","avatar_url":"https://secure.gravatar.com/avatar/730cc1b85a20f2a3891829f7aa198972?s=80\u0026d=identicon","web_url":"https://gitlab.com/jivanvl"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329728","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329728","notes":"https://gitlab.com/api/v4/projects/278964/issues/329728/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329728/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329728","relative":"#329728","full":"gitlab-org/gitlab#329728"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86305293,"iid":329702,"project_id":278964,"title":"Implement pluralization logic for single stat metrics","description":"### Summary\n\nWe recently implemented single stat metrics in VSA. There doesn't appear to be any logic for making the unit of measurement singular when the count is 1.\n\n![Screen_Shot_2021-04-30_at_2.00.25_PM](/uploads/fbb854f00de55872ff434b03862f57f9/Screen_Shot_2021-04-30_at_2.00.25_PM.png)\n\n### Proposal\n\nMake sure that the unit of measurement (days, etc) is displayed in singular if the count is 1. E.g. `1 day` instead of `1 days`.","state":"closed","created_at":"2021-04-30T21:05:47.016Z","updated_at":"2021-05-31T15:14:07.377Z","closed_at":"2021-05-31T15:14:07.324Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["devops::manage","frontend","group::optimize","priority::4","section::dev","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":23,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329702","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329702","notes":"https://gitlab.com/api/v4/projects/278964/issues/329702/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329702/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329702","relative":"#329702","full":"gitlab-org/gitlab#329702"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86304324,"iid":329698,"project_id":278964,"title":"Cleaning up container scanning template based on customer issues","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nThere has been a couple of issues with customers having difficulty to set the proper variables in relation to container scanning. Depending on the amount of information that they are able to provide it becomes a non-straight forward situation on how to support and help them.\n\nIn addition to that, the current number of variables makes various sessions of our documentation a long read.\n\nAs we approach a release with breaking changes: (1) removing klar, (2) making trivy the default scanner, (3) adding grype as an optional scanner, (4) updating Container-Scanning.gitlab-ci.yml to support the previous points and some other things. \n\nIt seems that we are in a good position to simplify the template in regards to the usage of the scanner by adding a single source of truth. This would reduce the amount of variables to be customized which would imply in a simplification of the documentation, troubleshooting and somehow less magic :sunglasses:  \n\nBefore digging too deep into it I am considering something like the following:\n\n```diff\ndiff --git a/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml b/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml\nindex c628e30b2c7..614762051af 100644\n--- a/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml\n+++ b/lib/gitlab/ci/templates/Security/Container-Scanning.gitlab-ci.yml\n@@ -1,60 +1,28 @@\n # Read more about this feature here: https://docs.gitlab.com/ee/user/application_security/container_scanning/\n\n variables:\n-  # Setting this variable will affect all Security templates\n-  # (SAST, Dependency Scanning, ...)\n-  SECURE_ANALYZERS_PREFIX: \"registry.gitlab.com/gitlab-org/security-products/analyzers\"\n-  CS_MAJOR_VERSION: 3\n+  # CS_ANALYZER_IMAGE is an undocumented variable used internally to allow QA to\n+  # override the analyzer image with a custom value. This may be subject to change or\n+  # breakage across GitLab releases.\n+  CS_ANALYZER_IMAGE: \"registry.gitlab.com/gitlab-org/security-products/analyzers/container-scanning:4\"\n+  # Override the GIT_STRATEGY variable in your `.gitlab-ci.yml` file and set it to `fetch` if you want to provide a `vulnerability-allowlist.yml`\n+  # file. See https://docs.gitlab.com/ee/user/application_security/container_scanning/index.html#overriding-the-container-scanning-template\n+  # for details\n+  GIT_STRATEGY: none\n\n-.cs_common:\n+container_scanning:\n   stage: test\n   image: \"$CS_ANALYZER_IMAGE\"\n-  variables:\n-    # Override the GIT_STRATEGY variable in your `.gitlab-ci.yml` file and set it to `fetch` if you want to provide a `clair-whitelist.yml`\n-    # file. See https://docs.gitlab.com/ee/user/application_security/container_scanning/index.html#overriding-the-container-scanning-template\n-    # for details\n-    GIT_STRATEGY: none\n-    # CS_ANALYZER_IMAGE is an undocumented variable used internally to allow QA to\n-    # override the analyzer image with a custom value. This may be subject to change or\n-    # breakage across GitLab releases.\n-    CS_ANALYZER_IMAGE: $SECURE_ANALYZERS_PREFIX/$CS_PROJECT:$CS_MAJOR_VERSION\n-  allow_failure: true\n-  artifacts:\n-    reports:\n-      container_scanning: gl-container-scanning-report.json\n-  dependencies: []\n-\n-container_scanning:\n-  extends: .cs_common\n-  variables:\n-    # By default, use the latest clair vulnerabilities database, however, allow it to be overridden here with a specific image\n-    # to enable container scanning to run offline, or to provide a consistent list of vulnerabilities for integration testing purposes\n-    CLAIR_DB_IMAGE_TAG: \"latest\"\n-    CLAIR_DB_IMAGE: \"$SECURE_ANALYZERS_PREFIX/clair-vulnerabilities-db:$CLAIR_DB_IMAGE_TAG\"\n-    CS_PROJECT: 'klar'\n-  services:\n-    - name: $CLAIR_DB_IMAGE\n-      alias: clair-vulnerabilities-db\n-  script:\n-    - /analyzer run\n-  rules:\n-    - if: $CONTAINER_SCANNING_DISABLED\n-      when: never\n-    - if: $CI_COMMIT_BRANCH \u0026\u0026\n-          $GITLAB_FEATURES =~ /\\bcontainer_scanning\\b/ \u0026\u0026\n-          $CS_MAJOR_VERSION =~ /^[0-3]$/\n-\n-container_scanning_new:\n-  extends: .cs_common\n-  variables:\n-    CS_PROJECT: 'container-scanning'\n   script:\n     - gtcs scan\n   artifacts:\n     paths: [gl-container-scanning-report.json]\n+    reports:\n+      container_scanning: gl-container-scanning-report.json\n+  allow_failure: true\n+  dependencies: []\n   rules:\n     - if: $CONTAINER_SCANNING_DISABLED\n       when: never\n     - if: $CI_COMMIT_BRANCH \u0026\u0026\n-          $GITLAB_FEATURES =~ /\\bcontainer_scanning\\b/ \u0026\u0026\n-          $CS_MAJOR_VERSION !~ /^[0-3]$/\n+          $GITLAB_FEATURES =~ /\\bcontainer_scanning\\b/\n```\n\n\nIt is also desired to change GCS to run on merge request only pipeline as described [here](https://gitlab.com/gitlab-org/gitlab/-/issues/217668)\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] Refactor container scanning template to a single job based mostly on `CS_ANALYZER_IMAGE`\n- [x] `GIT_STRATEGY` should be kept for its default value `none` and it is relation to other features (remediation, allowlist)\n- [x] `CS_ANALYZER_IMAGE` to be defaulted to `\"registry.gitlab.com/gitlab-org/security-products/analyzers/container-scanning:4\"`\n- [x] Update documentation\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-04-30T20:29:13.800Z","updated_at":"2021-06-09T23:22:03.810Z","closed_at":"2021-06-09T23:22:03.775Z","closed_by":{"id":480804,"username":"thiagocsf","name":"Thiago Figueiró","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/480804/avatar.png","web_url":"https://gitlab.com/thiagocsf"},"labels":["Category:Container Scanning","devops::govern","group::security policies","section::sec","workflow::in dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":null,"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329698","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329698","notes":"https://gitlab.com/api/v4/projects/278964/issues/329698/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329698/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329698","relative":"#329698","full":"gitlab-org/gitlab#329698"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5462,"epic":{"id":213052,"iid":5462,"title":"Follow-on Improvements to Trivy Integration","url":"/groups/gitlab-org/-/epics/5462","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86303381,"iid":329697,"project_id":278964,"title":"[Feature flag] Enable Geo replication of LFS objects by the new framework","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## Feature\n\nThis feature uses the `:geo_lfs_object_replication` feature flag!\n\n\u003c!-- Short description of what the feature is about and link to relevant other issues. --\u003e\n\n- https://gitlab.com/gitlab-org/gitlab/-/issues/276696\n\n## Owners\n\n- Team: ~\"group::geo\" \n- Most appropriate slack channel to reach out to: `#g_geo`\n- Best individual to reach out to: @ibaum\n- PM: @fzimmer \n\n## Stakeholders\n\n\u003c!--\nAre there any other stages or teams involved that need to be kept in the loop?\n\n- Name of a PM\n- The Support Team\n- The Delivery Team\n--\u003e\n\n## The Rollout Plan\n\n- There is no rollout on production gitlab.com since Geo is not enabled there\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? Sentry errors reports can also be useful to review --\u003e\n\n## Expectations\n\n### What are we expecting to happen?\n\n\u003c!-- Describe the expected outcome when rolling out this feature --\u003e\n\nWhen an LFS object is created, there should be less delay before Geo secondary sites make a request to download it. Otherwise, no change.\n\n### What might happen if this goes wrong?\n\n\u003c!-- Should the feature flag be turned off? Any MRs that need to be rolled back? Communication that needs to happen? What are some things you can think of that could go wrong - data loss or broken pages? --\u003e\n\nIf something goes wrong, then:\n\n- Contact #g_geo in Slack\n- Turn off the feature flag\n\nSome things that could go wrong:\n\n- LFS objects are not replicated to Geo secondary sites\n- Progress bar for LFS object replication on /admin/geo/nodes shows less than near 100% synced\n- Sentry errors on primary or secondary sites\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\nThere should be no impact on production gitlab.com.\n\nOn staging, check:\n\n* https://sentry.gitlab.net/gitlab/staginggitlabcom/\n* https://sentry.gitlab.net/gitlab/geo-staging-gitlabcom/\n* https://staging.gitlab.com/admin/geo/nodes\n\n## Rollout Timeline\n\n\u003c!-- Please check which steps are needed and remove those which don't apply --\u003e\n\n**Initial Rollout**\n\n*Preparation Phase*\n- [x] Enable on staging (`/chatops run feature set geo_lfs_object_replication true --staging`)\n\n- [x] Test on staging\n\n- [x] Test on GCP, e.g. using GET 3k + 3k Geo deployments\n\n- [x] Ensure that documentation has been updated ([More info](https://docs.gitlab.com/ee/development/documentation/feature_flags.html#features-that-became-enabled-by-default))\n\n- [-] Announce on the issue an estimated time this will be enabled on GitLab.com\n\n- [-] Check if the feature flag change needs to be accompagnied with a\n      [change management\n      issue](https://about.gitlab.com/handbook/engineering/infrastructure/change-management/#feature-flags-and-the-change-management-process). Cross\n      link the issue here if it does.\n\n*Partial Rollout Phase*\n- [-] Enable on GitLab.com for individual groups/projects listed above and verify behaviour (`/chatops run feature set --project=gitlab-org/gitlab feature_name true`)\n\n- [-] Verify behaviour (See Beta Groups) and add details with screenshots as a comment on this issue\n\n- [-] If it is possible to perform an incremental rollout, this should be preferred. Proposed increments are: `10%`, `50%`, `100%`. Proposed minimum time between increments is 15 minutes.\n  - When setting percentages, make sure that the feature works correctly between feature checks. See https://gitlab.com/gitlab-org/gitlab/-/issues/327117 for more information\n  - For actor-based rollout: `/chatops run feature set feature_name 10 --actors`\n  - For time-based rollout: `/chatops run feature set feature_name 10`\n\n- [x] Make the feature flag enabled by default i.e. Change `default_enabled` to `true`\n\n- [ ] Cross post chatops slack command to `#support_gitlab-com` ([more guidance when this is necessary in the dev docs](https://docs.gitlab.com/ee/development/feature_flags/controls.html#where-to-run-commands)) and in your team channel\n\n\n**Cleanup**\n\nThis is an __important__ phase, that should be either done in the next Milestone or as soon as possible. For the cleanup phase, please follow our documentation on how to  [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up).\n\n\u003c!-- The checklist here is to keep track of it's status for stakeholders --\u003e\n- [ ] Announce on the issue that the flag has been enabled\n\n- [ ] Remove `:geo_lfs_object_replication` feature flag\n    - [ ] Remove all references to the feature flag from the codebase\n    - [ ] Remove the YAML definitions for the feature from the repository\n    - [ ] Create a Changelog Entry\n\n- [ ] Clean up the feature flag from all environments by running this chatops command in `#production` channel `/chatops run feature delete geo_lfs_object_replication`.\n\n**Final Step**\n\n- [ ] Close this rollout issue for the feature flag after the feature flag is removed from the codebase.\n\n## Rollback Steps\n\n- [ ] This feature can be disabled by running the following Chatops command:\n\n```\n/chatops run feature set geo_lfs_object_replication false\n```","state":"closed","created_at":"2021-04-30T19:59:14.816Z","updated_at":"2021-09-08T22:14:57.735Z","closed_at":"2021-05-14T14:24:57.925Z","closed_by":{"id":787914,"username":"ibaum","name":"Ian Baum","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7c508dc85ddd5049564a95662311543b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ibaum"},"labels":["Enterprise Edition","GitLab Premium","devops::systems","feature flag","group::geo","section::enablement","workflow::in review"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":787914,"username":"ibaum","name":"Ian Baum","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7c508dc85ddd5049564a95662311543b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ibaum"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":787914,"username":"ibaum","name":"Ian Baum","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7c508dc85ddd5049564a95662311543b?s=80\u0026d=identicon","web_url":"https://gitlab.com/ibaum"},"user_notes_count":20,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329697","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":14,"completed_count":5},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 14 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329697","notes":"https://gitlab.com/api/v4/projects/278964/issues/329697/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329697/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329697","relative":"#329697","full":"gitlab-org/gitlab#329697"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3113,"epic":{"id":43808,"iid":3113,"title":"Geo: Move LFS files to Self-Service Framework","url":"/groups/gitlab-org/-/epics/3113","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86303003,"iid":329694,"project_id":278964,"title":"Refactor code in order to remove rubocop exceptions","description":"\u003c!--\nImplementation issues are used break-up a large piece of work into small, discrete tasks that can\nmove independently through the build workflow steps. They're typically used to populate a Feature\nEpic. Once created, an implementation issue is usually refined in order to populate and review the\nimplementation plan and weight.\nExample workflow: https://about.gitlab.com/handbook/engineering/development/threat-management/planning/diagram.html#plan\n--\u003e\n\n## Why are we doing this work\n\u003c!--\nA brief explanation of the why, not the what or how. Assume the reader doesn't know the\nbackground and won't have time to dig-up information from comment threads.\n--\u003e\n\nThis [MR](https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/merge_requests/19) adds a couple of rubocop exceptions (also remove `allow_failure`) in order to avoid having more violations into the code.\n\nA next step is required in order to remove those exceptions from the code, either bit by bit or as a batch.\n\n\n## Relevant links\n\u003c!--\nInformation that the developer might need to refer to when implementing the issue.\n\n- [Design Issue](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e)\n  - [Design 1](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n  - [Design 2](https://gitlab.com/gitlab-org/gitlab/-/issues/\u003cid\u003e/designs/\u003cimage\u003e.png)\n- [Similar implementation](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/\u003cid\u003e)\n--\u003e\n\n\n## Non-functional requirements\n\u003c!--\nAdd details for required items and delete others.\n--\u003e\n\n- [ ] Documentation:\n- [ ] Feature flag:\n- [ ] Performance:\n- [ ] Testing:\n\n\n## Implementation plan\n\u003c!--\nSteps and the parts of the code that will need to get updated. The plan can also\ncall-out responsibilities for other team members or teams.\n\ne.g.:\n\n- [ ] ~frontend Step 1\n  - [ ] `@person` Step 1a\n- [ ] ~frontend Step 2\n\n--\u003e\n\n- [x] Remove rubocop exceptions mostly added in this [MR](https://gitlab.com/gitlab-org/security-products/analyzers/container-scanning/-/merge_requests/19)\n\n\u003c!--\nWorkflow and other relevant labels\n\n# ~\"group::\" ~\"Category:\" ~\"GitLab Ultimate\"\nOther settings you might want to include when creating the issue.\n\n# /assign @\n# /epic \u0026\n--\u003e","state":"closed","created_at":"2021-04-30T19:45:58.449Z","updated_at":"2021-06-10T05:22:20.522Z","closed_at":"2021-06-10T05:22:20.508Z","closed_by":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"labels":["Category:Container Scanning","devops::govern","group::security policies","section::sec","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"}],"author":{"id":4906322,"username":"zmartins","name":"Zamir Martins","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4906322/avatar.png","web_url":"https://gitlab.com/zmartins"},"type":"ISSUE","assignee":{"id":5535431,"username":"mparuszewski","name":"Alan (Maciej) Paruszewski","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5535431/avatar.png","web_url":"https://gitlab.com/mparuszewski"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329694","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329694","notes":"https://gitlab.com/api/v4/projects/278964/issues/329694/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329694/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329694","relative":"#329694","full":"gitlab-org/gitlab#329694"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5462,"epic":{"id":213052,"iid":5462,"title":"Follow-on Improvements to Trivy Integration","url":"/groups/gitlab-org/-/epics/5462","group_id":9970,"human_readable_end_date":"Jul 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86300475,"iid":329690,"project_id":278964,"title":"Web IDE cannot open branches containing a '|' character","description":"### Summary\n\nThe WebIDE will fail to load a branch that contains a `|` in its name, displaying error `Branch \u003cSTART_NAME\u003e%7\u003cEND_NAME\u003e was not found in this project's repository.`\n\nThe problem can be worked around by viewing an file and then starting the WebIDE from there.\n\nThis is very similar to #35473, which occurred with `#` character.\n\n### Steps to reproduce\n\n1. Create a branch names `yes|no`\n1. Switch to this branch on the main project page\n1. Click the WebIDE button\n  - The WebIDe will start to load, then fail with the error above\n\n### Example Project\n\nhttps://gitlab.com/wchandler/branch-name-pipe\n\n### What is the current *bug* behavior?\n\nBranches with a pipe in their name cannot be loaded\n\n### What is the expected *correct* behavior?\n\nAll branches can be loaded in the WebIDE\n\n### Relevant logs and/or screenshots\n\n![Screen_Shot_2021-04-30_at_2.26.40_PM](/uploads/a0beaac05b0612e3f7c935142fa99ce2/Screen_Shot_2021-04-30_at_2.26.40_PM.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\nSystem information\nSystem:\nProxy:          no\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.7.2p137\nGem Version:    3.1.4\nBundler Version:2.1.4\nRake Version:   13.0.3\nRedis Version:  6.0.10\nGit Version:    2.31.1\nSidekiq Version:5.2.9\nGo Version:     unknown\n\nGitLab information\nVersion:        13.11.1-ee\nRevision:       557bbaae5b1\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     PostgreSQL\nDB Version:     12.6\nElasticsearch:  yes\nGeo:            no\nUsing LDAP:     no\nUsing Omniauth: yes\nOmniauth Providers:\n\nGitLab Shell\nVersion:        13.17.0\nRepository storage paths:\n- default:      /var/opt/gitlab/git-data/repositories\n- remote:       /var/opt/gitlab/git-data/repositories\n- nfs:  /mnt/git-data/repositories\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\nGit:            /opt/gitlab/embedded/bin/git\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 13.17.0 ? ... OK (13.17.0)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nInternal API available: OK\nRedis available via internal API: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\nremote ... OK\nnfs ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes (cluster/worker) ... 1/1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... LDAP is disabled in config/gitlab.yml\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ...\n1/400 ... yes\n1/401 ... yes\n1/402 ... yes\n1/403 ... yes\n25/404 ... yes\n1/407 ... yes\n25/408 ... yes\n1/411 ... yes\n1/416 ... yes\n1/417 ... yes\n1/419 ... yes\n1/421 ... yes\n1/422 ... yes\n11/423 ... yes\n8/424 ... yes\n1/425 ... yes\n1/426 ... yes\n1/427 ... yes\n1/428 ... yes\n1/429 ... yes\n1/430 ... yes\n1/431 ... yes\n1/432 ... yes\n1/433 ... yes\n1/434 ... yes\n1/435 ... yes\n1/436 ... yes\n1/437 ... yes\n3/438 ... yes\n4/439 ... yes\n1/440 ... yes\n1/441 ... yes\n3/442 ... yes\n3/443 ... yes\n47/444 ... yes\n46/445 ... yes\n1/446 ... yes\n46/447 ... yes\n46/448 ... yes\n46/449 ... yes\n46/450 ... yes\n46/451 ... yes\n46/452 ... yes\n46/453 ... yes\n46/454 ... yes\n46/455 ... yes\n46/456 ... yes\n46/457 ... yes\n1/458 ... yes\n13/459 ... yes\n20/460 ... yes\nRedis version \u003e= 5.0.0? ... yes\nRuby version \u003e= 2.7.2 ? ... yes (2.7.2)\nGit version \u003e= 2.31.0 ? ... yes (2.31.1)\nGit user has default SSH configuration? ... yes\nActive users: ... 12\nIs authorized keys file accessible? ... yes\nElasticsearch version 7.x (6.4 - 6.x deprecated to be removed in 13.8)? ... yes (7.9.1)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\n\n\u003c/pre\u003e\n\u003c/details\u003e","state":"closed","created_at":"2021-04-30T18:34:24.545Z","updated_at":"2021-08-13T15:04:46.640Z","closed_at":"2021-08-05T15:19:39.203Z","closed_by":{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"},"labels":["Category:Web IDE","approaching-SLO","customer","devops::create","frontend","group::editor","missed-SLO","priority::2","section::dev","severity::2","type::bug","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"}],"author":{"id":2578846,"username":"wchandler","name":"Will Chandler","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8b92738249753faee7055e021f8221?s=80\u0026d=identicon","web_url":"https://gitlab.com/wchandler"},"type":"ISSUE","assignee":{"id":4985794,"username":"cwoolley-gitlab","name":"Chad Woolley","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4cf06f1fc667817854991b558103a9e2?s=80\u0026d=identicon","web_url":"https://gitlab.com/cwoolley-gitlab"},"user_notes_count":14,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329690","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329690","notes":"https://gitlab.com/api/v4/projects/278964/issues/329690/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329690/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329690","relative":"#329690","full":"gitlab-org/gitlab#329690"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86300126,"iid":329688,"project_id":278964,"title":"Geo: Remove after_destroy :log_geo_deleted_event where FastDestroyAll is used","description":"After https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60644 and https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60391 are merged, we should remove this dead code `after_destroy :log_geo_deleted_event` if it wasn't already removed:\n\n- [ ] https://gitlab.com/gitlab-org/gitlab/-/blob/4ea44cb1920463107d230ff2dd1a619ace925f15/ee/app/models/ee/ci/job_artifact.rb#L13\n\n(We know it's dead because `include FastDestroyAll` causes `destroy` and `destroy_all` calls to raise errors.)","state":"closed","created_at":"2021-04-30T18:21:07.453Z","updated_at":"2021-08-09T11:04:56.587Z","closed_at":"2021-07-28T15:22:04.624Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Enterprise Edition","GitLab Premium","devops::systems","group::geo","maintenance::refactor","section::enablement"],"milestone":null,"assignees":[],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329688","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":0,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329688","notes":"https://gitlab.com/api/v4/projects/278964/issues/329688/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329688/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329688","relative":"#329688","full":"gitlab-org/gitlab#329688"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86296022,"iid":329672,"project_id":278964,"title":"Geo: Add Geo-secondary-specific routing in Workhorse","description":"## To do\n\n* [x] Determine where in the Workhorse code we should implement Geo-secondary-specific routing\n* [x] Implement Geo-secondary-specific routing\n* [x] Make Workhorse use Geo-secondary-specific routing if `geo_proxy_url` is present in the `/api/v4/geo/proxy` response\n* [x] Tests\n\n### Where does this fit in [the epic](https://gitlab.com/groups/gitlab-org/-/epics/5914)?\n\n| Description | Issue | |\n| --- | --- | --- |\n| Add endpoint `/api/v4/geo/proxy` | https://gitlab.com/gitlab-org/gitlab/-/issues/324664 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63343 |\n| Determine if this is a Geo Proxy by calling `/api/v4/geo/proxy` | https://gitlab.com/gitlab-org/gitlab/-/issues/329670 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60769 |\n| If this is a Geo Proxy, then use the Geo Proxy routing table | https://gitlab.com/gitlab-org/gitlab/-/issues/329672 **You are here** | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63321 |\n| Before we can remove the environment variable, we must add caching of the result of the request | https://gitlab.com/gitlab-org/gitlab/-/issues/329671 | |","state":"closed","created_at":"2021-04-30T16:35:54.962Z","updated_at":"2021-07-27T18:52:06.428Z","closed_at":"2021-07-23T16:50:07.554Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["devops::systems","feature::addition","group::geo","missed:13.12","section::enablement","type::feature","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329672","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329672","notes":"https://gitlab.com/api/v4/projects/278964/issues/329672/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329672/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329672","relative":"#329672","full":"gitlab-org/gitlab#329672"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5914,"epic":{"id":262783,"iid":5914,"title":"Geo: Secondary sites proxy to primary site","url":"/groups/gitlab-org/-/epics/5914","group_id":9970,"human_readable_end_date":"Jun 19, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86295999,"iid":329671,"project_id":278964,"title":"Geo: Cache `/api/v4/internal/geo_proxy` in Workhorse","description":"## To do\n\n* [x] Find out how `gitlab-pages` caches requests to the Rails API\n  * Note that we can have concurrent requests come in at the moment that a cache expires. We don't want them all to do the internal API call.\n* [x] Cache the request to `/api/v4/geo/proxy`\n* [-] ~~Remove `GEO_SECONDARY_PROXY` environment variable. (Note that the endpoint is still behind the feature flag `geo_secondary_proxy`)~~ =\u003e We should do this step after validation. I added it to https://gitlab.com/gitlab-org/gitlab/-/issues/325732\n* [x] Tests\n\n### Where does this fit in [the epic](https://gitlab.com/groups/gitlab-org/-/epics/5914)?\n\n| Description | Issue | MR(s) |\n| --- | --- | --- |\n| Add endpoint `/api/v4/geo/proxy` | https://gitlab.com/gitlab-org/gitlab/-/issues/324664 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63343 |\n| Determine if this is a Geo Proxy by calling `/api/v4/geo/proxy` | https://gitlab.com/gitlab-org/gitlab/-/issues/329670 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60769 |\n| If this is a Geo Proxy, then use the Geo Proxy routing table | https://gitlab.com/gitlab-org/gitlab/-/issues/329672 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63321 |\n| Cache the result of the request | https://gitlab.com/gitlab-org/gitlab/-/issues/329671 **You are here** | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/66491 |\n| [Feature flag] Rollout of `geo_secondary_proxy` and `GEO_SECONDARY_PROXY` | https://gitlab.com/gitlab-org/gitlab/-/issues/325732 | |","state":"closed","created_at":"2021-04-30T16:35:28.883Z","updated_at":"2021-08-10T15:41:07.316Z","closed_at":"2021-08-04T16:55:17.492Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Deliverable","devops::systems","feature::addition","group::geo","missed-deliverable","missed:13.12","missed:14.0","section::enablement","type::feature","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329671","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329671","notes":"https://gitlab.com/api/v4/projects/278964/issues/329671/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329671/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329671","relative":"#329671","full":"gitlab-org/gitlab#329671"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5914,"epic":{"id":262783,"iid":5914,"title":"Geo: Secondary sites proxy to primary site","url":"/groups/gitlab-org/-/epics/5914","group_id":9970,"human_readable_end_date":"Jun 19, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86295990,"iid":329670,"project_id":278964,"title":"Geo: Add Workhorse function to call `/api/v4/internal/geo_proxy`","description":"## To do\n\n* [x] Determine where in the Workhorse code we should make the request to `/api/v4/internal/geo_proxy`\n  - I chose a location immediately before we look for a matching route. The main thing is that this check cannot occur only on startup of Workhorse, because e.g. a Geo secondary can be promoted to be the primary. So the check location must be in the request flow. This is also why it [must be cached](https://gitlab.com/gitlab-org/gitlab/-/issues/329671).\n* [x] Add a function to make the request\n* [x] Just output the result of the request as debug logs for now\n* [x] Call the function if environment variable `GEO_SECONDARY_PROXY=1`\n* [x] Tests\n\n### Where does this fit in [the epic](https://gitlab.com/groups/gitlab-org/-/epics/5914)?\n\n| Description | Issue | |\n| --- | --- | --- |\n| Add endpoint `/api/v4/geo/proxy` | https://gitlab.com/gitlab-org/gitlab/-/issues/324664 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63343 |\n| Determine if this is a Geo Proxy by calling `/api/v4/geo/proxy` | https://gitlab.com/gitlab-org/gitlab/-/issues/329670 **You are here** | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60769 |\n| If this is a Geo Proxy, then use the Geo Proxy routing table | https://gitlab.com/gitlab-org/gitlab/-/issues/329672 | https://gitlab.com/gitlab-org/gitlab/-/merge_requests/63321 |\n| Before we can remove the environment variable, we must add caching of the result of the request | https://gitlab.com/gitlab-org/gitlab/-/issues/329671 | |","state":"closed","created_at":"2021-04-30T16:34:49.510Z","updated_at":"2021-07-20T22:58:01.171Z","closed_at":"2021-07-06T15:43:25.581Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Deliverable","devops::systems","feature::addition","group::geo","missed-deliverable","missed:13.12","section::enablement","type::feature","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329670","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":5,"completed_count":5},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"5 of 5 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329670","notes":"https://gitlab.com/api/v4/projects/278964/issues/329670/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329670/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329670","relative":"#329670","full":"gitlab-org/gitlab#329670"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5914,"epic":{"id":262783,"iid":5914,"title":"Geo: Secondary sites proxy to primary site","url":"/groups/gitlab-org/-/epics/5914","group_id":9970,"human_readable_end_date":"Jun 19, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86293095,"iid":329667,"project_id":278964,"title":"Feature Request: provide way to pause Elasticsearch indexing from the command line","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n\n### Problem to solve \n\nIn some cases Elasticsearch indexing may make an instance unstable, bringing down Puma. This in turn prevents admins from accessing the UI to pause indexing, leading to extended downtime.\n\nGiving admins a way to pause indexing from the command line would help them rapidly mitigate impacts.\n\n### Intended users\n\n* [Sidney (Systems Administrator)](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### User experience goal\n\nAdmins can rapidly disable ES indexing when the UI is unavailable.\n\n### Proposal\n\nAdd one or more rake tasks to pause or disable indexing.\n\n### Available Tier\n\n* Premium/Silver\n* Ultimate/Gold\n\n### Is this a cross-stage feature?\n\nNo\n\n### Links / references\n\n\u003c!-- Label reminders - you should have one of each of the following labels.\nUse the following resources to find the appropriate labels:\n- https://gitlab.com/gitlab-org/gitlab/-/labels\n- https://about.gitlab.com/handbook/product/categories/features/\n--\u003e","state":"closed","created_at":"2021-04-30T15:33:05.249Z","updated_at":"2022-05-30T16:37:25.309Z","closed_at":"2021-10-07T19:55:46.005Z","closed_by":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"labels":["Category:Global Search","GitLab Core","GitLab Premium","GitLab Ultimate","customer","devops::data_stores","direction","documentation","group::global search","rake tasks","section::enablement","tw-weight::5","type::feature"],"milestone":{"id":1948708,"iid":64,"group_id":9970,"title":"14.4","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:44:55.682Z","updated_at":"2022-04-21T07:25:38.537Z","due_date":"2021-10-17","start_date":"2021-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/64"},"assignees":[{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"}],"author":{"id":2578846,"username":"wchandler","name":"Will Chandler","state":"active","avatar_url":"https://secure.gravatar.com/avatar/cc8b92738249753faee7055e021f8221?s=80\u0026d=identicon","web_url":"https://gitlab.com/wchandler"},"type":"ISSUE","assignee":{"id":9717668,"username":"john-mason","name":"John Mason","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9717668/avatar.png","web_url":"https://gitlab.com/john-mason"},"user_notes_count":4,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329667","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329667","notes":"https://gitlab.com/api/v4/projects/278964/issues/329667/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329667/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329667","relative":"#329667","full":"gitlab-org/gitlab#329667"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86282567,"iid":329657,"project_id":278964,"title":"Update batched background migration information to admin panel with a migration detail page","description":"As mentioned in this issue https://gitlab.com/gitlab-org/gitlab/-/issues/326760#note_564678763 a logical subsequent addition to the batched background migration information page would be to have the ability to drill down into the details of an individual migration.","state":"closed","created_at":"2021-04-30T12:49:16.493Z","updated_at":"2022-05-30T15:31:09.099Z","closed_at":"2022-04-26T10:59:49.033Z","closed_by":{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo Frazão","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"},"labels":["Category:Database","Engineering Allocation","auto updated","devops::data_stores","group::database","missed:14.10","section::enablement"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo Frazão","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"}],"author":{"id":3910448,"username":"craig-gomes","name":"Craig Gomes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3910448/avatar.png","web_url":"https://gitlab.com/craig-gomes"},"type":"ISSUE","assignee":{"id":9231122,"username":"dfrazao-gitlab","name":"Diogo Frazão","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9231122/avatar.png","web_url":"https://gitlab.com/dfrazao-gitlab"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329657","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329657","notes":"https://gitlab.com/api/v4/projects/278964/issues/329657/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329657/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329657","relative":"#329657","full":"gitlab-org/gitlab#329657"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":7428,"epic":{"id":426601,"iid":7428,"title":"Batched Background Migrations: Improve Supportability","url":"/groups/gitlab-org/-/epics/7428","group_id":9970,"human_readable_end_date":"Jun 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86279386,"iid":329652,"project_id":278964,"title":"Add offset and limit parameters to RepositoryBranchNamesResolver","description":"## Summary\n\nWe need a way to efficiently use this resolver to make use of the Redis search we implemented.\n\n## Proposal\n\nAdd `offset` and `limit` parameters to enable efficient usage of this endpoint.","state":"closed","created_at":"2021-04-30T11:50:30.720Z","updated_at":"2021-05-17T21:00:34.922Z","closed_at":"2021-05-17T21:00:34.902Z","closed_by":{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"labels":["Category:Pipeline Authoring","GraphQL","backend","devops::verify","feature::enhancement","group::pipeline authoring","section::ops","type::feature","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"}],"author":{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"type":"ISSUE","assignee":{"id":722076,"username":"matteeyah","name":"Matija Čupić","state":"active","avatar_url":"https://secure.gravatar.com/avatar/8bc04cc15e0adba406cf56fecd9d910a?s=80\u0026d=identicon","web_url":"https://gitlab.com/matteeyah"},"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329652","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329652","notes":"https://gitlab.com/api/v4/projects/278964/issues/329652/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329652/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329652","relative":"#329652","full":"gitlab-org/gitlab#329652"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":"on_track"},{"id":86279194,"iid":329651,"project_id":278964,"title":"Instrument input rules execution in the Content Editor","description":"Track when the user executes an input rule in the Content Editor\n\n### Snowplow event structure\n\n|         | action | category | label | property    | value |\n|:------- | ------ | -------- | ----- | ----------- | ----- |\n| **Data description**  | `execute_input_rule` | `[page where editor is used]` | `content_editor` | `[content_type]` | `[context data]` |\n| **heading 3 example**  | `execute_key_shortcut`  | `projects::wiki::edit`        | `content_editor` | `heading` | 3 |\n| **bold example**       | `execute_key_shortcut`  | `projects::wiki::edit`        | `content_editor` | `bold` | null |\n\n### Implementation guide\n\nRequires investigation","state":"closed","created_at":"2021-04-30T11:45:13.004Z","updated_at":"2021-06-18T07:07:26.085Z","closed_at":"2021-05-19T12:00:15.719Z","closed_by":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"labels":["Deliverable","devops::create","direction","frontend","group::editor","section::dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"}],"author":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"type":"ISSUE","assignee":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329651","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329651","notes":"https://gitlab.com/api/v4/projects/278964/issues/329651/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329651/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329651","relative":"#329651","full":"gitlab-org/gitlab#329651"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5643,"epic":{"id":229786,"iid":5643,"title":"Create:Editor -- 13.11 - 14.0 -- Add Content Editor on Wiki Page","url":"/groups/gitlab-org/-/epics/5643","group_id":9970,"human_readable_end_date":"May 14, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86279183,"iid":329650,"project_id":278964,"title":"Instrument keyboard shortcut execution in the Content Editor","description":"Track when the user executes a key shortcut in the Content Editor\n\n### Snowplow event structure\n\n|         | action | category | label | property    | value |\n|:------- | ------ | -------- | ----- | ----------- | ----- |\n| **Data description**  | `execute_toolbar_control` | `[page where editor is used]` | `content_editor` | `[content_type]` | `[context data]` |\n| **heading 3 example**  | `execute_key_shortcut`  | `projects::wiki::edit`        | `content_editor` | `heading` | 3 |\n| **bold example**       | `execute_key_shortcut`  | `projects::wiki::edit`        | `content_editor` | `bold` | null |\n\n### Implementation guide\n\nThis is a rough assessment of the work required but we should probably annotate the [key shortcut definitions](https://www.tiptap.dev/guide/extend-extensions#keyboard-shortcuts) on every Content Type extension provided by Tiptap with a function that emits the snowplow event.","state":"closed","created_at":"2021-04-30T11:44:52.664Z","updated_at":"2021-06-18T07:07:26.138Z","closed_at":"2021-05-19T12:00:26.506Z","closed_by":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"labels":["Deliverable","devops::create","direction","frontend","group::editor","section::dev","workflow::ready for development"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"}],"author":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"type":"ISSUE","assignee":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329650","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329650","notes":"https://gitlab.com/api/v4/projects/278964/issues/329650/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329650/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329650","relative":"#329650","full":"gitlab-org/gitlab#329650"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5643,"epic":{"id":229786,"iid":5643,"title":"Create:Editor -- 13.11 - 14.0 -- Add Content Editor on Wiki Page","url":"/groups/gitlab-org/-/epics/5643","group_id":9970,"human_readable_end_date":"May 14, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86279043,"iid":329649,"project_id":278964,"title":"Instrument Content Editor toolbar","description":"Track when the user interacts with the Content Editor toolbar\n\n### Snowplow event structure\n\n|         | action | category | label | property    | value |\n|:------- | ------ | -------- | ----- | ----------- | ----- |\n| **Data description**  | `execute_toolbar_control` | `[page where editor is used]` | `content_editor` | `[content_type]` | `[context data]` |\n| **heading 3 example**  | `execute_toolbar_control`  | `projects::wiki::edit`        | `content_editor` | `heading` | 3 |\n| **bold example**       | `execute_toolbar_control`  | `projects::wiki::edit`        | `content_editor` | `bold` | null |\n\n### Implementation guide\n\n- All toolbar controls should trigger a common event that indicate the user interacts with them. For example `execute`. The execute event should provide contextual data we will send to snowplow although this is optional. \n- Instrumentation should be implemented in the Component that contains all the toolbar control in order to centralize this business logic in a single place.","state":"closed","created_at":"2021-04-30T11:42:27.902Z","updated_at":"2021-06-18T07:07:26.182Z","closed_at":"2021-05-17T14:21:34.026Z","closed_by":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"labels":["Deliverable","devops::create","frontend","group::editor","section::dev"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"}],"author":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"type":"ISSUE","assignee":{"id":3540517,"username":"ealcantara","name":"Enrique Alcántara","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3540517/avatar.png","web_url":"https://gitlab.com/ealcantara"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329649","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329649","notes":"https://gitlab.com/api/v4/projects/278964/issues/329649/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329649/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329649","relative":"#329649","full":"gitlab-org/gitlab#329649"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5643,"epic":{"id":229786,"iid":5643,"title":"Create:Editor -- 13.11 - 14.0 -- Add Content Editor on Wiki Page","url":"/groups/gitlab-org/-/epics/5643","group_id":9970,"human_readable_end_date":"May 14, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86270993,"iid":329637,"project_id":278964,"title":"Cache tags in the GitLab.com container registry to improve the performance of the API","description":"### Context\n\nReported in ~\"Mechanical Sympathy\": https://gitlab.slack.com/archives/CM5EQH125/p1619576575026200\n\nThe performance of `GET /api/:version/groups/:id/registry/repositories` is poor, with a p95 of over 15s. \n\n\n* [Kibana Search](https://log.gprd.gitlab.net/app/kibana#/discover?_a=(columns:!(json.method,json.status,json.controller,json.action,json.path,json.duration_s),filters:!((query:(match:(json.meta.caller_id.keyword:(query:'GET+%2Fapi%2F%3Aversion%2Fgroups%2F%3Aid%2Fregistry%2Frepositories',type:phrase)))),(query:(range:(json.duration_s:(gte:1))))),index:'7092c4e2-4eb5-46f2-8305-a7da2edad090',sort:!(!(json.duration_s,desc)))\u0026_g=(time:(from:'now-24h',to:'now')))\n* [Dashboard](https://log.gprd.gitlab.net/app/dashboards#/view/db37b560-9793-11eb-a990-d72c312ff8e9?_g=(filters:!((query:(match_phrase:(json.meta.caller_id.keyword:'GET+%2Fapi%2F%3Aversion%2Fgroups%2F%3Aid%2Fregistry%2Frepositories')))),time:(from:'now-24',to:now)))\n\nPerformance: p95: 15.244s max: 60.876s (49351 samples)\n\n### Problem\n\nThis [group API endpoint](https://docs.gitlab.com/ee/api/container_registry.html#within-a-group) allows users to optionally request a tag list of *all* repositories within the group, and have that included in the response (these are the ones that are causing problems). Therefore, for each one of these requests, Rails has to:\n\n1. Get a list of all container repositories within a group - query against the Rails DB;\n1. For each container repository, obtain the list of tags from the registry API - this means `1N` network requests against a slow registry endpoint.\n\nAll of this happens in a single request. Therefore, above performance, I think we have an API design issue here. \n\n### Proposal\n\nCache the tag list on the Rails side. Using GitLab.com as an example, the registry has a very low write rate, which means the tag list changes infrequently for most repositories. Therefore, it can be feasible to cache it on the Rails side, provided that we can invalidate the cache properly.\n\nThe Package team had a sync to conduct this investigation (https://youtu.be/utrr52arzxQ), and came up with the following conclusions:\n\n* The docker client requests a JWT token before *every* pull/push, regardless of whether the target repository is public or private.\n* Given 1) the self-managed install constraints (inability to accurately/reliably identify the type of container registry and the fact that we can't rely on JWT tokens if they are using a third-party registry) and 2) the fact that our topmost priority is to stabilize this endpoint's performance for GitLab.com: Caching will be restricted to GitLab.com, at least for now.\n* This feature will be placed behind a feature flag scoped by `Group`. Only a few groups (https://gitlab.com/gitlab-org/gitlab/-/issues/329637#note_634053259) use this API endpoint with the `tags`/`tags_count` options set to `true` (which leads to this performance problem). To minimize impact while still remediating the performance concern, we should restrict this feature to those groups. We can expand the list as necessary.\n* We can later extend this feature to other/all groups (with a percentage-based rollout) if it works as expected and that is desirable, or we can simply wait for the definitive solution ([API re-architecture/breaking change](https://gitlab.com/gitlab-org/gitlab/-/issues/336912)) and sunset this change. The latter is likely the best option, but this remains a two-way door decision.\n* There will be a cache entry with the list of tag names for each (eligible) container repository. The cache will live in Redis. No key expiry is necessary, as we will be invalidating entries manually (see below);\n* The cache will be invalidated in the authentication service whenever Rails serves a JWT token with `push` or `delete` permissions. We may end up invalidating the cache more often than we would need to, but this is the best we can do (assume that a tag will always be added or deleted).\n\n  Note: This must happen both for external (requested through the API) and internal (used by e.g., cleanup policies) token requests. See https://gitlab.com/gitlab-org/gitlab/-/issues/327311#note_675863703 for details about cleanup policies.\n* To avoid impacting other use cases (other API endpoints, cleanup policies, UI, Geo replication, etc.), using the cache will be restricted to this API endpoint. This means that we can't manipulate the cache in the low-level registry client class, as that would apply to all registry interactions.\n\n#### Further details\n\nIdeally, this should be done using two separate endpoints, one for the repositories list and another for the tags list for each repository. There is an issue planned for this (https://gitlab.com/gitlab-org/gitlab/-/issues/336912), but this represents a breaking change, so we will not be able to address it before %\"15.0\".","state":"closed","created_at":"2021-04-30T09:20:06.545Z","updated_at":"2021-11-16T17:45:16.492Z","closed_at":"2021-10-07T16:38:07.780Z","closed_by":{"id":9516393,"username":"michelletorres","name":"Michelle Torres","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9516393/avatar.png","web_url":"https://gitlab.com/michelletorres"},"labels":["Category:Container Registry","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","Mechanical Sympathy","Package:P1","Quality:performance-issues","[deprecated] Accepting merge requests","backend","bug::performance","devops::package","golang","group::package registry","priority::4","reliability","ruby","section::ops","severity::4","wontfix","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":895869,"username":"andrewn","name":"Andrew Newdigate","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/895869/avatar.png","web_url":"https://gitlab.com/andrewn"},"type":"ISSUE","assignee":null,"user_notes_count":28,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329637","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329637","notes":"https://gitlab.com/api/v4/projects/278964/issues/329637/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329637/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329637","relative":"#329637","full":"gitlab-org/gitlab#329637"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86267639,"iid":329636,"project_id":278964,"title":"External Status Checks: Introduce \"fail\" status","description":"\u003c!-- This template is a great use for issues that are feature::additions or technical tasks for larger issues.--\u003e\n\n### Proposal \n\nAfter the [implementation of making a status 'passed' via an external service](https://gitlab.com/gitlab-org/gitlab/-/issues/267519), we are going to implement the ability to **explicitly 'fail'** statuses via the same external service.\n\nAdditional: \n- Remove the help text from the widget.\n- Replace `,` with `:` as a delimeter\n\n![Failed_current](/uploads/8505b766bb153cd0432d179644651c83/Failed_current.png)\n\n## Implementation plan\n\n1. [ ] Introduce a third `status` option for `MergeRequest::StatusCheckResponse`: `failed`.\n1. [ ] Modify the [API endpoint for ](https://docs.gitlab.com/ee/api/status_checks.html#set-approval-status-of-an-external-status-check)`status_check_responses` to accept an optional `status` parameter. For backward compatibility, `status` should default to `passed` if not given. (This default will be removed under https://gitlab.com/gitlab-org/gitlab/-/issues/338827)\n\n\u003cdetails\u003e\n\u003csummary\u003eOriginal implementation plan\u003c/summary\u003e\n\n- [ ] Add new `succeeded` attribute to `MergeRequest::StatusCheckResponse`. There is no default, but it is a required field.\n    - [ ] Existing records at this point should all be migrated to be `succeeded: true` to preserve the behaviour of old records.\n- [ ] Add new API endpoint to allow \"fail\" of status checks. This should be done in a non-breaking change way. Allowing \"pass\" of a status check should not change.\n- [ ] Make sure API is exposing status of a status check.\n\n\u003c/details\u003e","state":"closed","created_at":"2021-04-30T08:28:19.661Z","updated_at":"2022-11-15T13:10:36.983Z","closed_at":"2022-03-15T15:47:11.484Z","closed_by":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"labels":["backend","devops::manage","group::compliance","priority::2","section::dev","workflow::verification"],"milestone":{"id":2204140,"iid":71,"group_id":9970,"title":"14.9","description":"","state":"active","created_at":"2021-08-26T19:11:46.841Z","updated_at":"2022-03-22T13:29:17.028Z","due_date":"2022-03-17","start_date":"2022-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/71"},"assignees":[{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"}],"author":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"type":"ISSUE","assignee":{"id":5209897,"username":"rob.hunt","name":"Robert Hunt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5209897/avatar.png","web_url":"https://gitlab.com/rob.hunt"},"user_notes_count":31,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329636","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329636","notes":"https://gitlab.com/api/v4/projects/278964/issues/329636/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329636/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329636","relative":"#329636","full":"gitlab-org/gitlab#329636"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5968,"epic":{"id":268001,"iid":5968,"title":"[Backend] External Status Checks","url":"/groups/gitlab-org/-/epics/5968","group_id":9970,"human_readable_end_date":"Mar 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":"at_risk"},{"id":86266954,"iid":329635,"project_id":278964,"title":"VSA - Refactor metrics component","description":"Follow-up from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59732#note_564453940 and https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59732#note_564497870\n\nLet's refactor the [metrics](https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/analytics/cycle_analytics/components/metrics.vue) component address the following two issues:\n\n- Combine the two instances of the `TimeMetricsCard` component into a single component in https://gitlab.com/gitlab-org/gitlab/-/blob/master/ee/app/assets/javascripts/analytics/cycle_analytics/components/metrics.vue#L28\n- On mobile alignment, we want to show three metrics on top and two metrics below. (Currently we show 2 on top and 3 below).","state":"closed","created_at":"2021-04-30T08:19:22.601Z","updated_at":"2021-05-20T14:43:43.681Z","closed_at":"2021-05-20T14:37:05.700Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["devops::manage","frontend","group::optimize","maintenance::refactor","priority::4","section::dev","workflow::production"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329635","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329635","notes":"https://gitlab.com/api/v4/projects/278964/issues/329635/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329635/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329635","relative":"#329635","full":"gitlab-org/gitlab#329635"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86266103,"iid":329633,"project_id":278964,"title":"Download artifacts makes other Download labels redundant","description":"### Description\n\nOur artifacts can be downloaded from the pipelines page using a dropdown. This dropdown has a header to \"Download artifacts\".\n\nAdditionally each item in the dropdown also has the \"Download XXX artifacts\", I think this is redundant:\n\n![Screen_Shot_2021-04-30_at_9.56.31_AM](/uploads/9dd42ec99fa39c6970449371c1e6209f/Screen_Shot_2021-04-30_at_9.56.31_AM.png)\n\n### Proposal \n\nRemove the extra words and simply list the artifacts:\n\n![image](/uploads/7193e07ab5828038dc0a4558ffe6e91e/image.png)\n\n#### Code example\n\n```diff\ndiff --git a/app/assets/javascripts/pipelines/components/pipelines_list/pipeline_multi_actions.vue b/app/assets/javascripts/pipelines/components/pipelines_list/pipeline_multi_actions.vue\nindex d7bd2d731b1..413422fe0ce 100644\n--- a/app/assets/javascripts/pipelines/components/pipelines_list/pipeline_multi_actions.vue\n+++ b/app/assets/javascripts/pipelines/components/pipelines_list/pipeline_multi_actions.vue\n@@ -107,9 +107,10 @@ export default {\n       download\n       data-testid=\"artifact-item\"\n     \u003e\n-      \u003cgl-sprintf :message=\"$options.i18n.downloadArtifact\"\u003e\n+      \u003c!-- \u003cgl-sprintf :message=\"$options.i18n.downloadArtifact\"\u003e\n         \u003ctemplate #name\u003e{{ artifact.name }}\u003c/template\u003e\n-      \u003c/gl-sprintf\u003e\n+      \u003c/gl-sprintf\u003e --\u003e\n+      {{ artifact.name }}\n     \u003c/gl-dropdown-item\u003e\n   \u003c/gl-dropdown\u003e\n \u003c/template\u003e\n```","state":"closed","created_at":"2021-04-30T08:05:41.314Z","updated_at":"2022-01-14T08:30:38.752Z","closed_at":"2022-01-13T09:19:41.609Z","closed_by":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"labels":["CI artifacts","Category:Build Artifacts","Category:Continuous Integration","UI text","[deprecated] Accepting merge requests","devops::verify","group::pipeline insights","section::ops","severity::4","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1607849,"username":"mrincon","name":"Miguel Rincon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1607849/avatar.png","web_url":"https://gitlab.com/mrincon"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329633","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329633","notes":"https://gitlab.com/api/v4/projects/278964/issues/329633/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329633/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329633","relative":"#329633","full":"gitlab-org/gitlab#329633"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86261729,"iid":329629,"project_id":278964,"title":"VSA - Change unit for deployment frequency to \"/day\".","description":"Follow-up from https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59732#note_563635269\n\nLet's change the unit in for the `Deployment frequency` Tile from `per day` to `/day`.\n\nThe metric tile appears on the VSA Overview and on [deployment frequency chart](https://gitlab.com/groups/gitlab-org/-/analytics/ci_cd?tab=deployment-frequency) (Groups \u0026 Projects).","state":"closed","created_at":"2021-04-30T06:33:12.079Z","updated_at":"2022-07-26T16:12:40.242Z","closed_at":"2022-05-02T09:28:38.149Z","closed_by":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"labels":["Category:Continuous Delivery","Category:Value Stream Management","Deliverable","SUS::Impacting","UX debt","automation:ml","backend","candidate::15.0","devops::manage","group::optimize","priority::4","section::ops","severity::4","workflow::production"],"milestone":{"id":2095271,"iid":65,"group_id":9970,"title":"15.0","description":"","state":"active","created_at":"2021-06-08T15:35:34.814Z","updated_at":"2021-11-02T18:23:35.115Z","due_date":"2022-05-17","start_date":"2022-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/65"},"assignees":[{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"}],"author":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"type":"ISSUE","assignee":{"id":4826728,"username":"m_frankiewicz","name":"Magdalena Frankiewicz","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca314fa77051f58ced6e3e5bf7f0dd48?s=80\u0026d=identicon","web_url":"https://gitlab.com/m_frankiewicz"},"user_notes_count":20,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329629","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329629","notes":"https://gitlab.com/api/v4/projects/278964/issues/329629/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329629/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329629","relative":"#329629","full":"gitlab-org/gitlab#329629"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":86256435,"iid":329625,"project_id":278964,"title":"Fix boards sidebars top position","description":"Board list settings  has an unexpected space above it when on development environment without performance bar and board issue/epic sidebar is hovered at the top when performance sidebar is active. The spacing and positioning should be fixed as follows:\n\n| Current | Expected |\n| ------ | ------ |\n| ![Screenshot_from_2021-04-30_13-11-20](/uploads/ee850011f05b2b9b23af6eead281ab74/Screenshot_from_2021-04-30_13-11-20.png) | ![Screenshot_from_2021-04-30_13-14-05](/uploads/f9a2f4c60686404093d5b8e4f48d011f/Screenshot_from_2021-04-30_13-14-05.png) |\n| ![Screenshot_from_2021-04-30_13-14-40](/uploads/9706b6caa0082a49a8d11305a625f88a/Screenshot_from_2021-04-30_13-14-40.png) | ![Screenshot_from_2021-04-30_13-15-22](/uploads/be3829454d4da4ced0199ff1844c3bf5/Screenshot_from_2021-04-30_13-15-22.png) |","state":"closed","created_at":"2021-04-30T03:15:55.627Z","updated_at":"2021-11-08T16:06:50.522Z","closed_at":"2021-07-06T17:02:58.017Z","closed_by":{"id":4447636,"username":"sstern","name":"Scott Stern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4447636/avatar.png","web_url":"https://gitlab.com/sstern"},"labels":["Category:Team Planning","automation:ml","boards","devops::plan","frontend","group::project management","missed:14.0","section::dev","type::bug","workflow::in review"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":4447636,"username":"sstern","name":"Scott Stern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4447636/avatar.png","web_url":"https://gitlab.com/sstern"}],"author":{"id":4846639,"username":"fguibert","name":"Florie Guibert","state":"active","avatar_url":"https://secure.gravatar.com/avatar/705331e7e375d5832c9fa5309370b55f?s=80\u0026d=identicon","web_url":"https://gitlab.com/fguibert"},"type":"ISSUE","assignee":{"id":4447636,"username":"sstern","name":"Scott Stern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4447636/avatar.png","web_url":"https://gitlab.com/sstern"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329625","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329625","notes":"https://gitlab.com/api/v4/projects/278964/issues/329625/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329625/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329625","relative":"#329625","full":"gitlab-org/gitlab#329625"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86253616,"iid":329620,"project_id":278964,"title":"[VSA] Active stage items should not include Closed items (BE)","description":"### Summary\n\nhttps://gitlab.com/gitlab-org/gitlab/-/issues/299265 adds BE changes to filter Issues/MRs that have not reached a stage end event so that we can show a list of items that are still in a selected stage. \n\n### Problem to solve\n\nUsers want to view a list of items still in a stage so that they can identify which items require action in order to move them on to the next stage. As a user with this JTBD, I don't want to see Closed Issues/MRs in this view because they are not relevant to my JTBD.\n\n### Proposal\n\nPer @ahegyi's [suggestion](https://gitlab.com/gitlab-org/gitlab/-/issues/299265#note_561401049), add filters to remove Closed Issues/MRs from the list of items that haven't reached an end event.\n\ncc @npost","state":"closed","created_at":"2021-04-30T01:26:01.292Z","updated_at":"2021-05-18T12:57:01.630Z","closed_at":"2021-05-18T12:57:01.586Z","closed_by":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"labels":["Category:Value Stream Management","backend","devops::manage","feature::enhancement","group::optimize","section::dev","type::feature","workflow::production"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"}],"author":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"type":"ISSUE","assignee":{"id":4156052,"username":"ahegyi","name":"Adam Hegyi","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ff7cdaff6b98fba9b977f1885578b8b3?s=80\u0026d=identicon","web_url":"https://gitlab.com/ahegyi"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329620","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329620","notes":"https://gitlab.com/api/v4/projects/278964/issues/329620/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329620/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329620","relative":"#329620","full":"gitlab-org/gitlab#329620"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5949,"epic":{"id":265615,"iid":5949,"title":"[VSA] \"Current Items\" view - WIP","url":"/groups/gitlab-org/-/epics/5949","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e637\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":"at_risk"},{"id":86253400,"iid":329618,"project_id":278964,"title":"Address Snowplow event dictionary on Product Intelligence review guidelines for Snowplow","description":"Similar to the [Usage Ping review guidelines](https://docs.gitlab.com/ee/development/usage_ping/product_intelligence_review.html), we should add information about how to maintain the event dictionary when working with Snowplow events.\n\nWe should also consider moving the Snowplow review guidelines into their own page within the `development/snowplow` directory.","state":"closed","created_at":"2021-04-30T01:15:25.359Z","updated_at":"2021-06-23T20:00:31.298Z","closed_at":"2021-06-23T20:00:15.557Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["devops::growth","documentation","frontend","group::product intelligence","missed:13.12","missed:14.0","section::growth","workflow::production"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329618","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329618","notes":"https://gitlab.com/api/v4/projects/278964/issues/329618/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329618/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329618","relative":"#329618","full":"gitlab-org/gitlab#329618"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5247,"epic":{"id":185219,"iid":5247,"title":"Snowplow Dictionary","url":"/groups/gitlab-org/-/epics/5247","group_id":9970,"human_readable_end_date":"May 30, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86252839,"iid":329617,"project_id":278964,"title":"GraphQL: Consistently handle required nullable arguments","description":"In !60139, work was done to introduce a nullable argument for `issue.dueDate`. Currently there are several such arguments that allow the API consumer to specify no argument and the API takes it as `null` (that is, for the omission of an argument to be taken as intent to remove the field) - see https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60139#note_560540899\n\nThere is some argument to be made that it constitutes suboptimal abstraction, as it equates the absence of an argument with a `null`, so there were some alternatives suggested:\n\n- :one: a separate mutation \"remove due date\"\n- :two: use the `ready?` method to ensure the key exists, even if the value is `null`\n- :three: (the above) make no argument the equivalent of a `null`, which removes the due date entirely\n\nHaving asked upstream in https://github.com/rmosolgo/graphql-ruby/issues/3453, the maintainer agrees with the option :two: as \"pure business logic\" rather than a hack :smile_cat: and a separate mutation is also an option.\n\nI'd like to propose we adopt :two: as our formal strategy for handling required arguments that can be `null`.\n\nRelated to #300112 since this relates to arg checking and defining a SSOT.","state":"closed","created_at":"2021-04-30T00:39:38.907Z","updated_at":"2021-10-28T13:57:07.289Z","closed_at":"2021-08-02T07:19:56.276Z","closed_by":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"labels":["GraphQL","api","automation:ml","backend","devops::plan","group::product planning","section::dev","type::maintenance","workflow::in review"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":23,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329617","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329617","notes":"https://gitlab.com/api/v4/projects/278964/issues/329617/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329617/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329617","relative":"#329617","full":"gitlab-org/gitlab#329617"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86252438,"iid":329616,"project_id":278964,"title":"F/u/f !59535: Put shared constants into a constants.js file","description":"The following discussion from !59535 should be addressed:\n\n- [ ] @ohoral started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59535#note_563943196):  (+2 comments)\n\n    \u003e I'd suggest to leave the translation under `i18n` object in `options` and add another one there as well - it is an established pattern.\n    \u003e I'd even move them to constants and reuse in specs - but that's optional\n\nRelates to #327997","state":"closed","created_at":"2021-04-30T00:12:11.279Z","updated_at":"2021-07-18T07:10:30.219Z","closed_at":"2021-06-22T21:04:57.654Z","closed_by":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"labels":["Category:Conversion Experiment","Deliverable","Engineering","devops::growth","group::acquisition","growth experiment","missed-deliverable","missed:13.12","section::growth"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"}],"author":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"type":"ISSUE","assignee":{"id":5755274,"username":"dreedy","name":"Dallas Reedy","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5755274/avatar.png","web_url":"https://gitlab.com/dreedy"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329616","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329616","notes":"https://gitlab.com/api/v4/projects/278964/issues/329616/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329616/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329616","relative":"#329616","full":"gitlab-org/gitlab#329616"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86250978,"iid":329605,"project_id":278964,"title":"[DevOps Adoption] Data explanation is incorrect, making data look incorrect","description":"### Summary\n\nAdoption data in the group-level DevOps Adoption table doesn't seem to be accurate. \n\n### Steps to reproduce\n\n1. In https://gitlab.com/groups/gitlab-org/-/analytics/devops_adoption, add the `gitlab.org/manage` group by clicking the `Add/remove sub-groups` button and searching for the Manage group.\n1. The group is added to the table and shows that Issues and Pipelines are the only features used by the group. The UI tells me that adoption data is based on usage in the last calendar month, which is March.\n\n    ![Screen_Shot_2021-04-29_at_3.46.59_PM](/uploads/203b974afde1c7cba87019b35b26a644/Screen_Shot_2021-04-29_at_3.46.59_PM.png)\n\n1. Navigate to the Manage group and check if MRs have been opened in that group. https://gitlab.com/groups/gitlab-org/manage/-/merge_requests?scope=all\u0026utf8=%E2%9C%93\u0026state=opened. There is an open MR that was created in March. \n\n    ![Screen_Shot_2021-04-29_at_4.01.26_PM](/uploads/54000be531486a854cf78c53d80608e1/Screen_Shot_2021-04-29_at_4.01.26_PM.png)\n\n### What is the current *bug* behavior?\n\nThe adoption table shows that MRs were not in use for the Manage project. \n\n### What is the expected *correct* behavior?\n\nThe circle for MRs should be filled in for the Manage group in the adoption table, indicating that MRs actually were in use in the previous calendar month.","state":"closed","created_at":"2021-04-29T22:56:29.693Z","updated_at":"2021-05-04T14:10:51.535Z","closed_at":"2021-05-04T07:56:05.794Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["devops::manage","frontend","group::optimize","section::dev","severity::4","type::bug","workflow::verification"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":4447217,"username":"ljlane","name":"Larissa Lane","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/ac4027d3a4e3bd62740ea1443a42f6c5?s=80\u0026d=identicon","web_url":"https://gitlab.com/ljlane"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329605","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329605","notes":"https://gitlab.com/api/v4/projects/278964/issues/329605/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329605/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329605","relative":"#329605","full":"gitlab-org/gitlab#329605"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86247682,"iid":329589,"project_id":278964,"title":"Geo: Secondaries may be orphaning Upload files","description":"Similar to https://gitlab.com/gitlab-org/gitlab/-/issues/297472.\n\n`WithUploads` uses `use_fast_destroy :file_uploads`, but Geo [uses `after_destroy`](https://gitlab.com/gitlab-org/gitlab/-/blob/b7af7cbaa4774c78d8dbc31df45971e48050446e/ee/app/models/ee/upload.rb#L14) to create events which secondaries need in order to delete the files instead of orphaning them on disk.\n\nI have not yet confirmed this with actual tests.","state":"closed","created_at":"2021-04-29T21:11:18.863Z","updated_at":"2021-11-23T16:54:23.588Z","closed_at":"2021-11-10T16:48:42.504Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["devops::systems","group::geo","missed:14.3","missed:14.4","section::enablement","severity::3","type::bug","workflow::verification"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":18,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329589","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329589","notes":"https://gitlab.com/api/v4/projects/278964/issues/329589/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329589/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329589","relative":"#329589","full":"gitlab-org/gitlab#329589"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3115,"epic":{"id":43814,"iid":3115,"title":"Geo: Move Uploads to Self-Service Framework","url":"/groups/gitlab-org/-/epics/3115","group_id":9970,"human_readable_end_date":"Aug 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86247015,"iid":329585,"project_id":278964,"title":"[DevOps Adoption] GraphQL API documentation should warn of beta status","description":"## Problem\n\nCurrently the GraphQL API documentation describes a [Query.devopsAdoptionSegments](https://docs.gitlab.com/ee/api/graphql/reference/#querydevopsadoptionsegments) edge. We are no longer using the term \"segments\", this feature has been considered beta since https://gitlab.com/gitlab-org/gitlab/-/merge_requests/51518, and any public API will [continue to be considered beta](https://gitlab.com/gitlab-org/gitlab/-/issues/325795#note_562883871) even after [enabling the instance-level](https://gitlab.com/gitlab-org/gitlab/-/issues/325795) and [group-level feature flags](https://gitlab.com/gitlab-org/gitlab/-/issues/323159).\n\n## Proposal\n\nHide the GraphQL API documentation for DevOps Adoption ([example](https://docs.gitlab.com/ee/api/graphql/reference/#querydevopsadoptionsegments)), or add a note that it is a beta feature subject to change.\n\n## Related links\n\n- This issue was prompted by @pshutsin's suggestion at https://gitlab.com/gitlab-org/gitlab/-/issues/325795#note_563957978","state":"closed","created_at":"2021-04-29T20:47:57.244Z","updated_at":"2021-05-26T15:58:03.867Z","closed_at":"2021-05-26T15:58:03.831Z","closed_by":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"labels":["devops::manage","documentation","group::optimize","priority::2","section::dev","workflow::verification"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"}],"author":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"type":"ISSUE","assignee":{"id":3482158,"username":"pshutsin","name":"Pavel Shutsin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3482158/avatar.png","web_url":"https://gitlab.com/pshutsin"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329585","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329585","notes":"https://gitlab.com/api/v4/projects/278964/issues/329585/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329585/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329585","relative":"#329585","full":"gitlab-org/gitlab#329585"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5251,"epic":{"id":185625,"iid":5251,"title":"Modify DevOps Adoption to focus on groups rather than segments","url":"/groups/gitlab-org/-/epics/5251","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86245375,"iid":329577,"project_id":278964,"title":"Sync `show whitespace changes in diffs` user preference","description":"## Problem to Solve\n\nAs explained in https://gitlab.com/groups/gitlab-org/-/epics/5713#note_563998664, the `Show whitespace changes in diffs` user preference exists in two places, but those are not in sync:\n\n1. User preferences page\n1. MR preferences menu\n\nChanging the preference in the MR menu will always override what is set in the user preferences page.\n\n## Proposal\n\nHaving ~backend create the API endpoint for this user preference and then on the MR having it use that API to actually toggle the preference. \n\nThis feature falls apart the moment someone tries to use a different computer, clears their cookies, opens in a new browser, etc. By leveraging an API to do this, we can provide a more consistent experience to users across these situations.","state":"closed","created_at":"2021-04-29T19:59:03.585Z","updated_at":"2021-06-28T22:42:54.987Z","closed_at":"2021-06-28T22:42:54.972Z","closed_by":{"id":4017300,"username":"jboyson","name":"Justin Boyson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017300/avatar.png","web_url":"https://gitlab.com/jboyson"},"labels":["Category:Code Review Workflow","Deliverable","devops::create","feature::enhancement","frontend","frontend-weight::3","group::code review","merge requests","quad-planning::ready","section::dev","type::feature","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},{"id":4017300,"username":"jboyson","name":"Justin Boyson","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4017300/avatar.png","web_url":"https://gitlab.com/jboyson"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"user_notes_count":13,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329577","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329577","notes":"https://gitlab.com/api/v4/projects/278964/issues/329577/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329577/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329577","relative":"#329577","full":"gitlab-org/gitlab#329577"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5713,"epic":{"id":244613,"iid":5713,"title":"Improvements to showing/hiding whitespace changes","url":"/groups/gitlab-org/-/epics/5713","group_id":9970,"human_readable_end_date":"Mar 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":86244832,"iid":329575,"project_id":278964,"title":"Project Fork Page incorrectly shows and describes Visibility Levels","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label:\n\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\n\u003c!-- Summarize the bug encountered concisely. --\u003e\n\n* The public/internal/private descriptions are inversed.\n* GitLab.com is showing \"Internal\" which is not allowed (may need to leverage [something server-side?](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/helpers/visibility_level_helper.rb)).\n\nWork can continue here: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60663\n\n![image__4_](/uploads/5fd4db56093a17c5557b14dbd1f37f0d/image__4_.png)\n\n### Steps to reproduce\n\n\u003c!-- Describe how one can reproduce the issue - this is very important. Please use an ordered list. --\u003e\n\n### Example Project\n\n\u003c!-- If possible, please create an example project here on GitLab.com that exhibits the problematic \nbehavior, and link to it here in the bug report. If you are using an older version of GitLab, this \nwill also determine whether the bug is fixed in a more recent version. --\u003e\n\n### What is the current *bug* behavior?\n\n\u003c!-- Describe what actually happens. --\u003e\n\n### What is the expected *correct* behavior?\n\n\u003c!-- Describe what you should see instead. --\u003e\n\n### Relevant logs and/or screenshots\n\n\u003c!-- Paste any relevant logs - please use code blocks (```) to format console output, logs, and code\n as it's tough to read otherwise. --\u003e\n\n### Output of checks\n\n\u003c!-- If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com --\u003e\n\n#### Results of GitLab environment info\n\n\u003c!--  Input any relevant GitLab environment information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003c!--  Input any relevant GitLab application check information if needed. --\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n\u003c!-- If you can, link to the line of code that might be responsible for the problem. --\u003e","state":"closed","created_at":"2021-04-29T19:45:43.725Z","updated_at":"2021-07-26T21:21:17.849Z","closed_at":"2021-07-26T21:21:17.836Z","closed_by":{"id":428430,"username":"poffey21","name":"Tim Poffenbarger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/428430/avatar.png","web_url":"https://gitlab.com/poffey21"},"labels":["Category:Source Code Management","Deliverable","GitLab Core","customer","devops::create","forking","frontend","group::source code","regression","regression:13.12","section::dev","type::bug","workflow::verification"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":428430,"username":"poffey21","name":"Tim Poffenbarger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/428430/avatar.png","web_url":"https://gitlab.com/poffey21"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329575","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329575","notes":"https://gitlab.com/api/v4/projects/278964/issues/329575/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329575/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329575","relative":"#329575","full":"gitlab-org/gitlab#329575"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86244351,"iid":329572,"project_id":278964,"title":"Make Gitlab database library compatible with Rails 6.1","description":"### Summary\n\n1. Rails 6.0 triggers the following deprecation warning:\n\n```\nDEPRECATION WARNING: Accessing hashes returned from config_for by non-symbol keys is deprecated and will be removed in Rails 6.1. Use symbols for access instead.\n```\n\nThat means that [accessing database configuration values by string key](https://gitlab.com/gitlab-org/gitlab/-/blob/e16f9470727c56f4ea5593a02e7125409fbc348c/ee/lib/gitlab/database/load_balancing.rb#L39) is no longer working in Rails 6.1.\n\n2. A database now has multiple configurations due to introduced support for horizontal sharding.\n\nThe changelog is here: https://github.com/rails/rails/blob/6-1-stable/activerecord/CHANGELOG.md\n\n### Current work\n\nThe [Rails Upgrade MR ](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59107)introduces the changes that fixes some of the tests: \n\n- :white_check_mark:  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59107/diffs?commit_id=92ab2ed5844f62354c8fdf99e558493b9a28d40e =\u003e https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61095\n- :white_check_mark:  https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59107/diffs?commit_id=454be26e312e1ec3a6ba0cb4002030b906a3c80a =\u003e https://gitlab.com/gitlab-org/gitlab/-/merge_requests/61323\n- :x: https://gitlab.com/gitlab-org/gitlab/-/merge_requests/59107/diffs?commit_id=0d464ba425f858dd9a5ccbbf01ee30138362babe. Can't make this work for Rails 6.0. Very tiny changes to spec/lib/gitlab/database/with_lock_retries_spec.rb:244 anyway.\n\nLet's check whether these changes are compatible with Rails 6.0 and are reasonable to be merged :rocket:\n\nConfidence level 75%","state":"closed","created_at":"2021-04-29T19:32:45.323Z","updated_at":"2022-05-31T12:23:20.019Z","closed_at":"2021-05-14T21:10:01.662Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["devops::data_stores","group::pods","rails6.1","wg_database-scalability"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"}],"author":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"type":"ISSUE","assignee":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2021-05-12","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329572","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329572","notes":"https://gitlab.com/api/v4/projects/278964/issues/329572/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329572/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329572","relative":"#329572","full":"gitlab-org/gitlab#329572"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5837,"epic":{"id":255779,"iid":5837,"title":"Upgrade to Rails 6.1","url":"/groups/gitlab-org/-/epics/5837","group_id":9970,"human_readable_end_date":"Jun 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86243255,"iid":329563,"project_id":278964,"title":"Jaeger tracing docs page and empty state text don't match current experience","description":"### Problem\n\nAt some point, we updated the Jaeger tracing nav item under settings Operations to be an iframe rather than a link to Jaeger. However, the docs and the empty state were never updated to reflect this change. From the empty state and the docs, it still sounds like we're utilizing the nav to link to Jaeger rather than embedding an image.\n\n| Current \"experience\" | Current empty state |\n| ------ | ------ |\n| ![Screen_Shot_2021-04-29_at_10.50.33_AM](/uploads/600e1de914e0d5a0c6794c1403ebb441/Screen_Shot_2021-04-29_at_10.50.33_AM.png)  | ![Screen_Shot_2021-04-29_at_10.49.12_AM](/uploads/731e06bb26cf248cc31f3b7adc104fba/Screen_Shot_2021-04-29_at_10.49.12_AM.png) |\n\nCurrent docs are visible [here](https://docs.gitlab.com/ee/operations/tracing.html#link-to-jaeger). \n\n### Proposal\n\nUpdate the empty state message to the following:\n\n\u003e Add a Jaeger URL to replace this image with an embedded view of your Jaeger server. You must first [install Jaeger](url)(external link icon).\n\nUpdate the [docs](https://docs.gitlab.com/ee/operations/tracing.html#link-to-jaeger) as follows:\n\n\u003e You can now visit Operations \u003e Tracing in your project's sidebar and GitLab displays an embedded view of your Jaeger server.","state":"closed","created_at":"2021-04-29T19:00:32.000Z","updated_at":"2022-02-01T19:46:21.415Z","closed_at":"2022-02-01T19:46:21.346Z","closed_by":{"id":9304687,"username":"abellucci","name":"Alana Bellucci","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9304687/avatar.png","web_url":"https://gitlab.com/abellucci"},"labels":["SUS::Impacting","Technical Writing","UI text","UX","[deprecated] Accepting merge requests","devops::monitor","follow-up","frontend","group::respond","priority::3","section::ops","severity::3","workflow::ready for development"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"type":"ISSUE","assignee":null,"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329563","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329563","notes":"https://gitlab.com/api/v4/projects/278964/issues/329563/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329563/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329563","relative":"#329563","full":"gitlab-org/gitlab#329563"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86242907,"iid":329561,"project_id":278964,"title":"API Fuzzing and DAST API should always generate a report","description":"### Problem\nIf a DAST API job or API Fuzzing job is run and no report is generated, did it ever run? For auditability, and record keeping, a report should always be generated even if no vulnerabilities are found. The vulnerabilities array would simply be empty.\n\n### Proposal\n\nModify ci script to always generate report. The report controller is already able to generate an empty report.\n\nTasks:\n\n1. [x] Modify `ci` script to always generate report, even when no findings\n1. [x] Add test to `worker-entry` to verify\n1. [x] Release new container image","state":"closed","created_at":"2021-04-29T18:50:49.045Z","updated_at":"2021-06-22T16:57:06.834Z","closed_at":"2021-06-22T16:57:06.817Z","closed_by":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"labels":["Category:DAST","backend","devops::secure","feature::enhancement","group::dynamic analysis","section::sec","type::feature","workflow::verification"],"milestone":{"id":1850118,"iid":61,"group_id":9970,"title":"14.1","description":"","state":"closed","created_at":"2021-01-26T16:56:41.887Z","updated_at":"2022-04-21T07:25:22.879Z","due_date":"2021-07-17","start_date":"2021-06-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/61"},"assignees":[{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"}],"author":{"id":4310743,"username":"sethgitlab","name":"Seth Berger","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4310743/avatar.png","web_url":"https://gitlab.com/sethgitlab"},"type":"ISSUE","assignee":{"id":6121997,"username":"mikeeddington","name":"Michael Eddington","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/6121997/avatar.png","web_url":"https://gitlab.com/mikeeddington"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329561","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":3},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"3 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329561","notes":"https://gitlab.com/api/v4/projects/278964/issues/329561/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329561/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329561","relative":"#329561","full":"gitlab-org/gitlab#329561"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":86241572,"iid":329556,"project_id":278964,"title":"Geo: Improve test coverage and finish the refactor of \"LfsObject.replicables_for_current_secondary\"","description":"The following discussion from !60539 should be addressed:\n\n- [ ] @ibaum started a [discussion](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/60539#note_563144105):  (+4 comments)\n\n    \u003e \u003e although I wonder if there is a spec missing somewhere that could have caught something like this? Let me know what you think\n    \u003e \n    \u003e It is important that this particular method be well-tested. But since the preexisting changes were intended to be a refactor, and since the selective sync logic already exists in `GeoNode#lfs_objects` which does [test major cases of different selective sync settings](https://gitlab.com/gitlab-org/gitlab/-/blob/f2db72fb03f25282c3b9d67835b574612615bf93/ee/spec/models/geo_node_spec.rb#L827), I think this bug fix is fair as-is.\n    \u003e \n    \u003e But I think it's worth opening a ~\"technical debt\" issue to improve coverage and \"finish\" the intended refactor by drawing from similar changes we've made to other models, see https://gitlab.com/gitlab-org/gitlab/-/merge_requests/37874. I'll do that with this discussion.","state":"closed","created_at":"2021-04-29T18:27:38.188Z","updated_at":"2021-10-28T13:57:09.501Z","closed_at":"2021-05-04T16:10:23.303Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["devops::systems","group::geo","maintenance::refactor","section::enablement","test","type::maintenance"],"milestone":null,"assignees":[],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329556","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329556","notes":"https://gitlab.com/api/v4/projects/278964/issues/329556/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329556/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329556","relative":"#329556","full":"gitlab-org/gitlab#329556"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3113,"epic":{"id":43808,"iid":3113,"title":"Geo: Move LFS files to Self-Service Framework","url":"/groups/gitlab-org/-/epics/3113","group_id":9970,"human_readable_end_date":"Feb 22, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":86241145,"iid":329554,"project_id":278964,"title":"First run for Snowplow event dictionary entries","description":"With the event dictionary in place, we can start creating `.yml` files for the current events. This will cover backend events first.\n\n### Used script\n\n###### [events.csv](https://docs.google.com/spreadsheets/d/1CwChRvItO64e7OmDnUqLgOXjt61MUDGJcRtICGLo7-Q/edit#gid=1606991006)\n```csv\ndescription,category,action,product_section,product_group,distributions,tiers\ndescription1,category1,action1,product_section1,product_group1,ce;ee,free\ndescription2,category2,action2,product_section2,product_group2,ee,premium;ultimate\n```\n\n###### generator.js\n```js\nconst fs = require('fs');\nconst csv = require('csv-parser');\n\nconst SOURCE_FILE_PATH = './events.csv';\nconst FOLDER_PATH = './event_dictionary_generator_output';\nconst ARRAY_SEPARATOR = ';';\n\nconst baseTemplate = `description:\ncategory:\naction:\nproperty_description:\nvalue_description:\nextra_properties:\nidentifiers:\nproduct_section:\nproduct_stage:\nproduct_group:\nproduct_category:\nmilestone:\nintroduced_by_url:\ndistributions:\ntiers:\n`;\n\ncreateFolderIfNeeded();\niterateRows();\n\nfunction createFolderIfNeeded() {\n  if (!fs.existsSync(FOLDER_PATH)) {\n    fs.mkdirSync(FOLDER_PATH);\n  }\n}\n\nfunction iterateRows() {\n  fs.createReadStream(SOURCE_FILE_PATH).pipe(csv()).on('data', createFileFromRow);\n}\n\nfunction createFileFromRow(row) {\n  let template = String(baseTemplate);\n\n  for (const [name, value] of Object.entries(row)) {\n    const label = `${name}:`;\n    const isArray = value.includes(ARRAY_SEPARATOR) || ['distributions', 'tiers'].includes(name);\n\n    if (isArray) {\n      const items = value.split(ARRAY_SEPARATOR).join('\\n- ');\n      template = template.replace(label, `${label}\\n- ${items}`);\n    } else {\n      template = template.replace(label, `${label} ${value}`);\n    }\n  }\n\n  console.log(template);\n  // Create file\n}\n```\n\n###### Example output\n```yaml\ndescription: description1\ncategory: category1\naction: action1\nproperty_description:\nvalue_description:\nextra_properties:\nidentifiers:\nproduct_section: product_section1\nproduct_stage:\nproduct_group: product_group1\nproduct_category:\nmilestone:\nintroduced_by_url:\ndistributions:\n- ce\n- ee\ntiers:\n- free\n```\n```yaml\ndescription: description2\ncategory: category2\naction: action2\nproperty_description:\nvalue_description:\nextra_properties:\nidentifiers:\nproduct_section: product_section2\nproduct_stage:\nproduct_group: product_group2\nproduct_category:\nmilestone:\nintroduced_by_url:\ndistributions:\n- ee\ntiers:\n- premium\n- ultimate\n```","state":"closed","created_at":"2021-04-29T18:17:34.510Z","updated_at":"2021-11-11T00:04:43.800Z","closed_at":"2021-07-19T15:56:14.075Z","closed_by":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"labels":["devops::growth","frontend","group::product intelligence","missed:13.12","missed:14.0","missed:14.1","section::growth","workflow::production"],"milestone":{"id":1850126,"iid":62,"group_id":9970,"title":"14.2","description":"","state":"active","created_at":"2021-01-26T16:57:35.404Z","updated_at":"2021-07-22T19:45:42.498Z","due_date":"2021-08-17","start_date":"2021-07-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/62"},"assignees":[{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"}],"author":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"type":"ISSUE","assignee":{"id":5412956,"username":"agarciatesares","name":"Axel García","state":"active","avatar_url":"https://secure.gravatar.com/avatar/11d24c6151c640aa435f8de30a01f5b8?s=80\u0026d=identicon","web_url":"https://gitlab.com/agarciatesares"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/329554","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/329554","notes":"https://gitlab.com/api/v4/projects/278964/issues/329554/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/329554/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#329554","relative":"#329554","full":"gitlab-org/gitlab#329554"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5247,"epic":{"id":185219,"iid":5247,"title":"Snowplow Dictionary","url":"/groups/gitlab-org/-/epics/5247","group_id":9970,"human_readable_end_date":"May 30, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]