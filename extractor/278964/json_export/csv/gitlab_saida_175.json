[{"id":24699485,"iid":30014,"project_id":278964,"title":"Charts scroll handle icon has disappeared","description":"### Summary\n\nThe custom icon for the charts scroll handle has disappeared from CE/EE charts. Currently, the ECharts default icon is showing up (at a very small size)\n\n![Screen_Shot_2019-07-09_at_7.28.34_PM](/uploads/dfdf35119ebc880bb6c2b0bbc17e255f/Screen_Shot_2019-07-09_at_7.28.34_PM.png)\n\n### What is the expected *correct* behavior?\n\nThe icon show in [GitLab UI](https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/charts-area-chart--with-zoom-and-scroll) should be used instead.","state":"closed","created_at":"2019-07-10T15:46:55.760Z","updated_at":"2019-10-03T19:23:32.386Z","closed_at":"2019-10-03T19:23:32.332Z","closed_by":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"labels":["Charts","component:chart","devops::monitor","frontend","group::respond","pajamas::style [DEPRECATED]","priority::3","severity::3","type::bug","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"}],"author":{"id":2799498,"username":"ameliabauerly","name":"Amelia Bauerly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2799498/avatar.png","web_url":"https://gitlab.com/ameliabauerly"},"type":"ISSUE","assignee":{"id":3946912,"username":"lauraX","name":"Laura Montemayor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3946912/avatar.png","web_url":"https://gitlab.com/lauraX"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30014","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30014","notes":"https://gitlab.com/api/v4/projects/278964/issues/30014/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30014/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30014","relative":"#30014","full":"gitlab-org/gitlab#30014"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22672113,"iid":12755,"project_id":278964,"title":"[FE] Group Cycle Analytics Over Time - (3) Charts showing Group Cycle Analytics Over Time","description":"Part of #12078 - please see issue description for problem statement. Breaking down at the request of engineering.\n\nImplementing analytics at an instance level will allow us to move forward with our vision for VSM and have one place for dashboards, which can be used by developers, managers and executives. Many customers have expressed interest in instance level analytics with customizable dashboards allowing users to drill-down in order to uncover actionable insights. (https://gitlab.com/gitlab-org/gitlab-ce/issues/48807)\n\n* [ ] Let's have a scatterplot with the specific day of completion on the x-axis and number of days it took from `X` to `Y` as our first attempt to answer the question as to whether people are getting better with time. The chart should contain a trend line (rolling median - 30 days?)+ 25-75% quantile bands. We should have a dropdown where a user can select which stage they want to look at and they should be able to select more than one, so that the trend line will be the sum of days for those stages selected. We can have different color dots representing the different stages. If this looks too messy, we can combine the stages in 1 dot.\n~~* [ ] Let's have an area chart, similar to a cumulative flow graph, where we chart the rolling median for each stage over time. The idea would be that when we can customize the stages, we can potentially represent as [cumulative flow digram](https://www.youtube.com/watch?v=eo2uv8avEsU).~~\n\n~~Let's have the charts in 1 line as per https://gitlab.com/gitlab-org/gitlab-ee/issues/6019#note_181567214 since we know we want to move to such a dashboard view.~~","state":"closed","created_at":"2019-07-10T14:58:13.963Z","updated_at":"2020-10-29T14:38:44.124Z","closed_at":"2019-12-03T13:30:33.432Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["Category:Value Stream Management","Deliverable","Enterprise Edition","GitLab Premium","Manage [DEPRECATED]","breadth","devops::manage","estimation::completed","group::optimize","missed-deliverable","missed:12.1","missed:12.3","missed:12.4","missed:12.5","priority::1","product discovery [DEPRECATED]","type::feature","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12755","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12755","notes":"https://gitlab.com/api/v4/projects/278964/issues/12755/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12755/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12755","relative":"#12755","full":"gitlab-org/gitlab#12755"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22672071,"iid":12754,"project_id":278964,"title":"[FE] Group Cycle Analytics Over Time - (2) Apply a filter","description":"Part of #12078 - please see issue description for problem statement. Breaking down at the request of engineering.\n\nImplementing analytics at an instance level will allow us to move forward with our vision for VSM and have one place for dashboards, which can be used by developers, managers and executives. Many customers have expressed interest in instance level analytics with customizable dashboards allowing users to drill-down in order to uncover actionable insights. (https://gitlab.com/gitlab-org/gitlab-ce/issues/48807)\n\n* [ ] Given we will only have group level analytics as an MVC for instance, a user should be able to filter by group, project, subgroup or specific calendar dates using a date picker (http://www.daterangepicker.com). (filtering by author, assignee, milestone, labels will be kept for another iteration)","state":"closed","created_at":"2019-07-10T14:57:01.475Z","updated_at":"2020-10-29T14:38:44.628Z","closed_at":"2019-09-10T09:26:18.064Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["Category:Value Stream Management","Deliverable","Enterprise Edition","GitLab Premium","Manage [DEPRECATED]","breadth","devops::manage","estimation::completed","group::optimize","missed-deliverable","missed:12.1","missed:12.2","priority::1","product discovery [DEPRECATED]","type::feature"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12754","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12754","notes":"https://gitlab.com/api/v4/projects/278964/issues/12754/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12754/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12754","relative":"#12754","full":"gitlab-org/gitlab#12754"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22672000,"iid":12753,"project_id":278964,"title":"[FE] Group Cycle Analytics Over Time - (1) Get Cycle Analytics to work on Group Level","description":"Part of #12078 - please see issue description for problem statement. Breaking down at the request of engineering.\n\n\nImplementing analytics at an instance level will allow us to move forward with our vision for VSM and have one place for dashboards, which can be used by developers, managers and executives. Many customers have expressed interest in instance level analytics with customizable dashboards allowing users to drill-down in order to uncover actionable insights. (https://gitlab.com/gitlab-org/gitlab-ce/issues/48807)\n\n* [ ] Replicate cycle analytics logic on a group level on a separate page as part of \\[Analytics\\] (https://gitlab.com/gitlab-org/gitlab-ee/issues/12077) new top Nav button.","state":"closed","created_at":"2019-07-10T14:54:29.392Z","updated_at":"2020-10-29T14:38:45.191Z","closed_at":"2019-09-26T12:54:35.099Z","closed_by":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"labels":["Category:Value Stream Management","Deliverable","Enterprise Edition","GitLab Premium","Manage [DEPRECATED]","breadth","devops::manage","estimation::completed","group::optimize","missed-deliverable","missed:12.1","missed:12.2","missed:12.3","priority::1","product discovery [DEPRECATED]","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"}],"author":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"type":"ISSUE","assignee":{"id":3101551,"username":"blabuschagne","name":"Brandon Labuschagne","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3101551/avatar.png","web_url":"https://gitlab.com/blabuschagne"},"user_notes_count":65,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12753","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12753","notes":"https://gitlab.com/api/v4/projects/278964/issues/12753/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12753/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12753","relative":"#12753","full":"gitlab-org/gitlab#12753"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699470,"iid":30010,"project_id":278964,"title":"Add queries to auto generated Graphql docs","description":"The current state of documentation renderer for GraphQL only generates  \ndocumentation for object types, like Project, MergeRequest, User etc.  \n\nTo make the generated docs more useful we should generate documentation for **queries**.    \n\n## Proposal  \n\nAdd queries to the template used for generating the docs. Each query has a return type\nand it should be linked to its correspondent object documentation which is already generated.  \n\n* We can consider moving objects to a separate page if rendering queries and objects in just one page does not look good.(Can be done if needed in another issue)  \n\nEDIT: We decided to add queries to the same page of types for a first iteration.\n\n## How to do it  \n\nQuery objects can be accessed using a helper method called `graphql_operation_types` on the [default template](`lib/gitlab/graphql/docs/templates/default.md.haml`). Once the necessary changes are made to the template run `rake gitlab:graphql:compile_docs` and check the generated docs.","state":"closed","created_at":"2019-07-10T14:51:22.056Z","updated_at":"2021-02-17T13:19:42.742Z","closed_at":"2021-02-17T13:19:42.696Z","closed_by":{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"labels":["GraphQL","backend","devops::plan","documentation","group::product planning","section::dev","workflow::in dev"],"milestone":{"id":1233760,"iid":56,"group_id":9970,"title":"13.9","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.334Z","updated_at":"2022-04-21T07:21:28.468Z","due_date":"2021-02-17","start_date":"2021-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/56"},"assignees":[{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/30010","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/30010","notes":"https://gitlab.com/api/v4/projects/278964/issues/30010/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/30010/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#30010","relative":"#30010","full":"gitlab-org/gitlab#30010"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1581,"epic":{"id":9465,"iid":1581,"title":"Improve GraphQL generated documentation","url":"/groups/gitlab-org/-/epics/1581","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22661240,"iid":12746,"project_id":278964,"title":"Geo: A rake task to perform post-omnibus Geo update steps in Zero downtime deployments","description":"### Problem to solve\n\nWhen updating [Geo in a zero-downtime](https://docs.gitlab.com/omnibus/update/README.html#geo-deployment), a systems administrator has to perform several manual steps per node. This is error prone and we aim to reduce the number of manual steps required to update Geo.\n\n### Intended users\n\n* [Systems administrators](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sidney-systems-administrator)\n\n### Further details\n\nThis feature is part of our strategy to improve the user experience of Geo by reducing manual interventions.\n\n### Proposal\n\nWhen [updating a Geo deployment using the Zero Downtime instructions](https://docs.gitlab.com/omnibus/update/README.html#geo-deployment) a systems administrator needs to ~~manually perform 8 steps~~ (after https://gitlab.com/gitlab-org/omnibus-gitlab/merge_requests/3562 is merged, 4 + 1 steps).\n\nWe aim to reduce these steps for both the primary and secondary nodes to a single rake task e.g. `gitlab-rake gitlab:geo:update`\n\nIn https://gitlab.com/gitlab-org/omnibus-gitlab/issues/4637 we've realized we cannot create a single task for this, but we need a _before_ and _after_. This is the current proposal:\n\n| Before                                                             | After                                          |\n|--------------------------------------------------------------------|------------------------------------------------|\n| `SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-ctl reconfigure` |                                                |\n| `sudo gitlab-ctl hup unicorn` (optional)                           | `gitlab-rake gitlab:geo:update`                |\n| `sudo gitlab-ctl hup sidekiq` (optional)                           |                                                |\n| **update GitLab on other machines in cluster**                     | **update GitLab on other machines in cluster** |\n| `sudo gitlab-rake db:migrate`                                      | `gitlab-rake gitlab:geo:post-update`           |\n| `sudo gitlab-rake gitlab:geo:check`                                |                                                |\n\n### Documentation\n\nN/A\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n- The number of manual interventions is reduced by 50%.\n- Geo update procedure is the same on primary and secondaries.\n- A single rake task for Geo updates\n\n### What is the type of buyer? \n\n* Premium\n* Ultimate\n\n### Links / references","state":"closed","created_at":"2019-07-10T09:47:38.304Z","updated_at":"2019-12-11T20:02:20.103Z","closed_at":"2019-09-26T06:39:02.027Z","closed_by":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"labels":["Deliverable","Enterprise Edition","Geo Administration","devops::systems","group::geo","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"user_notes_count":14,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12746","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12746","notes":"https://gitlab.com/api/v4/projects/278964/issues/12746/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12746/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12746","relative":"#12746","full":"gitlab-org/gitlab#12746"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1450,"epic":{"id":8254,"iid":1450,"title":"Geo:  Simplify Geo upgrade process","url":"/groups/gitlab-org/-/epics/1450","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22652855,"iid":12743,"project_id":278964,"title":"Geo: Generate job artifact checksums","description":"Follow up for https://gitlab.com/gitlab-org/gitlab-ee/issues/8921 / https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14477 which validates checksums after transfer.\n\n## Problem\n\nMany/most artifacts don't have a checksum. Checksums are only generated for traces when they are archived. So the secondary is unable to validate these artifacts after transfer.\n\n## Proposal\n\nChecksum all artifacts on creation.\n\nTake a cue from the Upload model. If the file is large (\u003e 100MB), do it asynchronously. In this case, small artifacts would get verified on transfer. Large artifacts might not be verified on transfer. This is ok, since we'll be implementing constant reverification within a milestone or two, so large artifacts will be verified eventually.\n\nFor reference, on my Macbook Pro I checksummed (SHA256) a 1.2GB file in 5s, and a 5GB file in 8s.\n\nQuestion: Is it insufficient to checksum \"on_create\" of the record, since e.g. it sounds like traces mutate until they are archived?\n\n## Close without doing anything proposal\n\nAs mentioned above,\n\n\u003e we'll be implementing constant reverification within a milestone or two\n\nSo all artifacts will be verified by that process, eventually. Not perfect, but maybe good enough.","state":"closed","created_at":"2019-07-10T05:02:17.490Z","updated_at":"2019-12-16T14:49:38.699Z","closed_at":"2019-08-16T21:35:38.214Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Category:Geo Replication","Enterprise Edition","devops::systems","geo::planning","group::geo","needs weight"],"milestone":null,"assignees":[],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":null,"user_notes_count":3,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12743","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12743","notes":"https://gitlab.com/api/v4/projects/278964/issues/12743/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12743/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12743","relative":"#12743","full":"gitlab-org/gitlab#12743"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1430,"epic":{"id":8109,"iid":1430,"title":"Geo: Verify all replicated data","url":"/groups/gitlab-org/-/epics/1430","group_id":9970,"human_readable_end_date":"Jan 1, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22651876,"iid":12742,"project_id":278964,"title":"Remove quarantine_push_size_check feature flag","description":"In https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/13460, we implemented the functionality to check if push exceeds the repository size limit using the quarantine directory. A feature flag (enabled by default) named `quarantine_push_size_check` was added so we can easily disable the functionality and revert back to old behavior if problem occurs.\n\nIt's been running on production for less than a month now (12.0) as of this writing. We should remove this feature flag in a feature release.","state":"closed","created_at":"2019-07-10T03:22:17.220Z","updated_at":"2019-08-15T10:58:14.439Z","closed_at":"2019-08-15T10:58:14.323Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Create [DEPRECATED]","Enterprise Edition","Stretch","backend","backstage [DEPRECATED]","devops::create","group::source code","repository","workflow::verification"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":5,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12742","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12742","notes":"https://gitlab.com/api/v4/projects/278964/issues/12742/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12742/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12742","relative":"#12742","full":"gitlab-org/gitlab#12742"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22649181,"iid":12739,"project_id":278964,"title":"Incomplete Group Audit Logs in Group View","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nSome `AuditEvents` are not available in the group audit event view available to group Owners/Maintainers, but are present in the site admin audit event views.\n\n### Steps to reproduce\n\nI'm still trying to reproduce this reliably.\n\n### Example Project\n\nThis is currently happening to the `gitlab-org` group.\n\n### What is the current *bug* behavior?\n\nThe group level audit events are not showing any events past mid day on June 28: https://gitlab.com/groups/gitlab-org/-/audit_events\n\n![Audit_Events___Settings___GitLab_org___GitLab](/uploads/def0e6d1a7cf695f5e126a2e0e6fa09f/Audit_Events___Settings___GitLab_org___GitLab.png)\n\nThe newer events are viewable in the admin area: https://gitlab.com/admin/audit_logs?event_type=Group\u0026group_id=9970\u0026page=2\n\n![Audit_Log___Admin_Area___GitLab](/uploads/eb4a74010aa1b16350a322a644b92009/Audit_Log___Admin_Area___GitLab.png)\n\n### What is the expected *correct* behavior?\n\nThe events in both views should be identical.\n\n### Output of checks\n\nThis bug happens on GitLab.com.\n\n\n### Possible fixes","state":"closed","created_at":"2019-07-09T23:05:26.783Z","updated_at":"2019-10-16T07:16:45.666Z","closed_at":"2019-10-16T07:16:45.620Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["Category:Audit Events","Enterprise Edition","devops::manage","group::compliance","internal customer","priority::3","security","severity::3","type::bug","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12739","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12739","notes":"https://gitlab.com/api/v4/projects/278964/issues/12739/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12739/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12739","relative":"#12739","full":"gitlab-org/gitlab#12739"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699428,"iid":29992,"project_id":278964,"title":"Last pipeline status leaked for MRs via MR widget","description":"**[HackerOne report #638494](https://hackerone.com/reports/638494)** by `xanbanx` on 2019-07-09:\n\n### Summary\n\nGitLab has the feature to disable pipelines for non-project members on public project. The intend here is that only project members are granted to access the pipeline information. However, the last pipeline status of a build of an associated merge request is leaked via the JSON data for the merge request widget.\n\n### Steps to reproduce\n\n1. Create a public project, set Pipelines visibility to project members only, and disable public pipelines  \n2. Push something to the repo such that CI is working, e.g., just the BASH `gitlab-ci.yml` example file  \n3. Push some changes and create a merge request  \n4. As a non-project member perform the following GET request: `https://example.gitlab.com/\u003cnamespace\u003e/\u003cproject\u003e/merge_requests/1/widget.json`  Since merge requests are available for public users, this will return a JSON response like the following:\n\n```json  \n{\n    \"id\": 32300194,  \n    \"iid\": 1,  \n    \"description\": \"Closes #1 \",  \n    \"title\": \"Update README.md\",  \n    \"approvals_before_merge\": 0,  \n    \"blob_path\": {  \n        \"head_path\": \"/wter23/project-with-mr/blob/848b46959a474e964baa592275b8bfd9e66e7f2f\"  \n    },  \n    \"pipeline_id\": 70161693,  \n    \"vulnerability_feedback_path\": \"/wter23/project-with-mr/vulnerability_feedback\",  \n    \"create_vulnerability_feedback_issue_path\": null,  \n    \"create_vulnerability_feedback_merge_request_path\": null,  \n    \"create_vulnerability_feedback_dismissal_path\": null,  \n    \"rebase_commit_sha\": null,  \n    \"rebase_in_progress\": false,  \n    \"merge_pipelines_enabled\": false,  \n    \"merge_trains_enabled\": false,  \n    \"can_push_to_source_branch\": false,  \n    \"has_approvals_available\": true,  \n    \"rebase_path\": null,  \n    \"approvals_path\": \"/wter23/project-with-mr/merge_requests/1/approvals\",  \n    \"api_approvals_path\": \"/api/v4/projects/13062357/merge_requests/1/approvals\",  \n    \"api_approval_settings_path\": \"/api/v4/projects/13062357/merge_requests/1/approval_settings\",  \n    \"api_approve_path\": \"/api/v4/projects/13062357/merge_requests/1/approve\",  \n    \"api_unapprove_path\": \"/api/v4/projects/13062357/merge_requests/1/unapprove\",  \n    \"blocking_merge_requests\": {  \n        \"total_count\": 0,  \n        \"hidden_count\": 0,  \n        \"visible_merge_requests\": {}  \n    },  \n    \"state\": \"opened\",  \n    \"in_progress_merge_commit_sha\": null,  \n    \"merge_commit_sha\": null,  \n    \"short_merge_commit_sha\": null,  \n    \"merge_error\": null,  \n    \"merge_params\": {  \n        \"force_remove_source_branch\": \"1\"  \n    },  \n    \"merge_status\": \"can_be_merged\",  \n    \"merge_user_id\": null,  \n    \"auto_merge_enabled\": false,  \n    \"auto_merge_strategy\": null,  \n    \"available_auto_merge_strategies\": [],  \n    \"source_branch\": \"test\",  \n    \"source_branch_protected\": false,  \n    \"source_project_id\": 13062357,  \n    \"source_project_full_path\": \"wter23/project-with-mr\",  \n    \"squash\": false,  \n    \"target_branch\": \"master\",  \n    \"target_branch_sha\": \"7f6f7d7094b3e5becfa5091ecae5eb7b0e92d8ce\",  \n    \"target_project_id\": 13062357,  \n    \"target_project_full_path\": \"wter23/project-with-mr\",  \n    \"allow_collaboration\": false,  \n    \"should_be_rebased\": false,  \n    \"ff_only_enabled\": false,  \n    \"metrics\": null,  \n    \"merge_user\": null,  \n    \"diff_head_sha\": \"848b46959a474e964baa592275b8bfd9e66e7f2f\",  \n    \"default_squash_commit_message\": \"Update README.md\",  \n    \"default_merge_commit_message\": \"Merge branch 'test' into 'master'\\n\\nUpdate README.md\\n\\nCloses #1\\n\\nSee merge request wter23/project-with-mr!1\",  \n    \"default_merge_commit_message_with_description\": \"Merge branch 'test' into 'master'\\n\\nUpdate README.md\\n\\nCloses #1 \\n\\nSee merge request wter23/project-with-mr!1\",  \n    \"commits_without_merge_commits\": [  \n        {  \n            \"message\": \"Add new file\",  \n            \"short_id\": \"848b4695\",  \n            \"title\": \"Add new file\"  \n        },  \n        {  \n            \"message\": \"Update README.md\",  \n            \"short_id\": \"06121f78\",  \n            \"title\": \"Update README.md\"  \n        }  \n    ],  \n    \"commits_count\": 2,  \n    \"merge_ongoing\": false,  \n    \"work_in_progress\": false,  \n    \"source_branch_exists\": true,  \n    \"mergeable_discussions_state\": true,  \n    \"branch_missing\": false,  \n    \"has_conflicts\": false,  \n    \"can_be_merged\": true,  \n    \"mergeable\": true,  \n    \"remove_source_branch\": true,  \n    \"project_archived\": false,  \n    \"only_allow_merge_if_pipeline_succeeds\": false,  \n    \"has_ci\": true,  \n    \"ci_status\": \"success\",  \n    \"source_branch_with_namespace_link\": \"\u003ca href=\\\"/wter23/project-with-mr/tree/test\\\"\u003etest\u003c/a\u003e\",  \n    \"source_branch_path\": \"/wter23/project-with-mr/-/branches/test\",  \n    \"current_user\": {  \n        \"can_remove_source_branch\": false,  \n        \"can_revert_on_current_merge_request\": false,  \n        \"can_cherry_pick_on_current_merge_request\": false,  \n        \"can_create_note\": false,  \n        \"can_create_issue\": false,  \n        \"can_update\": false  \n    },  \n    \"target_branch_commits_path\": \"/wter23/project-with-mr/commits/master\",  \n    \"target_branch_tree_path\": \"/wter23/project-with-mr/tree/master\",  \n    \"new_blob_path\": null,  \n    \"conflict_resolution_path\": null,  \n    \"remove_wip_path\": null,  \n    \"cancel_auto_merge_path\": null,  \n    \"create_issue_to_resolve_discussions_path\": null,  \n    \"merge_path\": null,  \n    \"cherry_pick_in_fork_path\": null,  \n    \"revert_in_fork_path\": null,  \n    \"email_patches_path\": \"/wter23/project-with-mr/merge_requests/1.patch\",  \n    \"plain_diff_path\": \"/wter23/project-with-mr/merge_requests/1.diff\",  \n    \"merge_request_basic_path\": \"/wter23/project-with-mr/merge_requests/1.json?serializer=basic\",  \n    \"merge_request_widget_path\": \"/wter23/project-with-mr/merge_requests/1/widget.json\",  \n    \"ci_environments_status_path\": \"/wter23/project-with-mr/merge_requests/1/ci_environments_status\",  \n    \"diverged_commits_count\": 0,  \n    \"create_note_path\": \"/wter23/project-with-mr/notes?target_id=32300194\u0026target_type=merge_request\",  \n    \"commit_change_content_path\": \"/wter23/project-with-mr/merge_requests/1/commit_change_content\",  \n    \"preview_note_path\": \"/wter23/project-with-mr/preview_markdown?target_id=1\u0026target_type=MergeRequest\",  \n    \"merge_commit_path\": null,  \n    \"test_reports_path\": null,  \n    \"can_receive_suggestion\": true,  \n    \"conflicts_docs_path\": \"/help/user/project/merge_requests/resolve_conflicts.md\",  \n    \"merge_request_pipelines_docs_path\": \"/help/ci/merge_request_pipelines/index.md\"  \n}\n```  \nHere you see in the response the field `ci_status` leaking the CI status of the merge request. Furthermore, also the pipeline ID is leaking, but this is very minor.\n\n### Impact\n\nSee below.\n\n### Examples\n\nThis happens on gitlab.com. You can see this at `https://gitlab.com/wter23/project-with-mr/merge_requests/1/widget.json`.\n\n### What is the current *bug* behavior?\n\nCI status and pipeline ID are leaked to unauthorized users.\n\n### What is the expected *correct* behavior?\n\nDo not expose the pipeline ID and CI status to users, which do not have access to the pipeline information.\n\nBest regards,   \nXanbanx\n\n## Impact\n\nUnauthorized users, who can read merge request have access to the CI status information of this merge request. Any user, who does have merge request permission can iterate over all merge requests and can query the CI status information.\n\n## Proposal for the fix\n\nhttps://gitlab.com/gitlab-org/gitlab/issues/29992#note_286945114","state":"closed","created_at":"2019-07-09T22:12:40.974Z","updated_at":"2022-09-02T19:28:15.498Z","closed_at":"2020-03-27T16:26:07.517Z","closed_by":{"id":5054702,"username":"vdesousa","name":"Vitor Meireles De Sousa","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f44d19f10d5b0c54a02e79c13812ff77?s=80\u0026d=identicon","web_url":"https://gitlab.com/vdesousa"},"labels":["Category:Continuous Integration","HackerOne","Verify::P1","backend","devops::verify","group::pipeline execution","missed-deliverable","missed:12.8","priority::3","security","severity::3","workflow::production"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29992","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29992","notes":"https://gitlab.com/api/v4/projects/278964/issues/29992/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29992/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29992","relative":"#29992","full":"gitlab-org/gitlab#29992"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699419,"iid":29986,"project_id":278964,"title":"Private/internal repository enumeration via bruteforce on a vulnerable URL","description":"**[HackerOne report #637903](https://hackerone.com/reports/637903)** by `brxxn` on 2019-07-09:\n\n### Summary\n\nThis bug allows an attacker to determine whether or not a private repository exists. By navigating to `https://gitlab.com/[owner]/[repo]/blob/master/test.txt` while being signed out, you can determine whether or not a private repository exists. If it does not exist, it will respond with a `text/plain` response. Otherwise, it will respond with a `text/html` response. It does *not* allow file enumeration.\n\nKnowing this, an automated tool could be created to determine whether or not a private repository exists. Combined with a dictionary attack, brute-force could be used to discover work-in-progress or unannounced projects for a company.\n\n### Steps to reproduce\n\n1. Open two browser sessions  \n2. On one browser session, create a private or internal repository.  \n3. On the other browser session, visit the following URL: `https://gitlab.com/[owner]/[repo]/blob/master/test.txt`  \n4. Notice that it shows the login page.  \n5. Go to a non-existent repository.  \n6. The non-existent repository shows a `text/plain` response without a login form.\n\n### Examples\n\nPrivate project that exists: https://gitlab.com/brxxn/private-test-project/blob/master/test.txt  \nProject that does not exist: https://gitlab.com/brxxn/does-not-exist/blob/master/test.txt\n\n### What is the current *bug* behavior?\n\nLinks to non-existent repositories return a `text/plain` response, when it should return the HTML response with a login form.\n\n### What is the expected *correct* behavior?\n\nThe response contains HTML when the `text/plain` response.\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n## Impact\n\nUsers and corporations could have private projects hosted on a private GitLab instance or on GitLab.com discovered or upcoming ones revealed. An attacker could easily create a tool to brute-force URLs with a dictionary and checking the `Content-Type` header for a particular organization or user.","state":"closed","created_at":"2019-07-09T16:27:30.624Z","updated_at":"2019-11-27T22:48:58.600Z","closed_at":"2019-11-05T17:41:05.689Z","closed_by":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"labels":["Deliverable","HackerOne","backend","devops::create","group::source code","priority::3","security","severity::3"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":40375,"username":"kerrizor","name":"Kerri Miller","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/40375/avatar.png","web_url":"https://gitlab.com/kerrizor"},"user_notes_count":21,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29986","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29986","notes":"https://gitlab.com/api/v4/projects/278964/issues/29986/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29986/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29986","relative":"#29986","full":"gitlab-org/gitlab#29986"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699416,"iid":29984,"project_id":278964,"title":"Move MergeabilityCheckService processing to Sidekiq","description":"The following discussion from gitlab-ee!14577 should be addressed:\n\n- [ ] `@stanhu` started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14577#note_189654225):  (+4 comments)\n\n    \u003e `@oswaldo` This shouldn't block this merge request because I see the 500 errors need to be fixed, but I have a few questions:\n    \u003e 2. Also, should `MergeToRefService` be run synchronously? I'd imagine for large merges, this might tie up a Unicorn worker for a while.\n\n---\n\nIt was discussed at this MR the pros and cons of having this service being called _sync_ (Unicorn), which happens today whenever the MR is marked as unchecked - meaning the merge-ref is outdated along the `merge_status`. So when accessing the MR page, the merge-ref is updated in that scenario.\n\nWe've measured its performance with big MRs:\n\n\u003e Since it'll be executed whenever the source/target branches get updated and the user accesses the MR page, I've put this into a reasonably heavy test in a MR with **114 file changes**, **2882 additions** and **12802 deletions**. The repo target branch has **20k commits** and **142MB** in file size.\n\n\u003e It's taking around **1 second** to recalculate the merge-ref for it, which shows it's not a cheap operation. Important to bring up that we won't need to make this operation again if the source/target branches doesn't get updated.\n\nBut considering the lower performance with NFS we might see worse scenarios at self-hosted instances. Which means we should consider updating the merge-ref async at some point.\n\nWe got a few options under the radar:\n\n1. Updating merge-refs of MRs impacted by a push/update by scheduling jobs at the `MergeRequests::RefreshService`\n2. [Scheduling just the merge-ref update at `MergeabilityCheckService`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/app/services/merge_requests/mergeability_check_service.rb#L112) upon MR page access\n\nThe 1st would mean a big burst of workload for Gitaly at every push, which doesn't sound ideal. The 2nd sounds more reasonable, though that would mean:\n\n1. Direct callers such as [`CreatePipelineService`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/services/ee/merge_requests/create_pipeline_service.rb#L16) would need instant feedback of the ref, so a sync call would probably be required for that scenario.\n2. In order to use the ref to present diffs (https://gitlab.com/groups/gitlab-org/-/epics/854), we'll need to provide a \"ongoing\" state if this job wasn't finished yet.\n\ncc @DouweM","state":"closed","created_at":"2019-07-09T15:53:36.039Z","updated_at":"2021-10-27T10:44:40.029Z","closed_at":"2020-02-03T16:31:53.075Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Category:Code Review Workflow","Deliverable","Eng-Consumer::Infrastructure","Eng-Producer::Development","Engineering Allocation","GitLab.com Priority","Mechanical Sympathy","api","backend","backend-weight::1","backstage [DEPRECATED]","bug::performance","devops::create","frontend","frontend-weight::2","gitlab.com","group::code review","infradev","merge requests","missed-deliverable","missed:12.6","missed:12.7","priority::2","production request","severity::2","workflow::verification"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":37,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29984","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29984","notes":"https://gitlab.com/api/v4/projects/278964/issues/29984/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29984/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29984","relative":"#29984","full":"gitlab-org/gitlab#29984"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":854,"epic":{"id":4574,"iid":854,"title":"🧮 Use merge refs for diffs","url":"/groups/gitlab-org/-/epics/854","group_id":9970,"human_readable_end_date":"Sep 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22639309,"iid":12732,"project_id":278964,"title":"Move MergeabilityCheckService processing to Sidekiq","description":"The following discussion from !14577 should be addressed:\n\n- [ ] `@stanhu` started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14577#note_189654225):  (+4 comments)\n\n    \u003e `@oswaldo` This shouldn't block this merge request because I see the 500 errors need to be fixed, but I have a few questions:\n    \u003e 2. Also, should `MergeToRefService` be run synchronously? I'd imagine for large merges, this might tie up a Unicorn worker for a while.\n\n---\n\nIt was discussed at this MR the pros and cons of having this service being called _sync_ (Unicorn), which happens today whenever the MR is marked as unchecked - meaning the merge-ref is outdated along the `merge_status`. So when accessing the MR page, the merge-ref is updated in that scenario.\n\nWe've measured its performance with big MRs:\n\n\u003e Since it'll be executed whenever the source/target branches get updated and the user accesses the MR page, I've put this into a reasonably heavy test in a MR with **114 file changes**, **2882 additions** and **12802 deletions**. The repo target branch has **20k commits** and **142MB** in file size.\n\n\u003e It's taking around **1 second** to recalculate the merge-ref for it, which shows it's not a cheap operation. Important to bring up that we won't need to make this operation again if the source/target branches doesn't get updated.\n\nBut considering the lower performance with NFS we might see worse scenarios at self-hosted instances. Which means we should consider updating the merge-ref async at some point.\n\nWe got a few options under the radar:\n\n1. Updating merge-refs of MRs impacted by a push/update by scheduling jobs at the `MergeRequests::RefreshService`\n2. [Scheduling just the merge-ref update at `MergeabilityCheckService`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/app/services/merge_requests/mergeability_check_service.rb#L112) upon MR page access\n\nThe 1st would mean a big burst of workload for Gitaly at every push, which doesn't sound ideal. The 2nd sounds more reasonable, though that would mean:\n\n1. Direct callers such as [`CreatePipelineService`](https://gitlab.com/gitlab-org/gitlab-ee/blob/master/ee/app/services/ee/merge_requests/create_pipeline_service.rb#L16) would need instant feedback of the ref, so a sync call would probably be required for that scenario.\n2. In order to use the ref to present diffs (https://gitlab.com/groups/gitlab-org/-/epics/854), we'll need to provide a \"ongoing\" state if this job wasn't finished yet.\n\ncc @DouweM","state":"closed","created_at":"2019-07-09T15:53:36.039Z","updated_at":"2020-12-07T16:50:04.165Z","closed_at":"2019-07-29T19:09:35.480Z","closed_by":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"labels":["Category:Code Review Workflow","Create [DEPRECATED]","Enterprise Edition","[deprecated] Accepting merge requests","backend","bug::performance","devops::create","group::code review","merge requests"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[],"author":{"id":11493,"username":"oswaldo","name":"Oswaldo Ferreira","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/11493/avatar.png","web_url":"https://gitlab.com/oswaldo"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12732","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12732","notes":"https://gitlab.com/api/v4/projects/278964/issues/12732/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12732/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12732","relative":"#12732","full":"gitlab-org/gitlab#12732"},"severity":"UNKNOWN","moved_to_id":23277840,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22638936,"iid":12731,"project_id":278964,"title":"Reloading a page on open design causes an error","description":"### Summary\n\nOn `Designs` tab, if the user opens the certain design and refreshes a page, a flash error is thrown\n\n![Screen_Shot_2019-07-09_at_18.45.17](/uploads/5677d3c242224236249194a16373df3d/Screen_Shot_2019-07-09_at_18.45.17.png)\n\n### Steps to reproduce\n\n(You need to have `Design Management feature flag enabled)\n\n1. Open any issue.\n2. Go to `Designs tab.\n3. Upload an image.\n4. Open an image by clicking it.\n5. Refresh the page.\n\n### Example Project\n\nAny project\n\n### What is the current *bug* behavior?\n\nA flash error is thrown and there is a loading spinner on the screen. There is also a console error:\n\n```\nwebpack-internal:///../../../node_modules/vue-apollo/dist/vue-apollo.esm.js:657 Error sending the query 'design' Invariant Violation: Can't find field project({\"fullPath\":\"jashkenas/underscore\"}) on object {\n  \"projectPath\": \"jashkenas/underscore\",\n  \"issueIid\": \"12\"\n}.\n```\n\n### What is the expected *correct* behavior?\n\nOn reloading the page user should see either a designs list or a particular design.","state":"closed","created_at":"2019-07-09T15:47:55.673Z","updated_at":"2020-12-10T19:00:35.784Z","closed_at":"2019-08-06T12:01:07.868Z","closed_by":{"id":411701,"username":"kushalpandya","name":"Kushal Pandya","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/411701/avatar.png","web_url":"https://gitlab.com/kushalpandya"},"labels":["Category:Design Management","Create [DEPRECATED]","Deliverable","Enterprise Edition","[deprecated] Accepting merge requests","devops::plan","frontend","group::product planning","priority::2","severity::2","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"}],"author":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"type":"ISSUE","assignee":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"user_notes_count":3,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12731","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12731","notes":"https://gitlab.com/api/v4/projects/278964/issues/12731/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12731/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12731","relative":"#12731","full":"gitlab-org/gitlab#12731"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699414,"iid":29983,"project_id":278964,"title":"View the name of a private project, through notification settings","description":"**[HackerOne report #637230](https://hackerone.com/reports/637230)** by `iframe` on 2019-07-07, assigned to `estrike`:\n\nHello, I found something interesting, we can look at the name of a private project (and it is even possible to receive notifications about all its changes) in a specific case.\n\n1 . And for starters, I created a public project on account ==A==\n\n\n2 . Next, from account ==B==, I recognized the project identifier  \n````Project ID: 13105788````\n\n\n3 . Next account ==B== subscribed to project notifications  \n![gitlab1.png](https://h1.sec.gitlab.net/a/af798318-b59b-48a1-940f-e4dea82e390c/gitlab1.png)\n\n\n4 . Account ==A== made the project private  \n![gitlab1.png](https://h1.sec.gitlab.net/a/26f8f56b-cac0-48b7-bea5-bd42130bf380/gitlab1.png)\n\n\n5 . Next we go to account ==B== and see if the notification settings remain.  \n\u003e Yes, they stayed, and it's damn cool)  \n![gitlab1.png](https://h1.sec.gitlab.net/a/0463ae79-002e-44a1-8d93-9dbc87090c81/gitlab1.png)\n\n6 . And now, to make sure that this is not visual, I will change the name of the project from account ==A==\n\n7 . Now let's see from account ==B== if the name of the project has changed.  \n![gitlab1.png](https://h1.sec.gitlab.net/a/b4fa9a24-c12f-401d-a949-8824d74c5111/gitlab1.png)\n\n\u003eOh yeah)  \n===\n\nImpact:  \n===\n\nThus, if the project was opened and we managed to subscribe to its notifications, even after closing we can follow it.\n\n## Impact\n\nThus, if the project was opened and we managed to subscribe to its notifications, even after closing we can follow it.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [gitlab1.png](https://h1.sec.gitlab.net/a/af798318-b59b-48a1-940f-e4dea82e390c/gitlab1.png)\n* [gitlab1.png](https://h1.sec.gitlab.net/a/26f8f56b-cac0-48b7-bea5-bd42130bf380/gitlab1.png)\n* [gitlab1.png](https://h1.sec.gitlab.net/a/0463ae79-002e-44a1-8d93-9dbc87090c81/gitlab1.png)\n* [gitlab1.png](https://h1.sec.gitlab.net/a/b4fa9a24-c12f-401d-a949-8824d74c5111/gitlab1.png)","state":"closed","created_at":"2019-07-09T15:32:25.317Z","updated_at":"2021-11-24T13:02:29.842Z","closed_at":"2020-01-02T18:46:35.533Z","closed_by":{"id":5054702,"username":"vdesousa","name":"Vitor Meireles De Sousa","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f44d19f10d5b0c54a02e79c13812ff77?s=80\u0026d=identicon","web_url":"https://gitlab.com/vdesousa"},"labels":["Deliverable","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":35,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29983","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29983","notes":"https://gitlab.com/api/v4/projects/278964/issues/29983/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29983/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29983","relative":"#29983","full":"gitlab-org/gitlab#29983"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699407,"iid":29981,"project_id":278964,"title":"Disclosure of private repository names","description":"**[HackerOne report #636952](https://hackerone.com/reports/636952)** by `mclaren650sspider` on 2019-07-06, assigned to `estrike`:\n\n### Summary\n\nThis bug exists due to this line https://gitlab.com/gitlab-org/gitlab-ce/blob/108c3cf16bed5733ffae086fb62c226961356560/app/controllers/concerns/lfs_request.rb#L95  \nWhen an user submits request to upload file to LFS, it is first checked that LFS is enabled on the given repository. However, if the repository does not exist, this line causes exception, resulting 500 Internal Server Error to be shown to the client. If the repository exists, no exception is raised and this endpoint returns 404 Not Found.\n\n### Steps to reproduce  \n1. Use any GitLab account. This account is our target, let's say that its username is `target`. Create private repository with this account.  Let's say that the URL of the repository is `https://gitlab.com/target/secretrepo`  \n2. Use another GitLab account, let's say that its username is `attacker`. Add SSH key to this account.  \n3. Create new repository with `attacker` account (does not matter if it is private or not), let's say that this repo is located at `https://gitlab.com/attacker/randomrepo`. This is necessary to obtain the authorization token in the next step.  \n4. With previously added SSH key, execute the command `ssh git@gitlab.com -x \"git-lfs-authenticate attacker/randomrepo.git upload\"`.  \nReplace `attacker/randomrepo` accordingly.  \n5. The executed command should produce JSON output. Copy the value of `Authorization` header.  \n6. Replace `AUTHORIZATION_TOKEN` in the script below with the token obtained in step 5. Replace `target/secretrepo` according to your target's username and private repository name.  \nExecute the script.\n\n```  \ncurl -i -X POST \\  \n\t-H 'Authorization: AUTHORIZATION_TOKEN' \\  \n\t-H 'Content-Type: application/json' \\  \n\t-d '{\"operation\":\"upload\",\"transfers\":[\"basic\"],\"ref\":{\"name\":\"refs/heads/master\"},\"objects\":[{\"oid\":\"f6eae78dc35680d85254d68750fb702e464097ab3c2e4c4daf811dd973d5ac60\",\"size\":9}]}' \\  \n\t'https://gitlab.com/target/secretrepo.git/info/lfs/objects/batch'  \n```\n\n7. Observe that the script returns 404.  \n8. Now replace the `secretrepo` in the script with any other repository name. Execute the script again and observe that it produces error 500 instead of 404.\n\n### What is the current *bug* behavior?\n\nThe endpoint returns different error depending on whether or not the repository exists.\n\n### What is the expected *correct* behavior?\n\nThe error that the endpoint produces should always the same, regardless of whether repository exists or not.\n\n### Output of checks\n\nThis bug happens on GitLab.com, but can be reproduced in CE/EE as well.\n\n## Impact\n\nThis vulnerability can be used to know whether user has private repository with given name or not. Attacker can utilize this vulnerability to enumerate the list of private repositories that one user or organization has. Names of private repositories could contain sensitive information or business secrets.","state":"closed","created_at":"2019-07-09T15:11:42.117Z","updated_at":"2019-11-27T23:02:51.094Z","closed_at":"2019-11-04T19:07:19.898Z","closed_by":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"labels":["Deliverable","HackerOne","backend","devops::create","group::source code","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-10-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29981","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29981","notes":"https://gitlab.com/api/v4/projects/278964/issues/29981/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29981/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29981","relative":"#29981","full":"gitlab-org/gitlab#29981"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22634975,"iid":12720,"project_id":278964,"title":"Geo - Rake task to check the health of the secondary node does not mention why it is unhealthy","description":"### Summary\n\nThe rake task to check the health of the secondary node does not show the reason for the node is unhealthy:\n\n```shell\n$ sudo gitlab-rake geo:status \n\nGitLab Version: 12.0.0-ee \nGeo Role: Secondary \nHealth Status: Unhealthy \nRepositories: 684/22296/22993 (96%) \nVerified Repositories: 650/22180/22993 (96%) \nWikis: 22994/22993 (100%) \nVerified Wikis: 22987/22993 (99%) \nLFS Objects: 621/621 (100%) \nAttachments: 31487/31487 (100%) \nCI job artifacts: 755345/755345 (100%) \nRepositories Checked: 0/22993 (0%) \nSync Settings: Full \nDatabase replication lag: 0 seconds \nLast event ID seen from primary: 12171429 (less than a minute ago) \nLast event ID processed by cursor: 12171427 (less than a minute ago) \nLast status report was: less than a minute ago\n```\n\n### Possible fixes\n\nWe should include the `GeoNodeStatus#health` in the output of the rake task when the secondary node is unhealthy.\n\n/cc @geo-team","state":"closed","created_at":"2019-07-09T14:20:50.385Z","updated_at":"2019-12-11T20:02:22.689Z","closed_at":"2019-07-10T10:34:28.186Z","closed_by":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"labels":["Enterprise Edition","Geo Administration","customer+","devops::systems","group::geo","type::bug","workflow::in review"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"}],"author":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"type":"ISSUE","assignee":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"user_notes_count":1,"merge_requests_count":1,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12720","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12720","notes":"https://gitlab.com/api/v4/projects/278964/issues/12720/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12720/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12720","relative":"#12720","full":"gitlab-org/gitlab#12720"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22634738,"iid":12719,"project_id":278964,"title":"Group bulk edit merge requests - change milestone","description":"- Bulk editing of merge requests currently exist at project level, i.e. https://docs.gitlab.com/ee/user/project/bulk_editing.html\n\n- Make this possible at group level for changing milestones.","state":"closed","created_at":"2019-07-09T14:13:16.534Z","updated_at":"2022-05-19T16:07:25.640Z","closed_at":"2019-08-22T17:41:47.348Z","closed_by":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"labels":["Enterprise Edition","GitLab Premium","backend","devops::plan","frontend","group::project management","merge requests","type::feature"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":502136,"username":"fatihacet","name":"Fatih Acet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/502136/avatar.png","web_url":"https://gitlab.com/fatihacet"},{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":502136,"username":"fatihacet","name":"Fatih Acet","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/502136/avatar.png","web_url":"https://gitlab.com/fatihacet"},"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12719","notes":"https://gitlab.com/api/v4/projects/278964/issues/12719/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12719/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12719","relative":"#12719","full":"gitlab-org/gitlab#12719"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":310,"epic":{"id":740,"iid":310,"title":"Bulk edit improvements","url":"/groups/gitlab-org/-/epics/310","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e743\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":24699396,"iid":29978,"project_id":278964,"title":"Document Graphql documentation build rake task","description":"Graphql docs is auto generated using a rake task. We should document how it works so people can find out how to change the template, add resources and update the documentation.\n\nPlace where rake tasks are documented: https://docs.gitlab.com/ee/development/rake_tasks.html\n\nThe following discussion from gitlab-ce!29998 should be addressed:\n\n- [ ] @felipe_artur started a [discussion](https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/29998#note_187587371): \n\n    \u003e This task should be documented on https://docs.gitlab.com/ee/development/rake_tasks.html","state":"closed","created_at":"2019-07-09T14:12:51.494Z","updated_at":"2022-05-19T16:07:37.469Z","closed_at":"2019-10-15T23:05:38.640Z","closed_by":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"labels":["GraphQL","backend","devops::plan","documentation","group::project management","missed:12.3","rake tasks","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29978","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29978","notes":"https://gitlab.com/api/v4/projects/278964/issues/29978/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29978/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29978","relative":"#29978","full":"gitlab-org/gitlab#29978"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1581,"epic":{"id":9465,"iid":1581,"title":"Improve GraphQL generated documentation","url":"/groups/gitlab-org/-/epics/1581","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22634721,"iid":12718,"project_id":278964,"title":"Project Milestones Disclosed Via Groups When the Victim disabled milestones access in project settings","description":"**[HackerOne report #636560](https://hackerone.com/reports/636560)** by `uzsunny` on 2019-07-05:\n\n## Reproduction steps:\n\n\nCreate a public group and public project.\n\n\nGo to public project settings and disable the project settings to members only.\n\n![disable_the_project_access_settings_to_only_project_members.png](https://h1.sec.gitlab.net/a/dec53d8b-26c3-4659-bbcd-a12921fc949e/disable_the_project_access_settings_to_only_project_members.png)\n\n\nIf the attacker visits milestones via projects then may see 404 not found page.\n\n\nhttps://gitlab.com/victim-waka-waka/test-group-for-sharing/-/milestones/1\n\n![milestones_not_accessible_via_projects.png](https://h1.sec.gitlab.net/a/2952ac20-92d7-4c54-83b6-c2029a7937d4/milestones_not_accessible_via_projects.png)\n\n\nBut the attacker will view the project mile stones via groups.\n\n\n![project_milestones_disclosed_via_groups.png](https://h1.sec.gitlab.net/a/52201b2a-49b0-48fb-abcf-4c175bb887dd/project_milestones_disclosed_via_groups.png)\n\n## Impact\n\nAttacker will view the project milestones which are disabled by the admin in project settings.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [disable_the_project_access_settings_to_only_project_members.png](https://h1.sec.gitlab.net/a/dec53d8b-26c3-4659-bbcd-a12921fc949e/disable_the_project_access_settings_to_only_project_members.png)\n* [milestones_not_accessible_via_projects.png](https://h1.sec.gitlab.net/a/2952ac20-92d7-4c54-83b6-c2029a7937d4/milestones_not_accessible_via_projects.png)\n* [project_milestones_disclosed_via_groups.png](https://h1.sec.gitlab.net/a/52201b2a-49b0-48fb-abcf-4c175bb887dd/project_milestones_disclosed_via_groups.png)","state":"closed","created_at":"2019-07-09T14:12:45.727Z","updated_at":"2022-05-19T16:07:25.473Z","closed_at":"2019-09-30T14:25:18.588Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["Enterprise Edition","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12718","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12718","notes":"https://gitlab.com/api/v4/projects/278964/issues/12718/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12718/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12718","relative":"#12718","full":"gitlab-org/gitlab#12718"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22633619,"iid":12717,"project_id":278964,"title":"Confidential issue assignee visible to guests if they have milestones","description":"**[HackerOne report #635516](https://hackerone.com/reports/635516)** by `ashish_r_padelkar` on 2019-07-04, assigned to `estrike`:\n\n### Summary\n\nHello,\n\nIdeally, No information related to confidential issues are visible to Guest users in private projects.\n\nHowever, it is possible to see the assignees in confidential issue if the issue is having milestones.\n\n### Steps to reproduce  \n1. As owner of the private project, create a confidential issue with a milestone and assignee.\n\n2. Login as guest user in this private project and navigate to `https://gitlab.com/\u003cGroupName\u003e/mvn-example/-/milestones/\u003cMilestone_ID\u003e#tab-participants`\n\n3. You should see the assignee here!\n\n\n\n### What is the current *bug* behavior?\n\nPossible to see assignee of confidential issue for guests in private projects\n\n### What is the expected *correct* behavior?  \nAssignee should not be visible to guests of confidential issues\n\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nPossible to see list of assignee of confidential issues if they have milestones","state":"closed","created_at":"2019-07-09T13:34:46.674Z","updated_at":"2022-05-19T16:07:25.317Z","closed_at":"2019-09-30T13:47:37.319Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["Enterprise Edition","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12717","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12717","notes":"https://gitlab.com/api/v4/projects/278964/issues/12717/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12717/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12717","relative":"#12717","full":"gitlab-org/gitlab#12717"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699384,"iid":29974,"project_id":278964,"title":"Add cop to enforce developers adding field descriptions on GraphQL schema","description":"Use rubocop to remind adding description to each GraphQL field.\n\nGraphQL documentation is auto generated based on GitLab schema. To make it  \nbetter field descriptions need to be added so our renderer can fetch them and add\nto the documentation.\n\n## More context\n\nThe following discussion from gitlab-ce!29998 should be addressed:\n\n- [ ] @eread started a [discussion](https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/29998#note_188620299):  (+4 comments)\n\n    \u003e @felipe_artur here is a built version:\n    \u003e \n    \u003e ![Screen_Shot_2019-07-05_at_10.31.18_am](/uploads/89213c9c80e83398f7ce8dfefc993a75/Screen_Shot_2019-07-05_at_10.31.18_am.png)\n    \u003e \n    \u003e It looks like we just need a bunch of text for introductory paragraphs and descriptions now.\n    \u003e \n    \u003e I think the basics here are sound, and you should move this on to a maintainer.\n    \u003e \n    \u003e How do we get that extra text together?","state":"closed","created_at":"2019-07-09T13:25:22.827Z","updated_at":"2022-05-19T16:07:37.162Z","closed_at":"2019-09-25T08:59:59.125Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["GraphQL","api","backend","devops::plan","documentation","group::project management","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":15,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29974","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29974","notes":"https://gitlab.com/api/v4/projects/278964/issues/29974/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29974/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29974","relative":"#29974","full":"gitlab-org/gitlab#29974"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1581,"epic":{"id":9465,"iid":1581,"title":"Improve GraphQL generated documentation","url":"/groups/gitlab-org/-/epics/1581","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699376,"iid":29970,"project_id":278964,"title":"Product Discovery for progressive merge request discussions","description":"## Problem to solve\n\nLoading merge request discussions is really slow for large merge requests, and cause the page load to fail with no discussions loaded because of server side timeouts. Fundamentally loading all the data in one go is an approach that doesn't scale.\n\n## Further details\n\nThe purpose of the issue is to propose iterations that will make the **merge request interface** usable faster.\n\nThere is more complexity in merge request discussions relative to issue/epic discussion because of discussions on changed lines. This means, while looking at a diff and the discussions are still loading, comments could start appearing causing the diff to reflow.\n\n## Proposal\n\nBefore diving into https://gitlab.com/groups/gitlab-org/-/epics/1577, we should consider the gitlab-ce~3412464, gitlab-ce~2024184, and gitlab-ce~2492649 implications of progressively loading discussions to make the page more responsive.\n\n:warning: This isn't a substitute for also improving the performance of SQL queries and all the other server side work that is make `discussions.json` slow - we need to tackle performance from multiple angles!\n\nRough proposal:\n\n- Paginate discussions and load them page-by-page, with progress indication at the bottom of the discussion list indicating more discussions are loading. Perhaps load from the top and bottom, and meet in the middle? TLDR: user shouldn't have to scroll or click to disclose all the data - we will preserve the property that the page should fully load all discussions.\n- :exclamation: **Challenge:** this change creates the diff reflow problem, which might be fine for a release or two but we should form a plan.\n- :bulb: **Idea** include discussion information in the diff response\n  - very basic information for resolved diff discussion about which line to show the bubble\n  - all information for unresolved diff discussions that are not out of date to render the full thread\n  - downside, we're downloading the same data twice, but the page would be useful sooner\n\n## Links / references","state":"closed","created_at":"2019-07-09T11:17:33.875Z","updated_at":"2022-06-02T12:57:32.035Z","closed_at":"2022-06-02T12:57:31.993Z","closed_by":{"id":853414,"username":"andr3","name":"André Luís","state":"active","avatar_url":"https://secure.gravatar.com/avatar/241e39726efb512a29621070ccf26a90?s=80\u0026d=identicon","web_url":"https://gitlab.com/andr3"},"labels":["Category:Code Review Workflow","UX","[deprecated] Accepting merge requests","backend","bug::performance","devops::create","frontend","group::code review","merge requests","product discovery [DEPRECATED]","section::dev"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":null,"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29970","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29970","notes":"https://gitlab.com/api/v4/projects/278964/issues/29970/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29970/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29970","relative":"#29970","full":"gitlab-org/gitlab#29970"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1577,"epic":{"id":9297,"iid":1577,"title":"⏳ Progressively load merge request discussions","url":"/groups/gitlab-org/-/epics/1577","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":24699362,"iid":29961,"project_id":278964,"title":"Code Review Usage Ping for Create SMAU","description":"### Problem to solve\n\nWe currently lack detailed information to determine what constitutes a Stage Monthly Active User (SMAU) for the Create stage. In order to better understand this data, usage ping data needs to be instrumented at the feature level.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nWe need to add usage pings to the Code Review category for the following actions:\n\n* ~~View a merge request~~ blocked by https://gitlab.com/gitlab-org/telemetry/issues/61\n* Create a merge request\n* Comment on a merge request =\u003e done in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/31912\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nAdditional usage ping data will be recorded specifically for actions as they relate to this feature.\n\n### Links / references","state":"closed","created_at":"2019-07-09T06:54:48.253Z","updated_at":"2020-12-07T17:01:55.115Z","closed_at":"2019-09-16T05:50:30.759Z","closed_by":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"labels":["Category:Code Review Workflow","Deliverable","OKR","backend","devops::create","group::code review","type::feature","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29961","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29961","notes":"https://gitlab.com/api/v4/projects/278964/issues/29961/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29961/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29961","relative":"#29961","full":"gitlab-org/gitlab#29961"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699361,"iid":29960,"project_id":278964,"title":"Source Code Usage Ping for Create SMAU","description":"### Problem to solve\n\nWe currently lack detailed information to determine what constitutes a Stage Monthly Active User (SMAU) for the Create stage. In order to better understand this data, usage ping data needs to be instrumented at the feature level.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nWe need to add usage pings to the Source Code Management category for the following actions:\n\n* Push of any kind (any repo edit activity, Git protocol or web interface) - ~~excluding mirroring commits~~ \n* ~~View file or directory in the repository view (not the project homepage)~~ - blocked by https://gitlab.com/gitlab-org/telemetry/issues/61\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nAdditional usage ping data will be recorded specifically for actions as they relate to this feature.\n\n### Links / references","state":"closed","created_at":"2019-07-09T06:53:57.301Z","updated_at":"2019-09-18T09:59:51.118Z","closed_at":"2019-09-16T05:50:35.055Z","closed_by":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"labels":["Deliverable","OKR","backend","devops::create","group::source code","repository","type::feature","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"}],"author":{"id":1187333,"username":"jramsay-gitlab","name":"James Ramsay (ex-GitLab)","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1187333/avatar.png","web_url":"https://gitlab.com/jramsay-gitlab"},"type":"ISSUE","assignee":{"id":1161495,"username":"igor.drozdov","name":"Igor Drozdov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1161495/avatar.png","web_url":"https://gitlab.com/igor.drozdov"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29960","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29960","notes":"https://gitlab.com/api/v4/projects/278964/issues/29960/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29960/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29960","relative":"#29960","full":"gitlab-org/gitlab#29960"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22616701,"iid":12713,"project_id":278964,"title":"Add Dependency Scanning information to the Dependency List API","description":"### Problem to solve\n\nAs an extension of https://gitlab.com/gitlab-org/gitlab-ee/issues/10077, we need to bring the security information to the dependency list API.\n\n### Intended users\n\n- ~\"Persona: Software developer\" \n- ~\"Persona: Security Analyst\" \n- ~\"Persona: DevOps Engineer\" \n\n### Proposal\n\n* [ ]  Add dependency scanning into current API endpoint response\n* [ ]  Exclude this info in case of insufficient permissions\n* [ ]  Add documentation\n\n### Permissions and Security\n\nPermissions to see security information should be consistent with permissions of the same information in the merge request widget.\n\n### Documentation\n\nWe need to document which information is available and explain the possible values.  \nWe can also crosslink this from the Dependency Scanning documentation.\n\n### Testing\n\nUsual specs for API endpoints.\n\n### What does success look like, and how can we measure that?\n\nThe number of calls for the Dependency List API (should be already implemented).\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references","state":"closed","created_at":"2019-07-09T02:42:34.296Z","updated_at":"2019-11-18T15:57:24.884Z","closed_at":"2019-08-30T10:58:29.519Z","closed_by":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","backend","dependency list","devops::secure","group::composition analysis","type::feature","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":1378158,"username":"brytannia","name":"Tetiana Chupryna","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1378158/avatar.png","web_url":"https://gitlab.com/brytannia"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12713","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12713","notes":"https://gitlab.com/api/v4/projects/278964/issues/12713/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12713/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12713","relative":"#12713","full":"gitlab-org/gitlab#12713"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1575,"epic":{"id":9281,"iid":1575,"title":"Add dependency scanning information to the dependency list","url":"/groups/gitlab-org/-/epics/1575","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22616101,"iid":12712,"project_id":278964,"title":"[Feature flag] elastic: Enable \"start indexing\" button","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## What\n\nThe [web interface for indexing](!11408) is hidden behind a feature flag. Now the indexing functionality is stable, we can remove the feature flag and make the interface available to public.\n\nAlso related https://gitlab.com/gitlab-org/gitlab-ce/issues/64074\n\n## Owners\n\n- Team: ~\"group::editor\" \n- Most appropriate slack channel to reach out to: `#g_create_editor`\n- Best individual to reach out to: @toupeira \n\n## Expectations\n\n### What are we expecting to happen?\n\n- For gitlab.com: not much, we don't plan to use it in the near future\n- For self-managed instances: admins will start using the button\n\n### What might happen if this goes wrong?\n\nIf the admins don't read the docs, they might miss that they have to manually create the ES index through a Rake task.\n\nThis is being discussed at https://gitlab.com/gitlab-org/gitlab-ee/issues/13717\n\n### What can we monitor to detect problems with this?\n\n\u003c!-- Which dashboards from https://dashboards.gitlab.net are most relevant? --\u003e\n\n- For gitlab.com:\n  - https://dashboards.gitlab.net/d/9GOIu9Siz/sidekiq-stats\n  - https://dashboards.gitlab.net/d/000000124/sidekiq-workers\n- For self-managed instances:\n  - user reports through ZenDesk or GitLab\n\n## Roll Out Steps\n\n- [x] Enable on staging\n- [x] Test on staging\n- [x] Ensure that documentation has been updated → https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/31972\n- [-] Enable on GitLab.com for individual groups/projects listed above and verify behaviour\n- [-] Announce on the issue an estimated time this will be enabled on GitLab.com\n- [-] Enable on GitLab.com by running chatops command in `#production`\n- [-] Cross post chatops slack command to `#support_gitlab-com` and in your team channel\n- [x] Announce on the issue that the flag has been enabled\n- [ ] Remove feature flag and add changelog entry\n- [ ] After the flag removal is deployed, [clean up the feature flag](https://docs.gitlab.com/ee/development/feature_flags/controls.html#cleaning-up) by running chatops command in `#production` channel","state":"closed","created_at":"2019-07-09T01:42:26.253Z","updated_at":"2019-11-18T07:12:49.858Z","closed_at":"2019-10-30T13:28:23.804Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Global Search","Deliverable","Enterprise Edition","advanced search","backend","devops::create","direction","feature flag","group::editor","missed-deliverable","missed:12.4","type::feature","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":31,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12712","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":6,"completed_count":4},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 6 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12712","notes":"https://gitlab.com/api/v4/projects/278964/issues/12712/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12712/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12712","relative":"#12712","full":"gitlab-org/gitlab#12712"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699358,"iid":29957,"project_id":278964,"title":"Reactions should not be allowed on locked issues","description":"### Summary\n\nWhen you lock an issue, non-project-members can still add reactions. Because the full range of emoji is allowed, this can cause issues, for example when outsiders pile on with obviously racist or ableist reactions (monkeys, ...) or others (use own imagination).\n\nI see that you wisely prevented editing as well, so I'm assuming this is just an oversight, but it might not be, feel free to re-label.\n\nAFAIK GitHub does not allow reactions once an issue is locked.\n\n### Steps to reproduce\n\nLock an issue to prevent brigading or spam. End up having to hide the issue entirely, which makes you seem like a bad actor by acting shady or refusing the debate.\n\n### Possible fixes\n\n* Not being able to add reactions at all on locked issues, or\n* only able to use up/down (still allow people to pile on, but seems less susceptible to disrespect).","state":"closed","created_at":"2019-07-08T23:36:38.336Z","updated_at":"2020-09-15T14:26:26.704Z","closed_at":"2020-08-31T17:21:57.343Z","closed_by":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"labels":["backend","devops::plan","frontend","good for new contributors","group::project management","issues","missed-SLO","priority::2","release post item","severity::2","type::bug","workflow::verification"],"milestone":{"id":1233753,"iid":51,"group_id":9970,"title":"13.4","description":"https://about.gitlab.com/releases/2020/09/22/gitlab-13-4-released/","state":"closed","created_at":"2020-04-09T17:39:21.662Z","updated_at":"2022-04-13T14:50:33.769Z","due_date":"2020-09-17","start_date":"2020-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/51"},"assignees":[{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"}],"author":{"id":42609,"username":"remram44","name":"Remi Rampin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/42609/avatar.png","web_url":"https://gitlab.com/remram44"},"type":"ISSUE","assignee":{"id":590748,"username":"mdelaossa","name":"Mario de la Ossa","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/590748/avatar.png","web_url":"https://gitlab.com/mdelaossa"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29957","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29957","notes":"https://gitlab.com/api/v4/projects/278964/issues/29957/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29957/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29957","relative":"#29957","full":"gitlab-org/gitlab#29957"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22614878,"iid":12707,"project_id":278964,"title":"List of packages visible publicly despite Only Project Members settings","description":"**[HackerOne report #635502](https://hackerone.com/reports/635502)** by `ashish_r_padelkar` on 2019-07-04, assigned to `estrike`:\n\n### Summary\n\nHello,\n\nAny user can see list of packages from projects even when `Repository` settings are set as `Only project Members`\n\n\nThis is possible when project is inside the groups and both are public\n\n### Steps to reproduce\n\n1. Create a public group  \n2. Create a public project inside it and set the repository as `Only Project Members`  \n3. Now login as any user and navigate to group packages `https://gitlab.com/groups/\u003cGroupName\u003e/-/packages`  \n4. You should see list of packages which should not be visible for anyone.\n\n\n\n### Examples\n\nYou can use my Project `https://gitlab.com/groups/newgroup_t/-/packages` and you will see list of packages from project.\n\n### What is the current *bug* behavior?\n\nList of packages visible for publicly\n\n### What is the expected *correct* behavior?\n\nWhen Repository of projects are set as `Only Project Members`, packages should not be visible publicly.\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and might be on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nList of packages visible publicly!","state":"closed","created_at":"2019-07-08T22:51:50.958Z","updated_at":"2021-12-10T07:59:21.937Z","closed_at":"2019-11-07T11:32:06.447Z","closed_by":{"id":4086191,"username":"cmaxim","name":"Costel Maxim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4086191/avatar.png","web_url":"https://gitlab.com/cmaxim"},"labels":["Category:Package Registry","Deliverable","Enterprise Edition","HackerOne","backend","devops::package","group::package registry","priority::3","security","severity::3","type::bug","workflow::scheduling"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":4262651,"username":"ggelatti","name":"Giorgenes Gelatti","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4262651/avatar.png","web_url":"https://gitlab.com/ggelatti"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":4262651,"username":"ggelatti","name":"Giorgenes Gelatti","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4262651/avatar.png","web_url":"https://gitlab.com/ggelatti"},"user_notes_count":7,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12707","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12707","notes":"https://gitlab.com/api/v4/projects/278964/issues/12707/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12707/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12707","relative":"#12707","full":"gitlab-org/gitlab#12707"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699353,"iid":29954,"project_id":278964,"title":"Able to Delete Source Branch of MR","description":"**[HackerOne report #633386](https://hackerone.com/reports/633386)** by `ngalog` on 2019-07-02, assigned to `estrike`:\n\n### Summary  \nFor every MR from fork project to original project, there are two gruops of people can make changes.\n\n1. The MR author, i.e. fork project developer/maintainer  \n2. The MR target project's developer/maintainer, i.e. original project developer/maintainer\n\nNormally, people in no.1 is only able to change the MR's metadata such as of title/description html/remove source branch after merge etc, but not the label or milestones etc.\n\nPeople in no.2 is only able to change the MR's label, milestones, merge when pipeline succeed etc, but not remove source branch after merge.\n\nI found that, member of original project, is able to change the setting of `remove source branch after merge` in gitlab API, which is not possible in Gitlab UI.\n\n## Impact  \nMR target project member could delete source project's branch without their consent/proper permission\n\n### Steps to reproduce  \n- As user A, create a public project with a random name such as `projectZero`  \n- As user B, fork `projectZero`, create a new file, then create a new branch, then submit a MR to `projectZero`, remembe the `Delete source branch when merge request is accepted. ` is UNCHECKED  \n- As user A, prepare your gitlab API scope token, and issue below request\n\n```  \nPUT /api/v4/projects/:project_id_of_original_project/merge_requests/:mr_iid HTTP/1.1  \nHost: gitlab.com  \nprivate-token: YOUR_TOKEN  \nContent-Length: 136  \ncontent-type:application/json\n\n\n{\"should_remove_source_branch\":true,\"remove_source_branch\":true,\"force_remove_source_branch\":true}  \n```\n\n```  \nPUT /api/v4/projects/:project_id_of_original_project/merge_requests/:mr_iid/merge HTTP/1.1  \nHost: gitlab.com  \nprivate-token: YOUR_TOKEN  \nContent-Length: 136  \ncontent-type:application/json\n\n\n{\"should_remove_source_branch\":true,\"remove_source_branch\":true,\"force_remove_source_branch\":true}  \n```\n\n- Then as user B, you should notice your MR source branch is remoevd without your consent.\n\n### Examples  \nreproducible on gitlab.com\n\n## Impact\n\nMR source branch could be deleted by target project's member without proper authorization/permission","state":"closed","created_at":"2019-07-08T20:55:38.499Z","updated_at":"2019-11-27T22:47:01.943Z","closed_at":"2019-11-04T15:17:40.597Z","closed_by":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"labels":["Deliverable","HackerOne","backend","devops::create","group::source code","priority::3","security","severity::3","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":171554,"username":"reprazent","name":"Bob Van Landuyt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/171554/avatar.png","web_url":"https://gitlab.com/reprazent"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29954","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29954","notes":"https://gitlab.com/api/v4/projects/278964/issues/29954/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29954/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29954","relative":"#29954","full":"gitlab-org/gitlab#29954"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22612382,"iid":12703,"project_id":278964,"title":"Audit Event for Changing Access Expiration Should Contain the Expiration Date","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nCurrently, when changing the expiration date for user access to project or group, the audit event contains copies of an unchanged access level and no indication that a change was made to the expiration date. For example, from Guest to Guest.\n\n### Steps to reproduce\n\n1. Add a user to a group or project.\n2. Add an expiration date.\n3. Change the expiration date.\n4. Remove the expiration date.\n\nNo date is included in the associated audit events.\n\n### Relevant logs and/or screenshots\n\n![Audit_Log___Admin_Area___GitLab_-__Private_Browsing_](/uploads/060e39d5f09f9e4dbcc053d47a85df2e/Audit_Log___Admin_Area___GitLab_-__Private_Browsing_.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com.","state":"closed","created_at":"2019-07-08T19:56:06.932Z","updated_at":"2020-09-15T21:43:42.711Z","closed_at":"2020-01-14T10:12:20.733Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["Category:Audit Events","Deliverable","Enterprise Edition","backend","devops::manage","estimation::needed","frontend","group::compliance","internal customer","priority::3","security","severity::3","type::bug","workflow::in dev"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"user_notes_count":22,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-12-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12703","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12703","notes":"https://gitlab.com/api/v4/projects/278964/issues/12703/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12703/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12703","relative":"#12703","full":"gitlab-org/gitlab#12703"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":640,"epic":{"id":2446,"iid":640,"title":"Comprehensive audit log: actions","url":"/groups/gitlab-org/-/epics/640","group_id":9970,"human_readable_end_date":"Jan 17, 2023","human_readable_timestamp":"\u003cstrong\u003e2\u003c/strong\u003e days remaining"},"iteration":null,"health_status":null},{"id":22611848,"iid":12702,"project_id":278964,"title":"No Audit Event When Access is Removed Due To Expiration","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nNo audit event is generated when a user's access is removed due an expiration date being set by an admin. This recently caused a lot of ~toil to determine the cause of an apparent removal of GitLab team member from a top-level group.\n\n### Steps to reproduce\n\n1. Add a user to group with an expiration date. It can be set to the current day.\n2. After a day, observe that the user is no longer a member, but no audit event exists or is present in the `audit_json.log` file.\n\n### What is the current *bug* behavior?\n\nThe user is removed with no indication to admins or other users.\n\n### What is the expected *correct* behavior?\n\nAn audit event indicating that access expired should exist in the audit events.\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-07-08T19:22:34.278Z","updated_at":"2019-12-02T07:01:23.440Z","closed_at":"2019-12-02T07:01:23.387Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["Category:Audit Events","Enterprise Edition","devops::manage","group::compliance","internal customer","priority::3","security","severity::3","type::bug","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12702","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12702","notes":"https://gitlab.com/api/v4/projects/278964/issues/12702/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12702/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12702","relative":"#12702","full":"gitlab-org/gitlab#12702"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22611079,"iid":12700,"project_id":278964,"title":"Geo Docs: How to set up a Geolocation-aware Git URL","description":"\u003c!--\n\n* Use this issue template for suggesting new docs or updates to existing docs.\n  Note: Doc work as part of feature development is covered in the Feature Request template.\n  \n* For issues related to features of the docs.gitlab.com site, see\n     https://gitlab.com/gitlab-com/gitlab-docs/issues/       \n\n* For information about documentation content and process, see\n     https://docs.gitlab.com/ee/development/documentation/ --\u003e\n\n\u003c!-- Type of issue --\u003e\n\n\u003c!-- Un-comment the line for the applicable doc issue type to add its label.\n     Note that all text on that line is deleted upon issue creation. --\u003e\n\u003c!-- /label ~\"docs:fix\" - Correction or clarification needed. --\u003e\n\u003c!-- /label ~\"docs:new\" - New doc needed to cover a new topic or use case. --\u003e\n\u003c!-- /label ~\"docs:improvement\" - Improving an existing doc; e.g. adding a diagram, adding or rewording text, resolving redundancies, cross-linking, etc. --\u003e\n\u003c!-- /label ~\"docs:revamp\" - Review a page or group of pages in order to plan and implement major improvements/rewrites. --\u003e\n\u003c!-- /label ~\"docs:other\" - Anything else. --\u003e\n\n### Problem to solve\n\n\u003c!-- Include the following detail as necessary:\n* What product or feature(s) affected?\n* What docs or doc section affected? Include links or paths.\n* Is there a problem with a specific document, or a feature/process that's not addressed sufficiently in docs?\n* Any other ideas or requests?\n--\u003e\n\nThe first goal of https://gitlab.com/groups/gitlab-org/-/epics/1466#proposal:\n\n\u003e\u003e\u003e\n1. **Fully transparent git configuration for Geo**\n\nHere, we will focus on eliminating any git configuration differences needed for users of GitLab Geo. The desired state is that, independent of the location of a user, the git configuration is the same. This would eliminate the need for systems administrators to maintain different configurations in different geo locations. When using git directly, a user would not need to know about Geo because all requests are proxied to the `primary`. This will likely result in a single URL for all git operations e.g. `https://git.example.com`. There won't be a distinction between `primary` and `secondary` git URLs.\n\nThis would be a direct continuation of supporting multiple Geo `secondaries` behind a load balancer. The technical solutions to achieve this could be, for example, either a global load balancer or a geo-based DNS service. @mkozono this would be great to investigate and would cover the Git \"CDN\" aspect.\n\u003e\u003e\u003e\n\nIt is believed to be already technically possible to have a single Git URL send you to the closest Geo node. But you need to set up your DNS solution properly.\n\n### Further details\n\n\u003c!--\n* Any concepts, procedures, reference info we could add to make it easier to successfully use GitLab?\n* Include use cases, benefits, and/or goals for this work.\n* If adding content: What audience is it intended for? (What roles and scenarios?)\n  For ideas, see personas at https://design.gitlab.com/research/personas or the persona labels at\n  https://gitlab.com/groups/gitlab-org/-/labels?utf8=%E2%9C%93\u0026subscribed=\u0026search=persona%3A\n--\u003e\n\n- Audience: Sysadmins setting up Geo\n- Reference: https://www.sumologic.com/blog/aws-route-53-global-load-balancing/\n\n### Proposal\n\n- [x] Prove/demo it with Route 53\n- [ ] Document it so customers know that this is possible and what is generally needed to achieve it (even if they don't choose Route 53)\n\n### Who can address the issue\n\n\u003c!-- What if any special expertise is required to resolve this issue? --\u003e\n\nAnyone who can set up Geo and configure Route 53 or similar service.\n\n### Other links/references\n\n\u003c!-- E.g. related GitLab issues/MRs --\u003e\n\ncc @fzimmer","state":"closed","created_at":"2019-07-08T18:36:47.761Z","updated_at":"2021-04-03T08:30:12.733Z","closed_at":"2019-09-30T00:38:18.074Z","closed_by":{"id":2683848,"username":"eread","name":"Evan Read","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2683848/avatar.png","web_url":"https://gitlab.com/eread"},"labels":["Deliverable","Enterprise Edition","Geo Administration","devops::systems","direction","documentation","group::geo"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"}],"author":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"type":"ISSUE","assignee":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"user_notes_count":5,"merge_requests_count":2,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12700","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":2,"completed_count":1},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"1 of 2 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12700","notes":"https://gitlab.com/api/v4/projects/278964/issues/12700/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12700/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12700","relative":"#12700","full":"gitlab-org/gitlab#12700"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2038,"epic":{"id":13577,"iid":2038,"title":"Geo supports using a single, geolocation-aware Git URL","url":"/groups/gitlab-org/-/epics/2038","group_id":9970,"human_readable_end_date":"Oct 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22595415,"iid":12687,"project_id":278964,"title":"Follow-up from \"Allow bulk update for group issues - milestones\"","description":"The following discussion from !14141 should be addressed:\n\n- [ ] @dbalexandre started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14141#note_188892587):  (+6 comments)\n\n\n    \u003e My concern is that someone can change the ids in `issuable_ids` and we apply these changes to issues that do not belong to the group/project. I think that is fine to leave this as is and open a follow-up issue to check. WDYT?","state":"closed","created_at":"2019-07-08T10:59:16.127Z","updated_at":"2022-05-19T16:07:25.133Z","closed_at":"2019-12-02T08:44:28.323Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Deliverable","Enterprise Edition","backend","backstage [DEPRECATED]","devops::plan","group::project management","issues","maintenance::refactor","merge requests","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","workflow::verification"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":3,"merge_requests_count":1,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12687","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12687","notes":"https://gitlab.com/api/v4/projects/278964/issues/12687/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12687/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12687","relative":"#12687","full":"gitlab-org/gitlab#12687"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":310,"epic":{"id":740,"iid":310,"title":"Bulk edit improvements","url":"/groups/gitlab-org/-/epics/310","group_id":9970,"human_readable_timestamp":"\u003cstrong\u003e743\u003c/strong\u003e days elapsed"},"iteration":null,"health_status":null},{"id":22593338,"iid":12686,"project_id":278964,"title":"Merge button disabled without clear explanation | Merge blocked by \"Pipelines must succeed\" option","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nThe merge button in the merge request is disabled without clear explanation. It happens on [this repo](https://gitlab.com/stardust.ai/iris) since last Friday and other repos under the same project is not affected. On this repo, merging to both protected and unprotected branches is disable.\n\n### Steps to reproduce\n\nOn [this repo](https://gitlab.com/stardust.ai/iris), create a merge request to any branch and wait for the enough approvals. Then the \"merge\" button is still disabled. \n\n### Example Project\n\nSee [merge request](https://gitlab.com/stardust.ai/iris/merge_requests/1362) for [iris](https://gitlab.com/stardust.ai/iris)\n\n### What is the current *bug* behavior?\n\nThen the \"merge\" button is disabled with message \n\u003e You can only merge once the items above are resolved \nHowever, it doesn't mention what are the items to resolve.\n\n### What is the expected *correct* behavior?\n\nThe \"merge\" button should be enabled once the merge request receives enough approvals.\n\n### Relevant logs and/or screenshots\n![屏幕快照_2019-07-08_下午3.58.35](/uploads/7a6eec85993fa7162c3c749538f425ab/屏幕快照_2019-07-08_下午3.58.35.png)\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)\n\n---\n\n## Solution\n\nWe basically have two scenarios to consider because of the following:\n\n\u003e If pipelines are disabled for the project, but there is pipeline information associated with the current commit, ideally we would like to have access to that so we can showcase that. However, as pipelines are disabled for the project this is currently limited due to its implementation. \n\n\u003e Basically the check for disabling pipelines cuts off the entire flow of pipeline information instead of it still being accessible for situations like this.\n\nScenario 2 will need this in order to be feasible.\n\nhttps://gitlab.com/gitlab-org/gitlab/merge_requests/14732 implements scenario 1 regardless of scenario 2 being feasible and could be seen as an iterative step where scenario 2 is the ideal solution.\n\n### Scenario 1\n\n| Situation | Pipelines must succeed | Pipelines enabled | Commit has pipeline associated | CI configuration available |\n| ------ | ------ | --- | --- | --- |\n| A | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: |\n| B | :white_check_mark: | :x:                | :white_check_mark: | :white_check_mark: |\n| C | :white_check_mark: | :x:                | :x:                | N/A                |\n| D | :white_check_mark: | :white_check_mark: | :x:                | :white_check_mark: |\n| E | :white_check_mark: | :white_check_mark: | :x:                | :x:                |\n\n```mermaid\ngraph LR\n\nPMS{Pipelines must succeed}\nPE{Pipelines enabled}\nCHPA1{Commit has pipeline associated}\nCHPA2{Commit has pipeline associated}\nCCA1{CI configuration available}\nCCA2{CI configuration available}\nCCA3{CI configuration available}\nCCA4{CI configuration available}\n\nA(A)\nB(B)\nC(C)\nD(D)\nE(E)\n\nY1[Yes]\nY2[Yes]\nY3[Yes]\nY4[Yes]\nY5[Yes]\nY6[Yes]\nY7[Yes]\nN1[No]\nN2[No]\nN3[No]\nN4[No]\nN5[No]\nN6[No]\nN7[No]\n\nPMS--\u003eK[Yes]\nK--\u003ePE\nPE--\u003eY1\nPE--\u003eN1\nY1--\u003eCHPA1\nN1--\u003eCHPA2\nCHPA1--\u003eY2\nCHPA1--\u003eN2\nCHPA2--\u003eY3\nCHPA2--\u003eN3\nY2--\u003eCCA1\nN2--\u003eCCA2\nY3--\u003eCCA3\nN3--\u003eCCA4\nCCA1--\u003eY4\nCCA1--\u003eN4\nCCA2--\u003eY5\nCCA2--\u003eN5\nCCA3--\u003eY6\nCCA3--\u003eN6\nCCA4--\u003eY7\nCCA4--\u003eN7\n\nY4--\u003eA\nN4--\u003eI(external ci?)\nY5--\u003eD\nN5--\u003eE\nY6--\u003eB\nN6--\u003eJ(external ci?)\nY7--\u003eC\nN7--\u003eC\n```\n\n**A.** Pipelines are enabled and must succeed (existing behavior, small copy change here)\n\n* Settings -\u003e General -\u003e Merge Requests -\u003e Merge checks -\u003e \"Pipelines must succeed\" is __enabled__\n* Settings -\u003e General -\u003e Visibility, project features, permissions -\u003e \"Pipelines\" is __enabled__\n* Pipeline section of the merge request widget states the default pipeline information.\n* The merge section of the merge request widget states: `Pipelines must succeed for merge requests to be eligible to merge. Please retry or push a new commit to fix the failure.`\n\n**B.** Pipelines are disabled and there is pipeline information available for the commit (pipelines were enabled when the commit was created):\n\n* Settings -\u003e General -\u003e Merge Requests -\u003e Merge checks -\u003e \"Pipelines must succeed\" is __enabled__\n* Settings -\u003e General -\u003e Visibility, project features, permissions -\u003e \"Pipelines\" is __disabled__\n* Pipeline information is generally not shown anymore except in merge requests where it is required to succeed.\n* Pipeline section of the merge request widget states: `A failed pipeline was run for this commit`\n  * In case of a succeeded or other status pipeline we should state: `A [Insert status] pipeline was run for this commit`\n* The merge section of the merge request widget states: `Pipelines must succeed for merge requests to be eligible to merge. Please enable pipelines for this project to continue. For more information, see the documentation.`\n\n**C.** Pipelines are disabled and there is no pipeline information available for the commit (pipelines were not enabled or there was no ci configuration when the commit was created):\n\n* Settings -\u003e General -\u003e Merge Requests -\u003e Merge checks -\u003e \"Pipelines must succeed\" is __enabled__\n* Settings -\u003e General -\u003e Visibility, project features, permissions -\u003e \"Pipelines\" is __disabled__\n* Pipeline information is generally not shown anymore except in merge requests where it is required to succeed.\n* Pipeline section of merge request widget states: `No pipeline was run for this commit.`\n* The merge section of the merge request widget states: `Pipelines must succeed for merge requests to be eligible to merge. Please enable pipelines for this project to continue. For more information, see the documentation.`\n\n**D.** Pipelines are enabled and there is no pipeline information available for the commit and there is a ci configuration available (pipelines were not enabled or there was no ci configuration when the commit was created):\n\n* Settings -\u003e General -\u003e Merge Requests -\u003e Merge checks -\u003e \"Pipelines must succeed\" is __enabled__\n* Settings -\u003e General -\u003e Visibility, project features, permissions -\u003e \"Pipelines\" is __enabled__\n* Pipeline section of merge request widget states: `No pipeline was run for this commit.`\n* The merge section of the merge request widget states: `Pipelines must succeed for merge requests to be eligible to merge. Please retry the job or push a new commit to fix the failure. For more information, see the documentation.`\n\n**E.** Pipelines are enabled and there is no pipeline information available for the commit and there is no ci configuration available (pipelines were not enabled or there was no ci configuration when the commit was created):\n\n* Settings -\u003e General -\u003e Merge Requests -\u003e Merge checks -\u003e \"Pipelines must succeed\" is __enabled__\n* Settings -\u003e General -\u003e Visibility, project features, permissions -\u003e \"Pipelines\" is __enabled__\n* Pipeline section of merge request widget states: `No pipeline was run for this commit.`\n* The merge section of the merge request widget states: `Pipelines must succeed for merge requests to be eligible to merge. Please create a CI configuration. For more information, see the documentation.`\n\n### Scenario 2\n\nFor scenario 2 there is a small edit where the pipeline information is made visible so we don't need to show a custom message:\n\n\u003e\u003e\u003e\n**B.** Pipelines are disabled and there is pipeline information available for the commit (pipelines were enabled when the commit was created):\n\n* ~~Pipeline section of the merge request widget states: `A failed pipeline was run for this commit`~~\n* **Pipeline section of the merge request widget states the default pipeline information as if pipelines were not disabled.**\n  * This also counts for non-failed pipelines\n\u003e\u003e\u003e","state":"closed","created_at":"2019-07-08T09:54:25.517Z","updated_at":"2022-11-18T00:03:28.159Z","closed_at":"2020-05-12T20:52:38.689Z","closed_by":{"id":4828839,"username":"thaoyeager","name":"Thao Yeager","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4828839/avatar.png","web_url":"https://gitlab.com/thaoyeager"},"labels":["Category:Continuous Integration","Enterprise Edition","Technical Writing","UI text","UX","Verify::P1","customer","depth","devops::verify","frontend","group::pipeline execution","internal customer","merge requests","missed-SLO","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","missed:12.6","missed:12.7","missed:12.8","missed:12.9","priority::2","severity::2","type::bug","workflow::planning breakdown"],"milestone":null,"assignees":[{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"}],"author":{"id":2698519,"username":"chuanghan.stardust","name":"Chuang Han","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2698519/avatar.png","web_url":"https://gitlab.com/chuanghan.stardust"},"type":"ISSUE","assignee":{"id":5327378,"username":"f_caplette","name":"Frédéric Caplette","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5327378/avatar.png","web_url":"https://gitlab.com/f_caplette"},"user_notes_count":83,"merge_requests_count":0,"upvotes":12,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12686","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12686","notes":"https://gitlab.com/api/v4/projects/278964/issues/12686/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12686/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12686","relative":"#12686","full":"gitlab-org/gitlab#12686"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22575429,"iid":12660,"project_id":278964,"title":"Expose ZAP log in DAST","description":"Follow-up of https://gitlab.com/gitlab-org/security-products/dast/merge_requests/24#note_188696347:\n\n# Problem\nThere's no easy way for users to get the ZAP output in the DAST job. This means they cannot be sure how the scan was run and the specific details of what happened during the scan.\n\n# Proposal\nWe should make it easier for users to debug the job and check this output.\n\n- print the whole log in the raw output (in this case, I'd suggest to print it \"live\", so append in the file and `stdout` at the same time).\n\n# Potential follow-ons for another iteration\n- provide the log as an artifact, to keep the raw output concise and clear\n\n@dappelt @vzagorodny what do you think?","state":"closed","created_at":"2019-07-07T15:41:06.038Z","updated_at":"2019-11-18T15:57:24.983Z","closed_at":"2019-10-14T11:09:12.338Z","closed_by":{"id":4543806,"username":"pulkitsharma","name":"Pulkit Sharma","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/27a50531bf4fd501b5f0a9b2765a661a?s=80\u0026d=identicon","web_url":"https://gitlab.com/pulkitsharma"},"labels":["Category:DAST","Enterprise Edition","backend","devops::secure","direction","group::dynamic analysis","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":2338871,"username":"andyvolpe","name":"Andy Volpe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2338871/avatar.png","web_url":"https://gitlab.com/andyvolpe"},{"id":4543806,"username":"pulkitsharma","name":"Pulkit Sharma","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/27a50531bf4fd501b5f0a9b2765a661a?s=80\u0026d=identicon","web_url":"https://gitlab.com/pulkitsharma"}],"author":{"id":30915,"username":"plafoucriere","name":"Philippe Lafoucrière","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/30915/avatar.png","web_url":"https://gitlab.com/plafoucriere"},"type":"ISSUE","assignee":{"id":2338871,"username":"andyvolpe","name":"Andy Volpe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2338871/avatar.png","web_url":"https://gitlab.com/andyvolpe"},"user_notes_count":27,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12660","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12660","notes":"https://gitlab.com/api/v4/projects/278964/issues/12660/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12660/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12660","relative":"#12660","full":"gitlab-org/gitlab#12660"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22555513,"iid":12653,"project_id":278964,"title":"Add i18n to BoardScope component","description":"The `BoardScope` component introduced in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14556 needs some i18n love.","state":"closed","created_at":"2019-07-05T18:39:04.149Z","updated_at":"2022-05-19T16:07:24.871Z","closed_at":"2019-10-25T20:49:55.560Z","closed_by":{"id":3507264,"username":"donaldcook","name":"Donald Cook","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3507264/avatar.png","web_url":"https://gitlab.com/donaldcook"},"labels":["Category:Internationalization","Category:Team Planning","Deliverable","Enterprise Edition","[deprecated] Accepting merge requests","backstage [DEPRECATED]","boards","devops::plan","frontend","group::project management","maintenance::refactor","workflow::ready for development"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12653","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12653","notes":"https://gitlab.com/api/v4/projects/278964/issues/12653/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12653/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12653","relative":"#12653","full":"gitlab-org/gitlab#12653"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22555415,"iid":12652,"project_id":278964,"title":"Make DAST configurable for speed, coverage, and other use cases","description":"### Problem to solve\n\nOur DAST feature is based on [ZAProxy](https://github.com/zaproxy/zaproxy), and especially [zap-baseline](https://github.com/zaproxy/zaproxy/wiki/ZAP-Baseline-Scan), a CLI to interact easily with ZAP. One observed concern\nfrom customers is that zap-baseline provides a time based spidering function. It spiders for URLs for one minute and then scans those URLs in order to be efficient and for our purposes in order to not delay the time it takes to run a DAST scan in a Merge Request pipeline. It does mean that in some cases only a fraction of the surface area of an application is tested. Over-riding this time is possible by passing a specific parameter to zap-baseline.\n\nHowever, it's currently impossible to [pass parameters to zap-baseline](https://gitlab.com/gitlab-org/security-products/dast/blob/3f1089b6ea588508f36d33d8a482454df3af0dca/analyze#L45) that would adjust this and other variables with our recommended vendored template.\n\nUsers can always use a manual job definition, but it's against this [recommendation](https://docs.gitlab.com/ee/user/application_security/dast/index.html#configuring-dast). \n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\nDAST users (Developers like [Sasha](https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/#sasha-software-developer)) who want to customize the behavior of the DAST scan compared to what GitLab provides by default.\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\nBy default, zap-baseline will run for 1 minute. This parameter can't be set when using the template.\n\n**Edit (Dennis)**: Also other useful parameters cannot be passed to ZAP using the template, such as `-j` for instructing ZAP to use the AJAX spider. Full list of params is here https://github.com/zaproxy/zaproxy/wiki/ZAP-Baseline-Scan\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nWe should evaluate if we want to expose:\n- ~~all params at once (ex: `DAST_ZAP_PARAMS`)~~\n  - Allow this configuration for both full scan AND passive scan\n- all params one by one (https://github.com/zaproxy/zaproxy/wiki/ZAP-Baseline-Scan#usage)\n- ~~Only the number of minutes to spider (ex: `DAST_SPIDER_LIMIT`)~~\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\nWe currently don't document that spidering will stop after 1 minute (/cc @axil). This can be very confusing for users, as the complete will succeed, but the results will be incomplete, without any clue about missing ones.\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\nWe should document how to change the spider time limit once we decide how we expose it.\nNote that a [Full Scan](https://docs.gitlab.com/ee/user/application_security/dast/index.html#full-scan) doesn't have this limit, but it will achieve active scanning instead of the passive one from zap-baseline.\n \n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nUsers can specify the spider time limit.\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n~\"GitLab Ultimate\" \n\n### Implementation plan\nFor the following environment variables,\n\n1. Map command line arguments to their environment variable in [configuration.py](https://gitlab.com/gitlab-org/security-products/dast/blob/1355229ee6a9263b6ae7962760663b701165e970/src/configuration.py) using the mapping defined in the [comment below](https://gitlab.com/gitlab-org/gitlab/issues/12652#note_218599698).\n2. Ensure they are unit tested.\n3. Document their usage.\n\n#### Environment variables\n- [x] `DAST_ZAP_CONFIG_FILE`\n- [x] `DAST_ZAP_CONFIG_URL`\n- [x] `DAST_ZAP_GENERATE_CONFIG`\n- [x] `DAST_SPIDER_MINS`\n- [x] `DAST_HTML_REPORT`\n- [x] `DAST_MARKDOWN_REPORT`\n- [x] `DAST_XML_REPORT`\n- [x] `DAST_INCLUDE_ALPHA_VULNERABILITIES`\n- [x] `DAST_USE_AJAX_SPIDER`\n- [x] `DAST_ZAP_CLI_OPTIONS`\n- [x] `DAST_DEBUG`\n- ~~`DAST_ZAP_DELAY_PASSIVE_SCAN_SECONDS`~~","state":"closed","created_at":"2019-07-05T18:27:04.441Z","updated_at":"2021-04-03T08:21:41.278Z","closed_at":"2020-05-27T02:29:47.453Z","closed_by":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"labels":["Category:DAST","Enterprise Edition","GitLab Ultimate","UX","backend","devops::secure","direction","group::dynamic analysis","type::feature","workflow::in review"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"}],"author":{"id":30915,"username":"plafoucriere","name":"Philippe Lafoucrière","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/30915/avatar.png","web_url":"https://gitlab.com/plafoucriere"},"type":"ISSUE","assignee":{"id":5749348,"username":"philipcunningham","name":"Philip Cunningham","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/5749348/avatar.png","web_url":"https://gitlab.com/philipcunningham"},"user_notes_count":36,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12652","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":11,"completed_count":11},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"11 of 11 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12652","notes":"https://gitlab.com/api/v4/projects/278964/issues/12652/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12652/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12652","relative":"#12652","full":"gitlab-org/gitlab#12652"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3019,"epic":{"id":38258,"iid":3019,"title":"DAST: scan configuration backend improvements","url":"/groups/gitlab-org/-/epics/3019","group_id":9970,"human_readable_end_date":"Mar 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22554782,"iid":12648,"project_id":278964,"title":"Code Analytics - Files committed together","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\nAs a follow up to https://gitlab.com/gitlab-org/gitlab-ee/issues/12104, when we look at our code hotspots, it's useful to know how many files are dependent on them in order to understand the importance of the piece of code with respect to the codebase. We would also like to get dependencies that might be not explicitly referred to. Temporal coupling is correlated to defects and can highlight bugs that might come from seemingly unrelated places when one piece of code is referenced in unrelated parts of the codebase. By looking at the state of temporal coupling over time with our filtering, we can spot the evolution of architectural technical debt. For microservices architectures - we wouldn't expect a commit to refer to more than 1 service.\n \n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\nEMs\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nThis chart will be positioned after the code hotspots graph on https://gitlab.com/gitlab-org/gitlab-ee/issues/12683 and the same filters should apply.\n\n1. Let's show a graph that shows which files change together during commits during a specific timeframe: the stronger the relationship (% of shared commits), the more red the color of the relationship: https://observablehq.com/@d3/hierarchical-edge-bundling, https://echarts.apache.org/examples/en/editor.html?c=graph-circular-layout\u0026theme=light on a gradient of green to red or the thicker the lines, depending on what we choose in order to represent the coupling (https://echarts.apache.org/examples/en/editor.html?c=graph is another alternative, https://sail.cs.queensu.ca/Downloads/WCRE2006_AnimatedVisualizationOfSoftwareHistoryUsingEvolutionStoryboards.pdf)\n\nWhat we expect to see is code dependencies, relations between code and tests, copy and paste between files, etc. \n\n2. On the code hotspots graph - let's show the number of times the file has been been updated together with another one during a commit, i.e. if during the period:\n\n- in the first commit, I was updated with 3 files-\u003e 3\n- the second commit, I was updated with 1 file, which is in addition to the 3 above, then the total number to show in the treemap is 4. The more often a file changes with others, the more likely it is important architecturally. \n\n- I propose to have a filter by group, project, subgroup, so that we don't load all the information at once, i.e. a user needs to select a/multiple groups in order to see the graph.\n\n3. Link to churn?\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\nTiers: Only clients/ namespaces that are premium and above can see the information.\nRoles: Future state for roles will be reporters and above for the projects/groups they have permission for and that are premium and above. For now: Admins\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n### Solution\n\nLet's add a circular chart with two main components:\n\n* Circle: file name (the bigger the circle is the more times that file was changed)\n* Line: 2 files were committed together (the thicker the line is the more time these two files were committed together)\n\nColours:\n\n* Circle:\n  * Default: `#79AEE4`\n  * Hover: `#1F78D1` (`$blue-500`)\n  * All others when one is hovered: `#BCD7F2`\n  * Connected to hovered: `#4C93DB`\n* Line:\n  * Default: `$blue-500` at 20% opacity\n  * Connected to hovered: `$blue-500` at 60% opacity\n  * All others when one is hovered: `$blue-500` at 10% opacity\n\n| Default | Hover |\n|---------|-------|\n| ![temporal-coupling--default](/uploads/32d2becf6deb004fa292d0d46327f6f8/temporal-coupling--default.jpg) | ![temporal-coupling--hover](/uploads/1f3be71a41984fc5b5571636f0dc3e1b/temporal-coupling--hover.jpg) |\n\n### Links / references\n\nhttps://www.researchgate.net/figure/A-sample-Evolution-Radar-visualization-of-the-core-Mozilla-modules_fig1_221657065","state":"closed","created_at":"2019-07-05T17:41:10.816Z","updated_at":"2021-02-16T02:47:57.491Z","closed_at":"2021-02-16T02:47:57.448Z","closed_by":{"id":4583714,"username":"npost","name":"Nick Post","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4583714/avatar.png","web_url":"https://gitlab.com/npost"},"labels":["Category:Code Analytics","Enterprise Edition","GitLab Premium","Manage [DEPRECATED]","UX","UX research","[deprecated] Accepting merge requests","analytics","backend","devops::manage","group::optimize","priority::1","section::dev","type::feature","workflow::problem validation"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"type":"ISSUE","assignee":null,"user_notes_count":38,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12648","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12648","notes":"https://gitlab.com/api/v4/projects/278964/issues/12648/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12648/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12648","relative":"#12648","full":"gitlab-org/gitlab#12648"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699253,"iid":29911,"project_id":278964,"title":"Improper access control allows the attacker to comment in internal commit after they are no longer admin","description":"**[HackerOne report #635512](https://hackerone.com/reports/635512)** by `hx01` on 2019-07-04:\n\n## Description:  \nthe attacker (previously maintainer) is able to comment in internal commits by replying to the notification email which were received before :  \n![reply.png](https://h1.sec.gitlab.net/a/a392a50a-d4a5-4009-b837-a366cf6af725/reply.png)\n\n### Steps to reproduce Setup:  \n1. victim@domain.tld (maintainer)  \n2. attacker@doamin.tld(maintainer)\n\n## PoC :\n\n1. the analyst should comment on their commit with victim@domain.tld --\u003e  attacker@doamin.tld will receive the notification.  \n2. the analyst should remove the  attacker@doamin.tld role after that  \n3. the analyst should reply to the notification email received.:  \n![reply.png](https://h1.sec.gitlab.net/a/a392a50a-d4a5-4009-b837-a366cf6af725/reply.png)  \n4. bingo! it will be posted to the commit :  \n![post.png](https://h1.sec.gitlab.net/a/ee639b34-ad72-4556-a01f-3a6736635715/post.png)\n\n## Impact\n\nthis could be exploited to comment on the commits by the attacker who was accidentally added to the project or was removed .\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [reply.png](https://h1.sec.gitlab.net/a/a392a50a-d4a5-4009-b837-a366cf6af725/reply.png)\n* [post.png](https://h1.sec.gitlab.net/a/ee639b34-ad72-4556-a01f-3a6736635715/post.png)\n\nSecurity issue: https://dev.gitlab.org/gitlab/gitlabhq/issues/2906","state":"closed","created_at":"2019-07-05T14:17:07.504Z","updated_at":"2022-05-19T16:07:34.443Z","closed_at":"2019-11-07T11:34:35.514Z","closed_by":{"id":4086191,"username":"cmaxim","name":"Costel Maxim","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4086191/avatar.png","web_url":"https://gitlab.com/cmaxim"},"labels":["Deliverable","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3717078,"username":"cablett","name":"charlie ablett","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3717078/avatar.png","web_url":"https://gitlab.com/cablett"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-27","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29911","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29911","notes":"https://gitlab.com/api/v4/projects/278964/issues/29911/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29911/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29911","relative":"#29911","full":"gitlab-org/gitlab#29911"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22550362,"iid":12647,"project_id":278964,"title":"Improper access control allows the attacker to comment on an internal commit after he's no longer an admin","description":"**[HackerOne report #635512](https://hackerone.com/reports/635512)** by `hx01` on 2019-07-04:\n\n## Description:  \nthe attacker (previously maintainer) is able to comment in internal commits by replying to the notification email which were received before :  \n![reply.png](https://h1.sec.gitlab.net/a/a392a50a-d4a5-4009-b837-a366cf6af725/reply.png)\n\n### Steps to reproduce Setup:  \n1. victim@domain.tld (maintainer)  \n2. attacker@doamin.tld(maintainer)\n\n## PoC :\n\n1. the analyst should comment on their commit with victim@domain.tld --\u003e  attacker@doamin.tld will receive the notification.  \n2. the analyst should remove the  attacker@doamin.tld role after that  \n3. the analyst should reply to the notification email received.:  \n![reply.png](https://h1.sec.gitlab.net/a/a392a50a-d4a5-4009-b837-a366cf6af725/reply.png)  \n4. bingo! it will be posted to the commit :  \n![post.png](https://h1.sec.gitlab.net/a/ee639b34-ad72-4556-a01f-3a6736635715/post.png)\n\n## Impact\n\nthis could be exploited to comment on the commits by the attacker who was accidentally added to the project or was removed .\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [reply.png](https://h1.sec.gitlab.net/a/a392a50a-d4a5-4009-b837-a366cf6af725/reply.png)\n* [post.png](https://h1.sec.gitlab.net/a/ee639b34-ad72-4556-a01f-3a6736635715/post.png)","state":"closed","created_at":"2019-07-05T14:17:07.504Z","updated_at":"2022-05-19T16:07:24.685Z","closed_at":"2019-08-07T15:04:50.363Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["Enterprise Edition","HackerOne","[deprecated] Accepting merge requests","backend","devops::plan","group::project management","priority::3","security","severity::3"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":null,"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-27","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12647","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12647","notes":"https://gitlab.com/api/v4/projects/278964/issues/12647/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12647/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12647","relative":"#12647","full":"gitlab-org/gitlab#12647"},"severity":"UNKNOWN","moved_to_id":23579499,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699248,"iid":29908,"project_id":278964,"title":"Make performance bar highlight bad performance","description":"The performance bar is currently very neutral: it shows you what happens, with plenty of information, but it doesn't tell you if that's good or bad. I think we should make it more helpful to developers, users, and instance administrators by highlighting known poor performance.\n\nTimings are hard to set benchmarks for here, but counts are not. We could, for example, look for:\n\n1. More than N DB, Gitaly, or Redis calls on a page. We had a limit of 100 for DB queries set in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/16466, but I think it would be more visible in the performance bar if it was, say, bright yellow.\n2. Repeated calls with the same 'query'. We have those for all three external resources we track, so the frontend can compute this itself.\n3. The same bad patterns in AJAX requests. Right now those are hidden, because you have to go looking at the AJAX request from the dropdown. We could highlight them in the request selector - and the request selector itself! - when we detect these patterns in the response data.","state":"closed","created_at":"2019-07-05T13:11:21.212Z","updated_at":"2022-05-19T16:07:34.141Z","closed_at":"2019-10-09T11:29:46.704Z","closed_by":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"labels":["backend","bug::performance","devops::plan","frontend","group::project management","performance bar","type::feature","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29908","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29908","notes":"https://gitlab.com/api/v4/projects/278964/issues/29908/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29908/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29908","relative":"#29908","full":"gitlab-org/gitlab#29908"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699244,"iid":29906,"project_id":278964,"title":"Only fetch issue template names when actually editing an issue","description":"Issues can have templates stored in the repository: https://docs.gitlab.com/ee/user/project/description_templates.html\n\nWe store the names of the templates in Redis to avoid having to fetch the template name list for the dropdown from the git repository every time someone creates or edits an issue.\n\nBecause the edit page on issues is inline (not a separate page load), we load the template names whenever we load an issue for viewing.\n\nHowever, changing to use a different template in an issue is relatively uncommon compared to actually looking at the issue.\n\nhttps://dashboards.gitlab.net/d/rPsQXrImk/rails-controller?orgId=1\u0026refresh=1m\u0026var-env=gprd\u0026var-type=web\u0026var-stage=main\u0026var-controller=Projects::TemplatesController\u0026var-action=All shows that actually loading a template is a very rare operation.\n\nhttps://dashboards.gitlab.net/d/rPsQXrImk/rails-controller?orgId=1\u0026refresh=1m\u0026var-env=gprd\u0026var-type=web\u0026var-stage=main\u0026var-controller=Projects::IssuesController\u0026var-action=show\u0026var-action=update.json shows that viewing and editing issues are common.\n\nTherefore I think we should only load the template names async when you actually click to edit an issue. This will save us a Redis hit per issue view, which isn't much, but it is something that's completely unnecessary as it stands.","state":"closed","created_at":"2019-07-05T13:03:53.275Z","updated_at":"2022-05-19T16:07:33.882Z","closed_at":"2019-09-30T09:51:06.596Z","closed_by":{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"},"labels":["backend","backstage [DEPRECATED]","bug::performance","devops::plan","frontend","group::project management","missed:12.3","priority::3","severity::3","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"}],"author":{"id":443319,"username":"smcgivern","name":"Sean McGivern","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/443319/avatar.png","web_url":"https://gitlab.com/smcgivern"},"type":"ISSUE","assignee":{"id":3078895,"username":"pd-gitlab","name":"Patrick Derichs","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7e106768fae83577b0eec7daf082cb7d?s=80\u0026d=identicon","web_url":"https://gitlab.com/pd-gitlab"},"user_notes_count":6,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29906","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29906","notes":"https://gitlab.com/api/v4/projects/278964/issues/29906/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29906/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29906","relative":"#29906","full":"gitlab-org/gitlab#29906"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22546098,"iid":12643,"project_id":278964,"title":"Short SHA Attack and other problems in Commit Blob -- Forked Private Project's Source Code Disclosure","description":"**[HackerOne report #633358](https://hackerone.com/reports/633358)** by `ngalog` on 2019-07-01, assigned to `gitlab_cmaxim`:\n\n## Summary  \nThere is an interesting feature in Gitlab, if a project is forked to another project, the merge request commit blob of the forked project will be viewable from the original project. And I observed there are three problems in this feature: (Could be difficult to understand without example, you can come back after seeing the example)\n\n1. Once someone got knowledge to the commit sha value, there is no authorisation check against the MR commit page. i.e. Unauthorised users could view private project's commit source code from the original project page --\u003e more on this in example  \n2. The SHA value being used in the MR commit url, e.g. https://gitlab.com/goldngalog3/open-source-but-mr-is-private/blob/b2864d9d2a07d233be3f3877935a076d4a013cd4 could be shorten to four characters only, i.e. https://gitlab.com/goldngalog3/open-source-but-mr-is-private/blob/b286 -- and it is still valid  \n3. The MR commit url, is vulnerable to CSRF attack. Normally, the commit url will not be shown in the original project if there is no MR from the forked project. However, I found that the commit url will be shown in the original project after a GET request is made from the user with proper permission from the forked project.\n\n\n## Steps to reproduce and Example:  \nhttps://gitlab.com/goldngalog3/open-source-but-mr-is-private --\u003e original project  \nhttps://gitlab.com/ashleyjohnson/open-source-but-mr-is-private --\u003e forked project fork from goldngalog3/open-source-but-mr-is-private\n\nThe settings for `goldngalog3/open-source-but-mr-is-private` is that it has public repo, but private MR permission, i.e. public user/anonymous user should not be able to view any of MR source code\n\nThe settings for `ashleyjohnson/open-source-but-mr-is-private` is that it is a private project, and is forked from `goldngalog3/open-source-but-mr-is-private` and it is able to open MR in `goldngalog3/open-source-but-mr-is-private`\n\nI have already opened a MR from `ashleyjohnson/open-source-but-mr-is-private` to `goldngalog3/open-source-but-mr-is-private`. So as an anonymous user, you should not be able to view the MR details not to mention the source code for the MR. \n\nHowever you can still see the MR source code that belongs to `ashleyjohnson/open-source-but-mr-is-private` in this link https://gitlab.com/goldngalog3/open-source-but-mr-is-private/tree/b2864d9d2a07d233be3f3877935a076d4a013cd4   --\u003e Problem 1 I mentioned above\n\nWhat makes it even more interesting is that, if you visit https://gitlab.com/goldngalog3/open-source-but-mr-is-private/tree/b286 , you can still see the same thing, i.e. short SHA --\u003e Problem 2 I mentioned above\n\n\nAnd about problem 3, it needs some steps to verify from your side. You can verifiy using a forked project, as an owner of the forked project, visit this link with `path_of_forked_project`, `id_of_forked_project` and `id_of_original_project` replaced\n\n`https://gitlab.com/:path_of_forked_project/merge_requests/new/diffs?utf8=%E2%9C%93\u0026merge_request%5Bsource_project_id%5D=:id_of_forked_project\u0026merge_request%5Bsource_branch%5D=master\u0026merge_request%5Btarget_project_id%5D=:id_of_original_project\u0026merge_request%5Btarget_branch%5D=master`\n\nAnd without doing anything else, i.e. pretending you are being csrf attacked, you should be able to see your forked project source code in https://gitlab.com/:path_of_original_project/tree/:commit_sha_of_your_master_ref_forked_project\n\n\n## Conclusion  \n1. Commit SHA of private project is not checking for proper authorisation so that you can see the source code from private forked project as in this [link](https://gitlab.com/goldngalog3/open-source-but-mr-is-private/tree/b2864d9d2a07d233be3f3877935a076d4a013cd4)  \n2. Commit SHA of private project is vulnerable to short sha attack, so that you can see the source code using a very short sha, just 4 characters are enough, as in this link https://gitlab.com/goldngalog3/open-source-but-mr-is-private/tree/b286  \n3. Commi SHA of private project will be created in the source project with a CSRF attack as shown above.\n\n## Impact\n\nPrivate project source code could be stolen using the above problems in two steps for the scenario that the original project is public but the forked project is private:\n\n- Send CSRF attack to the private proejct owner as described above  \n- Brute force that 4 characters of SHA commit in https://gitlab.com/:original_project_with_public_repo/tree/:brute_force_here -- possible characters are abcdef1234567890, there are only 65535 possibilities for four characters, brute force could finish in one hour or less with different IP addresses.","state":"closed","created_at":"2019-07-05T11:46:07.981Z","updated_at":"2020-03-04T20:13:11.870Z","closed_at":"2020-01-30T21:55:07.802Z","closed_by":{"id":4226366,"username":"ankelly","name":"Andrew Kelly","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4226366/avatar.png","web_url":"https://gitlab.com/ankelly"},"labels":["Enterprise Edition","HackerOne","backend","devops::create","group::source code","priority::3","security","severity::3","workflow::in review"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"user_notes_count":25,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12643","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12643","notes":"https://gitlab.com/api/v4/projects/278964/issues/12643/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12643/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12643","relative":"#12643","full":"gitlab-org/gitlab#12643"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":23138686,"iid":13049,"project_id":278964,"title":"Design view: Allow comment pins on designs to be resolvable.","description":"### Problem to solve\nWhen you receive lots of feedback on a Design, the number of comment pins can build up quickly! As your discussion thread grows, it gets hard to know which discussions are complete and which still need work.\n\nWith this feature you’ll have the ability to mark any comment as “Resolved” to signify that it is now complete. Even better — resolved comment pins will disappear from the Design so you can focus on what’s left. And if you need to revisit something, all your completed discussions will be availabled in the “Resolved Comment” area at the bottom of the sidebar. From there, you can find them again and see which revision applied at the point of revision.\n\nWe think this will greatly improve your workflow so you can focus on what is relevant to the current feedback.\n\n### Further details\n\nThe backend will need to implement two new GraphQL mutations:\n\n- `resolveDiscussion`\n- `unresolveDiscussion`\n\nNote, there is no service to unresolve discussions, however there are multiple places in the GitLab codebase that call `discussion.unresolve!` directly without a service. I believe we should do the same within our unresolve mutation, rather than to create a service now.\n\nThe frontend will need to implement the ability to resolve an annotation.\n\n### Proposal from @mnearents \n\n\u003c!-- Sketch Cloud prototype: https://sketch.cloud/s/jQVYo/a/aREjEA/play --\u003e\n* [Figma Prototype 1: Resolving \u0026 unresolving via icon click](https://www.figma.com/proto/Bl2r5k629nVWgsg0vDQIMH/Design-Management-Issues?node-id=183%3A966\u0026viewport=2091%2C539%2C0.3550204336643219\u0026scaling=min-zoom)\n* [Figma Prototype 2: Resolving \u0026 unresolving via comment](https://www.figma.com/proto/Bl2r5k629nVWgsg0vDQIMH/Design-Management-Issues?node-id=183%3A1048\u0026viewport=1898%2C595%2C0.17950084805488586\u0026scaling=min-zoom)\n* See designs tab\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e","state":"closed","created_at":"2019-07-05T01:29:02.268Z","updated_at":"2020-12-10T19:00:37.150Z","closed_at":"2020-06-04T16:20:28.351Z","closed_by":{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"},"labels":["Category:Design Management","Deliverable","Dogfooding::Build in GitLab","Product Vision FY20","backend","backend-weight::3","design::review","devops::plan","direction","documentation","frontend","frontend-weight::5","group::product planning","quad-planning::complete-action","type::feature","workflow::verification"],"milestone":{"id":1112145,"iid":47,"group_id":9970,"title":"13.1","description":"","state":"closed","created_at":"2020-01-03T12:28:30.160Z","updated_at":"2020-10-08T12:01:07.361Z","due_date":"2020-06-17","start_date":"2020-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/47"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},{"id":2950912,"username":"ntepluhina","name":"Natalia Tepluhina","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2950912/avatar.png","web_url":"https://gitlab.com/ntepluhina"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":73,"merge_requests_count":1,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/13049","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":8,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/13049","notes":"https://gitlab.com/api/v4/projects/278964/issues/13049/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/13049/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#13049","relative":"#13049","full":"gitlab-org/gitlab#13049"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2582,"epic":{"id":18935,"iid":2582,"title":"🐶 Design Management dogfooding priority issues","url":"/groups/gitlab-org/-/epics/2582","group_id":9970},"iteration":null,"health_status":"on_track"},{"id":22535663,"iid":12637,"project_id":278964,"title":"Add a cop to check for usage of `within` instead of `within_element`","description":"The following discussion from !14360 should be addressed:\n\n- [ ] @splattael commented on a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14360#note_188499642): \n\n\u003e  So, if `within_element` is preferred over `within` I wonder we'd need a :cop: rule for this specifically for the `qa/` folder to guide other folks.\n\u003e \n\u003e Currently, there are plenty of places where `within` is used:\n\u003e \n\u003e * [`page.within(selector) { yield } if block_given?`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/base.rb#L61)\n\u003e * [`page.within(element_selector_css(name), text: text) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/base.rb#L149)\n\u003e * [`page.within all_elements(name)[index] do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/base.rb#L155)\n\u003e * [`page.within('.flash-notice') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/layout/banner.rb#L12)\n\u003e * [`page.within('.qa-groups-dropdown-sidebar') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/main/menu.rb#L35)\n\u003e * [`page.within('.qa-projects-dropdown-sidebar') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/main/menu.rb#L45)\n\u003e * [`page.within('.qa-navbar') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/main/menu.rb#L85)\n\u003e * [`page.within('.dropdown-menu') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/main/menu.rb#L94)\n\u003e * [`page.within(element_selector_css(:assignee_block)) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/merge_request/show.rb#L103)\n\u003e * [`page.within(element_selector_css(:labels_block)) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/merge_request/show.rb#L109)\n\u003e * [`page.within('.sidebar-top-level-items') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/profile/menu.rb#L31)\n\u003e * [`page.within('.issuable-show-labels') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/issuable/sidebar.rb#L13)\n\u003e * [`page.within('.block.milestone') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/issuable/sidebar.rb#L19)\n\u003e * [`within first_token_row_for_name(token_name) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/profile/personal_access_tokens.rb#L48)\n\u003e * [`page.within('.clone-options-dropdown') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/component/legacy_clone_panel.rb#L36)\n\u003e * [`within('.sidebar-top-level-items') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/sub_menus/common.rb#L9)\n\u003e * [`within('.fly-out-list') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/sub_menus/common.rb#L15)\n\u003e * [`within(project_import_row) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/import/github.rb#L46)\n\u003e * [`within(\".js-branch-#{branch_name}\") do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/branches/show.rb#L21)\n\u003e * [`within(\".js-branch-#{branch_name} .badge\") do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/branches/show.rb#L41)\n\u003e * [`within('.ci-variable-row-body', text: key) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/settings/ci_variables.rb#L50)\n\u003e * [`within('.ci-header-container') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/pipeline/show.rb#L30)\n\u003e * [`within('.pipeline-graph') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/pipeline/show.rb#L36)\n\u003e * [`within('.ci-job-component', text: name) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/pipeline/show.rb#L37)\n\u003e * [`within(\".js-cluster-application-row-#{application_name}\") do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/operations/kubernetes/show.rb#L29)\n\u003e * [`within(\".js-cluster-application-row-#{application_name}\") do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/page/project/operations/kubernetes/show.rb#L36)\n\u003e * [`within find_element(:template_option_row, text: project_name) do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/ee/page/project/new.rb#L48)\n\u003e * [`page.within('form.filter-form') do`](https://gitlab.com/gitlab-org/gitlab-ee/blob/859fdf6b8/qa/qa/ee/page/project/issue/index.rb#L29)\n\u003e \n\u003e Funnily, some of them already use `.qa-` selectors so them we can adjust easily.\n\nThere are many similar cops that we could implement for all the other ways capybara page methods could be used instead of `*_element` methods, or possibly a more general cop, but we can start with this specific cop.","state":"closed","created_at":"2019-07-05T01:01:53.447Z","updated_at":"2019-08-12T14:57:24.918Z","closed_at":"2019-07-05T01:02:34.034Z","closed_by":{"id":655908,"username":"mlapierre","name":"Mark Lapierre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/655908/avatar.png","web_url":"https://gitlab.com/mlapierre"},"labels":["Enterprise Edition","QA","Quality","backstage [DEPRECATED]"],"milestone":null,"assignees":[],"author":{"id":655908,"username":"mlapierre","name":"Mark Lapierre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/655908/avatar.png","web_url":"https://gitlab.com/mlapierre"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12637","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12637","notes":"https://gitlab.com/api/v4/projects/278964/issues/12637/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12637/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12637","relative":"#12637","full":"gitlab-org/gitlab#12637"},"severity":"UNKNOWN","moved_to_id":22535667,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699207,"iid":29884,"project_id":278964,"title":"the date of the last deployment of an environment is not correct when the job was started manually several days after its pipeline","description":"### Summary\n\nHello guys,\n\nI noticed that in the environment page, the date of the last job that deployed is the start date of the job, not the end date. So when in a pipeline we have manual jobs, which are not started on the same day, then we have a time lag.\n\nFor example, if I launch a pipeline on 01/06/19 and launch the deployment job manually on 03/06/19, then the last deployment date displayed in the environment page will be 01/06/19 instead of 03/06/19.\n\nI don't know if it's a bug, or if it's an evolution, but in any case it seems to me that using the job end date would be more appropriate because of the famous manual jobs.\n\n### Steps to reproduce\n\n- create a pipeline with manual deployment jobs.\n- start the pipeline today\n- run manual jobs by tomorow\n\n### What is the current *bug* behavior?\n\nwrong latest deployment job date (seems to be start date)\n\n### What is the expected *correct* behavior?\n\nuse deployment jobs end date because of manual jobs\n\n#### Results of GitLab environment info\n\ni am using self hosted Gitlab Community Edition 11.11.3","state":"closed","created_at":"2019-07-04T16:36:12.743Z","updated_at":"2021-11-04T04:04:35.783Z","closed_at":"2021-10-27T12:48:06.033Z","closed_by":{"id":758045,"username":"shinya.maeda","name":"Shinya Maeda","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/758045/avatar.png","web_url":"https://gitlab.com/shinya.maeda"},"labels":["Category:Release Orchestration","Release::P2","UX","[deprecated] Accepting merge requests","backend","devops::release","environments","group::release","missed-SLO","priority::2","reproduced on GitLab.com","section::ops","severity::2","type::bug","usability","workflow::ready for development"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[],"author":{"id":2972267,"username":"lepapareil","name":"Filipe Pinto","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2972267/avatar.png","web_url":"https://gitlab.com/lepapareil"},"type":"ISSUE","assignee":null,"user_notes_count":26,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29884","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29884","notes":"https://gitlab.com/api/v4/projects/278964/issues/29884/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29884/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29884","relative":"#29884","full":"gitlab-org/gitlab#29884"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3294,"epic":{"id":53415,"iid":3294,"title":"Environments: Bugs to Fix","url":"/groups/gitlab-org/-/epics/3294","group_id":9970,"human_readable_end_date":"Aug 17, 2022","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22528675,"iid":12630,"project_id":278964,"title":"Private System Note Disclosure using GraphQL","description":"**[HackerOne report #633001](https://hackerone.com/reports/633001)** by `ngalog` on 2019-06-30:\n\n### Summary  \nWhen you use the REST API or UI to view an issue's discussion/notes, private system note is hidden to member's only.\n\nSuch as moving an issue to a private project, making issue as duplicate of a confidential issue, someone mentioned this issue in a confidential issue.\n\nThey are properly hidden in REST and UI, but you can still see them in graphql\n\n### Steps to reproduce  \n- Open a new private browser without an authenticated session  \n- visit https://gitlab.com/-/graphql-explorer  \n- paste this query and see the difference between UI https://gitlab.com/username16/ci-test/issues/1 \u003c-- this is public project with public issue doing some private stuff and graphql response\n\n```  \nquery {  \n  project(fullPath:\"username16/ci-test\"){  \n    issue(iid:\"1\"){  \n      descriptionHtml\n\n      notes{  \n        edges{  \n          node{  \n            bodyHtml  \n            system  \n            author{  \n              username  \n            }  \n            body  \n          }  \n        }  \n      }  \n    }}  \n  }  \n```\n\n- You should notice it has moved to dynamic#1, which is not visible from UI  \n- also you should be able to see it was marked as duplicate of #2, which is not visible from UI cause #2 is confidential  \n- also you can see someone mentioned this issue in #2, which is not visible from UI cause #2 is confidentail\n\n### Impact  \nDisclosure of all system note of an issue/MR/designs that should be private\n\n## Reproduced on gitlab.com\n\n## Impact\n\nDisclosure of all system note of an issue/MR/designs that should be private","state":"closed","created_at":"2019-07-04T15:10:40.119Z","updated_at":"2022-05-19T16:07:24.047Z","closed_at":"2019-09-30T14:26:23.011Z","closed_by":{"id":4056133,"username":"jeremymatos","name":"Jeremy Matos","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/7c972d878793ca2302186e5d8c0c0dd8?s=80\u0026d=identicon","web_url":"https://gitlab.com/jeremymatos"},"labels":["Enterprise Edition","HackerOne","backend","devops::plan","group::project management","priority::3","security","severity::3","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3483274,"username":"acroitor","name":"Alexandru Croitor","state":"active","avatar_url":"https://secure.gravatar.com/avatar/461378ef52c26eec55e6c15ec09bb9ed?s=80\u0026d=identicon","web_url":"https://gitlab.com/acroitor"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-09-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12630","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12630","notes":"https://gitlab.com/api/v4/projects/278964/issues/12630/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12630/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12630","relative":"#12630","full":"gitlab-org/gitlab#12630"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22527176,"iid":12626,"project_id":278964,"title":"Geo: Remove upgrade instructions of very old versions","description":"When looking at https://docs.gitlab.com/ee/administration/geo/replication/updating_the_geo_nodes.html#upgrading-to-gitlab-108 and following. The ~Geo upgrade doc is cluttered with instructions of versions that are over a year old (10.8 is released on 2018-05-22).\n\nWe should see if we can remove these instructions, since we have versioned docs now and people cannot skip a major release (https://docs.gitlab.com/ee/policy/maintenance.html#upgrade-recommendations). So we can add a small note and link to https://docs.gitlab.com/11.11/ee/administration/geo/replication/updating_the_geo_nodes.html#upgrading-to-gitlab-108 instead.","state":"closed","created_at":"2019-07-04T14:16:27.034Z","updated_at":"2019-12-11T20:02:25.037Z","closed_at":"2019-07-10T10:33:18.974Z","closed_by":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"labels":["Deliverable","Enterprise Edition","Geo Administration","[deprecated] Accepting merge requests","devops::systems","group::geo"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[],"author":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"type":"ISSUE","assignee":null,"user_notes_count":2,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12626","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12626","notes":"https://gitlab.com/api/v4/projects/278964/issues/12626/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12626/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12626","relative":"#12626","full":"gitlab-org/gitlab#12626"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1935,"epic":{"id":12494,"iid":1935,"title":"Geo: Improved Geo upgrade documentation","url":"/groups/gitlab-org/-/epics/1935","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22526785,"iid":12625,"project_id":278964,"title":"Investigate the Geo update process using OmniBus","description":"### TL;DR\n\nThe main purpose of this effort is to follow the documentation of the Geo update process from one entry point discovery to a successful update and discover any pain points.\n\nIn order to do so, I upgraded a simple Geo setup from `11.11.5` to `12.0.3`\n\nThe process is cumbersome and involves multiple steps; however, it is linear and I executed it without error on the first try.\n\n### Next steps\n\n* [x] Determine a technical solution to reduce the number of individual steps needed for a Geo upgrade. Currently 8 steps are needed for the `primary` and `secondary`\n  https://gitlab.com/gitlab-org/gitlab-ee/issues/12746\n* [x] Create issue to improve ambiguous parts of the documentation\n* [x] Determine where instructions are located for an HA and/or zero downtime deployment for Geo \n* [x] Determine if I accidentally followed the HA/Zero downtime instructions?\n\n### Setup scenario\n\n- Simple deployment with a primary and a single secondary ( I used @vsizov's ansible scripts)\n\n```mermaid\ngraph LR;\n     fz-geo-primary --\u003e fz-geo-secondary\n```\n\n- No HA\n- Downtime updates\n- Using OmniBus packages from a repository (not downloaded manually) on Ubuntu\n\n### Following the documentation\n\nI entered the documentation by browsing to `https://docs.gitlab.com/` and searching for `Geo update` [in the central search bar](https://docs.gitlab.com/search/?q=Geo+update). The first relevant hit brought me to https://docs.gitlab.com/ee/administration/geo/replication/updating_the_geo_nodes.html#general-update-steps . This is good because I could immediately continue.\n\nGiven that my installed GitLab version is `11.11.5`, I ignored the long list of old instructions.\n\n\u003e all you need to do is update GitLab itself:\n\nThis is not *actually* correct. I currently have to also update the tracking database on secondary nodes (see https://gitlab.com/gitlab-org/gitlab-ee/issues/12270) and test things. We may consider rephrasing this.\n\n\u003e 1. Log into each node (primary and secondary nodes).\n\nI assume this means \"to a console on your node\". This can mean I have to open as many terminal sessions as there are Geo nodes. For large installations, this suggestion may cause confusion. Maybe this can be rephrased or removed as it [is replicated later](https://docs.gitlab.com/omnibus/update/README.html#geo-deployment)\n\n\u003e 2. Update GitLab.\n\nI followed the link to the documentation here and arrived at https://docs.gitlab.com/ee/update/README.html I followed the Omnibus package installation instructions, which are somewhere else https://docs.gitlab.com/omnibus/update/README.html\n\nHere I was confused by the structure of the page. There are separate instructions for [Zero downtime updates](https://docs.gitlab.com/omnibus/update/README.html#zero-downtime-updates), a single deployment, Multi-node HA and Geo deployment.\n\n**Question:** What about a combination of these things? What is the path for an HA deployment with Geo enabled and Zero downtime? Is this even supported?\n\n**Answer**: The indentation for the documentation was wrong. These instructions are for zero downtime deployments. There is currently no dedicated documentation for HA Geo (it means different things to different people)\n\n{+Resolution+}: Fixed in: https://gitlab.com/gitlab-org/omnibus-gitlab/merge_requests/3431\n\nI assumed that in my setup (see above) the [Geo deployment instructions](https://docs.gitlab.com/omnibus/update/README.html#geo-deployment) were what I was looking for. This felt strange as the statement in [the Geo documentation](https://docs.gitlab.com/ee/administration/geo/replication/updating_the_geo_nodes.html#general-update-steps) suggested that I just have to update Gitlab - but now this is Geo specific?\n\n**Question:** Is this true? I have a feeling these instructions may be for HA/Zero downtime but I am unsure because it is a top-level documentation entry.\n\n**Answer:** These instructions are only relevant for zero downtime deployments. You can otherwise use the instructions for https://docs.gitlab.com/omnibus/update/README.html#updating-using-the-official-repositories in a simple setup.\n\nWhile browsing the instructions I realized that the first step is to update the `primary` and then a `secondary`. I don't think there was a need to open all terminal windows in parallel?\n\n{+Resolution+}: Opened https://gitlab.com/gitlab-org/gitlab-ee/issues/12773 and will be addressed in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/32212\n\n#### Primary\n\n\u003e 1. Ensure that gitlab_rails['auto_migrate'] = false is set in /etc/gitlab/gitlab.rb\n\nWhy? Maybe a link to https://docs.gitlab.com/omnibus/settings/database.html#disabling-automatic-database-migration?\n\n**Question:** If this is always required for updates, why not change it automatically? (non Geo specific)\n\n**Answer:** (Toon) As stated above, only for zero-down time.\n\n{+Resolution+}: Also clarified in https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/32212.\n\n**Question:** What about after the installation? Do I need to reset this setting?\n\n**Answer:** ~~Unclear at this moment.~~\n\n**Answer:** (Toon) It does not reset itself, cause it assumes you'll want to do zero-down time upgrades every time.\n\n{+Resolution+}: To be addressed in https://gitlab.com/gitlab-org/omnibus-gitlab/issues/4649\n\n\u003e 2. Create an empty file at /etc/gitlab/skip-auto-reconfigure. During software installation only, this will prevent the upgrade from running gitlab-ctl reconfigure and automatically running database migrations\n\nI think this is outdated as per %\"12.0\" and needs updating https://docs.gitlab.com/omnibus/update/gitlab_12_changes.html#removal-of-support-for-etcgitlabskip-auto-migrations-file\n\n**Answer:** (Toon) Not true, they just renamed the filename cause the purpose became slightly different.\n\n{+Resolution+}: NOOP\n\n\u003e 3. Update the GitLab package\n\nNo questions, this looks simple enough.\n\n\u003e 4. To get the database migrations in place, run\n`SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-ctl reconfigure`\n\n**Question:** Why do I need `SKIP_POST_DEPLOYMENT_MIGRATIONS`?\n\n**Answer:** (Toon) Because in a zero-down time upgrade you want to have control over when things happen.\n\n{+Resolution+}: NOOP\n\n\u003e 5. Run non post-deployment database migrations\n`SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-rake db:migrate`\n\n**Question:** This command does something different depending on passing this variable? see 6\n\n**Answer:** (Toon) There are 2 types of migrations. Those you can do while an older version is running, and those should run after/while the new version is running.\n\n{+Resolution+}: NOOP\n\n\u003e 6. Run post-deployment database migrations\n`sudo gitlab-rake db:migrate`\n\nThis feels repetitive and I needed to read carefully that six is *post* deployment (now the `SKIP_POST_DEPLOYMENT_MIGRATIONS` makes sense). \n\n**Question:** Could 4-6 be simplified into one step?\n\n**Answer:** Probably yes. See https://gitlab.com/gitlab-org/gitlab-ee/issues/12746\n\n**Answer:** (Toon) See answer at 5.\n\n{+Resolution+}: NOOP\n\n\u003e 7. Hot reload unicorn and sidekiq services\n\nI don't have context on this, but I am just doing it :)\n\n**Question:** (Toon) I'm not sure why this happens _after_ doing the post-deploy migrations?\n\n{+Resolution+}: Opened https://gitlab.com/gitlab-org/omnibus-gitlab/issues/4637\n\n\u003e 8. Verify Geo configuration and dependencies \n\nGreat tool! Can't we run this automatically every time Geo is updated? I would like to see the Geo role included in the rake task!\n\n#### Secondary\n\nAlmost all comments apply as well.\n\n**Question:** Why do I not need to run non-post-deployment migrations? Why are they not called just deployment migrations? \n\n**Answer:** (Toon) I think `SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-rake db:migrate` on the primary is not needed. It should be done by `SKIP_POST_DEPLOYMENT_MIGRATIONS=true sudo gitlab-ctl reconfigure`.\n\n{+Resolution+}: Will be addressed in https://gitlab.com/gitlab-org/gitlab-ee/issues/12746\n\nI almost completely forgot by now that I still have to do things for the `secondary`. The `sudo gitlab-rake geo:status` also reports healthy already?\n\nI looked at the [initial documentation again](https://docs.gitlab.com/ee/administration/geo/replication/updating_the_geo_nodes.html#update-tracking-database-on-secondary-node) and realised that I already ran that command? The same applies for checking [the Geo status](https://docs.gitlab.com/ee/administration/geo/replication/updating_the_geo_nodes.html#check-status-after-updating)\n\n**Question:** What does \"you might need to run migrations on the tracking database\" mean? When do I need to? How do I know?\n\n**Answer:** (Toon) A primary has only 1 db: the main one. It has read-write to that db, so it should perform the migration. A secondary has a read-only replica of that database, so when the primary does the migrations, they get replicated, and thus the secondary doesn't have to do migration on the main db. But it has a second db, the tracking database. It's a db specific to that secondary only, and therefore it needs to make sure all migrations on db are done. The process is very similar to that on the primary, it's just a db of different data. The omnibus package should know by itself whether the node is primary or secondary, and take the right steps based on that.\n\n{+Resolution+}: Addressed in https://gitlab.com/gitlab-org/gitlab-ee/issues/12270\n\n### Results\n\nThe process overall is pretty linear and other than being a lot of copy-paste relatively easy to follow. The documentation flow should be improved and the structure confused me at times. Particularly, I am not sure if [the Geo deployment](https://docs.gitlab.com/omnibus/update/README.html#geo-deployment) is only relevant to HA/Zero downtime deployments? Given that the steps listed in [General update steps](https://docs.gitlab.com/ee/administration/geo/replication/updating_the_geo_nodes.html#general-update-steps) appear to be already executed when following the [Geo deployment instructions](https://docs.gitlab.com/omnibus/update/README.html#geo-deployment), this might be the case.","state":"closed","created_at":"2019-07-04T14:02:00.350Z","updated_at":"2019-12-11T20:02:25.954Z","closed_at":"2019-08-26T09:22:57.221Z","closed_by":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"labels":["Enterprise Edition","Geo Administration","UX","devops::systems","documentation","group::geo","missed:12.1","product discovery [DEPRECATED]"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"}],"author":{"id":3944199,"username":"fzimmer","name":"Fabian Zimmer","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3944199/avatar.png","web_url":"https://gitlab.com/fzimmer"},"type":"ISSUE","assignee":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"user_notes_count":17,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12625","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12625","notes":"https://gitlab.com/api/v4/projects/278964/issues/12625/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12625/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12625","relative":"#12625","full":"gitlab-org/gitlab#12625"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1935,"epic":{"id":12494,"iid":1935,"title":"Geo: Improved Geo upgrade documentation","url":"/groups/gitlab-org/-/epics/1935","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699202,"iid":29881,"project_id":278964,"title":"Web IDE: After a file is deleted, re-added with another content and committed, the file is still marked as changed in the tree","description":"### Summary\n\nAfter a file is deleted, re-added with another content and committed after all, the file is still marked as changed in the tree.\n\n### Steps to reproduce\n\n* In a project in Web IDE, `delete` a file from\n* `Add` a new file with the same name\n* Click \"Commit\" and `stage` your newly-added file: it will replace the already-staged one\n* `Commit` your change\n\nAfter successfully committing your changes, the editor gets back to Edit view of the project with the new file in it, but the file is still marked as changed (\"Unstaged addition\" tooltip).\n\n### Example Project\n\nstaging.gitlab.com at the time of writing\n\n### What is the current *bug* behavior?\n\nThe new file that has replaced an old one is marked as changed even after the replacement has been committed.\n\n### What is the expected *correct* behavior?\n\nAfter successfully committing the replacement file, the file should not be anyhow marked and should be a normal entry in the tree.\n\n### Output of checks\n\nThis bug happens at `staging.gitlab.com` at the time of writing","state":"closed","created_at":"2019-07-04T13:53:08.018Z","updated_at":"2019-11-18T07:12:49.904Z","closed_at":"2019-10-30T12:59:31.330Z","closed_by":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"labels":["Category:Web IDE","Deliverable","devops::create","frontend","group::editor","missed-SLO","priority::2","severity::3","type::bug","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"}],"author":{"id":3199302,"username":"dmishunov","name":"Denys Mishunov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d85e45af29611ac2c1395e3c3d6ec5d6?s=80\u0026d=identicon","web_url":"https://gitlab.com/dmishunov"},"type":"ISSUE","assignee":{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"},"user_notes_count":3,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29881","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29881","notes":"https://gitlab.com/api/v4/projects/278964/issues/29881/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29881/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29881","relative":"#29881","full":"gitlab-org/gitlab#29881"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22519037,"iid":12619,"project_id":278964,"title":"Add feature specs for multiple issue boards in groups","description":"The following discussion from !14261 should be addressed:\n\n- [ ] @winh started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14261#note_187741869):  (+2 comments)\n\n    \u003e @acroitor It looks like we have no feature specs for (multiple) group issue boards yet. :thinking: Should we keep these tests but make them run on a group instead of a project?","state":"closed","created_at":"2019-07-04T11:31:43.179Z","updated_at":"2022-05-19T16:07:23.359Z","closed_at":"2019-08-16T06:35:41.252Z","closed_by":{"id":1642716,"username":"jprovaznik","name":"Jan Provaznik","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4577c0b60b7640100030d7ab267aba95?s=80\u0026d=identicon","web_url":"https://gitlab.com/jprovaznik"},"labels":["Enterprise Edition","backend","backstage [DEPRECATED]","devops::plan","frontend","group::project management","maintenance::refactor","test","workflow::in review"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":426128,"username":"felipe_artur","name":"Felipe Artur","state":"active","avatar_url":"https://secure.gravatar.com/avatar/dbad92659914f56621cbdd726e283e60?s=80\u0026d=identicon","web_url":"https://gitlab.com/felipe_artur"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12619","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12619","notes":"https://gitlab.com/api/v4/projects/278964/issues/12619/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12619/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12619","relative":"#12619","full":"gitlab-org/gitlab#12619"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699183,"iid":29873,"project_id":278964,"title":"Documentation lacks how to enable Project snippets","description":"### Summary\n\nThere is no button to do this, yet the docs [mention it](https://docs.gitlab.com/ee/user/snippets.html#project-snippets).\n\n### Steps to reproduce\n\n(How one can reproduce the issue - this is very important)\n\n### Example Project\n\n(If possible, please create an example project here on GitLab.com that exhibits the problematic behavior, and link to it here in the bug report)\n\n(If you are using an older version of GitLab, this will also determine whether the bug is fixed in a more recent version)\n\n### What is the current *bug* behavior?\n\n(What actually happens)\n\n### What is the expected *correct* behavior?\n\n(What you should see instead)\n\n### Relevant logs and/or screenshots\n\n(Paste any relevant logs - please use code blocks (```) to format console output,\nlogs, and code as it's tough to read otherwise.)\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-07-04T10:15:05.924Z","updated_at":"2019-09-18T11:10:22.103Z","closed_at":"2019-09-18T11:10:12.422Z","closed_by":{"id":236961,"username":"marcia","name":"Marcia Ramos","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/236961/avatar.png","web_url":"https://gitlab.com/marcia"},"labels":["Category:Snippets","Create [DEPRECATED]","devops::create","docs-missing","documentation","group::editor","priority::4","severity::4","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":331646,"username":"jacopo-beschi","name":"🙈  jacopo beschi 🙉","state":"active","avatar_url":"https://secure.gravatar.com/avatar/692fb66988ac3863f360e846c1afc4f3?s=80\u0026d=identicon","web_url":"https://gitlab.com/jacopo-beschi"}],"author":{"id":206339,"username":"mondly-iulian-onofrei","name":"Iulian Onofrei","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/206339/avatar.png","web_url":"https://gitlab.com/mondly-iulian-onofrei"},"type":"ISSUE","assignee":{"id":331646,"username":"jacopo-beschi","name":"🙈  jacopo beschi 🙉","state":"active","avatar_url":"https://secure.gravatar.com/avatar/692fb66988ac3863f360e846c1afc4f3?s=80\u0026d=identicon","web_url":"https://gitlab.com/jacopo-beschi"},"user_notes_count":15,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29873","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29873","notes":"https://gitlab.com/api/v4/projects/278964/issues/29873/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29873/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29873","relative":"#29873","full":"gitlab-org/gitlab#29873"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699178,"iid":29871,"project_id":278964,"title":"Backup the Package Registry with the GitLab Backup Rake task","description":"\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n*This page may contain information related to upcoming products, features and functionality.\nIt is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes.\nJust like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features, or functionality remain at the sole discretion of GitLab Inc.*\n\u003c!-- triage-serverless v3 PLEASE DO NOT REMOVE THIS SECTION --\u003e\n### Problem to solve\n\nCurrently [the backup rake task](https://docs.gitlab.com/ee/raketasks/backup_restore.html#backup-options) does not backup the package registry.\n\n### Proposal\n\nPackages should be included in the backup by default, and it should be possible to exclude them if needed in the same way as described in [Excluding specific directories from the backup](https://docs.gitlab.com/ee/raketasks/backup_restore.html#excluding-specific-directories-from-the-backup)\n\n\n### Workarounds\n1. Customers report that copying the content of `/var/opt/gitlab/gitlab-rails/shared/packages/` from an old to a new instance works, after restoring package metadata via the normal backup-and-restore procedure. \n\n\n### Links / references\n\n- https://docs.gitlab.com/ee/user/project/packages/maven_repository.html\n- https://docs.gitlab.com/ee/user/project/packages/npm_registry.html\n- https://docs.gitlab.com/ee/raketasks/backup_restore.html","state":"closed","created_at":"2019-07-04T09:34:20.164Z","updated_at":"2022-01-24T19:56:40.173Z","closed_at":"2022-01-24T19:56:39.800Z","closed_by":{"id":3799560,"username":"trizzi","name":"Tim Rizzi","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3799560/avatar.png","web_url":"https://gitlab.com/trizzi"},"labels":["Category:Backup/Restore of GitLab instances","Category:Package Registry","Package:P1","[deprecated] Accepting merge requests","customer","devops::package","direction","group::package registry","reliability","section::ops","type::feature","workaround available"],"milestone":{"id":2204142,"iid":72,"group_id":9970,"title":"14.10","description":"","state":"active","created_at":"2021-08-26T19:12:33.701Z","updated_at":"2021-08-26T19:12:33.701Z","due_date":"2022-04-17","start_date":"2022-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/72"},"assignees":[],"author":{"id":1990167,"username":"atanayno","name":"Alexandr Tanayno","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1990167/avatar.png","web_url":"https://gitlab.com/atanayno"},"type":"ISSUE","assignee":null,"user_notes_count":30,"merge_requests_count":0,"upvotes":11,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29871","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29871","notes":"https://gitlab.com/api/v4/projects/278964/issues/29871/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29871/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":"https://gitlab.com/api/v4/projects/278964/issues/332006"},"references":{"short":"#29871","relative":"#29871","full":"gitlab-org/gitlab#29871"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2891,"epic":{"id":31885,"iid":2891,"title":"Make the GitLab Package Registry 'Complete'","url":"/groups/gitlab-org/-/epics/2891","group_id":9970,"human_readable_end_date":"Dec 22, 2023","human_readable_timestamp":"\u003cstrong\u003e11\u003c/strong\u003e months remaining"},"iteration":null,"health_status":null},{"id":22510449,"iid":12610,"project_id":278964,"title":"Able to reach group/subgroup's project using dashboard activity to bypass IP Restriction for Group","description":"**[HackerOne report #632025](https://hackerone.com/reports/632025)** by `ngalog` on 2019-06-29:\n\n### Summary  \nAs mentioned here https://docs.gitlab.com/ee/user/group/index.html#restrict-group-access-by-ip-address\n\nUser should not be able to access the group's any stuff after the IP restriction, but I can still accessed the issues/MR/epic title using dashboard activity\n\nThis is a possible duplicate of #632023, feel free to close as dupe if they share the same root cause.\n\n### Steps to reproduce  \n- As a member of the target group, **star** the projects that you already have accessed to  \n- Visit https://gitlab.com/groups/:group/-/edit#js-permissions-settings and make the ip restriction to 127.0.0.1  \n- As a member of the group, visit your dashboard, and click activity, and see star project's activity, and you can still see the ip restricted project's information/events\n\n\n### Impact  \nBypass IP restriction for group's member\n\n### Examples\n\nable to reproduce in gitlab.com \n\n### What is the current *bug* behavior?  \nbypass ip restriction in UI\n\n### What is the expected *correct* behavior?  \nShould prevent all ways to disclose info wit IP\n\n## Impact\n\n.","state":"closed","created_at":"2019-07-04T07:47:30.239Z","updated_at":"2022-05-25T11:36:58.893Z","closed_at":"2021-11-23T04:49:11.817Z","closed_by":{"id":9043659,"username":"rshambhuni","name":"Rohit Shambhuni","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/9043659/avatar.png","web_url":"https://gitlab.com/rshambhuni"},"labels":["Category:Authentication and Authorization","Enterprise Edition","Epic 6340","FY22::Q3","HackerOne","Weakness::CWE-285","backend","devops::manage","documentation","estimation::completed","group::organization","priority::3","section::dev","security","security-backlog::review-complete","severity::3","tw-weight::3","type::bug","workflow::ready for development"],"milestone":{"id":2114817,"iid":66,"group_id":9970,"title":"14.5","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-06-23T04:59:45.082Z","updated_at":"2022-04-21T07:25:45.431Z","due_date":"2021-11-17","start_date":"2021-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/66"},"assignees":[{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":13356,"username":"dblessing","name":"Drew Blessing","state":"active","avatar_url":"https://secure.gravatar.com/avatar/b5bf44866b4eeafa2d8114bfe15da02f?s=80\u0026d=identicon","web_url":"https://gitlab.com/dblessing"},"user_notes_count":29,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-08-28","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12610","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12610","notes":"https://gitlab.com/api/v4/projects/278964/issues/12610/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12610/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12610","relative":"#12610","full":"gitlab-org/gitlab#12610"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22500904,"iid":12607,"project_id":278964,"title":"Allow MR level approvals_required to be lower than project's","description":"(based on discussion here https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/13109#note_180653416)\n\nCurrently one can only make approvals required stricter(a higher number) when overriding them in an MR: https://docs.gitlab.com/ee/user/project/merge_requests/merge_request_approvals.html#overriding-merge-request-approvals-default-settings-premium\n\nHowever this may be in conflict with the philosophy that `overriding` is to provide a more **permissive** mode (see https://gitlab.com/gitlab-org/gitlab-ee/issues/9770#note_144067707)\n\nThis constraint can also be sidestepped by providing less approvers. A rule's `approvals_required` would be capped by the number of approvers available.\n\nBy removing the validation related to this, many logic can be simplified, and also allow for an easier API endpoint design.","state":"closed","created_at":"2019-07-04T02:10:30.888Z","updated_at":"2020-03-02T12:19:50.228Z","closed_at":"2019-08-15T10:42:27.120Z","closed_by":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"labels":["Create [DEPRECATED]","Deliverable","Enterprise Edition","approvals","backend","devops::create","group::source code","workflow::verification"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"}],"author":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"type":"ISSUE","assignee":{"id":1884221,"username":"patrickbajao","name":"Patrick Bajao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1884221/avatar.png","web_url":"https://gitlab.com/patrickbajao"},"user_notes_count":9,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12607","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12607","notes":"https://gitlab.com/api/v4/projects/278964/issues/12607/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12607/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12607","relative":"#12607","full":"gitlab-org/gitlab#12607"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22499339,"iid":12604,"project_id":278964,"title":"Provide data for a richer design \"version selector\" dropdown in GraphQL","description":"### Problem to solve\n\nWe would like GraphQL to supply the front-end with more data for the \"version selector\" dropdown. \n\nDesigns for this selector can be viewed in the Designs tab.\n\n### Further details\n\nThe following data will need to be exposed to GraphQL for `VersionType`:\n\n* Version number within the issue (10, 11, etc.)\n* User who made the change (added in https://gitlab.com/gitlab-org/gitlab/merge_requests/17316 and https://gitlab.com/gitlab-org/gitlab/merge_requests/17322)\n* Time of the change (added in https://gitlab.com/gitlab-org/gitlab/merge_requests/17316 and https://gitlab.com/gitlab-org/gitlab/merge_requests/17322)\n* Added/removed/changed counts. \n\nNote that \"version number\" is currently being handled dynamically on the front-end. Once this data is available in GraphQL, the frontend should be changed to using GraphQL as the source for this property instead. \n\nThis issue represents the work involved to capture the above data and make it available via GraphQL.\n\n### Thoughts about the implementation\n\n**Version number** \n\nThe number could be cached in Redis and expired, similar to how `Design#user_notes_count` is within the `Version` model.\n\n**User and time of change**\n\nAdded in https://gitlab.com/gitlab-org/gitlab/merge_requests/17316 and https://gitlab.com/gitlab-org/gitlab/merge_requests/17322\n\n**Added, removed, changed blurb**\n\nIn order for the front end to produce a string like \"X person changed 1 screen and added 2 screens\", we'd need something like these new properties in GraphQL for `VersionType`:\n\n- The user who made the change\n- Counts of `creation`, `modification` and `deletion` - as this data never changes perhaps we migrate 3 new integer type columns into `Version`?","state":"closed","created_at":"2019-07-03T23:04:35.827Z","updated_at":"2021-09-18T07:00:42.207Z","closed_at":"2021-09-07T06:39:11.806Z","closed_by":{"id":3236898,"username":"rajatgitlab","name":"Rajat Jain","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3236898/avatar.png","web_url":"https://gitlab.com/rajatgitlab"},"labels":["Category:Design Management","Deliverable","Enterprise Edition","GitLab Premium","[deprecated] Accepting merge requests","backend","backend complete","devops::plan","frontend","group::product planning","missed-deliverable","missed:12.4","missed:12.5","missed:14.2","section::dev","workflow::production"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":null,"user_notes_count":33,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12604","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12604","notes":"https://gitlab.com/api/v4/projects/278964/issues/12604/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12604/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12604","relative":"#12604","full":"gitlab-org/gitlab#12604"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699145,"iid":29861,"project_id":278964,"title":"Hashed Storage: add disk path to REST API","description":"With the introduction of Hashed Storage, it is more difficult to discover the storage location of projects. Users are able to look up the path on the project's admin UI, but if users need to do this for many projects this is impractical. We should add this information to the GET `projects/:id` API call so that this is discoverable by script.\n\n### Proposal\n\nDocumentation blurb:\n\n\u003e\u003e\u003e\n## Get project storage information\n\n\u003e Requires admin permissions.\n\nUse this endpoint to get information about the project repository storage location.\n\n```\nGET /projects/:id/storage\n```\n\n| Attribute | Type | Required | Description |\n| --------- | ---- | -------- | ----------- |\n| `id` | integer/string | yes | The ID or [URL-encoded path of the project](README.md#namespaced-path-encoding) |\n\nExample response:\n\n```json\n{\n  \"shard\": {\n    \"id\": 1,\n    \"name\": \"default\"\n  },\n  \"disk_path\": \"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b\",\n  \"project_id\": 8,\n  \"created_at\": \"2012-10-12T17:04:47Z\"\n}\n```\n\u003e\u003e\u003e\n\n## GraphQL\n\nWe should add the data to GraphQL also. See https://gitlab.com/gitlab-org/gitlab/-/issues/29861#note_499996682.","state":"closed","created_at":"2019-07-03T20:52:05.919Z","updated_at":"2021-06-09T18:14:19.844Z","closed_at":"2021-06-02T12:03:45.425Z","closed_by":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"labels":["Category:API","api","backend","customer","devops::systems","group::geo","missed:13.12","priority::3","section::enablement","workflow::in review"],"milestone":{"id":1850113,"iid":60,"group_id":9970,"title":"14.0","description":"","state":"closed","created_at":"2021-01-26T16:55:07.714Z","updated_at":"2022-04-21T07:25:17.749Z","due_date":"2021-06-17","start_date":"2021-05-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/60"},"assignees":[{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"}],"author":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"type":"ISSUE","assignee":{"id":59678,"username":"vsizov","name":"Valery Sizov","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/59678/avatar.png","web_url":"https://gitlab.com/vsizov"},"user_notes_count":37,"merge_requests_count":0,"upvotes":15,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29861","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29861","notes":"https://gitlab.com/api/v4/projects/278964/issues/29861/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29861/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29861","relative":"#29861","full":"gitlab-org/gitlab#29861"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2320,"epic":{"id":16071,"iid":2320,"title":"Hashed Storage as the only storage","url":"/groups/gitlab-org/-/epics/2320","group_id":9970},"iteration":null,"health_status":null},{"id":22496299,"iid":12600,"project_id":278964,"title":"[Feature flag] Enable Design Management feature by default","description":"\u003c!-- Title suggestion: [Feature flag] Enable description of feature --\u003e\n\n## What\n\nEnable the `:design_management_flag` feature flag by default.\n\n## Owners\n\n- Team: ~\"group::knowledge\" ~Create \n- Most appropriate slack channel to reach out to: `#g_create_knowledge`\n- Best individual to reach out to: @.luke \n\n## Expectations\n\n### What are we expecting to happen?\n\nThe Designs tab of issues should become visible (unless LFS has been disabled for the Project).\n\n### What might happen if this goes wrong?\n\nNot sure. One possibility is that Design Management does not scale in some area.\n\n### What can we monitor to detect problems with this?\n\n- https://sentry.gitlab.net/gitlab/gitlabcom/\n\n## Beta groups/projects\n\n- `gitlab-org/gitlab-ce`/`gitlab-org/gitlab-ee` projects\n- `gitlab-org`/`gitlab-com` groups\n\n## Roll Out Steps\n\n- [x] Enable on staging\n- [x] Test on staging\n- [x] Ensure that documentation has been updated\n- [x] Enable on GitLab.com for individual groups/projects listed above and verify behaviour\n- [x] Announce on the issue an estimated time this will be enabled on GitLab.com\n- [x] Enable on GitLab.com by running chatops command in `#production`\n- [x] Cross post chatops slack command to `#support_gitlab-com` and in your team channel\n- [x] Announce on the issue that the flag has been enabled\n- [-] Remove feature flag and add changelog entry (https://gitlab.com/gitlab-org/gitlab-ee/issues/13709)","state":"closed","created_at":"2019-07-03T19:31:21.673Z","updated_at":"2020-12-10T19:00:38.784Z","closed_at":"2019-08-21T21:44:14.618Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Category:Design Management","Create [DEPRECATED]","Enterprise Edition","backend","devops::plan","feature flag","group::product planning","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"}],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"user_notes_count":10,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12600","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":8,"completed_count":8},"weight":1,"blocking_issues_count":0,"has_tasks":true,"task_status":"8 of 8 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12600","notes":"https://gitlab.com/api/v4/projects/278964/issues/12600/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12600/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12600","relative":"#12600","full":"gitlab-org/gitlab#12600"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22495170,"iid":12599,"project_id":278964,"title":"AuditEvents: Inconsistent types for from/to/target_id values","description":"### Summary\n\nThe `to`, `from`, and `target_id` fields on the structure `audit_json.log` have inconsistent types depending on the audit event. This makes it difficult to ingest into common data processing pipelines without a large amount of custom pre-processing code, including any based on Elastic Search or BigQuery, that require consistent types when importing data.\n\nIn particular, the native `true` and `false` values being used for some settings conflict with the strings used for almost everything else.\n\nIn project events, including but not limited to `add`, the `target_id` is currently the name with namespace, not a numerical id.\n\n### Steps to reproduce\n\nIn any project with support for Packages, as project Maintainer or above, see the audit_json.log entry for any of these actions:\n\n- Add or remove a project member.\n- Enable or disable the Packages features.\n- Create a new project.\n\n### What is the expected *correct* behavior?\n\nConsistent data types each field.\n\n### Proposal\n\nThese attributes should always be integers:\n\n- [ ] `target_id`\n\nThese attributes should always be strings:\n\n- [x] `from` (see [MR !30333](https://gitlab.com/gitlab-org/gitlab-foss/-/merge_requests/30333))\n- [x] `to` (see [MR !30333](https://gitlab.com/gitlab-org/gitlab-foss/-/merge_requests/30333))\n\n### Output of checks\n\nThis bug happens on GitLab.com.\n\n### Relevant logs and/or screenshots\n\nExample messages with different types:\n\n```json\n\n{\n  \"severity\": \"INFO\",\n  \"time\": \"2019-02-28T18:29:52.100Z\",\n  \"correlation_id\": \"4qogam6ous3\",\n  \"author_id\": 51,\n  \"entity_id\": 18,\n  \"entity_type\": \"Project\",\n  \"change\": \"packages_enabled\",\n  \"from\": true,\n  \"to\": false,\n  \"author_name\": \"test2\",\n  \"target_id\": 18,\n  \"target_type\": \"Project\",\n  \"target_details\": \"test2/pubproj\",\n  \"ip_address\": \"127.0.0.1\",\n  \"entity_path\": \"test2/pubproj\"\n}\n\n{\n  \"severity\": \"INFO\",\n  \"time\": \"2019-05-17T21:29:53.822Z\",\n  \"correlation_id\": \"rRNgYZM9B59\",\n  \"author_id\": 50,\n  \"entity_id\": 15,\n  \"entity_type\": \"Project\",\n  \"change\": \"access_level\",\n  \"from\": \"Reporter\",\n  \"to\": \"Guest\",\n  \"author_name\": \"test1\",\n  \"target_id\": 8040,\n  \"target_type\": \"User\",\n  \"target_details\": \"test2\",\n  \"ip_address\": \"127.0.0.1\",\n  \"entity_path\": \"privet-group1/devproj\"\n}\n\n# string for a target_id\n{\n  \"severity\": \"INFO\",\n  \"time\": \"2019-07-03T22:25:49.234Z\",\n  \"correlation_id\": \"wDuJjAufRo6\",\n  \"author_id\": 1,\n  \"entity_id\": 29,\n  \"entity_type\": \"Project\",\n  \"add\": \"project\",\n  \"author_name\": \"Administrator\",\n  \"target_id\": \"root/test-project\",\n  \"target_type\": \"Project\",\n  \"target_details\": \"root/test-project\",\n  \"ip_address\": \"127.0.0.1\",\n  \"entity_path\": \"root/test-project\"\n}\n\n```\n\ncc @gitlab-com/gl-security/secops","state":"closed","created_at":"2019-07-03T18:31:03.699Z","updated_at":"2020-10-11T10:38:11.663Z","closed_at":"2020-10-11T10:38:11.627Z","closed_by":{"id":5833976,"username":"mwoolf","name":"Max Woolf","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4c8af02fcb6678db41bd8d3a29f9c1d8?s=80\u0026d=identicon","web_url":"https://gitlab.com/mwoolf"},"labels":["Category:Audit Events","Enterprise Edition","backend","devops::manage","group::compliance","internal customer","section::dev","type::feature","workflow::blocked"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":2165775,"username":"asaba","name":"Antony Saba","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2165775/avatar.png","web_url":"https://gitlab.com/asaba"},"type":"ISSUE","assignee":null,"user_notes_count":21,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12599","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":2},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12599","notes":"https://gitlab.com/api/v4/projects/278964/issues/12599/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12599/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12599","relative":"#12599","full":"gitlab-org/gitlab#12599"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2765,"epic":{"id":26374,"iid":2765,"title":"Refactor AuditEvent","url":"/groups/gitlab-org/-/epics/2765","group_id":9970},"iteration":null,"health_status":null},{"id":24699138,"iid":29857,"project_id":278964,"title":"Move \"source \u0026 target branch\" to be above Merge Request description","description":"### Problem to solve\n\nSometimes MR Descriptions can be big and you have to scroll down to see exactly what the source and target branches are for this MR. It would be easier (and more GitHub-like) if the source and target branch was at the top of the MR above the description.\n\n### Intended users\n* Developers\n* Reviewers\n* Approvers\n\n### Proposal\n\nMove the \"Request to Merge \u003csource branch\u003e to \u003ctarget branch\u003e\" box to the top of the merge request form:\n\n- At the top:\n   - ![image](/uploads/3c92c0cb4b2f97f195a1ae6576fdc183/image.png)\n- Re-adjusted merge actions settings:\n   - ![image](/uploads/a25228b50d0583cfa1ccaa9fb3a229a6/image.png)\n\n\n### Links / references","state":"closed","created_at":"2019-07-03T18:28:16.831Z","updated_at":"2020-12-07T18:10:42.168Z","closed_at":"2019-11-06T17:03:50.514Z","closed_by":{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"},"labels":["Category:Code Review Workflow","Deliverable","customer+","devops::create","frontend","group::code review","merge requests","missed-deliverable","missed:12.4","type::feature","workflow::production"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},{"id":4414431,"username":"thomasrandolph","name":"Thomas Randolph","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6462fcd577d8c957abd2dc23956cfbec?s=80\u0026d=identicon","web_url":"https://gitlab.com/thomasrandolph"}],"author":{"id":1228225,"username":"jwoods06","name":"John Woods","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1228225/avatar.png","web_url":"https://gitlab.com/jwoods06"},"type":"ISSUE","assignee":{"id":626804,"username":"pedroms","name":"Pedro Moreira da Silva","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c306f087d191ac15549f3c11e3bed321?s=80\u0026d=identicon","web_url":"https://gitlab.com/pedroms"},"user_notes_count":19,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29857","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29857","notes":"https://gitlab.com/api/v4/projects/278964/issues/29857/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29857/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29857","relative":"#29857","full":"gitlab-org/gitlab#29857"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22479401,"iid":12588,"project_id":278964,"title":"Refactor WeightSelect to use gitlab-ui dropdown","description":"The following discussion from !14180 should be addressed:\n\n- [ ] @winh started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14180#note_187458915):  (+2 comments)\n\n    \u003e What's happening here is extremely ugly and we should definitely consider refactoring to a gitlab-ui component.","state":"closed","created_at":"2019-07-03T11:53:21.052Z","updated_at":"2022-05-19T16:07:23.189Z","closed_at":"2020-02-26T07:48:53.983Z","closed_by":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"labels":["Category:Team Planning","Enterprise Edition","[deprecated] Accepting merge requests","backstage [DEPRECATED]","boards","devops::plan","frontend","group::project management","maintenance::refactor"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":3468028,"username":"jiaan","name":"Jiaan Louw","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3468028/avatar.png","web_url":"https://gitlab.com/jiaan"},"user_notes_count":10,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12588","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12588","notes":"https://gitlab.com/api/v4/projects/278964/issues/12588/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12588/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12588","relative":"#12588","full":"gitlab-org/gitlab#12588"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22479316,"iid":12587,"project_id":278964,"title":"republishing a maven packages duplicates uploads","description":"### Summary\n\nRunning `mvn deploy` twice or more, will upload and store multiple copies of the same file.\n\n### Steps to reproduce\n\n1. configure a project with maven\n1. set a not SNAPSHOT version\n1. run `mvn deploy`\n1. run `mvn deploy` again\n\n### Example Project\n\nhttps://gitlab.com/nolith/test-pkgs/-/packages/19615\n\n### What is the current *bug* behavior?\n\nIt will store multiple copies of the same exact file\n\n### What is the expected *correct* behavior?\n\nDo not upload again (or at least overwrite) when `file_md5`, `file_sha1`, and `file_name` are already on DB.\n\n### Relevant logs and/or screenshots\n\n```ruby\n[43] pry(main)\u003e mvn.package_files\n  Packages::PackageFile Load (0.5ms)  SELECT \"packages_package_files\".* FROM \"packages_package_files\" WHERE \"packages_package_files\".\"package_id\" = $1  [[\"package_id\", 14]]\n  ↳ ./bin/rails:4\n=\u003e [#\u003cPackages::PackageFile:0x00007fe480700528\n  id: 62,\n  package_id: 14,\n  created_at: 2019-07-03 10:00:32 UTC,\n  updated_at: 2019-07-03 10:00:32 UTC,\n  size: 2416,\n  file_type: nil,\n  file_store: 2,\n  file_md5: \"aed4964fd5ddfdc088cdf83a0d2ab729\",\n  file_sha1: \"252d3e65bce4198048d656f51a8a598b8ff76de4\",\n  file_name: \"my-app-1.0.jar\",\n  file: \"my-app-1.0.jar\"\u003e,\n #\u003cPackages::PackageFile:0x00007fe4637dbeb0\n  id: 59,\n  package_id: 14,\n  created_at: 2019-07-03 09:59:12 UTC,\n  updated_at: 2019-07-03 09:59:12 UTC,\n  size: 2416,\n  file_type: nil,\n  file_store: 2,\n  file_md5: \"aed4964fd5ddfdc088cdf83a0d2ab729\",\n  file_sha1: \"252d3e65bce4198048d656f51a8a598b8ff76de4\",\n  file_name: \"my-app-1.0.jar\",\n  file: \"my-app-1.0.jar\"\u003e,\n #\u003cPackages::PackageFile:0x00007fe4637dba78\n  id: 63,\n  package_id: 14,\n  created_at: 2019-07-03 10:00:36 UTC,\n  updated_at: 2019-07-03 10:00:36 UTC,\n  size: 1229,\n  file_type: nil,\n  file_store: 2,\n  file_md5: \"95bd2a07ac1017f8eeb93dc7b69cfa35\",\n  file_sha1: \"d9b7f54b87fbebb7be1a2f0afa5b9bb735208a60\",\n  file_name: \"my-app-1.0.pom\",\n  file: \"my-app-1.0.pom\"\u003e,\n #\u003cPackages::PackageFile:0x00007fe4637db5f0\n  id: 60,\n  package_id: 14,\n  created_at: 2019-07-03 09:59:16 UTC,\n  updated_at: 2019-07-03 09:59:16 UTC,\n  size: 1229,\n  file_type: nil,\n  file_store: 2,\n  file_md5: \"95bd2a07ac1017f8eeb93dc7b69cfa35\",\n  file_sha1: \"d9b7f54b87fbebb7be1a2f0afa5b9bb735208a60\",\n  file_name: \"my-app-1.0.pom\",\n  file: \"my-app-1.0.pom\"\u003e]\n[44] pry(main)\u003e\n```\n\n## Impact\n\nAccording to the following query, today 2019-07-04, we already have 1567 duplicated files out of 193710\n\n```sql\nexplain SELECT package_id, file_name, file_md5, file_sha1, count(*) as cnt FROM \"packages_package_files\" group by package_id, file_name, file_md5, file_sha1 having count(*) \u003e 1;\n\nHashAggregate  (cost=26902.75..28531.72 rows=162897 width=123) (actual time=383.013..443.980 rows=1567 loops=1)\n  Group Key: package_id, file_name, file_md5, file_sha1\n  Filter: (count(*) \u003e 1)\n  Rows Removed by Filter: 187662\n  Buffers: shared hit=742 read=4773\n  I/O Timings: read=117.427\n  -\u003e  Seq Scan on packages_package_files  (cost=0.00..23997.10 rows=193710 width=115) (actual time=0.985..216.120 rows=193901 loops=1)\n        Buffers: shared hit=742 read=4773\n        I/O Timings: read=117.427\nPlanning time: 1.907 ms\nExecution time: 447.629 ms\n```\n\nI don't know how big those files are (they may be small), but this affects ~\"Cloud Spend\"","state":"closed","created_at":"2019-07-03T11:49:50.664Z","updated_at":"2022-09-19T03:03:38.822Z","closed_at":"2022-09-19T03:03:38.804Z","closed_by":{"id":1786152,"username":"gitlab-bot","name":"🤖 GitLab Bot 🤖","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1786152/avatar.png","web_url":"https://gitlab.com/gitlab-bot"},"labels":["Category:Package Registry","Enterprise Edition","[deprecated] Accepting merge requests","auto closed","devops::package","group::package registry","priority::4","section::ops","severity::4","stale","type::bug","vintage"],"milestone":{"id":490705,"iid":14,"group_id":9970,"title":"Backlog","description":"Issues that we want to do but are not planned right now. Open for contribution from the community.","state":"active","created_at":"2018-03-22T13:09:23.767Z","updated_at":"2018-10-30T14:56:54.069Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/14"},"assignees":[],"author":{"id":376774,"username":"nolith","name":"Alessio Caiazza","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/376774/avatar.png","web_url":"https://gitlab.com/nolith"},"type":"ISSUE","assignee":null,"user_notes_count":6,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12587","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12587","notes":"https://gitlab.com/api/v4/projects/278964/issues/12587/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12587/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12587","relative":"#12587","full":"gitlab-org/gitlab#12587"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699119,"iid":29848,"project_id":278964,"title":"elastic: Add the \"start indexing\" button to the docs","description":"Noticed in https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/24764\n\nWe recently added a \"Start indexing\" button to the elasticsearch admin settings, but there is no documentation in `doc/integration/elasticsearch.md` on what it does, caveats, etc. We should add some.\n\nIntroducing MR: https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/11408","state":"closed","created_at":"2019-07-03T10:37:01.123Z","updated_at":"2020-05-31T11:49:37.547Z","closed_at":"2019-09-23T15:58:09.573Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Global Search","Create [DEPRECATED]","Deliverable","advanced search","backend","devops::create","docs::fix","group::editor"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":572018,"username":"nick.thomas","name":"Nick Thomas","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/572018/avatar.png","web_url":"https://gitlab.com/nick.thomas"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":11,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29848","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29848","notes":"https://gitlab.com/api/v4/projects/278964/issues/29848/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29848/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29848","relative":"#29848","full":"gitlab-org/gitlab#29848"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22465792,"iid":12578,"project_id":278964,"title":"Searching for a term that returns documents in Elasticsearch belonging to a project that does not exist in the database results in a 500 error","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nWhen searching for a term that returns documents in Elasticsearch belonging to a project that has since been deleted in the GitLab database, a 500 error is thrown:\n\n```\nActionView::Template::Error (undefined method `repository' for nil:NilClass): \n97: = link_to search_filter_path(scope: 'commits') do \n98: = _(\"Commits\") \n99: %span.badge.badge-pill \n100: = limited_count(@search_results.commits_count) \n101: %li{ class: active_when(@scope == 'wiki_blobs') } \n102: = link_to search_filter_path(scope: 'wiki_blobs') do \n103: = _(\"Wiki\")\n```\n\nI managed to trace the error back to https://gitlab.com/gitlab-org/gitlab-ee/blob/v11.10.4-ee/ee/app/models/concerns/elastic/repositories_search.rb#L66, where `project.repository.raw` is called.\n\nWe should add a guard clause here in the map to return `nil` if `project` is `nil` and `compact` the array after, or similar.\n\nThis was [reported](https://gitlab.zendesk.com/agent/tickets/124297) (Zendesk, internal use only) by a 6,500-seat premium customer.\n\n### Steps to reproduce\n\nI'm not sure how to reproduce this as I believe (but am not confident) that we have callbacks set up to delete documents from the Elasticsearch index when a project is deleted. Perhaps I'm mistaken?\n\n### Example Project\n\n(If possible, please create an example project here on GitLab.com that exhibits the problematic behavior, and link to it here in the bug report)\n\n(If you are using an older version of GitLab, this will also determine whether the bug is fixed in a more recent version)\n\n### What is the current *bug* behavior?\n\nSearch page results in an error.\n\n### What is the expected *correct* behavior?\n\nSearch page shouldn't result in an error.\n\n### Relevant logs and/or screenshots\n\nI wrote a small Rails console snippet for the customer to test if my hypothesis was correct:\n\n```\nresponse = Repository.search('query_goes_here', type: :commit, options: {:has_parent=\u003e{:parent_type=\u003e\"project\", :query=\u003e{:bool=\u003e{:should=\u003e[{:exists=\u003e{:field=\u003e\"id\"}}, {:bool=\u003e{:filter=\u003e[{:term=\u003e{:visibility_level=\u003e20}}, {:term=\u003e{:repository_access_level=\u003e20}}]}}, {:bool=\u003e{:filter=\u003e[{:term=\u003e{:visibility_level=\u003e10}}, {:term=\u003e{:repository_access_level=\u003e20}}]}}], :must_not=\u003e{:term=\u003e{:repository_access_level=\u003e0}}}}}})[:commits][:results]\n\nproject_ids = response.map { |result| result[\"_source\"][\"commit\"][\"rid\"] }\n\ndb_project_ids = Project.includes(:route).where(id: project_ids).pluck(:id)\n```\n\nConfirmed as `12404` was present in `project_ids` but not `db_project_ids`:\n\n```\n# project_ids\n[\"14921\", \"18302\", \"20177\", \"23410\", \"10833\", \"17334\", \"7927\", \"7927\", \"18773\", \"20676\", \"21907\", \"24225\", \"14020\", \"18359\", \"12404\", \"19815\", \"18919\", \"17926\", \"18152\", \"18285\"]\n\n# db_project_ids\n[7927, 10833, 14020, 14921, 17334, 17926, 18152, 18285, 18302, 18359, 18773, 18919, 19815, 20177, 20676, 21907, 23410, 24225]\n```\n\n### Output of checks\n\n(If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com)\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-07-03T03:09:39.946Z","updated_at":"2019-09-20T12:44:27.491Z","closed_at":"2019-08-29T17:42:30.542Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Deliverable","Enterprise Edition","advanced search","backend","customer","devops::create","group::editor","priority::2","severity::2","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":1081658,"username":"weimeng","name":"Wei-Meng Lee","state":"active","avatar_url":"https://secure.gravatar.com/avatar/0cd59490b4ca72fbb0e784796f4034db?s=80\u0026d=identicon","web_url":"https://gitlab.com/weimeng"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12578","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12578","notes":"https://gitlab.com/api/v4/projects/278964/issues/12578/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12578/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12578","relative":"#12578","full":"gitlab-org/gitlab#12578"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699109,"iid":29841,"project_id":278964,"title":"Tech Eval: GitLab Pages without DNS wildcard (golang version)","description":"#### Proposed Feature\n[GitLab Pages without DNS wildcard](https://gitlab.com/gitlab-org/gitlab-ce/issues/29963)\n\nSummary\n\n\u003e In order to remove the need for wildcard dns, the namespace can be included in the URL path instead of the domain.\n\u003e Thus, `https://name.pages.example.io/index.html` would become `https://pages.example.io/name/index.html`.\n\n#### Questions to be answered\n\n1. What code changes would be necessary to implement this change?\n2. What implications does this have on access control?\n3. Could this option be configurable per group? or is it only possible per GitLab instance?\n\n#### Expected Outcome\n\n1. A working prototype of path based namespaces for Pages\n2. Answers to the open questions above\n3. Any new questions generated during the research\n4. A recommended execution plan for future releases\n\n#### Time Allotment\n\nThis research spike should be roughly limited to two days","state":"closed","created_at":"2019-07-02T21:52:49.754Z","updated_at":"2020-11-12T10:27:13.104Z","closed_at":"2020-03-13T14:05:55.709Z","closed_by":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"labels":["Category:Pages","Deliverable","Release::P1","backend","cicd::active","customer","devops::release","group::release","workflow::in dev"],"milestone":{"id":1001916,"iid":44,"group_id":9970,"title":"12.9","description":"https://about.gitlab.com/releases/2020/03/22/gitlab-12-9-released","state":"closed","created_at":"2019-09-15T20:54:50.875Z","updated_at":"2020-09-02T11:04:41.671Z","due_date":"2020-03-17","start_date":"2020-02-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/44"},"assignees":[{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"}],"author":{"id":2737706,"username":"darbyfrey","name":"Darby Frey","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2737706/avatar.png","web_url":"https://gitlab.com/darbyfrey"},"type":"ISSUE","assignee":{"id":3379682,"username":"vshushlin","name":"Vladimir Shushlin","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3379682/avatar.png","web_url":"https://gitlab.com/vshushlin"},"user_notes_count":31,"merge_requests_count":0,"upvotes":3,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29841","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":1,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29841","notes":"https://gitlab.com/api/v4/projects/278964/issues/29841/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29841/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29841","relative":"#29841","full":"gitlab-org/gitlab#29841"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699097,"iid":29835,"project_id":278964,"title":"Web IDE button should fork and open forked project when selected from read-only project","description":"### Problem to solve\n\nWhen a user browses to a project that they don't have write permission to they're unable to directly access the Web IDE from the main project page. This limits someone from quickly opening an editor to contribute to a project.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\nAll users who might contribute to a public project via the Web IDE via code or documentation or other kinds of contributions.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nThe Web IDE button should be available in all public projects even if a user does not have Write access to that specific project. When a user who does not have write access to the project, the Web IDE button should create a fork of the project in the users namespace (regardless of other available namespaces) and then open the forked project in the Web IDE. \n\nDuring the forking process we should provide information to user (similar to the standard fork process) that the project is being forked and that the Web IDE will open shortly.\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\nThis model should support all public projects where a user might have view access and be able to fork the project.\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nSuccess should be an increase in the number of forked and then edited in the Web IDE projects. We could implement additional instrumentation on the Web IDE button, but with existing measurements we can measure number of forks and Web IDE usage to make broad correlations.\n\n### Proposal\n\nAfter a first session with @himkp, we discovered that there are more different cases than initially expected where we have to change the behavior.\n\nWe decided to replicate the known behavior of the `Edit` button and the ACE single file editor in this issue to align the Web IDE with the known behavior of the Web IDE. \n\n# Case 1: I open the Web IDE from upstream project / default branch\n\n## User does not have a fork yet\n- Modal to ask whether user wants to fork project\n- Progress screen\n- Web IDE with patch-1 branch\n- Merge request leads to original project / default branch\n\n## User does have a fork\n- Web IDE with patch-(x+1) branch + informing user that he is opening his fork (alert)\n- Merge request leads to original project / default branch\n\n# Case 2: I open the Web IDE from upstream project / selected branch\n\n## User does not have a fork yet\n- Modal to ask whether user wants to fork project\n- Progress screen\n- Web IDE with selected branch\n- Merge request target to original project / selected branch (not current behavior yet)\n\n## User does have a fork\n- Web IDE with patch-(x+1) branch + informing user that he is opening his fork (alert)\n- Merge request leads to original project / default branch\n\n# Case 3: I open the Web IDE from forked project / default branch\n- Already implemented\n\n# Case 4: I open the Web IDE from forked project / selected branch\n- Already implemented\n\n![Flow](/uploads/a1a0b93320634ed5aae086c1e38f31a7/Flow.png)\n\nWhile working on this issue, it became clear that there needs to be a more obvious visualization whether a merge request from a new branch in a fork should have the default branch of the fork or the upstream project as target. This will be discussed in another issue.\n\n### Links / references","state":"closed","created_at":"2019-07-02T19:41:19.150Z","updated_at":"2020-02-06T09:53:36.714Z","closed_at":"2019-10-18T06:11:36.656Z","closed_by":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"labels":["Category:Web IDE","Deliverable","UX","devops::create","frontend","group::editor","researched [DEPRECATED]","type::feature"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},{"id":3688647,"username":"mvanremmerden","name":"Marcel van Remmerden","state":"active","avatar_url":"https://secure.gravatar.com/avatar/4f46ed49b87eab9e74f20e0e25b36d0f?s=80\u0026d=identicon","web_url":"https://gitlab.com/mvanremmerden"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":2398164,"username":"himkp","name":"Himanshu Kapoor","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2398164/avatar.png","web_url":"https://gitlab.com/himkp"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29835","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":4,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29835","notes":"https://gitlab.com/api/v4/projects/278964/issues/29835/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29835/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29835","relative":"#29835","full":"gitlab-org/gitlab#29835"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":27252045,"iid":36815,"project_id":278964,"title":"Failure in qa/qa/specs/features/ee/browser_ui/1_manage/project/project_templates_spec.rb [Reason: Bug in Code]","description":"https://gitlab.com/gitlab-org/quality/staging/-/jobs/243536054\n\n```\nFailures:\n\n  1) manage Project templates group level successfully imports the project using template\n     Failure/Error: settings.choose_custom_project_template(\"#{@template_container_group_name}\")\n     \n     Capybara::ElementNotFound:\n       Unable to find visible css \".qa-custom-project-templates\"\n     # /usr/local/bundle/gems/capybara-2.16.1/lib/capybara/node/finders.rb:314:in `block in synced_resolve'\n     # /usr/local/bundle/gems/capybara-2.16.1/lib/capybara/node/base.rb:85:in `synchronize'\n     # /usr/local/bundle/gems/capybara-2.16.1/lib/capybara/node/finders.rb:302:in `synced_resolve'\n     # /usr/local/bundle/gems/capybara-2.16.1/lib/capybara/node/finders.rb:37:in `find'\n     # /usr/local/bundle/gems/capybara-2.16.1/lib/capybara/session.rb:810:in `block (2 levels) in \u003cclass:Session\u003e'\n     # /usr/local/bundle/gems/capybara-2.16.1/lib/capybara/session.rb:340:in `within'\n     # ./qa/page/base.rb:149:in `within_element'\n     # ./qa/support/page/logging.rb:131:in `within_element'\n     # ./qa/page/settings/common.rb:11:in `expand_section'\n     # ./qa/ee/page/group/settings/general.rb:19:in `choose_custom_project_template'\n     # ./qa/specs/features/browser_ui/1_manage/project/ee_project_templates_spec.rb:94:in `block (5 levels) in \u003cmodule:QA\u003e'\n     # ./qa/scenario/actable.rb:16:in `perform'\n     # ./qa/specs/features/browser_ui/1_manage/project/ee_project_templates_spec.rb:93:in `block (4 levels) in \u003cmodule:QA\u003e'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec/retry.rb:123:in `block in run'\n/usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/docker/shellout.rb:31:in `block in execute!': Docker command `docker run -t --rm --net=bridge --env QA_REMOTE_GRID_USERNAME=\"$QA_REMOTE_GRID_USERNAME\" --env QA_REMOTE_GRID_ACCESS_KEY=\"$QA_REMOTE_GRID_ACCESS_KEY\" --env QA_REMOTE_GRID_PROTOCOL=\"$QA_REMOTE_GRID_PROTOCOL\" --env GITLAB_ADMIN_USERNAME=\"$GITLAB_ADMIN_USERNAME\" --env GITLAB_ADMIN_PASSWORD=\"$GITLAB_ADMIN_PASSWORD\" --env GITLAB_USERNAME=\"$GITLAB_USERNAME\" --env GITLAB_PASSWORD=\"$GITLAB_PASSWORD\" --env GITLAB_FORKER_USERNAME=\"$GITLAB_FORKER_USERNAME\" --env GITLAB_FORKER_PASSWORD=\"$GITLAB_FORKER_PASSWORD\" --env GITLAB_QA_ACCESS_TOKEN=\"$GITLAB_QA_ACCESS_TOKEN\" --env GITLAB_QA_ADMIN_ACCESS_TOKEN=\"$GITLAB_QA_ADMIN_ACCESS_TOKEN\" --env GITHUB_ACCESS_TOKEN=\"$GITHUB_ACCESS_TOKEN\" --env GCLOUD_ACCOUNT_EMAIL=\"$GCLOUD_ACCOUNT_EMAIL\" --env GCLOUD_ACCOUNT_KEY=\"$GCLOUD_ACCOUNT_KEY\" --env CLOUDSDK_CORE_PROJECT=\"$CLOUDSDK_CORE_PROJECT\" --env GCLOUD_ZONE=\"$GCLOUD_ZONE\" --env SIGNUP_DISABLED=\"$SIGNUP_DISABLED\" --env QA_DEBUG=\"$QA_DEBUG\" --env QA_LOG_PATH=\"$QA_LOG_PATH\" --env QA_CAN_TEST_GIT_PROTOCOL_V2=\"$QA_CAN_TEST_GIT_PROTOCOL_V2\" --env GITLAB_QA_PASSWORD_1=\"$GITLAB_QA_PASSWORD_1\" --env GITLAB_QA_PASSWORD_2=\"$GITLAB_QA_PASSWORD_2\" --env GITHUB_OAUTH_APP_ID=\"$GITHUB_OAUTH_APP_ID\" --env GITHUB_OAUTH_APP_SECRET=\"$GITHUB_OAUTH_APP_SECRET\" --env GITHUB_USERNAME=\"$GITHUB_USERNAME\" --env GITHUB_PASSWORD=\"$GITHUB_PASSWORD\" --env CI=\"$CI\" --env CI_NODE_TOTAL=\"$CI_NODE_TOTAL\" --env GITLAB_CI=\"$GITLAB_CI\" --volume /var/run/docker.sock:/var/run/docker.sock:z --volume /builds/gitlab-org/quality/staging/gitlab-qa-run-2019-07-02-04-24-00-6a9a067c/gitlab-ee-qa-371480ff:/home/qa/tmp:z --name gitlab-ee-qa-371480ff gitlab/gitlab-ee-qa:nightly Test::Instance::All https://staging.gitlab.com -- qa/specs/features/browser_ui/1_manage` failed! (Gitlab::QA::Docker::Shellout::StatusError)\n\tfrom /usr/local/lib/ruby/2.5.0/open3.rb:205:in `popen_run'\n\tfrom /usr/local/lib/ruby/2.5.0/open3.rb:190:in `popen2e'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/docker/shellout.rb:19:in `execute!'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/docker/command.rb:36:in `execute!'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/docker/engine.rb:22:in `block in run'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/docker/engine.rb:16:in `tap'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/docker/engine.rb:16:in `run'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/component/specs.rb:24:in `perform'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/scenario/template.rb:8:in `block in perform'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/scenario/template.rb:6:in `tap'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/scenario/template.rb:6:in `perform'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/scenario/test/instance/staging.rb:26:in `perform'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/scenario/template.rb:8:in `block in perform'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/scenario/template.rb:6:in `tap'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/scenario/template.rb:6:in `perform'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/lib/gitlab/qa/runner.rb:40:in `run'\n\tfrom /usr/local/bundle/gems/gitlab-qa-3.3.0/exe/gitlab-qa:8:in `\u003ctop (required)\u003e'\n\tfrom /usr/local/bundle/bin/gitlab-qa:23:in `load'\n\tfrom /usr/local/bundle/bin/gitlab-qa:23:in `\u003cmain\u003e'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec/retry.rb:110:in `loop'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec/retry.rb:110:in `run'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec_ext/rspec_ext.rb:12:in `run_with_retry'\n     # ./spec/spec_helper.rb:46:in `block (2 levels) in \u003ctop (required)\u003e'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec/retry.rb:123:in `block in run'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec/retry.rb:110:in `loop'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec/retry.rb:110:in `run'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec_ext/rspec_ext.rb:12:in `run_with_retry'\n     # /usr/local/bundle/gems/rspec-retry-0.6.1/lib/rspec/retry.rb:37:in `block (2 levels) in setup'\n     # ./qa/specs/runner.rb:56:in `perform'\n     # ./qa/scenario/template.rb:10:in `block in perform'\n     # ./qa/scenario/template.rb:8:in `tap'\n     # ./qa/scenario/template.rb:8:in `perform'\n     # ./qa/scenario/template.rb:33:in `perform'\n     # ./qa/scenario/template.rb:10:in `block in perform'\n     # ./qa/scenario/template.rb:8:in `tap'\n     # ./qa/scenario/template.rb:8:in `perform'\n     # ./qa/scenario/bootable.rb:28:in `launch!'\n```","state":"closed","created_at":"2019-07-02T18:54:49.726Z","updated_at":"2020-03-25T05:24:34.918Z","closed_at":"2020-03-18T06:02:14.819Z","closed_by":null,"labels":["QA","Quality","devops::manage","found:staging.gitlab.com","missed-SLO","priority::2","severity::1","type::bug"],"milestone":null,"assignees":[{"id":2629166,"username":"lmcandrew","name":"Liam McAndrew","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5801f5e2fd21127836c0be61ec71f06b?s=80\u0026d=identicon","web_url":"https://gitlab.com/lmcandrew"}],"author":{"id":3385446,"username":"zeffmorgan","name":"Zeff Morgan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3385446/avatar.png","web_url":"https://gitlab.com/zeffmorgan"},"type":"ISSUE","assignee":{"id":2629166,"username":"lmcandrew","name":"Liam McAndrew","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5801f5e2fd21127836c0be61ec71f06b?s=80\u0026d=identicon","web_url":"https://gitlab.com/lmcandrew"},"user_notes_count":30,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/36815","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/36815","notes":"https://gitlab.com/api/v4/projects/278964/issues/36815/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/36815/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#36815","relative":"#36815","full":"gitlab-org/gitlab#36815"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22449297,"iid":12566,"project_id":278964,"title":"Create Geo checklist for how to add new data types","description":"Geo is currently catching up to replicate all types of data used in GitLab. When we have caught up, it would be great to be in a position where other teams are able to help Geo-enable new data types that they might need to add to their stages. \n\nA first step here is to create a checklist of code to write and activities to perform to confirm that new data types are replicated and validated by Geo.","state":"closed","created_at":"2019-07-02T14:48:49.146Z","updated_at":"2019-12-11T20:02:30.929Z","closed_at":"2019-07-26T19:55:43.201Z","closed_by":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"labels":["Enterprise Edition","[deprecated] Accepting merge requests","auto updated","devops::systems","group::geo"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[],"author":{"id":2722370,"username":"rnienaber","name":"Rachel Nienaber","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2722370/avatar.png","web_url":"https://gitlab.com/rnienaber"},"type":"ISSUE","assignee":null,"user_notes_count":5,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12566","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12566","notes":"https://gitlab.com/api/v4/projects/278964/issues/12566/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12566/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12566","relative":"#12566","full":"gitlab-org/gitlab#12566"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":893,"epic":{"id":4883,"iid":893,"title":"Geo: Add Unreplicated Data Types","url":"/groups/gitlab-org/-/epics/893","group_id":9970,"human_readable_end_date":"Dec 22, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22448417,"iid":12564,"project_id":278964,"title":"Commite Access to Project due to bypass of recommended email regex!","description":"**[HackerOne report #631879](https://hackerone.com/reports/631879)** by `ngalog` on 2019-06-29, assigned to `gitlab_cmaxim`:\n\n### Summary  \nThe recommended regex of commiter author's email is like this `Example: @my-company.com$`  \nIt forgot to escape the dot. In normal situation this is fine, however if the user used subdomain of the email address, then this could be bypassed as below.\n\nCommiter Authori's email regex: `@sub.company.com$`\n\n```  \nuser1@sub.company.com -\u003e pass  \nuser1@subacompany.com -\u003e also pass the regex  \n```\n\n## Steps to reproduce:  \nVisit https://gitlab.com/:project/-/settings/repository and you should see the recommended regex of email could be bypassed.\n\n### Impact\n\nThis allow user to use other email address to bypass the commitor's email address. Unauthoirzed change to project source code.\n\n\n### What is the current *bug* behavior?\n\nrecommended regex is `@sub.company.com$`\n\n### What is the expected *correct* behavior?  \nshould be `@sub\\.company\\.com$`\n\n### Relevant logs and/or screenshots  \n![Screen_Shot_2019-06-29_at_4.40.46_PM.png](https://h1.sec.gitlab.net/a/4d7d3a85-cc59-4ec5-9265-bf7d04a89712/Screen_Shot_2019-06-29_at_4.40.46_PM.png)\n\n\n### Output of checks\n\n GitLab.com and EE and CE of 12.0\n\n## Impact\n\n.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screen_Shot_2019-06-29_at_4.40.46_PM.png](https://h1.sec.gitlab.net/a/4d7d3a85-cc59-4ec5-9265-bf7d04a89712/Screen_Shot_2019-06-29_at_4.40.46_PM.png)","state":"closed","created_at":"2019-07-02T14:26:53.942Z","updated_at":"2019-10-18T12:20:45.104Z","closed_at":"2019-10-14T17:34:20.274Z","closed_by":{"id":1749038,"username":"wortschi","name":"Martin Wortschack","state":"active","avatar_url":"https://secure.gravatar.com/avatar/81f1a88935a2a512aa14db650ed37fdb?s=80\u0026d=identicon","web_url":"https://gitlab.com/wortschi"},"labels":["Deliverable","Enterprise Edition","HackerOne","devops::create","frontend","group::source code","priority::4","repository","severity::4","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":3993566,"username":"sming-gitlab","name":"Samantha Ming","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3993566/avatar.png","web_url":"https://gitlab.com/sming-gitlab"},"user_notes_count":12,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":"2019-09-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12564","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12564","notes":"https://gitlab.com/api/v4/projects/278964/issues/12564/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12564/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12564","relative":"#12564","full":"gitlab-org/gitlab#12564"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24699083,"iid":29830,"project_id":278964,"title":"Disable reCAPTCHA for detected spam in issues and merge requests","description":"### Problem to solve\n\nUsing reCAPTCHA in issues and merge requests to override changes that have been detected as spam has some usability (and additionally licensing) issues. Prior discussion happened in https://gitlab.com/gitlab-org/gitlab-ce/issues/45684.\n\nAdditionally forcing our users to proof that they didn't submit spam does not align well with our value to [assume positive intent](https://about.gitlab.com/handbook/values/#assume-positive-intent).\n\n### Proposal\n\nIntroduce a new feature flag that allows to\n\n- have Akismet enabled for monitoring purposes\n- have reCAPTCHA disabled (and instead accept every change)\n\n### What does success look like, and how can we measure that?\n\nIt is possible to disable reCAPTCHA for part of gitlab.com so we can verify if removing it completely is an option.","state":"closed","created_at":"2019-07-02T12:46:28.895Z","updated_at":"2022-05-19T16:07:31.990Z","closed_at":"2019-10-04T10:34:41.580Z","closed_by":{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"labels":["backend","devops::plan","frontend","group::project management","internal customer","issues","merge requests","missed:12.3","spam fighting","type::feature","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"}],"author":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"type":"ISSUE","assignee":{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"user_notes_count":20,"merge_requests_count":0,"upvotes":4,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29830","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29830","notes":"https://gitlab.com/api/v4/projects/278964/issues/29830/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29830/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29830","relative":"#29830","full":"gitlab-org/gitlab#29830"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22440556,"iid":12555,"project_id":278964,"title":"[Elasticsearch] schema versions table","description":"A continuation of https://gitlab.com/gitlab-org/gitlab-ee/issues/328\n\nAfter converting ActiveModel related search modules in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14428, \nwe need to create database table to store a list of schema versions. A rough proposal would be the following:\n\n* friendly name\n* index_name (e.g. \"gitlab-development-V12p1\")\n* url\n* aws region\n* aws access key\n* aws secret key\n* version (e.g. 'V12p1')\n* number of shards\n* number of replicas\n* read (boolean, and only one row can be true)\n\nThen we modify `Elastic::ProxyUtil` to initiate proxies from these settings.","state":"closed","created_at":"2019-07-02T10:35:51.387Z","updated_at":"2022-05-31T11:55:39.512Z","closed_at":"2019-10-18T14:48:45.264Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Global Search","Create [DEPRECATED]","Deliverable","Enterprise Edition","advanced search","backend","devops::data_stores","group::global search","missed-deliverable","missed:12.3","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":9,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12555","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12555","notes":"https://gitlab.com/api/v4/projects/278964/issues/12555/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12555/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12555","relative":"#12555","full":"gitlab-org/gitlab#12555"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22440236,"iid":12554,"project_id":278964,"title":"Don't spider URLs excluded in `--auth-exclude-urls`","description":"### Summary\n\nZAP's spider and active tests seem to request the URLs that have been excluded in parameter `--auth-exclude-urls`. These should not be spidered/tested as it might invalidate the session.\n\n### What is the current *bug* behavior?\n\nURLs specified in `--auth-exclude-urls` are spidered/tested.\n\n### What is the expected *correct* behavior?\n\nURLs specified in `--auth-exclude-urls` should not be requested during spidering or testing.\n\n### Possible fixes\n\nFindings from an initial investigation in https://gitlab.com/gitlab-org/security-products/dast/merge_requests/24#note_187381250\n\n\u003e `urlsOutOfScope` is likely empty because it [has an effect only in protected mode](https://github.com/zaproxy/zaproxy/wiki/ModesAndScope). ZAP Python API wrapper does not set the mode explicitly (no calls to [`set_mode`](https://github.com/zaproxy/zap-api-python/blob/master/src/zapv2/core.py#L357) in any of [the wrapper scripts](https://github.com/zaproxy/zaproxy/tree/master/docker)). And by default, [the mode is \"Standard\"](https://github.com/zaproxy/zaproxy/blob/1a736b55c9a9e97c11056755f80e2528a0159cb1/zap/src/main/java/org/parosproxy/paros/extension/option/OptionsParamView.java#L122).\n\n\u003e As for `--auth-exclude-urls`, they are [truly excluded](http://gitlab.com/gitlab-org/security-products/dast/blob/a98483d43d9c151a04c80fad96bd18a694e34d19/src/zap_webdriver.py#L65) by our code calls to ZAP API.\n\n\u003e So, I'm not sure if they are actually being excluded right now - should be kept since it's Standard mode. We need to file a bug to fix that and enable the Protected mode to make it work.\n\n\n### Proposal\nAlways use a ZAP context, and use the context when spidering/testing. See https://gitlab.com/gitlab-org/gitlab/issues/12554#note_218566092.","state":"closed","created_at":"2019-07-02T10:28:15.984Z","updated_at":"2019-11-18T15:57:25.030Z","closed_at":"2019-10-22T19:17:08.662Z","closed_by":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"labels":["Category:DAST","Enterprise Edition","devops::secure","group::dynamic analysis","missed-SLO","missed:12.4","priority::2","severity::2","type::bug","workflow::in review"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"}],"author":{"id":2761888,"username":"dappelt","name":"Dennis Appelt","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2761888/avatar.png","web_url":"https://gitlab.com/dappelt"},"type":"ISSUE","assignee":{"id":4312863,"username":"cam_swords","name":"Cameron Swords","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3b729cf96bcced6384ebb94f0362bd4b?s=80\u0026d=identicon","web_url":"https://gitlab.com/cam_swords"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12554","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12554","notes":"https://gitlab.com/api/v4/projects/278964/issues/12554/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12554/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12554","relative":"#12554","full":"gitlab-org/gitlab#12554"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22439871,"iid":12548,"project_id":278964,"title":"[Elasticsearch] Decouple code for versioned schema for repository and Wiki","description":"A continuation of https://gitlab.com/gitlab-org/gitlab-ee/issues/328\n\n### Problem to solve\n\nAfter converting ActiveModel related search modules in https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14428,\nwe need to\n\n- convert `RepositoriesSearch` and `WikiRepositoriesSearch` so they can support multiple version of indices.\n- allow the go indexer `gitlab-elasticsearch-indexer` to also support multiple version of indices\n\n### What does success look like, and how can we measure that?\n\nRepository content indexing can support multiple indices.","state":"closed","created_at":"2019-07-02T10:15:27.967Z","updated_at":"2020-04-29T11:55:08.650Z","closed_at":"2019-12-05T09:09:11.213Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Category:Global Search","Create [DEPRECATED]","Deliverable","Enterprise Edition","advanced search","backend","backstage [DEPRECATED]","devops::systems","golang","group::editor","missed-deliverable","missed:12.5","workflow::in review"],"milestone":{"id":891797,"iid":40,"group_id":9970,"title":"12.6","description":"https://about.gitlab.com/releases/2019/12/22/gitlab-12-6-released","state":"closed","created_at":"2019-05-31T08:38:03.539Z","updated_at":"2020-04-27T16:27:13.329Z","due_date":"2019-12-17","start_date":"2019-11-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/40"},"assignees":[{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"}],"author":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"type":"ISSUE","assignee":{"id":1986039,"username":"lulalala","name":"Mark Chao","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1986039/avatar.png","web_url":"https://gitlab.com/lulalala"},"user_notes_count":13,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12548","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12548","notes":"https://gitlab.com/api/v4/projects/278964/issues/12548/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12548/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12548","relative":"#12548","full":"gitlab-org/gitlab#12548"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22439093,"iid":12547,"project_id":278964,"title":"Load result counts on inactive search tabs asynchronously","description":"* **Backend weight:** 3\n* **Frontend weight:** 3\n\nSpun off of https://gitlab.com/gitlab-org/gitlab-ee/issues/11777:\n\n\u003e\u003e\u003e\nThe other thing we could do is performing some of these [result count] calculations asynchronously. For example, we can calculate the `SELECT` operation in the actual request, because that is what the user really wants, and trigger several requests to calculate each one of the other counts in parallel.\n\nThis change will require a refactor of the `SearchController` and the current search workflow, but it will help a lot with those timeouts.\n\u003e\u003e\u003e","state":"closed","created_at":"2019-07-02T09:46:14.541Z","updated_at":"2020-07-22T17:51:35.645Z","closed_at":"2019-08-21T11:39:10.554Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Category:Global Search","Deliverable","Enterprise Edition","backend","backend-weight::3","bug::performance","devops::create","frontend","frontend-weight::3","group::editor","type::feature"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},{"id":2233420,"username":"pslaughter","name":"Paul Slaughter","state":"active","avatar_url":"https://secure.gravatar.com/avatar/631b25421eb206ab44cb2793ef09d881?s=80\u0026d=identicon","web_url":"https://gitlab.com/pslaughter"}],"author":{"id":87854,"username":"DouweM","name":"Douwe Maan","state":"active","avatar_url":"https://secure.gravatar.com/avatar/73d1548ae618321220679b3a4fda7fb1?s=80\u0026d=identicon","web_url":"https://gitlab.com/DouweM"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12547","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12547","notes":"https://gitlab.com/api/v4/projects/278964/issues/12547/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12547/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12547","relative":"#12547","full":"gitlab-org/gitlab#12547"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1506,"epic":{"id":8514,"iid":1506,"title":"Search Performance","url":"/groups/gitlab-org/-/epics/1506","group_id":9970,"human_readable_end_date":"Sep 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699074,"iid":29825,"project_id":278964,"title":"ReactiveCaching sidekiq queue overloaded (TeamCity)","description":"### Summary\n\nWhen a (TeamCity) server listed in an integration is unreachable, the Sidekiq reactive_caching queue fills with more and more jobs, which impact GitLab performance after a while.\n\n### Steps to reproduce\n\n1. Configure TeamCity integration on (multiple?) projects.\n2. Stop TeamCity server\n3. Wait some hours\n\n### Example Project\n\nNone.\n\n### What is the current *bug* behavior?\n\nAs visible in https://SERVER/admin/sidekiq/queues/reactive_caching, the queue fills with ReactiveCachingWorker jobs with the arguments \"TeamcityService\", \u003cid\u003e, \"some-hex-string\", \"branch-name\", all failing with\n\n```\nErrno::ECONNREFUSED: Failed to open TCP connection to teamcity:80 (Connection refused - connect(2) for \"teamcity\" port 80)\n```\n\n### What is the expected *correct* behavior?\n\nI would expact at most one ReactiveCachingWorker job per GitLab project (maybe per branch) - or (if there are multiple jobs per project) with a limited number of retries or some kind of back-off behaviour, maybe even automatically disabling the integration if the problem persists over a prolonged period.\n\n### Relevant logs and/or screenshots\n\nfrom sidekiq.log:\n```\n2019-07-02_08:33:19.70529 2019-07-02T08:33:19.616Z 18189 TID-owfswkn8t WARN: {\"context\":\"Job raised exception\",\"job\":{\"class\":\"ReactiveCachingWorker\",\"args\":[\"TeamcityService\",999,\"XXX\",\"XXX\"],\"retry\":3,\"queue\":\"reactive_caching\",\"jid\":\"XXX\",\"created_at\":1562055403.3611827,\"correlation_id\":\"XXX\",\"enqueued_at\":1562056399.5439627},\"jobstr\":\"{\\\"class\\\":\\\"ReactiveCachingWorker\\\",\\\"args\\\":[\\\"TeamcityService\\\",999,\\\"XXX\\\",\\\"XXX\\\"],\\\"retry\\\":3,\\\"queue\\\":\\\"reactive_caching\\\",\\\"jid\\\":\\\"XXX\\\",\\\"created_at\\\":1562055403.3611827,\\\"correlation_id\\\":\\\"XXX\\\",\\\"enqueued_at\\\":1562056399.5439627}\"}\n2019-07-02_08:33:19.70530 2019-07-02T08:33:19.616Z 18189 TID-owfswkn8t WARN: Errno::ECONNREFUSED: Failed to open TCP connection to teamcity:80 (Connection refused - connect(2) for \"teamcity\" port 80)\n2019-07-02_08:33:19.70532 2019-07-02T08:33:19.616Z 18189 TID-owfswkn8t WARN: /opt/gitlab/embedded/lib/ruby/2.5.0/net/http.rb:939:in `rescue in block in connect'\n2019-07-02_08:33:19.70532 /opt/gitlab/embedded/lib/ruby/2.5.0/net/http.rb:936:in `block in connect'\n2019-07-02_08:33:19.70533 /opt/gitlab/embedded/lib/ruby/2.5.0/timeout.rb:93:in `block in timeout'\n2019-07-02_08:33:19.70534 /opt/gitlab/embedded/lib/ruby/2.5.0/timeout.rb:103:in `timeout'\n2019-07-02_08:33:19.70534 /opt/gitlab/embedded/lib/ruby/2.5.0/net/http.rb:935:in `connect'\n2019-07-02_08:33:19.70535 /opt/gitlab/embedded/lib/ruby/2.5.0/net/http.rb:920:in `do_start'\n2019-07-02_08:33:19.70535 /opt/gitlab/embedded/lib/ruby/2.5.0/net/http.rb:909:in `start'\n2019-07-02_08:33:19.70536 /opt/gitlab/embedded/lib/ruby/2.5.0/net/http.rb:1455:in `request'\n2019-07-02_08:33:19.70536 /opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/httparty-0.13.7/lib/httparty/request.rb:117:in `perform'\n2019-07-02_08:33:19.70537 /opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/httparty-0.13.7/lib/httparty.rb:545:in `perform_request'\n2019-07-02_08:33:19.70537 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/http.rb:17:in `perform_request'\n2019-07-02_08:33:19.70538 /opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/httparty-0.13.7/lib/httparty.rb:476:in `get'\n2019-07-02_08:33:19.70540 /opt/gitlab/embedded/service/gitlab-rails/app/models/project_services/teamcity_service.rb:137:in `get_path'\n2019-07-02_08:33:19.70540 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/instrumentation.rb:161:in `block in get_path'\n2019-07-02_08:33:19.70541 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/method_call.rb:36:in `measure'\n2019-07-02_08:33:19.70541 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/instrumentation.rb:161:in `get_path'\n2019-07-02_08:33:19.70543 /opt/gitlab/embedded/service/gitlab-rails/app/models/project_services/teamcity_service.rb:71:in `calculate_reactive_cache'\n2019-07-02_08:33:19.70543 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/instrumentation.rb:161:in `block in calculate_reactive_cache'\n2019-07-02_08:33:19.70544 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/method_call.rb:36:in `measure'\n2019-07-02_08:33:19.70544 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/instrumentation.rb:161:in `calculate_reactive_cache'\n2019-07-02_08:33:19.70545 /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/reactive_caching.rb:96:in `block (2 levels) in exclusively_update_reactive_cache!'\n2019-07-02_08:33:19.70547 /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/reactive_caching.rb:141:in `enqueuing_update'\n2019-07-02_08:33:19.70547 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/instrumentation.rb:161:in `block in enqueuing_update'\n2019-07-02_08:33:19.70548 /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/method_call.rb:36:in `measure'\n```\n\n### Output of checks\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\nSystem information\nSystem:         Debian 8.11\nProxy:          no\nCurrent User:   git\nUsing RVM:      no\nRuby Version:   2.5.3p105\nGem Version:    2.7.6\nBundler Version:1.16.6\nRake Version:   12.3.2\nRedis Version:  3.2.12\nGit Version:    2.18.1\nSidekiq Version:5.2.5\nGo Version:     unknown\n\nGitLab information\nVersion:        11.9.4-ee\nRevision:       55be7f0\nDirectory:      /opt/gitlab/embedded/service/gitlab-rails\nDB Adapter:     postgresql\nDB Version:     9.6.13\nURL:            https://internal\nHTTP Clone URL: https://internal/some-group/some-project.git\nSSH Clone URL:  git@internal:some-group/some-project.git\nElasticsearch:  no\nGeo:            no\nUsing LDAP:     yes\nUsing Omniauth: yes\nOmniauth Providers:\n\nGitLab Shell\nVersion:        8.7.1\nRepository storage paths:\n- default:      /mnt/git-data/repositories\nGitLab Shell path:              /opt/gitlab/embedded/service/gitlab-shell\nGit:            /opt/gitlab/embedded/bin/git\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\nChecking GitLab subtasks ...\n\nChecking GitLab Shell ...\n\nGitLab Shell: ... GitLab Shell version \u003e= 8.7.1 ? ... OK (8.7.1)\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\nCheck GitLab API access: OK\nRedis available via internal API: OK\n\nAccess to /var/opt/gitlab/.ssh/authorized_keys: OK\ngitlab-shell self-check successful\n\nChecking GitLab Shell ... Finished\n\nChecking Gitaly ...\n\nGitaly: ... default ... OK\n\nChecking Gitaly ... Finished\n\nChecking Sidekiq ...\n\nSidekiq: ... Running? ... yes\nNumber of Sidekiq processes ... 1\n\nChecking Sidekiq ... Finished\n\nChecking Incoming Email ...\n\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\n\nChecking Incoming Email ... Finished\n\nChecking LDAP ...\n\nLDAP: ... Server: ldapmain\nLDAP authentication... Success\nLDAP users with access to your GitLab server (only showing the first 100 results)\n        NOPE\nServer: ldapsecondary\nLDAP authentication... Success\nLDAP users with access to your GitLab server (only showing the first 100 results)\n        NOPE\n\nChecking LDAP ... Finished\n\nChecking GitLab App ...\n\nGit configured correctly? ... yes\nDatabase config exists? ... yes\nAll migrations up? ... yes\nDatabase contains orphaned GroupMembers? ... no\nGitLab config exists? ... yes\nGitLab config up to date? ... yes\nLog directory writable? ... yes\nTmp directory writable? ... yes\nUploads directory exists? ... yes\nUploads directory has correct permissions? ... yes\nUploads directory tmp has correct permissions? ... yes\nInit script exists? ... skipped (omnibus-gitlab has no init script)\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\nProjects have namespace: ...\n1/1 ... yes\n4/2 ... yes\n1/4 ... yes\n1/5 ... yes\n1/6 ... yes\n1/7 ... yes\n2/8 ... yes\n7/9 ... yes\n149/11 ... yes\n1/12 ... yes\n1/13 ... yes\n1/14 ... yes\n7/15 ... yes\n448/17 ... yes\n663/18 ... yes\n449/21 ... yes\n18/25 ... yes\n149/26 ... yes\n21/43 ... yes\n2/45 ... yes\n27/57 ... yes\n27/58 ... yes\n27/59 ... yes\n449/60 ... yes\n449/61 ... yes\n10/62 ... yes\n450/63 ... yes\n450/64 ... yes\n10/65 ... yes\n10/66 ... yes\n10/68 ... yes\n10/69 ... yes\n171/70 ... yes\n29/71 ... yes\n11/72 ... yes\n11/73 ... yes\n171/74 ... yes\n11/75 ... yes\n11/76 ... yes\n11/77 ... yes\n11/78 ... yes\n11/79 ... yes\n31/80 ... yes\n18/82 ... yes\n18/83 ... yes\n18/84 ... yes\n18/85 ... yes\n18/86 ... yes\n18/87 ... yes\n18/88 ... yes\n18/89 ... yes\n38/90 ... yes\n38/93 ... yes\n41/94 ... yes\n292/98 ... yes\n72/100 ... yes\n72/101 ... yes\n72/102 ... yes\n271/103 ... yes\n76/108 ... yes\n76/109 ... yes\n14/113 ... yes\n41/115 ... yes\n41/117 ... yes\n76/118 ... yes\n299/121 ... yes\n3/122 ... yes\n91/123 ... yes\n91/124 ... yes\n91/125 ... yes\n75/126 ... yes\n637/129 ... yes\n637/130 ... yes\n637/131 ... yes\n637/132 ... yes\n637/133 ... yes\n637/134 ... yes\n637/135 ... yes\n637/136 ... yes\n637/137 ... yes\n637/138 ... yes\n637/139 ... yes\n637/140 ... yes\n637/141 ... yes\n637/142 ... yes\n637/143 ... yes\n637/144 ... yes\n637/145 ... yes\n637/146 ... yes\n637/148 ... yes\n637/149 ... yes\n637/150 ... yes\n637/151 ... yes\n637/152 ... yes\n637/153 ... yes\n637/154 ... yes\n637/155 ... yes\n637/156 ... yes\n637/157 ... yes\n637/158 ... yes\n637/159 ... yes\n637/160 ... yes\n637/161 ... yes\n75/166 ... yes\n75/167 ... yes\n75/168 ... yes\n75/169 ... yes\n75/170 ... yes\n75/171 ... yes\n41/172 ... yes\n650/174 ... yes\n3/175 ... yes\n294/176 ... yes\n294/178 ... yes\n292/179 ... yes\n38/180 ... yes\n38/181 ... yes\n38/182 ... yes\n38/183 ... yes\n2/184 ... yes\n2/185 ... yes\n2/186 ... yes\n49/187 ... yes\n286/188 ... yes\n286/189 ... yes\n286/190 ... yes\n663/191 ... yes\n74/192 ... yes\n294/198 ... yes\n41/200 ... yes\n38/201 ... yes\n2/202 ... yes\n2/203 ... yes\n24/204 ... yes\n12/205 ... yes\n40/206 ... yes\n41/207 ... yes\n120/210 ... yes\n113/211 ... yes\n6/217 ... yes\n11/222 ... yes\n6/223 ... yes\n91/225 ... yes\n12/226 ... yes\n29/230 ... yes\n29/232 ... yes\n11/233 ... yes\n31/235 ... yes\n41/236 ... yes\n27/238 ... yes\n129/239 ... yes\n663/240 ... yes\n120/241 ... yes\n41/242 ... yes\n29/244 ... yes\n29/245 ... yes\n322/246 ... yes\n29/247 ... yes\n322/248 ... yes\n322/250 ... yes\n29/251 ... yes\n131/253 ... yes\n131/254 ... yes\n131/255 ... yes\n2/258 ... yes\n113/259 ... yes\n2/260 ... yes\n2/261 ... yes\n12/262 ... yes\n72/263 ... yes\n41/264 ... yes\n294/265 ... yes\n12/268 ... yes\n157/269 ... yes\n289/270 ... yes\n12/271 ... yes\n294/272 ... yes\n12/273 ... yes\n138/275 ... yes\n138/276 ... yes\n138/277 ... yes\n138/278 ... yes\n138/279 ... yes\n138/280 ... yes\n138/281 ... yes\n138/282 ... yes\n138/283 ... yes\n138/284 ... yes\n138/285 ... yes\n138/286 ... yes\n490/288 ... yes\n11/289 ... yes\n11/290 ... yes\n24/291 ... yes\n78/292 ... yes\n78/293 ... yes\n78/294 ... yes\n83/296 ... yes\n31/297 ... yes\n140/298 ... yes\n41/299 ... yes\n140/302 ... yes\n2/303 ... yes\n286/304 ... yes\n144/306 ... yes\n144/308 ... yes\n146/309 ... yes\n650/310 ... yes\n33/313 ... yes\n23/314 ... yes\n23/316 ... yes\n23/317 ... yes\n146/318 ... yes\n547/319 ... yes\n548/320 ... yes\n14/323 ... yes\n14/324 ... yes\n14/325 ... yes\n144/326 ... yes\n2/327 ... yes\n2/328 ... yes\n648/329 ... yes\n650/330 ... yes\n637/332 ... yes\n2/333 ... yes\n294/334 ... yes\n27/335 ... yes\n299/336 ... yes\n153/337 ... yes\n18/338 ... yes\n153/342 ... yes\n294/344 ... yes\n27/347 ... yes\n38/348 ... yes\n5/349 ... yes\n83/353 ... yes\n153/355 ... yes\n153/356 ... yes\n153/357 ... yes\n474/358 ... yes\n12/359 ... yes\n5/360 ... yes\n29/361 ... yes\n38/362 ... yes\n5/363 ... yes\n5/364 ... yes\n5/365 ... yes\n29/366 ... yes\n29/367 ... yes\n18/368 ... yes\n158/372 ... yes\n103/374 ... yes\n42/379 ... yes\n598/380 ... yes\n42/384 ... yes\n105/385 ... yes\n10/386 ... yes\n532/390 ... yes\n157/391 ... yes\n42/392 ... yes\n448/393 ... yes\n38/395 ... yes\n14/398 ... yes\n371/399 ... yes\n371/400 ... yes\n29/401 ... yes\n637/402 ... yes\n113/404 ... yes\n146/405 ... yes\n132/407 ... yes\n14/409 ... yes\n11/410 ... yes\n88/411 ... yes\n295/412 ... yes\n41/414 ... yes\n42/415 ... yes\n17/416 ... yes\n17/417 ... yes\n14/420 ... yes\n294/421 ... yes\n14/422 ... yes\n38/423 ... yes\n120/426 ... yes\n83/427 ... yes\n140/428 ... yes\n38/429 ... yes\n120/430 ... yes\n129/431 ... yes\n356/434 ... yes\n343/436 ... yes\n27/438 ... yes\n322/439 ... yes\n158/440 ... yes\n125/441 ... yes\n356/442 ... yes\n356/443 ... yes\n5/444 ... yes\n182/446 ... yes\n294/447 ... yes\n144/448 ... yes\n10/450 ... yes\n120/451 ... yes\n175/452 ... yes\n145/453 ... yes\n3/457 ... yes\n138/458 ... yes\n79/460 ... yes\n182/461 ... yes\n41/463 ... yes\n41/465 ... yes\n149/466 ... yes\n38/471 ... yes\n138/472 ... yes\n48/474 ... yes\n9/475 ... yes\n11/477 ... yes\n192/479 ... yes\n181/481 ... yes\n181/482 ... yes\n181/483 ... yes\n12/484 ... yes\n101/485 ... yes\n41/486 ... yes\n138/490 ... yes\n31/491 ... yes\n181/493 ... yes\n38/495 ... yes\n160/498 ... yes\n299/499 ... yes\n83/500 ... yes\n637/502 ... yes\n138/503 ... yes\n138/504 ... yes\n14/505 ... yes\n83/507 ... yes\n5/508 ... yes\n294/510 ... yes\n47/511 ... yes\n639/512 ... yes\n129/513 ... yes\n138/514 ... yes\n38/515 ... yes\n138/517 ... yes\n129/518 ... yes\n120/519 ... yes\n157/520 ... yes\n21/521 ... yes\n344/522 ... yes\n344/523 ... yes\n181/524 ... yes\n27/525 ... yes\n9/526 ... yes\n175/527 ... yes\n129/528 ... yes\n299/530 ... yes\n31/532 ... yes\n132/533 ... yes\n31/538 ... yes\n113/540 ... yes\n31/541 ... yes\n138/542 ... yes\n18/543 ... yes\n175/544 ... yes\n18/545 ... yes\n18/546 ... yes\n18/547 ... yes\n18/548 ... yes\n18/549 ... yes\n294/550 ... yes\n181/554 ... yes\n184/555 ... yes\n181/556 ... yes\n183/557 ... yes\n120/561 ... yes\n120/562 ... yes\n31/563 ... yes\n286/564 ... yes\n31/566 ... yes\n31/567 ... yes\n5/570 ... yes\n138/571 ... yes\n11/573 ... yes\n663/574 ... yes\n38/576 ... yes\n356/579 ... yes\n299/580 ... yes\n294/581 ... yes\n294/582 ... yes\n322/583 ... yes\n5/584 ... yes\n18/585 ... yes\n65/586 ... yes\n138/592 ... yes\n138/594 ... yes\n356/596 ... yes\n138/597 ... yes\n129/598 ... yes\n120/600 ... yes\n75/601 ... yes\n158/602 ... yes\n31/603 ... yes\n129/604 ... yes\n5/605 ... yes\n5/606 ... yes\n5/607 ... yes\n299/608 ... yes\n299/609 ... yes\n221/610 ... yes\n27/611 ... yes\n140/612 ... yes\n214/613 ... yes\n42/614 ... yes\n534/615 ... yes\n83/616 ... yes\n13/619 ... yes\n343/621 ... yes\n299/622 ... yes\n31/623 ... yes\n141/624 ... yes\n286/625 ... yes\n181/628 ... yes\n83/629 ... yes\n532/631 ... yes\n83/632 ... yes\n593/634 ... yes\n38/635 ... yes\n181/636 ... yes\n46/637 ... yes\n29/639 ... yes\n175/640 ... yes\n229/642 ... yes\n83/643 ... yes\n4/644 ... yes\n12/645 ... yes\n181/651 ... yes\n181/652 ... yes\n181/655 ... yes\n83/656 ... yes\n129/658 ... yes\n175/661 ... yes\n113/663 ... yes\n650/665 ... yes\n83/666 ... yes\n532/667 ... yes\n113/670 ... yes\n125/671 ... yes\n125/672 ... yes\n322/673 ... yes\n113/674 ... yes\n5/675 ... yes\n160/676 ... yes\n175/677 ... yes\n175/678 ... yes\n158/679 ... yes\n29/682 ... yes\n158/686 ... yes\n29/687 ... yes\n129/690 ... yes\n158/692 ... yes\n295/693 ... yes\n5/694 ... yes\n72/695 ... yes\n283/696 ... yes\n129/697 ... yes\n294/698 ... yes\n122/699 ... yes\n113/700 ... yes\n663/702 ... yes\n4/703 ... yes\n5/704 ... yes\n294/705 ... yes\n181/706 ... yes\n286/707 ... yes\n182/708 ... yes\n251/711 ... yes\n251/716 ... yes\n283/717 ... yes\n38/718 ... yes\n283/720 ... yes\n251/722 ... yes\n103/723 ... yes\n29/724 ... yes\n70/725 ... yes\n29/726 ... yes\n10/727 ... yes\n27/730 ... yes\n41/731 ... yes\n175/732 ... yes\n83/733 ... yes\n13/734 ... yes\n13/735 ... yes\n120/736 ... yes\n246/737 ... yes\n650/738 ... yes\n132/740 ... yes\n132/741 ... yes\n292/743 ... yes\n251/745 ... yes\n246/746 ... yes\n29/747 ... yes\n271/750 ... yes\n271/751 ... yes\n271/752 ... yes\n283/753 ... yes\n83/755 ... yes\n283/756 ... yes\n489/757 ... yes\n271/758 ... yes\n271/759 ... yes\n271/760 ... yes\n271/761 ... yes\n276/762 ... yes\n272/763 ... yes\n272/764 ... yes\n272/765 ... yes\n122/766 ... yes\n275/767 ... yes\n276/768 ... yes\n276/769 ... yes\n276/770 ... yes\n276/771 ... yes\n276/772 ... yes\n276/773 ... yes\n276/774 ... yes\n276/775 ... yes\n273/778 ... yes\n273/779 ... yes\n273/780 ... yes\n273/781 ... yes\n72/782 ... yes\n72/784 ... yes\n261/785 ... yes\n261/786 ... yes\n35/787 ... yes\n5/788 ... yes\n72/789 ... yes\n274/791 ... yes\n273/792 ... yes\n192/793 ... yes\n38/796 ... yes\n192/799 ... yes\n40/800 ... yes\n577/802 ... yes\n283/803 ... yes\n251/808 ... yes\n132/809 ... yes\n42/810 ... yes\n143/811 ... yes\n143/812 ... yes\n64/813 ... yes\n287/814 ... yes\n138/816 ... yes\n292/817 ... yes\n132/819 ... yes\n132/820 ... yes\n181/826 ... yes\n12/827 ... yes\n12/829 ... yes\n83/830 ... yes\n12/831 ... yes\n250/835 ... yes\n175/837 ... yes\n271/838 ... yes\n261/839 ... yes\n83/840 ... yes\n40/841 ... yes\n255/842 ... yes\n257/843 ... yes\n172/844 ... yes\n299/845 ... yes\n663/846 ... yes\n17/848 ... yes\n181/849 ... yes\n257/850 ... yes\n83/851 ... yes\n83/852 ... yes\n637/853 ... yes\n144/854 ... yes\n172/855 ... yes\n255/856 ... yes\n83/857 ... yes\n65/858 ... yes\n226/859 ... yes\n226/860 ... yes\n226/861 ... yes\n297/862 ... yes\n308/863 ... yes\n297/864 ... yes\n83/868 ... yes\n308/869 ... yes\n311/870 ... yes\n27/872 ... yes\n294/873 ... yes\n663/874 ... yes\n314/877 ... yes\n531/878 ... yes\n42/879 ... yes\n13/880 ... yes\n315/881 ... yes\n295/883 ... yes\n287/885 ... yes\n132/886 ... yes\n294/888 ... yes\n648/889 ... yes\n648/890 ... yes\n637/891 ... yes\n637/892 ... yes\n637/893 ... yes\n294/894 ... yes\n317/896 ... yes\n12/898 ... yes\n319/899 ... yes\n661/902 ... yes\n317/904 ... yes\n330/906 ... yes\n351/907 ... yes\n322/908 ... yes\n221/909 ... yes\n247/910 ... yes\n83/912 ... yes\n287/913 ... yes\n283/915 ... yes\n283/916 ... yes\n83/917 ... yes\n20/918 ... yes\n42/921 ... yes\n663/922 ... yes\n283/923 ... yes\n283/924 ... yes\n283/925 ... yes\n335/926 ... yes\n20/927 ... yes\n158/928 ... yes\n27/929 ... yes\n299/930 ... yes\n402/931 ... yes\n179/932 ... yes\n663/933 ... yes\n339/934 ... yes\n339/935 ... yes\n20/936 ... yes\n47/938 ... yes\n181/939 ... yes\n341/943 ... yes\n343/945 ... yes\n72/946 ... yes\n648/947 ... yes\n138/948 ... yes\n351/949 ... yes\n283/950 ... yes\n287/952 ... yes\n181/953 ... yes\n343/954 ... yes\n356/955 ... yes\n351/956 ... yes\n351/957 ... yes\n351/958 ... yes\n49/959 ... yes\n531/960 ... yes\n175/961 ... yes\n322/962 ... yes\n299/963 ... yes\n284/964 ... yes\n489/965 ... yes\n212/967 ... yes\n341/970 ... yes\n225/972 ... yes\n295/973 ... yes\n311/974 ... yes\n320/975 ... yes\n311/976 ... yes\n329/980 ... yes\n357/982 ... yes\n357/983 ... yes\n256/984 ... yes\n27/986 ... yes\n24/987 ... yes\n83/988 ... yes\n294/989 ... yes\n20/990 ... yes\n70/991 ... yes\n326/992 ... yes\n637/994 ... yes\n351/995 ... yes\n335/996 ... yes\n138/997 ... yes\n370/998 ... yes\n370/999 ... yes\n341/1000 ... yes\n160/1001 ... yes\n322/1002 ... yes\n351/1003 ... yes\n42/1005 ... yes\n256/1006 ... yes\n320/1008 ... yes\n356/1010 ... yes\n650/1011 ... yes\n83/1013 ... yes\n324/1014 ... yes\n387/1015 ... yes\n83/1016 ... yes\n390/1018 ... yes\n47/1019 ... yes\n388/1020 ... yes\n391/1021 ... yes\n393/1023 ... yes\n283/1024 ... yes\n394/1026 ... yes\n357/1028 ... yes\n299/1029 ... yes\n283/1030 ... yes\n351/1031 ... yes\n663/1032 ... yes\n131/1035 ... yes\n532/1036 ... yes\n83/1037 ... yes\n392/1038 ... yes\n392/1039 ... yes\n618/1040 ... yes\n20/1041 ... yes\n391/1042 ... yes\n329/1043 ... yes\n289/1044 ... yes\n283/1052 ... yes\n125/1053 ... yes\n322/1054 ... yes\n322/1055 ... yes\n18/1057 ... yes\n13/1058 ... yes\n406/1060 ... yes\n322/1063 ... yes\n322/1064 ... yes\n351/1065 ... yes\n292/1066 ... yes\n103/1067 ... yes\n13/1068 ... yes\n295/1069 ... yes\n286/1070 ... yes\n663/1072 ... yes\n292/1073 ... yes\n322/1074 ... yes\n283/1075 ... yes\n297/1076 ... yes\n83/1077 ... yes\n329/1078 ... yes\n250/1080 ... yes\n13/1081 ... yes\n297/1082 ... yes\n283/1083 ... yes\n299/1087 ... yes\n299/1088 ... yes\n299/1089 ... yes\n283/1090 ... yes\n349/1094 ... yes\n349/1095 ... yes\n18/1097 ... yes\n257/1101 ... yes\n294/1102 ... yes\n261/1103 ... yes\n45/1106 ... yes\n289/1107 ... yes\n418/1110 ... yes\n663/1111 ... yes\n292/1112 ... yes\n138/1113 ... yes\n138/1114 ... yes\n344/1115 ... yes\n29/1116 ... yes\n103/1117 ... yes\n287/1118 ... yes\n423/1120 ... yes\n181/1121 ... yes\n667/1122 ... yes\n132/1127 ... yes\n172/1128 ... yes\n132/1129 ... yes\n637/1130 ... yes\n283/1133 ... yes\n12/1134 ... yes\n12/1135 ... yes\n373/1136 ... yes\n4/1137 ... yes\n132/1138 ... yes\n29/1139 ... yes\n42/1140 ... yes\n432/1142 ... yes\n292/1143 ... yes\n432/1144 ... yes\n145/1145 ... yes\n322/1146 ... yes\n294/1147 ... yes\n432/1148 ... yes\n160/1149 ... yes\n76/1150 ... yes\n18/1151 ... yes\n388/1152 ... yes\n343/1153 ... yes\n447/1154 ... yes\n40/1156 ... yes\n261/1157 ... yes\n261/1158 ... yes\n279/1159 ... yes\n447/1160 ... yes\n489/1161 ... yes\n192/1164 ... yes\n33/1165 ... yes\n12/1166 ... yes\n192/1167 ... yes\n192/1169 ... yes\n437/1170 ... yes\n261/1172 ... yes\n341/1173 ... yes\n447/1175 ... yes\n195/1176 ... yes\n663/1177 ... yes\n297/1178 ... yes\n83/1179 ... yes\n439/1180 ... yes\n12/1183 ... yes\n32/1184 ... yes\n442/1187 ... yes\n83/1188 ... yes\n190/1189 ... yes\n442/1190 ... yes\n125/1192 ... yes\n141/1194 ... yes\n343/1195 ... yes\n162/1196 ... yes\n195/1197 ... yes\n13/1198 ... yes\n182/1199 ... yes\n447/1200 ... yes\n294/1201 ... yes\n60/1202 ... yes\n181/1203 ... yes\n45/1204 ... yes\n294/1205 ... yes\n447/1206 ... yes\n192/1208 ... yes\n160/1209 ... yes\n326/1212 ... yes\n181/1214 ... yes\n181/1215 ... yes\n447/1216 ... yes\n322/1218 ... yes\n342/1220 ... yes\n35/1221 ... yes\n326/1222 ... yes\n283/1223 ... yes\n447/1224 ... yes\n295/1225 ... yes\n18/1227 ... yes\n287/1228 ... yes\n18/1229 ... yes\n432/1230 ... yes\n283/1231 ... yes\n283/1232 ... yes\n283/1233 ... yes\n299/1239 ... yes\n391/1240 ... yes\n292/1241 ... yes\n160/1243 ... yes\n299/1244 ... yes\n343/1247 ... yes\n283/1248 ... yes\n192/1249 ... yes\n283/1250 ... yes\n440/1251 ... yes\n45/1252 ... yes\n447/1253 ... yes\n448/1255 ... yes\n449/1256 ... yes\n356/1258 ... yes\n295/1259 ... yes\n181/1261 ... yes\n4/1262 ... yes\n144/1263 ... yes\n144/1264 ... yes\n144/1265 ... yes\n365/1266 ... yes\n365/1267 ... yes\n181/1268 ... yes\n289/1269 ... yes\n664/1270 ... yes\n212/1271 ... yes\n88/1272 ... yes\n593/1273 ... yes\n138/1276 ... yes\n160/1277 ... yes\n660/1278 ... yes\n286/1279 ... yes\n472/1280 ... yes\n166/1281 ... yes\n53/1282 ... yes\n340/1283 ... yes\n312/1284 ... yes\n45/1285 ... yes\n295/1286 ... yes\n478/1287 ... yes\n125/1288 ... yes\n40/1289 ... yes\n478/1290 ... yes\n398/1291 ... yes\n398/1292 ... yes\n299/1293 ... yes\n286/1294 ... yes\n398/1295 ... yes\n439/1298 ... yes\n474/1299 ... yes\n13/1300 ... yes\n338/1301 ... yes\n254/1302 ... yes\n192/1303 ... yes\n322/1304 ... yes\n314/1305 ... yes\n27/1306 ... yes\n341/1307 ... yes\n341/1308 ... yes\n125/1309 ... yes\n289/1311 ... yes\n246/1312 ... yes\n492/1313 ... yes\n492/1314 ... yes\n45/1315 ... yes\n492/1316 ... yes\n478/1317 ... yes\n289/1318 ... yes\n491/1319 ... yes\n493/1321 ... yes\n493/1322 ... yes\n495/1323 ... yes\n12/1324 ... yes\n78/1325 ... yes\n490/1326 ... yes\n503/1327 ... yes\n503/1328 ... yes\n503/1329 ... yes\n274/1330 ... yes\n144/1331 ... yes\n144/1332 ... yes\n144/1333 ... yes\n144/1334 ... yes\n144/1335 ... yes\n144/1336 ... yes\n341/1338 ... yes\n192/1339 ... yes\n668/1340 ... yes\n510/1342 ... yes\n292/1343 ... yes\n322/1344 ... yes\n322/1345 ... yes\n101/1347 ... yes\n398/1348 ... yes\n138/1349 ... yes\n287/1350 ... yes\n73/1351 ... yes\n512/1352 ... yes\n343/1353 ... yes\n294/1354 ... yes\n27/1355 ... yes\n492/1358 ... yes\n65/1359 ... yes\n343/1360 ... yes\n40/1361 ... yes\n440/1362 ... yes\n453/1363 ... yes\n418/1364 ... yes\n144/1365 ... yes\n144/1366 ... yes\n190/1367 ... yes\n491/1369 ... yes\n181/1370 ... yes\n190/1371 ... yes\n190/1372 ... yes\n190/1373 ... yes\n387/1374 ... yes\n287/1375 ... yes\n295/1376 ... yes\n343/1378 ... yes\n485/1379 ... yes\n493/1380 ... yes\n531/1381 ... yes\n531/1382 ... yes\n294/1384 ... yes\n320/1385 ... yes\n320/1386 ... yes\n287/1387 ... yes\n440/1389 ... yes\n478/1390 ... yes\n549/1391 ... yes\n549/1392 ... yes\n549/1393 ... yes\n549/1394 ... yes\n549/1396 ... yes\n33/1397 ... yes\n293/1399 ... yes\n341/1400 ... yes\n322/1401 ... yes\n461/1402 ... yes\n322/1403 ... yes\n549/1404 ... yes\n666/1405 ... yes\n190/1407 ... yes\n76/1409 ... yes\n532/1410 ... yes\n305/1411 ... yes\n364/1413 ... yes\n47/1415 ... yes\n649/1416 ... yes\n47/1417 ... yes\n637/1419 ... yes\n138/1420 ... yes\n392/1422 ... yes\n568/1423 ... yes\n579/1424 ... yes\n532/1425 ... yes\n565/1427 ... yes\n565/1428 ... yes\n565/1429 ... yes\n565/1430 ... yes\n565/1432 ... yes\n565/1433 ... yes\n565/1434 ... yes\n565/1435 ... yes\n565/1436 ... yes\n565/1437 ... yes\n565/1438 ... yes\n565/1444 ... yes\n565/1445 ... yes\n479/1446 ... yes\n565/1447 ... yes\n565/1448 ... yes\n565/1449 ... yes\n565/1451 ... yes\n540/1452 ... yes\n581/1453 ... yes\n292/1454 ... yes\n567/1455 ... yes\n567/1456 ... yes\n569/1457 ... yes\n568/1458 ... yes\n570/1459 ... yes\n570/1460 ... yes\n289/1462 ... yes\n402/1465 ... yes\n565/1469 ... yes\n65/1470 ... yes\n649/1471 ... yes\n649/1472 ... yes\n649/1473 ... yes\n649/1475 ... yes\n649/1476 ... yes\n565/1477 ... yes\n565/1478 ... yes\n47/1479 ... yes\n565/1480 ... yes\n565/1481 ... yes\n173/1482 ... yes\n365/1483 ... yes\n452/1484 ... yes\n47/1485 ... yes\n649/1486 ... yes\n580/1488 ... yes\n596/1489 ... yes\n287/1490 ... yes\n579/1491 ... yes\n192/1492 ... yes\n592/1493 ... yes\n592/1494 ... yes\n592/1495 ... yes\n577/1496 ... yes\n577/1497 ... yes\n592/1498 ... yes\n591/1499 ... yes\n591/1500 ... yes\n365/1501 ... yes\n418/1502 ... yes\n596/1503 ... yes\n566/1504 ... yes\n592/1505 ... yes\n294/1506 ... yes\n103/1507 ... yes\n593/1508 ... yes\n27/1509 ... yes\n602/1511 ... yes\n591/1512 ... yes\n507/1513 ... yes\n591/1514 ... yes\n591/1515 ... yes\n591/1516 ... yes\n591/1517 ... yes\n591/1518 ... yes\n591/1519 ... yes\n591/1520 ... yes\n591/1521 ... yes\n591/1522 ... yes\n591/1523 ... yes\n591/1524 ... yes\n286/1525 ... yes\n591/1526 ... yes\n591/1527 ... yes\n591/1528 ... yes\n209/1529 ... yes\n343/1532 ... yes\n320/1533 ... yes\n144/1534 ... yes\n591/1535 ... yes\n591/1536 ... yes\n579/1537 ... yes\n343/1538 ... yes\n591/1539 ... yes\n342/1540 ... yes\n447/1542 ... yes\n442/1543 ... yes\n335/1544 ... yes\n605/1545 ... yes\n591/1547 ... yes\n591/1548 ... yes\n649/1549 ... yes\n418/1550 ... yes\n447/1551 ... yes\n294/1552 ... yes\n418/1553 ... yes\n27/1554 ... yes\n294/1555 ... yes\n611/1556 ... yes\n611/1557 ... yes\n655/1558 ... yes\n611/1559 ... yes\n612/1560 ... yes\n612/1561 ... yes\n276/1562 ... yes\n276/1565 ... yes\n276/1566 ... yes\n276/1568 ... yes\n27/1569 ... yes\n61/1570 ... yes\n292/1571 ... yes\n611/1572 ... yes\n173/1573 ... yes\n398/1574 ... yes\n276/1576 ... yes\n276/1577 ... yes\n387/1578 ... yes\n398/1579 ... yes\n398/1580 ... yes\n287/1581 ... yes\n276/1583 ... yes\n611/1584 ... yes\n250/1585 ... yes\n250/1586 ... yes\n250/1587 ... yes\n27/1588 ... yes\n250/1589 ... yes\n299/1590 ... yes\n398/1591 ... yes\n173/1592 ... yes\n398/1593 ... yes\n398/1594 ... yes\n491/1595 ... yes\n617/1596 ... yes\n398/1597 ... yes\n493/1598 ... yes\n398/1599 ... yes\n442/1600 ... yes\n343/1602 ... yes\n342/1605 ... yes\n47/1606 ... yes\n14/1607 ... yes\n391/1608 ... yes\n560/1609 ... yes\n560/1610 ... yes\n549/1611 ... yes\n611/1612 ... yes\n596/1613 ... yes\n398/1614 ... yes\n14/1615 ... yes\n276/1616 ... yes\n439/1617 ... yes\n447/1618 ... yes\n39/1619 ... yes\n14/1620 ... yes\n447/1621 ... yes\n447/1622 ... yes\n39/1623 ... yes\n311/1626 ... yes\n5/1627 ... yes\n5/1628 ... yes\n5/1629 ... yes\n5/1630 ... yes\n5/1631 ... yes\n299/1632 ... yes\n14/1634 ... yes\n5/1635 ... yes\n160/1637 ... yes\n442/1638 ... yes\n351/1639 ... yes\n611/1640 ... yes\n329/1641 ... yes\n6/1642 ... yes\n287/1643 ... yes\n390/1644 ... yes\n299/1645 ... yes\n322/1646 ... yes\n64/1647 ... yes\n628/1648 ... yes\n162/1650 ... yes\n561/1651 ... yes\n439/1652 ... yes\n5/1655 ... yes\n549/1656 ... yes\n568/1657 ... yes\n629/1658 ... yes\n439/1660 ... yes\n649/1661 ... yes\n629/1662 ... yes\n630/1663 ... yes\n331/1665 ... yes\n313/1666 ... yes\n225/1667 ... yes\n340/1668 ... yes\n173/1669 ... yes\n656/1670 ... yes\n634/1671 ... yes\n635/1672 ... yes\n12/1673 ... yes\n24/1674 ... yes\n27/1680 ... yes\n24/1681 ... yes\n472/1682 ... yes\n638/1683 ... yes\n638/1684 ... yes\n638/1685 ... yes\n292/1686 ... yes\n76/1687 ... yes\n397/1688 ... yes\n383/1689 ... yes\n628/1690 ... yes\n6/1691 ... yes\n565/1692 ... yes\n560/1693 ... yes\n525/1694 ... yes\n22/1696 ... yes\n287/1697 ... yes\n406/1698 ... yes\n322/1699 ... yes\n5/1700 ... yes\n40/1701 ... yes\n646/1702 ... yes\n611/1703 ... yes\n181/1706 ... yes\n287/1707 ... yes\n661/1708 ... yes\n391/1709 ... yes\n287/1710 ... yes\n39/1711 ... yes\n644/1712 ... yes\n326/1713 ... yes\n461/1714 ... yes\n246/1716 ... yes\n341/1718 ... yes\n287/1719 ... yes\n341/1720 ... yes\n256/1721 ... yes\n654/1722 ... yes\n654/1723 ... yes\n654/1724 ... yes\n5/1725 ... yes\n173/1726 ... yes\n292/1727 ... yes\n170/1728 ... yes\n655/1729 ... yes\n287/1730 ... yes\n40/1732 ... yes\n658/1733 ... yes\n591/1734 ... yes\n560/1736 ... yes\n645/1737 ... yes\n173/1739 ... yes\n192/1740 ... yes\n440/1742 ... yes\n340/1743 ... yes\n592/1744 ... yes\n560/1745 ... yes\n560/1746 ... yes\n560/1748 ... yes\n560/1749 ... yes\n560/1750 ... yes\n560/1751 ... yes\n286/1752 ... yes\n560/1753 ... yes\n560/1755 ... yes\n560/1756 ... yes\n560/1757 ... yes\n560/1758 ... yes\n560/1759 ... yes\n560/1760 ... yes\n560/1761 ... yes\n560/1762 ... yes\n611/1763 ... yes\n611/1764 ... yes\n565/1765 ... yes\n658/1766 ... yes\n665/1767 ... yes\n665/1768 ... yes\n665/1769 ... yes\n665/1770 ... yes\n665/1771 ... yes\n5/1772 ... yes\n668/1773 ... yes\n592/1774 ... yes\n351/1775 ... yes\n565/1776 ... yes\n655/1777 ... yes\n560/1778 ... yes\n532/1779 ... yes\n292/1780 ... yes\n447/1782 ... yes\n490/1783 ... yes\n628/1785 ... yes\n656/1786 ... yes\n670/1788 ... yes\n351/1789 ... yes\n292/1790 ... yes\n61/1791 ... yes\n540/1793 ... yes\n540/1794 ... yes\n540/1795 ... yes\n540/1796 ... yes\n540/1797 ... yes\n534/1798 ... yes\n540/1799 ... yes\n540/1800 ... yes\n540/1801 ... yes\n540/1802 ... yes\n540/1803 ... yes\n540/1804 ... yes\n540/1805 ... yes\n540/1806 ... yes\n534/1807 ... yes\n540/1808 ... yes\n540/1809 ... yes\n545/1810 ... yes\n540/1811 ... yes\n645/1812 ... yes\n546/1813 ... yes\n540/1814 ... yes\n546/1815 ... yes\n546/1816 ... yes\n545/1817 ... yes\n540/1818 ... yes\n545/1819 ... yes\n546/1820 ... yes\n540/1821 ... yes\n540/1822 ... yes\n545/1823 ... yes\n546/1824 ... yes\n546/1825 ... yes\n545/1826 ... yes\n545/1827 ... yes\n645/1828 ... yes\n540/1829 ... yes\n545/1830 ... yes\n540/1832 ... yes\n545/1833 ... yes\n675/1834 ... yes\n675/1835 ... yes\n674/1836 ... yes\n675/1837 ... yes\n675/1838 ... yes\n675/1839 ... yes\n673/1840 ... yes\n674/1841 ... yes\n674/1842 ... yes\n673/1843 ... yes\n673/1844 ... yes\n673/1845 ... yes\n674/1846 ... yes\n540/1847 ... yes\n673/1848 ... yes\n674/1849 ... yes\n545/1850 ... yes\n546/1851 ... yes\n673/1852 ... yes\n540/1853 ... yes\n545/1854 ... yes\n546/1855 ... yes\n673/1856 ... yes\n673/1857 ... yes\n674/1858 ... yes\n549/1859 ... yes\n674/1860 ... yes\n673/1861 ... yes\n674/1862 ... yes\n673/1863 ... yes\n674/1864 ... yes\n645/1865 ... yes\n634/1866 ... yes\n543/1868 ... yes\n543/1869 ... yes\n543/1870 ... yes\n646/1871 ... yes\n61/1872 ... yes\n491/1873 ... yes\n322/1875 ... yes\n418/1876 ... yes\n358/1877 ... yes\n649/1878 ... yes\n45/1879 ... yes\n634/1880 ... yes\n286/1881 ... yes\n638/1882 ... yes\n507/1883 ... yes\n561/1886 ... yes\n565/1887 ... yes\n596/1888 ... yes\n561/1889 ... yes\n656/1890 ... yes\n532/1891 ... yes\n532/1892 ... yes\n287/1893 ... yes\n24/1894 ... yes\n540/1896 ... yes\n14/1897 ... yes\n192/1898 ... yes\n596/1901 ... yes\n663/1902 ... yes\n225/1903 ... yes\nRedis version \u003e= 2.8.0? ... yes\nRuby version \u003e= 2.3.5 ? ... yes (2.5.3)\nGit version \u003e= 2.18.0 ? ... yes (2.18.1)\nGit user has default SSH configuration? ... yes\nActive users: ... 386\nElasticsearch version 5.6 - 6.x? ... skipped (elasticsearch is disabled)\n\nChecking GitLab App ... Finished\n\n\nChecking GitLab subtasks ... Finished\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\nAlways return some benign data even if it fails to contact TeamCity:\n\n```ruby\nrescue Errno::ECONNREFUSED\n  { build_page: teamcity_url, commit_status: :error }\n```","state":"closed","created_at":"2019-07-02T09:41:39.936Z","updated_at":"2020-03-31T13:54:10.208Z","closed_at":"2020-03-31T13:54:10.136Z","closed_by":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"labels":["Category:Continuous Integration","Verify::P1","backend","bug::performance","customer","devops::verify","group::pipeline execution","missed-SLO","priority::2","severity::2","type::bug","workflow::production"],"milestone":{"id":1104429,"iid":46,"group_id":9970,"title":"12.10","description":"https://about.gitlab.com/releases/2020/04/22/gitlab-12-10-released","state":"closed","created_at":"2019-12-20T15:15:53.243Z","updated_at":"2020-10-08T12:00:39.852Z","due_date":"2020-04-17","start_date":"2020-03-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/46"},"assignees":[{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"}],"author":{"id":577312,"username":"TobiX","name":"Tobias Gruetzmacher","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ca05b989b1d5d2a3677d28ebaca87137?s=80\u0026d=identicon","web_url":"https://gitlab.com/TobiX"},"type":"ISSUE","assignee":{"id":731181,"username":"mbobin","name":"Marius Bobin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/c0a726d6aa37d780309f7b3ea3555a14?s=80\u0026d=identicon","web_url":"https://gitlab.com/mbobin"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29825","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29825","notes":"https://gitlab.com/api/v4/projects/278964/issues/29825/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29825/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29825","relative":"#29825","full":"gitlab-org/gitlab#29825"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22426761,"iid":12543,"project_id":278964,"title":"Provide generic SAST analyzer for custom security scans","description":"### Problem to solve\n\nWe often get requests to customize our ~\"Category:SAST\" analyzers, for example https://gitlab.com/gitlab-org/gitlab/-/issues/6239. This can often be difficult to support given the variety of tools we utilize and the variations on rulesets customers desire.\n\nMany of our underlying tools do not provide a way to customize their behavior which requires us to either contribute upstream to them or modify their behavior. As such, we should consider a generic pattern-matcher which customers can utilize to scan for a predefined set of rules. This would be disabled by default but can be enabled with an additional job definition and inclusion in the `DEFAULT_ANALYZERS` ENV configuration\n\n### Intended users\n\n~\"Persona: Software developer\" \n~\"Persona: Development Team Lead\" \n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\nProvide a `generic` SAST analyzer that wraps a regex engine. this analyzer requires input configuration of a regex rule list and scans a project for the given patterns.  It also accepts a configurable severity level, confidence level, and scanner name in order to report the findings more precisely.\n\n```\ndocker run \\\n  --interactive --tty --rm \\\n  --volume \"$PWD\":/tmp/app \\\n  --env CI_PROJECT_DIR=/tmp/app \\\n\n  --env RULELIST=./my_custom_regexes.toml \\\n  --env DEFAULT_SEVERITY=high \\\n  --env SCANNER_NAME=\"Custom Java Scanner\" \\\n\n  registry.gitlab.com/gitlab-org/security-products/analyzers/generic:12-1-stable /analyzer run\n```\n\n### Permissions and Security\n\n\u003c!-- What permissions are required to perform the described actions? Are they consistent with the existing permissions as documented for users, groups, and projects as appropriate? Is the proposed behavior consistent between the UI, API, and other access methods (e.g. email replies)? --\u003e\n\n### Documentation\n\n\u003c!-- See the Feature Change Documentation Workflow https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html\nAdd all known Documentation Requirements here, per https://docs.gitlab.com/ee/development/documentation/feature-change-workflow.html#documentation-requirements --\u003e\n\n### Testing\n\n\u003c!-- What risks does this change pose? How might it affect the quality of the product? What additional test coverage or changes to tests will be needed? Will it require cross-browser testing? See the test engineering process for further guidelines: https://about.gitlab.com/handbook/engineering/quality/guidelines/test-engineering/ --\u003e\n\n### What does success look like, and how can we measure that?\n\nCustomers can enable an analyzer with a simple `YAML` or `TOML` configuration. This allow their scans to track findings outside the scope of our default analyzers. \n\nCustomers do not need to create custom images or compile analyzers in order to use custom rulesets.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references","state":"closed","created_at":"2019-07-01T23:23:55.658Z","updated_at":"2021-04-08T18:42:38.478Z","closed_at":"2021-03-29T17:51:28.056Z","closed_by":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"labels":["Category:SAST","Enterprise Edition","GitLab Ultimate","SAST: Common Need","SAST: Speedy Scanners","[deprecated] Accepting merge requests","backend","backend-weight::5","customer","devops::secure","direction","group::static analysis","section::sec","secure:refinement-backend","type::feature"],"milestone":{"id":427853,"iid":10,"group_id":9970,"title":"Next 3-4 releases","description":"Bigger issues we plan to ship in the next 3-4 releases, but don't have a designated release yet. \r\n\r\n\u003e \"An easy way to look at it for me it's translating to months. Since our iterations are 1 month, I look at it as 'within the next 4 months'.\" - @dgruesso [via slack]\r\n\r\nDO NOT add small changes, bugs, regressions to this milestone.","state":"active","created_at":"2017-12-11T16:26:33.141Z","updated_at":"2020-07-14T18:21:29.639Z","due_date":null,"start_date":null,"expired":false,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/10"},"assignees":[],"author":{"id":401232,"username":"theoretick","name":"Lucas Charles","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/401232/squares-nail-wall-art.jpg","web_url":"https://gitlab.com/theoretick"},"type":"ISSUE","assignee":null,"user_notes_count":26,"merge_requests_count":0,"upvotes":12,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12543","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":5,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12543","notes":"https://gitlab.com/api/v4/projects/278964/issues/12543/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12543/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12543","relative":"#12543","full":"gitlab-org/gitlab#12543"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":3260,"epic":{"id":51937,"iid":3260,"title":"Next Generation SAST engine","url":"/groups/gitlab-org/-/epics/3260","group_id":9970,"human_readable_end_date":"Oct 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22488263,"iid":12593,"project_id":278964,"title":"Convert Issue Analytics chart into ECharts","description":"# Description\nWe currently use chartjs to render the issue analytics chart found in https://gitlab.com/groups/gitlab-org/-/issues_analytics. We need to change it to ECharts to\n- Reduce dependency on multiple charting libraries\n- Confirm charts to design pattern\n\n# Screenshot\n![Screen_Shot_2019-07-01_at_5.13.15_PM](/uploads/38b8610e37047f960a5f913381df3924/Screen_Shot_2019-07-01_at_5.13.15_PM.png)\n\n# Approximation of how it would look in ECharts\n\n![ee_12593-convert-issue-analytics-chart-into-ECharts](/uploads/14bfc6a7da3ca1911701372e284c0d15/ee_12593-convert-issue-analytics-chart-into-ECharts.png)","state":"closed","created_at":"2019-07-01T22:14:00.314Z","updated_at":"2019-09-04T14:50:13.516Z","closed_at":"2019-09-04T14:50:13.451Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Charts","Enterprise Edition","devops::monitor","frontend","group::respond","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"user_notes_count":16,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12593","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12593","notes":"https://gitlab.com/api/v4/projects/278964/issues/12593/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12593/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12593","relative":"#12593","full":"gitlab-org/gitlab#12593"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1569,"epic":{"id":8970,"iid":1569,"title":"Removing chartjs as a dependency","url":"/groups/gitlab-org/-/epics/1569","group_id":9970,"human_readable_end_date":"Sep 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699048,"iid":29811,"project_id":278964,"title":"Convert milestone burndown chart into ECharts","description":"# Description\nWe currently use chartjs to render the milestone burndown chart found in https://gitlab.com/groups/gitlab-org/-/milestones/33. We need to change it to ECharts to\n- Reduce dependency on multiple charting libraries\n- Confirm charts to design pattern\n\n# Screenshot\n![Screen_Shot_2019-07-01_at_5.11.28_PM](/uploads/01a2d3a2add56cd329d7e94e7ea28f9c/Screen_Shot_2019-07-01_at_5.11.28_PM.png)\n\n# Approximation of what it would look like in ECharts\n\n![ce_63989-convert-milestone-burndown-chart-into-ECharts](/uploads/7227531018f8e74994784e988f030ffe/ce_63989-convert-milestone-burndown-chart-into-ECharts.png)\n","state":"closed","created_at":"2019-07-01T22:11:57.704Z","updated_at":"2019-10-18T16:24:27.303Z","closed_at":"2019-10-18T16:24:27.259Z","closed_by":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"labels":["Charts","devops::monitor","frontend","group::respond","workflow::verification"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":832471,"username":"psimyn","name":"Simon Knox","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3de75939c39eecd6ea2215ec740a8037?s=80\u0026d=identicon","web_url":"https://gitlab.com/psimyn"},"user_notes_count":13,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29811","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29811","notes":"https://gitlab.com/api/v4/projects/278964/issues/29811/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29811/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29811","relative":"#29811","full":"gitlab-org/gitlab#29811"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1560,"epic":{"id":8852,"iid":1560,"title":"Implement all charts in gitlab using ECharts","url":"/groups/gitlab-org/-/epics/1560","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699044,"iid":29810,"project_id":278964,"title":"Convert Contributors Graph into ECharts","description":"# Description\nWe currently use chartjs to render the contribution graph found in https://gitlab.com/gitlab-org/gitlab-ce/-/graphs/master. We need to change it to ECharts to\n- Reduce dependency on multiple charting libraries\n- Confirm charts to design pattern\n\n# Current screenshot\n![Screen_Shot_2019-07-01_at_5.08.55_PM](/uploads/eab9a4bd98ad52c77dd4eb1d669a5cd9/Screen_Shot_2019-07-01_at_5.08.55_PM.png)\n\n# Approximation of how the page will look when ECharts is introduced\n\n![ce_63988-convert-contributors-graph-into-echarts](/uploads/3ed589249bdfbbde8515c1457bff1176/ce_63988-convert-contributors-graph-into-echarts.png)","state":"closed","created_at":"2019-07-01T22:09:08.066Z","updated_at":"2021-04-03T08:31:33.952Z","closed_at":"2019-11-04T16:52:41.094Z","closed_by":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"labels":["Charts","devops::monitor","frontend","group::respond","missed:12.4","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":4339707,"username":"ohoral","name":"Olena Horal-Koretska","state":"active","avatar_url":"https://secure.gravatar.com/avatar/42796a7332b4608eb9785986719e7215?s=80\u0026d=identicon","web_url":"https://gitlab.com/ohoral"},"user_notes_count":40,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29810","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29810","notes":"https://gitlab.com/api/v4/projects/278964/issues/29810/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29810/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29810","relative":"#29810","full":"gitlab-org/gitlab#29810"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1560,"epic":{"id":8852,"iid":1560,"title":"Implement all charts in gitlab using ECharts","url":"/groups/gitlab-org/-/epics/1560","group_id":9970,"human_readable_end_date":"Nov 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24699034,"iid":29806,"project_id":278964,"title":"We're really bad at rounded corners 😅: Revision of rounded corners of MR Widget area","description":"Our merge request widget makes nice use of rounded corners, but we have not taken care to look at the finer details when implementing this because rendering issues keep cropping up, and even when they are fixed they are often broken again when changes are made.\n\n![Screen_Shot_2019-07-01_at_12.03.59_PM](/uploads/8d0537cd1ba40021dad7fe636056e1c0/Screen_Shot_2019-07-01_at_12.03.59_PM.png)\n\n:scream: :scream: :scream: :scream: :scream: \n\nI think we should audit the way we're handling rounded corners (specifically in our MR widget CSS, but there are other areas with similar mistakes) with the following in mind:\n\n1. Elements which are children of parents with rounded corners should have rounded corners themselves (especially if they have a background color applied)\n\n2. Children with rounded corners should make sure to use the correct radius (should be `parent-radius - parent-border-size`), otherwise it can look ugly on close inspection:\n\n    ![Screen_Shot_2019-07-01_at_12.19.31_PM](/uploads/02cfc7051f5894369cf32bc925105a17/Screen_Shot_2019-07-01_at_12.19.31_PM.png)\n\n3. Make use of `\u003e :first-child` and `\u003e :last-child` to ensure child elements of parents with rounded corners have rounded corners themselves.  This is a case where utility classes will fail us.  We have many sections of our MR widget that will expand or collapse with user interaction and if we're relying on utility classes, we'll need to conditionally apply them based on the state of the UI.  Best to let native CSS features handle this for us.\n\n4. Applying a border-radius when there is only a border on one side of an element will have an ugly, tapered-off look.  Let's avoid this.","state":"closed","created_at":"2019-07-01T17:29:40.550Z","updated_at":"2022-11-21T12:01:46.975Z","closed_at":"2022-11-08T16:16:08.850Z","closed_by":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"labels":["Category:Code Review Workflow","Code Review FY23-Q3 OKR::triaged","Create [DEPRECATED]","Deliverable","SUS::Impacting","UI polish","UX","devops::create","frontend","group::code review","merge requests","priority::3","section::dev","severity::4","spike","type::bug","workflow::verification"],"milestone":{"id":2687593,"iid":81,"group_id":9970,"title":"15.6","description":"","state":"active","created_at":"2022-07-06T19:22:27.893Z","updated_at":"2022-07-06T19:22:27.893Z","due_date":"2022-11-17","start_date":"2022-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/81"},"assignees":[{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"}],"author":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"type":"ISSUE","assignee":{"id":113870,"username":"iamphill","name":"Phil Hughes","state":"active","avatar_url":"https://secure.gravatar.com/avatar/533a51534470a11062df393543eab649?s=80\u0026d=identicon","web_url":"https://gitlab.com/iamphill"},"user_notes_count":25,"merge_requests_count":1,"upvotes":13,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29806","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29806","notes":"https://gitlab.com/api/v4/projects/278964/issues/29806/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29806/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29806","relative":"#29806","full":"gitlab-org/gitlab#29806"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22415032,"iid":12538,"project_id":278964,"title":"0 weight is not displayed in side panel","description":"### Summary\n\nWhen weight has `zero` value (no matter if it was set through quick command or UI action) it is displayed as `none` in the side bar. The value is stored in the db correctly.\n\nThe backend part (which was problematic only for quick command) was fixed as part of https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14432 . I probably missed the sidebar during the testing :face_palm: \n\n### Steps to reproduce\n\n#### Quick command\n1. Find an issue\n1. Enter a comment `/weight 0`\n1. Reload the page\n\n#### UI\n1. Find an issue\n1. Change weight from the UI\n1. Reload the page (it is displayed correctly before the reload)\n\n### What is the current *bug* behavior?\n\n`None` is displayed as the weight\n\n### What is the expected *correct* behavior?\n\n`0` should be displayed\n\n### Relevant logs and/or screenshots\n\nThe value is stored correctly in the db: \n\n```\nproject.issues.find_by(iid: 27).weight\n  Issue Load (0.5ms)  SELECT  \"issues\".* FROM \"issues\" WHERE \"issues\".\"project_id\" = $1 AND \"issues\".\"iid\" = $2 LIMIT $3  [[\"project_id\", 6], [\"iid\", 27], [\"LIMIT\", 1]]\n  ↳ (pry):4\n=\u003e 0\n```\n\n### Output of checks\n\nThis bug happens on GitLab.com","state":"closed","created_at":"2019-07-01T16:02:53.009Z","updated_at":"2022-05-19T16:07:22.856Z","closed_at":"2019-07-18T18:18:48.733Z","closed_by":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"labels":["Enterprise Edition","devops::plan","frontend","group::project management","issue weight","priority::2","severity::3","type::bug"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"}],"author":{"id":508743,"username":"jarka","name":"Jarka Košanová","state":"active","avatar_url":"https://secure.gravatar.com/avatar/3931dae84deb01d2881e4909077b8dbe?s=80\u0026d=identicon","web_url":"https://gitlab.com/jarka"},"type":"ISSUE","assignee":{"id":1212235,"username":"winh","name":"Inactive Account","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e34b010c96ff3f44c62cddf66607232a?s=80\u0026d=identicon","web_url":"https://gitlab.com/winh"},"user_notes_count":5,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12538","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12538","notes":"https://gitlab.com/api/v4/projects/278964/issues/12538/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12538/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12538","relative":"#12538","full":"gitlab-org/gitlab#12538"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22405840,"iid":12527,"project_id":278964,"title":"Comments in the Designs tab should support Todo's + Email Notifications","description":"### Problem to solve\n\nWhen commenting on designs in the Design Management tab other users who may be tagged or participating in the issue are not notified nor is a `Todo` created.\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\n\nAll users participating in issues with Designs need to functionality to support notifications and Todos.\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\n\nWhen a comment is left on a Design users who are participating in the discussion should receive an email notification and have a Todo created. This will ensure that discussions are actionable.\n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\n\nUsers will be notified of comments and have Todo's created. We'll be adding [Usage Ping](https://gitlab.com/gitlab-org/gitlab-ce/issues/63885) for comments to measure usage.\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\n\n~\"GitLab Premium\" \n\n### Links / references","state":"closed","created_at":"2019-07-01T11:29:49.607Z","updated_at":"2021-06-17T17:09:54.052Z","closed_at":"2019-09-13T16:13:26.913Z","closed_by":{"id":1144264,"username":"mkozono","name":"Michael Kozono","state":"active","avatar_url":"https://secure.gravatar.com/avatar/6243abba3cf112e6df4a5a644c5f86aa?s=80\u0026d=identicon","web_url":"https://gitlab.com/mkozono"},"labels":["Category:Design Management","Deliverable","Enterprise Edition","GitLab Premium","Product Vision FY20","backend","devops::plan","group::product planning","missed-deliverable","missed:12.2","type::feature","workflow::in review"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"}],"author":{"id":2935693,"username":"phikai","name":"Kai Armstrong","state":"active","avatar_url":"https://secure.gravatar.com/avatar/2c5d6a63b41cbeb3ea4cccda82e758e1?s=80\u0026d=identicon","web_url":"https://gitlab.com/phikai"},"type":"ISSUE","assignee":{"id":3614858,"username":"alexkalderimis","name":"Alex Kalderimis","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3614858/avatar.png","web_url":"https://gitlab.com/alexkalderimis"},"user_notes_count":9,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12527","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12527","notes":"https://gitlab.com/api/v4/projects/278964/issues/12527/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12527/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12527","relative":"#12527","full":"gitlab-org/gitlab#12527"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":660,"epic":{"id":2542,"iid":660,"title":"Versioned designs with point of interest discussions","url":"/groups/gitlab-org/-/epics/660","group_id":9970,"human_readable_end_date":"Mar 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22399109,"iid":12524,"project_id":278964,"title":"[VSA] Enable pagination (frontend)","description":"### Problem to solve\n\n\u003c!-- What problem do we solve? --\u003e\n\nCurrently, we show the items that are being counted towards the cycle time for each stage, but we only show 20 of the items. Only showing 20 has limited value if a user wants to drill in and explore further. \n\n\n### Intended users\n\n\u003c!-- Who will use this feature? If known, include any of the following: types of users (e.g. Developer), personas, or specific company roles (e.g. Release Manager). It's okay to write \"Unknown\" and fill this field in later.\nPersonas can be found at https://about.gitlab.com/handbook/marketing/product-marketing/roles-personas/ --\u003e\nEM, PM, Executives\n\n### Further details\n\n\u003c!-- Include use cases, benefits, and/or goals (contributes to our vision?) --\u003e\n\n### Proposal\n\n\u003c!-- How are we going to solve the problem? Try to include the user journey! https://about.gitlab.com/handbook/journeys/#user-journey --\u003e\nEnable users to see more than 20 of the items that have been counted towards the stage time. \n\n### What does success look like, and how can we measure that?\n\n\u003c!-- Define both the success metrics and acceptance criteria. Note that success metrics indicate the desired business outcomes, while acceptance criteria indicate when the solution is working correctly. If there is no way to measure success, link to an issue that will implement a way to measure this. --\u003e\nA user can directly see issues/test/MRs, etc that lead to long cycle time from the dashboard and go to investigate what happened.\n\n### What is the type of buyer? \n\n\u003c!-- Which leads to: in which enterprise tier should this feature go? See https://about.gitlab.com/handbook/product/pricing/#four-tiers --\u003e\nPremium\n\n### Links / references\n\n### Solution\n\n* Use the pagination component from gitlab-ui and scroll the table to the top the user switches pages\n* Show 20 items per page\n* Since the querying total count is quite expensive on the backend, ~backend will implement [key-based pagination](https://docs.gitlab.com/ee/api/#keyset-based-pagination). As a result, we won't show all page buttons but only the `prev`/`next` buttons (similar to what we do in GraphQL):\n\n![prev_next_pagination](/uploads/8ecd5f7a8cec2b13b0028607e67566af/prev_next_pagination.png)\n\n* ~frontend should use the header information (`Link` header, see https://docs.gitlab.com/ee/api/#keyset-based-pagination) to retrieve the URL for the previous and next page.\n\n~backend will be implemented in https://gitlab.com/gitlab-org/gitlab/-/issues/324075\n\n**Note:** Sorting is out of scope here and will be implemented in  https://gitlab.com/gitlab-org/gitlab/-/issues/301082","state":"closed","created_at":"2019-07-01T09:02:43.622Z","updated_at":"2021-08-10T22:18:02.111Z","closed_at":"2021-05-03T03:07:58.621Z","closed_by":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"labels":["Category:Value Stream Management","Enterprise Edition","GitLab Premium","UX","analytics","devops::manage","frontend","group::optimize","missed:12.3","missed:12.5","missed:13.11","priority::2","release post item","section::dev","type::feature","workflow::verification"],"milestone":{"id":1233762,"iid":58,"group_id":9970,"title":"13.12","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2020-04-09T17:44:14.948Z","updated_at":"2022-04-21T07:22:18.898Z","due_date":"2021-05-17","start_date":"2021-04-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/58"},"assignees":[{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"}],"author":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"type":"ISSUE","assignee":{"id":3397881,"username":"ekigbo","name":"Ezekiel Kigbo","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3397881/avatar.png","web_url":"https://gitlab.com/ekigbo"},"user_notes_count":64,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12524","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12524","notes":"https://gitlab.com/api/v4/projects/278964/issues/12524/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12524/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12524","relative":"#12524","full":"gitlab-org/gitlab#12524"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":5272,"epic":{"id":188272,"iid":5272,"title":"[VSA] Usability improvements","url":"/groups/gitlab-org/-/epics/5272","group_id":9970,"human_readable_end_date":"Feb 17, 2023","human_readable_timestamp":"\u003cstrong\u003e1\u003c/strong\u003e month remaining"},"iteration":null,"health_status":null},{"id":24699001,"iid":29789,"project_id":278964,"title":"Merge request approvers in list sometimes doesnt show correct number","description":"### Summary\r\n\r\n(Summarize the bug encountered concisely)\r\n\r\nIn my test instance, I created multiple merge requests that require 2 approvers as Administrator and got this as a result.\r\n\r\n![Screenshot_2019-07-01_at_10.13.35](/uploads/73951d74d699b8989285f3e74d2cdad4/Screenshot_2019-07-01_at_10.13.35.png)\r\n\r\nWhere only the one 3 days old shows the correct number.\r\nI tried to reproduce this with my dummy account on my test instance but\r\nnever got that to work.\r\n\r\n![Screenshot_2019-07-01_at_10.13.10](/uploads/545fcbf057a23d80bff8a19249bb7a32/Screenshot_2019-07-01_at_10.13.10.png)\r\n\r\nNow this problem doesn't happen all the time.\r\nI tried several steps to try and reproduce this.\r\n\r\n### What is the current *bug* behavior?\r\n\r\n1. Set approvers number in the merge request, created a merge request.\r\n2. Set approvers number in the settings, created a merge request.\r\n3. Set selected approvers in the settings, created a merge request.\r\n\r\nNow depending on the project this either shows the correct number at `/merge_requests` while sometimes it just shows `0 of 0`\r\n\r\n### What is the expected *correct* behavior?\r\n\r\nIt should always show the correct number of approvers required and already approved.\r\n\r\n#### Results of GitLab environment info\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\r\n\u003cpre\u003e\r\n\r\nroot@rz-gltest:/# sudo gitlab-rake gitlab:env:info\r\n\r\nSystem information\r\nSystem:\t\tUbuntu 16.04\r\nProxy:\t\tno\r\nCurrent User:\tgit\r\nUsing RVM:\tno\r\nRuby Version:\t2.6.3p62\r\nGem Version:\t2.7.9\r\nBundler Version:1.17.3\r\nRake Version:\t12.3.2\r\nRedis Version:\t3.2.12\r\nGit Version:\t2.21.0\r\nSidekiq Version:5.2.7\r\nGo Version:\tgo1.6.2 linux/amd64\r\n\r\nGitLab information\r\nVersion:\t12.0.2-ee\r\nRevision:\tef76b54fc1e\r\nDirectory:\t/opt/gitlab/embedded/service/gitlab-rails\r\nDB Adapter:\tPostgreSQL\r\nDB Version:\t10.7\r\nURL:\t\thttp://178.128.44.26\r\nHTTP Clone URL:\thttp://178.128.44.26/some-group/some-project.git\r\nSSH Clone URL:\tgit@178.128.44.26:some-group/some-project.git\r\nElasticsearch:\tyes\r\nGeo:\t\tno\r\nUsing LDAP:\tno\r\nUsing Omniauth:\tyes\r\nOmniauth Providers: gitlab\r\n\r\nGitLab Shell\r\nVersion:\t9.3.0\r\nRepository storage paths:\r\n- default: \t/var/opt/gitlab/git-data/repositories\r\nGitLab Shell path:\t\t/opt/gitlab/embedded/service/gitlab-shell\r\nGit:\t\t/opt/gitlab/embedded/bin/git\r\n\r\n\u003c/pre\u003e\r\n\u003c/details\u003e\r\n\r\n#### Results of GitLab application Check\r\n\r\n\u003cdetails\u003e\r\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\r\n\u003cpre\u003e\r\nroot@rz-gltest:/# sudo gitlab-rake gitlab:check SANITIZE=true\r\n\r\nChecking GitLab subtasks ...\r\n\r\nChecking GitLab Shell ...\r\n\r\nGitLab Shell: ... GitLab Shell version \u003e= 9.3.0 ? ... OK (9.3.0)\r\nRunning /opt/gitlab/embedded/service/gitlab-shell/bin/check\r\nCheck GitLab API access: OK\r\nRedis available via internal API: OK\r\n\r\nAccess to /var/opt/gitlab/.ssh/authorized_keys: OK\r\ngitlab-shell self-check successful\r\n\r\nChecking GitLab Shell ... Finished\r\n\r\nChecking Gitaly ...\r\n\r\nGitaly: ... default ... OK\r\n\r\nChecking Gitaly ... Finished\r\n\r\nChecking Sidekiq ...\r\n\r\nSidekiq: ... Running? ... yes\r\nNumber of Sidekiq processes ... 1\r\n\r\nChecking Sidekiq ... Finished\r\n\r\nChecking Incoming Email ...\r\n\r\nIncoming Email: ... Reply by email is disabled in config/gitlab.yml\r\n\r\nChecking Incoming Email ... Finished\r\n\r\nChecking LDAP ...\r\n\r\nLDAP: ... LDAP is disabled in config/gitlab.yml\r\n\r\nChecking LDAP ... Finished\r\n\r\nChecking GitLab App ...\r\n\r\nGit configured correctly? ... yes\r\nDatabase config exists? ... yes\r\nAll migrations up? ... yes\r\nDatabase contains orphaned GroupMembers? ... no\r\nGitLab config exists? ... yes\r\nGitLab config up to date? ... yes\r\nLog directory writable? ... yes\r\nTmp directory writable? ... yes\r\nUploads directory exists? ... yes\r\nUploads directory has correct permissions? ... yes\r\nUploads directory tmp has correct permissions? ... yes\r\nInit script exists? ... skipped (omnibus-gitlab has no init script)\r\nInit script up-to-date? ... skipped (omnibus-gitlab has no init script)\r\nProjects have namespace: ...\r\n1/1 ... yes\r\n1/2 ... yes\r\n2/3 ... yes\r\n1/4 ... yes\r\n1/5 ... yes\r\n4/6 ... yes\r\n13/7 ... yes\r\n5/8 ... yes\r\n1/9 ... yes\r\n1/10 ... yes\r\n4/11 ... yes\r\n1/12 ... yes\r\nRedis version \u003e= 2.8.0? ... yes\r\nRuby version \u003e= 2.5.3 ? ... yes (2.6.3)\r\nGit version \u003e= 2.21.0 ? ... yes (2.21.0)\r\nGit user has default SSH configuration? ... yes\r\nActive users: ... 3\r\nElasticsearch version 5.6 - 6.x? ... yes (6.6.0)\r\n\r\nChecking GitLab App ... Finished\r\n\r\n\r\nChecking GitLab subtasks ... Finished\r\n\r\n\u003c/pre\u003e\r\n\u003c/details\u003e\r\n\r\n### Possible fixes\r\n\r\n\r\nZendesk: https://gitlab.zendesk.com/agent/tickets/124778 (internal)","state":"closed","created_at":"2019-07-01T08:33:54.064Z","updated_at":"2020-09-30T23:22:33.291Z","closed_at":"2020-02-14T15:59:11.275Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Deliverable","backend","customer","devops::create","group::source code","missed-SLO","priority::2","severity::2","type::bug","workflow::in review"],"milestone":{"id":1001915,"iid":43,"group_id":9970,"title":"12.8","description":"https://about.gitlab.com/releases/2020/02/22/gitlab-12-8-released","state":"closed","created_at":"2019-09-15T20:53:58.792Z","updated_at":"2020-05-19T14:23:44.837Z","due_date":"2020-02-17","start_date":"2020-01-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/43"},"assignees":[{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"}],"author":{"id":2369952,"username":"rvzon","name":"Ronald van Zon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2369952/avatar.png","web_url":"https://gitlab.com/rvzon"},"type":"ISSUE","assignee":{"id":142752,"username":"garyh","name":"Gary Holtz","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/142752/avatar.png","web_url":"https://gitlab.com/garyh"},"user_notes_count":6,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29789","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29789","notes":"https://gitlab.com/api/v4/projects/278964/issues/29789/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29789/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29789","relative":"#29789","full":"gitlab-org/gitlab#29789"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22387408,"iid":12502,"project_id":278964,"title":"Usage Ping - \u003cAnalytics\u003e/\u003cCycle Analytics\u003e + \u003cProductivity Analytics\u003e","description":"Create usage ping that can identify when a user views the pages to start with","state":"closed","created_at":"2019-06-30T20:01:46.663Z","updated_at":"2020-02-05T11:15:22.051Z","closed_at":"2019-09-17T20:19:36.376Z","closed_by":{"id":4512390,"username":"djensen","name":"Dan Jensen","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4512390/avatar.png","web_url":"https://gitlab.com/djensen"},"labels":["Deliverable","Enterprise Edition","Manage [DEPRECATED]","backend","devops::manage","group::optimize","priority::1","workflow::verification"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"}],"author":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"type":"ISSUE","assignee":{"id":3511154,"username":"valexieva","name":"Virjinia Alexieva","state":"blocked","avatar_url":"https://secure.gravatar.com/avatar/bc036fa2e7b6fa926a175324a948169f?s=80\u0026d=identicon","web_url":"https://gitlab.com/valexieva"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12502","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12502","notes":"https://gitlab.com/api/v4/projects/278964/issues/12502/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12502/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12502","relative":"#12502","full":"gitlab-org/gitlab#12502"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24698970,"iid":29772,"project_id":278964,"title":"Remove feature flag :use_legacy_pipeline_triggers","description":"In https://gitlab.com/gitlab-org/gitlab-ce/issues/30231 we moved the use of legacy triggers behind `use_legacy_pipeline_triggers` feature flag and disabled on Gitlab.com.\n\nFew releases after that we need to remove the feature flag and any traces of legacy triggers in the codebase.\n\nWe could also remove with a migration all remaining legacy triggers (triggers without owner).\n\nWe could split this into 2 merge requests:\n\n1. Remove feature flag `use_legacy_pipeline_triggers` and its use. This was added as a safe step to deprecate the feature. We moved it behind feature flag so that if removing the feature was causing errors or customer complains we could turn on the feature flag and it was behaving like before. We can now remove the feature entirely be removing what's behind the feature flag. For code to remove please refer to this MR https://gitlab.com/gitlab-org/gitlab-foss/merge_requests/30133, where the feature flag was introduced.\n1. Create a db migration to drop all pipeline triggers that are \"legacy\" (having no owner)","state":"closed","created_at":"2019-06-28T16:02:19.330Z","updated_at":"2022-02-09T05:19:13.411Z","closed_at":"2020-01-20T11:02:44.397Z","closed_by":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"labels":["Category:Continuous Integration","Deliverable","backend","backstage [DEPRECATED]","devops::verify","group::pipeline execution","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","missed:12.6","type::feature","workflow::production"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"}],"author":{"id":695467,"username":"fabiopitino","name":"Fabio Pitino","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f0db032076c54065b10b3efdfd175e6c?s=80\u0026d=identicon","web_url":"https://gitlab.com/fabiopitino"},"type":"ISSUE","assignee":{"id":514662,"username":"furkanayhan","name":"Furkan Ayhan","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/514662/avatar.png","web_url":"https://gitlab.com/furkanayhan"},"user_notes_count":10,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29772","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29772","notes":"https://gitlab.com/api/v4/projects/278964/issues/29772/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29772/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29772","relative":"#29772","full":"gitlab-org/gitlab#29772"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22350912,"iid":12487,"project_id":278964,"title":"Get rid of docker in docker requirement for Dependency Scanning","description":"Customers have declined to use some of our scanning solutions because docker in docker is leveraged and that requires privileged runners, and it also prevents the runners from caching the images. The content of the docker-in-docker container is lost after the job run, and only `docker:stable` is cached. As a result we are working to remove this requirement, and in this release we will remove the docker in docker requirement from the dependency scanning solution.\n\n### Problem to solve\n\nDocker-in-docker is only required to be able to orchestrate the analyzers. One solution would be to port the code of the Dependency Scanning orchestrator directly into the runner.\n\nNB: SAST and Dependency scanning share a common library and the same orchestration model, [see SAST issue](https://gitlab.com/gitlab-org/gitlab-ee/issues/10796)\n\nSee https://gitlab.com/groups/gitlab-org/-/epics/971 for previous comments.\n\n### Intended users\n\n- ~\"Persona: DevOps Engineer\" \n- ~\"Persona: Software developer\" \n\n### Proposal\n\nUpdate [Dependency-Scanning.gitlab-ci.yml](https://gitlab.com/gitlab-org/gitlab-foss/blob/master/lib/gitlab/ci/templates/Security/Dependency-Scanning.gitlab-ci.yml) job template:\n- add `DS_ANALYZER_IMAGE_PREFIX` variable\n- add one job for each supported Dependency Scanning analyzer,\nand leverage new CI variable `CI_PROJECT_REPOSITORY_LANGUAGES` introduced in https://gitlab.com/gitlab-org/gitlab/merge_requests/16477 to enable them when the project is compatible; share YAML code using extends\n- add `DS_DISABLE_DIND` variable, ~~true by default~~ false by default\n- change the existing `dependency_scanning` job, enable it `except` when `DS_DISABLE_DIND` is true\n\nGemnasium would always run whereas other scanners would run selectively when the project is compatible.\n\nThis is similar to https://gitlab.com/gitlab-org/gitlab/merge_requests/16487/diffs.\n\nSo assuming there's a shared definition named `.dependency_scanning`.\n\n```yaml\ngemnasium-dependency_scanning:\n  extends: .analyzer\n  image:\n    name: \"$DEPENDENCY_SCANNING_ANALYZER_IMAGE_PREFIX/gemnasium:$DS_MAJOR_VERSION\"\n\ngemnasium-java-dependency_scanning:\n  extends: .analyzer\n  image:\n    name: \"$DEPENDENCY_SCANNING_ANALYZER_IMAGE_PREFIX/gemnasium-java:$DS_MAJOR_VERSION\"\n  only:\n    variables:\n      - '$CI_PROJECT_REPOSITORY_LANGUAGES =~ /java\\b/'\n\nretire.js-dependency_scanning:\n  extends: .analyzer\n  image:\n    name: \"$DEPENDENCY_SCANNING_ANALYZER_IMAGE_PREFIX/retire.js:$DS_MAJOR_VERSION\"\n  only:\n    variables:\n      - '$CI_PROJECT_REPOSITORY_LANGUAGES =~ /javasript/'\n\nbundler-audit-dependency_scanning:\n  extends: .analyzer\n  image:\n    name: \"$DEPENDENCY_SCANNING_ANALYZER_IMAGE_PREFIX/bundler-audit:$DS_MAJOR_VERSION\"\n  only:\n    variables:\n      - '$CI_PROJECT_REPOSITORY_LANGUAGES =~ /ruby/'\n```\n\nCurrently `DS_MAJOR_VERSION` must be set to `2`.\n\nSee [similar work for SAST](https://gitlab.com/gitlab-org/gitlab-ee/issues/10796)\n\n### Documentation\n\n- [x] Update https://docs.gitlab.com/ee/user/application_security/dependency_scanning/index.html\n\n### Testing\n\n- [ ] Update all related tests projects in https://gitlab.com/gitlab-org/security-products/tests\n\n### What does success look like, and how can we measure that?\n\nThere is no more orchestration layer for Dependency Scanning, instead each analyzer has its own job configured by the corresponding vendored template.\n\n### What is the type of buyer? \n\n~\"GitLab Ultimate\" \n\n### Links / references\n\n### Product Management - @NicoleSchwartz\n\n* [x] [Release Post](https://gitlab.com/gitlab-com/www-gitlab-com/merge_requests/32379)","state":"closed","created_at":"2019-06-28T14:04:42.239Z","updated_at":"2020-09-25T21:17:18.908Z","closed_at":"2019-11-15T16:56:18.997Z","closed_by":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"labels":["Category:Dependency Scanning","Deliverable","Enterprise Edition","GitLab Ultimate","backend","backend-weight::3","customer","devops::secure","direction","group::composition analysis","missed-deliverable","missed:12.3","release post item","type::feature","workflow::verification"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":52092,"username":"gonzoyumo","name":"Olivier Gonzalez","state":"active","avatar_url":"https://secure.gravatar.com/avatar/651e0ff81c3995a05269f7c80895fe89?s=80\u0026d=identicon","web_url":"https://gitlab.com/gonzoyumo"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":34,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12487","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":3,"completed_count":2},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"2 of 3 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12487","notes":"https://gitlab.com/api/v4/projects/278964/issues/12487/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12487/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12487","relative":"#12487","full":"gitlab-org/gitlab#12487"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":2465,"epic":{"id":18050,"iid":2465,"title":"Dependency Scanning - Make Docker-in-Docker (DinD) optional (not a requirement) for all secure analyzers / scans","url":"/groups/gitlab-org/-/epics/2465","group_id":9970,"human_readable_end_date":"Dec 17, 2019","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24698936,"iid":29757,"project_id":278964,"title":"User with developer role can read protected/secret group variables","description":"**[HackerOne report #631073](https://hackerone.com/reports/631073)** by `rpadovani` on 2019-06-27, assigned to `estrike`:\n\n### Summary\n\nA user, member of a group, with permission \"Developer\" can read \"Protected\" group variables, that should be accessible only to Maintainers\n\n### Steps to reproduce\n\n1. Alice is a member of the group \"Bob's developers\", with a role of \"Developer\".  \n2. Bob has created a group variable, marked as \"protected\", called \"My_most_deep_secret\". Alice (nor any other developer) has access to this group variable.  Bob is very careful to what he merges in protected branches, to do not disclose the group variable.  \n3. Alice creates a new project under **her own namespace**, something like `Alice/i_steal_everything`. Alice is, of course, owner of this new project.  \n4. Alice uses the new [transfer api](https://docs.gitlab.com/ee/user/project/settings/#transferring-an-existing-project-into-another-namespace) to transfer the project under the \"Bob's developers\" namespace.  \n5. Alice is now maintainer of this project. Thus, she can choose which branches are protected.  \n6. Alice creates a `.gitlab-ci.yml` file where she prints the protected variable (just `echo ${My_most_deep_secret}`  \n7. Alice now protects the branch with this file, and she is able to having the secret variable injected.\n\nAlice has access to the value of \"\"My_most_deep_secret\" by Bob - that btw, was \"I_love_Alice\" ;).\n\nThe documentation says   \n\u003e You can transfer an existing project into a group if:  \n\u003e - You have at least Maintainer permissions to that group.\n\nThat is actually not true. [The code](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/app/services/projects/transfer_service.rb#L94) checks only if the user can _create_ a project, and you need only to be a developer to create a project in a group.\n\n```  \ndef allowed_transfer?(current_user, project)  \n      @new_namespace \u0026\u0026  \n        can?(current_user, :change_namespace, project) \u0026\u0026  \n        @new_namespace.id != project.namespace_id \u0026\u0026  \n        current_user.can?(:create_projects, @new_namespace)  \n  end  \n```\n\n### Impact\n\nAccording to the [Gitlab's guide](https://docs.gitlab.com/ee/ci/variables/#group-level-environment-variables), using group variables\n\n\u003e  It’s the recommended method to use for storing things like passwords, SSH keys, and credentials.\n\nEvery developer in a group has then access to password, SSH keys, and credentials that shouldn't have access to, probably of production environments.\n\nI suppose there are other possible impacts being able to escalate privileges inside a project of a group, but I don't find any other example right now.\n\n### Examples\n\nYou need to have an user with access to a group as developer. I have a group with a secret variable, I can give access to when requested\n\n### What is the current *bug* behavior?\n\nAlice can transfer the project / Alice is maintainer of the project.\n\n### What is the expected *correct* behavior?\n\nAlice cannot transfer the project, or at least she is not maintainer of the new project - as when you create a new project inside a group as a developer, you are not maintainer but developer\n\n### Output of checks\n\nThis bug happens on GitLab.com\n\n## Impact\n\nAccording to the [Gitlab's guide](https://docs.gitlab.com/ee/ci/variables/#group-level-environment-variables), using group variables\n\n\u003e  It’s the recommended method to use for storing things like passwords, SSH keys, and credentials.\n\nEvery developer in a group has then access to password, SSH keys, and credentials that shouldn't have access to, probably of production environments.","state":"closed","created_at":"2019-06-27T23:26:40.021Z","updated_at":"2022-07-04T13:59:09.005Z","closed_at":"2019-12-05T04:15:32.400Z","closed_by":{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"},"labels":["Category:Subgroups","Deliverable","HackerOne","backend","devops::manage","estimation::needed","group::authentication and authorization","priority::2","security","severity::2","workflow::in review"],"milestone":{"id":891796,"iid":39,"group_id":9970,"title":"12.5","description":"https://about.gitlab.com/releases/2019/11/22/gitlab-12-5-released","state":"closed","created_at":"2019-05-31T08:38:03.087Z","updated_at":"2020-04-27T16:27:03.474Z","due_date":"2019-11-17","start_date":"2019-10-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/39"},"assignees":[{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},{"id":4093067,"username":"manojmj","name":"Manoj M J","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4093067/avatar.png","web_url":"https://gitlab.com/manojmj"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1086520,"username":"jeremy-gl","name":"Jeremy Watson (ex-GitLab)","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/1086520/avatar.png","web_url":"https://gitlab.com/jeremy-gl"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2019-08-23","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29757","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29757","notes":"https://gitlab.com/api/v4/projects/278964/issues/29757/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29757/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29757","relative":"#29757","full":"gitlab-org/gitlab#29757"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22330580,"iid":12471,"project_id":278964,"title":"Dependency Scanning Fails: \"engine 'node' is incompatible with this module\"","description":"\u003c!---\nPlease read this!\n\nBefore opening a new issue, make sure to search for keywords in the issues\nfiltered by the \"regression\" or \"bug\" label.\n\nFor the Community Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ce/issues?label_name%5B%5D=bug\n\nFor the Enterprise Edition issue tracker:\n\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=regression\n- https://gitlab.com/gitlab-org/gitlab-ee/issues?label_name%5B%5D=bug\n\nand verify the issue you're about to submit isn't a duplicate.\n---\u003e\n\n### Summary\n\nOur Node.js project was successfully using Dependency Scanning for a while.  It began to fail once we added a yarn.lock file.   The project requires Node.js engine 10.16.0 LTS.  However, when the dependency scanning job kicks off it loads retire.js scanner which then fails, possibly because it loads Node.js 11.15.0 and some of the modules are incompatible with that version.  Following is the error message where \"abc-node@0.0.1\" is one of our packages the build requires\n\n```\nInstalling dependencies…yarn install v1.16.0\n\u003e\u003e\u003e[1/5] Validating package.json…\nerror abc-node@0.0.1: The engine “node” is incompatible with this module. Expected version\n“\u003e=10.0.0 \u003c11.0.0”. Got “11.15.0”\nerror Found incompatible module.\n```\n\n### Steps to reproduce\n\n* In a GitLab project that contains Node.js code, configure the Dependency Scanning job.  Verify that it works.\n* The Node.js project should be using the TLS engine, currently 10.16.0. Add the following section to the project's `package.json` file\n```json\n  \"engines\": {\n    \"node\": \"\u003e=10.0.0 \u003c11.0.0\"\n  },\n```\n* Make sure the project pulls a package version that is incompatible\n* Implement yarn.lock\n\n### Example Project\n\nN/A - this is an internal project\n\n### What is the current *bug* behavior?\n\nDependency Scanning job fails presumably because it's installing dependencies with a newer version of Node engine that is not compatible with all of our packages.\n\n### What is the expected *correct* behavior?\n\nDependency scanning should work with yarn.lock files and adhere to the required node engine version. \n\n### Relevant logs and/or screenshots\n\n```\nInstalling dependencies…yarn install v1.16.0\n\u003e\u003e\u003e[1/5] Validating package.json…\nerror abc-node@0.0.1: The engine “node” is incompatible with this module. Expected version\n“\u003e=10.0.0 \u003c11.0.0”. Got “11.15.0”\nerror Found incompatible module.\n```\n\n### Output of checks\n\n(If you are reporting a bug on GitLab.com, write: This bug happens on GitLab.com)\n\n#### Results of GitLab environment info\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to GitLab environment info\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:env:info`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n#### Results of GitLab application Check\n\n\u003cdetails\u003e\n\u003csummary\u003eExpand for output related to the GitLab application check\u003c/summary\u003e\n\u003cpre\u003e\n\n(For installations with omnibus-gitlab package run and paste the output of:\n`sudo gitlab-rake gitlab:check SANITIZE=true`)\n\n(For installations from source run and paste the output of:\n`sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true`)\n\n(we will only investigate if the tests are passing)\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\n### Possible fixes\n\n(If you can, link to the line of code that might be responsible for the problem)","state":"closed","created_at":"2019-06-27T19:48:53.263Z","updated_at":"2020-04-17T15:34:21.112Z","closed_at":"2019-08-27T08:39:25.663Z","closed_by":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"labels":["Category:Dependency Scanning","Category:License Compliance","Deliverable","Enterprise Edition","backend","customer","devops::secure","group::composition analysis","priority::4","severity::4","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"}],"author":{"id":2175632,"username":"ReddingBacon","name":"Redding Bacon","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2175632/avatar.png","web_url":"https://gitlab.com/ReddingBacon"},"type":"ISSUE","assignee":{"id":3696420,"username":"caneldem","name":"Can Eldem","state":"blocked","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3696420/avatar.png","web_url":"https://gitlab.com/caneldem"},"user_notes_count":12,"merge_requests_count":0,"upvotes":1,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12471","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12471","notes":"https://gitlab.com/api/v4/projects/278964/issues/12471/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12471/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12471","relative":"#12471","full":"gitlab-org/gitlab#12471"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22328936,"iid":12469,"project_id":278964,"title":"Can't assign group milestone to project issue board","description":"Might be a known issue but seems more like a bug. \n\nI have a milestone defined in our main group (sprint) \n\nOur group consists of a bunch of projects with issues. \n\nI make a new issue board a project, and the option is there to assign our main group sprint milestone to it which would be great.\n\nIt allows me to select the milestone.\n\nWhen I click ok, it just reverts back to no milestone. \n\nThe ability to have boards under each project that are assigned to the main sprint milestone of our group would be very helpful to devs/BA's working within individual projects. \n\nThanks!\nRob","state":"closed","created_at":"2019-06-27T18:36:30.845Z","updated_at":"2022-05-19T16:07:21.936Z","closed_at":"2019-09-16T08:30:11.930Z","closed_by":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"labels":["Category:Team Planning","Enterprise Edition","backend","boards","devops::plan","group::project management","milestones","priority::3","severity::2","type::bug"],"milestone":{"id":731038,"iid":37,"group_id":9970,"title":"12.3","description":"https://about.gitlab.com/releases/2019/09/22/gitlab-12-3-released/","state":"closed","created_at":"2018-12-07T12:40:55.400Z","updated_at":"2020-04-23T21:06:04.173Z","due_date":"2019-09-17","start_date":"2019-08-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/37"},"assignees":[{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"}],"author":{"id":4193781,"username":"robertreid","name":"Rob Reid","state":"active","avatar_url":"https://secure.gravatar.com/avatar/866249300f2aabee16a2102d097a9c17?s=80\u0026d=identicon","web_url":"https://gitlab.com/robertreid"},"type":"ISSUE","assignee":{"id":2880930,"username":"engwan","name":"Heinrich Lee Yu","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2880930/avatar.png","web_url":"https://gitlab.com/engwan"},"user_notes_count":8,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12469","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12469","notes":"https://gitlab.com/api/v4/projects/278964/issues/12469/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12469/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12469","relative":"#12469","full":"gitlab-org/gitlab#12469"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24698920,"iid":29748,"project_id":278964,"title":"ESCALATED: Bypass Disabled Repo by URL Project Creation","description":"**[HackerOne report #630263](https://hackerone.com/reports/630263)** by `ngalog` on 2019-06-26, assigned to `estrike`:\n\n### Summary  \nAs an admin, you can disable Repo by URL project creation in admin page `https://:gitlab_instance/admin/application_settings`\n\nHowever the user can still import project using repo by url regardless of the setting\n\n### Steps to reproduce  \n\n- As an admin, disable `Repo by URL` import source in `/admin/application_settings/general` under ` Visibility and access controls`\n\n![image](/uploads/eaac6a0b2f0b550ff16b6b0b3d6f94de/image.png)\n\n- As a regular user, run the following curl command:\n\n```bash\ncurl 'http://gitlab.local/-/projects' \\\n    -H 'Content-Type: application/x-www-form-urlencoded' \\\n    -H \"Cookie: $COOKIE\" \\\n    --data-raw \"utf8=%E2%9C%93\u0026authenticity_token=$VALID_AUTHENTICITY_TOKEN\u0026project%5Bimport_url%5D=https%3A%2F%2Fgitlab.com%2Fgitlab-org%2Frelease-cli.git\u0026project%5Bimport_url_user%5D=\u0026project%5Bimport_url_password%5D=\u0026project%5Bci_cd_only%5D=false\u0026project%5Bname%5D=Importing+Even+If+Disabled\u0026project%5Bnamespace_id%5D=7\u0026project%5Bpath%5D=importing-even-if-disabled\u0026project%5Bdescription%5D=\u0026project%5Bvisibility_level%5D=0\"\n```\n\nThis command sends a request equivalent to what happens when using the `Repo by URL` import methods in the UI. It will import the `gitlab-org/release-cli` project by URL. In my case I got the response\n\n```html\n\u003chtml\u003e\u003cbody\u003eYou are being \u003ca href=\"http://gitlab.local/attacker/importing-even-if-disabled\"\u003eredirected\u003c/a\u003e.\u003c/body\u003e\u003c/html\u003e\n```\n\nand the project was imported anyway.\n\n### Impact  \nBypass project creation despite the admin setting explcitily disallow it\n\n### What is the current *bug* behavior?  \nBypass project creation despite the admin setting explcitily disallow it\n\n\n\nreproduced on gitlab CE 11.11.3 (gitlab-ce@e3eeb779d72006b9fbbaecf9f1d8fbd52a7d6383)\n\n## Impact\n\nbypass project creation by repo by url","state":"closed","created_at":"2019-06-27T17:59:44.140Z","updated_at":"2021-11-02T14:56:06.045Z","closed_at":"2021-09-30T18:53:19.034Z","closed_by":{"id":4554599,"username":"m_gill","name":"Michelle Gill","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4554599/avatar.png","web_url":"https://gitlab.com/m_gill"},"labels":["Category:Importers","Deliverable","Engineering Allocation","FY22::Q3","HackerOne","Importer:Git","Next Up","Weakness::CWE-285","backend","devops::manage","estimation::completed","group::import","milestone::p3","priority::3","quad-planning::complete-no-action","section::dev","security","security-backlog::valid","severity::3","workflow::in review","🍒"],"milestone":{"id":1948702,"iid":63,"group_id":9970,"title":"14.3","description":"https://about.gitlab.com/releases/archives.html","state":"closed","created_at":"2021-03-17T21:43:36.613Z","updated_at":"2022-04-21T07:25:29.231Z","due_date":"2021-09-17","start_date":"2021-08-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/63"},"assignees":[{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":1230286,"username":"xanf","name":"Illya Klymov","state":"active","avatar_url":"https://secure.gravatar.com/avatar/ce4d16557b46210fa57641531b570dd4?s=80\u0026d=identicon","web_url":"https://gitlab.com/xanf"},"user_notes_count":19,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29748","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29748","notes":"https://gitlab.com/api/v4/projects/278964/issues/29748/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29748/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29748","relative":"#29748","full":"gitlab-org/gitlab#29748"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":6619,"epic":{"id":332692,"iid":6619,"title":"Manage:Import Security","url":"/groups/gitlab-org/-/epics/6619","group_id":9970,"human_readable_end_date":"Dec 16, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":22322264,"iid":12464,"project_id":278964,"title":"Remove unused GitPushService","description":"I noticed we recently [renamed `GitPushService` to `Git::BranchPushService`](https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/26547) but `ee/app/services/ee/git_push_service.rb` still exists and is only referenced in `db/fixtures/development/17_cycle_analytics.rb`.","state":"closed","created_at":"2019-06-27T14:15:10.412Z","updated_at":"2019-08-12T14:57:54.576Z","closed_at":"2019-07-08T09:15:47.368Z","closed_by":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"labels":["Create [DEPRECATED]","Enterprise Edition","Stretch","backend","backstage [DEPRECATED]","devops::create","group::editor"],"milestone":{"id":693520,"iid":34,"group_id":9970,"title":"12.1","description":"https://about.gitlab.com/releases/2019/07/22/gitlab-12-1-released","state":"closed","created_at":"2018-10-30T16:47:58.826Z","updated_at":"2020-04-27T16:30:09.107Z","due_date":"2019-07-22","start_date":"2019-06-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/34"},"assignees":[{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"user_notes_count":1,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12464","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":1,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12464","notes":"https://gitlab.com/api/v4/projects/278964/issues/12464/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12464/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12464","relative":"#12464","full":"gitlab-org/gitlab#12464"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22322003,"iid":12463,"project_id":278964,"title":"Avoid indexing twice when pull mirroring","description":"The following discussion from !14413 should be addressed:\n\n- [ ] @nick.thomas started a [discussion](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14413#note_185749956):  (+3 comments)\n\n    \u003e Hmmm. I'm actually starting to wonder if we need this code *at all*.\n    \u003e \n    \u003e Does a pull mirror running cause the git repository's `post-receive` hook to run? If so, then we'll be doing double work here. Perhaps we can remove this code altogether? We had a similar case for wiki indexing, for instance.\n    \u003e \n    \u003e It would need careful manual testing to verify, since the hooks don't run in the gitlab-ee test suite :(\n\n### Findings\n\n- Pull mirroring **does** trigger `post-receive`\n- Importing does **not** trigger `post-receive`\n- On the project import form we have a checkbox to enable mirroring at the same time\n\n### Possible solutions\n\n- Making the hooks run in the import case\n- Distinguishing between the two cases in `ProjectImportState`","state":"closed","created_at":"2019-06-27T14:12:21.896Z","updated_at":"2019-09-03T13:31:25.719Z","closed_at":"2019-09-03T13:31:25.669Z","closed_by":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"labels":["Create [DEPRECATED]","Enterprise Edition","advanced search","backend","bug::performance","devops::create","group::editor","workflow::in dev"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"}],"author":{"id":423116,"username":"toupeira","name":"Markus Koller","state":"active","avatar_url":"https://secure.gravatar.com/avatar/7585ed50675c4febe7619f25b44f7fe0?s=80\u0026d=identicon","web_url":"https://gitlab.com/toupeira"},"type":"ISSUE","assignee":{"id":955795,"username":"fjsanpedro","name":"Francisco Javier López","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/955795/avatar.png","web_url":"https://gitlab.com/fjsanpedro"},"user_notes_count":4,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12463","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":1,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":true,"task_status":"0 of 1 checklist item completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12463","notes":"https://gitlab.com/api/v4/projects/278964/issues/12463/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12463/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12463","relative":"#12463","full":"gitlab-org/gitlab#12463"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22309919,"iid":12459,"project_id":278964,"title":"Do not update `updated_at` on an epic when reordering it.","description":"### Description\n\nPer https://gitlab.com/gitlab-org/gitlab-ce/issues/44949#note_185903054\n\nThis case is similar to https://gitlab.com/gitlab-org/gitlab-ce/issues/44949, it's not expected behaviour to update timestamps when a resource only changes its relative position.\n\n### Current Behaviour\n\nWhen reordering child epics, timestamps are updated\n\n![Screenshot_2019-06-27_at_10.06.41](/uploads/39af666514b944f4b663f1595a360f1f/Screenshot_2019-06-27_at_10.06.41.png) \n\nOutput\n---\n\n![Screenshot_2019-06-27_at_10.09.23](/uploads/263d6f33c5c70ddb3662fd285dc27d71/Screenshot_2019-06-27_at_10.09.23.png)","state":"closed","created_at":"2019-06-27T09:16:06.232Z","updated_at":"2022-05-19T16:07:21.760Z","closed_at":"2019-07-04T00:38:27.906Z","closed_by":{"id":2535118,"username":"tkuah","name":"Thong Kuah","state":"active","avatar_url":"https://secure.gravatar.com/avatar/f7b51bdd49a4914d29504d7ff4c3f7b9?s=80\u0026d=identicon","web_url":"https://gitlab.com/tkuah"},"labels":["Enterprise Edition","backend","devops::plan","group::product planning"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"}],"author":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"type":"ISSUE","assignee":{"id":3860200,"username":"egrieff","name":"Eugenia Grieff","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/3860200/avatar.png","web_url":"https://gitlab.com/egrieff"},"user_notes_count":3,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12459","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12459","notes":"https://gitlab.com/api/v4/projects/278964/issues/12459/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12459/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12459","relative":"#12459","full":"gitlab-org/gitlab#12459"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22300384,"iid":12455,"project_id":278964,"title":"rspec geo pg-10 ee 1/3 failing job in master","description":"https://gitlab.com/gitlab-org/gitlab-ee/-/jobs/240848214\n\n```sh\nFailures:\n\n  1) Geo::RepositoryVerification::Secondary::ShardWorker#perform resource loading handles multiple batches of projects needing verification\n     Failure/Error: yield lease\n\n       #\u003cGeo::RepositoryVerification::Secondary::SingleWorker (class)\u003e received :perform_async with unexpected arguments\n         expected: (250)\n              got: (251)\n     # ./vendor/ruby/2.6.0/gems/rspec-support-3.7.1/lib/rspec/support.rb:97:in `block in \u003cmodule:Support\u003e'\n     # ./vendor/ruby/2.6.0/gems/rspec-support-3.7.1/lib/rspec/support.rb:106:in `notify_failure'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/error_generator.rb:327:in `notify'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/error_generator.rb:311:in `__raise'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/error_generator.rb:55:in `raise_unexpected_message_args_error'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/message_expectation.rb:501:in `raise_unexpected_message_args_error'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/proxy.rb:187:in `message_received'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/proxy.rb:326:in `message_received'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/method_double.rb:77:in `proxy_method_invoked'\n     # ./vendor/ruby/2.6.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/method_double.rb:64:in `block (2 levels) in define_proxy_method'\n     # ./ee/app/workers/geo/repository_verification/secondary/shard_worker.rb:44:in `schedule_job'\n     # ./ee/app/workers/geo/scheduler/scheduler_worker.rb:184:in `block in schedule_jobs'\n     # ./ee/app/workers/geo/scheduler/scheduler_worker.rb:184:in `map'\n     # ./ee/app/workers/geo/scheduler/scheduler_worker.rb:184:in `schedule_jobs'\n     # ./ee/app/workers/geo/scheduler/scheduler_worker.rb:55:in `block (2 levels) in perform'\n     # ./ee/app/workers/geo/scheduler/scheduler_worker.rb:42:in `loop'\n     # ./ee/app/workers/geo/scheduler/scheduler_worker.rb:42:in `block in perform'\n     # ./app/services/concerns/exclusive_lease_guard.rb:29:in `try_obtain_lease'\n     # ./ee/app/workers/geo/scheduler/scheduler_worker.rb:37:in `perform'\n     # ./ee/app/workers/geo/scheduler/secondary/scheduler_worker.rb:18:in `perform'\n\n-- snip --\n\nFinished in 3 minutes 7.4 seconds (files took 20 seconds to load)\n379 examples, 1 failure\n\nFailed examples:\n\nrspec ./ee/spec/workers/geo/repository_verification/secondary/shard_worker_spec.rb:99 # Geo::RepositoryVerification::Secondary::ShardWorker#perform resource loading handles multiple batches of projects needing verification\n```","state":"closed","created_at":"2019-06-27T02:25:00.804Z","updated_at":"2019-12-11T20:02:33.455Z","closed_at":"2019-09-25T14:36:09.893Z","closed_by":{"id":283999,"username":"dbalexandre","name":"Douglas Barbosa Alexandre","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/283999/avatar.png","web_url":"https://gitlab.com/dbalexandre"},"labels":["Enterprise Edition","Geo Administration","devops::systems","failure::flaky-test","group::geo","priority::3","severity::3","test"],"milestone":{"id":731039,"iid":38,"group_id":9970,"title":"12.4","description":"https://about.gitlab.com/releases/2019/10/22/gitlab-12-4-released","state":"closed","created_at":"2018-12-07T12:41:53.212Z","updated_at":"2020-04-27T16:30:43.889Z","due_date":"2019-10-17","start_date":"2019-09-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/38"},"assignees":[{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"}],"author":{"id":2187482,"username":"ashmckenzie","name":"Ash McKenzie","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2187482/avatar.png","web_url":"https://gitlab.com/ashmckenzie"},"type":"ISSUE","assignee":{"id":660180,"username":"toon","name":"Toon Claes","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/660180/avatar.png","web_url":"https://gitlab.com/toon"},"user_notes_count":24,"merge_requests_count":2,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12455","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12455","notes":"https://gitlab.com/api/v4/projects/278964/issues/12455/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12455/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12455","relative":"#12455","full":"gitlab-org/gitlab#12455"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22298638,"iid":12452,"project_id":278964,"title":"Expose AwardEmoji in GraphQL","description":"### Problem to solve\n\nWe should expose `AwardEmoji`s on the following GraphQL types:\n\n- `Types::Notes::NoteType`\n- `Types::MergeRequestType`\n- `Types::IssueType`\n\nThis should be done using an Interface so the field can be shared, similar to the existing `Types::Notes::NoteableType` interface. The `field` in the interface should return `[Types::AwardEmojis::AwardEmojiType]`.","state":"closed","created_at":"2019-06-27T00:27:03.169Z","updated_at":"2019-08-12T14:57:57.302Z","closed_at":"2019-06-27T00:27:34.248Z","closed_by":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"labels":["Create [DEPRECATED]","Enterprise Edition","GraphQL","devops::create","type::feature"],"milestone":null,"assignees":[],"author":{"id":2702368,"username":".luke","name":"Luke Duncalfe","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2702368/avatar.png","web_url":"https://gitlab.com/.luke"},"type":"ISSUE","assignee":null,"user_notes_count":0,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12452","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12452","notes":"https://gitlab.com/api/v4/projects/278964/issues/12452/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12452/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12452","relative":"#12452","full":"gitlab-org/gitlab#12452"},"severity":"UNKNOWN","moved_to_id":22298644,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":24698872,"iid":29719,"project_id":278964,"title":"Measure GDK/webpack memory consumption with a CI job","description":"One of the mandates of the [webpack working group](https://about.gitlab.com/company/team/structure/working-groups/webpack/) is to improve (reduce) the memory requirements of the GDK. Before we can make any progress in this area, we should have a reliable way to measure our progress.\n\nWe should create a CICD job (either in gitlab-ce or gitlab-development-kit) which will measure this for us by running the `webpack-dev-server` process and measuring its memory consumption once it is in its \"ready\" state.","state":"closed","created_at":"2019-06-26T22:55:56.267Z","updated_at":"2019-10-15T14:25:51.070Z","closed_at":"2019-10-15T06:11:10.112Z","closed_by":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"labels":["webpack"],"milestone":null,"assignees":[{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"}],"author":{"id":408677,"username":"ClemMakesApps","name":"Clement Ho","state":"active","avatar_url":"https://secure.gravatar.com/avatar/013b4af8b474654bce8039ecd262a84a?s=80\u0026d=identicon","web_url":"https://gitlab.com/ClemMakesApps"},"type":"ISSUE","assignee":{"id":636429,"username":"mikegreiling","name":"Mike Greiling","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/636429/avatar.png","web_url":"https://gitlab.com/mikegreiling"},"user_notes_count":4,"merge_requests_count":0,"upvotes":2,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29719","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":2,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29719","notes":"https://gitlab.com/api/v4/projects/278964/issues/29719/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29719/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29719","relative":"#29719","full":"gitlab-org/gitlab#29719"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1540,"epic":{"id":8709,"iid":1540,"title":"Improve GitLab's development environment by reducing webpack memory consumption by 30%","url":"/groups/gitlab-org/-/epics/1540","group_id":9970,"human_readable_end_date":"Feb 17, 2021","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null},{"id":24698853,"iid":29713,"project_id":278964,"title":"Graphql: Add additional sort values for Issues and Issuables","description":"Add additional sort values for `Issues` and `Issuables`, which can then be leveraged for `Epics`, such as for https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/14311\n\nAlready support:\n\n- created_asc\n- created_desc\n- updated_asc\n- updated_desc\n\nNeeded:\n\n- [x] due_date : https://gitlab.com/gitlab-org/gitlab/merge_requests/18094\n- [x] relative_position : https://gitlab.com/gitlab-org/gitlab/merge_requests/19713\n- [x] popularity : https://gitlab.com/gitlab-org/gitlab/merge_requests/14311\n- [x] weight : https://gitlab.com/gitlab-org/gitlab/merge_requests/19721\n\n\nBroke out these out into separate issues due to their complexity:\n\n- priority : #38293 \n- label_priority : #38295 \n- milestone_due : #38296","state":"closed","created_at":"2019-06-26T18:46:22.615Z","updated_at":"2021-03-18T22:40:48.250Z","closed_at":"2020-01-16T21:18:23.000Z","closed_by":{"id":4303289,"username":"gweaver","name":"Gabe Weaver","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/4303289/avatar.png","web_url":"https://gitlab.com/gweaver"},"labels":["Deliverable","GraphQL","backend","devops::plan","group::project management","missed-deliverable","missed:12.3","missed:12.4","missed:12.5","missed:12.6"],"milestone":{"id":891798,"iid":41,"group_id":9970,"title":"12.7","description":"https://about.gitlab.com/releases/2020/01/22/gitlab-12-7-released/","state":"closed","created_at":"2019-05-31T08:38:04.523Z","updated_at":"2020-05-19T13:46:24.737Z","due_date":"2020-01-17","start_date":"2019-12-18","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/41"},"assignees":[{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"}],"author":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"type":"ISSUE","assignee":{"id":194645,"username":"digitalmoksha","name":"Brett Walker","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/194645/avatar.png","web_url":"https://gitlab.com/digitalmoksha"},"user_notes_count":4,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/29713","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":4,"completed_count":4},"weight":5,"blocking_issues_count":0,"has_tasks":true,"task_status":"4 of 4 checklist items completed","_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/29713","notes":"https://gitlab.com/api/v4/projects/278964/issues/29713/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/29713/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#29713","relative":"#29713","full":"gitlab-org/gitlab#29713"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":null,"epic":null,"iteration":null,"health_status":null},{"id":22283440,"iid":12446,"project_id":278964,"title":"Add private/public projects in group Insights","description":"**[HackerOne report #626394](https://hackerone.com/reports/626394)** by `ashish_r_padelkar` on 2019-06-23, assigned to `jritchey`:\n\n\n\n### Summary\n\nHello,\n\nThere is anew feature available in Groups at `https://gitlab.com/groups/\u003cGroupName\u003e/-/edit` called `Insights`\n\n![Screenshot_2019-06-23_at_17.24.55.png](https://h1.sec.gitlab.net/a/77632a2c-ef57-4086-ba1d-384f126a3c7f/Screenshot_2019-06-23_at_17.24.55.png)\n\nIn this, you can select the projects available with in a group. However, It is also possible to add public projects here or even a private projects which doesnt belong to this group using this bug!\n\nPrivate project names are not visible though if you dont have access to it.\n\n### Steps to reproduce\n\n1. As a group owner, navigate to `https://gitlab.com/groups/\u003cGroupName\u003e/-/edit` --\u003e`Insights`  \n2. Select the available projects and save.  \n3. Capture the below request.\n\n```  \nPOST /newgroup_t HTTP/1.1  \nHost: gitlab.com  \nConnection: close  \nContent-Length: 223  \nCache-Control: max-age=0  \nOrigin: https://gitlab.com  \nUpgrade-Insecure-Requests: 1  \nContent-Type: application/x-www-form-urlencoded  \nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36  \nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3  \nReferer: https://gitlab.com/groups/newgroup_t/-/edit  \nAccept-Encoding: gzip, deflate  \nAccept-Language: en-GB,en-US;q=0.9,en;q=0.8  \nCookie: 1\n\nutf8=%E2%9C%93\u0026_method=patch\u0026authenticity_token=1\u0026group[insight_attributes][id]=7\u0026group[insight_attributes][project_id]=12862937  \n```\n\n4. Replace the value of `group[insight_attributes][project_id]` to any public/private project ID\n\n5. Send the request. If it is public project ID, then you should see the name when you reload. If its private then you will see blank but the project is added as you can verify using view source and you will find the project ID added to it.\n\n\n\n\n### What is the current *bug* behavior?\n\nIt is possible to add projects which doesn't belong to group in Insights section\n\n### What is the expected *correct* behavior?\n\nOnly project belongs to group should be allowed to add.\n\n\n\n### Output of checks\n\nThis bug happens on GitLab.com and may be on omnibus installations too!\n\nRegards,  \nAshish\n\n## Impact\n\nWhile it's possible to add public /private project in Insight section using IDOR, i am not completely sure about its overall impact but fixing this might be useful for future bug cases that might occur because of this.\n\n## Attachments\n**Warning:** Attachments received through HackerOne, please exercise caution!\n* [Screenshot_2019-06-23_at_17.24.55.png](https://h1.sec.gitlab.net/a/77632a2c-ef57-4086-ba1d-384f126a3c7f/Screenshot_2019-06-23_at_17.24.55.png)","state":"closed","created_at":"2019-06-26T16:44:03.391Z","updated_at":"2022-07-04T13:55:00.066Z","closed_at":"2019-07-30T07:43:21.828Z","closed_by":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"labels":["Enterprise Edition","HackerOne","Quality","devops::monitor","insights","priority::3","security","severity::4"],"milestone":{"id":693521,"iid":35,"group_id":9970,"title":"12.2","description":"https://about.gitlab.com/releases/2019/08/22/gitlab-12-2-released","state":"closed","created_at":"2018-10-30T16:48:32.567Z","updated_at":"2020-04-27T16:30:20.799Z","due_date":"2019-08-22","start_date":"2019-07-08","expired":true,"web_url":"https://gitlab.com/groups/gitlab-org/-/milestones/35"},"assignees":[{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"}],"author":{"id":2741139,"username":"gitlab-securitybot","name":"GitLab SecurityBot","state":"active","avatar_url":"https://gitlab.com/uploads/-/system/user/avatar/2741139/avatar.png","web_url":"https://gitlab.com/gitlab-securitybot"},"type":"ISSUE","assignee":{"id":128633,"username":"rymai","name":"Rémy Coutable","state":"active","avatar_url":"https://secure.gravatar.com/avatar/263da227929cc0035cb0eba512bcf81a?s=80\u0026d=identicon","web_url":"https://gitlab.com/rymai"},"user_notes_count":12,"merge_requests_count":0,"upvotes":0,"downvotes":0,"due_date":"2020-01-22","confidential":false,"discussion_locked":null,"issue_type":"issue","web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/12446","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":3,"blocking_issues_count":0,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/12446","notes":"https://gitlab.com/api/v4/projects/278964/issues/12446/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/12446/award_emoji","project":"https://gitlab.com/api/v4/projects/278964","closed_as_duplicate_of":null},"references":{"short":"#12446","relative":"#12446","full":"gitlab-org/gitlab#12446"},"severity":"UNKNOWN","moved_to_id":null,"service_desk_reply_to":null,"epic_iid":1462,"epic":{"id":8334,"iid":1462,"title":"Quality: Measure track","url":"/groups/gitlab-org/-/epics/1462","group_id":9970,"human_readable_end_date":"Dec 17, 2020","human_readable_timestamp":"\u003cstrong\u003ePast due\u003c/strong\u003e"},"iteration":null,"health_status":null}]